<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: HexagonHardwareLoops.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('HexagonHardwareLoops_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">HexagonHardwareLoops.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="HexagonHardwareLoops_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===-- HexagonHardwareLoops.cpp - Identify and generate hardware loops ---===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// This pass identifies loops where we can generate the Hexagon hardware</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// loop instruction.  The hardware loop can perform loop branches with a</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// zero-cycle overhead.</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// The pattern that defines the induction variable can changed depending on</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// prior optimizations.  For example, the IndVarSimplify phase run by &#39;opt&#39;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">// normalizes induction variables, and the Loop Strength Reduction pass</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">// run by &#39;llc&#39; may also make changes to the induction variable.</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">// The pattern detected by this phase is due to running Strength Reduction.</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// Criteria for hardware loops:</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">//  - Countable loops (w/ ind. var for a trip count)</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">//  - Assumes loops are normalized by IndVarSimplify</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">//  - Try inner-most loops first</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">//  - No nested hardware loops.</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">//  - No function calls in loops.</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div><div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="HexagonHardwareLoops_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   29</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;hwloops&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallSet_8h.html">llvm/ADT/SmallSet.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineDominators_8h.html">llvm/CodeGen/MachineDominators.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineFunction_8h.html">llvm/CodeGen/MachineFunction.h</a>&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineFunctionPass_8h.html">llvm/CodeGen/MachineFunctionPass.h</a>&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineInstrBuilder_8h.html">llvm/CodeGen/MachineInstrBuilder.h</a>&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineLoopInfo_8h.html">llvm/CodeGen/MachineLoopInfo.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineRegisterInfo_8h.html">llvm/CodeGen/MachineRegisterInfo.h</a>&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PassSupport_8h.html">llvm/PassSupport.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetInstrInfo_8h.html">llvm/Target/TargetInstrInfo.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Hexagon_8h.html">Hexagon.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="HexagonTargetMachine_8h.html">HexagonTargetMachine.h</a>&quot;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;int&gt;</a> <a class="code" href="HexagonHardwareLoops_8cpp.html#a462dfa38055b260abcd8b296b0fd1150">HWLoopLimit</a>(<span class="stringliteral">&quot;max-hwloop&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(-1));</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<a class="code" href="HexagonHardwareLoops_8cpp.html#a1bfb784833ebd5c123c31a319c3a67c0">STATISTIC</a>(NumHWLoops, <span class="stringliteral">&quot;Number of loops converted to hardware loops&quot;</span>);</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#aec90335b734fccd44f087326d9a6e7a1">initializeHexagonHardwareLoopsPass</a>(<a class="code" href="classllvm_1_1PassRegistry.html">PassRegistry</a>&amp;);</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;}</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="keyword">class </span>CountValue;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keyword">struct </span>HexagonHardwareLoops : <span class="keyword">public</span> <a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a> {</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a>            *MLI;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a>        *<a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <a class="code" href="classllvm_1_1MachineDominatorTree.html">MachineDominatorTree</a>       *MDT;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1HexagonTargetMachine.html">HexagonTargetMachine</a> *<a class="code" href="namespacellvm_1_1SystemZISD.html#a9a3c050e4bfe8d0d09d74c979f5bb121a68ace50a32835aa0562cf8f9694ba510">TM</a>;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1HexagonInstrInfo.html">HexagonInstrInfo</a>     *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1HexagonRegisterInfo.html">HexagonRegisterInfo</a>  *TRI;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span> Counter;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="keyword">public</span>:</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    HexagonHardwareLoops() : <a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a>(ID) {</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;      <a class="code" href="namespacellvm.html#aec90335b734fccd44f087326d9a6e7a1">initializeHexagonHardwareLoopsPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    }</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> runOnMachineFunction(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF);</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *getPassName()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="stringliteral">&quot;Hexagon Hardware Loops&quot;</span>; }</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const </span>{</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1MachineDominatorTree.html">MachineDominatorTree</a>&gt;();</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a>&gt;();</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      <a class="code" href="classllvm_1_1MachineFunctionPass.html#aa1eece37d175f86a6f4808c0c167f13b">MachineFunctionPass::getAnalysisUsage</a>(AU);</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    }</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keyword">private</span>:<span class="comment"></span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">    /// Kinds of comparisons in the compare instructions.</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment"></span>    <span class="keyword">struct </span>Comparison {</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      <span class="keyword">enum</span> <a class="code" href="namespacellvm_1_1EngineKind.html#a9df47239a42cd9621ac26d9ecbd57441">Kind</a> {</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <a class="code" href="regexec_8c.html#ac07acfbb082b04f5bea72998c8976b3c">EQ</a>  = 0x01,</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a0555f297eceee28e5fc20d282dfeb8f4">NE</a>  = 0x02,</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        L   = 0x04, <span class="comment">// Less-than property.</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <a class="code" href="MD5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>   = 0x08, <span class="comment">// Greater-than property.</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        U   = 0x40, <span class="comment">// Unsigned property.</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        LTs = L,</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        LEs = L | <a class="code" href="regexec_8c.html#ac07acfbb082b04f5bea72998c8976b3c">EQ</a>,</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        GTs = <a class="code" href="MD5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>,</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        GEs = <a class="code" href="MD5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a> | <a class="code" href="regexec_8c.html#ac07acfbb082b04f5bea72998c8976b3c">EQ</a>,</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        LTu = L      | U,</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        LEu = L | <a class="code" href="regexec_8c.html#ac07acfbb082b04f5bea72998c8976b3c">EQ</a> | U,</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        GTu = <a class="code" href="MD5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>      | U,</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        GEu = <a class="code" href="MD5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a> | <a class="code" href="regexec_8c.html#ac07acfbb082b04f5bea72998c8976b3c">EQ</a> | U</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      };</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      <span class="keyword">static</span> <a class="code" href="namespacellvm_1_1EngineKind.html#a9df47239a42cd9621ac26d9ecbd57441">Kind</a> getSwappedComparison(<a class="code" href="namespacellvm_1_1EngineKind.html#a9df47239a42cd9621ac26d9ecbd57441">Kind</a> Cmp) {</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        assert ((!((Cmp &amp; L) &amp;&amp; (Cmp &amp; <a class="code" href="MD5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>))) &amp;&amp; <span class="stringliteral">&quot;Malformed comparison operator&quot;</span>);</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <span class="keywordflow">if</span> ((Cmp &amp; L) || (Cmp &amp; <a class="code" href="MD5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>))</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;          <span class="keywordflow">return</span> (<a class="code" href="namespacellvm_1_1EngineKind.html#a9df47239a42cd9621ac26d9ecbd57441">Kind</a>)(Cmp ^ (L|<a class="code" href="MD5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>));</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        <span class="keywordflow">return</span> Cmp;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      }</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    };</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">    /// \brief Find the register that contains the loop controlling</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">    /// induction variable.</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">    /// If successful, it will return true and set the \p Reg, \p IVBump</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">    /// and \p IVOp arguments.  Otherwise it will return false.</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">    /// The returned induction register is the register R that follows the</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">    /// following induction pattern:</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">    /// loop:</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">    ///   R = phi ..., [ R.next, LatchBlock ]</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">    ///   R.next = R + #bump</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">    ///   if (R.next &lt; #N) goto loop</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">    /// IVBump is the immediate value added to R, and IVOp is the instruction</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">    /// &quot;R.next = R + #bump&quot;.</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> findInductionRegister(<a class="code" href="classllvm_1_1MachineLoop.html">MachineLoop</a> *L, <span class="keywordtype">unsigned</span> &amp;<a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>,</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                               int64_t &amp;IVBump, <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *&amp;IVOp) <span class="keyword">const</span>;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">    /// \brief Analyze the statements in a loop to determine if the loop</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">    /// has a computable trip count and, if so, return a value that represents</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">    /// the trip count expression.</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment"></span>    CountValue *getLoopTripCount(<a class="code" href="classllvm_1_1MachineLoop.html">MachineLoop</a> *L,</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                                 <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineInstr *&gt;</a> &amp;OldInsts);</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">    /// \brief Return the expression that represents the number of times</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">    /// a loop iterates.  The function takes the operands that represent the</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">    /// loop start value, loop end value, and induction value.  Based upon</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">    /// these operands, the function attempts to compute the trip count.</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">    /// If the trip count is not directly available (as an immediate value,</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">    /// or a register), the function will attempt to insert computation of it</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">    /// to the loop&#39;s preheader.</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment"></span>    CountValue *computeCount(<a class="code" href="classllvm_1_1MachineLoop.html">MachineLoop</a> *<a class="code" href="classllvm_1_1Loop.html">Loop</a>,</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                             <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> *Start,</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                             <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> *End,</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                             <span class="keywordtype">unsigned</span> IVReg,</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                             int64_t IVBump,</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                             <a class="code" href="namespacellvm_1_1EngineKind.html#a9df47239a42cd9621ac26d9ecbd57441">Comparison::Kind</a> Cmp) <span class="keyword">const</span>;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">    /// \brief Return true if the instruction is not valid within a hardware</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">    /// loop.</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> isInvalidLoopOperation(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>) <span class="keyword">const</span>;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">    /// \brief Return true if the loop contains an instruction that inhibits</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">    /// using the hardware loop.</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> containsInvalidInstruction(<a class="code" href="classllvm_1_1MachineLoop.html">MachineLoop</a> *L) <span class="keyword">const</span>;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">    /// \brief Given a loop, check if we can convert it to a hardware loop.</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">    /// If so, then perform the conversion and return true.</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> convertToHardwareLoop(<a class="code" href="classllvm_1_1MachineLoop.html">MachineLoop</a> *L);</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">    /// \brief Return true if the instruction is now dead.</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> isDead(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>,</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineInstr *&gt;</a> &amp;DeadPhis) <span class="keyword">const</span>;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment">    /// \brief Remove the instruction if it is now dead.</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> removeIfDead(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>);</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">    /// \brief Make sure that the &quot;bump&quot; instruction executes before the</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">    /// compare.  We need that for the IV fixup, so that the compare</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">    /// instruction would not use a bumped value that has not yet been</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">    /// defined.  If the instructions are out of order, try to reorder them.</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> orderBumpCompare(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *BumpI, <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *CmpI);</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">    /// \brief Get the instruction that loads an immediate value into \p R,</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment">    /// or 0 if such an instruction does not exist.</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment"></span>    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *defWithImmediate(<span class="keywordtype">unsigned</span> R);</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">    /// \brief Get the immediate value referenced to by \p MO, either for</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment">    /// immediate operands, or for register operands, where the register</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">    /// was defined with an immediate value.</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment"></span>    int64_t getImmediate(<a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO);</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">    /// \brief Reset the given machine operand to now refer to a new immediate</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">    /// value.  Assumes that the operand was already referencing an immediate</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">    /// value, either directly, or via a register.</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> setImmediate(<a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO, int64_t Val);</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment">    /// \brief Fix the data flow of the induction varible.</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment">    /// The desired flow is: phi ---&gt; bump -+-&gt; comparison-in-latch.</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment">    ///                                     |</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">    ///                                     +-&gt; back to phi</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">    /// where &quot;bump&quot; is the increment of the induction variable:</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">    ///   iv = iv + #const.</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">    /// Due to some prior code transformations, the actual flow may look</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">    /// like this:</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">    ///   phi -+-&gt; bump ---&gt; back to phi</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">    ///        |</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment">    ///        +-&gt; comparison-in-latch (against upper_bound-bump),</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">    /// i.e. the comparison that controls the loop execution may be using</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment">    /// the value of the induction variable from before the increment.</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">    ///</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">    /// Return true if the loop&#39;s flow is the desired one (i.e. it&#39;s</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">    /// either been fixed, or no fixing was necessary).</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">    /// Otherwise, return false.  This can happen if the induction variable</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">    /// couldn&#39;t be identified, or if the value in the latch&#39;s comparison</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">    /// cannot be adjusted to reflect the post-bump value.</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> fixupInductionVariable(<a class="code" href="classllvm_1_1MachineLoop.html">MachineLoop</a> *L);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">    /// \brief Given a loop, if it does not have a preheader, create one.</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">    /// Return the block that is the preheader.</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment"></span>    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *createPreheaderForLoop(<a class="code" href="classllvm_1_1MachineLoop.html">MachineLoop</a> *L);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  };</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">HexagonHardwareLoops::ID</a> = 0;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <span class="keywordtype">int</span> HexagonHardwareLoops::Counter = 0;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">  /// \brief Abstraction for a trip count of a loop. A smaller vesrsion</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment">  /// of the MachineOperand class without the concerns of changing the</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment">  /// operand representation.</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment"></span>  <span class="keyword">class </span>CountValue {</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="keyword">public</span>:</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keyword">enum</span> CountValueType {</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      CV_Register,</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      CV_Immediate</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    };</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="keyword">private</span>:</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    CountValueType <a class="code" href="namespacellvm_1_1EngineKind.html#a9df47239a42cd9621ac26d9ecbd57441">Kind</a>;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keyword">union </span>Values {</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      <span class="keyword">struct </span>{</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <span class="keywordtype">unsigned</span> Sub;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      } R;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <span class="keywordtype">unsigned</span> ImmVal;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    } Contents;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="keyword">public</span>:</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keyword">explicit</span> CountValue(CountValueType <a class="code" href="Target_2X86_2README_8txt.html#a544ce2b7de50b042a2d052c3d2831598">t</a>, <span class="keywordtype">unsigned</span> v, <span class="keywordtype">unsigned</span> u = 0) {</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      Kind = <a class="code" href="Target_2X86_2README_8txt.html#a544ce2b7de50b042a2d052c3d2831598">t</a>;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      <span class="keywordflow">if</span> (Kind == CV_Register) {</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        Contents.R.Reg = v;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        Contents.R.Sub = u;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        Contents.ImmVal = v;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      }</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    }</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="MipsInstPrinter_8cpp.html#a85e8dc708ae90b1129b892cb8ae1500f">isReg</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> Kind == CV_Register; }</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordtype">bool</span> isImm()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> Kind == CV_Immediate; }</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="AArch64Disassembler_8cpp.html#a30bccd0ebacd9892c243f7bd520e4aa0">getReg</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      assert(<a class="code" href="MipsInstPrinter_8cpp.html#a85e8dc708ae90b1129b892cb8ae1500f">isReg</a>() &amp;&amp; <span class="stringliteral">&quot;Wrong CountValue accessor&quot;</span>);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      <span class="keywordflow">return</span> Contents.R.Reg;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    }</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordtype">unsigned</span> getSubReg()<span class="keyword"> const </span>{</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      assert(<a class="code" href="MipsInstPrinter_8cpp.html#a85e8dc708ae90b1129b892cb8ae1500f">isReg</a>() &amp;&amp; <span class="stringliteral">&quot;Wrong CountValue accessor&quot;</span>);</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      <span class="keywordflow">return</span> Contents.R.Sub;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    }</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordtype">unsigned</span> getImm()<span class="keyword"> const </span>{</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      assert(isImm() &amp;&amp; <span class="stringliteral">&quot;Wrong CountValue accessor&quot;</span>);</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      <span class="keywordflow">return</span> Contents.ImmVal;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    }</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordtype">void</span> print(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;OS, <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetMachine.html">TargetMachine</a> *TM = 0)<span class="keyword"> const </span>{</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *TRI = TM ? TM-&gt;<a class="code" href="classllvm_1_1HexagonTargetMachine.html#ae3b063b0c7c14e12d7bf730236c7ab1f">getRegisterInfo</a>() : 0;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MipsInstPrinter_8cpp.html#a85e8dc708ae90b1129b892cb8ae1500f">isReg</a>()) { OS &lt;&lt; <a class="code" href="classllvm_1_1PrintReg.html">PrintReg</a>(Contents.R.Reg, TRI, Contents.R.Sub); }</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      <span class="keywordflow">if</span> (isImm()) { OS &lt;&lt; Contents.ImmVal; }</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    }</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  };</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;} <span class="comment">// end anonymous namespace</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<a class="code" href="HexagonHardwareLoops_8cpp.html#a8ec800975757c3eb1c11b4fa3a1a14b0">INITIALIZE_PASS_BEGIN</a>(HexagonHardwareLoops, <span class="stringliteral">&quot;hwloops&quot;</span>,</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                      <span class="stringliteral">&quot;Hexagon Hardware Loops&quot;</span>, <span class="keyword">false</span>, <span class="keyword">false</span>)</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1MachineDominatorTree.html">MachineDominatorTree</a>)</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a>)</div><div class="line"><a name="l00281"></a><span class="lineno"><a class="line" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">  281</a></span>&#160;<a class="code" href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a>(HexagonHardwareLoops, &quot;<a class="code" href="HexagonHardwareLoops_8cpp.html#a52ab2acd10fcba3c83361906b24c60af">hwloops</a>&quot;,</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                    &quot;Hexagon Hardware <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>&quot;, <a class="code" href="namespacefalse.html">false</a>, false)</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment">/// \brief Returns true if the instruction is a hardware loop instruction.</span></div><div class="line"><a name="l00286"></a><span class="lineno"><a class="line" href="HexagonHardwareLoops_8cpp.html#a113d3e566ed8a9dc7ea5bd2803b76226">  286</a></span>&#160;<span class="comment"></span>static <span class="keywordtype">bool</span> <a class="code" href="HexagonHardwareLoops_8cpp.html#a113d3e566ed8a9dc7ea5bd2803b76226">isHardwareLoop</a>(const <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>) {</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <span class="keywordflow">return</span> MI-&gt;getOpcode() == Hexagon::LOOP0_r ||</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    MI-&gt;getOpcode() == Hexagon::LOOP0_i;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;}</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno"><a class="line" href="namespacellvm.html#ad334ebc2f4abb942af36808d05a32fc1">  291</a></span>&#160;<a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a> *<a class="code" href="namespacellvm.html#ad334ebc2f4abb942af36808d05a32fc1">llvm::createHexagonHardwareLoops</a>() {</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> HexagonHardwareLoops();</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;}</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="keywordtype">bool</span> HexagonHardwareLoops::runOnMachineFunction(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF) {</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;********* Hexagon Hardware Loops *********\n&quot;</span>);</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  MLI = &amp;getAnalysis&lt;MachineLoopInfo&gt;();</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  MRI = &amp;MF.<a class="code" href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">getRegInfo</a>();</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  MDT = &amp;getAnalysis&lt;MachineDominatorTree&gt;();</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  TM  = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classllvm_1_1HexagonTargetMachine.html">HexagonTargetMachine</a>*<span class="keyword">&gt;</span>(&amp;MF.<a class="code" href="classllvm_1_1MachineFunction.html#a6745c3bfdfc5b0643b078b96df2db252">getTarget</a>());</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  TII = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classllvm_1_1HexagonInstrInfo.html">HexagonInstrInfo</a>*<span class="keyword">&gt;</span>(TM-&gt;getInstrInfo());</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  TRI = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="structllvm_1_1HexagonRegisterInfo.html">HexagonRegisterInfo</a>*<span class="keyword">&gt;</span>(TM-&gt;getRegisterInfo());</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineLoopInfo.html#a73d7a343f01b71b7adaa75d867a5f67e">MachineLoopInfo::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = MLI-&gt;<a class="code" href="classllvm_1_1MachineLoopInfo.html#ad174ba1c760b290b7de9772c30a252d9">begin</a>(), E = MLI-&gt;<a class="code" href="classllvm_1_1MachineLoopInfo.html#abd835122c5c416057b14378e92a72298">end</a>();</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <a class="code" href="classllvm_1_1MachineLoop.html">MachineLoop</a> *L = *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1431766de798501f107d9031821f311e">getParentLoop</a>())</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      Changed |= convertToHardwareLoop(L);</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  }</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <span class="keywordflow">return</span> Changed;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;}</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="keywordtype">bool</span> HexagonHardwareLoops::findInductionRegister(<a class="code" href="classllvm_1_1MachineLoop.html">MachineLoop</a> *L,</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                                                 <span class="keywordtype">unsigned</span> &amp;<a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>,</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                                                 int64_t &amp;IVBump,</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                                                 <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *&amp;IVOp</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                                                 )<span class="keyword"> const </span>{</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Header = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>();</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Preheader = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1bc74c76b876ad387293ecde0f21ed45">getLoopPreheader</a>();</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Latch = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a8917d359fc92f25eb0117386588c6f1c">getLoopLatch</a>();</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <span class="keywordflow">if</span> (!Header || !Preheader || !Latch)</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  <span class="comment">// This pair represents an induction register together with an immediate</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="comment">// value that will be added to it in each loop iteration.</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="keyword">typedef</span> std::pair&lt;unsigned,int64_t&gt; RegisterBump;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="comment">// Mapping:  R.next -&gt; (R, bump), where R, R.next and bump are derived</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <span class="comment">// from an induction operation</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="comment">//   R.next = R + bump</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <span class="comment">// where bump is an immediate value.</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="keyword">typedef</span> std::map&lt;unsigned,RegisterBump&gt; InductionMap;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  InductionMap IndMap;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html#a096d82c3c6f44b9a8e59d80d3851f616">MachineBasicBlock::instr_iterator</a> instr_iterator;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="keywordflow">for</span> (instr_iterator <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Header-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a172e7bd9150eb0519ef04c796086f93d">instr_begin</a>(), E = Header-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acae72f6ab1071b7ec87b741a8bef582b">instr_end</a>();</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E &amp;&amp; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isPHI(); ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *Phi = &amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="comment">// Have a PHI instruction.  Get the operand that corresponds to the</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="comment">// latch block, and see if is a result of an addition of form &quot;reg+imm&quot;,</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="comment">// where the &quot;reg&quot; is defined by the PHI node we are looking at.</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1, <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a> = Phi-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> += 2) {</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      <span class="keywordflow">if</span> (Phi-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>+1).<a class="code" href="classllvm_1_1MachineOperand.html#a3350f7760c4eec67ea7d8f3063c3d748">getMBB</a>() != Latch)</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      <span class="keywordtype">unsigned</span> PhiOpReg = Phi-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>).<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *DI = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#abf69f92f1977440a4e443a26baeb73c0">getVRegDef</a>(PhiOpReg);</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      <span class="keywordtype">unsigned</span> UpdOpc = DI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>();</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      <span class="keywordtype">bool</span> isAdd = (UpdOpc == Hexagon::ADD_ri);</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      <span class="keywordflow">if</span> (isAdd) {</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="comment">// If the register operand to the add is the PHI we&#39;re</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="comment">// looking at, this meets the induction pattern.</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <span class="keywordtype">unsigned</span> IndReg = DI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(1).<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="keywordflow">if</span> (MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#abf69f92f1977440a4e443a26baeb73c0">getVRegDef</a>(IndReg) == Phi) {</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;          <span class="keywordtype">unsigned</span> UpdReg = DI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(0).<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;          int64_t V = DI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(2).<a class="code" href="classllvm_1_1MachineOperand.html#a7059d68a29d5ecfb37623ab45cdb4e8d">getImm</a>();</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;          IndMap.insert(std::make_pair(UpdReg, std::make_pair(IndReg, V)));</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        }</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      }</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    }  <span class="comment">// for (i)</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  }  <span class="comment">// for (instr)</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand,2&gt;</a> Cond;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="namespacellvm_1_1X86II.html#a97dc14052814702ba0e2b14fb14dd02da6ba65e174dfdcdb111e1aea6b4299b16">TB</a> = 0, *FB = 0;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="keywordtype">bool</span> NotAnalyzed = TII-&gt;<a class="code" href="classllvm_1_1HexagonInstrInfo.html#a6f9cdb0ade88e5375e97bb0905925c5d">AnalyzeBranch</a>(*Latch, TB, FB, Cond, <span class="keyword">false</span>);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <span class="keywordflow">if</span> (NotAnalyzed)</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <span class="keywordtype">unsigned</span> CSz = Cond.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>();</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  assert (CSz == 1 || CSz == 2);</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <span class="keywordtype">unsigned</span> PredR = Cond[CSz-1].getReg();</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *PredI = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#abf69f92f1977440a4e443a26baeb73c0">getVRegDef</a>(PredR);</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <span class="keywordflow">if</span> (!PredI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aba5a4d675f357f9189038aebddfe873c">isCompare</a>())</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="keywordtype">unsigned</span> CmpReg1 = 0, CmpReg2 = 0;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <span class="keywordtype">int</span> CmpImm = 0, CmpMask = 0;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="keywordtype">bool</span> CmpAnalyzed = TII-&gt;<a class="code" href="classllvm_1_1HexagonInstrInfo.html#a5c8be1328453c7f1d485226d2014a5ab">analyzeCompare</a>(PredI, CmpReg1, CmpReg2,</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                                         CmpMask, CmpImm);</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="comment">// Fail if the compare was not analyzed, or it&#39;s not comparing a register</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <span class="comment">// with an immediate value.  Not checking the mask here, since we handle</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <span class="comment">// the individual compare opcodes (including CMPb) later on.</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <span class="keywordflow">if</span> (!CmpAnalyzed)</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="comment">// Exactly one of the input registers to the comparison should be among</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <span class="comment">// the induction registers.</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  InductionMap::iterator IndMapEnd = IndMap.end();</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  InductionMap::iterator <a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a> = IndMapEnd;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="keywordflow">if</span> (CmpReg1 != 0) {</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    InductionMap::iterator F1 = IndMap.find(CmpReg1);</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keywordflow">if</span> (F1 != IndMapEnd)</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      F = F1;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  }</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <span class="keywordflow">if</span> (CmpReg2 != 0) {</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    InductionMap::iterator F2 = IndMap.find(CmpReg2);</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordflow">if</span> (F2 != IndMapEnd) {</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;      <span class="keywordflow">if</span> (F != IndMapEnd)</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;      F = F2;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    }</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  }</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <span class="keywordflow">if</span> (F == IndMapEnd)</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  Reg = F-&gt;second.first;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  IVBump = F-&gt;second.second;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  IVOp = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#abf69f92f1977440a4e443a26baeb73c0">getVRegDef</a>(F-&gt;first);</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;}</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment">/// \brief Analyze the statements in a loop to determine if the loop has</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment">/// a computable trip count and, if so, return a value that represents</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment">/// the trip count expression.</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment">/// This function iterates over the phi nodes in the loop to check for</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment">/// induction variable patterns that are used in the calculation for</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment">/// the number of time the loop is executed.</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment"></span>CountValue *HexagonHardwareLoops::getLoopTripCount(<a class="code" href="classllvm_1_1MachineLoop.html">MachineLoop</a> *L,</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                                    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineInstr *&gt;</a> &amp;OldInsts) {</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *TopMBB = L-&gt;<a class="code" href="classllvm_1_1MachineLoop.html#adfb3765b2827835823c1c55d12b33957">getTopBlock</a>();</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html#a7e7a1a247b7725a24fe19a91f90782cc">MachineBasicBlock::pred_iterator</a> PI = TopMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab644fcf07a4c2708333cf66276282357">pred_begin</a>();</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  assert(PI != TopMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a0359a738e0412c5a7ea55d61175e0661">pred_end</a>() &amp;&amp;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;         <span class="stringliteral">&quot;Loop must have more than one incoming edge!&quot;</span>);</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Backedge = *PI++;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  <span class="keywordflow">if</span> (PI == TopMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a0359a738e0412c5a7ea55d61175e0661">pred_end</a>())  <span class="comment">// dead loop?</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Incoming = *PI++;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  <span class="keywordflow">if</span> (PI != TopMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a0359a738e0412c5a7ea55d61175e0661">pred_end</a>())  <span class="comment">// multiple backedges?</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <span class="comment">// Make sure there is one incoming and one backedge and determine which</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <span class="comment">// is which.</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <span class="keywordflow">if</span> (L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a92a38e2e3412bde7fd2b71db212b61aa">contains</a>(Incoming)) {</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="keywordflow">if</span> (L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a92a38e2e3412bde7fd2b71db212b61aa">contains</a>(Backedge))</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Incoming, Backedge);</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a92a38e2e3412bde7fd2b71db212b61aa">contains</a>(Backedge))</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <span class="comment">// Look for the cmp instruction to determine if we can get a useful trip</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <span class="comment">// count.  The trip count can be either a register or an immediate.  The</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <span class="comment">// location of the value depends upon the type (reg or imm).</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Latch = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a8917d359fc92f25eb0117386588c6f1c">getLoopLatch</a>();</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  <span class="keywordflow">if</span> (!Latch)</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <span class="keywordtype">unsigned</span> IVReg = 0;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  int64_t IVBump = 0;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *IVOp;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  <span class="keywordtype">bool</span> FoundIV = findInductionRegister(L, IVReg, IVBump, IVOp);</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="keywordflow">if</span> (!FoundIV)</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Preheader = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1bc74c76b876ad387293ecde0f21ed45">getLoopPreheader</a>();</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> *InitialValue = 0;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *IV_Phi = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#abf69f92f1977440a4e443a26baeb73c0">getVRegDef</a>(IVReg);</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1, <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a> = IV_Phi-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> += 2) {</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB = IV_Phi-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>+1).<a class="code" href="classllvm_1_1MachineOperand.html#a3350f7760c4eec67ea7d8f3063c3d748">getMBB</a>();</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="keywordflow">if</span> (MBB == Preheader)</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      InitialValue = &amp;IV_Phi-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (MBB == Latch)</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      IVReg = IV_Phi-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>).<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();  <span class="comment">// Want IV reg after bump.</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  }</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <span class="keywordflow">if</span> (!InitialValue)</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand,2&gt;</a> Cond;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="namespacellvm_1_1X86II.html#a97dc14052814702ba0e2b14fb14dd02da6ba65e174dfdcdb111e1aea6b4299b16">TB</a> = 0, *FB = 0;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <span class="keywordtype">bool</span> NotAnalyzed = TII-&gt;<a class="code" href="classllvm_1_1HexagonInstrInfo.html#a6f9cdb0ade88e5375e97bb0905925c5d">AnalyzeBranch</a>(*Latch, TB, FB, Cond, <span class="keyword">false</span>);</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  <span class="keywordflow">if</span> (NotAnalyzed)</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Header = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>();</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  <span class="comment">// TB must be non-null.  If FB is also non-null, one of them must be</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  <span class="comment">// the header.  Otherwise, branch to TB could be exiting the loop, and</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  <span class="comment">// the fall through can go to the header.</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  assert (TB &amp;&amp; <span class="stringliteral">&quot;Latch block without a branch?&quot;</span>);</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  assert ((!FB || TB == Header || FB == Header) &amp;&amp; <span class="stringliteral">&quot;Branches not to header?&quot;</span>);</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <span class="keywordflow">if</span> (!TB || (FB &amp;&amp; TB != Header &amp;&amp; FB != Header))</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <span class="comment">// Branches of form &quot;if (!P) ...&quot; cause HexagonInstrInfo::AnalyzeBranch</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  <span class="comment">// to put imm(0), followed by P in the vector Cond.</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  <span class="comment">// If TB is not the header, it means that the &quot;not-taken&quot; path must lead</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  <span class="comment">// to the header.</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  <span class="keywordtype">bool</span> Negated = (Cond.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>() &gt; 1) ^ (TB != Header);</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <span class="keywordtype">unsigned</span> PredReg = Cond[Cond.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>()-1].getReg();</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *CondI = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#abf69f92f1977440a4e443a26baeb73c0">getVRegDef</a>(PredReg);</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  <span class="keywordtype">unsigned</span> CondOpc = CondI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>();</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <span class="keywordtype">unsigned</span> CmpReg1 = 0, CmpReg2 = 0;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  <span class="keywordtype">int</span> Mask = 0, ImmValue = 0;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  <span class="keywordtype">bool</span> AnalyzedCmp = TII-&gt;<a class="code" href="classllvm_1_1HexagonInstrInfo.html#a5c8be1328453c7f1d485226d2014a5ab">analyzeCompare</a>(CondI, CmpReg1, CmpReg2,</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                                         Mask, ImmValue);</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <span class="keywordflow">if</span> (!AnalyzedCmp)</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  <span class="comment">// The comparison operator type determines how we compute the loop</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  <span class="comment">// trip count.</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  OldInsts.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(CondI);</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  OldInsts.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(IVOp);</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <span class="comment">// Sadly, the following code gets information based on the position</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  <span class="comment">// of the operands in the compare instruction.  This has to be done</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <span class="comment">// this way, because the comparisons check for a specific relationship</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  <span class="comment">// between the operands (e.g. is-less-than), rather than to find out</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <span class="comment">// what relationship the operands are in (as on PPC).</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <a class="code" href="namespacellvm_1_1EngineKind.html#a9df47239a42cd9621ac26d9ecbd57441">Comparison::Kind</a> Cmp;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="keywordtype">bool</span> isSwapped = <span class="keyword">false</span>;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;Op1 = CondI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(1);</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;Op2 = CondI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(2);</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> *EndValue = 0;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  <span class="keywordflow">if</span> (Op1.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>()) {</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="keywordflow">if</span> (Op2.<a class="code" href="classllvm_1_1MachineOperand.html#a2ac18ceda9f2857fea2e5cc4e8bf4ff5">isImm</a>() || Op1.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>() == IVReg)</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      EndValue = &amp;Op2;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;      EndValue = &amp;Op1;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      isSwapped = <span class="keyword">true</span>;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    }</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  }</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  <span class="keywordflow">if</span> (!EndValue)</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="keywordflow">switch</span> (CondOpc) {</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="keywordflow">case</span> Hexagon::CMPEQri:</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="keywordflow">case</span> Hexagon::CMPEQrr:</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;      Cmp = !Negated ? <a class="code" href="regexec_8c.html#ac07acfbb082b04f5bea72998c8976b3c">Comparison::EQ</a> : <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a0555f297eceee28e5fc20d282dfeb8f4">Comparison::NE</a>;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keywordflow">case</span> Hexagon::CMPGTUri:</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="keywordflow">case</span> Hexagon::CMPGTUrr:</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      Cmp = !Negated ? Comparison::GTu : Comparison::LEu;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="keywordflow">case</span> Hexagon::CMPGTri:</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="keywordflow">case</span> Hexagon::CMPGTrr:</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      Cmp = !Negated ? Comparison::GTs : Comparison::LEs;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="comment">// Very limited support for byte/halfword compares.</span></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="keywordflow">case</span> Hexagon::CMPbEQri_V4:</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="keywordflow">case</span> Hexagon::CMPhEQri_V4: {</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      <span class="keywordflow">if</span> (IVBump != 1)</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      int64_t InitV, EndV;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      <span class="comment">// Since the comparisons are &quot;ri&quot;, the EndValue should be an</span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      <span class="comment">// immediate.  Check it just in case.</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      assert(EndValue-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#a2ac18ceda9f2857fea2e5cc4e8bf4ff5">isImm</a>() &amp;&amp; <span class="stringliteral">&quot;Unrecognized latch comparison&quot;</span>);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      EndV = EndValue-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#a7059d68a29d5ecfb37623ab45cdb4e8d">getImm</a>();</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      <span class="comment">// Allow InitialValue to be a register defined with an immediate.</span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      <span class="keywordflow">if</span> (InitialValue-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>()) {</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        <span class="keywordflow">if</span> (!defWithImmediate(InitialValue-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>()))</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;          <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        InitV = getImmediate(*InitialValue);</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        assert(InitialValue-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#a2ac18ceda9f2857fea2e5cc4e8bf4ff5">isImm</a>());</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        InitV = InitialValue-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#a7059d68a29d5ecfb37623ab45cdb4e8d">getImm</a>();</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      }</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      <span class="keywordflow">if</span> (InitV &gt;= EndV)</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;      <span class="keywordflow">if</span> (CondOpc == Hexagon::CMPbEQri_V4) {</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#a3e242f3485db990d043f2dcf91106ce7">isInt&lt;8&gt;</a>(InitV) || !<a class="code" href="namespacellvm.html#a3e242f3485db990d043f2dcf91106ce7">isInt&lt;8&gt;</a>(EndV))</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;          <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      } <span class="keywordflow">else</span> {  <span class="comment">// Hexagon::CMPhEQri_V4</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#a3b9662928ee4d58fef185abfe20e8184">isInt&lt;16&gt;</a>(InitV) || !<a class="code" href="namespacellvm.html#a3b9662928ee4d58fef185abfe20e8184">isInt&lt;16&gt;</a>(EndV))</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;          <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;      }</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;      Cmp = !Negated ? <a class="code" href="regexec_8c.html#ac07acfbb082b04f5bea72998c8976b3c">Comparison::EQ</a> : <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a0555f297eceee28e5fc20d282dfeb8f4">Comparison::NE</a>;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    }</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  }</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  <span class="keywordflow">if</span> (isSwapped)</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;   Cmp = Comparison::getSwappedComparison(Cmp);</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  <span class="keywordflow">if</span> (InitialValue-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>()) {</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="keywordtype">unsigned</span> R = InitialValue-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *DefBB = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#abf69f92f1977440a4e443a26baeb73c0">getVRegDef</a>(R)-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">getParent</a>();</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="keywordflow">if</span> (!MDT-&gt;<a class="code" href="classllvm_1_1MachineDominatorTree.html#a4743a26ccaf71c92f91cbe562df4738a">properlyDominates</a>(DefBB, Header))</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    OldInsts.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#abf69f92f1977440a4e443a26baeb73c0">getVRegDef</a>(R));</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  }</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <span class="keywordflow">if</span> (EndValue-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>()) {</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="keywordtype">unsigned</span> R = EndValue-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *DefBB = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#abf69f92f1977440a4e443a26baeb73c0">getVRegDef</a>(R)-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">getParent</a>();</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="keywordflow">if</span> (!MDT-&gt;<a class="code" href="classllvm_1_1MachineDominatorTree.html#a4743a26ccaf71c92f91cbe562df4738a">properlyDominates</a>(DefBB, Header))</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  }</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <span class="keywordflow">return</span> computeCount(L, InitialValue, EndValue, IVReg, IVBump, Cmp);</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;}</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="comment">/// \brief Helper function that returns the expression that represents the</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="comment">/// number of times a loop iterates.  The function takes the operands that</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="comment">/// represent the loop start value, loop end value, and induction value.</span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="comment">/// Based upon these operands, the function attempts to compute the trip count.</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="comment"></span>CountValue *HexagonHardwareLoops::computeCount(<a class="code" href="classllvm_1_1MachineLoop.html">MachineLoop</a> *<a class="code" href="classllvm_1_1Loop.html">Loop</a>,</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                                               <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> *Start,</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                                               <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> *End,</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                                               <span class="keywordtype">unsigned</span> IVReg,</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                                               int64_t IVBump,</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                                               <a class="code" href="namespacellvm_1_1EngineKind.html#a9df47239a42cd9621ac26d9ecbd57441">Comparison::Kind</a> Cmp)<span class="keyword"> const </span>{</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <span class="comment">// Cannot handle comparison EQ, i.e. while (A == B).</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <span class="keywordflow">if</span> (Cmp == <a class="code" href="regexec_8c.html#ac07acfbb082b04f5bea72998c8976b3c">Comparison::EQ</a>)</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  <span class="comment">// Check if either the start or end values are an assignment of an immediate.</span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <span class="comment">// If so, use the immediate value rather than the register.</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <span class="keywordflow">if</span> (Start-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>()) {</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *StartValInstr = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#abf69f92f1977440a4e443a26baeb73c0">getVRegDef</a>(Start-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>());</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keywordflow">if</span> (StartValInstr &amp;&amp; StartValInstr-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>() == Hexagon::TFRI)</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      Start = &amp;StartValInstr-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(1);</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  }</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  <span class="keywordflow">if</span> (End-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>()) {</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *EndValInstr = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#abf69f92f1977440a4e443a26baeb73c0">getVRegDef</a>(End-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>());</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="keywordflow">if</span> (EndValInstr &amp;&amp; EndValInstr-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>() == Hexagon::TFRI)</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;      End = &amp;EndValInstr-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(1);</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  }</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  assert (Start-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>() || Start-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#a2ac18ceda9f2857fea2e5cc4e8bf4ff5">isImm</a>());</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  assert (End-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>() || End-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#a2ac18ceda9f2857fea2e5cc4e8bf4ff5">isImm</a>());</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  <span class="keywordtype">bool</span> CmpLess =     Cmp &amp; Comparison::L;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  <span class="keywordtype">bool</span> CmpGreater =  Cmp &amp; <a class="code" href="MD5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">Comparison::G</a>;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  <span class="keywordtype">bool</span> CmpHasEqual = Cmp &amp; <a class="code" href="regexec_8c.html#ac07acfbb082b04f5bea72998c8976b3c">Comparison::EQ</a>;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  <span class="comment">// Avoid certain wrap-arounds.  This doesn&#39;t detect all wrap-arounds.</span></div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <span class="comment">// If loop executes while iv is &quot;less&quot; with the iv value going down, then</span></div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <span class="comment">// the iv must wrap.</span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <span class="keywordflow">if</span> (CmpLess &amp;&amp; IVBump &lt; 0)</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  <span class="comment">// If loop executes while iv is &quot;greater&quot; with the iv value going up, then</span></div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  <span class="comment">// the iv must wrap.</span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  <span class="keywordflow">if</span> (CmpGreater &amp;&amp; IVBump &gt; 0)</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  <span class="keywordflow">if</span> (Start-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#a2ac18ceda9f2857fea2e5cc4e8bf4ff5">isImm</a>() &amp;&amp; End-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#a2ac18ceda9f2857fea2e5cc4e8bf4ff5">isImm</a>()) {</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <span class="comment">// Both, start and end are immediates.</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    int64_t StartV = Start-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#a7059d68a29d5ecfb37623ab45cdb4e8d">getImm</a>();</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    int64_t EndV = End-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#a7059d68a29d5ecfb37623ab45cdb4e8d">getImm</a>();</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    int64_t Dist = EndV - StartV;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="keywordflow">if</span> (Dist == 0)</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <span class="keywordtype">bool</span> Exact = (Dist % IVBump) == 0;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <span class="keywordflow">if</span> (Cmp == <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a0555f297eceee28e5fc20d282dfeb8f4">Comparison::NE</a>) {</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;      <span class="keywordflow">if</span> (!Exact)</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;      <span class="keywordflow">if</span> ((Dist &lt; 0) ^ (IVBump &lt; 0))</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    }</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="comment">// For comparisons that include the final value (i.e. include equality</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <span class="comment">// with the final value), we need to increase the distance by 1.</span></div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="keywordflow">if</span> (CmpHasEqual)</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;      Dist = Dist &gt; 0 ? Dist+1 : Dist-1;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <span class="comment">// assert (CmpLess =&gt; Dist &gt; 0);</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    assert ((!CmpLess || Dist &gt; 0) &amp;&amp; <span class="stringliteral">&quot;Loop should never iterate!&quot;</span>);</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <span class="comment">// assert (CmpGreater =&gt; Dist &lt; 0);</span></div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    assert ((!CmpGreater || Dist &lt; 0) &amp;&amp; <span class="stringliteral">&quot;Loop should never iterate!&quot;</span>);</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="comment">// &quot;Normalized&quot; distance, i.e. with the bump set to +-1.</span></div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    int64_t Dist1 = (IVBump &gt; 0) ? (Dist +  (IVBump-1)) /   IVBump</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                               :  (-Dist + (-IVBump-1)) / (-IVBump);</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    assert (Dist1 &gt; 0 &amp;&amp; <span class="stringliteral">&quot;Fishy thing.  Both operands have the same sign.&quot;</span>);</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    uint64_t Count = Dist1;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="keywordflow">if</span> (Count &gt; 0xFFFFFFFFULL)</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> CountValue(CountValue::CV_Immediate, Count);</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  }</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <span class="comment">// A general case: Start and End are some values, but the actual</span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  <span class="comment">// iteration count may not be available.  If it is not, insert</span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  <span class="comment">// a computation of it into the preheader.</span></div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  <span class="comment">// If the induction variable bump is not a power of 2, quit.</span></div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <span class="comment">// Othwerise we&#39;d need a general integer division.</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#a19358222bb2c2199975e3a4ec4b40eed">isPowerOf2_64</a>(<a class="code" href="namespacellvm.html#a59575e3191e743149bbd95eacbb9081a">abs64</a>(IVBump)))</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *PH = Loop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1bc74c76b876ad387293ecde0f21ed45">getLoopPreheader</a>();</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  assert (PH &amp;&amp; <span class="stringliteral">&quot;Should have a preheader by now&quot;</span>);</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> InsertPos = PH-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7f0521fa2de44271fd4b909ea7351ef3">getFirstTerminator</a>();</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> DL = (InsertPos != PH-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>()) ? InsertPos-&gt;getDebugLoc()</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;                                         : <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a>();</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  <span class="comment">// If Start is an immediate and End is a register, the trip count</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  <span class="comment">// will be &quot;reg - imm&quot;.  Hexagon&#39;s &quot;subtract immediate&quot; instruction</span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  <span class="comment">// is actually &quot;reg + -imm&quot;.</span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  <span class="comment">// If the loop IV is going downwards, i.e. if the bump is negative,</span></div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  <span class="comment">// then the iteration count (computed as End-Start) will need to be</span></div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  <span class="comment">// negated.  To avoid the negation, just swap Start and End.</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  <span class="keywordflow">if</span> (IVBump &lt; 0) {</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Start, End);</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    IVBump = -IVBump;</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  }</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  <span class="comment">// Cmp may now have a wrong direction, e.g.  LEs may now be GEs.</span></div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  <span class="comment">// Signedness, and &quot;including equality&quot; are preserved.</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  <span class="keywordtype">bool</span> RegToImm = Start-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>() &amp;&amp; End-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#a2ac18ceda9f2857fea2e5cc4e8bf4ff5">isImm</a>(); <span class="comment">// for (reg..imm)</span></div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  <span class="keywordtype">bool</span> RegToReg = Start-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>() &amp;&amp; End-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>(); <span class="comment">// for (reg..reg)</span></div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  int64_t StartV = 0, EndV = 0;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <span class="keywordflow">if</span> (Start-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#a2ac18ceda9f2857fea2e5cc4e8bf4ff5">isImm</a>())</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    StartV = Start-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#a7059d68a29d5ecfb37623ab45cdb4e8d">getImm</a>();</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  <span class="keywordflow">if</span> (End-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#a2ac18ceda9f2857fea2e5cc4e8bf4ff5">isImm</a>())</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    EndV = End-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#a7059d68a29d5ecfb37623ab45cdb4e8d">getImm</a>();</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  int64_t AdjV = 0;</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  <span class="comment">// To compute the iteration count, we would need this computation:</span></div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  <span class="comment">//   Count = (End - Start + (IVBump-1)) / IVBump</span></div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  <span class="comment">// or, when CmpHasEqual:</span></div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  <span class="comment">//   Count = (End - Start + (IVBump-1)+1) / IVBump</span></div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  <span class="comment">// The &quot;IVBump-1&quot; part is the adjustment (AdjV).  We can avoid</span></div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  <span class="comment">// generating an instruction specifically to add it if we can adjust</span></div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  <span class="comment">// the immediate values for Start or End.</span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  <span class="keywordflow">if</span> (CmpHasEqual) {</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="comment">// Need to add 1 to the total iteration count.</span></div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="keywordflow">if</span> (Start-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#a2ac18ceda9f2857fea2e5cc4e8bf4ff5">isImm</a>())</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;      StartV--;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (End-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#a2ac18ceda9f2857fea2e5cc4e8bf4ff5">isImm</a>())</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;      EndV++;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;      AdjV += 1;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  }</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  <span class="keywordflow">if</span> (Cmp != <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a0555f297eceee28e5fc20d282dfeb8f4">Comparison::NE</a>) {</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="keywordflow">if</span> (Start-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#a2ac18ceda9f2857fea2e5cc4e8bf4ff5">isImm</a>())</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;      StartV -= (IVBump-1);</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (End-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#a2ac18ceda9f2857fea2e5cc4e8bf4ff5">isImm</a>())</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      EndV += (IVBump-1);</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;      AdjV += (IVBump-1);</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  }</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;  <span class="keywordtype">unsigned</span> R = 0, SR = 0;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  <span class="keywordflow">if</span> (Start-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>()) {</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    R = Start-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    SR = Start-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#aca37b55b20f45c96067bac1d4f1dcb7f">getSubReg</a>();</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    R = End-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    SR = End-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#aca37b55b20f45c96067bac1d4f1dcb7f">getSubReg</a>();</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  }</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *RC = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#ab3904d3601dbe52865d5f2e33a06d80d">getRegClass</a>(R);</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  <span class="comment">// Hardware loops cannot handle 64-bit registers.  If it&#39;s a double</span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;  <span class="comment">// register, it has to have a subregister.</span></div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  <span class="keywordflow">if</span> (!SR &amp;&amp; RC == &amp;Hexagon::DoubleRegsRegClass)</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *IntRC = &amp;Hexagon::IntRegsRegClass;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  <span class="comment">// Compute DistR (register with the distance between Start and End).</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  <span class="keywordtype">unsigned</span> DistR, DistSR;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  <span class="comment">// Avoid special case, where the start value is an imm(0).</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  <span class="keywordflow">if</span> (Start-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#a2ac18ceda9f2857fea2e5cc4e8bf4ff5">isImm</a>() &amp;&amp; StartV == 0) {</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    DistR = End-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    DistSR = End-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#aca37b55b20f45c96067bac1d4f1dcb7f">getSubReg</a>();</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MCInstrDesc.html">MCInstrDesc</a> &amp;SubD = RegToReg ? TII-&gt;get(Hexagon::SUB_rr) :</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;                              (RegToImm ? TII-&gt;get(Hexagon::SUB_ri) :</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;                                          TII-&gt;get(Hexagon::ADD_ri));</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <span class="keywordtype">unsigned</span> SubR = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a76c3c7e3d4f11b4cfad37fc0449c9635">createVirtualRegister</a>(IntRC);</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> SubIB =</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;      <a class="code" href="namespacellvm.html#a980570dc1410d4ef53806f82028ca381">BuildMI</a>(*PH, InsertPos, DL, SubD, SubR);</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <span class="keywordflow">if</span> (RegToReg) {</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;      SubIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a5125cce72b214df09ca8f93dcbbf4c3a">addReg</a>(End-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>(), 0, End-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#aca37b55b20f45c96067bac1d4f1dcb7f">getSubReg</a>())</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;           .addReg(Start-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>(), 0, Start-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#aca37b55b20f45c96067bac1d4f1dcb7f">getSubReg</a>());</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (RegToImm) {</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;      SubIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a9f1fae6a5dbb6e378ca85df1fded8515">addImm</a>(EndV)</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;           .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a5125cce72b214df09ca8f93dcbbf4c3a">addReg</a>(Start-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>(), 0, Start-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#aca37b55b20f45c96067bac1d4f1dcb7f">getSubReg</a>());</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    } <span class="keywordflow">else</span> { <span class="comment">// ImmToReg</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;      SubIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a5125cce72b214df09ca8f93dcbbf4c3a">addReg</a>(End-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>(), 0, End-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#aca37b55b20f45c96067bac1d4f1dcb7f">getSubReg</a>())</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;           .addImm(-StartV);</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    }</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    DistR = SubR;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    DistSR = 0;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  }</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  <span class="comment">// From DistR, compute AdjR (register with the adjusted distance).</span></div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;  <span class="keywordtype">unsigned</span> AdjR, AdjSR;</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;  <span class="keywordflow">if</span> (AdjV == 0) {</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    AdjR = DistR;</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    AdjSR = DistSR;</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    <span class="comment">// Generate CountR = ADD DistR, AdjVal</span></div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    <span class="keywordtype">unsigned</span> AddR = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a76c3c7e3d4f11b4cfad37fc0449c9635">createVirtualRegister</a>(IntRC);</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MCInstrDesc.html">MCInstrDesc</a> &amp;AddD = TII-&gt;get(Hexagon::ADD_ri);</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <a class="code" href="namespacellvm.html#a980570dc1410d4ef53806f82028ca381">BuildMI</a>(*PH, InsertPos, DL, AddD, AddR)</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a5125cce72b214df09ca8f93dcbbf4c3a">addReg</a>(DistR, 0, DistSR)</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a9f1fae6a5dbb6e378ca85df1fded8515">addImm</a>(AdjV);</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    AdjR = AddR;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    AdjSR = 0;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  }</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  <span class="comment">// From AdjR, compute CountR (register with the final count).</span></div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  <span class="keywordtype">unsigned</span> CountR, CountSR;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  <span class="keywordflow">if</span> (IVBump == 1) {</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    CountR = AdjR;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    CountSR = AdjSR;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <span class="comment">// The IV bump is a power of two. Log_2(IV bump) is the shift amount.</span></div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a> = <a class="code" href="namespacellvm.html#a646986783f35e0fef8988f0f28d2589f">Log2_32</a>(IVBump);</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    <span class="comment">// Generate NormR = LSR DistR, Shift.</span></div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    <span class="keywordtype">unsigned</span> LsrR = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a76c3c7e3d4f11b4cfad37fc0449c9635">createVirtualRegister</a>(IntRC);</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MCInstrDesc.html">MCInstrDesc</a> &amp;LsrD = TII-&gt;get(Hexagon::LSR_ri);</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <a class="code" href="namespacellvm.html#a980570dc1410d4ef53806f82028ca381">BuildMI</a>(*PH, InsertPos, DL, LsrD, LsrR)</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a5125cce72b214df09ca8f93dcbbf4c3a">addReg</a>(AdjR, 0, AdjSR)</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a9f1fae6a5dbb6e378ca85df1fded8515">addImm</a>(Shift);</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    CountR = LsrR;</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    CountSR = 0;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  }</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> CountValue(CountValue::CV_Register, CountR, CountSR);</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;}</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;<span class="comment">/// \brief Return true if the operation is invalid within hardware loop.</span></div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> HexagonHardwareLoops::isInvalidLoopOperation(</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>)<span class="keyword"> const </span>{</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  <span class="comment">// call is not allowed because the callee may use a hardware loop</span></div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;  <span class="keywordflow">if</span> (MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a803a7424877fd049679b9aa2f07597b5">getDesc</a>().<a class="code" href="classllvm_1_1MCInstrDesc.html#a7981f38e296fd86b0cea036317fc1fcd">isCall</a>())</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  <span class="comment">// do not allow nested hardware loops</span></div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="HexagonHardwareLoops_8cpp.html#a113d3e566ed8a9dc7ea5bd2803b76226">isHardwareLoop</a>(MI))</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  <span class="comment">// check if the instruction defines a hardware loop register</span></div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>() || !MO.<a class="code" href="classllvm_1_1MachineOperand.html#a8de7d5cf38939044471c6ee60a01a3df">isDef</a>())</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    <span class="keywordtype">unsigned</span> R = MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    <span class="keywordflow">if</span> (R == <a class="code" href="README-SSE_8txt.html#a195b3944b472207a0fe48ea0d9a478e1">Hexagon::LC0</a> || R == Hexagon::LC1 ||</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;        R == Hexagon::SA0 || R == Hexagon::SA1)</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  }</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;}</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="comment">/// \brief - Return true if the loop contains an instruction that inhibits</span></div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="comment">/// the use of the hardware loop function.</span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> HexagonHardwareLoops::containsInvalidInstruction(<a class="code" href="classllvm_1_1MachineLoop.html">MachineLoop</a> *L)<span class="keyword"> const </span>{</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  <span class="keyword">const</span> std::vector&lt;MachineBasicBlock *&gt; &amp;Blocks = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1939dbb59960462878c408efb21a2c75">getBlocks</a>();</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Blocks.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB = Blocks[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a></div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;           <a class="code" href="MCModuleYAML_8cpp.html#a5cdd6ae6b245e832e7cc5e4edf035cb2">MII</a> = MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>(), E = MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>(); <a class="code" href="MCModuleYAML_8cpp.html#a5cdd6ae6b245e832e7cc5e4edf035cb2">MII</a> != E; ++<a class="code" href="MCModuleYAML_8cpp.html#a5cdd6ae6b245e832e7cc5e4edf035cb2">MII</a>) {</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *MI = &amp;*<a class="code" href="MCModuleYAML_8cpp.html#a5cdd6ae6b245e832e7cc5e4edf035cb2">MII</a>;</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;      <span class="keywordflow">if</span> (isInvalidLoopOperation(MI))</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    }</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  }</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;}</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;<span class="comment">/// \brief Returns true if the instruction is dead.  This was essentially</span></div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;<span class="comment">/// copied from DeadMachineInstructionElim::isDead, but with special cases</span></div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;<span class="comment">/// for inline asm, physical registers and instructions with side effects</span></div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;<span class="comment">/// removed.</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> HexagonHardwareLoops::isDead(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *MI,</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;                              <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineInstr *&gt;</a> &amp;DeadPhis)<span class="keyword"> const </span>{</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;  <span class="comment">// Examine each operand.</span></div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>() || !MO.<a class="code" href="classllvm_1_1MachineOperand.html#a8de7d5cf38939044471c6ee60a01a3df">isDef</a>())</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    <span class="keywordtype">unsigned</span> Reg = MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <span class="keywordflow">if</span> (MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#ac02c0424a7e7a4021fd9efc0a71d7473">use_nodbg_empty</a>(Reg))</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <span class="keyword">typedef</span> <a class="code" href="classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator.html">MachineRegisterInfo::use_nodbg_iterator</a> use_nodbg_iterator;</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <span class="comment">// This instruction has users, but if the only user is the phi node for the</span></div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    <span class="comment">// parent block, and the only use of that phi node is this instruction, then</span></div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <span class="comment">// this instruction is dead: both it (and the phi node) can be removed.</span></div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    use_nodbg_iterator <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#aad684f050965249161650dcdf5a58fa4">use_nodbg_begin</a>(Reg);</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    use_nodbg_iterator End = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a355ba266da19094cc0948311c431768e">use_nodbg_end</a>();</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#aa1704159f75e6eacd595962ea6d93ffe">llvm::next</a>(I) != End || !I.getOperand().getParent()-&gt;isPHI())</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *OnePhi = I.<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>().<a class="code" href="classllvm_1_1MachineOperand.html#acad8fe90886f92eabced0c2f9bd0e6f5">getParent</a>();</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> = 0, <a class="code" href="README__ALTIVEC_8txt.html#afb354c8aea0150628f8aa06c7f4a4168">f</a> = OnePhi-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> != <a class="code" href="README__ALTIVEC_8txt.html#afb354c8aea0150628f8aa06c7f4a4168">f</a>; ++<a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>) {</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;OPO = OnePhi-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>);</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;      <span class="keywordflow">if</span> (!OPO.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>() || !OPO.<a class="code" href="classllvm_1_1MachineOperand.html#a8de7d5cf38939044471c6ee60a01a3df">isDef</a>())</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;      <span class="keywordtype">unsigned</span> OPReg = OPO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;      use_nodbg_iterator nextJ;</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;      <span class="keywordflow">for</span> (use_nodbg_iterator J = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#aad684f050965249161650dcdf5a58fa4">use_nodbg_begin</a>(OPReg);</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;           J != End; J = nextJ) {</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        nextJ = <a class="code" href="namespacellvm.html#aa1704159f75e6eacd595962ea6d93ffe">llvm::next</a>(J);</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;        <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;<a class="code" href="classllvm_1_1Use.html">Use</a> = J.getOperand();</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;        <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *UseMI = Use.<a class="code" href="classllvm_1_1MachineOperand.html#acad8fe90886f92eabced0c2f9bd0e6f5">getParent</a>();</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;        <span class="comment">// If the phi node has a user that is not MI, bail...</span></div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        <span class="keywordflow">if</span> (MI != UseMI)</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;      }</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    }</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    DeadPhis.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(OnePhi);</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  }</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  <span class="comment">// If there are no defs with uses, the instruction is dead.</span></div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;}</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;<span class="keywordtype">void</span> HexagonHardwareLoops::removeIfDead(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *MI) {</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;  <span class="comment">// This procedure was essentially copied from DeadMachineInstructionElim.</span></div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineInstr*, 1&gt;</a> DeadPhis;</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;  <span class="keywordflow">if</span> (isDead(MI, DeadPhis)) {</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;HW looping will remove: &quot;</span> &lt;&lt; *MI);</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    <span class="comment">// It is possible that some DBG_VALUE instructions refer to this</span></div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    <span class="comment">// instruction.  Examine each def operand for such references;</span></div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    <span class="comment">// if found, mark the DBG_VALUE as undef (but don&#39;t delete it).</span></div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;      <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>() || !MO.<a class="code" href="classllvm_1_1MachineOperand.html#a8de7d5cf38939044471c6ee60a01a3df">isDef</a>())</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;      <span class="keywordtype">unsigned</span> Reg = MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;      <a class="code" href="classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator.html">MachineRegisterInfo::use_iterator</a> nextI;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator.html">MachineRegisterInfo::use_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a2f9819f230628888e3e68de292ecd602">use_begin</a>(Reg),</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;           E = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#ac8347c6938efe4d9a4426b92ef57851e">use_end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = nextI) {</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;        nextI = <a class="code" href="namespacellvm.html#aa1704159f75e6eacd595962ea6d93ffe">llvm::next</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);  <span class="comment">// I is invalidated by the setReg</span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;        <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;<a class="code" href="classllvm_1_1Use.html">Use</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand();</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;        <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *UseMI = Use.<a class="code" href="classllvm_1_1MachineOperand.html#acad8fe90886f92eabced0c2f9bd0e6f5">getParent</a>();</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;        <span class="keywordflow">if</span> (UseMI == MI)</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;        <span class="keywordflow">if</span> (Use.<a class="code" href="classllvm_1_1MachineOperand.html#a98b8c4d84ab695588af9822ccad5a482">isDebug</a>())</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;          UseMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(0).<a class="code" href="classllvm_1_1MachineOperand.html#a624a062754a09d3787614d8627096705">setReg</a>(0U);</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        <span class="comment">// This may also be a &quot;instr -&gt; phi -&gt; instr&quot; case which can</span></div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        <span class="comment">// be removed too.</span></div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;      }</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    }</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ac2421adbb9996e1b15f03a8abb6c70a8">eraseFromParent</a>();</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; DeadPhis.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;      DeadPhis[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;eraseFromParent();</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  }</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;}</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;<span class="comment">/// \brief Check if the loop is a candidate for converting to a hardware</span></div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;<span class="comment">/// loop.  If so, then perform the transformation.</span></div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;<span class="comment">/// This function works on innermost loops first.  A loop can be converted</span></div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;<span class="comment">/// if it is a counting loop; either a register value or an immediate.</span></div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;<span class="comment">/// The code makes several assumptions about the representation of the loop</span></div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;<span class="comment">/// in llvm.</span></div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> HexagonHardwareLoops::convertToHardwareLoop(<a class="code" href="classllvm_1_1MachineLoop.html">MachineLoop</a> *L) {</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  <span class="comment">// This is just for sanity.</span></div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  assert(L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>() &amp;&amp; <span class="stringliteral">&quot;Loop without a header?&quot;</span>);</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;  <span class="comment">// Process nested loops first.</span></div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LoopBase.html#a4b2d2c2ddd3ccf5630c18731a162977d">MachineLoop::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a22b3e904c08bd922efd707282aed89d9">begin</a>(), E = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a5a3b8a8269ba0c61102f71a2a3bd42cd">end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    Changed |= convertToHardwareLoop(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;  <span class="comment">// If a nested loop has been converted, then we can&#39;t convert this loop.</span></div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  <span class="keywordflow">if</span> (Changed)</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    <span class="keywordflow">return</span> Changed;</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  <span class="comment">// Stop trying after reaching the limit (if any).</span></div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  <span class="keywordtype">int</span> Limit = <a class="code" href="HexagonHardwareLoops_8cpp.html#a462dfa38055b260abcd8b296b0fd1150">HWLoopLimit</a>;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;  <span class="keywordflow">if</span> (Limit &gt;= 0) {</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    <span class="keywordflow">if</span> (Counter &gt;= <a class="code" href="HexagonHardwareLoops_8cpp.html#a462dfa38055b260abcd8b296b0fd1150">HWLoopLimit</a>)</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    Counter++;</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  }</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;  <span class="comment">// Does the loop contain any invalid instructions?</span></div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;  <span class="keywordflow">if</span> (containsInvalidInstruction(L))</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;  <span class="comment">// Is the induction variable bump feeding the latch condition?</span></div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;  <span class="keywordflow">if</span> (!fixupInductionVariable(L))</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *LastMBB = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#acaec68a759bb05d3be2ed7dd47e25171">getExitingBlock</a>();</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;  <span class="comment">// Don&#39;t generate hw loop if the loop has more than one exit.</span></div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;  <span class="keywordflow">if</span> (LastMBB == 0)</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> LastI = LastMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7f0521fa2de44271fd4b909ea7351ef3">getFirstTerminator</a>();</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;  <span class="keywordflow">if</span> (LastI == LastMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>())</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;  <span class="comment">// Ensure the loop has a preheader: the loop instruction will be</span></div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;  <span class="comment">// placed there.</span></div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  <span class="keywordtype">bool</span> NewPreheader = <span class="keyword">false</span>;</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Preheader = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1bc74c76b876ad387293ecde0f21ed45">getLoopPreheader</a>();</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;  <span class="keywordflow">if</span> (!Preheader) {</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    Preheader = createPreheaderForLoop(L);</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    <span class="keywordflow">if</span> (!Preheader)</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    NewPreheader = <span class="keyword">true</span>;</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;  }</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> InsertPos = Preheader-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7f0521fa2de44271fd4b909ea7351ef3">getFirstTerminator</a>();</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineInstr*, 2&gt;</a> OldInsts;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;  <span class="comment">// Are we able to determine the trip count for the loop?</span></div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;  CountValue *TripCount = getLoopTripCount(L, OldInsts);</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;  <span class="keywordflow">if</span> (TripCount == 0)</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;  <span class="comment">// Is the trip count available in the preheader?</span></div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;  <span class="keywordflow">if</span> (TripCount-&gt;isReg()) {</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <span class="comment">// There will be a use of the register inserted into the preheader,</span></div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    <span class="comment">// so make sure that the register is actually defined at that point.</span></div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *TCDef = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#abf69f92f1977440a4e443a26baeb73c0">getVRegDef</a>(TripCount-&gt;getReg());</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *BBDef = TCDef-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">getParent</a>();</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <span class="keywordflow">if</span> (!NewPreheader) {</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;      <span class="keywordflow">if</span> (!MDT-&gt;<a class="code" href="classllvm_1_1MachineDominatorTree.html#a22bd7da7d9fa4793cb214e659c198ff6">dominates</a>(BBDef, Preheader))</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;      <span class="comment">// If we have just created a preheader, the dominator tree won&#39;t be</span></div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;      <span class="comment">// aware of it.  Check if the definition of the register dominates</span></div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;      <span class="comment">// the header, but is not the header itself.</span></div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;      <span class="keywordflow">if</span> (!MDT-&gt;<a class="code" href="classllvm_1_1MachineDominatorTree.html#a4743a26ccaf71c92f91cbe562df4738a">properlyDominates</a>(BBDef, L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>()))</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    }</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;  }</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;  <span class="comment">// Determine the loop start.</span></div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *LoopStart = L-&gt;<a class="code" href="classllvm_1_1MachineLoop.html#adfb3765b2827835823c1c55d12b33957">getTopBlock</a>();</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;  <span class="keywordflow">if</span> (L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a8917d359fc92f25eb0117386588c6f1c">getLoopLatch</a>() != LastMBB) {</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    <span class="comment">// When the exit and latch are not the same, use the latch block as the</span></div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <span class="comment">// start.</span></div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    <span class="comment">// The loop start address is used only after the 1st iteration, and the</span></div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    <span class="comment">// loop latch may contains instrs. that need to be executed after the</span></div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <span class="comment">// first iteration.</span></div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    LoopStart = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a8917d359fc92f25eb0117386588c6f1c">getLoopLatch</a>();</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    <span class="comment">// Make sure the latch is a successor of the exit, otherwise it won&#39;t work.</span></div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    <span class="keywordflow">if</span> (!LastMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a57f25804288bc580d7b2e4016a38aec9">isSuccessor</a>(LoopStart))</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;  }</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;  <span class="comment">// Convert the loop to a hardware loop.</span></div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Change to hardware loop at &quot;</span>; L-&gt;<a class="code" href="classllvm_1_1MachineLoop.html#a28e0c42230a2776ab5675a56c27f9be9">dump</a>());</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> DL;</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  <span class="keywordflow">if</span> (InsertPos != Preheader-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>())</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    DL = InsertPos-&gt;getDebugLoc();</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  <span class="keywordflow">if</span> (TripCount-&gt;isReg()) {</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    <span class="comment">// Create a copy of the loop count register.</span></div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    <span class="keywordtype">unsigned</span> CountReg = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a76c3c7e3d4f11b4cfad37fc0449c9635">createVirtualRegister</a>(&amp;Hexagon::IntRegsRegClass);</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    <a class="code" href="namespacellvm.html#a980570dc1410d4ef53806f82028ca381">BuildMI</a>(*Preheader, InsertPos, DL, TII-&gt;get(<a class="code" href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8afbad4e5ed543b4325115bdb3aff2f8d9">TargetOpcode::COPY</a>), CountReg)</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;      .addReg(TripCount-&gt;getReg(), 0, TripCount-&gt;getSubReg());</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    <span class="comment">// Add the Loop instruction to the beginning of the loop.</span></div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    <a class="code" href="namespacellvm.html#a980570dc1410d4ef53806f82028ca381">BuildMI</a>(*Preheader, InsertPos, DL, TII-&gt;get(Hexagon::LOOP0_r))</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;      .addMBB(LoopStart)</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a5125cce72b214df09ca8f93dcbbf4c3a">addReg</a>(CountReg);</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    assert(TripCount-&gt;isImm() &amp;&amp; <span class="stringliteral">&quot;Expecting immediate value for trip count&quot;</span>);</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    <span class="comment">// Add the Loop immediate instruction to the beginning of the loop,</span></div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    <span class="comment">// if the immediate fits in the instructions.  Otherwise, we need to</span></div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    <span class="comment">// create a new virtual register.</span></div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    int64_t CountImm = TripCount-&gt;getImm();</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    <span class="keywordflow">if</span> (!TII-&gt;<a class="code" href="classllvm_1_1HexagonInstrInfo.html#a29bbe2dcdff222364e40b408e9c85c1b">isValidOffset</a>(Hexagon::LOOP0_i, CountImm)) {</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;      <span class="keywordtype">unsigned</span> CountReg = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a76c3c7e3d4f11b4cfad37fc0449c9635">createVirtualRegister</a>(&amp;Hexagon::IntRegsRegClass);</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;      <a class="code" href="namespacellvm.html#a980570dc1410d4ef53806f82028ca381">BuildMI</a>(*Preheader, InsertPos, DL, TII-&gt;get(Hexagon::TFRI), CountReg)</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        .addImm(CountImm);</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;      <a class="code" href="namespacellvm.html#a980570dc1410d4ef53806f82028ca381">BuildMI</a>(*Preheader, InsertPos, DL, TII-&gt;get(Hexagon::LOOP0_r))</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        .addMBB(LoopStart).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a5125cce72b214df09ca8f93dcbbf4c3a">addReg</a>(CountReg);</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    } <span class="keywordflow">else</span></div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;      <a class="code" href="namespacellvm.html#a980570dc1410d4ef53806f82028ca381">BuildMI</a>(*Preheader, InsertPos, DL, TII-&gt;get(Hexagon::LOOP0_i))</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;        .addMBB(LoopStart).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a9f1fae6a5dbb6e378ca85df1fded8515">addImm</a>(CountImm);</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;  }</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;  <span class="comment">// Make sure the loop start always has a reference in the CFG.  We need</span></div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  <span class="comment">// to create a BlockAddress operand to get this mechanism to work both the</span></div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;  <span class="comment">// MachineBasicBlock and BasicBlock objects need the flag set.</span></div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;  LoopStart-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6d180825b3dcc1bd2b8e415160207335">setHasAddressTaken</a>();</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  <span class="comment">// This line is needed to set the hasAddressTaken flag on the BasicBlock</span></div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  <span class="comment">// object.</span></div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;  <a class="code" href="classllvm_1_1BlockAddress.html#af6e2f535824d8f9b4bf1b1a75e5ab57c">BlockAddress::get</a>(const_cast&lt;BasicBlock *&gt;(LoopStart-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a2961c31b29db17a4f2964899c8569a64">getBasicBlock</a>()));</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  <span class="comment">// Replace the loop branch with an endloop instruction.</span></div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> LastIDL = LastI-&gt;getDebugLoc();</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;  <a class="code" href="namespacellvm.html#a980570dc1410d4ef53806f82028ca381">BuildMI</a>(*LastMBB, LastI, LastIDL,</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;          TII-&gt;get(Hexagon::ENDLOOP0)).addMBB(LoopStart);</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;  <span class="comment">// The loop ends with either:</span></div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;  <span class="comment">//  - a conditional branch followed by an unconditional branch, or</span></div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  <span class="comment">//  - a conditional branch to the loop start.</span></div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;  <span class="keywordflow">if</span> (LastI-&gt;getOpcode() == Hexagon::JMP_t ||</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;      LastI-&gt;getOpcode() == Hexagon::JMP_f) {</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <span class="comment">// Delete one and change/add an uncond. branch to out of the loop.</span></div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *BranchTarget = LastI-&gt;getOperand(1).getMBB();</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    LastI = LastMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a537a9265c55392ab47d44954f27db538">erase</a>(LastI);</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a92a38e2e3412bde7fd2b71db212b61aa">contains</a>(BranchTarget)) {</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;      <span class="keywordflow">if</span> (LastI != LastMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>())</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;        LastI = LastMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a537a9265c55392ab47d44954f27db538">erase</a>(LastI);</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand, 0&gt;</a> Cond;</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;      TII-&gt;<a class="code" href="classllvm_1_1HexagonInstrInfo.html#a95f554978b4efc4c1ca8b0ed5e017ff6">InsertBranch</a>(*LastMBB, BranchTarget, 0, Cond, LastIDL);</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    }</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    <span class="comment">// Conditional branch to loop start; just delete it.</span></div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    LastMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a537a9265c55392ab47d44954f27db538">erase</a>(LastI);</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;  }</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;  <span class="keyword">delete</span> TripCount;</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  <span class="comment">// The induction operation and the comparison may now be</span></div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;  <span class="comment">// unneeded. If these are unneeded, then remove them.</span></div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; OldInsts.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    removeIfDead(OldInsts[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;  ++NumHWLoops;</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;}</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;<span class="keywordtype">bool</span> HexagonHardwareLoops::orderBumpCompare(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *BumpI,</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;                                            <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *CmpI) {</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;  assert (BumpI != CmpI &amp;&amp; <span class="stringliteral">&quot;Bump and compare in the same instruction?&quot;</span>);</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = BumpI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">getParent</a>();</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;  <span class="keywordflow">if</span> (CmpI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">getParent</a>() != <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html#a096d82c3c6f44b9a8e59d80d3851f616">MachineBasicBlock::instr_iterator</a> instr_iterator;</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  <span class="comment">// Check if things are in order to begin with.</span></div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;  <span class="keywordflow">for</span> (instr_iterator <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = BumpI, E = BB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acae72f6ab1071b7ec87b741a8bef582b">instr_end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    <span class="keywordflow">if</span> (&amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> == CmpI)</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;  <span class="comment">// Out of order.</span></div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  <span class="keywordtype">unsigned</span> PredR = CmpI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(0).<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  <span class="keywordtype">bool</span> FoundBump = <span class="keyword">false</span>;</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;  instr_iterator CmpIt = CmpI, NextIt = <a class="code" href="namespacellvm.html#aa1704159f75e6eacd595962ea6d93ffe">llvm::next</a>(CmpIt);</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;  <span class="keywordflow">for</span> (instr_iterator <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = NextIt, E = BB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acae72f6ab1071b7ec87b741a8bef582b">instr_end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a> = &amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a> = In-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;      <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = In-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;      <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>() &amp;&amp; MO.<a class="code" href="classllvm_1_1MachineOperand.html#a57bf9ee7219097ff0f98da23a3b3b782">isUse</a>()) {</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;        <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>() == PredR)  <span class="comment">// Found an intervening use of PredR.</span></div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;      }</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    }</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    <span class="keywordflow">if</span> (In == BumpI) {</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;      instr_iterator After = BumpI;</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;      instr_iterator From = CmpI;</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;      BB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#adf0023bdc4f05a7849c35b1c859580d8">splice</a>(<a class="code" href="namespacellvm.html#aa1704159f75e6eacd595962ea6d93ffe">llvm::next</a>(After), BB, From);</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;      FoundBump = <span class="keyword">true</span>;</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    }</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;  }</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;  assert (FoundBump &amp;&amp; <span class="stringliteral">&quot;Cannot determine instruction order&quot;</span>);</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;  <span class="keywordflow">return</span> FoundBump;</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;}</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *HexagonHardwareLoops::defWithImmediate(<span class="keywordtype">unsigned</span> R) {</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *DI = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#abf69f92f1977440a4e443a26baeb73c0">getVRegDef</a>(R);</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  <span class="keywordtype">unsigned</span> DOpc = DI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>();</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;  <span class="keywordflow">switch</span> (DOpc) {</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    <span class="keywordflow">case</span> Hexagon::TFRI:</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    <span class="keywordflow">case</span> Hexagon::TFRI64:</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1HexagonISD.html#aa640667f875feccdb3cc643baff441f1a0800fe3cc381af6d8ad19f9cffee365b">Hexagon::CONST32_Int_Real</a>:</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    <span class="keywordflow">case</span> Hexagon::CONST64_Int_Real:</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;      <span class="keywordflow">return</span> DI;</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;  }</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;}</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;int64_t HexagonHardwareLoops::getImmediate(<a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO) {</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;  <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#a2ac18ceda9f2857fea2e5cc4e8bf4ff5">isImm</a>())</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    <span class="keywordflow">return</span> MO.<a class="code" href="classllvm_1_1MachineOperand.html#a7059d68a29d5ecfb37623ab45cdb4e8d">getImm</a>();</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;  assert(MO.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>());</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;  <span class="keywordtype">unsigned</span> R = MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *DI = defWithImmediate(R);</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;  assert(DI &amp;&amp; <span class="stringliteral">&quot;Need an immediate operand&quot;</span>);</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;  <span class="comment">// All currently supported &quot;define-with-immediate&quot; instructions have the</span></div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;  <span class="comment">// actual immediate value in the operand(1).</span></div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  int64_t v = DI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(1).<a class="code" href="classllvm_1_1MachineOperand.html#a7059d68a29d5ecfb37623ab45cdb4e8d">getImm</a>();</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;  <span class="keywordflow">return</span> v;</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;}</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;<span class="keywordtype">void</span> HexagonHardwareLoops::setImmediate(<a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO, int64_t Val) {</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;  <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#a2ac18ceda9f2857fea2e5cc4e8bf4ff5">isImm</a>()) {</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    MO.<a class="code" href="classllvm_1_1MachineOperand.html#a2feaa1c69335c6b9028076cd68c7a5f5">setImm</a>(Val);</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;  }</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;  assert(MO.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>());</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;  <span class="keywordtype">unsigned</span> R = MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *DI = defWithImmediate(R);</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;  <span class="keywordflow">if</span> (MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a8be4959abd44b6fbd158dba0d7c315bc">hasOneNonDBGUse</a>(R)) {</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    <span class="comment">// If R has only one use, then just change its defining instruction to</span></div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    <span class="comment">// the new immediate value.</span></div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    DI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(1).<a class="code" href="classllvm_1_1MachineOperand.html#a2feaa1c69335c6b9028076cd68c7a5f5">setImm</a>(Val);</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;  }</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *RC = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#ab3904d3601dbe52865d5f2e33a06d80d">getRegClass</a>(R);</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;  <span class="keywordtype">unsigned</span> NewR = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a76c3c7e3d4f11b4cfad37fc0449c9635">createVirtualRegister</a>(RC);</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> = *DI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">getParent</a>();</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> DL = DI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a5ca4af2a257043145ad650eafb4402f9">getDebugLoc</a>();</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;  <a class="code" href="namespacellvm.html#a980570dc1410d4ef53806f82028ca381">BuildMI</a>(B, DI, DL, TII-&gt;get(DI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>()), NewR)</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a9f1fae6a5dbb6e378ca85df1fded8515">addImm</a>(Val);</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;  MO.<a class="code" href="classllvm_1_1MachineOperand.html#a624a062754a09d3787614d8627096705">setReg</a>(NewR);</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;}</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;<span class="keywordtype">bool</span> HexagonHardwareLoops::fixupInductionVariable(<a class="code" href="classllvm_1_1MachineLoop.html">MachineLoop</a> *L) {</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Header = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>();</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Preheader = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1bc74c76b876ad387293ecde0f21ed45">getLoopPreheader</a>();</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Latch = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a8917d359fc92f25eb0117386588c6f1c">getLoopLatch</a>();</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;  <span class="keywordflow">if</span> (!Header || !Preheader || !Latch)</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;  <span class="comment">// These data structures follow the same concept as the corresponding</span></div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;  <span class="comment">// ones in findInductionRegister (where some comments are).</span></div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;  <span class="keyword">typedef</span> std::pair&lt;unsigned,int64_t&gt; RegisterBump;</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;  <span class="keyword">typedef</span> std::pair&lt;unsigned,RegisterBump&gt; RegisterInduction;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;  <span class="keyword">typedef</span> std::set&lt;RegisterInduction&gt; RegisterInductionSet;</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;  <span class="comment">// Register candidates for induction variables, with their associated bumps.</span></div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;  RegisterInductionSet IndRegs;</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  <span class="comment">// Look for induction patterns:</span></div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  <span class="comment">//   vreg1 = PHI ..., [ latch, vreg2 ]</span></div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;  <span class="comment">//   vreg2 = ADD vreg1, imm</span></div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html#a096d82c3c6f44b9a8e59d80d3851f616">MachineBasicBlock::instr_iterator</a> instr_iterator;</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;  <span class="keywordflow">for</span> (instr_iterator <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Header-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a172e7bd9150eb0519ef04c796086f93d">instr_begin</a>(), E = Header-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acae72f6ab1071b7ec87b741a8bef582b">instr_end</a>();</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E &amp;&amp; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isPHI(); ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *Phi = &amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    <span class="comment">// Have a PHI instruction.</span></div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1, <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a> = Phi-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> += 2) {</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;      <span class="keywordflow">if</span> (Phi-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>+1).<a class="code" href="classllvm_1_1MachineOperand.html#a3350f7760c4eec67ea7d8f3063c3d748">getMBB</a>() != Latch)</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;      <span class="keywordtype">unsigned</span> PhiReg = Phi-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>).<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;      <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *DI = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#abf69f92f1977440a4e443a26baeb73c0">getVRegDef</a>(PhiReg);</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;      <span class="keywordtype">unsigned</span> UpdOpc = DI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>();</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;      <span class="keywordtype">bool</span> isAdd = (UpdOpc == Hexagon::ADD_ri);</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;      <span class="keywordflow">if</span> (isAdd) {</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;        <span class="comment">// If the register operand to the add/sub is the PHI we are looking</span></div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;        <span class="comment">// at, this meets the induction pattern.</span></div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;        <span class="keywordtype">unsigned</span> IndReg = DI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(1).<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;        <span class="keywordflow">if</span> (MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#abf69f92f1977440a4e443a26baeb73c0">getVRegDef</a>(IndReg) == Phi) {</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;          <span class="keywordtype">unsigned</span> UpdReg = DI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(0).<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;          int64_t V = DI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(2).<a class="code" href="classllvm_1_1MachineOperand.html#a7059d68a29d5ecfb37623ab45cdb4e8d">getImm</a>();</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;          IndRegs.insert(std::make_pair(UpdReg, std::make_pair(IndReg, V)));</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;        }</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;      }</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    }  <span class="comment">// for (i)</span></div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;  }  <span class="comment">// for (instr)</span></div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;  <span class="keywordflow">if</span> (IndRegs.empty())</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="namespacellvm_1_1X86II.html#a97dc14052814702ba0e2b14fb14dd02da6ba65e174dfdcdb111e1aea6b4299b16">TB</a> = 0, *FB = 0;</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand,2&gt;</a> Cond;</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;  <span class="comment">// AnalyzeBranch returns true if it fails to analyze branch.</span></div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;  <span class="keywordtype">bool</span> NotAnalyzed = TII-&gt;<a class="code" href="classllvm_1_1HexagonInstrInfo.html#a6f9cdb0ade88e5375e97bb0905925c5d">AnalyzeBranch</a>(*Latch, TB, FB, Cond, <span class="keyword">false</span>);</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;  <span class="keywordflow">if</span> (NotAnalyzed)</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;  <span class="comment">// Check if the latch branch is unconditional.</span></div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;  <span class="keywordflow">if</span> (Cond.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>())</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;  <span class="keywordflow">if</span> (TB != Header &amp;&amp; FB != Header)</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    <span class="comment">// The latch does not go back to the header.  Not a latch we know and love.</span></div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;  <span class="comment">// Expecting a predicate register as a condition.  It won&#39;t be a hardware</span></div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;  <span class="comment">// predicate register at this point yet, just a vreg.</span></div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;  <span class="comment">// HexagonInstrInfo::AnalyzeBranch for negated branches inserts imm(0)</span></div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;  <span class="comment">// into Cond, followed by the predicate register.  For non-negated branches</span></div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;  <span class="comment">// it&#39;s just the register.</span></div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;  <span class="keywordtype">unsigned</span> CSz = Cond.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>();</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;  <span class="keywordflow">if</span> (CSz != 1 &amp;&amp; CSz != 2)</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = Cond[CSz-1].getReg();</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *PredDef = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#abf69f92f1977440a4e443a26baeb73c0">getVRegDef</a>(P);</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;  <span class="keywordflow">if</span> (!PredDef-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aba5a4d675f357f9189038aebddfe873c">isCompare</a>())</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;  <a class="code" href="classllvm_1_1SmallSet.html">SmallSet&lt;unsigned,2&gt;</a> CmpRegs;</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;  <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> *CmpImmOp = 0;</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;  <span class="comment">// Go over all operands to the compare and look for immediate and register</span></div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;  <span class="comment">// operands.  Assume that if the compare has a single register use and a</span></div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;  <span class="comment">// single immediate operand, then the register is being compared with the</span></div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;  <span class="comment">// immediate value.</span></div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a> = PredDef-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = PredDef-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>()) {</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;      <span class="comment">// Skip all implicit references.  In one case there was:</span></div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;      <span class="comment">//   %vreg140&lt;def&gt; = FCMPUGT32_rr %vreg138, %vreg139, %USR&lt;imp-use&gt;</span></div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;      <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#a40a5d6e03f5bfd15839355a7c39ab3a0">isImplicit</a>())</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;      <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#a57bf9ee7219097ff0f98da23a3b3b782">isUse</a>()) {</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;        <span class="keywordtype">unsigned</span> R = MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;        <span class="keywordflow">if</span> (!defWithImmediate(R)) {</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;          CmpRegs.<a class="code" href="classllvm_1_1SmallSet.html#a8d8348060ccdeeba13fb8bc651dfbf82">insert</a>(MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>());</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;        }</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;        <span class="comment">// Consider the register to be the &quot;immediate&quot; operand.</span></div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;        <span class="keywordflow">if</span> (CmpImmOp)</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;        CmpImmOp = &amp;MO;</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;      }</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#a2ac18ceda9f2857fea2e5cc4e8bf4ff5">isImm</a>()) {</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;      <span class="keywordflow">if</span> (CmpImmOp)    <span class="comment">// A second immediate argument?  Confusing.  Bail out.</span></div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;      CmpImmOp = &amp;MO;</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    }</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;  }</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;  <span class="keywordflow">if</span> (CmpRegs.<a class="code" href="classllvm_1_1SmallSet.html#afd57abe5a6e10c8b282b6549432ec851">empty</a>())</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;  <span class="comment">// Check if the compared register follows the order we want.  Fix if needed.</span></div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;  <span class="keywordflow">for</span> (RegisterInductionSet::iterator <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = IndRegs.begin(), E = IndRegs.end();</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;    <span class="comment">// This is a success.  If the register used in the comparison is one that</span></div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    <span class="comment">// we have identified as a bumped (updated) induction register, there is</span></div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    <span class="comment">// nothing to do.</span></div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    <span class="keywordflow">if</span> (CmpRegs.<a class="code" href="classllvm_1_1SmallSet.html#ab28aa342862f6d16361be514fd98c22e">count</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;first))</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    <span class="comment">// Otherwise, if the register being compared comes out of a PHI node,</span></div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;    <span class="comment">// and has been recognized as following the induction pattern, and is</span></div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    <span class="comment">// compared against an immediate, we can fix it.</span></div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    <span class="keyword">const</span> RegisterBump &amp;RB = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;second;</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;    <span class="keywordflow">if</span> (CmpRegs.<a class="code" href="classllvm_1_1SmallSet.html#ab28aa342862f6d16361be514fd98c22e">count</a>(RB.first)) {</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;      <span class="keywordflow">if</span> (!CmpImmOp)</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;      int64_t CmpImm = getImmediate(*CmpImmOp);</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;      int64_t V = RB.second;</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;      <span class="keywordflow">if</span> (V &gt; 0 &amp;&amp; CmpImm+V &lt; CmpImm)  <span class="comment">// Overflow (64-bit).</span></div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;      <span class="keywordflow">if</span> (V &lt; 0 &amp;&amp; CmpImm+V &gt; CmpImm)  <span class="comment">// Overflow (64-bit).</span></div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;      CmpImm += V;</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;      <span class="comment">// Some forms of cmp-immediate allow u9 and s10.  Assume the worst case</span></div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;      <span class="comment">// scenario, i.e. an 8-bit value.</span></div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;      <span class="keywordflow">if</span> (CmpImmOp-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#a2ac18ceda9f2857fea2e5cc4e8bf4ff5">isImm</a>() &amp;&amp; !<a class="code" href="namespacellvm.html#a3e242f3485db990d043f2dcf91106ce7">isInt&lt;8&gt;</a>(CmpImm))</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;      <span class="comment">// Make sure that the compare happens after the bump.  Otherwise,</span></div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;      <span class="comment">// after the fixup, the compare would use a yet-undefined register.</span></div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;      <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *BumpI = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#abf69f92f1977440a4e443a26baeb73c0">getVRegDef</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;first);</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;      <span class="keywordtype">bool</span> Order = orderBumpCompare(BumpI, PredDef);</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;      <span class="keywordflow">if</span> (!Order)</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;      <span class="comment">// Finally, fix the compare instruction.</span></div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;      setImmediate(*CmpImmOp, CmpImm);</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, n = PredDef-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;        <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = PredDef-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;        <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>() &amp;&amp; MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>() == RB.first) {</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;          MO.<a class="code" href="classllvm_1_1MachineOperand.html#a624a062754a09d3787614d8627096705">setReg</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;first);</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;        }</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;      }</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    }</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;  }</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;}</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;<span class="comment">/// \brief Create a preheader for a given loop.</span></div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *HexagonHardwareLoops::createPreheaderForLoop(</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;      <a class="code" href="classllvm_1_1MachineLoop.html">MachineLoop</a> *L) {</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *TmpPH = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1bc74c76b876ad387293ecde0f21ed45">getLoopPreheader</a>())</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;    <span class="keywordflow">return</span> TmpPH;</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Header = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>();</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Latch = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a8917d359fc92f25eb0117386588c6f1c">getLoopLatch</a>();</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> *MF = Header-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#af2e482ff2a9253ec6bc2285491496bd6">getParent</a>();</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> DL;</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;  <span class="keywordflow">if</span> (!Latch || Header-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a9832fb14c5aeb2277bc66d72cc99d105">hasAddressTaken</a>())</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html#a096d82c3c6f44b9a8e59d80d3851f616">MachineBasicBlock::instr_iterator</a> instr_iterator;</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;  <span class="comment">// Verify that all existing predecessors have analyzable branches</span></div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;  <span class="comment">// (or no branches at all).</span></div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;  <span class="keyword">typedef</span> std::vector&lt;MachineBasicBlock*&gt; MBBVector;</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;  MBBVector Preds(Header-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab644fcf07a4c2708333cf66276282357">pred_begin</a>(), Header-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a0359a738e0412c5a7ea55d61175e0661">pred_end</a>());</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand,2&gt;</a> Tmp1;</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="namespacellvm_1_1X86II.html#a97dc14052814702ba0e2b14fb14dd02da6ba65e174dfdcdb111e1aea6b4299b16">TB</a> = 0, *FB = 0;</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;  <span class="keywordflow">if</span> (TII-&gt;<a class="code" href="classllvm_1_1HexagonInstrInfo.html#a6f9cdb0ade88e5375e97bb0905925c5d">AnalyzeBranch</a>(*Latch, TB, FB, Tmp1, <span class="keyword">false</span>))</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;  <span class="keywordflow">for</span> (MBBVector::iterator <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Preds.begin(), E = Preds.end(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *PB = *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    <span class="keywordflow">if</span> (PB != Latch) {</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;      <span class="keywordtype">bool</span> NotAnalyzed = TII-&gt;<a class="code" href="classllvm_1_1HexagonInstrInfo.html#a6f9cdb0ade88e5375e97bb0905925c5d">AnalyzeBranch</a>(*PB, TB, FB, Tmp1, <span class="keyword">false</span>);</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;      <span class="keywordflow">if</span> (NotAnalyzed)</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;    }</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;  }</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *NewPH = MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#ab2a56feb4fe943ae2362d61f3a43acca">CreateMachineBasicBlock</a>();</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;  MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#af4c0db6d503e0ba3b8e44067023ffbba">insert</a>(Header, NewPH);</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;  <span class="keywordflow">if</span> (Header-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac9786455bc217ebd35377bb5d5ec8f20">pred_size</a>() &gt; 2) {</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;    <span class="comment">// Ensure that the header has only two predecessors: the preheader and</span></div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;    <span class="comment">// the loop latch.  Any additional predecessors of the header should</span></div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;    <span class="comment">// join at the newly created preheader.  Inspect all PHI nodes from the</span></div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    <span class="comment">// header and create appropriate corresponding PHI nodes in the preheader.</span></div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;    <span class="keywordflow">for</span> (instr_iterator <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Header-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a172e7bd9150eb0519ef04c796086f93d">instr_begin</a>(), E = Header-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acae72f6ab1071b7ec87b741a8bef582b">instr_end</a>();</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;         <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E &amp;&amp; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isPHI(); ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;      <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *PN = &amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1MCInstrDesc.html">MCInstrDesc</a> &amp;PD = TII-&gt;get(<a class="code" href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8ae41f9ca68ba5e8b9613cea03652ebd72">TargetOpcode::PHI</a>);</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;      <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *NewPN = MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#af3607186e9eb9417ccb6c852aa8b83dd">CreateMachineInstr</a>(PD, DL);</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;      NewPH-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a8d02c1e6ef20f42c10d6f4e7234efd61">insert</a>(NewPH-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>(), NewPN);</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;      <span class="keywordtype">unsigned</span> PR = PN-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(0).<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *RC = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#ab3904d3601dbe52865d5f2e33a06d80d">getRegClass</a>(PR);</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;      <span class="keywordtype">unsigned</span> NewPR = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a76c3c7e3d4f11b4cfad37fc0449c9635">createVirtualRegister</a>(RC);</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;      NewPN-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a469e271fba3a9b52dad4fa54eaf44e2b">addOperand</a>(<a class="code" href="classllvm_1_1MachineOperand.html#a18124eff2d5106b9bf041f948a1912cc">MachineOperand::CreateReg</a>(NewPR, <span class="keyword">true</span>));</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;      <span class="comment">// Copy all non-latch operands of a header&#39;s PHI node to the newly</span></div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;      <span class="comment">// created PHI node in the preheader.</span></div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1, <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a> = PN-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> += 2) {</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;        <span class="keywordtype">unsigned</span> PredR = PN-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>).<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;        <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *PredB = PN-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>+1).<a class="code" href="classllvm_1_1MachineOperand.html#a3350f7760c4eec67ea7d8f3063c3d748">getMBB</a>();</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;        <span class="keywordflow">if</span> (PredB == Latch)</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;        NewPN-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a469e271fba3a9b52dad4fa54eaf44e2b">addOperand</a>(<a class="code" href="classllvm_1_1MachineOperand.html#a18124eff2d5106b9bf041f948a1912cc">MachineOperand::CreateReg</a>(PredR, <span class="keyword">false</span>));</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;        NewPN-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a469e271fba3a9b52dad4fa54eaf44e2b">addOperand</a>(<a class="code" href="classllvm_1_1MachineOperand.html#afff7622ffefd3560aafe2025d245d4c5">MachineOperand::CreateMBB</a>(PredB));</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;      }</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;      <span class="comment">// Remove copied operands from the old PHI node and add the value</span></div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;      <span class="comment">// coming from the preheader&#39;s PHI.</span></div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = PN-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">getNumOperands</a>()-2; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt; 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> -= 2) {</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;        <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *PredB = PN-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>+1).<a class="code" href="classllvm_1_1MachineOperand.html#a3350f7760c4eec67ea7d8f3063c3d748">getMBB</a>();</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;        <span class="keywordflow">if</span> (PredB != Latch) {</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;          PN-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a001a88e1d71c2e11ccd57efe75da4af3">RemoveOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>+1);</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;          PN-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a001a88e1d71c2e11ccd57efe75da4af3">RemoveOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;        }</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;      }</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;      PN-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a469e271fba3a9b52dad4fa54eaf44e2b">addOperand</a>(<a class="code" href="classllvm_1_1MachineOperand.html#a18124eff2d5106b9bf041f948a1912cc">MachineOperand::CreateReg</a>(NewPR, <span class="keyword">false</span>));</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;      PN-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a469e271fba3a9b52dad4fa54eaf44e2b">addOperand</a>(<a class="code" href="classllvm_1_1MachineOperand.html#afff7622ffefd3560aafe2025d245d4c5">MachineOperand::CreateMBB</a>(NewPH));</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    }</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;    assert(Header-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac9786455bc217ebd35377bb5d5ec8f20">pred_size</a>() == 2);</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    <span class="comment">// The header has only two predecessors, but the non-latch predecessor</span></div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    <span class="comment">// is not a preheader (e.g. it has other successors, etc.)</span></div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    <span class="comment">// In such a case we don&#39;t need any extra PHI nodes in the new preheader,</span></div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    <span class="comment">// all we need is to adjust existing PHIs in the header to now refer to</span></div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;    <span class="comment">// the new preheader.</span></div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    <span class="keywordflow">for</span> (instr_iterator <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Header-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a172e7bd9150eb0519ef04c796086f93d">instr_begin</a>(), E = Header-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acae72f6ab1071b7ec87b741a8bef582b">instr_end</a>();</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;         <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E &amp;&amp; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isPHI(); ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;      <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *PN = &amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1, <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a> = PN-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> += 2) {</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;        <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = PN-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>+1);</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;        <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#a3350f7760c4eec67ea7d8f3063c3d748">getMBB</a>() != Latch)</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;          MO.<a class="code" href="classllvm_1_1MachineOperand.html#a98e9c9e8ef7cbb6c4aa89a38f21decfa">setMBB</a>(NewPH);</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;      }</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;    }</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;  }</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;  <span class="comment">// &quot;Reroute&quot; the CFG edges to link in the new preheader.</span></div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;  <span class="comment">// If any of the predecessors falls through to the header, insert a branch</span></div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;  <span class="comment">// to the new preheader in that place.</span></div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand,1&gt;</a> Tmp2;</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand,1&gt;</a> EmptyCond;</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;  TB = FB = 0;</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;  <span class="keywordflow">for</span> (MBBVector::iterator <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Preds.begin(), E = Preds.end(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *PB = *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;    <span class="keywordflow">if</span> (PB != Latch) {</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;      Tmp2.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;      <span class="keywordtype">bool</span> NotAnalyzed = TII-&gt;<a class="code" href="classllvm_1_1HexagonInstrInfo.html#a6f9cdb0ade88e5375e97bb0905925c5d">AnalyzeBranch</a>(*PB, TB, FB, Tmp2, <span class="keyword">false</span>);</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;      (void)NotAnalyzed; <span class="comment">// supress compiler warning</span></div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;      assert (!NotAnalyzed &amp;&amp; <span class="stringliteral">&quot;Should be analyzable!&quot;</span>);</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;      <span class="keywordflow">if</span> (TB != Header &amp;&amp; (Tmp2.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>() || FB != Header))</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;        TII-&gt;<a class="code" href="classllvm_1_1HexagonInstrInfo.html#a95f554978b4efc4c1ca8b0ed5e017ff6">InsertBranch</a>(*PB, NewPH, 0, EmptyCond, DL);</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;      PB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab9a54fdc7456ee97cb54ff30d625b6b7">ReplaceUsesOfBlockWith</a>(Header, NewPH);</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;    }</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;  }</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;  <span class="comment">// It can happen that the latch block will fall through into the header.</span></div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;  <span class="comment">// Insert an unconditional branch to the header.</span></div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;  TB = FB = 0;</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;  <span class="keywordtype">bool</span> LatchNotAnalyzed = TII-&gt;<a class="code" href="classllvm_1_1HexagonInstrInfo.html#a6f9cdb0ade88e5375e97bb0905925c5d">AnalyzeBranch</a>(*Latch, TB, FB, Tmp2, <span class="keyword">false</span>);</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;  (void)LatchNotAnalyzed; <span class="comment">// supress compiler warning</span></div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;  assert (!LatchNotAnalyzed &amp;&amp; <span class="stringliteral">&quot;Should be analyzable!&quot;</span>);</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;  <span class="keywordflow">if</span> (!TB &amp;&amp; !FB)</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;    TII-&gt;<a class="code" href="classllvm_1_1HexagonInstrInfo.html#a95f554978b4efc4c1ca8b0ed5e017ff6">InsertBranch</a>(*Latch, Header, 0, EmptyCond, DL);</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;  <span class="comment">// Finally, the branch from the preheader to the header.</span></div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;  TII-&gt;<a class="code" href="classllvm_1_1HexagonInstrInfo.html#a95f554978b4efc4c1ca8b0ed5e017ff6">InsertBranch</a>(*NewPH, Header, 0, EmptyCond, DL);</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;  NewPH-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3fcc360e6de146a370e8b0deecfa877f">addSuccessor</a>(Header);</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;  <span class="keywordflow">return</span> NewPH;</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;}</div><div class="ttc" id="MipsInstPrinter_8cpp_html_a85e8dc708ae90b1129b892cb8ae1500f"><div class="ttname"><a href="MipsInstPrinter_8cpp.html#a85e8dc708ae90b1129b892cb8ae1500f">isReg</a></div><div class="ttdeci">static bool isReg(const MCInst &amp;MI, unsigned OpNo)</div><div class="ttdef"><b>Definition:</b> <a href="MipsInstPrinter_8cpp_source.html#l00030">MipsInstPrinter.cpp:30</a></div></div>
<div class="ttc" id="README-SSE_8txt_html_a195b3944b472207a0fe48ea0d9a478e1"><div class="ttname"><a href="README-SSE_8txt.html#a195b3944b472207a0fe48ea0d9a478e1">LC0</a></div><div class="ttdeci">into eax xorps xmm0 xmm0 eax xmm0 eax xmm0 ret esp eax movdqa LC0</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00667">README-SSE.txt:667</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a40a5d6e03f5bfd15839355a7c39ab3a0"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a40a5d6e03f5bfd15839355a7c39ab3a0">llvm::MachineOperand::isImplicit</a></div><div class="ttdeci">bool isImplicit() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00279">MachineOperand.h:279</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00127">SmallVector.h:127</a></div></div>
<div class="ttc" id="SmallSet_8h_html"><div class="ttname"><a href="SmallSet_8h.html">SmallSet.h</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00236">SmallVector.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_af2e482ff2a9253ec6bc2285491496bd6"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#af2e482ff2a9253ec6bc2285491496bd6">llvm::MachineBasicBlock::getParent</a></div><div class="ttdeci">const MachineFunction * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00137">MachineBasicBlock.h:137</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a537a9265c55392ab47d44954f27db538"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a537a9265c55392ab47d44954f27db538">llvm::MachineBasicBlock::erase</a></div><div class="ttdeci">instr_iterator erase(instr_iterator I)</div></div>
<div class="ttc" id="namespacellvm_1_1tgtok_html_abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac"><div class="ttname"><a href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">llvm::tgtok::In</a></div><div class="ttdef"><b>Definition:</b> <a href="TGLexer_8h_source.html#l00046">TGLexer.h:46</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a5a3b8a8269ba0c61102f71a2a3bd42cd"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a5a3b8a8269ba0c61102f71a2a3bd42cd">llvm::LoopBase::end</a></div><div class="ttdeci">iterator end() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00131">LoopInfo.h:131</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_af3607186e9eb9417ccb6c852aa8b83dd"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#af3607186e9eb9417ccb6c852aa8b83dd">llvm::MachineFunction::CreateMachineInstr</a></div><div class="ttdeci">MachineInstr * CreateMachineInstr(const MCInstrDesc &amp;MCID, DebugLoc DL, bool NoImp=false)</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8cpp_source.html#l00173">MachineFunction.cpp:173</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_acad8fe90886f92eabced0c2f9bd0e6f5"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#acad8fe90886f92eabced0c2f9bd0e6f5">llvm::MachineOperand::getParent</a></div><div class="ttdeci">MachineInstr * getParent()</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00204">MachineOperand.h:204</a></div></div>
<div class="ttc" id="classllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00035">PassRegistry.cpp:35</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a172e7bd9150eb0519ef04c796086f93d"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a172e7bd9150eb0519ef04c796086f93d">llvm::MachineBasicBlock::instr_begin</a></div><div class="ttdeci">instr_iterator instr_begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00227">MachineBasicBlock.h:227</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_acae72f6ab1071b7ec87b741a8bef582b"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#acae72f6ab1071b7ec87b741a8bef582b">llvm::MachineBasicBlock::instr_end</a></div><div class="ttdeci">instr_iterator instr_end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00229">MachineBasicBlock.h:229</a></div></div>
<div class="ttc" id="classllvm_1_1MachineDominatorTree_html_a4743a26ccaf71c92f91cbe562df4738a"><div class="ttname"><a href="classllvm_1_1MachineDominatorTree.html#a4743a26ccaf71c92f91cbe562df4738a">llvm::MachineDominatorTree::properlyDominates</a></div><div class="ttdeci">bool properlyDominates(const MachineDomTreeNode *A, const MachineDomTreeNode *B) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineDominators_8h_source.html#l00101">MachineDominators.h:101</a></div></div>
<div class="ttc" id="classllvm_1_1HexagonInstrInfo_html_a6f9cdb0ade88e5375e97bb0905925c5d"><div class="ttname"><a href="classllvm_1_1HexagonInstrInfo.html#a6f9cdb0ade88e5375e97bb0905925c5d">llvm::HexagonInstrInfo::AnalyzeBranch</a></div><div class="ttdeci">virtual bool AnalyzeBranch(MachineBasicBlock &amp;MBB, MachineBasicBlock *&amp;TBB, MachineBasicBlock *&amp;FBB, SmallVectorImpl&lt; MachineOperand &gt; &amp;Cond, bool AllowModify) const </div><div class="ttdef"><b>Definition:</b> <a href="HexagonInstrInfo_8cpp_source.html#l00172">HexagonInstrInfo.cpp:172</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="namespacellvm_1_1A64CC_html_af5804bc0518be9568f73db566e4d6f46a0555f297eceee28e5fc20d282dfeb8f4"><div class="ttname"><a href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a0555f297eceee28e5fc20d282dfeb8f4">llvm::A64CC::NE</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00032">AArch64BaseInfo.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a3350f7760c4eec67ea7d8f3063c3d748"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a3350f7760c4eec67ea7d8f3063c3d748">llvm::MachineOperand::getMBB</a></div><div class="ttdeci">MachineBasicBlock * getMBB() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00417">MachineOperand.h:417</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html"><div class="ttname"><a href="classllvm_1_1MachineFunction.html">llvm::MachineFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00075">MachineFunction.h:75</a></div></div>
<div class="ttc" id="namespacellvm_html_aec90335b734fccd44f087326d9a6e7a1"><div class="ttname"><a href="namespacellvm.html#aec90335b734fccd44f087326d9a6e7a1">llvm::initializeHexagonHardwareLoopsPass</a></div><div class="ttdeci">void initializeHexagonHardwareLoopsPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_a76c3c7e3d4f11b4cfad37fc0449c9635"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a76c3c7e3d4f11b4cfad37fc0449c9635">llvm::MachineRegisterInfo::createVirtualRegister</a></div><div class="ttdeci">unsigned createVirtualRegister(const TargetRegisterClass *RegClass)</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00104">MachineRegisterInfo.cpp:104</a></div></div>
<div class="ttc" id="namespacellvm_1_1SystemZISD_html_a9a3c050e4bfe8d0d09d74c979f5bb121a68ace50a32835aa0562cf8f9694ba510"><div class="ttname"><a href="namespacellvm_1_1SystemZISD.html#a9a3c050e4bfe8d0d09d74c979f5bb121a68ace50a32835aa0562cf8f9694ba510">llvm::SystemZISD::TM</a></div><div class="ttdef"><b>Definition:</b> <a href="SystemZISelLowering_8h_source.html#l00060">SystemZISelLowering.h:60</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a7f0521fa2de44271fd4b909ea7351ef3"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a7f0521fa2de44271fd4b909ea7351ef3">llvm::MachineBasicBlock::getFirstTerminator</a></div><div class="ttdeci">iterator getFirstTerminator()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00172">MachineBasicBlock.cpp:172</a></div></div>
<div class="ttc" id="classllvm_1_1MCInstrDesc_html"><div class="ttname"><a href="classllvm_1_1MCInstrDesc.html">llvm::MCInstrDesc</a></div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00137">MCInstrDesc.h:137</a></div></div>
<div class="ttc" id="README-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00427">README-SSE.txt:427</a></div></div>
<div class="ttc" id="classllvm_1_1HexagonInstrInfo_html"><div class="ttname"><a href="classllvm_1_1HexagonInstrInfo.html">llvm::HexagonInstrInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="HexagonInstrInfo_8h_source.html#l00028">HexagonInstrInfo.h:28</a></div></div>
<div class="ttc" id="Debug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_a3a76669632041022e6976766a22bd2b0"><div class="ttname"><a href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a></div><div class="ttdeci">return j(j&lt;&lt; 16)</div></div>
<div class="ttc" id="Hexagon_8h_html"><div class="ttname"><a href="Hexagon_8h.html">Hexagon.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_ac02c0424a7e7a4021fd9efc0a71d7473"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#ac02c0424a7e7a4021fd9efc0a71d7473">llvm::MachineRegisterInfo::use_nodbg_empty</a></div><div class="ttdeci">bool use_nodbg_empty(unsigned RegNo) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00285">MachineRegisterInfo.h:285</a></div></div>
<div class="ttc" id="namespacellvm_1_1HexagonISD_html_aa640667f875feccdb3cc643baff441f1a0800fe3cc381af6d8ad19f9cffee365b"><div class="ttname"><a href="namespacellvm_1_1HexagonISD.html#aa640667f875feccdb3cc643baff441f1a0800fe3cc381af6d8ad19f9cffee365b">llvm::HexagonISD::CONST32_Int_Real</a></div><div class="ttdef"><b>Definition:</b> <a href="HexagonISelLowering_8h_source.html#l00030">HexagonISelLowering.h:30</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a803a7424877fd049679b9aa2f07597b5"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a803a7424877fd049679b9aa2f07597b5">llvm::MachineInstr::getDesc</a></div><div class="ttdeci">const MCInstrDesc &amp; getDesc() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00257">MachineInstr.h:257</a></div></div>
<div class="ttc" id="HexagonHardwareLoops_8cpp_html_a1bfb784833ebd5c123c31a319c3a67c0"><div class="ttname"><a href="HexagonHardwareLoops_8cpp.html#a1bfb784833ebd5c123c31a319c3a67c0">STATISTIC</a></div><div class="ttdeci">STATISTIC(NumHWLoops,&quot;Number of loops converted to hardware loops&quot;)</div></div>
<div class="ttc" id="classllvm_1_1DebugLoc_html"><div class="ttname"><a href="classllvm_1_1DebugLoc.html">llvm::DebugLoc</a></div><div class="ttdef"><b>Definition:</b> <a href="DebugLoc_8h_source.html#l00028">DebugLoc.h:28</a></div></div>
<div class="ttc" id="LLParser_8cpp_html_a33ece1ef8074506a15d7f86eb76dbae6"><div class="ttname"><a href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a></div><div class="ttdeci">F(f)</div></div>
<div class="ttc" id="namespacellvm_html_ad334ebc2f4abb942af36808d05a32fc1"><div class="ttname"><a href="namespacellvm.html#ad334ebc2f4abb942af36808d05a32fc1">llvm::createHexagonHardwareLoops</a></div><div class="ttdeci">FunctionPass * createHexagonHardwareLoops()</div><div class="ttdef"><b>Definition:</b> <a href="HexagonHardwareLoops_8cpp_source.html#l00291">HexagonHardwareLoops.cpp:291</a></div></div>
<div class="ttc" id="namespacellvm_1_1TargetOpcode_html_a348d4259b5fa6a8ecfe94e7ae512e1a8afbad4e5ed543b4325115bdb3aff2f8d9"><div class="ttname"><a href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8afbad4e5ed543b4325115bdb3aff2f8d9">llvm::TargetOpcode::COPY</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetOpcodes_8h_source.html#l00086">TargetOpcodes.h:86</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_acbc921830578e2741be6549db716c0ce"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">llvm::MachineBasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00238">MachineBasicBlock.h:238</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a096d82c3c6f44b9a8e59d80d3851f616"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a096d82c3c6f44b9a8e59d80d3851f616">llvm::MachineBasicBlock::instr_iterator</a></div><div class="ttdeci">Instructions::iterator instr_iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00205">MachineBasicBlock.h:205</a></div></div>
<div class="ttc" id="Statistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_a355ba266da19094cc0948311c431768e"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a355ba266da19094cc0948311c431768e">llvm::MachineRegisterInfo::use_nodbg_end</a></div><div class="ttdeci">static use_nodbg_iterator use_nodbg_end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00281">MachineRegisterInfo.h:281</a></div></div>
<div class="ttc" id="HexagonTargetMachine_8h_html"><div class="ttname"><a href="HexagonTargetMachine_8h.html">HexagonTargetMachine.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00109">CommandLine.h:109</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a8917d359fc92f25eb0117386588c6f1c"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a8917d359fc92f25eb0117386588c6f1c">llvm::LoopBase::getLoopLatch</a></div><div class="ttdeci">BlockT * getLoopLatch() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00154">LoopInfoImpl.h:154</a></div></div>
<div class="ttc" id="HexagonHardwareLoops_8cpp_html_a8ec800975757c3eb1c11b4fa3a1a14b0"><div class="ttname"><a href="HexagonHardwareLoops_8cpp.html#a8ec800975757c3eb1c11b4fa3a1a14b0">INITIALIZE_PASS_BEGIN</a></div><div class="ttdeci">INITIALIZE_PASS_BEGIN(HexagonHardwareLoops,&quot;hwloops&quot;,&quot;Hexagon Hardware Loops&quot;, false, false) INITIALIZE_PASS_END(HexagonHardwareLoops</div></div>
<div class="ttc" id="X86DisassemblerDecoder_8h_html_a546839a5c4bcf9f9450967155f48de41"><div class="ttname"><a href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></div><div class="ttdeci">Reg</div><div class="ttdef"><b>Definition:</b> <a href="X86DisassemblerDecoder_8h_source.html#l00428">X86DisassemblerDecoder.h:428</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_ae5c60fd282ee894c87ea02c3f0fcb6d0"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">llvm::AnalysisUsage::addRequired</a></div><div class="ttdeci">AnalysisUsage &amp; addRequired()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00055">PassAnalysisSupport.h:55</a></div></div>
<div class="ttc" id="PassSupport_8h_html_a14724f1ccf528e73bb29bc9230737967"><div class="ttname"><a href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a></div><div class="ttdeci">#define INITIALIZE_PASS_DEPENDENCY(depName)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00167">PassSupport.h:167</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ab9a54fdc7456ee97cb54ff30d625b6b7"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ab9a54fdc7456ee97cb54ff30d625b6b7">llvm::MachineBasicBlock::ReplaceUsesOfBlockWith</a></div><div class="ttdeci">void ReplaceUsesOfBlockWith(MachineBasicBlock *Old, MachineBasicBlock *New)</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l01008">MachineBasicBlock.cpp:1008</a></div></div>
<div class="ttc" id="HexagonHardwareLoops_8cpp_html_ada7c1594a393ede3ce32602d64d7ddb2"><div class="ttname"><a href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a></div><div class="ttdeci">Hexagon Hardware Loops</div><div class="ttdef"><b>Definition:</b> <a href="HexagonHardwareLoops_8cpp_source.html#l00281">HexagonHardwareLoops.cpp:281</a></div></div>
<div class="ttc" id="MachineFunction_8h_html"><div class="ttname"><a href="MachineFunction_8h.html">MachineFunction.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_ac8347c6938efe4d9a4426b92ef57851e"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#ac8347c6938efe4d9a4426b92ef57851e">llvm::MachineRegisterInfo::use_end</a></div><div class="ttdeci">static use_iterator use_end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00260">MachineRegisterInfo.h:260</a></div></div>
<div class="ttc" id="classllvm_1_1MachineLoop_html_adfb3765b2827835823c1c55d12b33957"><div class="ttname"><a href="classllvm_1_1MachineLoop.html#adfb3765b2827835823c1c55d12b33957">llvm::MachineLoop::getTopBlock</a></div><div class="ttdeci">MachineBasicBlock * getTopBlock()</div><div class="ttdef"><b>Definition:</b> <a href="MachineLoopInfo_8cpp_source.html#l00049">MachineLoopInfo.cpp:49</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunctionPass_html"><div class="ttname"><a href="classllvm_1_1MachineFunctionPass.html">llvm::MachineFunctionPass</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunctionPass_8h_source.html#l00032">MachineFunctionPass.h:32</a></div></div>
<div class="ttc" id="HexagonCopyToCombine_8cpp_html_a1d40004718218dbdf06b496766299101"><div class="ttname"><a href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a></div><div class="ttdeci">const HexagonInstrInfo * TII</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCopyToCombine_8cpp_source.html#l00115">HexagonCopyToCombine.cpp:115</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a18124eff2d5106b9bf041f948a1912cc"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a18124eff2d5106b9bf041f948a1912cc">llvm::MachineOperand::CreateReg</a></div><div class="ttdeci">static MachineOperand CreateReg(unsigned Reg, bool isDef, bool isImp=false, bool isKill=false, bool isDead=false, bool isUndef=false, bool isEarlyClobber=false, unsigned SubReg=0, bool isDebug=false, bool isInternalRead=false)</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00560">MachineOperand.h:560</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a2ac18ceda9f2857fea2e5cc4e8bf4ff5"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a2ac18ceda9f2857fea2e5cc4e8bf4ff5">llvm::MachineOperand::isImm</a></div><div class="ttdeci">bool isImm() const </div><div class="ttdoc">isImm - Tests if this is a MO_Immediate operand. </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00226">MachineOperand.h:226</a></div></div>
<div class="ttc" id="classllvm_1_1MachineLoopInfo_html_ad174ba1c760b290b7de9772c30a252d9"><div class="ttname"><a href="classllvm_1_1MachineLoopInfo.html#ad174ba1c760b290b7de9772c30a252d9">llvm::MachineLoopInfo::begin</a></div><div class="ttdeci">iterator begin() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineLoopInfo_8h_source.html#l00092">MachineLoopInfo.h:92</a></div></div>
<div class="ttc" id="classllvm_1_1Use_html"><div class="ttname"><a href="classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00060">Use.h:60</a></div></div>
<div class="ttc" id="classllvm_1_1MCInstrDesc_html_a7981f38e296fd86b0cea036317fc1fcd"><div class="ttname"><a href="classllvm_1_1MCInstrDesc.html#a7981f38e296fd86b0cea036317fc1fcd">llvm::MCInstrDesc::isCall</a></div><div class="ttdeci">bool isCall() const </div><div class="ttdoc">Return true if the instruction is a call. </div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00232">MCInstrDesc.h:232</a></div></div>
<div class="ttc" id="PassSupport_8h_html_a74ce8276b89067e806f67c45a6d92575"><div class="ttname"><a href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a></div><div class="ttdeci">#define INITIALIZE_PASS_END(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00172">PassSupport.h:172</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00035">APInt.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_ad8198d6d83af9410d867136e33fbf4b2"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">llvm::MachineOperand::isReg</a></div><div class="ttdeci">bool isReg() const </div><div class="ttdoc">isReg - Tests if this is a MO_Register operand. </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00224">MachineOperand.h:224</a></div></div>
<div class="ttc" id="namespacellvm_html_a3e242f3485db990d043f2dcf91106ce7"><div class="ttname"><a href="namespacellvm.html#a3e242f3485db990d043f2dcf91106ce7">llvm::isInt&lt; 8 &gt;</a></div><div class="ttdeci">bool isInt&lt; 8 &gt;(int64_t x)</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00268">MathExtras.h:268</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_ac2421adbb9996e1b15f03a8abb6c70a8"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#ac2421adbb9996e1b15f03a8abb6c70a8">llvm::MachineInstr::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8cpp_source.html#l00846">MachineInstr.cpp:846</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterClass_html"><div class="ttname"><a href="classllvm_1_1TargetRegisterClass.html">llvm::TargetRegisterClass</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00036">TargetRegisterInfo.h:36</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_ab3904d3601dbe52865d5f2e33a06d80d"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#ab3904d3601dbe52865d5f2e33a06d80d">llvm::MachineRegisterInfo::getRegClass</a></div><div class="ttdeci">const TargetRegisterClass * getRegClass(unsigned Reg) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00342">MachineRegisterInfo.h:342</a></div></div>
<div class="ttc" id="namespacellvm_html_a59575e3191e743149bbd95eacbb9081a"><div class="ttname"><a href="namespacellvm.html#a59575e3191e743149bbd95eacbb9081a">llvm::abs64</a></div><div class="ttdeci">int64_t abs64(int64_t x)</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00579">MathExtras.h:579</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a22b3e904c08bd922efd707282aed89d9"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a22b3e904c08bd922efd707282aed89d9">llvm::LoopBase::begin</a></div><div class="ttdeci">iterator begin() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00130">LoopInfo.h:130</a></div></div>
<div class="ttc" id="namespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00126">StackSlotColoring.cpp:126</a></div></div>
<div class="ttc" id="namespacellvm_1_1CallingConv_html_a4f861731fc6dbfdccc05af5968d98974"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">llvm::CallingConv::ID</a></div><div class="ttdeci">ID</div><div class="ttdoc">LLVM Calling Convention Representation. </div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00026">CallingConv.h:26</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstrBuilder_html_a9f1fae6a5dbb6e378ca85df1fded8515"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#a9f1fae6a5dbb6e378ca85df1fded8515">llvm::MachineInstrBuilder::addImm</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addImm(int64_t Val) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00083">MachineInstrBuilder.h:83</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ad96b7cf3182ce2ba85e5a7a93b12c441"><div class="ttname"><a href="MD5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a></div><div class="ttdeci">#define G(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00052">MD5.cpp:52</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a7b5fe96d88954efc855e6c466207e535"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">llvm::MachineInstr::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00265">MachineInstr.h:265</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a4b2d2c2ddd3ccf5630c18731a162977d"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a4b2d2c2ddd3ccf5630c18731a162977d">llvm::LoopBase&lt; MachineBasicBlock, MachineLoop &gt;::iterator</a></div><div class="ttdeci">std::vector&lt; MachineLoop * &gt;::const_iterator iterator</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00127">LoopInfo.h:127</a></div></div>
<div class="ttc" id="classllvm_1_1PrintReg_html"><div class="ttname"><a href="classllvm_1_1PrintReg.html">llvm::PrintReg</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00878">TargetRegisterInfo.h:878</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a001a88e1d71c2e11ccd57efe75da4af3"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a001a88e1d71c2e11ccd57efe75da4af3">llvm::MachineInstr::RemoveOperand</a></div><div class="ttdeci">void RemoveOperand(unsigned i)</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8cpp_source.html#l00717">MachineInstr.cpp:717</a></div></div>
<div class="ttc" id="classllvm_1_1HexagonInstrInfo_html_a29bbe2dcdff222364e40b408e9c85c1b"><div class="ttname"><a href="classllvm_1_1HexagonInstrInfo.html#a29bbe2dcdff222364e40b408e9c85c1b">llvm::HexagonInstrInfo::isValidOffset</a></div><div class="ttdeci">bool isValidOffset(const int Opcode, const int Offset) const </div><div class="ttdef"><b>Definition:</b> <a href="HexagonInstrInfo_8cpp_source.html#l01095">HexagonInstrInfo.cpp:1095</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_a8db36c82f32d6f6a4d35a00e55be03a8"><div class="ttname"><a href="Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a></div><div class="ttdeci">bool Shift</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00506">Target/README.txt:506</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorBase_html_a8a8df4d85555c7954a95f86080cd3b64"><div class="ttname"><a href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">llvm::SmallVectorBase::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const </div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00056">SmallVector.h:56</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a242314c0ae0147d1a7ef54c9bc312616"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">llvm::MachineInstr::getOpcode</a></div><div class="ttdeci">int getOpcode() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00261">MachineInstr.h:261</a></div></div>
<div class="ttc" id="MachineInstrBuilder_8h_html"><div class="ttname"><a href="MachineInstrBuilder_8h.html">MachineInstrBuilder.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineLoop_html"><div class="ttname"><a href="classllvm_1_1MachineLoop.html">llvm::MachineLoop</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineLoopInfo_8h_source.html#l00044">MachineLoopInfo.h:44</a></div></div>
<div class="ttc" id="structllvm_1_1HexagonRegisterInfo_html"><div class="ttname"><a href="structllvm_1_1HexagonRegisterInfo.html">llvm::HexagonRegisterInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="HexagonRegisterInfo_8h_source.html#l00045">HexagonRegisterInfo.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1SmallSet_html_a8d8348060ccdeeba13fb8bc651dfbf82"><div class="ttname"><a href="classllvm_1_1SmallSet.html#a8d8348060ccdeeba13fb8bc651dfbf82">llvm::SmallSet::insert</a></div><div class="ttdeci">bool insert(const T &amp;V)</div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00059">SmallSet.h:59</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a7e7a1a247b7725a24fe19a91f90782cc"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a7e7a1a247b7725a24fe19a91f90782cc">llvm::MachineBasicBlock::pred_iterator</a></div><div class="ttdeci">std::vector&lt; MachineBasicBlock * &gt;::iterator pred_iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00247">MachineBasicBlock.h:247</a></div></div>
<div class="ttc" id="HexagonHardwareLoops_8cpp_html_a462dfa38055b260abcd8b296b0fd1150"><div class="ttname"><a href="HexagonHardwareLoops_8cpp.html#a462dfa38055b260abcd8b296b0fd1150">HWLoopLimit</a></div><div class="ttdeci">static cl::opt&lt; int &gt; HWLoopLimit(&quot;max-hwloop&quot;, cl::Hidden, cl::init(-1))</div></div>
<div class="ttc" id="regexec_8c_html_ac07acfbb082b04f5bea72998c8976b3c"><div class="ttname"><a href="regexec_8c.html#ac07acfbb082b04f5bea72998c8976b3c">EQ</a></div><div class="ttdeci">#define EQ(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="regexec_8c_source.html#l00112">regexec.c:112</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a7059d68a29d5ecfb37623ab45cdb4e8d"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a7059d68a29d5ecfb37623ab45cdb4e8d">llvm::MachineOperand::getImm</a></div><div class="ttdeci">int64_t getImm() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00402">MachineOperand.h:402</a></div></div>
<div class="ttc" id="classllvm_1_1MachineLoop_html_a28e0c42230a2776ab5675a56c27f9be9"><div class="ttname"><a href="classllvm_1_1MachineLoop.html#a28e0c42230a2776ab5675a56c27f9be9">llvm::MachineLoop::dump</a></div><div class="ttdeci">void dump() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineLoopInfo_8cpp_source.html#l00078">MachineLoopInfo.cpp:78</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a2961c31b29db17a4f2964899c8569a64"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a2961c31b29db17a4f2964899c8569a64">llvm::MachineBasicBlock::getBasicBlock</a></div><div class="ttdeci">const BasicBlock * getBasicBlock() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00117">MachineBasicBlock.h:117</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_aabad9b72f6d20d3462efc34020d39f73"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">llvm::MachineInstr::getParent</a></div><div class="ttdeci">const MachineBasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00119">MachineInstr.h:119</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ac51be7ff80fe8d6ae5e8c0acb194908a"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">llvm::MachineBasicBlock::iterator</a></div><div class="ttdeci">bundle_iterator&lt; MachineInstr, instr_iterator &gt; iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00212">MachineBasicBlock.h:212</a></div></div>
<div class="ttc" id="CommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00314">CommandLine.h:314</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_ab2a56feb4fe943ae2362d61f3a43acca"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ab2a56feb4fe943ae2362d61f3a43acca">llvm::MachineFunction::CreateMachineBasicBlock</a></div><div class="ttdeci">MachineBasicBlock * CreateMachineBasicBlock(const BasicBlock *bb=0)</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8cpp_source.html#l00209">MachineFunction.cpp:209</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a1bc74c76b876ad387293ecde0f21ed45"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a1bc74c76b876ad387293ecde0f21ed45">llvm::LoopBase::getLoopPreheader</a></div><div class="ttdeci">BlockT * getLoopPreheader() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00106">LoopInfoImpl.h:106</a></div></div>
<div class="ttc" id="classllvm_1_1HexagonTargetMachine_html"><div class="ttname"><a href="classllvm_1_1HexagonTargetMachine.html">llvm::HexagonTargetMachine</a></div><div class="ttdef"><b>Definition:</b> <a href="HexagonTargetMachine_8h_source.html#l00029">HexagonTargetMachine.h:29</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a0359a738e0412c5a7ea55d61175e0661"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a0359a738e0412c5a7ea55d61175e0661">llvm::MachineBasicBlock::pred_end</a></div><div class="ttdeci">pred_iterator pred_end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00262">MachineBasicBlock.h:262</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00396">SmallVector.h:396</a></div></div>
<div class="ttc" id="classllvm_1_1BlockAddress_html_af6e2f535824d8f9b4bf1b1a75e5ab57c"><div class="ttname"><a href="classllvm_1_1BlockAddress.html#af6e2f535824d8f9b4bf1b1a75e5ab57c">llvm::BlockAddress::get</a></div><div class="ttdeci">static BlockAddress * get(Function *F, BasicBlock *BB)</div><div class="ttdoc">get - Return a BlockAddress for the specified function and basic block. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01358">Constants.cpp:1358</a></div></div>
<div class="ttc" id="MCModuleYAML_8cpp_html_a5cdd6ae6b245e832e7cc5e4edf035cb2"><div class="ttname"><a href="MCModuleYAML_8cpp.html#a5cdd6ae6b245e832e7cc5e4edf035cb2">MII</a></div><div class="ttdeci">const MCInstrInfo &amp; MII</div><div class="ttdef"><b>Definition:</b> <a href="MCModuleYAML_8cpp_source.html#l00055">MCModuleYAML.cpp:55</a></div></div>
<div class="ttc" id="classllvm_1_1SmallSet_html"><div class="ttname"><a href="classllvm_1_1SmallSet.html">llvm::SmallSet</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00031">SmallSet.h:31</a></div></div>
<div class="ttc" id="TargetInstrInfo_8h_html"><div class="ttname"><a href="TargetInstrInfo_8h.html">TargetInstrInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a302e45878c6dc1714334c7ce96d56846"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">llvm::MachineInstr::getOperand</a></div><div class="ttdeci">const MachineOperand &amp; getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00267">MachineInstr.h:267</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a98e9c9e8ef7cbb6c4aa89a38f21decfa"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a98e9c9e8ef7cbb6c4aa89a38f21decfa">llvm::MachineOperand::setMBB</a></div><div class="ttdeci">void setMBB(MachineBasicBlock *MBB)</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00506">MachineOperand.h:506</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html">llvm::MachineBasicBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00062">MachineBasicBlock.h:62</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00037">PassAnalysisSupport.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_ac4f141a355e5898255f2cbc57c5b54c3"><div class="ttname"><a href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">llvm::LoopBase::getHeader</a></div><div class="ttdeci">BlockT * getHeader() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00095">LoopInfo.h:95</a></div></div>
<div class="ttc" id="namespacellvm_html_aa1704159f75e6eacd595962ea6d93ffe"><div class="ttname"><a href="namespacellvm.html#aa1704159f75e6eacd595962ea6d93ffe">llvm::next</a></div><div class="ttdeci">ItTy next(ItTy it, Dist n)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00154">STLExtras.h:154</a></div></div>
<div class="ttc" id="classllvm_1_1HexagonInstrInfo_html_a95f554978b4efc4c1ca8b0ed5e017ff6"><div class="ttname"><a href="classllvm_1_1HexagonInstrInfo.html#a95f554978b4efc4c1ca8b0ed5e017ff6">llvm::HexagonInstrInfo::InsertBranch</a></div><div class="ttdeci">virtual unsigned InsertBranch(MachineBasicBlock &amp;MBB, MachineBasicBlock *TBB, MachineBasicBlock *FBB, const SmallVectorImpl&lt; MachineOperand &gt; &amp;Cond, DebugLoc DL) const </div><div class="ttdef"><b>Definition:</b> <a href="HexagonInstrInfo_8cpp_source.html#l00119">HexagonInstrInfo.cpp:119</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a2feaa1c69335c6b9028076cd68c7a5f5"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a2feaa1c69335c6b9028076cd68c7a5f5">llvm::MachineOperand::setImm</a></div><div class="ttdeci">void setImm(int64_t immVal)</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00488">MachineOperand.h:488</a></div></div>
<div class="ttc" id="classllvm_1_1FunctionPass_html"><div class="ttname"><a href="classllvm_1_1FunctionPass.html">llvm::FunctionPass</a></div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00293">Pass.h:293</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_acaec68a759bb05d3be2ed7dd47e25171"><div class="ttname"><a href="classllvm_1_1LoopBase.html#acaec68a759bb05d3be2ed7dd47e25171">llvm::LoopBase::getExitingBlock</a></div><div class="ttdeci">BlockT * getExitingBlock() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00049">LoopInfoImpl.h:49</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a92a38e2e3412bde7fd2b71db212b61aa"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a92a38e2e3412bde7fd2b71db212b61aa">llvm::LoopBase::contains</a></div><div class="ttdeci">bool contains(const LoopT *L) const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00104">LoopInfo.h:104</a></div></div>
<div class="ttc" id="classllvm_1_1HexagonInstrInfo_html_a5c8be1328453c7f1d485226d2014a5ab"><div class="ttname"><a href="classllvm_1_1HexagonInstrInfo.html#a5c8be1328453c7f1d485226d2014a5ab">llvm::HexagonInstrInfo::analyzeCompare</a></div><div class="ttdeci">virtual bool analyzeCompare(const MachineInstr *MI, unsigned &amp;SrcReg, unsigned &amp;SrcReg2, int &amp;Mask, int &amp;Value) const </div><div class="ttdoc">For a comparison instruction, return the source registers in SrcReg and SrcReg2 if having two registe...</div><div class="ttdef"><b>Definition:</b> <a href="HexagonInstrInfo_8cpp_source.html#l00339">HexagonInstrInfo.cpp:339</a></div></div>
<div class="ttc" id="namespacellvm_html_a980570dc1410d4ef53806f82028ca381"><div class="ttname"><a href="namespacellvm.html#a980570dc1410d4ef53806f82028ca381">llvm::BuildMI</a></div><div class="ttdeci">MachineInstrBuilder BuildMI(MachineFunction &amp;MF, DebugLoc DL, const MCInstrDesc &amp;MCID)</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00223">MachineInstrBuilder.h:223</a></div></div>
<div class="ttc" id="README__ALTIVEC_8txt_html_afb354c8aea0150628f8aa06c7f4a4168"><div class="ttname"><a href="README__ALTIVEC_8txt.html#afb354c8aea0150628f8aa06c7f4a4168">f</a></div><div class="ttdeci">vector float f(vector float a, vector float b)</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00205">README_ALTIVEC.txt:205</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_aca37b55b20f45c96067bac1d4f1dcb7f"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#aca37b55b20f45c96067bac1d4f1dcb7f">llvm::MachineOperand::getSubReg</a></div><div class="ttdeci">unsigned getSubReg() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00264">MachineOperand.h:264</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html">llvm::TargetRegisterInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00219">TargetRegisterInfo.h:219</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ab644fcf07a4c2708333cf66276282357"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ab644fcf07a4c2708333cf66276282357">llvm::MachineBasicBlock::pred_begin</a></div><div class="ttdeci">pred_iterator pred_begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00260">MachineBasicBlock.h:260</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_ab335e668fd33542ea14a2c7b527e64d3"><div class="ttname"><a href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a></div><div class="ttdeci">The same transformation can work with an even modulo with the addition of a and shrink the compare RHS by the same amount Unless the target supports that transformation probably isn t worthwhile The transformation can also easily be made to work with non zero equality for n</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00723">Target/README.txt:723</a></div></div>
<div class="ttc" id="Target_2X86_2README_8txt_html_a544ce2b7de50b042a2d052c3d2831598"><div class="ttname"><a href="Target_2X86_2README_8txt.html#a544ce2b7de50b042a2d052c3d2831598">t</a></div><div class="ttdeci">We currently generate a but we really shouldn t</div><div class="ttdef"><b>Definition:</b> <a href="Target_2X86_2README_8txt_source.html#l01384">Target/X86/README.txt:1384</a></div></div>
<div class="ttc" id="namespacellvm_1_1TargetOpcode_html_a348d4259b5fa6a8ecfe94e7ae512e1a8ae41f9ca68ba5e8b9613cea03652ebd72"><div class="ttname"><a href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8ae41f9ca68ba5e8b9613cea03652ebd72">llvm::TargetOpcode::PHI</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetOpcodes_8h_source.html#l00026">TargetOpcodes.h:26</a></div></div>
<div class="ttc" id="HexagonHardwareLoops_8cpp_html_a113d3e566ed8a9dc7ea5bd2803b76226"><div class="ttname"><a href="HexagonHardwareLoops_8cpp.html#a113d3e566ed8a9dc7ea5bd2803b76226">isHardwareLoop</a></div><div class="ttdeci">Hexagon Hardware static false bool isHardwareLoop(const MachineInstr *MI)</div><div class="ttdoc">Returns true if the instruction is a hardware loop instruction. </div><div class="ttdef"><b>Definition:</b> <a href="HexagonHardwareLoops_8cpp_source.html#l00286">HexagonHardwareLoops.cpp:286</a></div></div>
<div class="ttc" id="classllvm_1_1HexagonTargetMachine_html_ae3b063b0c7c14e12d7bf730236c7ab1f"><div class="ttname"><a href="classllvm_1_1HexagonTargetMachine.html#ae3b063b0c7c14e12d7bf730236c7ab1f">llvm::HexagonTargetMachine::getRegisterInfo</a></div><div class="ttdeci">virtual const HexagonRegisterInfo * getRegisterInfo() const </div><div class="ttdef"><b>Definition:</b> <a href="HexagonTargetMachine_8h_source.html#l00050">HexagonTargetMachine.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a469e271fba3a9b52dad4fa54eaf44e2b"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a469e271fba3a9b52dad4fa54eaf44e2b">llvm::MachineInstr::addOperand</a></div><div class="ttdeci">void addOperand(MachineFunction &amp;MF, const MachineOperand &amp;Op)</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8cpp_source.html#l00622">MachineInstr.cpp:622</a></div></div>
<div class="ttc" id="PassSupport_8h_html"><div class="ttname"><a href="PassSupport_8h.html">PassSupport.h</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="namespacellvm_1_1EngineKind_html_a9df47239a42cd9621ac26d9ecbd57441"><div class="ttname"><a href="namespacellvm_1_1EngineKind.html#a9df47239a42cd9621ac26d9ecbd57441">llvm::EngineKind::Kind</a></div><div class="ttdeci">Kind</div><div class="ttdef"><b>Definition:</b> <a href="ExecutionEngine_2ExecutionEngine_8h_source.html#l00499">ExecutionEngine/ExecutionEngine.h:499</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html"><div class="ttname"><a href="classllvm_1_1MachineOperand.html">llvm::MachineOperand</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00043">MachineOperand.h:43</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00880">SmallVector.h:880</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a1431766de798501f107d9031821f311e"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a1431766de798501f107d9031821f311e">llvm::LoopBase::getParentLoop</a></div><div class="ttdeci">LoopT * getParentLoop() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00096">LoopInfo.h:96</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a8de7d5cf38939044471c6ee60a01a3df"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a8de7d5cf38939044471c6ee60a01a3df">llvm::MachineOperand::isDef</a></div><div class="ttdeci">bool isDef() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00274">MachineOperand.h:274</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a57f25804288bc580d7b2e4016a38aec9"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a57f25804288bc580d7b2e4016a38aec9">llvm::MachineBasicBlock::isSuccessor</a></div><div class="ttdeci">bool isSuccessor(const MachineBasicBlock *MBB) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00619">MachineBasicBlock.cpp:619</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_aba5a4d675f357f9189038aebddfe873c"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#aba5a4d675f357f9189038aebddfe873c">llvm::MachineInstr::isCompare</a></div><div class="ttdeci">bool isCompare(QueryType Type=IgnoreBundle) const </div><div class="ttdoc">isCompare - Return true if this instruction is a comparison. </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00411">MachineInstr.h:411</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00101">Debug.cpp:101</a></div></div>
<div class="ttc" id="namespacellvm_html_a646986783f35e0fef8988f0f28d2589f"><div class="ttname"><a href="namespacellvm.html#a646986783f35e0fef8988f0f28d2589f">llvm::Log2_32</a></div><div class="ttdeci">unsigned Log2_32(uint32_t Value)</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00443">MathExtras.h:443</a></div></div>
<div class="ttc" id="namespacestd_html_ab8424022895aee3e366fb9a32f2883cb"><div class="ttname"><a href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a></div><div class="ttdeci">void swap(llvm::BitVector &amp;LHS, llvm::BitVector &amp;RHS)</div><div class="ttdoc">Implement std::swap in terms of BitVector swap. </div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00591">BitVector.h:591</a></div></div>
<div class="ttc" id="CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2README_8txt_source.html#l00036">CodeGen/README.txt:36</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a6d180825b3dcc1bd2b8e415160207335"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a6d180825b3dcc1bd2b8e415160207335">llvm::MachineBasicBlock::setHasAddressTaken</a></div><div class="ttdeci">void setHasAddressTaken()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00133">MachineBasicBlock.h:133</a></div></div>
<div class="ttc" id="namespacellvm_html_a19358222bb2c2199975e3a4ec4b40eed"><div class="ttname"><a href="namespacellvm.html#a19358222bb2c2199975e3a4ec4b40eed">llvm::isPowerOf2_64</a></div><div class="ttdeci">bool isPowerOf2_64(uint64_t Value)</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00360">MathExtras.h:360</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html">llvm::MachineRegisterInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00030">MachineRegisterInfo.h:30</a></div></div>
<div class="ttc" id="classllvm_1_1SmallSet_html_ab28aa342862f6d16361be514fd98c22e"><div class="ttname"><a href="classllvm_1_1SmallSet.html#ab28aa342862f6d16361be514fd98c22e">llvm::SmallSet::count</a></div><div class="ttdeci">bool count(const T &amp;V) const </div><div class="ttdoc">count - Return true if the element is in the set. </div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00048">SmallSet.h:48</a></div></div>
<div class="ttc" id="MachineRegisterInfo_8h_html"><div class="ttname"><a href="MachineRegisterInfo_8h.html">MachineRegisterInfo.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86II_html_a97dc14052814702ba0e2b14fb14dd02da6ba65e174dfdcdb111e1aea6b4299b16"><div class="ttname"><a href="namespacellvm_1_1X86II.html#a97dc14052814702ba0e2b14fb14dd02da6ba65e174dfdcdb111e1aea6b4299b16">llvm::X86II::TB</a></div><div class="ttdef"><b>Definition:</b> <a href="X86BaseInfo_8h_source.html#l00321">X86BaseInfo.h:321</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html"><div class="ttname"><a href="classllvm_1_1MachineInstr.html">llvm::MachineInstr</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00050">MachineInstr.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a9832fb14c5aeb2277bc66d72cc99d105"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a9832fb14c5aeb2277bc66d72cc99d105">llvm::MachineBasicBlock::hasAddressTaken</a></div><div class="ttdeci">bool hasAddressTaken() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00129">MachineBasicBlock.h:129</a></div></div>
<div class="ttc" id="classllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l01149">CommandLine.h:1149</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_afff7622ffefd3560aafe2025d245d4c5"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#afff7622ffefd3560aafe2025d245d4c5">llvm::MachineOperand::CreateMBB</a></div><div class="ttdeci">static MachineOperand CreateMBB(MachineBasicBlock *MBB, unsigned char TargetFlags=0)</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00585">MachineOperand.h:585</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_adf0023bdc4f05a7849c35b1c859580d8"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#adf0023bdc4f05a7849c35b1c859580d8">llvm::MachineBasicBlock::splice</a></div><div class="ttdeci">void splice(iterator Where, MachineBasicBlock *Other, iterator From)</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00539">MachineBasicBlock.h:539</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_ab4a6ca428289b667dd691a00e9f7e334"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">llvm::MachineFunction::getRegInfo</a></div><div class="ttdeci">MachineRegisterInfo &amp; getRegInfo()</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00167">MachineFunction.h:167</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a1939dbb59960462878c408efb21a2c75"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a1939dbb59960462878c408efb21a2c75">llvm::LoopBase::getBlocks</a></div><div class="ttdeci">const std::vector&lt; BlockT * &gt; &amp; getBlocks() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00138">LoopInfo.h:138</a></div></div>
<div class="ttc" id="classllvm_1_1Loop_html"><div class="ttname"><a href="classllvm_1_1Loop.html">llvm::Loop</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00338">LoopInfo.h:338</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunctionPass_html_aa1eece37d175f86a6f4808c0c167f13b"><div class="ttname"><a href="classllvm_1_1MachineFunctionPass.html#aa1eece37d175f86a6f4808c0c167f13b">llvm::MachineFunctionPass::getAnalysisUsage</a></div><div class="ttdeci">virtual void getAnalysisUsage(AnalysisUsage &amp;AU) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineFunctionPass_8cpp_source.html#l00036">MachineFunctionPass.cpp:36</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_a2f9819f230628888e3e68de292ecd602"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a2f9819f230628888e3e68de292ecd602">llvm::MachineRegisterInfo::use_begin</a></div><div class="ttdeci">use_iterator use_begin(unsigned RegNo) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00257">MachineRegisterInfo.h:257</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a57bf9ee7219097ff0f98da23a3b3b782"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a57bf9ee7219097ff0f98da23a3b3b782">llvm::MachineOperand::isUse</a></div><div class="ttdeci">bool isUse() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00269">MachineOperand.h:269</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_a8be4959abd44b6fbd158dba0d7c315bc"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a8be4959abd44b6fbd158dba0d7c315bc">llvm::MachineRegisterInfo::hasOneNonDBGUse</a></div><div class="ttdeci">bool hasOneNonDBGUse(unsigned RegNo) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00327">MachineRegisterInfo.cpp:327</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a624a062754a09d3787614d8627096705"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a624a062754a09d3787614d8627096705">llvm::MachineOperand::setReg</a></div><div class="ttdeci">void setReg(unsigned Reg)</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8cpp_source.html#l00049">MachineInstr.cpp:49</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="AArch64Disassembler_8cpp_html_a30bccd0ebacd9892c243f7bd520e4aa0"><div class="ttname"><a href="AArch64Disassembler_8cpp.html#a30bccd0ebacd9892c243f7bd520e4aa0">getReg</a></div><div class="ttdeci">static unsigned getReg(const void *D, unsigned RC, unsigned RegNo)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64Disassembler_8cpp_source.html#l00299">AArch64Disassembler.cpp:299</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_a6745c3bfdfc5b0643b078b96df2db252"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a6745c3bfdfc5b0643b078b96df2db252">llvm::MachineFunction::getTarget</a></div><div class="ttdeci">const TargetMachine &amp; getTarget() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00163">MachineFunction.h:163</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ab2d91e7bec944efcbc39d8e30644f111"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">llvm::MachineBasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00236">MachineBasicBlock.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a8d02c1e6ef20f42c10d6f4e7234efd61"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a8d02c1e6ef20f42c10d6f4e7234efd61">llvm::MachineBasicBlock::insert</a></div><div class="ttdeci">instr_iterator insert(instr_iterator I, MachineInstr *M)</div></div>
<div class="ttc" id="HexagonHardwareLoops_8cpp_html_a52ab2acd10fcba3c83361906b24c60af"><div class="ttname"><a href="HexagonHardwareLoops_8cpp.html#a52ab2acd10fcba3c83361906b24c60af">hwloops</a></div><div class="ttdeci">hwloops</div><div class="ttdef"><b>Definition:</b> <a href="HexagonHardwareLoops_8cpp_source.html#l00281">HexagonHardwareLoops.cpp:281</a></div></div>
<div class="ttc" id="namespacellvm_html_a3b9662928ee4d58fef185abfe20e8184"><div class="ttname"><a href="namespacellvm.html#a3b9662928ee4d58fef185abfe20e8184">llvm::isInt&lt; 16 &gt;</a></div><div class="ttdeci">bool isInt&lt; 16 &gt;(int64_t x)</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00272">MathExtras.h:272</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstrBuilder_html"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html">llvm::MachineInstrBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00045">MachineInstrBuilder.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_abf69f92f1977440a4e443a26baeb73c0"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#abf69f92f1977440a4e443a26baeb73c0">llvm::MachineRegisterInfo::getVRegDef</a></div><div class="ttdeci">MachineInstr * getVRegDef(unsigned Reg) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00308">MachineRegisterInfo.cpp:308</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_ab75f703d251cc0ce0206fe00a999db86"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">llvm::MachineOperand::getReg</a></div><div class="ttdeci">unsigned getReg() const </div><div class="ttdoc">getReg - Returns the register number. </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00259">MachineOperand.h:259</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_af4c0db6d503e0ba3b8e44067023ffbba"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#af4c0db6d503e0ba3b8e44067023ffbba">llvm::MachineFunction::insert</a></div><div class="ttdeci">void insert(iterator MBBI, MachineBasicBlock *MBB)</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00334">MachineFunction.h:334</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a98b8c4d84ab695588af9822ccad5a482"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a98b8c4d84ab695588af9822ccad5a482">llvm::MachineOperand::isDebug</a></div><div class="ttdeci">bool isDebug() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00314">MachineOperand.h:314</a></div></div>
<div class="ttc" id="MachineFunctionPass_8h_html"><div class="ttname"><a href="MachineFunctionPass_8h.html">MachineFunctionPass.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1A64CC_html_af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442"><div class="ttname"><a href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">llvm::A64CC::MI</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00035">AArch64BaseInfo.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1raw__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__ostream.html">llvm::raw_ostream</a></div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00031">raw_ostream.h:31</a></div></div>
<div class="ttc" id="Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00097">Debug.h:97</a></div></div>
<div class="ttc" id="classllvm_1_1TargetMachine_html"><div class="ttname"><a href="classllvm_1_1TargetMachine.html">llvm::TargetMachine</a></div><div class="ttdef"><b>Definition:</b> <a href="Target_2TargetMachine_8h_source.html#l00061">Target/TargetMachine.h:61</a></div></div>
<div class="ttc" id="classllvm_1_1PassRegistry_html"><div class="ttname"><a href="classllvm_1_1PassRegistry.html">llvm::PassRegistry</a></div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8h_source.html#l00035">PassRegistry.h:35</a></div></div>
<div class="ttc" id="MCModuleYAML_8cpp_html_a5e410df3f6875c5af4a7f2be284f235d"><div class="ttname"><a href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a></div><div class="ttdeci">const MCRegisterInfo &amp; MRI</div><div class="ttdef"><b>Definition:</b> <a href="MCModuleYAML_8cpp_source.html#l00056">MCModuleYAML.cpp:56</a></div></div>
<div class="ttc" id="raw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="MachineDominators_8h_html"><div class="ttname"><a href="MachineDominators_8h.html">MachineDominators.h</a></div></div>
<div class="ttc" id="classllvm_1_1SmallSet_html_afd57abe5a6e10c8b282b6549432ec851"><div class="ttname"><a href="classllvm_1_1SmallSet.html#afd57abe5a6e10c8b282b6549432ec851">llvm::SmallSet::empty</a></div><div class="ttdeci">bool empty() const </div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00042">SmallSet.h:42</a></div></div>
<div class="ttc" id="classllvm_1_1MachineLoopInfo_html_abd835122c5c416057b14378e92a72298"><div class="ttname"><a href="classllvm_1_1MachineLoopInfo.html#abd835122c5c416057b14378e92a72298">llvm::MachineLoopInfo::end</a></div><div class="ttdeci">iterator end() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineLoopInfo_8h_source.html#l00093">MachineLoopInfo.h:93</a></div></div>
<div class="ttc" id="classllvm_1_1MachineLoopInfo_html"><div class="ttname"><a href="classllvm_1_1MachineLoopInfo.html">llvm::MachineLoopInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineLoopInfo_8h_source.html#l00072">MachineLoopInfo.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1MachineLoopInfo_html_a73d7a343f01b71b7adaa75d867a5f67e"><div class="ttname"><a href="classllvm_1_1MachineLoopInfo.html#a73d7a343f01b71b7adaa75d867a5f67e">llvm::MachineLoopInfo::iterator</a></div><div class="ttdeci">LoopInfoBase&lt; MachineBasicBlock, MachineLoop &gt;::iterator iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineLoopInfo_8h_source.html#l00091">MachineLoopInfo.h:91</a></div></div>
<div class="ttc" id="classllvm_1_1MachineDominatorTree_html_a22bd7da7d9fa4793cb214e659c198ff6"><div class="ttname"><a href="classllvm_1_1MachineDominatorTree.html#a22bd7da7d9fa4793cb214e659c198ff6">llvm::MachineDominatorTree::dominates</a></div><div class="ttdeci">bool dominates(const MachineDomTreeNode *A, const MachineDomTreeNode *B) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineDominators_8h_source.html#l00071">MachineDominators.h:71</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstrBuilder_html_a5125cce72b214df09ca8f93dcbbf4c3a"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#a5125cce72b214df09ca8f93dcbbf4c3a">llvm::MachineInstrBuilder::addReg</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addReg(unsigned RegNo, unsigned flags=0, unsigned SubReg=0) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00064">MachineInstrBuilder.h:64</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a90cca76dd78688687e0d697679dbc799"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional ldr LCPI1_0 ldr ldr tst movne lsr ldr LCPI1_1 and r0 bx lr it saves an instruction and a register It might be profitable to cse MOVi16 if there are lots of bit immediates with the same bottom half Robert Muth started working on an alternate jump table implementation that does not put the tables in line in the text This is more like the llvm default jump table implementation This might be useful sometime Several revisions of patches are on the mailing beginning while CMP sets them like a subtract Therefore to be able to use CMN for comparisons other than the Z we ll need additional logic to reverse the conditionals associated with the comparison Perhaps a pseudo instruction for the with a post codegen pass to clean up and handle the condition codes See PR5694 for testcase Given the following on int B</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00592">Target/ARM/README.txt:592</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator_html"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator.html">llvm::MachineRegisterInfo::defusechain_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00204">MachineRegisterInfo.h:204</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a3fcc360e6de146a370e8b0deecfa877f"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a3fcc360e6de146a370e8b0deecfa877f">llvm::MachineBasicBlock::addSuccessor</a></div><div class="ttdeci">void addSuccessor(MachineBasicBlock *succ, uint32_t weight=0)</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00482">MachineBasicBlock.cpp:482</a></div></div>
<div class="ttc" id="classllvm_1_1MachineDominatorTree_html"><div class="ttname"><a href="classllvm_1_1MachineDominatorTree.html">llvm::MachineDominatorTree</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineDominators_8h_source.html#l00040">MachineDominators.h:40</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ac9786455bc217ebd35377bb5d5ec8f20"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ac9786455bc217ebd35377bb5d5ec8f20">llvm::MachineBasicBlock::pred_size</a></div><div class="ttdeci">unsigned pred_size() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00272">MachineBasicBlock.h:272</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_aad684f050965249161650dcdf5a58fa4"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#aad684f050965249161650dcdf5a58fa4">llvm::MachineRegisterInfo::use_nodbg_begin</a></div><div class="ttdeci">use_nodbg_iterator use_nodbg_begin(unsigned RegNo) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00278">MachineRegisterInfo.h:278</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a5ca4af2a257043145ad650eafb4402f9"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a5ca4af2a257043145ad650eafb4402f9">llvm::MachineInstr::getDebugLoc</a></div><div class="ttdeci">DebugLoc getDebugLoc() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00244">MachineInstr.h:244</a></div></div>
<div class="ttc" id="MachineLoopInfo_8h_html"><div class="ttname"><a href="MachineLoopInfo_8h.html">MachineLoopInfo.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 22:58:48 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
