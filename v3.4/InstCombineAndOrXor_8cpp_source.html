<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: InstCombineAndOrXor.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('InstCombineAndOrXor_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">InstCombineAndOrXor.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="InstCombineAndOrXor_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- InstCombineAndOrXor.cpp --------------------------------------------===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// This file implements the visitAnd, visitOr, and visitXor functions.</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstCombine_8h.html">InstCombine.h</a>&quot;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstructionSimplify_8h.html">llvm/Analysis/InstructionSimplify.h</a>&quot;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Intrinsics_8h.html">llvm/IR/Intrinsics.h</a>&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ConstantRange_8h.html">llvm/Support/ConstantRange.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PatternMatch_8h.html">llvm/Support/PatternMatch.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CmpInstAnalysis_8h.html">llvm/Transforms/Utils/CmpInstAnalysis.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keyword">using namespace </span>PatternMatch;</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">/// AddOne - Add one to a ConstantInt.</span></div><div class="line"><a name="l00025"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#a7f01f70b8d1862350825b532872d644f">   25</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="InstCombineAndOrXor_8cpp.html#a7f01f70b8d1862350825b532872d644f">AddOne</a>(<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(C-&gt;<a class="code" href="classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>(), C-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>() + 1);</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;}<span class="comment"></span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">/// SubOne - Subtract one from a ConstantInt.</span></div><div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#ac45a6ef2ab6b7ff3d7512fa9b61dd941">   29</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="InstCombineAndOrXor_8cpp.html#ac45a6ef2ab6b7ff3d7512fa9b61dd941">SubOne</a>(<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(C-&gt;<a class="code" href="classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>(), C-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>()-1);</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;}</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">/// isFreeToInvert - Return true if the specified value is free to invert (apply</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">/// ~ to).  This happens in cases where the ~ can be eliminated.</span></div><div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#afa152a1c292e3c6e4c11ac7ac34c38c3">   35</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineAndOrXor_8cpp.html#afa152a1c292e3c6e4c11ac7ac34c38c3">isFreeToInvert</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  <span class="comment">// ~(~(X)) -&gt; X.</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BinaryOperator.html#a454128b3938d8b6c6305e9c74204cc53">BinaryOperator::isNot</a>(V))</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <span class="comment">// Constants can be considered to be not&#39;ed values.</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <span class="keywordflow">if</span> (isa&lt;ConstantInt&gt;(V))</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <span class="comment">// Compares can be inverted if they have a single use.</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CmpInst.html">CmpInst</a> *CI = dyn_cast&lt;CmpInst&gt;(V))</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keywordflow">return</span> CI-&gt;hasOneUse();</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;}</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#aa62fbad44784b52824ea165a4695299f">   51</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InstCombineAndOrXor_8cpp.html#aa62fbad44784b52824ea165a4695299f">dyn_castNotVal</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="comment">// If this is not(not(x)) don&#39;t return that this is a not: we want the two</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="comment">// not&#39;s to be folded first.</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BinaryOperator.html#a454128b3938d8b6c6305e9c74204cc53">BinaryOperator::isNot</a>(V)) {</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Operand = <a class="code" href="classllvm_1_1BinaryOperator.html#a57781e19c89adc7ec1a5da6d156aced0">BinaryOperator::getNotArgument</a>(V);</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="InstCombineAndOrXor_8cpp.html#afa152a1c292e3c6e4c11ac7ac34c38c3">isFreeToInvert</a>(Operand))</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;      <span class="keywordflow">return</span> Operand;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  }</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <span class="comment">// Constants can be considered to be not&#39;ed values...</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;ConstantInt&gt;(V))</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getType(), ~<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getValue());</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;}</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">/// getFCmpCode - Similar to getICmpCode but for FCmpInst. This encodes a fcmp</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">/// predicate into a three bit mask. It also returns whether it is an ordered</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">/// predicate by reference.</span></div><div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#a32ead1eb9f9f19667b0f79d01214612b">   69</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="InstCombineAndOrXor_8cpp.html#a32ead1eb9f9f19667b0f79d01214612b">getFCmpCode</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">FCmpInst::Predicate</a> <a class="code" href="Target_2PowerPC_2README_8txt.html#afc7ca55ad1da67847ecd4b99ef64dc84">CC</a>, <span class="keywordtype">bool</span> &amp;isOrdered) {</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  isOrdered = <span class="keyword">false</span>;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="keywordflow">switch</span> (CC) {</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa3213b645e029aba8bb1b85213607d5e">FCmpInst::FCMP_ORD</a>: isOrdered = <span class="keyword">true</span>; <span class="keywordflow">return</span> 0;  <span class="comment">// 000</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05af0159e4005258dc54f20b6fc227d19ed">FCmpInst::FCMP_UNO</a>:                   <span class="keywordflow">return</span> 0;  <span class="comment">// 000</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a4c399f525bbcf03d72af4b303e6eeca8">FCmpInst::FCMP_OGT</a>: isOrdered = <span class="keyword">true</span>; <span class="keywordflow">return</span> 1;  <span class="comment">// 001</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a959268ceeae23abe5c9ad9e895669d0c">FCmpInst::FCMP_UGT</a>:                   <span class="keywordflow">return</span> 1;  <span class="comment">// 001</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a024db78a5ed74f64666f3ca4955e6eca">FCmpInst::FCMP_OEQ</a>: isOrdered = <span class="keyword">true</span>; <span class="keywordflow">return</span> 2;  <span class="comment">// 010</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a919643b83ce3c9af2e4296ed5e413a1f">FCmpInst::FCMP_UEQ</a>:                   <span class="keywordflow">return</span> 2;  <span class="comment">// 010</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a541533f34077bbbcfb703a90f6d2da9b">FCmpInst::FCMP_OGE</a>: isOrdered = <span class="keyword">true</span>; <span class="keywordflow">return</span> 3;  <span class="comment">// 011</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ae51609fc6a425f849d37c28cb9bc0344">FCmpInst::FCMP_UGE</a>:                   <span class="keywordflow">return</span> 3;  <span class="comment">// 011</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a326bee0a4a424cef21c1cf8adb8b8dd8">FCmpInst::FCMP_OLT</a>: isOrdered = <span class="keyword">true</span>; <span class="keywordflow">return</span> 4;  <span class="comment">// 100</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a75016d5872d90adf89cc1cbf5763f474">FCmpInst::FCMP_ULT</a>:                   <span class="keywordflow">return</span> 4;  <span class="comment">// 100</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a8a80b27ca29fe2076b9bbdee02c65464">FCmpInst::FCMP_ONE</a>: isOrdered = <span class="keyword">true</span>; <span class="keywordflow">return</span> 5;  <span class="comment">// 101</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ad601460c9371d0f0ada5ae006bdba2bd">FCmpInst::FCMP_UNE</a>:                   <span class="keywordflow">return</span> 5;  <span class="comment">// 101</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a9835cfe02fb5027680bd7203b024f77a">FCmpInst::FCMP_OLE</a>: isOrdered = <span class="keyword">true</span>; <span class="keywordflow">return</span> 6;  <span class="comment">// 110</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a396dda2571cd3c575f1d9cb44dc2cc09">FCmpInst::FCMP_ULE</a>:                   <span class="keywordflow">return</span> 6;  <span class="comment">// 110</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="comment">// True -&gt; 7</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="keywordflow">default</span>:</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="comment">// Not expecting FCMP_FALSE and FCMP_TRUE;</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unexpected FCmp predicate!&quot;</span>);</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  }</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;}</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">/// getNewICmpValue - This is the complement of getICmpCode, which turns an</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">/// opcode and two operands into either a constant true or false, or a brand</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">/// new ICmp instruction. The sign is passed in to determine which kind</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">/// of predicate to use in the new icmp instruction.</span></div><div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#a529ff4b10087991fd0e737adbf94b423">   97</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InstCombineAndOrXor_8cpp.html#a529ff4b10087991fd0e737adbf94b423">getNewICmpValue</a>(<span class="keywordtype">bool</span> Sign, <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a4a6621856674f376740a1ba6efd809e3">Code</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *LHS, <a class="code" href="classllvm_1_1Value.html">Value</a> *RHS,</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                              <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> *Builder) {</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">ICmpInst::Predicate</a> NewPred;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *NewConstant = <a class="code" href="namespacellvm.html#a61c0122a3a7683e94bc403c645566788">getICmpValue</a>(Sign, Code, LHS, RHS, NewPred))</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordflow">return</span> NewConstant;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="keywordflow">return</span> Builder-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#a495d91fb3d2662acbffd0162c56153ed">CreateICmp</a>(NewPred, LHS, RHS);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;}</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">/// getFCmpValue - This is the complement of getFCmpCode, which turns an</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">/// opcode and two operands into either a FCmp instruction. isordered is passed</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">/// in to determine which kind of predicate to use in the new fcmp instruction.</span></div><div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#a7627ec3ea1e8ae5e84826e213b917abc">  108</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InstCombineAndOrXor_8cpp.html#a7627ec3ea1e8ae5e84826e213b917abc">getFCmpValue</a>(<span class="keywordtype">bool</span> isordered, <span class="keywordtype">unsigned</span> <a class="code" href="README-Thumb_8txt.html#a5d98a8b5139e56ebf0d2ff4cbaa0dc5e">code</a>,</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                           <a class="code" href="classllvm_1_1Value.html">Value</a> *LHS, <a class="code" href="classllvm_1_1Value.html">Value</a> *RHS,</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                           <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> *Builder) {</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">CmpInst::Predicate</a> Pred;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="keywordflow">switch</span> (code) {</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Illegal FCmp code!&quot;</span>);</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="keywordflow">case</span> 0: Pred = isordered ? <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa3213b645e029aba8bb1b85213607d5e">FCmpInst::FCMP_ORD</a> : <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05af0159e4005258dc54f20b6fc227d19ed">FCmpInst::FCMP_UNO</a>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="keywordflow">case</span> 1: Pred = isordered ? <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a4c399f525bbcf03d72af4b303e6eeca8">FCmpInst::FCMP_OGT</a> : <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a959268ceeae23abe5c9ad9e895669d0c">FCmpInst::FCMP_UGT</a>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="keywordflow">case</span> 2: Pred = isordered ? <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a024db78a5ed74f64666f3ca4955e6eca">FCmpInst::FCMP_OEQ</a> : <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a919643b83ce3c9af2e4296ed5e413a1f">FCmpInst::FCMP_UEQ</a>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="keywordflow">case</span> 3: Pred = isordered ? <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a541533f34077bbbcfb703a90f6d2da9b">FCmpInst::FCMP_OGE</a> : <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ae51609fc6a425f849d37c28cb9bc0344">FCmpInst::FCMP_UGE</a>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="keywordflow">case</span> 4: Pred = isordered ? <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a326bee0a4a424cef21c1cf8adb8b8dd8">FCmpInst::FCMP_OLT</a> : <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a75016d5872d90adf89cc1cbf5763f474">FCmpInst::FCMP_ULT</a>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="keywordflow">case</span> 5: Pred = isordered ? <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a8a80b27ca29fe2076b9bbdee02c65464">FCmpInst::FCMP_ONE</a> : <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ad601460c9371d0f0ada5ae006bdba2bd">FCmpInst::FCMP_UNE</a>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="keywordflow">case</span> 6: Pred = isordered ? <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a9835cfe02fb5027680bd7203b024f77a">FCmpInst::FCMP_OLE</a> : <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a396dda2571cd3c575f1d9cb44dc2cc09">FCmpInst::FCMP_ULE</a>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="keywordflow">case</span> 7:</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordflow">if</span> (!isordered) <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(LHS-&gt;<a class="code" href="classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>());</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    Pred = <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa3213b645e029aba8bb1b85213607d5e">FCmpInst::FCMP_ORD</a>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  }</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="keywordflow">return</span> Builder-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#a88cc5a48bb4170aa6541c7c6364e03b5">CreateFCmp</a>(Pred, LHS, RHS);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;}</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">// OptAndOp - This handles expressions of the form ((val OP C1) &amp; C2).  Where</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">// the Op parameter is &#39;OP&#39;, OpRHS is &#39;C1&#39;, and AndRHS is &#39;C2&#39;.  Op is</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">// guaranteed to be a binary operator.</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InstCombiner::OptAndOp(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Op,</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                                    <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *OpRHS,</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                                    <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *AndRHS,</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                                    <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;TheAnd) {</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">X</a> = Op-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Together = 0;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keywordflow">if</span> (!Op-&gt;<a class="code" href="classllvm_1_1Instruction.html#a407ab30fb284068600e0cba2677640c2">isShift</a>())</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    Together = <a class="code" href="classllvm_1_1ConstantExpr.html#ae6d2fbefb704650e3b01a0bbcdd43ffa">ConstantExpr::getAnd</a>(AndRHS, OpRHS);</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="keywordflow">switch</span> (Op-&gt;<a class="code" href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>()) {</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1APIntOps.html#afc7c4d88d09cba0c5e920f8a3a3ace55">Instruction::Xor</a>:</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">if</span> (Op-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()) {</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      <span class="comment">// (X ^ C1) &amp; C2 --&gt; (X &amp; C2) ^ (C1&amp;C2)</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">And</a> = Builder-&gt;CreateAnd(X, AndRHS);</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      And-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(Op);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateXor(And, Together);</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    }</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">Instruction::Or</a>:</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordflow">if</span> (Op-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()){</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      <span class="keywordflow">if</span> (Together != OpRHS) {</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <span class="comment">// (X | C1) &amp; C2 --&gt; (X | (C1&amp;C2)) &amp; C2</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">Or</a> = Builder-&gt;CreateOr(X, Together);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        Or-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(Op);</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="keywordflow">return</span> BinaryOperator::CreateAnd(Or, AndRHS);</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      }</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *TogetherCI = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(Together);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      <span class="keywordflow">if</span> (TogetherCI &amp;&amp; !TogetherCI-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#ad4ea4748170f687710a54c919dde5625">isZero</a>()){</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <span class="comment">// (X | C1) &amp; C2 --&gt; (X &amp; (C2^(C1&amp;C2))) | C1</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <span class="comment">// NOTE: This reduces the number of bits set in the &amp; mask, which</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <span class="comment">// can expose opportunities for store narrowing.</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        Together = <a class="code" href="classllvm_1_1ConstantExpr.html#a9fe0b1e68f897c642cde7e54184f2f4e">ConstantExpr::getXor</a>(AndRHS, Together);</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">And</a> = Builder-&gt;CreateAnd(X, Together);</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        And-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(Op);</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <span class="keywordflow">return</span> BinaryOperator::CreateOr(And, OpRHS);</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      }</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    }</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="keywordflow">case</span> Instruction::Add:</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">if</span> (Op-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()) {</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      <span class="comment">// Adding a one to a single bit bit-field should be turned into an XOR</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      <span class="comment">// of the bit.  First thing to check is to see if this AND is with a</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      <span class="comment">// single bit constant.</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;AndRHSV = AndRHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>();</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      <span class="comment">// If there is only one bit set.</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      <span class="keywordflow">if</span> (AndRHSV.<a class="code" href="classllvm_1_1APInt.html#af3deb6522c4fe2043fe07af2ec90190c">isPowerOf2</a>()) {</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <span class="comment">// Ok, at this point, we know that we are masking the result of the</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="comment">// ADD down to exactly one bit.  If the constant we are adding has</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <span class="comment">// no bits set below this bit, then we can eliminate the ADD.</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a>&amp; AddRHS = OpRHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>();</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <span class="comment">// Check to see if any bits below the one bit set in AndRHSV are set.</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="keywordflow">if</span> ((AddRHS &amp; (AndRHSV-1)) == 0) {</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;          <span class="comment">// If not, the only thing that can effect the output of the AND is</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;          <span class="comment">// the bit specified by AndRHSV.  If that bit is set, the effect of</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;          <span class="comment">// the XOR is to toggle the bit.  If it is clear, then the ADD has</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;          <span class="comment">// no effect.</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;          <span class="keywordflow">if</span> ((AddRHS &amp; AndRHSV) == 0) { <span class="comment">// Bit is not set, noop</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            TheAnd.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(0, X);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            <span class="keywordflow">return</span> &amp;TheAnd;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;          } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            <span class="comment">// Pull the XOR out of the AND.</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            <a class="code" href="classllvm_1_1Value.html">Value</a> *NewAnd = Builder-&gt;CreateAnd(X, AndRHS);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            NewAnd-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(Op);</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            <span class="keywordflow">return</span> BinaryOperator::CreateXor(NewAnd, AndRHS);</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;          }</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        }</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      }</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    }</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="keywordflow">case</span> Instruction::Shl: {</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="comment">// We know that the AND will not produce any of the bits shifted in, so if</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="comment">// the anded constant includes them, clear them now!</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    uint32_t BitWidth = AndRHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a240475f85dea79ec272c578fdf89acf1">getType</a>()-&gt;<a class="code" href="classllvm_1_1IntegerType.html#a6f603ab84f6f7c79985036f58cca9d48">getBitWidth</a>();</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    uint32_t OpRHSVal = OpRHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a024bb83a7f01e7661ea72ff7dcc460f5">getLimitedValue</a>(BitWidth);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> ShlMask(<a class="code" href="classllvm_1_1APInt.html#adcb96bd09d7c75c7669fa5f9d1190899">APInt::getHighBitsSet</a>(BitWidth, BitWidth-OpRHSVal));</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = Builder-&gt;getInt(AndRHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>() &amp; ShlMask);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">if</span> (CI-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>() == ShlMask)</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      <span class="comment">// Masking out bits that the shift already masks.</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      <span class="keywordflow">return</span> ReplaceInstUsesWith(TheAnd, Op);   <span class="comment">// No need for the and.</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordflow">if</span> (CI != AndRHS) {                  <span class="comment">// Reducing bits set in and.</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      TheAnd.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(1, CI);</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      <span class="keywordflow">return</span> &amp;TheAnd;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    }</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  }</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="keywordflow">case</span> Instruction::LShr: {</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="comment">// We know that the AND will not produce any of the bits shifted in, so if</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="comment">// the anded constant includes them, clear them now!  This only applies to</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="comment">// unsigned shifts, because a signed shr may bring in set bits!</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    uint32_t BitWidth = AndRHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a240475f85dea79ec272c578fdf89acf1">getType</a>()-&gt;<a class="code" href="classllvm_1_1IntegerType.html#a6f603ab84f6f7c79985036f58cca9d48">getBitWidth</a>();</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    uint32_t OpRHSVal = OpRHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a024bb83a7f01e7661ea72ff7dcc460f5">getLimitedValue</a>(BitWidth);</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> ShrMask(<a class="code" href="classllvm_1_1APInt.html#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(BitWidth, BitWidth - OpRHSVal));</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = Builder-&gt;getInt(AndRHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>() &amp; ShrMask);</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keywordflow">if</span> (CI-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>() == ShrMask)</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      <span class="comment">// Masking out bits that the shift already masks.</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      <span class="keywordflow">return</span> ReplaceInstUsesWith(TheAnd, Op);</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">if</span> (CI != AndRHS) {</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      TheAnd.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(1, CI);  <span class="comment">// Reduce bits set in and cst.</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      <span class="keywordflow">return</span> &amp;TheAnd;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    }</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  }</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="keywordflow">case</span> Instruction::AShr:</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="comment">// Signed shr.</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="comment">// See if this is shifting in some sign extension, then masking it out</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="comment">// with an and.</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">if</span> (Op-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()) {</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      uint32_t BitWidth = AndRHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a240475f85dea79ec272c578fdf89acf1">getType</a>()-&gt;<a class="code" href="classllvm_1_1IntegerType.html#a6f603ab84f6f7c79985036f58cca9d48">getBitWidth</a>();</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      uint32_t OpRHSVal = OpRHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a024bb83a7f01e7661ea72ff7dcc460f5">getLimitedValue</a>(BitWidth);</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> ShrMask(<a class="code" href="classllvm_1_1APInt.html#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(BitWidth, BitWidth - OpRHSVal));</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = Builder-&gt;getInt(AndRHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>() &amp; ShrMask);</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      <span class="keywordflow">if</span> (C == AndRHS) {          <span class="comment">// Masking out bits shifted in.</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="comment">// (Val ashr C1) &amp; C2 -&gt; (Val lshr C1) &amp; C2</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <span class="comment">// Make the argument unsigned.</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *ShVal = Op-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        ShVal = Builder-&gt;CreateLShr(ShVal, OpRHS, Op-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>());</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="keywordflow">return</span> BinaryOperator::CreateAnd(ShVal, AndRHS, TheAnd.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>());</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      }</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    }</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  }</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;}</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">/// Emit a computation of: (V &gt;= Lo &amp;&amp; V &lt; Hi) if Inside is true, otherwise</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">/// (V &lt; Lo || V &gt;= Hi).  In practice, we emit the more efficient</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">/// (V-Lo) &lt;u Hi-Lo.  This method expects that Lo &lt;= Hi. isSigned indicates</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment">/// whether to treat the V, Lo and HI as signed or not. IB is the location to</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">/// insert new instructions.</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Value.html">Value</a> *InstCombiner::InsertRangeTest(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="namespacellvm_1_1HexagonISD.html#aa640667f875feccdb3cc643baff441f1a144f7e8227378979bf13646688174ed9">Lo</a>, <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="namespacellvm_1_1HexagonISD.html#aa640667f875feccdb3cc643baff441f1ab53c716337bbeea9ba39b5fa32d60303">Hi</a>,</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                                     <span class="keywordtype">bool</span> isSigned, <span class="keywordtype">bool</span> Inside) {</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  assert(cast&lt;ConstantInt&gt;(<a class="code" href="classllvm_1_1ConstantExpr.html#a593bc53015a060d260c75fc599f9a7b1">ConstantExpr::getICmp</a>((isSigned ?</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a2751d6136a2819749dcef65dc19a4246">ICmpInst::ICMP_SLE</a>:<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a>), Lo, Hi))-&gt;getZExtValue() &amp;&amp;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;         <span class="stringliteral">&quot;Lo is not &lt;= Hi in range emission code!&quot;</span>);</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="keywordflow">if</span> (Inside) {</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordflow">if</span> (Lo == Hi)  <span class="comment">// Trivially false.</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      <span class="keywordflow">return</span> Builder-&gt;getFalse();</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="comment">// V &gt;= Min &amp;&amp; V &lt; Hi --&gt; V &lt; Hi</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordflow">if</span> (cast&lt;ConstantInt&gt;(Lo)-&gt;isMinValue(isSigned)) {</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">ICmpInst::Predicate</a> pred = (isSigned ?</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a> : <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>);</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      <span class="keywordflow">return</span> Builder-&gt;CreateICmp(pred, V, Hi);</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    }</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="comment">// Emit V-Lo &lt;u Hi-Lo</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NegLo = <a class="code" href="classllvm_1_1ConstantExpr.html#afa29f0cd072ab9b3a2630681ffe5760f">ConstantExpr::getNeg</a>(Lo);</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Add = Builder-&gt;CreateAdd(V, NegLo, V-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.off&quot;</span>);</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *UpperBound = <a class="code" href="classllvm_1_1ConstantExpr.html#ae6f1c15034bc5515033874630a8ecce6">ConstantExpr::getAdd</a>(NegLo, Hi);</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordflow">return</span> Builder-&gt;CreateICmpULT(Add, UpperBound);</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  }</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <span class="keywordflow">if</span> (Lo == Hi)  <span class="comment">// Trivially true.</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keywordflow">return</span> Builder-&gt;getTrue();</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="comment">// V &lt; Min || V &gt;= Hi -&gt; V &gt; Hi-1</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  Hi = <a class="code" href="InstCombineAndOrXor_8cpp.html#ac45a6ef2ab6b7ff3d7512fa9b61dd941">SubOne</a>(cast&lt;ConstantInt&gt;(Hi));</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="keywordflow">if</span> (cast&lt;ConstantInt&gt;(Lo)-&gt;isMinValue(isSigned)) {</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">ICmpInst::Predicate</a> pred = (isSigned ?</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a> : <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>);</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordflow">return</span> Builder-&gt;CreateICmp(pred, V, Hi);</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  }</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="comment">// Emit V-Lo &gt;u Hi-1-Lo</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <span class="comment">// Note that Hi has already had one subtracted from it, above.</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *NegLo = cast&lt;ConstantInt&gt;(<a class="code" href="classllvm_1_1ConstantExpr.html#afa29f0cd072ab9b3a2630681ffe5760f">ConstantExpr::getNeg</a>(Lo));</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Add = Builder-&gt;CreateAdd(V, NegLo, V-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.off&quot;</span>);</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *LowerBound = <a class="code" href="classllvm_1_1ConstantExpr.html#ae6f1c15034bc5515033874630a8ecce6">ConstantExpr::getAdd</a>(NegLo, Hi);</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <span class="keywordflow">return</span> Builder-&gt;CreateICmpUGT(Add, LowerBound);</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;}</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="comment">// isRunOfOnes - Returns true iff Val consists of one contiguous run of 1s with</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment">// any number of 0s on either side.  The 1s are allowed to wrap from LSB to</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="comment">// MSB, so 0x000FFF0, 0x0000FFFF, and 0xFF0000FF are all runs.  0x0F0F0000 is</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment">// not, since all 1s are not contiguous.</span></div><div class="line"><a name="l00318"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#add947a35dd442e049fda602d9dc9cd20">  318</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineAndOrXor_8cpp.html#add947a35dd442e049fda602d9dc9cd20">isRunOfOnes</a>(<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *Val, uint32_t &amp;MB, uint32_t &amp;ME) {</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a>&amp; V = Val-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>();</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  uint32_t BitWidth = Val-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a240475f85dea79ec272c578fdf89acf1">getType</a>()-&gt;<a class="code" href="classllvm_1_1IntegerType.html#a6f603ab84f6f7c79985036f58cca9d48">getBitWidth</a>();</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1APIntOps.html#a7f6d289fb01d21926d74f34b4c4f14dd">APIntOps::isShiftedMask</a>(BitWidth, V)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="comment">// look for the first zero bit after the run of ones</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  MB = BitWidth - ((V - 1) ^ V).countLeadingZeros();</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="comment">// look for the first non-zero bit</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  ME = V.<a class="code" href="classllvm_1_1APInt.html#a65eb40bd8c732c997e156e14f6b461f4">getActiveBits</a>();</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;}</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment">/// FoldLogicalPlusAnd - This is part of an expression (LHS +/- RHS) &amp; Mask,</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment">/// where isSub determines whether the operator is a sub.  If we can fold one of</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment">/// the following xforms:</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment">/// ((A &amp; N) +/- B) &amp; Mask -&gt; (A +/- B) &amp; Mask iff N&amp;Mask == Mask</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment">/// ((A | N) +/- B) &amp; Mask -&gt; (A +/- B) &amp; Mask iff N&amp;Mask == 0</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment">/// ((A ^ N) +/- B) &amp; Mask -&gt; (A +/- B) &amp; Mask iff N&amp;Mask == 0</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment">/// return (A +/- B).</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Value.html">Value</a> *InstCombiner::FoldLogicalPlusAnd(<a class="code" href="classllvm_1_1Value.html">Value</a> *LHS, <a class="code" href="classllvm_1_1Value.html">Value</a> *RHS,</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                                        <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *Mask, <span class="keywordtype">bool</span> isSub,</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                                        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *LHSI = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a>&gt;(LHS);</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <span class="keywordflow">if</span> (!LHSI || LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>() != 2 ||</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      !isa&lt;ConstantInt&gt;(LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1))) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> = cast&lt;ConstantInt&gt;(LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <span class="keywordflow">switch</span> (LHSI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>()) {</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <span class="keywordflow">default</span>: <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">Instruction::And</a>:</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantExpr.html#ae6d2fbefb704650e3b01a0bbcdd43ffa">ConstantExpr::getAnd</a>(N, Mask) == Mask) {</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      <span class="comment">// If the AndRHS is a power of two minus one (0+1+), this is simple.</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      <span class="keywordflow">if</span> ((Mask-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>().<a class="code" href="classllvm_1_1APInt.html#af0336ea4c7f7f56354b2ca7c8859c1f9">countLeadingZeros</a>() +</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;           Mask-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>().<a class="code" href="classllvm_1_1APInt.html#ac9d5eb700dcdf604653d12d8caf4a0fb">countPopulation</a>()) ==</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;          Mask-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>().<a class="code" href="classllvm_1_1APInt.html#ad081689e23a8f5dea78dedd623d6a8f8">getBitWidth</a>())</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      <span class="comment">// Otherwise, if Mask is 0+1+0+, and if B is known to have the low 0+</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      <span class="comment">// part, we don&#39;t need any explicit masks to take them out of A.  If that</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;      <span class="comment">// is all N is, ignore it.</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;      uint32_t MB = 0, ME = 0;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="InstCombineAndOrXor_8cpp.html#add947a35dd442e049fda602d9dc9cd20">isRunOfOnes</a>(Mask, MB, ME)) {  <span class="comment">// begin/end bit of run, inclusive</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        uint32_t BitWidth = cast&lt;IntegerType&gt;(RHS-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())-&gt;<a class="code" href="ValueTracking_8cpp.html#a06c14477546c3a0eb4c79ff007ea2375">getBitWidth</a>();</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <a class="code" href="classllvm_1_1APInt.html">APInt</a> Mask(<a class="code" href="classllvm_1_1APInt.html#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(BitWidth, MB-1));</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a8bc4c3e77e6f3d6c54b8b4504393dfa7">MaskedValueIsZero</a>(RHS, Mask))</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      }</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    }</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">Instruction::Or</a>:</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1APIntOps.html#afc7c4d88d09cba0c5e920f8a3a3ace55">Instruction::Xor</a>:</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="comment">// If the AndRHS is a power of two minus one (0+1+), and N&amp;Mask == 0</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keywordflow">if</span> ((Mask-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>().<a class="code" href="classllvm_1_1APInt.html#af0336ea4c7f7f56354b2ca7c8859c1f9">countLeadingZeros</a>() +</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;         Mask-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>().<a class="code" href="classllvm_1_1APInt.html#ac9d5eb700dcdf604653d12d8caf4a0fb">countPopulation</a>()) == Mask-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>().<a class="code" href="classllvm_1_1APInt.html#ad081689e23a8f5dea78dedd623d6a8f8">getBitWidth</a>()</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        &amp;&amp; <a class="code" href="classllvm_1_1ConstantExpr.html#ae6d2fbefb704650e3b01a0bbcdd43ffa">ConstantExpr::getAnd</a>(N, Mask)-&gt;<a class="code" href="classllvm_1_1Constant.html#ad7ec8482f19e8e86e3de573b060a17e5">isNullValue</a>())</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  }</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="keywordflow">if</span> (isSub)</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keywordflow">return</span> Builder-&gt;CreateSub(LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), RHS, <span class="stringliteral">&quot;fold&quot;</span>);</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <span class="keywordflow">return</span> Builder-&gt;CreateAdd(LHSI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), RHS, <span class="stringliteral">&quot;fold&quot;</span>);</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;}</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment">/// enum for classifying (icmp eq (A &amp; B), C) and (icmp ne (A &amp; B), C)</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment">/// One of A and B is considered the mask, the other the value. This is</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment">/// described as the &quot;AMask&quot; or &quot;BMask&quot; part of the enum. If the enum</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">/// contains only &quot;Mask&quot;, then both A and B can be considered masks.</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">/// If A is the mask, then it was proven, that (A &amp; C) == C. This</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">/// is trivial if C == A, or C == 0. If both A and C are constants, this</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment">/// proof is also easy.</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment">/// For the following explanations we assume that A is the mask.</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment">/// The part &quot;AllOnes&quot; declares, that the comparison is true only</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment">/// if (A &amp; B) == A, or all bits of A are set in B.</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment">///   Example: (icmp eq (A &amp; 3), 3) -&gt; FoldMskICmp_AMask_AllOnes</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment">/// The part &quot;AllZeroes&quot; declares, that the comparison is true only</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment">/// if (A &amp; B) == 0, or all bits of A are cleared in B.</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment">///   Example: (icmp eq (A &amp; 3), 0) -&gt; FoldMskICmp_Mask_AllZeroes</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment">/// The part &quot;Mixed&quot; declares, that (A &amp; B) == C and C might or might not</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment">/// contain any number of one bits and zero bits.</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment">///   Example: (icmp eq (A &amp; 3), 1) -&gt; FoldMskICmp_AMask_Mixed</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="comment">/// The Part &quot;Not&quot; means, that in above descriptions &quot;==&quot; should be replaced</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment">/// by &quot;!=&quot;.</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment">///   Example: (icmp ne (A &amp; 3), 3) -&gt; FoldMskICmp_AMask_NotAllOnes</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment">/// If the mask A contains a single bit, then the following is equivalent:</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment">///    (icmp eq (A &amp; B), A) equals (icmp ne (A &amp; B), 0)</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment">///    (icmp ne (A &amp; B), A) equals (icmp eq (A &amp; B), 0)</span></div><div class="line"><a name="l00409"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1">  409</a></span>&#160;<span class="comment"></span><span class="keyword">enum</span> <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1">MaskedICmpType</a> {</div><div class="line"><a name="l00410"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a8ab26b389e7b7199477e4e6f4a449c07">  410</a></span>&#160;  <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a8ab26b389e7b7199477e4e6f4a449c07">FoldMskICmp_AMask_AllOnes</a>           =     1,</div><div class="line"><a name="l00411"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1af9642ecdbd6386078c05024c75a8b585">  411</a></span>&#160;  <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1af9642ecdbd6386078c05024c75a8b585">FoldMskICmp_AMask_NotAllOnes</a>        =     2,</div><div class="line"><a name="l00412"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a1932a1cae8878c1e59fff843ded5af4a">  412</a></span>&#160;  <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a1932a1cae8878c1e59fff843ded5af4a">FoldMskICmp_BMask_AllOnes</a>           =     4,</div><div class="line"><a name="l00413"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a22226cf1a76711e1bb4ffceaa452f654">  413</a></span>&#160;  <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a22226cf1a76711e1bb4ffceaa452f654">FoldMskICmp_BMask_NotAllOnes</a>        =     8,</div><div class="line"><a name="l00414"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1ac406b89f196729d12023595c30b244d4">  414</a></span>&#160;  <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1ac406b89f196729d12023595c30b244d4">FoldMskICmp_Mask_AllZeroes</a>          =    16,</div><div class="line"><a name="l00415"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1afb2ea884e4e94dd5f644bf5fc410580a">  415</a></span>&#160;  <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1afb2ea884e4e94dd5f644bf5fc410580a">FoldMskICmp_Mask_NotAllZeroes</a>       =    32,</div><div class="line"><a name="l00416"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a6bab48061337e60eb9c79650fd8e08e2">  416</a></span>&#160;  <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a6bab48061337e60eb9c79650fd8e08e2">FoldMskICmp_AMask_Mixed</a>             =    64,</div><div class="line"><a name="l00417"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1aa8d5b5f3227910eddb03cce79f461af2">  417</a></span>&#160;  <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1aa8d5b5f3227910eddb03cce79f461af2">FoldMskICmp_AMask_NotMixed</a>          =   128,</div><div class="line"><a name="l00418"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a2778ef2a236b30d557c19e8d4cf27f66">  418</a></span>&#160;  <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a2778ef2a236b30d557c19e8d4cf27f66">FoldMskICmp_BMask_Mixed</a>             =   256,</div><div class="line"><a name="l00419"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a87e4869a2403fea5c04b47663119bf62">  419</a></span>&#160;  <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a87e4869a2403fea5c04b47663119bf62">FoldMskICmp_BMask_NotMixed</a>          =   512</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;};</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment">/// return the set of pattern classes (from MaskedICmpType)</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment">/// that (icmp SCC (A &amp; B), C) satisfies</span></div><div class="line"><a name="l00424"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#aed27d8ce11c8fb8b5cac79cc959bd5db">  424</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="InstCombineAndOrXor_8cpp.html#aed27d8ce11c8fb8b5cac79cc959bd5db">getTypeOfMaskedICmp</a>(<a class="code" href="classllvm_1_1Value.html">Value</a>* <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>, <a class="code" href="classllvm_1_1Value.html">Value</a>* <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, <a class="code" href="classllvm_1_1Value.html">Value</a>* <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>,</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                                    <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">ICmpInst::Predicate</a> SCC)</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;{</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *ACst = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>);</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *BCst = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CCst = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="keywordtype">bool</span> icmp_eq = (SCC == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>);</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="keywordtype">bool</span> icmp_abit = (ACst != 0 &amp;&amp; !ACst-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#ad4ea4748170f687710a54c919dde5625">isZero</a>() &amp;&amp;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                    ACst-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>().<a class="code" href="classllvm_1_1APInt.html#af3deb6522c4fe2043fe07af2ec90190c">isPowerOf2</a>());</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <span class="keywordtype">bool</span> icmp_bbit = (BCst != 0 &amp;&amp; !BCst-&gt;isZero() &amp;&amp;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                    BCst-&gt;getValue().isPowerOf2());</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#aae67c508d4f0716516f5c412c5592556">result</a> = 0;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <span class="keywordflow">if</span> (CCst != 0 &amp;&amp; CCst-&gt;isZero()) {</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="comment">// if C is zero, then both A and B qualify as mask</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    result |= (icmp_eq ? (<a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1ac406b89f196729d12023595c30b244d4">FoldMskICmp_Mask_AllZeroes</a> |</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                          <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1ac406b89f196729d12023595c30b244d4">FoldMskICmp_Mask_AllZeroes</a> |</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                          <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a6bab48061337e60eb9c79650fd8e08e2">FoldMskICmp_AMask_Mixed</a> |</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                          <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a2778ef2a236b30d557c19e8d4cf27f66">FoldMskICmp_BMask_Mixed</a>)</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                       : (<a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1afb2ea884e4e94dd5f644bf5fc410580a">FoldMskICmp_Mask_NotAllZeroes</a> |</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                          <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1afb2ea884e4e94dd5f644bf5fc410580a">FoldMskICmp_Mask_NotAllZeroes</a> |</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                          <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1aa8d5b5f3227910eddb03cce79f461af2">FoldMskICmp_AMask_NotMixed</a> |</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                          <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a87e4869a2403fea5c04b47663119bf62">FoldMskICmp_BMask_NotMixed</a>));</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="keywordflow">if</span> (icmp_abit)</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      result |= (icmp_eq ? (<a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1af9642ecdbd6386078c05024c75a8b585">FoldMskICmp_AMask_NotAllOnes</a> |</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                            <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1aa8d5b5f3227910eddb03cce79f461af2">FoldMskICmp_AMask_NotMixed</a>)</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                         : (<a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a8ab26b389e7b7199477e4e6f4a449c07">FoldMskICmp_AMask_AllOnes</a> |</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                            <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a6bab48061337e60eb9c79650fd8e08e2">FoldMskICmp_AMask_Mixed</a>));</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="keywordflow">if</span> (icmp_bbit)</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;      result |= (icmp_eq ? (<a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a22226cf1a76711e1bb4ffceaa452f654">FoldMskICmp_BMask_NotAllOnes</a> |</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                            <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a87e4869a2403fea5c04b47663119bf62">FoldMskICmp_BMask_NotMixed</a>)</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                         : (<a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a1932a1cae8878c1e59fff843ded5af4a">FoldMskICmp_BMask_AllOnes</a> |</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                            <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a2778ef2a236b30d557c19e8d4cf27f66">FoldMskICmp_BMask_Mixed</a>));</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="Target_2README_8txt.html#aae67c508d4f0716516f5c412c5592556">result</a>;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  }</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <span class="keywordflow">if</span> (A == C) {</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    result |= (icmp_eq ? (<a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a8ab26b389e7b7199477e4e6f4a449c07">FoldMskICmp_AMask_AllOnes</a> |</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                          <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a6bab48061337e60eb9c79650fd8e08e2">FoldMskICmp_AMask_Mixed</a>)</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                       : (<a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1af9642ecdbd6386078c05024c75a8b585">FoldMskICmp_AMask_NotAllOnes</a> |</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                          <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1aa8d5b5f3227910eddb03cce79f461af2">FoldMskICmp_AMask_NotMixed</a>));</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordflow">if</span> (icmp_abit)</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      result |= (icmp_eq ? (<a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1afb2ea884e4e94dd5f644bf5fc410580a">FoldMskICmp_Mask_NotAllZeroes</a> |</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                            <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1aa8d5b5f3227910eddb03cce79f461af2">FoldMskICmp_AMask_NotMixed</a>)</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                         : (<a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1ac406b89f196729d12023595c30b244d4">FoldMskICmp_Mask_AllZeroes</a> |</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                            <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a6bab48061337e60eb9c79650fd8e08e2">FoldMskICmp_AMask_Mixed</a>));</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ACst != 0 &amp;&amp; CCst != 0 &amp;&amp;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;             <a class="code" href="classllvm_1_1ConstantExpr.html#ae6d2fbefb704650e3b01a0bbcdd43ffa">ConstantExpr::getAnd</a>(ACst, CCst) == CCst) {</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    result |= (icmp_eq ? <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a6bab48061337e60eb9c79650fd8e08e2">FoldMskICmp_AMask_Mixed</a></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                       : <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1aa8d5b5f3227910eddb03cce79f461af2">FoldMskICmp_AMask_NotMixed</a>);</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  }</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  <span class="keywordflow">if</span> (B == C) {</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    result |= (icmp_eq ? (<a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a1932a1cae8878c1e59fff843ded5af4a">FoldMskICmp_BMask_AllOnes</a> |</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                          <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a2778ef2a236b30d557c19e8d4cf27f66">FoldMskICmp_BMask_Mixed</a>)</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                       : (<a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a22226cf1a76711e1bb4ffceaa452f654">FoldMskICmp_BMask_NotAllOnes</a> |</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                          <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a87e4869a2403fea5c04b47663119bf62">FoldMskICmp_BMask_NotMixed</a>));</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="keywordflow">if</span> (icmp_bbit)</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      result |= (icmp_eq ? (<a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1afb2ea884e4e94dd5f644bf5fc410580a">FoldMskICmp_Mask_NotAllZeroes</a> |</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                            <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a87e4869a2403fea5c04b47663119bf62">FoldMskICmp_BMask_NotMixed</a>)</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                         : (<a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1ac406b89f196729d12023595c30b244d4">FoldMskICmp_Mask_AllZeroes</a> |</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                            <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a2778ef2a236b30d557c19e8d4cf27f66">FoldMskICmp_BMask_Mixed</a>));</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (BCst != 0 &amp;&amp; CCst != 0 &amp;&amp;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;             <a class="code" href="classllvm_1_1ConstantExpr.html#ae6d2fbefb704650e3b01a0bbcdd43ffa">ConstantExpr::getAnd</a>(BCst, CCst) == CCst) {</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    result |= (icmp_eq ? <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a2778ef2a236b30d557c19e8d4cf27f66">FoldMskICmp_BMask_Mixed</a></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                       : <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a87e4869a2403fea5c04b47663119bf62">FoldMskICmp_BMask_NotMixed</a>);</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  }</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="Target_2README_8txt.html#aae67c508d4f0716516f5c412c5592556">result</a>;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;}</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="comment">/// Convert an analysis of a masked ICmp into its equivalent if all boolean</span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment">/// operations had the opposite sense. Since each &quot;NotXXX&quot; flag (recording !=)</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="comment">/// is adjacent to the corresponding normal flag (recording ==), this just</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="comment">/// involves swapping those bits over.</span></div><div class="line"><a name="l00495"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#a09c36c07a47775cef8f8e93d8090d919">  495</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="InstCombineAndOrXor_8cpp.html#a09c36c07a47775cef8f8e93d8090d919">conjugateICmpMask</a>(<span class="keywordtype">unsigned</span> Mask) {</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  <span class="keywordtype">unsigned</span> NewMask;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  NewMask = (Mask &amp; (<a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a8ab26b389e7b7199477e4e6f4a449c07">FoldMskICmp_AMask_AllOnes</a> | <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a1932a1cae8878c1e59fff843ded5af4a">FoldMskICmp_BMask_AllOnes</a> |</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                     <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1ac406b89f196729d12023595c30b244d4">FoldMskICmp_Mask_AllZeroes</a> | <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a6bab48061337e60eb9c79650fd8e08e2">FoldMskICmp_AMask_Mixed</a> |</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                     <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a2778ef2a236b30d557c19e8d4cf27f66">FoldMskICmp_BMask_Mixed</a>))</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;            &lt;&lt; 1;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  NewMask |=</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      (Mask &amp; (<a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1af9642ecdbd6386078c05024c75a8b585">FoldMskICmp_AMask_NotAllOnes</a> | <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a22226cf1a76711e1bb4ffceaa452f654">FoldMskICmp_BMask_NotAllOnes</a> |</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;               <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1afb2ea884e4e94dd5f644bf5fc410580a">FoldMskICmp_Mask_NotAllZeroes</a> | <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1aa8d5b5f3227910eddb03cce79f461af2">FoldMskICmp_AMask_NotMixed</a> |</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;               <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a87e4869a2403fea5c04b47663119bf62">FoldMskICmp_BMask_NotMixed</a>))</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      &gt;&gt; 1;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <span class="keywordflow">return</span> NewMask;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;}</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment">/// decomposeBitTestICmp - Decompose an icmp into the form ((X &amp; Y) pred Z)</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment">/// if possible. The returned predicate is either == or !=. Returns false if</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment">/// decomposition fails.</span></div><div class="line"><a name="l00514"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#aa75e7b9606d30b9bde1384efd6917580">  514</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineAndOrXor_8cpp.html#aa75e7b9606d30b9bde1384efd6917580">decomposeBitTestICmp</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *I, <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">ICmpInst::Predicate</a> &amp;Pred,</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                                 <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;<a class="code" href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">X</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;<a class="code" href="OcamlGCPrinter_8cpp.html#a1bdbcdc4205781eefd549946d40ff378">Y</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;Z) {</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <span class="comment">// X &lt; 0 is equivalent to (X &amp; SignBit) != 0.</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  <span class="keywordflow">if</span> (I-&gt;<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>)</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;ConstantInt&gt;(I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1)))</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isZero()) {</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        X = I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        Y = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(I-&gt;<a class="code" href="classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>(),</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                             <a class="code" href="classllvm_1_1APInt.html#a2e5e9f65d911e80a46d3098933794056">APInt::getSignBit</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getBitWidth()));</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        Pred = <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        Z = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      }</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  <span class="comment">// X &gt; -1 is equivalent to (X &amp; SignBit) == 0.</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  <span class="keywordflow">if</span> (I-&gt;<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>)</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;ConstantInt&gt;(I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1)))</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isAllOnesValue()) {</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        X = I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        Y = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(I-&gt;<a class="code" href="classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>(),</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                             <a class="code" href="classllvm_1_1APInt.html#a2e5e9f65d911e80a46d3098933794056">APInt::getSignBit</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getBitWidth()));</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        Pred = <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        Z = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getType());</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      }</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;}</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment">/// foldLogOpOfMaskedICmpsHelper:</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment">/// handle (icmp(A &amp; B) ==/!= C) &amp;/| (icmp(A &amp; D) ==/!= E)</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment">/// return the set of pattern classes (from MaskedICmpType)</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment">/// that both LHS and RHS satisfy</span></div><div class="line"><a name="l00547"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#a187cc5f9a7a949ba824b4ebc18858f1a">  547</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="InstCombineAndOrXor_8cpp.html#a187cc5f9a7a949ba824b4ebc18858f1a">foldLogOpOfMaskedICmpsHelper</a>(<a class="code" href="classllvm_1_1Value.html">Value</a>*&amp; <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>,</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                                             <a class="code" href="classllvm_1_1Value.html">Value</a>*&amp; <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, <a class="code" href="classllvm_1_1Value.html">Value</a>*&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>,</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                                             <a class="code" href="classllvm_1_1Value.html">Value</a>*&amp; D, <a class="code" href="classllvm_1_1Value.html">Value</a>*&amp; E,</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                                             <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *LHS, <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *RHS,</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                                             <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">ICmpInst::Predicate</a> &amp;LHSCC,</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                                             <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">ICmpInst::Predicate</a> &amp;RHSCC) {</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <span class="keywordflow">if</span> (LHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() != RHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <span class="comment">// vectors are not (yet?) supported</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  <span class="keywordflow">if</span> (LHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">isVectorTy</a>()) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  <span class="comment">// Here comes the tricky part:</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <span class="comment">// LHS might be of the form L11 &amp; L12 == X, X == L21 &amp; L22,</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <span class="comment">// and L11 &amp; L12 == L21 &amp; L22. The same goes for RHS.</span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  <span class="comment">// Now we must find those components L** and R**, that are equal, so</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  <span class="comment">// that we can extract the parameters A, B, C, D, and E for the canonical</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <span class="comment">// above.</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *L1 = LHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="Target_2ARM_2README_8txt.html#adefbb946b174533d5eb8db503b1f4ffa">L2</a> = LHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *L11,*L12,*L21,*L22;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  <span class="comment">// Check whether the icmp can be decomposed into a bit test.</span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="InstCombineAndOrXor_8cpp.html#aa75e7b9606d30b9bde1384efd6917580">decomposeBitTestICmp</a>(LHS, LHSCC, L11, L12, L2)) {</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    L21 = L22 = L1 = 0;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="comment">// Look for ANDs in the LHS icmp.</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="keywordflow">if</span> (!L1-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>()) {</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      <span class="comment">// You can icmp pointers, for example. They really aren&#39;t masks.</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;      L11 = L12 = 0;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(L1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(L11), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(L12)))) {</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      <span class="comment">// Any icmp can be viewed as being trivially masked; if it allows us to</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      <span class="comment">// remove one, it&#39;s worth it.</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      L11 = L1;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      L12 = <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">Constant::getAllOnesValue</a>(L1-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    }</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="keywordflow">if</span> (!L2-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>()) {</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      <span class="comment">// You can icmp pointers, for example. They really aren&#39;t masks.</span></div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      L21 = L22 = 0;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(L2, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(L21), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(L22)))) {</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      L21 = <a class="code" href="Target_2ARM_2README_8txt.html#adefbb946b174533d5eb8db503b1f4ffa">L2</a>;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      L22 = <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">Constant::getAllOnesValue</a>(L2-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    }</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  }</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  <span class="comment">// Bail if LHS was a icmp that can&#39;t be decomposed into an equality.</span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1ICmpInst.html#a9adf718c253dc7c1c7e859265cd3fc3d">ICmpInst::isEquality</a>(LHSCC))</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *R1 = RHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="MathExtras_8h.html#a9211f62d8e1e6de999eaa63ec0f6ae02">R2</a> = RHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *R11,*R12;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  <span class="keywordtype">bool</span> ok = <span class="keyword">false</span>;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="InstCombineAndOrXor_8cpp.html#aa75e7b9606d30b9bde1384efd6917580">decomposeBitTestICmp</a>(RHS, RHSCC, R11, R12, R2)) {</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="keywordflow">if</span> (R11 == L11 || R11 == L12 || R11 == L21 || R11 == L22) {</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;      A = R11; D = R12;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (R12 == L11 || R12 == L12 || R12 == L21 || R12 == L22) {</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      A = R12; D = R11;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    }</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    E = <a class="code" href="MathExtras_8h.html#a9211f62d8e1e6de999eaa63ec0f6ae02">R2</a>; R1 = 0; ok = <span class="keyword">true</span>;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (R1-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>()) {</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(R1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(R11), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(R12)))) {</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;      <span class="comment">// As before, model no mask as a trivial mask if it&#39;ll let us do an</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      <span class="comment">// optimisation.</span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;      R11 = R1;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;      R12 = <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">Constant::getAllOnesValue</a>(R1-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    }</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="keywordflow">if</span> (R11 == L11 || R11 == L12 || R11 == L21 || R11 == L22) {</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;      A = R11; D = R12; E = <a class="code" href="MathExtras_8h.html#a9211f62d8e1e6de999eaa63ec0f6ae02">R2</a>; ok = <span class="keyword">true</span>;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (R12 == L11 || R12 == L12 || R12 == L21 || R12 == L22) {</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      A = R12; D = R11; E = <a class="code" href="MathExtras_8h.html#a9211f62d8e1e6de999eaa63ec0f6ae02">R2</a>; ok = <span class="keyword">true</span>;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    }</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  }</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  <span class="comment">// Bail if RHS was a icmp that can&#39;t be decomposed into an equality.</span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1ICmpInst.html#a9adf718c253dc7c1c7e859265cd3fc3d">ICmpInst::isEquality</a>(RHSCC))</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  <span class="comment">// Look for ANDs in on the right side of the RHS icmp.</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  <span class="keywordflow">if</span> (!ok &amp;&amp; R2-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>()) {</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(R2, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(R11), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(R12)))) {</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;      R11 = <a class="code" href="MathExtras_8h.html#a9211f62d8e1e6de999eaa63ec0f6ae02">R2</a>;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;      R12 = <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">Constant::getAllOnesValue</a>(R2-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    }</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="keywordflow">if</span> (R11 == L11 || R11 == L12 || R11 == L21 || R11 == L22) {</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;      A = R11; D = R12; E = R1; ok = <span class="keyword">true</span>;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (R12 == L11 || R12 == L12 || R12 == L21 || R12 == L22) {</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;      A = R12; D = R11; E = R1; ok = <span class="keyword">true</span>;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    }</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  }</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  <span class="keywordflow">if</span> (!ok)</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <span class="keywordflow">if</span> (L11 == A) {</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    B = L12; C = <a class="code" href="Target_2ARM_2README_8txt.html#adefbb946b174533d5eb8db503b1f4ffa">L2</a>;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (L12 == A) {</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    B = L11; C = <a class="code" href="Target_2ARM_2README_8txt.html#adefbb946b174533d5eb8db503b1f4ffa">L2</a>;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (L21 == A) {</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    B = L22; C = L1;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (L22 == A) {</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    B = L21; C = L1;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  }</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  <span class="keywordtype">unsigned</span> left_type = <a class="code" href="InstCombineAndOrXor_8cpp.html#aed27d8ce11c8fb8b5cac79cc959bd5db">getTypeOfMaskedICmp</a>(A, B, C, LHSCC);</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  <span class="keywordtype">unsigned</span> right_type = <a class="code" href="InstCombineAndOrXor_8cpp.html#aed27d8ce11c8fb8b5cac79cc959bd5db">getTypeOfMaskedICmp</a>(A, D, E, RHSCC);</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  <span class="keywordflow">return</span> left_type &amp; right_type;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;}<span class="comment"></span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;<span class="comment">/// foldLogOpOfMaskedICmps:</span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="comment">/// try to fold (icmp(A &amp; B) ==/!= C) &amp;/| (icmp(A &amp; D) ==/!= E)</span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="comment">/// into a single (icmp(A &amp; X) ==/!= Y)</span></div><div class="line"><a name="l00661"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#a907d394944052b35b29b6f6e0c923e08">  661</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a>* <a class="code" href="InstCombineAndOrXor_8cpp.html#a907d394944052b35b29b6f6e0c923e08">foldLogOpOfMaskedICmps</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *LHS, <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *RHS, <span class="keywordtype">bool</span> IsAnd,</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                                     <a class="code" href="classllvm_1_1IRBuilder.html">llvm::InstCombiner::BuilderTy</a>* Builder) {</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a> = 0, *<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> = 0, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = 0, *D = 0, *E = 0;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">ICmpInst::Predicate</a> LHSCC = LHS-&gt;<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), RHSCC = RHS-&gt;<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>();</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  <span class="keywordtype">unsigned</span> mask = <a class="code" href="InstCombineAndOrXor_8cpp.html#a187cc5f9a7a949ba824b4ebc18858f1a">foldLogOpOfMaskedICmpsHelper</a>(A, <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, D, E, LHS, RHS,</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                                               LHSCC, RHSCC);</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;  <span class="keywordflow">if</span> (mask == 0) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  assert(<a class="code" href="classllvm_1_1ICmpInst.html#a9adf718c253dc7c1c7e859265cd3fc3d">ICmpInst::isEquality</a>(LHSCC) &amp;&amp; <a class="code" href="classllvm_1_1ICmpInst.html#a9adf718c253dc7c1c7e859265cd3fc3d">ICmpInst::isEquality</a>(RHSCC) &amp;&amp;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;         <span class="stringliteral">&quot;foldLogOpOfMaskedICmpsHelper must return an equality predicate.&quot;</span>);</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <span class="comment">// In full generality:</span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <span class="comment">//     (icmp (A &amp; B) Op C) | (icmp (A &amp; D) Op E)</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <span class="comment">// ==  ![ (icmp (A &amp; B) !Op C) &amp; (icmp (A &amp; D) !Op E) ]</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  <span class="comment">// If the latter can be converted into (icmp (A &amp; X) Op Y) then the former is</span></div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  <span class="comment">// equivalent to (icmp (A &amp; X) !Op Y).</span></div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  <span class="comment">// Therefore, we can pretend for the rest of this function that we&#39;re dealing</span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  <span class="comment">// with the conjunction, provided we flip the sense of any comparisons (both</span></div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <span class="comment">// input and output).</span></div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  <span class="comment">// In most cases we&#39;re going to produce an EQ for the &quot;&amp;&amp;&quot; case.</span></div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">ICmpInst::Predicate</a> NEWCC = IsAnd ? <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> : <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  <span class="keywordflow">if</span> (!IsAnd) {</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="comment">// Convert the masking analysis into its equivalent with negated</span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="comment">// comparisons.</span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    mask = <a class="code" href="InstCombineAndOrXor_8cpp.html#a09c36c07a47775cef8f8e93d8090d919">conjugateICmpMask</a>(mask);</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  }</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  <span class="keywordflow">if</span> (mask &amp; <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1ac406b89f196729d12023595c30b244d4">FoldMskICmp_Mask_AllZeroes</a>) {</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <span class="comment">// (icmp eq (A &amp; B), 0) &amp; (icmp eq (A &amp; D), 0)</span></div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="comment">// -&gt; (icmp eq (A &amp; (B|D)), 0)</span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a>* newOr = Builder-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#a8f55dd4237be6778517ddd752ca8b76a">CreateOr</a>(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, D);</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a>* newAnd = Builder-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#a197d5dd77cad4560a082900962a830aa">CreateAnd</a>(A, newOr);</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <span class="comment">// we can&#39;t use C as zero, because we might actually handle</span></div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <span class="comment">//   (icmp ne (A &amp; B), B) &amp; (icmp ne (A &amp; D), D)</span></div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="comment">// with B and D, having a single bit set</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a>* <a class="code" href="Target_2Sparc_2README_8txt.html#adde814a560e5b8f522edeacf92b81102">zero</a> = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(A-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <span class="keywordflow">return</span> Builder-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#a495d91fb3d2662acbffd0162c56153ed">CreateICmp</a>(NEWCC, newAnd, zero);</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  }</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <span class="keywordflow">if</span> (mask &amp; <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a1932a1cae8878c1e59fff843ded5af4a">FoldMskICmp_BMask_AllOnes</a>) {</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="comment">// (icmp eq (A &amp; B), B) &amp; (icmp eq (A &amp; D), D)</span></div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="comment">// -&gt; (icmp eq (A &amp; (B|D)), (B|D))</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a>* newOr = Builder-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#a8f55dd4237be6778517ddd752ca8b76a">CreateOr</a>(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, D);</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a>* newAnd = Builder-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#a197d5dd77cad4560a082900962a830aa">CreateAnd</a>(A, newOr);</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <span class="keywordflow">return</span> Builder-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#a495d91fb3d2662acbffd0162c56153ed">CreateICmp</a>(NEWCC, newAnd, newOr);</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  }</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  <span class="keywordflow">if</span> (mask &amp; <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a8ab26b389e7b7199477e4e6f4a449c07">FoldMskICmp_AMask_AllOnes</a>) {</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <span class="comment">// (icmp eq (A &amp; B), A) &amp; (icmp eq (A &amp; D), A)</span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <span class="comment">// -&gt; (icmp eq (A &amp; (B&amp;D)), A)</span></div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a>* newAnd1 = Builder-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#a197d5dd77cad4560a082900962a830aa">CreateAnd</a>(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, D);</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a>* newAnd = Builder-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#a197d5dd77cad4560a082900962a830aa">CreateAnd</a>(A, newAnd1);</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="keywordflow">return</span> Builder-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#a495d91fb3d2662acbffd0162c56153ed">CreateICmp</a>(NEWCC, newAnd, A);</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  }</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  <span class="comment">// Remaining cases assume at least that B and D are constant, and depend on</span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  <span class="comment">// their actual values. This isn&#39;t strictly, necessary, just a &quot;handle the</span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  <span class="comment">// easy cases for now&quot; decision.</span></div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *BCst = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>);</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  <span class="keywordflow">if</span> (BCst == 0) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *DCst = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(D);</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  <span class="keywordflow">if</span> (DCst == 0) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <span class="keywordflow">if</span> (mask &amp; (<a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1afb2ea884e4e94dd5f644bf5fc410580a">FoldMskICmp_Mask_NotAllZeroes</a> | <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a22226cf1a76711e1bb4ffceaa452f654">FoldMskICmp_BMask_NotAllOnes</a>)) {</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="comment">// (icmp ne (A &amp; B), 0) &amp; (icmp ne (A &amp; D), 0) and</span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="comment">// (icmp ne (A &amp; B), B) &amp; (icmp ne (A &amp; D), D)</span></div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="comment">//     -&gt; (icmp ne (A &amp; B), 0) or (icmp ne (A &amp; D), 0)</span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="comment">// Only valid if one of the masks is a superset of the other (check &quot;B&amp;D&quot; is</span></div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="comment">// the same as either B or D).</span></div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> NewMask = BCst-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>() &amp; DCst-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>();</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <span class="keywordflow">if</span> (NewMask == BCst-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>())</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;      <span class="keywordflow">return</span> LHS;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (NewMask == DCst-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>())</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;      <span class="keywordflow">return</span> RHS;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  }</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  <span class="keywordflow">if</span> (mask &amp; <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1af9642ecdbd6386078c05024c75a8b585">FoldMskICmp_AMask_NotAllOnes</a>) {</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <span class="comment">// (icmp ne (A &amp; B), B) &amp; (icmp ne (A &amp; D), D)</span></div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <span class="comment">//     -&gt; (icmp ne (A &amp; B), A) or (icmp ne (A &amp; D), A)</span></div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="comment">// Only valid if one of the masks is a superset of the other (check &quot;B|D&quot; is</span></div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="comment">// the same as either B or D).</span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> NewMask = BCst-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>() | DCst-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>();</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="keywordflow">if</span> (NewMask == BCst-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>())</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;      <span class="keywordflow">return</span> LHS;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (NewMask == DCst-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>())</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;      <span class="keywordflow">return</span> RHS;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;  }</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  <span class="keywordflow">if</span> (mask &amp; <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a2778ef2a236b30d557c19e8d4cf27f66">FoldMskICmp_BMask_Mixed</a>) {</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="comment">// (icmp eq (A &amp; B), C) &amp; (icmp eq (A &amp; D), E)</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="comment">// We already know that B &amp; C == C &amp;&amp; D &amp; E == E.</span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <span class="comment">// If we can prove that (B &amp; D) &amp; (C ^ E) == 0, that is, the bits of</span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <span class="comment">// C and E, which are shared by both the mask B and the mask D, don&#39;t</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <span class="comment">// contradict, then we can transform to</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <span class="comment">// -&gt; (icmp eq (A &amp; (B|D)), (C|E))</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="comment">// Currently, we only handle the case of B, C, D, and E being constant.</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <span class="comment">// we can&#39;t simply use C and E, because we might actually handle</span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <span class="comment">//   (icmp ne (A &amp; B), B) &amp; (icmp eq (A &amp; D), D)</span></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <span class="comment">// with B and D, having a single bit set</span></div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CCst = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <span class="keywordflow">if</span> (CCst == 0) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <span class="keywordflow">if</span> (LHSCC != NEWCC)</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;      CCst = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;( <a class="code" href="classllvm_1_1ConstantExpr.html#a9fe0b1e68f897c642cde7e54184f2f4e">ConstantExpr::getXor</a>(BCst, CCst) );</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *ECst = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(E);</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="keywordflow">if</span> (ECst == 0) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <span class="keywordflow">if</span> (RHSCC != NEWCC)</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      ECst = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;( <a class="code" href="classllvm_1_1ConstantExpr.html#a9fe0b1e68f897c642cde7e54184f2f4e">ConstantExpr::getXor</a>(DCst, ECst) );</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>* MCst = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;      <a class="code" href="classllvm_1_1ConstantExpr.html#ae6d2fbefb704650e3b01a0bbcdd43ffa">ConstantExpr::getAnd</a>(<a class="code" href="classllvm_1_1ConstantExpr.html#ae6d2fbefb704650e3b01a0bbcdd43ffa">ConstantExpr::getAnd</a>(BCst, DCst),</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                           <a class="code" href="classllvm_1_1ConstantExpr.html#a9fe0b1e68f897c642cde7e54184f2f4e">ConstantExpr::getXor</a>(CCst, ECst)) );</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="comment">// if there is a conflict we should actually return a false for the</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <span class="comment">// whole construct</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <span class="keywordflow">if</span> (!MCst-&gt;isZero())</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *newOr1 = Builder-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#a8f55dd4237be6778517ddd752ca8b76a">CreateOr</a>(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, D);</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *newOr2 = <a class="code" href="classllvm_1_1ConstantExpr.html#adc8a4e6a8e701e1924f0293da78badb6">ConstantExpr::getOr</a>(CCst, ECst);</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *newAnd = Builder-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#a197d5dd77cad4560a082900962a830aa">CreateAnd</a>(A, newOr1);</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <span class="keywordflow">return</span> Builder-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#a495d91fb3d2662acbffd0162c56153ed">CreateICmp</a>(NEWCC, newAnd, newOr2);</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  }</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;}</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;<span class="comment">/// FoldAndOfICmps - Fold (icmp)&amp;(icmp) if possible.</span></div><div class="line"><a name="l00784"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#ad0b2d60a2d46beeb0d4832785a5df78e">  784</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classllvm_1_1InstCombiner.html#ad0b2d60a2d46beeb0d4832785a5df78e">InstCombiner::FoldAndOfICmps</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *LHS, <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *RHS) {</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">ICmpInst::Predicate</a> LHSCC = LHS-&gt;<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), RHSCC = RHS-&gt;<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>();</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  <span class="comment">// (icmp1 A, B) &amp; (icmp2 A, B) --&gt; (icmp3 A, B)</span></div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a0da24b52fafe3ad4e683353ac401f7b9">PredicatesFoldable</a>(LHSCC, RHSCC)) {</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <span class="keywordflow">if</span> (LHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0) == RHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1) &amp;&amp;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        LHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1) == RHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0))</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;      LHS-&gt;<a class="code" href="classllvm_1_1ICmpInst.html#acbc778ccd1faf4e95963c9a980acc7a5">swapOperands</a>();</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <span class="keywordflow">if</span> (LHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0) == RHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0) &amp;&amp;</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        LHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1) == RHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1)) {</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = LHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), *Op1 = LHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a4a6621856674f376740a1ba6efd809e3">Code</a> = <a class="code" href="namespacellvm.html#a8236babf2e84275f5ce21b4936fb895e">getICmpCode</a>(LHS) &amp; <a class="code" href="namespacellvm.html#a8236babf2e84275f5ce21b4936fb895e">getICmpCode</a>(RHS);</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;      <span class="keywordtype">bool</span> isSigned = LHS-&gt;<a class="code" href="classllvm_1_1CmpInst.html#a13f7eef27b0ecfe146cbac49b3054c91">isSigned</a>() || RHS-&gt;<a class="code" href="classllvm_1_1CmpInst.html#a13f7eef27b0ecfe146cbac49b3054c91">isSigned</a>();</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="InstCombineAndOrXor_8cpp.html#a529ff4b10087991fd0e737adbf94b423">getNewICmpValue</a>(isSigned, Code, Op0, Op1, Builder);</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    }</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  }</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  <span class="comment">// handle (roughly):  (icmp eq (A &amp; B), C) &amp; (icmp eq (A &amp; D), E)</span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="InstCombineAndOrXor_8cpp.html#a907d394944052b35b29b6f6e0c923e08">foldLogOpOfMaskedICmps</a>(LHS, RHS, <span class="keyword">true</span>, Builder))</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <span class="keywordflow">return</span> V;</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;  <span class="comment">// This only handles icmp of constants: (icmp1 A, C1) &amp; (icmp2 B, C2).</span></div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Val = LHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), *Val2 = RHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *LHSCst = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(LHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *RHSCst = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(RHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  <span class="keywordflow">if</span> (LHSCst == 0 || RHSCst == 0) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  <span class="keywordflow">if</span> (LHSCst == RHSCst &amp;&amp; LHSCC == RHSCC) {</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <span class="comment">// (icmp ult A, C) &amp; (icmp ult B, C) --&gt; (icmp ult (A|B), C)</span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <span class="comment">// where C is a power of 2</span></div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <span class="keywordflow">if</span> (LHSCC == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a> &amp;&amp;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        LHSCst-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>().<a class="code" href="classllvm_1_1APInt.html#af3deb6522c4fe2043fe07af2ec90190c">isPowerOf2</a>()) {</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NewOr = Builder-&gt;CreateOr(Val, Val2);</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;      <span class="keywordflow">return</span> Builder-&gt;CreateICmp(LHSCC, NewOr, LHSCst);</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    }</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <span class="comment">// (icmp eq A, 0) &amp; (icmp eq B, 0) --&gt; (icmp eq (A|B), 0)</span></div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <span class="keywordflow">if</span> (LHSCC == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> &amp;&amp; LHSCst-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#ad4ea4748170f687710a54c919dde5625">isZero</a>()) {</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NewOr = Builder-&gt;CreateOr(Val, Val2);</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;      <span class="keywordflow">return</span> Builder-&gt;CreateICmp(LHSCC, NewOr, LHSCst);</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    }</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  }</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  <span class="comment">// (trunc x) == C1 &amp; (and x, CA) == C2 -&gt; (and x, CA|CMAX) == C1|C2</span></div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  <span class="comment">// where CMAX is the all ones value for the truncated type,</span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;  <span class="comment">// iff the lower bits of C2 and CA are zero.</span></div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  <span class="keywordflow">if</span> (LHSCC == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> &amp;&amp; LHSCC == RHSCC &amp;&amp;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;      LHS-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp; RHS-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()) {</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *V;</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *AndCst, *SmallCst = 0, *BigCst = 0;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <span class="comment">// (trunc x) == C1 &amp; (and x, CA) == C2</span></div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    <span class="comment">// (and x, CA) == C2 &amp; (trunc x) == C1</span></div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Val2, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5b844aada27c4c6fdb87146ac458c0d8">m_Trunc</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(V))) &amp;&amp;</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Val, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(V), <a class="code" href="namespacellvm_1_1PatternMatch.html#a34a92072122412c6020d4afb43725bf4">m_ConstantInt</a>(AndCst)))) {</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;      SmallCst = RHSCst;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      BigCst = LHSCst;</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Val, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5b844aada27c4c6fdb87146ac458c0d8">m_Trunc</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(V))) &amp;&amp;</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;               <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Val2, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(V), <a class="code" href="namespacellvm_1_1PatternMatch.html#a34a92072122412c6020d4afb43725bf4">m_ConstantInt</a>(AndCst)))) {</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;      SmallCst = LHSCst;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;      BigCst = RHSCst;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    }</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    <span class="keywordflow">if</span> (SmallCst &amp;&amp; BigCst) {</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;      <span class="keywordtype">unsigned</span> BigBitSize = BigCst-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a240475f85dea79ec272c578fdf89acf1">getType</a>()-&gt;<a class="code" href="classllvm_1_1IntegerType.html#a6f603ab84f6f7c79985036f58cca9d48">getBitWidth</a>();</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;      <span class="keywordtype">unsigned</span> SmallBitSize = SmallCst-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a240475f85dea79ec272c578fdf89acf1">getType</a>()-&gt;<a class="code" href="classllvm_1_1IntegerType.html#a6f603ab84f6f7c79985036f58cca9d48">getBitWidth</a>();</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;      <span class="comment">// Check that the low bits are zero.</span></div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> Low = <a class="code" href="classllvm_1_1APInt.html#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(BigBitSize, SmallBitSize);</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;      <span class="keywordflow">if</span> ((Low &amp; AndCst-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>()) == 0 &amp;&amp; (Low &amp; BigCst-&gt;getValue()) == 0) {</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewAnd = Builder-&gt;CreateAnd(V, Low | AndCst-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>());</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        <a class="code" href="classllvm_1_1APInt.html">APInt</a> <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> = SmallCst-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>().<a class="code" href="classllvm_1_1APInt.html#a6142fc5662411269a7ca0217f49f338c">zext</a>(BigBitSize) | BigCst-&gt;getValue();</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewVal = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(AndCst-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a240475f85dea79ec272c578fdf89acf1">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">getContext</a>(), <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        <span class="keywordflow">return</span> Builder-&gt;CreateICmp(LHSCC, NewAnd, NewVal);</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;      }</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    }</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  }</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  <span class="comment">// From here on, we only handle:</span></div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  <span class="comment">//    (icmp1 A, C1) &amp; (icmp2 A, C2) --&gt; something simpler.</span></div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  <span class="keywordflow">if</span> (Val != Val2) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  <span class="comment">// ICMP_[US][GL]E X, CST is folded to ICMP_[US][GL]T elsewhere.</span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  <span class="keywordflow">if</span> (LHSCC == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a> || LHSCC == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a> ||</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;      RHSCC == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a> || RHSCC == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a> ||</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;      LHSCC == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a> || LHSCC == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a2751d6136a2819749dcef65dc19a4246">ICmpInst::ICMP_SLE</a> ||</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;      RHSCC == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a> || RHSCC == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a2751d6136a2819749dcef65dc19a4246">ICmpInst::ICMP_SLE</a>)</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  <span class="comment">// Make a constant range that&#39;s the intersection of the two icmp ranges.</span></div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  <span class="comment">// If the intersection is empty, we know that the result is false.</span></div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;  <a class="code" href="classllvm_1_1ConstantRange.html">ConstantRange</a> LHSRange =</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <a class="code" href="classllvm_1_1ConstantRange.html#a1e2111f6405de8f2b3bd8fff249e2bb1">ConstantRange::makeICmpRegion</a>(LHSCC, LHSCst-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>());</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;  <a class="code" href="classllvm_1_1ConstantRange.html">ConstantRange</a> RHSRange =</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <a class="code" href="classllvm_1_1ConstantRange.html#a1e2111f6405de8f2b3bd8fff249e2bb1">ConstantRange::makeICmpRegion</a>(RHSCC, RHSCst-&gt;getValue());</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;  <span class="keywordflow">if</span> (LHSRange.<a class="code" href="classllvm_1_1ConstantRange.html#ae8d42948cae70a75a6485edc5f57e3cb">intersectWith</a>(RHSRange).<a class="code" href="classllvm_1_1ConstantRange.html#ae02fb0a19012613dcf2f9f24a1a3cf99">isEmptySet</a>())</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(<a class="code" href="classllvm_1_1CmpInst.html#a4b5e1f50cb0890ec60d8c61a61241170">CmpInst::makeCmpResultType</a>(LHS-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()), 0);</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  <span class="comment">// We can&#39;t fold (ugt x, C) &amp; (sgt x, C2).</span></div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#a0da24b52fafe3ad4e683353ac401f7b9">PredicatesFoldable</a>(LHSCC, RHSCC))</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  <span class="comment">// Ensure that the larger constant is on the RHS.</span></div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  <span class="keywordtype">bool</span> ShouldSwap;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CmpInst.html#a13f7eef27b0ecfe146cbac49b3054c91">CmpInst::isSigned</a>(LHSCC) ||</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;      (<a class="code" href="classllvm_1_1ICmpInst.html#a9adf718c253dc7c1c7e859265cd3fc3d">ICmpInst::isEquality</a>(LHSCC) &amp;&amp;</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;       <a class="code" href="classllvm_1_1CmpInst.html#a13f7eef27b0ecfe146cbac49b3054c91">CmpInst::isSigned</a>(RHSCC)))</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    ShouldSwap = LHSCst-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>().<a class="code" href="classllvm_1_1APInt.html#a0671bc479b3d788cc233dc1ce20ebcb5">sgt</a>(RHSCst-&gt;getValue());</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    ShouldSwap = LHSCst-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>().<a class="code" href="classllvm_1_1APInt.html#ad3d358e03c6228af2d19b2e67028886e">ugt</a>(RHSCst-&gt;getValue());</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  <span class="keywordflow">if</span> (ShouldSwap) {</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(LHS, RHS);</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(LHSCst, RHSCst);</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(LHSCC, RHSCC);</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  }</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  <span class="comment">// At this point, we know we have two icmp instructions</span></div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  <span class="comment">// comparing a value against two constants and and&#39;ing the result</span></div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  <span class="comment">// together.  Because of the above check, we know that we only have</span></div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  <span class="comment">// icmp eq, icmp ne, icmp [su]lt, and icmp [SU]gt here. We also know</span></div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  <span class="comment">// (from the icmp folding check above), that the two constants</span></div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;  <span class="comment">// are not equal and that the larger constant is on the RHS</span></div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;  assert(LHSCst != RHSCst &amp;&amp; <span class="stringliteral">&quot;Compares not folded above?&quot;</span>);</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  <span class="keywordflow">switch</span> (LHSCC) {</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;  <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unknown integer condition code!&quot;</span>);</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>:</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <span class="keywordflow">switch</span> (RHSCC) {</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unknown integer condition code!&quot;</span>);</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>:         <span class="comment">// (X == 13 &amp; X != 15) -&gt; X == 13</span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>:        <span class="comment">// (X == 13 &amp; X &lt;  15) -&gt; X == 13</span></div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>:        <span class="comment">// (X == 13 &amp; X &lt;  15) -&gt; X == 13</span></div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;      <span class="keywordflow">return</span> LHS;</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    }</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>:</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    <span class="keywordflow">switch</span> (RHSCC) {</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unknown integer condition code!&quot;</span>);</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>:</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;      <span class="keywordflow">if</span> (LHSCst == <a class="code" href="InstCombineAndOrXor_8cpp.html#ac45a6ef2ab6b7ff3d7512fa9b61dd941">SubOne</a>(RHSCst)) <span class="comment">// (X != 13 &amp; X u&lt; 14) -&gt; X &lt; 13</span></div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;        <span class="keywordflow">return</span> Builder-&gt;CreateICmpULT(Val, LHSCst);</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;      <span class="keywordflow">break</span>;                        <span class="comment">// (X != 13 &amp; X u&lt; 15) -&gt; no change</span></div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>:</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;      <span class="keywordflow">if</span> (LHSCst == <a class="code" href="InstCombineAndOrXor_8cpp.html#ac45a6ef2ab6b7ff3d7512fa9b61dd941">SubOne</a>(RHSCst)) <span class="comment">// (X != 13 &amp; X s&lt; 14) -&gt; X &lt; 13</span></div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        <span class="keywordflow">return</span> Builder-&gt;CreateICmpSLT(Val, LHSCst);</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;      <span class="keywordflow">break</span>;                        <span class="comment">// (X != 13 &amp; X s&lt; 15) -&gt; no change</span></div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>:         <span class="comment">// (X != 13 &amp; X == 15) -&gt; X == 15</span></div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>:        <span class="comment">// (X != 13 &amp; X u&gt; 15) -&gt; X u&gt; 15</span></div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>:        <span class="comment">// (X != 13 &amp; X s&gt; 15) -&gt; X s&gt; 15</span></div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;      <span class="keywordflow">return</span> RHS;</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>:</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;      <span class="comment">// Special case to get the ordering right when the values wrap around</span></div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;      <span class="comment">// zero.</span></div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;      <span class="keywordflow">if</span> (LHSCst-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>() == 0 &amp;&amp; RHSCst-&gt;getValue().<a class="code" href="classllvm_1_1APInt.html#a21260f8037e665d235ace5718cf68bc4">isAllOnesValue</a>())</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(LHSCst, RHSCst);</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;      <span class="keywordflow">if</span> (LHSCst == <a class="code" href="InstCombineAndOrXor_8cpp.html#ac45a6ef2ab6b7ff3d7512fa9b61dd941">SubOne</a>(RHSCst)){<span class="comment">// (X != 13 &amp; X != 14) -&gt; X-13 &gt;u 1</span></div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *AddCST = <a class="code" href="classllvm_1_1ConstantExpr.html#afa29f0cd072ab9b3a2630681ffe5760f">ConstantExpr::getNeg</a>(LHSCst);</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Add = Builder-&gt;CreateAdd(Val, AddCST, Val-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.off&quot;</span>);</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;        <span class="keywordflow">return</span> Builder-&gt;CreateICmpUGT(Add, <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(Add-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), 1),</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;                                      Val-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.cmp&quot;</span>);</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;      }</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      <span class="keywordflow">break</span>;                        <span class="comment">// (X != 13 &amp; X != 15) -&gt; no change</span></div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    }</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>:</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <span class="keywordflow">switch</span> (RHSCC) {</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unknown integer condition code!&quot;</span>);</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>:         <span class="comment">// (X u&lt; 13 &amp; X == 15) -&gt; false</span></div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>:        <span class="comment">// (X u&lt; 13 &amp; X u&gt; 15) -&gt; false</span></div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(<a class="code" href="classllvm_1_1CmpInst.html#a4b5e1f50cb0890ec60d8c61a61241170">CmpInst::makeCmpResultType</a>(LHS-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()), 0);</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>:        <span class="comment">// (X u&lt; 13 &amp; X s&gt; 15) -&gt; no change</span></div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>:         <span class="comment">// (X u&lt; 13 &amp; X != 15) -&gt; X u&lt; 13</span></div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>:        <span class="comment">// (X u&lt; 13 &amp; X u&lt; 15) -&gt; X u&lt; 13</span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;      <span class="keywordflow">return</span> LHS;</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>:        <span class="comment">// (X u&lt; 13 &amp; X s&lt; 15) -&gt; no change</span></div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    }</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>:</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    <span class="keywordflow">switch</span> (RHSCC) {</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unknown integer condition code!&quot;</span>);</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>:        <span class="comment">// (X s&lt; 13 &amp; X u&gt; 15) -&gt; no change</span></div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>:         <span class="comment">// (X s&lt; 13 &amp; X != 15) -&gt; X &lt; 13</span></div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>:        <span class="comment">// (X s&lt; 13 &amp; X s&lt; 15) -&gt; X &lt; 13</span></div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;      <span class="keywordflow">return</span> LHS;</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>:        <span class="comment">// (X s&lt; 13 &amp; X u&lt; 15) -&gt; no change</span></div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    }</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>:</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <span class="keywordflow">switch</span> (RHSCC) {</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unknown integer condition code!&quot;</span>);</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>:         <span class="comment">// (X u&gt; 13 &amp; X == 15) -&gt; X == 15</span></div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>:        <span class="comment">// (X u&gt; 13 &amp; X u&gt; 15) -&gt; X u&gt; 15</span></div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;      <span class="keywordflow">return</span> RHS;</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>:        <span class="comment">// (X u&gt; 13 &amp; X s&gt; 15) -&gt; no change</span></div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>:</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;      <span class="keywordflow">if</span> (RHSCst == <a class="code" href="InstCombineAndOrXor_8cpp.html#a7f01f70b8d1862350825b532872d644f">AddOne</a>(LHSCst)) <span class="comment">// (X u&gt; 13 &amp; X != 14) -&gt; X u&gt; 14</span></div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;        <span class="keywordflow">return</span> Builder-&gt;CreateICmp(LHSCC, Val, RHSCst);</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;      <span class="keywordflow">break</span>;                        <span class="comment">// (X u&gt; 13 &amp; X != 15) -&gt; no change</span></div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>:        <span class="comment">// (X u&gt; 13 &amp; X u&lt; 15) -&gt; (X-14) &lt;u 1</span></div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;      <span class="keywordflow">return</span> InsertRangeTest(Val, <a class="code" href="InstCombineAndOrXor_8cpp.html#a7f01f70b8d1862350825b532872d644f">AddOne</a>(LHSCst), RHSCst, <span class="keyword">false</span>, <span class="keyword">true</span>);</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>:        <span class="comment">// (X u&gt; 13 &amp; X s&lt; 15) -&gt; no change</span></div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    }</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>:</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    <span class="keywordflow">switch</span> (RHSCC) {</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unknown integer condition code!&quot;</span>);</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>:         <span class="comment">// (X s&gt; 13 &amp; X == 15) -&gt; X == 15</span></div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>:        <span class="comment">// (X s&gt; 13 &amp; X s&gt; 15) -&gt; X s&gt; 15</span></div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;      <span class="keywordflow">return</span> RHS;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>:        <span class="comment">// (X s&gt; 13 &amp; X u&gt; 15) -&gt; no change</span></div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>:</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;      <span class="keywordflow">if</span> (RHSCst == <a class="code" href="InstCombineAndOrXor_8cpp.html#a7f01f70b8d1862350825b532872d644f">AddOne</a>(LHSCst)) <span class="comment">// (X s&gt; 13 &amp; X != 14) -&gt; X s&gt; 14</span></div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;        <span class="keywordflow">return</span> Builder-&gt;CreateICmp(LHSCC, Val, RHSCst);</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;      <span class="keywordflow">break</span>;                        <span class="comment">// (X s&gt; 13 &amp; X != 15) -&gt; no change</span></div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>:        <span class="comment">// (X s&gt; 13 &amp; X s&lt; 15) -&gt; (X-14) s&lt; 1</span></div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;      <span class="keywordflow">return</span> InsertRangeTest(Val, <a class="code" href="InstCombineAndOrXor_8cpp.html#a7f01f70b8d1862350825b532872d644f">AddOne</a>(LHSCst), RHSCst, <span class="keyword">true</span>, <span class="keyword">true</span>);</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>:        <span class="comment">// (X s&gt; 13 &amp; X u&lt; 15) -&gt; no change</span></div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    }</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;  }</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;}</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;<span class="comment">/// FoldAndOfFCmps - Optimize (fcmp)&amp;(fcmp).  NOTE: Unlike the rest of</span></div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;<span class="comment">/// instcombine, this returns a Value which should already be inserted into the</span></div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;<span class="comment">/// function.</span></div><div class="line"><a name="l01020"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#a60331bf600f121b59b88e96130e469f9"> 1020</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classllvm_1_1InstCombiner.html#a60331bf600f121b59b88e96130e469f9">InstCombiner::FoldAndOfFCmps</a>(<a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a> *LHS, <a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a> *RHS) {</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;  <span class="keywordflow">if</span> (LHS-&gt;<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa3213b645e029aba8bb1b85213607d5e">FCmpInst::FCMP_ORD</a> &amp;&amp;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;      RHS-&gt;<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa3213b645e029aba8bb1b85213607d5e">FCmpInst::FCMP_ORD</a>) {</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    <span class="keywordflow">if</span> (LHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() != RHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    <span class="comment">// (fcmp ord x, c) &amp; (fcmp ord y, c)  -&gt; (fcmp ord x, y)</span></div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a> *LHSC = dyn_cast&lt;ConstantFP&gt;(LHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1)))</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a> *RHSC = dyn_cast&lt;ConstantFP&gt;(RHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1))) {</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        <span class="comment">// If either of the constants are nans, then the whole thing returns</span></div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        <span class="comment">// false.</span></div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;        <span class="keywordflow">if</span> (LHSC-&gt;getValueAPF().isNaN() || RHSC-&gt;getValueAPF().isNaN())</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;          <span class="keywordflow">return</span> Builder-&gt;getFalse();</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;        <span class="keywordflow">return</span> Builder-&gt;CreateFCmpORD(LHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), RHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0));</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;      }</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <span class="comment">// Handle vector zeros.  This occurs because the canonical form of</span></div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <span class="comment">// &quot;fcmp ord x,x&quot; is &quot;fcmp ord x, 0&quot;.</span></div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <span class="keywordflow">if</span> (isa&lt;ConstantAggregateZero&gt;(LHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1)) &amp;&amp;</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;        isa&lt;ConstantAggregateZero&gt;(RHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1)))</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;      <span class="keywordflow">return</span> Builder-&gt;CreateFCmpORD(LHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), RHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0));</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;  }</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0LHS = LHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), *Op0RHS = LHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op1LHS = RHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), *Op1RHS = RHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">FCmpInst::Predicate</a> Op0CC = LHS-&gt;<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), Op1CC = RHS-&gt;<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>();</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;  <span class="keywordflow">if</span> (Op0LHS == Op1RHS &amp;&amp; Op0RHS == Op1LHS) {</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    <span class="comment">// Swap RHS operands to match LHS.</span></div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    Op1CC = <a class="code" href="classllvm_1_1CmpInst.html#ab5d3f9900a0284e85ee7a1520a4eeb60">FCmpInst::getSwappedPredicate</a>(Op1CC);</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Op1LHS, Op1RHS);</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;  }</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;  <span class="keywordflow">if</span> (Op0LHS == Op1LHS &amp;&amp; Op0RHS == Op1RHS) {</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <span class="comment">// Simplify (fcmp cc0 x, y) &amp; (fcmp cc1 x, y).</span></div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <span class="keywordflow">if</span> (Op0CC == Op1CC)</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;      <span class="keywordflow">return</span> Builder-&gt;CreateFCmp((<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">FCmpInst::Predicate</a>)Op0CC, Op0LHS, Op0RHS);</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    <span class="keywordflow">if</span> (Op0CC == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ae9c013750fff3023001d7e3af8df2d6d">FCmpInst::FCMP_FALSE</a> || Op1CC == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ae9c013750fff3023001d7e3af8df2d6d">FCmpInst::FCMP_FALSE</a>)</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(<a class="code" href="classllvm_1_1CmpInst.html#a4b5e1f50cb0890ec60d8c61a61241170">CmpInst::makeCmpResultType</a>(LHS-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()), 0);</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    <span class="keywordflow">if</span> (Op0CC == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a0a33c71e3c5e8f128ca47539a85962f5">FCmpInst::FCMP_TRUE</a>)</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;      <span class="keywordflow">return</span> RHS;</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    <span class="keywordflow">if</span> (Op1CC == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a0a33c71e3c5e8f128ca47539a85962f5">FCmpInst::FCMP_TRUE</a>)</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;      <span class="keywordflow">return</span> LHS;</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    <span class="keywordtype">bool</span> Op0Ordered;</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <span class="keywordtype">bool</span> Op1Ordered;</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <span class="keywordtype">unsigned</span> Op0Pred = <a class="code" href="InstCombineAndOrXor_8cpp.html#a32ead1eb9f9f19667b0f79d01214612b">getFCmpCode</a>(Op0CC, Op0Ordered);</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    <span class="keywordtype">unsigned</span> Op1Pred = <a class="code" href="InstCombineAndOrXor_8cpp.html#a32ead1eb9f9f19667b0f79d01214612b">getFCmpCode</a>(Op1CC, Op1Ordered);</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    <span class="comment">// uno &amp;&amp; ord -&gt; false</span></div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    <span class="keywordflow">if</span> (Op0Pred == 0 &amp;&amp; Op1Pred == 0 &amp;&amp; Op0Ordered != Op1Ordered)</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(<a class="code" href="classllvm_1_1CmpInst.html#a4b5e1f50cb0890ec60d8c61a61241170">CmpInst::makeCmpResultType</a>(LHS-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()), 0);</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    <span class="keywordflow">if</span> (Op1Pred == 0) {</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;      <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(LHS, RHS);</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;      <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Op0Pred, Op1Pred);</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;      <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Op0Ordered, Op1Ordered);</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    }</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    <span class="keywordflow">if</span> (Op0Pred == 0) {</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;      <span class="comment">// uno &amp;&amp; ueq -&gt; uno &amp;&amp; (uno || eq) -&gt; uno</span></div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;      <span class="comment">// ord &amp;&amp; olt -&gt; ord &amp;&amp; (ord &amp;&amp; lt) -&gt; olt</span></div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;      <span class="keywordflow">if</span> (!Op0Ordered &amp;&amp; (Op0Ordered == Op1Ordered))</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;        <span class="keywordflow">return</span> LHS;</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;      <span class="keywordflow">if</span> (Op0Ordered &amp;&amp; (Op0Ordered == Op1Ordered))</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;        <span class="keywordflow">return</span> RHS;</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;      <span class="comment">// uno &amp;&amp; oeq -&gt; uno &amp;&amp; (ord &amp;&amp; eq) -&gt; false</span></div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;      <span class="keywordflow">if</span> (!Op0Ordered)</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(<a class="code" href="classllvm_1_1CmpInst.html#a4b5e1f50cb0890ec60d8c61a61241170">CmpInst::makeCmpResultType</a>(LHS-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()), 0);</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;      <span class="comment">// ord &amp;&amp; ueq -&gt; ord &amp;&amp; (uno || eq) -&gt; oeq</span></div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="InstCombineAndOrXor_8cpp.html#a7627ec3ea1e8ae5e84826e213b917abc">getFCmpValue</a>(<span class="keyword">true</span>, Op1Pred, Op0LHS, Op0RHS, Builder);</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    }</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;  }</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;}</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;</div><div class="line"><a name="l01098"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#a9f6faadfd61713844a89e94d20129cae"> 1098</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombiner.html#a9f6faadfd61713844a89e94d20129cae">InstCombiner::visitAnd</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;I) {</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;  <span class="keywordtype">bool</span> Changed = SimplifyAssociativeOrCommutative(I);</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), *Op1 = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#ac53bb620387e76f170ba633e4e6d813a">SimplifyAndInst</a>(Op0, Op1, TD))</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    <span class="keywordflow">return</span> ReplaceInstUsesWith(I, V);</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;  <span class="comment">// (A|B)&amp;(A|C) -&gt; A|(B&amp;C) etc</span></div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = SimplifyUsingDistributiveLaws(I))</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    <span class="keywordflow">return</span> ReplaceInstUsesWith(I, V);</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;  <span class="comment">// See if we can simplify any instructions used by the instruction whose sole</span></div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  <span class="comment">// purpose is to compute bits we don&#39;t care about.</span></div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  <span class="keywordflow">if</span> (SimplifyDemandedInstructionBits(I))</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *AndRHS = dyn_cast&lt;ConstantInt&gt;(Op1)) {</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;AndRHSMask = AndRHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>();</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    <span class="comment">// Optimize a variety of ((val OP C1) &amp; C2) combinations...</span></div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *Op0I = dyn_cast&lt;BinaryOperator&gt;(Op0)) {</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0LHS = Op0I-&gt;getOperand(0);</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0RHS = Op0I-&gt;getOperand(1);</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;      <span class="keywordflow">switch</span> (Op0I-&gt;getOpcode()) {</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;      <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1APIntOps.html#afc7c4d88d09cba0c5e920f8a3a3ace55">Instruction::Xor</a>:</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">Instruction::Or</a>: {</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;        <span class="comment">// If the mask is only needed on one incoming arm, push it up.</span></div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;        <span class="keywordflow">if</span> (!Op0I-&gt;hasOneUse()) <span class="keywordflow">break</span>;</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;        <a class="code" href="classllvm_1_1APInt.html">APInt</a> NotAndRHS(~AndRHSMask);</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a8bc4c3e77e6f3d6c54b8b4504393dfa7">MaskedValueIsZero</a>(Op0LHS, NotAndRHS)) {</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;          <span class="comment">// Not masking anything out for the LHS, move to RHS.</span></div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *NewRHS = Builder-&gt;CreateAnd(Op0RHS, AndRHS,</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;                                             Op0RHS-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.masked&quot;</span>);</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a4a4628e91a9c6a339fa61105614fac76">BinaryOperator::Create</a>(Op0I-&gt;getOpcode(), Op0LHS, NewRHS);</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;        }</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;        <span class="keywordflow">if</span> (!isa&lt;Constant&gt;(Op0RHS) &amp;&amp;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;            <a class="code" href="namespacellvm.html#a8bc4c3e77e6f3d6c54b8b4504393dfa7">MaskedValueIsZero</a>(Op0RHS, NotAndRHS)) {</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;          <span class="comment">// Not masking anything out for the RHS, move to LHS.</span></div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *NewLHS = Builder-&gt;CreateAnd(Op0LHS, AndRHS,</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;                                             Op0LHS-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.masked&quot;</span>);</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a4a4628e91a9c6a339fa61105614fac76">BinaryOperator::Create</a>(Op0I-&gt;getOpcode(), NewLHS, Op0RHS);</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;        }</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;      }</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;      <span class="keywordflow">case</span> Instruction::Add:</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;        <span class="comment">// ((A &amp; N) + B) &amp; AndRHS -&gt; (A + B) &amp; AndRHS iff N&amp;AndRHS == AndRHS.</span></div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;        <span class="comment">// ((A | N) + B) &amp; AndRHS -&gt; (A + B) &amp; AndRHS iff N&amp;AndRHS == 0</span></div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;        <span class="comment">// ((A ^ N) + B) &amp; AndRHS -&gt; (A + B) &amp; AndRHS iff N&amp;AndRHS == 0</span></div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = FoldLogicalPlusAnd(Op0LHS, Op0RHS, AndRHS, <span class="keyword">false</span>, I))</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;          <span class="keywordflow">return</span> BinaryOperator::CreateAnd(V, AndRHS);</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = FoldLogicalPlusAnd(Op0RHS, Op0LHS, AndRHS, <span class="keyword">false</span>, I))</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;          <span class="keywordflow">return</span> BinaryOperator::CreateAnd(V, AndRHS);  <span class="comment">// Add commutes</span></div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;      <span class="keywordflow">case</span> Instruction::Sub:</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;        <span class="comment">// ((A &amp; N) - B) &amp; AndRHS -&gt; (A - B) &amp; AndRHS iff N&amp;AndRHS == AndRHS.</span></div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;        <span class="comment">// ((A | N) - B) &amp; AndRHS -&gt; (A - B) &amp; AndRHS iff N&amp;AndRHS == 0</span></div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;        <span class="comment">// ((A ^ N) - B) &amp; AndRHS -&gt; (A - B) &amp; AndRHS iff N&amp;AndRHS == 0</span></div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = FoldLogicalPlusAnd(Op0LHS, Op0RHS, AndRHS, <span class="keyword">true</span>, I))</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;          <span class="keywordflow">return</span> BinaryOperator::CreateAnd(V, AndRHS);</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;        <span class="comment">// (A - N) &amp; AndRHS -&gt; -N &amp; AndRHS iff A&amp;AndRHS==0 and AndRHS</span></div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;        <span class="comment">// has 1&#39;s for all bits that the subtraction with A might affect.</span></div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;        <span class="keywordflow">if</span> (Op0I-&gt;hasOneUse() &amp;&amp; !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0LHS, <a class="code" href="namespacellvm_1_1PatternMatch.html#ab3b5beca3a0dedd21adac813123a2ae6">m_Zero</a>())) {</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;          uint32_t BitWidth = AndRHSMask.<a class="code" href="classllvm_1_1APInt.html#ad081689e23a8f5dea78dedd623d6a8f8">getBitWidth</a>();</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;          uint32_t Zeros = AndRHSMask.<a class="code" href="classllvm_1_1APInt.html#af0336ea4c7f7f56354b2ca7c8859c1f9">countLeadingZeros</a>();</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;          <a class="code" href="classllvm_1_1APInt.html">APInt</a> Mask = <a class="code" href="classllvm_1_1APInt.html#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(BitWidth, BitWidth - Zeros);</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a8bc4c3e77e6f3d6c54b8b4504393dfa7">MaskedValueIsZero</a>(Op0LHS, Mask)) {</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;            <a class="code" href="classllvm_1_1Value.html">Value</a> *NewNeg = Builder-&gt;CreateNeg(Op0RHS);</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;            <span class="keywordflow">return</span> BinaryOperator::CreateAnd(NewNeg, AndRHS);</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;          }</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;        }</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;      <span class="keywordflow">case</span> Instruction::Shl:</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;      <span class="keywordflow">case</span> Instruction::LShr:</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;        <span class="comment">// (1 &lt;&lt; x) &amp; 1 --&gt; zext(x == 0)</span></div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;        <span class="comment">// (1 &gt;&gt; x) &amp; 1 --&gt; zext(x == 0)</span></div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;        <span class="keywordflow">if</span> (AndRHSMask == 1 &amp;&amp; Op0LHS == AndRHS) {</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *NewICmp =</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;            Builder-&gt;CreateICmpEQ(Op0RHS, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ZExtInst.html">ZExtInst</a>(NewICmp, I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;        }</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;      }</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *Op0CI = dyn_cast&lt;ConstantInt&gt;(Op0I-&gt;getOperand(1)))</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res = OptAndOp(Op0I, Op0CI, AndRHS, I))</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;          <span class="keywordflow">return</span> Res;</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    }</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    <span class="comment">// If this is an integer truncation, and if the source is an &#39;and&#39; with</span></div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    <span class="comment">// immediate, transform it.  This frequently occurs for bitfield accesses.</span></div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    {</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">X</a> = 0; <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *YC = 0;</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5b844aada27c4c6fdb87146ac458c0d8">m_Trunc</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(X), <a class="code" href="namespacellvm_1_1PatternMatch.html#a34a92072122412c6020d4afb43725bf4">m_ConstantInt</a>(YC))))) {</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;        <span class="comment">// Change: and (trunc (and X, YC) to T), C2</span></div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;        <span class="comment">// into  : and (trunc X to T), trunc(YC) &amp; C2</span></div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;        <span class="comment">// This will fold the two constants together, which may allow</span></div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;        <span class="comment">// other simplifications.</span></div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewCast = Builder-&gt;CreateTrunc(X, I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), <span class="stringliteral">&quot;and.shrunk&quot;</span>);</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *C3 = <a class="code" href="classllvm_1_1ConstantExpr.html#aca5cab6b8d2be24d0c857cc4a831feec">ConstantExpr::getTrunc</a>(YC, I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;        C3 = <a class="code" href="classllvm_1_1ConstantExpr.html#ae6d2fbefb704650e3b01a0bbcdd43ffa">ConstantExpr::getAnd</a>(C3, AndRHS);</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;        <span class="keywordflow">return</span> BinaryOperator::CreateAnd(NewCast, C3);</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;      }</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    }</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    <span class="comment">// Try to fold constant and into select arguments.</span></div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *SI = dyn_cast&lt;SelectInst&gt;(Op0))</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *R = FoldOpIntoSelect(I, SI))</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;        <span class="keywordflow">return</span> R;</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    <span class="keywordflow">if</span> (isa&lt;PHINode&gt;(Op0))</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2a6c4724226f9ccea96d35fd4c131af8">NV</a> = FoldOpIntoPhi(I))</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2a6c4724226f9ccea96d35fd4c131af8">NV</a>;</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;  }</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;  <span class="comment">// (~A &amp; ~B) == (~(A | B)) - De Morgan&#39;s Law</span></div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Op0NotVal = <a class="code" href="InstCombineAndOrXor_8cpp.html#aa62fbad44784b52824ea165a4695299f">dyn_castNotVal</a>(Op0))</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Op1NotVal = <a class="code" href="InstCombineAndOrXor_8cpp.html#aa62fbad44784b52824ea165a4695299f">dyn_castNotVal</a>(Op1))</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;      <span class="keywordflow">if</span> (Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp; Op1-&gt;hasOneUse()) {</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">Or</a> = Builder-&gt;CreateOr(Op0NotVal, Op1NotVal,</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;                                      I.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.demorgan&quot;</span>);</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a0ad1d1442a12b21931b730201f58ab5e">BinaryOperator::CreateNot</a>(Or);</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;      }</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;  {</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a> = 0, *<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> = 0, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = 0, *D = 0;</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    <span class="comment">// (A|B) &amp; ~(A&amp;B) -&gt; A^B</span></div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>))) &amp;&amp;</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a4cfd328368353696e64a4d1b15a7cbfa">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(D)))) &amp;&amp;</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;        ((A == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &amp;&amp; <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> == D) || (A == D &amp;&amp; <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateXor(A, <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>);</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    <span class="comment">// ~(A&amp;B) &amp; (A|B) -&gt; A^B</span></div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>))) &amp;&amp;</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a4cfd328368353696e64a4d1b15a7cbfa">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(D)))) &amp;&amp;</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;        ((A == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &amp;&amp; <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> == D) || (A == D &amp;&amp; <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateXor(A, <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>);</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    <span class="comment">// A&amp;(A^B) =&gt; A &amp; ~B</span></div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    {</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *tmpOp0 = Op0;</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *tmpOp1 = Op1;</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;      <span class="keywordflow">if</span> (Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp;</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;          <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>)))) {</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;        <span class="keywordflow">if</span> (A == Op1 || <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> == Op1 ) {</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;          tmpOp1 = Op0;</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;          tmpOp0 = Op1;</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;          <span class="comment">// Simplify below</span></div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;        }</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;      }</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;      <span class="keywordflow">if</span> (tmpOp1-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;          <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(tmpOp1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>)))) {</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> == tmpOp0) {</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;          <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(A, <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>);</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;        }</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;        <span class="comment">// Notice that the patten (A&amp;(~B)) is actually (A&amp;(-1^B)), so if</span></div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;        <span class="comment">// A is originally -1 (or a vector of -1 and undefs), then we enter</span></div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;        <span class="comment">// an endless loop. By checking that A is non-constant we ensure that</span></div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;        <span class="comment">// we will never get to the loop.</span></div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;        <span class="keywordflow">if</span> (A == tmpOp0 &amp;&amp; !isa&lt;Constant&gt;(A)) <span class="comment">// A&amp;(A^B) -&gt; A &amp; ~B</span></div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;          <span class="keywordflow">return</span> BinaryOperator::CreateAnd(A, Builder-&gt;CreateNot(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>));</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;      }</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    }</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    <span class="comment">// (A&amp;((~A)|B)) -&gt; A&amp;B</span></div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a4cfd328368353696e64a4d1b15a7cbfa">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op1)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A))) ||</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a4cfd328368353696e64a4d1b15a7cbfa">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op1)))))</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateAnd(A, Op1);</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a4cfd328368353696e64a4d1b15a7cbfa">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op0)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A))) ||</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a4cfd328368353696e64a4d1b15a7cbfa">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op0)))))</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateAnd(A, Op0);</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;  }</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *RHS = dyn_cast&lt;ICmpInst&gt;(Op1))</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *LHS = dyn_cast&lt;ICmpInst&gt;(Op0))</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Res = FoldAndOfICmps(LHS, RHS))</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;        <span class="keywordflow">return</span> ReplaceInstUsesWith(I, Res);</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;  <span class="comment">// If and&#39;ing two fcmp, try combine them into one.</span></div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a> *LHS = dyn_cast&lt;FCmpInst&gt;(I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)))</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a> *RHS = dyn_cast&lt;FCmpInst&gt;(I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1)))</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Res = FoldAndOfFCmps(LHS, RHS))</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;        <span class="keywordflow">return</span> ReplaceInstUsesWith(I, Res);</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;  <span class="comment">// fold (and (cast A), (cast B)) -&gt; (cast (and A, B))</span></div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CastInst.html">CastInst</a> *Op0C = dyn_cast&lt;CastInst&gt;(Op0))</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CastInst.html">CastInst</a> *Op1C = dyn_cast&lt;CastInst&gt;(Op1)) {</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *SrcTy = Op0C-&gt;getOperand(0)-&gt;getType();</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;      <span class="keywordflow">if</span> (Op0C-&gt;getOpcode() == Op1C-&gt;getOpcode() &amp;&amp; <span class="comment">// same cast kind ?</span></div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;          SrcTy == Op1C-&gt;getOperand(0)-&gt;getType() &amp;&amp;</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;          SrcTy-&gt;<a class="code" href="classllvm_1_1Type.html#a3bd5e6108cd2c28c267d70e631a7b11a">isIntOrIntVectorTy</a>()) {</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0COp = Op0C-&gt;getOperand(0), *Op1COp = Op1C-&gt;getOperand(0);</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;        <span class="comment">// Only do this if the casts both really cause code to be generated.</span></div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;        <span class="keywordflow">if</span> (ShouldOptimizeCast(Op0C-&gt;getOpcode(), Op0COp, I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()) &amp;&amp;</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;            ShouldOptimizeCast(Op1C-&gt;getOpcode(), Op1COp, I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())) {</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *NewOp = Builder-&gt;CreateAnd(Op0COp, Op1COp, I.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>());</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#a0f7dea9550778374905e12da6d6ba8a8">CastInst::Create</a>(Op0C-&gt;getOpcode(), NewOp, I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;        }</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;        <span class="comment">// If this is and(cast(icmp), cast(icmp)), try to fold this even if the</span></div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;        <span class="comment">// cast is otherwise not optimizable.  This happens for vector sexts.</span></div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *RHS = dyn_cast&lt;ICmpInst&gt;(Op1COp))</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *LHS = dyn_cast&lt;ICmpInst&gt;(Op0COp))</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Res = FoldAndOfICmps(LHS, RHS))</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;              <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#a0f7dea9550778374905e12da6d6ba8a8">CastInst::Create</a>(Op0C-&gt;getOpcode(), Res, I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;        <span class="comment">// If this is and(cast(fcmp), cast(fcmp)), try to fold this even if the</span></div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;        <span class="comment">// cast is otherwise not optimizable.  This happens for vector sexts.</span></div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a> *RHS = dyn_cast&lt;FCmpInst&gt;(Op1COp))</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a> *LHS = dyn_cast&lt;FCmpInst&gt;(Op0COp))</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Res = FoldAndOfFCmps(LHS, RHS))</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;              <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#a0f7dea9550778374905e12da6d6ba8a8">CastInst::Create</a>(Op0C-&gt;getOpcode(), Res, I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;      }</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    }</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;  <span class="comment">// (X &gt;&gt; Z) &amp; (Y &gt;&gt; Z)  -&gt; (X&amp;Y) &gt;&gt; Z  for all shifts.</span></div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *SI1 = dyn_cast&lt;BinaryOperator&gt;(Op1)) {</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *SI0 = dyn_cast&lt;BinaryOperator&gt;(Op0))</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;      <span class="keywordflow">if</span> (SI0-&gt;isShift() &amp;&amp; SI0-&gt;getOpcode() == SI1-&gt;getOpcode() &amp;&amp;</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;          SI0-&gt;getOperand(1) == SI1-&gt;getOperand(1) &amp;&amp;</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;          (SI0-&gt;hasOneUse() || SI1-&gt;hasOneUse())) {</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewOp =</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;          Builder-&gt;CreateAnd(SI0-&gt;getOperand(0), SI1-&gt;getOperand(0),</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;                             SI0-&gt;getName());</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a4a4628e91a9c6a339fa61105614fac76">BinaryOperator::Create</a>(SI1-&gt;getOpcode(), NewOp,</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;                                      SI1-&gt;getOperand(1));</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;      }</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;  }</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;  {</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">X</a> = 0;</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    <span class="keywordtype">bool</span> OpsSwapped = <span class="keyword">false</span>;</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    <span class="comment">// Canonicalize SExt or Not to the LHS</span></div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>())) ||</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a4cfd328368353696e64a4d1b15a7cbfa">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>()))) {</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;      <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Op0, Op1);</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;      OpsSwapped = <span class="keyword">true</span>;</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;    }</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;    <span class="comment">// Fold (and (sext bool to A), B) --&gt; (select bool, B, 0)</span></div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(X))) &amp;&amp;</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;        X-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a8eafa71cf399da8f21b2af5549f3f9e7">getScalarType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>(1)) {</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Zero = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Op1-&gt;getType());</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#a8bce457e977f23507c48c9dfd7052990">SelectInst::Create</a>(X, Op1, Zero);</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    }</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    <span class="comment">// Fold (and ~(sext bool to A), B) --&gt; (select bool, 0, B)</span></div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a4cfd328368353696e64a4d1b15a7cbfa">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(X)))) &amp;&amp;</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;        X-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a8eafa71cf399da8f21b2af5549f3f9e7">getScalarType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>(1)) {</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Zero = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#a8bce457e977f23507c48c9dfd7052990">SelectInst::Create</a>(X, Zero, Op1);</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    }</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    <span class="keywordflow">if</span> (OpsSwapped)</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;      <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Op0, Op1);</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;  }</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;  <span class="keywordflow">return</span> Changed ? &amp;I : 0;</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;}</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;<span class="comment">/// CollectBSwapParts - Analyze the specified subexpression and see if it is</span></div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;<span class="comment">/// capable of providing pieces of a bswap.  The subexpression provides pieces</span></div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;<span class="comment">/// of a bswap if it is proven that each of the non-zero bytes in the output of</span></div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;<span class="comment">/// the expression came from the corresponding &quot;byte swapped&quot; byte in some other</span></div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;<span class="comment">/// value.  For example, if the current subexpression is &quot;(shl i32 %X, 24)&quot; then</span></div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;<span class="comment">/// we know that the expression deposits the low byte of %X into the high byte</span></div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;<span class="comment">/// of the bswap result and that all other bytes are zero.  This expression is</span></div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;<span class="comment">/// accepted, the high byte of ByteValues is set to X to indicate a correct</span></div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;<span class="comment">/// match.</span></div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;<span class="comment">/// This function returns true if the match was unsuccessful and false if so.</span></div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;<span class="comment">/// On entry to the function the &quot;OverallLeftShift&quot; is a signed integer value</span></div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;<span class="comment">/// indicating the number of bytes that the subexpression is later shifted.  For</span></div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;<span class="comment">/// example, if the expression is later right shifted by 16 bits, the</span></div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;<span class="comment">/// OverallLeftShift value would be -2 on entry.  This is used to specify which</span></div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;<span class="comment">/// byte of ByteValues is actually being set.</span></div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;<span class="comment">/// Similarly, ByteMask is a bitmask where a bit is clear if its corresponding</span></div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;<span class="comment">/// byte is masked to zero by a user.  For example, in (X &amp; 255), X will be</span></div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;<span class="comment">/// processed with a bytemask of 1.  Because bytemask is 32-bits, this limits</span></div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;<span class="comment">/// this function to working on up to 32-byte (256 bit) values.  ByteMask is</span></div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;<span class="comment">/// always in the local (OverallLeftShift) coordinate space.</span></div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01390"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#aea6495ab03039b1ee2bfecf5e1d5ae3c"> 1390</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineAndOrXor_8cpp.html#aea6495ab03039b1ee2bfecf5e1d5ae3c">CollectBSwapParts</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <span class="keywordtype">int</span> OverallLeftShift, uint32_t ByteMask,</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;                              <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Value *&gt;</a> &amp;ByteValues) {</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I = dyn_cast&lt;Instruction&gt;(V)) {</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    <span class="comment">// If this is an or instruction, it may be an inner node of the bswap.</span></div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    <span class="keywordflow">if</span> (I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>() == <a class="code" href="namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">Instruction::Or</a>) {</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="InstCombineAndOrXor_8cpp.html#aea6495ab03039b1ee2bfecf5e1d5ae3c">CollectBSwapParts</a>(I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), OverallLeftShift, ByteMask,</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;                               ByteValues) ||</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;             <a class="code" href="InstCombineAndOrXor_8cpp.html#aea6495ab03039b1ee2bfecf5e1d5ae3c">CollectBSwapParts</a>(I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1), OverallLeftShift, ByteMask,</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;                               ByteValues);</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    }</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    <span class="comment">// If this is a logical shift by a constant multiple of 8, recurse with</span></div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    <span class="comment">// OverallLeftShift and ByteMask adjusted.</span></div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    <span class="keywordflow">if</span> (I-&gt;<a class="code" href="classllvm_1_1Instruction.html#ad933e66b8bbd406e84d1dbbf094d4cde">isLogicalShift</a>() &amp;&amp; isa&lt;ConstantInt&gt;(I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1))) {</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;      <span class="keywordtype">unsigned</span> ShAmt =</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;        cast&lt;ConstantInt&gt;(I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1))-&gt;getLimitedValue(~0U);</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;      <span class="comment">// Ensure the shift amount is defined and of a byte value.</span></div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;      <span class="keywordflow">if</span> ((ShAmt &amp; 7) || (ShAmt &gt; 8*ByteValues.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>()))</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;      <span class="keywordtype">unsigned</span> ByteShift = ShAmt &gt;&gt; 3;</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;      <span class="keywordflow">if</span> (I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>() == Instruction::Shl) {</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;        <span class="comment">// X &lt;&lt; 2 -&gt; collect(X, +2)</span></div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;        OverallLeftShift += ByteShift;</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;        ByteMask &gt;&gt;= ByteShift;</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;        <span class="comment">// X &gt;&gt;u 2 -&gt; collect(X, -2)</span></div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;        OverallLeftShift -= ByteShift;</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;        ByteMask &lt;&lt;= ByteShift;</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;        ByteMask &amp;= (~0U &gt;&gt; (32-ByteValues.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>()));</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;      }</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;      <span class="keywordflow">if</span> (OverallLeftShift &gt;= (<span class="keywordtype">int</span>)ByteValues.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>()) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;      <span class="keywordflow">if</span> (OverallLeftShift &lt;= -(<span class="keywordtype">int</span>)ByteValues.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>()) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="InstCombineAndOrXor_8cpp.html#aea6495ab03039b1ee2bfecf5e1d5ae3c">CollectBSwapParts</a>(I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), OverallLeftShift, ByteMask,</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;                               ByteValues);</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;    }</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    <span class="comment">// If this is a logical &#39;and&#39; with a mask that clears bytes, clear the</span></div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;    <span class="comment">// corresponding bytes in ByteMask.</span></div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    <span class="keywordflow">if</span> (I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>() == <a class="code" href="namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">Instruction::And</a> &amp;&amp;</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;        isa&lt;ConstantInt&gt;(I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1))) {</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;      <span class="comment">// Scan every byte of the and mask, seeing if the byte is either 0 or 255.</span></div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;      <span class="keywordtype">unsigned</span> NumBytes = ByteValues.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>();</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> Byte(I-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a5a7cfa245af120b44ac8a86143bb9e57">getPrimitiveSizeInBits</a>(), 255);</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;AndMask = cast&lt;ConstantInt&gt;(I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1))-&gt;getValue();</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != NumBytes; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, Byte &lt;&lt;= 8) {</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;        <span class="comment">// If this byte is masked out by a later operation, we don&#39;t care what</span></div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;        <span class="comment">// the and mask is.</span></div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;        <span class="keywordflow">if</span> ((ByteMask &amp; (1 &lt;&lt; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)) == 0)</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;        <span class="comment">// If the AndMask is all zeros for this byte, clear the bit.</span></div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;        <a class="code" href="classllvm_1_1APInt.html">APInt</a> MaskB = AndMask &amp; Byte;</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;        <span class="keywordflow">if</span> (MaskB == 0) {</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;          ByteMask &amp;= ~(1U &lt;&lt; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;        }</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;        <span class="comment">// If the AndMask is not all ones for this byte, it&#39;s not a bytezap.</span></div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;        <span class="keywordflow">if</span> (MaskB != Byte)</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;        <span class="comment">// Otherwise, this byte is kept.</span></div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;      }</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="InstCombineAndOrXor_8cpp.html#aea6495ab03039b1ee2bfecf5e1d5ae3c">CollectBSwapParts</a>(I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), OverallLeftShift, ByteMask,</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;                               ByteValues);</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;    }</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;  }</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;  <span class="comment">// Okay, we got to something that isn&#39;t a shift, &#39;or&#39; or &#39;and&#39;.  This must be</span></div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;  <span class="comment">// the input value to the bswap.  Some observations: 1) if more than one byte</span></div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;  <span class="comment">// is demanded from this input, then it could not be successfully assembled</span></div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;  <span class="comment">// into a byteswap.  At least one of the two bytes would not be aligned with</span></div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;  <span class="comment">// their ultimate destination.</span></div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#af4d1a918800291e75b01ce1447be0e83">isPowerOf2_32</a>(ByteMask)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;  <span class="keywordtype">unsigned</span> InputByteNo = <a class="code" href="namespacellvm.html#abdaf1eaf6120421977095bd97eee892e">countTrailingZeros</a>(ByteMask);</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;  <span class="comment">// 2) The input and ultimate destinations must line up: if byte 3 of an i32</span></div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;  <span class="comment">// is demanded, it needs to go into byte 0 of the result.  This means that the</span></div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;  <span class="comment">// byte needs to be shifted until it lands in the right byte bucket.  The</span></div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;  <span class="comment">// shift amount depends on the position: if the byte is coming from the high</span></div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;  <span class="comment">// part of the value (e.g. byte 3) then it must be shifted right.  If from the</span></div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;  <span class="comment">// low part, it must be shifted left.</span></div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;  <span class="keywordtype">unsigned</span> DestByteNo = InputByteNo + OverallLeftShift;</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;  <span class="keywordflow">if</span> (ByteValues.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>()-1-DestByteNo != InputByteNo)</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;  <span class="comment">// If the destination byte value is already defined, the values are or&#39;d</span></div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;  <span class="comment">// together, which isn&#39;t a bswap (unless it&#39;s an or of the same bits).</span></div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;  <span class="keywordflow">if</span> (ByteValues[DestByteNo] &amp;&amp; ByteValues[DestByteNo] != V)</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;  ByteValues[DestByteNo] = V;</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;}</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;<span class="comment">/// MatchBSwap - Given an OR instruction, check to see if this is a bswap idiom.</span></div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;<span class="comment">/// If so, insert the new bswap intrinsic and return it.</span></div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InstCombiner::MatchBSwap(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;I) {</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;  <a class="code" href="classllvm_1_1IntegerType.html">IntegerType</a> *ITy = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1IntegerType.html">IntegerType</a>&gt;(I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;  <span class="keywordflow">if</span> (!ITy || ITy-&gt;<a class="code" href="classllvm_1_1IntegerType.html#a6f603ab84f6f7c79985036f58cca9d48">getBitWidth</a>() % 16 ||</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;      <span class="comment">// ByteMask only allows up to 32-byte values.</span></div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;      ITy-&gt;<a class="code" href="classllvm_1_1IntegerType.html#a6f603ab84f6f7c79985036f58cca9d48">getBitWidth</a>() &gt; 32*8)</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    <span class="keywordflow">return</span> 0;   <span class="comment">// Can only bswap pairs of bytes.  Can&#39;t do vectors.</span></div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;<span class="comment">  /// ByteValues - For each byte of the result, we keep track of which value</span></div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;<span class="comment">  /// defines each byte.</span></div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value*, 8&gt;</a> ByteValues;</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;  ByteValues.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a102d0ad36060677286c3aefb812e5512">resize</a>(ITy-&gt;<a class="code" href="classllvm_1_1IntegerType.html#a6f603ab84f6f7c79985036f58cca9d48">getBitWidth</a>()/8);</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;  <span class="comment">// Try to find all the pieces corresponding to the bswap.</span></div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;  uint32_t ByteMask = ~0U &gt;&gt; (32-ByteValues.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>());</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="InstCombineAndOrXor_8cpp.html#aea6495ab03039b1ee2bfecf5e1d5ae3c">CollectBSwapParts</a>(&amp;I, 0, ByteMask, ByteValues))</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;  <span class="comment">// Check to see if all of the bytes come from the same value.</span></div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *V = ByteValues[0];</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;  <span class="keywordflow">if</span> (V == 0) <span class="keywordflow">return</span> 0;  <span class="comment">// Didn&#39;t find a byte?  Must be zero.</span></div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;  <span class="comment">// Check to make sure that all of the bytes come from the same value.</span></div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1, e = ByteValues.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    <span class="keywordflow">if</span> (ByteValues[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] != V)</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;  <a class="code" href="classllvm_1_1Module.html">Module</a> *<a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = I.<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>()-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>();</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a> = <a class="code" href="namespacellvm_1_1Intrinsic.html#a842176a2c8c60a94bc788454b0828ea2">Intrinsic::getDeclaration</a>(M, <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90afb28523b72573e3468cd1ce52453f221">Intrinsic::bswap</a>, ITy);</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CallInst.html#a861226dd056dd2438da26760b8e7a9a0">CallInst::Create</a>(F, V);</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;}</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;<span class="comment">/// MatchSelectFromAndOr - We have an expression of the form (A&amp;C)|(B&amp;D).  Check</span></div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;<span class="comment">/// If A is (cond?-1:0) and either B or D is ~(cond?-1,0) or (cond?0,-1), then</span></div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;<span class="comment">/// we can simplify this expression to &quot;cond ? C : D or B&quot;.</span></div><div class="line"><a name="l01524"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#a20f11c9f64a41930051d33f8dfcfab10"> 1524</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineAndOrXor_8cpp.html#a20f11c9f64a41930051d33f8dfcfab10">MatchSelectFromAndOr</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>,</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;                                         <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *D) {</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;  <span class="comment">// If A is not a select of -1/0, this cannot match.</span></div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Cond = 0;</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(A, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Cond))) ||</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;      !Cond-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>(1))</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;  <span class="comment">// ((cond?-1:0)&amp;C) | (B&amp;(cond?0:-1)) -&gt; cond ? C : B.</span></div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(D, <a class="code" href="namespacellvm_1_1PatternMatch.html#a4cfd328368353696e64a4d1b15a7cbfa">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Cond)))))</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#a8bce457e977f23507c48c9dfd7052990">SelectInst::Create</a>(Cond, C, B);</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(D, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a4cfd328368353696e64a4d1b15a7cbfa">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Cond)))))</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#a8bce457e977f23507c48c9dfd7052990">SelectInst::Create</a>(Cond, C, B);</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;  <span class="comment">// ((cond?-1:0)&amp;C) | ((cond?0:-1)&amp;D) -&gt; cond ? C : D.</span></div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(B, <a class="code" href="namespacellvm_1_1PatternMatch.html#a4cfd328368353696e64a4d1b15a7cbfa">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Cond)))))</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#a8bce457e977f23507c48c9dfd7052990">SelectInst::Create</a>(Cond, C, D);</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(B, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a4cfd328368353696e64a4d1b15a7cbfa">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Cond)))))</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#a8bce457e977f23507c48c9dfd7052990">SelectInst::Create</a>(Cond, C, D);</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;}</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;<span class="comment">/// IsOneHotValue - Returns true for &quot;one-hot&quot; values (values where at most</span></div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;<span class="comment">/// one bit can be set).</span></div><div class="line"><a name="l01548"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#ad6587ec645b65fbd319a8c174842acaa"> 1548</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineAndOrXor_8cpp.html#ad6587ec645b65fbd319a8c174842acaa">IsOneHotValue</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;  <span class="comment">// Match 1&lt;&lt;K.</span></div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *BO = dyn_cast&lt;BinaryOperator&gt;(V))</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;    <span class="keywordflow">if</span> (BO-&gt;getOpcode() == Instruction::Shl) {</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;      <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *One = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(BO-&gt;getOperand(0));</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;      <span class="keywordflow">return</span> One &amp;&amp; One-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#aa96ca2cf0bb1e924523900fb911b0a45">isOne</a>();</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    }</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;  <span class="comment">// Check for power of two integer constants.</span></div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *K = dyn_cast&lt;ConstantInt&gt;(V))</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;    <span class="keywordflow">return</span> K-&gt;getValue().isPowerOf2();</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;}</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;<span class="comment">/// FoldOrOfICmps - Fold (icmp)|(icmp) if possible.</span></div><div class="line"><a name="l01564"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#a44518f3fa0762cd605ec7795621775a4"> 1564</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classllvm_1_1InstCombiner.html#a44518f3fa0762cd605ec7795621775a4">InstCombiner::FoldOrOfICmps</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *LHS, <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *RHS) {</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">ICmpInst::Predicate</a> LHSCC = LHS-&gt;<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), RHSCC = RHS-&gt;<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>();</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;  <span class="comment">// Fold (iszero(A &amp; K1) | iszero(A &amp; K2)) -&gt;  (A &amp; (K1 | K2)) != (K1 | K2)</span></div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;  <span class="comment">// if K1 and K2 are a one-bit mask.</span></div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *LHSCst = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(LHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *RHSCst = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(RHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;  <span class="keywordflow">if</span> (LHS-&gt;<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> &amp;&amp; LHSCst &amp;&amp; LHSCst-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#ad4ea4748170f687710a54c919dde5625">isZero</a>() &amp;&amp;</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;      RHS-&gt;<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> &amp;&amp; RHSCst &amp;&amp; RHSCst-&gt;isZero()) {</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *LAnd = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a>&gt;(LHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0));</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *RAnd = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a>&gt;(RHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0));</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;    <span class="keywordflow">if</span> (LAnd &amp;&amp; RAnd &amp;&amp; LAnd-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp; RHS-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp;</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;        LAnd-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>() == <a class="code" href="namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">Instruction::And</a> &amp;&amp;</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;        RAnd-&gt;getOpcode() == <a class="code" href="namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">Instruction::And</a>) {</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Mask = 0;</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Masked = 0;</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;      <span class="keywordflow">if</span> (LAnd-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0) == RAnd-&gt;getOperand(0) &amp;&amp;</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;          <a class="code" href="InstCombineAndOrXor_8cpp.html#ad6587ec645b65fbd319a8c174842acaa">IsOneHotValue</a>(LAnd-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1)) &amp;&amp;</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;          <a class="code" href="InstCombineAndOrXor_8cpp.html#ad6587ec645b65fbd319a8c174842acaa">IsOneHotValue</a>(RAnd-&gt;getOperand(1))) {</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;        Mask = Builder-&gt;CreateOr(LAnd-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1), RAnd-&gt;getOperand(1));</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;        Masked = Builder-&gt;CreateAnd(LAnd-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), Mask);</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (LAnd-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1) == RAnd-&gt;getOperand(1) &amp;&amp;</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;                 <a class="code" href="InstCombineAndOrXor_8cpp.html#ad6587ec645b65fbd319a8c174842acaa">IsOneHotValue</a>(LAnd-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)) &amp;&amp;</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;                 <a class="code" href="InstCombineAndOrXor_8cpp.html#ad6587ec645b65fbd319a8c174842acaa">IsOneHotValue</a>(RAnd-&gt;getOperand(0))) {</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;        Mask = Builder-&gt;CreateOr(LAnd-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), RAnd-&gt;getOperand(0));</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;        Masked = Builder-&gt;CreateAnd(LAnd-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1), Mask);</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;      }</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;      <span class="keywordflow">if</span> (Masked)</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;        <span class="keywordflow">return</span> Builder-&gt;CreateICmp(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>, Masked, Mask);</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;    }</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;  }</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;  <span class="comment">// (icmp1 A, B) | (icmp2 A, B) --&gt; (icmp3 A, B)</span></div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a0da24b52fafe3ad4e683353ac401f7b9">PredicatesFoldable</a>(LHSCC, RHSCC)) {</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;    <span class="keywordflow">if</span> (LHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0) == RHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1) &amp;&amp;</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;        LHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1) == RHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0))</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;      LHS-&gt;<a class="code" href="classllvm_1_1ICmpInst.html#acbc778ccd1faf4e95963c9a980acc7a5">swapOperands</a>();</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;    <span class="keywordflow">if</span> (LHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0) == RHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0) &amp;&amp;</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;        LHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1) == RHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1)) {</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = LHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), *Op1 = LHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a4a6621856674f376740a1ba6efd809e3">Code</a> = <a class="code" href="namespacellvm.html#a8236babf2e84275f5ce21b4936fb895e">getICmpCode</a>(LHS) | <a class="code" href="namespacellvm.html#a8236babf2e84275f5ce21b4936fb895e">getICmpCode</a>(RHS);</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;      <span class="keywordtype">bool</span> isSigned = LHS-&gt;<a class="code" href="classllvm_1_1CmpInst.html#a13f7eef27b0ecfe146cbac49b3054c91">isSigned</a>() || RHS-&gt;<a class="code" href="classllvm_1_1CmpInst.html#a13f7eef27b0ecfe146cbac49b3054c91">isSigned</a>();</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="InstCombineAndOrXor_8cpp.html#a529ff4b10087991fd0e737adbf94b423">getNewICmpValue</a>(isSigned, Code, Op0, Op1, Builder);</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;    }</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;  }</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;  <span class="comment">// handle (roughly):</span></div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;  <span class="comment">// (icmp ne (A &amp; B), C) | (icmp ne (A &amp; D), E)</span></div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="InstCombineAndOrXor_8cpp.html#a907d394944052b35b29b6f6e0c923e08">foldLogOpOfMaskedICmps</a>(LHS, RHS, <span class="keyword">false</span>, Builder))</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    <span class="keywordflow">return</span> V;</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Val = LHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), *Val2 = RHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;  <span class="keywordflow">if</span> (LHS-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() || RHS-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()) {</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;    <span class="comment">// (icmp eq B, 0) | (icmp ult A, B) -&gt; (icmp ule A, B-1)</span></div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;    <span class="comment">// (icmp eq B, 0) | (icmp ugt B, A) -&gt; (icmp ule A, B-1)</span></div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a> = 0, *<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> = 0;</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;    <span class="keywordflow">if</span> (LHSCC == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> &amp;&amp; LHSCst &amp;&amp; LHSCst-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#ad4ea4748170f687710a54c919dde5625">isZero</a>()) {</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;      <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> = Val;</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;      <span class="keywordflow">if</span> (RHSCC == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a> &amp;&amp; Val == RHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1))</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;        A = Val2;</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (RHSCC == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a> &amp;&amp; Val == Val2)</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;        A = RHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;    }</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;    <span class="comment">// (icmp ult A, B) | (icmp eq B, 0) -&gt; (icmp ule A, B-1)</span></div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    <span class="comment">// (icmp ugt B, A) | (icmp eq B, 0) -&gt; (icmp ule A, B-1)</span></div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (RHSCC == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> &amp;&amp; RHSCst &amp;&amp; RHSCst-&gt;isZero()) {</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;      <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> = Val2;</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;      <span class="keywordflow">if</span> (LHSCC == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a> &amp;&amp; Val2 == LHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1))</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;        A = Val;</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (LHSCC == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a> &amp;&amp; Val2 == Val)</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;        A = LHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;    }</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;    <span class="keywordflow">if</span> (A &amp;&amp; <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>)</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;      <span class="keywordflow">return</span> Builder-&gt;CreateICmp(</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;          <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a>,</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;          Builder-&gt;CreateAdd(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, <a class="code" href="classllvm_1_1ConstantInt.html#ad736fb9b585509388546c12617def38f">ConstantInt::getSigned</a>(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>-&gt;getType(), -1)), <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>);</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;  }</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;  <span class="comment">// This only handles icmp of constants: (icmp1 A, C1) | (icmp2 B, C2).</span></div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;  <span class="keywordflow">if</span> (LHSCst == 0 || RHSCst == 0) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;  <span class="keywordflow">if</span> (LHSCst == RHSCst &amp;&amp; LHSCC == RHSCC) {</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;    <span class="comment">// (icmp ne A, 0) | (icmp ne B, 0) --&gt; (icmp ne (A|B), 0)</span></div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    <span class="keywordflow">if</span> (LHSCC == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a> &amp;&amp; LHSCst-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#ad4ea4748170f687710a54c919dde5625">isZero</a>()) {</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NewOr = Builder-&gt;CreateOr(Val, Val2);</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;      <span class="keywordflow">return</span> Builder-&gt;CreateICmp(LHSCC, NewOr, LHSCst);</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    }</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;  }</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;  <span class="comment">// (icmp ult (X + CA), C1) | (icmp eq X, C2) -&gt; (icmp ule (X + CA), C1)</span></div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;  <span class="comment">//   iff C2 + CA == C1.</span></div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;  <span class="keywordflow">if</span> (LHSCC == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a> &amp;&amp; RHSCC == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>) {</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;    <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *AddCst;</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Val, <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Val2), <a class="code" href="namespacellvm_1_1PatternMatch.html#a34a92072122412c6020d4afb43725bf4">m_ConstantInt</a>(AddCst))))</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;      <span class="keywordflow">if</span> (RHSCst-&gt;getValue() + AddCst-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>() == LHSCst-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>())</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;        <span class="keywordflow">return</span> Builder-&gt;CreateICmpULE(Val, LHSCst);</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;  }</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;  <span class="comment">// From here on, we only handle:</span></div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;  <span class="comment">//    (icmp1 A, C1) | (icmp2 A, C2) --&gt; something simpler.</span></div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;  <span class="keywordflow">if</span> (Val != Val2) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;  <span class="comment">// ICMP_[US][GL]E X, CST is folded to ICMP_[US][GL]T elsewhere.</span></div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;  <span class="keywordflow">if</span> (LHSCC == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a> || LHSCC == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a> ||</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;      RHSCC == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a> || RHSCC == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a> ||</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;      LHSCC == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a> || LHSCC == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a2751d6136a2819749dcef65dc19a4246">ICmpInst::ICMP_SLE</a> ||</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;      RHSCC == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a> || RHSCC == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a2751d6136a2819749dcef65dc19a4246">ICmpInst::ICMP_SLE</a>)</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;  <span class="comment">// We can&#39;t fold (ugt x, C) | (sgt x, C2).</span></div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#a0da24b52fafe3ad4e683353ac401f7b9">PredicatesFoldable</a>(LHSCC, RHSCC))</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;  <span class="comment">// Ensure that the larger constant is on the RHS.</span></div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;  <span class="keywordtype">bool</span> ShouldSwap;</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CmpInst.html#a13f7eef27b0ecfe146cbac49b3054c91">CmpInst::isSigned</a>(LHSCC) ||</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;      (<a class="code" href="classllvm_1_1ICmpInst.html#a9adf718c253dc7c1c7e859265cd3fc3d">ICmpInst::isEquality</a>(LHSCC) &amp;&amp;</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;       <a class="code" href="classllvm_1_1CmpInst.html#a13f7eef27b0ecfe146cbac49b3054c91">CmpInst::isSigned</a>(RHSCC)))</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;    ShouldSwap = LHSCst-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>().<a class="code" href="classllvm_1_1APInt.html#a0671bc479b3d788cc233dc1ce20ebcb5">sgt</a>(RHSCst-&gt;getValue());</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    ShouldSwap = LHSCst-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>().<a class="code" href="classllvm_1_1APInt.html#ad3d358e03c6228af2d19b2e67028886e">ugt</a>(RHSCst-&gt;getValue());</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;  <span class="keywordflow">if</span> (ShouldSwap) {</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(LHS, RHS);</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(LHSCst, RHSCst);</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(LHSCC, RHSCC);</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;  }</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;  <span class="comment">// At this point, we know we have two icmp instructions</span></div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;  <span class="comment">// comparing a value against two constants and or&#39;ing the result</span></div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;  <span class="comment">// together.  Because of the above check, we know that we only have</span></div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;  <span class="comment">// ICMP_EQ, ICMP_NE, ICMP_LT, and ICMP_GT here. We also know (from the</span></div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;  <span class="comment">// icmp folding check above), that the two constants are not</span></div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;  <span class="comment">// equal.</span></div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;  assert(LHSCst != RHSCst &amp;&amp; <span class="stringliteral">&quot;Compares not folded above?&quot;</span>);</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;  <span class="keywordflow">switch</span> (LHSCC) {</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;  <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unknown integer condition code!&quot;</span>);</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>:</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    <span class="keywordflow">switch</span> (RHSCC) {</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;    <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unknown integer condition code!&quot;</span>);</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>:</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;      <span class="keywordflow">if</span> (LHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0) == RHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)) {</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;        <span class="comment">// if LHSCst and RHSCst differ only by one bit:</span></div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;        <span class="comment">// (A == C1 || A == C2) -&gt; (A &amp; ~(C1 ^ C2)) == C1</span></div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;        assert(LHSCst-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>().<a class="code" href="classllvm_1_1APInt.html#aa9537475b2b94f72ad6d5e8730dc40cb">ule</a>(LHSCst-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>()));</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;        <a class="code" href="classllvm_1_1APInt.html">APInt</a> <a class="code" href="namespacellvm_1_1APIntOps.html#afc7c4d88d09cba0c5e920f8a3a3ace55">Xor</a> = LHSCst-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>() ^ RHSCst-&gt;getValue();</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;        <span class="keywordflow">if</span> (Xor.<a class="code" href="classllvm_1_1APInt.html#af3deb6522c4fe2043fe07af2ec90190c">isPowerOf2</a>()) {</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *NegCst = Builder-&gt;getInt(~Xor);</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">And</a> = Builder-&gt;CreateAnd(LHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), NegCst);</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;          <span class="keywordflow">return</span> Builder-&gt;CreateICmp(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>, And, LHSCst);</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;        }</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;      }</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;      <span class="keywordflow">if</span> (LHSCst == <a class="code" href="InstCombineAndOrXor_8cpp.html#ac45a6ef2ab6b7ff3d7512fa9b61dd941">SubOne</a>(RHSCst)) {</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;        <span class="comment">// (X == 13 | X == 14) -&gt; X-13 &lt;u 2</span></div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *AddCST = <a class="code" href="classllvm_1_1ConstantExpr.html#afa29f0cd072ab9b3a2630681ffe5760f">ConstantExpr::getNeg</a>(LHSCst);</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Add = Builder-&gt;CreateAdd(Val, AddCST, Val-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.off&quot;</span>);</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;        AddCST = <a class="code" href="classllvm_1_1ConstantExpr.html#a554ab77949b0a16670a83ec3307501eb">ConstantExpr::getSub</a>(<a class="code" href="InstCombineAndOrXor_8cpp.html#a7f01f70b8d1862350825b532872d644f">AddOne</a>(RHSCst), LHSCst);</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;        <span class="keywordflow">return</span> Builder-&gt;CreateICmpULT(Add, AddCST);</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;      }</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;      <span class="keywordflow">break</span>;                         <span class="comment">// (X == 13 | X == 15) -&gt; no change</span></div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>:         <span class="comment">// (X == 13 | X u&gt; 14) -&gt; no change</span></div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>:         <span class="comment">// (X == 13 | X s&gt; 14) -&gt; no change</span></div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>:          <span class="comment">// (X == 13 | X != 15) -&gt; X != 15</span></div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>:         <span class="comment">// (X == 13 | X u&lt; 15) -&gt; X u&lt; 15</span></div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>:         <span class="comment">// (X == 13 | X s&lt; 15) -&gt; X s&lt; 15</span></div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;      <span class="keywordflow">return</span> RHS;</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;    }</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>:</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;    <span class="keywordflow">switch</span> (RHSCC) {</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;    <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unknown integer condition code!&quot;</span>);</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>:          <span class="comment">// (X != 13 | X == 15) -&gt; X != 13</span></div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>:         <span class="comment">// (X != 13 | X u&gt; 15) -&gt; X != 13</span></div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>:         <span class="comment">// (X != 13 | X s&gt; 15) -&gt; X != 13</span></div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;      <span class="keywordflow">return</span> LHS;</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>:          <span class="comment">// (X != 13 | X != 15) -&gt; true</span></div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>:         <span class="comment">// (X != 13 | X u&lt; 15) -&gt; true</span></div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>:         <span class="comment">// (X != 13 | X s&lt; 15) -&gt; true</span></div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;      <span class="keywordflow">return</span> Builder-&gt;getTrue();</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;    }</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>:</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;    <span class="keywordflow">switch</span> (RHSCC) {</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;    <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unknown integer condition code!&quot;</span>);</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>:         <span class="comment">// (X u&lt; 13 | X == 14) -&gt; no change</span></div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>:        <span class="comment">// (X u&lt; 13 | X u&gt; 15) -&gt; (X-13) u&gt; 2</span></div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;      <span class="comment">// If RHSCst is [us]MAXINT, it is always false.  Not handling</span></div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;      <span class="comment">// this can cause overflow.</span></div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;      <span class="keywordflow">if</span> (RHSCst-&gt;isMaxValue(<span class="keyword">false</span>))</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;        <span class="keywordflow">return</span> LHS;</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;      <span class="keywordflow">return</span> InsertRangeTest(Val, LHSCst, <a class="code" href="InstCombineAndOrXor_8cpp.html#a7f01f70b8d1862350825b532872d644f">AddOne</a>(RHSCst), <span class="keyword">false</span>, <span class="keyword">false</span>);</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>:        <span class="comment">// (X u&lt; 13 | X s&gt; 15) -&gt; no change</span></div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>:         <span class="comment">// (X u&lt; 13 | X != 15) -&gt; X != 15</span></div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>:        <span class="comment">// (X u&lt; 13 | X u&lt; 15) -&gt; X u&lt; 15</span></div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;      <span class="keywordflow">return</span> RHS;</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>:        <span class="comment">// (X u&lt; 13 | X s&lt; 15) -&gt; no change</span></div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;    }</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>:</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;    <span class="keywordflow">switch</span> (RHSCC) {</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;    <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unknown integer condition code!&quot;</span>);</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>:         <span class="comment">// (X s&lt; 13 | X == 14) -&gt; no change</span></div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>:        <span class="comment">// (X s&lt; 13 | X s&gt; 15) -&gt; (X-13) s&gt; 2</span></div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;      <span class="comment">// If RHSCst is [us]MAXINT, it is always false.  Not handling</span></div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;      <span class="comment">// this can cause overflow.</span></div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;      <span class="keywordflow">if</span> (RHSCst-&gt;isMaxValue(<span class="keyword">true</span>))</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;        <span class="keywordflow">return</span> LHS;</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;      <span class="keywordflow">return</span> InsertRangeTest(Val, LHSCst, <a class="code" href="InstCombineAndOrXor_8cpp.html#a7f01f70b8d1862350825b532872d644f">AddOne</a>(RHSCst), <span class="keyword">true</span>, <span class="keyword">false</span>);</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>:        <span class="comment">// (X s&lt; 13 | X u&gt; 15) -&gt; no change</span></div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>:         <span class="comment">// (X s&lt; 13 | X != 15) -&gt; X != 15</span></div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>:        <span class="comment">// (X s&lt; 13 | X s&lt; 15) -&gt; X s&lt; 15</span></div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;      <span class="keywordflow">return</span> RHS;</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>:        <span class="comment">// (X s&lt; 13 | X u&lt; 15) -&gt; no change</span></div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;    }</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>:</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;    <span class="keywordflow">switch</span> (RHSCC) {</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;    <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unknown integer condition code!&quot;</span>);</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>:         <span class="comment">// (X u&gt; 13 | X == 15) -&gt; X u&gt; 13</span></div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>:        <span class="comment">// (X u&gt; 13 | X u&gt; 15) -&gt; X u&gt; 13</span></div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;      <span class="keywordflow">return</span> LHS;</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>:        <span class="comment">// (X u&gt; 13 | X s&gt; 15) -&gt; no change</span></div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>:         <span class="comment">// (X u&gt; 13 | X != 15) -&gt; true</span></div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>:        <span class="comment">// (X u&gt; 13 | X u&lt; 15) -&gt; true</span></div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;      <span class="keywordflow">return</span> Builder-&gt;getTrue();</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>:        <span class="comment">// (X u&gt; 13 | X s&lt; 15) -&gt; no change</span></div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;    }</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>:</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;    <span class="keywordflow">switch</span> (RHSCC) {</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;    <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unknown integer condition code!&quot;</span>);</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>:         <span class="comment">// (X s&gt; 13 | X == 15) -&gt; X &gt; 13</span></div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>:        <span class="comment">// (X s&gt; 13 | X s&gt; 15) -&gt; X &gt; 13</span></div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;      <span class="keywordflow">return</span> LHS;</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>:        <span class="comment">// (X s&gt; 13 | X u&gt; 15) -&gt; no change</span></div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>:         <span class="comment">// (X s&gt; 13 | X != 15) -&gt; true</span></div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>:        <span class="comment">// (X s&gt; 13 | X s&lt; 15) -&gt; true</span></div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;      <span class="keywordflow">return</span> Builder-&gt;getTrue();</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>:        <span class="comment">// (X s&gt; 13 | X u&lt; 15) -&gt; no change</span></div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;    }</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;  }</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;}</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;<span class="comment">/// FoldOrOfFCmps - Optimize (fcmp)|(fcmp).  NOTE: Unlike the rest of</span></div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;<span class="comment">/// instcombine, this returns a Value which should already be inserted into the</span></div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;<span class="comment">/// function.</span></div><div class="line"><a name="l01830"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#a3c52b6d974a3379d5586414970a767ca"> 1830</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classllvm_1_1InstCombiner.html#a3c52b6d974a3379d5586414970a767ca">InstCombiner::FoldOrOfFCmps</a>(<a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a> *LHS, <a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a> *RHS) {</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;  <span class="keywordflow">if</span> (LHS-&gt;<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05af0159e4005258dc54f20b6fc227d19ed">FCmpInst::FCMP_UNO</a> &amp;&amp;</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;      RHS-&gt;<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05af0159e4005258dc54f20b6fc227d19ed">FCmpInst::FCMP_UNO</a> &amp;&amp;</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;      LHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() == RHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()) {</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a> *LHSC = dyn_cast&lt;ConstantFP&gt;(LHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1)))</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a> *RHSC = dyn_cast&lt;ConstantFP&gt;(RHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1))) {</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;        <span class="comment">// If either of the constants are nans, then the whole thing returns</span></div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;        <span class="comment">// true.</span></div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;        <span class="keywordflow">if</span> (LHSC-&gt;getValueAPF().isNaN() || RHSC-&gt;getValueAPF().isNaN())</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;          <span class="keywordflow">return</span> Builder-&gt;getTrue();</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;        <span class="comment">// Otherwise, no need to compare the two constants, compare the</span></div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;        <span class="comment">// rest.</span></div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;        <span class="keywordflow">return</span> Builder-&gt;CreateFCmpUNO(LHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), RHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0));</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;      }</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;    <span class="comment">// Handle vector zeros.  This occurs because the canonical form of</span></div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;    <span class="comment">// &quot;fcmp uno x,x&quot; is &quot;fcmp uno x, 0&quot;.</span></div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;    <span class="keywordflow">if</span> (isa&lt;ConstantAggregateZero&gt;(LHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1)) &amp;&amp;</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;        isa&lt;ConstantAggregateZero&gt;(RHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1)))</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;      <span class="keywordflow">return</span> Builder-&gt;CreateFCmpUNO(LHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), RHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0));</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;  }</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0LHS = LHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), *Op0RHS = LHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op1LHS = RHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), *Op1RHS = RHS-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">FCmpInst::Predicate</a> Op0CC = LHS-&gt;<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), Op1CC = RHS-&gt;<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>();</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;  <span class="keywordflow">if</span> (Op0LHS == Op1RHS &amp;&amp; Op0RHS == Op1LHS) {</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;    <span class="comment">// Swap RHS operands to match LHS.</span></div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;    Op1CC = <a class="code" href="classllvm_1_1CmpInst.html#ab5d3f9900a0284e85ee7a1520a4eeb60">FCmpInst::getSwappedPredicate</a>(Op1CC);</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Op1LHS, Op1RHS);</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;  }</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;  <span class="keywordflow">if</span> (Op0LHS == Op1LHS &amp;&amp; Op0RHS == Op1RHS) {</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;    <span class="comment">// Simplify (fcmp cc0 x, y) | (fcmp cc1 x, y).</span></div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;    <span class="keywordflow">if</span> (Op0CC == Op1CC)</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;      <span class="keywordflow">return</span> Builder-&gt;CreateFCmp((<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">FCmpInst::Predicate</a>)Op0CC, Op0LHS, Op0RHS);</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;    <span class="keywordflow">if</span> (Op0CC == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a0a33c71e3c5e8f128ca47539a85962f5">FCmpInst::FCMP_TRUE</a> || Op1CC == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a0a33c71e3c5e8f128ca47539a85962f5">FCmpInst::FCMP_TRUE</a>)</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(<a class="code" href="classllvm_1_1CmpInst.html#a4b5e1f50cb0890ec60d8c61a61241170">CmpInst::makeCmpResultType</a>(LHS-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()), 1);</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;    <span class="keywordflow">if</span> (Op0CC == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ae9c013750fff3023001d7e3af8df2d6d">FCmpInst::FCMP_FALSE</a>)</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;      <span class="keywordflow">return</span> RHS;</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;    <span class="keywordflow">if</span> (Op1CC == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ae9c013750fff3023001d7e3af8df2d6d">FCmpInst::FCMP_FALSE</a>)</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;      <span class="keywordflow">return</span> LHS;</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;    <span class="keywordtype">bool</span> Op0Ordered;</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;    <span class="keywordtype">bool</span> Op1Ordered;</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;    <span class="keywordtype">unsigned</span> Op0Pred = <a class="code" href="InstCombineAndOrXor_8cpp.html#a32ead1eb9f9f19667b0f79d01214612b">getFCmpCode</a>(Op0CC, Op0Ordered);</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;    <span class="keywordtype">unsigned</span> Op1Pred = <a class="code" href="InstCombineAndOrXor_8cpp.html#a32ead1eb9f9f19667b0f79d01214612b">getFCmpCode</a>(Op1CC, Op1Ordered);</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;    <span class="keywordflow">if</span> (Op0Ordered == Op1Ordered) {</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;      <span class="comment">// If both are ordered or unordered, return a new fcmp with</span></div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;      <span class="comment">// or&#39;ed predicates.</span></div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="InstCombineAndOrXor_8cpp.html#a7627ec3ea1e8ae5e84826e213b917abc">getFCmpValue</a>(Op0Ordered, Op0Pred|Op1Pred, Op0LHS, Op0RHS, Builder);</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;    }</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;  }</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;}</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;<span class="comment">/// FoldOrWithConstants - This helper function folds:</span></div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;<span class="comment">///     ((A | B) &amp; C1) | (B &amp; C2)</span></div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;<span class="comment">/// into:</span></div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;<span class="comment">///     (A &amp; C1) | B</span></div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;<span class="comment">/// when the XOR of the two constants is &quot;all ones&quot; (-1).</span></div><div class="line"><a name="l01896"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#af0764e239c0886efaaff552af421f9a6"> 1896</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombiner.html#af0764e239c0886efaaff552af421f9a6">InstCombiner::FoldOrWithConstants</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;I, <a class="code" href="classllvm_1_1Value.html">Value</a> *Op,</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;                                               <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI1 = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;  <span class="keywordflow">if</span> (!CI1) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *V1 = 0;</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI2 = 0;</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(V1), <a class="code" href="namespacellvm_1_1PatternMatch.html#a34a92072122412c6020d4afb43725bf4">m_ConstantInt</a>(CI2)))) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> <a class="code" href="namespacellvm_1_1APIntOps.html#afc7c4d88d09cba0c5e920f8a3a3ace55">Xor</a> = CI1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>() ^ CI2-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>();</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;  <span class="keywordflow">if</span> (!Xor.<a class="code" href="classllvm_1_1APInt.html#a21260f8037e665d235ace5718cf68bc4">isAllOnesValue</a>()) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;  <span class="keywordflow">if</span> (V1 == A || V1 == B) {</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewOp = Builder-&gt;CreateAnd((V1 == A) ? B : A, CI1);</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateOr(NewOp, V1);</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;  }</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;}</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;</div><div class="line"><a name="l01916"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#ac6bfa6371ced93b0a5a18a6c75976944"> 1916</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombiner.html#ac6bfa6371ced93b0a5a18a6c75976944">InstCombiner::visitOr</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;I) {</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;  <span class="keywordtype">bool</span> Changed = SimplifyAssociativeOrCommutative(I);</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), *Op1 = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#a35e45224cbdc6cd5bf6a988db6b61e82">SimplifyOrInst</a>(Op0, Op1, TD))</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;    <span class="keywordflow">return</span> ReplaceInstUsesWith(I, V);</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;  <span class="comment">// (A&amp;B)|(A&amp;C) -&gt; A&amp;(B|C) etc</span></div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = SimplifyUsingDistributiveLaws(I))</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;    <span class="keywordflow">return</span> ReplaceInstUsesWith(I, V);</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;  <span class="comment">// See if we can simplify any instructions used by the instruction whose sole</span></div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;  <span class="comment">// purpose is to compute bits we don&#39;t care about.</span></div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;  <span class="keywordflow">if</span> (SimplifyDemandedInstructionBits(I))</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *RHS = dyn_cast&lt;ConstantInt&gt;(Op1)) {</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;    <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a> = 0; <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">X</a> = 0;</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;    <span class="comment">// (X &amp; C1) | C2 --&gt; (X | C2) &amp; (C1|C2)</span></div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;    <span class="comment">// iff (C1 &amp; C2) == 0.</span></div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(X), <a class="code" href="namespacellvm_1_1PatternMatch.html#a34a92072122412c6020d4afb43725bf4">m_ConstantInt</a>(C1))) &amp;&amp;</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;        (RHS-&gt;getValue() &amp; C1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>()) != 0 &amp;&amp;</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;        Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()) {</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">Or</a> = Builder-&gt;CreateOr(X, RHS);</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;      Or-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(Op0);</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateAnd(Or,</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;                             Builder-&gt;getInt(RHS-&gt;getValue() | C1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>()));</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;    }</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;    <span class="comment">// (X ^ C1) | C2 --&gt; (X | C2) ^ (C1&amp;~C2)</span></div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(X), <a class="code" href="namespacellvm_1_1PatternMatch.html#a34a92072122412c6020d4afb43725bf4">m_ConstantInt</a>(C1))) &amp;&amp;</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;        Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()) {</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">Or</a> = Builder-&gt;CreateOr(X, RHS);</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;      Or-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(Op0);</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateXor(Or,</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;                            Builder-&gt;getInt(C1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>() &amp; ~RHS-&gt;getValue()));</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;    }</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;    <span class="comment">// Try to fold constant and into select arguments.</span></div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *SI = dyn_cast&lt;SelectInst&gt;(Op0))</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *R = FoldOpIntoSelect(I, SI))</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;        <span class="keywordflow">return</span> R;</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;    <span class="keywordflow">if</span> (isa&lt;PHINode&gt;(Op0))</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2a6c4724226f9ccea96d35fd4c131af8">NV</a> = FoldOpIntoPhi(I))</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2a6c4724226f9ccea96d35fd4c131af8">NV</a>;</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;  }</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a> = 0, *<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> = 0;</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a> = 0, *C2 = 0;</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;  <span class="comment">// (A | B) | C  and  A | (B | C)                  -&gt; bswap if possible.</span></div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;  <span class="comment">// (A &gt;&gt; B) | (C &lt;&lt; D)  and  (A &lt;&lt; B) | (B &gt;&gt; C)  -&gt; bswap if possible.</span></div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>())) ||</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>())) ||</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;      (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a8ab493fbb03398d7e17bf2000328fdf9">m_LogicalShift</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>())) &amp;&amp;</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;       <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a8ab493fbb03398d7e17bf2000328fdf9">m_LogicalShift</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>())))) {</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *BSwap = MatchBSwap(I))</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;      <span class="keywordflow">return</span> BSwap;</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;  }</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;  <span class="comment">// (X^C)|Y -&gt; (X|Y)^C iff Y&amp;C == 0</span></div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;  <span class="keywordflow">if</span> (Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp;</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a34a92072122412c6020d4afb43725bf4">m_ConstantInt</a>(C1))) &amp;&amp;</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;      <a class="code" href="namespacellvm.html#a8bc4c3e77e6f3d6c54b8b4504393dfa7">MaskedValueIsZero</a>(Op1, C1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>())) {</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NOr = Builder-&gt;CreateOr(A, Op1);</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;    NOr-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(Op0);</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateXor(NOr, C1);</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;  }</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;  <span class="comment">// Y|(X^C) -&gt; (X|Y)^C iff Y&amp;C == 0</span></div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;  <span class="keywordflow">if</span> (Op1-&gt;hasOneUse() &amp;&amp;</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a34a92072122412c6020d4afb43725bf4">m_ConstantInt</a>(C1))) &amp;&amp;</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;      <a class="code" href="namespacellvm.html#a8bc4c3e77e6f3d6c54b8b4504393dfa7">MaskedValueIsZero</a>(Op0, C1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>())) {</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NOr = Builder-&gt;CreateOr(A, Op0);</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;    NOr-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(Op0);</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateXor(NOr, C1);</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;  }</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;  <span class="comment">// (A &amp; C)|(B &amp; D)</span></div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = 0, *D = 0;</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(C))) &amp;&amp;</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(D)))) {</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *V1 = 0, *<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a> = 0;</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;    C1 = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;    C2 = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(D);</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;    <span class="keywordflow">if</span> (C1 &amp;&amp; C2) {  <span class="comment">// (A &amp; C1)|(B &amp; C2)</span></div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;      <span class="comment">// If we have: ((V + N) &amp; C1) | (V &amp; C2)</span></div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;      <span class="comment">// .. and C2 = ~C1 and C2 is 0+1+ and (N &amp; C2) == 0</span></div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;      <span class="comment">// replace with V+N.</span></div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;      <span class="keywordflow">if</span> (C1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>() == ~C2-&gt;getValue()) {</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;        <span class="keywordflow">if</span> ((C2-&gt;getValue() &amp; (C2-&gt;getValue()+1)) == 0 &amp;&amp; <span class="comment">// C2 == 0+1+</span></div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;            <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(A, <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(V1), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>)))) {</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;          <span class="comment">// Add commutes, try both ways.</span></div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;          <span class="keywordflow">if</span> (V1 == <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> &amp;&amp; <a class="code" href="namespacellvm.html#a8bc4c3e77e6f3d6c54b8b4504393dfa7">MaskedValueIsZero</a>(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>, C2-&gt;getValue()))</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;            <span class="keywordflow">return</span> ReplaceInstUsesWith(I, A);</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a> == <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> &amp;&amp; <a class="code" href="namespacellvm.html#a8bc4c3e77e6f3d6c54b8b4504393dfa7">MaskedValueIsZero</a>(V1, C2-&gt;getValue()))</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;            <span class="keywordflow">return</span> ReplaceInstUsesWith(I, A);</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;        }</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;        <span class="comment">// Or commutes, try both ways.</span></div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;        <span class="keywordflow">if</span> ((C1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>() &amp; (C1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>()+1)) == 0 &amp;&amp;</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;            <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(V1), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>)))) {</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;          <span class="comment">// Add commutes, try both ways.</span></div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;          <span class="keywordflow">if</span> (V1 == A &amp;&amp; <a class="code" href="namespacellvm.html#a8bc4c3e77e6f3d6c54b8b4504393dfa7">MaskedValueIsZero</a>(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>, C1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>()))</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;            <span class="keywordflow">return</span> ReplaceInstUsesWith(I, <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>);</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a> == A &amp;&amp; <a class="code" href="namespacellvm.html#a8bc4c3e77e6f3d6c54b8b4504393dfa7">MaskedValueIsZero</a>(V1, C1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>()))</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;            <span class="keywordflow">return</span> ReplaceInstUsesWith(I, <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>);</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;        }</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;      }</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;      <span class="keywordflow">if</span> ((C1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>() &amp; C2-&gt;getValue()) == 0) {</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;        <span class="comment">// ((V | N) &amp; C1) | (V &amp; C2) --&gt; (V|N) &amp; (C1|C2)</span></div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;        <span class="comment">// iff (C1&amp;C2) == 0 and (N&amp;~C1) == 0</span></div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(A, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(V1), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>))) &amp;&amp;</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;            ((V1 == <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> &amp;&amp; <a class="code" href="namespacellvm.html#a8bc4c3e77e6f3d6c54b8b4504393dfa7">MaskedValueIsZero</a>(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>, ~C1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>())) ||  <span class="comment">// (V|N)</span></div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;             (<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a> == <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> &amp;&amp; <a class="code" href="namespacellvm.html#a8bc4c3e77e6f3d6c54b8b4504393dfa7">MaskedValueIsZero</a>(V1, ~C1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>()))))   <span class="comment">// (N|V)</span></div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;          <span class="keywordflow">return</span> BinaryOperator::CreateAnd(A,</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;                                Builder-&gt;getInt(C1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>()|C2-&gt;getValue()));</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;        <span class="comment">// Or commutes, try both ways.</span></div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(V1), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>))) &amp;&amp;</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;            ((V1 == A &amp;&amp; <a class="code" href="namespacellvm.html#a8bc4c3e77e6f3d6c54b8b4504393dfa7">MaskedValueIsZero</a>(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>, ~C2-&gt;getValue())) ||  <span class="comment">// (V|N)</span></div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;             (<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a> == A &amp;&amp; <a class="code" href="namespacellvm.html#a8bc4c3e77e6f3d6c54b8b4504393dfa7">MaskedValueIsZero</a>(V1, ~C2-&gt;getValue()))))   <span class="comment">// (N|V)</span></div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;          <span class="keywordflow">return</span> BinaryOperator::CreateAnd(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>,</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;                                Builder-&gt;getInt(C1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>()|C2-&gt;getValue()));</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;        <span class="comment">// ((V|C3)&amp;C1) | ((V|C4)&amp;C2) --&gt; (V|C3|C4)&amp;(C1|C2)</span></div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;        <span class="comment">// iff (C1&amp;C2) == 0 and (C3&amp;~C1) == 0 and (C4&amp;~C2) == 0.</span></div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;        <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *C3 = 0, *C4 = 0;</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(A, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(V1), <a class="code" href="namespacellvm_1_1PatternMatch.html#a34a92072122412c6020d4afb43725bf4">m_ConstantInt</a>(C3))) &amp;&amp;</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;            (C3-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>() &amp; ~C1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>()) == 0 &amp;&amp;</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;            <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(V1), <a class="code" href="namespacellvm_1_1PatternMatch.html#a34a92072122412c6020d4afb43725bf4">m_ConstantInt</a>(C4))) &amp;&amp;</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;            (C4-&gt;getValue() &amp; ~C2-&gt;getValue()) == 0) {</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;          <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a> = Builder-&gt;CreateOr(V1, <a class="code" href="classllvm_1_1ConstantExpr.html#adc8a4e6a8e701e1924f0293da78badb6">ConstantExpr::getOr</a>(C3, C4), <span class="stringliteral">&quot;bitfield&quot;</span>);</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;          <span class="keywordflow">return</span> BinaryOperator::CreateAnd(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>,</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;                                Builder-&gt;getInt(C1-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>()|C2-&gt;getValue()));</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;        }</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;      }</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;    }</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;    <span class="comment">// (A &amp; (C0?-1:0)) | (B &amp; ~(C0?-1:0)) -&gt;  C0 ? A : B, and commuted variants.</span></div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;    <span class="comment">// Don&#39;t do this for vector select idioms, the code generator doesn&#39;t handle</span></div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;    <span class="comment">// them well yet.</span></div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;    <span class="keywordflow">if</span> (!I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">isVectorTy</a>()) {</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Match = <a class="code" href="InstCombineAndOrXor_8cpp.html#a20f11c9f64a41930051d33f8dfcfab10">MatchSelectFromAndOr</a>(A, <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, C, D))</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;        <span class="keywordflow">return</span> Match;</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Match = <a class="code" href="InstCombineAndOrXor_8cpp.html#a20f11c9f64a41930051d33f8dfcfab10">MatchSelectFromAndOr</a>(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, A, D, C))</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;        <span class="keywordflow">return</span> Match;</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Match = <a class="code" href="InstCombineAndOrXor_8cpp.html#a20f11c9f64a41930051d33f8dfcfab10">MatchSelectFromAndOr</a>(C, <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, A, D))</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;        <span class="keywordflow">return</span> Match;</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Match = <a class="code" href="InstCombineAndOrXor_8cpp.html#a20f11c9f64a41930051d33f8dfcfab10">MatchSelectFromAndOr</a>(D, A, <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, C))</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;        <span class="keywordflow">return</span> Match;</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;    }</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;    <span class="comment">// ((A&amp;~B)|(~A&amp;B)) -&gt; A^B</span></div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(C, <a class="code" href="namespacellvm_1_1PatternMatch.html#a4cfd328368353696e64a4d1b15a7cbfa">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(D))) &amp;&amp;</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;         <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a4cfd328368353696e64a4d1b15a7cbfa">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A)))))</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateXor(A, D);</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;    <span class="comment">// ((~B&amp;A)|(~A&amp;B)) -&gt; A^B</span></div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(A, <a class="code" href="namespacellvm_1_1PatternMatch.html#a4cfd328368353696e64a4d1b15a7cbfa">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(D))) &amp;&amp;</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;         <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a4cfd328368353696e64a4d1b15a7cbfa">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(C)))))</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateXor(C, D);</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;    <span class="comment">// ((A&amp;~B)|(B&amp;~A)) -&gt; A^B</span></div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(C, <a class="code" href="namespacellvm_1_1PatternMatch.html#a4cfd328368353696e64a4d1b15a7cbfa">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>))) &amp;&amp;</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;         <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(D, <a class="code" href="namespacellvm_1_1PatternMatch.html#a4cfd328368353696e64a4d1b15a7cbfa">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A)))))</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateXor(A, <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>);</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;    <span class="comment">// ((~B&amp;A)|(B&amp;~A)) -&gt; A^B</span></div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(A, <a class="code" href="namespacellvm_1_1PatternMatch.html#a4cfd328368353696e64a4d1b15a7cbfa">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>))) &amp;&amp;</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;         <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(D, <a class="code" href="namespacellvm_1_1PatternMatch.html#a4cfd328368353696e64a4d1b15a7cbfa">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(C)))))</div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateXor(C, <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>);</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;    <span class="comment">// ((A|B)&amp;1)|(B&amp;-2) -&gt; (A&amp;1) | B</span></div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(A, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(V1), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>))) ||</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(A, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(V1)))) {</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1AArch64ISD.html#a246d89cb58f606179b1435937830bbdca84e96c468affe3b1fd3076b4fc5d063e">Ret</a> = FoldOrWithConstants(I, Op1, V1, <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, C);</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;      <span class="keywordflow">if</span> (Ret) <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1AArch64ISD.html#a246d89cb58f606179b1435937830bbdca84e96c468affe3b1fd3076b4fc5d063e">Ret</a>;</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;    }</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;    <span class="comment">// (B&amp;-2)|((A|B)&amp;1) -&gt; (A&amp;1) | B</span></div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(V1))) ||</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(V1), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A)))) {</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1AArch64ISD.html#a246d89cb58f606179b1435937830bbdca84e96c468affe3b1fd3076b4fc5d063e">Ret</a> = FoldOrWithConstants(I, Op0, A, V1, D);</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;      <span class="keywordflow">if</span> (Ret) <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1AArch64ISD.html#a246d89cb58f606179b1435937830bbdca84e96c468affe3b1fd3076b4fc5d063e">Ret</a>;</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;    }</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;  }</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;  <span class="comment">// (X &gt;&gt; Z) | (Y &gt;&gt; Z)  -&gt; (X|Y) &gt;&gt; Z  for all shifts.</span></div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *SI1 = dyn_cast&lt;BinaryOperator&gt;(Op1)) {</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *SI0 = dyn_cast&lt;BinaryOperator&gt;(Op0))</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;      <span class="keywordflow">if</span> (SI0-&gt;isShift() &amp;&amp; SI0-&gt;getOpcode() == SI1-&gt;getOpcode() &amp;&amp;</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;          SI0-&gt;getOperand(1) == SI1-&gt;getOperand(1) &amp;&amp;</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;          (SI0-&gt;hasOneUse() || SI1-&gt;hasOneUse())) {</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewOp = Builder-&gt;CreateOr(SI0-&gt;getOperand(0), SI1-&gt;getOperand(0),</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;                                         SI0-&gt;getName());</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a4a4628e91a9c6a339fa61105614fac76">BinaryOperator::Create</a>(SI1-&gt;getOpcode(), NewOp,</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;                                      SI1-&gt;getOperand(1));</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;      }</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;  }</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;  <span class="comment">// (~A | ~B) == (~(A &amp; B)) - De Morgan&#39;s Law</span></div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Op0NotVal = <a class="code" href="InstCombineAndOrXor_8cpp.html#aa62fbad44784b52824ea165a4695299f">dyn_castNotVal</a>(Op0))</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Op1NotVal = <a class="code" href="InstCombineAndOrXor_8cpp.html#aa62fbad44784b52824ea165a4695299f">dyn_castNotVal</a>(Op1))</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;      <span class="keywordflow">if</span> (Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp; Op1-&gt;hasOneUse()) {</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">And</a> = Builder-&gt;CreateAnd(Op0NotVal, Op1NotVal,</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;                                        I.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.demorgan&quot;</span>);</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a0ad1d1442a12b21931b730201f58ab5e">BinaryOperator::CreateNot</a>(And);</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;      }</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;  <span class="comment">// Canonicalize xor to the RHS.</span></div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;  <span class="keywordtype">bool</span> SwappedForXor = <span class="keyword">false</span>;</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>()))) {</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Op0, Op1);</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;    SwappedForXor = <span class="keyword">true</span>;</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;  }</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;  <span class="comment">// A | ( A ^ B) -&gt; A |  B</span></div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;  <span class="comment">// A | (~A ^ B) -&gt; A | ~B</span></div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;  <span class="comment">// (A &amp; B) | (A ^ B)</span></div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>)))) {</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;    <span class="keywordflow">if</span> (Op0 == A || Op0 == <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>)</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateOr(A, <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>);</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>))) ||</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A))))</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateOr(A, <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>);</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;    <span class="keywordflow">if</span> (Op1-&gt;hasOneUse() &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(A, <a class="code" href="namespacellvm_1_1PatternMatch.html#a4cfd328368353696e64a4d1b15a7cbfa">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op0)))) {</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1APIntOps.html#a05e6b3a73a1d4fa4979f13a69d6f931a">Not</a> = Builder-&gt;CreateNot(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>-&gt;getName()+<span class="stringliteral">&quot;.not&quot;</span>);</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateOr(Not, Op0);</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;    }</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;    <span class="keywordflow">if</span> (Op1-&gt;hasOneUse() &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a4cfd328368353696e64a4d1b15a7cbfa">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op0)))) {</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1APIntOps.html#a05e6b3a73a1d4fa4979f13a69d6f931a">Not</a> = Builder-&gt;CreateNot(A, A-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.not&quot;</span>);</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateOr(Not, Op0);</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;    }</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;  }</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;  <span class="comment">// A | ~(A | B) -&gt; A | ~B</span></div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;  <span class="comment">// A | ~(A ^ B) -&gt; A | ~B</span></div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a4cfd328368353696e64a4d1b15a7cbfa">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A))))</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> = dyn_cast&lt;BinaryOperator&gt;(A))</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;      <span class="keywordflow">if</span> ((Op0 == <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>-&gt;getOperand(0) || Op0 == <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>-&gt;getOperand(1)) &amp;&amp;</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;          Op1-&gt;hasOneUse() &amp;&amp; (<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>-&gt;getOpcode() == <a class="code" href="namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">Instruction::Or</a> ||</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;                               <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>-&gt;getOpcode() == <a class="code" href="namespacellvm_1_1APIntOps.html#afc7c4d88d09cba0c5e920f8a3a3ace55">Instruction::Xor</a>)) {</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NotOp = Op0 == <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>-&gt;getOperand(0) ? <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>-&gt;getOperand(1) :</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;                                                 <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>-&gt;getOperand(0);</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1APIntOps.html#a05e6b3a73a1d4fa4979f13a69d6f931a">Not</a> = Builder-&gt;CreateNot(NotOp, NotOp-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.not&quot;</span>);</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;        <span class="keywordflow">return</span> BinaryOperator::CreateOr(Not, Op0);</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;      }</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;  <span class="keywordflow">if</span> (SwappedForXor)</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Op0, Op1);</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *RHS = dyn_cast&lt;ICmpInst&gt;(I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1)))</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *LHS = dyn_cast&lt;ICmpInst&gt;(I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)))</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Res = FoldOrOfICmps(LHS, RHS))</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;        <span class="keywordflow">return</span> ReplaceInstUsesWith(I, Res);</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;  <span class="comment">// (fcmp uno x, c) | (fcmp uno y, c)  -&gt; (fcmp uno x, y)</span></div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a> *LHS = dyn_cast&lt;FCmpInst&gt;(I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)))</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a> *RHS = dyn_cast&lt;FCmpInst&gt;(I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1)))</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Res = FoldOrOfFCmps(LHS, RHS))</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;        <span class="keywordflow">return</span> ReplaceInstUsesWith(I, Res);</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;  <span class="comment">// fold (or (cast A), (cast B)) -&gt; (cast (or A, B))</span></div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CastInst.html">CastInst</a> *Op0C = dyn_cast&lt;CastInst&gt;(Op0)) {</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;    <a class="code" href="classllvm_1_1CastInst.html">CastInst</a> *Op1C = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1CastInst.html">CastInst</a>&gt;(Op1);</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;    <span class="keywordflow">if</span> (Op1C &amp;&amp; Op0C-&gt;<a class="code" href="classllvm_1_1CastInst.html#adc3489e61d5f37a0e4c5589859fbccc2">getOpcode</a>() == Op1C-&gt;<a class="code" href="classllvm_1_1CastInst.html#adc3489e61d5f37a0e4c5589859fbccc2">getOpcode</a>()) {<span class="comment">// same cast kind ?</span></div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *SrcTy = Op0C-&gt;getOperand(0)-&gt;getType();</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;      <span class="keywordflow">if</span> (SrcTy == Op1C-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() &amp;&amp;</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;          SrcTy-&gt;<a class="code" href="classllvm_1_1Type.html#a3bd5e6108cd2c28c267d70e631a7b11a">isIntOrIntVectorTy</a>()) {</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0COp = Op0C-&gt;getOperand(0), *Op1COp = Op1C-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;        <span class="keywordflow">if</span> ((!isa&lt;ICmpInst&gt;(Op0COp) || !isa&lt;ICmpInst&gt;(Op1COp)) &amp;&amp;</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;            <span class="comment">// Only do this if the casts both really cause code to be</span></div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;            <span class="comment">// generated.</span></div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;            ShouldOptimizeCast(Op0C-&gt;getOpcode(), Op0COp, I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()) &amp;&amp;</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;            ShouldOptimizeCast(Op1C-&gt;<a class="code" href="classllvm_1_1CastInst.html#adc3489e61d5f37a0e4c5589859fbccc2">getOpcode</a>(), Op1COp, I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())) {</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *NewOp = Builder-&gt;CreateOr(Op0COp, Op1COp, I.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>());</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#a0f7dea9550778374905e12da6d6ba8a8">CastInst::Create</a>(Op0C-&gt;getOpcode(), NewOp, I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;        }</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;</div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;        <span class="comment">// If this is or(cast(icmp), cast(icmp)), try to fold this even if the</span></div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;        <span class="comment">// cast is otherwise not optimizable.  This happens for vector sexts.</span></div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *RHS = dyn_cast&lt;ICmpInst&gt;(Op1COp))</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *LHS = dyn_cast&lt;ICmpInst&gt;(Op0COp))</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Res = FoldOrOfICmps(LHS, RHS))</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;              <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#a0f7dea9550778374905e12da6d6ba8a8">CastInst::Create</a>(Op0C-&gt;getOpcode(), Res, I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;        <span class="comment">// If this is or(cast(fcmp), cast(fcmp)), try to fold this even if the</span></div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;        <span class="comment">// cast is otherwise not optimizable.  This happens for vector sexts.</span></div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a> *RHS = dyn_cast&lt;FCmpInst&gt;(Op1COp))</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a> *LHS = dyn_cast&lt;FCmpInst&gt;(Op0COp))</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Res = FoldOrOfFCmps(LHS, RHS))</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;              <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#a0f7dea9550778374905e12da6d6ba8a8">CastInst::Create</a>(Op0C-&gt;getOpcode(), Res, I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;      }</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;    }</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;  }</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;  <span class="comment">// or(sext(A), B) -&gt; A ? -1 : B where A is an i1</span></div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;  <span class="comment">// or(A, sext(B)) -&gt; B ? -1 : A where B is an i1</span></div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A))) &amp;&amp; A-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>(1))</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#a8bce457e977f23507c48c9dfd7052990">SelectInst::Create</a>(A, <a class="code" href="classllvm_1_1ConstantInt.html#ad736fb9b585509388546c12617def38f">ConstantInt::getSigned</a>(I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), -1), Op1);</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A))) &amp;&amp; A-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>(1))</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#a8bce457e977f23507c48c9dfd7052990">SelectInst::Create</a>(A, <a class="code" href="classllvm_1_1ConstantInt.html#ad736fb9b585509388546c12617def38f">ConstantInt::getSigned</a>(I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), -1), Op0);</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;  <span class="comment">// Note: If we&#39;ve gotten to the point of visiting the outer OR, then the</span></div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;  <span class="comment">// inner one couldn&#39;t be simplified.  If it was a constant, then it won&#39;t</span></div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;  <span class="comment">// be simplified by a later pass either, so we try swapping the inner/outer</span></div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;  <span class="comment">// ORs in the hopes that we&#39;ll be able to simplify it this way.</span></div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;  <span class="comment">// (X|C) | V --&gt; (X|V) | C</span></div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;  <span class="keywordflow">if</span> (Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp; !isa&lt;ConstantInt&gt;(Op1) &amp;&amp;</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a34a92072122412c6020d4afb43725bf4">m_ConstantInt</a>(C1)))) {</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Inner = Builder-&gt;CreateOr(A, Op1);</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;    Inner-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(Op0);</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateOr(Inner, C1);</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;  }</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;  <span class="comment">// Change (or (bool?A:B),(bool?C:D)) --&gt; (bool?(or A,C):(or B,D))</span></div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;  <span class="comment">// Since this OR statement hasn&#39;t been optimized further yet, we hope</span></div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;  <span class="comment">// that this transformation will allow the new ORs to be optimized.</span></div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;  {</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">X</a> = 0, *<a class="code" href="OcamlGCPrinter_8cpp.html#a1bdbcdc4205781eefd549946d40ff378">Y</a> = 0;</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;    <span class="keywordflow">if</span> (Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp; Op1-&gt;hasOneUse() &amp;&amp;</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#af254e0a0a7277f1b415dbabc3ee37fb6">m_Select</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(X), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>))) &amp;&amp;</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#af254e0a0a7277f1b415dbabc3ee37fb6">m_Select</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#a1bdbcdc4205781eefd549946d40ff378">Y</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(C), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(D))) &amp;&amp; X == <a class="code" href="OcamlGCPrinter_8cpp.html#a1bdbcdc4205781eefd549946d40ff378">Y</a>) {</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *orTrue = Builder-&gt;CreateOr(A, C);</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *orFalse = Builder-&gt;CreateOr(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, D);</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#a8bce457e977f23507c48c9dfd7052990">SelectInst::Create</a>(X, orTrue, orFalse);</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;    }</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;  }</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;  <span class="keywordflow">return</span> Changed ? &amp;I : 0;</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;}</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;</div><div class="line"><a name="l02248"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#a1877592cdc53ad0eb4410adc5e452f17"> 2248</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombiner.html#a1877592cdc53ad0eb4410adc5e452f17">InstCombiner::visitXor</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;I) {</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;  <span class="keywordtype">bool</span> Changed = SimplifyAssociativeOrCommutative(I);</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), *Op1 = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#ae1b36d4d04580bacd19ea0c6f039d222">SimplifyXorInst</a>(Op0, Op1, TD))</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;    <span class="keywordflow">return</span> ReplaceInstUsesWith(I, V);</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;  <span class="comment">// (A&amp;B)^(A&amp;C) -&gt; A&amp;(B^C) etc</span></div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = SimplifyUsingDistributiveLaws(I))</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;    <span class="keywordflow">return</span> ReplaceInstUsesWith(I, V);</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;  <span class="comment">// See if we can simplify any instructions used by the instruction whose sole</span></div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;  <span class="comment">// purpose is to compute bits we don&#39;t care about.</span></div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;  <span class="keywordflow">if</span> (SimplifyDemandedInstructionBits(I))</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;  <span class="comment">// Is this a ~ operation?</span></div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *NotOp = <a class="code" href="InstCombineAndOrXor_8cpp.html#aa62fbad44784b52824ea165a4695299f">dyn_castNotVal</a>(&amp;I)) {</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *Op0I = dyn_cast&lt;BinaryOperator&gt;(NotOp)) {</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;      <span class="keywordflow">if</span> (Op0I-&gt;getOpcode() == <a class="code" href="namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">Instruction::And</a> ||</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;          Op0I-&gt;getOpcode() == <a class="code" href="namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">Instruction::Or</a>) {</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;        <span class="comment">// ~(~X &amp; Y) --&gt; (X | ~Y) - De Morgan&#39;s Law</span></div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;        <span class="comment">// ~(~X | Y) === (X &amp; ~Y) - De Morgan&#39;s Law</span></div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="InstCombineAndOrXor_8cpp.html#aa62fbad44784b52824ea165a4695299f">dyn_castNotVal</a>(Op0I-&gt;getOperand(1)))</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;          Op0I-&gt;swapOperands();</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Op0NotVal = <a class="code" href="InstCombineAndOrXor_8cpp.html#aa62fbad44784b52824ea165a4695299f">dyn_castNotVal</a>(Op0I-&gt;getOperand(0))) {</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *NotY =</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;            Builder-&gt;CreateNot(Op0I-&gt;getOperand(1),</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;                               Op0I-&gt;getOperand(1)-&gt;getName()+<span class="stringliteral">&quot;.not&quot;</span>);</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;          <span class="keywordflow">if</span> (Op0I-&gt;getOpcode() == <a class="code" href="namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">Instruction::And</a>)</div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;            <span class="keywordflow">return</span> BinaryOperator::CreateOr(Op0NotVal, NotY);</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;          <span class="keywordflow">return</span> BinaryOperator::CreateAnd(Op0NotVal, NotY);</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;        }</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;</div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;        <span class="comment">// ~(X &amp; Y) --&gt; (~X | ~Y) - De Morgan&#39;s Law</span></div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;        <span class="comment">// ~(X | Y) === (~X &amp; ~Y) - De Morgan&#39;s Law</span></div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="InstCombineAndOrXor_8cpp.html#afa152a1c292e3c6e4c11ac7ac34c38c3">isFreeToInvert</a>(Op0I-&gt;getOperand(0)) &amp;&amp;</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;            <a class="code" href="InstCombineAndOrXor_8cpp.html#afa152a1c292e3c6e4c11ac7ac34c38c3">isFreeToInvert</a>(Op0I-&gt;getOperand(1))) {</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *NotX =</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;            Builder-&gt;CreateNot(Op0I-&gt;getOperand(0), <span class="stringliteral">&quot;notlhs&quot;</span>);</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *NotY =</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;            Builder-&gt;CreateNot(Op0I-&gt;getOperand(1), <span class="stringliteral">&quot;notrhs&quot;</span>);</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;          <span class="keywordflow">if</span> (Op0I-&gt;getOpcode() == <a class="code" href="namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">Instruction::And</a>)</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;            <span class="keywordflow">return</span> BinaryOperator::CreateOr(NotX, NotY);</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;          <span class="keywordflow">return</span> BinaryOperator::CreateAnd(NotX, NotY);</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;        }</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Op0I-&gt;getOpcode() == Instruction::AShr) {</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;        <span class="comment">// ~(~X &gt;&gt;s Y) --&gt; (X &gt;&gt;s Y)</span></div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Op0NotVal = <a class="code" href="InstCombineAndOrXor_8cpp.html#aa62fbad44784b52824ea165a4695299f">dyn_castNotVal</a>(Op0I-&gt;getOperand(0)))</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;          <span class="keywordflow">return</span> BinaryOperator::CreateAShr(Op0NotVal, Op0I-&gt;getOperand(1));</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;      }</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;    }</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;  }</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *RHS = dyn_cast&lt;ConstantInt&gt;(Op1)) {</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;    <span class="keywordflow">if</span> (RHS-&gt;isOne() &amp;&amp; Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>())</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;      <span class="comment">// xor (cmp A, B), true = not (cmp A, B) = !cmp A, B</span></div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CmpInst.html">CmpInst</a> *CI = dyn_cast&lt;CmpInst&gt;(Op0))</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CmpInst.html#a4cd12603c3c76eb84d050733f6ddc8b7">CmpInst::Create</a>(CI-&gt;getOpcode(),</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;                               CI-&gt;getInversePredicate(),</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;                               CI-&gt;getOperand(0), CI-&gt;getOperand(1));</div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;    <span class="comment">// fold (xor(zext(cmp)), 1) and (xor(sext(cmp)), -1) to ext(!cmp).</span></div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CastInst.html">CastInst</a> *Op0C = dyn_cast&lt;CastInst&gt;(Op0)) {</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CmpInst.html">CmpInst</a> *CI = dyn_cast&lt;CmpInst&gt;(Op0C-&gt;getOperand(0))) {</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;        <span class="keywordflow">if</span> (CI-&gt;hasOneUse() &amp;&amp; Op0C-&gt;hasOneUse()) {</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;          <a class="code" href="classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">Instruction::CastOps</a> Opcode = Op0C-&gt;<a class="code" href="classllvm_1_1CmpInst.html#afb3301fb99a3b118d9fe496faf1b114b">getOpcode</a>();</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;          <span class="keywordflow">if</span> ((Opcode == Instruction::ZExt || Opcode == Instruction::SExt) &amp;&amp;</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;              (RHS == <a class="code" href="classllvm_1_1ConstantExpr.html#a1e1ce75d651c76b6869b4218e34618c8">ConstantExpr::getCast</a>(Opcode, Builder-&gt;getTrue(),</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;                                            Op0C-&gt;getDestTy()))) {</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;            CI-&gt;setPredicate(CI-&gt;getInversePredicate());</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#a0f7dea9550778374905e12da6d6ba8a8">CastInst::Create</a>(Opcode, CI, Op0C-&gt;getType());</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;          }</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;        }</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;      }</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;    }</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *Op0I = dyn_cast&lt;BinaryOperator&gt;(Op0)) {</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;      <span class="comment">// ~(c-X) == X-c-1 == X+(-c-1)</span></div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;      <span class="keywordflow">if</span> (Op0I-&gt;getOpcode() == Instruction::Sub &amp;&amp; RHS-&gt;isAllOnesValue())</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *Op0I0C = dyn_cast&lt;Constant&gt;(Op0I-&gt;getOperand(0))) {</div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;          <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NegOp0I0C = <a class="code" href="classllvm_1_1ConstantExpr.html#afa29f0cd072ab9b3a2630681ffe5760f">ConstantExpr::getNeg</a>(Op0I0C);</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;          <a class="code" href="classllvm_1_1Constant.html">Constant</a> *ConstantRHS = <a class="code" href="classllvm_1_1ConstantExpr.html#a554ab77949b0a16670a83ec3307501eb">ConstantExpr::getSub</a>(NegOp0I0C,</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;                                      <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), 1));</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;          <span class="keywordflow">return</span> BinaryOperator::CreateAdd(Op0I-&gt;getOperand(1), ConstantRHS);</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;        }</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;</div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *Op0CI = dyn_cast&lt;ConstantInt&gt;(Op0I-&gt;getOperand(1))) {</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;        <span class="keywordflow">if</span> (Op0I-&gt;getOpcode() == Instruction::Add) {</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;          <span class="comment">// ~(X-c) --&gt; (-c-1)-X</span></div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;          <span class="keywordflow">if</span> (RHS-&gt;isAllOnesValue()) {</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;            <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NegOp0CI = <a class="code" href="classllvm_1_1ConstantExpr.html#afa29f0cd072ab9b3a2630681ffe5760f">ConstantExpr::getNeg</a>(Op0CI);</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;            <span class="keywordflow">return</span> BinaryOperator::CreateSub(</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;                           <a class="code" href="classllvm_1_1ConstantExpr.html#a554ab77949b0a16670a83ec3307501eb">ConstantExpr::getSub</a>(NegOp0CI,</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;                                      <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), 1)),</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;                                      Op0I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0));</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (RHS-&gt;getValue().isSignBit()) {</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;            <span class="comment">// (X + C) ^ signbit -&gt; (X + C + signbit)</span></div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;            <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = Builder-&gt;getInt(RHS-&gt;getValue() + Op0CI-&gt;getValue());</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;            <span class="keywordflow">return</span> BinaryOperator::CreateAdd(Op0I-&gt;getOperand(0), <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;</div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;          }</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Op0I-&gt;getOpcode() == <a class="code" href="namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">Instruction::Or</a>) {</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;          <span class="comment">// (X|C1)^C2 -&gt; X^(C1|C2) iff X&amp;~C1 == 0</span></div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a8bc4c3e77e6f3d6c54b8b4504393dfa7">MaskedValueIsZero</a>(Op0I-&gt;getOperand(0), Op0CI-&gt;getValue())) {</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;            <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NewRHS = <a class="code" href="classllvm_1_1ConstantExpr.html#adc8a4e6a8e701e1924f0293da78badb6">ConstantExpr::getOr</a>(Op0CI, RHS);</div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;            <span class="comment">// Anything in both C1 and C2 is known to be zero, remove it from</span></div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;            <span class="comment">// NewRHS.</span></div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;            <a class="code" href="classllvm_1_1Constant.html">Constant</a> *CommonBits = <a class="code" href="classllvm_1_1ConstantExpr.html#ae6d2fbefb704650e3b01a0bbcdd43ffa">ConstantExpr::getAnd</a>(Op0CI, RHS);</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;            NewRHS = <a class="code" href="classllvm_1_1ConstantExpr.html#ae6d2fbefb704650e3b01a0bbcdd43ffa">ConstantExpr::getAnd</a>(NewRHS,</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;                                       <a class="code" href="classllvm_1_1ConstantExpr.html#a5b43a866f0fca605556f0f69f70c522a">ConstantExpr::getNot</a>(CommonBits));</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;            Worklist.Add(Op0I);</div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;            I.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(0, Op0I-&gt;getOperand(0));</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;            I.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(1, NewRHS);</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;            <span class="keywordflow">return</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;          }</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Op0I-&gt;getOpcode() == Instruction::LShr) {</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;          <span class="comment">// ((X^C1) &gt;&gt; C2) ^ C3 -&gt; (X&gt;&gt;C2) ^ ((C1&gt;&gt;C2)^C3)</span></div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;          <span class="comment">// E1 = &quot;X ^ C1&quot;</span></div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;          <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *E1;</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;          <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>;</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;          <span class="keywordflow">if</span> (Op0I-&gt;hasOneUse() &amp;&amp;</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;              (E1 = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a>&gt;(Op0I-&gt;getOperand(0))) &amp;&amp;</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;              E1-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>() == <a class="code" href="namespacellvm_1_1APIntOps.html#afc7c4d88d09cba0c5e920f8a3a3ace55">Instruction::Xor</a> &amp;&amp;</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;              (C1 = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(E1-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1)))) {</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;            <span class="comment">// fold (C1 &gt;&gt; C2) ^ C3</span></div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;            <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *C2 = Op0CI, *C3 = RHS;</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;            <a class="code" href="classllvm_1_1APInt.html">APInt</a> FoldConst = C1-&gt;getValue().<a class="code" href="classllvm_1_1APInt.html#aa1953b3ad7ef6aa87dc0205db0c2ea45">lshr</a>(C2-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>());</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;            FoldConst ^= C3-&gt;getValue();</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;            <span class="comment">// Prepare the two operands.</span></div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;            <a class="code" href="classllvm_1_1Value.html">Value</a> *Opnd0 = Builder-&gt;CreateLShr(E1-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), C2);</div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;            Opnd0-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(Op0I);</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;            cast&lt;Instruction&gt;(Opnd0)-&gt;setDebugLoc(I.<a class="code" href="classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">getDebugLoc</a>());</div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;            <a class="code" href="classllvm_1_1Value.html">Value</a> *FoldVal = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(Opnd0-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), FoldConst);</div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;</div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;            <span class="keywordflow">return</span> BinaryOperator::CreateXor(Opnd0, FoldVal);</div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;          }</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;        }</div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;      }</div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;    }</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;    <span class="comment">// Try to fold constant and into select arguments.</span></div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *SI = dyn_cast&lt;SelectInst&gt;(Op0))</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *R = FoldOpIntoSelect(I, SI))</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;        <span class="keywordflow">return</span> R;</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;    <span class="keywordflow">if</span> (isa&lt;PHINode&gt;(Op0))</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2a6c4724226f9ccea96d35fd4c131af8">NV</a> = FoldOpIntoPhi(I))</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2a6c4724226f9ccea96d35fd4c131af8">NV</a>;</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;  }</div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;</div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;  <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *Op1I = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a>&gt;(Op1);</div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;  <span class="keywordflow">if</span> (Op1I) {</div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>, *<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>;</div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1I, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(B)))) {</div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;      <span class="keywordflow">if</span> (A == Op0) {              <span class="comment">// B^(B|A) == (A|B)^B</span></div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;        Op1I-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a80cc7c4bd4a37fc13e9765fd3a31dbfe">swapOperands</a>();</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;        I.<a class="code" href="classllvm_1_1BinaryOperator.html#a80cc7c4bd4a37fc13e9765fd3a31dbfe">swapOperands</a>();</div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;        <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Op0, Op1);</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (B == Op0) {       <span class="comment">// B^(A|B) == (A|B)^B</span></div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;        I.<a class="code" href="classllvm_1_1BinaryOperator.html#a80cc7c4bd4a37fc13e9765fd3a31dbfe">swapOperands</a>();     <span class="comment">// Simplified below.</span></div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;        <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Op0, Op1);</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;      }</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1I, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(B))) &amp;&amp;</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;               Op1I-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()){</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;      <span class="keywordflow">if</span> (A == Op0) {                                      <span class="comment">// A^(A&amp;B) -&gt; A^(B&amp;A)</span></div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;        Op1I-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a80cc7c4bd4a37fc13e9765fd3a31dbfe">swapOperands</a>();</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;        <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(A, B);</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;      }</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;      <span class="keywordflow">if</span> (B == Op0) {                                      <span class="comment">// A^(B&amp;A) -&gt; (B&amp;A)^A</span></div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;        I.<a class="code" href="classllvm_1_1BinaryOperator.html#a80cc7c4bd4a37fc13e9765fd3a31dbfe">swapOperands</a>();     <span class="comment">// Simplified below.</span></div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;        <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Op0, Op1);</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;      }</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;    }</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;  }</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;  <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *Op0I = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a>&gt;(Op0);</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;  <span class="keywordflow">if</span> (Op0I) {</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>, *<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>;</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0I, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(B))) &amp;&amp;</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;        Op0I-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()) {</div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;      <span class="keywordflow">if</span> (A == Op1)                                  <span class="comment">// (B|A)^B == (A|B)^B</span></div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;        <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(A, B);</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;      <span class="keywordflow">if</span> (B == Op1)                                  <span class="comment">// (A|B)^B == A &amp; ~B</span></div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;        <span class="keywordflow">return</span> BinaryOperator::CreateAnd(A, Builder-&gt;CreateNot(Op1));</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0I, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(B))) &amp;&amp;</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;               Op0I-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()){</div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;      <span class="keywordflow">if</span> (A == Op1)                                        <span class="comment">// (A&amp;B)^A -&gt; (B&amp;A)^A</span></div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;        <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(A, B);</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;      <span class="keywordflow">if</span> (B == Op1 &amp;&amp;                                      <span class="comment">// (B&amp;A)^A == ~B &amp; A</span></div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;          !isa&lt;ConstantInt&gt;(Op1)) {  <span class="comment">// Canonical form is (B&amp;C)^C</span></div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;        <span class="keywordflow">return</span> BinaryOperator::CreateAnd(Builder-&gt;CreateNot(A), Op1);</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;      }</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;    }</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;  }</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;  <span class="comment">// (X &gt;&gt; Z) ^ (Y &gt;&gt; Z)  -&gt; (X^Y) &gt;&gt; Z  for all shifts.</span></div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;  <span class="keywordflow">if</span> (Op0I &amp;&amp; Op1I &amp;&amp; Op0I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a407ab30fb284068600e0cba2677640c2">isShift</a>() &amp;&amp;</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;      Op0I-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>() == Op1I-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>() &amp;&amp;</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;      Op0I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1) == Op1I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1) &amp;&amp;</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;      (Op0I-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() || Op1I-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>())) {</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewOp =</div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;      Builder-&gt;CreateXor(Op0I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), Op1I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0),</div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;                         Op0I-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>());</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a4a4628e91a9c6a339fa61105614fac76">BinaryOperator::Create</a>(Op1I-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>(), NewOp,</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;                                  Op1I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;  }</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;  <span class="keywordflow">if</span> (Op0I &amp;&amp; Op1I) {</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>, *<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, *D;</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;    <span class="comment">// (A &amp; B)^(A | B) -&gt; A ^ B</span></div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0I, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(B))) &amp;&amp;</div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1I, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(C), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(D)))) {</div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;      <span class="keywordflow">if</span> ((A == C &amp;&amp; B == D) || (A == D &amp;&amp; B == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;        <span class="keywordflow">return</span> BinaryOperator::CreateXor(A, B);</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;    }</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;    <span class="comment">// (A | B)^(A &amp; B) -&gt; A ^ B</span></div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0I, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(B))) &amp;&amp;</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1I, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(C), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(D)))) {</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;      <span class="keywordflow">if</span> ((A == C &amp;&amp; B == D) || (A == D &amp;&amp; B == C))</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;        <span class="keywordflow">return</span> BinaryOperator::CreateXor(A, B);</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;    }</div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;  }</div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;</div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;  <span class="comment">// (icmp1 A, B) ^ (icmp2 A, B) --&gt; (icmp3 A, B)</span></div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *RHS = dyn_cast&lt;ICmpInst&gt;(I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1)))</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *LHS = dyn_cast&lt;ICmpInst&gt;(I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)))</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a0da24b52fafe3ad4e683353ac401f7b9">PredicatesFoldable</a>(LHS-&gt;getPredicate(), RHS-&gt;getPredicate())) {</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;        <span class="keywordflow">if</span> (LHS-&gt;getOperand(0) == RHS-&gt;getOperand(1) &amp;&amp;</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;            LHS-&gt;getOperand(1) == RHS-&gt;getOperand(0))</div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;          LHS-&gt;swapOperands();</div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;        <span class="keywordflow">if</span> (LHS-&gt;getOperand(0) == RHS-&gt;getOperand(0) &amp;&amp;</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;            LHS-&gt;getOperand(1) == RHS-&gt;getOperand(1)) {</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = LHS-&gt;getOperand(0), *Op1 = LHS-&gt;getOperand(1);</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;          <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a4a6621856674f376740a1ba6efd809e3">Code</a> = <a class="code" href="namespacellvm.html#a8236babf2e84275f5ce21b4936fb895e">getICmpCode</a>(LHS) ^ <a class="code" href="namespacellvm.html#a8236babf2e84275f5ce21b4936fb895e">getICmpCode</a>(RHS);</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;          <span class="keywordtype">bool</span> isSigned = LHS-&gt;isSigned() || RHS-&gt;isSigned();</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;          <span class="keywordflow">return</span> ReplaceInstUsesWith(I,</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;                               <a class="code" href="InstCombineAndOrXor_8cpp.html#a529ff4b10087991fd0e737adbf94b423">getNewICmpValue</a>(isSigned, Code, Op0, Op1,</div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;                                               Builder));</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;        }</div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;      }</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;</div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;  <span class="comment">// fold (xor (cast A), (cast B)) -&gt; (cast (xor A, B))</span></div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CastInst.html">CastInst</a> *Op0C = dyn_cast&lt;CastInst&gt;(Op0)) {</div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CastInst.html">CastInst</a> *Op1C = dyn_cast&lt;CastInst&gt;(Op1))</div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;      <span class="keywordflow">if</span> (Op0C-&gt;getOpcode() == Op1C-&gt;getOpcode()) { <span class="comment">// same cast kind?</span></div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;        <a class="code" href="classllvm_1_1Type.html">Type</a> *SrcTy = Op0C-&gt;getOperand(0)-&gt;getType();</div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;        <span class="keywordflow">if</span> (SrcTy == Op1C-&gt;getOperand(0)-&gt;getType() &amp;&amp; SrcTy-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>() &amp;&amp;</div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;            <span class="comment">// Only do this if the casts both really cause code to be generated.</span></div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;            ShouldOptimizeCast(Op0C-&gt;getOpcode(), Op0C-&gt;getOperand(0),</div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;                               I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()) &amp;&amp;</div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;            ShouldOptimizeCast(Op1C-&gt;getOpcode(), Op1C-&gt;getOperand(0),</div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;                               I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())) {</div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *NewOp = Builder-&gt;CreateXor(Op0C-&gt;getOperand(0),</div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;                                            Op1C-&gt;getOperand(0), I.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>());</div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#a0f7dea9550778374905e12da6d6ba8a8">CastInst::Create</a>(Op0C-&gt;getOpcode(), NewOp, I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;        }</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;      }</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;  }</div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;</div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;  <span class="keywordflow">return</span> Changed ? &amp;I : 0;</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;}</div><div class="ttc" id="Target_2Sparc_2README_8txt_html_adde814a560e5b8f522edeacf92b81102"><div class="ttname"><a href="Target_2Sparc_2README_8txt.html#adde814a560e5b8f522edeacf92b81102">zero</a></div><div class="ttdeci">To do *Keep the address of the constant pool in a register instead of forming its address all of the time *We can fold small constant offsets into the hi lo references to constant pool addresses as well *When in V9 register allocate icc *[0-3] Add support for isel ing UMUL_LOHI instead of marking it as Expand *Emit the Branch on Integer Register with Prediction instructions It s not clear how to write a pattern for this int o6 subcc l0 bne LBBt1_2!F nop l0 st g0 retl nop should be replaced with a brz in V9 mode *Same as but emit conditional move on register zero(p192) in V9 mode.Testcase</div><div class="ttdef"><b>Definition:</b> <a href="Target_2Sparc_2README_8txt_source.html#l00041">Target/Sparc/README.txt:41</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a427435d4da769ae680a8e77ef89520aa"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">llvm::PatternMatch::m_And</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::And &gt; m_And(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00467">PatternMatch.h:467</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00127">SmallVector.h:127</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_ad0b2d60a2d46beeb0d4832785a5df78e"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#ad0b2d60a2d46beeb0d4832785a5df78e">llvm::InstCombiner::FoldAndOfICmps</a></div><div class="ttdeci">Value * FoldAndOfICmps(ICmpInst *LHS, ICmpInst *RHS)</div><div class="ttdoc">FoldAndOfICmps - Fold (icmp)&amp;(icmp) if possible. </div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00784">InstCombineAndOrXor.cpp:784</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a240475f85dea79ec272c578fdf89acf1"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a240475f85dea79ec272c578fdf89acf1">llvm::ConstantInt::getType</a></div><div class="ttdeci">IntegerType * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00139">Constants.h:139</a></div></div>
<div class="ttc" id="classllvm_1_1CastInst_html_adc3489e61d5f37a0e4c5589859fbccc2"><div class="ttname"><a href="classllvm_1_1CastInst.html#adc3489e61d5f37a0e4c5589859fbccc2">llvm::CastInst::getOpcode</a></div><div class="ttdeci">Instruction::CastOps getOpcode() const </div><div class="ttdoc">Return the opcode of this CastInst. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00603">InstrTypes.h:603</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a24bca8838396aa81b87de8e7ac774b19"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">llvm::PatternMatch::m_Value</a></div><div class="ttdeci">class_match&lt; Value &gt; m_Value()</div><div class="ttdoc">m_Value() - Match an arbitrary value and ignore it. </div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00070">PatternMatch.h:70</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html"><div class="ttname"><a href="classllvm_1_1CmpInst.html">llvm::CmpInst</a></div><div class="ttdoc">Abstract base class of comparison instructions. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00633">InstrTypes.h:633</a></div></div>
<div class="ttc" id="namespacellvm_1_1ARM__PROC_html_aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5"><div class="ttname"><a href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">llvm::ARM_PROC::A</a></div><div class="ttdef"><b>Definition:</b> <a href="ARMBaseInfo_8h_source.html#l00098">ARMBaseInfo.h:98</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a2e5e9f65d911e80a46d3098933794056"><div class="ttname"><a href="classllvm_1_1APInt.html#a2e5e9f65d911e80a46d3098933794056">llvm::APInt::getSignBit</a></div><div class="ttdeci">static APInt getSignBit(unsigned BitWidth)</div><div class="ttdoc">Get the SignBit for a specific bit width. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00443">APInt.h:443</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a1877592cdc53ad0eb4410adc5e452f17"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a1877592cdc53ad0eb4410adc5e452f17">llvm::InstCombiner::visitXor</a></div><div class="ttdeci">Instruction * visitXor(BinaryOperator &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l02248">InstCombineAndOrXor.cpp:2248</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_ac6bfa6371ced93b0a5a18a6c75976944"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#ac6bfa6371ced93b0a5a18a6c75976944">llvm::InstCombiner::visitOr</a></div><div class="ttdeci">Instruction * visitOr(BinaryOperator &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l01916">InstCombineAndOrXor.cpp:1916</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a495d91fb3d2662acbffd0162c56153ed"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a495d91fb3d2662acbffd0162c56153ed">llvm::IRBuilder::CreateICmp</a></div><div class="ttdeci">Value * CreateICmp(CmpInst::Predicate P, Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01280">IRBuilder.h:1280</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a4b5e1f50cb0890ec60d8c61a61241170"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a4b5e1f50cb0890ec60d8c61a61241170">llvm::CmpInst::makeCmpResultType</a></div><div class="ttdeci">static Type * makeCmpResultType(Type *opnd_type)</div><div class="ttdoc">Create a result type for fcmp/icmp. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00832">InstrTypes.h:832</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html"><div class="ttname"><a href="classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">The main container class for the LLVM Intermediate Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00112">Module.h:112</a></div></div>
<div class="ttc" id="InstCombineAndOrXor_8cpp_html_aa9c705ecec80ebd584bb3d54b48f7ee1a2778ef2a236b30d557c19e8d4cf27f66"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a2778ef2a236b30d557c19e8d4cf27f66">FoldMskICmp_BMask_Mixed</a></div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00418">InstCombineAndOrXor.cpp:418</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_ab3b5beca3a0dedd21adac813123a2ae6"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ab3b5beca3a0dedd21adac813123a2ae6">llvm::PatternMatch::m_Zero</a></div><div class="ttdeci">match_zero m_Zero()</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00137">PatternMatch.h:137</a></div></div>
<div class="ttc" id="InstCombine_8h_html"><div class="ttname"><a href="InstCombine_8h.html">InstCombine.h</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html_a8bce457e977f23507c48c9dfd7052990"><div class="ttname"><a href="classllvm_1_1SelectInst.html#a8bce457e977f23507c48c9dfd7052990">llvm::SelectInst::Create</a></div><div class="ttdeci">static SelectInst * Create(Value *C, Value *S1, Value *S2, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01455">Instructions.h:1455</a></div></div>
<div class="ttc" id="namespacellvm_html_a3f2f98c2a67c9e79f58aad9150a62e42"><div class="ttname"><a href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">llvm::dyn_cast</a></div><div class="ttdeci">enable_if_c&lt;!is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="Casting_8h_source.html#l00266">Casting.h:266</a></div></div>
<div class="ttc" id="classllvm_1_1ZExtInst_html"><div class="ttname"><a href="classllvm_1_1ZExtInst.html">llvm::ZExtInst</a></div><div class="ttdoc">This class represents zero extension of integer types. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03211">Instructions.h:3211</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a2f81e0c1fc6554df7ad2eafabf5fc5a5"><div class="ttname"><a href="classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">llvm::User::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00108">User.h:108</a></div></div>
<div class="ttc" id="InstCombineAndOrXor_8cpp_html_a907d394944052b35b29b6f6e0c923e08"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#a907d394944052b35b29b6f6e0c923e08">foldLogOpOfMaskedICmps</a></div><div class="ttdeci">static Value * foldLogOpOfMaskedICmps(ICmpInst *LHS, ICmpInst *RHS, bool IsAnd, llvm::InstCombiner::BuilderTy *Builder)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00661">InstCombineAndOrXor.cpp:661</a></div></div>
<div class="ttc" id="namespacellvm_html_a8236babf2e84275f5ce21b4936fb895e"><div class="ttname"><a href="namespacellvm.html#a8236babf2e84275f5ce21b4936fb895e">llvm::getICmpCode</a></div><div class="ttdeci">unsigned getICmpCode(const ICmpInst *ICI, bool InvertPred=false)</div><div class="ttdef"><b>Definition:</b> <a href="CmpInstAnalysis_8cpp_source.html#l00044">CmpInstAnalysis.cpp:44</a></div></div>
<div class="ttc" id="namespacellvm_html_a8bc4c3e77e6f3d6c54b8b4504393dfa7"><div class="ttname"><a href="namespacellvm.html#a8bc4c3e77e6f3d6c54b8b4504393dfa7">llvm::MaskedValueIsZero</a></div><div class="ttdeci">bool MaskedValueIsZero(Value *V, const APInt &amp;Mask, const DataLayout *TD=0, unsigned Depth=0)</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l01115">ValueTracking.cpp:1115</a></div></div>
<div class="ttc" id="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode_html_a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4"><div class="ttname"><a href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">llvm::NVPTX::PTXLdStInstCode::V2</a></div><div class="ttdef"><b>Definition:</b> <a href="NVPTX_8h_source.html#l00127">NVPTX.h:127</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_ad960e1ff48d25c382b6d28e7961f074e"><div class="ttname"><a href="classllvm_1_1APInt.html#ad960e1ff48d25c382b6d28e7961f074e">llvm::APInt::getLowBitsSet</a></div><div class="ttdeci">static APInt getLowBitsSet(unsigned numBits, unsigned loBitsSet)</div><div class="ttdoc">Get a value with low bits set. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00528">APInt.h:528</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05ad92f160316221fd4090520bb2b3cefc5"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ad92f160316221fd4090520bb2b3cefc5">llvm::CmpInst::ICMP_ULE</a></div><div class="ttdoc">unsigned less or equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00677">InstrTypes.h:677</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a91d86a4753c8bd7624e01bf565d87f8e">llvm::CmpInst::ICMP_ULT</a></div><div class="ttdoc">unsigned less than </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00676">InstrTypes.h:676</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a13f7eef27b0ecfe146cbac49b3054c91"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a13f7eef27b0ecfe146cbac49b3054c91">llvm::CmpInst::isSigned</a></div><div class="ttdeci">bool isSigned() const </div><div class="ttdoc">Determine if this instruction is using a signed comparison. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00780">InstrTypes.h:780</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a326bee0a4a424cef21c1cf8adb8b8dd8"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a326bee0a4a424cef21c1cf8adb8b8dd8">llvm::CmpInst::FCMP_OLT</a></div><div class="ttdoc">0 1 0 0 True if ordered and less than </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00657">InstrTypes.h:657</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05ad601460c9371d0f0ada5ae006bdba2bd"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ad601460c9371d0f0ada5ae006bdba2bd">llvm::CmpInst::FCMP_UNE</a></div><div class="ttdoc">1 1 1 0 True if unordered or not equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00667">InstrTypes.h:667</a></div></div>
<div class="ttc" id="InstCombineAndOrXor_8cpp_html_aa9c705ecec80ebd584bb3d54b48f7ee1"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1">MaskedICmpType</a></div><div class="ttdeci">MaskedICmpType</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00409">InstCombineAndOrXor.cpp:409</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_aca229503e4f5c83a187a6a921c625fa8"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">llvm::BasicBlock::getParent</a></div><div class="ttdeci">const Function * getParent() const </div><div class="ttdoc">Return the enclosing method, or null if none. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00116">BasicBlock.h:116</a></div></div>
<div class="ttc" id="LLParser_8cpp_html_a33ece1ef8074506a15d7f86eb76dbae6"><div class="ttname"><a href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a></div><div class="ttdeci">F(f)</div></div>
<div class="ttc" id="InstCombineAndOrXor_8cpp_html_aa9c705ecec80ebd584bb3d54b48f7ee1a8ab26b389e7b7199477e4e6f4a449c07"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a8ab26b389e7b7199477e4e6f4a449c07">FoldMskICmp_AMask_AllOnes</a></div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00410">InstCombineAndOrXor.cpp:410</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00070">Function.h:70</a></div></div>
<div class="ttc" id="InstructionSimplify_8h_html"><div class="ttname"><a href="InstructionSimplify_8h.html">InstructionSimplify.h</a></div></div>
<div class="ttc" id="classllvm_1_1IntegerType_html_a6f603ab84f6f7c79985036f58cca9d48"><div class="ttname"><a href="classllvm_1_1IntegerType.html#a6f603ab84f6f7c79985036f58cca9d48">llvm::IntegerType::getBitWidth</a></div><div class="ttdeci">unsigned getBitWidth() const </div><div class="ttdoc">Get the number of bits in this IntegerType. </div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00061">DerivedTypes.h:61</a></div></div>
<div class="ttc" id="MathExtras_8h_html_a9211f62d8e1e6de999eaa63ec0f6ae02"><div class="ttname"><a href="MathExtras_8h.html#a9211f62d8e1e6de999eaa63ec0f6ae02">R2</a></div><div class="ttdeci">#define R2(n)</div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_a554ab77949b0a16670a83ec3307501eb"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a554ab77949b0a16670a83ec3307501eb">llvm::ConstantExpr::getSub</a></div><div class="ttdeci">static Constant * getSub(Constant *C1, Constant *C2, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02051">Constants.cpp:2051</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_aa6574d526b3e38a28f688a7bb4325c2c"><div class="ttname"><a href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">llvm::Constant::getNullValue</a></div><div class="ttdeci">static Constant * getNullValue(Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00111">Constants.cpp:111</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00167">Value.cpp:167</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_ae6f1c15034bc5515033874630a8ecce6"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#ae6f1c15034bc5515033874630a8ecce6">llvm::ConstantExpr::getAdd</a></div><div class="ttdeci">static Constant * getAdd(Constant *C1, Constant *C2, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02040">Constants.cpp:2040</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html_a80cc7c4bd4a37fc13e9765fd3a31dbfe"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a80cc7c4bd4a37fc13e9765fd3a31dbfe">llvm::BinaryOperator::swapOperands</a></div><div class="ttdeci">bool swapOperands()</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l01990">Instructions.cpp:1990</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_a05e6b3a73a1d4fa4979f13a69d6f931a"><div class="ttname"><a href="namespacellvm_1_1APIntOps.html#a05e6b3a73a1d4fa4979f13a69d6f931a">llvm::APIntOps::Not</a></div><div class="ttdeci">APInt Not(const APInt &amp;APIVal)</div><div class="ttdoc">Bitwise complement function. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01855">APInt.h:1855</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a919643b83ce3c9af2e4296ed5e413a1f"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a919643b83ce3c9af2e4296ed5e413a1f">llvm::CmpInst::FCMP_UEQ</a></div><div class="ttdoc">1 0 0 1 True if unordered or equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00662">InstrTypes.h:662</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_aae67c508d4f0716516f5c412c5592556"><div class="ttname"><a href="Target_2README_8txt.html#aae67c508d4f0716516f5c412c5592556">result</a></div><div class="ttdeci">then result</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00393">Target/README.txt:393</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a25d956d9e0beadd47ce4bc255dfa811d"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">llvm::PatternMatch::match</a></div><div class="ttdeci">bool match(Val *V, const Pattern &amp;P)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00042">PatternMatch.h:42</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05af0159e4005258dc54f20b6fc227d19ed"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05af0159e4005258dc54f20b6fc227d19ed">llvm::CmpInst::FCMP_UNO</a></div><div class="ttdoc">1 0 0 0 True if unordered: isnan(X) | isnan(Y) </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00661">InstrTypes.h:661</a></div></div>
<div class="ttc" id="ValueTracking_8cpp_html_a06c14477546c3a0eb4c79ff007ea2375"><div class="ttname"><a href="ValueTracking_8cpp.html#a06c14477546c3a0eb4c79ff007ea2375">getBitWidth</a></div><div class="ttdeci">static unsigned getBitWidth(Type *Ty, const DataLayout *TD)</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l00040">ValueTracking.cpp:40</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a82e2ea7f0ab67e33e22b3a2a188feaba"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">llvm::PatternMatch::m_Xor</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Xor &gt; m_Xor(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00479">PatternMatch.h:479</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html"><div class="ttname"><a href="classllvm_1_1SelectInst.html">llvm::SelectInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01430">Instructions.h:1430</a></div></div>
<div class="ttc" id="namespacellvm_html_ac53bb620387e76f170ba633e4e6d813a"><div class="ttname"><a href="namespacellvm.html#ac53bb620387e76f170ba633e4e6d813a">llvm::SimplifyAndInst</a></div><div class="ttdeci">Value * SimplifyAndInst(Value *LHS, Value *RHS, const DataLayout *TD=0, const TargetLibraryInfo *TLI=0, const DominatorTree *DT=0)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l01521">InstructionSimplify.cpp:1521</a></div></div>
<div class="ttc" id="classllvm_1_1CastInst_html"><div class="ttname"><a href="classllvm_1_1CastInst.html">llvm::CastInst</a></div><div class="ttdoc">Base class of casting instructions. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00387">InstrTypes.h:387</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_af8dde13a97efce293a7b04daf1e208fb"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">llvm::ConstantInt::getValue</a></div><div class="ttdeci">const APInt &amp; getValue() const </div><div class="ttdoc">Return the constant&amp;#39;s value. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00105">Constants.h:105</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">llvm::CmpInst::ICMP_NE</a></div><div class="ttdoc">not equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00673">InstrTypes.h:673</a></div></div>
<div class="ttc" id="ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdef"><b>Definition:</b> <a href="ErrorHandling_8h_source.html#l00103">ErrorHandling.h:103</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_aa1953b3ad7ef6aa87dc0205db0c2ea45"><div class="ttname"><a href="classllvm_1_1APInt.html#aa1953b3ad7ef6aa87dc0205db0c2ea45">llvm::APInt::lshr</a></div><div class="ttdeci">APInt LLVM_ATTRIBUTE_UNUSED_RESULT lshr(unsigned shiftAmt) const </div><div class="ttdoc">Logical right-shift function. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l01127">APInt.cpp:1127</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00035">APInt.h:35</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a5b844aada27c4c6fdb87146ac458c0d8"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a5b844aada27c4c6fdb87146ac458c0d8">llvm::PatternMatch::m_Trunc</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::Trunc &gt; m_Trunc(const OpTy &amp;Op)</div><div class="ttdoc">m_Trunc </div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00678">PatternMatch.h:678</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html"><div class="ttname"><a href="classllvm_1_1IRBuilder.html">llvm::IRBuilder</a></div><div class="ttdoc">This provides a uniform API for creating instructions and inserting them into a basic block: either a...</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00421">IRBuilder.h:421</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a9835cfe02fb5027680bd7203b024f77a"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a9835cfe02fb5027680bd7203b024f77a">llvm::CmpInst::FCMP_OLE</a></div><div class="ttdoc">0 1 0 1 True if ordered and less than or equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00658">InstrTypes.h:658</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_a7f6d289fb01d21926d74f34b4c4f14dd"><div class="ttname"><a href="namespacellvm_1_1APIntOps.html#a7f6d289fb01d21926d74f34b4c4f14dd">llvm::APIntOps::isShiftedMask</a></div><div class="ttdeci">bool isShiftedMask(unsigned numBits, const APInt &amp;APIVal)</div><div class="ttdoc">Return true if the argument APInt value contains a sequence of ones with the remainder zero...</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01724">APInt.h:1724</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_afa0b2fa29ba074f2b6ec9ac11163f2d9"><div class="ttname"><a href="classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">llvm::Instruction::CastOps</a></div><div class="ttdeci">CastOps</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00401">Instruction.h:401</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_af0764e239c0886efaaff552af421f9a6"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#af0764e239c0886efaaff552af421f9a6">llvm::InstCombiner::FoldOrWithConstants</a></div><div class="ttdeci">Instruction * FoldOrWithConstants(BinaryOperator &amp;I, Value *Op, Value *A, Value *B, Value *C)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l01896">InstCombineAndOrXor.cpp:1896</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00031">Instruction.h:31</a></div></div>
<div class="ttc" id="InstCombineAndOrXor_8cpp_html_a20f11c9f64a41930051d33f8dfcfab10"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#a20f11c9f64a41930051d33f8dfcfab10">MatchSelectFromAndOr</a></div><div class="ttdeci">static Instruction * MatchSelectFromAndOr(Value *A, Value *B, Value *C, Value *D)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l01524">InstCombineAndOrXor.cpp:1524</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a4cfd328368353696e64a4d1b15a7cbfa"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a4cfd328368353696e64a4d1b15a7cbfa">llvm::PatternMatch::m_Not</a></div><div class="ttdeci">not_match&lt; LHS &gt; m_Not(const LHS &amp;L)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00738">PatternMatch.h:738</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a944c25ac9b73b02a17a20a08a25b9b21"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">llvm::PatternMatch::m_Add</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Add &gt; m_Add(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00395">PatternMatch.h:395</a></div></div>
<div class="ttc" id="InstCombineAndOrXor_8cpp_html_a187cc5f9a7a949ba824b4ebc18858f1a"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#a187cc5f9a7a949ba824b4ebc18858f1a">foldLogOpOfMaskedICmpsHelper</a></div><div class="ttdeci">static unsigned foldLogOpOfMaskedICmpsHelper(Value *&amp;A, Value *&amp;B, Value *&amp;C, Value *&amp;D, Value *&amp;E, ICmpInst *LHS, ICmpInst *RHS, ICmpInst::Predicate &amp;LHSCC, ICmpInst::Predicate &amp;RHSCC)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00547">InstCombineAndOrXor.cpp:547</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a88cc5a48bb4170aa6541c7c6364e03b5"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a88cc5a48bb4170aa6541c7c6364e03b5">llvm::IRBuilder::CreateFCmp</a></div><div class="ttdeci">Value * CreateFCmp(CmpInst::Predicate P, Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01287">IRBuilder.h:1287</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a197d5dd77cad4560a082900962a830aa"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a197d5dd77cad4560a082900962a830aa">llvm::IRBuilder::CreateAnd</a></div><div class="ttdeci">Value * CreateAnd(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00789">IRBuilder.h:789</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_af348d5ea83429d08ba891ca3dd0e92b2"><div class="ttname"><a href="classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">llvm::Type::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">getContext - Return the LLVMContext in which this type was uniqued. </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00128">Type.h:128</a></div></div>
<div class="ttc" id="InstCombineAndOrXor_8cpp_html_add947a35dd442e049fda602d9dc9cd20"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#add947a35dd442e049fda602d9dc9cd20">isRunOfOnes</a></div><div class="ttdeci">static bool isRunOfOnes(ConstantInt *Val, uint32_t &amp;MB, uint32_t &amp;ME)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00318">InstCombineAndOrXor.cpp:318</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a8f55dd4237be6778517ddd752ca8b76a"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a8f55dd4237be6778517ddd752ca8b76a">llvm::IRBuilder::CreateOr</a></div><div class="ttdeci">Value * CreateOr(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00805">IRBuilder.h:805</a></div></div>
<div class="ttc" id="namespacellvm_html_abdaf1eaf6120421977095bd97eee892e"><div class="ttname"><a href="namespacellvm.html#abdaf1eaf6120421977095bd97eee892e">llvm::countTrailingZeros</a></div><div class="ttdeci">enable_if_c&lt; std::numeric_limits&lt; T &gt;::is_integer &amp;&amp;!std::numeric_limits&lt; T &gt;::is_signed, std::size_t &gt;::type countTrailingZeros(T Val, ZeroBehavior ZB=ZB_Width)</div><div class="ttdoc">Count number of 0&amp;#39;s from the least significant bit to the most stopping at the first 1...</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00049">MathExtras.h:49</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_a593bc53015a060d260c75fc599f9a7b1"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a593bc53015a060d260c75fc599f9a7b1">llvm::ConstantExpr::getICmp</a></div><div class="ttdeci">static Constant * getICmp(unsigned short pred, Constant *LHS, Constant *RHS)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01881">Constants.cpp:1881</a></div></div>
<div class="ttc" id="InstCombineAndOrXor_8cpp_html_aa9c705ecec80ebd584bb3d54b48f7ee1a87e4869a2403fea5c04b47663119bf62"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a87e4869a2403fea5c04b47663119bf62">FoldMskICmp_BMask_NotMixed</a></div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00419">InstCombineAndOrXor.cpp:419</a></div></div>
<div class="ttc" id="classllvm_1_1FCmpInst_html"><div class="ttname"><a href="classllvm_1_1FCmpInst.html">llvm::FCmpInst</a></div><div class="ttdoc">Represents a floating point comparison operator. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01055">Instructions.h:1055</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a024bb83a7f01e7661ea72ff7dcc460f5"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a024bb83a7f01e7661ea72ff7dcc460f5">llvm::ConstantInt::getLimitedValue</a></div><div class="ttdeci">uint64_t getLimitedValue(uint64_t Limit=~0ULL) const </div><div class="ttdoc">Get the constant&amp;#39;s value with a saturation limit. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00218">Constants.h:218</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a0671bc479b3d788cc233dc1ce20ebcb5"><div class="ttname"><a href="classllvm_1_1APInt.html#a0671bc479b3d788cc233dc1ce20ebcb5">llvm::APInt::sgt</a></div><div class="ttdeci">bool sgt(const APInt &amp;RHS) const </div><div class="ttdoc">Signed greather than comparison. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01100">APInt.h:1100</a></div></div>
<div class="ttc" id="InstCombineAndOrXor_8cpp_html_a7f01f70b8d1862350825b532872d644f"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#a7f01f70b8d1862350825b532872d644f">AddOne</a></div><div class="ttdeci">static Constant * AddOne(ConstantInt *C)</div><div class="ttdoc">AddOne - Add one to a ConstantInt. </div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00025">InstCombineAndOrXor.cpp:25</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_ad933e66b8bbd406e84d1dbbf094d4cde"><div class="ttname"><a href="classllvm_1_1Instruction.html#ad933e66b8bbd406e84d1dbbf094d4cde">llvm::Instruction::isLogicalShift</a></div><div class="ttdeci">bool isLogicalShift() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00108">Instruction.h:108</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a65eb40bd8c732c997e156e14f6b461f4"><div class="ttname"><a href="classllvm_1_1APInt.html#a65eb40bd8c732c997e156e14f6b461f4">llvm::APInt::getActiveBits</a></div><div class="ttdeci">unsigned getActiveBits() const </div><div class="ttdoc">Compute the number of active bits in the value. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01276">APInt.h:1276</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a34a92072122412c6020d4afb43725bf4"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a34a92072122412c6020d4afb43725bf4">llvm::PatternMatch::m_ConstantInt</a></div><div class="ttdeci">class_match&lt; ConstantInt &gt; m_ConstantInt()</div><div class="ttdoc">m_ConstantInt() - Match an arbitrary ConstantInt and ignore it. </div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00072">PatternMatch.h:72</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a842176a2c8c60a94bc788454b0828ea2"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a842176a2c8c60a94bc788454b0828ea2">llvm::Intrinsic::getDeclaration</a></div><div class="ttdeci">Function * getDeclaration(Module *M, ID id, ArrayRef&lt; Type * &gt; Tys=None)</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00683">Function.cpp:683</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_af254e0a0a7277f1b415dbabc3ee37fb6"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#af254e0a0a7277f1b415dbabc3ee37fb6">llvm::PatternMatch::m_Select</a></div><div class="ttdeci">SelectClass_match&lt; Cond, LHS, RHS &gt; m_Select(const Cond &amp;C, const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00630">PatternMatch.h:630</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90afb28523b72573e3468cd1ce52453f221"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90afb28523b72573e3468cd1ce52453f221">llvm::Intrinsic::bswap</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l00350">Intrinsics.h:350</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ae855357b6c5e6e7ed1869272708a3a84"><div class="ttname"><a href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">llvm::Value::takeName</a></div><div class="ttdeci">void takeName(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00239">Value.cpp:239</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html_a57781e19c89adc7ec1a5da6d156aced0"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a57781e19c89adc7ec1a5da6d156aced0">llvm::BinaryOperator::getNotArgument</a></div><div class="ttdeci">static const Value * getNotArgument(const Value *BinOp)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l01980">Instructions.cpp:1980</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a407ab30fb284068600e0cba2677640c2"><div class="ttname"><a href="classllvm_1_1Instruction.html#a407ab30fb284068600e0cba2677640c2">llvm::Instruction::isShift</a></div><div class="ttdeci">bool isShift()</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00088">Instruction.h:88</a></div></div>
<div class="ttc" id="InstCombineAndOrXor_8cpp_html_aea6495ab03039b1ee2bfecf5e1d5ae3c"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#aea6495ab03039b1ee2bfecf5e1d5ae3c">CollectBSwapParts</a></div><div class="ttdeci">static bool CollectBSwapParts(Value *V, int OverallLeftShift, uint32_t ByteMask, SmallVectorImpl&lt; Value * &gt; &amp;ByteValues)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l01390">InstCombineAndOrXor.cpp:1390</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a44518f3fa0762cd605ec7795621775a4"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a44518f3fa0762cd605ec7795621775a4">llvm::InstCombiner::FoldOrOfICmps</a></div><div class="ttdeci">Value * FoldOrOfICmps(ICmpInst *LHS, ICmpInst *RHS)</div><div class="ttdoc">FoldOrOfICmps - Fold (icmp)|(icmp) if possible. </div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l01564">InstCombineAndOrXor.cpp:1564</a></div></div>
<div class="ttc" id="classllvm_1_1CastInst_html_a0f7dea9550778374905e12da6d6ba8a8"><div class="ttname"><a href="classllvm_1_1CastInst.html#a0f7dea9550778374905e12da6d6ba8a8">llvm::CastInst::Create</a></div><div class="ttdeci">static CastInst * Create(Instruction::CastOps, Value *S, Type *Ty, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdoc">Construct any of the CastInst subclasses. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l02350">Instructions.cpp:2350</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_adcb96bd09d7c75c7669fa5f9d1190899"><div class="ttname"><a href="classllvm_1_1APInt.html#adcb96bd09d7c75c7669fa5f9d1190899">llvm::APInt::getHighBitsSet</a></div><div class="ttdeci">static APInt getHighBitsSet(unsigned numBits, unsigned hiBitsSet)</div><div class="ttdoc">Get a value with high bits set. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00510">APInt.h:510</a></div></div>
<div class="ttc" id="InstCombineAndOrXor_8cpp_html_aa9c705ecec80ebd584bb3d54b48f7ee1afb2ea884e4e94dd5f644bf5fc410580a"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1afb2ea884e4e94dd5f644bf5fc410580a">FoldMskICmp_Mask_NotAllZeroes</a></div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00415">InstCombineAndOrXor.cpp:415</a></div></div>
<div class="ttc" id="InstCombineAndOrXor_8cpp_html_a7627ec3ea1e8ae5e84826e213b917abc"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#a7627ec3ea1e8ae5e84826e213b917abc">getFCmpValue</a></div><div class="ttdeci">static Value * getFCmpValue(bool isordered, unsigned code, Value *LHS, Value *RHS, InstCombiner::BuilderTy *Builder)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00108">InstCombineAndOrXor.cpp:108</a></div></div>
<div class="ttc" id="README__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A,*B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00091">README_ALTIVEC.txt:91</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a3bd5e6108cd2c28c267d70e631a7b11a"><div class="ttname"><a href="classllvm_1_1Type.html#a3bd5e6108cd2c28c267d70e631a7b11a">llvm::Type::isIntOrIntVectorTy</a></div><div class="ttdeci">bool isIntOrIntVectorTy() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00204">Type.h:204</a></div></div>
<div class="ttc" id="namespacellvm_1_1AArch64ISD_html_a246d89cb58f606179b1435937830bbdca84e96c468affe3b1fd3076b4fc5d063e"><div class="ttname"><a href="namespacellvm_1_1AArch64ISD.html#a246d89cb58f606179b1435937830bbdca84e96c468affe3b1fd3076b4fc5d063e">llvm::AArch64ISD::Ret</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64ISelLowering_8h_source.html#l00060">AArch64ISelLowering.h:60</a></div></div>
<div class="ttc" id="InstCombineAndOrXor_8cpp_html_aa9c705ecec80ebd584bb3d54b48f7ee1aa8d5b5f3227910eddb03cce79f461af2"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1aa8d5b5f3227910eddb03cce79f461af2">FoldMskICmp_AMask_NotMixed</a></div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00417">InstCombineAndOrXor.cpp:417</a></div></div>
<div class="ttc" id="namespacellvm_1_1HexagonISD_html_aa640667f875feccdb3cc643baff441f1a144f7e8227378979bf13646688174ed9"><div class="ttname"><a href="namespacellvm_1_1HexagonISD.html#aa640667f875feccdb3cc643baff441f1a144f7e8227378979bf13646688174ed9">llvm::HexagonISD::Lo</a></div><div class="ttdef"><b>Definition:</b> <a href="HexagonISelLowering_8h_source.html#l00043">HexagonISelLowering.h:43</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantRange_html_ae8d42948cae70a75a6485edc5f57e3cb"><div class="ttname"><a href="classllvm_1_1ConstantRange.html#ae8d42948cae70a75a6485edc5f57e3cb">llvm::ConstantRange::intersectWith</a></div><div class="ttdeci">ConstantRange intersectWith(const ConstantRange &amp;CR) const </div><div class="ttdef"><b>Definition:</b> <a href="ConstantRange_8cpp_source.html#l00261">ConstantRange.cpp:261</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00044">Type.h:44</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a42569041ddafba7d40243e126af07f42"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">llvm::PatternMatch::m_Or</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Or &gt; m_Or(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00473">PatternMatch.h:473</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a6f725580f7834e2ca90762965866dad4"><div class="ttname"><a href="classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">llvm::Type::isVectorTy</a></div><div class="ttdeci">bool isVectorTy() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00229">Type.h:229</a></div></div>
<div class="ttc" id="classllvm_1_1ICmpInst_html_a9adf718c253dc7c1c7e859265cd3fc3d"><div class="ttname"><a href="classllvm_1_1ICmpInst.html#a9adf718c253dc7c1c7e859265cd3fc3d">llvm::ICmpInst::isEquality</a></div><div class="ttdeci">bool isEquality() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01003">Instructions.h:1003</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_adefbb946b174533d5eb8db503b1f4ffa"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#adefbb946b174533d5eb8db503b1f4ffa">L2</a></div><div class="ttdeci">add sub stmia L5 ldr L2</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00197">Target/ARM/README.txt:197</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a60331bf600f121b59b88e96130e469f9"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a60331bf600f121b59b88e96130e469f9">llvm::InstCombiner::FoldAndOfFCmps</a></div><div class="ttdeci">Value * FoldAndOfFCmps(FCmpInst *LHS, FCmpInst *RHS)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l01020">InstCombineAndOrXor.cpp:1020</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_ae6d2fbefb704650e3b01a0bbcdd43ffa"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#ae6d2fbefb704650e3b01a0bbcdd43ffa">llvm::ConstantExpr::getAnd</a></div><div class="ttdeci">static Constant * getAnd(Constant *C1, Constant *C2)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02099">Constants.cpp:2099</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_a22f056804d2b9882f74adc905872bc39"><div class="ttname"><a href="namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">llvm::APIntOps::Or</a></div><div class="ttdeci">APInt Or(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise OR function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01845">APInt.h:1845</a></div></div>
<div class="ttc" id="namespacellvm_1_1HexagonISD_html_aa640667f875feccdb3cc643baff441f1ab53c716337bbeea9ba39b5fa32d60303"><div class="ttname"><a href="namespacellvm_1_1HexagonISD.html#aa640667f875feccdb3cc643baff441f1ab53c716337bbeea9ba39b5fa32d60303">llvm::HexagonISD::Hi</a></div><div class="ttdef"><b>Definition:</b> <a href="HexagonISelLowering_8h_source.html#l00043">HexagonISelLowering.h:43</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantFP_html"><div class="ttname"><a href="classllvm_1_1ConstantFP.html">llvm::ConstantFP</a></div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00232">Constants.h:232</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_afc7c4d88d09cba0c5e920f8a3a3ace55"><div class="ttname"><a href="namespacellvm_1_1APIntOps.html#afc7c4d88d09cba0c5e920f8a3a3ace55">llvm::APIntOps::Xor</a></div><div class="ttdeci">APInt Xor(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise XOR function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01850">APInt.h:1850</a></div></div>
<div class="ttc" id="InstCombineAndOrXor_8cpp_html_a32ead1eb9f9f19667b0f79d01214612b"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#a32ead1eb9f9f19667b0f79d01214612b">getFCmpCode</a></div><div class="ttdeci">static unsigned getFCmpCode(FCmpInst::Predicate CC, bool &amp;isOrdered)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00069">InstCombineAndOrXor.cpp:69</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a2d9861feadd3a09792967a012559e7b2"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">llvm::PatternMatch::m_Specific</a></div><div class="ttdeci">specificval_ty m_Specific(const Value *V)</div><div class="ttdoc">m_Specific - Match if we have a specific specified value. </div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00323">PatternMatch.h:323</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_aab8e16a35183ce39aad394714087bcff"><div class="ttname"><a href="classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">llvm::Instruction::getDebugLoc</a></div><div class="ttdeci">const DebugLoc &amp; getDebugLoc() const </div><div class="ttdoc">getDebugLoc - Return the debug location for this node as a DebugLoc. </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00178">Instruction.h:178</a></div></div>
<div class="ttc" id="classllvm_1_1ICmpInst_html"><div class="ttname"><a href="classllvm_1_1ICmpInst.html">llvm::ICmpInst</a></div><div class="ttdoc">Represent an integer comparison operator. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00911">Instructions.h:911</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">llvm::CmpInst::Predicate</a></div><div class="ttdeci">Predicate</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00651">InstrTypes.h:651</a></div></div>
<div class="ttc" id="InstCombineAndOrXor_8cpp_html_afa152a1c292e3c6e4c11ac7ac34c38c3"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#afa152a1c292e3c6e4c11ac7ac34c38c3">isFreeToInvert</a></div><div class="ttdeci">static bool isFreeToInvert(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00035">InstCombineAndOrXor.cpp:35</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_ad081689e23a8f5dea78dedd623d6a8f8"><div class="ttname"><a href="classllvm_1_1APInt.html#ad081689e23a8f5dea78dedd623d6a8f8">llvm::APInt::getBitWidth</a></div><div class="ttdeci">unsigned getBitWidth() const </div><div class="ttdoc">Return the number of bits in the APInt. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01252">APInt.h:1252</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00088">User.h:88</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05aa3213b645e029aba8bb1b85213607d5e"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa3213b645e029aba8bb1b85213607d5e">llvm::CmpInst::FCMP_ORD</a></div><div class="ttdoc">0 1 1 1 True if ordered (no nans) </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00660">InstrTypes.h:660</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html_a454128b3938d8b6c6305e9c74204cc53"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a454128b3938d8b6c6305e9c74204cc53">llvm::BinaryOperator::isNot</a></div><div class="ttdeci">static bool isNot(const Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l01945">Instructions.cpp:1945</a></div></div>
<div class="ttc" id="classllvm_1_1IntegerType_html"><div class="ttname"><a href="classllvm_1_1IntegerType.html">llvm::IntegerType</a></div><div class="ttdoc">Integer representation type. </div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00037">DerivedTypes.h:37</a></div></div>
<div class="ttc" id="Target_2PowerPC_2README_8txt_html_afc7ca55ad1da67847ecd4b99ef64dc84"><div class="ttname"><a href="Target_2PowerPC_2README_8txt.html#afc7ca55ad1da67847ecd4b99ef64dc84">CC</a></div><div class="ttdeci">which only computes the address of bar double int Z void if you have a function since the bit double ate up the argument bytes for r4 and r5 The trick then would be to shuffle the argument order for functions we can internalize so that the maximum number of integers pointers get passed in regs before you see any of the fp arguments Instead of implementing it would actually probably be easier to just implement a PPC where we could do whatever we wanted to the CC</div><div class="ttdef"><b>Definition:</b> <a href="Target_2PowerPC_2README_8txt_source.html#l00247">Target/PowerPC/README.txt:247</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_ac9d5eb700dcdf604653d12d8caf4a0fb"><div class="ttname"><a href="classllvm_1_1APInt.html#ac9d5eb700dcdf604653d12d8caf4a0fb">llvm::APInt::countPopulation</a></div><div class="ttdeci">unsigned countPopulation() const </div><div class="ttdoc">Count the number of bits set. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01394">APInt.h:1394</a></div></div>
<div class="ttc" id="InstCombineAndOrXor_8cpp_html_a09c36c07a47775cef8f8e93d8090d919"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#a09c36c07a47775cef8f8e93d8090d919">conjugateICmpMask</a></div><div class="ttdeci">static unsigned conjugateICmpMask(unsigned Mask)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00495">InstCombineAndOrXor.cpp:495</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a8afd4995fae596b2c86eeed85b3d388b"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">llvm::CmpInst::getPredicate</a></div><div class="ttdeci">Predicate getPredicate() const </div><div class="ttdoc">Return the predicate for this instruction. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00714">InstrTypes.h:714</a></div></div>
<div class="ttc" id="CmpInstAnalysis_8h_html"><div class="ttname"><a href="CmpInstAnalysis_8h.html">CmpInstAnalysis.h</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_a5b43a866f0fca605556f0f69f70c522a"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a5b43a866f0fca605556f0f69f70c522a">llvm::ConstantExpr::getNot</a></div><div class="ttdeci">static Constant * getNot(Constant *C)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02034">Constants.cpp:2034</a></div></div>
<div class="ttc" id="InstCombineAndOrXor_8cpp_html_aa9c705ecec80ebd584bb3d54b48f7ee1a6bab48061337e60eb9c79650fd8e08e2"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a6bab48061337e60eb9c79650fd8e08e2">FoldMskICmp_AMask_Mixed</a></div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00416">InstCombineAndOrXor.cpp:416</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_a4d51384de6e1798bb6aa875aebeea9f0"><div class="ttname"><a href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">llvm::Constant::getAllOnesValue</a></div><div class="ttdeci">static Constant * getAllOnesValue(Type *Ty)</div><div class="ttdoc">Get the all ones value. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00163">Constants.cpp:163</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a0a33c71e3c5e8f128ca47539a85962f5"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a0a33c71e3c5e8f128ca47539a85962f5">llvm::CmpInst::FCMP_TRUE</a></div><div class="ttdoc">1 1 1 1 Always true (always folded) </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00668">InstrTypes.h:668</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantRange_html_ae02fb0a19012613dcf2f9f24a1a3cf99"><div class="ttname"><a href="classllvm_1_1ConstantRange.html#ae02fb0a19012613dcf2f9f24a1a3cf99">llvm::ConstantRange::isEmptySet</a></div><div class="ttdeci">bool isEmptySet() const </div><div class="ttdef"><b>Definition:</b> <a href="ConstantRange_8cpp_source.html#l00125">ConstantRange.cpp:125</a></div></div>
<div class="ttc" id="InstCombineAndOrXor_8cpp_html_aa9c705ecec80ebd584bb3d54b48f7ee1af9642ecdbd6386078c05024c75a8b585"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1af9642ecdbd6386078c05024c75a8b585">FoldMskICmp_AMask_NotAllOnes</a></div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00411">InstCombineAndOrXor.cpp:411</a></div></div>
<div class="ttc" id="classllvm_1_1ICmpInst_html_acbc778ccd1faf4e95963c9a980acc7a5"><div class="ttname"><a href="classllvm_1_1ICmpInst.html#acbc778ccd1faf4e95963c9a980acc7a5">llvm::ICmpInst::swapOperands</a></div><div class="ttdeci">void swapOperands()</div><div class="ttdoc">Swap operands and adjust predicate. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01032">Instructions.h:1032</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_af85a4828b6b5a8de7fc0a55cc0e5b52f"><div class="ttname"><a href="classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">All values hold a context through their type. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00517">Value.cpp:517</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_af3deb6522c4fe2043fe07af2ec90190c"><div class="ttname"><a href="classllvm_1_1APInt.html#af3deb6522c4fe2043fe07af2ec90190c">llvm::APInt::isPowerOf2</a></div><div class="ttdeci">bool isPowerOf2() const </div><div class="ttdoc">Check if this APInt&amp;#39;s value is a power of two greater than zero. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00390">APInt.h:390</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a396dda2571cd3c575f1d9cb44dc2cc09"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a396dda2571cd3c575f1d9cb44dc2cc09">llvm::CmpInst::FCMP_ULE</a></div><div class="ttdoc">1 1 0 1 True if unordered, less than, or equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00666">InstrTypes.h:666</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">llvm::CmpInst::ICMP_SGT</a></div><div class="ttdoc">signed greater than </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00678">InstrTypes.h:678</a></div></div>
<div class="ttc" id="InstCombineAndOrXor_8cpp_html_aa9c705ecec80ebd584bb3d54b48f7ee1a1932a1cae8878c1e59fff843ded5af4a"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a1932a1cae8878c1e59fff843ded5af4a">FoldMskICmp_BMask_AllOnes</a></div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00412">InstCombineAndOrXor.cpp:412</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a9f6faadfd61713844a89e94d20129cae"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a9f6faadfd61713844a89e94d20129cae">llvm::InstCombiner::visitAnd</a></div><div class="ttdeci">Instruction * visitAnd(BinaryOperator &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l01098">InstCombineAndOrXor.cpp:1098</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html_a861226dd056dd2438da26760b8e7a9a0"><div class="ttname"><a href="classllvm_1_1CallInst.html#a861226dd056dd2438da26760b8e7a9a0">llvm::CallInst::Create</a></div><div class="ttdeci">static CallInst * Create(Value *Func, ArrayRef&lt; Value * &gt; Args, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01187">Instructions.h:1187</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_aaab494a433fbb23bc68393ee8bcfc5ac"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">llvm::PatternMatch::m_SExt</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::SExt &gt; m_SExt(const OpTy &amp;Op)</div><div class="ttdoc">m_SExt </div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00685">PatternMatch.h:685</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_ad3d358e03c6228af2d19b2e67028886e"><div class="ttname"><a href="classllvm_1_1APInt.html#ad3d358e03c6228af2d19b2e67028886e">llvm::APInt::ugt</a></div><div class="ttdeci">bool ugt(const APInt &amp;RHS) const </div><div class="ttdoc">Unsigned greather than comparison. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01084">APInt.h:1084</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a4c399f525bbcf03d72af4b303e6eeca8"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a4c399f525bbcf03d72af4b303e6eeca8">llvm::CmpInst::FCMP_OGT</a></div><div class="ttdoc">0 0 1 0 True if ordered and greater than </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00655">InstrTypes.h:655</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html_a88505baf41407782678a5df1702d2d31"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">llvm::BinaryOperator::getOpcode</a></div><div class="ttdeci">BinaryOps getOpcode() const </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00326">InstrTypes.h:326</a></div></div>
<div class="ttc" id="ConstantRange_8h_html"><div class="ttname"><a href="ConstantRange_8h.html">ConstantRange.h</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="namespacellvm_1_1tgtok_html_abbc5259d649363016626e2529fabe0c5a4a6621856674f376740a1ba6efd809e3"><div class="ttname"><a href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a4a6621856674f376740a1ba6efd809e3">llvm::tgtok::Code</a></div><div class="ttdef"><b>Definition:</b> <a href="TGLexer_8h_source.html#l00046">TGLexer.h:46</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_a2a2df5a25b9c703e74e82b48a75d0c3d"><div class="ttname"><a href="Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a></div><div class="ttdeci">instcombine should handle this C2 when C1</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00300">Target/README.txt:300</a></div></div>
<div class="ttc" id="InstCombineAndOrXor_8cpp_html_aa9c705ecec80ebd584bb3d54b48f7ee1ac406b89f196729d12023595c30b244d4"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1ac406b89f196729d12023595c30b244d4">FoldMskICmp_Mask_AllZeroes</a></div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00414">InstCombineAndOrXor.cpp:414</a></div></div>
<div class="ttc" id="README-Thumb_8txt_html_a5d98a8b5139e56ebf0d2ff4cbaa0dc5e"><div class="ttname"><a href="README-Thumb_8txt.html#a5d98a8b5139e56ebf0d2ff4cbaa0dc5e">code</a></div><div class="ttdeci">*Add support for compiling functions in both ARM and Thumb then taking the smallest *Add support for compiling individual basic blocks in thumb when in a larger ARM function This can be used for presumed cold code</div><div class="ttdef"><b>Definition:</b> <a href="README-Thumb_8txt_source.html#l00005">README-Thumb.txt:5</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00880">SmallVector.h:880</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a75016d5872d90adf89cc1cbf5763f474"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a75016d5872d90adf89cc1cbf5763f474">llvm::CmpInst::FCMP_ULT</a></div><div class="ttdoc">1 1 0 0 True if unordered or less than </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00665">InstrTypes.h:665</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00111">Value.h:111</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a8ab493fbb03398d7e17bf2000328fdf9"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a8ab493fbb03398d7e17bf2000328fdf9">llvm::PatternMatch::m_LogicalShift</a></div><div class="ttdeci">BinOp2_match&lt; LHS, RHS, Instruction::LShr, Instruction::Shl &gt; m_LogicalShift(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">m_LogicalShift - Matches LShr or Shl. </div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00535">PatternMatch.h:535</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantRange_html"><div class="ttname"><a href="classllvm_1_1ConstantRange.html">llvm::ConstantRange</a></div><div class="ttdef"><b>Definition:</b> <a href="ConstantRange_8h_source.html#l00042">ConstantRange.h:42</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html">llvm::BinaryOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00138">InstrTypes.h:138</a></div></div>
<div class="ttc" id="InstCombineAndOrXor_8cpp_html_ac45a6ef2ab6b7ff3d7512fa9b61dd941"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#ac45a6ef2ab6b7ff3d7512fa9b61dd941">SubOne</a></div><div class="ttdeci">static Constant * SubOne(ConstantInt *C)</div><div class="ttdoc">SubOne - Subtract one from a ConstantInt. </div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00029">InstCombineAndOrXor.cpp:29</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">llvm::CmpInst::ICMP_SLT</a></div><div class="ttdoc">signed less than </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00680">InstrTypes.h:680</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_ab5d3f9900a0284e85ee7a1520a4eeb60"><div class="ttname"><a href="classllvm_1_1CmpInst.html#ab5d3f9900a0284e85ee7a1520a4eeb60">llvm::CmpInst::getSwappedPredicate</a></div><div class="ttdeci">Predicate getSwappedPredicate() const </div><div class="ttdoc">Return the predicate as if the operands were swapped. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00753">InstrTypes.h:753</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a9105541412dab869e18b3cceebfff07d"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool isSigned=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00492">Constants.cpp:492</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_ad736fb9b585509388546c12617def38f"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#ad736fb9b585509388546c12617def38f">llvm::ConstantInt::getSigned</a></div><div class="ttdeci">static ConstantInt * getSigned(IntegerType *Ty, int64_t V)</div><div class="ttdoc">Get a ConstantInt for a specific signed value. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00507">Constants.cpp:507</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_ad4ea4748170f687710a54c919dde5625"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#ad4ea4748170f687710a54c919dde5625">llvm::ConstantInt::isZero</a></div><div class="ttdeci">bool isZero() const </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00160">Constants.h:160</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_aca5cab6b8d2be24d0c857cc4a831feec"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#aca5cab6b8d2be24d0c857cc4a831feec">llvm::ConstantExpr::getTrunc</a></div><div class="ttdeci">static Constant * getTrunc(Constant *C, Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01538">Constants.cpp:1538</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_ad7ec8482f19e8e86e3de573b060a17e5"><div class="ttname"><a href="classllvm_1_1Constant.html#ad7ec8482f19e8e86e3de573b060a17e5">llvm::Constant::isNullValue</a></div><div class="ttdeci">bool isNullValue() const </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00075">Constants.cpp:75</a></div></div>
<div class="ttc" id="namespacellvm_html_ae1b36d4d04580bacd19ea0c6f039d222"><div class="ttname"><a href="namespacellvm.html#ae1b36d4d04580bacd19ea0c6f039d222">llvm::SimplifyXorInst</a></div><div class="ttdeci">Value * SimplifyXorInst(Value *LHS, Value *RHS, const DataLayout *TD=0, const TargetLibraryInfo *TLI=0, const DominatorTree *DT=0)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l01675">InstructionSimplify.cpp:1675</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a82dbbd8e3688b0bc1eedb338864d0d0c"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">llvm::ConstantInt::getTrue</a></div><div class="ttdeci">static ConstantInt * getTrue(LLVMContext &amp;Context)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00438">Constants.cpp:438</a></div></div>
<div class="ttc" id="namespacellvm_html_a0da24b52fafe3ad4e683353ac401f7b9"><div class="ttname"><a href="namespacellvm.html#a0da24b52fafe3ad4e683353ac401f7b9">llvm::PredicatesFoldable</a></div><div class="ttdeci">bool PredicatesFoldable(CmpInst::Predicate p1, CmpInst::Predicate p2)</div><div class="ttdef"><b>Definition:</b> <a href="CmpInstAnalysis_8cpp_source.html#l00092">CmpInstAnalysis.cpp:92</a></div></div>
<div class="ttc" id="InstCombineAndOrXor_8cpp_html_aa75e7b9606d30b9bde1384efd6917580"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#aa75e7b9606d30b9bde1384efd6917580">decomposeBitTestICmp</a></div><div class="ttdeci">static bool decomposeBitTestICmp(const ICmpInst *I, ICmpInst::Predicate &amp;Pred, Value *&amp;X, Value *&amp;Y, Value *&amp;Z)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00514">InstCombineAndOrXor.cpp:514</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a5fa9b8e1842b354f64c1ba6be0a4a17f"><div class="ttname"><a href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">llvm::User::setOperand</a></div><div class="ttdeci">void setOperand(unsigned i, Value *Val)</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00092">User.h:92</a></div></div>
<div class="ttc" id="namespacestd_html_ab8424022895aee3e366fb9a32f2883cb"><div class="ttname"><a href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a></div><div class="ttdeci">void swap(llvm::BitVector &amp;LHS, llvm::BitVector &amp;RHS)</div><div class="ttdoc">Implement std::swap in terms of BitVector swap. </div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00591">BitVector.h:591</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a2751d6136a2819749dcef65dc19a4246"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a2751d6136a2819749dcef65dc19a4246">llvm::CmpInst::ICMP_SLE</a></div><div class="ttdoc">signed less or equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00681">InstrTypes.h:681</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html"><div class="ttname"><a href="classllvm_1_1APInt.html">llvm::APInt</a></div><div class="ttdoc">Class for arbitrary precision integers. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00075">APInt.h:75</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a6e328feb83afa5cf1c966d6704e43fc1"><div class="ttname"><a href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">llvm::Type::isIntegerTy</a></div><div class="ttdeci">bool isIntegerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00196">Type.h:196</a></div></div>
<div class="ttc" id="PatternMatch_8h_html"><div class="ttname"><a href="PatternMatch_8h.html">PatternMatch.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_a684cfe02c582e8d75cd6d457e63e6c25"><div class="ttname"><a href="namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">llvm::APIntOps::And</a></div><div class="ttdeci">APInt And(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise AND function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01840">APInt.h:1840</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_afa29f0cd072ab9b3a2630681ffe5760f"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#afa29f0cd072ab9b3a2630681ffe5760f">llvm::ConstantExpr::getNeg</a></div><div class="ttdeci">static Constant * getNeg(Constant *C, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02021">Constants.cpp:2021</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a21260f8037e665d235ace5718cf68bc4"><div class="ttname"><a href="classllvm_1_1APInt.html#a21260f8037e665d235ace5718cf68bc4">llvm::APInt::isAllOnesValue</a></div><div class="ttdeci">bool isAllOnesValue() const </div><div class="ttdoc">Determine if all bits are set. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00340">APInt.h:340</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a4cd12603c3c76eb84d050733f6ddc8b7"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a4cd12603c3c76eb84d050733f6ddc8b7">llvm::CmpInst::Create</a></div><div class="ttdeci">static CmpInst * Create(OtherOps Op, unsigned short predicate, Value *S1, Value *S2, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdoc">Create a CmpInst. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l03035">Instructions.cpp:3035</a></div></div>
<div class="ttc" id="namespacellvm_html_a61c0122a3a7683e94bc403c645566788"><div class="ttname"><a href="namespacellvm.html#a61c0122a3a7683e94bc403c645566788">llvm::getICmpValue</a></div><div class="ttdeci">Value * getICmpValue(bool Sign, unsigned Code, Value *LHS, Value *RHS, CmpInst::Predicate &amp;NewICmpPred)</div><div class="ttdef"><b>Definition:</b> <a href="CmpInstAnalysis_8cpp_source.html#l00072">CmpInstAnalysis.cpp:72</a></div></div>
<div class="ttc" id="InstCombineAndOrXor_8cpp_html_aa9c705ecec80ebd584bb3d54b48f7ee1a22226cf1a76711e1bb4ffceaa452f654"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a22226cf1a76711e1bb4ffceaa452f654">FoldMskICmp_BMask_NotAllOnes</a></div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00413">InstCombineAndOrXor.cpp:413</a></div></div>
<div class="ttc" id="Intrinsics_8h_html"><div class="ttname"><a href="Intrinsics_8h.html">Intrinsics.h</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a573bcd571c938fce863525330bbfc4b8"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a573bcd571c938fce863525330bbfc4b8">llvm::CmpInst::ICMP_UGE</a></div><div class="ttdoc">unsigned greater or equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00675">InstrTypes.h:675</a></div></div>
<div class="ttc" id="namespacellvm_html_a35e45224cbdc6cd5bf6a988db6b61e82"><div class="ttname"><a href="namespacellvm.html#a35e45224cbdc6cd5bf6a988db6b61e82">llvm::SimplifyOrInst</a></div><div class="ttdeci">Value * SimplifyOrInst(Value *LHS, Value *RHS, const DataLayout *TD=0, const TargetLibraryInfo *TLI=0, const DominatorTree *DT=0)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l01615">InstructionSimplify.cpp:1615</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantRange_html_a1e2111f6405de8f2b3bd8fff249e2bb1"><div class="ttname"><a href="classllvm_1_1ConstantRange.html#a1e2111f6405de8f2b3bd8fff249e2bb1">llvm::ConstantRange::makeICmpRegion</a></div><div class="ttdeci">static ConstantRange makeICmpRegion(unsigned Pred, const ConstantRange &amp;Other)</div><div class="ttdef"><b>Definition:</b> <a href="ConstantRange_8cpp_source.html#l00052">ConstantRange.cpp:52</a></div></div>
<div class="ttc" id="InstCombineAndOrXor_8cpp_html_aa62fbad44784b52824ea165a4695299f"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#aa62fbad44784b52824ea165a4695299f">dyn_castNotVal</a></div><div class="ttdeci">static Value * dyn_castNotVal(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00051">InstCombineAndOrXor.cpp:51</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="regcomp_8c_html_a0240ac851181b84ac374872dc5434ee4"><div class="ttname"><a href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div><div class="ttdeci">#define N</div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_adc8a4e6a8e701e1924f0293da78badb6"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#adc8a4e6a8e701e1924f0293da78badb6">llvm::ConstantExpr::getOr</a></div><div class="ttdeci">static Constant * getOr(Constant *C1, Constant *C2)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02103">Constants.cpp:2103</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a085b82f074c28030fb8e194377ed2d0c"><div class="ttname"><a href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">llvm::Value::hasOneUse</a></div><div class="ttdeci">bool hasOneUse() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00161">Value.h:161</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a102d0ad36060677286c3aefb812e5512"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a102d0ad36060677286c3aefb812e5512">llvm::SmallVectorImpl::resize</a></div><div class="ttdeci">void resize(unsigned N)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00401">SmallVector.h:401</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a8a80b27ca29fe2076b9bbdee02c65464"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a8a80b27ca29fe2076b9bbdee02c65464">llvm::CmpInst::FCMP_ONE</a></div><div class="ttdoc">0 1 1 0 True if ordered and operands are unequal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00659">InstrTypes.h:659</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a8eafa71cf399da8f21b2af5549f3f9e7"><div class="ttname"><a href="classllvm_1_1Type.html#a8eafa71cf399da8f21b2af5549f3f9e7">llvm::Type::getScalarType</a></div><div class="ttdeci">const Type * getScalarType() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00051">Type.cpp:51</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html_a4a4628e91a9c6a339fa61105614fac76"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a4a4628e91a9c6a339fa61105614fac76">llvm::BinaryOperator::Create</a></div><div class="ttdeci">static BinaryOperator * Create(BinaryOps Op, Value *S1, Value *S2, const Twine &amp;Name=Twine(), Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l01834">Instructions.cpp:1834</a></div></div>
<div class="ttc" id="namespacellvm_1_1A64CC_html_af5804bc0518be9568f73db566e4d6f46a2a6c4724226f9ccea96d35fd4c131af8"><div class="ttname"><a href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2a6c4724226f9ccea96d35fd4c131af8">llvm::A64CC::NV</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00046">AArch64BaseInfo.h:46</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a5a7cfa245af120b44ac8a86143bb9e57"><div class="ttname"><a href="classllvm_1_1Type.html#a5a7cfa245af120b44ac8a86143bb9e57">llvm::Type::getPrimitiveSizeInBits</a></div><div class="ttdeci">unsigned getPrimitiveSizeInBits() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00117">Type.cpp:117</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a959268ceeae23abe5c9ad9e895669d0c"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a959268ceeae23abe5c9ad9e895669d0c">llvm::CmpInst::FCMP_UGT</a></div><div class="ttdoc">1 0 1 0 True if unordered or greater than </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00663">InstrTypes.h:663</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_afb3301fb99a3b118d9fe496faf1b114b"><div class="ttname"><a href="classllvm_1_1CmpInst.html#afb3301fb99a3b118d9fe496faf1b114b">llvm::CmpInst::getOpcode</a></div><div class="ttdeci">OtherOps getOpcode() const </div><div class="ttdoc">Get the opcode casted to the right type. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00709">InstrTypes.h:709</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">llvm::CmpInst::ICMP_EQ</a></div><div class="ttdoc">equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00672">InstrTypes.h:672</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a024db78a5ed74f64666f3ca4955e6eca"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a024db78a5ed74f64666f3ca4955e6eca">llvm::CmpInst::FCMP_OEQ</a></div><div class="ttdoc">0 0 0 1 True if ordered and equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00654">InstrTypes.h:654</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_a9e1fc23a17e97d2d1732e753ae9251ac"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">llvm::GlobalValue::getParent</a></div><div class="ttdeci">Module * getParent()</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00286">GlobalValue.h:286</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00066">Value.h:66</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05ae51609fc6a425f849d37c28cb9bc0344"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ae51609fc6a425f849d37c28cb9bc0344">llvm::CmpInst::FCMP_UGE</a></div><div class="ttdoc">1 0 1 1 True if unordered, greater than, or equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00664">InstrTypes.h:664</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a021bb7c9aad6003fe8089f6327356c6c"><div class="ttname"><a href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">llvm::Instruction::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const </div><div class="ttdoc">getOpcode() returns a member of one of the enums like Instruction::Add. </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00083">Instruction.h:83</a></div></div>
<div class="ttc" id="Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="Target_2X86_2README_8txt_source.html#l00297">Target/X86/README.txt:297</a></div></div>
<div class="ttc" id="InstCombineAndOrXor_8cpp_html_a529ff4b10087991fd0e737adbf94b423"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#a529ff4b10087991fd0e737adbf94b423">getNewICmpValue</a></div><div class="ttdeci">static Value * getNewICmpValue(bool Sign, unsigned Code, Value *LHS, Value *RHS, InstCombiner::BuilderTy *Builder)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00097">InstCombineAndOrXor.cpp:97</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_af0336ea4c7f7f56354b2ca7c8859c1f9"><div class="ttname"><a href="classllvm_1_1APInt.html#af0336ea4c7f7f56354b2ca7c8859c1f9">llvm::APInt::countLeadingZeros</a></div><div class="ttdeci">unsigned countLeadingZeros() const </div><div class="ttdoc">The APInt version of the countLeadingZeros functions in MathExtras.h. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01340">APInt.h:1340</a></div></div>
<div class="ttc" id="namespacellvm_html_af4d1a918800291e75b01ce1447be0e83"><div class="ttname"><a href="namespacellvm.html#af4d1a918800291e75b01ce1447be0e83">llvm::isPowerOf2_32</a></div><div class="ttdeci">bool isPowerOf2_32(uint32_t Value)</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00354">MathExtras.h:354</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">llvm::CmpInst::ICMP_UGT</a></div><div class="ttdoc">unsigned greater than </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00674">InstrTypes.h:674</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a6142fc5662411269a7ca0217f49f338c"><div class="ttname"><a href="classllvm_1_1APInt.html#a6142fc5662411269a7ca0217f49f338c">llvm::APInt::zext</a></div><div class="ttdeci">APInt LLVM_ATTRIBUTE_UNUSED_RESULT zext(unsigned width) const </div><div class="ttdoc">Zero extend to a new width. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l00983">APInt.cpp:983</a></div></div>
<div class="ttc" id="OcamlGCPrinter_8cpp_html_a1bdbcdc4205781eefd549946d40ff378"><div class="ttname"><a href="OcamlGCPrinter_8cpp.html#a1bdbcdc4205781eefd549946d40ff378">Y</a></div><div class="ttdeci">static GCMetadataPrinterRegistry::Add&lt; OcamlGCMetadataPrinter &gt; Y(&quot;ocaml&quot;,&quot;ocaml 3.10-compatible collector&quot;)</div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html_a0ad1d1442a12b21931b730201f58ab5e"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a0ad1d1442a12b21931b730201f58ab5e">llvm::BinaryOperator::CreateNot</a></div><div class="ttdeci">static BinaryOperator * CreateNot(Value *Op, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l01904">Instructions.cpp:1904</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a541533f34077bbbcfb703a90f6d2da9b"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a541533f34077bbbcfb703a90f6d2da9b">llvm::CmpInst::FCMP_OGE</a></div><div class="ttdoc">0 0 1 1 True if ordered and greater than or equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00656">InstrTypes.h:656</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a90cca76dd78688687e0d697679dbc799"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional ldr LCPI1_0 ldr ldr tst movne lsr ldr LCPI1_1 and r0 bx lr it saves an instruction and a register It might be profitable to cse MOVi16 if there are lots of bit immediates with the same bottom half Robert Muth started working on an alternate jump table implementation that does not put the tables in line in the text This is more like the llvm default jump table implementation This might be useful sometime Several revisions of patches are on the mailing beginning while CMP sets them like a subtract Therefore to be able to use CMN for comparisons other than the Z we ll need additional logic to reverse the conditionals associated with the comparison Perhaps a pseudo instruction for the with a post codegen pass to clean up and handle the condition codes See PR5694 for testcase Given the following on int B</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00592">Target/ARM/README.txt:592</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_a1e1ce75d651c76b6869b4218e34618c8"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a1e1ce75d651c76b6869b4218e34618c8">llvm::ConstantExpr::getCast</a></div><div class="ttdeci">static Constant * getCast(unsigned ops, Constant *C, Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01444">Constants.cpp:1444</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_aa9537475b2b94f72ad6d5e8730dc40cb"><div class="ttname"><a href="classllvm_1_1APInt.html#aa9537475b2b94f72ad6d5e8730dc40cb">llvm::APInt::ule</a></div><div class="ttdeci">bool ule(const APInt &amp;RHS) const </div><div class="ttdoc">Unsigned less or equal comparison. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01052">APInt.h:1052</a></div></div>
<div class="ttc" id="namespacellvm_html_a6569d00d31a5d74e563e2f39f82271ab"><div class="ttname"><a href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">llvm::X</a></div><div class="ttdeci">static RegisterPass&lt; NVPTXAllocaHoisting &gt; X(&quot;alloca-hoisting&quot;,&quot;Hoisting alloca instructions in non-entry &quot;&quot;blocks to the entry block&quot;)</div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00052">Instruction.h:52</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_aa96ca2cf0bb1e924523900fb911b0a45"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#aa96ca2cf0bb1e924523900fb911b0a45">llvm::ConstantInt::isOne</a></div><div class="ttdeci">bool isOne() const </div><div class="ttdoc">Determine if the value is one. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00168">Constants.h:168</a></div></div>
<div class="ttc" id="InstCombineAndOrXor_8cpp_html_aed27d8ce11c8fb8b5cac79cc959bd5db"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#aed27d8ce11c8fb8b5cac79cc959bd5db">getTypeOfMaskedICmp</a></div><div class="ttdeci">static unsigned getTypeOfMaskedICmp(Value *A, Value *B, Value *C, ICmpInst::Predicate SCC)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00424">InstCombineAndOrXor.cpp:424</a></div></div>
<div class="ttc" id="InstCombineAndOrXor_8cpp_html_ad6587ec645b65fbd319a8c174842acaa"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#ad6587ec645b65fbd319a8c174842acaa">IsOneHotValue</a></div><div class="ttdeci">static bool IsOneHotValue(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l01548">InstCombineAndOrXor.cpp:1548</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05ae9c013750fff3023001d7e3af8df2d6d"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ae9c013750fff3023001d7e3af8df2d6d">llvm::CmpInst::FCMP_FALSE</a></div><div class="ttdoc">0 0 0 0 Always false (always folded) </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00653">InstrTypes.h:653</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05ac1aa7b798ba11d2e497d5cce6ce6d3dc"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac1aa7b798ba11d2e497d5cce6ce6d3dc">llvm::CmpInst::ICMP_SGE</a></div><div class="ttdoc">signed greater or equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00679">InstrTypes.h:679</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_a9fe0b1e68f897c642cde7e54184f2f4e"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a9fe0b1e68f897c642cde7e54184f2f4e">llvm::ConstantExpr::getXor</a></div><div class="ttdeci">static Constant * getXor(Constant *C1, Constant *C2)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02107">Constants.cpp:2107</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a3c52b6d974a3379d5586414970a767ca"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a3c52b6d974a3379d5586414970a767ca">llvm::InstCombiner::FoldOrOfFCmps</a></div><div class="ttdeci">Value * FoldOrOfFCmps(FCmpInst *LHS, FCmpInst *RHS)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l01830">InstCombineAndOrXor.cpp:1830</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 22:59:00 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
