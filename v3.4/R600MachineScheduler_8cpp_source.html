<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: R600MachineScheduler.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('R600MachineScheduler_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">R600MachineScheduler.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="R600MachineScheduler_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===-- R600MachineScheduler.cpp - R600 Scheduler Interface -*- C++ -*-----===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span><span class="comment"></span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">/// \file</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">/// \brief R600 Machine Scheduler interface</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"></span><span class="comment">//</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div><div class="line"><a name="l00015"></a><span class="lineno"><a class="line" href="R600MachineScheduler_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   15</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;misched&quot;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="R600MachineScheduler_8h.html">R600MachineScheduler.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LiveIntervalAnalysis_8h.html">llvm/CodeGen/LiveIntervalAnalysis.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineRegisterInfo_8h.html">llvm/CodeGen/MachineRegisterInfo.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Pass_8h.html">llvm/Pass.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PassManager_8h.html">llvm/PassManager.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="classllvm_1_1R600SchedStrategy.html#af550715b6c828f4f9dcea69e9a2ebe55">   26</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1R600SchedStrategy.html#af550715b6c828f4f9dcea69e9a2ebe55">R600SchedStrategy::initialize</a>(<a class="code" href="classllvm_1_1ScheduleDAGMI.html">ScheduleDAGMI</a> *dag) {</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;  DAG = dag;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  TII = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classllvm_1_1R600InstrInfo.html">R600InstrInfo</a>*<span class="keyword">&gt;</span>(DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAG.html#a348590624c488b04d0f9e227e6c3960e">TII</a>);</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  TRI = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="structllvm_1_1R600RegisterInfo.html">R600RegisterInfo</a>*<span class="keyword">&gt;</span>(DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAG.html#a418bc6d3f660325fa6d5b9fb269add62">TRI</a>);</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  VLIW5 = !DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAG.html#a5a3d3d075a208011a24a0918b58d7daa">MF</a>.<a class="code" href="classllvm_1_1MachineFunction.html#a6745c3bfdfc5b0643b078b96df2db252">getTarget</a>().<a class="code" href="classllvm_1_1TargetMachine.html#a5af2fed99951774b6a14d30ec6e73792">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1AMDGPUSubtarget.html">AMDGPUSubtarget</a>&gt;().hasCaymanISA();</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  MRI = &amp;DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAG.html#a1b09f4d9c91e25f7bc2ac60b3b929d11">MRI</a>;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  CurInstKind = IDOther;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  CurEmitted = 0;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  OccupedSlotsMask = 31;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  InstKindLimit[IDAlu] = TII-&gt;<a class="code" href="classllvm_1_1R600InstrInfo.html#abb29912c607d99a0dbc42453b3fdeadf">getMaxAlusPerClause</a>();</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  InstKindLimit[IDOther] = 32;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1AMDGPUSubtarget.html">AMDGPUSubtarget</a> &amp;<a class="code" href="namespacellvm_1_1A64DB.html#a6fce8157775f3ec93f326b52b0f1e0f5a4916e736d6b7cc68359b39d5eb50f6db">ST</a> = DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAG.html#a9aa31260fcd6b572eb34528673438c3c">TM</a>.<a class="code" href="classllvm_1_1TargetMachine.html#a5af2fed99951774b6a14d30ec6e73792">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1AMDGPUSubtarget.html">AMDGPUSubtarget</a>&gt;();</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  InstKindLimit[IDFetch] = ST.<a class="code" href="classllvm_1_1AMDGPUSubtarget.html#a8ca0c045c9240fae3ed1a41d189a3c17">getTexVTXClauseSize</a>();</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  AluInstCount = 0;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  FetchInstCount = 0;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;}</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="keywordtype">void</span> R600SchedStrategy::MoveUnits(std::vector&lt;SUnit *&gt; &amp;QSrc,</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                                  std::vector&lt;SUnit *&gt; &amp;QDst)</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;{</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  QDst.insert(QDst.end(), QSrc.begin(), QSrc.end());</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  QSrc.clear();</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;}</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="keyword">static</span></div><div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="R600MachineScheduler_8cpp.html#a2f6f6af2f9b25d2bd1d436e3cba97a57">   53</a></span>&#160;<span class="keywordtype">unsigned</span> <a class="code" href="R600MachineScheduler_8cpp.html#a2f6f6af2f9b25d2bd1d436e3cba97a57">getWFCountLimitedByGPR</a>(<span class="keywordtype">unsigned</span> GPRCount) {</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  assert (GPRCount &amp;&amp; <span class="stringliteral">&quot;GPRCount cannot be 0&quot;</span>);</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <span class="keywordflow">return</span> 248 / GPRCount;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;}</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="classllvm_1_1R600SchedStrategy.html#a4f699427b40664cef6a3ffa1a51f1f9b">   58</a></span>&#160;<a class="code" href="classllvm_1_1SUnit.html">SUnit</a>* <a class="code" href="classllvm_1_1R600SchedStrategy.html#a4f699427b40664cef6a3ffa1a51f1f9b">R600SchedStrategy::pickNode</a>(<span class="keywordtype">bool</span> &amp;IsTopNode) {</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU = 0;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  NextInstKind = IDOther;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  IsTopNode = <span class="keyword">false</span>;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="comment">// check if we might want to switch current clause type</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <span class="keywordtype">bool</span> AllowSwitchToAlu = (CurEmitted &gt;= InstKindLimit[CurInstKind]) ||</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;      (Available[CurInstKind].empty());</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="keywordtype">bool</span> AllowSwitchFromAlu = (CurEmitted &gt;= InstKindLimit[CurInstKind]) &amp;&amp;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;      (!Available[IDFetch].empty() || !Available[IDOther].empty());</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <span class="keywordflow">if</span> (CurInstKind == IDAlu &amp;&amp; !Available[IDFetch].empty()) {</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="comment">// We use the heuristic provided by AMD Accelerated Parallel Processing</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="comment">// OpenCL Programming Guide :</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="comment">// The approx. number of WF that allows TEX inst to hide ALU inst is :</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="comment">// 500 (cycles for TEX) / (AluFetchRatio * 8 (cycles for ALU))</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keywordtype">float</span> ALUFetchRationEstimate = </div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        (AluInstCount + AvailablesAluCount() + Pending[IDAlu].size()) /</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        (FetchInstCount + Available[IDFetch].<a class="code" href="Target_2README_8txt.html#a02def7c594e9f19ff247ed0bf33d1c30">size</a>());</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordtype">unsigned</span> NeededWF = 62.5f / ALUFetchRationEstimate;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>( <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; NeededWF &lt;&lt; <span class="stringliteral">&quot; approx. Wavefronts Required\n&quot;</span> );</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="comment">// We assume the local GPR requirements to be &quot;dominated&quot; by the requirement</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="comment">// of the TEX clause (which consumes 128 bits regs) ; ALU inst before and</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="comment">// after TEX are indeed likely to consume or generate values from/for the</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="comment">// TEX clause.</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="comment">// Available[IDFetch].size() * 2 : GPRs required in the Fetch clause</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="comment">// We assume that fetch instructions are either TnXYZW = TEX TnXYZW (need</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="comment">// one GPR) or TmXYZW = TnXYZW (need 2 GPR).</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="comment">// (TODO : use RegisterPressure)</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="comment">// If we are going too use too many GPR, we flush Fetch instruction to lower</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="comment">// register pressure on 128 bits regs.</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordtype">unsigned</span> NearRegisterRequirement = 2 * Available[IDFetch].size();</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordflow">if</span> (NeededWF &gt; <a class="code" href="R600MachineScheduler_8cpp.html#a2f6f6af2f9b25d2bd1d436e3cba97a57">getWFCountLimitedByGPR</a>(NearRegisterRequirement))</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      AllowSwitchFromAlu = <span class="keyword">true</span>;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  }</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="keywordflow">if</span> (!SU &amp;&amp; ((AllowSwitchToAlu &amp;&amp; CurInstKind != IDAlu) ||</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      (!AllowSwitchFromAlu &amp;&amp; CurInstKind == IDAlu))) {</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="comment">// try to pick ALU</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    SU = pickAlu();</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordflow">if</span> (!SU &amp;&amp; !PhysicalRegCopy.empty()) {</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      SU = PhysicalRegCopy.front();</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;      PhysicalRegCopy.erase(PhysicalRegCopy.begin());</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    }</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordflow">if</span> (SU) {</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;      <span class="keywordflow">if</span> (CurEmitted &gt;= InstKindLimit[IDAlu])</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        CurEmitted = 0;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      NextInstKind = IDAlu;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    }</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  }</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="keywordflow">if</span> (!SU) {</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="comment">// try to pick FETCH</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    SU = pickOther(IDFetch);</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">if</span> (SU)</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      NextInstKind = IDFetch;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  }</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="comment">// try to pick other</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="keywordflow">if</span> (!SU) {</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    SU = pickOther(IDOther);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordflow">if</span> (SU)</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      NextInstKind = IDOther;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  }</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      <span class="keywordflow">if</span> (SU) {</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; ** Pick node **\n&quot;</span>;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#ac28b1882619718b4c6efb97899b845a1">dump</a>(DAG);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;NO NODE \n&quot;</span>;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAG.html#a3d5aacd5fc7d6a739ce913974ed1e53d">SUnits</a>.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;          <span class="keyword">const</span> <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> &amp;<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> = DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAG.html#a3d5aacd5fc7d6a739ce913974ed1e53d">SUnits</a>[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;          <span class="keywordflow">if</span> (!S.<a class="code" href="classllvm_1_1SUnit.html#a8c201d7a769bda1cd75d8d6788123068">isScheduled</a>)</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            S.<a class="code" href="classllvm_1_1SUnit.html#ac28b1882619718b4c6efb97899b845a1">dump</a>(DAG);</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        }</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      }</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  );</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="keywordflow">return</span> SU;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;}</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div><div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="classllvm_1_1R600SchedStrategy.html#ab346f0b0911e71fc4d9ef11a8fdca63a">  141</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1R600SchedStrategy.html#ab346f0b0911e71fc4d9ef11a8fdca63a">R600SchedStrategy::schedNode</a>(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU, <span class="keywordtype">bool</span> IsTopNode) {</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keywordflow">if</span> (NextInstKind != CurInstKind) {</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Instruction Type Switch\n&quot;</span>);</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordflow">if</span> (NextInstKind != IDAlu)</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      OccupedSlotsMask |= 31;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    CurEmitted = 0;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    CurInstKind = NextInstKind;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  }</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="keywordflow">if</span> (CurInstKind == IDAlu) {</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    AluInstCount ++;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordflow">switch</span> (getAluKind(SU)) {</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">case</span> AluT_XYZW:</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      CurEmitted += 4;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordflow">case</span> AluDiscarded:</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">default</span>: {</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      ++CurEmitted;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineOperand.html">MachineInstr::mop_iterator</a> It = SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#adb119d63d924841b0523d67dfdd1bf61">getInstr</a>()-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a0037ac891190e1408b04a48156c3368c">operands_begin</a>(),</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;          E = SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#adb119d63d924841b0523d67dfdd1bf61">getInstr</a>()-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a6e6014fca5895fa5f9487ff7c79678b0">operands_end</a>(); It != E; ++It) {</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = *It;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>() &amp;&amp; MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>() == AMDGPU::ALU_LITERAL_X)</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;          ++CurEmitted;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      }</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    }</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    }</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    ++CurEmitted;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  }</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; CurEmitted &lt;&lt; <span class="stringliteral">&quot; Instructions Emitted in this clause\n&quot;</span>);</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="keywordflow">if</span> (CurInstKind != IDFetch) {</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    MoveUnits(Pending[IDFetch], Available[IDFetch]);</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  } <span class="keywordflow">else</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    FetchInstCount++;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;}</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span></div><div class="line"><a name="l00182"></a><span class="lineno"><a class="line" href="R600MachineScheduler_8cpp.html#a36a05e9e7b987965c35b08b2a864502f">  182</a></span>&#160;<a class="code" href="R600MachineScheduler_8cpp.html#a36a05e9e7b987965c35b08b2a864502f">isPhysicalRegCopy</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>) {</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="keywordflow">if</span> (MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>() != <a class="code" href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8afbad4e5ed543b4325115bdb3aff2f8d9">AMDGPU::COPY</a>)</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="keywordflow">return</span> !<a class="code" href="classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">TargetRegisterInfo::isVirtualRegister</a>(MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(1).<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>());</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;}</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno"><a class="line" href="classllvm_1_1R600SchedStrategy.html#abab4142704b1c59c4ba58a6f7cb3225e">  189</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1R600SchedStrategy.html#abab4142704b1c59c4ba58a6f7cb3225e">R600SchedStrategy::releaseTopNode</a>(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU) {</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Top Releasing &quot;</span>;SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#ac28b1882619718b4c6efb97899b845a1">dump</a>(DAG););</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;}</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="classllvm_1_1R600SchedStrategy.html#a55a371e9989fe188a0ef04f733a319b1">  193</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1R600SchedStrategy.html#a55a371e9989fe188a0ef04f733a319b1">R600SchedStrategy::releaseBottomNode</a>(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU) {</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Bottom Releasing &quot;</span>;SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#ac28b1882619718b4c6efb97899b845a1">dump</a>(DAG););</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="R600MachineScheduler_8cpp.html#a36a05e9e7b987965c35b08b2a864502f">isPhysicalRegCopy</a>(SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#adb119d63d924841b0523d67dfdd1bf61">getInstr</a>())) {</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    PhysicalRegCopy.push_back(SU);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  }</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="keywordtype">int</span> IK = getInstKind(SU);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="comment">// There is no export clause, we can schedule one as soon as its ready</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="keywordflow">if</span> (IK == IDOther)</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    Available[IDOther].push_back(SU);</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    Pending[IK].push_back(SU);</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;}</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="keywordtype">bool</span> R600SchedStrategy::regBelongsToClass(<span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>,</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                                          <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *RC)<span class="keyword"> const </span>{</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">TargetRegisterInfo::isVirtualRegister</a>(<a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>)) {</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordflow">return</span> RC-&gt;<a class="code" href="classllvm_1_1TargetRegisterClass.html#a18659a1da7db1674fa972c28846a3958">contains</a>(<a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">return</span> MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#ab3904d3601dbe52865d5f2e33a06d80d">getRegClass</a>(<a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>) == RC;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  }</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;}</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;R600SchedStrategy::AluKind R600SchedStrategy::getAluKind(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU)<span class="keyword"> const </span>{</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a> = SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#adb119d63d924841b0523d67dfdd1bf61">getInstr</a>();</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="keywordflow">if</span> (TII-&gt;<a class="code" href="classllvm_1_1R600InstrInfo.html#af5ecb6a9739febf2aaaaa4eb2d13f9cb">isTransOnly</a>(MI))</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordflow">return</span> AluTrans;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordflow">switch</span> (MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>()) {</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keywordflow">case</span> AMDGPU::PRED_X:</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      <span class="keywordflow">return</span> AluPredX;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keywordflow">case</span> AMDGPU::INTERP_PAIR_XY:</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">case</span> AMDGPU::INTERP_PAIR_ZW:</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keywordflow">case</span> AMDGPU::INTERP_VEC_LOAD:</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">case</span> AMDGPU::DOT_4:</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      <span class="keywordflow">return</span> AluT_XYZW;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8afbad4e5ed543b4325115bdb3aff2f8d9">AMDGPU::COPY</a>:</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      <span class="keywordflow">if</span> (MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(1).<a class="code" href="classllvm_1_1MachineOperand.html#afbf853e3a0de950e9116ffb9929ceebd">isUndef</a>()) {</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <span class="comment">// MI will become a KILL, don&#39;t considers it in scheduling</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="keywordflow">return</span> AluDiscarded;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      }</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    }</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="comment">// Does the instruction take a whole IG ?</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="comment">// XXX: Is it possible to add a helper function in R600InstrInfo that can</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="comment">// be used here and in R600PacketizerList::isSoloInstruction() ?</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordflow">if</span>(TII-&gt;<a class="code" href="classllvm_1_1R600InstrInfo.html#a74f5793375f2d6bd33bd6ebfc4ca2eb5">isVector</a>(*MI) ||</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        TII-&gt;<a class="code" href="classllvm_1_1R600InstrInfo.html#a75f287b5a8a0375ca8a96ebfee2dd90c">isCubeOp</a>(MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>()) ||</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        TII-&gt;<a class="code" href="classllvm_1_1R600InstrInfo.html#a520bbb1242cd198cb0e5b3d157870f32">isReductionOp</a>(MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>()) ||</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>() == AMDGPU::GROUP_BARRIER) {</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      <span class="keywordflow">return</span> AluT_XYZW;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    }</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">if</span> (TII-&gt;<a class="code" href="classllvm_1_1R600InstrInfo.html#a567a6676662ac8d89a37818491f96f3d">isLDSInstr</a>(MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>())) {</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      <span class="keywordflow">return</span> AluT_X;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    }</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="comment">// Is the result already assigned to a channel ?</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordtype">unsigned</span> DestSubReg = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(0).<a class="code" href="classllvm_1_1MachineOperand.html#aca37b55b20f45c96067bac1d4f1dcb7f">getSubReg</a>();</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordflow">switch</span> (DestSubReg) {</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">case</span> AMDGPU::sub0:</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      <span class="keywordflow">return</span> AluT_X;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">case</span> AMDGPU::sub1:</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      <span class="keywordflow">return</span> AluT_Y;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordflow">case</span> AMDGPU::sub2:</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      <span class="keywordflow">return</span> AluT_Z;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">case</span> AMDGPU::sub3:</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      <span class="keywordflow">return</span> AluT_W;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    }</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="comment">// Is the result already member of a X/Y/Z/W class ?</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="keywordtype">unsigned</span> DestReg = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(0).<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordflow">if</span> (regBelongsToClass(DestReg, &amp;AMDGPU::R600_TReg32_XRegClass) ||</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        regBelongsToClass(DestReg, &amp;AMDGPU::R600_AddrRegClass))</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      <span class="keywordflow">return</span> AluT_X;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">if</span> (regBelongsToClass(DestReg, &amp;AMDGPU::R600_TReg32_YRegClass))</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      <span class="keywordflow">return</span> AluT_Y;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordflow">if</span> (regBelongsToClass(DestReg, &amp;AMDGPU::R600_TReg32_ZRegClass))</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      <span class="keywordflow">return</span> AluT_Z;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordflow">if</span> (regBelongsToClass(DestReg, &amp;AMDGPU::R600_TReg32_WRegClass))</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      <span class="keywordflow">return</span> AluT_W;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordflow">if</span> (regBelongsToClass(DestReg, &amp;AMDGPU::R600_Reg128RegClass))</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      <span class="keywordflow">return</span> AluT_XYZW;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="comment">// LDS src registers cannot be used in the Trans slot.</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordflow">if</span> (TII-&gt;<a class="code" href="classllvm_1_1R600InstrInfo.html#adbb7558feda98e76dc116e0bf4a26222">readsLDSSrcReg</a>(MI))</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      <span class="keywordflow">return</span> AluT_XYZW;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordflow">return</span> AluAny;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;}</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="keywordtype">int</span> R600SchedStrategy::getInstKind(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a>* SU) {</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <span class="keywordtype">int</span> Opcode = SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#adb119d63d924841b0523d67dfdd1bf61">getInstr</a>()-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>();</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="keywordflow">if</span> (TII-&gt;<a class="code" href="classllvm_1_1R600InstrInfo.html#a343c9f04399965fa729dc486f772abba">usesTextureCache</a>(Opcode) || TII-&gt;<a class="code" href="classllvm_1_1R600InstrInfo.html#a46661663b36c2b24c3ade17a417714a4">usesVertexCache</a>(Opcode))</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordflow">return</span> IDFetch;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="keywordflow">if</span> (TII-&gt;<a class="code" href="classllvm_1_1R600InstrInfo.html#af84cb86f767529ac5d4123e1ca51cffd">isALUInstr</a>(Opcode)) {</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keywordflow">return</span> IDAlu;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  }</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <span class="keywordflow">switch</span> (Opcode) {</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <span class="keywordflow">case</span> AMDGPU::PRED_X:</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8afbad4e5ed543b4325115bdb3aff2f8d9">AMDGPU::COPY</a>:</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="keywordflow">case</span> AMDGPU::CONST_COPY:</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <span class="keywordflow">case</span> AMDGPU::INTERP_PAIR_XY:</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <span class="keywordflow">case</span> AMDGPU::INTERP_PAIR_ZW:</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <span class="keywordflow">case</span> AMDGPU::INTERP_VEC_LOAD:</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <span class="keywordflow">case</span> AMDGPU::DOT_4:</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordflow">return</span> IDAlu;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <span class="keywordflow">default</span>:</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">return</span> IDOther;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  }</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;}</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *R600SchedStrategy::PopInst(std::vector&lt;SUnit *&gt; &amp;Q, <span class="keywordtype">bool</span> AnyALU) {</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="keywordflow">if</span> (Q.empty())</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="namespacellvm_1_1sys_1_1path.html#a8fb092ecc42706d8901ee791cd6c90a7">std::vector&lt;SUnit *&gt;::reverse_iterator</a> It = Q.rbegin(), E = Q.rend();</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      It != E; ++It) {</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU = *It;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    InstructionsGroupCandidate.push_back(SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#adb119d63d924841b0523d67dfdd1bf61">getInstr</a>());</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordflow">if</span> (TII-&gt;<a class="code" href="classllvm_1_1R600InstrInfo.html#adac9d699d7dcdfb4f5f92432cb7ac4b4">fitsConstReadLimitations</a>(InstructionsGroupCandidate)</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        &amp;&amp; (!AnyALU || !TII-&gt;<a class="code" href="classllvm_1_1R600InstrInfo.html#a57f33975d02029c2b80eaabde0ca0651">isVectorOnly</a>(SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#adb119d63d924841b0523d67dfdd1bf61">getInstr</a>()))</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    ) {</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      InstructionsGroupCandidate.pop_back();</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      Q.erase((It + 1).<a class="code" href="Target_2SystemZ_2README_8txt.html#aab103049890481bd3a194048b45f5fce">base</a>());</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      <span class="keywordflow">return</span> SU;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      InstructionsGroupCandidate.pop_back();</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    }</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  }</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;}</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="keywordtype">void</span> R600SchedStrategy::LoadAlu() {</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  std::vector&lt;SUnit *&gt; &amp;QSrc = Pending[IDAlu];</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = QSrc.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    AluKind AK = getAluKind(QSrc[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    AvailableAlus[AK].push_back(QSrc[i]);</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  }</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  QSrc.clear();</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;}</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="keywordtype">void</span> R600SchedStrategy::PrepareNextSlot() {</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;New Slot\n&quot;</span>);</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  assert (OccupedSlotsMask &amp;&amp; <span class="stringliteral">&quot;Slot wasn&#39;t filled&quot;</span>);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  OccupedSlotsMask = 0;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="comment">//  if (HwGen == AMDGPUSubtarget::NORTHERN_ISLANDS)</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="comment">//    OccupedSlotsMask |= 16;</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  InstructionsGroupCandidate.clear();</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  LoadAlu();</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;}</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="keywordtype">void</span> R600SchedStrategy::AssignSlot(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a>* <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>, <span class="keywordtype">unsigned</span> Slot) {</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="keywordtype">int</span> DstIndex = TII-&gt;<a class="code" href="classllvm_1_1R600InstrInfo.html#a1804b7629c6b7dfd42443e6e429dbc12">getOperandIdx</a>(MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>(), AMDGPU::OpName::dst);</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <span class="keywordflow">if</span> (DstIndex == -1) {</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  }</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <span class="keywordtype">unsigned</span> DestReg = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(DstIndex).<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  <span class="comment">// PressureRegister crashes if an operand is def and used in the same inst</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <span class="comment">// and we try to constraint its regclass</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineOperand.html">MachineInstr::mop_iterator</a> It = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a0037ac891190e1408b04a48156c3368c">operands_begin</a>(),</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      E = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a6e6014fca5895fa5f9487ff7c79678b0">operands_end</a>(); It != E; ++It) {</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = *It;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>() &amp;&amp; !MO.<a class="code" href="classllvm_1_1MachineOperand.html#a8de7d5cf38939044471c6ee60a01a3df">isDef</a>() &amp;&amp;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>() == DestReg)</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  }</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="comment">// Constrains the regclass of DestReg to assign it to Slot</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <span class="keywordflow">switch</span> (Slot) {</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <span class="keywordflow">case</span> 0:</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a4312b4757ac75bf9be905acfeefd6838">constrainRegClass</a>(DestReg, &amp;AMDGPU::R600_TReg32_XRegClass);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <span class="keywordflow">case</span> 1:</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a4312b4757ac75bf9be905acfeefd6838">constrainRegClass</a>(DestReg, &amp;AMDGPU::R600_TReg32_YRegClass);</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <span class="keywordflow">case</span> 2:</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a4312b4757ac75bf9be905acfeefd6838">constrainRegClass</a>(DestReg, &amp;AMDGPU::R600_TReg32_ZRegClass);</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <span class="keywordflow">case</span> 3:</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a4312b4757ac75bf9be905acfeefd6838">constrainRegClass</a>(DestReg, &amp;AMDGPU::R600_TReg32_WRegClass);</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  }</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;}</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *R600SchedStrategy::AttemptFillSlot(<span class="keywordtype">unsigned</span> Slot, <span class="keywordtype">bool</span> AnyAlu) {</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> AluKind IndexToID[] = {AluT_X, AluT_Y, AluT_Z, AluT_W};</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SlotedSU = PopInst(AvailableAlus[IndexToID[Slot]], AnyAlu);</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <span class="keywordflow">if</span> (SlotedSU)</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordflow">return</span> SlotedSU;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *UnslotedSU = PopInst(AvailableAlus[AluAny], AnyAlu);</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <span class="keywordflow">if</span> (UnslotedSU)</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    AssignSlot(UnslotedSU-&gt;<a class="code" href="classllvm_1_1SUnit.html#adb119d63d924841b0523d67dfdd1bf61">getInstr</a>(), Slot);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="keywordflow">return</span> UnslotedSU;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;}</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="keywordtype">unsigned</span> R600SchedStrategy::AvailablesAluCount()<span class="keyword"> const </span>{</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="keywordflow">return</span> AvailableAlus[AluAny].size() + AvailableAlus[AluT_XYZW].size() +</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      AvailableAlus[AluT_X].size() + AvailableAlus[AluT_Y].size() +</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;      AvailableAlus[AluT_Z].size() + AvailableAlus[AluT_W].size() +</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      AvailableAlus[AluTrans].size() + AvailableAlus[AluDiscarded].size() +</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      AvailableAlus[AluPredX].size();</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;}</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<a class="code" href="classllvm_1_1SUnit.html">SUnit</a>* R600SchedStrategy::pickAlu() {</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="keywordflow">while</span> (AvailablesAluCount() || !Pending[IDAlu].empty()) {</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordflow">if</span> (!OccupedSlotsMask) {</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;      <span class="comment">// Bottom up scheduling : predX must comes first</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      <span class="keywordflow">if</span> (!AvailableAlus[AluPredX].empty()) {</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        OccupedSlotsMask |= 31;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        <span class="keywordflow">return</span> PopInst(AvailableAlus[AluPredX], <span class="keyword">false</span>);</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      }</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      <span class="comment">// Flush physical reg copies (RA will discard them)</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      <span class="keywordflow">if</span> (!AvailableAlus[AluDiscarded].empty()) {</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        OccupedSlotsMask |= 31;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <span class="keywordflow">return</span> PopInst(AvailableAlus[AluDiscarded], <span class="keyword">false</span>);</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      }</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      <span class="comment">// If there is a T_XYZW alu available, use it</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      <span class="keywordflow">if</span> (!AvailableAlus[AluT_XYZW].empty()) {</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        OccupedSlotsMask |= 15;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        <span class="keywordflow">return</span> PopInst(AvailableAlus[AluT_XYZW], <span class="keyword">false</span>);</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      }</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    }</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keywordtype">bool</span> TransSlotOccuped = OccupedSlotsMask &amp; 16;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordflow">if</span> (!TransSlotOccuped &amp;&amp; VLIW5) {</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      <span class="keywordflow">if</span> (!AvailableAlus[AluTrans].empty()) {</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        OccupedSlotsMask |= 16;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        <span class="keywordflow">return</span> PopInst(AvailableAlus[AluTrans], <span class="keyword">false</span>);</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      }</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU = AttemptFillSlot(3, <span class="keyword">true</span>);</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      <span class="keywordflow">if</span> (SU) {</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        OccupedSlotsMask |= 16;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <span class="keywordflow">return</span> SU;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      }</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    }</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> Chan = 3; Chan &gt; -1; --Chan) {</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      <span class="keywordtype">bool</span> isOccupied = OccupedSlotsMask &amp; (1 &lt;&lt; Chan);</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      <span class="keywordflow">if</span> (!isOccupied) {</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU = AttemptFillSlot(Chan, <span class="keyword">false</span>);</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        <span class="keywordflow">if</span> (SU) {</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;          OccupedSlotsMask |= (1 &lt;&lt; Chan);</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;          InstructionsGroupCandidate.push_back(SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#adb119d63d924841b0523d67dfdd1bf61">getInstr</a>());</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;          <span class="keywordflow">return</span> SU;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        }</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      }</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    }</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    PrepareNextSlot();</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  }</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;}</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<a class="code" href="classllvm_1_1SUnit.html">SUnit</a>* R600SchedStrategy::pickOther(<span class="keywordtype">int</span> QID) {</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU = 0;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  std::vector&lt;SUnit *&gt; &amp;AQ = Available[QID];</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <span class="keywordflow">if</span> (AQ.empty()) {</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    MoveUnits(Pending[QID], AQ);</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  }</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <span class="keywordflow">if</span> (!AQ.empty()) {</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    SU = AQ.back();</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    AQ.resize(AQ.size() - 1);</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  }</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <span class="keywordflow">return</span> SU;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;}</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div><div class="ttc" id="classllvm_1_1R600InstrInfo_html_adbb7558feda98e76dc116e0bf4a26222"><div class="ttname"><a href="classllvm_1_1R600InstrInfo.html#adbb7558feda98e76dc116e0bf4a26222">llvm::R600InstrInfo::readsLDSSrcReg</a></div><div class="ttdeci">bool readsLDSSrcReg(const MachineInstr *MI) const </div><div class="ttdef"><b>Definition:</b> <a href="R600InstrInfo_8cpp_source.html#l00241">R600InstrInfo.cpp:241</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a6e6014fca5895fa5f9487ff7c79678b0"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a6e6014fca5895fa5f9487ff7c79678b0">llvm::MachineInstr::operands_end</a></div><div class="ttdeci">mop_iterator operands_end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00285">MachineInstr.h:285</a></div></div>
<div class="ttc" id="classllvm_1_1R600InstrInfo_html_a567a6676662ac8d89a37818491f96f3d"><div class="ttname"><a href="classllvm_1_1R600InstrInfo.html#a567a6676662ac8d89a37818491f96f3d">llvm::R600InstrInfo::isLDSInstr</a></div><div class="ttdeci">bool isLDSInstr(unsigned Opcode) const </div><div class="ttdef"><b>Definition:</b> <a href="R600InstrInfo_8cpp_source.html#l00148">R600InstrInfo.cpp:148</a></div></div>
<div class="ttc" id="classllvm_1_1R600SchedStrategy_html_ab346f0b0911e71fc4d9ef11a8fdca63a"><div class="ttname"><a href="classllvm_1_1R600SchedStrategy.html#ab346f0b0911e71fc4d9ef11a8fdca63a">llvm::R600SchedStrategy::schedNode</a></div><div class="ttdeci">virtual void schedNode(SUnit *SU, bool IsTopNode)</div><div class="ttdef"><b>Definition:</b> <a href="R600MachineScheduler_8cpp_source.html#l00141">R600MachineScheduler.cpp:141</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_a02def7c594e9f19ff247ed0bf33d1c30"><div class="ttname"><a href="Target_2README_8txt.html#a02def7c594e9f19ff247ed0bf33d1c30">size</a></div><div class="ttdeci">i&lt; reg-&gt; size</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00204">Target/README.txt:204</a></div></div>
<div class="ttc" id="Target_2SystemZ_2README_8txt_html_aab103049890481bd3a194048b45f5fce"><div class="ttname"><a href="Target_2SystemZ_2README_8txt.html#aab103049890481bd3a194048b45f5fce">base</a></div><div class="ttdeci">therefore end up llgh r3 lr r0 br r14 but truncating the load would lh r3 br r14 Functions ret i64 and ought to be implemented ngr r0 br r14 but two address optimisations reverse the order of the AND and ngr r2 lgr r0 br r14 CodeGen SystemZ and ll has several examples of this Out of range displacements are usually handled by loading the full address into a register In many cases it would be better to create an anchor point instead E g i64 base</div><div class="ttdef"><b>Definition:</b> <a href="Target_2SystemZ_2README_8txt_source.html#l00147">Target/SystemZ/README.txt:147</a></div></div>
<div class="ttc" id="classllvm_1_1SUnit_html_adb119d63d924841b0523d67dfdd1bf61"><div class="ttname"><a href="classllvm_1_1SUnit.html#adb119d63d924841b0523d67dfdd1bf61">llvm::SUnit::getInstr</a></div><div class="ttdeci">MachineInstr * getInstr() const </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00386">ScheduleDAG.h:386</a></div></div>
<div class="ttc" id="classllvm_1_1R600InstrInfo_html_a74f5793375f2d6bd33bd6ebfc4ca2eb5"><div class="ttname"><a href="classllvm_1_1R600InstrInfo.html#a74f5793375f2d6bd33bd6ebfc4ca2eb5">llvm::R600InstrInfo::isVector</a></div><div class="ttdeci">bool isVector(const MachineInstr &amp;MI) const </div><div class="ttdef"><b>Definition:</b> <a href="R600InstrInfo_8cpp_source.html#l00045">R600InstrInfo.cpp:45</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterInfo_html_ae62c5ea35b71f9020caa94340bc78f37"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">llvm::TargetRegisterInfo::isVirtualRegister</a></div><div class="ttdeci">static bool isVirtualRegister(unsigned Reg)</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00287">TargetRegisterInfo.h:287</a></div></div>
<div class="ttc" id="R600MachineScheduler_8h_html"><div class="ttname"><a href="R600MachineScheduler_8h.html">R600MachineScheduler.h</a></div><div class="ttdoc">R600 Machine Scheduler interface. </div></div>
<div class="ttc" id="namespacellvm_1_1TargetOpcode_html_a348d4259b5fa6a8ecfe94e7ae512e1a8afbad4e5ed543b4325115bdb3aff2f8d9"><div class="ttname"><a href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8afbad4e5ed543b4325115bdb3aff2f8d9">llvm::TargetOpcode::COPY</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetOpcodes_8h_source.html#l00086">TargetOpcodes.h:86</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html">llvm::ScheduleDAGMI</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00275">MachineScheduler.h:275</a></div></div>
<div class="ttc" id="classllvm_1_1R600InstrInfo_html_a57f33975d02029c2b80eaabde0ca0651"><div class="ttname"><a href="classllvm_1_1R600InstrInfo.html#a57f33975d02029c2b80eaabde0ca0651">llvm::R600InstrInfo::isVectorOnly</a></div><div class="ttdeci">bool isVectorOnly(unsigned Opcode) const </div><div class="ttdef"><b>Definition:</b> <a href="R600InstrInfo_8cpp_source.html#l00192">R600InstrInfo.cpp:192</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAG_html_a5a3d3d075a208011a24a0918b58d7daa"><div class="ttname"><a href="classllvm_1_1ScheduleDAG.html#a5a3d3d075a208011a24a0918b58d7daa">llvm::ScheduleDAG::MF</a></div><div class="ttdeci">MachineFunction &amp; MF</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00543">ScheduleDAG.h:543</a></div></div>
<div class="ttc" id="X86DisassemblerDecoder_8h_html_a546839a5c4bcf9f9450967155f48de41"><div class="ttname"><a href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></div><div class="ttdeci">Reg</div><div class="ttdef"><b>Definition:</b> <a href="X86DisassemblerDecoder_8h_source.html#l00428">X86DisassemblerDecoder.h:428</a></div></div>
<div class="ttc" id="classllvm_1_1SUnit_html_a8c201d7a769bda1cd75d8d6788123068"><div class="ttname"><a href="classllvm_1_1SUnit.html#a8c201d7a769bda1cd75d8d6788123068">llvm::SUnit::isScheduled</a></div><div class="ttdeci">bool isScheduled</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00291">ScheduleDAG.h:291</a></div></div>
<div class="ttc" id="classllvm_1_1R600InstrInfo_html_a75f287b5a8a0375ca8a96ebfee2dd90c"><div class="ttname"><a href="classllvm_1_1R600InstrInfo.html#a75f287b5a8a0375ca8a96ebfee2dd90c">llvm::R600InstrInfo::isCubeOp</a></div><div class="ttdeci">bool isCubeOp(unsigned opcode) const </div><div class="ttdef"><b>Definition:</b> <a href="R600InstrInfo_8cpp_source.html#l00123">R600InstrInfo.cpp:123</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_ad8198d6d83af9410d867136e33fbf4b2"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">llvm::MachineOperand::isReg</a></div><div class="ttdeci">bool isReg() const </div><div class="ttdoc">isReg - Tests if this is a MO_Register operand. </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00224">MachineOperand.h:224</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterClass_html"><div class="ttname"><a href="classllvm_1_1TargetRegisterClass.html">llvm::TargetRegisterClass</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00036">TargetRegisterInfo.h:36</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_ab3904d3601dbe52865d5f2e33a06d80d"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#ab3904d3601dbe52865d5f2e33a06d80d">llvm::MachineRegisterInfo::getRegClass</a></div><div class="ttdeci">const TargetRegisterClass * getRegClass(unsigned Reg) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00342">MachineRegisterInfo.h:342</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_afbf853e3a0de950e9116ffb9929ceebd"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#afbf853e3a0de950e9116ffb9929ceebd">llvm::MachineOperand::isUndef</a></div><div class="ttdeci">bool isUndef() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00294">MachineOperand.h:294</a></div></div>
<div class="ttc" id="classllvm_1_1R600SchedStrategy_html_abab4142704b1c59c4ba58a6f7cb3225e"><div class="ttname"><a href="classllvm_1_1R600SchedStrategy.html#abab4142704b1c59c4ba58a6f7cb3225e">llvm::R600SchedStrategy::releaseTopNode</a></div><div class="ttdeci">virtual void releaseTopNode(SUnit *SU)</div><div class="ttdef"><b>Definition:</b> <a href="R600MachineScheduler_8cpp_source.html#l00189">R600MachineScheduler.cpp:189</a></div></div>
<div class="ttc" id="classllvm_1_1R600InstrInfo_html_a46661663b36c2b24c3ade17a417714a4"><div class="ttname"><a href="classllvm_1_1R600InstrInfo.html#a46661663b36c2b24c3ade17a417714a4">llvm::R600InstrInfo::usesVertexCache</a></div><div class="ttdeci">bool usesVertexCache(unsigned Opcode) const </div><div class="ttdef"><b>Definition:</b> <a href="R600InstrInfo_8cpp_source.html#l00204">R600InstrInfo.cpp:204</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a242314c0ae0147d1a7ef54c9bc312616"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">llvm::MachineInstr::getOpcode</a></div><div class="ttdeci">int getOpcode() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00261">MachineInstr.h:261</a></div></div>
<div class="ttc" id="classllvm_1_1R600InstrInfo_html_a343c9f04399965fa729dc486f772abba"><div class="ttname"><a href="classllvm_1_1R600InstrInfo.html#a343c9f04399965fa729dc486f772abba">llvm::R600InstrInfo::usesTextureCache</a></div><div class="ttdeci">bool usesTextureCache(unsigned Opcode) const </div><div class="ttdef"><b>Definition:</b> <a href="R600InstrInfo_8cpp_source.html#l00213">R600InstrInfo.cpp:213</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_a4312b4757ac75bf9be905acfeefd6838"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a4312b4757ac75bf9be905acfeefd6838">llvm::MachineRegisterInfo::constrainRegClass</a></div><div class="ttdeci">const TargetRegisterClass * constrainRegClass(unsigned Reg, const TargetRegisterClass *RC, unsigned MinNumRegs=0)</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00052">MachineRegisterInfo.cpp:52</a></div></div>
<div class="ttc" id="namespacellvm_1_1A64DB_html_a6fce8157775f3ec93f326b52b0f1e0f5a4916e736d6b7cc68359b39d5eb50f6db"><div class="ttname"><a href="namespacellvm_1_1A64DB.html#a6fce8157775f3ec93f326b52b0f1e0f5a4916e736d6b7cc68359b39d5eb50f6db">llvm::A64DB::ST</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00178">AArch64BaseInfo.h:178</a></div></div>
<div class="ttc" id="classllvm_1_1R600SchedStrategy_html_a55a371e9989fe188a0ef04f733a319b1"><div class="ttname"><a href="classllvm_1_1R600SchedStrategy.html#a55a371e9989fe188a0ef04f733a319b1">llvm::R600SchedStrategy::releaseBottomNode</a></div><div class="ttdeci">virtual void releaseBottomNode(SUnit *SU)</div><div class="ttdef"><b>Definition:</b> <a href="R600MachineScheduler_8cpp_source.html#l00193">R600MachineScheduler.cpp:193</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a302e45878c6dc1714334c7ce96d56846"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">llvm::MachineInstr::getOperand</a></div><div class="ttdeci">const MachineOperand &amp; getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00267">MachineInstr.h:267</a></div></div>
<div class="ttc" id="R600MachineScheduler_8cpp_html_a36a05e9e7b987965c35b08b2a864502f"><div class="ttname"><a href="R600MachineScheduler_8cpp.html#a36a05e9e7b987965c35b08b2a864502f">isPhysicalRegCopy</a></div><div class="ttdeci">static bool isPhysicalRegCopy(MachineInstr *MI)</div><div class="ttdef"><b>Definition:</b> <a href="R600MachineScheduler_8cpp_source.html#l00182">R600MachineScheduler.cpp:182</a></div></div>
<div class="ttc" id="classllvm_1_1R600InstrInfo_html_a1804b7629c6b7dfd42443e6e429dbc12"><div class="ttname"><a href="classllvm_1_1R600InstrInfo.html#a1804b7629c6b7dfd42443e6e429dbc12">llvm::R600InstrInfo::getOperandIdx</a></div><div class="ttdeci">int getOperandIdx(const MachineInstr &amp;MI, unsigned Op) const </div><div class="ttdoc">Get the index of Op in the MachineInstr. </div><div class="ttdef"><b>Definition:</b> <a href="R600InstrInfo_8cpp_source.html#l01277">R600InstrInfo.cpp:1277</a></div></div>
<div class="ttc" id="classllvm_1_1R600InstrInfo_html"><div class="ttname"><a href="classllvm_1_1R600InstrInfo.html">llvm::R600InstrInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="R600InstrInfo_8h_source.html#l00032">R600InstrInfo.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAG_html_a9aa31260fcd6b572eb34528673438c3c"><div class="ttname"><a href="classllvm_1_1ScheduleDAG.html#a9aa31260fcd6b572eb34528673438c3c">llvm::ScheduleDAG::TM</a></div><div class="ttdeci">const TargetMachine &amp; TM</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00540">ScheduleDAG.h:540</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_aca37b55b20f45c96067bac1d4f1dcb7f"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#aca37b55b20f45c96067bac1d4f1dcb7f">llvm::MachineOperand::getSubReg</a></div><div class="ttdeci">unsigned getSubReg() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00264">MachineOperand.h:264</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a1b45f45820a60c09244a87eb59824aec"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a></div><div class="ttdeci">add sub stmia L5 ldr r0 bl L_printf $stub Instead of a and a wouldn t it be better to do three moves *Return an aggregate type is even return S</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00197">Target/ARM/README.txt:197</a></div></div>
<div class="ttc" id="LiveIntervalAnalysis_8h_html"><div class="ttname"><a href="LiveIntervalAnalysis_8h.html">LiveIntervalAnalysis.h</a></div></div>
<div class="ttc" id="classllvm_1_1TargetMachine_html_a5af2fed99951774b6a14d30ec6e73792"><div class="ttname"><a href="classllvm_1_1TargetMachine.html#a5af2fed99951774b6a14d30ec6e73792">llvm::TargetMachine::getSubtarget</a></div><div class="ttdeci">const STC &amp; getSubtarget() const </div><div class="ttdef"><b>Definition:</b> <a href="Target_2TargetMachine_8h_source.html#l00132">Target/TargetMachine.h:132</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html"><div class="ttname"><a href="classllvm_1_1MachineOperand.html">llvm::MachineOperand</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00043">MachineOperand.h:43</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a8de7d5cf38939044471c6ee60a01a3df"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a8de7d5cf38939044471c6ee60a01a3df">llvm::MachineOperand::isDef</a></div><div class="ttdeci">bool isDef() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00274">MachineOperand.h:274</a></div></div>
<div class="ttc" id="classllvm_1_1R600SchedStrategy_html_a4f699427b40664cef6a3ffa1a51f1f9b"><div class="ttname"><a href="classllvm_1_1R600SchedStrategy.html#a4f699427b40664cef6a3ffa1a51f1f9b">llvm::R600SchedStrategy::pickNode</a></div><div class="ttdeci">virtual SUnit * pickNode(bool &amp;IsTopNode)</div><div class="ttdef"><b>Definition:</b> <a href="R600MachineScheduler_8cpp_source.html#l00058">R600MachineScheduler.cpp:58</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00101">Debug.cpp:101</a></div></div>
<div class="ttc" id="R600MachineScheduler_8cpp_html_a2f6f6af2f9b25d2bd1d436e3cba97a57"><div class="ttname"><a href="R600MachineScheduler_8cpp.html#a2f6f6af2f9b25d2bd1d436e3cba97a57">getWFCountLimitedByGPR</a></div><div class="ttdeci">static unsigned getWFCountLimitedByGPR(unsigned GPRCount)</div><div class="ttdef"><b>Definition:</b> <a href="R600MachineScheduler_8cpp_source.html#l00053">R600MachineScheduler.cpp:53</a></div></div>
<div class="ttc" id="Pass_8h_html"><div class="ttname"><a href="Pass_8h.html">Pass.h</a></div></div>
<div class="ttc" id="structllvm_1_1R600RegisterInfo_html"><div class="ttname"><a href="structllvm_1_1R600RegisterInfo.html">llvm::R600RegisterInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="R600RegisterInfo_8h_source.html#l00025">R600RegisterInfo.h:25</a></div></div>
<div class="ttc" id="MachineRegisterInfo_8h_html"><div class="ttname"><a href="MachineRegisterInfo_8h.html">MachineRegisterInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html"><div class="ttname"><a href="classllvm_1_1MachineInstr.html">llvm::MachineInstr</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00050">MachineInstr.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAG_html_a418bc6d3f660325fa6d5b9fb269add62"><div class="ttname"><a href="classllvm_1_1ScheduleDAG.html#a418bc6d3f660325fa6d5b9fb269add62">llvm::ScheduleDAG::TRI</a></div><div class="ttdeci">const TargetRegisterInfo * TRI</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00542">ScheduleDAG.h:542</a></div></div>
<div class="ttc" id="classllvm_1_1R600SchedStrategy_html_af550715b6c828f4f9dcea69e9a2ebe55"><div class="ttname"><a href="classllvm_1_1R600SchedStrategy.html#af550715b6c828f4f9dcea69e9a2ebe55">llvm::R600SchedStrategy::initialize</a></div><div class="ttdeci">virtual void initialize(ScheduleDAGMI *dag)</div><div class="ttdoc">Initialize the strategy after building the DAG for a new region. </div><div class="ttdef"><b>Definition:</b> <a href="R600MachineScheduler_8cpp_source.html#l00026">R600MachineScheduler.cpp:26</a></div></div>
<div class="ttc" id="classllvm_1_1AMDGPUSubtarget_html"><div class="ttname"><a href="classllvm_1_1AMDGPUSubtarget.html">llvm::AMDGPUSubtarget</a></div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUSubtarget_8h_source.html#l00029">AMDGPUSubtarget.h:29</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1path_html_a8fb092ecc42706d8901ee791cd6c90a7"><div class="ttname"><a href="namespacellvm_1_1sys_1_1path.html#a8fb092ecc42706d8901ee791cd6c90a7">llvm::sys::path::reverse_iterator</a></div><div class="ttdeci">std::reverse_iterator&lt; const_iterator &gt; reverse_iterator</div><div class="ttdef"><b>Definition:</b> <a href="Path_8h_source.html#l00079">Path.h:79</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_a6745c3bfdfc5b0643b078b96df2db252"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a6745c3bfdfc5b0643b078b96df2db252">llvm::MachineFunction::getTarget</a></div><div class="ttdeci">const TargetMachine &amp; getTarget() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00163">MachineFunction.h:163</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAG_html_a348590624c488b04d0f9e227e6c3960e"><div class="ttname"><a href="classllvm_1_1ScheduleDAG.html#a348590624c488b04d0f9e227e6c3960e">llvm::ScheduleDAG::TII</a></div><div class="ttdeci">const TargetInstrInfo * TII</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00541">ScheduleDAG.h:541</a></div></div>
<div class="ttc" id="classllvm_1_1R600InstrInfo_html_abb29912c607d99a0dbc42453b3fdeadf"><div class="ttname"><a href="classllvm_1_1R600InstrInfo.html#abb29912c607d99a0dbc42453b3fdeadf">llvm::R600InstrInfo::getMaxAlusPerClause</a></div><div class="ttdeci">unsigned getMaxAlusPerClause() const </div><div class="ttdef"><b>Definition:</b> <a href="R600InstrInfo_8cpp_source.html#l01129">R600InstrInfo.cpp:1129</a></div></div>
<div class="ttc" id="classllvm_1_1R600InstrInfo_html_a520bbb1242cd198cb0e5b3d157870f32"><div class="ttname"><a href="classllvm_1_1R600InstrInfo.html#a520bbb1242cd198cb0e5b3d157870f32">llvm::R600InstrInfo::isReductionOp</a></div><div class="ttdeci">bool isReductionOp(unsigned opcode) const </div><div class="ttdef"><b>Definition:</b> <a href="R600InstrInfo_8cpp_source.html#l00119">R600InstrInfo.cpp:119</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_ab75f703d251cc0ce0206fe00a999db86"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">llvm::MachineOperand::getReg</a></div><div class="ttdeci">unsigned getReg() const </div><div class="ttdoc">getReg - Returns the register number. </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00259">MachineOperand.h:259</a></div></div>
<div class="ttc" id="classllvm_1_1AMDGPUSubtarget_html_a8ca0c045c9240fae3ed1a41d189a3c17"><div class="ttname"><a href="classllvm_1_1AMDGPUSubtarget.html#a8ca0c045c9240fae3ed1a41d189a3c17">llvm::AMDGPUSubtarget::getTexVTXClauseSize</a></div><div class="ttdeci">short getTexVTXClauseSize() const </div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUSubtarget_8cpp_source.html#l00054">AMDGPUSubtarget.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a0037ac891190e1408b04a48156c3368c"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a0037ac891190e1408b04a48156c3368c">llvm::MachineInstr::operands_begin</a></div><div class="ttdeci">mop_iterator operands_begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00284">MachineInstr.h:284</a></div></div>
<div class="ttc" id="namespacellvm_1_1A64CC_html_af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442"><div class="ttname"><a href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">llvm::A64CC::MI</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00035">AArch64BaseInfo.h:35</a></div></div>
<div class="ttc" id="Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00097">Debug.h:97</a></div></div>
<div class="ttc" id="raw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="classllvm_1_1R600InstrInfo_html_adac9d699d7dcdfb4f5f92432cb7ac4b4"><div class="ttname"><a href="classllvm_1_1R600InstrInfo.html#adac9d699d7dcdfb4f5f92432cb7ac4b4">llvm::R600InstrInfo::fitsConstReadLimitations</a></div><div class="ttdeci">bool fitsConstReadLimitations(const std::vector&lt; MachineInstr * &gt; &amp;) const </div><div class="ttdef"><b>Definition:</b> <a href="R600InstrInfo_8cpp_source.html#l00623">R600InstrInfo.cpp:623</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAG_html_a1b09f4d9c91e25f7bc2ac60b3b929d11"><div class="ttname"><a href="classllvm_1_1ScheduleDAG.html#a1b09f4d9c91e25f7bc2ac60b3b929d11">llvm::ScheduleDAG::MRI</a></div><div class="ttdeci">MachineRegisterInfo &amp; MRI</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00544">ScheduleDAG.h:544</a></div></div>
<div class="ttc" id="PassManager_8h_html"><div class="ttname"><a href="PassManager_8h.html">PassManager.h</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAG_html_a3d5aacd5fc7d6a739ce913974ed1e53d"><div class="ttname"><a href="classllvm_1_1ScheduleDAG.html#a3d5aacd5fc7d6a739ce913974ed1e53d">llvm::ScheduleDAG::SUnits</a></div><div class="ttdeci">std::vector&lt; SUnit &gt; SUnits</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00545">ScheduleDAG.h:545</a></div></div>
<div class="ttc" id="classllvm_1_1R600InstrInfo_html_af84cb86f767529ac5d4123e1ca51cffd"><div class="ttname"><a href="classllvm_1_1R600InstrInfo.html#af84cb86f767529ac5d4123e1ca51cffd">llvm::R600InstrInfo::isALUInstr</a></div><div class="ttdeci">bool isALUInstr(unsigned Opcode) const </div><div class="ttdef"><b>Definition:</b> <a href="R600InstrInfo_8cpp_source.html#l00134">R600InstrInfo.cpp:134</a></div></div>
<div class="ttc" id="classllvm_1_1SUnit_html_ac28b1882619718b4c6efb97899b845a1"><div class="ttname"><a href="classllvm_1_1SUnit.html#ac28b1882619718b4c6efb97899b845a1">llvm::SUnit::dump</a></div><div class="ttdeci">void dump(const ScheduleDAG *G) const </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8cpp_source.html#l00316">ScheduleDAG.cpp:316</a></div></div>
<div class="ttc" id="classllvm_1_1R600InstrInfo_html_af5ecb6a9739febf2aaaaa4eb2d13f9cb"><div class="ttname"><a href="classllvm_1_1R600InstrInfo.html#af5ecb6a9739febf2aaaaa4eb2d13f9cb">llvm::R600InstrInfo::isTransOnly</a></div><div class="ttdeci">bool isTransOnly(unsigned Opcode) const </div><div class="ttdef"><b>Definition:</b> <a href="R600InstrInfo_8cpp_source.html#l00182">R600InstrInfo.cpp:182</a></div></div>
<div class="ttc" id="classllvm_1_1SUnit_html"><div class="ttname"><a href="classllvm_1_1SUnit.html">llvm::SUnit</a></div><div class="ttdoc">SUnit - Scheduling unit. This is a node in the scheduling DAG. </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00249">ScheduleDAG.h:249</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterClass_html_a18659a1da7db1674fa972c28846a3958"><div class="ttname"><a href="classllvm_1_1TargetRegisterClass.html#a18659a1da7db1674fa972c28846a3958">llvm::TargetRegisterClass::contains</a></div><div class="ttdeci">bool contains(unsigned Reg) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00076">TargetRegisterInfo.h:76</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 23:00:56 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
