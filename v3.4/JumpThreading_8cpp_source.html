<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: JumpThreading.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('JumpThreading_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">JumpThreading.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="JumpThreading_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- JumpThreading.cpp - Thread control through conditional blocks ------===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// This file implements the Jump Threading pass.</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno"><a class="line" href="JumpThreading_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   14</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;jump-threading&quot;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Transforms_2Scalar_8h.html">llvm/Transforms/Scalar.h</a>&quot;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseMap_8h.html">llvm/ADT/DenseMap.h</a>&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseSet_8h.html">llvm/ADT/DenseSet.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="STLExtras_8h.html">llvm/ADT/STLExtras.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallPtrSet_8h.html">llvm/ADT/SmallPtrSet.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallSet_8h.html">llvm/ADT/SmallSet.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Analysis_2CFG_8h.html">llvm/Analysis/CFG.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ConstantFolding_8h.html">llvm/Analysis/ConstantFolding.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstructionSimplify_8h.html">llvm/Analysis/InstructionSimplify.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LazyValueInfo_8h.html">llvm/Analysis/LazyValueInfo.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Loads_8h.html">llvm/Analysis/Loads.h</a>&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DataLayout_8h.html">llvm/IR/DataLayout.h</a>&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IntrinsicInst_8h.html">llvm/IR/IntrinsicInst.h</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LLVMContext_8h.html">llvm/IR/LLVMContext.h</a>&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Pass_8h.html">llvm/Pass.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueHandle_8h.html">llvm/Support/ValueHandle.h</a>&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetLibraryInfo_8h.html">llvm/Target/TargetLibraryInfo.h</a>&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlockUtils_8h.html">llvm/Transforms/Utils/BasicBlockUtils.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Local_8h.html">llvm/Transforms/Utils/Local.h</a>&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SSAUpdater_8h.html">llvm/Transforms/Utils/SSAUpdater.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<a class="code" href="JumpThreading_8cpp.html#a99733660b8ecac76d77664c1cb5cb0eb">STATISTIC</a>(NumThreads, <span class="stringliteral">&quot;Number of jumps threaded&quot;</span>);</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<a class="code" href="JumpThreading_8cpp.html#a99733660b8ecac76d77664c1cb5cb0eb">STATISTIC</a>(NumFolds,   <span class="stringliteral">&quot;Number of terminators folded&quot;</span>);</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<a class="code" href="JumpThreading_8cpp.html#a99733660b8ecac76d77664c1cb5cb0eb">STATISTIC</a>(NumDupes,   <span class="stringliteral">&quot;Number of branch blocks duplicated to eliminate phi&quot;</span>);</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<a class="code" href="JumpThreading_8cpp.html#a5ea01a7f7556b186f9c162b56624abbd">Threshold</a>(<span class="stringliteral">&quot;jump-threading-threshold&quot;</span>,</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;          <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Max block size to duplicate for jump threading&quot;</span>),</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;          <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(6), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="comment">// These are at global scope so static functions can use them too.</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;std::pair&lt;Constant*, BasicBlock*&gt;</a> &gt; PredValueInfo;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;Constant*, BasicBlock*&gt;</a>, 8&gt; PredValueInfoTy;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <span class="comment">// This is used to keep track of what kind of constant we&#39;re currently hoping</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="comment">// to find.</span></div><div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="JumpThreading_8cpp.html#accb226989f9f6a384c57a42b51f2c366">   57</a></span>&#160;  <span class="keyword">enum</span> <a class="code" href="JumpThreading_8cpp.html#accb226989f9f6a384c57a42b51f2c366">ConstantPreference</a> {</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    WantInteger,</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    WantBlockAddress</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  };</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">  /// This pass performs &#39;jump threading&#39;, which looks at blocks that have</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">  /// multiple predecessors and multiple successors.  If one or more of the</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">  /// predecessors of the block can be proven to always jump to one of the</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">  /// successors, we forward the edge from the predecessor to the successor by</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">  /// duplicating the contents of this block.</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">  /// An example of when this can occur is code like this:</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">  ///   if () { ...</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">  ///     X = 4;</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">  ///   }</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">  ///   if (X &lt; 3) {</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">  /// In this case, the unconditional branch at the end of the first if can be</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">  /// revectored to the false side of the second if.</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment"></span>  <span class="keyword">class </span>JumpThreading : <span class="keyword">public</span> <a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a> {</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> *TD;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <a class="code" href="classllvm_1_1LazyValueInfo.html">LazyValueInfo</a> *LVI;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="preprocessor">#ifdef NDEBUG</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock*, 16&gt;</a> LoopHeaders;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <a class="code" href="classllvm_1_1SmallSet.html">SmallSet&lt;AssertingVH&lt;BasicBlock&gt;</a>, 16&gt; LoopHeaders;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;std::pair&lt;Value*, BasicBlock*&gt;</a> &gt; RecursionSet;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="comment">// RAII helper for updating the recursion stack.</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keyword">struct </span>RecursionSetRemover {</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;std::pair&lt;Value*, BasicBlock*&gt;</a> &gt; &amp;TheSet;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      std::pair&lt;Value*, BasicBlock*&gt; ThePair;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      RecursionSetRemover(<a class="code" href="classllvm_1_1DenseSet.html">DenseSet</a>&lt;std::pair&lt;Value*, BasicBlock*&gt; &gt; &amp;<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>,</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                          std::pair&lt;Value*, BasicBlock*&gt; <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>)</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        : TheSet(<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>), ThePair(P) { }</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      ~RecursionSetRemover() {</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        TheSet.<a class="code" href="classllvm_1_1DenseSet.html#a72c5c6170a25fd911db5f4461221befd">erase</a>(ThePair);</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      }</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    };</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="keyword">public</span>:</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>; <span class="comment">// Pass identification</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    JumpThreading() : <a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a>(ID) {</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      <a class="code" href="namespacellvm.html#a66ef8932e0b4fc2ac894d66490785c0e">initializeJumpThreadingPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    }</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordtype">bool</span> runOnFunction(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const </span>{</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1LazyValueInfo.html">LazyValueInfo</a>&gt;();</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1LazyValueInfo.html">LazyValueInfo</a>&gt;();</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a>&gt;();</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    }</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordtype">void</span> FindLoopHeaders(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;F);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordtype">bool</span> ProcessBlock(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordtype">bool</span> ThreadEdge(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB, <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;BasicBlock*&gt;</a> &amp;PredBBs,</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SuccBB);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordtype">bool</span> DuplicateCondBranchOnPHIIntoPred(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB,</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                                  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;BasicBlock *&gt;</a> &amp;PredBBs);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordtype">bool</span> ComputeValueKnownInPredecessors(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB,</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                                         PredValueInfo &amp;Result,</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                                         <a class="code" href="JumpThreading_8cpp.html#accb226989f9f6a384c57a42b51f2c366">ConstantPreference</a> <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309e">Preference</a>);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordtype">bool</span> ProcessThreadableEdges(<a class="code" href="classllvm_1_1Value.html">Value</a> *Cond, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB,</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                                <a class="code" href="JumpThreading_8cpp.html#accb226989f9f6a384c57a42b51f2c366">ConstantPreference</a> Preference);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordtype">bool</span> ProcessBranchOnPHI(<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN);</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordtype">bool</span> ProcessBranchOnXOR(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *BO);</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordtype">bool</span> SimplifyPartiallyRedundantLoad(<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordtype">bool</span> TryToUnfoldSelect(<a class="code" href="classllvm_1_1CmpInst.html">CmpInst</a> *CondCmp, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB);</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  };</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;}</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">JumpThreading::ID</a> = 0;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<a class="code" href="JumpThreading_8cpp.html#a8bdbf4cc12d95ebba47bb08892eb7442">INITIALIZE_PASS_BEGIN</a>(JumpThreading, <span class="stringliteral">&quot;jump-threading&quot;</span>,</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                <span class="stringliteral">&quot;Jump Threading&quot;</span>, <span class="keyword">false</span>, <span class="keyword">false</span>)</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1LazyValueInfo.html">LazyValueInfo</a>)</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a>)</div><div class="line"><a name="l00142"></a><span class="lineno"><a class="line" href="JumpThreading_8cpp.html#a9f88858ad3279dd92cc930a15f5a777f">  142</a></span>&#160;<a class="code" href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a>(JumpThreading, &quot;jump-<a class="code" href="JumpThreading_8cpp.html#a9f88858ad3279dd92cc930a15f5a777f">threading</a>&quot;,</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                &quot;Jump <a class="code" href="JumpThreading_8cpp.html#a50266e8679d84319fee61811c5f40b6e">Threading</a>&quot;, <a class="code" href="namespacefalse.html">false</a>, false)</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">// Public interface to the Jump Threading pass</span></div><div class="line"><a name="l00146"></a><span class="lineno"><a class="line" href="namespacellvm.html#a15b009edcc08999dc9405ccaf1c3628b">  146</a></span>&#160;<a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a> *<a class="code" href="namespacellvm.html">llvm</a>::<a class="code" href="namespacellvm.html#a15b009edcc08999dc9405ccaf1c3628b">createJumpThreadingPass</a>() { <span class="keywordflow">return</span> <span class="keyword">new</span> JumpThreading(); }</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">/// runOnFunction - Top level algorithm.</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> JumpThreading::runOnFunction(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>) {</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Jump threading on function &#39;&quot;</span> &lt;&lt; F.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt; <span class="stringliteral">&quot;&#39;\n&quot;</span>);</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  TD = getAnalysisIfAvailable&lt;DataLayout&gt;();</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  TLI = &amp;getAnalysis&lt;TargetLibraryInfo&gt;();</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  LVI = &amp;getAnalysis&lt;LazyValueInfo&gt;();</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  FindLoopHeaders(F);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="keywordtype">bool</span> Changed, EverChanged = <span class="keyword">false</span>;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="keywordflow">do</span> {</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    Changed = <span class="keyword">false</span>;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">Function::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = F.<a class="code" href="classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">begin</a>(), E = F.<a class="code" href="classllvm_1_1Function.html#ae4ca2261b8b901e415fda7feac5051ea">end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E;) {</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      <span class="comment">// Thread all of the branches we can over this block.</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      <span class="keywordflow">while</span> (ProcessBlock(BB))</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      <span class="comment">// If the block is trivially dead, zap it.  This eliminates the successor</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      <span class="comment">// edges which simplifies the CFG.</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(BB) == <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(BB) &amp;&amp;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;          BB != &amp;BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#a30f2c362631e3728d2f47a8203071ade">getEntryBlock</a>()) {</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  JT: Deleting dead block &#39;&quot;</span> &lt;&lt; BB-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;              &lt;&lt; <span class="stringliteral">&quot;&#39; with terminator: &quot;</span> &lt;&lt; *BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        LoopHeaders.erase(BB);</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        LVI-&gt;eraseBlock(BB);</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <a class="code" href="namespacellvm.html#a9d7d0a4008434561f28c20126b992b89">DeleteDeadBlock</a>(BB);</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      }</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;      <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a>&gt;(BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>());</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      <span class="comment">// Can&#39;t thread an unconditional jump, but if the block is &quot;almost</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      <span class="comment">// empty&quot;, we can replace uses of it with uses of the successor and make</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      <span class="comment">// this dead.</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      <span class="keywordflow">if</span> (BI &amp;&amp; BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a382131e712e55e8324fbd5068de17b78">isUnconditional</a>() &amp;&amp;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;          BB != &amp;BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#a30f2c362631e3728d2f47a8203071ade">getEntryBlock</a>() &amp;&amp;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;          <span class="comment">// If the terminator is the only non-phi instruction, try to nuke it.</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;          BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a225cbda41f4c27fbb522833e31cb18f9">getFirstNonPHIOrDbg</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#a237e6bf58bc993ea494bdde7480ca428">isTerminator</a>()) {</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <span class="comment">// Since TryToSimplifyUncondBranchFromEmptyBlock may delete the</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="comment">// block, we have to make sure it isn&#39;t in the LoopHeaders set.  We</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <span class="comment">// reinsert afterward if needed.</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="keywordtype">bool</span> ErasedFromLoopHeaders = LoopHeaders.erase(BB);</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Succ = BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(0);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <span class="comment">// FIXME: It is always conservatively correct to drop the info</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="comment">// for a block even if it doesn&#39;t get erased.  This isn&#39;t totally</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="comment">// awesome, but it allows us to use AssertingVH to prevent nasty</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="comment">// dangling pointer issues within LazyValueInfo.</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        LVI-&gt;eraseBlock(BB);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a599000eece6fb1addb05b6b2c36be28c">TryToSimplifyUncondBranchFromEmptyBlock</a>(BB)) {</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;          Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;          <span class="comment">// If we deleted BB and BB was the header of a loop, then the</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;          <span class="comment">// successor is now the header of the loop.</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;          BB = Succ;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        }</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <span class="keywordflow">if</span> (ErasedFromLoopHeaders)</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;          LoopHeaders.insert(BB);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      }</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    }</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    EverChanged |= Changed;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  } <span class="keywordflow">while</span> (Changed);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  LoopHeaders.clear();</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <span class="keywordflow">return</span> EverChanged;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;}</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">/// getJumpThreadDuplicationCost - Return the cost of duplicating this block to</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">/// thread across it. Stop scanning the block when passing the threshold.</span></div><div class="line"><a name="l00222"></a><span class="lineno"><a class="line" href="JumpThreading_8cpp.html#a03e550d05d9675fa027dcdf75d5184fe">  222</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="JumpThreading_8cpp.html#a03e550d05d9675fa027dcdf75d5184fe">getJumpThreadDuplicationCost</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                                             <span class="keywordtype">unsigned</span> <a class="code" href="JumpThreading_8cpp.html#a5ea01a7f7556b186f9c162b56624abbd">Threshold</a>) {<span class="comment"></span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment">  /// Ignore PHI nodes, these will be flattened when duplication happens.</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::const_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0e73f4e09745bb69fdd7b15232c45428">getFirstNonPHI</a>();</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="comment">// FIXME: THREADING will delete values that are just used to compute the</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="comment">// branch, so they shouldn&#39;t count against the duplication cost.</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="comment">// Sum up the cost of each instruction until we get to the terminator.  Don&#39;t</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="comment">// include the terminator because the copy won&#39;t include it.</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="keywordtype">unsigned</span> Size = 0;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="keywordflow">for</span> (; !isa&lt;TerminatorInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>); ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="comment">// Stop scanning the block if we&#39;ve reached the threshold.</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">if</span> (Size &gt; Threshold)</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      <span class="keywordflow">return</span> Size;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="comment">// Debugger intrinsics don&#39;t incur code size.</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keywordflow">if</span> (isa&lt;DbgInfoIntrinsic&gt;(I)) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="comment">// If this is a pointer-&gt;pointer bitcast, it is free.</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordflow">if</span> (isa&lt;BitCastInst&gt;(I) &amp;&amp; I-&gt;getType()-&gt;isPointerTy())</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="comment">// All other instructions count for at least one unit.</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    ++Size;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="comment">// Calls are more expensive.  If they are non-intrinsic calls, we model them</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="comment">// as having cost of 4.  If they are a non-vector intrinsic, we model them</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="comment">// as having cost of 2 total, and if they are a vector intrinsic, we model</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="comment">// them as having cost 1.</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI = dyn_cast&lt;CallInst&gt;(I)) {</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      <span class="keywordflow">if</span> (CI-&gt;hasFnAttr(<a class="code" href="classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60eabdd013d932f9aa7ccaa9886bc1a54b63">Attribute::NoDuplicate</a>))</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <span class="comment">// Blocks with NoDuplicate are modelled as having infinite cost, so they</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <span class="comment">// are never duplicated.</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <span class="keywordflow">return</span> ~0U;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!isa&lt;IntrinsicInst&gt;(CI))</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        Size += 3;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!CI-&gt;getType()-&gt;isVectorTy())</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        Size += 1;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    }</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  }</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <span class="comment">// Threading through a switch statement is particularly profitable.  If this</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="comment">// block ends in a switch, decrease its cost to make it more likely to happen.</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="keywordflow">if</span> (isa&lt;SwitchInst&gt;(I))</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    Size = Size &gt; 6 ? Size-6 : 0;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <span class="comment">// The same holds for indirect branches, but slightly more so.</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="keywordflow">if</span> (isa&lt;IndirectBrInst&gt;(I))</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    Size = Size &gt; 8 ? Size-8 : 0;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <span class="keywordflow">return</span> Size;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;}</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">/// FindLoopHeaders - We do not want jump threading to turn proper loop</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">/// structures into irreducible loops.  Doing this breaks up the loop nesting</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment">/// hierarchy and pessimizes later transformations.  To prevent this from</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">/// happening, we first have to find the loop headers.  Here we approximate this</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">/// by finding targets of backedges in the CFG.</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">/// Note that there definitely are cases when we want to allow threading of</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment">/// edges across a loop header.  For example, threading a jump from outside the</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment">/// loop (the preheader) to an exit block of the loop is definitely profitable.</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment">/// It is also almost always profitable to thread backedges from within the loop</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">/// to exit blocks, and is often profitable to thread backedges to other blocks</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">/// within the loop (forming a nested loop).  This simple analysis is not rich</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment">/// enough to track all of these properties and keep it up-to-date as the CFG</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment">/// mutates, so we don&#39;t allow any of these transformations.</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> JumpThreading::FindLoopHeaders(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;F) {</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;const BasicBlock*,const BasicBlock*&gt;</a>, 32&gt; Edges;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <a class="code" href="namespacellvm.html#aec1d6e397956b9f5fa62416d0beba785">FindFunctionBackedges</a>(F, Edges);</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Edges.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    LoopHeaders.insert(const_cast&lt;BasicBlock*&gt;(Edges[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].second));</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;}</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment">/// getKnownConstant - Helper method to determine if we can thread over a</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">/// terminator with the given value as its condition, and if so what value to</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">/// use for that. What kind of value this is depends on whether we want an</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">/// integer or a block address, but an undef is always accepted.</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment">/// Returns null if Val is null or not an appropriate constant.</span></div><div class="line"><a name="l00305"></a><span class="lineno"><a class="line" href="JumpThreading_8cpp.html#aa1ca02e99b272b5fa744ebef102fa0b0">  305</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="JumpThreading_8cpp.html#aa1ca02e99b272b5fa744ebef102fa0b0">getKnownConstant</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *Val, <a class="code" href="JumpThreading_8cpp.html#accb226989f9f6a384c57a42b51f2c366">ConstantPreference</a> <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309e">Preference</a>) {</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="keywordflow">if</span> (!Val)</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <span class="comment">// Undef is &quot;known&quot; enough.</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1UndefValue.html">UndefValue</a> *U = dyn_cast&lt;UndefValue&gt;(Val))</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordflow">return</span> U;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="keywordflow">if</span> (Preference == WantBlockAddress)</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1BlockAddress.html">BlockAddress</a>&gt;(Val-&gt;<a class="code" href="classllvm_1_1Value.html#a38ea12c04523d63adda732b9c5d6da0a">stripPointerCasts</a>());</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(Val);</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;}</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment">/// ComputeValueKnownInPredecessors - Given a basic block BB and a value V, see</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment">/// if we can infer that the value is a known ConstantInt/BlockAddress or undef</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment">/// in any of our predecessors.  If so, return the known list of value and pred</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment">/// BB in the result vector.</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment">/// This returns true if there were any known values.</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> JumpThreading::</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;ComputeValueKnownInPredecessors(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, PredValueInfo &amp;Result,</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                                <a class="code" href="JumpThreading_8cpp.html#accb226989f9f6a384c57a42b51f2c366">ConstantPreference</a> <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309e">Preference</a>) {</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <span class="comment">// This method walks up use-def chains recursively.  Because of this, we could</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  <span class="comment">// get into an infinite loop going around loops in the use-def chain.  To</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="comment">// prevent this, keep track of what (value, block) pairs we&#39;ve already visited</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="comment">// and terminate the search if we loop back to them</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <span class="keywordflow">if</span> (!RecursionSet.insert(std::make_pair(V, BB)).second)</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="comment">// An RAII help to remove this pair from the recursion set once the recursion</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <span class="comment">// stack pops back out again.</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  RecursionSetRemover remover(RecursionSet, std::make_pair(V, BB));</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="comment">// If V is a constant, then it is known in all predecessors.</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *KC = <a class="code" href="JumpThreading_8cpp.html#aa1ca02e99b272b5fa744ebef102fa0b0">getKnownConstant</a>(V, Preference)) {</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PredIterator.html">pred_iterator</a> PI = <a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(BB), E = <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(BB); PI != E; ++PI)</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      Result.push_back(std::make_pair(KC, *PI));</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  }</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <span class="comment">// If V is a non-instruction value, or an instruction in a different block,</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <span class="comment">// then it can&#39;t be derived from a PHI.</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a>&gt;(V);</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="keywordflow">if</span> (I == 0 || I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>() != <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="comment">// Okay, if this is a live-in value, see if it has a known value at the end</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="comment">// of any of our predecessors.</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="comment">// FIXME: This should be an edge property, not a block end property.</span><span class="comment"></span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment">    /// TODO: Per PR2563, we could infer value range information about a</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment">    /// predecessor based on its terminator.</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="comment"></span>    <span class="comment">//</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="comment">// FIXME: change this to use the more-rich &#39;getPredicateOnEdge&#39; method if</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="comment">// &quot;I&quot; is a non-local compare-with-a-constant instruction.  This would be</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="comment">// able to handle value inequalities better, for example if the compare is</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="comment">// &quot;X &lt; 4&quot; and &quot;X &lt; 3&quot; is known true but &quot;X &lt; 4&quot; itself is not available.</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="comment">// Perhaps getConstantOnEdge should be smart enough to do this?</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PredIterator.html">pred_iterator</a> PI = <a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(BB), E = <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(BB); PI != E; ++PI) {</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = *PI;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <span class="comment">// If the value is known by LazyValueInfo to be a constant in a</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      <span class="comment">// predecessor, use that information to try to thread this block.</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *PredCst = LVI-&gt;getConstantOnEdge(V, P, BB);</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *KC = <a class="code" href="JumpThreading_8cpp.html#aa1ca02e99b272b5fa744ebef102fa0b0">getKnownConstant</a>(PredCst, Preference))</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        Result.push_back(std::make_pair(KC, P));</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    }</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="keywordflow">return</span> !Result.empty();</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  }</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment">  /// If I is a PHI node, then we know the incoming values for any constants.</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment"></span>  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(I)) {</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = PN-&gt;getNumIncomingValues(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *InVal = PN-&gt;getIncomingValue(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *KC = <a class="code" href="JumpThreading_8cpp.html#aa1ca02e99b272b5fa744ebef102fa0b0">getKnownConstant</a>(InVal, Preference)) {</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        Result.push_back(std::make_pair(KC, PN-&gt;getIncomingBlock(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)));</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *CI = LVI-&gt;getConstantOnEdge(InVal,</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                                              PN-&gt;getIncomingBlock(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>), <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *KC = <a class="code" href="JumpThreading_8cpp.html#aa1ca02e99b272b5fa744ebef102fa0b0">getKnownConstant</a>(CI, Preference))</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;          Result.push_back(std::make_pair(KC, PN-&gt;getIncomingBlock(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)));</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      }</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    }</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordflow">return</span> !Result.empty();</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  }</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  PredValueInfoTy LHSVals, RHSVals;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <span class="comment">// Handle some boolean conditions.</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <span class="keywordflow">if</span> (I-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a5a7cfa245af120b44ac8a86143bb9e57">getPrimitiveSizeInBits</a>() == 1) {</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    assert(Preference == WantInteger &amp;&amp; <span class="stringliteral">&quot;One-bit non-integer type?&quot;</span>);</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="comment">// X | true -&gt; true</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="comment">// X &amp; false -&gt; false</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keywordflow">if</span> (I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>() == <a class="code" href="namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">Instruction::Or</a> ||</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>() == <a class="code" href="namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">Instruction::And</a>) {</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      ComputeValueKnownInPredecessors(I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, LHSVals,</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                                      WantInteger);</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      ComputeValueKnownInPredecessors(I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1), <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, RHSVals,</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                                      WantInteger);</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      <span class="keywordflow">if</span> (LHSVals.empty() &amp;&amp; RHSVals.empty())</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *InterestingVal;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;      <span class="keywordflow">if</span> (I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>() == <a class="code" href="namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">Instruction::Or</a>)</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        InterestingVal = <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(I-&gt;<a class="code" href="classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>());</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        InterestingVal = <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(I-&gt;<a class="code" href="classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>());</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock*, 4&gt;</a> LHSKnownBBs;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      <span class="comment">// Scan for the sentinel.  If we find an undef, force it to the</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      <span class="comment">// interesting value: x|undef -&gt; true and x&amp;undef -&gt; false.</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = LHSVals.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        <span class="keywordflow">if</span> (LHSVals[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].first == InterestingVal ||</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            isa&lt;UndefValue&gt;(LHSVals[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].first)) {</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;          Result.push_back(LHSVals[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;          Result.back().first = InterestingVal;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;          LHSKnownBBs.insert(LHSVals[i].second);</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        }</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = RHSVals.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        <span class="keywordflow">if</span> (RHSVals[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].first == InterestingVal ||</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            isa&lt;UndefValue&gt;(RHSVals[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].first)) {</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;          <span class="comment">// If we already inferred a value for this block on the LHS, don&#39;t</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;          <span class="comment">// re-add it.</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;          <span class="keywordflow">if</span> (!LHSKnownBBs.count(RHSVals[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].second)) {</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;            Result.push_back(RHSVals[i]);</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            Result.back().first = InterestingVal;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;          }</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        }</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      <span class="keywordflow">return</span> !Result.empty();</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    }</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="comment">// Handle the NOT form of XOR.</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordflow">if</span> (I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>() == <a class="code" href="namespacellvm_1_1APIntOps.html#afc7c4d88d09cba0c5e920f8a3a3ace55">Instruction::Xor</a> &amp;&amp;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        isa&lt;ConstantInt&gt;(I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1)) &amp;&amp;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        cast&lt;ConstantInt&gt;(I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1))-&gt;isOne()) {</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      ComputeValueKnownInPredecessors(I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Result,</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                                      WantInteger);</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      <span class="keywordflow">if</span> (Result.empty())</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;      <span class="comment">// Invert the known values.</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Result.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        Result[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].first = <a class="code" href="classllvm_1_1ConstantExpr.html#a5b43a866f0fca605556f0f69f70c522a">ConstantExpr::getNot</a>(Result[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].first);</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    }</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <span class="comment">// Try to simplify some other binary operator values.</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *BO = dyn_cast&lt;BinaryOperator&gt;(I)) {</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    assert(Preference != WantBlockAddress</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            &amp;&amp; <span class="stringliteral">&quot;A binary operator creating a block address?&quot;</span>);</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(BO-&gt;getOperand(1))) {</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      PredValueInfoTy LHSVals;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      ComputeValueKnownInPredecessors(BO-&gt;getOperand(0), <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, LHSVals,</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                                      WantInteger);</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      <span class="comment">// Try to use constant folding to simplify the binary operator.</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = LHSVals.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *V = LHSVals[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].first;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Folded = <a class="code" href="classllvm_1_1ConstantExpr.html#afd44535c4ae204571d5721fa4a7042f2">ConstantExpr::get</a>(BO-&gt;getOpcode(), V, CI);</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *KC = <a class="code" href="JumpThreading_8cpp.html#aa1ca02e99b272b5fa744ebef102fa0b0">getKnownConstant</a>(Folded, WantInteger))</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;          Result.push_back(std::make_pair(KC, LHSVals[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].second));</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      }</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    }</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="keywordflow">return</span> !Result.empty();</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  }</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  <span class="comment">// Handle compare with phi operand, where the PHI is defined in this block.</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CmpInst.html">CmpInst</a> *Cmp = dyn_cast&lt;CmpInst&gt;(I)) {</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    assert(Preference == WantInteger &amp;&amp; <span class="stringliteral">&quot;Compares only produce integers&quot;</span>);</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1PHINode.html">PHINode</a>&gt;(Cmp-&gt;getOperand(0));</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="keywordflow">if</span> (PN &amp;&amp; PN-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>() == <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      <span class="comment">// We can do this simplification if any comparisons fold to true or false.</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;      <span class="comment">// See if any do.</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">getNumIncomingValues</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PredBB = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a4c25b6c00c4867281779c81ab64d2081">getIncomingBlock</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *LHS = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">getIncomingValue</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *RHS = Cmp-&gt;getOperand(1)-&gt;<a class="code" href="classllvm_1_1Value.html#a7a5732db5f7198200d61bd40da6e488c">DoPHITranslation</a>(BB, PredBB);</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Res = <a class="code" href="namespacellvm.html#a842dbe70b763270b02de0473c3cc890d">SimplifyCmpInst</a>(Cmp-&gt;getPredicate(), LHS, RHS, TD);</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        <span class="keywordflow">if</span> (Res == 0) {</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;          <span class="keywordflow">if</span> (!isa&lt;Constant&gt;(RHS))</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;          <a class="code" href="classllvm_1_1LazyValueInfo.html#a381305cf61c847551a489431c43cec47">LazyValueInfo::Tristate</a></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;            ResT = LVI-&gt;getPredicateOnEdge(Cmp-&gt;getPredicate(), LHS,</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                                           cast&lt;Constant&gt;(RHS), PredBB, BB);</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;          <span class="keywordflow">if</span> (ResT == <a class="code" href="classllvm_1_1LazyValueInfo.html#a381305cf61c847551a489431c43cec47aa3c975a91c3fef72486f9935e4099c8c">LazyValueInfo::Unknown</a>)</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;          Res = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">Type::getInt1Ty</a>(LHS-&gt;<a class="code" href="classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>()), ResT);</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        }</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *KC = <a class="code" href="JumpThreading_8cpp.html#aa1ca02e99b272b5fa744ebef102fa0b0">getKnownConstant</a>(Res, WantInteger))</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;          Result.push_back(std::make_pair(KC, PredBB));</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      }</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      <span class="keywordflow">return</span> !Result.empty();</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    }</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="comment">// If comparing a live-in value against a constant, see if we know the</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="comment">// live-in value on any predecessors.</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="keywordflow">if</span> (isa&lt;Constant&gt;(Cmp-&gt;getOperand(1)) &amp;&amp; Cmp-&gt;getType()-&gt;isIntegerTy()) {</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;      <span class="keywordflow">if</span> (!isa&lt;Instruction&gt;(Cmp-&gt;getOperand(0)) ||</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;          cast&lt;Instruction&gt;(Cmp-&gt;getOperand(0))-&gt;<a class="code" href="BasicAliasAnalysis_8cpp.html#a2675de1d8479c7b00387979714da43f7">getParent</a>() != <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *RHSCst = cast&lt;Constant&gt;(Cmp-&gt;getOperand(1));</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PredIterator.html">pred_iterator</a> PI = <a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(BB), E = <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(BB);PI != E; ++PI){</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;          <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = *PI;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;          <span class="comment">// If the value is known by LazyValueInfo to be a constant in a</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;          <span class="comment">// predecessor, use that information to try to thread this block.</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;          <a class="code" href="classllvm_1_1LazyValueInfo.html#a381305cf61c847551a489431c43cec47">LazyValueInfo::Tristate</a> Res =</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;            LVI-&gt;getPredicateOnEdge(Cmp-&gt;getPredicate(), Cmp-&gt;getOperand(0),</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                                    RHSCst, <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>, <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;          <span class="keywordflow">if</span> (Res == <a class="code" href="classllvm_1_1LazyValueInfo.html#a381305cf61c847551a489431c43cec47aa3c975a91c3fef72486f9935e4099c8c">LazyValueInfo::Unknown</a>)</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;          <a class="code" href="classllvm_1_1Constant.html">Constant</a> *ResC = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(Cmp-&gt;getType(), Res);</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;          Result.push_back(std::make_pair(ResC, P));</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        }</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <span class="keywordflow">return</span> !Result.empty();</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;      }</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      <span class="comment">// Try to find a constant value for the LHS of a comparison,</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      <span class="comment">// and evaluate it statically if we can.</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *CmpConst = dyn_cast&lt;Constant&gt;(Cmp-&gt;getOperand(1))) {</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        PredValueInfoTy LHSVals;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        ComputeValueKnownInPredecessors(I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, LHSVals,</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                                        WantInteger);</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = LHSVals.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;          <a class="code" href="classllvm_1_1Constant.html">Constant</a> *V = LHSVals[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].first;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;          <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Folded = <a class="code" href="classllvm_1_1ConstantExpr.html#ac5728c914b7e92030243a21e49ab1552">ConstantExpr::getCompare</a>(Cmp-&gt;getPredicate(),</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                                                      V, CmpConst);</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *KC = <a class="code" href="JumpThreading_8cpp.html#aa1ca02e99b272b5fa744ebef102fa0b0">getKnownConstant</a>(Folded, WantInteger))</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;            Result.push_back(std::make_pair(KC, LHSVals[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].second));</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        }</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        <span class="keywordflow">return</span> !Result.empty();</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      }</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    }</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  }</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *SI = dyn_cast&lt;SelectInst&gt;(I)) {</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="comment">// Handle select instructions where at least one operand is a known constant</span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="comment">// and we can figure out the condition value for any predecessor block.</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *TrueVal = <a class="code" href="JumpThreading_8cpp.html#aa1ca02e99b272b5fa744ebef102fa0b0">getKnownConstant</a>(SI-&gt;getTrueValue(), <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309e">Preference</a>);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *FalseVal = <a class="code" href="JumpThreading_8cpp.html#aa1ca02e99b272b5fa744ebef102fa0b0">getKnownConstant</a>(SI-&gt;getFalseValue(), <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309e">Preference</a>);</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    PredValueInfoTy Conds;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keywordflow">if</span> ((TrueVal || FalseVal) &amp;&amp;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        ComputeValueKnownInPredecessors(SI-&gt;getCondition(), <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Conds,</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                                        WantInteger)) {</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Conds.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Cond = Conds[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].first;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        <span class="comment">// Figure out what value to use for the condition.</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        <span class="keywordtype">bool</span> KnownCond;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(Cond)) {</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;          <span class="comment">// A known boolean.</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;          KnownCond = CI-&gt;isOne();</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;          assert(isa&lt;UndefValue&gt;(Cond) &amp;&amp; <span class="stringliteral">&quot;Unexpected condition value&quot;</span>);</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;          <span class="comment">// Either operand will do, so be sure to pick the one that&#39;s a known</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;          <span class="comment">// constant.</span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;          <span class="comment">// FIXME: Do this more cleverly if both values are known constants?</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;          KnownCond = (TrueVal != 0);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        }</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <span class="comment">// See if the select has a known constant value for this predecessor.</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *Val = KnownCond ? TrueVal : FalseVal)</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;          Result.push_back(std::make_pair(Val, Conds[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].second));</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      }</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;      <span class="keywordflow">return</span> !Result.empty();</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    }</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  }</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="comment">// If all else fails, see if LVI can figure out a constant value for us.</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *CI = LVI-&gt;getConstant(V, BB);</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *KC = <a class="code" href="JumpThreading_8cpp.html#aa1ca02e99b272b5fa744ebef102fa0b0">getKnownConstant</a>(CI, Preference)) {</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PredIterator.html">pred_iterator</a> PI = <a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(BB), E = <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(BB); PI != E; ++PI)</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      Result.push_back(std::make_pair(KC, *PI));</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  }</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  <span class="keywordflow">return</span> !Result.empty();</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;}</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="comment">/// GetBestDestForBranchOnUndef - If we determine that the specified block ends</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="comment">/// in an undefined jump, decide which block is best to revector to.</span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="comment">/// Since we can pick an arbitrary destination, we pick the successor with the</span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="comment">/// fewest predecessors.  This should reduce the in-degree of the others.</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00610"></a><span class="lineno"><a class="line" href="JumpThreading_8cpp.html#a6495d0a79e098cdc8a57d51c3f86396e">  610</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="JumpThreading_8cpp.html#a6495d0a79e098cdc8a57d51c3f86396e">GetBestDestForJumpOnUndef</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB) {</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  <a class="code" href="classllvm_1_1TerminatorInst.html">TerminatorInst</a> *BBTerm = BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>();</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <span class="keywordtype">unsigned</span> MinSucc = 0;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *TestBB = BBTerm-&gt;<a class="code" href="classllvm_1_1TerminatorInst.html#a3aac3b6c36415a2b08f65ead9e3e51e7">getSuccessor</a>(MinSucc);</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <span class="comment">// Compute the successor with the minimum number of predecessors.</span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  <span class="keywordtype">unsigned</span> MinNumPreds = std::distance(<a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(TestBB), <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(TestBB));</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1, e = BBTerm-&gt;<a class="code" href="classllvm_1_1TerminatorInst.html#a4c26d3b92af99a6c8defd89a2d39ca32">getNumSuccessors</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    TestBB = BBTerm-&gt;<a class="code" href="classllvm_1_1TerminatorInst.html#a3aac3b6c36415a2b08f65ead9e3e51e7">getSuccessor</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="keywordtype">unsigned</span> NumPreds = std::distance(<a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(TestBB), <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(TestBB));</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="keywordflow">if</span> (NumPreds &lt; MinNumPreds) {</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      MinSucc = <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      MinNumPreds = NumPreds;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    }</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  }</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  <span class="keywordflow">return</span> MinSucc;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;}</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;</div><div class="line"><a name="l00628"></a><span class="lineno"><a class="line" href="JumpThreading_8cpp.html#ae6fa18c5b7272e2bdd00c26da8041358">  628</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="JumpThreading_8cpp.html#ae6fa18c5b7272e2bdd00c26da8041358">hasAddressTakenAndUsed</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB) {</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  <span class="keywordflow">if</span> (!BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a12fd03c41b1697fca070c12317794400">hasAddressTaken</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  <span class="comment">// If the block has its address taken, it may be a tree of dead constants</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  <span class="comment">// hanging off of it.  These shouldn&#39;t keep the block alive.</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  <a class="code" href="classllvm_1_1BlockAddress.html">BlockAddress</a> *BA = <a class="code" href="classllvm_1_1BlockAddress.html#af6e2f535824d8f9b4bf1b1a75e5ab57c">BlockAddress::get</a>(BB);</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  BA-&gt;<a class="code" href="classllvm_1_1Constant.html#a50d0911852017f2168de329f53d8568d">removeDeadConstantUsers</a>();</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  <span class="keywordflow">return</span> !BA-&gt;<a class="code" href="classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">use_empty</a>();</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;}</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="comment">/// ProcessBlock - If there are any predecessors whose control can be threaded</span></div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="comment">/// through to a successor, transform them now.</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> JumpThreading::ProcessBlock(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB) {</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  <span class="comment">// If the block is trivially dead, just return and let the caller nuke it.</span></div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  <span class="comment">// This simplifies other transformations.</span></div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(BB) == <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(BB) &amp;&amp;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;      BB != &amp;BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#a30f2c362631e3728d2f47a8203071ade">getEntryBlock</a>())</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  <span class="comment">// If this block has a single predecessor, and if that pred has a single</span></div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  <span class="comment">// successor, merge the blocks.  This encourages recursive jump threading</span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  <span class="comment">// because now the condition in this block can be threaded through</span></div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  <span class="comment">// predecessors of our predecessor block.</span></div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SinglePred = BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5ef55181ae0bb0f5c561b9a29087b1e5">getSinglePredecessor</a>()) {</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keywordflow">if</span> (SinglePred-&gt;getTerminator()-&gt;getNumSuccessors() == 1 &amp;&amp;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        SinglePred != BB &amp;&amp; !<a class="code" href="JumpThreading_8cpp.html#ae6fa18c5b7272e2bdd00c26da8041358">hasAddressTakenAndUsed</a>(BB)) {</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;      <span class="comment">// If SinglePred was a loop header, BB becomes one.</span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;      <span class="keywordflow">if</span> (LoopHeaders.erase(SinglePred))</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        LoopHeaders.insert(BB);</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;      <span class="comment">// Remember if SinglePred was the entry block of the function.  If so, we</span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;      <span class="comment">// will need to move BB back to the entry position.</span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      <span class="keywordtype">bool</span> isEntry = SinglePred == &amp;SinglePred-&gt;getParent()-&gt;getEntryBlock();</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      LVI-&gt;eraseBlock(SinglePred);</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      <a class="code" href="namespacellvm.html#a02b5336d71826082af53837f2ffe6128">MergeBasicBlockIntoOnlyPred</a>(BB);</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;      <span class="keywordflow">if</span> (isEntry &amp;&amp; BB != &amp;BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#a30f2c362631e3728d2f47a8203071ade">getEntryBlock</a>())</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a41da369a9d31d911c8af724d5630f724">moveBefore</a>(&amp;BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#a30f2c362631e3728d2f47a8203071ade">getEntryBlock</a>());</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    }</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  }</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  <span class="comment">// What kind of constant we&#39;re looking for.</span></div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <a class="code" href="JumpThreading_8cpp.html#accb226989f9f6a384c57a42b51f2c366">ConstantPreference</a> Preference = WantInteger;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <span class="comment">// Look to see if the terminator is a conditional branch, switch or indirect</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  <span class="comment">// branch, if not we can&#39;t thread it.</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Condition;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1MCID.html#a8035044d40d3758eb45b65dce69dc90baf121d798d2c14b32e81d537a1f0cff8d">Terminator</a> = BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>();</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = dyn_cast&lt;BranchInst&gt;(Terminator)) {</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="comment">// Can&#39;t thread an unconditional jump.</span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="keywordflow">if</span> (BI-&gt;isUnconditional()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    Condition = BI-&gt;getCondition();</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SwitchInst.html">SwitchInst</a> *SI = dyn_cast&lt;SwitchInst&gt;(Terminator)) {</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    Condition = SI-&gt;getCondition();</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1IndirectBrInst.html">IndirectBrInst</a> *IB = dyn_cast&lt;IndirectBrInst&gt;(Terminator)) {</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <span class="comment">// Can&#39;t thread indirect branch with no successors.</span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="keywordflow">if</span> (IB-&gt;getNumSuccessors() == 0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    Condition = IB-&gt;getAddress()-&gt;<a class="code" href="classllvm_1_1Value.html#a38ea12c04523d63adda732b9c5d6da0a">stripPointerCasts</a>();</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    Preference = WantBlockAddress;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// Must be an invoke.</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  }</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <span class="comment">// Run constant folding to see if we can reduce the condition to a simple</span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  <span class="comment">// constant.</span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(Condition)) {</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *SimpleVal = <a class="code" href="namespacellvm.html#afaf85770fdd46c58822741178d7fd03d">ConstantFoldInstruction</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, TD, TLI);</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <span class="keywordflow">if</span> (SimpleVal) {</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;replaceAllUsesWith(SimpleVal);</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;eraseFromParent();</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;      Condition = SimpleVal;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    }</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  }</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <span class="comment">// If the terminator is branching on an undef, we can pick any of the</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <span class="comment">// successors to branch to.  Let GetBestDestForJumpOnUndef decide.</span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;  <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(Condition)) {</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <span class="keywordtype">unsigned</span> BestSucc = <a class="code" href="JumpThreading_8cpp.html#a6495d0a79e098cdc8a57d51c3f86396e">GetBestDestForJumpOnUndef</a>(BB);</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <span class="comment">// Fold the branch/switch.</span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <a class="code" href="classllvm_1_1TerminatorInst.html">TerminatorInst</a> *BBTerm = BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>();</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = BBTerm-&gt;<a class="code" href="classllvm_1_1TerminatorInst.html#a4c26d3b92af99a6c8defd89a2d39ca32">getNumSuccessors</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> == BestSucc) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      BBTerm-&gt;<a class="code" href="classllvm_1_1TerminatorInst.html#a3aac3b6c36415a2b08f65ead9e3e51e7">getSuccessor</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a6f6763e343549d530a1424f1b24053bb">removePredecessor</a>(BB, <span class="keyword">true</span>);</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    }</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  In block &#39;&quot;</span> &lt;&lt; BB-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;&#39; folding undef terminator: &quot;</span> &lt;&lt; *BBTerm &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <a class="code" href="classllvm_1_1BranchInst.html#ae9cbc599309fd2da33ec1c61df01ce1f">BranchInst::Create</a>(BBTerm-&gt;<a class="code" href="classllvm_1_1TerminatorInst.html#a3aac3b6c36415a2b08f65ead9e3e51e7">getSuccessor</a>(BestSucc), BBTerm);</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    BBTerm-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  }</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  <span class="comment">// If the terminator of this block is branching on a constant, simplify the</span></div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  <span class="comment">// terminator to an unconditional branch.  This can occur due to threading in</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <span class="comment">// other blocks.</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="JumpThreading_8cpp.html#aa1ca02e99b272b5fa744ebef102fa0b0">getKnownConstant</a>(Condition, Preference)) {</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  In block &#39;&quot;</span> &lt;&lt; BB-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;&#39; folding terminator: &quot;</span> &lt;&lt; *BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    ++NumFolds;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <a class="code" href="namespacellvm.html#a78ab69092404fc83d77ccb06b3f7138d">ConstantFoldTerminator</a>(BB, <span class="keyword">true</span>);</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  }</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *CondInst = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a>&gt;(Condition);</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  <span class="comment">// All the rest of our checks depend on the condition being an instruction.</span></div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  <span class="keywordflow">if</span> (CondInst == 0) {</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <span class="comment">// FIXME: Unify this with code below.</span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <span class="keywordflow">if</span> (ProcessThreadableEdges(Condition, BB, Preference))</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  }</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CmpInst.html">CmpInst</a> *CondCmp = dyn_cast&lt;CmpInst&gt;(CondInst)) {</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <span class="comment">// For a comparison where the LHS is outside this block, it&#39;s possible</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="comment">// that we&#39;ve branched on it before.  Used LVI to see if we can simplify</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="comment">// the branch based on that.</span></div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *CondBr = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a>&gt;(BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>());</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *CondConst = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1Constant.html">Constant</a>&gt;(CondCmp-&gt;getOperand(1));</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <a class="code" href="classllvm_1_1PredIterator.html">pred_iterator</a> PI = <a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(BB), PE = <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(BB);</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keywordflow">if</span> (CondBr &amp;&amp; CondConst &amp;&amp; CondBr-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a03cc0dff22b31447f43af97acb76b1a2">isConditional</a>() &amp;&amp; PI != PE &amp;&amp;</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        (!isa&lt;Instruction&gt;(CondCmp-&gt;getOperand(0)) ||</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;         cast&lt;Instruction&gt;(CondCmp-&gt;getOperand(0))-&gt;<a class="code" href="BasicAliasAnalysis_8cpp.html#a2675de1d8479c7b00387979714da43f7">getParent</a>() != <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)) {</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;      <span class="comment">// For predecessor edge, determine if the comparison is true or false</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;      <span class="comment">// on that edge.  If they&#39;re all true or all false, we can simplify the</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;      <span class="comment">// branch.</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;      <span class="comment">// FIXME: We could handle mixed true/false by duplicating code.</span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;      <a class="code" href="classllvm_1_1LazyValueInfo.html#a381305cf61c847551a489431c43cec47">LazyValueInfo::Tristate</a> Baseline =</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        LVI-&gt;getPredicateOnEdge(CondCmp-&gt;getPredicate(), CondCmp-&gt;getOperand(0),</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                                CondConst, *PI, <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;      <span class="keywordflow">if</span> (Baseline != <a class="code" href="classllvm_1_1LazyValueInfo.html#a381305cf61c847551a489431c43cec47aa3c975a91c3fef72486f9935e4099c8c">LazyValueInfo::Unknown</a>) {</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        <span class="comment">// Check that all remaining incoming values match the first one.</span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        <span class="keywordflow">while</span> (++PI != PE) {</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;          <a class="code" href="classllvm_1_1LazyValueInfo.html#a381305cf61c847551a489431c43cec47">LazyValueInfo::Tristate</a> <a class="code" href="namespacellvm_1_1AArch64ISD.html#a246d89cb58f606179b1435937830bbdca84e96c468affe3b1fd3076b4fc5d063e">Ret</a> =</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;            LVI-&gt;getPredicateOnEdge(CondCmp-&gt;getPredicate(),</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;                                    CondCmp-&gt;getOperand(0), CondConst, *PI, <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;          <span class="keywordflow">if</span> (Ret != Baseline) <span class="keywordflow">break</span>;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        }</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        <span class="comment">// If we terminated early, then one of the values didn&#39;t match.</span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        <span class="keywordflow">if</span> (PI == PE) {</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;          <span class="keywordtype">unsigned</span> ToRemove = Baseline == <a class="code" href="classllvm_1_1LazyValueInfo.html#a381305cf61c847551a489431c43cec47a9af49c30d67dc9c3b6f06e09a849009b">LazyValueInfo::True</a> ? 1 : 0;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;          <span class="keywordtype">unsigned</span> ToKeep = Baseline == <a class="code" href="classllvm_1_1LazyValueInfo.html#a381305cf61c847551a489431c43cec47a9af49c30d67dc9c3b6f06e09a849009b">LazyValueInfo::True</a> ? 0 : 1;</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;          CondBr-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(ToRemove)-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a6f6763e343549d530a1424f1b24053bb">removePredecessor</a>(BB, <span class="keyword">true</span>);</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;          <a class="code" href="classllvm_1_1BranchInst.html#ae9cbc599309fd2da33ec1c61df01ce1f">BranchInst::Create</a>(CondBr-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(ToKeep), CondBr);</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;          CondBr-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        }</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;      }</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    }</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    <span class="keywordflow">if</span> (CondBr &amp;&amp; CondConst &amp;&amp; TryToUnfoldSelect(CondCmp, BB))</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  }</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  <span class="comment">// Check for some cases that are worth simplifying.  Right now we want to look</span></div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  <span class="comment">// for loads that are used by a switch or by the condition for the branch.  If</span></div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  <span class="comment">// we see one, check to see if it&#39;s partially redundant.  If so, insert a PHI</span></div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  <span class="comment">// which can then be used to thread the values.</span></div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *SimplifyValue = CondInst;</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CmpInst.html">CmpInst</a> *CondCmp = dyn_cast&lt;CmpInst&gt;(SimplifyValue))</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <span class="keywordflow">if</span> (isa&lt;Constant&gt;(CondCmp-&gt;getOperand(1)))</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;      SimplifyValue = CondCmp-&gt;getOperand(0);</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  <span class="comment">// TODO: There are other places where load PRE would be profitable, such as</span></div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  <span class="comment">// more complex comparisons.</span></div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI = dyn_cast&lt;LoadInst&gt;(SimplifyValue))</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <span class="keywordflow">if</span> (SimplifyPartiallyRedundantLoad(LI))</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  <span class="comment">// Handle a variety of cases where we are branching on something derived from</span></div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;  <span class="comment">// a PHI node in the current block.  If we can prove that any predecessors</span></div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  <span class="comment">// compute a predictable value based on a PHI node, thread those predecessors.</span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  <span class="keywordflow">if</span> (ProcessThreadableEdges(CondInst, BB, Preference))</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  <span class="comment">// If this is an otherwise-unfoldable branch on a phi node in the current</span></div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  <span class="comment">// block, see if we can simplify.</span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(CondInst))</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <span class="keywordflow">if</span> (PN-&gt;getParent() == BB &amp;&amp; isa&lt;BranchInst&gt;(BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>()))</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;      <span class="keywordflow">return</span> ProcessBranchOnPHI(PN);</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  <span class="comment">// If this is an otherwise-unfoldable branch on a XOR, see if we can simplify.</span></div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  <span class="keywordflow">if</span> (CondInst-&gt;<a class="code" href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>() == <a class="code" href="namespacellvm_1_1APIntOps.html#afc7c4d88d09cba0c5e920f8a3a3ace55">Instruction::Xor</a> &amp;&amp;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;      CondInst-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>() == BB &amp;&amp; isa&lt;BranchInst&gt;(BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>()))</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <span class="keywordflow">return</span> ProcessBranchOnXOR(cast&lt;BinaryOperator&gt;(CondInst));</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  <span class="comment">// TODO: If we have: &quot;br (X &gt; 0)&quot;  and we have a predecessor where we know</span></div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  <span class="comment">// &quot;(X == 4)&quot;, thread through this block.</span></div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;}</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;<span class="comment">/// SimplifyPartiallyRedundantLoad - If LI is an obviously partially redundant</span></div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;<span class="comment">/// load instruction, eliminate it by replacing it with a PHI node.  This is an</span></div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;<span class="comment">/// important optimization that encourages jump threading, and needs to be run</span></div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;<span class="comment">/// interlaced with other jump threading tasks.</span></div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> JumpThreading::SimplifyPartiallyRedundantLoad(<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI) {</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  <span class="comment">// Don&#39;t hack volatile/atomic loads.</span></div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  <span class="keywordflow">if</span> (!LI-&gt;<a class="code" href="classllvm_1_1LoadInst.html#a156c478ee8e7d1602143cdbad4bd5385">isSimple</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  <span class="comment">// If the load is defined in a block with exactly one predecessor, it can&#39;t be</span></div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  <span class="comment">// partially redundant.</span></div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *LoadBB = LI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  <span class="keywordflow">if</span> (LoadBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5ef55181ae0bb0f5c561b9a29087b1e5">getSinglePredecessor</a>())</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  <span class="comment">// If the load is defined in a landing pad, it can&#39;t be partially redundant,</span></div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  <span class="comment">// because the edges between the invoke and the landing pad cannot have other</span></div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  <span class="comment">// instructions between them.</span></div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  <span class="keywordflow">if</span> (LoadBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a3075a9eef753018bed561df31f38dc23">isLandingPad</a>())</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *LoadedPtr = LI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  <span class="comment">// If the loaded operand is defined in the LoadBB, it can&#39;t be available.</span></div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  <span class="comment">// TODO: Could do simple PHI translation, that would be fun :)</span></div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *PtrOp = dyn_cast&lt;Instruction&gt;(LoadedPtr))</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <span class="keywordflow">if</span> (PtrOp-&gt;getParent() == LoadBB)</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  <span class="comment">// Scan a few instructions up from the load, to see if it is obviously live at</span></div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;  <span class="comment">// the entry to its block.</span></div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> BBIt = LI;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *AvailableVal =</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        <a class="code" href="namespacellvm.html#a17aa92f2452d8c00efec55c96aa23a66">FindAvailableLoadedValue</a>(LoadedPtr, LoadBB, BBIt, 6)) {</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    <span class="comment">// If the value if the load is locally available within the block, just use</span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    <span class="comment">// it.  This frequently occurs for reg2mem&#39;d allocas.</span></div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    <span class="comment">//cerr &lt;&lt; &quot;LOAD ELIMINATED:\n&quot; &lt;&lt; *BBIt &lt;&lt; *LI &lt;&lt; &quot;\n&quot;;</span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    <span class="comment">// If the returned value is the load itself, replace with an undef. This can</span></div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    <span class="comment">// only happen in dead loops.</span></div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    <span class="keywordflow">if</span> (AvailableVal == LI) AvailableVal = <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(LI-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    LI-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(AvailableVal);</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    LI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  }</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;  <span class="comment">// Otherwise, if we scanned the whole block and got to the top of the block,</span></div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;  <span class="comment">// we know the block is locally transparent to the load.  If not, something</span></div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;  <span class="comment">// might clobber its value.</span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;  <span class="keywordflow">if</span> (BBIt != LoadBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>())</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;  <span class="comment">// If all of the loads and stores that feed the value have the same TBAA tag,</span></div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  <span class="comment">// then we can propagate it onto any newly inserted loads.</span></div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *TBAATag = LI-&gt;<a class="code" href="classllvm_1_1Instruction.html#aafa29112cbe02e4adc9b36752c771991">getMetadata</a>(<a class="code" href="classllvm_1_1LLVMContext.html#a0869c4dfee48696ce863fcd367eba52da66682b7e33233c8e51196bbf274726a2">LLVMContext::MD_tbaa</a>);</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock*, 8&gt;</a> PredsScanned;</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;BasicBlock*, Value*&gt;</a>, 8&gt; AvailablePredsTy;</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  AvailablePredsTy AvailablePreds;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OneUnavailablePred = 0;</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  <span class="comment">// If we got here, the loaded value is transparent through to the start of the</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  <span class="comment">// block.  Check to see if it is available in any of the predecessor blocks.</span></div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PredIterator.html">pred_iterator</a> PI = <a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(LoadBB), PE = <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(LoadBB);</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;       PI != PE; ++PI) {</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PredBB = *PI;</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    <span class="comment">// If we already scanned this predecessor, skip it.</span></div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    <span class="keywordflow">if</span> (!PredsScanned.<a class="code" href="classllvm_1_1SmallPtrSet.html#a9b6dd0fc7a648a939e571246045b673e">insert</a>(PredBB))</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <span class="comment">// Scan the predecessor to see if the value is available in the pred.</span></div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    BBIt = PredBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>();</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *ThisTBAATag = 0;</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *PredAvailable = <a class="code" href="namespacellvm.html#a17aa92f2452d8c00efec55c96aa23a66">FindAvailableLoadedValue</a>(LoadedPtr, PredBB, BBIt, 6,</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                                                    0, &amp;ThisTBAATag);</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <span class="keywordflow">if</span> (!PredAvailable) {</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;      OneUnavailablePred = PredBB;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    }</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <span class="comment">// If tbaa tags disagree or are not present, forget about them.</span></div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    <span class="keywordflow">if</span> (TBAATag != ThisTBAATag) TBAATag = 0;</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <span class="comment">// If so, this load is partially redundant.  Remember this info so that we</span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <span class="comment">// can create a PHI node.</span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    AvailablePreds.push_back(std::make_pair(PredBB, PredAvailable));</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;  }</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;  <span class="comment">// If the loaded value isn&#39;t available in any predecessor, it isn&#39;t partially</span></div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  <span class="comment">// redundant.</span></div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;  <span class="keywordflow">if</span> (AvailablePreds.empty()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  <span class="comment">// Okay, the loaded value is available in at least one (and maybe all!)</span></div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;  <span class="comment">// predecessors.  If the value is unavailable in more than one unique</span></div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;  <span class="comment">// predecessor, we want to insert a merge block for those common predecessors.</span></div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;  <span class="comment">// This ensures that we only have to insert one reload, thus not increasing</span></div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  <span class="comment">// code size.</span></div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *UnavailablePred = 0;</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  <span class="comment">// If there is exactly one predecessor where the value is unavailable, the</span></div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  <span class="comment">// already computed &#39;OneUnavailablePred&#39; block is it.  If it ends in an</span></div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  <span class="comment">// unconditional branch, we know that it isn&#39;t a critical edge.</span></div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;  <span class="keywordflow">if</span> (PredsScanned.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a41c201584742f7eb45b2be8cd54e3bcb">size</a>() == AvailablePreds.size()+1 &amp;&amp;</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;      OneUnavailablePred-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1TerminatorInst.html#a4c26d3b92af99a6c8defd89a2d39ca32">getNumSuccessors</a>() == 1) {</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    UnavailablePred = OneUnavailablePred;</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (PredsScanned.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a41c201584742f7eb45b2be8cd54e3bcb">size</a>() != AvailablePreds.size()) {</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <span class="comment">// Otherwise, we had multiple unavailable predecessors or we had a critical</span></div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <span class="comment">// edge from the one.</span></div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock*, 8&gt;</a> PredsToSplit;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock*, 8&gt;</a> AvailablePredSet;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = AvailablePreds.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;      AvailablePredSet.<a class="code" href="classllvm_1_1SmallPtrSet.html#a9b6dd0fc7a648a939e571246045b673e">insert</a>(AvailablePreds[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].first);</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    <span class="comment">// Add all the unavailable predecessors to the PredsToSplit list.</span></div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PredIterator.html">pred_iterator</a> PI = <a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(LoadBB), PE = <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(LoadBB);</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;         PI != PE; ++PI) {</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = *PI;</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;      <span class="comment">// If the predecessor is an indirect goto, we can&#39;t split the edge.</span></div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;      <span class="keywordflow">if</span> (isa&lt;IndirectBrInst&gt;(P-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>()))</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;      <span class="keywordflow">if</span> (!AvailablePredSet.<a class="code" href="classllvm_1_1SmallPtrSet.html#a2ced6343b8ad006a757059554bbf9f37">count</a>(P))</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;        PredsToSplit.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(P);</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    }</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    <span class="comment">// Split them out to their own block.</span></div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    UnavailablePred =</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;      <a class="code" href="namespacellvm.html#a55e3df77bb47f39e077b6a4e7e00bb03">SplitBlockPredecessors</a>(LoadBB, PredsToSplit, <span class="stringliteral">&quot;thread-pre-split&quot;</span>, <span class="keyword">this</span>);</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;  }</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;  <span class="comment">// If the value isn&#39;t available in all predecessors, then there will be</span></div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;  <span class="comment">// exactly one where it isn&#39;t available.  Insert a load on that edge and add</span></div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;  <span class="comment">// it to the AvailablePreds list.</span></div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;  <span class="keywordflow">if</span> (UnavailablePred) {</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    assert(UnavailablePred-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1TerminatorInst.html#a4c26d3b92af99a6c8defd89a2d39ca32">getNumSuccessors</a>() == 1 &amp;&amp;</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;           <span class="stringliteral">&quot;Can&#39;t handle critical edge here!&quot;</span>);</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *NewVal = <span class="keyword">new</span> <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a>(LoadedPtr, LI-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.pr&quot;</span>, <span class="keyword">false</span>,</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;                                 LI-&gt;<a class="code" href="classllvm_1_1LoadInst.html#ad1168fc42bcba1b71217a4969483671a">getAlignment</a>(),</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;                                 UnavailablePred-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>());</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    NewVal-&gt;<a class="code" href="classllvm_1_1Instruction.html#a7bd545769621a0a9d2cfb074f86f4295">setDebugLoc</a>(LI-&gt;<a class="code" href="classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">getDebugLoc</a>());</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    <span class="keywordflow">if</span> (TBAATag)</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;      NewVal-&gt;setMetadata(<a class="code" href="classllvm_1_1LLVMContext.html#a0869c4dfee48696ce863fcd367eba52da66682b7e33233c8e51196bbf274726a2">LLVMContext::MD_tbaa</a>, TBAATag);</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    AvailablePreds.push_back(std::make_pair(UnavailablePred, NewVal));</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;  }</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;  <span class="comment">// Now we know that each predecessor of this block has a value in</span></div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;  <span class="comment">// AvailablePreds, sort them for efficient access as we&#39;re walking the preds.</span></div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;  <a class="code" href="namespacellvm.html#add1eb5637dd671428b6f138ed3db6428">array_pod_sort</a>(AvailablePreds.begin(), AvailablePreds.end());</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;  <span class="comment">// Create a PHI node at the start of the block for the PRE&#39;d load value.</span></div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  <a class="code" href="classllvm_1_1PredIterator.html">pred_iterator</a> PB = <a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(LoadBB), PE = <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(LoadBB);</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = <a class="code" href="classllvm_1_1PHINode.html#afb5e83bf5123ff7c51058eb0ebebcdc6">PHINode::Create</a>(LI-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), std::distance(PB, PE), <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;                                LoadBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>());</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  PN-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(LI);</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;  PN-&gt;<a class="code" href="classllvm_1_1Instruction.html#a7bd545769621a0a9d2cfb074f86f4295">setDebugLoc</a>(LI-&gt;<a class="code" href="classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">getDebugLoc</a>());</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;  <span class="comment">// Insert new entries into the PHI for each predecessor.  A single block may</span></div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;  <span class="comment">// have multiple entries here.</span></div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PredIterator.html">pred_iterator</a> PI = PB; PI != PE; ++PI) {</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = *PI;</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    AvailablePredsTy::iterator <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> =</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;      std::lower_bound(AvailablePreds.begin(), AvailablePreds.end(),</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;                       std::make_pair(P, (<a class="code" href="classllvm_1_1Value.html">Value</a>*)0));</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    assert(I != AvailablePreds.end() &amp;&amp; I-&gt;first == P &amp;&amp;</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;           <span class="stringliteral">&quot;Didn&#39;t find entry for predecessor!&quot;</span>);</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(I-&gt;second, I-&gt;first);</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;  }</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;  <span class="comment">//cerr &lt;&lt; &quot;PRE: &quot; &lt;&lt; *LI &lt;&lt; *PN &lt;&lt; &quot;\n&quot;;</span></div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  LI-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(PN);</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;  LI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;}</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;<span class="comment">/// FindMostPopularDest - The specified list contains multiple possible</span></div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;<span class="comment">/// threadable destinations.  Pick the one that occurs the most frequently in</span></div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;<span class="comment">/// the list.</span></div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *</div><div class="line"><a name="l01015"></a><span class="lineno"><a class="line" href="JumpThreading_8cpp.html#a928f0bcb0579bd746528e96f8f509394"> 1015</a></span>&#160;<a class="code" href="JumpThreading_8cpp.html#a928f0bcb0579bd746528e96f8f509394">FindMostPopularDest</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB,</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;                    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt;std::pair&lt;<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a>*,</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;                                  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a>*&gt; &gt; &amp;PredToDestList) {</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;  assert(!PredToDestList.empty());</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;  <span class="comment">// Determine popularity.  If there are multiple possible destinations, we</span></div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;  <span class="comment">// explicitly choose to ignore &#39;undef&#39; destinations.  We prefer to thread</span></div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;  <span class="comment">// blocks with known and real destinations to threading undef.  We&#39;ll handle</span></div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;  <span class="comment">// them later if interesting.</span></div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;BasicBlock*, unsigned&gt;</a> DestPopularity;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = PredToDestList.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    <span class="keywordflow">if</span> (PredToDestList[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].second)</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;      DestPopularity[PredToDestList[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].second]++;</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;  <span class="comment">// Find the most popular dest.</span></div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;BasicBlock*, unsigned&gt;::iterator</a> DPI = DestPopularity.<a class="code" href="classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">begin</a>();</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *MostPopularDest = DPI-&gt;first;</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;  <span class="keywordtype">unsigned</span> Popularity = DPI-&gt;second;</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock*, 4&gt;</a> SamePopularity;</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;  <span class="keywordflow">for</span> (++DPI; DPI != DestPopularity.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>(); ++DPI) {</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <span class="comment">// If the popularity of this entry isn&#39;t higher than the popularity we&#39;ve</span></div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <span class="comment">// seen so far, ignore it.</span></div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <span class="keywordflow">if</span> (DPI-&gt;second &lt; Popularity)</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;      ; <span class="comment">// ignore.</span></div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (DPI-&gt;second == Popularity) {</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;      <span class="comment">// If it is the same as what we&#39;ve seen so far, keep track of it.</span></div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;      SamePopularity.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(DPI-&gt;first);</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;      <span class="comment">// If it is more popular, remember it.</span></div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;      SamePopularity.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;      MostPopularDest = DPI-&gt;first;</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;      Popularity = DPI-&gt;second;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    }</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;  }</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;  <span class="comment">// Okay, now we know the most popular destination.  If there is more than one</span></div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;  <span class="comment">// destination, we need to determine one.  This is arbitrary, but we need</span></div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;  <span class="comment">// to make a deterministic decision.  Pick the first one that appears in the</span></div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;  <span class="comment">// successor list.</span></div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;  <span class="keywordflow">if</span> (!SamePopularity.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>()) {</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    SamePopularity.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(MostPopularDest);</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <a class="code" href="classllvm_1_1TerminatorInst.html">TerminatorInst</a> *TI = BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>();</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; ; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;      assert(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != TI-&gt;<a class="code" href="classllvm_1_1TerminatorInst.html#a4c26d3b92af99a6c8defd89a2d39ca32">getNumSuccessors</a>() &amp;&amp; <span class="stringliteral">&quot;Didn&#39;t find any successor!&quot;</span>);</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;      <span class="keywordflow">if</span> (std::find(SamePopularity.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), SamePopularity.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>(),</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;                    TI-&gt;<a class="code" href="classllvm_1_1TerminatorInst.html#a3aac3b6c36415a2b08f65ead9e3e51e7">getSuccessor</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)) == SamePopularity.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>())</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;      MostPopularDest = TI-&gt;<a class="code" href="classllvm_1_1TerminatorInst.html#a3aac3b6c36415a2b08f65ead9e3e51e7">getSuccessor</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    }</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;  }</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;  <span class="comment">// Okay, we have finally picked the most popular destination.</span></div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;  <span class="keywordflow">return</span> MostPopularDest;</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;}</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;<span class="keywordtype">bool</span> JumpThreading::ProcessThreadableEdges(<a class="code" href="classllvm_1_1Value.html">Value</a> *Cond, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB,</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;                                           <a class="code" href="JumpThreading_8cpp.html#accb226989f9f6a384c57a42b51f2c366">ConstantPreference</a> Preference) {</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;  <span class="comment">// If threading this would thread across a loop header, don&#39;t even try to</span></div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  <span class="comment">// thread the edge.</span></div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;  <span class="keywordflow">if</span> (LoopHeaders.count(BB))</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;  PredValueInfoTy PredValues;</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  <span class="keywordflow">if</span> (!ComputeValueKnownInPredecessors(Cond, BB, PredValues, Preference))</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  assert(!PredValues.empty() &amp;&amp;</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;         <span class="stringliteral">&quot;ComputeValueKnownInPredecessors returned true with no values&quot;</span>);</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;IN BB: &quot;</span> &lt;&lt; *BB;</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = PredValues.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  BB &#39;&quot;</span> &lt;&lt; BB-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt; <span class="stringliteral">&quot;&#39;: FOUND condition = &quot;</span></div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;            &lt;&lt; *PredValues[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].first</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;            &lt;&lt; <span class="stringliteral">&quot; for pred &#39;&quot;</span> &lt;&lt; PredValues[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].second-&gt;getName() &lt;&lt; <span class="stringliteral">&quot;&#39;.\n&quot;</span>;</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;        });</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;  <span class="comment">// Decide what we want to thread through.  Convert our list of known values to</span></div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;  <span class="comment">// a list of known destinations for each pred.  This also discards duplicate</span></div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;  <span class="comment">// predecessors and keeps track of the undefined inputs (which are represented</span></div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  <span class="comment">// as a null dest in the PredToDestList).</span></div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock*, 16&gt;</a> SeenPreds;</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;BasicBlock*, BasicBlock*&gt;</a>, 16&gt; PredToDestList;</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OnlyDest = 0;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *MultipleDestSentinel = (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a>*)(<a class="code" href="classintptr__t.html">intptr_t</a>)~0ULL;</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = PredValues.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred = PredValues[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].second;</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    <span class="keywordflow">if</span> (!SeenPreds.insert(Pred))</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;      <span class="keywordflow">continue</span>;  <span class="comment">// Duplicate predecessor entry.</span></div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    <span class="comment">// If the predecessor ends with an indirect goto, we can&#39;t change its</span></div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    <span class="comment">// destination.</span></div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    <span class="keywordflow">if</span> (isa&lt;IndirectBrInst&gt;(Pred-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>()))</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Val = PredValues[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].first;</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *DestBB;</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(Val))</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;      DestBB = 0;</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = dyn_cast&lt;BranchInst&gt;(BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>()))</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;      DestBB = BI-&gt;getSuccessor(cast&lt;ConstantInt&gt;(Val)-&gt;<a class="code" href="Lint_8cpp.html#a6cd8c36c54045fd5897b54d4c30e0044">isZero</a>());</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SwitchInst.html">SwitchInst</a> *SI = dyn_cast&lt;SwitchInst&gt;(BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>())) {</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;      DestBB = SI-&gt;findCaseValue(cast&lt;ConstantInt&gt;(Val)).getCaseSuccessor();</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;      assert(isa&lt;IndirectBrInst&gt;(BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>())</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;              &amp;&amp; <span class="stringliteral">&quot;Unexpected terminator&quot;</span>);</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;      DestBB = cast&lt;BlockAddress&gt;(Val)-&gt;getBasicBlock();</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    }</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    <span class="comment">// If we have exactly one destination, remember it for efficiency below.</span></div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    <span class="keywordflow">if</span> (PredToDestList.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>())</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;      OnlyDest = DestBB;</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (OnlyDest != DestBB)</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;      OnlyDest = MultipleDestSentinel;</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    PredToDestList.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(std::make_pair(Pred, DestBB));</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;  }</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  <span class="comment">// If all edges were unthreadable, we fail.</span></div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;  <span class="keywordflow">if</span> (PredToDestList.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>())</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;  <span class="comment">// Determine which is the most common successor.  If we have many inputs and</span></div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;  <span class="comment">// this block is a switch, we want to start by threading the batch that goes</span></div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;  <span class="comment">// to the most popular destination first.  If we only know about one</span></div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  <span class="comment">// threadable destination (the common case) we can avoid this.</span></div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *MostPopularDest = OnlyDest;</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;  <span class="keywordflow">if</span> (MostPopularDest == MultipleDestSentinel)</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    MostPopularDest = <a class="code" href="JumpThreading_8cpp.html#a928f0bcb0579bd746528e96f8f509394">FindMostPopularDest</a>(BB, PredToDestList);</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;  <span class="comment">// Now that we know what the most popular destination is, factor all</span></div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;  <span class="comment">// predecessors that will jump to it into a single predecessor.</span></div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock*, 16&gt;</a> PredsToFactor;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = PredToDestList.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    <span class="keywordflow">if</span> (PredToDestList[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].second == MostPopularDest) {</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred = PredToDestList[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].first;</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;      <span class="comment">// This predecessor may be a switch or something else that has multiple</span></div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;      <span class="comment">// edges to the block.  Factor each of these edges by listing them</span></div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;      <span class="comment">// according to # occurrences in PredsToFactor.</span></div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;      <a class="code" href="classllvm_1_1TerminatorInst.html">TerminatorInst</a> *PredTI = Pred-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>();</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = PredTI-&gt;<a class="code" href="classllvm_1_1TerminatorInst.html#a4c26d3b92af99a6c8defd89a2d39ca32">getNumSuccessors</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;        <span class="keywordflow">if</span> (PredTI-&gt;<a class="code" href="classllvm_1_1TerminatorInst.html#a3aac3b6c36415a2b08f65ead9e3e51e7">getSuccessor</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) == <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;          PredsToFactor.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Pred);</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    }</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;  <span class="comment">// If the threadable edges are branching on an undefined value, we get to pick</span></div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;  <span class="comment">// the destination that these predecessors should get to.</span></div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;  <span class="keywordflow">if</span> (MostPopularDest == 0)</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    MostPopularDest = BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>()-&gt;</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;                            getSuccessor(<a class="code" href="JumpThreading_8cpp.html#a6495d0a79e098cdc8a57d51c3f86396e">GetBestDestForJumpOnUndef</a>(BB));</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;  <span class="comment">// Ok, try to thread it!</span></div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;  <span class="keywordflow">return</span> ThreadEdge(BB, PredsToFactor, MostPopularDest);</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;}</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;<span class="comment">/// ProcessBranchOnPHI - We have an otherwise unthreadable conditional branch on</span></div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;<span class="comment">/// a PHI node in the current block.  See if there are any simplifications we</span></div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;<span class="comment">/// can do based on inputs to the phi node.</span></div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> JumpThreading::ProcessBranchOnPHI(<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN) {</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB = PN-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;  <span class="comment">// TODO: We could make use of this to do it once for blocks with common PHI</span></div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;  <span class="comment">// values.</span></div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock*, 1&gt;</a> PredBBs;</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;  PredBBs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a102d0ad36060677286c3aefb812e5512">resize</a>(1);</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  <span class="comment">// If any of the predecessor blocks end in an unconditional branch, we can</span></div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;  <span class="comment">// *duplicate* the conditional branch into that block in order to further</span></div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  <span class="comment">// encourage jump threading and to eliminate cases where we have branch on a</span></div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;  <span class="comment">// phi of an icmp (branch on icmp is much better).</span></div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">getNumIncomingValues</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PredBB = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a4c25b6c00c4867281779c81ab64d2081">getIncomingBlock</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *PredBr = dyn_cast&lt;BranchInst&gt;(PredBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>()))</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;      <span class="keywordflow">if</span> (PredBr-&gt;isUnconditional()) {</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;        PredBBs[0] = PredBB;</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;        <span class="comment">// Try to duplicate BB into PredBB.</span></div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;        <span class="keywordflow">if</span> (DuplicateCondBranchOnPHIIntoPred(BB, PredBBs))</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;      }</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;  }</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;}</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;<span class="comment">/// ProcessBranchOnXOR - We have an otherwise unthreadable conditional branch on</span></div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;<span class="comment">/// a xor instruction in the current block.  See if there are any</span></div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;<span class="comment">/// simplifications we can do based on inputs to the xor.</span></div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> JumpThreading::ProcessBranchOnXOR(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *BO) {</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB = BO-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;  <span class="comment">// If either the LHS or RHS of the xor is a constant, don&#39;t do this</span></div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;  <span class="comment">// optimization.</span></div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;  <span class="keywordflow">if</span> (isa&lt;ConstantInt&gt;(BO-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)) ||</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;      isa&lt;ConstantInt&gt;(BO-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1)))</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  <span class="comment">// If the first instruction in BB isn&#39;t a phi, we won&#39;t be able to infer</span></div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;  <span class="comment">// anything special about any particular predecessor.</span></div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;PHINode&gt;(BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a33603355becfb1a050b62aa015c1cc57">front</a>()))</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;  <span class="comment">// If we have a xor as the branch input to this block, and we know that the</span></div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;  <span class="comment">// LHS or RHS of the xor in any predecessor is true/false, then we can clone</span></div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;  <span class="comment">// the condition into the predecessor and fix that value to true, saving some</span></div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;  <span class="comment">// logical ops on that path and encouraging other paths to simplify.</span></div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;  <span class="comment">// This copies something like this:</span></div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;  <span class="comment">//  BB:</span></div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;  <span class="comment">//    %X = phi i1 [1],  [%X&#39;]</span></div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;  <span class="comment">//    %Y = icmp eq i32 %A, %B</span></div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;  <span class="comment">//    %Z = xor i1 %X, %Y</span></div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;  <span class="comment">//    br i1 %Z, ...</span></div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;  <span class="comment">// Into:</span></div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;  <span class="comment">//  BB&#39;:</span></div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;  <span class="comment">//    %Y = icmp ne i32 %A, %B</span></div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;  <span class="comment">//    br i1 %Z, ...</span></div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;  PredValueInfoTy XorOpValues;</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;  <span class="keywordtype">bool</span> isLHS = <span class="keyword">true</span>;</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;  <span class="keywordflow">if</span> (!ComputeValueKnownInPredecessors(BO-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, XorOpValues,</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;                                       WantInteger)) {</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    assert(XorOpValues.empty());</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;    <span class="keywordflow">if</span> (!ComputeValueKnownInPredecessors(BO-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1), <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, XorOpValues,</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;                                         WantInteger))</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;    isLHS = <span class="keyword">false</span>;</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;  }</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;  assert(!XorOpValues.empty() &amp;&amp;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;         <span class="stringliteral">&quot;ComputeValueKnownInPredecessors returned true with no values&quot;</span>);</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;  <span class="comment">// Scan the information to see which is most popular: true or false.  The</span></div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;  <span class="comment">// predecessors can be of the set true, false, or undef.</span></div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;  <span class="keywordtype">unsigned</span> NumTrue = 0, NumFalse = 0;</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = XorOpValues.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(XorOpValues[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].first))</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;      <span class="comment">// Ignore undefs for the count.</span></div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    <span class="keywordflow">if</span> (cast&lt;ConstantInt&gt;(XorOpValues[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].first)-&gt;isZero())</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;      ++NumFalse;</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;      ++NumTrue;</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;  }</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;  <span class="comment">// Determine which value to split on, true, false, or undef if neither.</span></div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *SplitVal = 0;</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;  <span class="keywordflow">if</span> (NumTrue &gt; NumFalse)</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    SplitVal = <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ad652423d9d91271ba153eb86482b2f55">getContext</a>());</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (NumTrue != 0 || NumFalse != 0)</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;    SplitVal = <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ad652423d9d91271ba153eb86482b2f55">getContext</a>());</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;  <span class="comment">// Collect all of the blocks that this can be folded into so that we can</span></div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;  <span class="comment">// factor this once and clone it once.</span></div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock*, 8&gt;</a> BlocksToFoldInto;</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = XorOpValues.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    <span class="keywordflow">if</span> (XorOpValues[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].first != SplitVal &amp;&amp;</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;        !isa&lt;UndefValue&gt;(XorOpValues[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].first))</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    BlocksToFoldInto.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(XorOpValues[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].second);</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;  }</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;  <span class="comment">// If we inferred a value for all of the predecessors, then duplication won&#39;t</span></div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;  <span class="comment">// help us.  However, we can just replace the LHS or RHS with the constant.</span></div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;  <span class="keywordflow">if</span> (BlocksToFoldInto.size() ==</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;      cast&lt;PHINode&gt;(BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a33603355becfb1a050b62aa015c1cc57">front</a>()).getNumIncomingValues()) {</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    <span class="keywordflow">if</span> (SplitVal == 0) {</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;      <span class="comment">// If all preds provide undef, just nuke the xor, because it is undef too.</span></div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;      BO-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(<a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(BO-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;      BO-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (SplitVal-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#ad4ea4748170f687710a54c919dde5625">isZero</a>()) {</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;      <span class="comment">// If all preds provide 0, replace the xor with the other input.</span></div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;      BO-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(BO-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(isLHS));</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;      BO-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;      <span class="comment">// If all preds provide 1, set the computed value to 1.</span></div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;      BO-&gt;<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(!isLHS, SplitVal);</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    }</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;  }</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;  <span class="comment">// Try to duplicate BB into PredBB.</span></div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;  <span class="keywordflow">return</span> DuplicateCondBranchOnPHIIntoPred(BB, BlocksToFoldInto);</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;}</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;<span class="comment">/// AddPHINodeEntriesForMappedBlock - We&#39;re adding &#39;NewPred&#39; as a new</span></div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;<span class="comment">/// predecessor to the PHIBB block.  If it has PHI nodes, add entries for</span></div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;<span class="comment">/// NewPred using the entries from OldPred (suitably mapped).</span></div><div class="line"><a name="l01317"></a><span class="lineno"><a class="line" href="JumpThreading_8cpp.html#a231f66b89b69fee6340bbff953bff43a"> 1317</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="JumpThreading_8cpp.html#a231f66b89b69fee6340bbff953bff43a">AddPHINodeEntriesForMappedBlock</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PHIBB,</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;                                            <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OldPred,</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;                                            <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewPred,</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;                                     <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Instruction*, Value*&gt;</a> &amp;<a class="code" href="classllvm_1_1ValueMap.html">ValueMap</a>) {</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> PNI = PHIBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;       <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1PHINode.html">PHINode</a>&gt;(PNI); ++PNI) {</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;    <span class="comment">// Ok, we have a PHI node.  Figure out what the incoming value was for the</span></div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    <span class="comment">// DestBlock.</span></div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *IV = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a21960167f529265a1cb02ac1e8ad10f6">getIncomingValueForBlock</a>(OldPred);</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    <span class="comment">// Remap the value if necessary.</span></div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst = dyn_cast&lt;Instruction&gt;(IV)) {</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;      <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Instruction*, Value*&gt;::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = ValueMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">find</a>(Inst);</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;      <span class="keywordflow">if</span> (I != ValueMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>())</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;        IV = I-&gt;second;</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    }</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(IV, NewPred);</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;  }</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;}</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;<span class="comment">/// ThreadEdge - We have decided that it is safe and profitable to factor the</span></div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;<span class="comment">/// blocks in PredBBs to one predecessor, then thread an edge from it to SuccBB</span></div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;<span class="comment">/// across BB.  Transform the IR to reflect this change.</span></div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> JumpThreading::ThreadEdge(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB,</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;                               <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;BasicBlock*&gt;</a> &amp;PredBBs,</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;                               <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SuccBB) {</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;  <span class="comment">// If threading to the same block as we come from, we would infinite loop.</span></div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;  <span class="keywordflow">if</span> (SuccBB == BB) {</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Not threading across BB &#39;&quot;</span> &lt;&lt; BB-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;&#39; - would thread to self!\n&quot;</span>);</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;  }</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;  <span class="comment">// If threading this would thread across a loop header, don&#39;t thread the edge.</span></div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;  <span class="comment">// See the comments above FindLoopHeaders for justifications and caveats.</span></div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;  <span class="keywordflow">if</span> (LoopHeaders.count(BB)) {</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Not threading across loop header BB &#39;&quot;</span> &lt;&lt; BB-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;&#39; to dest BB &#39;&quot;</span> &lt;&lt; SuccBB-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;&#39; - it might create an irreducible loop!\n&quot;</span>);</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;  }</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;  <span class="keywordtype">unsigned</span> JumpThreadCost = <a class="code" href="JumpThreading_8cpp.html#a03e550d05d9675fa027dcdf75d5184fe">getJumpThreadDuplicationCost</a>(BB, <a class="code" href="JumpThreading_8cpp.html#a5ea01a7f7556b186f9c162b56624abbd">Threshold</a>);</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;  <span class="keywordflow">if</span> (JumpThreadCost &gt; <a class="code" href="JumpThreading_8cpp.html#a5ea01a7f7556b186f9c162b56624abbd">Threshold</a>) {</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Not threading BB &#39;&quot;</span> &lt;&lt; BB-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;&#39; - Cost is too high: &quot;</span> &lt;&lt; JumpThreadCost &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;  }</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;  <span class="comment">// And finally, do it!  Start by factoring the predecessors is needed.</span></div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PredBB;</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;  <span class="keywordflow">if</span> (PredBBs.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>() == 1)</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;    PredBB = PredBBs[0];</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;  <span class="keywordflow">else</span> {</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Factoring out &quot;</span> &lt;&lt; PredBBs.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>()</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;          &lt;&lt; <span class="stringliteral">&quot; common predecessors.\n&quot;</span>);</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    PredBB = <a class="code" href="namespacellvm.html#a55e3df77bb47f39e077b6a4e7e00bb03">SplitBlockPredecessors</a>(BB, PredBBs, <span class="stringliteral">&quot;.thr_comm&quot;</span>, <span class="keyword">this</span>);</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;  }</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;  <span class="comment">// And finally, do it!</span></div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Threading edge from &#39;&quot;</span> &lt;&lt; PredBB-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt; <span class="stringliteral">&quot;&#39; to &#39;&quot;</span></div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;        &lt;&lt; SuccBB-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt; <span class="stringliteral">&quot;&#39; with cost: &quot;</span> &lt;&lt; JumpThreadCost</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;, across block:\n    &quot;</span></div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;        &lt;&lt; *BB &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;  LVI-&gt;threadEdge(PredBB, BB, SuccBB);</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;  <span class="comment">// We are going to have to map operands from the original BB block to the new</span></div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;  <span class="comment">// copy of the block &#39;NewBB&#39;.  If there are PHI nodes in BB, evaluate them to</span></div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;  <span class="comment">// account for entry from PredBB.</span></div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Instruction*, Value*&gt;</a> ValueMapping;</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewBB = <a class="code" href="classllvm_1_1BasicBlock.html#ae1d53a21892854816885c7288f8b46f1">BasicBlock::Create</a>(BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ad652423d9d91271ba153eb86482b2f55">getContext</a>(),</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;                                         BB-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.thread&quot;</span>,</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;                                         BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>(), <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;  NewBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a507bb47fc498540c91fec0bf95c25907">moveAfter</a>(PredBB);</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;  <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> BI = BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;  <span class="keywordflow">for</span> (; <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1PHINode.html">PHINode</a>&gt;(BI); ++BI)</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;    ValueMapping[PN] = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a21960167f529265a1cb02ac1e8ad10f6">getIncomingValueForBlock</a>(PredBB);</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;  <span class="comment">// Clone the non-phi instructions of BB into NewBB, keeping track of the</span></div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;  <span class="comment">// mapping and using it to remap operands in the cloned instructions.</span></div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;  <span class="keywordflow">for</span> (; !isa&lt;TerminatorInst&gt;(BI); ++BI) {</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *New = BI-&gt;clone();</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    New-&gt;<a class="code" href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">setName</a>(BI-&gt;getName());</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    NewBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a531d11ba36ed48d86057d507cc8d5567">getInstList</a>().<a class="code" href="classllvm_1_1iplist.html#a63c6a928d5abebdf6d8254532cda3bd3">push_back</a>(New);</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    ValueMapping[BI] = New;</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    <span class="comment">// Remap operands to patch up intra-block references.</span></div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = New-&gt;<a class="code" href="classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst = dyn_cast&lt;Instruction&gt;(New-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>))) {</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;        <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Instruction*, Value*&gt;::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = ValueMapping.<a class="code" href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">find</a>(Inst);</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;        <span class="keywordflow">if</span> (I != ValueMapping.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>())</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;          New-&gt;<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, I-&gt;second);</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;      }</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;  }</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;  <span class="comment">// We didn&#39;t copy the terminator from BB over to NewBB, because there is now</span></div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;  <span class="comment">// an unconditional jump to SuccBB.  Insert the unconditional jump.</span></div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *NewBI =<a class="code" href="classllvm_1_1BranchInst.html#ae9cbc599309fd2da33ec1c61df01ce1f">BranchInst::Create</a>(SuccBB, NewBB);</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;  NewBI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a7bd545769621a0a9d2cfb074f86f4295">setDebugLoc</a>(BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">getDebugLoc</a>());</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;  <span class="comment">// Check to see if SuccBB has PHI nodes. If so, we need to add entries to the</span></div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;  <span class="comment">// PHI nodes for NewBB now.</span></div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;  <a class="code" href="JumpThreading_8cpp.html#a231f66b89b69fee6340bbff953bff43a">AddPHINodeEntriesForMappedBlock</a>(SuccBB, BB, NewBB, ValueMapping);</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;  <span class="comment">// If there were values defined in BB that are used outside the block, then we</span></div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;  <span class="comment">// now have to update all uses of the value to use either the original value,</span></div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;  <span class="comment">// the cloned value, or some PHI derived value.  This can require arbitrary</span></div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;  <span class="comment">// PHI insertion, of which we are prepared to do, clean these up now.</span></div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;  <a class="code" href="classllvm_1_1SSAUpdater.html">SSAUpdater</a> SSAUpdate;</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Use*, 16&gt;</a> UsesToRename;</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>(); ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    <span class="comment">// Scan all uses of this instruction to see if it is used outside of its</span></div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;    <span class="comment">// block, and if so, record them in UsesToRename.</span></div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::use_iterator</a> UI = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;use_begin(), E = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;use_end(); UI != E;</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;         ++UI) {</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1User.html">User</a> = cast&lt;Instruction&gt;(*UI);</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *UserPN = dyn_cast&lt;PHINode&gt;(User)) {</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;        <span class="keywordflow">if</span> (UserPN-&gt;getIncomingBlock(UI) == <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (User-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>() == <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;      UsesToRename.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(&amp;UI.getUse());</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;    }</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;    <span class="comment">// If there are no uses outside the block, we&#39;re done with this instruction.</span></div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;    <span class="keywordflow">if</span> (UsesToRename.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>())</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;JT: Renaming non-local uses of: &quot;</span> &lt;&lt; *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;    <span class="comment">// We found a use of I outside of BB.  Rename all uses of I that are outside</span></div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;    <span class="comment">// its block to be uses of the appropriate PHI node etc.  See ValuesInBlocks</span></div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    <span class="comment">// with the two values we know.</span></div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;    SSAUpdate.<a class="code" href="classllvm_1_1SSAUpdater.html#a4fe3279aae4f726813a672d4a9b26cb1">Initialize</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getType(), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getName());</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;    SSAUpdate.<a class="code" href="classllvm_1_1SSAUpdater.html#af0d1a82b4e629e834c2ed53e5cbe22ef">AddAvailableValue</a>(BB, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;    SSAUpdate.<a class="code" href="classllvm_1_1SSAUpdater.html#af0d1a82b4e629e834c2ed53e5cbe22ef">AddAvailableValue</a>(NewBB, ValueMapping[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]);</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;    <span class="keywordflow">while</span> (!UsesToRename.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>())</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;      SSAUpdate.<a class="code" href="classllvm_1_1SSAUpdater.html#a05c4f6837ee786e83246beeb01e3aa8d">RewriteUse</a>(*UsesToRename.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">pop_back_val</a>());</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;  }</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;  <span class="comment">// Ok, NewBB is good to go.  Update the terminator of PredBB to jump to</span></div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;  <span class="comment">// NewBB instead of BB.  This eliminates predecessors from BB, which requires</span></div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;  <span class="comment">// us to simplify any PHI nodes in BB.</span></div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;  <a class="code" href="classllvm_1_1TerminatorInst.html">TerminatorInst</a> *PredTerm = PredBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>();</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = PredTerm-&gt;<a class="code" href="classllvm_1_1TerminatorInst.html#a4c26d3b92af99a6c8defd89a2d39ca32">getNumSuccessors</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    <span class="keywordflow">if</span> (PredTerm-&gt;<a class="code" href="classllvm_1_1TerminatorInst.html#a3aac3b6c36415a2b08f65ead9e3e51e7">getSuccessor</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) == <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;      BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a6f6763e343549d530a1424f1b24053bb">removePredecessor</a>(PredBB, <span class="keyword">true</span>);</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;      PredTerm-&gt;<a class="code" href="classllvm_1_1TerminatorInst.html#a79fb3df941bcb2ba32ba6438409d0c0b">setSuccessor</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, NewBB);</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;    }</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;  <span class="comment">// At this point, the IR is fully up to date and consistent.  Do a quick scan</span></div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;  <span class="comment">// over the new instructions and zap any that are constants or dead.  This</span></div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;  <span class="comment">// frequently happens because of phi translation.</span></div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;  <a class="code" href="namespacellvm.html#ad5b5ed1a0de8792e2ebf2eba3ba712fd">SimplifyInstructionsInBlock</a>(NewBB, TD, TLI);</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;  <span class="comment">// Threaded an edge!</span></div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;  ++NumThreads;</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;}</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;<span class="comment">/// DuplicateCondBranchOnPHIIntoPred - PredBB contains an unconditional branch</span></div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;<span class="comment">/// to BB which contains an i1 PHI node and a conditional branch on that PHI.</span></div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;<span class="comment">/// If we can duplicate the contents of BB up into PredBB do so now, this</span></div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;<span class="comment">/// improves the odds that the branch will be on an analyzable instruction like</span></div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;<span class="comment">/// a compare.</span></div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> JumpThreading::DuplicateCondBranchOnPHIIntoPred(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB,</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;                                 <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;BasicBlock *&gt;</a> &amp;PredBBs) {</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;  assert(!PredBBs.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>() &amp;&amp; <span class="stringliteral">&quot;Can&#39;t handle an empty set&quot;</span>);</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;  <span class="comment">// If BB is a loop header, then duplicating this block outside the loop would</span></div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;  <span class="comment">// cause us to transform this into an irreducible loop, don&#39;t do this.</span></div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;  <span class="comment">// See the comments above FindLoopHeaders for justifications and caveats.</span></div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;  <span class="keywordflow">if</span> (LoopHeaders.count(BB)) {</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Not duplicating loop header &#39;&quot;</span> &lt;&lt; BB-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;&#39; into predecessor block &#39;&quot;</span> &lt;&lt; PredBBs[0]-&gt;getName()</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;&#39; - it might create an irreducible loop!\n&quot;</span>);</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;  }</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;  <span class="keywordtype">unsigned</span> DuplicationCost = <a class="code" href="JumpThreading_8cpp.html#a03e550d05d9675fa027dcdf75d5184fe">getJumpThreadDuplicationCost</a>(BB, <a class="code" href="JumpThreading_8cpp.html#a5ea01a7f7556b186f9c162b56624abbd">Threshold</a>);</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;  <span class="keywordflow">if</span> (DuplicationCost &gt; <a class="code" href="JumpThreading_8cpp.html#a5ea01a7f7556b186f9c162b56624abbd">Threshold</a>) {</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Not duplicating BB &#39;&quot;</span> &lt;&lt; BB-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;&#39; - Cost is too high: &quot;</span> &lt;&lt; DuplicationCost &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;  }</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;  <span class="comment">// And finally, do it!  Start by factoring the predecessors is needed.</span></div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PredBB;</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;  <span class="keywordflow">if</span> (PredBBs.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>() == 1)</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    PredBB = PredBBs[0];</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;  <span class="keywordflow">else</span> {</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Factoring out &quot;</span> &lt;&lt; PredBBs.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>()</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;          &lt;&lt; <span class="stringliteral">&quot; common predecessors.\n&quot;</span>);</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;    PredBB = <a class="code" href="namespacellvm.html#a55e3df77bb47f39e077b6a4e7e00bb03">SplitBlockPredecessors</a>(BB, PredBBs, <span class="stringliteral">&quot;.thr_comm&quot;</span>, <span class="keyword">this</span>);</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;  }</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;  <span class="comment">// Okay, we decided to do this!  Clone all the instructions in BB onto the end</span></div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;  <span class="comment">// of PredBB.</span></div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Duplicating block &#39;&quot;</span> &lt;&lt; BB-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt; <span class="stringliteral">&quot;&#39; into end of &#39;&quot;</span></div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;        &lt;&lt; PredBB-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt; <span class="stringliteral">&quot;&#39; to eliminate branch on phi.  Cost: &quot;</span></div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;        &lt;&lt; DuplicationCost &lt;&lt; <span class="stringliteral">&quot; block is:&quot;</span> &lt;&lt; *BB &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;  <span class="comment">// Unless PredBB ends with an unconditional branch, split the edge so that we</span></div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;  <span class="comment">// can just clone the bits from BB into the end of the new PredBB.</span></div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *OldPredBranch = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a>&gt;(PredBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>());</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;  <span class="keywordflow">if</span> (OldPredBranch == 0 || !OldPredBranch-&gt;isUnconditional()) {</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;    PredBB = <a class="code" href="namespacellvm.html#a0a7e7f31f3da37dc95109dd1164a30b6">SplitEdge</a>(PredBB, BB, <span class="keyword">this</span>);</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;    OldPredBranch = cast&lt;BranchInst&gt;(PredBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>());</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;  }</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;  <span class="comment">// We are going to have to map operands from the original BB block into the</span></div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;  <span class="comment">// PredBB block.  Evaluate PHI nodes in BB.</span></div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Instruction*, Value*&gt;</a> ValueMapping;</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;  <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> BI = BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;  <span class="keywordflow">for</span> (; <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1PHINode.html">PHINode</a>&gt;(BI); ++BI)</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    ValueMapping[PN] = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a21960167f529265a1cb02ac1e8ad10f6">getIncomingValueForBlock</a>(PredBB);</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;  <span class="comment">// Clone the non-phi instructions of BB into PredBB, keeping track of the</span></div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;  <span class="comment">// mapping and using it to remap operands in the cloned instructions.</span></div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;  <span class="keywordflow">for</span> (; BI != BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>(); ++BI) {</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *New = BI-&gt;clone();</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;    <span class="comment">// Remap operands to patch up intra-block references.</span></div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = New-&gt;<a class="code" href="classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst = dyn_cast&lt;Instruction&gt;(New-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>))) {</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;        <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Instruction*, Value*&gt;::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = ValueMapping.find(Inst);</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;        <span class="keywordflow">if</span> (I != ValueMapping.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>())</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;          New-&gt;<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, I-&gt;second);</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;      }</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    <span class="comment">// If this instruction can be simplified after the operands are updated,</span></div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;    <span class="comment">// just use the simplified value instead.  This frequently happens due to</span></div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;    <span class="comment">// phi translation.</span></div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *IV = <a class="code" href="namespacellvm.html#a50f8f41fccbea466816345520e9bfabb">SimplifyInstruction</a>(New, TD)) {</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;      <span class="keyword">delete</span> New;</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;      ValueMapping[BI] = IV;</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;      <span class="comment">// Otherwise, insert the new instruction into the block.</span></div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;      New-&gt;<a class="code" href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">setName</a>(BI-&gt;getName());</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;      PredBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a531d11ba36ed48d86057d507cc8d5567">getInstList</a>().<a class="code" href="classllvm_1_1iplist.html#a35c71de7e8bbe3c0353d042beb58263f">insert</a>(OldPredBranch, New);</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;      ValueMapping[BI] = New;</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    }</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;  }</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;  <span class="comment">// Check to see if the targets of the branch had PHI nodes. If so, we need to</span></div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;  <span class="comment">// add entries to the PHI nodes for branch from PredBB now.</span></div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BBBranch = cast&lt;BranchInst&gt;(BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>());</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;  <a class="code" href="JumpThreading_8cpp.html#a231f66b89b69fee6340bbff953bff43a">AddPHINodeEntriesForMappedBlock</a>(BBBranch-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(0), <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, PredBB,</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;                                  ValueMapping);</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;  <a class="code" href="JumpThreading_8cpp.html#a231f66b89b69fee6340bbff953bff43a">AddPHINodeEntriesForMappedBlock</a>(BBBranch-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(1), <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, PredBB,</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;                                  ValueMapping);</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;  <span class="comment">// If there were values defined in BB that are used outside the block, then we</span></div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;  <span class="comment">// now have to update all uses of the value to use either the original value,</span></div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;  <span class="comment">// the cloned value, or some PHI derived value.  This can require arbitrary</span></div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;  <span class="comment">// PHI insertion, of which we are prepared to do, clean these up now.</span></div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;  <a class="code" href="classllvm_1_1SSAUpdater.html">SSAUpdater</a> SSAUpdate;</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Use*, 16&gt;</a> UsesToRename;</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>(); ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;    <span class="comment">// Scan all uses of this instruction to see if it is used outside of its</span></div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;    <span class="comment">// block, and if so, record them in UsesToRename.</span></div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::use_iterator</a> UI = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;use_begin(), E = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;use_end(); UI != E;</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;         ++UI) {</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1User.html">User</a> = cast&lt;Instruction&gt;(*UI);</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *UserPN = dyn_cast&lt;PHINode&gt;(User)) {</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;        <span class="keywordflow">if</span> (UserPN-&gt;getIncomingBlock(UI) == <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (User-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>() == <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;      UsesToRename.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(&amp;UI.getUse());</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;    }</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    <span class="comment">// If there are no uses outside the block, we&#39;re done with this instruction.</span></div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;    <span class="keywordflow">if</span> (UsesToRename.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>())</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;JT: Renaming non-local uses of: &quot;</span> &lt;&lt; *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;    <span class="comment">// We found a use of I outside of BB.  Rename all uses of I that are outside</span></div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;    <span class="comment">// its block to be uses of the appropriate PHI node etc.  See ValuesInBlocks</span></div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    <span class="comment">// with the two values we know.</span></div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    SSAUpdate.Initialize(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getType(), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getName());</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;    SSAUpdate.AddAvailableValue(BB, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;    SSAUpdate.AddAvailableValue(PredBB, ValueMapping[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]);</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;    <span class="keywordflow">while</span> (!UsesToRename.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>())</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;      SSAUpdate.RewriteUse(*UsesToRename.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">pop_back_val</a>());</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;  }</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;  <span class="comment">// PredBB no longer jumps to BB, remove entries in the PHI node for the edge</span></div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;  <span class="comment">// that we nuked.</span></div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;  BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a6f6763e343549d530a1424f1b24053bb">removePredecessor</a>(PredBB, <span class="keyword">true</span>);</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;  <span class="comment">// Remove the unconditional branch at the end of the PredBB block.</span></div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;  OldPredBranch-&gt;eraseFromParent();</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;  ++NumDupes;</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;}</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;<span class="comment">/// TryToUnfoldSelect - Look for blocks of the form</span></div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;<span class="comment">/// bb1:</span></div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;<span class="comment">///   %a = select</span></div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;<span class="comment">///   br bb</span></div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;<span class="comment">/// bb2:</span></div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;<span class="comment">///   %p = phi [%a, %bb] ...</span></div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;<span class="comment">///   %c = icmp %p</span></div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;<span class="comment">///   br i1 %c</span></div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;<span class="comment">/// And expand the select into a branch structure if one of its arms allows %c</span></div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;<span class="comment">/// to be folded. This later enables threading from bb1 over bb2.</span></div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> JumpThreading::TryToUnfoldSelect(<a class="code" href="classllvm_1_1CmpInst.html">CmpInst</a> *CondCmp, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB) {</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *CondBr = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a>&gt;(BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>());</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *CondLHS = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1PHINode.html">PHINode</a>&gt;(CondCmp-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0));</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *CondRHS = cast&lt;Constant&gt;(CondCmp-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;  <span class="keywordflow">if</span> (!CondBr || !CondBr-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a03cc0dff22b31447f43af97acb76b1a2">isConditional</a>() || !CondLHS ||</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;      CondLHS-&gt;getParent() != <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, E = CondLHS-&gt;getNumIncomingValues(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred = CondLHS-&gt;getIncomingBlock(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    <a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *SI = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a>&gt;(CondLHS-&gt;getIncomingValue(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    <span class="comment">// Look if one of the incoming values is a select in the corresponding</span></div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    <span class="comment">// predecessor.</span></div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;    <span class="keywordflow">if</span> (!SI || SI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>() != Pred || !SI-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>())</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;    <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *PredTerm = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a>&gt;(Pred-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>());</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;    <span class="keywordflow">if</span> (!PredTerm || !PredTerm-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a382131e712e55e8324fbd5068de17b78">isUnconditional</a>())</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;    <span class="comment">// Now check if one of the select values would allow us to constant fold the</span></div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;    <span class="comment">// terminator in BB. We don&#39;t do the transform if both sides fold, those</span></div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;    <span class="comment">// cases will be threaded in any case.</span></div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    <a class="code" href="classllvm_1_1LazyValueInfo.html#a381305cf61c847551a489431c43cec47">LazyValueInfo::Tristate</a> LHSFolds =</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;        LVI-&gt;getPredicateOnEdge(CondCmp-&gt;<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), SI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1),</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;                                CondRHS, Pred, <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;    <a class="code" href="classllvm_1_1LazyValueInfo.html#a381305cf61c847551a489431c43cec47">LazyValueInfo::Tristate</a> RHSFolds =</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;        LVI-&gt;getPredicateOnEdge(CondCmp-&gt;<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(), SI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(2),</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;                                CondRHS, Pred, <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;    <span class="keywordflow">if</span> ((LHSFolds != <a class="code" href="classllvm_1_1LazyValueInfo.html#a381305cf61c847551a489431c43cec47aa3c975a91c3fef72486f9935e4099c8c">LazyValueInfo::Unknown</a> ||</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;         RHSFolds != <a class="code" href="classllvm_1_1LazyValueInfo.html#a381305cf61c847551a489431c43cec47aa3c975a91c3fef72486f9935e4099c8c">LazyValueInfo::Unknown</a>) &amp;&amp;</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;        LHSFolds != RHSFolds) {</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;      <span class="comment">// Expand the select.</span></div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;      <span class="comment">//</span></div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;      <span class="comment">// Pred --</span></div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;      <span class="comment">//  |    v</span></div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;      <span class="comment">//  |  NewBB</span></div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;      <span class="comment">//  |    |</span></div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;      <span class="comment">//  |-----</span></div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;      <span class="comment">//  v</span></div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;      <span class="comment">// BB</span></div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewBB = <a class="code" href="classllvm_1_1BasicBlock.html#ae1d53a21892854816885c7288f8b46f1">BasicBlock::Create</a>(BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ad652423d9d91271ba153eb86482b2f55">getContext</a>(), <span class="stringliteral">&quot;select.unfold&quot;</span>,</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;                                             BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>(), <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;      <span class="comment">// Move the unconditional branch to NewBB.</span></div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;      PredTerm-&gt;<a class="code" href="classllvm_1_1Instruction.html#a0fd53f63d349dc8a7c5fc0cdd7a94c8d">removeFromParent</a>();</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;      NewBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a531d11ba36ed48d86057d507cc8d5567">getInstList</a>().<a class="code" href="classllvm_1_1iplist.html#a35c71de7e8bbe3c0353d042beb58263f">insert</a>(NewBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>(), PredTerm);</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;      <span class="comment">// Create a conditional branch and update PHI nodes.</span></div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;      <a class="code" href="classllvm_1_1BranchInst.html#ae9cbc599309fd2da33ec1c61df01ce1f">BranchInst::Create</a>(NewBB, BB, SI-&gt;<a class="code" href="classllvm_1_1SelectInst.html#ad285a69e32ddeee367fed93b5f392801">getCondition</a>(), Pred);</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;      CondLHS-&gt;setIncomingValue(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, SI-&gt;<a class="code" href="classllvm_1_1SelectInst.html#a29a16f32075ee4f23cd769701463952c">getFalseValue</a>());</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;      CondLHS-&gt;addIncoming(SI-&gt;<a class="code" href="classllvm_1_1SelectInst.html#a67bf091383cd61e1225445e78b61d9f9">getTrueValue</a>(), NewBB);</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;      <span class="comment">// The select is now dead.</span></div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;      SI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;      <span class="comment">// Update any other PHI nodes in BB.</span></div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> BI = BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;           <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *Phi = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1PHINode.html">PHINode</a>&gt;(BI); ++BI)</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;        <span class="keywordflow">if</span> (Phi != CondLHS)</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;          Phi-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(Phi-&gt;<a class="code" href="classllvm_1_1PHINode.html#a21960167f529265a1cb02ac1e8ad10f6">getIncomingValueForBlock</a>(Pred), NewBB);</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;    }</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;  }</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;}</div><div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a075e34e98605d0e7c289763a104869ac"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">llvm::SmallVectorTemplateCommon&lt; T &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00114">SmallVector.h:114</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00127">SmallVector.h:127</a></div></div>
<div class="ttc" id="SmallSet_8h_html"><div class="ttname"><a href="SmallSet_8h.html">SmallSet.h</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00236">SmallVector.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html"><div class="ttname"><a href="classllvm_1_1DataLayout.html">llvm::DataLayout</a></div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00098">DataLayout.h:98</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_aa7cce62ac5cc6df09cce0535874336b7"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">llvm::ConstantInt::getFalse</a></div><div class="ttdeci">static ConstantInt * getFalse(LLVMContext &amp;Context)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00445">Constants.cpp:445</a></div></div>
<div class="ttc" id="Loads_8h_html"><div class="ttname"><a href="Loads_8h.html">Loads.h</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html"><div class="ttname"><a href="classllvm_1_1CmpInst.html">llvm::CmpInst</a></div><div class="ttdoc">Abstract base class of comparison instructions. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00633">InstrTypes.h:633</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_a884f90190bca4bd354f2d5c91c264028"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">llvm::AnalysisUsage::addPreserved</a></div><div class="ttdeci">AnalysisUsage &amp; addPreserved()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00081">PassAnalysisSupport.h:81</a></div></div>
<div class="ttc" id="namespacellvm_html_a0a7e7f31f3da37dc95109dd1164a30b6"><div class="ttname"><a href="namespacellvm.html#a0a7e7f31f3da37dc95109dd1164a30b6">llvm::SplitEdge</a></div><div class="ttdeci">BasicBlock * SplitEdge(BasicBlock *From, BasicBlock *To, Pass *P)</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00241">BasicBlockUtils.cpp:241</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a6f6763e343549d530a1424f1b24053bb"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a6f6763e343549d530a1424f1b24053bb">llvm::BasicBlock::removePredecessor</a></div><div class="ttdeci">void removePredecessor(BasicBlock *Pred, bool DontDeleteUselessPHIs=false)</div><div class="ttdoc">Notify the BasicBlock that the predecessor Pred is no longer able to reach it. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00216">BasicBlock.cpp:216</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_aa75984a442f2379de0c66018201fa628"><div class="ttname"><a href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">llvm::Type::getInt1Ty</a></div><div class="ttdeci">static IntegerType * getInt1Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00238">Type.cpp:238</a></div></div>
<div class="ttc" id="classllvm_1_1SSAUpdater_html"><div class="ttname"><a href="classllvm_1_1SSAUpdater.html">llvm::SSAUpdater</a></div><div class="ttdoc">Helper class for SSA formation on a set of values defined in multiple blocks. </div><div class="ttdef"><b>Definition:</b> <a href="SSAUpdater_8h_source.html#l00037">SSAUpdater.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a089cccb6f231efee72abc76d0f9c695f"><div class="ttname"><a href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">llvm::PHINode::addIncoming</a></div><div class="ttdeci">void addIncoming(Value *V, BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02100">Instructions.h:2100</a></div></div>
<div class="ttc" id="classllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00035">PassRegistry.cpp:35</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a6fe2f06b8a4b2c3d6308afb223a0238a"><div class="ttname"><a href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00072">Instruction.cpp:72</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="classllvm_1_1SSAUpdater_html_a4fe3279aae4f726813a672d4a9b26cb1"><div class="ttname"><a href="classllvm_1_1SSAUpdater.html#a4fe3279aae4f726813a672d4a9b26cb1">llvm::SSAUpdater::Initialize</a></div><div class="ttdeci">void Initialize(Type *Ty, StringRef Name)</div><div class="ttdoc">Reset this object to get ready for a new set of SSA updates with type &amp;#39;Ty&amp;#39;. </div><div class="ttdef"><b>Definition:</b> <a href="SSAUpdater_8cpp_source.html#l00045">SSAUpdater.cpp:45</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_ae4ca2261b8b901e415fda7feac5051ea"><div class="ttname"><a href="classllvm_1_1Function.html#ae4ca2261b8b901e415fda7feac5051ea">llvm::Function::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00397">Function.h:397</a></div></div>
<div class="ttc" id="namespacellvm_html_a66ef8932e0b4fc2ac894d66490785c0e"><div class="ttname"><a href="namespacellvm.html#a66ef8932e0b4fc2ac894d66490785c0e">llvm::initializeJumpThreadingPass</a></div><div class="ttdeci">void initializeJumpThreadingPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="IntrinsicInst_8h_html"><div class="ttname"><a href="IntrinsicInst_8h.html">IntrinsicInst.h</a></div></div>
<div class="ttc" id="namespacellvm_html_a3f2f98c2a67c9e79f58aad9150a62e42"><div class="ttname"><a href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">llvm::dyn_cast</a></div><div class="ttdeci">enable_if_c&lt;!is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="Casting_8h_source.html#l00266">Casting.h:266</a></div></div>
<div class="ttc" id="classllvm_1_1DenseSet_html"><div class="ttname"><a href="classllvm_1_1DenseSet.html">llvm::DenseSet</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00026">DenseSet.h:26</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a2f81e0c1fc6554df7ad2eafabf5fc5a5"><div class="ttname"><a href="classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">llvm::User::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00108">User.h:108</a></div></div>
<div class="ttc" id="namespacellvm_html_a9d7d0a4008434561f28c20126b992b89"><div class="ttname"><a href="namespacellvm.html#a9d7d0a4008434561f28c20126b992b89">llvm::DeleteDeadBlock</a></div><div class="ttdeci">void DeleteDeadBlock(BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00036">BasicBlockUtils.cpp:36</a></div></div>
<div class="ttc" id="classllvm_1_1SSAUpdater_html_af0d1a82b4e629e834c2ed53e5cbe22ef"><div class="ttname"><a href="classllvm_1_1SSAUpdater.html#af0d1a82b4e629e834c2ed53e5cbe22ef">llvm::SSAUpdater::AddAvailableValue</a></div><div class="ttdeci">void AddAvailableValue(BasicBlock *BB, Value *V)</div><div class="ttdoc">Indicate that a rewritten value is available in the specified block with the specified value...</div><div class="ttdef"><b>Definition:</b> <a href="SSAUpdater_8cpp_source.html#l00058">SSAUpdater.cpp:58</a></div></div>
<div class="ttc" id="DataLayout_8h_html"><div class="ttname"><a href="DataLayout_8h.html">DataLayout.h</a></div></div>
<div class="ttc" id="classintptr__t_html"><div class="ttname"><a href="classintptr__t.html">intptr_t</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00534">DenseMap.h:534</a></div></div>
<div class="ttc" id="README-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00427">README-SSE.txt:427</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01978">Instructions.h:1978</a></div></div>
<div class="ttc" id="Debug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html"><div class="ttname"><a href="classllvm_1_1CallInst.html">llvm::CallInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01161">Instructions.h:1161</a></div></div>
<div class="ttc" id="namespacellvm_html_a02b5336d71826082af53837f2ffe6128"><div class="ttname"><a href="namespacellvm.html#a02b5336d71826082af53837f2ffe6128">llvm::MergeBasicBlockIntoOnlyPred</a></div><div class="ttdeci">void MergeBasicBlockIntoOnlyPred(BasicBlock *BB, Pass *P=0)</div><div class="ttdef"><b>Definition:</b> <a href="Local_8cpp_source.html#l00477">Local.cpp:477</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html_a9b6dd0fc7a648a939e571246045b673e"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html#a9b6dd0fc7a648a939e571246045b673e">llvm::SmallPtrSet::insert</a></div><div class="ttdeci">bool insert(PtrType Ptr)</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00253">SmallPtrSet.h:253</a></div></div>
<div class="ttc" id="SSAUpdater_8h_html"><div class="ttname"><a href="SSAUpdater_8h.html">SSAUpdater.h</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_aca229503e4f5c83a187a6a921c625fa8"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">llvm::BasicBlock::getParent</a></div><div class="ttdeci">const Function * getParent() const </div><div class="ttdoc">Return the enclosing method, or null if none. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00116">BasicBlock.h:116</a></div></div>
<div class="ttc" id="classllvm_1_1PredIterator_html"><div class="ttname"><a href="classllvm_1_1PredIterator.html">llvm::PredIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="Support_2CFG_8h_source.html#l00029">Support/CFG.h:29</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a33603355becfb1a050b62aa015c1cc57"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a33603355becfb1a050b62aa015c1cc57">llvm::BasicBlock::front</a></div><div class="ttdeci">const Instruction &amp; front() const </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00205">BasicBlock.h:205</a></div></div>
<div class="ttc" id="classllvm_1_1MDNode_html"><div class="ttname"><a href="classllvm_1_1MDNode.html">llvm::MDNode</a></div><div class="ttdoc">MDNode - a tuple of other values. </div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00073">Metadata.h:73</a></div></div>
<div class="ttc" id="JumpThreading_8cpp_html_a5ea01a7f7556b186f9c162b56624abbd"><div class="ttname"><a href="JumpThreading_8cpp.html#a5ea01a7f7556b186f9c162b56624abbd">Threshold</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; Threshold(&quot;jump-threading-threshold&quot;, cl::desc(&quot;Max block size to duplicate for jump threading&quot;), cl::init(6), cl::Hidden)</div></div>
<div class="ttc" id="LLParser_8cpp_html_a33ece1ef8074506a15d7f86eb76dbae6"><div class="ttname"><a href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a></div><div class="ttdeci">F(f)</div></div>
<div class="ttc" id="classllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00070">Function.h:70</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html"><div class="ttname"><a href="classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00136">Instructions.h:136</a></div></div>
<div class="ttc" id="InstructionSimplify_8h_html"><div class="ttname"><a href="InstructionSimplify_8h.html">InstructionSimplify.h</a></div></div>
<div class="ttc" id="classllvm_1_1User_html"><div class="ttname"><a href="classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00033">User.h:33</a></div></div>
<div class="ttc" id="Statistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_a156c478ee8e7d1602143cdbad4bd5385"><div class="ttname"><a href="classllvm_1_1LoadInst.html#a156c478ee8e7d1602143cdbad4bd5385">llvm::LoadInst::isSimple</a></div><div class="ttdeci">bool isSimple() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00218">Instructions.h:218</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a7bd545769621a0a9d2cfb074f86f4295"><div class="ttname"><a href="classllvm_1_1Instruction.html#a7bd545769621a0a9d2cfb074f86f4295">llvm::Instruction::setDebugLoc</a></div><div class="ttdeci">void setDebugLoc(const DebugLoc &amp;Loc)</div><div class="ttdoc">setDebugLoc - Set the debug location information for this instruction. </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00175">Instruction.h:175</a></div></div>
<div class="ttc" id="JumpThreading_8cpp_html_a8bdbf4cc12d95ebba47bb08892eb7442"><div class="ttname"><a href="JumpThreading_8cpp.html#a8bdbf4cc12d95ebba47bb08892eb7442">INITIALIZE_PASS_BEGIN</a></div><div class="ttdeci">INITIALIZE_PASS_BEGIN(JumpThreading,&quot;jump-threading&quot;,&quot;Jump Threading&quot;, false, false) INITIALIZE_PASS_END(JumpThreading</div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00109">CommandLine.h:109</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00167">Value.cpp:167</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00193">BasicBlock.h:193</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a225cbda41f4c27fbb522833e31cb18f9"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a225cbda41f4c27fbb522833e31cb18f9">llvm::BasicBlock::getFirstNonPHIOrDbg</a></div><div class="ttdeci">Instruction * getFirstNonPHIOrDbg()</div><div class="ttdoc">Returns a pointer to the first instruction in this block that is not a PHINode or a debug intrinsic...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00140">BasicBlock.cpp:140</a></div></div>
<div class="ttc" id="classllvm_1_1BlockAddress_html"><div class="ttname"><a href="classllvm_1_1BlockAddress.html">llvm::BlockAddress</a></div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00748">Constants.h:748</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_ae5c60fd282ee894c87ea02c3f0fcb6d0"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">llvm::AnalysisUsage::addRequired</a></div><div class="ttdeci">AnalysisUsage &amp; addRequired()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00055">PassAnalysisSupport.h:55</a></div></div>
<div class="ttc" id="PassSupport_8h_html_a14724f1ccf528e73bb29bc9230737967"><div class="ttname"><a href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a></div><div class="ttdeci">#define INITIALIZE_PASS_DEPENDENCY(depName)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00167">PassSupport.h:167</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a382131e712e55e8324fbd5068de17b78"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a382131e712e55e8324fbd5068de17b78">llvm::BranchInst::isUnconditional</a></div><div class="ttdeci">bool isUnconditional() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02391">Instructions.h:2391</a></div></div>
<div class="ttc" id="classllvm_1_1iplist_html_a63c6a928d5abebdf6d8254532cda3bd3"><div class="ttname"><a href="classllvm_1_1iplist.html#a63c6a928d5abebdf6d8254532cda3bd3">llvm::iplist::push_back</a></div><div class="ttdeci">void push_back(NodeTy *val)</div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00554">ilist.h:554</a></div></div>
<div class="ttc" id="classllvm_1_1value__use__iterator_html"><div class="ttname"><a href="classllvm_1_1value__use__iterator.html">llvm::value_use_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00168">Use.h:168</a></div></div>
<div class="ttc" id="JumpThreading_8cpp_html_a231f66b89b69fee6340bbff953bff43a"><div class="ttname"><a href="JumpThreading_8cpp.html#a231f66b89b69fee6340bbff953bff43a">AddPHINodeEntriesForMappedBlock</a></div><div class="ttdeci">static void AddPHINodeEntriesForMappedBlock(BasicBlock *PHIBB, BasicBlock *OldPred, BasicBlock *NewPred, DenseMap&lt; Instruction *, Value * &gt; &amp;ValueMap)</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l01317">JumpThreading.cpp:1317</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html"><div class="ttname"><a href="classllvm_1_1SelectInst.html">llvm::SelectInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01430">Instructions.h:1430</a></div></div>
<div class="ttc" id="classllvm_1_1DenseSet_html_a72c5c6170a25fd911db5f4461221befd"><div class="ttname"><a href="classllvm_1_1DenseSet.html#a72c5c6170a25fd911db5f4461221befd">llvm::DenseSet::erase</a></div><div class="ttdeci">bool erase(const ValueT &amp;V)</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00049">DenseSet.h:49</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_afd44535c4ae204571d5721fa4a7042f2"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#afd44535c4ae204571d5721fa4a7042f2">llvm::ConstantExpr::get</a></div><div class="ttdeci">static Constant * get(unsigned Opcode, Constant *C1, Constant *C2, unsigned Flags=0)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01690">Constants.cpp:1690</a></div></div>
<div class="ttc" id="classllvm_1_1UndefValue_html"><div class="ttname"><a href="classllvm_1_1UndefValue.html">llvm::UndefValue</a></div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l01129">Constants.h:1129</a></div></div>
<div class="ttc" id="namespacellvm_1_1MCID_html_a8035044d40d3758eb45b65dce69dc90baf121d798d2c14b32e81d537a1f0cff8d"><div class="ttname"><a href="namespacellvm_1_1MCID.html#a8035044d40d3758eb45b65dce69dc90baf121d798d2c14b32e81d537a1f0cff8d">llvm::MCID::Terminator</a></div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00107">MCInstrDesc.h:107</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a400eaca9881c8dcab97e9f42b1ab1815"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">llvm::SmallVectorImpl::pop_back_val</a></div><div class="ttdeci">T LLVM_ATTRIBUTE_UNUSED_RESULT pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00430">SmallVector.h:430</a></div></div>
<div class="ttc" id="PassSupport_8h_html_a74ce8276b89067e806f67c45a6d92575"><div class="ttname"><a href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a></div><div class="ttdeci">#define INITIALIZE_PASS_END(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00172">PassSupport.h:172</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00035">APInt.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0e73f4e09745bb69fdd7b15232c45428"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0e73f4e09745bb69fdd7b15232c45428">llvm::BasicBlock::getFirstNonPHI</a></div><div class="ttdeci">Instruction * getFirstNonPHI()</div><div class="ttdoc">Returns a pointer to the first instruction in this block that is not a PHINode instruction. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00130">BasicBlock.cpp:130</a></div></div>
<div class="ttc" id="JumpThreading_8cpp_html_a9f88858ad3279dd92cc930a15f5a777f"><div class="ttname"><a href="JumpThreading_8cpp.html#a9f88858ad3279dd92cc930a15f5a777f">threading</a></div><div class="ttdeci">jump threading</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l00142">JumpThreading.cpp:142</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_ae9cbc599309fd2da33ec1c61df01ce1f"><div class="ttname"><a href="classllvm_1_1BranchInst.html#ae9cbc599309fd2da33ec1c61df01ce1f">llvm::BranchInst::Create</a></div><div class="ttdeci">static BranchInst * Create(BasicBlock *IfTrue, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02373">Instructions.h:2373</a></div></div>
<div class="ttc" id="STLExtras_8h_html"><div class="ttname"><a href="STLExtras_8h.html">STLExtras.h</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a12fd03c41b1697fca070c12317794400"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a12fd03c41b1697fca070c12317794400">llvm::BasicBlock::hasAddressTaken</a></div><div class="ttdeci">bool hasAddressTaken() const </div><div class="ttdoc">Returns true if there are any uses of this basic block other than direct branches, switches, etc. to it. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00268">BasicBlock.h:268</a></div></div>
<div class="ttc" id="namespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00126">StackSlotColoring.cpp:126</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a35ee267850af7c235474a8c46c7ac5af"><div class="ttname"><a href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">llvm::Value::setName</a></div><div class="ttdeci">void setName(const Twine &amp;Name)</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00175">Value.cpp:175</a></div></div>
<div class="ttc" id="classllvm_1_1LazyValueInfo_html_a381305cf61c847551a489431c43cec47aa3c975a91c3fef72486f9935e4099c8c"><div class="ttname"><a href="classllvm_1_1LazyValueInfo.html#a381305cf61c847551a489431c43cec47aa3c975a91c3fef72486f9935e4099c8c">llvm::LazyValueInfo::Unknown</a></div><div class="ttdef"><b>Definition:</b> <a href="LazyValueInfo_8h_source.html#l00043">LazyValueInfo.h:43</a></div></div>
<div class="ttc" id="namespacellvm_1_1CallingConv_html_a4f861731fc6dbfdccc05af5968d98974"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">llvm::CallingConv::ID</a></div><div class="ttdeci">ID</div><div class="ttdoc">LLVM Calling Convention Representation. </div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00026">CallingConv.h:26</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00031">Instruction.h:31</a></div></div>
<div class="ttc" id="TargetLibraryInfo_8h_html"><div class="ttname"><a href="TargetLibraryInfo_8h.html">TargetLibraryInfo.h</a></div></div>
<div class="ttc" id="namespacellvm_html_a55e3df77bb47f39e077b6a4e7e00bb03"><div class="ttname"><a href="namespacellvm.html#a55e3df77bb47f39e077b6a4e7e00bb03">llvm::SplitBlockPredecessors</a></div><div class="ttdeci">BasicBlock * SplitBlockPredecessors(BasicBlock *BB, ArrayRef&lt; BasicBlock * &gt; Preds, const char *Suffix, Pass *P=0)</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00442">BasicBlockUtils.cpp:442</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html_a2ced6343b8ad006a757059554bbf9f37"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html#a2ced6343b8ad006a757059554bbf9f37">llvm::SmallPtrSet::count</a></div><div class="ttdeci">bool count(PtrType Ptr) const </div><div class="ttdoc">count - Return true if the specified pointer is in the set. </div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00264">SmallPtrSet.h:264</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorBase_html_a8a8df4d85555c7954a95f86080cd3b64"><div class="ttname"><a href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">llvm::SmallVectorBase::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const </div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00056">SmallVector.h:56</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a74e70ecbb79defbbfa6f6c87f76155bf"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">llvm::BranchInst::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02406">Instructions.h:2406</a></div></div>
<div class="ttc" id="SmallPtrSet_8h_html"><div class="ttname"><a href="SmallPtrSet_8h.html">SmallPtrSet.h</a></div></div>
<div class="ttc" id="namespacellvm_html_afaf85770fdd46c58822741178d7fd03d"><div class="ttname"><a href="namespacellvm.html#afaf85770fdd46c58822741178d7fd03d">llvm::ConstantFoldInstruction</a></div><div class="ttdeci">Constant * ConstantFoldInstruction(Instruction *I, const DataLayout *TD=0, const TargetLibraryInfo *TLI=0)</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFolding_8cpp_source.html#l00839">ConstantFolding.cpp:839</a></div></div>
<div class="ttc" id="classllvm_1_1TerminatorInst_html_a79fb3df941bcb2ba32ba6438409d0c0b"><div class="ttname"><a href="classllvm_1_1TerminatorInst.html#a79fb3df941bcb2ba32ba6438409d0c0b">llvm::TerminatorInst::setSuccessor</a></div><div class="ttdeci">void setSuccessor(unsigned idx, BasicBlock *B)</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00071">InstrTypes.h:71</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00303">Value.cpp:303</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ae855357b6c5e6e7ed1869272708a3a84"><div class="ttname"><a href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">llvm::Value::takeName</a></div><div class="ttdeci">void takeName(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00239">Value.cpp:239</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a88a5e60837674780a9d812d661897ac5"><div class="ttname"><a href="classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">llvm::Function::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00395">Function.h:395</a></div></div>
<div class="ttc" id="JumpThreading_8cpp_html_aa1ca02e99b272b5fa744ebef102fa0b0"><div class="ttname"><a href="JumpThreading_8cpp.html#aa1ca02e99b272b5fa744ebef102fa0b0">getKnownConstant</a></div><div class="ttdeci">static Constant * getKnownConstant(Value *Val, ConstantPreference Preference)</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l00305">JumpThreading.cpp:305</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_aa45f6c0433576e3858a6209a43750ad4"><div class="ttname"><a href="classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">llvm::PHINode::getNumIncomingValues</a></div><div class="ttdeci">unsigned getNumIncomingValues() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02055">Instructions.h:2055</a></div></div>
<div class="ttc" id="namespacellvm_html_ad5b5ed1a0de8792e2ebf2eba3ba712fd"><div class="ttname"><a href="namespacellvm.html#ad5b5ed1a0de8792e2ebf2eba3ba712fd">llvm::SimplifyInstructionsInBlock</a></div><div class="ttdeci">bool SimplifyInstructionsInBlock(BasicBlock *BB, const DataLayout *TD=0, const TargetLibraryInfo *TLI=0)</div><div class="ttdef"><b>Definition:</b> <a href="Local_8cpp_source.html#l00398">Local.cpp:398</a></div></div>
<div class="ttc" id="classllvm_1_1TerminatorInst_html_a4c26d3b92af99a6c8defd89a2d39ca32"><div class="ttname"><a href="classllvm_1_1TerminatorInst.html#a4c26d3b92af99a6c8defd89a2d39ca32">llvm::TerminatorInst::getNumSuccessors</a></div><div class="ttdeci">unsigned getNumSuccessors() const </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00059">InstrTypes.h:59</a></div></div>
<div class="ttc" id="CommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00314">CommandLine.h:314</a></div></div>
<div class="ttc" id="namespacellvm_html_add1eb5637dd671428b6f138ed3db6428"><div class="ttname"><a href="namespacellvm.html#add1eb5637dd671428b6f138ed3db6428">llvm::array_pod_sort</a></div><div class="ttdeci">void array_pod_sort(IteratorTy Start, IteratorTy End)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00289">STLExtras.h:289</a></div></div>
<div class="ttc" id="namespacellvm_1_1AArch64ISD_html_a246d89cb58f606179b1435937830bbdca84e96c468affe3b1fd3076b4fc5d063e"><div class="ttname"><a href="namespacellvm_1_1AArch64ISD.html#a246d89cb58f606179b1435937830bbdca84e96c468affe3b1fd3076b4fc5d063e">llvm::AArch64ISD::Ret</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64ISelLowering_8h_source.html#l00060">AArch64ISelLowering.h:60</a></div></div>
<div class="ttc" id="classllvm_1_1TerminatorInst_html"><div class="ttname"><a href="classllvm_1_1TerminatorInst.html">llvm::TerminatorInst</a></div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00035">InstrTypes.h:35</a></div></div>
<div class="ttc" id="namespacellvm_html_a15b009edcc08999dc9405ccaf1c3628b"><div class="ttname"><a href="namespacellvm.html#a15b009edcc08999dc9405ccaf1c3628b">llvm::createJumpThreadingPass</a></div><div class="ttdeci">FunctionPass * createJumpThreadingPass()</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l00146">JumpThreading.cpp:146</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00396">SmallVector.h:396</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1TerminatorInst_html_a3aac3b6c36415a2b08f65ead9e3e51e7"><div class="ttname"><a href="classllvm_1_1TerminatorInst.html#a3aac3b6c36415a2b08f65ead9e3e51e7">llvm::TerminatorInst::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned idx) const </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00065">InstrTypes.h:65</a></div></div>
<div class="ttc" id="namespacellvm_html_a599000eece6fb1addb05b6b2c36be28c"><div class="ttname"><a href="namespacellvm.html#a599000eece6fb1addb05b6b2c36be28c">llvm::TryToSimplifyUncondBranchFromEmptyBlock</a></div><div class="ttdeci">bool TryToSimplifyUncondBranchFromEmptyBlock(BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="Local_8cpp_source.html#l00725">Local.cpp:725</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html"><div class="ttname"><a href="classllvm_1_1BranchInst.html">llvm::BranchInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02350">Instructions.h:2350</a></div></div>
<div class="ttc" id="classllvm_1_1BlockAddress_html_af6e2f535824d8f9b4bf1b1a75e5ab57c"><div class="ttname"><a href="classllvm_1_1BlockAddress.html#af6e2f535824d8f9b4bf1b1a75e5ab57c">llvm::BlockAddress::get</a></div><div class="ttdeci">static BlockAddress * get(Function *F, BasicBlock *BB)</div><div class="ttdoc">get - Return a BlockAddress for the specified function and basic block. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01358">Constants.cpp:1358</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html_ad285a69e32ddeee367fed93b5f392801"><div class="ttname"><a href="classllvm_1_1SelectInst.html#ad285a69e32ddeee367fed93b5f392801">llvm::SelectInst::getCondition</a></div><div class="ttdeci">const Value * getCondition() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01466">Instructions.h:1466</a></div></div>
<div class="ttc" id="classllvm_1_1SmallSet_html"><div class="ttname"><a href="classllvm_1_1SmallSet.html">llvm::SmallSet</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00031">SmallSet.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1IndirectBrInst_html"><div class="ttname"><a href="classllvm_1_1IndirectBrInst.html">llvm::IndirectBrInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02743">Instructions.h:2743</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_a22f056804d2b9882f74adc905872bc39"><div class="ttname"><a href="namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">llvm::APIntOps::Or</a></div><div class="ttdeci">APInt Or(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise OR function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01845">APInt.h:1845</a></div></div>
<div class="ttc" id="structllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00286">CommandLine.h:286</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_afc7c4d88d09cba0c5e920f8a3a3ace55"><div class="ttname"><a href="namespacellvm_1_1APIntOps.html#afc7c4d88d09cba0c5e920f8a3a3ace55">llvm::APIntOps::Xor</a></div><div class="ttdeci">APInt Xor(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise XOR function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01850">APInt.h:1850</a></div></div>
<div class="ttc" id="namespacellvm_html_a7e108932dc3da5294aed99a353aac9c4"><div class="ttname"><a href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">llvm::pred_begin</a></div><div class="ttdeci">Interval::pred_iterator pred_begin(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00117">Interval.h:117</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_aab8e16a35183ce39aad394714087bcff"><div class="ttname"><a href="classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">llvm::Instruction::getDebugLoc</a></div><div class="ttdeci">const DebugLoc &amp; getDebugLoc() const </div><div class="ttdoc">getDebugLoc - Return the debug location for this node as a DebugLoc. </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00178">Instruction.h:178</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00037">PassAnalysisSupport.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_afb5e83bf5123ff7c51058eb0ebebcdc6"><div class="ttname"><a href="classllvm_1_1PHINode.html#afb5e83bf5123ff7c51058eb0ebebcdc6">llvm::PHINode::Create</a></div><div class="ttdeci">static PHINode * Create(Type *Ty, unsigned NumReservedValues, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02013">Instructions.h:2013</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a4c25b6c00c4867281779c81ab64d2081"><div class="ttname"><a href="classllvm_1_1PHINode.html#a4c25b6c00c4867281779c81ab64d2081">llvm::PHINode::getIncomingBlock</a></div><div class="ttdeci">BasicBlock * getIncomingBlock(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02074">Instructions.h:2074</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a531d11ba36ed48d86057d507cc8d5567"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a531d11ba36ed48d86057d507cc8d5567">llvm::BasicBlock::getInstList</a></div><div class="ttdeci">const InstListType &amp; getInstList() const </div><div class="ttdoc">Return the underlying instruction list container. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00214">BasicBlock.h:214</a></div></div>
<div class="ttc" id="DenseSet_8h_html"><div class="ttname"><a href="DenseSet_8h.html">DenseSet.h</a></div></div>
<div class="ttc" id="classllvm_1_1iplist_html_a35c71de7e8bbe3c0353d042beb58263f"><div class="ttname"><a href="classllvm_1_1iplist.html#a35c71de7e8bbe3c0353d042beb58263f">llvm::iplist::insert</a></div><div class="ttdeci">iterator insert(iterator where, NodeTy *New)</div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00412">ilist.h:412</a></div></div>
<div class="ttc" id="JumpThreading_8cpp_html_a50266e8679d84319fee61811c5f40b6e"><div class="ttname"><a href="JumpThreading_8cpp.html#a50266e8679d84319fee61811c5f40b6e">Threading</a></div><div class="ttdeci">jump Jump Threading</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l00142">JumpThreading.cpp:142</a></div></div>
<div class="ttc" id="classllvm_1_1FunctionPass_html"><div class="ttname"><a href="classllvm_1_1FunctionPass.html">llvm::FunctionPass</a></div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00293">Pass.h:293</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a321e37d79af8b4287f8a1dcf9aff9c01"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00057">DenseMap.h:57</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00088">User.h:88</a></div></div>
<div class="ttc" id="namespacellvm_html_a5eeaf08e96168c2cac8960f87f0ef360"><div class="ttname"><a href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">llvm::pred_end</a></div><div class="ttdeci">Interval::pred_iterator pred_end(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00120">Interval.h:120</a></div></div>
<div class="ttc" id="classllvm_1_1LLVMContext_html_a0869c4dfee48696ce863fcd367eba52da66682b7e33233c8e51196bbf274726a2"><div class="ttname"><a href="classllvm_1_1LLVMContext.html#a0869c4dfee48696ce863fcd367eba52da66682b7e33233c8e51196bbf274726a2">llvm::LLVMContext::MD_tbaa</a></div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00047">LLVMContext.h:47</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a8afd4995fae596b2c86eeed85b3d388b"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">llvm::CmpInst::getPredicate</a></div><div class="ttdeci">Predicate getPredicate() const </div><div class="ttdoc">Return the predicate for this instruction. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00714">InstrTypes.h:714</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_a5b43a866f0fca605556f0f69f70c522a"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a5b43a866f0fca605556f0f69f70c522a">llvm::ConstantExpr::getNot</a></div><div class="ttdeci">static Constant * getNot(Constant *C)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02034">Constants.cpp:2034</a></div></div>
<div class="ttc" id="DenseMap_8h_html"><div class="ttname"><a href="DenseMap_8h.html">DenseMap.h</a></div></div>
<div class="ttc" id="classllvm_1_1UndefValue_html_a4ae5ff22b700a42bcc5d889233721335"><div class="ttname"><a href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">llvm::UndefValue::get</a></div><div class="ttdeci">static UndefValue * get(Type *T)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01334">Constants.cpp:1334</a></div></div>
<div class="ttc" id="namespacellvm_html_a50f8f41fccbea466816345520e9bfabb"><div class="ttname"><a href="namespacellvm.html#a50f8f41fccbea466816345520e9bfabb">llvm::SimplifyInstruction</a></div><div class="ttdeci">Value * SimplifyInstruction(Instruction *I, const DataLayout *TD=0, const TargetLibraryInfo *TLI=0, const DominatorTree *DT=0)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l03036">InstructionSimplify.cpp:3036</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_af85a4828b6b5a8de7fc0a55cc0e5b52f"><div class="ttname"><a href="classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">All values hold a context through their type. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00517">Value.cpp:517</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html_a67bf091383cd61e1225445e78b61d9f9"><div class="ttname"><a href="classllvm_1_1SelectInst.html#a67bf091383cd61e1225445e78b61d9f9">llvm::SelectInst::getTrueValue</a></div><div class="ttdeci">const Value * getTrueValue() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01467">Instructions.h:1467</a></div></div>
<div class="ttc" id="classllvm_1_1Attribute_html_aab7ee4b8fd1d3e7e4cea87868855e60eabdd013d932f9aa7ccaa9886bc1a54b63"><div class="ttname"><a href="classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60eabdd013d932f9aa7ccaa9886bc1a54b63">llvm::Attribute::NoDuplicate</a></div><div class="ttdoc">Call cannot be duplicated. </div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00083">Attributes.h:83</a></div></div>
<div class="ttc" id="JumpThreading_8cpp_html_a6495d0a79e098cdc8a57d51c3f86396e"><div class="ttname"><a href="JumpThreading_8cpp.html#a6495d0a79e098cdc8a57d51c3f86396e">GetBestDestForJumpOnUndef</a></div><div class="ttdeci">static unsigned GetBestDestForJumpOnUndef(BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l00610">JumpThreading.cpp:610</a></div></div>
<div class="ttc" id="classllvm_1_1LazyValueInfo_html_a381305cf61c847551a489431c43cec47"><div class="ttname"><a href="classllvm_1_1LazyValueInfo.html#a381305cf61c847551a489431c43cec47">llvm::LazyValueInfo::Tristate</a></div><div class="ttdeci">Tristate</div><div class="ttdoc">Tristate - This is used to return true/false/dunno results. </div><div class="ttdef"><b>Definition:</b> <a href="LazyValueInfo_8h_source.html#l00042">LazyValueInfo.h:42</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a237e6bf58bc993ea494bdde7480ca428"><div class="ttname"><a href="classllvm_1_1Instruction.html#a237e6bf58bc993ea494bdde7480ca428">llvm::Instruction::isTerminator</a></div><div class="ttdeci">bool isTerminator() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00086">Instruction.h:86</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a03cc0dff22b31447f43af97acb76b1a2"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a03cc0dff22b31447f43af97acb76b1a2">llvm::BranchInst::isConditional</a></div><div class="ttdeci">bool isConditional() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02392">Instructions.h:2392</a></div></div>
<div class="ttc" id="Lint_8cpp_html_a6cd8c36c54045fd5897b54d4c30e0044"><div class="ttname"><a href="Lint_8cpp.html#a6cd8c36c54045fd5897b54d4c30e0044">isZero</a></div><div class="ttdeci">static bool isZero(Value *V, DataLayout *DL)</div><div class="ttdef"><b>Definition:</b> <a href="Lint_8cpp_source.html#l00507">Lint.cpp:507</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a507bb47fc498540c91fec0bf95c25907"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a507bb47fc498540c91fec0bf95c25907">llvm::BasicBlock::moveAfter</a></div><div class="ttdeci">void moveAfter(BasicBlock *MovePos)</div><div class="ttdoc">Unlink this basic block from its current function and insert it right after MovePos in the function M...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00113">BasicBlock.cpp:113</a></div></div>
<div class="ttc" id="classllvm_1_1ValueMap_html"><div class="ttname"><a href="classllvm_1_1ValueMap.html">llvm::ValueMap</a></div><div class="ttdoc">See the file comment. </div><div class="ttdef"><b>Definition:</b> <a href="ValueMap_8h_source.html#l00075">ValueMap.h:75</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a1b45f45820a60c09244a87eb59824aec"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a></div><div class="ttdeci">add sub stmia L5 ldr r0 bl L_printf $stub Instead of a and a wouldn t it be better to do three moves *Return an aggregate type is even return S</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00197">Target/ARM/README.txt:197</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00236">SmallPtrSet.h:236</a></div></div>
<div class="ttc" id="namespacellvm_html_aec1d6e397956b9f5fa62416d0beba785"><div class="ttname"><a href="namespacellvm.html#aec1d6e397956b9f5fa62416d0beba785">llvm::FindFunctionBackedges</a></div><div class="ttdeci">void FindFunctionBackedges(const Function &amp;F, SmallVectorImpl&lt; std::pair&lt; const BasicBlock *, const BasicBlock * &gt; &gt; &amp;Result)</div><div class="ttdef"><b>Definition:</b> <a href="CFG_8cpp_source.html#l00028">CFG.cpp:28</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="namespacellvm_html_a17aa92f2452d8c00efec55c96aa23a66"><div class="ttname"><a href="namespacellvm.html#a17aa92f2452d8c00efec55c96aa23a66">llvm::FindAvailableLoadedValue</a></div><div class="ttdeci">Value * FindAvailableLoadedValue(Value *Ptr, BasicBlock *ScanBB, BasicBlock::iterator &amp;ScanFrom, unsigned MaxInstsToScan=6, AliasAnalysis *AA=0, MDNode **TBAATag=0)</div><div class="ttdef"><b>Definition:</b> <a href="Loads_8cpp_source.html#l00139">Loads.cpp:139</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_aba6a4cc4ed6d6fef3664b8d65ef04820"><div class="ttname"><a href="classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">llvm::PHINode::getIncomingValue</a></div><div class="ttdeci">Value * getIncomingValue(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02059">Instructions.h:2059</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a7a5732db5f7198200d61bd40da6e488c"><div class="ttname"><a href="classllvm_1_1Value.html#a7a5732db5f7198200d61bd40da6e488c">llvm::Value::DoPHITranslation</a></div><div class="ttdeci">Value * DoPHITranslation(const BasicBlock *CurBB, const BasicBlock *PredBB)</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00509">Value.cpp:509</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0b4e7bee9b8575cc7db73329f1a561bd"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">llvm::BasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00195">BasicBlock.h:195</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00880">SmallVector.h:880</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00111">Value.h:111</a></div></div>
<div class="ttc" id="classllvm_1_1TargetLibraryInfo_html"><div class="ttname"><a href="classllvm_1_1TargetLibraryInfo.html">llvm::TargetLibraryInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00657">TargetLibraryInfo.h:657</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_aafa29112cbe02e4adc9b36752c771991"><div class="ttname"><a href="classllvm_1_1Instruction.html#aafa29112cbe02e4adc9b36752c771991">llvm::Instruction::getMetadata</a></div><div class="ttdeci">MDNode * getMetadata(unsigned KindID) const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00140">Instruction.h:140</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html">llvm::BinaryOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00138">InstrTypes.h:138</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSetImpl_html_a41c201584742f7eb45b2be8cd54e3bcb"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a41c201584742f7eb45b2be8cd54e3bcb">llvm::SmallPtrSetImpl::size</a></div><div class="ttdeci">unsigned size() const </div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00075">SmallPtrSet.h:75</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a38ea12c04523d63adda732b9c5d6da0a"><div class="ttname"><a href="classllvm_1_1Value.html#a38ea12c04523d63adda732b9c5d6da0a">llvm::Value::stripPointerCasts</a></div><div class="ttdeci">Value * stripPointerCasts()</div><div class="ttdoc">Strips off any unneeded pointer casts, all-zero GEPs and aliases from the specified value...</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00385">Value.cpp:385</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a9105541412dab869e18b3cceebfff07d"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool isSigned=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00492">Constants.cpp:492</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_ad4ea4748170f687710a54c919dde5625"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#ad4ea4748170f687710a54c919dde5625">llvm::ConstantInt::isZero</a></div><div class="ttdeci">bool isZero() const </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00160">Constants.h:160</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a30f2c362631e3728d2f47a8203071ade"><div class="ttname"><a href="classllvm_1_1Function.html#a30f2c362631e3728d2f47a8203071ade">llvm::Function::getEntryBlock</a></div><div class="ttdeci">const BasicBlock &amp; getEntryBlock() const </div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00380">Function.h:380</a></div></div>
<div class="ttc" id="namespacellvm_html_a842dbe70b763270b02de0473c3cc890d"><div class="ttname"><a href="namespacellvm.html#a842dbe70b763270b02de0473c3cc890d">llvm::SimplifyCmpInst</a></div><div class="ttdeci">Value * SimplifyCmpInst(unsigned Predicate, Value *LHS, Value *RHS, const DataLayout *TD=0, const TargetLibraryInfo *TLI=0, const DominatorTree *DT=0)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l02944">InstructionSimplify.cpp:2944</a></div></div>
<div class="ttc" id="namespacellvm_html_a78ab69092404fc83d77ccb06b3f7138d"><div class="ttname"><a href="namespacellvm.html#a78ab69092404fc83d77ccb06b3f7138d">llvm::ConstantFoldTerminator</a></div><div class="ttdeci">bool ConstantFoldTerminator(BasicBlock *BB, bool DeleteDeadConditions=false, const TargetLibraryInfo *TLI=0)</div><div class="ttdef"><b>Definition:</b> <a href="Local_8cpp_source.html#l00059">Local.cpp:59</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a82dbbd8e3688b0bc1eedb338864d0d0c"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">llvm::ConstantInt::getTrue</a></div><div class="ttdeci">static ConstantInt * getTrue(LLVMContext &amp;Context)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00438">Constants.cpp:438</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a5fa9b8e1842b354f64c1ba6be0a4a17f"><div class="ttname"><a href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">llvm::User::setOperand</a></div><div class="ttdeci">void setOperand(unsigned i, Value *Val)</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00092">User.h:92</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00101">Debug.cpp:101</a></div></div>
<div class="ttc" id="JumpThreading_8cpp_html_a03e550d05d9675fa027dcdf75d5184fe"><div class="ttname"><a href="JumpThreading_8cpp.html#a03e550d05d9675fa027dcdf75d5184fe">getJumpThreadDuplicationCost</a></div><div class="ttdeci">static unsigned getJumpThreadDuplicationCost(const BasicBlock *BB, unsigned Threshold)</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l00222">JumpThreading.cpp:222</a></div></div>
<div class="ttc" id="CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2README_8txt_source.html#l00036">CodeGen/README.txt:36</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a21960167f529265a1cb02ac1e8ad10f6"><div class="ttname"><a href="classllvm_1_1PHINode.html#a21960167f529265a1cb02ac1e8ad10f6">llvm::PHINode::getIncomingValueForBlock</a></div><div class="ttdeci">Value * getIncomingValueForBlock(const BasicBlock *BB) const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02139">Instructions.h:2139</a></div></div>
<div class="ttc" id="Pass_8h_html"><div class="ttname"><a href="Pass_8h.html">Pass.h</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a5ef55181ae0bb0f5c561b9a29087b1e5"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a5ef55181ae0bb0f5c561b9a29087b1e5">llvm::BasicBlock::getSinglePredecessor</a></div><div class="ttdeci">BasicBlock * getSinglePredecessor()</div><div class="ttdoc">Return this block if it has a single predecessor block. Otherwise return a null pointer. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00183">BasicBlock.cpp:183</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a432d7e955f44b118b4261eae03d7a8af"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">llvm::DenseMapBase::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00053">DenseMap.h:53</a></div></div>
<div class="ttc" id="JumpThreading_8cpp_html_accb226989f9f6a384c57a42b51f2c366"><div class="ttname"><a href="JumpThreading_8cpp.html#accb226989f9f6a384c57a42b51f2c366">ConstantPreference</a></div><div class="ttdeci">ConstantPreference</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l00057">JumpThreading.cpp:57</a></div></div>
<div class="ttc" id="ConstantFolding_8h_html"><div class="ttname"><a href="ConstantFolding_8h.html">ConstantFolding.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_a684cfe02c582e8d75cd6d457e63e6c25"><div class="ttname"><a href="namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">llvm::APIntOps::And</a></div><div class="ttdeci">APInt And(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise AND function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01840">APInt.h:1840</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a0fd53f63d349dc8a7c5fc0cdd7a94c8d"><div class="ttname"><a href="classllvm_1_1Instruction.html#a0fd53f63d349dc8a7c5fc0cdd7a94c8d">llvm::Instruction::removeFromParent</a></div><div class="ttdeci">void removeFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00068">Instruction.cpp:68</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a8a045d250952c0867382a9840ee18fdf"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">llvm::SmallVectorTemplateCommon&lt; T &gt;::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00112">SmallVector.h:112</a></div></div>
<div class="ttc" id="ValueHandle_8h_html"><div class="ttname"><a href="ValueHandle_8h.html">ValueHandle.h</a></div></div>
<div class="ttc" id="Transforms_2Scalar_8h_html"><div class="ttname"><a href="Transforms_2Scalar_8h.html">Scalar.h</a></div></div>
<div class="ttc" id="Analysis_2CFG_8h_html"><div class="ttname"><a href="Analysis_2CFG_8h.html">CFG.h</a></div></div>
<div class="ttc" id="classllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l01149">CommandLine.h:1149</a></div></div>
<div class="ttc" id="namespacellvm_1_1Sched_html_ac1547cccaf660851fcd6863d1e60309e"><div class="ttname"><a href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309e">llvm::Sched::Preference</a></div><div class="ttdeci">Preference</div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00061">TargetLowering.h:61</a></div></div>
<div class="ttc" id="classllvm_1_1LazyValueInfo_html_a381305cf61c847551a489431c43cec47a9af49c30d67dc9c3b6f06e09a849009b"><div class="ttname"><a href="classllvm_1_1LazyValueInfo.html#a381305cf61c847551a489431c43cec47a9af49c30d67dc9c3b6f06e09a849009b">llvm::LazyValueInfo::True</a></div><div class="ttdef"><b>Definition:</b> <a href="LazyValueInfo_8h_source.html#l00043">LazyValueInfo.h:43</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_ad1168fc42bcba1b71217a4969483671a"><div class="ttname"><a href="classllvm_1_1LoadInst.html#ad1168fc42bcba1b71217a4969483671a">llvm::LoadInst::getAlignment</a></div><div class="ttdeci">unsigned getAlignment() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00181">Instructions.h:181</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a5cb76a65b6524dba1493dd2b9dc3abbe"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">TerminatorInst * getTerminator()</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00120">BasicBlock.cpp:120</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a3075a9eef753018bed561df31f38dc23"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a3075a9eef753018bed561df31f38dc23">llvm::BasicBlock::isLandingPad</a></div><div class="ttdeci">bool isLandingPad() const </div><div class="ttdoc">Return true if this basic block is a landing pad. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00360">BasicBlock.cpp:360</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a085b82f074c28030fb8e194377ed2d0c"><div class="ttname"><a href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">llvm::Value::hasOneUse</a></div><div class="ttdeci">bool hasOneUse() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00161">Value.h:161</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a102d0ad36060677286c3aefb812e5512"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a102d0ad36060677286c3aefb812e5512">llvm::SmallVectorImpl::resize</a></div><div class="ttdeci">void resize(unsigned N)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00401">SmallVector.h:401</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_ae1d53a21892854816885c7288f8b46f1"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ae1d53a21892854816885c7288f8b46f1">llvm::BasicBlock::Create</a></div><div class="ttdeci">static BasicBlock * Create(LLVMContext &amp;Context, const Twine &amp;Name=&quot;&quot;, Function *Parent=0, BasicBlock *InsertBefore=0)</div><div class="ttdoc">Creates a new BasicBlock. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00109">BasicBlock.h:109</a></div></div>
<div class="ttc" id="BasicBlockUtils_8h_html"><div class="ttname"><a href="BasicBlockUtils_8h.html">BasicBlockUtils.h</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a5a7cfa245af120b44ac8a86143bb9e57"><div class="ttname"><a href="classllvm_1_1Type.html#a5a7cfa245af120b44ac8a86143bb9e57">llvm::Type::getPrimitiveSizeInBits</a></div><div class="ttdeci">unsigned getPrimitiveSizeInBits() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00117">Type.cpp:117</a></div></div>
<div class="ttc" id="LLVMContext_8h_html"><div class="ttname"><a href="LLVMContext_8h.html">LLVMContext.h</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html"><div class="ttname"><a href="classllvm_1_1SwitchInst.html">llvm::SwitchInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02449">Instructions.h:2449</a></div></div>
<div class="ttc" id="classllvm_1_1LazyValueInfo_html"><div class="ttname"><a href="classllvm_1_1LazyValueInfo.html">llvm::LazyValueInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="LazyValueInfo_8h_source.html#l00028">LazyValueInfo.h:28</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ac38c53f76ef532f91f1666c8a87370e9"><div class="ttname"><a href="classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">llvm::Value::use_empty</a></div><div class="ttdeci">bool use_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00149">Value.h:149</a></div></div>
<div class="ttc" id="JumpThreading_8cpp_html_a928f0bcb0579bd746528e96f8f509394"><div class="ttname"><a href="JumpThreading_8cpp.html#a928f0bcb0579bd746528e96f8f509394">FindMostPopularDest</a></div><div class="ttdeci">static BasicBlock * FindMostPopularDest(BasicBlock *BB, const SmallVectorImpl&lt; std::pair&lt; BasicBlock *, BasicBlock * &gt; &gt; &amp;PredToDestList)</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l01015">JumpThreading.cpp:1015</a></div></div>
<div class="ttc" id="Local_8h_html"><div class="ttname"><a href="Local_8h.html">Local.h</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_ad652423d9d91271ba153eb86482b2f55"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ad652423d9d91271ba153eb86482b2f55">llvm::BasicBlock::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">Get the context in which this basic block lives. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00033">BasicBlock.cpp:33</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_a50d0911852017f2168de329f53d8568d"><div class="ttname"><a href="classllvm_1_1Constant.html#a50d0911852017f2168de329f53d8568d">llvm::Constant::removeDeadConstantUsers</a></div><div class="ttdeci">void removeDeadConstantUsers() const </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00395">Constants.cpp:395</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00066">Value.h:66</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a021bb7c9aad6003fe8089f6327356c6c"><div class="ttname"><a href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">llvm::Instruction::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const </div><div class="ttdoc">getOpcode() returns a member of one of the enums like Instruction::Add. </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00083">Instruction.h:83</a></div></div>
<div class="ttc" id="LazyValueInfo_8h_html"><div class="ttname"><a href="LazyValueInfo_8h.html">LazyValueInfo.h</a></div></div>
<div class="ttc" id="BasicAliasAnalysis_8cpp_html_a2675de1d8479c7b00387979714da43f7"><div class="ttname"><a href="BasicAliasAnalysis_8cpp.html#a2675de1d8479c7b00387979714da43f7">getParent</a></div><div class="ttdeci">static const Function * getParent(const Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="BasicAliasAnalysis_8cpp_source.html#l00447">BasicAliasAnalysis.cpp:447</a></div></div>
<div class="ttc" id="Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00097">Debug.h:97</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html_a29a16f32075ee4f23cd769701463952c"><div class="ttname"><a href="classllvm_1_1SelectInst.html#a29a16f32075ee4f23cd769701463952c">llvm::SelectInst::getFalseValue</a></div><div class="ttdeci">const Value * getFalseValue() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01468">Instructions.h:1468</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_ac5728c914b7e92030243a21e49ab1552"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#ac5728c914b7e92030243a21e49ab1552">llvm::ConstantExpr::getCompare</a></div><div class="ttdeci">static Constant * getCompare(unsigned short pred, Constant *C1, Constant *C2)</div><div class="ttdoc">Return an ICmp or FCmp comparison operator constant expression. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01809">Constants.cpp:1809</a></div></div>
<div class="ttc" id="raw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="classllvm_1_1SSAUpdater_html_a05c4f6837ee786e83246beeb01e3aa8d"><div class="ttname"><a href="classllvm_1_1SSAUpdater.html#a05c4f6837ee786e83246beeb01e3aa8d">llvm::SSAUpdater::RewriteUse</a></div><div class="ttdeci">void RewriteUse(Use &amp;U)</div><div class="ttdoc">Rewrite a use of the symbolic value. </div><div class="ttdef"><b>Definition:</b> <a href="SSAUpdater_8cpp_source.html#l00177">SSAUpdater.cpp:177</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a21cf94357e53cd1069aba475266fdb63"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::find</a></div><div class="ttdeci">iterator find(const KeyT &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00108">DenseMap.h:108</a></div></div>
<div class="ttc" id="JumpThreading_8cpp_html_ae6fa18c5b7272e2bdd00c26da8041358"><div class="ttname"><a href="JumpThreading_8cpp.html#ae6fa18c5b7272e2bdd00c26da8041358">hasAddressTakenAndUsed</a></div><div class="ttdeci">static bool hasAddressTakenAndUsed(BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l00628">JumpThreading.cpp:628</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a41da369a9d31d911c8af724d5630f724"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a41da369a9d31d911c8af724d5630f724">llvm::BasicBlock::moveBefore</a></div><div class="ttdeci">void moveBefore(BasicBlock *MovePos)</div><div class="ttdoc">Unlink this basic block from its current function and insert it into the function that MovePos lives ...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00106">BasicBlock.cpp:106</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00052">Instruction.h:52</a></div></div>
<div class="ttc" id="JumpThreading_8cpp_html_a99733660b8ecac76d77664c1cb5cb0eb"><div class="ttname"><a href="JumpThreading_8cpp.html#a99733660b8ecac76d77664c1cb5cb0eb">STATISTIC</a></div><div class="ttdeci">STATISTIC(NumThreads,&quot;Number of jumps threaded&quot;)</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 22:59:09 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
