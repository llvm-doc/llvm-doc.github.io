<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: X86ISelDAGToDAG.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('X86ISelDAGToDAG_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">X86ISelDAGToDAG.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="X86ISelDAGToDAG_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- X86ISelDAGToDAG.cpp - A DAG pattern matching inst selector for X86 -===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// This file defines a DAG pattern matching instruction selector for X86,</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// converting from a legalized dag to a X86 dag.</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div><div class="line"><a name="l00015"></a><span class="lineno"><a class="line" href="X86ISelDAGToDAG_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   15</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;x86-isel&quot;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="X86_8h.html">X86.h</a>&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="X86InstrBuilder_8h.html">X86InstrBuilder.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="X86MachineFunctionInfo_8h.html">X86MachineFunctionInfo.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="X86RegisterInfo_8h.html">X86RegisterInfo.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="X86Subtarget_8h.html">X86Subtarget.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="X86TargetMachine_8h.html">X86TargetMachine.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineFrameInfo_8h.html">llvm/CodeGen/MachineFrameInfo.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineFunction_8h.html">llvm/CodeGen/MachineFunction.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineInstrBuilder_8h.html">llvm/CodeGen/MachineInstrBuilder.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineRegisterInfo_8h.html">llvm/CodeGen/MachineRegisterInfo.h</a>&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SelectionDAGISel_8h.html">llvm/CodeGen/SelectionDAGISel.h</a>&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instructions_8h.html">llvm/IR/Instructions.h</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Intrinsics_8h.html">llvm/IR/Intrinsics.h</a>&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Type_8h.html">llvm/IR/Type.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ErrorHandling_8h.html">llvm/Support/ErrorHandling.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MathExtras_8h.html">llvm/Support/MathExtras.h</a>&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Target_2TargetMachine_8h.html">llvm/Target/TargetMachine.h</a>&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetOptions_8h.html">llvm/Target/TargetOptions.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<a class="code" href="X86ISelDAGToDAG_8cpp.html#a2703c20c686bb300521ff3775ea49862">STATISTIC</a>(NumLoadMoved, <span class="stringliteral">&quot;Number of loads moved below TokenFactor&quot;</span>);</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">//                      Pattern Matcher Implementation</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="keyword">namespace </span>{<span class="comment"></span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">  /// X86ISelAddressMode - This corresponds to X86AddressMode, but uses</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">  /// SDValue&#39;s instead of register numbers for the leaves of the matched</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">  /// tree.</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment"></span>  <span class="keyword">struct </span>X86ISelAddressMode {</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="keyword">enum</span> {</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;      RegBase,</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;      FrameIndexBase</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    } BaseType;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="comment">// This is really a union, discriminated by BaseType!</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Base_Reg;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keywordtype">int</span> Base_FrameIndex;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="keywordtype">unsigned</span> Scale;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> IndexReg;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    int32_t Disp;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Segment;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a> *GV;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Constant.html">Constant</a> *CP;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1BlockAddress.html">BlockAddress</a> *BlockAddr;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *ES;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordtype">int</span> JT;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="ARMSubtarget_8cpp.html#a4bd80d4e433d9f72af26b364036900dc">Align</a>;    <span class="comment">// CP alignment.</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1COFF.html#a859c4e0a0dd786386ec921c828ede830">SymbolFlags</a>;  <span class="comment">// X86II::MO_*</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    X86ISelAddressMode()</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;      : BaseType(RegBase), Base_FrameIndex(0), Scale(1), IndexReg(), Disp(0),</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        Segment(), GV(0), CP(0), BlockAddr(0), ES(0), JT(-1), Align(0),</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        SymbolFlags(X86II::<a class="code" href="namespacellvm_1_1AArch64II.html#ae22a65863fdb02ce99abf9ee08bcbb71a48b42f4ac550b5ae203477aad0eb5e75">MO_NO_FLAG</a>) {</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    }</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordtype">bool</span> hasSymbolicDisplacement()<span class="keyword"> const </span>{</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;      <span class="keywordflow">return</span> GV != 0 || CP != 0 || ES != 0 || JT != -1 || BlockAddr != 0;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    }</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordtype">bool</span> hasBaseOrIndexReg()<span class="keyword"> const </span>{</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;      <span class="keywordflow">return</span> BaseType == FrameIndexBase ||</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;             IndexReg.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>() != 0 || Base_Reg.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>() != 0;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    }</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">    /// isRIPRelative - Return true if this addressing mode is already RIP</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">    /// relative.</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> isRIPRelative()<span class="keyword"> const </span>{</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      <span class="keywordflow">if</span> (BaseType != RegBase) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1RegisterSDNode.html">RegisterSDNode</a> *RegNode =</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;            dyn_cast_or_null&lt;RegisterSDNode&gt;(Base_Reg.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()))</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        <span class="keywordflow">return</span> RegNode-&gt;getReg() == X86::RIP;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    }</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordtype">void</span> setBaseReg(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>) {</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      BaseType = RegBase;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      Base_Reg = <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    }</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="preprocessor">#if !defined(NDEBUG) || defined(LLVM_ENABLE_DUMP)</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#a03503773241005f01b090b9862aad304">dump</a>() {</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;X86ISelAddressMode &quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Base_Reg &quot;</span>;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      <span class="keywordflow">if</span> (Base_Reg.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>() != 0)</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        Base_Reg.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#a535ca517df1b4ae62e75475141e65787">dump</a>();</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;nul&quot;</span>;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; Base.FrameIndex &quot;</span> &lt;&lt; Base_FrameIndex &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;             &lt;&lt; <span class="stringliteral">&quot; Scale&quot;</span> &lt;&lt; Scale &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;IndexReg &quot;</span>;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      <span class="keywordflow">if</span> (IndexReg.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>() != 0)</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        IndexReg.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#a535ca517df1b4ae62e75475141e65787">dump</a>();</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;nul&quot;</span>;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; Disp &quot;</span> &lt;&lt; Disp &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;GV &quot;</span>;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;      <span class="keywordflow">if</span> (GV)</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        GV-&gt;<a class="code" href="classllvm_1_1Value.html#a1933ce346f4cbadcc151cea432c2b316">dump</a>();</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;nul&quot;</span>;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; CP &quot;</span>;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      <span class="keywordflow">if</span> (CP)</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        CP-&gt;<a class="code" href="classllvm_1_1Value.html#a1933ce346f4cbadcc151cea432c2b316">dump</a>();</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;nul&quot;</span>;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;ES &quot;</span>;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;      <span class="keywordflow">if</span> (ES)</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; ES;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;nul&quot;</span>;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; JT&quot;</span> &lt;&lt; JT &lt;&lt; <span class="stringliteral">&quot; Align&quot;</span> &lt;&lt; Align &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    }</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  };</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;}</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="comment">//===--------------------------------------------------------------------===//</span><span class="comment"></span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">  /// ISel - X86 specific code to select X86 machine instructions for</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">  /// SelectionDAG operations.</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment"></span>  <span class="keyword">class </span>X86DAGToDAGISel : <span class="keyword">public</span> <a class="code" href="classllvm_1_1SelectionDAGISel.html">SelectionDAGISel</a> {<span class="comment"></span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">    /// Subtarget - Keep a pointer to the X86Subtarget around so that we can</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">    /// make the right decision when generating code for different targets.</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment"></span>    <span class="keyword">const</span> <a class="code" href="classllvm_1_1X86Subtarget.html">X86Subtarget</a> *Subtarget;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">    /// OptForSize - If true, selector should try to optimize for code size</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">    /// instead of performance.</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> OptForSize;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="keyword">public</span>:</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keyword">explicit</span> X86DAGToDAGISel(<a class="code" href="classllvm_1_1X86TargetMachine.html">X86TargetMachine</a> &amp;tm, <a class="code" href="namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">CodeGenOpt::Level</a> OptLevel)</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      : <a class="code" href="classllvm_1_1SelectionDAGISel.html">SelectionDAGISel</a>(tm, OptLevel),</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        Subtarget(&amp;tm.getSubtarget&lt;<a class="code" href="classllvm_1_1X86Subtarget.html">X86Subtarget</a>&gt;()),</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        OptForSize(<a class="code" href="namespacefalse.html">false</a>) {}</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *getPassName()<span class="keyword"> const </span>{</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;X86 DAG-&gt;DAG Instruction Selection&quot;</span>;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    }</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> EmitFunctionEntryCode();</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> IsProfitableToFold(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, <a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *U, <a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *Root) <span class="keyword">const</span>;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> PreprocessISelDAG();</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keyword">inline</span> <span class="keywordtype">bool</span> immSext8(<a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>)<span class="keyword"> const </span>{</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a3e242f3485db990d043f2dcf91106ce7">isInt&lt;8&gt;</a>(cast&lt;ConstantSDNode&gt;(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>)-&gt;getSExtValue());</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    }</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="comment">// i64immSExt32 predicate - True if the 64-bit immediate fits in a 32-bit</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="comment">// sign extended field.</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keyword">inline</span> <span class="keywordtype">bool</span> i64immSExt32(<a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>)<span class="keyword"> const </span>{</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      uint64_t v = cast&lt;ConstantSDNode&gt;(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>)-&gt;getZExtValue();</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      <span class="keywordflow">return</span> (int64_t)v == (int32_t)v;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    }</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">// Include the pieces autogenerated from the target description.</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="preprocessor">#include &quot;X86GenDAGISel.inc&quot;</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="keyword">private</span>:</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *<a class="code" href="namespacellvm_1_1MCID.html#a8035044d40d3758eb45b65dce69dc90ba32dbd2c72a98eaee90e3ad5ef7b5af16">Select</a>(<a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *N);</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *SelectGather(<a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *N, <span class="keywordtype">unsigned</span> Opc);</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *SelectAtomic64(<a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *Node, <span class="keywordtype">unsigned</span> Opc);</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *SelectAtomicLoadArith(<a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *Node, <a class="code" href="classllvm_1_1MVT.html">MVT</a> NVT);</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordtype">bool</span> FoldOffsetIntoAddress(uint64_t Offset, X86ISelAddressMode &amp;AM);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordtype">bool</span> MatchLoadInAddress(<a class="code" href="classllvm_1_1LoadSDNode.html">LoadSDNode</a> *N, X86ISelAddressMode &amp;AM);</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordtype">bool</span> MatchWrapper(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> N, X86ISelAddressMode &amp;AM);</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordtype">bool</span> MatchAddress(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> N, X86ISelAddressMode &amp;AM);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordtype">bool</span> MatchAddressRecursively(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> N, X86ISelAddressMode &amp;AM,</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                                 <span class="keywordtype">unsigned</span> Depth);</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keywordtype">bool</span> MatchAddressBase(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> N, X86ISelAddressMode &amp;AM);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordtype">bool</span> SelectAddr(<a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *Parent, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> N, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Base,</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Scale, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Index, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Disp,</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Segment);</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordtype">bool</span> SelectMOV64Imm32(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> N, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Imm);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordtype">bool</span> SelectLEAAddr(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> N, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Base,</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                       <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Scale, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Index, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Disp,</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                       <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Segment);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordtype">bool</span> SelectLEA64_32Addr(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> N, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Base,</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                            <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Scale, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Index, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Disp,</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                            <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Segment);</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordtype">bool</span> SelectTLSADDRAddr(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> N, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Base,</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                           <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Scale, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Index, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Disp,</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                           <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Segment);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordtype">bool</span> SelectScalarSSELoad(<a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *Root, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> N,</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                             <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Base, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Scale,</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                             <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Index, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Disp,</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                             <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Segment,</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                             <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;NodeWithChain);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordtype">bool</span> TryFoldLoad(<a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> N,</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                     <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Base, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Scale,</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                     <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Index, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Disp,</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                     <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Segment);</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">    /// SelectInlineAsmMemoryOperand - Implement addressing mode selection for</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">    /// inline asm expressions.</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment"></span>    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> SelectInlineAsmMemoryOperand(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Op,</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                                              <span class="keywordtype">char</span> ConstraintCode,</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                                              std::vector&lt;SDValue&gt; &amp;OutOps);</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keywordtype">void</span> EmitSpecialCodeForMain(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> *MFI);</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keyword">inline</span> <span class="keywordtype">void</span> getAddressOperands(X86ISelAddressMode &amp;AM, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Base,</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                                   <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Scale, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Index,</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                                   <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Disp, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Segment) {</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      Base  = (AM.BaseType == X86ISelAddressMode::FrameIndexBase) ?</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        CurDAG-&gt;getTargetFrameIndex(AM.Base_FrameIndex,</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                                    getTargetLowering()-&gt;getPointerTy()) :</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        AM.Base_Reg;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      Scale = getI8Imm(AM.Scale);</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      Index = AM.IndexReg;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      <span class="comment">// These are 32-bit even in 64-bit mode since RIP relative offset</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      <span class="comment">// is 32-bit.</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <span class="keywordflow">if</span> (AM.GV)</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        Disp = CurDAG-&gt;getTargetGlobalAddress(AM.GV, <a class="code" href="classllvm_1_1SDLoc.html">SDLoc</a>(),</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                                              <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>, AM.Disp,</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                                              AM.SymbolFlags);</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (AM.CP)</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        Disp = CurDAG-&gt;getTargetConstantPool(AM.CP, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>,</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                                             AM.Align, AM.Disp, AM.SymbolFlags);</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (AM.ES) {</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        assert(!AM.Disp &amp;&amp; <span class="stringliteral">&quot;Non-zero displacement is ignored with ES.&quot;</span>);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        Disp = CurDAG-&gt;getTargetExternalSymbol(AM.ES, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>, AM.SymbolFlags);</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (AM.JT != -1) {</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        assert(!AM.Disp &amp;&amp; <span class="stringliteral">&quot;Non-zero displacement is ignored with JT.&quot;</span>);</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        Disp = CurDAG-&gt;getTargetJumpTable(AM.JT, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>, AM.SymbolFlags);</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (AM.BlockAddr)</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        Disp = CurDAG-&gt;getTargetBlockAddress(AM.BlockAddr, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>, AM.Disp,</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                                             AM.SymbolFlags);</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        Disp = CurDAG-&gt;getTargetConstant(AM.Disp, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      <span class="keywordflow">if</span> (AM.Segment.getNode())</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        Segment = AM.Segment;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        Segment = CurDAG-&gt;getRegister(0, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>);</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    }</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">    /// getI8Imm - Return a target constant with the specified value, of type</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">    /// i8.</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment"></span>    <span class="keyword">inline</span> <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> getI8Imm(<span class="keywordtype">unsigned</span> Imm) {</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      <span class="keywordflow">return</span> CurDAG-&gt;getTargetConstant(Imm, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50caf777e086e32f60c0c87b460964eae7d0">MVT::i8</a>);</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    }</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">    /// getI32Imm - Return a target constant with the specified value, of type</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">    /// i32.</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment"></span>    <span class="keyword">inline</span> <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> getI32Imm(<span class="keywordtype">unsigned</span> Imm) {</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      <span class="keywordflow">return</span> CurDAG-&gt;getTargetConstant(Imm, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>);</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    }</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">    /// getGlobalBaseReg - Return an SDNode that returns the value of</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">    /// the global base register. Output instructions required to</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">    /// initialize the global base register, if necessary.</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment">    ///</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment"></span>    <a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *getGlobalBaseReg();</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">    /// getTargetMachine - Return a reference to the TargetMachine, casted</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">    /// to the target-specific type.</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment"></span>    <span class="keyword">const</span> <a class="code" href="classllvm_1_1X86TargetMachine.html">X86TargetMachine</a> &amp;getTargetMachine()<span class="keyword"> const </span>{</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classllvm_1_1X86TargetMachine.html">X86TargetMachine</a> &amp;<span class="keyword">&gt;</span>(<a class="code" href="namespacellvm_1_1SystemZISD.html#a9a3c050e4bfe8d0d09d74c979f5bb121a68ace50a32835aa0562cf8f9694ba510">TM</a>);</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    }</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">    /// getInstrInfo - Return a reference to the TargetInstrInfo, casted</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment">    /// to the target-specific type.</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment"></span>    <span class="keyword">const</span> <a class="code" href="classllvm_1_1X86InstrInfo.html">X86InstrInfo</a> *getInstrInfo()<span class="keyword"> const </span>{</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      <span class="keywordflow">return</span> getTargetMachine().getInstrInfo();</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    }</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  };</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;}</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="keywordtype">bool</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;X86DAGToDAGISel::IsProfitableToFold(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> N, <a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *U, <a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *Root)<span class="keyword"> const </span>{</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="keywordflow">if</span> (OptLevel == <a class="code" href="namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4a451bbac85aff02d070be3c17a6bef928">CodeGenOpt::None</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <span class="keywordflow">if</span> (!N.<a class="code" href="classllvm_1_1SDValue.html#a97b0f24f3e52f030830fca6fbfcbd37d">hasOneUse</a>())</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <span class="keywordflow">if</span> (N.<a class="code" href="classllvm_1_1SDValue.html#a0caf6a31d8034336a9ba7791a5f583f1">getOpcode</a>() != <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a269b81f007000306e3e69d0d290c2159">ISD::LOAD</a>)</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <span class="comment">// If N is a load, do additional profitability checks.</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <span class="keywordflow">if</span> (U == Root) {</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordflow">switch</span> (U-&gt;<a class="code" href="classllvm_1_1SDNode.html#af0d328f3f61168f4ea7d6e4044af4f97">getOpcode</a>()) {</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28acf42ecbf82f3dcbf52c109ee0e3f5838">X86ISD::ADD</a>:</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a4affb47abdfdd54079d5a2f8c1d3e628">X86ISD::SUB</a>:</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a8957fd90a0c765af6746fb0849ee1a8a">X86ISD::AND</a>:</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a483bad339c6126c64687d14c10979979">X86ISD::XOR</a>:</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28af362e78ded62dc71fd125ff7f8099475">X86ISD::OR</a>:</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>:</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a20084f62caecb0db80ad71bdabda73c2">ISD::ADDC</a>:</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ad116e32876f2275acf60ffb1651c9256">ISD::ADDE</a>:</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>:</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>:</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>: {</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Op1 = U-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(1);</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      <span class="comment">// If the other operand is a 8-bit immediate we should fold the immediate</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      <span class="comment">// instead. This reduces code size.</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      <span class="comment">// e.g.</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      <span class="comment">// movl 4(%esp), %eax</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      <span class="comment">// addl $4, %eax</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      <span class="comment">// vs.</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      <span class="comment">// movl $4, %eax</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      <span class="comment">// addl 4(%esp), %eax</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      <span class="comment">// The former is 2 bytes shorter. In case where the increment is 1, then</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      <span class="comment">// the saving can be 4 bytes (by using incl %eax).</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantSDNode.html">ConstantSDNode</a> *Imm = dyn_cast&lt;ConstantSDNode&gt;(Op1))</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        <span class="keywordflow">if</span> (Imm-&gt;getAPIntValue().isSignedIntN(8))</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      <span class="comment">// If the other operand is a TLS address, we should fold it instead.</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      <span class="comment">// This produces</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      <span class="comment">// movl    %gs:0, %eax</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      <span class="comment">// leal    i@NTPOFF(%eax), %eax</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      <span class="comment">// instead of</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      <span class="comment">// movl    $i@NTPOFF, %eax</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      <span class="comment">// addl    %gs:0, %eax</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      <span class="comment">// if the block also has an access to a second TLS address this will save</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      <span class="comment">// a load.</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      <span class="comment">// FIXME: This is probably also true for non TLS addresses.</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      <span class="keywordflow">if</span> (Op1.<a class="code" href="classllvm_1_1SDValue.html#a0caf6a31d8034336a9ba7791a5f583f1">getOpcode</a>() == <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28ac52ade4e38c09090c08d423e886cb4b2">X86ISD::Wrapper</a>) {</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Val = Op1.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0);</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        <span class="keywordflow">if</span> (Val.<a class="code" href="classllvm_1_1SDValue.html#a0caf6a31d8034336a9ba7791a5f583f1">getOpcode</a>() == <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110afc9ad7857b7faf49dcde3dcf434e22a6">ISD::TargetGlobalTLSAddress</a>)</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      }</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    }</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    }</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  }</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;}</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment">/// MoveBelowCallOrigChain - Replace the original chain operand of the call with</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment">/// load&#39;s chain operand and move load below the call&#39;s chain operand.</span></div><div class="line"><a name="l00362"></a><span class="lineno"><a class="line" href="X86ISelDAGToDAG_8cpp.html#acb91a4867f4f627e9d3c60fa2471a894">  362</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="X86ISelDAGToDAG_8cpp.html#acb91a4867f4f627e9d3c60fa2471a894">MoveBelowOrigChain</a>(<a class="code" href="classllvm_1_1SelectionDAG.html">SelectionDAG</a> *CurDAG, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> <a class="code" href="namespacellvm_1_1SPII.html#a11e9b8fca4a074643a6a21f444e51406a5069619ca8fdce305534f3fe85091a0f">Load</a>,</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                               <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> <a class="code" href="namespacellvm.html#af6d6a791770bad2303c4399986979e3eae411369b2f0d8f484fec62c3291b1b51">Call</a>, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> OrigChain) {</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;SDValue, 8&gt;</a> Ops;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Chain = OrigChain.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0);</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <span class="keywordflow">if</span> (Chain.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>() == Load.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>())</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    Ops.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Load.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0));</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <span class="keywordflow">else</span> {</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    assert(Chain.<a class="code" href="classllvm_1_1SDValue.html#a0caf6a31d8034336a9ba7791a5f583f1">getOpcode</a>() == <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ad469508535ce2082a1ab1f0e429187b8">ISD::TokenFactor</a> &amp;&amp;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;           <span class="stringliteral">&quot;Unexpected chain operand&quot;</span>);</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Chain.<a class="code" href="classllvm_1_1SDValue.html#a5f0447ef8ec128563ad131b76e5062bd">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      <span class="keywordflow">if</span> (Chain.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>).<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>() == Load.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>())</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        Ops.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Load.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0));</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        Ops.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Chain.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> NewChain =</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      CurDAG-&gt;<a class="code" href="classllvm_1_1SelectionDAG.html#af5d5ed0a2c2186ec77b8dd9c38474d3e">getNode</a>(<a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ad469508535ce2082a1ab1f0e429187b8">ISD::TokenFactor</a>, <a class="code" href="classllvm_1_1SDLoc.html">SDLoc</a>(Load),</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                      <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca62a222acce6360abd2726719fabc2797">MVT::Other</a>, &amp;Ops[0], Ops.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>());</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    Ops.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    Ops.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(NewChain);</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  }</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1, e = OrigChain.<a class="code" href="classllvm_1_1SDValue.html#a5f0447ef8ec128563ad131b76e5062bd">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    Ops.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(OrigChain.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  CurDAG-&gt;<a class="code" href="classllvm_1_1SelectionDAG.html#ae8c041f67463ea67d6c43867729b82cb">UpdateNodeOperands</a>(OrigChain.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>(), &amp;Ops[0], Ops.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>());</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  CurDAG-&gt;<a class="code" href="classllvm_1_1SelectionDAG.html#ae8c041f67463ea67d6c43867729b82cb">UpdateNodeOperands</a>(Load.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>(), Call.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0),</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                             Load.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(1), Load.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(2));</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="keywordtype">unsigned</span> NumOps = Call.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#abc5c2f1d47a517373030133c6a102106">getNumOperands</a>();</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  Ops.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  Ops.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(Load.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>(), 1));</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1, e = NumOps; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    Ops.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Call.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  CurDAG-&gt;<a class="code" href="classllvm_1_1SelectionDAG.html#ae8c041f67463ea67d6c43867729b82cb">UpdateNodeOperands</a>(Call.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>(), &amp;Ops[0], NumOps);</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;}</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment">/// isCalleeLoad - Return true if call address is a load and it can be</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment">/// moved below CALLSEQ_START and the chains leading up to the call.</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment">/// Return the CALLSEQ_START by reference as a second output.</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment">/// In the case of a tail call, there isn&#39;t a callseq node between the call</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment">/// chain and the load.</span></div><div class="line"><a name="l00401"></a><span class="lineno"><a class="line" href="X86ISelDAGToDAG_8cpp.html#ac0a91fd2157f9b3a8880ce8373396108">  401</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="X86ISelDAGToDAG_8cpp.html#ac0a91fd2157f9b3a8880ce8373396108">isCalleeLoad</a>(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Callee, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Chain, <span class="keywordtype">bool</span> HasCallSeq) {</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="comment">// The transformation is somewhat dangerous if the call&#39;s chain was glued to</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="comment">// the call. After MoveBelowOrigChain the load is moved between the call and</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  <span class="comment">// the chain, this can create a cycle if the load is not folded. So it is</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <span class="comment">// *really* important that we are sure the load will be folded.</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="keywordflow">if</span> (Callee.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>() == Chain.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>() || !Callee.<a class="code" href="classllvm_1_1SDValue.html#a97b0f24f3e52f030830fca6fbfcbd37d">hasOneUse</a>())</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <a class="code" href="classllvm_1_1LoadSDNode.html">LoadSDNode</a> *<a class="code" href="namespacellvm_1_1A64DB.html#a6fce8157775f3ec93f326b52b0f1e0f5ad61b145eb8cbab18feb1b2e2ce269a7e">LD</a> = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1LoadSDNode.html">LoadSDNode</a>&gt;(Callee.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>());</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="keywordflow">if</span> (!LD ||</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;      LD-&gt;<a class="code" href="classllvm_1_1MemSDNode.html#acd3bb9ee2ec53fa4be1fdf155b0b5a17">isVolatile</a>() ||</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      LD-&gt;<a class="code" href="classllvm_1_1LSBaseSDNode.html#a76f8f644c33a885eaff35f94c39d5048">getAddressingMode</a>() != <a class="code" href="namespacellvm_1_1ISD.html#abee7ecb577fcade34eb16ccb7f503e31ade1c53e7b8a373e22ec53ff7bcbace9f">ISD::UNINDEXED</a> ||</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      LD-&gt;<a class="code" href="classllvm_1_1LoadSDNode.html#af15fb8b2d4c9f295bdcf85a1eb506702">getExtensionType</a>() != <a class="code" href="namespacellvm_1_1ISD.html#ad4d48171b87ca51ff54c10a436bac4d7a6aacde2c67988b43a261a7f7ceac4be3">ISD::NON_EXTLOAD</a>)</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="comment">// Now let&#39;s find the callseq_start.</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <span class="keywordflow">while</span> (HasCallSeq &amp;&amp; Chain.<a class="code" href="classllvm_1_1SDValue.html#a0caf6a31d8034336a9ba7791a5f583f1">getOpcode</a>() != <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110af423387cec5c9f7be16028b25a0dcfe7">ISD::CALLSEQ_START</a>) {</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">if</span> (!Chain.<a class="code" href="classllvm_1_1SDValue.html#a97b0f24f3e52f030830fca6fbfcbd37d">hasOneUse</a>())</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    Chain = Chain.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0);</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  }</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <span class="keywordflow">if</span> (!Chain.<a class="code" href="classllvm_1_1SDValue.html#a5f0447ef8ec128563ad131b76e5062bd">getNumOperands</a>())</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="comment">// Since we are not checking for AA here, conservatively abort if the chain</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  <span class="comment">// writes to memory. It&#39;s not safe to move the callee (a load) across a store.</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  <span class="keywordflow">if</span> (isa&lt;MemSDNode&gt;(Chain.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()) &amp;&amp;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      cast&lt;MemSDNode&gt;(Chain.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>())-&gt;writeMem())</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <span class="keywordflow">if</span> (Chain.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0).<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>() == Callee.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>())</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="keywordflow">if</span> (Chain.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0).<a class="code" href="classllvm_1_1SDValue.html#a0caf6a31d8034336a9ba7791a5f583f1">getOpcode</a>() == <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ad469508535ce2082a1ab1f0e429187b8">ISD::TokenFactor</a> &amp;&amp;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      Callee.<a class="code" href="classllvm_1_1SDValue.html#a040481b9bda32faa6b1435532405d88f">getValue</a>(1).<a class="code" href="classllvm_1_1SDValue.html#a15d99539afef5279a1e19877cc6140a2">isOperandOf</a>(Chain.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0).<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()) &amp;&amp;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      Callee.<a class="code" href="classllvm_1_1SDValue.html#a040481b9bda32faa6b1435532405d88f">getValue</a>(1).<a class="code" href="classllvm_1_1SDValue.html#a97b0f24f3e52f030830fca6fbfcbd37d">hasOneUse</a>())</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;}</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="keywordtype">void</span> X86DAGToDAGISel::PreprocessISelDAG() {</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <span class="comment">// OptForSize is used in pattern predicates that isel is matching.</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  OptForSize = MF-&gt;getFunction()-&gt;getAttributes().</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    hasAttribute(AttributeSet::FunctionIndex, <a class="code" href="classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60ea2ac83e0612ce8f8d69651cd529061feb">Attribute::OptimizeForSize</a>);</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">SelectionDAG::allnodes_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = CurDAG-&gt;allnodes_begin(),</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;       E = CurDAG-&gt;allnodes_end(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ) {</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *N = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++;  <span class="comment">// Preincrement iterator to avoid invalidation issues.</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keywordflow">if</span> (OptLevel != <a class="code" href="namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4a451bbac85aff02d070be3c17a6bef928">CodeGenOpt::None</a> &amp;&amp;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <span class="comment">// Only does this when target favors doesn&#39;t favor register indirect</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <span class="comment">// call.</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        ((N-&gt;<a class="code" href="classllvm_1_1SDNode.html#af0d328f3f61168f4ea7d6e4044af4f97">getOpcode</a>() == <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a8e74b6dccfb024d3f1f6dc71554e5513">X86ISD::CALL</a> &amp;&amp; !Subtarget-&gt;<a class="code" href="classllvm_1_1X86Subtarget.html#a0a990f3c55882bac1e61029cb551290c">callRegIndirect</a>()) ||</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;         (N-&gt;<a class="code" href="classllvm_1_1SDNode.html#af0d328f3f61168f4ea7d6e4044af4f97">getOpcode</a>() == <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28aaa37a4cc02090ea86d2448dc9d967d75">X86ISD::TC_RETURN</a> &amp;&amp;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;          <span class="comment">// Only does this if load can be folded into TC_RETURN.</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;          (Subtarget-&gt;<a class="code" href="classllvm_1_1X86Subtarget.html#a5314399c907d77b514ec837e8527a9de">is64Bit</a>() ||</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;           getTargetMachine().getRelocationModel() != <a class="code" href="namespacellvm_1_1Reloc.html#af59f6dc86e80aaf56f1afd155eebf568adc2075e13a68142b26e05ac08bbfc320">Reloc::PIC_</a>)))) {<span class="comment"></span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="comment">      /// Also try moving call address load from outside callseq_start to just</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment">      /// before the call to allow it to be folded.</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="comment">      ///</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="comment">      ///     [Load chain]</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="comment">      ///         ^</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="comment">      ///         |</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="comment">      ///       [Load]</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment">      ///       ^    ^</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment">      ///       |    |</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment">      ///      /      \--</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment">      ///     /          |</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment">      ///[CALLSEQ_START] |</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment">      ///     ^          |</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment">      ///     |          |</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment">      /// [LOAD/C2Reg]   |</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="comment">      ///     |          |</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment">      ///      \        /</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment">      ///       \      /</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment">      ///       [CALL]</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment"></span>      <span class="keywordtype">bool</span> HasCallSeq = N-&gt;<a class="code" href="classllvm_1_1SDNode.html#af0d328f3f61168f4ea7d6e4044af4f97">getOpcode</a>() == <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a8e74b6dccfb024d3f1f6dc71554e5513">X86ISD::CALL</a>;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Chain = N-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(0);</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> <a class="code" href="namespacellvm_1_1SPII.html#a11e9b8fca4a074643a6a21f444e51406a5069619ca8fdce305534f3fe85091a0f">Load</a>  = N-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(1);</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="X86ISelDAGToDAG_8cpp.html#ac0a91fd2157f9b3a8880ce8373396108">isCalleeLoad</a>(Load, Chain, HasCallSeq))</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      <a class="code" href="X86ISelDAGToDAG_8cpp.html#acb91a4867f4f627e9d3c60fa2471a894">MoveBelowOrigChain</a>(CurDAG, Load, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(N, 0), Chain);</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      ++NumLoadMoved;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    }</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="comment">// Lower fpround and fpextend nodes that target the FP stack to be store and</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="comment">// load to the stack.  This is a gross hack.  We would like to simply mark</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="comment">// these as being illegal, but when we do that, legalize produces these when</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="comment">// it expands calls, then expands these in the same legalize pass.  We would</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="comment">// like dag combine to be able to hack on these between the call expansion</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="comment">// and the node legalization.  As such this pass basically does &quot;really</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="comment">// late&quot; legalization of these inline with the X86 isel pass.</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="comment">// FIXME: This should only happen when not compiled with -O0.</span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keywordflow">if</span> (N-&gt;<a class="code" href="classllvm_1_1SDNode.html#af0d328f3f61168f4ea7d6e4044af4f97">getOpcode</a>() != <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110adaf9a3cb5c2ef5eb713bd6bf4ae23aeb">ISD::FP_ROUND</a> &amp;&amp; N-&gt;<a class="code" href="classllvm_1_1SDNode.html#af0d328f3f61168f4ea7d6e4044af4f97">getOpcode</a>() != <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110aadfdefcb133a7f0262a05934aba8ce5d">ISD::FP_EXTEND</a>)</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <a class="code" href="classllvm_1_1MVT.html">MVT</a> SrcVT = N-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(0).<a class="code" href="classllvm_1_1SDValue.html#a8bc8606044f2c3cdb6271c0378e0f9cf">getSimpleValueType</a>();</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <a class="code" href="classllvm_1_1MVT.html">MVT</a> DstVT = N-&gt;<a class="code" href="classllvm_1_1SDNode.html#aa81556eb1fb861c6b57d46e97dae7778">getSimpleValueType</a>(0);</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="comment">// If any of the sources are vectors, no fp stack involved.</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="keywordflow">if</span> (SrcVT.<a class="code" href="classllvm_1_1MVT.html#afa328609e9c6183e2bc34afe59b84d1d">isVector</a>() || DstVT.<a class="code" href="classllvm_1_1MVT.html#afa328609e9c6183e2bc34afe59b84d1d">isVector</a>())</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="comment">// If the source and destination are SSE registers, then this is a legal</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="comment">// conversion that should not be lowered.</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1X86TargetLowering.html">X86TargetLowering</a> *X86Lowering =</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classllvm_1_1X86TargetLowering.html">X86TargetLowering</a> *<span class="keyword">&gt;</span>(getTargetLowering());</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="keywordtype">bool</span> SrcIsSSE = X86Lowering-&gt;<a class="code" href="classllvm_1_1X86TargetLowering.html#a42f4b4fc843cc01be2ae7389652f00a6">isScalarFPTypeInSSEReg</a>(SrcVT);</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keywordtype">bool</span> DstIsSSE = X86Lowering-&gt;<a class="code" href="classllvm_1_1X86TargetLowering.html#a42f4b4fc843cc01be2ae7389652f00a6">isScalarFPTypeInSSEReg</a>(DstVT);</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keywordflow">if</span> (SrcIsSSE &amp;&amp; DstIsSSE)</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keywordflow">if</span> (!SrcIsSSE &amp;&amp; !DstIsSSE) {</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;      <span class="comment">// If this is an FPStack extension, it is a noop.</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;      <span class="keywordflow">if</span> (N-&gt;<a class="code" href="classllvm_1_1SDNode.html#af0d328f3f61168f4ea7d6e4044af4f97">getOpcode</a>() == <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110aadfdefcb133a7f0262a05934aba8ce5d">ISD::FP_EXTEND</a>)</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;      <span class="comment">// If this is a value-preserving FPStack truncation, it is a noop.</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;      <span class="keywordflow">if</span> (N-&gt;<a class="code" href="classllvm_1_1SDNode.html#aff84cd98daca4f1901020fb99845fcfc">getConstantOperandVal</a>(1))</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    }</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="comment">// Here we could have an FP stack truncation or an FPStack &lt;-&gt; SSE convert.</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="comment">// FPStack has extload and truncstore.  SSE can fold direct loads into other</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <span class="comment">// operations.  Based on this, decide what we want to do.</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <a class="code" href="classllvm_1_1MVT.html">MVT</a> MemVT;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="keywordflow">if</span> (N-&gt;<a class="code" href="classllvm_1_1SDNode.html#af0d328f3f61168f4ea7d6e4044af4f97">getOpcode</a>() == <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110adaf9a3cb5c2ef5eb713bd6bf4ae23aeb">ISD::FP_ROUND</a>)</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;      MemVT = DstVT;  <span class="comment">// FP_ROUND must use DstVT, we can&#39;t do a &#39;trunc load&#39;.</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      MemVT = SrcIsSSE ? SrcVT : DstVT;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> MemTmp = CurDAG-&gt;CreateStackTemporary(MemVT);</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <a class="code" href="classllvm_1_1SDLoc.html">SDLoc</a> dl(N);</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="comment">// FIXME: optimize the case where the src/dest is a load or store?</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> <a class="code" href="namespacellvm_1_1SPII.html#a11e9b8fca4a074643a6a21f444e51406a36b3dd3b84fde3f8494a9b18af131856">Store</a> = CurDAG-&gt;getTruncStore(CurDAG-&gt;getEntryNode(), dl,</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                                          N-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(0),</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                                          MemTmp, <a class="code" href="structllvm_1_1MachinePointerInfo.html">MachinePointerInfo</a>(), MemVT,</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                                          <span class="keyword">false</span>, <span class="keyword">false</span>, 0);</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Result = CurDAG-&gt;getExtLoad(<a class="code" href="namespacellvm_1_1ISD.html#ad4d48171b87ca51ff54c10a436bac4d7afab3fffd153f7d7770fed81272e4b78f">ISD::EXTLOAD</a>, dl, DstVT, Store, MemTmp,</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                                        <a class="code" href="structllvm_1_1MachinePointerInfo.html">MachinePointerInfo</a>(),</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                                        MemVT, <span class="keyword">false</span>, <span class="keyword">false</span>, 0);</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="comment">// We&#39;re about to replace all uses of the FP_ROUND/FP_EXTEND with the</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="comment">// extload we created.  This will cause general havok on the dag because</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="comment">// anything below the conversion could be folded into other existing nodes.</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="comment">// To avoid invalidating &#39;I&#39;, back it up to the convert node.</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    --<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    CurDAG-&gt;ReplaceAllUsesOfValueWith(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(N, 0), Result);</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="comment">// Now that we did that, the node is dead.  Increment the iterator to the</span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="comment">// next node to process, then delete N.</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    CurDAG-&gt;DeleteNode(N);</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  }</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;}</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment">/// EmitSpecialCodeForMain - Emit any code that needs to be executed only in</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment">/// the main function.</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> X86DAGToDAGISel::EmitSpecialCodeForMain(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                                             <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> *MFI) {</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a> = <a class="code" href="namespacellvm_1_1SystemZISD.html#a9a3c050e4bfe8d0d09d74c979f5bb121a68ace50a32835aa0562cf8f9694ba510">TM</a>.getInstrInfo();</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  <span class="keywordflow">if</span> (Subtarget-&gt;<a class="code" href="classllvm_1_1X86Subtarget.html#ad1c6e0b2b8cf40bb0c57dad5dbf0ea66">isTargetCygMing</a>()) {</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordtype">unsigned</span> CallOp =</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      Subtarget-&gt;<a class="code" href="classllvm_1_1X86Subtarget.html#a5314399c907d77b514ec837e8527a9de">is64Bit</a>() ? X86::CALL64pcrel32 : X86::CALLpcrel32;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <a class="code" href="namespacellvm.html#a980570dc1410d4ef53806f82028ca381">BuildMI</a>(BB, <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a>(),</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;            TII-&gt;<a class="code" href="classllvm_1_1MCInstrInfo.html#ab16f5a81fccfe4b7f645ba5a74ffad02">get</a>(CallOp)).addExternalSymbol(<span class="stringliteral">&quot;__main&quot;</span>);</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  }</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;}</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="keywordtype">void</span> X86DAGToDAGISel::EmitFunctionEntryCode() {</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <span class="comment">// If this is main, emit special code for main.</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> *Fn = MF-&gt;getFunction())</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="keywordflow">if</span> (Fn-&gt;hasExternalLinkage() &amp;&amp; Fn-&gt;getName() == <span class="stringliteral">&quot;main&quot;</span>)</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;      EmitSpecialCodeForMain(MF-&gt;begin(), MF-&gt;getFrameInfo());</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;}</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;</div><div class="line"><a name="l00576"></a><span class="lineno"><a class="line" href="X86ISelDAGToDAG_8cpp.html#accefa4c7462a1332c8e02f04942cd445">  576</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="X86ISelDAGToDAG_8cpp.html#accefa4c7462a1332c8e02f04942cd445">isDispSafeForFrameIndex</a>(int64_t Val) {</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  <span class="comment">// On 64-bit platforms, we can run into an issue where a frame index</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  <span class="comment">// includes a displacement that, when added to the explicit displacement,</span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  <span class="comment">// will overflow the displacement field. Assuming that the frame index</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  <span class="comment">// displacement fits into a 31-bit integer  (which is only slightly more</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <span class="comment">// aggressive than the current fundamental assumption that it fits into</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  <span class="comment">// a 32-bit integer), a 31-bit disp should always be safe.</span></div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  <span class="keywordflow">return</span> isInt&lt;31&gt;(Val);</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;}</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="keywordtype">bool</span> X86DAGToDAGISel::FoldOffsetIntoAddress(uint64_t Offset,</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                                            X86ISelAddressMode &amp;AM) {</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  int64_t Val = AM.Disp + Offset;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  <a class="code" href="namespacellvm_1_1CodeModel.html#afc59396a9e5809fc92938e203d91a8df">CodeModel::Model</a> <a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = <a class="code" href="namespacellvm_1_1SystemZISD.html#a9a3c050e4bfe8d0d09d74c979f5bb121a68ace50a32835aa0562cf8f9694ba510">TM</a>.getCodeModel();</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  <span class="keywordflow">if</span> (Subtarget-&gt;<a class="code" href="classllvm_1_1X86Subtarget.html#a5314399c907d77b514ec837e8527a9de">is64Bit</a>()) {</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1X86.html#ae5984c5a9dcd61726daafd12afb541d4">X86::isOffsetSuitableForCodeModel</a>(Val, M,</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                                           AM.hasSymbolicDisplacement()))</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="comment">// In addition to the checks required for a register base, check that</span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="comment">// we do not try to use an unsafe Disp with a frame index.</span></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="keywordflow">if</span> (AM.BaseType == X86ISelAddressMode::FrameIndexBase &amp;&amp;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        !<a class="code" href="X86ISelDAGToDAG_8cpp.html#accefa4c7462a1332c8e02f04942cd445">isDispSafeForFrameIndex</a>(Val))</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  }</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  AM.Disp = Val;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;}</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="keywordtype">bool</span> X86DAGToDAGISel::MatchLoadInAddress(<a class="code" href="classllvm_1_1LoadSDNode.html">LoadSDNode</a> *N, X86ISelAddressMode &amp;AM){</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Address = N-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(1);</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  <span class="comment">// load gs:0 -&gt; GS segment register.</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <span class="comment">// load fs:0 -&gt; FS segment register.</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  <span class="comment">// This optimization is valid because the GNU TLS model defines that</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <span class="comment">// gs:0 (or fs:0 on X86-64) contains its own address.</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  <span class="comment">// For more information see http://people.redhat.com/drepper/tls.pdf</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantSDNode.html">ConstantSDNode</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;ConstantSDNode&gt;(Address))</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getSExtValue() == 0 &amp;&amp; AM.Segment.getNode() == 0 &amp;&amp;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        Subtarget-&gt;<a class="code" href="classllvm_1_1X86Subtarget.html#a92b94bad0207c5841e67d0ac5bf088ee">isTargetLinux</a>())</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;      <span class="keywordflow">switch</span> (N-&gt;<a class="code" href="classllvm_1_1MemSDNode.html#a2fa8491ab36125d7f5dd38d3a4868934">getPointerInfo</a>().<a class="code" href="structllvm_1_1MachinePointerInfo.html#a23e5cd18f87dae8314d615484032d6a2">getAddrSpace</a>()) {</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      <span class="keywordflow">case</span> 256:</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        AM.Segment = CurDAG-&gt;getRegister(<a class="code" href="namespacellvm_1_1X86II.html#a97dc14052814702ba0e2b14fb14dd02dacdc4d0fa74813b50797e25bab4febe70">X86::GS</a>, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50cab3be25b50efa0289a3c86fd50454b683">MVT::i16</a>);</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <span class="keywordflow">case</span> 257:</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        AM.Segment = CurDAG-&gt;getRegister(<a class="code" href="namespacellvm_1_1X86II.html#a97dc14052814702ba0e2b14fb14dd02da50aa2061845b3ff4e6e2242d762c6a80">X86::FS</a>, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50cab3be25b50efa0289a3c86fd50454b683">MVT::i16</a>);</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;      }</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;}</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="comment">/// MatchWrapper - Try to match X86ISD::Wrapper and X86ISD::WrapperRIP nodes</span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="comment">/// into an addressing mode.  These wrap things that will resolve down into a</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="comment">/// symbol reference.  If no match is possible, this returns true, otherwise it</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="comment">/// returns false.</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> X86DAGToDAGISel::MatchWrapper(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> N, X86ISelAddressMode &amp;AM) {</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  <span class="comment">// If the addressing mode already has a symbol as the displacement, we can</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  <span class="comment">// never match another symbol.</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  <span class="keywordflow">if</span> (AM.hasSymbolicDisplacement())</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> N0 = N.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0);</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  <a class="code" href="namespacellvm_1_1CodeModel.html#afc59396a9e5809fc92938e203d91a8df">CodeModel::Model</a> <a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = <a class="code" href="namespacellvm_1_1SystemZISD.html#a9a3c050e4bfe8d0d09d74c979f5bb121a68ace50a32835aa0562cf8f9694ba510">TM</a>.getCodeModel();</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  <span class="comment">// Handle X86-64 rip-relative addresses.  We check this before checking direct</span></div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <span class="comment">// folding because RIP is preferable to non-RIP accesses.</span></div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <span class="keywordflow">if</span> (Subtarget-&gt;<a class="code" href="classllvm_1_1X86Subtarget.html#a5314399c907d77b514ec837e8527a9de">is64Bit</a>() &amp;&amp; N.<a class="code" href="classllvm_1_1SDValue.html#a0caf6a31d8034336a9ba7791a5f583f1">getOpcode</a>() == <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28af9b840077b4580ddbfd3bf992fe359eb">X86ISD::WrapperRIP</a> &amp;&amp;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;      <span class="comment">// Under X86-64 non-small code model, GV (and friends) are 64-bits, so</span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;      <span class="comment">// they cannot be folded into immediate fields.</span></div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;      <span class="comment">// FIXME: This can be improved for kernel and other models?</span></div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;      (M == <a class="code" href="namespacellvm_1_1CodeModel.html#afc59396a9e5809fc92938e203d91a8dfaa2554ef60dc191c6005ba9eecbc9aea0">CodeModel::Small</a> || M == <a class="code" href="namespacellvm_1_1CodeModel.html#afc59396a9e5809fc92938e203d91a8dfaa6a2e45ae404e3f797d2d7e9f3a48949">CodeModel::Kernel</a>)) {</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="comment">// Base and index reg must be 0 in order to use %rip as base.</span></div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <span class="keywordflow">if</span> (AM.hasBaseOrIndexReg())</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GlobalAddressSDNode.html">GlobalAddressSDNode</a> *<a class="code" href="MD5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a> = dyn_cast&lt;GlobalAddressSDNode&gt;(N0)) {</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;      X86ISelAddressMode Backup = AM;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;      AM.GV = <a class="code" href="MD5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getGlobal();</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;      AM.SymbolFlags = <a class="code" href="MD5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getTargetFlags();</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;      <span class="keywordflow">if</span> (FoldOffsetIntoAddress(<a class="code" href="MD5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getOffset(), AM)) {</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        AM = Backup;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;      }</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantPoolSDNode.html">ConstantPoolSDNode</a> *CP = dyn_cast&lt;ConstantPoolSDNode&gt;(N0)) {</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      X86ISelAddressMode Backup = AM;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      AM.CP = CP-&gt;getConstVal();</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;      AM.Align = CP-&gt;getAlignment();</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;      AM.SymbolFlags = CP-&gt;getTargetFlags();</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;      <span class="keywordflow">if</span> (FoldOffsetIntoAddress(CP-&gt;getOffset(), AM)) {</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        AM = Backup;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;      }</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ExternalSymbolSDNode.html">ExternalSymbolSDNode</a> *<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> = dyn_cast&lt;ExternalSymbolSDNode&gt;(N0)) {</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;      AM.ES = <a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;getSymbol();</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;      AM.SymbolFlags = <a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;getTargetFlags();</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1JumpTableSDNode.html">JumpTableSDNode</a> *J = dyn_cast&lt;JumpTableSDNode&gt;(N0)) {</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;      AM.JT = J-&gt;getIndex();</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;      AM.SymbolFlags = J-&gt;getTargetFlags();</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BlockAddressSDNode.html">BlockAddressSDNode</a> *BA = dyn_cast&lt;BlockAddressSDNode&gt;(N0)) {</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;      X86ISelAddressMode Backup = AM;</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;      AM.BlockAddr = BA-&gt;getBlockAddress();</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;      AM.SymbolFlags = BA-&gt;getTargetFlags();</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;      <span class="keywordflow">if</span> (FoldOffsetIntoAddress(BA-&gt;getOffset(), AM)) {</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        AM = Backup;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;      }</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    } <span class="keywordflow">else</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;      <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unhandled symbol reference node.&quot;</span>);</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="keywordflow">if</span> (N.<a class="code" href="classllvm_1_1SDValue.html#a0caf6a31d8034336a9ba7791a5f583f1">getOpcode</a>() == <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28af9b840077b4580ddbfd3bf992fe359eb">X86ISD::WrapperRIP</a>)</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;      AM.setBaseReg(CurDAG-&gt;getRegister(X86::RIP, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca97f56253625b3fe7b371ce76722de4b8">MVT::i64</a>));</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  }</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  <span class="comment">// Handle the case when globals fit in our immediate field: This is true for</span></div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <span class="comment">// X86-32 always and X86-64 when in -mcmodel=small mode.  In 64-bit</span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  <span class="comment">// mode, this only applies to a non-RIP-relative computation.</span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  <span class="keywordflow">if</span> (!Subtarget-&gt;<a class="code" href="classllvm_1_1X86Subtarget.html#a5314399c907d77b514ec837e8527a9de">is64Bit</a>() ||</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;      M == <a class="code" href="namespacellvm_1_1CodeModel.html#afc59396a9e5809fc92938e203d91a8dfaa2554ef60dc191c6005ba9eecbc9aea0">CodeModel::Small</a> || M == <a class="code" href="namespacellvm_1_1CodeModel.html#afc59396a9e5809fc92938e203d91a8dfaa6a2e45ae404e3f797d2d7e9f3a48949">CodeModel::Kernel</a>) {</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    assert(N.<a class="code" href="classllvm_1_1SDValue.html#a0caf6a31d8034336a9ba7791a5f583f1">getOpcode</a>() != <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28af9b840077b4580ddbfd3bf992fe359eb">X86ISD::WrapperRIP</a> &amp;&amp;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;           <span class="stringliteral">&quot;RIP-relative addressing already handled&quot;</span>);</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GlobalAddressSDNode.html">GlobalAddressSDNode</a> *<a class="code" href="MD5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a> = dyn_cast&lt;GlobalAddressSDNode&gt;(N0)) {</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;      AM.GV = <a class="code" href="MD5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getGlobal();</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;      AM.Disp += <a class="code" href="MD5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getOffset();</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;      AM.SymbolFlags = <a class="code" href="MD5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>-&gt;getTargetFlags();</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantPoolSDNode.html">ConstantPoolSDNode</a> *CP = dyn_cast&lt;ConstantPoolSDNode&gt;(N0)) {</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      AM.CP = CP-&gt;getConstVal();</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      AM.Align = CP-&gt;getAlignment();</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;      AM.Disp += CP-&gt;getOffset();</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;      AM.SymbolFlags = CP-&gt;getTargetFlags();</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ExternalSymbolSDNode.html">ExternalSymbolSDNode</a> *<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> = dyn_cast&lt;ExternalSymbolSDNode&gt;(N0)) {</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      AM.ES = <a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;getSymbol();</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;      AM.SymbolFlags = <a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;getTargetFlags();</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1JumpTableSDNode.html">JumpTableSDNode</a> *J = dyn_cast&lt;JumpTableSDNode&gt;(N0)) {</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      AM.JT = J-&gt;getIndex();</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      AM.SymbolFlags = J-&gt;getTargetFlags();</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BlockAddressSDNode.html">BlockAddressSDNode</a> *BA = dyn_cast&lt;BlockAddressSDNode&gt;(N0)) {</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;      AM.BlockAddr = BA-&gt;getBlockAddress();</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;      AM.Disp += BA-&gt;getOffset();</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;      AM.SymbolFlags = BA-&gt;getTargetFlags();</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    } <span class="keywordflow">else</span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;      <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unhandled symbol reference node.&quot;</span>);</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  }</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;}</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;<span class="comment">/// MatchAddress - Add the specified node to the specified addressing mode,</span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="comment">/// returning true if it cannot be done.  This just pattern matches for the</span></div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;<span class="comment">/// addressing mode.</span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> X86DAGToDAGISel::MatchAddress(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> N, X86ISelAddressMode &amp;AM) {</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  <span class="keywordflow">if</span> (MatchAddressRecursively(N, AM, 0))</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  <span class="comment">// Post-processing: Convert lea(,%reg,2) to lea(%reg,%reg), which has</span></div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  <span class="comment">// a smaller encoding and avoids a scaled-index.</span></div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  <span class="keywordflow">if</span> (AM.Scale == 2 &amp;&amp;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;      AM.BaseType == X86ISelAddressMode::RegBase &amp;&amp;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;      AM.Base_Reg.getNode() == 0) {</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    AM.Base_Reg = AM.IndexReg;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    AM.Scale = 1;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  }</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  <span class="comment">// Post-processing: Convert foo to foo(%rip), even in non-PIC mode,</span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  <span class="comment">// because it has a smaller encoding.</span></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  <span class="comment">// TODO: Which other code models can use this?</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1SystemZISD.html#a9a3c050e4bfe8d0d09d74c979f5bb121a68ace50a32835aa0562cf8f9694ba510">TM</a>.getCodeModel() == <a class="code" href="namespacellvm_1_1CodeModel.html#afc59396a9e5809fc92938e203d91a8dfaa2554ef60dc191c6005ba9eecbc9aea0">CodeModel::Small</a> &amp;&amp;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;      Subtarget-&gt;<a class="code" href="classllvm_1_1X86Subtarget.html#a5314399c907d77b514ec837e8527a9de">is64Bit</a>() &amp;&amp;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;      AM.Scale == 1 &amp;&amp;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;      AM.BaseType == X86ISelAddressMode::RegBase &amp;&amp;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;      AM.Base_Reg.getNode() == 0 &amp;&amp;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;      AM.IndexReg.getNode() == 0 &amp;&amp;</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;      AM.SymbolFlags == <a class="code" href="namespacellvm_1_1X86II.html#a45cdfdabb3963ec52b198ce5d3aabc84ab9508856c635578f8aaed9dd83c3f347">X86II::MO_NO_FLAG</a> &amp;&amp;</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;      AM.hasSymbolicDisplacement())</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    AM.Base_Reg = CurDAG-&gt;getRegister(X86::RIP, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca97f56253625b3fe7b371ce76722de4b8">MVT::i64</a>);</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;}</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="comment">// Insert a node into the DAG at least before the Pos node&#39;s position. This</span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="comment">// will reposition the node as needed, and will assign it a node ID that is &lt;=</span></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="comment">// the Pos node&#39;s ID. Note that this does *not* preserve the uniqueness of node</span></div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="comment">// IDs! The selection DAG must no longer depend on their uniqueness when this</span></div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="comment">// is used.</span></div><div class="line"><a name="l00762"></a><span class="lineno"><a class="line" href="X86ISelDAGToDAG_8cpp.html#aa0db74423051aebc66e0b6f8c540a5bf">  762</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="X86ISelDAGToDAG_8cpp.html#aa0db74423051aebc66e0b6f8c540a5bf">InsertDAGNode</a>(<a class="code" href="classllvm_1_1SelectionDAG.html">SelectionDAG</a> &amp;DAG, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Pos, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> N) {</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  <span class="keywordflow">if</span> (N.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#a7869db2aca4044d21da972bed855b0d0">getNodeId</a>() == -1 ||</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      N.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#a7869db2aca4044d21da972bed855b0d0">getNodeId</a>() &gt; Pos.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#a7869db2aca4044d21da972bed855b0d0">getNodeId</a>()) {</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    DAG.<a class="code" href="classllvm_1_1SelectionDAG.html#aed6667e93ace54abed8e4432b7b88927">RepositionNode</a>(Pos.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>(), N.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>());</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    N.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#a5689e9ae35c6ceb3b9377299c98e0e97">setNodeId</a>(Pos.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#a7869db2aca4044d21da972bed855b0d0">getNodeId</a>());</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  }</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;}</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="comment">// Transform &quot;(X &gt;&gt; (8-C1)) &amp; C2&quot; to &quot;(X &gt;&gt; 8) &amp; 0xff)&quot; if safe. This</span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="comment">// allows us to convert the shift and and into an h-register extract and</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="comment">// a scaled index. Returns false if the simplification is performed.</span></div><div class="line"><a name="l00773"></a><span class="lineno"><a class="line" href="X86ISelDAGToDAG_8cpp.html#adb3e41fa1653add6fb07e438c07f5ebf">  773</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="X86ISelDAGToDAG_8cpp.html#adb3e41fa1653add6fb07e438c07f5ebf">FoldMaskAndShiftToExtract</a>(<a class="code" href="classllvm_1_1SelectionDAG.html">SelectionDAG</a> &amp;DAG, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> N,</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                                      uint64_t Mask,</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                                      <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> <a class="code" href="Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> <a class="code" href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">X</a>,</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                                      X86ISelAddressMode &amp;AM) {</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  <span class="keywordflow">if</span> (Shift.<a class="code" href="classllvm_1_1SDValue.html#a0caf6a31d8034336a9ba7791a5f583f1">getOpcode</a>() != <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a> ||</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;      !isa&lt;ConstantSDNode&gt;(Shift.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(1)) ||</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;      !Shift.<a class="code" href="classllvm_1_1SDValue.html#a97b0f24f3e52f030830fca6fbfcbd37d">hasOneUse</a>())</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  <span class="keywordtype">int</span> ScaleLog = 8 - Shift.<a class="code" href="classllvm_1_1SDValue.html#a89345bda8c4fb44bd11b63904fe006bd">getConstantOperandVal</a>(1);</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  <span class="keywordflow">if</span> (ScaleLog &lt;= 0 || ScaleLog &gt;= 4 ||</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;      Mask != (0xffu &lt;&lt; ScaleLog))</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  <a class="code" href="classllvm_1_1MVT.html">MVT</a> VT = N.<a class="code" href="classllvm_1_1SDValue.html#a8bc8606044f2c3cdb6271c0378e0f9cf">getSimpleValueType</a>();</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  <a class="code" href="classllvm_1_1SDLoc.html">SDLoc</a> DL(N);</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Eight = DAG.<a class="code" href="classllvm_1_1SelectionDAG.html#a13ad902229b8b6b3a7a1d29dedac01e0">getConstant</a>(8, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50caf777e086e32f60c0c87b460964eae7d0">MVT::i8</a>);</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> NewMask = DAG.<a class="code" href="classllvm_1_1SelectionDAG.html#a13ad902229b8b6b3a7a1d29dedac01e0">getConstant</a>(0xff, VT);</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Srl = DAG.<a class="code" href="classllvm_1_1SelectionDAG.html#af5d5ed0a2c2186ec77b8dd9c38474d3e">getNode</a>(<a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, DL, VT, X, Eight);</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> <a class="code" href="namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">And</a> = DAG.<a class="code" href="classllvm_1_1SelectionDAG.html#af5d5ed0a2c2186ec77b8dd9c38474d3e">getNode</a>(<a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, DL, VT, Srl, NewMask);</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> ShlCount = DAG.<a class="code" href="classllvm_1_1SelectionDAG.html#a13ad902229b8b6b3a7a1d29dedac01e0">getConstant</a>(ScaleLog, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50caf777e086e32f60c0c87b460964eae7d0">MVT::i8</a>);</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Shl = DAG.<a class="code" href="classllvm_1_1SelectionDAG.html#af5d5ed0a2c2186ec77b8dd9c38474d3e">getNode</a>(<a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, DL, VT, And, ShlCount);</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  <span class="comment">// Insert the new nodes into the topological ordering. We must do this in</span></div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  <span class="comment">// a valid topological ordering as nothing is going to go back and re-sort</span></div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  <span class="comment">// these nodes. We continually insert before &#39;N&#39; in sequence as this is</span></div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  <span class="comment">// essentially a pre-flattened and pre-sorted sequence of nodes. There is no</span></div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  <span class="comment">// hierarchy left to express.</span></div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  <a class="code" href="X86ISelDAGToDAG_8cpp.html#aa0db74423051aebc66e0b6f8c540a5bf">InsertDAGNode</a>(DAG, N, Eight);</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  <a class="code" href="X86ISelDAGToDAG_8cpp.html#aa0db74423051aebc66e0b6f8c540a5bf">InsertDAGNode</a>(DAG, N, Srl);</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;  <a class="code" href="X86ISelDAGToDAG_8cpp.html#aa0db74423051aebc66e0b6f8c540a5bf">InsertDAGNode</a>(DAG, N, NewMask);</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  <a class="code" href="X86ISelDAGToDAG_8cpp.html#aa0db74423051aebc66e0b6f8c540a5bf">InsertDAGNode</a>(DAG, N, And);</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;  <a class="code" href="X86ISelDAGToDAG_8cpp.html#aa0db74423051aebc66e0b6f8c540a5bf">InsertDAGNode</a>(DAG, N, ShlCount);</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  <a class="code" href="X86ISelDAGToDAG_8cpp.html#aa0db74423051aebc66e0b6f8c540a5bf">InsertDAGNode</a>(DAG, N, Shl);</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  DAG.<a class="code" href="classllvm_1_1SelectionDAG.html#a307e5150c6c85f43348d2b09a69d7591">ReplaceAllUsesWith</a>(N, Shl);</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  AM.IndexReg = <a class="code" href="namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">And</a>;</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  AM.Scale = (1 &lt;&lt; ScaleLog);</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;}</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;<span class="comment">// Transforms &quot;(X &lt;&lt; C1) &amp; C2&quot; to &quot;(X &amp; (C2&gt;&gt;C1)) &lt;&lt; C1&quot; if safe and if this</span></div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;<span class="comment">// allows us to fold the shift into this addressing mode. Returns false if the</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="comment">// transform succeeded.</span></div><div class="line"><a name="l00816"></a><span class="lineno"><a class="line" href="X86ISelDAGToDAG_8cpp.html#a2bf7db878e7e3a32aec73521459cf6a1">  816</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="X86ISelDAGToDAG_8cpp.html#a2bf7db878e7e3a32aec73521459cf6a1">FoldMaskedShiftToScaledMask</a>(<a class="code" href="classllvm_1_1SelectionDAG.html">SelectionDAG</a> &amp;DAG, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> N,</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;                                        uint64_t Mask,</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;                                        <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> <a class="code" href="Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> <a class="code" href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">X</a>,</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                                        X86ISelAddressMode &amp;AM) {</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  <span class="keywordflow">if</span> (Shift.<a class="code" href="classllvm_1_1SDValue.html#a0caf6a31d8034336a9ba7791a5f583f1">getOpcode</a>() != <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a> ||</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;      !isa&lt;ConstantSDNode&gt;(Shift.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(1)))</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  <span class="comment">// Not likely to be profitable if either the AND or SHIFT node has more</span></div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  <span class="comment">// than one use (unless all uses are for address computation). Besides,</span></div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  <span class="comment">// isel mechanism requires their node ids to be reused.</span></div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  <span class="keywordflow">if</span> (!N.<a class="code" href="classllvm_1_1SDValue.html#a97b0f24f3e52f030830fca6fbfcbd37d">hasOneUse</a>() || !Shift.<a class="code" href="classllvm_1_1SDValue.html#a97b0f24f3e52f030830fca6fbfcbd37d">hasOneUse</a>())</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  <span class="comment">// Verify that the shift amount is something we can fold.</span></div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;  <span class="keywordtype">unsigned</span> ShiftAmt = Shift.<a class="code" href="classllvm_1_1SDValue.html#a89345bda8c4fb44bd11b63904fe006bd">getConstantOperandVal</a>(1);</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  <span class="keywordflow">if</span> (ShiftAmt != 1 &amp;&amp; ShiftAmt != 2 &amp;&amp; ShiftAmt != 3)</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  <a class="code" href="classllvm_1_1MVT.html">MVT</a> VT = N.<a class="code" href="classllvm_1_1SDValue.html#a8bc8606044f2c3cdb6271c0378e0f9cf">getSimpleValueType</a>();</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  <a class="code" href="classllvm_1_1SDLoc.html">SDLoc</a> DL(N);</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> NewMask = DAG.<a class="code" href="classllvm_1_1SelectionDAG.html#a13ad902229b8b6b3a7a1d29dedac01e0">getConstant</a>(Mask &gt;&gt; ShiftAmt, VT);</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> NewAnd = DAG.<a class="code" href="classllvm_1_1SelectionDAG.html#af5d5ed0a2c2186ec77b8dd9c38474d3e">getNode</a>(<a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>, DL, VT, X, NewMask);</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> NewShift = DAG.<a class="code" href="classllvm_1_1SelectionDAG.html#af5d5ed0a2c2186ec77b8dd9c38474d3e">getNode</a>(<a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, DL, VT, NewAnd, Shift.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(1));</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  <span class="comment">// Insert the new nodes into the topological ordering. We must do this in</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  <span class="comment">// a valid topological ordering as nothing is going to go back and re-sort</span></div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  <span class="comment">// these nodes. We continually insert before &#39;N&#39; in sequence as this is</span></div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  <span class="comment">// essentially a pre-flattened and pre-sorted sequence of nodes. There is no</span></div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  <span class="comment">// hierarchy left to express.</span></div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  <a class="code" href="X86ISelDAGToDAG_8cpp.html#aa0db74423051aebc66e0b6f8c540a5bf">InsertDAGNode</a>(DAG, N, NewMask);</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  <a class="code" href="X86ISelDAGToDAG_8cpp.html#aa0db74423051aebc66e0b6f8c540a5bf">InsertDAGNode</a>(DAG, N, NewAnd);</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;  <a class="code" href="X86ISelDAGToDAG_8cpp.html#aa0db74423051aebc66e0b6f8c540a5bf">InsertDAGNode</a>(DAG, N, NewShift);</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  DAG.<a class="code" href="classllvm_1_1SelectionDAG.html#a307e5150c6c85f43348d2b09a69d7591">ReplaceAllUsesWith</a>(N, NewShift);</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  AM.Scale = 1 &lt;&lt; ShiftAmt;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  AM.IndexReg = NewAnd;</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;}</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;<span class="comment">// Implement some heroics to detect shifts of masked values where the mask can</span></div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="comment">// be replaced by extending the shift and undoing that in the addressing mode</span></div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;<span class="comment">// scale. Patterns such as (shl (srl x, c1), c2) are canonicalized into (and</span></div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;<span class="comment">// (srl x, SHIFT), MASK) by DAGCombines that don&#39;t know the shl can be done in</span></div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;<span class="comment">// the addressing mode. This results in code such as:</span></div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="comment">//   int f(short *y, int *lookup_table) {</span></div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<span class="comment">//     ...</span></div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="comment">//     return *y + lookup_table[*y &gt;&gt; 11];</span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;<span class="comment">//   }</span></div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;<span class="comment">// Turning into:</span></div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;<span class="comment">//   movzwl (%rdi), %eax</span></div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;<span class="comment">//   movl %eax, %ecx</span></div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;<span class="comment">//   shrl $11, %ecx</span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="comment">//   addl (%rsi,%rcx,4), %eax</span></div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="comment">// Instead of:</span></div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="comment">//   movzwl (%rdi), %eax</span></div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;<span class="comment">//   movl %eax, %ecx</span></div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="comment">//   shrl $9, %ecx</span></div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;<span class="comment">//   andl $124, %rcx</span></div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;<span class="comment">//   addl (%rsi,%rcx), %eax</span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;<span class="comment">// Note that this function assumes the mask is provided as a mask *after* the</span></div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;<span class="comment">// value is shifted. The input chain may or may not match that, but computing</span></div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;<span class="comment">// such a mask is trivial.</span></div><div class="line"><a name="l00883"></a><span class="lineno"><a class="line" href="X86ISelDAGToDAG_8cpp.html#ade4f4c1f5a55552504026f8574a9c893">  883</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="X86ISelDAGToDAG_8cpp.html#ade4f4c1f5a55552504026f8574a9c893">FoldMaskAndShiftToScale</a>(<a class="code" href="classllvm_1_1SelectionDAG.html">SelectionDAG</a> &amp;DAG, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> N,</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;                                    uint64_t Mask,</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;                                    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> <a class="code" href="Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> <a class="code" href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">X</a>,</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;                                    X86ISelAddressMode &amp;AM) {</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  <span class="keywordflow">if</span> (Shift.<a class="code" href="classllvm_1_1SDValue.html#a0caf6a31d8034336a9ba7791a5f583f1">getOpcode</a>() != <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a> || !Shift.<a class="code" href="classllvm_1_1SDValue.html#a97b0f24f3e52f030830fca6fbfcbd37d">hasOneUse</a>() ||</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;      !isa&lt;ConstantSDNode&gt;(Shift.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(1)))</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  <span class="keywordtype">unsigned</span> ShiftAmt = Shift.<a class="code" href="classllvm_1_1SDValue.html#a89345bda8c4fb44bd11b63904fe006bd">getConstantOperandVal</a>(1);</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  <span class="keywordtype">unsigned</span> MaskLZ = <a class="code" href="namespacellvm.html#a85acbc71797c5df4b82f6c527ff9ad1a">countLeadingZeros</a>(Mask);</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  <span class="keywordtype">unsigned</span> MaskTZ = <a class="code" href="namespacellvm.html#abdaf1eaf6120421977095bd97eee892e">countTrailingZeros</a>(Mask);</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <span class="comment">// The amount of shift we&#39;re trying to fit into the addressing mode is taken</span></div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  <span class="comment">// from the trailing zeros of the mask.</span></div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;  <span class="keywordtype">unsigned</span> AMShiftAmt = MaskTZ;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  <span class="comment">// There is nothing we can do here unless the mask is removing some bits.</span></div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  <span class="comment">// Also, the addressing mode can only represent shifts of 1, 2, or 3 bits.</span></div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;  <span class="keywordflow">if</span> (AMShiftAmt &lt;= 0 || AMShiftAmt &gt; 3) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  <span class="comment">// We also need to ensure that mask is a continuous run of bits.</span></div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a8da28d982a3c20fa6e57d94df3059f03">CountTrailingOnes_64</a>(Mask &gt;&gt; MaskTZ) + MaskTZ + MaskLZ != 64) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  <span class="comment">// Scale the leading zero count down based on the actual size of the value.</span></div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;  <span class="comment">// Also scale it down based on the size of the shift.</span></div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;  MaskLZ -= (64 - X.<a class="code" href="classllvm_1_1SDValue.html#a8bc8606044f2c3cdb6271c0378e0f9cf">getSimpleValueType</a>().<a class="code" href="classllvm_1_1MVT.html#a423166b2b5d1010162dde0003e5ad09c">getSizeInBits</a>()) + ShiftAmt;</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  <span class="comment">// The final check is to ensure that any masked out high bits of X are</span></div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;  <span class="comment">// already known to be zero. Otherwise, the mask has a semantic impact</span></div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  <span class="comment">// other than masking out a couple of low bits. Unfortunately, because of</span></div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  <span class="comment">// the mask, zero extensions will be removed from operands in some cases.</span></div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;  <span class="comment">// This code works extra hard to look through extensions because we can</span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;  <span class="comment">// replace them with zero extensions cheaply if necessary.</span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;  <span class="keywordtype">bool</span> ReplacingAnyExtend = <span class="keyword">false</span>;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;  <span class="keywordflow">if</span> (X.<a class="code" href="classllvm_1_1SDValue.html#a0caf6a31d8034336a9ba7791a5f583f1">getOpcode</a>() == <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a27d5d8ef82302b739ba3ca8be1a5513d">ISD::ANY_EXTEND</a>) {</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    <span class="keywordtype">unsigned</span> ExtendBits = X.<a class="code" href="classllvm_1_1SDValue.html#a8bc8606044f2c3cdb6271c0378e0f9cf">getSimpleValueType</a>().<a class="code" href="classllvm_1_1MVT.html#a423166b2b5d1010162dde0003e5ad09c">getSizeInBits</a>() -</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;                          X.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0).<a class="code" href="classllvm_1_1SDValue.html#a8bc8606044f2c3cdb6271c0378e0f9cf">getSimpleValueType</a>().<a class="code" href="classllvm_1_1MVT.html#a423166b2b5d1010162dde0003e5ad09c">getSizeInBits</a>();</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <span class="comment">// Assume that we&#39;ll replace the any-extend with a zero-extend, and</span></div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    <span class="comment">// narrow the search to the extended value.</span></div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    X = X.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0);</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    MaskLZ = ExtendBits &gt; MaskLZ ? 0 : MaskLZ - ExtendBits;</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    ReplacingAnyExtend = <span class="keyword">true</span>;</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;  }</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> MaskedHighBits =</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    <a class="code" href="classllvm_1_1APInt.html#adcb96bd09d7c75c7669fa5f9d1190899">APInt::getHighBitsSet</a>(X.<a class="code" href="classllvm_1_1SDValue.html#a8bc8606044f2c3cdb6271c0378e0f9cf">getSimpleValueType</a>().<a class="code" href="classllvm_1_1MVT.html#a423166b2b5d1010162dde0003e5ad09c">getSizeInBits</a>(), MaskLZ);</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> KnownZero, KnownOne;</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;  DAG.<a class="code" href="classllvm_1_1SelectionDAG.html#ad06ca140783fd9f03eed498e8485fc3d">ComputeMaskedBits</a>(X, KnownZero, KnownOne);</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  <span class="keywordflow">if</span> (MaskedHighBits != KnownZero) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  <span class="comment">// We&#39;ve identified a pattern that can be transformed into a single shift</span></div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;  <span class="comment">// and an addressing mode. Make it so.</span></div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  <a class="code" href="classllvm_1_1MVT.html">MVT</a> VT = N.<a class="code" href="classllvm_1_1SDValue.html#a8bc8606044f2c3cdb6271c0378e0f9cf">getSimpleValueType</a>();</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;  <span class="keywordflow">if</span> (ReplacingAnyExtend) {</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    assert(X.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>() != VT);</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <span class="comment">// We looked through an ANY_EXTEND node, insert a ZERO_EXTEND.</span></div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> NewX = DAG.<a class="code" href="classllvm_1_1SelectionDAG.html#af5d5ed0a2c2186ec77b8dd9c38474d3e">getNode</a>(<a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a93fdf85eff945f1a668b4915a051453e">ISD::ZERO_EXTEND</a>, <a class="code" href="classllvm_1_1SDLoc.html">SDLoc</a>(X), VT, X);</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <a class="code" href="X86ISelDAGToDAG_8cpp.html#aa0db74423051aebc66e0b6f8c540a5bf">InsertDAGNode</a>(DAG, N, NewX);</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    X = NewX;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;  }</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;  <a class="code" href="classllvm_1_1SDLoc.html">SDLoc</a> DL(N);</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> NewSRLAmt = DAG.<a class="code" href="classllvm_1_1SelectionDAG.html#a13ad902229b8b6b3a7a1d29dedac01e0">getConstant</a>(ShiftAmt + AMShiftAmt, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50caf777e086e32f60c0c87b460964eae7d0">MVT::i8</a>);</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> NewSRL = DAG.<a class="code" href="classllvm_1_1SelectionDAG.html#af5d5ed0a2c2186ec77b8dd9c38474d3e">getNode</a>(<a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>, DL, VT, X, NewSRLAmt);</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> NewSHLAmt = DAG.<a class="code" href="classllvm_1_1SelectionDAG.html#a13ad902229b8b6b3a7a1d29dedac01e0">getConstant</a>(AMShiftAmt, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50caf777e086e32f60c0c87b460964eae7d0">MVT::i8</a>);</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> NewSHL = DAG.<a class="code" href="classllvm_1_1SelectionDAG.html#af5d5ed0a2c2186ec77b8dd9c38474d3e">getNode</a>(<a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>, DL, VT, NewSRL, NewSHLAmt);</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;  <span class="comment">// Insert the new nodes into the topological ordering. We must do this in</span></div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  <span class="comment">// a valid topological ordering as nothing is going to go back and re-sort</span></div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;  <span class="comment">// these nodes. We continually insert before &#39;N&#39; in sequence as this is</span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;  <span class="comment">// essentially a pre-flattened and pre-sorted sequence of nodes. There is no</span></div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;  <span class="comment">// hierarchy left to express.</span></div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;  <a class="code" href="X86ISelDAGToDAG_8cpp.html#aa0db74423051aebc66e0b6f8c540a5bf">InsertDAGNode</a>(DAG, N, NewSRLAmt);</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;  <a class="code" href="X86ISelDAGToDAG_8cpp.html#aa0db74423051aebc66e0b6f8c540a5bf">InsertDAGNode</a>(DAG, N, NewSRL);</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  <a class="code" href="X86ISelDAGToDAG_8cpp.html#aa0db74423051aebc66e0b6f8c540a5bf">InsertDAGNode</a>(DAG, N, NewSHLAmt);</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;  <a class="code" href="X86ISelDAGToDAG_8cpp.html#aa0db74423051aebc66e0b6f8c540a5bf">InsertDAGNode</a>(DAG, N, NewSHL);</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;  DAG.<a class="code" href="classllvm_1_1SelectionDAG.html#a307e5150c6c85f43348d2b09a69d7591">ReplaceAllUsesWith</a>(N, NewSHL);</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  AM.Scale = 1 &lt;&lt; AMShiftAmt;</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;  AM.IndexReg = NewSRL;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;}</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;<span class="keywordtype">bool</span> X86DAGToDAGISel::MatchAddressRecursively(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> N, X86ISelAddressMode &amp;AM,</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;                                              <span class="keywordtype">unsigned</span> Depth) {</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;  <a class="code" href="classllvm_1_1SDLoc.html">SDLoc</a> dl(N);</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>({</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;MatchAddress: &quot;</span>;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;      AM.dump();</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    });</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;  <span class="comment">// Limit recursion.</span></div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;  <span class="keywordflow">if</span> (Depth &gt; 5)</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    <span class="keywordflow">return</span> MatchAddressBase(N, AM);</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;  <span class="comment">// If this is already a %rip relative address, we can only merge immediates</span></div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;  <span class="comment">// into it.  Instead of handling this in every case, we handle it here.</span></div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;  <span class="comment">// RIP relative addressing: %rip + 32-bit displacement!</span></div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;  <span class="keywordflow">if</span> (AM.isRIPRelative()) {</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <span class="comment">// FIXME: JumpTable and ExternalSymbol address currently don&#39;t like</span></div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <span class="comment">// displacements.  It isn&#39;t very important, but this should be fixed for</span></div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    <span class="comment">// consistency.</span></div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <span class="keywordflow">if</span> (!AM.ES &amp;&amp; AM.JT != -1) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantSDNode.html">ConstantSDNode</a> *Cst = dyn_cast&lt;ConstantSDNode&gt;(N))</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;      <span class="keywordflow">if</span> (!FoldOffsetIntoAddress(Cst-&gt;getSExtValue(), AM))</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;  }</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;  <span class="keywordflow">switch</span> (N.<a class="code" href="classllvm_1_1SDValue.html#a0caf6a31d8034336a9ba7791a5f583f1">getOpcode</a>()) {</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;  <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110aac2f0a84dd2aa5ee4c3f1385e9565f5e">ISD::Constant</a>: {</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    uint64_t Val = cast&lt;ConstantSDNode&gt;(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>)-&gt;getSExtValue();</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    <span class="keywordflow">if</span> (!FoldOffsetIntoAddress(Val, AM))</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;  }</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28ac52ade4e38c09090c08d423e886cb4b2">X86ISD::Wrapper</a>:</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28af9b840077b4580ddbfd3bf992fe359eb">X86ISD::WrapperRIP</a>:</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    <span class="keywordflow">if</span> (!MatchWrapper(N, AM))</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a269b81f007000306e3e69d0d290c2159">ISD::LOAD</a>:</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    <span class="keywordflow">if</span> (!MatchLoadInAddress(cast&lt;LoadSDNode&gt;(N), AM))</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a4b437632fd9b97dd36010d85eb363efe">ISD::FrameIndex</a>:</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    <span class="keywordflow">if</span> (AM.BaseType == X86ISelAddressMode::RegBase &amp;&amp;</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;        AM.Base_Reg.getNode() == 0 &amp;&amp;</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;        (!Subtarget-&gt;<a class="code" href="classllvm_1_1X86Subtarget.html#a5314399c907d77b514ec837e8527a9de">is64Bit</a>() || <a class="code" href="X86ISelDAGToDAG_8cpp.html#accefa4c7462a1332c8e02f04942cd445">isDispSafeForFrameIndex</a>(AM.Disp))) {</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;      AM.BaseType = X86ISelAddressMode::FrameIndexBase;</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;      AM.Base_FrameIndex = cast&lt;FrameIndexSDNode&gt;(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>)-&gt;getIndex();</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    }</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>:</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    <span class="keywordflow">if</span> (AM.IndexReg.getNode() != 0 || AM.Scale != 1)</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantSDNode.html">ConstantSDNode</a></div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;          *CN = dyn_cast&lt;ConstantSDNode&gt;(N.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(1))) {</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;      <span class="keywordtype">unsigned</span> Val = CN-&gt;getZExtValue();</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;      <span class="comment">// Note that we handle x&lt;&lt;1 as (,x,2) rather than (x,x) here so</span></div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;      <span class="comment">// that the base operand remains free for further matching. If</span></div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;      <span class="comment">// the base doesn&#39;t end up getting used, a post-processing step</span></div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;      <span class="comment">// in MatchAddress turns (,x,2) into (x,x), which is cheaper.</span></div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;      <span class="keywordflow">if</span> (Val == 1 || Val == 2 || Val == 3) {</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;        AM.Scale = 1 &lt;&lt; Val;</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;        <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> ShVal = N.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(0);</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;        <span class="comment">// Okay, we know that we have a scale by now.  However, if the scaled</span></div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;        <span class="comment">// value is an add of something and a constant, we can fold the</span></div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;        <span class="comment">// constant into the disp field here.</span></div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;        <span class="keywordflow">if</span> (CurDAG-&gt;isBaseWithConstantOffset(ShVal)) {</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;          AM.IndexReg = ShVal.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(0);</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;          <a class="code" href="classllvm_1_1ConstantSDNode.html">ConstantSDNode</a> *AddVal =</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;            cast&lt;ConstantSDNode&gt;(ShVal.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(1));</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;          uint64_t Disp = (uint64_t)AddVal-&gt;<a class="code" href="classllvm_1_1ConstantSDNode.html#ae52ea754f0f064b6440e99103abea366">getSExtValue</a>() &lt;&lt; Val;</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;          <span class="keywordflow">if</span> (!FoldOffsetIntoAddress(Disp, AM))</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;        }</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;        AM.IndexReg = ShVal;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;      }</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    }</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a>: {</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    <span class="comment">// Scale must not be used already.</span></div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    <span class="keywordflow">if</span> (AM.IndexReg.getNode() != 0 || AM.Scale != 1) <span class="keywordflow">break</span>;</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> <a class="code" href="namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">And</a> = N.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0);</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    <span class="keywordflow">if</span> (And.<a class="code" href="classllvm_1_1SDValue.html#a0caf6a31d8034336a9ba7791a5f583f1">getOpcode</a>() != <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>) <span class="keywordflow">break</span>;</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> <a class="code" href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">X</a> = And.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0);</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    <span class="comment">// We only handle up to 64-bit values here as those are what matter for</span></div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    <span class="comment">// addressing mode optimizations.</span></div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    <span class="keywordflow">if</span> (X.<a class="code" href="classllvm_1_1SDValue.html#a8bc8606044f2c3cdb6271c0378e0f9cf">getSimpleValueType</a>().<a class="code" href="classllvm_1_1MVT.html#a423166b2b5d1010162dde0003e5ad09c">getSizeInBits</a>() &gt; 64) <span class="keywordflow">break</span>;</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    <span class="comment">// The mask used for the transform is expected to be post-shift, but we</span></div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    <span class="comment">// found the shift first so just apply the shift to the mask before passing</span></div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <span class="comment">// it down.</span></div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <span class="keywordflow">if</span> (!isa&lt;ConstantSDNode&gt;(N.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(1)) ||</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;        !isa&lt;ConstantSDNode&gt;(And.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(1)))</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    uint64_t Mask = And.<a class="code" href="classllvm_1_1SDValue.html#a89345bda8c4fb44bd11b63904fe006bd">getConstantOperandVal</a>(1) &gt;&gt; N.<a class="code" href="classllvm_1_1SDValue.html#a89345bda8c4fb44bd11b63904fe006bd">getConstantOperandVal</a>(1);</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    <span class="comment">// Try to fold the mask and shift into the scale, and return false if we</span></div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    <span class="comment">// succeed.</span></div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="X86ISelDAGToDAG_8cpp.html#ade4f4c1f5a55552504026f8574a9c893">FoldMaskAndShiftToScale</a>(*CurDAG, N, Mask, N, X, AM))</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;  }</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a1354c6f8508d6cd697dc89a5d9a52dfd">ISD::SMUL_LOHI</a>:</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a79c959df09509d7ff66d9b04bc40d18d">ISD::UMUL_LOHI</a>:</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    <span class="comment">// A mul_lohi where we need the low part can be folded as a plain multiply.</span></div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    <span class="keywordflow">if</span> (N.<a class="code" href="classllvm_1_1SDValue.html#a64881a6ca7154fccaeb92cdb1e1e745e">getResNo</a>() != 0) <span class="keywordflow">break</span>;</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    <span class="comment">// FALL THROUGH</span></div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>:</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28ab42a00cd9b29370e08759eeed0673c0a">X86ISD::MUL_IMM</a>:</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    <span class="comment">// X*[3,5,9] -&gt; X+X*[2,4,8]</span></div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    <span class="keywordflow">if</span> (AM.BaseType == X86ISelAddressMode::RegBase &amp;&amp;</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;        AM.Base_Reg.getNode() == 0 &amp;&amp;</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;        AM.IndexReg.getNode() == 0) {</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantSDNode.html">ConstantSDNode</a></div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;            *CN = dyn_cast&lt;ConstantSDNode&gt;(N.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(1)))</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;        <span class="keywordflow">if</span> (CN-&gt;getZExtValue() == 3 || CN-&gt;getZExtValue() == 5 ||</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;            CN-&gt;getZExtValue() == 9) {</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;          AM.Scale = unsigned(CN-&gt;getZExtValue())-1;</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;          <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> MulVal = N.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(0);</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;          <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>;</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;          <span class="comment">// Okay, we know that we have a scale by now.  However, if the scaled</span></div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;          <span class="comment">// value is an add of something and a constant, we can fold the</span></div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;          <span class="comment">// constant into the disp field here.</span></div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;          <span class="keywordflow">if</span> (MulVal.getNode()-&gt;getOpcode() == <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a> &amp;&amp; MulVal.hasOneUse() &amp;&amp;</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;              isa&lt;ConstantSDNode&gt;(MulVal.getNode()-&gt;getOperand(1))) {</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;            Reg = MulVal.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(0);</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;            <a class="code" href="classllvm_1_1ConstantSDNode.html">ConstantSDNode</a> *AddVal =</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;              cast&lt;ConstantSDNode&gt;(MulVal.getNode()-&gt;getOperand(1));</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;            uint64_t Disp = AddVal-&gt;<a class="code" href="classllvm_1_1ConstantSDNode.html#ae52ea754f0f064b6440e99103abea366">getSExtValue</a>() * CN-&gt;getZExtValue();</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;            <span class="keywordflow">if</span> (FoldOffsetIntoAddress(Disp, AM))</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;              Reg = N.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(0);</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;          } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;            Reg = N.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(0);</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;          }</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;          AM.IndexReg = AM.Base_Reg = <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>;</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;        }</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    }</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>: {</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    <span class="comment">// Given A-B, if A can be completely folded into the address and</span></div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    <span class="comment">// the index field with the index field unused, use -B as the index.</span></div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <span class="comment">// This is a win if a has multiple parts that can be folded into</span></div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <span class="comment">// the address. Also, this saves a mov if the base register has</span></div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    <span class="comment">// other uses, since it avoids a two-address sub instruction, however</span></div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <span class="comment">// it costs an additional mov if the index register has other uses.</span></div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    <span class="comment">// Add an artificial use to this node so that we can keep track of</span></div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    <span class="comment">// it if it gets CSE&#39;d with a different node.</span></div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    <a class="code" href="classllvm_1_1HandleSDNode.html">HandleSDNode</a> Handle(N);</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    <span class="comment">// Test if the LHS of the sub can be folded.</span></div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    X86ISelAddressMode Backup = AM;</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    <span class="keywordflow">if</span> (MatchAddressRecursively(N.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(0), AM, Depth+1)) {</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;      AM = Backup;</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    }</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    <span class="comment">// Test if the index field is free for use.</span></div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    <span class="keywordflow">if</span> (AM.IndexReg.getNode() || AM.isRIPRelative()) {</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;      AM = Backup;</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    }</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    <span class="keywordtype">int</span> Cost = 0;</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> RHS = Handle.<a class="code" href="classllvm_1_1HandleSDNode.html#aed014ec917b6b7f6aae1edfac7e9b9de">getValue</a>().<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(1);</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    <span class="comment">// If the RHS involves a register with multiple uses, this</span></div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;    <span class="comment">// transformation incurs an extra mov, due to the neg instruction</span></div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    <span class="comment">// clobbering its operand.</span></div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    <span class="keywordflow">if</span> (!RHS.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#a52753947fce3a01b1c18dd4713c587e8">hasOneUse</a>() ||</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;        RHS.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#af0d328f3f61168f4ea7d6e4044af4f97">getOpcode</a>() == <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a84c47705bcf7271413738ae8bf3871e6">ISD::CopyFromReg</a> ||</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        RHS.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#af0d328f3f61168f4ea7d6e4044af4f97">getOpcode</a>() == <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a> ||</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;        RHS.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#af0d328f3f61168f4ea7d6e4044af4f97">getOpcode</a>() == <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a27d5d8ef82302b739ba3ca8be1a5513d">ISD::ANY_EXTEND</a> ||</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;        (RHS.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#af0d328f3f61168f4ea7d6e4044af4f97">getOpcode</a>() == <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a93fdf85eff945f1a668b4915a051453e">ISD::ZERO_EXTEND</a> &amp;&amp;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;         RHS.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(0).<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>() == <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>))</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;      ++Cost;</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    <span class="comment">// If the base is a register with multiple uses, this</span></div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    <span class="comment">// transformation may save a mov.</span></div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    <span class="keywordflow">if</span> ((AM.BaseType == X86ISelAddressMode::RegBase &amp;&amp;</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;         AM.Base_Reg.getNode() &amp;&amp;</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;         !AM.Base_Reg.getNode()-&gt;hasOneUse()) ||</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;        AM.BaseType == X86ISelAddressMode::FrameIndexBase)</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;      --Cost;</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    <span class="comment">// If the folded LHS was interesting, this transformation saves</span></div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    <span class="comment">// address arithmetic.</span></div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    <span class="keywordflow">if</span> ((AM.hasSymbolicDisplacement() &amp;&amp; !Backup.hasSymbolicDisplacement()) +</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;        ((AM.Disp != 0) &amp;&amp; (Backup.Disp == 0)) +</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;        (AM.Segment.getNode() &amp;&amp; !Backup.Segment.getNode()) &gt;= 2)</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;      --Cost;</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    <span class="comment">// If it doesn&#39;t look like it may be an overall win, don&#39;t do it.</span></div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <span class="keywordflow">if</span> (Cost &gt;= 0) {</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;      AM = Backup;</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    }</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    <span class="comment">// Ok, the transformation is legal and appears profitable. Go for it.</span></div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Zero = CurDAG-&gt;getConstant(0, N.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>());</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Neg = CurDAG-&gt;getNode(<a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a>, dl, N.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>(), Zero, RHS);</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    AM.IndexReg = Neg;</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    AM.Scale = 1;</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    <span class="comment">// Insert the new nodes into the topological ordering.</span></div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    <a class="code" href="X86ISelDAGToDAG_8cpp.html#aa0db74423051aebc66e0b6f8c540a5bf">InsertDAGNode</a>(*CurDAG, N, Zero);</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    <a class="code" href="X86ISelDAGToDAG_8cpp.html#aa0db74423051aebc66e0b6f8c540a5bf">InsertDAGNode</a>(*CurDAG, N, Neg);</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;  }</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>: {</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    <span class="comment">// Add an artificial use to this node so that we can keep track of</span></div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    <span class="comment">// it if it gets CSE&#39;d with a different node.</span></div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    <a class="code" href="classllvm_1_1HandleSDNode.html">HandleSDNode</a> Handle(N);</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    X86ISelAddressMode Backup = AM;</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    <span class="keywordflow">if</span> (!MatchAddressRecursively(N.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0), AM, Depth+1) &amp;&amp;</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;        !MatchAddressRecursively(Handle.<a class="code" href="classllvm_1_1HandleSDNode.html#aed014ec917b6b7f6aae1edfac7e9b9de">getValue</a>().<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(1), AM, Depth+1))</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    AM = Backup;</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    <span class="comment">// Try again after commuting the operands.</span></div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    <span class="keywordflow">if</span> (!MatchAddressRecursively(Handle.<a class="code" href="classllvm_1_1HandleSDNode.html#aed014ec917b6b7f6aae1edfac7e9b9de">getValue</a>().<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(1), AM, Depth+1)&amp;&amp;</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;        !MatchAddressRecursively(Handle.<a class="code" href="classllvm_1_1HandleSDNode.html#aed014ec917b6b7f6aae1edfac7e9b9de">getValue</a>().<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0), AM, Depth+1))</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    AM = Backup;</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    <span class="comment">// If we couldn&#39;t fold both operands into the address at the same time,</span></div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    <span class="comment">// see if we can just put each operand into a register and fold at least</span></div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    <span class="comment">// the add.</span></div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    <span class="keywordflow">if</span> (AM.BaseType == X86ISelAddressMode::RegBase &amp;&amp;</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;        !AM.Base_Reg.getNode() &amp;&amp;</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;        !AM.IndexReg.getNode()) {</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;      N = Handle.<a class="code" href="classllvm_1_1HandleSDNode.html#aed014ec917b6b7f6aae1edfac7e9b9de">getValue</a>();</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;      AM.Base_Reg = N.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0);</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;      AM.IndexReg = N.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(1);</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;      AM.Scale = 1;</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    }</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    N = Handle.<a class="code" href="classllvm_1_1HandleSDNode.html#aed014ec917b6b7f6aae1edfac7e9b9de">getValue</a>();</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;  }</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>:</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="comment">// Handle &quot;X | C&quot; as &quot;X + C&quot; iff X is known to have C bits clear.</span></div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    <span class="keywordflow">if</span> (CurDAG-&gt;isBaseWithConstantOffset(N)) {</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;      X86ISelAddressMode Backup = AM;</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;      <a class="code" href="classllvm_1_1ConstantSDNode.html">ConstantSDNode</a> *CN = cast&lt;ConstantSDNode&gt;(N.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(1));</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;      <span class="comment">// Start with the LHS as an addr mode.</span></div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;      <span class="keywordflow">if</span> (!MatchAddressRecursively(N.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0), AM, Depth+1) &amp;&amp;</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;          !FoldOffsetIntoAddress(CN-&gt;<a class="code" href="classllvm_1_1ConstantSDNode.html#ae52ea754f0f064b6440e99103abea366">getSExtValue</a>(), AM))</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;      AM = Backup;</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    }</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>: {</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    <span class="comment">// Perform some heroic transforms on an and of a constant-count shift</span></div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    <span class="comment">// with a constant to enable use of the scaled offset field.</span></div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    <span class="comment">// Scale must not be used already.</span></div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    <span class="keywordflow">if</span> (AM.IndexReg.getNode() != 0 || AM.Scale != 1) <span class="keywordflow">break</span>;</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> <a class="code" href="Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a> = N.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0);</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    <span class="keywordflow">if</span> (Shift.<a class="code" href="classllvm_1_1SDValue.html#a0caf6a31d8034336a9ba7791a5f583f1">getOpcode</a>() != <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a> &amp;&amp; Shift.<a class="code" href="classllvm_1_1SDValue.html#a0caf6a31d8034336a9ba7791a5f583f1">getOpcode</a>() != <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a>) <span class="keywordflow">break</span>;</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> <a class="code" href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">X</a> = Shift.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0);</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    <span class="comment">// We only handle up to 64-bit values here as those are what matter for</span></div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;    <span class="comment">// addressing mode optimizations.</span></div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    <span class="keywordflow">if</span> (X.<a class="code" href="classllvm_1_1SDValue.html#a8bc8606044f2c3cdb6271c0378e0f9cf">getSimpleValueType</a>().<a class="code" href="classllvm_1_1MVT.html#a423166b2b5d1010162dde0003e5ad09c">getSizeInBits</a>() &gt; 64) <span class="keywordflow">break</span>;</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    <span class="keywordflow">if</span> (!isa&lt;ConstantSDNode&gt;(N.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(1)))</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;    uint64_t Mask = N.<a class="code" href="classllvm_1_1SDValue.html#a89345bda8c4fb44bd11b63904fe006bd">getConstantOperandVal</a>(1);</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    <span class="comment">// Try to fold the mask and shift into an extract and scale.</span></div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="X86ISelDAGToDAG_8cpp.html#adb3e41fa1653add6fb07e438c07f5ebf">FoldMaskAndShiftToExtract</a>(*CurDAG, N, Mask, Shift, X, AM))</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    <span class="comment">// Try to fold the mask and shift directly into the scale.</span></div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="X86ISelDAGToDAG_8cpp.html#ade4f4c1f5a55552504026f8574a9c893">FoldMaskAndShiftToScale</a>(*CurDAG, N, Mask, Shift, X, AM))</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    <span class="comment">// Try to swap the mask and shift to place shifts which can be done as</span></div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    <span class="comment">// a scale on the outside of the mask.</span></div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="X86ISelDAGToDAG_8cpp.html#a2bf7db878e7e3a32aec73521459cf6a1">FoldMaskedShiftToScaledMask</a>(*CurDAG, N, Mask, Shift, X, AM))</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;  }</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;  }</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;  <span class="keywordflow">return</span> MatchAddressBase(N, AM);</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;}</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;<span class="comment">/// MatchAddressBase - Helper for MatchAddress. Add the specified node to the</span></div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;<span class="comment">/// specified addressing mode without any further recursion.</span></div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> X86DAGToDAGISel::MatchAddressBase(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> N, X86ISelAddressMode &amp;AM) {</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;  <span class="comment">// Is the base register already occupied?</span></div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;  <span class="keywordflow">if</span> (AM.BaseType != X86ISelAddressMode::RegBase || AM.Base_Reg.getNode()) {</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    <span class="comment">// If so, check to see if the scale index register is set.</span></div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    <span class="keywordflow">if</span> (AM.IndexReg.getNode() == 0) {</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;      AM.IndexReg = <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>;</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;      AM.Scale = 1;</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    }</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    <span class="comment">// Otherwise, we cannot select it.</span></div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;  }</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;  <span class="comment">// Default, generate it as a register.</span></div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;  AM.BaseType = X86ISelAddressMode::RegBase;</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;  AM.Base_Reg = <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>;</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;}</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;<span class="comment">/// SelectAddr - returns true if it is able pattern match an addressing mode.</span></div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;<span class="comment">/// It returns the operands which make up the maximal addressing mode it can</span></div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;<span class="comment">/// match by reference.</span></div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;<span class="comment">/// Parent is the parent node of the addr operand that is being matched.  It</span></div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;<span class="comment">/// is always a load, store, atomic node, or null.  It is only null when</span></div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;<span class="comment">/// checking memory operands for inline asm nodes.</span></div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> X86DAGToDAGISel::SelectAddr(<a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *Parent, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> N, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Base,</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;                                 <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Scale, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Index,</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;                                 <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Disp, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Segment) {</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;  X86ISelAddressMode AM;</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;  <span class="keywordflow">if</span> (Parent &amp;&amp;</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;      <span class="comment">// This list of opcodes are all the nodes that have an &quot;addr:$ptr&quot; operand</span></div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;      <span class="comment">// that are not a MemSDNode, and thus don&#39;t have proper addrspace info.</span></div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;      Parent-&gt;<a class="code" href="classllvm_1_1SDNode.html#af0d328f3f61168f4ea7d6e4044af4f97">getOpcode</a>() != <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110afc09e0bddd693dcf9923e4df42473bd9">ISD::INTRINSIC_W_CHAIN</a> &amp;&amp; <span class="comment">// unaligned loads, fixme</span></div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;      Parent-&gt;<a class="code" href="classllvm_1_1SDNode.html#af0d328f3f61168f4ea7d6e4044af4f97">getOpcode</a>() != <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a2df96794a99f5d3b4415c4a84e616140">ISD::INTRINSIC_VOID</a> &amp;&amp; <span class="comment">// nontemporal stores</span></div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;      Parent-&gt;<a class="code" href="classllvm_1_1SDNode.html#af0d328f3f61168f4ea7d6e4044af4f97">getOpcode</a>() != <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28ab3bdd022c4bbd31d548975d4ddee3209">X86ISD::TLSCALL</a> &amp;&amp; <span class="comment">// Fixme</span></div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;      Parent-&gt;<a class="code" href="classllvm_1_1SDNode.html#af0d328f3f61168f4ea7d6e4044af4f97">getOpcode</a>() != <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a1e9c72799b70329f6a0935d8747c59d2">X86ISD::EH_SJLJ_SETJMP</a> &amp;&amp; <span class="comment">// setjmp</span></div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;      Parent-&gt;<a class="code" href="classllvm_1_1SDNode.html#af0d328f3f61168f4ea7d6e4044af4f97">getOpcode</a>() != <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a9dc7fa6ef54f761457981b9852d361f7">X86ISD::EH_SJLJ_LONGJMP</a>) { <span class="comment">// longjmp</span></div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;    <span class="keywordtype">unsigned</span> AddrSpace =</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;      cast&lt;MemSDNode&gt;(Parent)-&gt;getPointerInfo().getAddrSpace();</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    <span class="comment">// AddrSpace 256 -&gt; GS, 257 -&gt; FS.</span></div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    <span class="keywordflow">if</span> (AddrSpace == 256)</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;      AM.Segment = CurDAG-&gt;getRegister(<a class="code" href="namespacellvm_1_1X86II.html#a97dc14052814702ba0e2b14fb14dd02dacdc4d0fa74813b50797e25bab4febe70">X86::GS</a>, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50cab3be25b50efa0289a3c86fd50454b683">MVT::i16</a>);</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    <span class="keywordflow">if</span> (AddrSpace == 257)</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;      AM.Segment = CurDAG-&gt;getRegister(<a class="code" href="namespacellvm_1_1X86II.html#a97dc14052814702ba0e2b14fb14dd02da50aa2061845b3ff4e6e2242d762c6a80">X86::FS</a>, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50cab3be25b50efa0289a3c86fd50454b683">MVT::i16</a>);</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;  }</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;  <span class="keywordflow">if</span> (MatchAddress(N, AM))</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;  <a class="code" href="classllvm_1_1MVT.html">MVT</a> VT = N.<a class="code" href="classllvm_1_1SDValue.html#a8bc8606044f2c3cdb6271c0378e0f9cf">getSimpleValueType</a>();</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;  <span class="keywordflow">if</span> (AM.BaseType == X86ISelAddressMode::RegBase) {</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    <span class="keywordflow">if</span> (!AM.Base_Reg.getNode())</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;      AM.Base_Reg = CurDAG-&gt;getRegister(0, VT);</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;  }</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;  <span class="keywordflow">if</span> (!AM.IndexReg.getNode())</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    AM.IndexReg = CurDAG-&gt;getRegister(0, VT);</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;  getAddressOperands(AM, Base, Scale, Index, Disp, Segment);</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;}</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;<span class="comment">/// SelectScalarSSELoad - Match a scalar SSE load.  In particular, we want to</span></div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;<span class="comment">/// match a load whose top elements are either undef or zeros.  The load flavor</span></div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;<span class="comment">/// is derived from the type of N, which is either v4f32 or v2f64.</span></div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;<span class="comment">/// We also return:</span></div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;<span class="comment">///   PatternChainNode: this is the matched node that has a chain input and</span></div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;<span class="comment">///   output.</span></div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> X86DAGToDAGISel::SelectScalarSSELoad(<a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *Root,</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;                                          <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> N, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Base,</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;                                          <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Scale, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Index,</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;                                          <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Disp, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Segment,</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;                                          <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;PatternNodeWithChain) {</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;  <span class="keywordflow">if</span> (N.<a class="code" href="classllvm_1_1SDValue.html#a0caf6a31d8034336a9ba7791a5f583f1">getOpcode</a>() == <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a576080a08ef1bbab0308eac9d5838f75">ISD::SCALAR_TO_VECTOR</a>) {</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    PatternNodeWithChain = N.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0);</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ISD.html#a15623094a1ed0cd7163dc786e44c87c9">ISD::isNON_EXTLoad</a>(PatternNodeWithChain.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()) &amp;&amp;</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;        PatternNodeWithChain.<a class="code" href="classllvm_1_1SDValue.html#a97b0f24f3e52f030830fca6fbfcbd37d">hasOneUse</a>() &amp;&amp;</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;        IsProfitableToFold(N.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0), N.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>(), Root) &amp;&amp;</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;        IsLegalToFold(N.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0), N.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>(), Root, OptLevel)) {</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;      <a class="code" href="classllvm_1_1LoadSDNode.html">LoadSDNode</a> *<a class="code" href="namespacellvm_1_1A64DB.html#a6fce8157775f3ec93f326b52b0f1e0f5ad61b145eb8cbab18feb1b2e2ce269a7e">LD</a> = cast&lt;LoadSDNode&gt;(PatternNodeWithChain);</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;      <span class="keywordflow">if</span> (!SelectAddr(LD, LD-&gt;<a class="code" href="classllvm_1_1LoadSDNode.html#a3ded48ce66b58b7e7e143991df5dbfae">getBasePtr</a>(), Base, Scale, Index, Disp, Segment))</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    }</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;  }</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;  <span class="comment">// Also handle the case where we explicitly require zeros in the top</span></div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;  <span class="comment">// elements.  This is a vector shuffle from the zero vector.</span></div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;  <span class="keywordflow">if</span> (N.<a class="code" href="classllvm_1_1SDValue.html#a0caf6a31d8034336a9ba7791a5f583f1">getOpcode</a>() == <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a1356801ab44d90ec9c7643ac8ff0770c">X86ISD::VZEXT_MOVL</a> &amp;&amp; N.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#a52753947fce3a01b1c18dd4713c587e8">hasOneUse</a>() &amp;&amp;</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;      <span class="comment">// Check to see if the top elements are all zeros (or bitcast of zeros).</span></div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;      N.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0).<a class="code" href="classllvm_1_1SDValue.html#a0caf6a31d8034336a9ba7791a5f583f1">getOpcode</a>() == <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a576080a08ef1bbab0308eac9d5838f75">ISD::SCALAR_TO_VECTOR</a> &amp;&amp;</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;      N.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0).<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#a52753947fce3a01b1c18dd4713c587e8">hasOneUse</a>() &amp;&amp;</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;      <a class="code" href="namespacellvm_1_1ISD.html#a15623094a1ed0cd7163dc786e44c87c9">ISD::isNON_EXTLoad</a>(N.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0).<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0).<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()) &amp;&amp;</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;      N.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0).<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0).<a class="code" href="classllvm_1_1SDValue.html#a97b0f24f3e52f030830fca6fbfcbd37d">hasOneUse</a>() &amp;&amp;</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;      IsProfitableToFold(N.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0), N.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>(), Root) &amp;&amp;</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;      IsLegalToFold(N.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0), N.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>(), Root, OptLevel)) {</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;    <span class="comment">// Okay, this is a zero extending load.  Fold it.</span></div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    <a class="code" href="classllvm_1_1LoadSDNode.html">LoadSDNode</a> *<a class="code" href="namespacellvm_1_1A64DB.html#a6fce8157775f3ec93f326b52b0f1e0f5ad61b145eb8cbab18feb1b2e2ce269a7e">LD</a> = cast&lt;LoadSDNode&gt;(N.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0).<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0));</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    <span class="keywordflow">if</span> (!SelectAddr(LD, LD-&gt;<a class="code" href="classllvm_1_1LoadSDNode.html#a3ded48ce66b58b7e7e143991df5dbfae">getBasePtr</a>(), Base, Scale, Index, Disp, Segment))</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    PatternNodeWithChain = <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(LD, 0);</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;  }</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;}</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;<span class="keywordtype">bool</span> X86DAGToDAGISel::SelectMOV64Imm32(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> N, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Imm) {</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1ConstantSDNode.html">ConstantSDNode</a> *CN = dyn_cast&lt;ConstantSDNode&gt;(N)) {</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    uint64_t ImmVal = CN-&gt;getZExtValue();</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    <span class="keywordflow">if</span> ((uint32_t)ImmVal != (uint64_t)ImmVal)</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    Imm = CurDAG-&gt;getTargetConstant(ImmVal, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca97f56253625b3fe7b371ce76722de4b8">MVT::i64</a>);</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;  }</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;  <span class="comment">// In static codegen with small code model, we can get the address of a label</span></div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;  <span class="comment">// into a register with &#39;movl&#39;. TableGen has already made sure we&#39;re looking</span></div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;  <span class="comment">// at a label of some kind.</span></div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;  assert(N-&gt;<a class="code" href="classllvm_1_1SDNode.html#af0d328f3f61168f4ea7d6e4044af4f97">getOpcode</a>() == <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28ac52ade4e38c09090c08d423e886cb4b2">X86ISD::Wrapper</a> &amp;&amp;</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;         <span class="stringliteral">&quot;Unexpected node type for MOV32ri64&quot;</span>);</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;  N = N.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0);</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;  <span class="keywordflow">if</span> (N-&gt;getOpcode() != <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a038a7f124b4118456a27a739c03650bf">ISD::TargetConstantPool</a> &amp;&amp;</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;      N-&gt;getOpcode() != <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a603c0651ff8c3a929c5e1d8b9a8f14cb">ISD::TargetJumpTable</a> &amp;&amp;</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;      N-&gt;getOpcode() != <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a87b8176af163ee944af127081d24f4a2">ISD::TargetGlobalAddress</a> &amp;&amp;</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;      N-&gt;getOpcode() != <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a59b314018a929255951f01f8daaae72f">ISD::TargetExternalSymbol</a> &amp;&amp;</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;      N-&gt;getOpcode() != <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a1b7eba375863a0e80549eb1a782c5683">ISD::TargetBlockAddress</a>)</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;  Imm = <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>;</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1SystemZISD.html#a9a3c050e4bfe8d0d09d74c979f5bb121a68ace50a32835aa0562cf8f9694ba510">TM</a>.getCodeModel() == <a class="code" href="namespacellvm_1_1CodeModel.html#afc59396a9e5809fc92938e203d91a8dfaa2554ef60dc191c6005ba9eecbc9aea0">CodeModel::Small</a>;</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;}</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;<span class="keywordtype">bool</span> X86DAGToDAGISel::SelectLEA64_32Addr(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> N, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Base,</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;                                         <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Scale, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Index,</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;                                         <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Disp, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Segment) {</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;  <span class="keywordflow">if</span> (!SelectLEAAddr(N, Base, Scale, Index, Disp, Segment))</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;  <a class="code" href="classllvm_1_1SDLoc.html">SDLoc</a> DL(N);</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;  <a class="code" href="classllvm_1_1RegisterSDNode.html">RegisterSDNode</a> *<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fa3075a56e6cfcf4ac3328185fa11201b4">RN</a> = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1RegisterSDNode.html">RegisterSDNode</a>&gt;(Base);</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;  <span class="keywordflow">if</span> (RN &amp;&amp; RN-&gt;<a class="code" href="classllvm_1_1RegisterSDNode.html#a32d3064d680bb98aeec9cabf85995d31">getReg</a>() == 0)</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;    Base = CurDAG-&gt;getRegister(0, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca97f56253625b3fe7b371ce76722de4b8">MVT::i64</a>);</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Base.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>() == <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a> &amp;&amp; !<a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1FrameIndexSDNode.html">FrameIndexSDNode</a>&gt;(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>)) {</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;    <span class="comment">// Base could already be %rip, particularly in the x32 ABI.</span></div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    Base = <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(CurDAG-&gt;getMachineNode(</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;                       <a class="code" href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8a9a1c30a208eb023907075d28e7ab2f19">TargetOpcode::SUBREG_TO_REG</a>, DL, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca97f56253625b3fe7b371ce76722de4b8">MVT::i64</a>,</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;                       CurDAG-&gt;getTargetConstant(0, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca97f56253625b3fe7b371ce76722de4b8">MVT::i64</a>),</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;                       Base,</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;                       CurDAG-&gt;getTargetConstant(X86::sub_32bit, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>)),</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;                   0);</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;  }</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;  RN = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1RegisterSDNode.html">RegisterSDNode</a>&gt;(Index);</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;  <span class="keywordflow">if</span> (RN &amp;&amp; RN-&gt;<a class="code" href="classllvm_1_1RegisterSDNode.html#a32d3064d680bb98aeec9cabf85995d31">getReg</a>() == 0)</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    Index = CurDAG-&gt;getRegister(0, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca97f56253625b3fe7b371ce76722de4b8">MVT::i64</a>);</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;  <span class="keywordflow">else</span> {</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    assert(Index.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>() == <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a> &amp;&amp;</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;           <span class="stringliteral">&quot;Expect to be extending 32-bit registers for use in LEA&quot;</span>);</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    Index = <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(CurDAG-&gt;getMachineNode(</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;                        <a class="code" href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8a9a1c30a208eb023907075d28e7ab2f19">TargetOpcode::SUBREG_TO_REG</a>, DL, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca97f56253625b3fe7b371ce76722de4b8">MVT::i64</a>,</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;                        CurDAG-&gt;getTargetConstant(0, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca97f56253625b3fe7b371ce76722de4b8">MVT::i64</a>),</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;                        Index,</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;                        CurDAG-&gt;getTargetConstant(X86::sub_32bit, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>)),</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;                    0);</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;  }</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;}</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;<span class="comment">/// SelectLEAAddr - it calls SelectAddr and determines if the maximal addressing</span></div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;<span class="comment">/// mode it matches can be cost effectively emitted as an LEA instruction.</span></div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> X86DAGToDAGISel::SelectLEAAddr(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> N,</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;                                    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Base, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Scale,</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;                                    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Index, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Disp,</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;                                    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Segment) {</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;  X86ISelAddressMode AM;</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;  <span class="comment">// Set AM.Segment to prevent MatchAddress from using one. LEA doesn&#39;t support</span></div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;  <span class="comment">// segments.</span></div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Copy = AM.Segment;</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> <a class="code" href="classT.html">T</a> = CurDAG-&gt;getRegister(0, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>);</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;  AM.Segment = <a class="code" href="Mips16ISelLowering_8cpp.html#a0acb682b8260ab1c60b918599864e2e5">T</a>;</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;  <span class="keywordflow">if</span> (MatchAddress(N, AM))</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;  assert (T == AM.Segment);</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;  AM.Segment = Copy;</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;  <a class="code" href="classllvm_1_1MVT.html">MVT</a> VT = N.<a class="code" href="classllvm_1_1SDValue.html#a8bc8606044f2c3cdb6271c0378e0f9cf">getSimpleValueType</a>();</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;  <span class="keywordtype">unsigned</span> Complexity = 0;</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;  <span class="keywordflow">if</span> (AM.BaseType == X86ISelAddressMode::RegBase)</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    <span class="keywordflow">if</span> (AM.Base_Reg.getNode())</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;      Complexity = 1;</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;      AM.Base_Reg = CurDAG-&gt;getRegister(0, VT);</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (AM.BaseType == X86ISelAddressMode::FrameIndexBase)</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;    Complexity = 4;</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;  <span class="keywordflow">if</span> (AM.IndexReg.getNode())</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;    Complexity++;</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    AM.IndexReg = CurDAG-&gt;getRegister(0, VT);</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;  <span class="comment">// Don&#39;t match just leal(,%reg,2). It&#39;s cheaper to do addl %reg, %reg, or with</span></div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;  <span class="comment">// a simple shift.</span></div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;  <span class="keywordflow">if</span> (AM.Scale &gt; 1)</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    Complexity++;</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;  <span class="comment">// FIXME: We are artificially lowering the criteria to turn ADD %reg, $GA</span></div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;  <span class="comment">// to a LEA. This is determined with some expermentation but is by no means</span></div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;  <span class="comment">// optimal (especially for code size consideration). LEA is nice because of</span></div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;  <span class="comment">// its three-address nature. Tweak the cost function again when we can run</span></div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;  <span class="comment">// convertToThreeAddress() at register allocation time.</span></div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;  <span class="keywordflow">if</span> (AM.hasSymbolicDisplacement()) {</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;    <span class="comment">// For X86-64, we should always use lea to materialize RIP relative</span></div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    <span class="comment">// addresses.</span></div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    <span class="keywordflow">if</span> (Subtarget-&gt;<a class="code" href="classllvm_1_1X86Subtarget.html#a5314399c907d77b514ec837e8527a9de">is64Bit</a>())</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;      Complexity = 4;</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;      Complexity += 2;</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;  }</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;  <span class="keywordflow">if</span> (AM.Disp &amp;&amp; (AM.Base_Reg.getNode() || AM.IndexReg.getNode()))</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    Complexity++;</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;  <span class="comment">// If it isn&#39;t worth using an LEA, reject it.</span></div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;  <span class="keywordflow">if</span> (Complexity &lt;= 2)</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;  getAddressOperands(AM, Base, Scale, Index, Disp, Segment);</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;}</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;<span class="comment">/// SelectTLSADDRAddr - This is only run on TargetGlobalTLSAddress nodes.</span></div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> X86DAGToDAGISel::SelectTLSADDRAddr(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a> N, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Base,</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;                                        <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Scale, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Index,</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;                                        <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Disp, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Segment) {</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;  assert(N.<a class="code" href="classllvm_1_1SDValue.html#a0caf6a31d8034336a9ba7791a5f583f1">getOpcode</a>() == <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110afc9ad7857b7faf49dcde3dcf434e22a6">ISD::TargetGlobalTLSAddress</a>);</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1GlobalAddressSDNode.html">GlobalAddressSDNode</a> *GA = cast&lt;GlobalAddressSDNode&gt;(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;  X86ISelAddressMode AM;</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;  AM.GV = GA-&gt;getGlobal();</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;  AM.Disp += GA-&gt;getOffset();</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;  AM.Base_Reg = CurDAG-&gt;getRegister(0, N.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>());</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;  AM.SymbolFlags = GA-&gt;getTargetFlags();</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;  <span class="keywordflow">if</span> (N.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>() == <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>) {</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    AM.Scale = 1;</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;    AM.IndexReg = CurDAG-&gt;getRegister(<a class="code" href="README-SSE_8txt.html#af63bcf34c820f95f096676adf8358de4">X86::EBX</a>, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>);</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;    AM.IndexReg = CurDAG-&gt;getRegister(0, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca97f56253625b3fe7b371ce76722de4b8">MVT::i64</a>);</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;  }</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;  getAddressOperands(AM, Base, Scale, Index, Disp, Segment);</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;}</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;<span class="keywordtype">bool</span> X86DAGToDAGISel::TryFoldLoad(<a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> N,</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;                                  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Base, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Scale,</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;                                  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Index, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Disp,</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;                                  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Segment) {</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1ISD.html#a15623094a1ed0cd7163dc786e44c87c9">ISD::isNON_EXTLoad</a>(N.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()) ||</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;      !IsProfitableToFold(N, P, P) ||</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;      !IsLegalToFold(N, P, P, OptLevel))</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;  <span class="keywordflow">return</span> SelectAddr(N.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>(),</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;                    N.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(1), Base, Scale, Index, Disp, Segment);</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;}</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;<span class="comment">/// getGlobalBaseReg - Return an SDNode that returns the value of</span></div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;<span class="comment">/// the global base register. Output instructions required to</span></div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;<span class="comment">/// initialize the global base register, if necessary.</span></div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *X86DAGToDAGISel::getGlobalBaseReg() {</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1PPCISD.html#a69ad64696d1df3be05f01dfb67f5bc66a9e4500d93af7f70fdff992d9d748559d">GlobalBaseReg</a> = getInstrInfo()-&gt;getGlobalBaseReg(MF);</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;  <span class="keywordflow">return</span> CurDAG-&gt;getRegister(GlobalBaseReg,</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;                             getTargetLowering()-&gt;getPointerTy()).getNode();</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;}</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;<a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *X86DAGToDAGISel::SelectAtomic64(<a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *Node, <span class="keywordtype">unsigned</span> Opc) {</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Chain = Node-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(0);</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> In1 = Node-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(1);</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> In2L = Node-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(2);</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> In2H = Node-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(3);</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Tmp0, Tmp1, Tmp2, Tmp3, Tmp4;</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;  <span class="keywordflow">if</span> (!SelectAddr(Node, In1, Tmp0, Tmp1, Tmp2, Tmp3, Tmp4))</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;  <a class="code" href="classllvm_1_1MachineMemOperand.html">MachineSDNode::mmo_iterator</a> MemOp = MF-&gt;allocateMemRefsArray(1);</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;  MemOp[0] = cast&lt;MemSDNode&gt;(Node)-&gt;getMemOperand();</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Ops[] = { Tmp0, Tmp1, Tmp2, Tmp3, Tmp4, In2L, In2H, Chain};</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;  <a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *ResNode = CurDAG-&gt;getMachineNode(Opc, <a class="code" href="classllvm_1_1SDLoc.html">SDLoc</a>(Node),</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;                                           <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca62a222acce6360abd2726719fabc2797">MVT::Other</a>, Ops);</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;  cast&lt;MachineSDNode&gt;(ResNode)-&gt;setMemRefs(MemOp, MemOp + 1);</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;  <span class="keywordflow">return</span> ResNode;</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;}</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;<span class="comment">/// Atomic opcode table</span></div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01582"></a><span class="lineno"><a class="line" href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9"> 1582</a></span>&#160;<span class="comment"></span><span class="keyword">enum</span> <a class="code" href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9">AtomicOpc</a> {</div><div class="line"><a name="l01583"></a><span class="lineno"><a class="line" href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9acfcf145f2788bf340ff3f3098bc54909"> 1583</a></span>&#160;  <a class="code" href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9acfcf145f2788bf340ff3f3098bc54909">ADD</a>,</div><div class="line"><a name="l01584"></a><span class="lineno"><a class="line" href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9a12b733d4941495e86811fe6ceeeff9da"> 1584</a></span>&#160;  <a class="code" href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9a12b733d4941495e86811fe6ceeeff9da">SUB</a>,</div><div class="line"><a name="l01585"></a><span class="lineno"><a class="line" href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9a7967e4061665d0e072a0c3bffe00ac6d"> 1585</a></span>&#160;  <a class="code" href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9a7967e4061665d0e072a0c3bffe00ac6d">INC</a>,</div><div class="line"><a name="l01586"></a><span class="lineno"><a class="line" href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9a851043138f8ef49c6eeea75760b69481"> 1586</a></span>&#160;  <a class="code" href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9a851043138f8ef49c6eeea75760b69481">DEC</a>,</div><div class="line"><a name="l01587"></a><span class="lineno"><a class="line" href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9a96727447c0ad447987df1c6415aef074"> 1587</a></span>&#160;  <a class="code" href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9a96727447c0ad447987df1c6415aef074">OR</a>,</div><div class="line"><a name="l01588"></a><span class="lineno"><a class="line" href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9a865555c9f2e0458a7078486aa1b3254f"> 1588</a></span>&#160;  <a class="code" href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9a865555c9f2e0458a7078486aa1b3254f">AND</a>,</div><div class="line"><a name="l01589"></a><span class="lineno"><a class="line" href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9ac62338ffb5de22369c75caa565b5da1a"> 1589</a></span>&#160;  <a class="code" href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9ac62338ffb5de22369c75caa565b5da1a">XOR</a>,</div><div class="line"><a name="l01590"></a><span class="lineno"><a class="line" href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9a443b2be81062f015608a765700db66ec"> 1590</a></span>&#160;  <a class="code" href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9a443b2be81062f015608a765700db66ec">AtomicOpcEnd</a></div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;};</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;</div><div class="line"><a name="l01593"></a><span class="lineno"><a class="line" href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8a"> 1593</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8a">AtomicSz</a> {</div><div class="line"><a name="l01594"></a><span class="lineno"><a class="line" href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa0d2e913e2fd86f888d768aaea3b4f20c"> 1594</a></span>&#160;  <a class="code" href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa0d2e913e2fd86f888d768aaea3b4f20c">ConstantI8</a>,</div><div class="line"><a name="l01595"></a><span class="lineno"><a class="line" href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa8842984357dc9c9d3c441d1529f6b1a7"> 1595</a></span>&#160;  <a class="code" href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa8842984357dc9c9d3c441d1529f6b1a7">I8</a>,</div><div class="line"><a name="l01596"></a><span class="lineno"><a class="line" href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa67941b74249a74c74755ca8dd31df788"> 1596</a></span>&#160;  <a class="code" href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa67941b74249a74c74755ca8dd31df788">SextConstantI16</a>,</div><div class="line"><a name="l01597"></a><span class="lineno"><a class="line" href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa730abdb44c8eead5365e1b6830c58154"> 1597</a></span>&#160;  <a class="code" href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa730abdb44c8eead5365e1b6830c58154">ConstantI16</a>,</div><div class="line"><a name="l01598"></a><span class="lineno"><a class="line" href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa8a57e45c133b807fad1be007b127287f"> 1598</a></span>&#160;  <a class="code" href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa8a57e45c133b807fad1be007b127287f">I16</a>,</div><div class="line"><a name="l01599"></a><span class="lineno"><a class="line" href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa250f0ba0c9ddd9735481a1a7758a28b2"> 1599</a></span>&#160;  <a class="code" href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa250f0ba0c9ddd9735481a1a7758a28b2">SextConstantI32</a>,</div><div class="line"><a name="l01600"></a><span class="lineno"><a class="line" href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa459e82537e7b8715f12bf278fd58bde1"> 1600</a></span>&#160;  <a class="code" href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa459e82537e7b8715f12bf278fd58bde1">ConstantI32</a>,</div><div class="line"><a name="l01601"></a><span class="lineno"><a class="line" href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa68744fefeb088e8bae7ec95a0c0532ac"> 1601</a></span>&#160;  <a class="code" href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa68744fefeb088e8bae7ec95a0c0532ac">I32</a>,</div><div class="line"><a name="l01602"></a><span class="lineno"><a class="line" href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa755fb6cf65f9f9fd22e67304f08ba90c"> 1602</a></span>&#160;  <a class="code" href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa755fb6cf65f9f9fd22e67304f08ba90c">SextConstantI64</a>,</div><div class="line"><a name="l01603"></a><span class="lineno"><a class="line" href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa448d3c03c5d271a0002d1b4b2f3e0e89"> 1603</a></span>&#160;  <a class="code" href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa448d3c03c5d271a0002d1b4b2f3e0e89">ConstantI64</a>,</div><div class="line"><a name="l01604"></a><span class="lineno"><a class="line" href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aaa65eb6ad08456c6c3af62f1574ef3736"> 1604</a></span>&#160;  <a class="code" href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aaa65eb6ad08456c6c3af62f1574ef3736">I64</a>,</div><div class="line"><a name="l01605"></a><span class="lineno"><a class="line" href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa3eb390ee21f43d1995b9b46118a09677"> 1605</a></span>&#160;  <a class="code" href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa3eb390ee21f43d1995b9b46118a09677">AtomicSzEnd</a></div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;};</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;</div><div class="line"><a name="l01608"></a><span class="lineno"><a class="line" href="X86ISelDAGToDAG_8cpp.html#ae86d1f5121bd42a40218d95cfb3a3856"> 1608</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> uint16_t <a class="code" href="X86ISelDAGToDAG_8cpp.html#ae86d1f5121bd42a40218d95cfb3a3856">AtomicOpcTbl</a>[<a class="code" href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9a443b2be81062f015608a765700db66ec">AtomicOpcEnd</a>][<a class="code" href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa3eb390ee21f43d1995b9b46118a09677">AtomicSzEnd</a>] = {</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;  {</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;    X86::LOCK_ADD8mi,</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;    X86::LOCK_ADD8mr,</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;    X86::LOCK_ADD16mi8,</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;    X86::LOCK_ADD16mi,</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;    X86::LOCK_ADD16mr,</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;    X86::LOCK_ADD32mi8,</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;    X86::LOCK_ADD32mi,</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    X86::LOCK_ADD32mr,</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    X86::LOCK_ADD64mi8,</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;    X86::LOCK_ADD64mi32,</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;    X86::LOCK_ADD64mr,</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;  },</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;  {</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;    X86::LOCK_SUB8mi,</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;    X86::LOCK_SUB8mr,</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;    X86::LOCK_SUB16mi8,</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    X86::LOCK_SUB16mi,</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    X86::LOCK_SUB16mr,</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    X86::LOCK_SUB32mi8,</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;    X86::LOCK_SUB32mi,</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;    X86::LOCK_SUB32mr,</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;    X86::LOCK_SUB64mi8,</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    X86::LOCK_SUB64mi32,</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    X86::LOCK_SUB64mr,</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;  },</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;  {</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    0,</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    X86::LOCK_INC8m,</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;    0,</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;    0,</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;    X86::LOCK_INC16m,</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    0,</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;    0,</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    X86::LOCK_INC32m,</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;    0,</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;    0,</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    X86::LOCK_INC64m,</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;  },</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;  {</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;    0,</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;    X86::LOCK_DEC8m,</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    0,</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    0,</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;    X86::LOCK_DEC16m,</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    0,</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    0,</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;    X86::LOCK_DEC32m,</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;    0,</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;    0,</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;    X86::LOCK_DEC64m,</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;  },</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;  {</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;    X86::LOCK_OR8mi,</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;    X86::LOCK_OR8mr,</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;    X86::LOCK_OR16mi8,</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;    X86::LOCK_OR16mi,</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    X86::LOCK_OR16mr,</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;    X86::LOCK_OR32mi8,</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    X86::LOCK_OR32mi,</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;    X86::LOCK_OR32mr,</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    X86::LOCK_OR64mi8,</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;    X86::LOCK_OR64mi32,</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;    X86::LOCK_OR64mr,</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;  },</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;  {</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;    X86::LOCK_AND8mi,</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;    X86::LOCK_AND8mr,</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;    X86::LOCK_AND16mi8,</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;    X86::LOCK_AND16mi,</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;    X86::LOCK_AND16mr,</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;    X86::LOCK_AND32mi8,</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;    X86::LOCK_AND32mi,</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;    X86::LOCK_AND32mr,</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;    X86::LOCK_AND64mi8,</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;    X86::LOCK_AND64mi32,</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    X86::LOCK_AND64mr,</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;  },</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;  {</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    X86::LOCK_XOR8mi,</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;    X86::LOCK_XOR8mr,</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;    X86::LOCK_XOR16mi8,</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    X86::LOCK_XOR16mi,</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;    X86::LOCK_XOR16mr,</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;    X86::LOCK_XOR32mi8,</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;    X86::LOCK_XOR32mi,</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;    X86::LOCK_XOR32mr,</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;    X86::LOCK_XOR64mi8,</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;    X86::LOCK_XOR64mi32,</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;    X86::LOCK_XOR64mr,</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;  }</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;};</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;<span class="comment">// Return the target constant operand for atomic-load-op and do simple</span></div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;<span class="comment">// translations, such as from atomic-load-add to lock-sub. The return value is</span></div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;<span class="comment">// one of the following 3 cases:</span></div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;<span class="comment">// + target-constant, the operand could be supported as a target constant.</span></div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;<span class="comment">// + empty, the operand is not needed any more with the new op selected.</span></div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;<span class="comment">// + non-empty, otherwise.</span></div><div class="line"><a name="l01708"></a><span class="lineno"><a class="line" href="X86ISelDAGToDAG_8cpp.html#a38f0f59bc59e3ebde73b00942cbafbc1"> 1708</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> <a class="code" href="X86ISelDAGToDAG_8cpp.html#a38f0f59bc59e3ebde73b00942cbafbc1">getAtomicLoadArithTargetConstant</a>(<a class="code" href="classllvm_1_1SelectionDAG.html">SelectionDAG</a> *CurDAG,</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;                                                <a class="code" href="classllvm_1_1SDLoc.html">SDLoc</a> dl,</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;                                                <span class="keyword">enum</span> <a class="code" href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9">AtomicOpc</a> &amp;Op, <a class="code" href="classllvm_1_1MVT.html">MVT</a> NVT,</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;                                                <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Val) {</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantSDNode.html">ConstantSDNode</a> *CN = dyn_cast&lt;ConstantSDNode&gt;(Val)) {</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;    int64_t CNVal = CN-&gt;getSExtValue();</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;    <span class="comment">// Quit if not 32-bit imm.</span></div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    <span class="keywordflow">if</span> ((int32_t)CNVal != CNVal)</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;      <span class="keywordflow">return</span> Val;</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    <span class="comment">// For atomic-load-add, we could do some optimizations.</span></div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    <span class="keywordflow">if</span> (Op == <a class="code" href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9acfcf145f2788bf340ff3f3098bc54909">ADD</a>) {</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;      <span class="comment">// Translate to INC/DEC if ADD by 1 or -1.</span></div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;      <span class="keywordflow">if</span> ((CNVal == 1) || (CNVal == -1)) {</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;        Op = (CNVal == 1) ? <a class="code" href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9a7967e4061665d0e072a0c3bffe00ac6d">INC</a> : <a class="code" href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9a851043138f8ef49c6eeea75760b69481">DEC</a>;</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;        <span class="comment">// No more constant operand after being translated into INC/DEC.</span></div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>();</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;      }</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;      <span class="comment">// Translate to SUB if ADD by negative value.</span></div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;      <span class="keywordflow">if</span> (CNVal &lt; 0) {</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;        Op = <a class="code" href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9a12b733d4941495e86811fe6ceeeff9da">SUB</a>;</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;        CNVal = -CNVal;</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;      }</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;    }</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;    <span class="keywordflow">return</span> CurDAG-&gt;<a class="code" href="classllvm_1_1SelectionDAG.html#ace5bddfde14abf966790e8438e88d6d2">getTargetConstant</a>(CNVal, NVT);</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;  }</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;  <span class="comment">// If the value operand is single-used, try to optimize it.</span></div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;  <span class="keywordflow">if</span> (Op == <a class="code" href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9acfcf145f2788bf340ff3f3098bc54909">ADD</a> &amp;&amp; Val.<a class="code" href="classllvm_1_1SDValue.html#a97b0f24f3e52f030830fca6fbfcbd37d">hasOneUse</a>()) {</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;    <span class="comment">// Translate (atomic-load-add ptr (sub 0 x)) back to (lock-sub x).</span></div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;    <span class="keywordflow">if</span> (Val.<a class="code" href="classllvm_1_1SDValue.html#a0caf6a31d8034336a9ba7791a5f583f1">getOpcode</a>() == <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a> &amp;&amp; <a class="code" href="namespacellvm_1_1X86.html#a43e102a1c33f2dffc750026a05828f52">X86::isZeroNode</a>(Val.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0))) {</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;      Op = <a class="code" href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9a12b733d4941495e86811fe6ceeeff9da">SUB</a>;</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;      <span class="keywordflow">return</span> Val.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(1);</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;    }</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;    <span class="comment">// A special case for i16, which needs truncating as, in most cases, it&#39;s</span></div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;    <span class="comment">// promoted to i32. We will translate</span></div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;    <span class="comment">// (atomic-load-add (truncate (sub 0 x))) to (lock-sub (EXTRACT_SUBREG x))</span></div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;    <span class="keywordflow">if</span> (Val.<a class="code" href="classllvm_1_1SDValue.html#a0caf6a31d8034336a9ba7791a5f583f1">getOpcode</a>() == <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a> &amp;&amp; NVT == <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50cab3be25b50efa0289a3c86fd50454b683">MVT::i16</a> &amp;&amp;</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;        Val.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0).<a class="code" href="classllvm_1_1SDValue.html#a0caf6a31d8034336a9ba7791a5f583f1">getOpcode</a>() == <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a> &amp;&amp;</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;        <a class="code" href="namespacellvm_1_1X86.html#a43e102a1c33f2dffc750026a05828f52">X86::isZeroNode</a>(Val.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0).<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0))) {</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;      Op = <a class="code" href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9a12b733d4941495e86811fe6ceeeff9da">SUB</a>;</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;      Val = Val.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0);</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;      <span class="keywordflow">return</span> CurDAG-&gt;<a class="code" href="classllvm_1_1SelectionDAG.html#a70d70d915a2b3bb0b4d1b0d0a456d0a2">getTargetExtractSubreg</a>(X86::sub_16bit, dl, NVT,</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;                                            Val.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(1));</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;    }</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;  }</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;  <span class="keywordflow">return</span> Val;</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;}</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;<a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *X86DAGToDAGISel::SelectAtomicLoadArith(<a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *Node, <a class="code" href="classllvm_1_1MVT.html">MVT</a> NVT) {</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;  <span class="keywordflow">if</span> (Node-&gt;<a class="code" href="classllvm_1_1SDNode.html#ae4cb676e77b9f238058c70faa609a5d7">hasAnyUseOfValue</a>(0))</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;  <a class="code" href="classllvm_1_1SDLoc.html">SDLoc</a> dl(Node);</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;  <span class="comment">// Optimize common patterns for __sync_or_and_fetch and similar arith</span></div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;  <span class="comment">// operations where the result is not used. This allows us to use the &quot;lock&quot;</span></div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;  <span class="comment">// version of the arithmetic instruction.</span></div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Chain = Node-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(0);</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Ptr = Node-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(1);</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Val = Node-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(2);</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Tmp0, Tmp1, Tmp2, Tmp3, Tmp4;</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;  <span class="keywordflow">if</span> (!SelectAddr(Node, Ptr, Tmp0, Tmp1, Tmp2, Tmp3, Tmp4))</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;  <span class="comment">// Which index into the table.</span></div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;  <span class="keyword">enum</span> <a class="code" href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9">AtomicOpc</a> Op;</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;  <span class="keywordflow">switch</span> (Node-&gt;<a class="code" href="classllvm_1_1SDNode.html#af0d328f3f61168f4ea7d6e4044af4f97">getOpcode</a>()) {</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a4112a866197a97a70bdc78ef92c79b4c">ISD::ATOMIC_LOAD_OR</a>:</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;      Op = <a class="code" href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9a96727447c0ad447987df1c6415aef074">OR</a>;</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a905925a49cdc6b4a6017d215820dad30">ISD::ATOMIC_LOAD_AND</a>:</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;      Op = <a class="code" href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9a865555c9f2e0458a7078486aa1b3254f">AND</a>;</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a428ec1341b34eafa63518914e7f5ddf0">ISD::ATOMIC_LOAD_XOR</a>:</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;      Op = <a class="code" href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9ac62338ffb5de22369c75caa565b5da1a">XOR</a>;</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110abf5f612de1a25451c9a0c33d77bf3e74">ISD::ATOMIC_LOAD_ADD</a>:</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;      Op = <a class="code" href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9acfcf145f2788bf340ff3f3098bc54909">ADD</a>;</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;  }</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;  Val = <a class="code" href="X86ISelDAGToDAG_8cpp.html#a38f0f59bc59e3ebde73b00942cbafbc1">getAtomicLoadArithTargetConstant</a>(CurDAG, dl, Op, NVT, Val);</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;  <span class="keywordtype">bool</span> isUnOp = !Val.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>();</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;  <span class="keywordtype">bool</span> isCN = Val.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>() &amp;&amp; (Val.<a class="code" href="classllvm_1_1SDValue.html#a0caf6a31d8034336a9ba7791a5f583f1">getOpcode</a>() == <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ac479e53ca98903b1028ec80e12fb0af8">ISD::TargetConstant</a>);</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;  <span class="keywordtype">unsigned</span> Opc = 0;</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;  <span class="keywordflow">switch</span> (NVT.<a class="code" href="classllvm_1_1MVT.html#a27bda7d8e8e4f0337650a892f3c9b46a">SimpleTy</a>) {</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;    <span class="keywordflow">default</span>: <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50caf777e086e32f60c0c87b460964eae7d0">MVT::i8</a>:</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;      <span class="keywordflow">if</span> (isCN)</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;        Opc = AtomicOpcTbl[Op][<a class="code" href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa0d2e913e2fd86f888d768aaea3b4f20c">ConstantI8</a>];</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;        Opc = AtomicOpcTbl[Op][<a class="code" href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa8842984357dc9c9d3c441d1529f6b1a7">I8</a>];</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50cab3be25b50efa0289a3c86fd50454b683">MVT::i16</a>:</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;      <span class="keywordflow">if</span> (isCN) {</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;        <span class="keywordflow">if</span> (immSext8(Val.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()))</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;          Opc = AtomicOpcTbl[Op][<a class="code" href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa67941b74249a74c74755ca8dd31df788">SextConstantI16</a>];</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;          Opc = AtomicOpcTbl[Op][<a class="code" href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa730abdb44c8eead5365e1b6830c58154">ConstantI16</a>];</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;      } <span class="keywordflow">else</span></div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;        Opc = AtomicOpcTbl[Op][<a class="code" href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa8a57e45c133b807fad1be007b127287f">I16</a>];</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>:</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;      <span class="keywordflow">if</span> (isCN) {</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;        <span class="keywordflow">if</span> (immSext8(Val.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()))</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;          Opc = AtomicOpcTbl[Op][<a class="code" href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa250f0ba0c9ddd9735481a1a7758a28b2">SextConstantI32</a>];</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;          Opc = AtomicOpcTbl[Op][<a class="code" href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa459e82537e7b8715f12bf278fd58bde1">ConstantI32</a>];</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;      } <span class="keywordflow">else</span></div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;        Opc = AtomicOpcTbl[Op][<a class="code" href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa68744fefeb088e8bae7ec95a0c0532ac">I32</a>];</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca97f56253625b3fe7b371ce76722de4b8">MVT::i64</a>:</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;      Opc = AtomicOpcTbl[Op][<a class="code" href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aaa65eb6ad08456c6c3af62f1574ef3736">I64</a>];</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;      <span class="keywordflow">if</span> (isCN) {</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;        <span class="keywordflow">if</span> (immSext8(Val.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()))</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;          Opc = AtomicOpcTbl[Op][<a class="code" href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa755fb6cf65f9f9fd22e67304f08ba90c">SextConstantI64</a>];</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (i64immSExt32(Val.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()))</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;          Opc = AtomicOpcTbl[Op][<a class="code" href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa448d3c03c5d271a0002d1b4b2f3e0e89">ConstantI64</a>];</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;      }</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;  }</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;  assert(Opc != 0 &amp;&amp; <span class="stringliteral">&quot;Invalid arith lock transform!&quot;</span>);</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> <a class="code" href="namespacellvm_1_1AArch64ISD.html#a246d89cb58f606179b1435937830bbdca84e96c468affe3b1fd3076b4fc5d063e">Ret</a>;</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> <a class="code" href="namespacellvm_1_1RegState.html#a079b254e749130fbe5d740f314ca92daab502f975742e9bff6d6dd7b49439b806">Undef</a> = <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(CurDAG-&gt;getMachineNode(<a class="code" href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8a5a91c23866687baf221ce86ff6fde01f">TargetOpcode::IMPLICIT_DEF</a>,</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;                                                 dl, NVT), 0);</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;  <a class="code" href="classllvm_1_1MachineMemOperand.html">MachineSDNode::mmo_iterator</a> MemOp = MF-&gt;allocateMemRefsArray(1);</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;  MemOp[0] = cast&lt;MemSDNode&gt;(Node)-&gt;getMemOperand();</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;  <span class="keywordflow">if</span> (isUnOp) {</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Ops[] = { Tmp0, Tmp1, Tmp2, Tmp3, Tmp4, Chain };</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;    Ret = <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(CurDAG-&gt;getMachineNode(Opc, dl, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca62a222acce6360abd2726719fabc2797">MVT::Other</a>, Ops), 0);</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Ops[] = { Tmp0, Tmp1, Tmp2, Tmp3, Tmp4, Val, Chain };</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;    Ret = <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(CurDAG-&gt;getMachineNode(Opc, dl, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca62a222acce6360abd2726719fabc2797">MVT::Other</a>, Ops), 0);</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;  }</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;  cast&lt;MachineSDNode&gt;(<a class="code" href="namespacellvm_1_1AArch64ISD.html#a246d89cb58f606179b1435937830bbdca84e96c468affe3b1fd3076b4fc5d063e">Ret</a>)-&gt;setMemRefs(MemOp, MemOp + 1);</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> RetVals[] = { <a class="code" href="namespacellvm_1_1RegState.html#a079b254e749130fbe5d740f314ca92daab502f975742e9bff6d6dd7b49439b806">Undef</a>, Ret };</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;  <span class="keywordflow">return</span> CurDAG-&gt;getMergeValues(RetVals, 2, dl).getNode();</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;}</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;<span class="comment">/// HasNoSignedComparisonUses - Test whether the given X86ISD::CMP node has</span></div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;<span class="comment">/// any uses which require the SF or OF bits to be accurate.</span></div><div class="line"><a name="l01855"></a><span class="lineno"><a class="line" href="X86ISelDAGToDAG_8cpp.html#a8ad82d103604e27f8e067e0edfce5347"> 1855</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="X86ISelDAGToDAG_8cpp.html#a8ad82d103604e27f8e067e0edfce5347">HasNoSignedComparisonUses</a>(<a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *N) {</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;  <span class="comment">// Examine each user of the node.</span></div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SDNode_1_1use__iterator.html">SDNode::use_iterator</a> UI = N-&gt;<a class="code" href="classllvm_1_1SDNode.html#a8810bf428dcf84d48f39c8f5ba9a8c94">use_begin</a>(),</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;         UE = N-&gt;<a class="code" href="classllvm_1_1SDNode.html#aef02f2c1bd12936a80611b134b24a47d">use_end</a>(); UI != UE; ++UI) {</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;    <span class="comment">// Only examine CopyToReg uses.</span></div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;    <span class="keywordflow">if</span> (UI-&gt;getOpcode() != <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a93bc27ca4d9e211c54b0d9efb660f080">ISD::CopyToReg</a>)</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;    <span class="comment">// Only examine CopyToReg uses that copy to EFLAGS.</span></div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;    <span class="keywordflow">if</span> (cast&lt;RegisterSDNode&gt;(UI-&gt;getOperand(1))-&gt;<a class="code" href="AArch64Disassembler_8cpp.html#a30bccd0ebacd9892c243f7bd520e4aa0">getReg</a>() !=</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;          X86::EFLAGS)</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;    <span class="comment">// Examine each user of the CopyToReg use.</span></div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SDNode_1_1use__iterator.html">SDNode::use_iterator</a> FlagUI = UI-&gt;<a class="code" href="classllvm_1_1SDNode.html#a8810bf428dcf84d48f39c8f5ba9a8c94">use_begin</a>(),</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;           FlagUE = UI-&gt;<a class="code" href="classllvm_1_1SDNode.html#aef02f2c1bd12936a80611b134b24a47d">use_end</a>(); FlagUI != FlagUE; ++FlagUI) {</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;      <span class="comment">// Only examine the Flag result.</span></div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;      <span class="keywordflow">if</span> (FlagUI.getUse().getResNo() != 1) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;      <span class="comment">// Anything unusual: assume conservatively.</span></div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;      <span class="keywordflow">if</span> (!FlagUI-&gt;isMachineOpcode()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;      <span class="comment">// Examine the opcode of the user.</span></div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;      <span class="keywordflow">switch</span> (FlagUI-&gt;getMachineOpcode()) {</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;      <span class="comment">// These comparisons don&#39;t treat the most significant bit specially.</span></div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;      <span class="keywordflow">case</span> X86::SETAr: <span class="keywordflow">case</span> X86::SETAEr: <span class="keywordflow">case</span> X86::SETBr: <span class="keywordflow">case</span> X86::SETBEr:</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;      <span class="keywordflow">case</span> X86::SETEr: <span class="keywordflow">case</span> X86::SETNEr: <span class="keywordflow">case</span> X86::SETPr: <span class="keywordflow">case</span> X86::SETNPr:</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;      <span class="keywordflow">case</span> X86::SETAm: <span class="keywordflow">case</span> X86::SETAEm: <span class="keywordflow">case</span> X86::SETBm: <span class="keywordflow">case</span> X86::SETBEm:</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;      <span class="keywordflow">case</span> X86::SETEm: <span class="keywordflow">case</span> X86::SETNEm: <span class="keywordflow">case</span> X86::SETPm: <span class="keywordflow">case</span> X86::SETNPm:</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;      <span class="keywordflow">case</span> X86::JA_4: <span class="keywordflow">case</span> X86::JAE_4: <span class="keywordflow">case</span> X86::JB_4: <span class="keywordflow">case</span> X86::JBE_4:</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;      <span class="keywordflow">case</span> X86::JE_4: <span class="keywordflow">case</span> X86::JNE_4: <span class="keywordflow">case</span> X86::JP_4: <span class="keywordflow">case</span> X86::JNP_4:</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;      <span class="keywordflow">case</span> X86::CMOVA16rr: <span class="keywordflow">case</span> X86::CMOVA16rm:</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;      <span class="keywordflow">case</span> X86::CMOVA32rr: <span class="keywordflow">case</span> X86::CMOVA32rm:</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;      <span class="keywordflow">case</span> X86::CMOVA64rr: <span class="keywordflow">case</span> X86::CMOVA64rm:</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;      <span class="keywordflow">case</span> X86::CMOVAE16rr: <span class="keywordflow">case</span> X86::CMOVAE16rm:</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;      <span class="keywordflow">case</span> X86::CMOVAE32rr: <span class="keywordflow">case</span> X86::CMOVAE32rm:</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;      <span class="keywordflow">case</span> X86::CMOVAE64rr: <span class="keywordflow">case</span> X86::CMOVAE64rm:</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;      <span class="keywordflow">case</span> X86::CMOVB16rr: <span class="keywordflow">case</span> X86::CMOVB16rm:</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;      <span class="keywordflow">case</span> X86::CMOVB32rr: <span class="keywordflow">case</span> X86::CMOVB32rm:</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;      <span class="keywordflow">case</span> X86::CMOVB64rr: <span class="keywordflow">case</span> X86::CMOVB64rm:</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;      <span class="keywordflow">case</span> X86::CMOVBE16rr: <span class="keywordflow">case</span> X86::CMOVBE16rm:</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;      <span class="keywordflow">case</span> X86::CMOVBE32rr: <span class="keywordflow">case</span> X86::CMOVBE32rm:</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;      <span class="keywordflow">case</span> X86::CMOVBE64rr: <span class="keywordflow">case</span> X86::CMOVBE64rm:</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;      <span class="keywordflow">case</span> X86::CMOVE16rr: <span class="keywordflow">case</span> X86::CMOVE16rm:</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;      <span class="keywordflow">case</span> X86::CMOVE32rr: <span class="keywordflow">case</span> X86::CMOVE32rm:</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;      <span class="keywordflow">case</span> X86::CMOVE64rr: <span class="keywordflow">case</span> X86::CMOVE64rm:</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;      <span class="keywordflow">case</span> X86::CMOVNE16rr: <span class="keywordflow">case</span> X86::CMOVNE16rm:</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;      <span class="keywordflow">case</span> X86::CMOVNE32rr: <span class="keywordflow">case</span> X86::CMOVNE32rm:</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;      <span class="keywordflow">case</span> X86::CMOVNE64rr: <span class="keywordflow">case</span> X86::CMOVNE64rm:</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;      <span class="keywordflow">case</span> X86::CMOVNP16rr: <span class="keywordflow">case</span> X86::CMOVNP16rm:</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;      <span class="keywordflow">case</span> X86::CMOVNP32rr: <span class="keywordflow">case</span> X86::CMOVNP32rm:</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;      <span class="keywordflow">case</span> X86::CMOVNP64rr: <span class="keywordflow">case</span> X86::CMOVNP64rm:</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;      <span class="keywordflow">case</span> X86::CMOVP16rr: <span class="keywordflow">case</span> X86::CMOVP16rm:</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;      <span class="keywordflow">case</span> X86::CMOVP32rr: <span class="keywordflow">case</span> X86::CMOVP32rm:</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;      <span class="keywordflow">case</span> X86::CMOVP64rr: <span class="keywordflow">case</span> X86::CMOVP64rm:</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;      <span class="comment">// Anything else: assume conservatively.</span></div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;      <span class="keywordflow">default</span>: <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;      }</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;    }</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;  }</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;}</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;<span class="comment">/// isLoadIncOrDecStore - Check whether or not the chain ending in StoreNode</span></div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;<span class="comment">/// is suitable for doing the {load; increment or decrement; store} to modify</span></div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;<span class="comment">/// transformation.</span></div><div class="line"><a name="l01918"></a><span class="lineno"><a class="line" href="X86ISelDAGToDAG_8cpp.html#ae28feb8429fd7afe136662ecbedb0c8c"> 1918</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="X86ISelDAGToDAG_8cpp.html#ae28feb8429fd7afe136662ecbedb0c8c">isLoadIncOrDecStore</a>(<a class="code" href="classllvm_1_1StoreSDNode.html">StoreSDNode</a> *StoreNode, <span class="keywordtype">unsigned</span> Opc,</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;                                <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> StoredVal, <a class="code" href="classllvm_1_1SelectionDAG.html">SelectionDAG</a> *CurDAG,</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;                                <a class="code" href="classllvm_1_1LoadSDNode.html">LoadSDNode</a>* &amp;LoadNode, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;InputChain) {</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;  <span class="comment">// is the value stored the result of a DEC or INC?</span></div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;  <span class="keywordflow">if</span> (!(Opc == <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28aa1533806854ce83b6ad0d14d12f22d52">X86ISD::DEC</a> || Opc == <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a16c85fbcecfa4452c8b2ca178e4c55e4">X86ISD::INC</a>)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;  <span class="comment">// is the stored value result 0 of the load?</span></div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;  <span class="keywordflow">if</span> (StoredVal.<a class="code" href="classllvm_1_1SDValue.html#a64881a6ca7154fccaeb92cdb1e1e745e">getResNo</a>() != 0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;  <span class="comment">// are there other uses of the loaded value than the inc or dec?</span></div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;  <span class="keywordflow">if</span> (!StoredVal.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#a51dcb6414be6f4b441df7152e05de8f5">hasNUsesOfValue</a>(1, 0)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;  <span class="comment">// is the store non-extending and non-indexed?</span></div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1ISD.html#a308088c2d65f8f3955f5fb0f6aca7ccc">ISD::isNormalStore</a>(StoreNode) || StoreNode-&gt;<a class="code" href="classllvm_1_1MemSDNode.html#a967ffaf77f64a5deb1e96951e4224112">isNonTemporal</a>())</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> <a class="code" href="namespacellvm_1_1SPII.html#a11e9b8fca4a074643a6a21f444e51406a5069619ca8fdce305534f3fe85091a0f">Load</a> = StoredVal-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(0);</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;  <span class="comment">// Is the stored value a non-extending and non-indexed load?</span></div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1ISD.html#afaaeadcd82b42fc0d385a6247bf7bb52">ISD::isNormalLoad</a>(Load.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>())) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;  <span class="comment">// Return LoadNode by reference.</span></div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;  LoadNode = cast&lt;LoadSDNode&gt;(<a class="code" href="namespacellvm_1_1SPII.html#a11e9b8fca4a074643a6a21f444e51406a5069619ca8fdce305534f3fe85091a0f">Load</a>);</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;  <span class="comment">// is the size of the value one that we can handle? (i.e. 64, 32, 16, or 8)</span></div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;  <a class="code" href="structllvm_1_1EVT.html">EVT</a> LdVT = LoadNode-&gt;<a class="code" href="classllvm_1_1MemSDNode.html#a7cead3a2a7771e61083bcc6959915a13">getMemoryVT</a>();</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;  <span class="keywordflow">if</span> (LdVT != <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca97f56253625b3fe7b371ce76722de4b8">MVT::i64</a> &amp;&amp; LdVT != <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a> &amp;&amp; LdVT != <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50cab3be25b50efa0289a3c86fd50454b683">MVT::i16</a> &amp;&amp;</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;      LdVT != <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50caf777e086e32f60c0c87b460964eae7d0">MVT::i8</a>)</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;  <span class="comment">// Is store the only read of the loaded value?</span></div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;  <span class="keywordflow">if</span> (!Load.<a class="code" href="classllvm_1_1SDValue.html#a97b0f24f3e52f030830fca6fbfcbd37d">hasOneUse</a>())</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;  <span class="comment">// Is the address of the store the same as the load?</span></div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;  <span class="keywordflow">if</span> (LoadNode-&gt;<a class="code" href="classllvm_1_1LoadSDNode.html#a3ded48ce66b58b7e7e143991df5dbfae">getBasePtr</a>() != StoreNode-&gt;<a class="code" href="classllvm_1_1StoreSDNode.html#aec453733fbb9f24036960fdc6b3b4b46">getBasePtr</a>() ||</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;      LoadNode-&gt;<a class="code" href="classllvm_1_1LoadSDNode.html#ae769a35bdc5f1748a40134166a312901">getOffset</a>() != StoreNode-&gt;<a class="code" href="classllvm_1_1StoreSDNode.html#a7daff97bea10c39c89e0263cf7e51c5c">getOffset</a>())</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;  <span class="comment">// Check if the chain is produced by the load or is a TokenFactor with</span></div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;  <span class="comment">// the load output chain as an operand. Return InputChain by reference.</span></div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Chain = StoreNode-&gt;<a class="code" href="classllvm_1_1MemSDNode.html#ae3cb6fbf8c8cb79e10ac61bd98c85211">getChain</a>();</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;  <span class="keywordtype">bool</span> ChainCheck = <span class="keyword">false</span>;</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;  <span class="keywordflow">if</span> (Chain == Load.<a class="code" href="classllvm_1_1SDValue.html#a040481b9bda32faa6b1435532405d88f">getValue</a>(1)) {</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;    ChainCheck = <span class="keyword">true</span>;</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;    InputChain = LoadNode-&gt;<a class="code" href="classllvm_1_1MemSDNode.html#ae3cb6fbf8c8cb79e10ac61bd98c85211">getChain</a>();</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Chain.<a class="code" href="classllvm_1_1SDValue.html#a0caf6a31d8034336a9ba7791a5f583f1">getOpcode</a>() == <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ad469508535ce2082a1ab1f0e429187b8">ISD::TokenFactor</a>) {</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;SDValue, 4&gt;</a> ChainOps;</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Chain.<a class="code" href="classllvm_1_1SDValue.html#a5f0447ef8ec128563ad131b76e5062bd">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;      <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Op = Chain.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;      <span class="keywordflow">if</span> (Op == Load.<a class="code" href="classllvm_1_1SDValue.html#a040481b9bda32faa6b1435532405d88f">getValue</a>(1)) {</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;        ChainCheck = <span class="keyword">true</span>;</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;      }</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;      <span class="comment">// Make sure using Op as part of the chain would not cause a cycle here.</span></div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;      <span class="comment">// In theory, we could check whether the chain node is a predecessor of</span></div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;      <span class="comment">// the load. But that can be very expensive. Instead visit the uses and</span></div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;      <span class="comment">// make sure they all have smaller node id than the load.</span></div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;      <span class="keywordtype">int</span> LoadId = LoadNode-&gt;<a class="code" href="classllvm_1_1SDNode.html#a7869db2aca4044d21da972bed855b0d0">getNodeId</a>();</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SDNode_1_1use__iterator.html">SDNode::use_iterator</a> UI = Op.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#a8810bf428dcf84d48f39c8f5ba9a8c94">use_begin</a>(),</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;             UE = UI-&gt;<a class="code" href="classllvm_1_1SDNode.html#aef02f2c1bd12936a80611b134b24a47d">use_end</a>(); UI != UE; ++UI) {</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;        <span class="keywordflow">if</span> (UI.getUse().getResNo() != 0)</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;        <span class="keywordflow">if</span> (UI-&gt;getNodeId() &gt; LoadId)</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;      }</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;      ChainOps.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Op);</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;    }</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;    <span class="keywordflow">if</span> (ChainCheck)</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;      <span class="comment">// Make a new TokenFactor with all the other input chains except</span></div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;      <span class="comment">// for the load.</span></div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;      InputChain = CurDAG-&gt;<a class="code" href="classllvm_1_1SelectionDAG.html#af5d5ed0a2c2186ec77b8dd9c38474d3e">getNode</a>(<a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ad469508535ce2082a1ab1f0e429187b8">ISD::TokenFactor</a>, <a class="code" href="classllvm_1_1SDLoc.html">SDLoc</a>(Chain),</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;                                   <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca62a222acce6360abd2726719fabc2797">MVT::Other</a>, &amp;ChainOps[0], ChainOps.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>());</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;  }</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;  <span class="keywordflow">if</span> (!ChainCheck)</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;}</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;<span class="comment">/// getFusedLdStOpcode - Get the appropriate X86 opcode for an in memory</span></div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;<span class="comment">/// increment or decrement. Opc should be X86ISD::DEC or X86ISD::INC.</span></div><div class="line"><a name="l02003"></a><span class="lineno"><a class="line" href="X86ISelDAGToDAG_8cpp.html#a7183c66b968f67a612e2be5fd902d3e9"> 2003</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="X86ISelDAGToDAG_8cpp.html#a7183c66b968f67a612e2be5fd902d3e9">getFusedLdStOpcode</a>(<a class="code" href="structllvm_1_1EVT.html">EVT</a> &amp;LdVT, <span class="keywordtype">unsigned</span> Opc) {</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;  <span class="keywordflow">if</span> (Opc == <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28aa1533806854ce83b6ad0d14d12f22d52">X86ISD::DEC</a>) {</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;    <span class="keywordflow">if</span> (LdVT == <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca97f56253625b3fe7b371ce76722de4b8">MVT::i64</a>) <span class="keywordflow">return</span> X86::DEC64m;</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;    <span class="keywordflow">if</span> (LdVT == <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>) <span class="keywordflow">return</span> X86::DEC32m;</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;    <span class="keywordflow">if</span> (LdVT == <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50cab3be25b50efa0289a3c86fd50454b683">MVT::i16</a>) <span class="keywordflow">return</span> X86::DEC16m;</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;    <span class="keywordflow">if</span> (LdVT == <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50caf777e086e32f60c0c87b460964eae7d0">MVT::i8</a>)  <span class="keywordflow">return</span> X86::DEC8m;</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;    assert(Opc == <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a16c85fbcecfa4452c8b2ca178e4c55e4">X86ISD::INC</a> &amp;&amp; <span class="stringliteral">&quot;unrecognized opcode&quot;</span>);</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;    <span class="keywordflow">if</span> (LdVT == <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca97f56253625b3fe7b371ce76722de4b8">MVT::i64</a>) <span class="keywordflow">return</span> X86::INC64m;</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;    <span class="keywordflow">if</span> (LdVT == <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>) <span class="keywordflow">return</span> X86::INC32m;</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;    <span class="keywordflow">if</span> (LdVT == <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50cab3be25b50efa0289a3c86fd50454b683">MVT::i16</a>) <span class="keywordflow">return</span> X86::INC16m;</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;    <span class="keywordflow">if</span> (LdVT == <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50caf777e086e32f60c0c87b460964eae7d0">MVT::i8</a>)  <span class="keywordflow">return</span> X86::INC8m;</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;  }</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;  <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;unrecognized size for LdVT&quot;</span>);</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;}</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;<span class="comment">/// SelectGather - Customized ISel for GATHER operations.</span></div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *X86DAGToDAGISel::SelectGather(<a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *Node, <span class="keywordtype">unsigned</span> Opc) {</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;  <span class="comment">// Operands of Gather: VSrc, Base, VIdx, VMask, Scale</span></div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Chain = Node-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(0);</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> VSrc = Node-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(2);</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Base = Node-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(3);</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> VIdx = Node-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(4);</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> VMask = Node-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(5);</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;  <a class="code" href="classllvm_1_1ConstantSDNode.html">ConstantSDNode</a> *Scale = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantSDNode.html">ConstantSDNode</a>&gt;(Node-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(6));</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;  <span class="keywordflow">if</span> (!Scale)</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;  <a class="code" href="structllvm_1_1SDVTList.html">SDVTList</a> VTs = CurDAG-&gt;getVTList(VSrc.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>(), VSrc.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>(),</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;                                   <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca62a222acce6360abd2726719fabc2797">MVT::Other</a>);</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;  <span class="comment">// Memory Operands: Base, Scale, Index, Disp, Segment</span></div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Disp = CurDAG-&gt;getTargetConstant(0, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>);</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Segment = CurDAG-&gt;getRegister(0, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>);</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Ops[] = { VSrc, Base, getI8Imm(Scale-&gt;<a class="code" href="classllvm_1_1ConstantSDNode.html#ae52ea754f0f064b6440e99103abea366">getSExtValue</a>()), VIdx,</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;                          Disp, Segment, VMask, Chain};</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;  <a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *ResNode = CurDAG-&gt;getMachineNode(Opc, <a class="code" href="classllvm_1_1SDLoc.html">SDLoc</a>(Node), VTs, Ops);</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;  <span class="comment">// Node has 2 outputs: VDst and MVT::Other.</span></div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;  <span class="comment">// ResNode has 3 outputs: VDst, VMask_wb, and MVT::Other.</span></div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;  <span class="comment">// We replace VDst of Node with VDst of ResNode, and Other of Node with Other</span></div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;  <span class="comment">// of ResNode.</span></div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;  ReplaceUses(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(Node, 0), <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(ResNode, 0));</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;  ReplaceUses(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(Node, 1), <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(ResNode, 2));</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;  <span class="keywordflow">return</span> ResNode;</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;}</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;<a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *<a class="code" href="namespacellvm_1_1MCID.html#a8035044d40d3758eb45b65dce69dc90ba32dbd2c72a98eaee90e3ad5ef7b5af16">X86DAGToDAGISel::Select</a>(<a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *Node) {</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;  <a class="code" href="classllvm_1_1MVT.html">MVT</a> NVT = Node-&gt;<a class="code" href="classllvm_1_1SDNode.html#aa81556eb1fb861c6b57d46e97dae7778">getSimpleValueType</a>(0);</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;  <span class="keywordtype">unsigned</span> Opc, MOpc;</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;  <span class="keywordtype">unsigned</span> Opcode = Node-&gt;<a class="code" href="classllvm_1_1SDNode.html#af0d328f3f61168f4ea7d6e4044af4f97">getOpcode</a>();</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;  <a class="code" href="classllvm_1_1SDLoc.html">SDLoc</a> dl(Node);</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Selecting: &quot;</span>; Node-&gt;<a class="code" href="classllvm_1_1SDNode.html#a535ca517df1b4ae62e75475141e65787">dump</a>(CurDAG); <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;  <span class="keywordflow">if</span> (Node-&gt;<a class="code" href="classllvm_1_1SDNode.html#a7ef138746b04be6d07091b9ba49d74da">isMachineOpcode</a>()) {</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;== &quot;</span>;  Node-&gt;<a class="code" href="classllvm_1_1SDNode.html#a535ca517df1b4ae62e75475141e65787">dump</a>(CurDAG); <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;    Node-&gt;<a class="code" href="classllvm_1_1SDNode.html#a5689e9ae35c6ceb3b9377299c98e0e97">setNodeId</a>(-1);</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;    <span class="keywordflow">return</span> NULL;   <span class="comment">// Already selected.</span></div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;  }</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;  <span class="keywordflow">switch</span> (Opcode) {</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;  <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110afc09e0bddd693dcf9923e4df42473bd9">ISD::INTRINSIC_W_CHAIN</a>: {</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;    <span class="keywordtype">unsigned</span> IntNo = cast&lt;ConstantSDNode&gt;(Node-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(1))-&gt;getZExtValue();</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;    <span class="keywordflow">switch</span> (IntNo) {</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;    <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aed1108228a6f6e381974a5747b9f8094">Intrinsic::x86_avx2_gather_d_pd</a>:</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aa79c6e4c9b15c3b13da261d404503d79">Intrinsic::x86_avx2_gather_d_pd_256</a>:</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ad1b6409ab0e1bfe754e42a8759f497d3">Intrinsic::x86_avx2_gather_q_pd</a>:</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a254b7b49317c9e87b183672e8f72f50e">Intrinsic::x86_avx2_gather_q_pd_256</a>:</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aad3b2882d1697f6658b9c9abb051afee">Intrinsic::x86_avx2_gather_d_ps</a>:</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90abed773d58cd27af1fd9c22c559686b98">Intrinsic::x86_avx2_gather_d_ps_256</a>:</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a3a3128dcdf925aee7f003bc4fc8063d0">Intrinsic::x86_avx2_gather_q_ps</a>:</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a2ba5dc742a83d35edf3c37a01f7508cd">Intrinsic::x86_avx2_gather_q_ps_256</a>:</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a53e7e8b7a3b409635277340ab405392f">Intrinsic::x86_avx2_gather_d_q</a>:</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ae2e73cd5e9feee03ec2ce36822c7970c">Intrinsic::x86_avx2_gather_d_q_256</a>:</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90add738bd46e1d9e2f107dc4a5d49af2a4">Intrinsic::x86_avx2_gather_q_q</a>:</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aca2b6803fed08228d7c704ff4a889caa">Intrinsic::x86_avx2_gather_q_q_256</a>:</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a66b710456fdacec2e3c16aa1a172ba27">Intrinsic::x86_avx2_gather_d_d</a>:</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a3b23e0f82d060d6ff23c21170de119ed">Intrinsic::x86_avx2_gather_d_d_256</a>:</div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ae081fff15bbace24a022ded835680d5d">Intrinsic::x86_avx2_gather_q_d</a>:</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a74457576348d08386d8e8ae0f20ce099">Intrinsic::x86_avx2_gather_q_d_256</a>: {</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;      <span class="keywordflow">if</span> (!Subtarget-&gt;<a class="code" href="classllvm_1_1X86Subtarget.html#ab976c899dd9562ae41c33581e35323fc">hasAVX2</a>())</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;      <span class="keywordtype">unsigned</span> Opc;</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;      <span class="keywordflow">switch</span> (IntNo) {</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;      <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Impossible intrinsic&quot;</span>);</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aed1108228a6f6e381974a5747b9f8094">Intrinsic::x86_avx2_gather_d_pd</a>:     Opc = X86::VGATHERDPDrm;  <span class="keywordflow">break</span>;</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aa79c6e4c9b15c3b13da261d404503d79">Intrinsic::x86_avx2_gather_d_pd_256</a>: Opc = X86::VGATHERDPDYrm; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ad1b6409ab0e1bfe754e42a8759f497d3">Intrinsic::x86_avx2_gather_q_pd</a>:     Opc = X86::VGATHERQPDrm;  <span class="keywordflow">break</span>;</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a254b7b49317c9e87b183672e8f72f50e">Intrinsic::x86_avx2_gather_q_pd_256</a>: Opc = X86::VGATHERQPDYrm; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aad3b2882d1697f6658b9c9abb051afee">Intrinsic::x86_avx2_gather_d_ps</a>:     Opc = X86::VGATHERDPSrm;  <span class="keywordflow">break</span>;</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90abed773d58cd27af1fd9c22c559686b98">Intrinsic::x86_avx2_gather_d_ps_256</a>: Opc = X86::VGATHERDPSYrm; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a3a3128dcdf925aee7f003bc4fc8063d0">Intrinsic::x86_avx2_gather_q_ps</a>:     Opc = X86::VGATHERQPSrm;  <span class="keywordflow">break</span>;</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a2ba5dc742a83d35edf3c37a01f7508cd">Intrinsic::x86_avx2_gather_q_ps_256</a>: Opc = X86::VGATHERQPSYrm; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a53e7e8b7a3b409635277340ab405392f">Intrinsic::x86_avx2_gather_d_q</a>:      Opc = X86::VPGATHERDQrm;  <span class="keywordflow">break</span>;</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ae2e73cd5e9feee03ec2ce36822c7970c">Intrinsic::x86_avx2_gather_d_q_256</a>:  Opc = X86::VPGATHERDQYrm; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90add738bd46e1d9e2f107dc4a5d49af2a4">Intrinsic::x86_avx2_gather_q_q</a>:      Opc = X86::VPGATHERQQrm;  <span class="keywordflow">break</span>;</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aca2b6803fed08228d7c704ff4a889caa">Intrinsic::x86_avx2_gather_q_q_256</a>:  Opc = X86::VPGATHERQQYrm; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a66b710456fdacec2e3c16aa1a172ba27">Intrinsic::x86_avx2_gather_d_d</a>:      Opc = X86::VPGATHERDDrm;  <span class="keywordflow">break</span>;</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a3b23e0f82d060d6ff23c21170de119ed">Intrinsic::x86_avx2_gather_d_d_256</a>:  Opc = X86::VPGATHERDDYrm; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ae081fff15bbace24a022ded835680d5d">Intrinsic::x86_avx2_gather_q_d</a>:      Opc = X86::VPGATHERQDrm;  <span class="keywordflow">break</span>;</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a74457576348d08386d8e8ae0f20ce099">Intrinsic::x86_avx2_gather_q_d_256</a>:  Opc = X86::VPGATHERQDYrm; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;      }</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;      <a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *RetVal = SelectGather(Node, Opc);</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;      <span class="keywordflow">if</span> (RetVal)</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;        <span class="comment">// We already called ReplaceUses inside SelectGather.</span></div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;        <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;    }</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;    }</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;  }</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a9f2e4e1e83010173fe9361ecfa60faef">X86ISD::GlobalBaseReg</a>:</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;    <span class="keywordflow">return</span> getGlobalBaseReg();</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a935102b3b74492f7a1b4adf4d487469f">X86ISD::ATOMOR64_DAG</a>:</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28aa38ae73af96bffac418fb46fd4941cf4">X86ISD::ATOMXOR64_DAG</a>:</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a7184302cbbfa2cd5ce11520bb0420cda">X86ISD::ATOMADD64_DAG</a>:</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a6b568009f7298ad847f7b387530034e9">X86ISD::ATOMSUB64_DAG</a>:</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a54e5b571aa1e5cc79548391658cbcb3a">X86ISD::ATOMNAND64_DAG</a>:</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a2be26030c5694245f84417995c2b6d5b">X86ISD::ATOMAND64_DAG</a>:</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28ab6a64b7a6972df9859995860b41353fc">X86ISD::ATOMMAX64_DAG</a>:</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a228897f3e04d1ff0e540959020fad48d">X86ISD::ATOMMIN64_DAG</a>:</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a001c27cd385a966a276d1ee61bed8c98">X86ISD::ATOMUMAX64_DAG</a>:</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28aad94325e16d00136723f8b8554947f8b">X86ISD::ATOMUMIN64_DAG</a>:</div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28ac3f489d9df53f65dddb7a1c0c71064e3">X86ISD::ATOMSWAP64_DAG</a>: {</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;    <span class="keywordtype">unsigned</span> Opc;</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;    <span class="keywordflow">switch</span> (Opcode) {</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;    <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Impossible opcode&quot;</span>);</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a935102b3b74492f7a1b4adf4d487469f">X86ISD::ATOMOR64_DAG</a>:   Opc = X86::ATOMOR6432;   <span class="keywordflow">break</span>;</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28aa38ae73af96bffac418fb46fd4941cf4">X86ISD::ATOMXOR64_DAG</a>:  Opc = X86::ATOMXOR6432;  <span class="keywordflow">break</span>;</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a7184302cbbfa2cd5ce11520bb0420cda">X86ISD::ATOMADD64_DAG</a>:  Opc = X86::ATOMADD6432;  <span class="keywordflow">break</span>;</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a6b568009f7298ad847f7b387530034e9">X86ISD::ATOMSUB64_DAG</a>:  Opc = X86::ATOMSUB6432;  <span class="keywordflow">break</span>;</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a54e5b571aa1e5cc79548391658cbcb3a">X86ISD::ATOMNAND64_DAG</a>: Opc = X86::ATOMNAND6432; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a2be26030c5694245f84417995c2b6d5b">X86ISD::ATOMAND64_DAG</a>:  Opc = X86::ATOMAND6432;  <span class="keywordflow">break</span>;</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28ab6a64b7a6972df9859995860b41353fc">X86ISD::ATOMMAX64_DAG</a>:  Opc = X86::ATOMMAX6432;  <span class="keywordflow">break</span>;</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a228897f3e04d1ff0e540959020fad48d">X86ISD::ATOMMIN64_DAG</a>:  Opc = X86::ATOMMIN6432;  <span class="keywordflow">break</span>;</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a001c27cd385a966a276d1ee61bed8c98">X86ISD::ATOMUMAX64_DAG</a>: Opc = X86::ATOMUMAX6432; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28aad94325e16d00136723f8b8554947f8b">X86ISD::ATOMUMIN64_DAG</a>: Opc = X86::ATOMUMIN6432; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28ac3f489d9df53f65dddb7a1c0c71064e3">X86ISD::ATOMSWAP64_DAG</a>: Opc = X86::ATOMSWAP6432; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;    }</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;    <a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *RetVal = SelectAtomic64(Node, Opc);</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;    <span class="keywordflow">if</span> (RetVal)</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;      <span class="keywordflow">return</span> RetVal;</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;  }</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a428ec1341b34eafa63518914e7f5ddf0">ISD::ATOMIC_LOAD_XOR</a>:</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a905925a49cdc6b4a6017d215820dad30">ISD::ATOMIC_LOAD_AND</a>:</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a4112a866197a97a70bdc78ef92c79b4c">ISD::ATOMIC_LOAD_OR</a>:</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110abf5f612de1a25451c9a0c33d77bf3e74">ISD::ATOMIC_LOAD_ADD</a>: {</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;    <a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *RetVal = SelectAtomicLoadArith(Node, NVT);</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;    <span class="keywordflow">if</span> (RetVal)</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;      <span class="keywordflow">return</span> RetVal;</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;  }</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>:</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>:</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>: {</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;    <span class="comment">// For operations of the form (x &lt;&lt; C1) op C2, check if we can use a smaller</span></div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;    <span class="comment">// encoding for C2 by transforming it into (x op (C2&gt;&gt;C1)) &lt;&lt; C1.</span></div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> N0 = Node-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(0);</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> N1 = Node-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(1);</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;    <span class="keywordflow">if</span> (N0-&gt;<a class="code" href="classllvm_1_1SDNode.html#af0d328f3f61168f4ea7d6e4044af4f97">getOpcode</a>() != <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a> || !N0-&gt;<a class="code" href="classllvm_1_1SDNode.html#a52753947fce3a01b1c18dd4713c587e8">hasOneUse</a>())</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;    <span class="comment">// i8 is unshrinkable, i16 should be promoted to i32.</span></div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;    <span class="keywordflow">if</span> (NVT != <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a> &amp;&amp; NVT != <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca97f56253625b3fe7b371ce76722de4b8">MVT::i64</a>)</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;    <a class="code" href="classllvm_1_1ConstantSDNode.html">ConstantSDNode</a> *Cst = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantSDNode.html">ConstantSDNode</a>&gt;(N1);</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;    <a class="code" href="classllvm_1_1ConstantSDNode.html">ConstantSDNode</a> *ShlCst = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantSDNode.html">ConstantSDNode</a>&gt;(N0-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(1));</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;    <span class="keywordflow">if</span> (!Cst || !ShlCst)</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;    int64_t Val = Cst-&gt;<a class="code" href="classllvm_1_1ConstantSDNode.html#ae52ea754f0f064b6440e99103abea366">getSExtValue</a>();</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;    uint64_t ShlVal = ShlCst-&gt;getZExtValue();</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;    <span class="comment">// Make sure that we don&#39;t change the operation by removing bits.</span></div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;    <span class="comment">// This only matters for OR and XOR, AND is unaffected.</span></div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;    uint64_t RemovedBitsMask = (1ULL &lt;&lt; ShlVal) - 1;</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;    <span class="keywordflow">if</span> (Opcode != <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a> &amp;&amp; (Val &amp; RemovedBitsMask) != 0)</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;    <span class="keywordtype">unsigned</span> ShlOp, Op;</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;    <a class="code" href="classllvm_1_1MVT.html">MVT</a> CstVT = NVT;</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;    <span class="comment">// Check the minimum bitwidth for the new constant.</span></div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;    <span class="comment">// TODO: AND32ri is the same as AND64ri32 with zext imm.</span></div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;    <span class="comment">// TODO: MOV32ri+OR64r is cheaper than MOV64ri64+OR64rr</span></div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;    <span class="comment">// TODO: Using 16 and 8 bit operations is also possible for or32 &amp; xor32.</span></div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#a3e242f3485db990d043f2dcf91106ce7">isInt&lt;8&gt;</a>(Val) &amp;&amp; <a class="code" href="namespacellvm.html#a3e242f3485db990d043f2dcf91106ce7">isInt&lt;8&gt;</a>(Val &gt;&gt; ShlVal))</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;      CstVT = <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50caf777e086e32f60c0c87b460964eae7d0">MVT::i8</a>;</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#a9bf6430c1a0cf078ee3f9f520fa407f0">isInt&lt;32&gt;</a>(Val) &amp;&amp; <a class="code" href="namespacellvm.html#a9bf6430c1a0cf078ee3f9f520fa407f0">isInt&lt;32&gt;</a>(Val &gt;&gt; ShlVal))</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;      CstVT = <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>;</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;    <span class="comment">// Bail if there is no smaller encoding.</span></div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;    <span class="keywordflow">if</span> (NVT == CstVT)</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;    <span class="keywordflow">switch</span> (NVT.<a class="code" href="classllvm_1_1MVT.html#a27bda7d8e8e4f0337650a892f3c9b46a">SimpleTy</a>) {</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;    <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unsupported VT!&quot;</span>);</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>:</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;      assert(CstVT == <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50caf777e086e32f60c0c87b460964eae7d0">MVT::i8</a>);</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;      ShlOp = X86::SHL32ri;</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;      <span class="keywordflow">switch</span> (Opcode) {</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;      <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Impossible opcode&quot;</span>);</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>: Op = X86::AND32ri8; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>:  Op =  X86::OR32ri8; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>: Op = X86::XOR32ri8; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;      }</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca97f56253625b3fe7b371ce76722de4b8">MVT::i64</a>:</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;      assert(CstVT == <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50caf777e086e32f60c0c87b460964eae7d0">MVT::i8</a> || CstVT == <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>);</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;      ShlOp = X86::SHL64ri;</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;      <span class="keywordflow">switch</span> (Opcode) {</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;      <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Impossible opcode&quot;</span>);</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>: Op = CstVT==<a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50caf777e086e32f60c0c87b460964eae7d0">MVT::i8</a>? X86::AND64ri8 : X86::AND64ri32; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>:  Op = CstVT==<a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50caf777e086e32f60c0c87b460964eae7d0">MVT::i8</a>?  X86::OR64ri8 :  X86::OR64ri32; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>: Op = CstVT==<a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50caf777e086e32f60c0c87b460964eae7d0">MVT::i8</a>? X86::XOR64ri8 : X86::XOR64ri32; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;      }</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;    }</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;</div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;    <span class="comment">// Emit the smaller op and the shift.</span></div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> NewCst = CurDAG-&gt;getTargetConstant(Val &gt;&gt; ShlVal, CstVT);</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;    <a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *New = CurDAG-&gt;getMachineNode(Op, dl, NVT, N0-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(0),NewCst);</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;    <span class="keywordflow">return</span> CurDAG-&gt;SelectNodeTo(Node, ShlOp, NVT, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(New, 0),</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;                                getI8Imm(ShlVal));</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;  }</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28ac459a26428cf593d442a86904673b560">X86ISD::UMUL</a>: {</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> N0 = Node-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(0);</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> N1 = Node-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(1);</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;    <span class="keywordtype">unsigned</span> LoReg;</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;    <span class="keywordflow">switch</span> (NVT.<a class="code" href="classllvm_1_1MVT.html#a27bda7d8e8e4f0337650a892f3c9b46a">SimpleTy</a>) {</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;    <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unsupported VT!&quot;</span>);</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50caf777e086e32f60c0c87b460964eae7d0">MVT::i8</a>:  LoReg = <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a802c8408643a0c37e107e7b4b0994c30">X86::AL</a>;  Opc = X86::MUL8r; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50cab3be25b50efa0289a3c86fd50454b683">MVT::i16</a>: LoReg = X86::AX;  Opc = X86::MUL16r; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>: LoReg = <a class="code" href="README-SSE_8txt.html#abd9c765b9afafff59eb14d50c9e9fba1">X86::EAX</a>; Opc = X86::MUL32r; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca97f56253625b3fe7b371ce76722de4b8">MVT::i64</a>: LoReg = X86::RAX; Opc = X86::MUL64r; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;    }</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> InFlag = CurDAG-&gt;getCopyToReg(CurDAG-&gt;getEntryNode(), dl, LoReg,</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;                                          N0, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>()).getValue(1);</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;    <a class="code" href="structllvm_1_1SDVTList.html">SDVTList</a> VTs = CurDAG-&gt;getVTList(NVT, NVT, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>);</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Ops[] = {N1, InFlag};</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;    <a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *CNode = CurDAG-&gt;getMachineNode(Opc, dl, VTs, Ops);</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;    ReplaceUses(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(Node, 0), <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(CNode, 0));</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;    ReplaceUses(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(Node, 1), <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(CNode, 1));</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;    ReplaceUses(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(Node, 2), <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(CNode, 2));</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;  }</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a1354c6f8508d6cd697dc89a5d9a52dfd">ISD::SMUL_LOHI</a>:</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a79c959df09509d7ff66d9b04bc40d18d">ISD::UMUL_LOHI</a>: {</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> N0 = Node-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(0);</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> N1 = Node-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(1);</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;    <span class="keywordtype">bool</span> isSigned = Opcode == <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a1354c6f8508d6cd697dc89a5d9a52dfd">ISD::SMUL_LOHI</a>;</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;    <span class="keywordtype">bool</span> hasBMI2 = Subtarget-&gt;<a class="code" href="classllvm_1_1X86Subtarget.html#ae7791ac51c44248b8469215971d56b1c">hasBMI2</a>();</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;    <span class="keywordflow">if</span> (!isSigned) {</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;      <span class="keywordflow">switch</span> (NVT.<a class="code" href="classllvm_1_1MVT.html#a27bda7d8e8e4f0337650a892f3c9b46a">SimpleTy</a>) {</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;      <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unsupported VT!&quot;</span>);</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50caf777e086e32f60c0c87b460964eae7d0">MVT::i8</a>:  Opc = X86::MUL8r;  MOpc = X86::MUL8m;  <span class="keywordflow">break</span>;</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50cab3be25b50efa0289a3c86fd50454b683">MVT::i16</a>: Opc = X86::MUL16r; MOpc = X86::MUL16m; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>: Opc = hasBMI2 ? X86::MULX32rr : X86::MUL32r;</div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;                     MOpc = hasBMI2 ? X86::MULX32rm : X86::MUL32m; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca97f56253625b3fe7b371ce76722de4b8">MVT::i64</a>: Opc = hasBMI2 ? X86::MULX64rr : X86::MUL64r;</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;                     MOpc = hasBMI2 ? X86::MULX64rm : X86::MUL64m; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;      }</div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;      <span class="keywordflow">switch</span> (NVT.<a class="code" href="classllvm_1_1MVT.html#a27bda7d8e8e4f0337650a892f3c9b46a">SimpleTy</a>) {</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;      <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unsupported VT!&quot;</span>);</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50caf777e086e32f60c0c87b460964eae7d0">MVT::i8</a>:  Opc = X86::IMUL8r;  MOpc = X86::IMUL8m;  <span class="keywordflow">break</span>;</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50cab3be25b50efa0289a3c86fd50454b683">MVT::i16</a>: Opc = X86::IMUL16r; MOpc = X86::IMUL16m; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>: Opc = X86::IMUL32r; MOpc = X86::IMUL32m; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca97f56253625b3fe7b371ce76722de4b8">MVT::i64</a>: Opc = X86::IMUL64r; MOpc = X86::IMUL64m; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;      }</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;    }</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;    <span class="keywordtype">unsigned</span> SrcReg, LoReg, HiReg;</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;    <span class="keywordflow">switch</span> (Opc) {</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;    <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unknown MUL opcode!&quot;</span>);</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;    <span class="keywordflow">case</span> X86::IMUL8r:</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;    <span class="keywordflow">case</span> X86::MUL8r:</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;      SrcReg = LoReg = <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a802c8408643a0c37e107e7b4b0994c30">X86::AL</a>; HiReg = <a class="code" href="README-X86-64_8txt.html#a9de23273550c17a1957b1b325a01960e">X86::AH</a>;</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;    <span class="keywordflow">case</span> X86::IMUL16r:</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;    <span class="keywordflow">case</span> X86::MUL16r:</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;      SrcReg = LoReg = X86::AX; HiReg = X86::DX;</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;    <span class="keywordflow">case</span> X86::IMUL32r:</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;    <span class="keywordflow">case</span> X86::MUL32r:</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;      SrcReg = LoReg = <a class="code" href="README-SSE_8txt.html#abd9c765b9afafff59eb14d50c9e9fba1">X86::EAX</a>; HiReg = <a class="code" href="README-SSE_8txt.html#aafb0a6c62a7cfe1538db1d20d759a34b">X86::EDX</a>;</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;    <span class="keywordflow">case</span> X86::IMUL64r:</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;    <span class="keywordflow">case</span> X86::MUL64r:</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;      SrcReg = LoReg = X86::RAX; HiReg = X86::RDX;</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;    <span class="keywordflow">case</span> X86::MULX32rr:</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;      SrcReg = <a class="code" href="README-SSE_8txt.html#aafb0a6c62a7cfe1538db1d20d759a34b">X86::EDX</a>; LoReg = HiReg = 0;</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;    <span class="keywordflow">case</span> X86::MULX64rr:</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;      SrcReg = X86::RDX; LoReg = HiReg = 0;</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;    }</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Tmp0, Tmp1, Tmp2, Tmp3, Tmp4;</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;    <span class="keywordtype">bool</span> foldedLoad = TryFoldLoad(Node, N1, Tmp0, Tmp1, Tmp2, Tmp3, Tmp4);</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;    <span class="comment">// Multiply is commmutative.</span></div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;    <span class="keywordflow">if</span> (!foldedLoad) {</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;      foldedLoad = TryFoldLoad(Node, N0, Tmp0, Tmp1, Tmp2, Tmp3, Tmp4);</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;      <span class="keywordflow">if</span> (foldedLoad)</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;        <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(N0, N1);</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;    }</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> InFlag = CurDAG-&gt;getCopyToReg(CurDAG-&gt;getEntryNode(), dl, SrcReg,</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;                                          N0, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>()).getValue(1);</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> ResHi, ResLo;</div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;    <span class="keywordflow">if</span> (foldedLoad) {</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;      <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Chain;</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;      <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Ops[] = { Tmp0, Tmp1, Tmp2, Tmp3, Tmp4, N1.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0),</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;                        InFlag };</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;      <span class="keywordflow">if</span> (MOpc == X86::MULX32rm || MOpc == X86::MULX64rm) {</div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;        <a class="code" href="structllvm_1_1SDVTList.html">SDVTList</a> VTs = CurDAG-&gt;getVTList(NVT, NVT, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca62a222acce6360abd2726719fabc2797">MVT::Other</a>, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca59a1908cf136662bcfdc11ed49515ca9">MVT::Glue</a>);</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;        <a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *CNode = CurDAG-&gt;getMachineNode(MOpc, dl, VTs, Ops);</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;        ResHi = <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(CNode, 0);</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;        ResLo = <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(CNode, 1);</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;        Chain = <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(CNode, 2);</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;        InFlag = <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(CNode, 3);</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;        <a class="code" href="structllvm_1_1SDVTList.html">SDVTList</a> VTs = CurDAG-&gt;getVTList(<a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca62a222acce6360abd2726719fabc2797">MVT::Other</a>, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca59a1908cf136662bcfdc11ed49515ca9">MVT::Glue</a>);</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;        <a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *CNode = CurDAG-&gt;getMachineNode(MOpc, dl, VTs, Ops);</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;        Chain = <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(CNode, 0);</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;        InFlag = <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(CNode, 1);</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;      }</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;      <span class="comment">// Update the chain.</span></div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;      ReplaceUses(N1.<a class="code" href="classllvm_1_1SDValue.html#a040481b9bda32faa6b1435532405d88f">getValue</a>(1), Chain);</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;      <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Ops[] = { N1, InFlag };</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;      <span class="keywordflow">if</span> (Opc == X86::MULX32rr || Opc == X86::MULX64rr) {</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;        <a class="code" href="structllvm_1_1SDVTList.html">SDVTList</a> VTs = CurDAG-&gt;getVTList(NVT, NVT, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca59a1908cf136662bcfdc11ed49515ca9">MVT::Glue</a>);</div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;        <a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *CNode = CurDAG-&gt;getMachineNode(Opc, dl, VTs, Ops);</div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;        ResHi = <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(CNode, 0);</div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;        ResLo = <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(CNode, 1);</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;        InFlag = <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(CNode, 2);</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;        <a class="code" href="structllvm_1_1SDVTList.html">SDVTList</a> VTs = CurDAG-&gt;getVTList(<a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca59a1908cf136662bcfdc11ed49515ca9">MVT::Glue</a>);</div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;        <a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *CNode = CurDAG-&gt;getMachineNode(Opc, dl, VTs, Ops);</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;        InFlag = <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(CNode, 0);</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;      }</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;    }</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;    <span class="comment">// Prevent use of AH in a REX instruction by referencing AX instead.</span></div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;    <span class="keywordflow">if</span> (HiReg == <a class="code" href="README-X86-64_8txt.html#a9de23273550c17a1957b1b325a01960e">X86::AH</a> &amp;&amp; Subtarget-&gt;<a class="code" href="classllvm_1_1X86Subtarget.html#a5314399c907d77b514ec837e8527a9de">is64Bit</a>() &amp;&amp;</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;        !<a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(Node, 1).<a class="code" href="classllvm_1_1SDValue.html#ad07bffbe0e911b0ce1b44b4f7e23468a">use_empty</a>()) {</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;      <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Result = CurDAG-&gt;getCopyFromReg(CurDAG-&gt;getEntryNode(), dl,</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;                                              X86::AX, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50cab3be25b50efa0289a3c86fd50454b683">MVT::i16</a>, InFlag);</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;      InFlag = Result.<a class="code" href="classllvm_1_1SDValue.html#a040481b9bda32faa6b1435532405d88f">getValue</a>(2);</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;      <span class="comment">// Get the low part if needed. Don&#39;t use getCopyFromReg for aliasing</span></div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;      <span class="comment">// registers.</span></div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(Node, 0).use_empty())</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;        ReplaceUses(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(Node, 1),</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;          CurDAG-&gt;getTargetExtractSubreg(X86::sub_8bit, dl, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50caf777e086e32f60c0c87b460964eae7d0">MVT::i8</a>, Result));</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;      <span class="comment">// Shift AX down 8 bits.</span></div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;      Result = <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(CurDAG-&gt;getMachineNode(X86::SHR16ri, dl, MVT::i16,</div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;                                              Result,</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;                                     CurDAG-&gt;getTargetConstant(8, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50caf777e086e32f60c0c87b460964eae7d0">MVT::i8</a>)), 0);</div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;      <span class="comment">// Then truncate it down to i8.</span></div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;      ReplaceUses(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(Node, 1),</div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;        CurDAG-&gt;getTargetExtractSubreg(X86::sub_8bit, dl, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50caf777e086e32f60c0c87b460964eae7d0">MVT::i8</a>, Result));</div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;    }</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;    <span class="comment">// Copy the low half of the result, if it is needed.</span></div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(Node, 0).<a class="code" href="classllvm_1_1SDValue.html#ad07bffbe0e911b0ce1b44b4f7e23468a">use_empty</a>()) {</div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;      <span class="keywordflow">if</span> (ResLo.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>() == 0) {</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;        assert(LoReg &amp;&amp; <span class="stringliteral">&quot;Register for low half is not defined!&quot;</span>);</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;        ResLo = CurDAG-&gt;getCopyFromReg(CurDAG-&gt;getEntryNode(), dl, LoReg, NVT,</div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;                                       InFlag);</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;        InFlag = ResLo.<a class="code" href="classllvm_1_1SDValue.html#a040481b9bda32faa6b1435532405d88f">getValue</a>(2);</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;      }</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;      ReplaceUses(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(Node, 0), ResLo);</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;=&gt; &quot;</span>; ResLo.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#a535ca517df1b4ae62e75475141e65787">dump</a>(CurDAG); <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;    }</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;    <span class="comment">// Copy the high half of the result, if it is needed.</span></div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(Node, 1).<a class="code" href="classllvm_1_1SDValue.html#ad07bffbe0e911b0ce1b44b4f7e23468a">use_empty</a>()) {</div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;      <span class="keywordflow">if</span> (ResHi.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>() == 0) {</div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;        assert(HiReg &amp;&amp; <span class="stringliteral">&quot;Register for high half is not defined!&quot;</span>);</div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;        ResHi = CurDAG-&gt;getCopyFromReg(CurDAG-&gt;getEntryNode(), dl, HiReg, NVT,</div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;                                       InFlag);</div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;        InFlag = ResHi.<a class="code" href="classllvm_1_1SDValue.html#a040481b9bda32faa6b1435532405d88f">getValue</a>(2);</div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;      }</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;      ReplaceUses(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(Node, 1), ResHi);</div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;=&gt; &quot;</span>; ResHi.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#a535ca517df1b4ae62e75475141e65787">dump</a>(CurDAG); <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;    }</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;  }</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a3a874f66e1efe5be79552bbe7ee3121a">ISD::SDIVREM</a>:</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a3a257ffa49107e2db978e8a6e2688ada">ISD::UDIVREM</a>: {</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> N0 = Node-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(0);</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> N1 = Node-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(1);</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;    <span class="keywordtype">bool</span> isSigned = Opcode == <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a3a874f66e1efe5be79552bbe7ee3121a">ISD::SDIVREM</a>;</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;    <span class="keywordflow">if</span> (!isSigned) {</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;      <span class="keywordflow">switch</span> (NVT.<a class="code" href="classllvm_1_1MVT.html#a27bda7d8e8e4f0337650a892f3c9b46a">SimpleTy</a>) {</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;      <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unsupported VT!&quot;</span>);</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50caf777e086e32f60c0c87b460964eae7d0">MVT::i8</a>:  Opc = X86::DIV8r;  MOpc = X86::DIV8m;  <span class="keywordflow">break</span>;</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50cab3be25b50efa0289a3c86fd50454b683">MVT::i16</a>: Opc = X86::DIV16r; MOpc = X86::DIV16m; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>: Opc = X86::DIV32r; MOpc = X86::DIV32m; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca97f56253625b3fe7b371ce76722de4b8">MVT::i64</a>: Opc = X86::DIV64r; MOpc = X86::DIV64m; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;      }</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;      <span class="keywordflow">switch</span> (NVT.<a class="code" href="classllvm_1_1MVT.html#a27bda7d8e8e4f0337650a892f3c9b46a">SimpleTy</a>) {</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;      <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unsupported VT!&quot;</span>);</div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50caf777e086e32f60c0c87b460964eae7d0">MVT::i8</a>:  Opc = X86::IDIV8r;  MOpc = X86::IDIV8m;  <span class="keywordflow">break</span>;</div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50cab3be25b50efa0289a3c86fd50454b683">MVT::i16</a>: Opc = X86::IDIV16r; MOpc = X86::IDIV16m; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>: Opc = X86::IDIV32r; MOpc = X86::IDIV32m; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca97f56253625b3fe7b371ce76722de4b8">MVT::i64</a>: Opc = X86::IDIV64r; MOpc = X86::IDIV64m; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;      }</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;    }</div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;</div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;    <span class="keywordtype">unsigned</span> LoReg, HiReg, ClrReg;</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;    <span class="keywordtype">unsigned</span> SExtOpcode;</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;    <span class="keywordflow">switch</span> (NVT.<a class="code" href="classllvm_1_1MVT.html#a27bda7d8e8e4f0337650a892f3c9b46a">SimpleTy</a>) {</div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;    <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unsupported VT!&quot;</span>);</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50caf777e086e32f60c0c87b460964eae7d0">MVT::i8</a>:</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;      LoReg = <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a802c8408643a0c37e107e7b4b0994c30">X86::AL</a>;  ClrReg = HiReg = <a class="code" href="README-X86-64_8txt.html#a9de23273550c17a1957b1b325a01960e">X86::AH</a>;</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;      SExtOpcode = X86::CBW;</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50cab3be25b50efa0289a3c86fd50454b683">MVT::i16</a>:</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;      LoReg = X86::AX;  HiReg = X86::DX;</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;      ClrReg = X86::DX;</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;      SExtOpcode = X86::CWD;</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>:</div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;      LoReg = <a class="code" href="README-SSE_8txt.html#abd9c765b9afafff59eb14d50c9e9fba1">X86::EAX</a>; ClrReg = HiReg = <a class="code" href="README-SSE_8txt.html#aafb0a6c62a7cfe1538db1d20d759a34b">X86::EDX</a>;</div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;      SExtOpcode = X86::CDQ;</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca97f56253625b3fe7b371ce76722de4b8">MVT::i64</a>:</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;      LoReg = X86::RAX; ClrReg = HiReg = X86::RDX;</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;      SExtOpcode = X86::CQO;</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;    }</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;</div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Tmp0, Tmp1, Tmp2, Tmp3, Tmp4;</div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;    <span class="keywordtype">bool</span> foldedLoad = TryFoldLoad(Node, N1, Tmp0, Tmp1, Tmp2, Tmp3, Tmp4);</div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;    <span class="keywordtype">bool</span> signBitIsZero = CurDAG-&gt;SignBitIsZero(N0);</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> InFlag;</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;    <span class="keywordflow">if</span> (NVT == <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50caf777e086e32f60c0c87b460964eae7d0">MVT::i8</a> &amp;&amp; (!isSigned || signBitIsZero)) {</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;      <span class="comment">// Special case for div8, just use a move with zero extension to AX to</span></div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;      <span class="comment">// clear the upper 8 bits (AH).</span></div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;      <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Tmp0, Tmp1, Tmp2, Tmp3, Tmp4, Move, Chain;</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;      <span class="keywordflow">if</span> (TryFoldLoad(Node, N0, Tmp0, Tmp1, Tmp2, Tmp3, Tmp4)) {</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;        <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Ops[] = { Tmp0, Tmp1, Tmp2, Tmp3, Tmp4, N0.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0) };</div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;        Move =</div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;          <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(CurDAG-&gt;getMachineNode(X86::MOVZX32rm8, dl, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>,</div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;                                         <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca62a222acce6360abd2726719fabc2797">MVT::Other</a>, Ops), 0);</div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;        Chain = Move.<a class="code" href="classllvm_1_1SDValue.html#a040481b9bda32faa6b1435532405d88f">getValue</a>(1);</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;        ReplaceUses(N0.<a class="code" href="classllvm_1_1SDValue.html#a040481b9bda32faa6b1435532405d88f">getValue</a>(1), Chain);</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;        Move =</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;          <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(CurDAG-&gt;getMachineNode(X86::MOVZX32rr8, dl, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>, N0),0);</div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;        Chain = CurDAG-&gt;getEntryNode();</div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;      }</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;      Chain  = CurDAG-&gt;getCopyToReg(Chain, dl, <a class="code" href="README-SSE_8txt.html#abd9c765b9afafff59eb14d50c9e9fba1">X86::EAX</a>, Move, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>());</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;      InFlag = Chain.<a class="code" href="classllvm_1_1SDValue.html#a040481b9bda32faa6b1435532405d88f">getValue</a>(1);</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;      InFlag =</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;        CurDAG-&gt;getCopyToReg(CurDAG-&gt;getEntryNode(), dl,</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;                             LoReg, N0, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>()).getValue(1);</div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;      <span class="keywordflow">if</span> (isSigned &amp;&amp; !signBitIsZero) {</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;        <span class="comment">// Sign extend the low part into the high part.</span></div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;        InFlag =</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;          <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(CurDAG-&gt;getMachineNode(SExtOpcode, dl, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca59a1908cf136662bcfdc11ed49515ca9">MVT::Glue</a>, InFlag),0);</div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;        <span class="comment">// Zero out the high part, effectively zero extending the input.</span></div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;        <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> ClrNode = <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(CurDAG-&gt;getMachineNode(X86::MOV32r0, dl, NVT), 0);       </div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;        <span class="keywordflow">switch</span> (NVT.<a class="code" href="classllvm_1_1MVT.html#a27bda7d8e8e4f0337650a892f3c9b46a">SimpleTy</a>) {</div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50cab3be25b50efa0289a3c86fd50454b683">MVT::i16</a>:</div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;          ClrNode =</div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;              <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(CurDAG-&gt;getMachineNode(</div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;                          <a class="code" href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8a84c9fddf3247a349b7f857c1cbb93e2c">TargetOpcode::EXTRACT_SUBREG</a>, dl, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50cab3be25b50efa0289a3c86fd50454b683">MVT::i16</a>, ClrNode,</div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;                          CurDAG-&gt;getTargetConstant(X86::sub_16bit, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>)),</div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;                      0);</div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>:</div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca97f56253625b3fe7b371ce76722de4b8">MVT::i64</a>:</div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;          ClrNode =</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;              <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(CurDAG-&gt;getMachineNode(</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;                          <a class="code" href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8a9a1c30a208eb023907075d28e7ab2f19">TargetOpcode::SUBREG_TO_REG</a>, dl, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca97f56253625b3fe7b371ce76722de4b8">MVT::i64</a>,</div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;                          CurDAG-&gt;getTargetConstant(0, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca97f56253625b3fe7b371ce76722de4b8">MVT::i64</a>), ClrNode,</div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;                          CurDAG-&gt;getTargetConstant(X86::sub_32bit, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>)),</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;                      0);</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;        <span class="keywordflow">default</span>:</div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;          <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unexpected division source&quot;</span>);</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;        }</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;</div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;        InFlag = CurDAG-&gt;getCopyToReg(CurDAG-&gt;getEntryNode(), dl, ClrReg,</div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;                                      ClrNode, InFlag).getValue(1);</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;      }</div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;    }</div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;</div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;    <span class="keywordflow">if</span> (foldedLoad) {</div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;      <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Ops[] = { Tmp0, Tmp1, Tmp2, Tmp3, Tmp4, N1.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0),</div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;                        InFlag };</div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;      <a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *CNode =</div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;        CurDAG-&gt;getMachineNode(MOpc, dl, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca62a222acce6360abd2726719fabc2797">MVT::Other</a>, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca59a1908cf136662bcfdc11ed49515ca9">MVT::Glue</a>, Ops);</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;      InFlag = <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(CNode, 1);</div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;      <span class="comment">// Update the chain.</span></div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;      ReplaceUses(N1.<a class="code" href="classllvm_1_1SDValue.html#a040481b9bda32faa6b1435532405d88f">getValue</a>(1), <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(CNode, 0));</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;      InFlag =</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;        <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(CurDAG-&gt;getMachineNode(Opc, dl, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca59a1908cf136662bcfdc11ed49515ca9">MVT::Glue</a>, N1, InFlag), 0);</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;    }</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;</div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;    <span class="comment">// Prevent use of AH in a REX instruction by referencing AX instead.</span></div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;    <span class="comment">// Shift it down 8 bits.</span></div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;    <span class="comment">// The current assumption of the register allocator is that isel</span></div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;    <span class="comment">// won&#39;t generate explicit references to the GPR8_NOREX registers. If</span></div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;    <span class="comment">// the allocator and/or the backend get enhanced to be more robust in</span></div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;    <span class="comment">// that regard, this can be, and should be, removed.</span></div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;    <span class="keywordflow">if</span> (HiReg == <a class="code" href="README-X86-64_8txt.html#a9de23273550c17a1957b1b325a01960e">X86::AH</a> &amp;&amp; Subtarget-&gt;<a class="code" href="classllvm_1_1X86Subtarget.html#a5314399c907d77b514ec837e8527a9de">is64Bit</a>() &amp;&amp;</div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;        !<a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(Node, 1).<a class="code" href="classllvm_1_1SDValue.html#ad07bffbe0e911b0ce1b44b4f7e23468a">use_empty</a>()) {</div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;      <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Result = CurDAG-&gt;getCopyFromReg(CurDAG-&gt;getEntryNode(), dl,</div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;                                              X86::AX, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50cab3be25b50efa0289a3c86fd50454b683">MVT::i16</a>, InFlag);</div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;      InFlag = Result.<a class="code" href="classllvm_1_1SDValue.html#a040481b9bda32faa6b1435532405d88f">getValue</a>(2);</div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;</div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;      <span class="comment">// If we also need AL (the quotient), get it by extracting a subreg from</span></div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;      <span class="comment">// Result. The fast register allocator does not like multiple CopyFromReg</span></div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;      <span class="comment">// nodes using aliasing registers.</span></div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(Node, 0).use_empty())</div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;        ReplaceUses(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(Node, 0),</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;          CurDAG-&gt;getTargetExtractSubreg(X86::sub_8bit, dl, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50caf777e086e32f60c0c87b460964eae7d0">MVT::i8</a>, Result));</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;</div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;      <span class="comment">// Shift AX right by 8 bits instead of using AH.</span></div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;      Result = <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(CurDAG-&gt;getMachineNode(X86::SHR16ri, dl, MVT::i16,</div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;                                         Result,</div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;                                         CurDAG-&gt;getTargetConstant(8, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50caf777e086e32f60c0c87b460964eae7d0">MVT::i8</a>)),</div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;                       0);</div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;      ReplaceUses(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(Node, 1),</div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;        CurDAG-&gt;getTargetExtractSubreg(X86::sub_8bit, dl, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50caf777e086e32f60c0c87b460964eae7d0">MVT::i8</a>, Result));</div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;    }</div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;    <span class="comment">// Copy the division (low) result, if it is needed.</span></div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(Node, 0).<a class="code" href="classllvm_1_1SDValue.html#ad07bffbe0e911b0ce1b44b4f7e23468a">use_empty</a>()) {</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;      <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Result = CurDAG-&gt;getCopyFromReg(CurDAG-&gt;getEntryNode(), dl,</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;                                                LoReg, NVT, InFlag);</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;      InFlag = Result.<a class="code" href="classllvm_1_1SDValue.html#a040481b9bda32faa6b1435532405d88f">getValue</a>(2);</div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;      ReplaceUses(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(Node, 0), Result);</div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;=&gt; &quot;</span>; Result.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#a535ca517df1b4ae62e75475141e65787">dump</a>(CurDAG); <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;    }</div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;    <span class="comment">// Copy the remainder (high) result, if it is needed.</span></div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(Node, 1).<a class="code" href="classllvm_1_1SDValue.html#ad07bffbe0e911b0ce1b44b4f7e23468a">use_empty</a>()) {</div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;      <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Result = CurDAG-&gt;getCopyFromReg(CurDAG-&gt;getEntryNode(), dl,</div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;                                              HiReg, NVT, InFlag);</div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;      InFlag = Result.<a class="code" href="classllvm_1_1SDValue.html#a040481b9bda32faa6b1435532405d88f">getValue</a>(2);</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;      ReplaceUses(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(Node, 1), Result);</div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;=&gt; &quot;</span>; Result.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#a535ca517df1b4ae62e75475141e65787">dump</a>(CurDAG); <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;    }</div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;  }</div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;</div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a23260aedef0a54d543d227e57955c652">X86ISD::CMP</a>:</div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a4affb47abdfdd54079d5a2f8c1d3e628">X86ISD::SUB</a>: {</div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;    <span class="comment">// Sometimes a SUB is used to perform comparison.</span></div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;    <span class="keywordflow">if</span> (Opcode == <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a4affb47abdfdd54079d5a2f8c1d3e628">X86ISD::SUB</a> &amp;&amp; Node-&gt;<a class="code" href="classllvm_1_1SDNode.html#ae4cb676e77b9f238058c70faa609a5d7">hasAnyUseOfValue</a>(0))</div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;      <span class="comment">// This node is not a CMP.</span></div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> N0 = Node-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(0);</div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> N1 = Node-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(1);</div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;</div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;    <span class="comment">// Look for (X86cmp (and $op, $imm), 0) and see if we can convert it to</span></div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;    <span class="comment">// use a smaller encoding.</span></div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;    <span class="keywordflow">if</span> (N0.<a class="code" href="classllvm_1_1SDValue.html#a0caf6a31d8034336a9ba7791a5f583f1">getOpcode</a>() == <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a> &amp;&amp; N0.<a class="code" href="classllvm_1_1SDValue.html#a97b0f24f3e52f030830fca6fbfcbd37d">hasOneUse</a>() &amp;&amp;</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;        <a class="code" href="X86ISelDAGToDAG_8cpp.html#a8ad82d103604e27f8e067e0edfce5347">HasNoSignedComparisonUses</a>(Node))</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;      <span class="comment">// Look past the truncate if CMP is the only use of it.</span></div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;      N0 = N0.<a class="code" href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a>(0);</div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;    <span class="keywordflow">if</span> ((N0.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#af0d328f3f61168f4ea7d6e4044af4f97">getOpcode</a>() == <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a> ||</div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;         (N0.<a class="code" href="classllvm_1_1SDValue.html#a64881a6ca7154fccaeb92cdb1e1e745e">getResNo</a>() == 0 &amp;&amp; N0.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#af0d328f3f61168f4ea7d6e4044af4f97">getOpcode</a>() == <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a8957fd90a0c765af6746fb0849ee1a8a">X86ISD::AND</a>)) &amp;&amp;</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;        N0.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#a52753947fce3a01b1c18dd4713c587e8">hasOneUse</a>() &amp;&amp;</div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;        N0.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>() != <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50caf777e086e32f60c0c87b460964eae7d0">MVT::i8</a> &amp;&amp;</div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;        <a class="code" href="namespacellvm_1_1X86.html#a43e102a1c33f2dffc750026a05828f52">X86::isZeroNode</a>(N1)) {</div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;      <a class="code" href="classllvm_1_1ConstantSDNode.html">ConstantSDNode</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantSDNode.html">ConstantSDNode</a>&gt;(N0.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(1));</div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;      <span class="keywordflow">if</span> (!C) <span class="keywordflow">break</span>;</div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;</div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;      <span class="comment">// For example, convert &quot;testl %eax, $8&quot; to &quot;testb %al, $8&quot;</span></div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;      <span class="keywordflow">if</span> ((C-&gt;<a class="code" href="classllvm_1_1ConstantSDNode.html#a1e9365c991dd55e65e9d5ab5653812e4">getZExtValue</a>() &amp; ~UINT64_C(0xff)) == 0 &amp;&amp;</div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;          (!(C-&gt;<a class="code" href="classllvm_1_1ConstantSDNode.html#a1e9365c991dd55e65e9d5ab5653812e4">getZExtValue</a>() &amp; 0x80) ||</div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;           <a class="code" href="X86ISelDAGToDAG_8cpp.html#a8ad82d103604e27f8e067e0edfce5347">HasNoSignedComparisonUses</a>(Node))) {</div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;        <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Imm = CurDAG-&gt;getTargetConstant(C-&gt;<a class="code" href="classllvm_1_1ConstantSDNode.html#a1e9365c991dd55e65e9d5ab5653812e4">getZExtValue</a>(), <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50caf777e086e32f60c0c87b460964eae7d0">MVT::i8</a>);</div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;        <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = N0.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(0);</div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;</div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;        <span class="comment">// On x86-32, only the ABCD registers have 8-bit subregisters.</span></div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;        <span class="keywordflow">if</span> (!Subtarget-&gt;<a class="code" href="classllvm_1_1X86Subtarget.html#a5314399c907d77b514ec837e8527a9de">is64Bit</a>()) {</div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;          <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *TRC;</div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;          <span class="keywordflow">switch</span> (N0.<a class="code" href="classllvm_1_1SDValue.html#a8bc8606044f2c3cdb6271c0378e0f9cf">getSimpleValueType</a>().<a class="code" href="classllvm_1_1MVT.html#a27bda7d8e8e4f0337650a892f3c9b46a">SimpleTy</a>) {</div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>: TRC = &amp;X86::GR32_ABCDRegClass; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50cab3be25b50efa0289a3c86fd50454b683">MVT::i16</a>: TRC = &amp;X86::GR16_ABCDRegClass; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;          <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unsupported TEST operand type!&quot;</span>);</div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;          }</div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;          <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> RC = CurDAG-&gt;getTargetConstant(TRC-&gt;<a class="code" href="classllvm_1_1TargetRegisterClass.html#a25f9ba8e78af92ca34f9c1bba7881601">getID</a>(), <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>);</div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;          Reg = <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(CurDAG-&gt;getMachineNode(<a class="code" href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8ad32233180a0499e8a9d72b83c5098d0a">X86::COPY_TO_REGCLASS</a>, dl,</div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;                                               Reg.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>(), <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>, RC), 0);</div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;        }</div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;</div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;        <span class="comment">// Extract the l-register.</span></div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;        <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Subreg = CurDAG-&gt;getTargetExtractSubreg(X86::sub_8bit, dl,</div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;                                                        <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50caf777e086e32f60c0c87b460964eae7d0">MVT::i8</a>, Reg);</div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;</div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;        <span class="comment">// Emit a testb.</span></div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;        <a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *NewNode = CurDAG-&gt;getMachineNode(X86::TEST8ri, dl, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>,</div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;                                                 Subreg, Imm);</div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;        <span class="comment">// Replace SUB|CMP with TEST, since SUB has two outputs while TEST has</span></div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;        <span class="comment">// one, do not call ReplaceAllUsesWith.</span></div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;        ReplaceUses(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(Node, (Opcode == <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a4affb47abdfdd54079d5a2f8c1d3e628">X86ISD::SUB</a> ? 1 : 0)),</div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;                    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(NewNode, 0));</div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;        <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;      }</div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;</div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;      <span class="comment">// For example, &quot;testl %eax, $2048&quot; to &quot;testb %ah, $8&quot;.</span></div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;      <span class="keywordflow">if</span> ((C-&gt;<a class="code" href="classllvm_1_1ConstantSDNode.html#a1e9365c991dd55e65e9d5ab5653812e4">getZExtValue</a>() &amp; ~UINT64_C(0xff00)) == 0 &amp;&amp;</div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;          (!(C-&gt;<a class="code" href="classllvm_1_1ConstantSDNode.html#a1e9365c991dd55e65e9d5ab5653812e4">getZExtValue</a>() &amp; 0x8000) ||</div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;           <a class="code" href="X86ISelDAGToDAG_8cpp.html#a8ad82d103604e27f8e067e0edfce5347">HasNoSignedComparisonUses</a>(Node))) {</div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;        <span class="comment">// Shift the immediate right by 8 bits.</span></div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;        <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> ShiftedImm = CurDAG-&gt;getTargetConstant(C-&gt;<a class="code" href="classllvm_1_1ConstantSDNode.html#a1e9365c991dd55e65e9d5ab5653812e4">getZExtValue</a>() &gt;&gt; 8,</div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;                                                       <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50caf777e086e32f60c0c87b460964eae7d0">MVT::i8</a>);</div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;        <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = N0.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(0);</div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;</div><div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;        <span class="comment">// Put the value in an ABCD register.</span></div><div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *TRC;</div><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;        <span class="keywordflow">switch</span> (N0.<a class="code" href="classllvm_1_1SDValue.html#a8bc8606044f2c3cdb6271c0378e0f9cf">getSimpleValueType</a>().<a class="code" href="classllvm_1_1MVT.html#a27bda7d8e8e4f0337650a892f3c9b46a">SimpleTy</a>) {</div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca97f56253625b3fe7b371ce76722de4b8">MVT::i64</a>: TRC = &amp;X86::GR64_ABCDRegClass; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>: TRC = &amp;X86::GR32_ABCDRegClass; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50cab3be25b50efa0289a3c86fd50454b683">MVT::i16</a>: TRC = &amp;X86::GR16_ABCDRegClass; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;        <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unsupported TEST operand type!&quot;</span>);</div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;        }</div><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;        <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> RC = CurDAG-&gt;getTargetConstant(TRC-&gt;<a class="code" href="classllvm_1_1TargetRegisterClass.html#a25f9ba8e78af92ca34f9c1bba7881601">getID</a>(), <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>);</div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;        Reg = <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(CurDAG-&gt;getMachineNode(<a class="code" href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8ad32233180a0499e8a9d72b83c5098d0a">X86::COPY_TO_REGCLASS</a>, dl,</div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;                                             Reg.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>(), <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>, RC), 0);</div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;</div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;        <span class="comment">// Extract the h-register.</span></div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;        <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Subreg = CurDAG-&gt;getTargetExtractSubreg(X86::sub_8bit_hi, dl,</div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;                                                        <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50caf777e086e32f60c0c87b460964eae7d0">MVT::i8</a>, Reg);</div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;</div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;        <span class="comment">// Emit a testb.  The EXTRACT_SUBREG becomes a COPY that can only</span></div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;        <span class="comment">// target GR8_NOREX registers, so make sure the register class is</span></div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;        <span class="comment">// forced.</span></div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;        <a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *NewNode = CurDAG-&gt;getMachineNode(X86::TEST8ri_NOREX, dl,</div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;                                                 <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>, Subreg, ShiftedImm);</div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;        <span class="comment">// Replace SUB|CMP with TEST, since SUB has two outputs while TEST has</span></div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;        <span class="comment">// one, do not call ReplaceAllUsesWith.</span></div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;        ReplaceUses(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(Node, (Opcode == <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a4affb47abdfdd54079d5a2f8c1d3e628">X86ISD::SUB</a> ? 1 : 0)),</div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;                    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(NewNode, 0));</div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;        <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;      }</div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;</div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;      <span class="comment">// For example, &quot;testl %eax, $32776&quot; to &quot;testw %ax, $32776&quot;.</span></div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;      <span class="keywordflow">if</span> ((C-&gt;<a class="code" href="classllvm_1_1ConstantSDNode.html#a1e9365c991dd55e65e9d5ab5653812e4">getZExtValue</a>() &amp; ~UINT64_C(0xffff)) == 0 &amp;&amp;</div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;          N0.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>() != <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50cab3be25b50efa0289a3c86fd50454b683">MVT::i16</a> &amp;&amp;</div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;          (!(C-&gt;<a class="code" href="classllvm_1_1ConstantSDNode.html#a1e9365c991dd55e65e9d5ab5653812e4">getZExtValue</a>() &amp; 0x8000) ||</div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;           <a class="code" href="X86ISelDAGToDAG_8cpp.html#a8ad82d103604e27f8e067e0edfce5347">HasNoSignedComparisonUses</a>(Node))) {</div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;        <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Imm = CurDAG-&gt;getTargetConstant(C-&gt;<a class="code" href="classllvm_1_1ConstantSDNode.html#a1e9365c991dd55e65e9d5ab5653812e4">getZExtValue</a>(), <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50cab3be25b50efa0289a3c86fd50454b683">MVT::i16</a>);</div><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;        <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = N0.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(0);</div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;</div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;        <span class="comment">// Extract the 16-bit subregister.</span></div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;        <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Subreg = CurDAG-&gt;getTargetExtractSubreg(X86::sub_16bit, dl,</div><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;                                                        <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50cab3be25b50efa0289a3c86fd50454b683">MVT::i16</a>, Reg);</div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;</div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;        <span class="comment">// Emit a testw.</span></div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;        <a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *NewNode = CurDAG-&gt;getMachineNode(X86::TEST16ri, dl, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>,</div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;                                                 Subreg, Imm);</div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;        <span class="comment">// Replace SUB|CMP with TEST, since SUB has two outputs while TEST has</span></div><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;        <span class="comment">// one, do not call ReplaceAllUsesWith.</span></div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;        ReplaceUses(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(Node, (Opcode == <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a4affb47abdfdd54079d5a2f8c1d3e628">X86ISD::SUB</a> ? 1 : 0)),</div><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;                    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(NewNode, 0));</div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;        <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;      }</div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;</div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;      <span class="comment">// For example, &quot;testq %rax, $268468232&quot; to &quot;testl %eax, $268468232&quot;.</span></div><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;      <span class="keywordflow">if</span> ((C-&gt;<a class="code" href="classllvm_1_1ConstantSDNode.html#a1e9365c991dd55e65e9d5ab5653812e4">getZExtValue</a>() &amp; ~UINT64_C(0xffffffff)) == 0 &amp;&amp;</div><div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;          N0.<a class="code" href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a>() == <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca97f56253625b3fe7b371ce76722de4b8">MVT::i64</a> &amp;&amp;</div><div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;          (!(C-&gt;<a class="code" href="classllvm_1_1ConstantSDNode.html#a1e9365c991dd55e65e9d5ab5653812e4">getZExtValue</a>() &amp; 0x80000000) ||</div><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;           <a class="code" href="X86ISelDAGToDAG_8cpp.html#a8ad82d103604e27f8e067e0edfce5347">HasNoSignedComparisonUses</a>(Node))) {</div><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;        <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Imm = CurDAG-&gt;getTargetConstant(C-&gt;<a class="code" href="classllvm_1_1ConstantSDNode.html#a1e9365c991dd55e65e9d5ab5653812e4">getZExtValue</a>(), <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>);</div><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;        <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = N0.<a class="code" href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a>()-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(0);</div><div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;</div><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;        <span class="comment">// Extract the 32-bit subregister.</span></div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;        <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Subreg = CurDAG-&gt;getTargetExtractSubreg(X86::sub_32bit, dl,</div><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;                                                        <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>, Reg);</div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;</div><div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;        <span class="comment">// Emit a testl.</span></div><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;        <a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *NewNode = CurDAG-&gt;getMachineNode(X86::TEST32ri, dl, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>,</div><div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;                                                 Subreg, Imm);</div><div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;        <span class="comment">// Replace SUB|CMP with TEST, since SUB has two outputs while TEST has</span></div><div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;        <span class="comment">// one, do not call ReplaceAllUsesWith.</span></div><div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;        ReplaceUses(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(Node, (Opcode == <a class="code" href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a4affb47abdfdd54079d5a2f8c1d3e628">X86ISD::SUB</a> ? 1 : 0)),</div><div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;                    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(NewNode, 0));</div><div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;        <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;      }</div><div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;    }</div><div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;  }</div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a047178c3b2c6a5df40ae22a407b8aca9">ISD::STORE</a>: {</div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;    <span class="comment">// Change a chain of {load; incr or dec; store} of the same value into</span></div><div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;    <span class="comment">// a simple increment or decrement through memory of that value, if the</span></div><div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;    <span class="comment">// uses of the modified value and its address are suitable.</span></div><div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;    <span class="comment">// The DEC64m tablegen pattern is currently not able to match the case where</span></div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;    <span class="comment">// the EFLAGS on the original DEC are used. (This also applies to</span></div><div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;    <span class="comment">// {INC,DEC}X{64,32,16,8}.)</span></div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;    <span class="comment">// We&#39;ll need to improve tablegen to allow flags to be transferred from a</span></div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;    <span class="comment">// node in the pattern to the result node.  probably with a new keyword</span></div><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;    <span class="comment">// for example, we have this</span></div><div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;    <span class="comment">// def DEC64m : RI&lt;0xFF, MRM1m, (outs), (ins i64mem:$dst), &quot;dec{q}\t$dst&quot;,</span></div><div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;    <span class="comment">//  [(store (add (loadi64 addr:$dst), -1), addr:$dst),</span></div><div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;    <span class="comment">//   (implicit EFLAGS)]&gt;;</span></div><div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;    <span class="comment">// but maybe need something like this</span></div><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;    <span class="comment">// def DEC64m : RI&lt;0xFF, MRM1m, (outs), (ins i64mem:$dst), &quot;dec{q}\t$dst&quot;,</span></div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;    <span class="comment">//  [(store (add (loadi64 addr:$dst), -1), addr:$dst),</span></div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;    <span class="comment">//   (transferrable EFLAGS)]&gt;;</span></div><div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;</div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;    <a class="code" href="classllvm_1_1StoreSDNode.html">StoreSDNode</a> *StoreNode = cast&lt;StoreSDNode&gt;(Node);</div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> StoredVal = StoreNode-&gt;<a class="code" href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a>(1);</div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;    <span class="keywordtype">unsigned</span> Opc = StoredVal-&gt;<a class="code" href="classllvm_1_1SDNode.html#af0d328f3f61168f4ea7d6e4044af4f97">getOpcode</a>();</div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;</div><div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;    <a class="code" href="classllvm_1_1LoadSDNode.html">LoadSDNode</a> *LoadNode = 0;</div><div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> InputChain;</div><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="X86ISelDAGToDAG_8cpp.html#ae28feb8429fd7afe136662ecbedb0c8c">isLoadIncOrDecStore</a>(StoreNode, Opc, StoredVal, CurDAG,</div><div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;                             LoadNode, InputChain))</div><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;</div><div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;    <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Base, Scale, Index, Disp, Segment;</div><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;    <span class="keywordflow">if</span> (!SelectAddr(LoadNode, LoadNode-&gt;<a class="code" href="classllvm_1_1LoadSDNode.html#a3ded48ce66b58b7e7e143991df5dbfae">getBasePtr</a>(),</div><div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;                    Base, Scale, Index, Disp, Segment))</div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;</div><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;    <a class="code" href="classllvm_1_1MachineMemOperand.html">MachineSDNode::mmo_iterator</a> MemOp = MF-&gt;allocateMemRefsArray(2);</div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;    MemOp[0] = StoreNode-&gt;<a class="code" href="classllvm_1_1MemSDNode.html#a89e2b5e3fb867b4040f893c6ae3d2132">getMemOperand</a>();</div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;    MemOp[1] = LoadNode-&gt;<a class="code" href="classllvm_1_1MemSDNode.html#a89e2b5e3fb867b4040f893c6ae3d2132">getMemOperand</a>();</div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Ops[] = { Base, Scale, Index, Disp, Segment, InputChain };</div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;    <a class="code" href="structllvm_1_1EVT.html">EVT</a> LdVT = LoadNode-&gt;<a class="code" href="classllvm_1_1MemSDNode.html#a7cead3a2a7771e61083bcc6959915a13">getMemoryVT</a>();</div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;    <span class="keywordtype">unsigned</span> newOpc = <a class="code" href="X86ISelDAGToDAG_8cpp.html#a7183c66b968f67a612e2be5fd902d3e9">getFusedLdStOpcode</a>(LdVT, Opc);</div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;    <a class="code" href="classllvm_1_1MachineSDNode.html">MachineSDNode</a> *Result = CurDAG-&gt;getMachineNode(newOpc,</div><div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;                                                   <a class="code" href="classllvm_1_1SDLoc.html">SDLoc</a>(Node),</div><div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;                                                   <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>, <a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca62a222acce6360abd2726719fabc2797">MVT::Other</a>, Ops);</div><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;    Result-&gt;<a class="code" href="classllvm_1_1MachineSDNode.html#a749dee1941db7c506fde33058eb63372">setMemRefs</a>(MemOp, MemOp + 2);</div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;</div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;    ReplaceUses(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(StoreNode, 0), <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(Result, 1));</div><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;    ReplaceUses(<a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(StoredVal.getNode(), 1), <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>(Result, 0));</div><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;</div><div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;    <span class="keywordflow">return</span> Result;</div><div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;  }</div><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;  }</div><div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;</div><div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;  <a class="code" href="classllvm_1_1SDNode.html">SDNode</a> *ResNode = SelectCode(Node);</div><div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;</div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;=&gt; &quot;</span>;</div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;        <span class="keywordflow">if</span> (ResNode == NULL || ResNode == Node)</div><div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;          Node-&gt;<a class="code" href="classllvm_1_1SDNode.html#a535ca517df1b4ae62e75475141e65787">dump</a>(CurDAG);</div><div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;          ResNode-&gt;<a class="code" href="classllvm_1_1SDNode.html#a535ca517df1b4ae62e75475141e65787">dump</a>(CurDAG);</div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;</div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;  <span class="keywordflow">return</span> ResNode;</div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;}</div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;</div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;<span class="keywordtype">bool</span> X86DAGToDAGISel::</div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;SelectInlineAsmMemoryOperand(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> &amp;Op, <span class="keywordtype">char</span> ConstraintCode,</div><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;                             std::vector&lt;SDValue&gt; &amp;OutOps) {</div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;  <a class="code" href="classllvm_1_1SDValue.html">SDValue</a> Op0, Op1, Op2, Op3, Op4;</div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;  <span class="keywordflow">switch</span> (ConstraintCode) {</div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;  <span class="keywordflow">case</span> <span class="charliteral">&#39;o&#39;</span>:   <span class="comment">// offsetable        ??</span></div><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;  <span class="keywordflow">case</span> <span class="charliteral">&#39;v&#39;</span>:   <span class="comment">// not offsetable    ??</span></div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;  <span class="keywordflow">default</span>: <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;  <span class="keywordflow">case</span> <span class="charliteral">&#39;m&#39;</span>:   <span class="comment">// memory</span></div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;    <span class="keywordflow">if</span> (!SelectAddr(0, Op, Op0, Op1, Op2, Op3, Op4))</div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;  }</div><div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;</div><div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;  OutOps.push_back(Op0);</div><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;  OutOps.push_back(Op1);</div><div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;  OutOps.push_back(Op2);</div><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;  OutOps.push_back(Op3);</div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;  OutOps.push_back(Op4);</div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;}</div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;<span class="comment">/// createX86ISelDag - This pass converts a legalized DAG into a</span></div><div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;<span class="comment">/// X86-specific DAG, ready for instruction scheduling.</span></div><div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l02809"></a><span class="lineno"><a class="line" href="namespacellvm.html#a01c81c4626919360d8b4a30f1c21d823"> 2809</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a> *<a class="code" href="namespacellvm.html#a01c81c4626919360d8b4a30f1c21d823">llvm::createX86ISelDag</a>(<a class="code" href="classllvm_1_1X86TargetMachine.html">X86TargetMachine</a> &amp;<a class="code" href="namespacellvm_1_1SystemZISD.html#a9a3c050e4bfe8d0d09d74c979f5bb121a68ace50a32835aa0562cf8f9694ba510">TM</a>,</div><div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;                                     <a class="code" href="namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">CodeGenOpt::Level</a> OptLevel) {</div><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> X86DAGToDAGISel(TM, OptLevel);</div><div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;}</div><div class="ttc" id="classllvm_1_1SDValue_html_a8bc8606044f2c3cdb6271c0378e0f9cf"><div class="ttname"><a href="classllvm_1_1SDValue.html#a8bc8606044f2c3cdb6271c0378e0f9cf">llvm::SDValue::getSimpleValueType</a></div><div class="ttdeci">MVT getSimpleValueType() const </div><div class="ttdoc">Return the simple ValueType of the referenced return value. </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00134">SelectionDAGNodes.h:134</a></div></div>
<div class="ttc" id="namespacellvm_html_a9bf6430c1a0cf078ee3f9f520fa407f0"><div class="ttname"><a href="namespacellvm.html#a9bf6430c1a0cf078ee3f9f520fa407f0">llvm::isInt&lt; 32 &gt;</a></div><div class="ttdeci">bool isInt&lt; 32 &gt;(int64_t x)</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00276">MathExtras.h:276</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90ad1b6409ab0e1bfe754e42a8759f497d3"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ad1b6409ab0e1bfe754e42a8759f497d3">llvm::Intrinsic::x86_avx2_gather_q_pd</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02492">Intrinsics.h:2492</a></div></div>
<div class="ttc" id="X86ISelDAGToDAG_8cpp_html_afc4e10b4f2ab2d548ab80b30f3b712e9a865555c9f2e0458a7078486aa1b3254f"><div class="ttname"><a href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9a865555c9f2e0458a7078486aa1b3254f">AND</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelDAGToDAG_8cpp_source.html#l01588">X86ISelDAGToDAG.cpp:1588</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86ISD_html_ab81d298b0f48499395110a6055048b28a228897f3e04d1ff0e540959020fad48d"><div class="ttname"><a href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a228897f3e04d1ff0e540959020fad48d">llvm::X86ISD::ATOMMIN64_DAG</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8h_source.html#l00410">X86ISelLowering.h:410</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00127">SmallVector.h:127</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86ISD_html_ab81d298b0f48499395110a6055048b28a935102b3b74492f7a1b4adf4d487469f"><div class="ttname"><a href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a935102b3b74492f7a1b4adf4d487469f">llvm::X86ISD::ATOMOR64_DAG</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8h_source.html#l00405">X86ISelLowering.h:405</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110adaf9a3cb5c2ef5eb713bd6bf4ae23aeb"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110adaf9a3cb5c2ef5eb713bd6bf4ae23aeb">llvm::ISD::FP_ROUND</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00393">ISDOpcodes.h:393</a></div></div>
<div class="ttc" id="X86ISelDAGToDAG_8cpp_html_ac0a91fd2157f9b3a8880ce8373396108"><div class="ttname"><a href="X86ISelDAGToDAG_8cpp.html#ac0a91fd2157f9b3a8880ce8373396108">isCalleeLoad</a></div><div class="ttdeci">static bool isCalleeLoad(SDValue Callee, SDValue &amp;Chain, bool HasCallSeq)</div><div class="ttdef"><b>Definition:</b> <a href="X86ISelDAGToDAG_8cpp_source.html#l00401">X86ISelDAGToDAG.cpp:401</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00236">SmallVector.h:236</a></div></div>
<div class="ttc" id="namespacellvm_1_1CodeModel_html_afc59396a9e5809fc92938e203d91a8df"><div class="ttname"><a href="namespacellvm_1_1CodeModel.html#afc59396a9e5809fc92938e203d91a8df">llvm::CodeModel::Model</a></div><div class="ttdeci">Model</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_8h_source.html#l00030">CodeGen.h:30</a></div></div>
<div class="ttc" id="classllvm_1_1SelectionDAG_html_a13ad902229b8b6b3a7a1d29dedac01e0"><div class="ttname"><a href="classllvm_1_1SelectionDAG.html#a13ad902229b8b6b3a7a1d29dedac01e0">llvm::SelectionDAG::getConstant</a></div><div class="ttdeci">SDValue getConstant(uint64_t Val, EVT VT, bool isTarget=false)</div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAG_8cpp_source.html#l00959">SelectionDAG.cpp:959</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86ISD_html_ab81d298b0f48499395110a6055048b28a8e74b6dccfb024d3f1f6dc71554e5513"><div class="ttname"><a href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a8e74b6dccfb024d3f1f6dc71554e5513">llvm::X86ISD::CALL</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8h_source.html#l00081">X86ISelLowering.h:81</a></div></div>
<div class="ttc" id="classllvm_1_1SDValue_html_a040481b9bda32faa6b1435532405d88f"><div class="ttname"><a href="classllvm_1_1SDValue.html#a040481b9bda32faa6b1435532405d88f">llvm::SDValue::getValue</a></div><div class="ttdeci">SDValue getValue(unsigned R) const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00122">SelectionDAGNodes.h:122</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantPoolSDNode_html"><div class="ttname"><a href="classllvm_1_1ConstantPoolSDNode.html">llvm::ConstantPoolSDNode</a></div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l01373">SelectionDAGNodes.h:1373</a></div></div>
<div class="ttc" id="classllvm_1_1MVT_html_afd69b4f2dff97a2d7c0192cc769ef50ca59a1908cf136662bcfdc11ed49515ca9"><div class="ttname"><a href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca59a1908cf136662bcfdc11ed49515ca9">llvm::MVT::Glue</a></div><div class="ttdef"><b>Definition:</b> <a href="ValueTypes_8h_source.html#l00118">ValueTypes.h:118</a></div></div>
<div class="ttc" id="namespacellvm_1_1SPII_html_a11e9b8fca4a074643a6a21f444e51406a5069619ca8fdce305534f3fe85091a0f"><div class="ttname"><a href="namespacellvm_1_1SPII.html#a11e9b8fca4a074643a6a21f444e51406a5069619ca8fdce305534f3fe85091a0f">llvm::SPII::Load</a></div><div class="ttdef"><b>Definition:</b> <a href="SparcInstrInfo_8h_source.html#l00031">SparcInstrInfo.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1MVT_html_afd69b4f2dff97a2d7c0192cc769ef50ca97f56253625b3fe7b371ce76722de4b8"><div class="ttname"><a href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca97f56253625b3fe7b371ce76722de4b8">llvm::MVT::i64</a></div><div class="ttdef"><b>Definition:</b> <a href="ValueTypes_8h_source.html#l00047">ValueTypes.h:47</a></div></div>
<div class="ttc" id="Instructions_8h_html"><div class="ttname"><a href="Instructions_8h.html">Instructions.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1AArch64II_html_ae22a65863fdb02ce99abf9ee08bcbb71a48b42f4ac550b5ae203477aad0eb5e75"><div class="ttname"><a href="namespacellvm_1_1AArch64II.html#ae22a65863fdb02ce99abf9ee08bcbb71a48b42f4ac550b5ae203477aad0eb5e75">llvm::AArch64II::MO_NO_FLAG</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l01062">AArch64BaseInfo.h:1062</a></div></div>
<div class="ttc" id="classllvm_1_1SDNode_html_a535ca517df1b4ae62e75475141e65787"><div class="ttname"><a href="classllvm_1_1SDNode.html#a535ca517df1b4ae62e75475141e65787">llvm::SDNode::dump</a></div><div class="ttdeci">void dump() const </div><div class="ttdoc">dump - Dump this node, for debugging. </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGDumper_8cpp_source.html#l00328">SelectionDAGDumper.cpp:328</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="classllvm_1_1X86TargetMachine_html"><div class="ttname"><a href="classllvm_1_1X86TargetMachine.html">llvm::X86TargetMachine</a></div><div class="ttdef"><b>Definition:</b> <a href="X86TargetMachine_8h_source.html#l00032">X86TargetMachine.h:32</a></div></div>
<div class="ttc" id="namespacellvm_1_1CodeModel_html_afc59396a9e5809fc92938e203d91a8dfaa2554ef60dc191c6005ba9eecbc9aea0"><div class="ttname"><a href="namespacellvm_1_1CodeModel.html#afc59396a9e5809fc92938e203d91a8dfaa2554ef60dc191c6005ba9eecbc9aea0">llvm::CodeModel::Small</a></div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_8h_source.html#l00030">CodeGen.h:30</a></div></div>
<div class="ttc" id="classllvm_1_1MachineSDNode_html_a749dee1941db7c506fde33058eb63372"><div class="ttname"><a href="classllvm_1_1MachineSDNode.html#a749dee1941db7c506fde33058eb63372">llvm::MachineSDNode::setMemRefs</a></div><div class="ttdeci">void setMemRefs(mmo_iterator NewMemRefs, mmo_iterator NewMemRefsEnd)</div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l01805">SelectionDAGNodes.h:1805</a></div></div>
<div class="ttc" id="classllvm_1_1SDNode_html_a52753947fce3a01b1c18dd4713c587e8"><div class="ttname"><a href="classllvm_1_1SDNode.html#a52753947fce3a01b1c18dd4713c587e8">llvm::SDNode::hasOneUse</a></div><div class="ttdeci">bool hasOneUse() const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00406">SelectionDAGNodes.h:406</a></div></div>
<div class="ttc" id="classllvm_1_1SDNode_html_a51dcb6414be6f4b441df7152e05de8f5"><div class="ttname"><a href="classllvm_1_1SDNode.html#a51dcb6414be6f4b441df7152e05de8f5">llvm::SDNode::hasNUsesOfValue</a></div><div class="ttdeci">bool hasNUsesOfValue(unsigned NUses, unsigned Value) const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAG_8cpp_source.html#l06119">SelectionDAG.cpp:6119</a></div></div>
<div class="ttc" id="X86ISelDAGToDAG_8cpp_html_ade4f4c1f5a55552504026f8574a9c893"><div class="ttname"><a href="X86ISelDAGToDAG_8cpp.html#ade4f4c1f5a55552504026f8574a9c893">FoldMaskAndShiftToScale</a></div><div class="ttdeci">static bool FoldMaskAndShiftToScale(SelectionDAG &amp;DAG, SDValue N, uint64_t Mask, SDValue Shift, SDValue X, X86ISelAddressMode &amp;AM)</div><div class="ttdef"><b>Definition:</b> <a href="X86ISelDAGToDAG_8cpp_source.html#l00883">X86ISelDAGToDAG.cpp:883</a></div></div>
<div class="ttc" id="Type_8h_html"><div class="ttname"><a href="Type_8h.html">Type.h</a></div></div>
<div class="ttc" id="classllvm_1_1SDValue_html_a97b0f24f3e52f030830fca6fbfcbd37d"><div class="ttname"><a href="classllvm_1_1SDValue.html#a97b0f24f3e52f030830fca6fbfcbd37d">llvm::SDValue::hasOneUse</a></div><div class="ttdeci">bool hasOneUse() const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00870">SelectionDAGNodes.h:870</a></div></div>
<div class="ttc" id="classllvm_1_1X86Subtarget_html_ad1c6e0b2b8cf40bb0c57dad5dbf0ea66"><div class="ttname"><a href="classllvm_1_1X86Subtarget.html#ad1c6e0b2b8cf40bb0c57dad5dbf0ea66">llvm::X86Subtarget::isTargetCygMing</a></div><div class="ttdeci">bool isTargetCygMing() const </div><div class="ttdef"><b>Definition:</b> <a href="X86Subtarget_8h_source.html#l00329">X86Subtarget.h:329</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a79c959df09509d7ff66d9b04bc40d18d"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a79c959df09509d7ff66d9b04bc40d18d">llvm::ISD::UMUL_LOHI</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00181">ISDOpcodes.h:181</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86II_html_a97dc14052814702ba0e2b14fb14dd02da50aa2061845b3ff4e6e2242d762c6a80"><div class="ttname"><a href="namespacellvm_1_1X86II.html#a97dc14052814702ba0e2b14fb14dd02da50aa2061845b3ff4e6e2242d762c6a80">llvm::X86II::FS</a></div><div class="ttdef"><b>Definition:</b> <a href="X86BaseInfo_8h_source.html#l00426">X86BaseInfo.h:426</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86ISD_html_ab81d298b0f48499395110a6055048b28a4affb47abdfdd54079d5a2f8c1d3e628"><div class="ttname"><a href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a4affb47abdfdd54079d5a2f8c1d3e628">llvm::X86ISD::SUB</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8h_source.html#l00292">X86ISelLowering.h:292</a></div></div>
<div class="ttc" id="X86ISelDAGToDAG_8cpp_html_afc4e10b4f2ab2d548ab80b30f3b712e9a443b2be81062f015608a765700db66ec"><div class="ttname"><a href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9a443b2be81062f015608a765700db66ec">AtomicOpcEnd</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelDAGToDAG_8cpp_source.html#l01590">X86ISelDAGToDAG.cpp:1590</a></div></div>
<div class="ttc" id="classllvm_1_1X86InstrInfo_html"><div class="ttname"><a href="classllvm_1_1X86InstrInfo.html">llvm::X86InstrInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="X86InstrInfo_8h_source.html#l00130">X86InstrInfo.h:130</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_abee7ecb577fcade34eb16ccb7f503e31ade1c53e7b8a373e22ec53ff7bcbace9f"><div class="ttname"><a href="namespacellvm_1_1ISD.html#abee7ecb577fcade34eb16ccb7f503e31ade1c53e7b8a373e22ec53ff7bcbace9f">llvm::ISD::UNINDEXED</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00679">ISDOpcodes.h:679</a></div></div>
<div class="ttc" id="classllvm_1_1RegisterSDNode_html_a32d3064d680bb98aeec9cabf85995d31"><div class="ttname"><a href="classllvm_1_1RegisterSDNode.html#a32d3064d680bb98aeec9cabf85995d31">llvm::RegisterSDNode::getReg</a></div><div class="ttdeci">unsigned getReg() const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l01539">SelectionDAGNodes.h:1539</a></div></div>
<div class="ttc" id="namespacellvm_html_a3f2f98c2a67c9e79f58aad9150a62e42"><div class="ttname"><a href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">llvm::dyn_cast</a></div><div class="ttdeci">enable_if_c&lt;!is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="Casting_8h_source.html#l00266">Casting.h:266</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a20084f62caecb0db80ad71bdabda73c2"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a20084f62caecb0db80ad71bdabda73c2">llvm::ISD::ADDC</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00195">ISDOpcodes.h:195</a></div></div>
<div class="ttc" id="X86ISelDAGToDAG_8cpp_html_afc4e10b4f2ab2d548ab80b30f3b712e9acfcf145f2788bf340ff3f3098bc54909"><div class="ttname"><a href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9acfcf145f2788bf340ff3f3098bc54909">ADD</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelDAGToDAG_8cpp_source.html#l01583">X86ISelDAGToDAG.cpp:1583</a></div></div>
<div class="ttc" id="namespacellvm_1_1SystemZISD_html_a9a3c050e4bfe8d0d09d74c979f5bb121a68ace50a32835aa0562cf8f9694ba510"><div class="ttname"><a href="namespacellvm_1_1SystemZISD.html#a9a3c050e4bfe8d0d09d74c979f5bb121a68ace50a32835aa0562cf8f9694ba510">llvm::SystemZISD::TM</a></div><div class="ttdef"><b>Definition:</b> <a href="SystemZISelLowering_8h_source.html#l00060">SystemZISelLowering.h:60</a></div></div>
<div class="ttc" id="X86ISelDAGToDAG_8cpp_html_afc4e10b4f2ab2d548ab80b30f3b712e9"><div class="ttname"><a href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9">AtomicOpc</a></div><div class="ttdeci">AtomicOpc</div><div class="ttdef"><b>Definition:</b> <a href="X86ISelDAGToDAG_8cpp_source.html#l01582">X86ISelDAGToDAG.cpp:1582</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a905925a49cdc6b4a6017d215820dad30"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a905925a49cdc6b4a6017d215820dad30">llvm::ISD::ATOMIC_LOAD_AND</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00626">ISDOpcodes.h:626</a></div></div>
<div class="ttc" id="README-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00427">README-SSE.txt:427</a></div></div>
<div class="ttc" id="Debug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_ad4d48171b87ca51ff54c10a436bac4d7a6aacde2c67988b43a261a7f7ceac4be3"><div class="ttname"><a href="namespacellvm_1_1ISD.html#ad4d48171b87ca51ff54c10a436bac4d7a6aacde2c67988b43a261a7f7ceac4be3">llvm::ISD::NON_EXTLOAD</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00698">ISDOpcodes.h:698</a></div></div>
<div class="ttc" id="X86ISelDAGToDAG_8cpp_html_a96c1aa0eca38be914b9564cd17c82f8aa68744fefeb088e8bae7ec95a0c0532ac"><div class="ttname"><a href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa68744fefeb088e8bae7ec95a0c0532ac">I32</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelDAGToDAG_8cpp_source.html#l01601">X86ISelDAGToDAG.cpp:1601</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a59b314018a929255951f01f8daaae72f"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a59b314018a929255951f01f8daaae72f">llvm::ISD::TargetExternalSymbol</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00114">ISDOpcodes.h:114</a></div></div>
<div class="ttc" id="Target_2TargetMachine_8h_html"><div class="ttname"><a href="Target_2TargetMachine_8h.html">TargetMachine.h</a></div></div>
<div class="ttc" id="classllvm_1_1SDNode_html_af0d328f3f61168f4ea7d6e4044af4f97"><div class="ttname"><a href="classllvm_1_1SDNode.html#af0d328f3f61168f4ea7d6e4044af4f97">llvm::SDNode::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00369">SelectionDAGNodes.h:369</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterClass_html_a25f9ba8e78af92ca34f9c1bba7881601"><div class="ttname"><a href="classllvm_1_1TargetRegisterClass.html#a25f9ba8e78af92ca34f9c1bba7881601">llvm::TargetRegisterClass::getID</a></div><div class="ttdeci">unsigned getID() const </div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00053">TargetRegisterInfo.h:53</a></div></div>
<div class="ttc" id="README-SSE_8txt_html_af63bcf34c820f95f096676adf8358de4"><div class="ttname"><a href="README-SSE_8txt.html#af63bcf34c820f95f096676adf8358de4">EBX</a></div><div class="ttdeci">We currently esp xorpd xmm0 xmm0 xmm1 xmm2 xmm1 jb LBB_X_2 xmm2 esp esp ret Lower memcpy memset to a series of SSE bit move instructions when it s feasible Still ok After register LLVM ADD32rm IMUL32rr EDX ESI ADD32rr ESI SHUFPSrr EBX</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00222">README-SSE.txt:222</a></div></div>
<div class="ttc" id="classllvm_1_1MVT_html_a423166b2b5d1010162dde0003e5ad09c"><div class="ttname"><a href="classllvm_1_1MVT.html#a423166b2b5d1010162dde0003e5ad09c">llvm::MVT::getSizeInBits</a></div><div class="ttdeci">unsigned getSizeInBits() const </div><div class="ttdef"><b>Definition:</b> <a href="ValueTypes_8h_source.html#l00359">ValueTypes.h:359</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a87b8176af163ee944af127081d24f4a2"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a87b8176af163ee944af127081d24f4a2">llvm::ISD::TargetGlobalAddress</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00109">ISDOpcodes.h:109</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86ISD_html_ab81d298b0f48499395110a6055048b28a1e9c72799b70329f6a0935d8747c59d2"><div class="ttname"><a href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a1e9c72799b70329f6a0935d8747c59d2">llvm::X86ISD::EH_SJLJ_SETJMP</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8h_source.html#l00236">X86ISelLowering.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1SDNode_html_abc5c2f1d47a517373030133c6a102106"><div class="ttname"><a href="classllvm_1_1SDNode.html#abc5c2f1d47a517373030133c6a102106">llvm::SDNode::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00548">SelectionDAGNodes.h:548</a></div></div>
<div class="ttc" id="classllvm_1_1SDValue_html_a5f0447ef8ec128563ad131b76e5062bd"><div class="ttname"><a href="classllvm_1_1SDValue.html#a5f0447ef8ec128563ad131b76e5062bd">llvm::SDValue::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00846">SelectionDAGNodes.h:846</a></div></div>
<div class="ttc" id="classllvm_1_1DebugLoc_html"><div class="ttname"><a href="classllvm_1_1DebugLoc.html">llvm::DebugLoc</a></div><div class="ttdef"><b>Definition:</b> <a href="DebugLoc_8h_source.html#l00028">DebugLoc.h:28</a></div></div>
<div class="ttc" id="classllvm_1_1SDNode_html_a836c27481205f56e708fe0c15538d5ff"><div class="ttname"><a href="classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">llvm::SDNode::getOperand</a></div><div class="ttdeci">const SDValue &amp; getOperand(unsigned Num) const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00554">SelectionDAGNodes.h:554</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00070">Function.h:70</a></div></div>
<div class="ttc" id="X86ISelDAGToDAG_8cpp_html_a96c1aa0eca38be914b9564cd17c82f8aa459e82537e7b8715f12bf278fd58bde1"><div class="ttname"><a href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa459e82537e7b8715f12bf278fd58bde1">ConstantI32</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelDAGToDAG_8cpp_source.html#l01600">X86ISelDAGToDAG.cpp:1600</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86ISD_html_ab81d298b0f48499395110a6055048b28a8957fd90a0c765af6746fb0849ee1a8a"><div class="ttname"><a href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a8957fd90a0c765af6746fb0849ee1a8a">llvm::X86ISD::AND</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8h_source.html#l00293">X86ISelLowering.h:293</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">llvm::ISD::SUB</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00176">ISDOpcodes.h:176</a></div></div>
<div class="ttc" id="classllvm_1_1SDNode_html_a5689e9ae35c6ceb3b9377299c98e0e97"><div class="ttname"><a href="classllvm_1_1SDNode.html#a5689e9ae35c6ceb3b9377299c98e0e97">llvm::SDNode::setNodeId</a></div><div class="ttdeci">void setNodeId(int Id)</div><div class="ttdoc">setNodeId - Set unique node id. </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00420">SelectionDAGNodes.h:420</a></div></div>
<div class="ttc" id="classllvm_1_1SelectionDAG_html_ad06ca140783fd9f03eed498e8485fc3d"><div class="ttname"><a href="classllvm_1_1SelectionDAG.html#ad06ca140783fd9f03eed498e8485fc3d">llvm::SelectionDAG::ComputeMaskedBits</a></div><div class="ttdeci">void ComputeMaskedBits(SDValue Op, APInt &amp;KnownZero, APInt &amp;KnownOne, unsigned Depth=0) const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAG_8cpp_source.html#l01759">SelectionDAG.cpp:1759</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90abed773d58cd27af1fd9c22c559686b98"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90abed773d58cd27af1fd9c22c559686b98">llvm::Intrinsic::x86_avx2_gather_d_ps_256</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02487">Intrinsics.h:2487</a></div></div>
<div class="ttc" id="classllvm_1_1HandleSDNode_html_aed014ec917b6b7f6aae1edfac7e9b9de"><div class="ttname"><a href="classllvm_1_1HandleSDNode.html#aed014ec917b6b7f6aae1edfac7e9b9de">llvm::HandleSDNode::getValue</a></div><div class="ttdeci">const SDValue &amp; getValue() const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00950">SelectionDAGNodes.h:950</a></div></div>
<div class="ttc" id="Statistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="classllvm_1_1LoadSDNode_html_a3ded48ce66b58b7e7e143991df5dbfae"><div class="ttname"><a href="classllvm_1_1LoadSDNode.html#a3ded48ce66b58b7e7e143991df5dbfae">llvm::LoadSDNode::getBasePtr</a></div><div class="ttdeci">const SDValue &amp; getBasePtr() const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l01739">SelectionDAGNodes.h:1739</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86ISD_html_ab81d298b0f48499395110a6055048b28ab6a64b7a6972df9859995860b41353fc"><div class="ttname"><a href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28ab6a64b7a6972df9859995860b41353fc">llvm::X86ISD::ATOMMAX64_DAG</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8h_source.html#l00409">X86ISelLowering.h:409</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86ISD_html_ab81d298b0f48499395110a6055048b28ac52ade4e38c09090c08d423e886cb4b2"><div class="ttname"><a href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28ac52ade4e38c09090c08d423e886cb4b2">llvm::X86ISD::Wrapper</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8h_source.html#l00138">X86ISelLowering.h:138</a></div></div>
<div class="ttc" id="SelectionDAGISel_8h_html"><div class="ttname"><a href="SelectionDAGISel_8h.html">SelectionDAGISel.h</a></div></div>
<div class="ttc" id="classllvm_1_1SDValue_html_a64881a6ca7154fccaeb92cdb1e1e745e"><div class="ttname"><a href="classllvm_1_1SDValue.html#a64881a6ca7154fccaeb92cdb1e1e745e">llvm::SDValue::getResNo</a></div><div class="ttdeci">unsigned getResNo() const </div><div class="ttdoc">get the index which selects a specific result in the SDNode </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00102">SelectionDAGNodes.h:102</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalAddressSDNode_html"><div class="ttname"><a href="classllvm_1_1GlobalAddressSDNode.html">llvm::GlobalAddressSDNode</a></div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l01313">SelectionDAGNodes.h:1313</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110afc09e0bddd693dcf9923e4df42473bd9"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110afc09e0bddd693dcf9923e4df42473bd9">llvm::ISD::INTRINSIC_W_CHAIN</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00135">ISDOpcodes.h:135</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_ad4d48171b87ca51ff54c10a436bac4d7afab3fffd153f7d7770fed81272e4b78f"><div class="ttname"><a href="namespacellvm_1_1ISD.html#ad4d48171b87ca51ff54c10a436bac4d7afab3fffd153f7d7770fed81272e4b78f">llvm::ISD::EXTLOAD</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00699">ISDOpcodes.h:699</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86ISD_html_ab81d298b0f48499395110a6055048b28a6b568009f7298ad847f7b387530034e9"><div class="ttname"><a href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a6b568009f7298ad847f7b387530034e9">llvm::X86ISD::ATOMSUB64_DAG</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8h_source.html#l00404">X86ISelLowering.h:404</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a3a874f66e1efe5be79552bbe7ee3121a"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a3a874f66e1efe5be79552bbe7ee3121a">llvm::ISD::SDIVREM</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00185">ISDOpcodes.h:185</a></div></div>
<div class="ttc" id="X86DisassemblerDecoder_8h_html_a546839a5c4bcf9f9450967155f48de41"><div class="ttname"><a href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></div><div class="ttdeci">Reg</div><div class="ttdef"><b>Definition:</b> <a href="X86DisassemblerDecoder_8h_source.html#l00428">X86DisassemblerDecoder.h:428</a></div></div>
<div class="ttc" id="namespacellvm_1_1MCID_html_a8035044d40d3758eb45b65dce69dc90ba32dbd2c72a98eaee90e3ad5ef7b5af16"><div class="ttname"><a href="namespacellvm_1_1MCID.html#a8035044d40d3758eb45b65dce69dc90ba32dbd2c72a98eaee90e3ad5ef7b5af16">llvm::MCID::Select</a></div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00113">MCInstrDesc.h:113</a></div></div>
<div class="ttc" id="classllvm_1_1BlockAddress_html"><div class="ttname"><a href="classllvm_1_1BlockAddress.html">llvm::BlockAddress</a></div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00748">Constants.h:748</a></div></div>
<div class="ttc" id="X86_8h_html"><div class="ttname"><a href="X86_8h.html">X86.h</a></div></div>
<div class="ttc" id="MachineFunction_8h_html"><div class="ttname"><a href="MachineFunction_8h.html">MachineFunction.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineMemOperand_html"><div class="ttname"><a href="classllvm_1_1MachineMemOperand.html">llvm::MachineMemOperand</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineMemOperand_8h_source.html#l00082">MachineMemOperand.h:82</a></div></div>
<div class="ttc" id="namespacellvm_1_1RegState_html_a079b254e749130fbe5d740f314ca92daab502f975742e9bff6d6dd7b49439b806"><div class="ttname"><a href="namespacellvm_1_1RegState.html#a079b254e749130fbe5d740f314ca92daab502f975742e9bff6d6dd7b49439b806">llvm::RegState::Undef</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00035">MachineInstrBuilder.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a1933ce346f4cbadcc151cea432c2b316"><div class="ttname"><a href="classllvm_1_1Value.html#a1933ce346f4cbadcc151cea432c2b316">llvm::Value::dump</a></div><div class="ttdeci">void dump() const </div><div class="ttdoc">dump - Support for debugging, callable in GDB: V-&gt;dump() </div><div class="ttdef"><b>Definition:</b> <a href="AsmWriter_8cpp_source.html#l02212">AsmWriter.cpp:2212</a></div></div>
<div class="ttc" id="namespacellvm_html_a8da28d982a3c20fa6e57d94df3059f03"><div class="ttname"><a href="namespacellvm.html#a8da28d982a3c20fa6e57d94df3059f03">llvm::CountTrailingOnes_64</a></div><div class="ttdeci">unsigned CountTrailingOnes_64(uint64_t Value)</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00410">MathExtras.h:410</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110abf5f612de1a25451c9a0c33d77bf3e74"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110abf5f612de1a25451c9a0c33d77bf3e74">llvm::ISD::ATOMIC_LOAD_ADD</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00624">ISDOpcodes.h:624</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86ISD_html_ab81d298b0f48499395110a6055048b28aad94325e16d00136723f8b8554947f8b"><div class="ttname"><a href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28aad94325e16d00136723f8b8554947f8b">llvm::X86ISD::ATOMUMIN64_DAG</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8h_source.html#l00412">X86ISelLowering.h:412</a></div></div>
<div class="ttc" id="HexagonCopyToCombine_8cpp_html_a1d40004718218dbdf06b496766299101"><div class="ttname"><a href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a></div><div class="ttdeci">const HexagonInstrInfo * TII</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCopyToCombine_8cpp_source.html#l00115">HexagonCopyToCombine.cpp:115</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86ISD_html_ab81d298b0f48499395110a6055048b28ac3f489d9df53f65dddb7a1c0c71064e3"><div class="ttname"><a href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28ac3f489d9df53f65dddb7a1c0c71064e3">llvm::X86ISD::ATOMSWAP64_DAG</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8h_source.html#l00413">X86ISelLowering.h:413</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">llvm::ISD::SHL</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00306">ISDOpcodes.h:306</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a308088c2d65f8f3955f5fb0f6aca7ccc"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a308088c2d65f8f3955f5fb0f6aca7ccc">llvm::ISD::isNormalStore</a></div><div class="ttdeci">bool isNormalStore(const SDNode *N)</div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l01929">SelectionDAGNodes.h:1929</a></div></div>
<div class="ttc" id="ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdef"><b>Definition:</b> <a href="ErrorHandling_8h_source.html#l00103">ErrorHandling.h:103</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a3a257ffa49107e2db978e8a6e2688ada"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a3a257ffa49107e2db978e8a6e2688ada">llvm::ISD::UDIVREM</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00185">ISDOpcodes.h:185</a></div></div>
<div class="ttc" id="namespacellvm_html_a3e242f3485db990d043f2dcf91106ce7"><div class="ttname"><a href="namespacellvm.html#a3e242f3485db990d043f2dcf91106ce7">llvm::isInt&lt; 8 &gt;</a></div><div class="ttdeci">bool isInt&lt; 8 &gt;(int64_t x)</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00268">MathExtras.h:268</a></div></div>
<div class="ttc" id="MachineFrameInfo_8h_html"><div class="ttname"><a href="MachineFrameInfo_8h.html">MachineFrameInfo.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a93bc27ca4d9e211c54b0d9efb660f080"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a93bc27ca4d9e211c54b0d9efb660f080">llvm::ISD::CopyToReg</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00146">ISDOpcodes.h:146</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterClass_html"><div class="ttname"><a href="classllvm_1_1TargetRegisterClass.html">llvm::TargetRegisterClass</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00036">TargetRegisterInfo.h:36</a></div></div>
<div class="ttc" id="namespacellvm_1_1COFF_html_a859c4e0a0dd786386ec921c828ede830"><div class="ttname"><a href="namespacellvm_1_1COFF.html#a859c4e0a0dd786386ec921c828ede830">llvm::COFF::SymbolFlags</a></div><div class="ttdeci">SymbolFlags</div><div class="ttdef"><b>Definition:</b> <a href="Support_2COFF_8h_source.html#l00130">Support/COFF.h:130</a></div></div>
<div class="ttc" id="X86ISelDAGToDAG_8cpp_html_a8ad82d103604e27f8e067e0edfce5347"><div class="ttname"><a href="X86ISelDAGToDAG_8cpp.html#a8ad82d103604e27f8e067e0edfce5347">HasNoSignedComparisonUses</a></div><div class="ttdeci">static bool HasNoSignedComparisonUses(SDNode *N)</div><div class="ttdef"><b>Definition:</b> <a href="X86ISelDAGToDAG_8cpp_source.html#l01855">X86ISelDAGToDAG.cpp:1855</a></div></div>
<div class="ttc" id="classllvm_1_1MVT_html_a27bda7d8e8e4f0337650a892f3c9b46a"><div class="ttname"><a href="classllvm_1_1MVT.html#a27bda7d8e8e4f0337650a892f3c9b46a">llvm::MVT::SimpleTy</a></div><div class="ttdeci">SimpleValueType SimpleTy</div><div class="ttdef"><b>Definition:</b> <a href="ValueTypes_8h_source.html#l00161">ValueTypes.h:161</a></div></div>
<div class="ttc" id="X86ISelDAGToDAG_8cpp_html_a38f0f59bc59e3ebde73b00942cbafbc1"><div class="ttname"><a href="X86ISelDAGToDAG_8cpp.html#a38f0f59bc59e3ebde73b00942cbafbc1">getAtomicLoadArithTargetConstant</a></div><div class="ttdeci">static SDValue getAtomicLoadArithTargetConstant(SelectionDAG *CurDAG, SDLoc dl, enum AtomicOpc &amp;Op, MVT NVT, SDValue Val)</div><div class="ttdef"><b>Definition:</b> <a href="X86ISelDAGToDAG_8cpp_source.html#l01708">X86ISelDAGToDAG.cpp:1708</a></div></div>
<div class="ttc" id="X86ISelDAGToDAG_8cpp_html_a96c1aa0eca38be914b9564cd17c82f8aa0d2e913e2fd86f888d768aaea3b4f20c"><div class="ttname"><a href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa0d2e913e2fd86f888d768aaea3b4f20c">ConstantI8</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelDAGToDAG_8cpp_source.html#l01594">X86ISelDAGToDAG.cpp:1594</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110af423387cec5c9f7be16028b25a0dcfe7"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110af423387cec5c9f7be16028b25a0dcfe7">llvm::ISD::CALLSEQ_START</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00534">ISDOpcodes.h:534</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFrameInfo_html"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html">llvm::MachineFrameInfo</a></div><div class="ttdoc">Abstract Stack Frame Information. </div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00080">MachineFrameInfo.h:80</a></div></div>
<div class="ttc" id="ErrorHandling_8h_html"><div class="ttname"><a href="ErrorHandling_8h.html">ErrorHandling.h</a></div></div>
<div class="ttc" id="namespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00126">StackSlotColoring.cpp:126</a></div></div>
<div class="ttc" id="namespacellvm_html_a85acbc71797c5df4b82f6c527ff9ad1a"><div class="ttname"><a href="namespacellvm.html#a85acbc71797c5df4b82f6c527ff9ad1a">llvm::countLeadingZeros</a></div><div class="ttdeci">enable_if_c&lt; std::numeric_limits&lt; T &gt;::is_integer &amp;&amp;!std::numeric_limits&lt; T &gt;::is_signed, std::size_t &gt;::type countLeadingZeros(T Val, ZeroBehavior ZB=ZB_Width)</div><div class="ttdoc">Count number of 0&amp;#39;s from the most significant bit to the least stopping at the first 1...</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00120">MathExtras.h:120</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86ISD_html_ab81d298b0f48499395110a6055048b28ab3bdd022c4bbd31d548975d4ddee3209"><div class="ttname"><a href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28ab3bdd022c4bbd31d548975d4ddee3209">llvm::X86ISD::TLSCALL</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8h_source.html#l00230">X86ISelLowering.h:230</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ad96b7cf3182ce2ba85e5a7a93b12c441"><div class="ttname"><a href="MD5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a></div><div class="ttdeci">#define G(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00052">MD5.cpp:52</a></div></div>
<div class="ttc" id="structllvm_1_1SDVTList_html"><div class="ttname"><a href="structllvm_1_1SDVTList.html">llvm::SDVTList</a></div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00057">SelectionDAGNodes.h:57</a></div></div>
<div class="ttc" id="README-SSE_8txt_html_aafb0a6c62a7cfe1538db1d20d759a34b"><div class="ttname"><a href="README-SSE_8txt.html#aafb0a6c62a7cfe1538db1d20d759a34b">EDX</a></div><div class="ttdeci">We currently esp xorpd xmm0 xmm0 xmm1 xmm2 xmm1 jb LBB_X_2 xmm2 esp esp ret Lower memcpy memset to a series of SSE bit move instructions when it s feasible Still ok After register LLVM ADD32rm EDX</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00132">README-SSE.txt:132</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86ISD_html_ab81d298b0f48499395110a6055048b28a23260aedef0a54d543d227e57955c652"><div class="ttname"><a href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a23260aedef0a54d543d227e57955c652">llvm::X86ISD::CMP</a></div><div class="ttdoc">X86 compare and logical compare instructions. </div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8h_source.html#l00088">X86ISelLowering.h:88</a></div></div>
<div class="ttc" id="namespacellvm_1_1TargetOpcode_html_a348d4259b5fa6a8ecfe94e7ae512e1a8ad32233180a0499e8a9d72b83c5098d0a"><div class="ttname"><a href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8ad32233180a0499e8a9d72b83c5098d0a">llvm::TargetOpcode::COPY_TO_REGCLASS</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetOpcodes_8h_source.html#l00066">TargetOpcodes.h:66</a></div></div>
<div class="ttc" id="X86TargetMachine_8h_html"><div class="ttname"><a href="X86TargetMachine_8h.html">X86TargetMachine.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90aa79c6e4c9b15c3b13da261d404503d79"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aa79c6e4c9b15c3b13da261d404503d79">llvm::Intrinsic::x86_avx2_gather_d_pd_256</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02485">Intrinsics.h:2485</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90ae2e73cd5e9feee03ec2ce36822c7970c"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ae2e73cd5e9feee03ec2ce36822c7970c">llvm::Intrinsic::x86_avx2_gather_d_q_256</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02489">Intrinsics.h:2489</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86ISD_html_ab81d298b0f48499395110a6055048b28ac459a26428cf593d442a86904673b560"><div class="ttname"><a href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28ac459a26428cf593d442a86904673b560">llvm::X86ISD::UMUL</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8h_source.html#l00301">X86ISelLowering.h:301</a></div></div>
<div class="ttc" id="X86ISelDAGToDAG_8cpp_html_adb3e41fa1653add6fb07e438c07f5ebf"><div class="ttname"><a href="X86ISelDAGToDAG_8cpp.html#adb3e41fa1653add6fb07e438c07f5ebf">FoldMaskAndShiftToExtract</a></div><div class="ttdeci">static bool FoldMaskAndShiftToExtract(SelectionDAG &amp;DAG, SDValue N, uint64_t Mask, SDValue Shift, SDValue X, X86ISelAddressMode &amp;AM)</div><div class="ttdef"><b>Definition:</b> <a href="X86ISelDAGToDAG_8cpp_source.html#l00773">X86ISelDAGToDAG.cpp:773</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_a8db36c82f32d6f6a4d35a00e55be03a8"><div class="ttname"><a href="Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a></div><div class="ttdeci">bool Shift</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00506">Target/README.txt:506</a></div></div>
<div class="ttc" id="X86ISelDAGToDAG_8cpp_html_ae28feb8429fd7afe136662ecbedb0c8c"><div class="ttname"><a href="X86ISelDAGToDAG_8cpp.html#ae28feb8429fd7afe136662ecbedb0c8c">isLoadIncOrDecStore</a></div><div class="ttdeci">static bool isLoadIncOrDecStore(StoreSDNode *StoreNode, unsigned Opc, SDValue StoredVal, SelectionDAG *CurDAG, LoadSDNode *&amp;LoadNode, SDValue &amp;InputChain)</div><div class="ttdef"><b>Definition:</b> <a href="X86ISelDAGToDAG_8cpp_source.html#l01918">X86ISelDAGToDAG.cpp:1918</a></div></div>
<div class="ttc" id="Mips16ISelLowering_8cpp_html_a0acb682b8260ab1c60b918599864e2e5"><div class="ttname"><a href="Mips16ISelLowering_8cpp.html#a0acb682b8260ab1c60b918599864e2e5">T</a></div><div class="ttdeci">#define T</div><div class="ttdef"><b>Definition:</b> <a href="Mips16ISelLowering_8cpp_source.html#l00349">Mips16ISelLowering.cpp:349</a></div></div>
<div class="ttc" id="MachineInstrBuilder_8h_html"><div class="ttname"><a href="MachineInstrBuilder_8h.html">MachineInstrBuilder.h</a></div></div>
<div class="ttc" id="namespacellvm_html_abdaf1eaf6120421977095bd97eee892e"><div class="ttname"><a href="namespacellvm.html#abdaf1eaf6120421977095bd97eee892e">llvm::countTrailingZeros</a></div><div class="ttdeci">enable_if_c&lt; std::numeric_limits&lt; T &gt;::is_integer &amp;&amp;!std::numeric_limits&lt; T &gt;::is_signed, std::size_t &gt;::type countTrailingZeros(T Val, ZeroBehavior ZB=ZB_Width)</div><div class="ttdoc">Count number of 0&amp;#39;s from the least significant bit to the most stopping at the first 1...</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00049">MathExtras.h:49</a></div></div>
<div class="ttc" id="namespacellvm_1_1CodeGenOpt_html_a411055ea15209051c2370bbf655ec8d4"><div class="ttname"><a href="namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">llvm::CodeGenOpt::Level</a></div><div class="ttdeci">Level</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_8h_source.html#l00045">CodeGen.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1X86Subtarget_html_a5314399c907d77b514ec837e8527a9de"><div class="ttname"><a href="classllvm_1_1X86Subtarget.html#a5314399c907d77b514ec837e8527a9de">llvm::X86Subtarget::is64Bit</a></div><div class="ttdeci">bool is64Bit() const </div><div class="ttdoc">Is this x86_64? (disregarding specific ABI / programming model) </div><div class="ttdef"><b>Definition:</b> <a href="X86Subtarget_8h_source.html#l00240">X86Subtarget.h:240</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">llvm::ISD::ADD</a></div><div class="ttdoc">Simple integer binary arithmetic operators. </div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00176">ISDOpcodes.h:176</a></div></div>
<div class="ttc" id="namespacellvm_1_1TargetOpcode_html_a348d4259b5fa6a8ecfe94e7ae512e1a8a9a1c30a208eb023907075d28e7ab2f19"><div class="ttname"><a href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8a9a1c30a208eb023907075d28e7ab2f19">llvm::TargetOpcode::SUBREG_TO_REG</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetOpcodes_8h_source.html#l00058">TargetOpcodes.h:58</a></div></div>
<div class="ttc" id="classllvm_1_1MVT_html_afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0"><div class="ttname"><a href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">llvm::MVT::i32</a></div><div class="ttdef"><b>Definition:</b> <a href="ValueTypes_8h_source.html#l00046">ValueTypes.h:46</a></div></div>
<div class="ttc" id="namespacellvm_html_af6d6a791770bad2303c4399986979e3eae411369b2f0d8f484fec62c3291b1b51"><div class="ttname"><a href="namespacellvm.html#af6d6a791770bad2303c4399986979e3eae411369b2f0d8f484fec62c3291b1b51">llvm::Call</a></div><div class="ttdef"><b>Definition:</b> <a href="CallingConvLower_8h_source.html#l00149">CallingConvLower.h:149</a></div></div>
<div class="ttc" id="classllvm_1_1StoreSDNode_html_aec453733fbb9f24036960fdc6b3b4b46"><div class="ttname"><a href="classllvm_1_1StoreSDNode.html#aec453733fbb9f24036960fdc6b3b4b46">llvm::StoreSDNode::getBasePtr</a></div><div class="ttdeci">const SDValue &amp; getBasePtr() const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l01769">SelectionDAGNodes.h:1769</a></div></div>
<div class="ttc" id="X86ISelDAGToDAG_8cpp_html_ae86d1f5121bd42a40218d95cfb3a3856"><div class="ttname"><a href="X86ISelDAGToDAG_8cpp.html#ae86d1f5121bd42a40218d95cfb3a3856">AtomicOpcTbl</a></div><div class="ttdeci">static const uint16_t AtomicOpcTbl[AtomicOpcEnd][AtomicSzEnd]</div><div class="ttdef"><b>Definition:</b> <a href="X86ISelDAGToDAG_8cpp_source.html#l01608">X86ISelDAGToDAG.cpp:1608</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110ac479e53ca98903b1028ec80e12fb0af8"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ac479e53ca98903b1028ec80e12fb0af8">llvm::ISD::TargetConstant</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00103">ISDOpcodes.h:103</a></div></div>
<div class="ttc" id="classllvm_1_1MemSDNode_html_a7cead3a2a7771e61083bcc6959915a13"><div class="ttname"><a href="classllvm_1_1MemSDNode.html#a7cead3a2a7771e61083bcc6959915a13">llvm::MemSDNode::getMemoryVT</a></div><div class="ttdeci">EVT getMemoryVT() const </div><div class="ttdoc">getMemoryVT - Return the type of the in-memory value. </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l01030">SelectionDAGNodes.h:1030</a></div></div>
<div class="ttc" id="MathExtras_8h_html"><div class="ttname"><a href="MathExtras_8h.html">MathExtras.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86ISD_html_ab81d298b0f48499395110a6055048b28aa1533806854ce83b6ad0d14d12f22d52"><div class="ttname"><a href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28aa1533806854ce83b6ad0d14d12f22d52">llvm::X86ISD::DEC</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8h_source.html#l00293">X86ISelLowering.h:293</a></div></div>
<div class="ttc" id="classllvm_1_1StoreSDNode_html"><div class="ttname"><a href="classllvm_1_1StoreSDNode.html">llvm::StoreSDNode</a></div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l01749">SelectionDAGNodes.h:1749</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a3a3128dcdf925aee7f003bc4fc8063d0"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a3a3128dcdf925aee7f003bc4fc8063d0">llvm::Intrinsic::x86_avx2_gather_q_ps</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02494">Intrinsics.h:2494</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86II_html_a97dc14052814702ba0e2b14fb14dd02dacdc4d0fa74813b50797e25bab4febe70"><div class="ttname"><a href="namespacellvm_1_1X86II.html#a97dc14052814702ba0e2b14fb14dd02dacdc4d0fa74813b50797e25bab4febe70">llvm::X86II::GS</a></div><div class="ttdef"><b>Definition:</b> <a href="X86BaseInfo_8h_source.html#l00427">X86BaseInfo.h:427</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html">llvm::TargetInstrInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00047">TargetInstrInfo.h:47</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_adcb96bd09d7c75c7669fa5f9d1190899"><div class="ttname"><a href="classllvm_1_1APInt.html#adcb96bd09d7c75c7669fa5f9d1190899">llvm::APInt::getHighBitsSet</a></div><div class="ttdeci">static APInt getHighBitsSet(unsigned numBits, unsigned hiBitsSet)</div><div class="ttdoc">Get a value with high bits set. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00510">APInt.h:510</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a254b7b49317c9e87b183672e8f72f50e"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a254b7b49317c9e87b183672e8f72f50e">llvm::Intrinsic::x86_avx2_gather_q_pd_256</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02493">Intrinsics.h:2493</a></div></div>
<div class="ttc" id="classllvm_1_1SDValue_html_a3fad042e27ba626acf5366c845b352d3"><div class="ttname"><a href="classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">llvm::SDValue::getNode</a></div><div class="ttdeci">SDNode * getNode() const </div><div class="ttdoc">get the SDNode which holds the desired result </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00105">SelectionDAGNodes.h:105</a></div></div>
<div class="ttc" id="classllvm_1_1RegisterSDNode_html"><div class="ttname"><a href="classllvm_1_1RegisterSDNode.html">llvm::RegisterSDNode</a></div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l01531">SelectionDAGNodes.h:1531</a></div></div>
<div class="ttc" id="README__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A,*B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00091">README_ALTIVEC.txt:91</a></div></div>
<div class="ttc" id="X86ISelDAGToDAG_8cpp_html_afc4e10b4f2ab2d548ab80b30f3b712e9a12b733d4941495e86811fe6ceeeff9da"><div class="ttname"><a href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9a12b733d4941495e86811fe6ceeeff9da">SUB</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelDAGToDAG_8cpp_source.html#l01584">X86ISelDAGToDAG.cpp:1584</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_afaaeadcd82b42fc0d385a6247bf7bb52"><div class="ttname"><a href="namespacellvm_1_1ISD.html#afaaeadcd82b42fc0d385a6247bf7bb52">llvm::ISD::isNormalLoad</a></div><div class="ttdeci">bool isNormalLoad(const SDNode *N)</div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l01886">SelectionDAGNodes.h:1886</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86ISD_html_ab81d298b0f48499395110a6055048b28acf42ecbf82f3dcbf52c109ee0e3f5838"><div class="ttname"><a href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28acf42ecbf82f3dcbf52c109ee0e3f5838">llvm::X86ISD::ADD</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8h_source.html#l00292">X86ISelLowering.h:292</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a2df96794a99f5d3b4415c4a84e616140"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a2df96794a99f5d3b4415c4a84e616140">llvm::ISD::INTRINSIC_VOID</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00142">ISDOpcodes.h:142</a></div></div>
<div class="ttc" id="namespacellvm_1_1AArch64ISD_html_a246d89cb58f606179b1435937830bbdca84e96c468affe3b1fd3076b4fc5d063e"><div class="ttname"><a href="namespacellvm_1_1AArch64ISD.html#a246d89cb58f606179b1435937830bbdca84e96c468affe3b1fd3076b4fc5d063e">llvm::AArch64ISD::Ret</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64ISelLowering_8h_source.html#l00060">AArch64ISelLowering.h:60</a></div></div>
<div class="ttc" id="classllvm_1_1MVT_html_afd69b4f2dff97a2d7c0192cc769ef50ca62a222acce6360abd2726719fabc2797"><div class="ttname"><a href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca62a222acce6360abd2726719fabc2797">llvm::MVT::Other</a></div><div class="ttdef"><b>Definition:</b> <a href="ValueTypes_8h_source.html#l00042">ValueTypes.h:42</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantSDNode_html"><div class="ttname"><a href="classllvm_1_1ConstantSDNode.html">llvm::ConstantSDNode</a></div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l01246">SelectionDAGNodes.h:1246</a></div></div>
<div class="ttc" id="namespacellvm_html_a03503773241005f01b090b9862aad304"><div class="ttname"><a href="namespacellvm.html#a03503773241005f01b090b9862aad304">llvm::dump</a></div><div class="ttdeci">void dump(const SparseBitVector&lt; ElementSize &gt; &amp;LHS, raw_ostream &amp;out)</div><div class="ttdef"><b>Definition:</b> <a href="SparseBitVector_8h_source.html#l00882">SparseBitVector.h:882</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a047178c3b2c6a5df40ae22a407b8aca9"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a047178c3b2c6a5df40ae22a407b8aca9">llvm::ISD::STORE</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00460">ISDOpcodes.h:460</a></div></div>
<div class="ttc" id="classllvm_1_1JumpTableSDNode_html"><div class="ttname"><a href="classllvm_1_1JumpTableSDNode.html">llvm::JumpTableSDNode</a></div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l01354">SelectionDAGNodes.h:1354</a></div></div>
<div class="ttc" id="classllvm_1_1X86Subtarget_html_ae7791ac51c44248b8469215971d56b1c"><div class="ttname"><a href="classllvm_1_1X86Subtarget.html#ae7791ac51c44248b8469215971d56b1c">llvm::X86Subtarget::hasBMI2</a></div><div class="ttdeci">bool hasBMI2() const </div><div class="ttdef"><b>Definition:</b> <a href="X86Subtarget_8h_source.html#l00287">X86Subtarget.h:287</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">llvm::ISD::SRL</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00306">ISDOpcodes.h:306</a></div></div>
<div class="ttc" id="classllvm_1_1MVT_html"><div class="ttname"><a href="classllvm_1_1MVT.html">llvm::MVT</a></div><div class="ttdef"><b>Definition:</b> <a href="ValueTypes_8h_source.html#l00033">ValueTypes.h:33</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00396">SmallVector.h:396</a></div></div>
<div class="ttc" id="classllvm_1_1SDValue_html_a5891be2cd50b5b7f01eb7c1cb0e7a682"><div class="ttname"><a href="classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">llvm::SDValue::getOperand</a></div><div class="ttdeci">const SDValue &amp; getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00849">SelectionDAGNodes.h:849</a></div></div>
<div class="ttc" id="README-X86-64_8txt_html_a9de23273550c17a1957b1b325a01960e"><div class="ttname"><a href="README-X86-64_8txt.html#a9de23273550c17a1957b1b325a01960e">AH</a></div><div class="ttdeci">AMD64 Optimization Manual has some nice information about optimizing integer multiplication by a constant How much of it applies to Intel s X86 implementation There are definite trade offs to xmm0 cvttss2siq rdx jb L3 subss xmm0 rax cvttss2siq rdx xorq rdx rax ret instead of xmm1 cvttss2siq rcx movaps xmm2 subss xmm2 cvttss2siq rax rdx xorq rax ucomiss xmm0 cmovb rax ret Seems like the jb branch has high likelihood of being taken It would have saved a few instructions It s not possible to reference AH</div><div class="ttdef"><b>Definition:</b> <a href="README-X86-64_8txt_source.html#l00018">README-X86-64.txt:18</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86ISD_html_ab81d298b0f48499395110a6055048b28a54e5b571aa1e5cc79548391658cbcb3a"><div class="ttname"><a href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a54e5b571aa1e5cc79548391658cbcb3a">llvm::X86ISD::ATOMNAND64_DAG</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8h_source.html#l00408">X86ISelLowering.h:408</a></div></div>
<div class="ttc" id="classllvm_1_1MemSDNode_html_a967ffaf77f64a5deb1e96951e4224112"><div class="ttname"><a href="classllvm_1_1MemSDNode.html#a967ffaf77f64a5deb1e96951e4224112">llvm::MemSDNode::isNonTemporal</a></div><div class="ttdeci">bool isNonTemporal() const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l01009">SelectionDAGNodes.h:1009</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1MVT_html_afa328609e9c6183e2bc34afe59b84d1d"><div class="ttname"><a href="classllvm_1_1MVT.html#afa328609e9c6183e2bc34afe59b84d1d">llvm::MVT::isVector</a></div><div class="ttdeci">bool isVector() const </div><div class="ttdoc">isVector - Return true if this is a vector value type. </div><div class="ttdef"><b>Definition:</b> <a href="ValueTypes_8h_source.html#l00190">ValueTypes.h:190</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90add738bd46e1d9e2f107dc4a5d49af2a4"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90add738bd46e1d9e2f107dc4a5d49af2a4">llvm::Intrinsic::x86_avx2_gather_q_q</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02496">Intrinsics.h:2496</a></div></div>
<div class="ttc" id="X86ISelDAGToDAG_8cpp_html_afc4e10b4f2ab2d548ab80b30f3b712e9a7967e4061665d0e072a0c3bffe00ac6d"><div class="ttname"><a href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9a7967e4061665d0e072a0c3bffe00ac6d">INC</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelDAGToDAG_8cpp_source.html#l01585">X86ISelDAGToDAG.cpp:1585</a></div></div>
<div class="ttc" id="classllvm_1_1X86Subtarget_html_ab976c899dd9562ae41c33581e35323fc"><div class="ttname"><a href="classllvm_1_1X86Subtarget.html#ab976c899dd9562ae41c33581e35323fc">llvm::X86Subtarget::hasAVX2</a></div><div class="ttdeci">bool hasAVX2() const </div><div class="ttdef"><b>Definition:</b> <a href="X86Subtarget_8h_source.html#l00266">X86Subtarget.h:266</a></div></div>
<div class="ttc" id="X86ISelDAGToDAG_8cpp_html_a96c1aa0eca38be914b9564cd17c82f8aa67941b74249a74c74755ca8dd31df788"><div class="ttname"><a href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa67941b74249a74c74755ca8dd31df788">SextConstantI16</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelDAGToDAG_8cpp_source.html#l01596">X86ISelDAGToDAG.cpp:1596</a></div></div>
<div class="ttc" id="X86ISelDAGToDAG_8cpp_html_a96c1aa0eca38be914b9564cd17c82f8a"><div class="ttname"><a href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8a">AtomicSz</a></div><div class="ttdeci">AtomicSz</div><div class="ttdef"><b>Definition:</b> <a href="X86ISelDAGToDAG_8cpp_source.html#l01593">X86ISelDAGToDAG.cpp:1593</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110ad116e32876f2275acf60ffb1651c9256"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ad116e32876f2275acf60ffb1651c9256">llvm::ISD::ADDE</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00204">ISDOpcodes.h:204</a></div></div>
<div class="ttc" id="namespacellvm_1_1Reloc_html_af59f6dc86e80aaf56f1afd155eebf568adc2075e13a68142b26e05ac08bbfc320"><div class="ttname"><a href="namespacellvm_1_1Reloc.html#af59f6dc86e80aaf56f1afd155eebf568adc2075e13a68142b26e05ac08bbfc320">llvm::Reloc::PIC_</a></div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_8h_source.html#l00025">CodeGen.h:25</a></div></div>
<div class="ttc" id="namespacellvm_1_1PPCISD_html_a69ad64696d1df3be05f01dfb67f5bc66a9e4500d93af7f70fdff992d9d748559d"><div class="ttname"><a href="namespacellvm_1_1PPCISD.html#a69ad64696d1df3be05f01dfb67f5bc66a9e4500d93af7f70fdff992d9d748559d">llvm::PPCISD::GlobalBaseReg</a></div><div class="ttdef"><b>Definition:</b> <a href="PPCISelLowering_8h_source.html#l00096">PPCISelLowering.h:96</a></div></div>
<div class="ttc" id="X86RegisterInfo_8h_html"><div class="ttname"><a href="X86RegisterInfo_8h.html">X86RegisterInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html">llvm::MachineBasicBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00062">MachineBasicBlock.h:62</a></div></div>
<div class="ttc" id="classllvm_1_1SDNode_1_1use__iterator_html"><div class="ttname"><a href="classllvm_1_1SDNode_1_1use__iterator.html">llvm::SDNode::use_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00439">SelectionDAGNodes.h:439</a></div></div>
<div class="ttc" id="classllvm_1_1X86Subtarget_html"><div class="ttname"><a href="classllvm_1_1X86Subtarget.html">llvm::X86Subtarget</a></div><div class="ttdef"><b>Definition:</b> <a href="X86Subtarget_8h_source.html#l00042">X86Subtarget.h:42</a></div></div>
<div class="ttc" id="classllvm_1_1X86TargetLowering_html"><div class="ttname"><a href="classllvm_1_1X86TargetLowering.html">llvm::X86TargetLowering</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8h_source.html#l00525">X86ISelLowering.h:525</a></div></div>
<div class="ttc" id="classllvm_1_1BlockAddressSDNode_html"><div class="ttname"><a href="classllvm_1_1BlockAddressSDNode.html">llvm::BlockAddressSDNode</a></div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l01562">SelectionDAGNodes.h:1562</a></div></div>
<div class="ttc" id="classllvm_1_1SelectionDAG_html_aed6667e93ace54abed8e4432b7b88927"><div class="ttname"><a href="classllvm_1_1SelectionDAG.html#aed6667e93ace54abed8e4432b7b88927">llvm::SelectionDAG::RepositionNode</a></div><div class="ttdeci">void RepositionNode(allnodes_iterator Position, SDNode *N)</div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAG_8h_source.html#l00982">SelectionDAG.h:982</a></div></div>
<div class="ttc" id="classllvm_1_1SDValue_html_a0caf6a31d8034336a9ba7791a5f583f1"><div class="ttname"><a href="classllvm_1_1SDValue.html#a0caf6a31d8034336a9ba7791a5f583f1">llvm::SDValue::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00840">SelectionDAGNodes.h:840</a></div></div>
<div class="ttc" id="namespacellvm_1_1CodeModel_html_afc59396a9e5809fc92938e203d91a8dfaa6a2e45ae404e3f797d2d7e9f3a48949"><div class="ttname"><a href="namespacellvm_1_1CodeModel.html#afc59396a9e5809fc92938e203d91a8dfaa6a2e45ae404e3f797d2d7e9f3a48949">llvm::CodeModel::Kernel</a></div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_8h_source.html#l00030">CodeGen.h:30</a></div></div>
<div class="ttc" id="classllvm_1_1FunctionPass_html"><div class="ttname"><a href="classllvm_1_1FunctionPass.html">llvm::FunctionPass</a></div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00293">Pass.h:293</a></div></div>
<div class="ttc" id="namespacellvm_1_1CodeGenOpt_html_a411055ea15209051c2370bbf655ec8d4a451bbac85aff02d070be3c17a6bef928"><div class="ttname"><a href="namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4a451bbac85aff02d070be3c17a6bef928">llvm::CodeGenOpt::None</a></div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_8h_source.html#l00046">CodeGen.h:46</a></div></div>
<div class="ttc" id="README-SSE_8txt_html_abd9c765b9afafff59eb14d50c9e9fba1"><div class="ttname"><a href="README-SSE_8txt.html#abd9c765b9afafff59eb14d50c9e9fba1">EAX</a></div><div class="ttdeci">We currently esp xorpd xmm0 xmm0 xmm1 xmm2 xmm1 jb LBB_X_2 xmm2 esp esp ret Lower memcpy memset to a series of SSE bit move instructions when it s feasible Still ok After register LLVM ADD32rm IMUL32rr EDX ESI EAX</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00208">README-SSE.txt:208</a></div></div>
<div class="ttc" id="namespacellvm_1_1NVPTX_1_1PTXCvtMode_html_ad81eb7557182862503894d8bc5e8328fa3075a56e6cfcf4ac3328185fa11201b4"><div class="ttname"><a href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fa3075a56e6cfcf4ac3328185fa11201b4">llvm::NVPTX::PTXCvtMode::RN</a></div><div class="ttdef"><b>Definition:</b> <a href="NVPTX_8h_source.html#l00140">NVPTX.h:140</a></div></div>
<div class="ttc" id="X86ISelDAGToDAG_8cpp_html_a96c1aa0eca38be914b9564cd17c82f8aa8842984357dc9c9d3c441d1529f6b1a7"><div class="ttname"><a href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa8842984357dc9c9d3c441d1529f6b1a7">I8</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelDAGToDAG_8cpp_source.html#l01595">X86ISelDAGToDAG.cpp:1595</a></div></div>
<div class="ttc" id="X86ISelDAGToDAG_8cpp_html_a96c1aa0eca38be914b9564cd17c82f8aa8a57e45c133b807fad1be007b127287f"><div class="ttname"><a href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa8a57e45c133b807fad1be007b127287f">I16</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelDAGToDAG_8cpp_source.html#l01598">X86ISelDAGToDAG.cpp:1598</a></div></div>
<div class="ttc" id="classllvm_1_1SDNode_html_a8810bf428dcf84d48f39c8f5ba9a8c94"><div class="ttname"><a href="classllvm_1_1SDNode.html#a8810bf428dcf84d48f39c8f5ba9a8c94">llvm::SDNode::use_begin</a></div><div class="ttdeci">use_iterator use_begin() const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00496">SelectionDAGNodes.h:496</a></div></div>
<div class="ttc" id="classllvm_1_1MemSDNode_html_acd3bb9ee2ec53fa4be1fdf155b0b5a17"><div class="ttname"><a href="classllvm_1_1MemSDNode.html#acd3bb9ee2ec53fa4be1fdf155b0b5a17">llvm::MemSDNode::isVolatile</a></div><div class="ttdeci">bool isVolatile() const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l01008">SelectionDAGNodes.h:1008</a></div></div>
<div class="ttc" id="namespacellvm_html_a980570dc1410d4ef53806f82028ca381"><div class="ttname"><a href="namespacellvm.html#a980570dc1410d4ef53806f82028ca381">llvm::BuildMI</a></div><div class="ttdeci">MachineInstrBuilder BuildMI(MachineFunction &amp;MF, DebugLoc DL, const MCInstrDesc &amp;MCID)</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00223">MachineInstrBuilder.h:223</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110aadfdefcb133a7f0262a05934aba8ce5d"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110aadfdefcb133a7f0262a05934aba8ce5d">llvm::ISD::FP_EXTEND</a></div><div class="ttdoc">X = FP_EXTEND(Y) - Extend a smaller FP type into a larger FP type. </div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00411">ISDOpcodes.h:411</a></div></div>
<div class="ttc" id="structllvm_1_1EVT_html"><div class="ttname"><a href="structllvm_1_1EVT.html">llvm::EVT</a></div><div class="ttdef"><b>Definition:</b> <a href="ValueTypes_8h_source.html#l00576">ValueTypes.h:576</a></div></div>
<div class="ttc" id="classT_html"><div class="ttname"><a href="classT.html">T</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a4112a866197a97a70bdc78ef92c79b4c"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a4112a866197a97a70bdc78ef92c79b4c">llvm::ISD::ATOMIC_LOAD_OR</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00627">ISDOpcodes.h:627</a></div></div>
<div class="ttc" id="classllvm_1_1LSBaseSDNode_html_a76f8f644c33a885eaff35f94c39d5048"><div class="ttname"><a href="classllvm_1_1LSBaseSDNode.html#a76f8f644c33a885eaff35f94c39d5048">llvm::LSBaseSDNode::getAddressingMode</a></div><div class="ttdeci">ISD::MemIndexedMode getAddressingMode() const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l01702">SelectionDAGNodes.h:1702</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">llvm::ISD::MUL</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00176">ISDOpcodes.h:176</a></div></div>
<div class="ttc" id="structllvm_1_1MachinePointerInfo_html"><div class="ttname"><a href="structllvm_1_1MachinePointerInfo.html">llvm::MachinePointerInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineMemOperand_8h_source.html#l00032">MachineMemOperand.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1SDNode_html_aff84cd98daca4f1901020fb99845fcfc"><div class="ttname"><a href="classllvm_1_1SDNode.html#aff84cd98daca4f1901020fb99845fcfc">llvm::SDNode::getConstantOperandVal</a></div><div class="ttdeci">uint64_t getConstantOperandVal(unsigned Num) const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAG_8cpp_source.html#l06248">SelectionDAG.cpp:6248</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a038a7f124b4118456a27a739c03650bf"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a038a7f124b4118456a27a739c03650bf">llvm::ISD::TargetConstantPool</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00113">ISDOpcodes.h:113</a></div></div>
<div class="ttc" id="X86Subtarget_8h_html"><div class="ttname"><a href="X86Subtarget_8h.html">X86Subtarget.h</a></div></div>
<div class="ttc" id="classllvm_1_1MCInstrInfo_html_ab16f5a81fccfe4b7f645ba5a74ffad02"><div class="ttname"><a href="classllvm_1_1MCInstrInfo.html#ab16f5a81fccfe4b7f645ba5a74ffad02">llvm::MCInstrInfo::get</a></div><div class="ttdeci">const MCInstrDesc &amp; get(unsigned Opcode) const </div><div class="ttdef"><b>Definition:</b> <a href="MCInstrInfo_8h_source.html#l00048">MCInstrInfo.h:48</a></div></div>
<div class="ttc" id="classllvm_1_1MemSDNode_html_a2fa8491ab36125d7f5dd38d3a4868934"><div class="ttname"><a href="classllvm_1_1MemSDNode.html#a2fa8491ab36125d7f5dd38d3a4868934">llvm::MemSDNode::getPointerInfo</a></div><div class="ttdeci">const MachinePointerInfo &amp; getPointerInfo() const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l01036">SelectionDAGNodes.h:1036</a></div></div>
<div class="ttc" id="classllvm_1_1LoadSDNode_html_ae769a35bdc5f1748a40134166a312901"><div class="ttname"><a href="classllvm_1_1LoadSDNode.html#ae769a35bdc5f1748a40134166a312901">llvm::LoadSDNode::getOffset</a></div><div class="ttdeci">const SDValue &amp; getOffset() const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l01740">SelectionDAGNodes.h:1740</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110ad469508535ce2082a1ab1f0e429187b8"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ad469508535ce2082a1ab1f0e429187b8">llvm::ISD::TokenFactor</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00050">ISDOpcodes.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html"><div class="ttname"><a href="classllvm_1_1GlobalValue.html">llvm::GlobalValue</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00029">GlobalValue.h:29</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a53e7e8b7a3b409635277340ab405392f"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a53e7e8b7a3b409635277340ab405392f">llvm::Intrinsic::x86_avx2_gather_d_q</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02488">Intrinsics.h:2488</a></div></div>
<div class="ttc" id="X86ISelDAGToDAG_8cpp_html_a96c1aa0eca38be914b9564cd17c82f8aa448d3c03c5d271a0002d1b4b2f3e0e89"><div class="ttname"><a href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa448d3c03c5d271a0002d1b4b2f3e0e89">ConstantI64</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelDAGToDAG_8cpp_source.html#l01603">X86ISelDAGToDAG.cpp:1603</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86ISD_html_ab81d298b0f48499395110a6055048b28a001c27cd385a966a276d1ee61bed8c98"><div class="ttname"><a href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a001c27cd385a966a276d1ee61bed8c98">llvm::X86ISD::ATOMUMAX64_DAG</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8h_source.html#l00411">X86ISelLowering.h:411</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a1b45f45820a60c09244a87eb59824aec"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a></div><div class="ttdeci">add sub stmia L5 ldr r0 bl L_printf $stub Instead of a and a wouldn t it be better to do three moves *Return an aggregate type is even return S</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00197">Target/ARM/README.txt:197</a></div></div>
<div class="ttc" id="TargetOptions_8h_html"><div class="ttname"><a href="TargetOptions_8h.html">TargetOptions.h</a></div></div>
<div class="ttc" id="classllvm_1_1ExternalSymbolSDNode_html"><div class="ttname"><a href="classllvm_1_1ExternalSymbolSDNode.html">llvm::ExternalSymbolSDNode</a></div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l01599">SelectionDAGNodes.h:1599</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">llvm::ISD::OR</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00295">ISDOpcodes.h:295</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="classllvm_1_1SelectionDAG_html_ae8c041f67463ea67d6c43867729b82cb"><div class="ttname"><a href="classllvm_1_1SelectionDAG.html#ae8c041f67463ea67d6c43867729b82cb">llvm::SelectionDAG::UpdateNodeOperands</a></div><div class="ttdeci">SDNode * UpdateNodeOperands(SDNode *N, SDValue Op)</div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAG_8cpp_source.html#l05066">SelectionDAG.cpp:5066</a></div></div>
<div class="ttc" id="classllvm_1_1SelectionDAG_html"><div class="ttname"><a href="classllvm_1_1SelectionDAG.html">llvm::SelectionDAG</a></div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAG_8h_source.html#l00169">SelectionDAG.h:169</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a2ba5dc742a83d35edf3c37a01f7508cd"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a2ba5dc742a83d35edf3c37a01f7508cd">llvm::Intrinsic::x86_avx2_gather_q_ps_256</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02495">Intrinsics.h:2495</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00880">SmallVector.h:880</a></div></div>
<div class="ttc" id="classllvm_1_1Attribute_html_aab7ee4b8fd1d3e7e4cea87868855e60ea2ac83e0612ce8f8d69651cd529061feb"><div class="ttname"><a href="classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60ea2ac83e0612ce8f8d69651cd529061feb">llvm::Attribute::OptimizeForSize</a></div><div class="ttdoc">opt_size </div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00091">Attributes.h:91</a></div></div>
<div class="ttc" id="X86MachineFunctionInfo_8h_html"><div class="ttname"><a href="X86MachineFunctionInfo_8h.html">X86MachineFunctionInfo.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86ISD_html_ab81d298b0f48499395110a6055048b28a16c85fbcecfa4452c8b2ca178e4c55e4"><div class="ttname"><a href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a16c85fbcecfa4452c8b2ca178e4c55e4">llvm::X86ISD::INC</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8h_source.html#l00293">X86ISelLowering.h:293</a></div></div>
<div class="ttc" id="classllvm_1_1MachineSDNode_html"><div class="ttname"><a href="classllvm_1_1MachineSDNode.html">llvm::MachineSDNode</a></div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l01781">SelectionDAGNodes.h:1781</a></div></div>
<div class="ttc" id="classllvm_1_1MemSDNode_html_ae3cb6fbf8c8cb79e10ac61bd98c85211"><div class="ttname"><a href="classllvm_1_1MemSDNode.html#ae3cb6fbf8c8cb79e10ac61bd98c85211">llvm::MemSDNode::getChain</a></div><div class="ttdeci">const SDValue &amp; getChain() const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l01053">SelectionDAGNodes.h:1053</a></div></div>
<div class="ttc" id="classllvm_1_1X86Subtarget_html_a92b94bad0207c5841e67d0ac5bf088ee"><div class="ttname"><a href="classllvm_1_1X86Subtarget.html#a92b94bad0207c5841e67d0ac5bf088ee">llvm::X86Subtarget::isTargetLinux</a></div><div class="ttdeci">bool isTargetLinux() const </div><div class="ttdef"><b>Definition:</b> <a href="X86Subtarget_8h_source.html#l00322">X86Subtarget.h:322</a></div></div>
<div class="ttc" id="classllvm_1_1MemSDNode_html_a89e2b5e3fb867b4040f893c6ae3d2132"><div class="ttname"><a href="classllvm_1_1MemSDNode.html#a89e2b5e3fb867b4040f893c6ae3d2132">llvm::MemSDNode::getMemOperand</a></div><div class="ttdeci">MachineMemOperand * getMemOperand() const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l01034">SelectionDAGNodes.h:1034</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86ISD_html_ab81d298b0f48499395110a6055048b28aa38ae73af96bffac418fb46fd4941cf4"><div class="ttname"><a href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28aa38ae73af96bffac418fb46fd4941cf4">llvm::X86ISD::ATOMXOR64_DAG</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8h_source.html#l00406">X86ISelLowering.h:406</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90aad3b2882d1697f6658b9c9abb051afee"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aad3b2882d1697f6658b9c9abb051afee">llvm::Intrinsic::x86_avx2_gather_d_ps</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02486">Intrinsics.h:2486</a></div></div>
<div class="ttc" id="classllvm_1_1SDLoc_html"><div class="ttname"><a href="classllvm_1_1SDLoc.html">llvm::SDLoc</a></div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00799">SelectionDAGNodes.h:799</a></div></div>
<div class="ttc" id="structllvm_1_1MachinePointerInfo_html_a23e5cd18f87dae8314d615484032d6a2"><div class="ttname"><a href="structllvm_1_1MachinePointerInfo.html#a23e5cd18f87dae8314d615484032d6a2">llvm::MachinePointerInfo::getAddrSpace</a></div><div class="ttdeci">unsigned getAddrSpace() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8cpp_source.html#l00391">MachineInstr.cpp:391</a></div></div>
<div class="ttc" id="classllvm_1_1MVT_html_afd69b4f2dff97a2d7c0192cc769ef50caf777e086e32f60c0c87b460964eae7d0"><div class="ttname"><a href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50caf777e086e32f60c0c87b460964eae7d0">llvm::MVT::i8</a></div><div class="ttdef"><b>Definition:</b> <a href="ValueTypes_8h_source.html#l00044">ValueTypes.h:44</a></div></div>
<div class="ttc" id="classllvm_1_1SDNode_html"><div class="ttname"><a href="classllvm_1_1SDNode.html">llvm::SDNode</a></div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00306">SelectionDAGNodes.h:306</a></div></div>
<div class="ttc" id="classllvm_1_1SDValue_html_ad07bffbe0e911b0ce1b44b4f7e23468a"><div class="ttname"><a href="classllvm_1_1SDValue.html#ad07bffbe0e911b0ce1b44b4f7e23468a">llvm::SDValue::use_empty</a></div><div class="ttdeci">bool use_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00867">SelectionDAGNodes.h:867</a></div></div>
<div class="ttc" id="X86ISelDAGToDAG_8cpp_html_aa0db74423051aebc66e0b6f8c540a5bf"><div class="ttname"><a href="X86ISelDAGToDAG_8cpp.html#aa0db74423051aebc66e0b6f8c540a5bf">InsertDAGNode</a></div><div class="ttdeci">static void InsertDAGNode(SelectionDAG &amp;DAG, SDValue Pos, SDValue N)</div><div class="ttdef"><b>Definition:</b> <a href="X86ISelDAGToDAG_8cpp_source.html#l00762">X86ISelDAGToDAG.cpp:762</a></div></div>
<div class="ttc" id="classllvm_1_1SelectionDAGISel_html"><div class="ttname"><a href="classllvm_1_1SelectionDAGISel.html">llvm::SelectionDAGISel</a></div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGISel_8h_source.html#l00042">SelectionDAGISel.h:42</a></div></div>
<div class="ttc" id="namespacellvm_1_1A64DB_html_a6fce8157775f3ec93f326b52b0f1e0f5ad61b145eb8cbab18feb1b2e2ce269a7e"><div class="ttname"><a href="namespacellvm_1_1A64DB.html#a6fce8157775f3ec93f326b52b0f1e0f5ad61b145eb8cbab18feb1b2e2ce269a7e">llvm::A64DB::LD</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00177">AArch64BaseInfo.h:177</a></div></div>
<div class="ttc" id="X86ISelDAGToDAG_8cpp_html_afc4e10b4f2ab2d548ab80b30f3b712e9ac62338ffb5de22369c75caa565b5da1a"><div class="ttname"><a href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9ac62338ffb5de22369c75caa565b5da1a">XOR</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelDAGToDAG_8cpp_source.html#l01589">X86ISelDAGToDAG.cpp:1589</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00101">Debug.cpp:101</a></div></div>
<div class="ttc" id="namespacestd_html_ab8424022895aee3e366fb9a32f2883cb"><div class="ttname"><a href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a></div><div class="ttdeci">void swap(llvm::BitVector &amp;LHS, llvm::BitVector &amp;RHS)</div><div class="ttdoc">Implement std::swap in terms of BitVector swap. </div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00591">BitVector.h:591</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90aed1108228a6f6e381974a5747b9f8094"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aed1108228a6f6e381974a5747b9f8094">llvm::Intrinsic::x86_avx2_gather_d_pd</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02484">Intrinsics.h:2484</a></div></div>
<div class="ttc" id="classllvm_1_1LoadSDNode_html_af15fb8b2d4c9f295bdcf85a1eb506702"><div class="ttname"><a href="classllvm_1_1LoadSDNode.html#af15fb8b2d4c9f295bdcf85a1eb506702">llvm::LoadSDNode::getExtensionType</a></div><div class="ttdeci">ISD::LoadExtType getExtensionType() const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l01735">SelectionDAGNodes.h:1735</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html"><div class="ttname"><a href="classllvm_1_1APInt.html">llvm::APInt</a></div><div class="ttdoc">Class for arbitrary precision integers. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00075">APInt.h:75</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a66b710456fdacec2e3c16aa1a172ba27"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a66b710456fdacec2e3c16aa1a172ba27">llvm::Intrinsic::x86_avx2_gather_d_d</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02482">Intrinsics.h:2482</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a4b437632fd9b97dd36010d85eb363efe"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a4b437632fd9b97dd36010d85eb363efe">llvm::ISD::FrameIndex</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00062">ISDOpcodes.h:62</a></div></div>
<div class="ttc" id="CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2README_8txt_source.html#l00036">CodeGen/README.txt:36</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantSDNode_html_ae52ea754f0f064b6440e99103abea366"><div class="ttname"><a href="classllvm_1_1ConstantSDNode.html#ae52ea754f0f064b6440e99103abea366">llvm::ConstantSDNode::getSExtValue</a></div><div class="ttdeci">int64_t getSExtValue() const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l01258">SelectionDAGNodes.h:1258</a></div></div>
<div class="ttc" id="classllvm_1_1SDNode_html_aef02f2c1bd12936a80611b134b24a47d"><div class="ttname"><a href="classllvm_1_1SDNode.html#aef02f2c1bd12936a80611b134b24a47d">llvm::SDNode::use_end</a></div><div class="ttdeci">static use_iterator use_end()</div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00500">SelectionDAGNodes.h:500</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a93fdf85eff945f1a668b4915a051453e"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a93fdf85eff945f1a668b4915a051453e">llvm::ISD::ZERO_EXTEND</a></div><div class="ttdoc">ZERO_EXTEND - Used for integer types, zeroing the new bits. </div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00357">ISDOpcodes.h:357</a></div></div>
<div class="ttc" id="classllvm_1_1SelectionDAG_html_af5d5ed0a2c2186ec77b8dd9c38474d3e"><div class="ttname"><a href="classllvm_1_1SelectionDAG.html#af5d5ed0a2c2186ec77b8dd9c38474d3e">llvm::SelectionDAG::getNode</a></div><div class="ttdeci">SDValue getNode(unsigned Opcode, SDLoc DL, EVT VT)</div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAG_8cpp_source.html#l02485">SelectionDAG.cpp:2485</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a27d5d8ef82302b739ba3ca8be1a5513d"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a27d5d8ef82302b739ba3ca8be1a5513d">llvm::ISD::ANY_EXTEND</a></div><div class="ttdoc">ANY_EXTEND - Used for integer types. The high bits are undefined. </div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00360">ISDOpcodes.h:360</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86ISD_html_ab81d298b0f48499395110a6055048b28ab42a00cd9b29370e08759eeed0673c0a"><div class="ttname"><a href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28ab42a00cd9b29370e08759eeed0673c0a">llvm::X86ISD::MUL_IMM</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8h_source.html#l00304">X86ISelLowering.h:304</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86ISD_html_ab81d298b0f48499395110a6055048b28af9b840077b4580ddbfd3bf992fe359eb"><div class="ttname"><a href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28af9b840077b4580ddbfd3bf992fe359eb">llvm::X86ISD::WrapperRIP</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8h_source.html#l00142">X86ISelLowering.h:142</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90aca2b6803fed08228d7c704ff4a889caa"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aca2b6803fed08228d7c704ff4a889caa">llvm::Intrinsic::x86_avx2_gather_q_q_256</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02497">Intrinsics.h:2497</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_a684cfe02c582e8d75cd6d457e63e6c25"><div class="ttname"><a href="namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">llvm::APIntOps::And</a></div><div class="ttdeci">APInt And(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise AND function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01840">APInt.h:1840</a></div></div>
<div class="ttc" id="X86ISelDAGToDAG_8cpp_html_accefa4c7462a1332c8e02f04942cd445"><div class="ttname"><a href="X86ISelDAGToDAG_8cpp.html#accefa4c7462a1332c8e02f04942cd445">isDispSafeForFrameIndex</a></div><div class="ttdeci">static bool isDispSafeForFrameIndex(int64_t Val)</div><div class="ttdef"><b>Definition:</b> <a href="X86ISelDAGToDAG_8cpp_source.html#l00576">X86ISelDAGToDAG.cpp:576</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86ISD_html_ab81d298b0f48499395110a6055048b28a483bad339c6126c64687d14c10979979"><div class="ttname"><a href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a483bad339c6126c64687d14c10979979">llvm::X86ISD::XOR</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8h_source.html#l00293">X86ISelLowering.h:293</a></div></div>
<div class="ttc" id="MachineRegisterInfo_8h_html"><div class="ttname"><a href="MachineRegisterInfo_8h.html">MachineRegisterInfo.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90ae081fff15bbace24a022ded835680d5d"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ae081fff15bbace24a022ded835680d5d">llvm::Intrinsic::x86_avx2_gather_q_d</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02490">Intrinsics.h:2490</a></div></div>
<div class="ttc" id="namespacellvm_1_1TargetOpcode_html_a348d4259b5fa6a8ecfe94e7ae512e1a8a84c9fddf3247a349b7f857c1cbb93e2c"><div class="ttname"><a href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8a84c9fddf3247a349b7f857c1cbb93e2c">llvm::TargetOpcode::EXTRACT_SUBREG</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetOpcodes_8h_source.html#l00041">TargetOpcodes.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1SDValue_html_a89345bda8c4fb44bd11b63904fe006bd"><div class="ttname"><a href="classllvm_1_1SDValue.html#a89345bda8c4fb44bd11b63904fe006bd">llvm::SDValue::getConstantOperandVal</a></div><div class="ttdeci">uint64_t getConstantOperandVal(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00852">SelectionDAGNodes.h:852</a></div></div>
<div class="ttc" id="X86ISelDAGToDAG_8cpp_html_a7183c66b968f67a612e2be5fd902d3e9"><div class="ttname"><a href="X86ISelDAGToDAG_8cpp.html#a7183c66b968f67a612e2be5fd902d3e9">getFusedLdStOpcode</a></div><div class="ttdeci">static unsigned getFusedLdStOpcode(EVT &amp;LdVT, unsigned Opc)</div><div class="ttdef"><b>Definition:</b> <a href="X86ISelDAGToDAG_8cpp_source.html#l02003">X86ISelDAGToDAG.cpp:2003</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">llvm::ISD::AND</a></div><div class="ttdoc">Bitwise operators - logical and, logical or, logical xor. </div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00295">ISDOpcodes.h:295</a></div></div>
<div class="ttc" id="classllvm_1_1SDNode_html_ae4cb676e77b9f238058c70faa609a5d7"><div class="ttname"><a href="classllvm_1_1SDNode.html#ae4cb676e77b9f238058c70faa609a5d7">llvm::SDNode::hasAnyUseOfValue</a></div><div class="ttdeci">bool hasAnyUseOfValue(unsigned Value) const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAG_8cpp_source.html#l06138">SelectionDAG.cpp:6138</a></div></div>
<div class="ttc" id="X86ISelDAGToDAG_8cpp_html_a96c1aa0eca38be914b9564cd17c82f8aa3eb390ee21f43d1995b9b46118a09677"><div class="ttname"><a href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa3eb390ee21f43d1995b9b46118a09677">AtomicSzEnd</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelDAGToDAG_8cpp_source.html#l01605">X86ISelDAGToDAG.cpp:1605</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a1354c6f8508d6cd697dc89a5d9a52dfd"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a1354c6f8508d6cd697dc89a5d9a52dfd">llvm::ISD::SMUL_LOHI</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00181">ISDOpcodes.h:181</a></div></div>
<div class="ttc" id="Intrinsics_8h_html"><div class="ttname"><a href="Intrinsics_8h.html">Intrinsics.h</a></div></div>
<div class="ttc" id="namespacellvm_html_a01c81c4626919360d8b4a30f1c21d823"><div class="ttname"><a href="namespacellvm.html#a01c81c4626919360d8b4a30f1c21d823">llvm::createX86ISelDag</a></div><div class="ttdeci">FunctionPass * createX86ISelDag(X86TargetMachine &amp;TM, CodeGenOpt::Level OptLevel)</div><div class="ttdef"><b>Definition:</b> <a href="X86ISelDAGToDAG_8cpp_source.html#l02809">X86ISelDAGToDAG.cpp:2809</a></div></div>
<div class="ttc" id="namespacellvm_1_1TargetOpcode_html_a348d4259b5fa6a8ecfe94e7ae512e1a8a5a91c23866687baf221ce86ff6fde01f"><div class="ttname"><a href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8a5a91c23866687baf221ce86ff6fde01f">llvm::TargetOpcode::IMPLICIT_DEF</a></div><div class="ttdoc">IMPLICIT_DEF - This is the MachineInstr-level equivalent of undef. </div><div class="ttdef"><b>Definition:</b> <a href="TargetOpcodes_8h_source.html#l00052">TargetOpcodes.h:52</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a269b81f007000306e3e69d0d290c2159"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a269b81f007000306e3e69d0d290c2159">llvm::ISD::LOAD</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00460">ISDOpcodes.h:460</a></div></div>
<div class="ttc" id="classllvm_1_1SelectionDAG_html_a307e5150c6c85f43348d2b09a69d7591"><div class="ttname"><a href="classllvm_1_1SelectionDAG.html#a307e5150c6c85f43348d2b09a69d7591">llvm::SelectionDAG::ReplaceAllUsesWith</a></div><div class="ttdeci">void ReplaceAllUsesWith(SDValue From, SDValue Op)</div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAG_8cpp_source.html#l05656">SelectionDAG.cpp:5656</a></div></div>
<div class="ttc" id="classllvm_1_1FrameIndexSDNode_html"><div class="ttname"><a href="classllvm_1_1FrameIndexSDNode.html">llvm::FrameIndexSDNode</a></div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l01337">SelectionDAGNodes.h:1337</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86ISD_html_ab81d298b0f48499395110a6055048b28aaa37a4cc02090ea86d2448dc9d967d75"><div class="ttname"><a href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28aaa37a4cc02090ea86d2448dc9d967d75">llvm::X86ISD::TC_RETURN</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8h_source.html#l00243">X86ISelLowering.h:243</a></div></div>
<div class="ttc" id="regcomp_8c_html_a0240ac851181b84ac374872dc5434ee4"><div class="ttname"><a href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div><div class="ttdeci">#define N</div></div>
<div class="ttc" id="X86ISelDAGToDAG_8cpp_html_a2703c20c686bb300521ff3775ea49862"><div class="ttname"><a href="X86ISelDAGToDAG_8cpp.html#a2703c20c686bb300521ff3775ea49862">STATISTIC</a></div><div class="ttdeci">STATISTIC(NumLoadMoved,&quot;Number of loads moved below TokenFactor&quot;)</div></div>
<div class="ttc" id="X86ISelDAGToDAG_8cpp_html_a2bf7db878e7e3a32aec73521459cf6a1"><div class="ttname"><a href="X86ISelDAGToDAG_8cpp.html#a2bf7db878e7e3a32aec73521459cf6a1">FoldMaskedShiftToScaledMask</a></div><div class="ttdeci">static bool FoldMaskedShiftToScaledMask(SelectionDAG &amp;DAG, SDValue N, uint64_t Mask, SDValue Shift, SDValue X, X86ISelAddressMode &amp;AM)</div><div class="ttdef"><b>Definition:</b> <a href="X86ISelDAGToDAG_8cpp_source.html#l00816">X86ISelDAGToDAG.cpp:816</a></div></div>
<div class="ttc" id="X86ISelDAGToDAG_8cpp_html_acb91a4867f4f627e9d3c60fa2471a894"><div class="ttname"><a href="X86ISelDAGToDAG_8cpp.html#acb91a4867f4f627e9d3c60fa2471a894">MoveBelowOrigChain</a></div><div class="ttdeci">static void MoveBelowOrigChain(SelectionDAG *CurDAG, SDValue Load, SDValue Call, SDValue OrigChain)</div><div class="ttdef"><b>Definition:</b> <a href="X86ISelDAGToDAG_8cpp_source.html#l00362">X86ISelDAGToDAG.cpp:362</a></div></div>
<div class="ttc" id="AArch64Disassembler_8cpp_html_a30bccd0ebacd9892c243f7bd520e4aa0"><div class="ttname"><a href="AArch64Disassembler_8cpp.html#a30bccd0ebacd9892c243f7bd520e4aa0">getReg</a></div><div class="ttdeci">static unsigned getReg(const void *D, unsigned RC, unsigned RegNo)</div><div class="ttdef"><b>Definition:</b> <a href="AArch64Disassembler_8cpp_source.html#l00299">AArch64Disassembler.cpp:299</a></div></div>
<div class="ttc" id="X86ISelDAGToDAG_8cpp_html_a96c1aa0eca38be914b9564cd17c82f8aa730abdb44c8eead5365e1b6830c58154"><div class="ttname"><a href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa730abdb44c8eead5365e1b6830c58154">ConstantI16</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelDAGToDAG_8cpp_source.html#l01597">X86ISelDAGToDAG.cpp:1597</a></div></div>
<div class="ttc" id="classllvm_1_1StoreSDNode_html_a7daff97bea10c39c89e0263cf7e51c5c"><div class="ttname"><a href="classllvm_1_1StoreSDNode.html#a7daff97bea10c39c89e0263cf7e51c5c">llvm::StoreSDNode::getOffset</a></div><div class="ttdeci">const SDValue &amp; getOffset() const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l01770">SelectionDAGNodes.h:1770</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a428ec1341b34eafa63518914e7f5ddf0"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a428ec1341b34eafa63518914e7f5ddf0">llvm::ISD::ATOMIC_LOAD_XOR</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00628">ISDOpcodes.h:628</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a15623094a1ed0cd7163dc786e44c87c9"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a15623094a1ed0cd7163dc786e44c87c9">llvm::ISD::isNON_EXTLoad</a></div><div class="ttdeci">bool isNON_EXTLoad(const SDNode *N)</div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l01894">SelectionDAGNodes.h:1894</a></div></div>
<div class="ttc" id="X86InstrBuilder_8h_html"><div class="ttname"><a href="X86InstrBuilder_8h.html">X86InstrBuilder.h</a></div></div>
<div class="ttc" id="classllvm_1_1SDNode_html_a7869db2aca4044d21da972bed855b0d0"><div class="ttname"><a href="classllvm_1_1SDNode.html#a7869db2aca4044d21da972bed855b0d0">llvm::SDNode::getNodeId</a></div><div class="ttdeci">int getNodeId() const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00417">SelectionDAGNodes.h:417</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a3b23e0f82d060d6ff23c21170de119ed"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a3b23e0f82d060d6ff23c21170de119ed">llvm::Intrinsic::x86_avx2_gather_d_d_256</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02483">Intrinsics.h:2483</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a84c47705bcf7271413738ae8bf3871e6"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a84c47705bcf7271413738ae8bf3871e6">llvm::ISD::CopyFromReg</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00151">ISDOpcodes.h:151</a></div></div>
<div class="ttc" id="classllvm_1_1SDValue_html_a7d2ad4aa4277eb4e1138ff9791c8fbb7"><div class="ttname"><a href="classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">llvm::SDValue::getValueType</a></div><div class="ttdeci">EVT getValueType() const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00843">SelectionDAGNodes.h:843</a></div></div>
<div class="ttc" id="X86ISelDAGToDAG_8cpp_html_a96c1aa0eca38be914b9564cd17c82f8aaa65eb6ad08456c6c3af62f1574ef3736"><div class="ttname"><a href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aaa65eb6ad08456c6c3af62f1574ef3736">I64</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelDAGToDAG_8cpp_source.html#l01604">X86ISelDAGToDAG.cpp:1604</a></div></div>
<div class="ttc" id="X86ISelDAGToDAG_8cpp_html_a96c1aa0eca38be914b9564cd17c82f8aa755fb6cf65f9f9fd22e67304f08ba90c"><div class="ttname"><a href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa755fb6cf65f9f9fd22e67304f08ba90c">SextConstantI64</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelDAGToDAG_8cpp_source.html#l01602">X86ISelDAGToDAG.cpp:1602</a></div></div>
<div class="ttc" id="classllvm_1_1HandleSDNode_html"><div class="ttname"><a href="classllvm_1_1HandleSDNode.html">llvm::HandleSDNode</a></div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00942">SelectionDAGNodes.h:942</a></div></div>
<div class="ttc" id="ARMSubtarget_8cpp_html_a4bd80d4e433d9f72af26b364036900dc"><div class="ttname"><a href="ARMSubtarget_8cpp.html#a4bd80d4e433d9f72af26b364036900dc">Align</a></div><div class="ttdeci">static cl::opt&lt; AlignMode &gt; Align(cl::desc(&quot;Load/store alignment support&quot;), cl::Hidden, cl::init(DefaultAlign), cl::values(clEnumValN(DefaultAlign,&quot;arm-default-align&quot;,&quot;Generate unaligned accesses only on hardware/OS &quot;&quot;combinations that are known to support them&quot;), clEnumValN(StrictAlign,&quot;arm-strict-align&quot;,&quot;Disallow all unaligned memory accesses&quot;), clEnumValN(NoStrictAlign,&quot;arm-no-strict-align&quot;,&quot;Allow unaligned memory accesses&quot;), clEnumValEnd))</div></div>
<div class="ttc" id="classllvm_1_1MVT_html_afd69b4f2dff97a2d7c0192cc769ef50cab3be25b50efa0289a3c86fd50454b683"><div class="ttname"><a href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50cab3be25b50efa0289a3c86fd50454b683">llvm::MVT::i16</a></div><div class="ttdef"><b>Definition:</b> <a href="ValueTypes_8h_source.html#l00045">ValueTypes.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1SelectionDAG_html_a70d70d915a2b3bb0b4d1b0d0a456d0a2"><div class="ttname"><a href="classllvm_1_1SelectionDAG.html#a70d70d915a2b3bb0b4d1b0d0a456d0a2">llvm::SelectionDAG::getTargetExtractSubreg</a></div><div class="ttdeci">SDValue getTargetExtractSubreg(int SRIdx, SDLoc DL, EVT VT, SDValue Operand)</div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAG_8cpp_source.html#l05573">SelectionDAG.cpp:5573</a></div></div>
<div class="ttc" id="X86ISelDAGToDAG_8cpp_html_a96c1aa0eca38be914b9564cd17c82f8aa250f0ba0c9ddd9735481a1a7758a28b2"><div class="ttname"><a href="X86ISelDAGToDAG_8cpp.html#a96c1aa0eca38be914b9564cd17c82f8aa250f0ba0c9ddd9735481a1a7758a28b2">SextConstantI32</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelDAGToDAG_8cpp_source.html#l01599">X86ISelDAGToDAG.cpp:1599</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">llvm::ISD::XOR</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00295">ISDOpcodes.h:295</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86ISD_html_ab81d298b0f48499395110a6055048b28a9f2e4e1e83010173fe9361ecfa60faef"><div class="ttname"><a href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a9f2e4e1e83010173fe9361ecfa60faef">llvm::X86ISD::GlobalBaseReg</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8h_source.html#l00134">X86ISelLowering.h:134</a></div></div>
<div class="ttc" id="Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="Target_2X86_2README_8txt_source.html#l00297">Target/X86/README.txt:297</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a1b7eba375863a0e80549eb1a782c5683"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a1b7eba375863a0e80549eb1a782c5683">llvm::ISD::TargetBlockAddress</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00115">ISDOpcodes.h:115</a></div></div>
<div class="ttc" id="Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00097">Debug.h:97</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86ISD_html_ab81d298b0f48499395110a6055048b28a7184302cbbfa2cd5ce11520bb0420cda"><div class="ttname"><a href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a7184302cbbfa2cd5ce11520bb0420cda">llvm::X86ISD::ATOMADD64_DAG</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8h_source.html#l00403">X86ISelLowering.h:403</a></div></div>
<div class="ttc" id="classllvm_1_1X86Subtarget_html_a0a990f3c55882bac1e61029cb551290c"><div class="ttname"><a href="classllvm_1_1X86Subtarget.html#a0a990f3c55882bac1e61029cb551290c">llvm::X86Subtarget::callRegIndirect</a></div><div class="ttdeci">bool callRegIndirect() const </div><div class="ttdef"><b>Definition:</b> <a href="X86Subtarget_8h_source.html#l00301">X86Subtarget.h:301</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86_html_a43e102a1c33f2dffc750026a05828f52"><div class="ttname"><a href="namespacellvm_1_1X86.html#a43e102a1c33f2dffc750026a05828f52">llvm::X86::isZeroNode</a></div><div class="ttdeci">bool isZeroNode(SDValue Elt)</div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8cpp_source.html#l04556">X86ISelLowering.cpp:4556</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86ISD_html_ab81d298b0f48499395110a6055048b28a2be26030c5694245f84417995c2b6d5b"><div class="ttname"><a href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a2be26030c5694245f84417995c2b6d5b">llvm::X86ISD::ATOMAND64_DAG</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8h_source.html#l00407">X86ISelLowering.h:407</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110afc9ad7857b7faf49dcde3dcf434e22a6"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110afc9ad7857b7faf49dcde3dcf434e22a6">llvm::ISD::TargetGlobalTLSAddress</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00110">ISDOpcodes.h:110</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a603c0651ff8c3a929c5e1d8b9a8f14cb"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a603c0651ff8c3a929c5e1d8b9a8f14cb">llvm::ISD::TargetJumpTable</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00112">ISDOpcodes.h:112</a></div></div>
<div class="ttc" id="raw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="classllvm_1_1SelectionDAG_html_ace5bddfde14abf966790e8438e88d6d2"><div class="ttname"><a href="classllvm_1_1SelectionDAG.html#ace5bddfde14abf966790e8438e88d6d2">llvm::SelectionDAG::getTargetConstant</a></div><div class="ttdeci">SDValue getTargetConstant(uint64_t Val, EVT VT)</div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAG_8h_source.html#l00408">SelectionDAG.h:408</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86_html_ae5984c5a9dcd61726daafd12afb541d4"><div class="ttname"><a href="namespacellvm_1_1X86.html#ae5984c5a9dcd61726daafd12afb541d4">llvm::X86::isOffsetSuitableForCodeModel</a></div><div class="ttdeci">bool isOffsetSuitableForCodeModel(int64_t Offset, CodeModel::Model M, bool hasSymbolicDisplacement=true)</div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8cpp_source.html#l03363">X86ISelLowering.cpp:3363</a></div></div>
<div class="ttc" id="namespacellvm_1_1SPII_html_a11e9b8fca4a074643a6a21f444e51406a36b3dd3b84fde3f8494a9b18af131856"><div class="ttname"><a href="namespacellvm_1_1SPII.html#a11e9b8fca4a074643a6a21f444e51406a36b3dd3b84fde3f8494a9b18af131856">llvm::SPII::Store</a></div><div class="ttdef"><b>Definition:</b> <a href="SparcInstrInfo_8h_source.html#l00032">SparcInstrInfo.h:32</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86ISD_html_ab81d298b0f48499395110a6055048b28af362e78ded62dc71fd125ff7f8099475"><div class="ttname"><a href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28af362e78ded62dc71fd125ff7f8099475">llvm::X86ISD::OR</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8h_source.html#l00293">X86ISelLowering.h:293</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a74457576348d08386d8e8ae0f20ce099"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a74457576348d08386d8e8ae0f20ce099">llvm::Intrinsic::x86_avx2_gather_q_d_256</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02491">Intrinsics.h:2491</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">llvm::ISD::TRUNCATE</a></div><div class="ttdoc">TRUNCATE - Completely drop the high bits. </div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00363">ISDOpcodes.h:363</a></div></div>
<div class="ttc" id="X86ISelDAGToDAG_8cpp_html_afc4e10b4f2ab2d548ab80b30f3b712e9a96727447c0ad447987df1c6415aef074"><div class="ttname"><a href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9a96727447c0ad447987df1c6415aef074">OR</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelDAGToDAG_8cpp_source.html#l01587">X86ISelDAGToDAG.cpp:1587</a></div></div>
<div class="ttc" id="classllvm_1_1SDValue_html"><div class="ttname"><a href="classllvm_1_1SDValue.html">llvm::SDValue</a></div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00094">SelectionDAGNodes.h:94</a></div></div>
<div class="ttc" id="classllvm_1_1SDNode_html_aa81556eb1fb861c6b57d46e97dae7778"><div class="ttname"><a href="classllvm_1_1SDNode.html#aa81556eb1fb861c6b57d46e97dae7778">llvm::SDNode::getSimpleValueType</a></div><div class="ttdeci">MVT getSimpleValueType(unsigned ResNo) const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00616">SelectionDAGNodes.h:616</a></div></div>
<div class="ttc" id="classllvm_1_1X86TargetLowering_html_a42f4b4fc843cc01be2ae7389652f00a6"><div class="ttname"><a href="classllvm_1_1X86TargetLowering.html#a42f4b4fc843cc01be2ae7389652f00a6">llvm::X86TargetLowering::isScalarFPTypeInSSEReg</a></div><div class="ttdeci">bool isScalarFPTypeInSSEReg(EVT VT) const </div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8h_source.html#l00747">X86ISelLowering.h:747</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86ISD_html_ab81d298b0f48499395110a6055048b28a1356801ab44d90ec9c7643ac8ff0770c"><div class="ttname"><a href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a1356801ab44d90ec9c7643ac8ff0770c">llvm::X86ISD::VZEXT_MOVL</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8h_source.html#l00246">X86ISelLowering.h:246</a></div></div>
<div class="ttc" id="namespacellvm_1_1A64CC_html_af5804bc0518be9568f73db566e4d6f46a802c8408643a0c37e107e7b4b0994c30"><div class="ttname"><a href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a802c8408643a0c37e107e7b4b0994c30">llvm::A64CC::AL</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00045">AArch64BaseInfo.h:45</a></div></div>
<div class="ttc" id="namespacellvm_html_a6569d00d31a5d74e563e2f39f82271ab"><div class="ttname"><a href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">llvm::X</a></div><div class="ttdeci">static RegisterPass&lt; NVPTXAllocaHoisting &gt; X(&quot;alloca-hoisting&quot;,&quot;Hoisting alloca instructions in non-entry &quot;&quot;blocks to the entry block&quot;)</div></div>
<div class="ttc" id="classllvm_1_1SDValue_html_a15d99539afef5279a1e19877cc6140a2"><div class="ttname"><a href="classllvm_1_1SDValue.html#a15d99539afef5279a1e19877cc6140a2">llvm::SDValue::isOperandOf</a></div><div class="ttdeci">bool isOperandOf(SDNode *N) const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAG_8cpp_source.html#l06166">SelectionDAG.cpp:6166</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a576080a08ef1bbab0308eac9d5838f75"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a576080a08ef1bbab0308eac9d5838f75">llvm::ISD::SCALAR_TO_VECTOR</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00287">ISDOpcodes.h:287</a></div></div>
<div class="ttc" id="X86ISelDAGToDAG_8cpp_html_afc4e10b4f2ab2d548ab80b30f3b712e9a851043138f8ef49c6eeea75760b69481"><div class="ttname"><a href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9a851043138f8ef49c6eeea75760b69481">DEC</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelDAGToDAG_8cpp_source.html#l01586">X86ISelDAGToDAG.cpp:1586</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86ISD_html_ab81d298b0f48499395110a6055048b28a9dc7fa6ef54f761457981b9852d361f7"><div class="ttname"><a href="namespacellvm_1_1X86ISD.html#ab81d298b0f48499395110a6055048b28a9dc7fa6ef54f761457981b9852d361f7">llvm::X86ISD::EH_SJLJ_LONGJMP</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8h_source.html#l00239">X86ISelLowering.h:239</a></div></div>
<div class="ttc" id="classllvm_1_1SDNode_html_a7ef138746b04be6d07091b9ba49d74da"><div class="ttname"><a href="classllvm_1_1SDNode.html#a7ef138746b04be6d07091b9ba49d74da">llvm::SDNode::isMachineOpcode</a></div><div class="ttdeci">bool isMachineOpcode() const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00384">SelectionDAGNodes.h:384</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110aac2f0a84dd2aa5ee4c3f1385e9565f5e"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110aac2f0a84dd2aa5ee4c3f1385e9565f5e">llvm::ISD::Constant</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00061">ISDOpcodes.h:61</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantSDNode_html_a1e9365c991dd55e65e9d5ab5653812e4"><div class="ttname"><a href="classllvm_1_1ConstantSDNode.html#a1e9365c991dd55e65e9d5ab5653812e4">llvm::ConstantSDNode::getZExtValue</a></div><div class="ttdeci">uint64_t getZExtValue() const </div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l01257">SelectionDAGNodes.h:1257</a></div></div>
<div class="ttc" id="classllvm_1_1LoadSDNode_html"><div class="ttname"><a href="classllvm_1_1LoadSDNode.html">llvm::LoadSDNode</a></div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l01720">SelectionDAGNodes.h:1720</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86II_html_a45cdfdabb3963ec52b198ce5d3aabc84ab9508856c635578f8aaed9dd83c3f347"><div class="ttname"><a href="namespacellvm_1_1X86II.html#a45cdfdabb3963ec52b198ce5d3aabc84ab9508856c635578f8aaed9dd83c3f347">llvm::X86II::MO_NO_FLAG</a></div><div class="ttdef"><b>Definition:</b> <a href="X86BaseInfo_8h_source.html#l00055">X86BaseInfo.h:55</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 23:03:14 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
