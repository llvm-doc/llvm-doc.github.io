<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: InstructionCombining.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('InstructionCombining_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">InstructionCombining.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="InstructionCombining_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- InstructionCombining.cpp - Combine multiple instructions -----------===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// InstructionCombining - Combine instructions to form fewer, simple</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// instructions.  This pass does not modify the CFG.  This pass is where</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// algebraic simplification happens.</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// This pass combines things like:</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">//    %Y = add i32 %X, 1</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">//    %Z = add i32 %Y, 1</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">// into:</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">//    %Z = add i32 %X, 2</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// This is a simple worklist driven algorithm.</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">// This pass guarantees that the following canonicalizations are performed on</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">// the program:</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">//    1. If a binary operator has a constant operand, it is moved to the RHS</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">//    2. Bitwise operators with constant operands are always grouped so that</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">//       shifts are performed first, then or&#39;s, then and&#39;s, then xor&#39;s.</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">//    3. Compare instructions are converted from &lt;,&gt;,&lt;=,&gt;= to ==,!= if possible</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">//    4. All cmp instructions on boolean values are replaced with logical ops</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">//    5. add X, X is represented as (X*2) =&gt; (X &lt;&lt; 1)</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">//    6. Multiplies with a power-of-two constant argument are transformed into</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">//       shifts.</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">//   ... etc.</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   36</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;instcombine&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Transforms_2Scalar_8h.html">llvm/Transforms/Scalar.h</a>&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstCombine_8h.html">InstCombine.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Initialization_8h.html">llvm-c/Initialization.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallPtrSet_8h.html">llvm/ADT/SmallPtrSet.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="StringSwitch_8h.html">llvm/ADT/StringSwitch.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ConstantFolding_8h.html">llvm/Analysis/ConstantFolding.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstructionSimplify_8h.html">llvm/Analysis/InstructionSimplify.h</a>&quot;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MemoryBuiltins_8h.html">llvm/Analysis/MemoryBuiltins.h</a>&quot;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DataLayout_8h.html">llvm/IR/DataLayout.h</a>&quot;</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IntrinsicInst_8h.html">llvm/IR/IntrinsicInst.h</a>&quot;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Support_2CFG_8h.html">llvm/Support/CFG.h</a>&quot;</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="GetElementPtrTypeIterator_8h.html">llvm/Support/GetElementPtrTypeIterator.h</a>&quot;</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PatternMatch_8h.html">llvm/Support/PatternMatch.h</a>&quot;</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueHandle_8h.html">llvm/Support/ValueHandle.h</a>&quot;</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetLibraryInfo_8h.html">llvm/Target/TargetLibraryInfo.h</a>&quot;</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Local_8h.html">llvm/Transforms/Utils/Local.h</a>&quot;</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &lt;climits&gt;</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm_1_1PatternMatch.html">llvm::PatternMatch</a>;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<a class="code" href="InstructionCombining_8cpp.html#a0cb157e7251482c582e36d8c63893ae1">STATISTIC</a>(NumCombined , <span class="stringliteral">&quot;Number of insts combined&quot;</span>);</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<a class="code" href="InstructionCombining_8cpp.html#a0cb157e7251482c582e36d8c63893ae1">STATISTIC</a>(NumConstProp, <span class="stringliteral">&quot;Number of constant folds&quot;</span>);</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<a class="code" href="InstructionCombining_8cpp.html#a0cb157e7251482c582e36d8c63893ae1">STATISTIC</a>(NumDeadInst , <span class="stringliteral">&quot;Number of dead inst eliminated&quot;</span>);</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<a class="code" href="InstructionCombining_8cpp.html#a0cb157e7251482c582e36d8c63893ae1">STATISTIC</a>(NumSunkInst , <span class="stringliteral">&quot;Number of instructions sunk&quot;</span>);</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<a class="code" href="InstructionCombining_8cpp.html#a0cb157e7251482c582e36d8c63893ae1">STATISTIC</a>(NumExpand,    <span class="stringliteral">&quot;Number of expansions&quot;</span>);</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<a class="code" href="InstructionCombining_8cpp.html#a0cb157e7251482c582e36d8c63893ae1">STATISTIC</a>(NumFactor   , <span class="stringliteral">&quot;Number of factorizations&quot;</span>);</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<a class="code" href="InstructionCombining_8cpp.html#a0cb157e7251482c582e36d8c63893ae1">STATISTIC</a>(NumReassoc  , <span class="stringliteral">&quot;Number of reassociations&quot;</span>);</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="InstructionCombining_8cpp.html#a85b6b7c082723d74f04ac701c91daa47">UnsafeFPShrink</a>(<span class="stringliteral">&quot;enable-double-float-shrink&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                                   <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>),</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                                   <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Enable unsafe double to float &quot;</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;                                            <span class="stringliteral">&quot;shrinking for math lib calls&quot;</span>));</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">// Initialization Routines</span></div><div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="namespacellvm.html#a66ec5bc7aeba0ba7ab0921a92e76ee55">   75</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#a66ec5bc7aeba0ba7ab0921a92e76ee55">llvm::initializeInstCombine</a>(<a class="code" href="classllvm_1_1PassRegistry.html">PassRegistry</a> &amp;<a class="code" href="classllvm_1_1Registry.html">Registry</a>) {</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <a class="code" href="namespacellvm.html#af78c2ae339b228fa6be74a95c1812783">initializeInstCombinerPass</a>(Registry);</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;}</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="group__LLVMCInitialization.html#gaf7d731d72d80afb7917f7cd548da8298">   79</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__LLVMCInitialization.html#gaf7d731d72d80afb7917f7cd548da8298">LLVMInitializeInstCombine</a>(<a class="code" href="group__LLVMCCoreTypes.html#gab1ca1ff855478bc0f33874a1182e4b94">LLVMPassRegistryRef</a> R) {</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <a class="code" href="namespacellvm.html#a66ec5bc7aeba0ba7ab0921a92e76ee55">initializeInstCombine</a>(*<a class="code" href="namespacellvm.html#a8f52f7baf3c7cf6519b12ca5ea8c6690">unwrap</a>(R));</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;}</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="keywordtype">char</span> <a class="code" href="classllvm_1_1InstCombiner.html#a6648755fa72fec0f698deb53b6123101">InstCombiner::ID</a> = 0;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<a class="code" href="InstructionCombining_8cpp.html#a3475a57398d86c1748bdd006dfc0c4f3">INITIALIZE_PASS_BEGIN</a>(<a class="code" href="classllvm_1_1InstCombiner.html">InstCombiner</a>, <span class="stringliteral">&quot;instcombine&quot;</span>,</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                <span class="stringliteral">&quot;Combine redundant instructions&quot;</span>, <span class="keyword">false</span>, <span class="keyword">false</span>)</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a>)</div><div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#a9360db2a972441c49cdbbabb5b20cc27">   87</a></span>&#160;<a class="code" href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a>(<a class="code" href="classllvm_1_1InstCombiner.html">InstCombiner</a>, &quot;<a class="code" href="InstructionCombining_8cpp.html#a7d4d7e39548303ef4c1f5a0ed13a9c23">instcombine</a>&quot;,</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                &quot;<a class="code" href="Target_2README_8txt.html#a0805f256f4e5964c2e9e9874891a38be">Combine</a> redundant <a class="code" href="InstructionCombining_8cpp.html#a9360db2a972441c49cdbbabb5b20cc27">instructions</a>&quot;, <a class="code" href="namespacefalse.html">false</a>, false)</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#a62ab42cda4657c93267c9eb273361281">   90</a></span>&#160;<span class="keywordtype">void</span> InstCombiner::getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const </span>{</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  AU.setPreservesCFG();</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  AU.addRequired&lt;<a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a>&gt;();</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;}</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#a87a909169e4e5de59bb72705c1d7d026">InstCombiner::EmitGEPOffset</a>(<a class="code" href="classllvm_1_1User.html">User</a> *GEP) {</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a87a909169e4e5de59bb72705c1d7d026">llvm::EmitGEPOffset</a>(Builder, *getDataLayout(), GEP);</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;}</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">/// ShouldChangeType - Return true if it is desirable to convert a computation</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">/// from &#39;From&#39; to &#39;To&#39;.  We don&#39;t want to convert from a legal to an illegal</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">/// type for example, or from a smaller to a larger illegal type.</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> InstCombiner::ShouldChangeType(<a class="code" href="classllvm_1_1Type.html">Type</a> *From, <a class="code" href="classllvm_1_1Type.html">Type</a> *To)<span class="keyword"> const </span>{</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  assert(From-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>() &amp;&amp; To-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>());</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="comment">// If we don&#39;t have TD, we don&#39;t know if the source/dest are legal.</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="keywordflow">if</span> (!TD) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="keywordtype">unsigned</span> FromWidth = From-&gt;<a class="code" href="classllvm_1_1Type.html#a5a7cfa245af120b44ac8a86143bb9e57">getPrimitiveSizeInBits</a>();</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="keywordtype">unsigned</span> ToWidth = To-&gt;<a class="code" href="classllvm_1_1Type.html#a5a7cfa245af120b44ac8a86143bb9e57">getPrimitiveSizeInBits</a>();</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="keywordtype">bool</span> FromLegal = TD-&gt;isLegalInteger(FromWidth);</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="keywordtype">bool</span> ToLegal = TD-&gt;isLegalInteger(ToWidth);</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="comment">// If this is a legal integer from type, and the result would be an illegal</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="comment">// type, don&#39;t do the transformation.</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="keywordflow">if</span> (FromLegal &amp;&amp; !ToLegal)</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="comment">// Otherwise, if both are illegal, do not increase the size of the result. We</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="comment">// do allow things like i160 -&gt; i64, but not i64 -&gt; i160.</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="keywordflow">if</span> (!FromLegal &amp;&amp; !ToLegal &amp;&amp; ToWidth &gt; FromWidth)</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;}</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">// Return true, if No Signed Wrap should be maintained for I.</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">// The No Signed Wrap flag can be kept if the operation &quot;B (I.getOpcode) C&quot;,</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">// where both B and C should be ConstantInts, results in a constant that does</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">// not overflow. This function only handles the Add and Sub opcodes. For</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">// all other opcodes, the function conservatively returns false.</span></div><div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#ad6b4395aa43cd570081d8ef779730d81">  132</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstructionCombining_8cpp.html#ad6b4395aa43cd570081d8ef779730d81">MaintainNoSignedWrap</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <a class="code" href="classllvm_1_1OverflowingBinaryOperator.html">OverflowingBinaryOperator</a> *OBO = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1OverflowingBinaryOperator.html">OverflowingBinaryOperator</a>&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="keywordflow">if</span> (!OBO || !OBO-&gt;<a class="code" href="classllvm_1_1OverflowingBinaryOperator.html#a5a1ebefdf12a23a94f8a135cdfa0cd90">hasNoSignedWrap</a>()) {</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  }</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="comment">// We reason about Add and Sub Only.</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> Opcode = I.<a class="code" href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>();</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="keywordflow">if</span> (Opcode != Instruction::Add &amp;&amp;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      Opcode != Instruction::Sub) {</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  }</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CB = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="Target_2PowerPC_2README_8txt.html#afc7ca55ad1da67847ecd4b99ef64dc84">CC</a> = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="keywordflow">if</span> (!CB || !CC) {</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  }</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;BVal = CB-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>();</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;CVal = CC-&gt;getValue();</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="keywordtype">bool</span> Overflow = <span class="keyword">false</span>;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <span class="keywordflow">if</span> (Opcode == Instruction::Add) {</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    BVal.<a class="code" href="classllvm_1_1APInt.html#a4eff027d00f60bd9ebe9b2ac960e4643">sadd_ov</a>(CVal, Overflow);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    BVal.<a class="code" href="classllvm_1_1APInt.html#a5d92067295d524ee8086167bddc6de66">ssub_ov</a>(CVal, Overflow);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  }</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="keywordflow">return</span> !Overflow;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;}</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">/// Conservatively clears subclassOptionalData after a reassociation or</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">/// commutation. We preserve fast-math flags when applicable as they can be</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">/// preserved.</span></div><div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#a4904699fe3329a5027ccd76991b0c1e4">  168</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="InstructionCombining_8cpp.html#a4904699fe3329a5027ccd76991b0c1e4">ClearSubclassDataAfterReassociation</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <a class="code" href="classllvm_1_1FPMathOperator.html">FPMathOperator</a> *FPMO = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1FPMathOperator.html">FPMathOperator</a>&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="keywordflow">if</span> (!FPMO) {</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    I.<a class="code" href="classllvm_1_1Value.html#a48790dc28d4007833380faed30c9f44c">clearSubclassOptionalData</a>();</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  }</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <a class="code" href="classllvm_1_1FastMathFlags.html">FastMathFlags</a> FMF = I.<a class="code" href="classllvm_1_1Instruction.html#ace8e61a4dcf2a13945cdde73a3a6805a">getFastMathFlags</a>();</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  I.<a class="code" href="classllvm_1_1Value.html#a48790dc28d4007833380faed30c9f44c">clearSubclassOptionalData</a>();</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  I.<a class="code" href="classllvm_1_1Instruction.html#a5ca8aa62fa8b3fe5bc0e8fbe5d8b8b7a">setFastMathFlags</a>(FMF);</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;}</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">/// SimplifyAssociativeOrCommutative - This performs a few simplifications for</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">/// operators which are associative or commutative:</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment"></span><span class="comment">//</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment">//  Commutative operators:</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">//  1. Order operands such that they are listed from right (least complex) to</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment">//     left (most complex).  This puts constants before unary operators before</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">//     binary operators.</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">//  Associative operators:</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment">//  2. Transform: &quot;(A op B) op C&quot; ==&gt; &quot;A op (B op C)&quot; if &quot;B op C&quot; simplifies.</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment">//  3. Transform: &quot;A op (B op C)&quot; ==&gt; &quot;(A op B) op C&quot; if &quot;A op B&quot; simplifies.</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment">//  Associative and commutative operators:</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">//  4. Transform: &quot;(A op B) op C&quot; ==&gt; &quot;(C op A) op B&quot; if &quot;C op A&quot; simplifies.</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">//  5. Transform: &quot;A op (B op C)&quot; ==&gt; &quot;B op (C op A)&quot; if &quot;C op A&quot; simplifies.</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">//  6. Transform: &quot;(A op C1) op (B op C2)&quot; ==&gt; &quot;(A op B) op (C1 op C2)&quot;</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">//     if C1 and C2 are constants.</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="keywordtype">bool</span> InstCombiner::SimplifyAssociativeOrCommutative(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> Opcode = I.<a class="code" href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>();</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="keywordflow">do</span> {</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="comment">// Order operands such that they are listed from right (least complex) to</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="comment">// left (most complex).  This puts constants before unary operators before</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="comment">// binary operators.</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">if</span> (I.<a class="code" href="classllvm_1_1Instruction.html#a1c2048f254df730c4de1643ec791ddf9">isCommutative</a>() &amp;&amp; <a class="code" href="namespacellvm.html#a7618d7ef63ad3ee589da4e8c4c6e8d35">getComplexity</a>(I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)) &lt;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <a class="code" href="namespacellvm.html#a7618d7ef63ad3ee589da4e8c4c6e8d35">getComplexity</a>(I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1)))</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      Changed = !I.<a class="code" href="classllvm_1_1BinaryOperator.html#a80cc7c4bd4a37fc13e9765fd3a31dbfe">swapOperands</a>();</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *Op0 = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a>&gt;(I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0));</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *Op1 = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a>&gt;(I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordflow">if</span> (I.<a class="code" href="classllvm_1_1Instruction.html#aa113b8a9ef3de9c2f075a046ad658717">isAssociative</a>()) {</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      <span class="comment">// Transform: &quot;(A op B) op C&quot; ==&gt; &quot;A op (B op C)&quot; if &quot;B op C&quot; simplifies.</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      <span class="keywordflow">if</span> (Op0 &amp;&amp; Op0-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>() == Opcode) {</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a> = Op0-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> = Op0-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <span class="comment">// Does &quot;B op C&quot; simplify?</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#a9a0b7acac205af164daef4017f9d193d">SimplifyBinOp</a>(Opcode, B, C, TD)) {</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;          <span class="comment">// It simplifies to V.  Form &quot;A op V&quot;.</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;          I.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(0, A);</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;          I.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(1, V);</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;          <span class="comment">// Conservatively clear the optional flags, since they may not be</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;          <span class="comment">// preserved by the reassociation.</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="InstructionCombining_8cpp.html#ad6b4395aa43cd570081d8ef779730d81">MaintainNoSignedWrap</a>(I, B, C) &amp;&amp;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;              (!Op0 || (isa&lt;BinaryOperator&gt;(Op0) &amp;&amp; Op0-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a07783e6f39803037259a1ebe376c2b1e">hasNoSignedWrap</a>()))) {</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            <span class="comment">// Note: this is only valid because SimplifyBinOp doesn&#39;t look at</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            <span class="comment">// the operands to Op0.</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            I.<a class="code" href="classllvm_1_1Value.html#a48790dc28d4007833380faed30c9f44c">clearSubclassOptionalData</a>();</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            I.<a class="code" href="classllvm_1_1BinaryOperator.html#a21ce697328893029ae2c63974061a294">setHasNoSignedWrap</a>(<span class="keyword">true</span>);</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;          } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            <a class="code" href="InstructionCombining_8cpp.html#a4904699fe3329a5027ccd76991b0c1e4">ClearSubclassDataAfterReassociation</a>(I);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;          }</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;          Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;          ++NumReassoc;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        }</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      }</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      <span class="comment">// Transform: &quot;A op (B op C)&quot; ==&gt; &quot;(A op B) op C&quot; if &quot;A op B&quot; simplifies.</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      <span class="keywordflow">if</span> (Op1 &amp;&amp; Op1-&gt;getOpcode() == Opcode) {</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a> = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> = Op1-&gt;getOperand(0);</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = Op1-&gt;getOperand(1);</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="comment">// Does &quot;A op B&quot; simplify?</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#a9a0b7acac205af164daef4017f9d193d">SimplifyBinOp</a>(Opcode, A, B, TD)) {</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;          <span class="comment">// It simplifies to V.  Form &quot;V op C&quot;.</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;          I.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(0, V);</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;          I.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(1, C);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;          <span class="comment">// Conservatively clear the optional flags, since they may not be</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;          <span class="comment">// preserved by the reassociation.</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;          <a class="code" href="InstructionCombining_8cpp.html#a4904699fe3329a5027ccd76991b0c1e4">ClearSubclassDataAfterReassociation</a>(I);</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;          Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;          ++NumReassoc;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        }</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      }</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    }</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">if</span> (I.<a class="code" href="classllvm_1_1Instruction.html#aa113b8a9ef3de9c2f075a046ad658717">isAssociative</a>() &amp;&amp; I.<a class="code" href="classllvm_1_1Instruction.html#a1c2048f254df730c4de1643ec791ddf9">isCommutative</a>()) {</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      <span class="comment">// Transform: &quot;(A op B) op C&quot; ==&gt; &quot;(C op A) op B&quot; if &quot;C op A&quot; simplifies.</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      <span class="keywordflow">if</span> (Op0 &amp;&amp; Op0-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>() == Opcode) {</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a> = Op0-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> = Op0-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="comment">// Does &quot;C op A&quot; simplify?</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#a9a0b7acac205af164daef4017f9d193d">SimplifyBinOp</a>(Opcode, C, A, TD)) {</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;          <span class="comment">// It simplifies to V.  Form &quot;V op B&quot;.</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;          I.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(0, V);</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;          I.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(1, B);</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;          <span class="comment">// Conservatively clear the optional flags, since they may not be</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;          <span class="comment">// preserved by the reassociation.</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;          <a class="code" href="InstructionCombining_8cpp.html#a4904699fe3329a5027ccd76991b0c1e4">ClearSubclassDataAfterReassociation</a>(I);</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;          Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;          ++NumReassoc;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        }</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      }</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      <span class="comment">// Transform: &quot;A op (B op C)&quot; ==&gt; &quot;B op (C op A)&quot; if &quot;C op A&quot; simplifies.</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      <span class="keywordflow">if</span> (Op1 &amp;&amp; Op1-&gt;getOpcode() == Opcode) {</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a> = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> = Op1-&gt;getOperand(0);</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = Op1-&gt;getOperand(1);</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <span class="comment">// Does &quot;C op A&quot; simplify?</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#a9a0b7acac205af164daef4017f9d193d">SimplifyBinOp</a>(Opcode, C, A, TD)) {</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;          <span class="comment">// It simplifies to V.  Form &quot;B op V&quot;.</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;          I.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(0, B);</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;          I.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(1, V);</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;          <span class="comment">// Conservatively clear the optional flags, since they may not be</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;          <span class="comment">// preserved by the reassociation.</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;          <a class="code" href="InstructionCombining_8cpp.html#a4904699fe3329a5027ccd76991b0c1e4">ClearSubclassDataAfterReassociation</a>(I);</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;          Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;          ++NumReassoc;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        }</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      }</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      <span class="comment">// Transform: &quot;(A op C1) op (B op C2)&quot; ==&gt; &quot;(A op B) op (C1 op C2)&quot;</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      <span class="comment">// if C1 and C2 are constants.</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      <span class="keywordflow">if</span> (Op0 &amp;&amp; Op1 &amp;&amp;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;          Op0-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>() == Opcode &amp;&amp; Op1-&gt;getOpcode() == Opcode &amp;&amp;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;          isa&lt;Constant&gt;(Op0-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1)) &amp;&amp;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;          isa&lt;Constant&gt;(Op1-&gt;getOperand(1)) &amp;&amp;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;          Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp; Op1-&gt;hasOneUse()) {</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a> = Op0-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a> = cast&lt;Constant&gt;(Op0-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> = Op1-&gt;getOperand(0);</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *C2 = cast&lt;Constant&gt;(Op1-&gt;getOperand(1));</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Folded = <a class="code" href="classllvm_1_1ConstantExpr.html#afd44535c4ae204571d5721fa4a7042f2">ConstantExpr::get</a>(Opcode, C1, C2);</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *New = <a class="code" href="classllvm_1_1BinaryOperator.html#a4a4628e91a9c6a339fa61105614fac76">BinaryOperator::Create</a>(Opcode, A, B);</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        InsertNewInstWith(New, I);</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        New-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(Op1);</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        I.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(0, New);</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        I.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(1, Folded);</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="comment">// Conservatively clear the optional flags, since they may not be</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <span class="comment">// preserved by the reassociation.</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <a class="code" href="InstructionCombining_8cpp.html#a4904699fe3329a5027ccd76991b0c1e4">ClearSubclassDataAfterReassociation</a>(I);</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      }</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    }</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="comment">// No further simplifications.</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordflow">return</span> Changed;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  } <span class="keywordflow">while</span> (1);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;}</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment">/// LeftDistributesOverRight - Whether &quot;X LOp (Y ROp Z)&quot; is always equal to</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment">/// &quot;(X LOp Y) ROp (X LOp Z)&quot;.</span></div><div class="line"><a name="l00342"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#afa4bb891679df17d0d41dc77417d28f5">  342</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstructionCombining_8cpp.html#afa4bb891679df17d0d41dc77417d28f5">LeftDistributesOverRight</a>(<a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> LOp,</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                                     <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> ROp) {</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <span class="keywordflow">switch</span> (LOp) {</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <span class="keywordflow">default</span>:</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">Instruction::And</a>:</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="comment">// And distributes over Or and Xor.</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordflow">switch</span> (ROp) {</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">Instruction::Or</a>:</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1APIntOps.html#afc7c4d88d09cba0c5e920f8a3a3ace55">Instruction::Xor</a>:</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    }</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <span class="keywordflow">case</span> Instruction::Mul:</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="comment">// Multiplication distributes over addition and subtraction.</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordflow">switch</span> (ROp) {</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordflow">case</span> Instruction::Add:</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="keywordflow">case</span> Instruction::Sub:</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    }</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">Instruction::Or</a>:</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="comment">// Or distributes over And.</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keywordflow">switch</span> (ROp) {</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">Instruction::And</a>:</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    }</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  }</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;}</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment">/// RightDistributesOverLeft - Whether &quot;(X LOp Y) ROp Z&quot; is always equal to</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment">/// &quot;(X ROp Z) LOp (Y ROp Z)&quot;.</span></div><div class="line"><a name="l00381"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#aaeaff568610aa9560be815db546329dc">  381</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstructionCombining_8cpp.html#aaeaff568610aa9560be815db546329dc">RightDistributesOverLeft</a>(<a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> LOp,</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                                     <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> ROp) {</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html#a1c2048f254df730c4de1643ec791ddf9">Instruction::isCommutative</a>(ROp))</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="InstructionCombining_8cpp.html#afa4bb891679df17d0d41dc77417d28f5">LeftDistributesOverRight</a>(ROp, LOp);</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <span class="comment">// TODO: It would be nice to handle division, aka &quot;(X + Y)/Z = X/Z + Y/Z&quot;,</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="comment">// but this requires knowing that the addition does not overflow and other</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <span class="comment">// such subtleties.</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;}</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">/// SimplifyUsingDistributiveLaws - This tries to simplify binary operations</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment">/// which some other binary operation distributes over either by factorizing</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment">/// out common terms (eg &quot;(A*B)+(A*C)&quot; -&gt; &quot;A*(B+C)&quot;) or expanding out if this</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment">/// results in simplifications (eg: &quot;A &amp; (B | C) -&gt; (A&amp;B) | (A&amp;C)&quot; if this is</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment">/// a win).  Returns the simplified value, or null if it didn&#39;t simplify.</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Value.html">Value</a> *InstCombiner::SimplifyUsingDistributiveLaws(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;I) {</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *LHS = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), *RHS = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *Op0 = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a>&gt;(LHS);</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *Op1 = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a>&gt;(RHS);</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> TopLevelOpcode = I.<a class="code" href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>(); <span class="comment">// op</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="comment">// Factorization.</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="keywordflow">if</span> (Op0 &amp;&amp; Op1 &amp;&amp; Op0-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>() == Op1-&gt;getOpcode()) {</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="comment">// The instruction has the form &quot;(A op&#39; B) op (C op&#39; D)&quot;.  Try to factorize</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="comment">// a common term.</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a> = Op0-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), *<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> = Op0-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = Op1-&gt;getOperand(0), *D = Op1-&gt;getOperand(1);</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> InnerOpcode = Op0-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>(); <span class="comment">// op&#39;</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="comment">// Does &quot;X op&#39; Y&quot; always equal &quot;Y op&#39; X&quot;?</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="keywordtype">bool</span> InnerCommutative = <a class="code" href="classllvm_1_1Instruction.html#a1c2048f254df730c4de1643ec791ddf9">Instruction::isCommutative</a>(InnerOpcode);</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="comment">// Does &quot;X op&#39; (Y op Z)&quot; always equal &quot;(X op&#39; Y) op (X op&#39; Z)&quot;?</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="InstructionCombining_8cpp.html#afa4bb891679df17d0d41dc77417d28f5">LeftDistributesOverRight</a>(InnerOpcode, TopLevelOpcode))</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      <span class="comment">// Does the instruction have the form &quot;(A op&#39; B) op (A op&#39; D)&quot; or, in the</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      <span class="comment">// commutative case, &quot;(A op&#39; B) op (C op&#39; A)&quot;?</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      <span class="keywordflow">if</span> (A == C || (InnerCommutative &amp;&amp; A == D)) {</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <span class="keywordflow">if</span> (A != C)</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;          <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(C, D);</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        <span class="comment">// Consider forming &quot;A op&#39; (B op D)&quot;.</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        <span class="comment">// If &quot;B op D&quot; simplifies then it can be formed with no cost.</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#a9a0b7acac205af164daef4017f9d193d">SimplifyBinOp</a>(TopLevelOpcode, <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, D, TD);</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        <span class="comment">// If &quot;B op D&quot; doesn&#39;t simplify then only go on if both of the existing</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        <span class="comment">// operations &quot;A op&#39; B&quot; and &quot;C op&#39; D&quot; will be zapped as no longer used.</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <span class="keywordflow">if</span> (!V &amp;&amp; Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp; Op1-&gt;hasOneUse())</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;          V = Builder-&gt;CreateBinOp(TopLevelOpcode, <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, D, Op1-&gt;getName());</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <span class="keywordflow">if</span> (V) {</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;          ++NumFactor;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;          V = Builder-&gt;CreateBinOp(InnerOpcode, A, V);</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;          V-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(&amp;I);</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;          <span class="keywordflow">return</span> V;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        }</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      }</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="comment">// Does &quot;(X op Y) op&#39; Z&quot; always equal &quot;(X op&#39; Z) op (Y op&#39; Z)&quot;?</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="InstructionCombining_8cpp.html#aaeaff568610aa9560be815db546329dc">RightDistributesOverLeft</a>(TopLevelOpcode, InnerOpcode))</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;      <span class="comment">// Does the instruction have the form &quot;(A op&#39; B) op (C op&#39; B)&quot; or, in the</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      <span class="comment">// commutative case, &quot;(A op&#39; B) op (B op&#39; D)&quot;?</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> == D || (InnerCommutative &amp;&amp; <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> == C)) {</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> != D)</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;          <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(C, D);</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        <span class="comment">// Consider forming &quot;(A op C) op&#39; B&quot;.</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="comment">// If &quot;A op C&quot; simplifies then it can be formed with no cost.</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#a9a0b7acac205af164daef4017f9d193d">SimplifyBinOp</a>(TopLevelOpcode, A, C, TD);</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="comment">// If &quot;A op C&quot; doesn&#39;t simplify then only go on if both of the existing</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <span class="comment">// operations &quot;A op&#39; B&quot; and &quot;C op&#39; D&quot; will be zapped as no longer used.</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        <span class="keywordflow">if</span> (!V &amp;&amp; Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp; Op1-&gt;hasOneUse())</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;          V = Builder-&gt;CreateBinOp(TopLevelOpcode, A, C, Op0-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>());</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <span class="keywordflow">if</span> (V) {</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;          ++NumFactor;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;          V = Builder-&gt;CreateBinOp(InnerOpcode, V, <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>);</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;          V-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(&amp;I);</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;          <span class="keywordflow">return</span> V;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        }</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      }</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  }</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <span class="comment">// Expansion.</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <span class="keywordflow">if</span> (Op0 &amp;&amp; <a class="code" href="InstructionCombining_8cpp.html#aaeaff568610aa9560be815db546329dc">RightDistributesOverLeft</a>(Op0-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>(), TopLevelOpcode)) {</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="comment">// The instruction has the form &quot;(A op&#39; B) op C&quot;.  See if expanding it out</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="comment">// to &quot;(A op C) op&#39; (B op C)&quot; results in simplifications.</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a> = Op0-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), *<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> = Op0-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1), *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = RHS;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> InnerOpcode = Op0-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>(); <span class="comment">// op&#39;</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="comment">// Do &quot;A op C&quot; and &quot;B op C&quot; both simplify?</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *L = <a class="code" href="namespacellvm.html#a9a0b7acac205af164daef4017f9d193d">SimplifyBinOp</a>(TopLevelOpcode, A, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, TD))</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *R = <a class="code" href="namespacellvm.html#a9a0b7acac205af164daef4017f9d193d">SimplifyBinOp</a>(TopLevelOpcode, <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, TD)) {</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <span class="comment">// They do! Return &quot;L op&#39; R&quot;.</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        ++NumExpand;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <span class="comment">// If &quot;L op&#39; R&quot; equals &quot;A op&#39; B&quot; then &quot;L op&#39; R&quot; is just the LHS.</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        <span class="keywordflow">if</span> ((L == A &amp;&amp; R == <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>) ||</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            (<a class="code" href="classllvm_1_1Instruction.html#a1c2048f254df730c4de1643ec791ddf9">Instruction::isCommutative</a>(InnerOpcode) &amp;&amp; L == <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> &amp;&amp; R == A))</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;          <span class="keywordflow">return</span> Op0;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        <span class="comment">// Otherwise return &quot;L op&#39; R&quot; if it simplifies.</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#a9a0b7acac205af164daef4017f9d193d">SimplifyBinOp</a>(InnerOpcode, L, R, TD))</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;          <span class="keywordflow">return</span> V;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <span class="comment">// Otherwise, create a new instruction.</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = Builder-&gt;CreateBinOp(InnerOpcode, L, R);</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(&amp;I);</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      }</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  }</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  <span class="keywordflow">if</span> (Op1 &amp;&amp; <a class="code" href="InstructionCombining_8cpp.html#afa4bb891679df17d0d41dc77417d28f5">LeftDistributesOverRight</a>(TopLevelOpcode, Op1-&gt;getOpcode())) {</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="comment">// The instruction has the form &quot;A op (B op&#39; C)&quot;.  See if expanding it out</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="comment">// to &quot;(A op B) op&#39; (A op C)&quot; results in simplifications.</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a> = LHS, *<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> = Op1-&gt;getOperand(0), *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = Op1-&gt;getOperand(1);</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> InnerOpcode = Op1-&gt;getOpcode(); <span class="comment">// op&#39;</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="comment">// Do &quot;A op B&quot; and &quot;A op C&quot; both simplify?</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *L = <a class="code" href="namespacellvm.html#a9a0b7acac205af164daef4017f9d193d">SimplifyBinOp</a>(TopLevelOpcode, A, B, TD))</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *R = <a class="code" href="namespacellvm.html#a9a0b7acac205af164daef4017f9d193d">SimplifyBinOp</a>(TopLevelOpcode, A, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, TD)) {</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        <span class="comment">// They do! Return &quot;L op&#39; R&quot;.</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        ++NumExpand;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        <span class="comment">// If &quot;L op&#39; R&quot; equals &quot;B op&#39; C&quot; then &quot;L op&#39; R&quot; is just the RHS.</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <span class="keywordflow">if</span> ((L == B &amp;&amp; R == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) ||</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;            (<a class="code" href="classllvm_1_1Instruction.html#a1c2048f254df730c4de1643ec791ddf9">Instruction::isCommutative</a>(InnerOpcode) &amp;&amp; L == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &amp;&amp; R == B))</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;          <span class="keywordflow">return</span> Op1;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        <span class="comment">// Otherwise return &quot;L op&#39; R&quot; if it simplifies.</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#a9a0b7acac205af164daef4017f9d193d">SimplifyBinOp</a>(InnerOpcode, L, R, TD))</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;          <span class="keywordflow">return</span> V;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        <span class="comment">// Otherwise, create a new instruction.</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        A = Builder-&gt;CreateBinOp(InnerOpcode, L, R);</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        A-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(&amp;I);</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      }</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  }</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;}</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment">// dyn_castNegVal - Given a &#39;sub&#39; instruction, return the RHS of the instruction</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment">// if the LHS is a constant zero (which is the &#39;negate&#39; form).</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *InstCombiner::dyn_castNegVal(<a class="code" href="classllvm_1_1Value.html">Value</a> *V)<span class="keyword"> const </span>{</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BinaryOperator.html#a2215d5a274d2cf9c064e69452ce17f03">BinaryOperator::isNeg</a>(V))</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a983e52a82d604057b45a59101a7ef257">BinaryOperator::getNegArgument</a>(V);</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  <span class="comment">// Constants can be considered to be negated values if they can be folded.</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;ConstantInt&gt;(V))</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantExpr.html#afa29f0cd072ab9b3a2630681ffe5760f">ConstantExpr::getNeg</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantDataVector.html">ConstantDataVector</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;ConstantDataVector&gt;(V))</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getType()-&gt;getElementType()-&gt;isIntegerTy())</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantExpr.html#afa29f0cd072ab9b3a2630681ffe5760f">ConstantExpr::getNeg</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;}</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment">// dyn_castFNegVal - Given a &#39;fsub&#39; instruction, return the RHS of the</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment">// instruction if the LHS is a constant negative zero (which is the &#39;negate&#39;</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment">// form).</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *InstCombiner::dyn_castFNegVal(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <span class="keywordtype">bool</span> IgnoreZeroSign)<span class="keyword"> const </span>{</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BinaryOperator.html#ab87cae7de3df7420fff131c5305d5b6f">BinaryOperator::isFNeg</a>(V, IgnoreZeroSign))</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a27e3026c3e49895d18e9a1b3cb507fee">BinaryOperator::getFNegArgument</a>(V);</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  <span class="comment">// Constants can be considered to be negated values if they can be folded.</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;ConstantFP&gt;(V))</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantExpr.html#a283af50f80d0a7b532f5e845623dce53">ConstantExpr::getFNeg</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantDataVector.html">ConstantDataVector</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;ConstantDataVector&gt;(V))</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getType()-&gt;getElementType()-&gt;isFloatingPointTy())</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantExpr.html#a283af50f80d0a7b532f5e845623dce53">ConstantExpr::getFNeg</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;}</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div><div class="line"><a name="l00549"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#a6435fba4effd1a8feeb1307acc4041ea">  549</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InstructionCombining_8cpp.html#a6435fba4effd1a8feeb1307acc4041ea">FoldOperationIntoSelectOperand</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;I, <a class="code" href="classllvm_1_1Value.html">Value</a> *SO,</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                                             <a class="code" href="classllvm_1_1InstCombiner.html">InstCombiner</a> *IC) {</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CastInst.html">CastInst</a> *CI = dyn_cast&lt;CastInst&gt;(&amp;I)) {</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="keywordflow">return</span> IC-&gt;<a class="code" href="classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">Builder</a>-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#a8aca9237e5fbd3b1028d8fe92b5a74ee">CreateCast</a>(CI-&gt;getOpcode(), SO, I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  }</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  <span class="comment">// Figure out if the constant is the left or the right argument.</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  <span class="keywordtype">bool</span> ConstIsRHS = isa&lt;Constant&gt;(I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *ConstOperand = cast&lt;Constant&gt;(I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(ConstIsRHS));</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *SOC = dyn_cast&lt;Constant&gt;(SO)) {</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="keywordflow">if</span> (ConstIsRHS)</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantExpr.html#afd44535c4ae204571d5721fa4a7042f2">ConstantExpr::get</a>(I.<a class="code" href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>(), SOC, ConstOperand);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantExpr.html#afd44535c4ae204571d5721fa4a7042f2">ConstantExpr::get</a>(I.<a class="code" href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>(), ConstOperand, SOC);</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  }</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = SO, *Op1 = ConstOperand;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  <span class="keywordflow">if</span> (!ConstIsRHS)</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Op0, Op1);</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *BO = dyn_cast&lt;BinaryOperator&gt;(&amp;I))</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="keywordflow">return</span> IC-&gt;<a class="code" href="classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">Builder</a>-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#a2bd8d3ea479e99434bac72362a59f078">CreateBinOp</a>(BO-&gt;getOpcode(), Op0, Op1,</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                                    SO-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.op&quot;</span>);</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *CI = dyn_cast&lt;ICmpInst&gt;(&amp;I))</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="keywordflow">return</span> IC-&gt;<a class="code" href="classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">Builder</a>-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#a495d91fb3d2662acbffd0162c56153ed">CreateICmp</a>(CI-&gt;getPredicate(), Op0, Op1,</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                                   SO-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.cmp&quot;</span>);</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a> *CI = dyn_cast&lt;FCmpInst&gt;(&amp;I))</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="keywordflow">return</span> IC-&gt;<a class="code" href="classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">Builder</a>-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#a495d91fb3d2662acbffd0162c56153ed">CreateICmp</a>(CI-&gt;getPredicate(), Op0, Op1,</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                                   SO-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.cmp&quot;</span>);</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unknown binary instruction type!&quot;</span>);</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;}</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="comment">// FoldOpIntoSelect - Given an instruction with a select as one operand and a</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="comment">// constant as the other operand, try to fold the binary operator into the</span></div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="comment">// select arguments.  This also works for Cast instructions, which obviously do</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="comment">// not have a second operand.</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InstCombiner::FoldOpIntoSelect(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;Op, <a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *SI) {</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  <span class="comment">// Don&#39;t modify shared select instructions</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  <span class="keywordflow">if</span> (!SI-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *TV = SI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *FV = SI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(2);</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  <span class="keywordflow">if</span> (isa&lt;Constant&gt;(TV) || isa&lt;Constant&gt;(FV)) {</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="comment">// Bool selects with constant operands can be folded to logical ops.</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="keywordflow">if</span> (SI-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>(1)) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="comment">// If it&#39;s a bitcast involving vectors, make sure it has the same number of</span></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="comment">// elements on both sides.</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a> *BC = dyn_cast&lt;BitCastInst&gt;(&amp;Op)) {</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;      <a class="code" href="classllvm_1_1VectorType.html">VectorType</a> *DestTy = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1VectorType.html">VectorType</a>&gt;(BC-&gt;getDestTy());</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;      <a class="code" href="classllvm_1_1VectorType.html">VectorType</a> *SrcTy = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1VectorType.html">VectorType</a>&gt;(BC-&gt;getSrcTy());</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;      <span class="comment">// Verify that either both or neither are vectors.</span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      <span class="keywordflow">if</span> ((SrcTy == NULL) != (DestTy == NULL)) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;      <span class="comment">// If vectors, verify that they have the same number of elements.</span></div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;      <span class="keywordflow">if</span> (SrcTy &amp;&amp; SrcTy-&gt;getNumElements() != DestTy-&gt;<a class="code" href="classllvm_1_1VectorType.html#a580510fa692dccfb26d0e967d8f164e7">getNumElements</a>())</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    }</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *SelectTrueVal = <a class="code" href="InstructionCombining_8cpp.html#a6435fba4effd1a8feeb1307acc4041ea">FoldOperationIntoSelectOperand</a>(Op, TV, <span class="keyword">this</span>);</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *SelectFalseVal = <a class="code" href="InstructionCombining_8cpp.html#a6435fba4effd1a8feeb1307acc4041ea">FoldOperationIntoSelectOperand</a>(Op, FV, <span class="keyword">this</span>);</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#a8bce457e977f23507c48c9dfd7052990">SelectInst::Create</a>(SI-&gt;<a class="code" href="classllvm_1_1SelectInst.html#ad285a69e32ddeee367fed93b5f392801">getCondition</a>(),</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                              SelectTrueVal, SelectFalseVal);</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  }</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;}</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="comment">/// FoldOpIntoPhi - Given a binary operator, cast instruction, or select which</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="comment">/// has a PHI node as operand #0, see if we can fold the instruction into the</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="comment">/// PHI (which is only possible if all operands to the PHI are constants).</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InstCombiner::FoldOpIntoPhi(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;I) {</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = cast&lt;PHINode&gt;(I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0));</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <span class="keywordtype">unsigned</span> NumPHIValues = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">getNumIncomingValues</a>();</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  <span class="keywordflow">if</span> (NumPHIValues == 0)</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  <span class="comment">// We normally only transform phis with a single use.  However, if a PHI has</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  <span class="comment">// multiple uses and they are all the same operation, we can fold *all* of the</span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <span class="comment">// uses into the PHI.</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  <span class="keywordflow">if</span> (!PN-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()) {</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="comment">// Walk the use list for the instruction, comparing them to I.</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::use_iterator</a> UI = PN-&gt;<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>(), E = PN-&gt;<a class="code" href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">use_end</a>();</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;         UI != E; ++UI) {</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1User.html">User</a> = cast&lt;Instruction&gt;(*UI);</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;      <span class="keywordflow">if</span> (User != &amp;I &amp;&amp; !I.<a class="code" href="classllvm_1_1Instruction.html#ac72e0be80ec7138a1ec42c798b249981">isIdenticalTo</a>(User))</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    }</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <span class="comment">// Otherwise, we can replace *all* users with the new PHI we form.</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  }</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  <span class="comment">// Check to see if all of the operands of the PHI are simple constants</span></div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <span class="comment">// (constantint/constantfp/undef).  If there is one non-constant value,</span></div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <span class="comment">// remember the BB it is in.  If there is more than one or if *it* is a PHI,</span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <span class="comment">// bail out.  We don&#39;t do arbitrary constant expressions here because moving</span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  <span class="comment">// their computation can be expensive without a cost model.</span></div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NonConstBB = 0;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != NumPHIValues; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *InVal = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">getIncomingValue</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <span class="keywordflow">if</span> (isa&lt;Constant&gt;(InVal) &amp;&amp; !isa&lt;ConstantExpr&gt;(InVal))</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <span class="keywordflow">if</span> (isa&lt;PHINode&gt;(InVal)) <span class="keywordflow">return</span> 0;  <span class="comment">// Itself a phi.</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="keywordflow">if</span> (NonConstBB) <span class="keywordflow">return</span> 0;  <span class="comment">// More than one non-const value.</span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    NonConstBB = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a4c25b6c00c4867281779c81ab64d2081">getIncomingBlock</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <span class="comment">// If the InVal is an invoke at the end of the pred block, then we can&#39;t</span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <span class="comment">// insert a computation after it without breaking the edge.</span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InvokeInst.html">InvokeInst</a> *II = dyn_cast&lt;InvokeInst&gt;(InVal))</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      <span class="keywordflow">if</span> (II-&gt;getParent() == NonConstBB)</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="comment">// If the incoming non-constant value is in I&#39;s block, we will remove one</span></div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="comment">// instruction, but insert another equivalent one, leading to infinite</span></div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="comment">// instcombine.</span></div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="keywordflow">if</span> (NonConstBB == I.<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>())</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  }</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <span class="comment">// If there is exactly one non-constant value, we can insert a copy of the</span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <span class="comment">// operation in that block.  However, if this is a critical edge, we would be</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <span class="comment">// inserting the computation one some other paths (e.g. inside a loop).  Only</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  <span class="comment">// do this if the pred block is unconditionally branching into the phi block.</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  <span class="keywordflow">if</span> (NonConstBB != 0) {</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a>&gt;(NonConstBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>());</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <span class="keywordflow">if</span> (!BI || !BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a382131e712e55e8324fbd5068de17b78">isUnconditional</a>()) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  }</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <span class="comment">// Okay, we can do the transformation: create the new PHI node.</span></div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *NewPN = <a class="code" href="classllvm_1_1PHINode.html#afb5e83bf5123ff7c51058eb0ebebcdc6">PHINode::Create</a>(I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">getNumIncomingValues</a>());</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  InsertNewInstBefore(NewPN, *PN);</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  NewPN-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(PN);</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  <span class="comment">// If we are going to have to insert a new computation, do so right before the</span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  <span class="comment">// predecessors terminator.</span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  <span class="keywordflow">if</span> (NonConstBB)</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    Builder-&gt;SetInsertPoint(NonConstBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>());</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  <span class="comment">// Next, add all of the operands to the PHI.</span></div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *SI = dyn_cast&lt;SelectInst&gt;(&amp;I)) {</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="comment">// We only currently try to fold the condition of a select when it is a phi,</span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="comment">// not the true/false values.</span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *TrueV = SI-&gt;<a class="code" href="classllvm_1_1SelectInst.html#a67bf091383cd61e1225445e78b61d9f9">getTrueValue</a>();</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *FalseV = SI-&gt;<a class="code" href="classllvm_1_1SelectInst.html#a29a16f32075ee4f23cd769701463952c">getFalseValue</a>();</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PhiTransBB = PN-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != NumPHIValues; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ThisBB = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a4c25b6c00c4867281779c81ab64d2081">getIncomingBlock</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *TrueVInPred = TrueV-&gt;<a class="code" href="classllvm_1_1Value.html#a7a5732db5f7198200d61bd40da6e488c">DoPHITranslation</a>(PhiTransBB, ThisBB);</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *FalseVInPred = FalseV-&gt;<a class="code" href="classllvm_1_1Value.html#a7a5732db5f7198200d61bd40da6e488c">DoPHITranslation</a>(PhiTransBB, ThisBB);</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *InV = 0;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;      <span class="comment">// Beware of ConstantExpr:  it may eventually evaluate to getNullValue,</span></div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      <span class="comment">// even if currently isNullValue gives false.</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *InC = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1Constant.html">Constant</a>&gt;(PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">getIncomingValue</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;      <span class="keywordflow">if</span> (InC &amp;&amp; !isa&lt;ConstantExpr&gt;(InC))</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        InV = InC-&gt;<a class="code" href="classllvm_1_1Constant.html#ad7ec8482f19e8e86e3de573b060a17e5">isNullValue</a>() ? FalseVInPred : TrueVInPred;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;        InV = Builder-&gt;CreateSelect(PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">getIncomingValue</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>),</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                                    TrueVInPred, FalseVInPred, <span class="stringliteral">&quot;phitmp&quot;</span>);</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;      NewPN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(InV, ThisBB);</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    }</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CmpInst.html">CmpInst</a> *CI = dyn_cast&lt;CmpInst&gt;(&amp;I)) {</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = cast&lt;Constant&gt;(I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != NumPHIValues; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *InV = 0;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *InC = dyn_cast&lt;Constant&gt;(PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">getIncomingValue</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)))</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        InV = <a class="code" href="classllvm_1_1ConstantExpr.html#ac5728c914b7e92030243a21e49ab1552">ConstantExpr::getCompare</a>(CI-&gt;getPredicate(), InC, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;ICmpInst&gt;(CI))</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        InV = Builder-&gt;CreateICmp(CI-&gt;getPredicate(), PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">getIncomingValue</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>),</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;                                  <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <span class="stringliteral">&quot;phitmp&quot;</span>);</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        InV = Builder-&gt;CreateFCmp(CI-&gt;getPredicate(), PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">getIncomingValue</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>),</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;                                  <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <span class="stringliteral">&quot;phitmp&quot;</span>);</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;      NewPN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(InV, PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a4c25b6c00c4867281779c81ab64d2081">getIncomingBlock</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    }</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (I.<a class="code" href="classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>() == 2) {</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = cast&lt;Constant&gt;(I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != NumPHIValues; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *InV = 0;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *InC = dyn_cast&lt;Constant&gt;(PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">getIncomingValue</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)))</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        InV = <a class="code" href="classllvm_1_1ConstantExpr.html#afd44535c4ae204571d5721fa4a7042f2">ConstantExpr::get</a>(I.<a class="code" href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>(), InC, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        InV = Builder-&gt;CreateBinOp(cast&lt;BinaryOperator&gt;(I).getOpcode(),</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;                                   PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">getIncomingValue</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>), <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <span class="stringliteral">&quot;phitmp&quot;</span>);</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;      NewPN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(InV, PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a4c25b6c00c4867281779c81ab64d2081">getIncomingBlock</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    }</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <a class="code" href="classllvm_1_1CastInst.html">CastInst</a> *CI = cast&lt;CastInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *RetTy = CI-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != NumPHIValues; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *InV;</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *InC = dyn_cast&lt;Constant&gt;(PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">getIncomingValue</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)))</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        InV = <a class="code" href="classllvm_1_1ConstantExpr.html#a1e1ce75d651c76b6869b4218e34618c8">ConstantExpr::getCast</a>(CI-&gt;<a class="code" href="classllvm_1_1CastInst.html#adc3489e61d5f37a0e4c5589859fbccc2">getOpcode</a>(), InC, RetTy);</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        InV = Builder-&gt;CreateCast(CI-&gt;<a class="code" href="classllvm_1_1CastInst.html#adc3489e61d5f37a0e4c5589859fbccc2">getOpcode</a>(),</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                                PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">getIncomingValue</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>), I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), <span class="stringliteral">&quot;phitmp&quot;</span>);</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;      NewPN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(InV, PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a4c25b6c00c4867281779c81ab64d2081">getIncomingBlock</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    }</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  }</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::use_iterator</a> UI = PN-&gt;<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>(), E = PN-&gt;<a class="code" href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">use_end</a>();</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;       UI != E; ) {</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1User.html">User</a> = cast&lt;Instruction&gt;(*UI++);</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <span class="keywordflow">if</span> (User == &amp;I) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    ReplaceInstUsesWith(*User, NewPN);</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    EraseInstFromFunction(*User);</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  }</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;  <span class="keywordflow">return</span> ReplaceInstUsesWith(I, NewPN);</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;}</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="comment">/// FindElementAtOffset - Given a pointer type and a constant offset, determine</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="comment">/// whether or not there is a sequence of GEP indices into the pointed type that</span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="comment">/// will land us at the specified offset.  If so, fill them into NewIndices and</span></div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="comment">/// return the resultant element type, otherwise return null.</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Type.html">Type</a> *InstCombiner::FindElementAtOffset(<a class="code" href="classllvm_1_1Type.html">Type</a> *PtrTy, int64_t Offset,</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;                                        <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Value*&gt;</a> &amp;NewIndices) {</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  assert(PtrTy-&gt;<a class="code" href="classllvm_1_1Type.html#ac830a02a025d9d5a5dc53c444cf625ee">isPtrOrPtrVectorTy</a>());</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  <span class="keywordflow">if</span> (!TD)</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = PtrTy-&gt;<a class="code" href="classllvm_1_1Type.html#a5c09d927a0079ad16e8367271efe9bc2">getPointerElementType</a>();</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  <span class="keywordflow">if</span> (!Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a9dc5111b1a9b1d5c4652d50f74fe850b">isSized</a>())</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  <span class="comment">// Start with the index over the outer type.  Note that the type size</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  <span class="comment">// might be zero (even if the offset isn&#39;t zero) if the indexed type</span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  <span class="comment">// is something like [0 x {int, int}]</span></div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *IntPtrTy = TD-&gt;getIntPtrType(PtrTy);</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  int64_t FirstIdx = 0;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  <span class="keywordflow">if</span> (int64_t TySize = TD-&gt;getTypeAllocSize(Ty)) {</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    FirstIdx = Offset/TySize;</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    Offset -= FirstIdx*TySize;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="comment">// Handle hosts where % returns negative instead of values [0..TySize).</span></div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <span class="keywordflow">if</span> (Offset &lt; 0) {</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;      --FirstIdx;</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;      Offset += TySize;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;      assert(Offset &gt;= 0);</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    }</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    assert((uint64_t)Offset &lt; (uint64_t)TySize &amp;&amp; <span class="stringliteral">&quot;Out of range offset&quot;</span>);</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  }</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  NewIndices.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(<a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(IntPtrTy, FirstIdx));</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  <span class="comment">// Index into the types.  If we fail, set OrigBase to null.</span></div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  <span class="keywordflow">while</span> (Offset) {</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    <span class="comment">// Indexing into tail padding between struct/array elements.</span></div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <span class="keywordflow">if</span> (uint64_t(Offset*8) &gt;= TD-&gt;getTypeSizeInBits(Ty))</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StructType.html">StructType</a> *STy = dyn_cast&lt;StructType&gt;(Ty)) {</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1StructLayout.html">StructLayout</a> *SL = TD-&gt;getStructLayout(STy);</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      assert(Offset &lt; (int64_t)SL-&gt;<a class="code" href="classllvm_1_1StructLayout.html#a582a5b21a8f91d7f713fa9d57c0525de">getSizeInBytes</a>() &amp;&amp;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;             <span class="stringliteral">&quot;Offset must stay within the indexed type&quot;</span>);</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;      <span class="keywordtype">unsigned</span> Elt = SL-&gt;<a class="code" href="classllvm_1_1StructLayout.html#a795cfd43d30c44c33b97fe850bc0451f">getElementContainingOffset</a>(Offset);</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;      NewIndices.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(<a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(Ty-&gt;<a class="code" href="classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">getContext</a>()),</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                                            Elt));</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;      Offset -= SL-&gt;<a class="code" href="classllvm_1_1StructLayout.html#ae10c4483372a357a0d3411b3d64be10c">getElementOffset</a>(Elt);</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;      Ty = STy-&gt;getElementType(Elt);</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ArrayType.html">ArrayType</a> *AT = dyn_cast&lt;ArrayType&gt;(Ty)) {</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;      uint64_t EltSize = TD-&gt;getTypeAllocSize(AT-&gt;getElementType());</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;      assert(EltSize &amp;&amp; <span class="stringliteral">&quot;Cannot index into a zero-sized array&quot;</span>);</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;      NewIndices.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(<a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(IntPtrTy,Offset/EltSize));</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;      Offset %= EltSize;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;      Ty = AT-&gt;getElementType();</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;      <span class="comment">// Otherwise, we can&#39;t index into the middle of this atomic type, bail.</span></div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    }</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  }</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  <span class="keywordflow">return</span> Ty;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;}</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;</div><div class="line"><a name="l00828"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#a27dc41c474e5376ef7d1865735cfb3dd">  828</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstructionCombining_8cpp.html#a27dc41c474e5376ef7d1865735cfb3dd">shouldMergeGEPs</a>(<a class="code" href="classllvm_1_1GEPOperator.html">GEPOperator</a> &amp;GEP, <a class="code" href="classllvm_1_1GEPOperator.html">GEPOperator</a> &amp;Src) {</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;  <span class="comment">// If this GEP has only 0 indices, it is the same pointer as</span></div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  <span class="comment">// Src. If Src is not a trivial GEP too, don&#39;t combine</span></div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;  <span class="comment">// the indices.</span></div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  <span class="keywordflow">if</span> (GEP.<a class="code" href="classllvm_1_1GEPOperator.html#a6941012bf4bc39a24118a66ee023c3d3">hasAllZeroIndices</a>() &amp;&amp; !Src.<a class="code" href="classllvm_1_1GEPOperator.html#a6941012bf4bc39a24118a66ee023c3d3">hasAllZeroIndices</a>() &amp;&amp;</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;      !Src.<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>())</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;}</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;<span class="comment">/// Descale - Return a value X such that Val = X * Scale, or null if none.  If</span></div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;<span class="comment">/// the multiplication is known not to overflow then NoSignedWrap is set.</span></div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Value.html">Value</a> *InstCombiner::Descale(<a class="code" href="classllvm_1_1Value.html">Value</a> *Val, <a class="code" href="classllvm_1_1APInt.html">APInt</a> Scale, <span class="keywordtype">bool</span> &amp;NoSignedWrap) {</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  assert(isa&lt;IntegerType&gt;(Val-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()) &amp;&amp; <span class="stringliteral">&quot;Can only descale integers!&quot;</span>);</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  assert(cast&lt;IntegerType&gt;(Val-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())-&gt;<a class="code" href="ValueTracking_8cpp.html#a06c14477546c3a0eb4c79ff007ea2375">getBitWidth</a>() ==</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;         Scale.<a class="code" href="classllvm_1_1APInt.html#ad081689e23a8f5dea78dedd623d6a8f8">getBitWidth</a>() &amp;&amp; <span class="stringliteral">&quot;Scale not compatible with value!&quot;</span>);</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  <span class="comment">// If Val is zero or Scale is one then Val = Val * Scale.</span></div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Val, <a class="code" href="namespacellvm_1_1PatternMatch.html#ab3b5beca3a0dedd21adac813123a2ae6">m_Zero</a>()) || Scale == 1) {</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    NoSignedWrap = <span class="keyword">true</span>;</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    <span class="keywordflow">return</span> Val;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  }</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  <span class="comment">// If Scale is zero then it does not divide Val.</span></div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  <span class="keywordflow">if</span> (Scale.<a class="code" href="classllvm_1_1APInt.html#a963c4f881fbc3e316e8260bf98453ce4">isMinValue</a>())</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;  <span class="comment">// Look through chains of multiplications, searching for a constant that is</span></div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  <span class="comment">// divisible by Scale.  For example, descaling X*(Y*(Z*4)) by a factor of 4</span></div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  <span class="comment">// will find the constant factor 4 and produce X*(Y*Z).  Descaling X*(Y*8) by</span></div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  <span class="comment">// a factor of 4 will produce X*(Y*2).  The principle of operation is to bore</span></div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;  <span class="comment">// down from Val:</span></div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  <span class="comment">//     Val = M1 * X          ||   Analysis starts here and works down</span></div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  <span class="comment">//      M1 = M2 * Y          ||   Doesn&#39;t descend into terms with more</span></div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  <span class="comment">//      M2 =  Z * 4          \/   than one use</span></div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;  <span class="comment">// Then to modify a term at the bottom:</span></div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  <span class="comment">//     Val = M1 * X</span></div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  <span class="comment">//      M1 =  Z * Y          ||   Replaced M2 with Z</span></div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;  <span class="comment">// Then to work back up correcting nsw flags.</span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;  <span class="comment">// Op - the term we are currently analyzing.  Starts at Val then drills down.</span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  <span class="comment">// Replaced with its descaled value before exiting from the drill down loop.</span></div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op = Val;</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;  <span class="comment">// Parent - initially null, but after drilling down notes where Op came from.</span></div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;  <span class="comment">// In the example above, Parent is (Val, 0) when Op is M1, because M1 is the</span></div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;  <span class="comment">// 0&#39;th operand of Val.</span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;  std::pair&lt;Instruction*, unsigned&gt; Parent;</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;  <span class="comment">// RequireNoSignedWrap - Set if the transform requires a descaling at deeper</span></div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;  <span class="comment">// levels that doesn&#39;t overflow.</span></div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  <span class="keywordtype">bool</span> RequireNoSignedWrap = <span class="keyword">false</span>;</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  <span class="comment">// logScale - log base 2 of the scale.  Negative if not a power of 2.</span></div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  int32_t logScale = Scale.<a class="code" href="classllvm_1_1APInt.html#a1b4936730cfc275f478f1c1ea085f6c0">exactLogBase2</a>();</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  <span class="keywordflow">for</span> (;; Op = Parent.first-&gt;getOperand(Parent.second)) { <span class="comment">// Drill down</span></div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(Op)) {</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;      <span class="comment">// If Op is a constant divisible by Scale then descale to the quotient.</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> Quotient(Scale), Remainder(Scale); <span class="comment">// Init ensures right bitwidth.</span></div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;      <a class="code" href="classllvm_1_1APInt.html#a24187c2e178af0df22dac26cd5229294">APInt::sdivrem</a>(CI-&gt;getValue(), Scale, Quotient, Remainder);</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;      <span class="keywordflow">if</span> (!Remainder.<a class="code" href="classllvm_1_1APInt.html#a963c4f881fbc3e316e8260bf98453ce4">isMinValue</a>())</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;        <span class="comment">// Not divisible by Scale.</span></div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;      <span class="comment">// Replace with the quotient in the parent.</span></div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;      Op = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(CI-&gt;getType(), Quotient);</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;      NoSignedWrap = <span class="keyword">true</span>;</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    }</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *BO = dyn_cast&lt;BinaryOperator&gt;(Op)) {</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;      <span class="keywordflow">if</span> (BO-&gt;getOpcode() == Instruction::Mul) {</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;        <span class="comment">// Multiplication.</span></div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        NoSignedWrap = BO-&gt;hasNoSignedWrap();</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;        <span class="keywordflow">if</span> (RequireNoSignedWrap &amp;&amp; !NoSignedWrap)</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;          <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;        <span class="comment">// There are three cases for multiplication: multiplication by exactly</span></div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;        <span class="comment">// the scale, multiplication by a constant different to the scale, and</span></div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;        <span class="comment">// multiplication by something else.</span></div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *LHS = BO-&gt;getOperand(0);</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *RHS = BO-&gt;getOperand(1);</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(RHS)) {</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;          <span class="comment">// Multiplication by a constant.</span></div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;          <span class="keywordflow">if</span> (CI-&gt;getValue() == Scale) {</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;            <span class="comment">// Multiplication by exactly the scale, replace the multiplication</span></div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;            <span class="comment">// by its left-hand side in the parent.</span></div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;            Op = LHS;</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;          }</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;          <span class="comment">// Otherwise drill down into the constant.</span></div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;          <span class="keywordflow">if</span> (!Op-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>())</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;            <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;          Parent = std::make_pair(BO, 1);</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        }</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;        <span class="comment">// Multiplication by something else. Drill down into the left-hand side</span></div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        <span class="comment">// since that&#39;s where the reassociate pass puts the good stuff.</span></div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;        <span class="keywordflow">if</span> (!Op-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>())</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;          <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        Parent = std::make_pair(BO, 0);</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;      }</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;      <span class="keywordflow">if</span> (logScale &gt; 0 &amp;&amp; BO-&gt;getOpcode() == Instruction::Shl &amp;&amp;</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;          isa&lt;ConstantInt&gt;(BO-&gt;getOperand(1))) {</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;        <span class="comment">// Multiplication by a power of 2.</span></div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;        NoSignedWrap = BO-&gt;hasNoSignedWrap();</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;        <span class="keywordflow">if</span> (RequireNoSignedWrap &amp;&amp; !NoSignedWrap)</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;          <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *LHS = BO-&gt;getOperand(0);</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;        int32_t Amt = cast&lt;ConstantInt&gt;(BO-&gt;getOperand(1))-&gt;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;          getLimitedValue(Scale.<a class="code" href="classllvm_1_1APInt.html#ad081689e23a8f5dea78dedd623d6a8f8">getBitWidth</a>());</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;        <span class="comment">// Op = LHS &lt;&lt; Amt.</span></div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;        <span class="keywordflow">if</span> (Amt == logScale) {</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;          <span class="comment">// Multiplication by exactly the scale, replace the multiplication</span></div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;          <span class="comment">// by its left-hand side in the parent.</span></div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;          Op = LHS;</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;        }</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;        <span class="keywordflow">if</span> (Amt &lt; logScale || !Op-&gt;hasOneUse())</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;          <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        <span class="comment">// Multiplication by more than the scale.  Reduce the multiplying amount</span></div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        <span class="comment">// by the scale in the parent.</span></div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        Parent = std::make_pair(BO, 1);</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;        Op = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(BO-&gt;getType(), Amt - logScale);</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;      }</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    }</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    <span class="keywordflow">if</span> (!Op-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>())</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CastInst.html">CastInst</a> *Cast = dyn_cast&lt;CastInst&gt;(Op)) {</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;      <span class="keywordflow">if</span> (Cast-&gt;getOpcode() == Instruction::SExt) {</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;        <span class="comment">// Op is sign-extended from a smaller type, descale in the smaller type.</span></div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;        <span class="keywordtype">unsigned</span> SmallSize = Cast-&gt;getSrcTy()-&gt;getPrimitiveSizeInBits();</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;        <a class="code" href="classllvm_1_1APInt.html">APInt</a> SmallScale = Scale.<a class="code" href="classllvm_1_1APInt.html#a8cf5475fb3e9c737112cc248194c1040">trunc</a>(SmallSize);</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;        <span class="comment">// Suppose Op = sext X, and we descale X as Y * SmallScale.  We want to</span></div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;        <span class="comment">// descale Op as (sext Y) * Scale.  In order to have</span></div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;        <span class="comment">//   sext (Y * SmallScale) = (sext Y) * Scale</span></div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;        <span class="comment">// some conditions need to hold however: SmallScale must sign-extend to</span></div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;        <span class="comment">// Scale and the multiplication Y * SmallScale should not overflow.</span></div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;        <span class="keywordflow">if</span> (SmallScale.<a class="code" href="classllvm_1_1APInt.html#aa3464694bcec68b89b4bffd71360b897">sext</a>(Scale.<a class="code" href="classllvm_1_1APInt.html#ad081689e23a8f5dea78dedd623d6a8f8">getBitWidth</a>()) != Scale)</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;          <span class="comment">// SmallScale does not sign-extend to Scale.</span></div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;          <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;        assert(SmallScale.<a class="code" href="classllvm_1_1APInt.html#a1b4936730cfc275f478f1c1ea085f6c0">exactLogBase2</a>() == logScale);</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;        <span class="comment">// Require that Y * SmallScale must not overflow.</span></div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;        RequireNoSignedWrap = <span class="keyword">true</span>;</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;        <span class="comment">// Drill down through the cast.</span></div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;        Parent = std::make_pair(Cast, 0);</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;        Scale = SmallScale;</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;      }</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;      <span class="keywordflow">if</span> (Cast-&gt;getOpcode() == Instruction::Trunc) {</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;        <span class="comment">// Op is truncated from a larger type, descale in the larger type.</span></div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;        <span class="comment">// Suppose Op = trunc X, and we descale X as Y * sext Scale.  Then</span></div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;        <span class="comment">//   trunc (Y * sext Scale) = (trunc Y) * Scale</span></div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;        <span class="comment">// always holds.  However (trunc Y) * Scale may overflow even if</span></div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;        <span class="comment">// trunc (Y * sext Scale) does not, so nsw flags need to be cleared</span></div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;        <span class="comment">// from this point up in the expression (see later).</span></div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;        <span class="keywordflow">if</span> (RequireNoSignedWrap)</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;          <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;        <span class="comment">// Drill down through the cast.</span></div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;        <span class="keywordtype">unsigned</span> LargeSize = Cast-&gt;getSrcTy()-&gt;getPrimitiveSizeInBits();</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;        Parent = std::make_pair(Cast, 0);</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;        Scale = Scale.<a class="code" href="classllvm_1_1APInt.html#aa3464694bcec68b89b4bffd71360b897">sext</a>(LargeSize);</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;        <span class="keywordflow">if</span> (logScale + 1 == (int32_t)Cast-&gt;getType()-&gt;getPrimitiveSizeInBits())</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;          logScale = -1;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;        assert(Scale.<a class="code" href="classllvm_1_1APInt.html#a1b4936730cfc275f478f1c1ea085f6c0">exactLogBase2</a>() == logScale);</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;      }</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    }</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    <span class="comment">// Unsupported expression, bail out.</span></div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;  }</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;  <span class="comment">// We know that we can successfully descale, so from here on we can safely</span></div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;  <span class="comment">// modify the IR.  Op holds the descaled version of the deepest term in the</span></div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;  <span class="comment">// expression.  NoSignedWrap is &#39;true&#39; if multiplying Op by Scale is known</span></div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  <span class="comment">// not to overflow.</span></div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;  <span class="keywordflow">if</span> (!Parent.first)</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <span class="comment">// The expression only had one term.</span></div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    <span class="keywordflow">return</span> Op;</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;  <span class="comment">// Rewrite the parent using the descaled version of its operand.</span></div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;  assert(Parent.first-&gt;hasOneUse() &amp;&amp; <span class="stringliteral">&quot;Drilled down when more than one use!&quot;</span>);</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;  assert(Op != Parent.first-&gt;getOperand(Parent.second) &amp;&amp;</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;         <span class="stringliteral">&quot;Descaling was a no-op?&quot;</span>);</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;  Parent.first-&gt;setOperand(Parent.second, Op);</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;  Worklist.Add(Parent.first);</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;  <span class="comment">// Now work back up the expression correcting nsw flags.  The logic is based</span></div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;  <span class="comment">// on the following observation: if X * Y is known not to overflow as a signed</span></div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;  <span class="comment">// multiplication, and Y is replaced by a value Z with smaller absolute value,</span></div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;  <span class="comment">// then X * Z will not overflow as a signed multiplication either.  As we work</span></div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;  <span class="comment">// our way up, having NoSignedWrap &#39;true&#39; means that the descaled value at the</span></div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;  <span class="comment">// current level has strictly smaller absolute value than the original.</span></div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Ancestor = Parent.first;</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;  <span class="keywordflow">do</span> {</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *BO = dyn_cast&lt;BinaryOperator&gt;(Ancestor)) {</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;      <span class="comment">// If the multiplication wasn&#39;t nsw then we can&#39;t say anything about the</span></div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;      <span class="comment">// value of the descaled multiplication, and we have to clear nsw flags</span></div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;      <span class="comment">// from this point on up.</span></div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;      <span class="keywordtype">bool</span> OpNoSignedWrap = BO-&gt;hasNoSignedWrap();</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;      NoSignedWrap &amp;= OpNoSignedWrap;</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;      <span class="keywordflow">if</span> (NoSignedWrap != OpNoSignedWrap) {</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;        BO-&gt;setHasNoSignedWrap(NoSignedWrap);</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;        Worklist.Add(Ancestor);</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;      }</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Ancestor-&gt;<a class="code" href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>() == Instruction::Trunc) {</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;      <span class="comment">// The fact that the descaled input to the trunc has smaller absolute</span></div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;      <span class="comment">// value than the original input doesn&#39;t tell us anything useful about</span></div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;      <span class="comment">// the absolute values of the truncations.</span></div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;      NoSignedWrap = <span class="keyword">false</span>;</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    }</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    assert((Ancestor-&gt;<a class="code" href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>() != Instruction::SExt || NoSignedWrap) &amp;&amp;</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;           <span class="stringliteral">&quot;Failed to keep proper track of nsw flags while drilling down?&quot;</span>);</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    <span class="keywordflow">if</span> (Ancestor == Val)</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;      <span class="comment">// Got to the top, all done!</span></div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;      <span class="keywordflow">return</span> Val;</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    <span class="comment">// Move up one level in the expression.</span></div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    assert(Ancestor-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp; <span class="stringliteral">&quot;Drilled down when more than one use!&quot;</span>);</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    Ancestor = Ancestor-&gt;<a class="code" href="classllvm_1_1Instruction.html#a5ac211f24970dea81fa9a7118a8ce36b">use_back</a>();</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;  } <span class="keywordflow">while</span> (1);</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;}</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;</div><div class="line"><a name="l01076"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#a61b234550f4bfd64d0b3e87cd5aa1fbc"> 1076</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombiner.html#a61b234550f4bfd64d0b3e87cd5aa1fbc">InstCombiner::visitGetElementPtrInst</a>(<a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> &amp;GEP) {</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value*, 8&gt;</a> Ops(GEP.<a class="code" href="classllvm_1_1User.html#a2eeb1c7ed1cfe403f2ae0470e36c07e2">op_begin</a>(), GEP.<a class="code" href="classllvm_1_1User.html#af41f58e730804d10b91fcff39b035f74">op_end</a>());</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#a7fba1a9b7761f82c4e9da63290d71af5">SimplifyGEPInst</a>(Ops, TD))</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    <span class="keywordflow">return</span> ReplaceInstUsesWith(GEP, V);</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *PtrOp = GEP.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;  <span class="comment">// Eliminate unneeded casts for indices, and replace indices which displace</span></div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  <span class="comment">// by multiples of a zero size type with zero.</span></div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;  <span class="keywordflow">if</span> (TD) {</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    <span class="keywordtype">bool</span> MadeChange = <span class="keyword">false</span>;</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *IntPtrTy = TD-&gt;getIntPtrType(GEP.<a class="code" href="classllvm_1_1GetElementPtrInst.html#a7400b6ae12470abc8ea6e18e171016b2">getPointerOperandType</a>());</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <a class="code" href="classllvm_1_1generic__gep__type__iterator.html">gep_type_iterator</a> GTI = <a class="code" href="namespacellvm.html#ac828b9b52935f87659a4adf237f820a3">gep_type_begin</a>(GEP);</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">User::op_iterator</a> I = GEP.<a class="code" href="classllvm_1_1User.html#a2eeb1c7ed1cfe403f2ae0470e36c07e2">op_begin</a>() + 1, E = GEP.<a class="code" href="classllvm_1_1User.html#af41f58e730804d10b91fcff39b035f74">op_end</a>();</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;         I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, ++GTI) {</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;      <span class="comment">// Skip indices into struct types.</span></div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;      <a class="code" href="classllvm_1_1SequentialType.html">SequentialType</a> *SeqTy = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1SequentialType.html">SequentialType</a>&gt;(*GTI);</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;      <span class="keywordflow">if</span> (!SeqTy) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;      <span class="comment">// If the element type has zero size then any index over it is equivalent</span></div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;      <span class="comment">// to an index of zero, so replace it with zero if it is not zero already.</span></div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;      <span class="keywordflow">if</span> (SeqTy-&gt;<a class="code" href="classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">getElementType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9dc5111b1a9b1d5c4652d50f74fe850b">isSized</a>() &amp;&amp;</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;          TD-&gt;getTypeAllocSize(SeqTy-&gt;<a class="code" href="classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">getElementType</a>()) == 0)</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        <span class="keywordflow">if</span> (!isa&lt;Constant&gt;(*I) || !cast&lt;Constant&gt;(*I)-&gt;isNullValue()) {</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;          *I = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(IntPtrTy);</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;          MadeChange = <span class="keyword">true</span>;</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        }</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *IndexTy = (*I)-&gt;getType();</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;      <span class="keywordflow">if</span> (IndexTy != IntPtrTy) {</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;        <span class="comment">// If we are using a wider index than needed for this platform, shrink</span></div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;        <span class="comment">// it to what we need.  If narrower, sign-extend it to what we need.</span></div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;        <span class="comment">// This explicit cast can make subsequent optimizations more obvious.</span></div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;        *I = Builder-&gt;CreateIntCast(*I, IntPtrTy, <span class="keyword">true</span>);</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;        MadeChange = <span class="keyword">true</span>;</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;      }</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    }</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    <span class="keywordflow">if</span> (MadeChange) <span class="keywordflow">return</span> &amp;GEP;</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;  }</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;  <span class="comment">// Combine Indices - If the source pointer to this getelementptr instruction</span></div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;  <span class="comment">// is a getelementptr instruction, combine the indices of the two</span></div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;  <span class="comment">// getelementptr instructions into a single instruction.</span></div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GEPOperator.html">GEPOperator</a> *Src = dyn_cast&lt;GEPOperator&gt;(PtrOp)) {</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="InstructionCombining_8cpp.html#a27dc41c474e5376ef7d1865735cfb3dd">shouldMergeGEPs</a>(*cast&lt;GEPOperator&gt;(&amp;GEP), *Src))</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    <span class="comment">// Note that if our source is a gep chain itself then we wait for that</span></div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <span class="comment">// chain to be resolved before we perform this transformation.  This</span></div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    <span class="comment">// avoids us creating a TON of code in some cases.</span></div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GEPOperator.html">GEPOperator</a> *SrcGEP =</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;          dyn_cast&lt;GEPOperator&gt;(Src-&gt;getOperand(0)))</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;      <span class="keywordflow">if</span> (SrcGEP-&gt;getNumOperands() == 2 &amp;&amp; <a class="code" href="InstructionCombining_8cpp.html#a27dc41c474e5376ef7d1865735cfb3dd">shouldMergeGEPs</a>(*Src, *SrcGEP))</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;        <span class="keywordflow">return</span> 0;   <span class="comment">// Wait until our source is folded to completion.</span></div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value*, 8&gt;</a> Indices;</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    <span class="comment">// Find out whether the last index in the source GEP is a sequential idx.</span></div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <span class="keywordtype">bool</span> EndsWithSequential = <span class="keyword">false</span>;</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1generic__gep__type__iterator.html">gep_type_iterator</a> I = <a class="code" href="namespacellvm.html#ac828b9b52935f87659a4adf237f820a3">gep_type_begin</a>(*Src), E = <a class="code" href="namespacellvm.html#a43c6ebb4fd35ebd815d66a2df4eed0b9">gep_type_end</a>(*Src);</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;         I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;      EndsWithSequential = !(*I)-&gt;isStructTy();</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    <span class="comment">// Can we combine the two pointer arithmetics offsets?</span></div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    <span class="keywordflow">if</span> (EndsWithSequential) {</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;      <span class="comment">// Replace: gep (gep %P, long B), long A, ...</span></div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;      <span class="comment">// With:    T = long A+B; gep %P, T, ...</span></div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;      <span class="comment">//</span></div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="Target_2X86_2README_8txt.html#a0ed5c5d6ff68f354e354920a3680185c">Sum</a>;</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *SO1 = Src-&gt;getOperand(Src-&gt;getNumOperands()-1);</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *GO1 = GEP.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;      <span class="keywordflow">if</span> (SO1 == <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(SO1-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())) {</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;        Sum = GO1;</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (GO1 == <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(GO1-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())) {</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;        Sum = SO1;</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;        <span class="comment">// If they aren&#39;t the same type, then the input hasn&#39;t been processed</span></div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;        <span class="comment">// by the loop above yet (which canonicalizes sequential index types to</span></div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;        <span class="comment">// intptr_t).  Just avoid transforming this until the input has been</span></div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;        <span class="comment">// normalized.</span></div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;        <span class="keywordflow">if</span> (SO1-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() != GO1-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;          <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;        Sum = Builder-&gt;CreateAdd(SO1, GO1, PtrOp-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.sum&quot;</span>);</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;      }</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;      <span class="comment">// Update the GEP in place if possible.</span></div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;      <span class="keywordflow">if</span> (Src-&gt;getNumOperands() == 2) {</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;        GEP.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(0, Src-&gt;getOperand(0));</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;        GEP.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(1, Sum);</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;        <span class="keywordflow">return</span> &amp;GEP;</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;      }</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;      Indices.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a669d55980a7d4b6307b94596deeb0b1f">append</a>(Src-&gt;op_begin()+1, Src-&gt;op_end()-1);</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;      Indices.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Sum);</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;      Indices.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a669d55980a7d4b6307b94596deeb0b1f">append</a>(GEP.<a class="code" href="classllvm_1_1User.html#a2eeb1c7ed1cfe403f2ae0470e36c07e2">op_begin</a>()+2, GEP.<a class="code" href="classllvm_1_1User.html#af41f58e730804d10b91fcff39b035f74">op_end</a>());</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;Constant&gt;(*GEP.<a class="code" href="classllvm_1_1GetElementPtrInst.html#aceaa5a2bd964e34d0dbf3ed1f146abc7">idx_begin</a>()) &amp;&amp;</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;               cast&lt;Constant&gt;(*GEP.<a class="code" href="classllvm_1_1GetElementPtrInst.html#aceaa5a2bd964e34d0dbf3ed1f146abc7">idx_begin</a>())-&gt;isNullValue() &amp;&amp;</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;               Src-&gt;getNumOperands() != 1) {</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;      <span class="comment">// Otherwise we can do the fold if the first index of the GEP is a zero</span></div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;      Indices.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a669d55980a7d4b6307b94596deeb0b1f">append</a>(Src-&gt;op_begin()+1, Src-&gt;op_end());</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;      Indices.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a669d55980a7d4b6307b94596deeb0b1f">append</a>(GEP.<a class="code" href="classllvm_1_1GetElementPtrInst.html#aceaa5a2bd964e34d0dbf3ed1f146abc7">idx_begin</a>()+1, GEP.<a class="code" href="classllvm_1_1GetElementPtrInst.html#a63d9ee4f6ab51fd7586c7ad7510a5b33">idx_end</a>());</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    }</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    <span class="keywordflow">if</span> (!Indices.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>())</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;      <span class="keywordflow">return</span> (GEP.<a class="code" href="classllvm_1_1GetElementPtrInst.html#aa87e8100bba232cc73678f86231d7e58">isInBounds</a>() &amp;&amp; Src-&gt;isInBounds()) ?</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;        <a class="code" href="classllvm_1_1GetElementPtrInst.html#a3e10b4db1ded36654416d3aed2bc56ba">GetElementPtrInst::CreateInBounds</a>(Src-&gt;getOperand(0), Indices,</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;                                          GEP.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()) :</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;        <a class="code" href="classllvm_1_1GetElementPtrInst.html#a1585a1ee545bef997b3120f87fd992a0">GetElementPtrInst::Create</a>(Src-&gt;getOperand(0), Indices, GEP.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>());</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;  }</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;  <span class="comment">// Canonicalize (gep i8* X, -(ptrtoint Y)) to (sub (ptrtoint X), (ptrtoint Y))</span></div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;  <span class="comment">// The GEP pattern is emitted by the SCEV expander for certain kinds of</span></div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  <span class="comment">// pointer arithmetic.</span></div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;  <span class="keywordflow">if</span> (TD &amp;&amp; GEP.<a class="code" href="classllvm_1_1GetElementPtrInst.html#acdc6505f15f589324fce8b59cc2cb8a2">getNumIndices</a>() == 1 &amp;&amp;</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(GEP.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#a66117262c223380ed69d25376318a8b4">m_Neg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a3ffbacd388121d5e3ba1c4360b7449d0">m_PtrToInt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>())))) {</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    <span class="keywordtype">unsigned</span> AS = GEP.<a class="code" href="classllvm_1_1GetElementPtrInst.html#a7a3407da7842ed0cff1dc06fd59d6d54">getPointerAddressSpace</a>();</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    <span class="keywordflow">if</span> (GEP.<a class="code" href="classllvm_1_1GetElementPtrInst.html#abfc8f5fb56fb06e32a26f28ba7ec1c0b">getType</a>() == Builder-&gt;<a class="code" href="classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">getInt8PtrTy</a>(AS) &amp;&amp;</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;        GEP.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1)-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#ad979b3c1bc975ee23810e3018ffe951b">getScalarSizeInBits</a>() ==</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;        TD-&gt;getPointerSizeInBits(AS)) {</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;      <a class="code" href="classllvm_1_1Operator.html">Operator</a> *Index = cast&lt;Operator&gt;(GEP.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *PtrToInt = Builder-&gt;CreatePtrToInt(PtrOp, Index-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NewSub = Builder-&gt;CreateSub(PtrToInt, Index-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#a0f7dea9550778374905e12da6d6ba8a8">CastInst::Create</a>(Instruction::IntToPtr, NewSub, GEP.<a class="code" href="classllvm_1_1GetElementPtrInst.html#abfc8f5fb56fb06e32a26f28ba7ec1c0b">getType</a>());</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    }</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;  }</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;  <span class="comment">// Handle gep(bitcast x) and gep(gep x, 0, 0, 0).</span></div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *StrippedPtr = PtrOp-&gt;<a class="code" href="classllvm_1_1Value.html#a38ea12c04523d63adda732b9c5d6da0a">stripPointerCasts</a>();</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;  <a class="code" href="classllvm_1_1PointerType.html">PointerType</a> *StrippedPtrTy = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1PointerType.html">PointerType</a>&gt;(StrippedPtr-&gt;getType());</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;  <span class="comment">// We do not handle pointer-vector geps here.</span></div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;  <span class="keywordflow">if</span> (!StrippedPtrTy)</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;  <span class="keywordflow">if</span> (StrippedPtr != PtrOp &amp;&amp;</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    StrippedPtrTy-&gt;<a class="code" href="classllvm_1_1PointerType.html#a921061a57ec3cfbaf6422f09f7d79fc3">getAddressSpace</a>() == GEP.<a class="code" href="classllvm_1_1GetElementPtrInst.html#a7a3407da7842ed0cff1dc06fd59d6d54">getPointerAddressSpace</a>()) {</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    <span class="keywordtype">bool</span> HasZeroPointerIndex = <span class="keyword">false</span>;</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;ConstantInt&gt;(GEP.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1)))</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;      HasZeroPointerIndex = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isZero();</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <span class="comment">// Transform: GEP (bitcast [10 x i8]* X to [0 x i8]*), i32 0, ...</span></div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    <span class="comment">// into     : GEP [10 x i8]* X, i32 0, ...</span></div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="comment">// Likewise, transform: GEP (bitcast i8* X to [0 x i8]*), i32 0, ...</span></div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    <span class="comment">//           into     : GEP i8* X, ...</span></div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    <span class="comment">// This occurs when the program declares an array extern like &quot;int X[];&quot;</span></div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    <span class="keywordflow">if</span> (HasZeroPointerIndex) {</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;      <a class="code" href="classllvm_1_1PointerType.html">PointerType</a> *CPTy = cast&lt;PointerType&gt;(PtrOp-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ArrayType.html">ArrayType</a> *CATy =</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;          dyn_cast&lt;ArrayType&gt;(CPTy-&gt;<a class="code" href="classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">getElementType</a>())) {</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;        <span class="comment">// GEP (bitcast i8* X to [0 x i8]*), i32 0, ... ?</span></div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;        <span class="keywordflow">if</span> (CATy-&gt;getElementType() == StrippedPtrTy-&gt;<a class="code" href="classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">getElementType</a>()) {</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;          <span class="comment">// -&gt; GEP i8* X, ...</span></div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;          <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value*, 8&gt;</a> Idx(GEP.<a class="code" href="classllvm_1_1GetElementPtrInst.html#aceaa5a2bd964e34d0dbf3ed1f146abc7">idx_begin</a>()+1, GEP.<a class="code" href="classllvm_1_1GetElementPtrInst.html#a63d9ee4f6ab51fd7586c7ad7510a5b33">idx_end</a>());</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;          <a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *Res =</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;            <a class="code" href="classllvm_1_1GetElementPtrInst.html#a1585a1ee545bef997b3120f87fd992a0">GetElementPtrInst::Create</a>(StrippedPtr, Idx, GEP.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>());</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;          Res-&gt;setIsInBounds(GEP.<a class="code" href="classllvm_1_1GetElementPtrInst.html#aa87e8100bba232cc73678f86231d7e58">isInBounds</a>());</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;          <span class="keywordflow">return</span> Res;</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;        }</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ArrayType.html">ArrayType</a> *XATy =</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;              dyn_cast&lt;ArrayType&gt;(StrippedPtrTy-&gt;<a class="code" href="classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">getElementType</a>())){</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;          <span class="comment">// GEP (bitcast [10 x i8]* X to [0 x i8]*), i32 0, ... ?</span></div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;          <span class="keywordflow">if</span> (CATy-&gt;getElementType() == XATy-&gt;getElementType()) {</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;            <span class="comment">// -&gt; GEP [10 x i8]* X, i32 0, ...</span></div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;            <span class="comment">// At this point, we know that the cast source type is a pointer</span></div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;            <span class="comment">// to an array of the same type as the destination pointer</span></div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;            <span class="comment">// array.  Because the array type is never stepped over (there</span></div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;            <span class="comment">// is a leading zero) we can fold the cast into this GEP.</span></div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;            GEP.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(0, StrippedPtr);</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;            <span class="keywordflow">return</span> &amp;GEP;</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;          }</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;        }</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;      }</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (GEP.<a class="code" href="classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>() == 2) {</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;      <span class="comment">// Transform things like:</span></div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;      <span class="comment">// %t = getelementptr i32* bitcast ([2 x i32]* %str to i32*), i32 %V</span></div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;      <span class="comment">// into:  %t1 = getelementptr [2 x i32]* %str, i32 0, i32 %V; bitcast</span></div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *SrcElTy = StrippedPtrTy-&gt;<a class="code" href="classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">getElementType</a>();</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *ResElTy = PtrOp-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a5c09d927a0079ad16e8367271efe9bc2">getPointerElementType</a>();</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;      <span class="keywordflow">if</span> (TD &amp;&amp; SrcElTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9aae7c60b468bcf6db982dc76e6c703a">isArrayTy</a>() &amp;&amp;</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;          TD-&gt;getTypeAllocSize(SrcElTy-&gt;<a class="code" href="classllvm_1_1Type.html#acae189c1d913af7e7f37a8b202070997">getArrayElementType</a>()) ==</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;          TD-&gt;getTypeAllocSize(ResElTy)) {</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;        <a class="code" href="classllvm_1_1Type.html">Type</a> *IdxType = TD-&gt;getIntPtrType(GEP.<a class="code" href="classllvm_1_1GetElementPtrInst.html#abfc8f5fb56fb06e32a26f28ba7ec1c0b">getType</a>());</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Idx[2] = { <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(IdxType), GEP.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1) };</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewGEP = GEP.<a class="code" href="classllvm_1_1GetElementPtrInst.html#aa87e8100bba232cc73678f86231d7e58">isInBounds</a>() ?</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;          Builder-&gt;CreateInBoundsGEP(StrippedPtr, Idx, GEP.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()) :</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;          Builder-&gt;CreateGEP(StrippedPtr, Idx, GEP.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>());</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;        <span class="comment">// V and GEP are both pointer types --&gt; BitCast</span></div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a>(NewGEP, GEP.<a class="code" href="classllvm_1_1GetElementPtrInst.html#abfc8f5fb56fb06e32a26f28ba7ec1c0b">getType</a>());</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;      }</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;      <span class="comment">// Transform things like:</span></div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;      <span class="comment">// %V = mul i64 %N, 4</span></div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;      <span class="comment">// %t = getelementptr i8* bitcast (i32* %arr to i8*), i32 %V</span></div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;      <span class="comment">// into:  %t1 = getelementptr i32* %arr, i32 %N; bitcast</span></div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;      <span class="keywordflow">if</span> (TD &amp;&amp; ResElTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9dc5111b1a9b1d5c4652d50f74fe850b">isSized</a>() &amp;&amp; SrcElTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9dc5111b1a9b1d5c4652d50f74fe850b">isSized</a>()) {</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;        <span class="comment">// Check that changing the type amounts to dividing the index by a scale</span></div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;        <span class="comment">// factor.</span></div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;        uint64_t ResSize = TD-&gt;getTypeAllocSize(ResElTy);</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;        uint64_t SrcSize = TD-&gt;getTypeAllocSize(SrcElTy);</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;        <span class="keywordflow">if</span> (ResSize &amp;&amp; SrcSize % ResSize == 0) {</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *Idx = GEP.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;          <span class="keywordtype">unsigned</span> BitWidth = Idx-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a5a7cfa245af120b44ac8a86143bb9e57">getPrimitiveSizeInBits</a>();</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;          uint64_t Scale = SrcSize / ResSize;</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;          <span class="comment">// Earlier transforms ensure that the index has type IntPtrType, which</span></div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;          <span class="comment">// considerably simplifies the logic by eliminating implicit casts.</span></div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;          assert(Idx-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() == TD-&gt;getIntPtrType(GEP.<a class="code" href="classllvm_1_1GetElementPtrInst.html#abfc8f5fb56fb06e32a26f28ba7ec1c0b">getType</a>()) &amp;&amp;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;                 <span class="stringliteral">&quot;Index not cast to pointer width?&quot;</span>);</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;          <span class="keywordtype">bool</span> NSW;</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *NewIdx = Descale(Idx, <a class="code" href="classllvm_1_1APInt.html">APInt</a>(BitWidth, Scale), NSW)) {</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;            <span class="comment">// Successfully decomposed Idx as NewIdx * Scale, form a new GEP.</span></div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;            <span class="comment">// If the multiplication NewIdx * Scale may overflow then the new</span></div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;            <span class="comment">// GEP may not be &quot;inbounds&quot;.</span></div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;            <a class="code" href="classllvm_1_1Value.html">Value</a> *NewGEP = GEP.<a class="code" href="classllvm_1_1GetElementPtrInst.html#aa87e8100bba232cc73678f86231d7e58">isInBounds</a>() &amp;&amp; NSW ?</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;              Builder-&gt;CreateInBoundsGEP(StrippedPtr, NewIdx, GEP.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()) :</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;              Builder-&gt;CreateGEP(StrippedPtr, NewIdx, GEP.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>());</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;            <span class="comment">// The NewGEP must be pointer typed, so must the old one -&gt; BitCast</span></div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a>(NewGEP, GEP.<a class="code" href="classllvm_1_1GetElementPtrInst.html#abfc8f5fb56fb06e32a26f28ba7ec1c0b">getType</a>());</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;          }</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;        }</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;      }</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;      <span class="comment">// Similarly, transform things like:</span></div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;      <span class="comment">// getelementptr i8* bitcast ([100 x double]* X to i8*), i32 %tmp</span></div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;      <span class="comment">//   (where tmp = 8*tmp2) into:</span></div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;      <span class="comment">// getelementptr [100 x double]* %arr, i32 0, i32 %tmp2; bitcast</span></div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;      <span class="keywordflow">if</span> (TD &amp;&amp; ResElTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9dc5111b1a9b1d5c4652d50f74fe850b">isSized</a>() &amp;&amp; SrcElTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9dc5111b1a9b1d5c4652d50f74fe850b">isSized</a>() &amp;&amp;</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;          SrcElTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9aae7c60b468bcf6db982dc76e6c703a">isArrayTy</a>()) {</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;        <span class="comment">// Check that changing to the array element type amounts to dividing the</span></div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;        <span class="comment">// index by a scale factor.</span></div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;        uint64_t ResSize = TD-&gt;getTypeAllocSize(ResElTy);</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;        uint64_t ArrayEltSize</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;          = TD-&gt;getTypeAllocSize(SrcElTy-&gt;<a class="code" href="classllvm_1_1Type.html#acae189c1d913af7e7f37a8b202070997">getArrayElementType</a>());</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;        <span class="keywordflow">if</span> (ResSize &amp;&amp; ArrayEltSize % ResSize == 0) {</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *Idx = GEP.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;          <span class="keywordtype">unsigned</span> BitWidth = Idx-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a5a7cfa245af120b44ac8a86143bb9e57">getPrimitiveSizeInBits</a>();</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;          uint64_t Scale = ArrayEltSize / ResSize;</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;          <span class="comment">// Earlier transforms ensure that the index has type IntPtrType, which</span></div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;          <span class="comment">// considerably simplifies the logic by eliminating implicit casts.</span></div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;          assert(Idx-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() == TD-&gt;getIntPtrType(GEP.<a class="code" href="classllvm_1_1GetElementPtrInst.html#abfc8f5fb56fb06e32a26f28ba7ec1c0b">getType</a>()) &amp;&amp;</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;                 <span class="stringliteral">&quot;Index not cast to pointer width?&quot;</span>);</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;          <span class="keywordtype">bool</span> NSW;</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *NewIdx = Descale(Idx, <a class="code" href="classllvm_1_1APInt.html">APInt</a>(BitWidth, Scale), NSW)) {</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;            <span class="comment">// Successfully decomposed Idx as NewIdx * Scale, form a new GEP.</span></div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;            <span class="comment">// If the multiplication NewIdx * Scale may overflow then the new</span></div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;            <span class="comment">// GEP may not be &quot;inbounds&quot;.</span></div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;            <a class="code" href="classllvm_1_1Value.html">Value</a> *Off[2] = {</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;              <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(TD-&gt;getIntPtrType(GEP.<a class="code" href="classllvm_1_1GetElementPtrInst.html#abfc8f5fb56fb06e32a26f28ba7ec1c0b">getType</a>())),</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;              NewIdx</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;            };</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;            <a class="code" href="classllvm_1_1Value.html">Value</a> *NewGEP = GEP.<a class="code" href="classllvm_1_1GetElementPtrInst.html#aa87e8100bba232cc73678f86231d7e58">isInBounds</a>() &amp;&amp; NSW ?</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;              Builder-&gt;CreateInBoundsGEP(StrippedPtr, Off, GEP.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()) :</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;              Builder-&gt;CreateGEP(StrippedPtr, Off, GEP.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>());</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;            <span class="comment">// The NewGEP must be pointer typed, so must the old one -&gt; BitCast</span></div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a>(NewGEP, GEP.<a class="code" href="classllvm_1_1GetElementPtrInst.html#abfc8f5fb56fb06e32a26f28ba7ec1c0b">getType</a>());</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;          }</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;        }</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;      }</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;    }</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;  }</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;  <span class="keywordflow">if</span> (!TD)</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;<span class="comment">  /// See if we can simplify:</span></div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;<span class="comment">  ///   X = bitcast A* to B*</span></div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;<span class="comment">  ///   Y = gep X, &lt;...constant indices...&gt;</span></div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;<span class="comment">  /// into a gep of the original struct.  This is important for SROA and alias</span></div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;<span class="comment">  /// analysis of unions.  If &quot;A&quot; is also a bitcast, wait for A/X to be merged.</span></div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;<span class="comment"></span>  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a> *BCI = dyn_cast&lt;BitCastInst&gt;(PtrOp)) {</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Operand = BCI-&gt;getOperand(0);</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    <a class="code" href="classllvm_1_1PointerType.html">PointerType</a> *OpType = cast&lt;PointerType&gt;(Operand-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    <span class="keywordtype">unsigned</span> OffsetBits = TD-&gt;getPointerTypeSizeInBits(OpType);</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> Offset(OffsetBits, 0);</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    <span class="keywordflow">if</span> (!isa&lt;BitCastInst&gt;(Operand) &amp;&amp;</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;        GEP.<a class="code" href="classllvm_1_1GetElementPtrInst.html#afe38363fd2129dd5797d12097b54d834">accumulateConstantOffset</a>(*TD, Offset) &amp;&amp;</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;        StrippedPtrTy-&gt;<a class="code" href="classllvm_1_1PointerType.html#a921061a57ec3cfbaf6422f09f7d79fc3">getAddressSpace</a>() == GEP.<a class="code" href="classllvm_1_1GetElementPtrInst.html#a7a3407da7842ed0cff1dc06fd59d6d54">getPointerAddressSpace</a>()) {</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;      <span class="comment">// If this GEP instruction doesn&#39;t move the pointer, just replace the GEP</span></div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;      <span class="comment">// with a bitcast of the real input to the dest type.</span></div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;      <span class="keywordflow">if</span> (!Offset) {</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;        <span class="comment">// If the bitcast is of an allocation, and the allocation will be</span></div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;        <span class="comment">// converted to match the type of the cast, don&#39;t touch this.</span></div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;        <span class="keywordflow">if</span> (isa&lt;AllocaInst&gt;(Operand) || <a class="code" href="namespacellvm.html#a455d82c49557ac1d6c8da8e8d86a94b5">isAllocationFn</a>(Operand, TLI)) {</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;          <span class="comment">// See if the bitcast simplifies, if so, don&#39;t nuke this GEP yet.</span></div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I = visitBitCast(*BCI)) {</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;            <span class="keywordflow">if</span> (I != BCI) {</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;              I-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(BCI);</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;              BCI-&gt;getParent()-&gt;getInstList().insert(BCI, I);</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;              ReplaceInstUsesWith(*BCI, I);</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;            }</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;            <span class="keywordflow">return</span> &amp;GEP;</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;          }</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;        }</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a>(Operand, GEP.<a class="code" href="classllvm_1_1GetElementPtrInst.html#abfc8f5fb56fb06e32a26f28ba7ec1c0b">getType</a>());</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;      }</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;      <span class="comment">// Otherwise, if the offset is non-zero, we need to find out if there is a</span></div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;      <span class="comment">// field at Offset in &#39;A&#39;s type.  If so, we can pull the cast through the</span></div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;      <span class="comment">// GEP.</span></div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value*, 8&gt;</a> NewIndices;</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;      <span class="keywordflow">if</span> (FindElementAtOffset(OpType, Offset.<a class="code" href="classllvm_1_1APInt.html#a7189a37206963029447c31d57771b997">getSExtValue</a>(), NewIndices)) {</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NGEP = GEP.<a class="code" href="classllvm_1_1GetElementPtrInst.html#aa87e8100bba232cc73678f86231d7e58">isInBounds</a>() ?</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;          Builder-&gt;CreateInBoundsGEP(Operand, NewIndices) :</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;          Builder-&gt;CreateGEP(Operand, NewIndices);</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;        <span class="keywordflow">if</span> (NGEP-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() == GEP.<a class="code" href="classllvm_1_1GetElementPtrInst.html#abfc8f5fb56fb06e32a26f28ba7ec1c0b">getType</a>())</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;          <span class="keywordflow">return</span> ReplaceInstUsesWith(GEP, NGEP);</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;        NGEP-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(&amp;GEP);</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a>(NGEP, GEP.<a class="code" href="classllvm_1_1GetElementPtrInst.html#abfc8f5fb56fb06e32a26f28ba7ec1c0b">getType</a>());</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;      }</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;    }</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;  }</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;}</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span></div><div class="line"><a name="l01404"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#a22f50a59f6de5223d536d8b5fc5cd91c"> 1404</a></span>&#160;<a class="code" href="InstructionCombining_8cpp.html#a22f50a59f6de5223d536d8b5fc5cd91c">isAllocSiteRemovable</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *AI, <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;WeakVH&gt;</a> &amp;<a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>,</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;                     <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI) {</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction*, 4&gt;</a> Worklist;</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;  Worklist.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(AI);</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;  <span class="keywordflow">do</span> {</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *PI = Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">pop_back_val</a>();</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::use_iterator</a> UI = PI-&gt;<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>(), UE = PI-&gt;<a class="code" href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">use_end</a>(); UI != UE;</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;         ++UI) {</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I = cast&lt;Instruction&gt;(*UI);</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;      <span class="keywordflow">switch</span> (I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>()) {</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;        <span class="comment">// Give up the moment we see something we can&#39;t handle.</span></div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;      <span class="keywordflow">case</span> Instruction::BitCast:</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;      <span class="keywordflow">case</span> Instruction::GetElementPtr:</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;        Users.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(I);</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;        Worklist.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(I);</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;      <span class="keywordflow">case</span> Instruction::ICmp: {</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;        <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *ICI = cast&lt;ICmpInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;        <span class="comment">// We can fold eq/ne comparisons with null to false/true, respectively.</span></div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;        <span class="keywordflow">if</span> (!ICI-&gt;<a class="code" href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">isEquality</a>() || !isa&lt;ConstantPointerNull&gt;(ICI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1)))</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;        Users.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(I);</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;      }</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#af6d6a791770bad2303c4399986979e3eae411369b2f0d8f484fec62c3291b1b51">Instruction::Call</a>:</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;        <span class="comment">// Ignore no-op and store intrinsics.</span></div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *II = dyn_cast&lt;IntrinsicInst&gt;(I)) {</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;          <span class="keywordflow">switch</span> (II-&gt;getIntrinsicID()) {</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;          <span class="keywordflow">default</span>:</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a59ba1d701385742520aa8a3478099fb7">Intrinsic::memmove</a>:</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ab20709bfc1ed1765cd3b43f69bf11edc">Intrinsic::memcpy</a>:</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ae857cbc5cf8c5a980f0bd245ad5ec61a">Intrinsic::memset</a>: {</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;            <a class="code" href="classllvm_1_1MemIntrinsic.html">MemIntrinsic</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a> = cast&lt;MemIntrinsic&gt;(II);</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;            <span class="keywordflow">if</span> (MI-&gt;<a class="code" href="classllvm_1_1MemIntrinsic.html#a9558faebdbb62c072aed98e33604889d">isVolatile</a>() || MI-&gt;<a class="code" href="classllvm_1_1MemIntrinsic.html#a3ec0c47a5532e568d54c8d452dfb58df">getRawDest</a>() != PI)</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;              <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;          }</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;          <span class="comment">// fall through</span></div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a63eff34e14f4840ec2f23581d9d4a126">Intrinsic::dbg_declare</a>:</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90af3ede9077760c88ac478707b1ff19273">Intrinsic::dbg_value</a>:</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a39197eb94db0d5d99219a826fef11477">Intrinsic::invariant_start</a>:</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a41b4c572902601d7499bc287874271d9">Intrinsic::invariant_end</a>:</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ae365354e47542c51f9bd46e329e3323e">Intrinsic::lifetime_start</a>:</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aa332b90dd5e4ebf4bbbcc0964220d373">Intrinsic::lifetime_end</a>:</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90afb99c5b4c79f8419d2018d9499d15a93">Intrinsic::objectsize</a>:</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;            Users.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(I);</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;          }</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;        }</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a42a9f1e04ad580b344123c15dbb29d39">isFreeCall</a>(I, TLI)) {</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;          Users.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(I);</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;        }</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1SPII.html#a11e9b8fca4a074643a6a21f444e51406a36b3dd3b84fde3f8494a9b18af131856">Instruction::Store</a>: {</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;        <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *SI = cast&lt;StoreInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;        <span class="keywordflow">if</span> (SI-&gt;<a class="code" href="classllvm_1_1StoreInst.html#a89471513a05fad4bbef69ec411b2586d">isVolatile</a>() || SI-&gt;<a class="code" href="classllvm_1_1StoreInst.html#ac03c1c093059ea000216af8dd6f2dbf4">getPointerOperand</a>() != PI)</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;        Users.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(I);</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;      }</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;      }</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;      <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;missing a return?&quot;</span>);</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;    }</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;  } <span class="keywordflow">while</span> (!Worklist.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>());</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;}</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;</div><div class="line"><a name="l01481"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#ad9114d86dbeaa0f40b79579f3836c5c6"> 1481</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombiner.html#ad9114d86dbeaa0f40b79579f3836c5c6">InstCombiner::visitAllocSite</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>) {</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;  <span class="comment">// If we have a malloc call which is only used in any amount of comparisons</span></div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;  <span class="comment">// to null and free calls, delete the calls and replace the comparisons with</span></div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;  <span class="comment">// true or false as appropriate.</span></div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;WeakVH, 64&gt;</a> <a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>;</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="InstructionCombining_8cpp.html#a22f50a59f6de5223d536d8b5fc5cd91c">isAllocSiteRemovable</a>(&amp;MI, Users, TLI)) {</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Users.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I = cast_or_null&lt;Instruction&gt;(&amp;*Users[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;      <span class="keywordflow">if</span> (!I) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;ICmpInst&gt;(I)) {</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;        ReplaceInstUsesWith(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>,</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;                            <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">Type::getInt1Ty</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getContext()),</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;                                             <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isFalseWhenEqual()));</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;BitCastInst&gt;(I) || isa&lt;GetElementPtrInst&gt;(I)) {</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;        ReplaceInstUsesWith(*I, <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(I-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *II = dyn_cast&lt;IntrinsicInst&gt;(I)) {</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;        <span class="keywordflow">if</span> (II-&gt;getIntrinsicID() == <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90afb99c5b4c79f8419d2018d9499d15a93">Intrinsic::objectsize</a>) {</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;          <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = cast&lt;ConstantInt&gt;(II-&gt;getArgOperand(1));</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;          uint64_t DontKnow = CI-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#ad4ea4748170f687710a54c919dde5625">isZero</a>() ? -1ULL : 0;</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;          ReplaceInstUsesWith(*I, <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(I-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), DontKnow));</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;        }</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;      }</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;      EraseInstFromFunction(*I);</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    }</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InvokeInst.html">InvokeInst</a> *II = dyn_cast&lt;InvokeInst&gt;(&amp;MI)) {</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;      <span class="comment">// Replace invoke with a NOP intrinsic to maintain the original CFG</span></div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;      <a class="code" href="classllvm_1_1Module.html">Module</a> *<a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = II-&gt;getParent()-&gt;getParent()-&gt;getParent();</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;      <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a> = <a class="code" href="namespacellvm_1_1Intrinsic.html#a842176a2c8c60a94bc788454b0828ea2">Intrinsic::getDeclaration</a>(M, <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a2e54f4d4281f1a8386087844328cd93b">Intrinsic::donothing</a>);</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;      <a class="code" href="classllvm_1_1InvokeInst.html#a03007b982a936464f7116e3c47df89ee">InvokeInst::Create</a>(F, II-&gt;getNormalDest(), II-&gt;getUnwindDest(),</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;                         <a class="code" href="namespacellvm.html#a1d0ac37acc2482f8794195f5042b61b5acd12d6cf678f7504ca49c922fb16ce01">None</a>, <span class="stringliteral">&quot;&quot;</span>, II-&gt;getParent());</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;    }</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    <span class="keywordflow">return</span> EraseInstFromFunction(MI);</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;  }</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;}</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;<span class="comment">/// \brief Move the call to free before a NULL test.</span></div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;<span class="comment">/// Check if this free is accessed after its argument has been test</span></div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;<span class="comment">/// against NULL (property 0).</span></div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;<span class="comment">/// If yes, it is legal to move this call in its predecessor block.</span></div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;<span class="comment">/// The move is performed only if the block containing the call to free</span></div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;<span class="comment">/// will be removed, i.e.:</span></div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;<span class="comment">/// 1. it has only one predecessor P, and P has two successors</span></div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;<span class="comment">/// 2. it contains the call and an unconditional branch</span></div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;<span class="comment">/// 3. its successor is the same as its predecessor&#39;s successor</span></div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;<span class="comment">/// The profitability is out-of concern here and this function should</span></div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;<span class="comment">/// be called only if the caller knows this transformation would be</span></div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;<span class="comment">/// profitable (e.g., for code size).</span></div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *</div><div class="line"><a name="l01535"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#ae9b9a9768b1162f8db3dec7a8ec71ab1"> 1535</a></span>&#160;<a class="code" href="InstructionCombining_8cpp.html#ae9b9a9768b1162f8db3dec7a8ec71ab1">tryToMoveFreeBeforeNullTest</a>(<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> &amp;FI) {</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op = FI.<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(0);</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *FreeInstrBB = FI.<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PredBB = FreeInstrBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5ef55181ae0bb0f5c561b9a29087b1e5">getSinglePredecessor</a>();</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;  <span class="comment">// Validate part of constraint #1: Only one predecessor</span></div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;  <span class="comment">// FIXME: We can extend the number of predecessor, but in that case, we</span></div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;  <span class="comment">//        would duplicate the call to free in each predecessor and it may</span></div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;  <span class="comment">//        not be profitable even for code size.</span></div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;  <span class="keywordflow">if</span> (!PredBB)</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;  <span class="comment">// Validate constraint #2: Does this block contains only the call to</span></div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;  <span class="comment">//                         free and an unconditional branch?</span></div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;  <span class="comment">// FIXME: We could check if we can speculate everything in the</span></div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;  <span class="comment">//        predecessor block</span></div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;  <span class="keywordflow">if</span> (FreeInstrBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aed28607f3ab19dda7ec1cf1a0319276f">size</a>() != 2)</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SuccBB;</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(FreeInstrBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a1de3bd08ca83d6b976d4c8deacbf5e71">m_UnconditionalBr</a>(SuccBB)))</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;  <span class="comment">// Validate the rest of constraint #1 by matching on the pred branch.</span></div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;  <a class="code" href="classllvm_1_1TerminatorInst.html">TerminatorInst</a> *TI = PredBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>();</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *TrueBB, *FalseBB;</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">ICmpInst::Predicate</a> Pred;</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(TI, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5d28b362c7869ec2b8c1ed9e58cbc290">m_Br</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">m_ICmp</a>(Pred, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op), <a class="code" href="namespacellvm_1_1PatternMatch.html#ab3b5beca3a0dedd21adac813123a2ae6">m_Zero</a>()), TrueBB, FalseBB)))</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;  <span class="keywordflow">if</span> (Pred != <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> &amp;&amp; Pred != <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>)</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;  <span class="comment">// Validate constraint #3: Ensure the null case just falls through.</span></div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;  <span class="keywordflow">if</span> (SuccBB != (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> ? TrueBB : FalseBB))</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;  assert(FreeInstrBB == (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> ? FalseBB : TrueBB) &amp;&amp;</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;         <span class="stringliteral">&quot;Broken CFG: missing edge from predecessor to successor&quot;</span>);</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;  FI.<a class="code" href="classllvm_1_1Instruction.html#af67d1f3a518964d80a109bb3d9d5cf1e">moveBefore</a>(TI);</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;  <span class="keywordflow">return</span> &amp;FI;</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;}</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;</div><div class="line"><a name="l01577"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#a53e5c6efc4d9b9efe54a0c1429b852ea"> 1577</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombiner.html#a53e5c6efc4d9b9efe54a0c1429b852ea">InstCombiner::visitFree</a>(<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> &amp;FI) {</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op = FI.<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(0);</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;  <span class="comment">// free undef -&gt; unreachable.</span></div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;  <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(Op)) {</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;    <span class="comment">// Insert a new store to null because we cannot modify the CFG here.</span></div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;    Builder-&gt;CreateStore(<a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(FI.<a class="code" href="classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>()),</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;                         <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(<a class="code" href="classllvm_1_1Type.html#a2ee2de2efa05f2abb95007892fc559a4">Type::getInt1PtrTy</a>(FI.<a class="code" href="classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>())));</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;    <span class="keywordflow">return</span> EraseInstFromFunction(FI);</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;  }</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;  <span class="comment">// If we have &#39;free null&#39; delete the instruction.  This can happen in stl code</span></div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;  <span class="comment">// when lots of inlining happens.</span></div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;  <span class="keywordflow">if</span> (isa&lt;ConstantPointerNull&gt;(Op))</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;    <span class="keywordflow">return</span> EraseInstFromFunction(FI);</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;  <span class="comment">// If we optimize for code size, try to move the call to free before the null</span></div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;  <span class="comment">// test so that simplify cfg can remove the empty block and dead code</span></div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;  <span class="comment">// elimination the branch. I.e., helps to turn something like:</span></div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;  <span class="comment">// if (foo) free(foo);</span></div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;  <span class="comment">// into</span></div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;  <span class="comment">// free(foo);</span></div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;  <span class="keywordflow">if</span> (MinimizeSize)</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I = <a class="code" href="InstructionCombining_8cpp.html#ae9b9a9768b1162f8db3dec7a8ec71ab1">tryToMoveFreeBeforeNullTest</a>(FI))</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;}</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;</div><div class="line"><a name="l01608"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#ade82d6a0e72fdbc33d3a247f0b42225d"> 1608</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombiner.html#ade82d6a0e72fdbc33d3a247f0b42225d">InstCombiner::visitBranchInst</a>(<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> &amp;BI) {</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;  <span class="comment">// Change br (not X), label True, label False to: br X, label False, True</span></div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">X</a> = 0;</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *TrueDest;</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *FalseDest;</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;BI, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5d28b362c7869ec2b8c1ed9e58cbc290">m_Br</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a4cfd328368353696e64a4d1b15a7cbfa">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(X)), TrueDest, FalseDest)) &amp;&amp;</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;      !isa&lt;Constant&gt;(X)) {</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;    <span class="comment">// Swap Destinations and condition...</span></div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;    BI.<a class="code" href="classllvm_1_1BranchInst.html#a3505dab06f59c36142a234321cdc3411">setCondition</a>(X);</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    BI.<a class="code" href="classllvm_1_1BranchInst.html#a6550fe5bd437c1c3c6e237d726e36b90">swapSuccessors</a>();</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    <span class="keywordflow">return</span> &amp;BI;</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;  }</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;  <span class="comment">// Cannonicalize fcmp_one -&gt; fcmp_oeq</span></div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">FCmpInst::Predicate</a> FPred; <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#a1bdbcdc4205781eefd549946d40ff378">Y</a>;</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;BI, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5d28b362c7869ec2b8c1ed9e58cbc290">m_Br</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a5772946ca265c6a5c951cb331983daa5">m_FCmp</a>(FPred, <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(X), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Y)),</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;                             TrueDest, FalseDest)) &amp;&amp;</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;      BI.<a class="code" href="classllvm_1_1BranchInst.html#a84309bb8c34c8bc5694ec5d48dd8668f">getCondition</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>())</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    <span class="keywordflow">if</span> (FPred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a8a80b27ca29fe2076b9bbdee02c65464">FCmpInst::FCMP_ONE</a> || FPred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a9835cfe02fb5027680bd7203b024f77a">FCmpInst::FCMP_OLE</a> ||</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;        FPred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a541533f34077bbbcfb703a90f6d2da9b">FCmpInst::FCMP_OGE</a>) {</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;      <a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a> *Cond = cast&lt;FCmpInst&gt;(BI.<a class="code" href="classllvm_1_1BranchInst.html#a84309bb8c34c8bc5694ec5d48dd8668f">getCondition</a>());</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;      Cond-&gt;<a class="code" href="classllvm_1_1CmpInst.html#a126a12b67fa620ad28ec0c919ca7a3e8">setPredicate</a>(<a class="code" href="classllvm_1_1CmpInst.html#a3c76890714593c78e3b5d142c9030548">FCmpInst::getInversePredicate</a>(FPred));</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;      <span class="comment">// Swap Destinations and condition.</span></div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;      BI.<a class="code" href="classllvm_1_1BranchInst.html#a6550fe5bd437c1c3c6e237d726e36b90">swapSuccessors</a>();</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;      Worklist.Add(Cond);</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;      <span class="keywordflow">return</span> &amp;BI;</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    }</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;  <span class="comment">// Cannonicalize icmp_ne -&gt; icmp_eq</span></div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">ICmpInst::Predicate</a> IPred;</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;BI, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5d28b362c7869ec2b8c1ed9e58cbc290">m_Br</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">m_ICmp</a>(IPred, <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(X), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Y)),</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;                      TrueDest, FalseDest)) &amp;&amp;</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;      BI.<a class="code" href="classllvm_1_1BranchInst.html#a84309bb8c34c8bc5694ec5d48dd8668f">getCondition</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>())</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;    <span class="keywordflow">if</span> (IPred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>  || IPred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a> ||</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;        IPred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a2751d6136a2819749dcef65dc19a4246">ICmpInst::ICMP_SLE</a> || IPred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a> ||</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;        IPred == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a>) {</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;      <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *Cond = cast&lt;ICmpInst&gt;(BI.<a class="code" href="classllvm_1_1BranchInst.html#a84309bb8c34c8bc5694ec5d48dd8668f">getCondition</a>());</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;      Cond-&gt;<a class="code" href="classllvm_1_1CmpInst.html#a126a12b67fa620ad28ec0c919ca7a3e8">setPredicate</a>(<a class="code" href="classllvm_1_1CmpInst.html#a3c76890714593c78e3b5d142c9030548">ICmpInst::getInversePredicate</a>(IPred));</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;      <span class="comment">// Swap Destinations and condition.</span></div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;      BI.<a class="code" href="classllvm_1_1BranchInst.html#a6550fe5bd437c1c3c6e237d726e36b90">swapSuccessors</a>();</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;      Worklist.Add(Cond);</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;      <span class="keywordflow">return</span> &amp;BI;</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    }</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;}</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;</div><div class="line"><a name="l01656"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#a89f9afb2a0a0c066924fee31fed8b00b"> 1656</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombiner.html#a89f9afb2a0a0c066924fee31fed8b00b">InstCombiner::visitSwitchInst</a>(<a class="code" href="classllvm_1_1SwitchInst.html">SwitchInst</a> &amp;SI) {</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Cond = SI.<a class="code" href="classllvm_1_1SwitchInst.html#add5ee99852e9927d0777e74572c91708">getCondition</a>();</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I = dyn_cast&lt;Instruction&gt;(Cond)) {</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;    <span class="keywordflow">if</span> (I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>() == Instruction::Add)</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *AddRHS = dyn_cast&lt;ConstantInt&gt;(I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1))) {</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;        <span class="comment">// change &#39;switch (X+4) case 1:&#39; into &#39;switch (X) case -3&#39;</span></div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;        <span class="comment">// Skip the first item since that&#39;s the default case.</span></div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SwitchInst_1_1CaseIt.html">SwitchInst::CaseIt</a> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = SI.<a class="code" href="classllvm_1_1SwitchInst.html#ae69c15ce940c41719cb96209e113a26e">case_begin</a>(), e = SI.<a class="code" href="classllvm_1_1SwitchInst.html#a219f2a3514d904d05dc8003a4ee5d291">case_end</a>();</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;             <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;          <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>* CaseVal = <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>.getCaseValue();</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;          <a class="code" href="classllvm_1_1Constant.html">Constant</a>* NewCaseVal = <a class="code" href="classllvm_1_1ConstantExpr.html#a554ab77949b0a16670a83ec3307501eb">ConstantExpr::getSub</a>(cast&lt;Constant&gt;(CaseVal),</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;                                                      AddRHS);</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;          assert(isa&lt;ConstantInt&gt;(NewCaseVal) &amp;&amp;</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;                 <span class="stringliteral">&quot;Result of expression should be constant&quot;</span>);</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;          <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>.setValue(cast&lt;ConstantInt&gt;(NewCaseVal));</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;        }</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;        SI.<a class="code" href="classllvm_1_1SwitchInst.html#a48f1c68131a864a29455ce86c1d571b2">setCondition</a>(I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0));</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;        Worklist.Add(I);</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;        <span class="keywordflow">return</span> &amp;SI;</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;      }</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;  }</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;}</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;</div><div class="line"><a name="l01680"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#aaece37eef26aed797aa4b200c9de2bb8"> 1680</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombiner.html#aaece37eef26aed797aa4b200c9de2bb8">InstCombiner::visitExtractValueInst</a>(<a class="code" href="classllvm_1_1ExtractValueInst.html">ExtractValueInst</a> &amp;EV) {</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Agg = EV.<a class="code" href="classllvm_1_1ExtractValueInst.html#ab87e7c5a729885396b3b045ad375e4b8">getAggregateOperand</a>();</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;  <span class="keywordflow">if</span> (!EV.<a class="code" href="classllvm_1_1ExtractValueInst.html#a44c87e8da8c79e2fdb74e4feef0b9ad6">hasIndices</a>())</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;    <span class="keywordflow">return</span> ReplaceInstUsesWith(EV, Agg);</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;Constant&gt;(Agg)) {</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *C2 = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;<a class="code" href="classllvm_1_1Constant.html#a01fee21e2c679094ce5ab193369d5198">getAggregateElement</a>(*EV.<a class="code" href="classllvm_1_1ExtractValueInst.html#a7f9b7f9abcc0d7c98df4c00dc2ae6e7e">idx_begin</a>())) {</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;      <span class="keywordflow">if</span> (EV.<a class="code" href="classllvm_1_1ExtractValueInst.html#accfb950dd96959bfa9d44451540d088a">getNumIndices</a>() == 0)</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;        <span class="keywordflow">return</span> ReplaceInstUsesWith(EV, C2);</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;      <span class="comment">// Extract the remaining indices out of the constant indexed by the</span></div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;      <span class="comment">// first index</span></div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ExtractValueInst.html#a8e7f8107cfcd8c4f169185e70a3d64ff">ExtractValueInst::Create</a>(C2, EV.<a class="code" href="classllvm_1_1ExtractValueInst.html#aabcc9d0c7c5b68bf66032d1c1c1aa4dd">getIndices</a>().slice(1));</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;    }</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;    <span class="keywordflow">return</span> 0; <span class="comment">// Can&#39;t handle other constants</span></div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;  }</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InsertValueInst.html">InsertValueInst</a> *IV = dyn_cast&lt;InsertValueInst&gt;(Agg)) {</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;    <span class="comment">// We&#39;re extracting from an insertvalue instruction, compare the indices</span></div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> *exti, *exte, *insi, *inse;</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;    <span class="keywordflow">for</span> (exti = EV.<a class="code" href="classllvm_1_1ExtractValueInst.html#a7f9b7f9abcc0d7c98df4c00dc2ae6e7e">idx_begin</a>(), insi = IV-&gt;idx_begin(),</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;         exte = EV.<a class="code" href="classllvm_1_1ExtractValueInst.html#ab6aac2fda018dd26fa4cb43b8b15846f">idx_end</a>(), inse = IV-&gt;idx_end();</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;         exti != exte &amp;&amp; insi != inse;</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;         ++exti, ++insi) {</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;      <span class="keywordflow">if</span> (*insi != *exti)</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;        <span class="comment">// The insert and extract both reference distinctly different elements.</span></div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;        <span class="comment">// This means the extract is not influenced by the insert, and we can</span></div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;        <span class="comment">// replace the aggregate operand of the extract with the aggregate</span></div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;        <span class="comment">// operand of the insert. i.e., replace</span></div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;        <span class="comment">// %I = insertvalue { i32, { i32 } } %A, { i32 } { i32 42 }, 1</span></div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;        <span class="comment">// %E = extractvalue { i32, { i32 } } %I, 0</span></div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;        <span class="comment">// with</span></div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;        <span class="comment">// %E = extractvalue { i32, { i32 } } %A, 0</span></div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ExtractValueInst.html#a8e7f8107cfcd8c4f169185e70a3d64ff">ExtractValueInst::Create</a>(IV-&gt;getAggregateOperand(),</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;                                        EV.<a class="code" href="classllvm_1_1ExtractValueInst.html#aabcc9d0c7c5b68bf66032d1c1c1aa4dd">getIndices</a>());</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    }</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;    <span class="keywordflow">if</span> (exti == exte &amp;&amp; insi == inse)</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;      <span class="comment">// Both iterators are at the end: Index lists are identical. Replace</span></div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;      <span class="comment">// %B = insertvalue { i32, { i32 } } %A, i32 42, 1, 0</span></div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;      <span class="comment">// %C = extractvalue { i32, { i32 } } %B, 1, 0</span></div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;      <span class="comment">// with &quot;i32 42&quot;</span></div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;      <span class="keywordflow">return</span> ReplaceInstUsesWith(EV, IV-&gt;getInsertedValueOperand());</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;    <span class="keywordflow">if</span> (exti == exte) {</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;      <span class="comment">// The extract list is a prefix of the insert list. i.e. replace</span></div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;      <span class="comment">// %I = insertvalue { i32, { i32 } } %A, i32 42, 1, 0</span></div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;      <span class="comment">// %E = extractvalue { i32, { i32 } } %I, 1</span></div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;      <span class="comment">// with</span></div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;      <span class="comment">// %X = extractvalue { i32, { i32 } } %A, 1</span></div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;      <span class="comment">// %E = insertvalue { i32 } %X, i32 42, 0</span></div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;      <span class="comment">// by switching the order of the insert and extract (though the</span></div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;      <span class="comment">// insertvalue should be left in, since it may have other uses).</span></div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NewEV = Builder-&gt;CreateExtractValue(IV-&gt;getAggregateOperand(),</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;                                                 EV.<a class="code" href="classllvm_1_1ExtractValueInst.html#aabcc9d0c7c5b68bf66032d1c1c1aa4dd">getIndices</a>());</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InsertValueInst.html#a6df8a5db1907e4cfed3029c0c786a40b">InsertValueInst::Create</a>(NewEV, IV-&gt;getInsertedValueOperand(),</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;                                     <a class="code" href="namespacellvm.html#a0448108c43f3a226744d0a4c28c989f7">makeArrayRef</a>(insi, inse));</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;    }</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;    <span class="keywordflow">if</span> (insi == inse)</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;      <span class="comment">// The insert list is a prefix of the extract list</span></div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;      <span class="comment">// We can simply remove the common indices from the extract and make it</span></div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;      <span class="comment">// operate on the inserted value instead of the insertvalue result.</span></div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;      <span class="comment">// i.e., replace</span></div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;      <span class="comment">// %I = insertvalue { i32, { i32 } } %A, { i32 } { i32 42 }, 1</span></div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;      <span class="comment">// %E = extractvalue { i32, { i32 } } %I, 1, 0</span></div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;      <span class="comment">// with</span></div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;      <span class="comment">// %E extractvalue { i32 } { i32 42 }, 0</span></div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ExtractValueInst.html#a8e7f8107cfcd8c4f169185e70a3d64ff">ExtractValueInst::Create</a>(IV-&gt;getInsertedValueOperand(),</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;                                      <a class="code" href="namespacellvm.html#a0448108c43f3a226744d0a4c28c989f7">makeArrayRef</a>(exti, exte));</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;  }</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *II = dyn_cast&lt;IntrinsicInst&gt;(Agg)) {</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;    <span class="comment">// We&#39;re extracting from an intrinsic, see if we&#39;re the only user, which</span></div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;    <span class="comment">// allows us to simplify multiple result intrinsics to simpler things that</span></div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;    <span class="comment">// just get one value.</span></div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;    <span class="keywordflow">if</span> (II-&gt;hasOneUse()) {</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;      <span class="comment">// Check if we&#39;re grabbing the overflow bit or the result of a &#39;with</span></div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;      <span class="comment">// overflow&#39; intrinsic.  If it&#39;s the latter we can remove the intrinsic</span></div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;      <span class="comment">// and replace it with a traditional binary instruction.</span></div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;      <span class="keywordflow">switch</span> (II-&gt;getIntrinsicID()) {</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a4010b27bb068167801ff99622ea92907">Intrinsic::uadd_with_overflow</a>:</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a137f4ed94704473ee62c0a70084984fc">Intrinsic::sadd_with_overflow</a>:</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;        <span class="keywordflow">if</span> (*EV.<a class="code" href="classllvm_1_1ExtractValueInst.html#a7f9b7f9abcc0d7c98df4c00dc2ae6e7e">idx_begin</a>() == 0) {  <span class="comment">// Normal result.</span></div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *LHS = II-&gt;getArgOperand(0), *RHS = II-&gt;getArgOperand(1);</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;          ReplaceInstUsesWith(*II, <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(II-&gt;getType()));</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;          EraseInstFromFunction(*II);</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;          <span class="keywordflow">return</span> BinaryOperator::CreateAdd(LHS, RHS);</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;        }</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;        <span class="comment">// If the normal result of the add is dead, and the RHS is a constant,</span></div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;        <span class="comment">// we can transform this into a range comparison.</span></div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;        <span class="comment">// overflow = uadd a, -4  --&gt;  overflow = icmp ugt a, 3</span></div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;        <span class="keywordflow">if</span> (II-&gt;getIntrinsicID() == <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a4010b27bb068167801ff99622ea92907">Intrinsic::uadd_with_overflow</a>)</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(II-&gt;getArgOperand(1)))</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>, II-&gt;getArgOperand(0),</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;                                <a class="code" href="classllvm_1_1ConstantExpr.html#a5b43a866f0fca605556f0f69f70c522a">ConstantExpr::getNot</a>(CI));</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90acd74a673807c129d89e2456d8d2e566d">Intrinsic::usub_with_overflow</a>:</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a1558c7c51d5102374564fd690d19df99">Intrinsic::ssub_with_overflow</a>:</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;        <span class="keywordflow">if</span> (*EV.<a class="code" href="classllvm_1_1ExtractValueInst.html#a7f9b7f9abcc0d7c98df4c00dc2ae6e7e">idx_begin</a>() == 0) {  <span class="comment">// Normal result.</span></div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *LHS = II-&gt;getArgOperand(0), *RHS = II-&gt;getArgOperand(1);</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;          ReplaceInstUsesWith(*II, <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(II-&gt;getType()));</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;          EraseInstFromFunction(*II);</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;          <span class="keywordflow">return</span> BinaryOperator::CreateSub(LHS, RHS);</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;        }</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a95107a51be6c979110631a4c9145d6e0">Intrinsic::umul_with_overflow</a>:</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a534c8dc56785061e35fb476480d11a3d">Intrinsic::smul_with_overflow</a>:</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;        <span class="keywordflow">if</span> (*EV.<a class="code" href="classllvm_1_1ExtractValueInst.html#a7f9b7f9abcc0d7c98df4c00dc2ae6e7e">idx_begin</a>() == 0) {  <span class="comment">// Normal result.</span></div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *LHS = II-&gt;getArgOperand(0), *RHS = II-&gt;getArgOperand(1);</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;          ReplaceInstUsesWith(*II, <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(II-&gt;getType()));</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;          EraseInstFromFunction(*II);</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;          <span class="keywordflow">return</span> BinaryOperator::CreateMul(LHS, RHS);</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;        }</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;      }</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;    }</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;  }</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *L = dyn_cast&lt;LoadInst&gt;(Agg))</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;    <span class="comment">// If the (non-volatile) load only has one use, we can rewrite this to a</span></div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;    <span class="comment">// load from a GEP. This reduces the size of the load.</span></div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;    <span class="comment">// FIXME: If a load is used only by extractvalue instructions then this</span></div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;    <span class="comment">//        could be done regardless of having multiple uses.</span></div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;    <span class="keywordflow">if</span> (L-&gt;isSimple() &amp;&amp; L-&gt;hasOneUse()) {</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;      <span class="comment">// extractvalue has integer indices, getelementptr has Value*s. Convert.</span></div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value*, 4&gt;</a> Indices;</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;      <span class="comment">// Prefix an i32 0 since we need the first element.</span></div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;      Indices.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Builder-&gt;getInt32(0));</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ExtractValueInst.html#a4fe735fcf509b757252e91d53498708a">ExtractValueInst::idx_iterator</a> I = EV.<a class="code" href="classllvm_1_1ExtractValueInst.html#a7f9b7f9abcc0d7c98df4c00dc2ae6e7e">idx_begin</a>(), E = EV.<a class="code" href="classllvm_1_1ExtractValueInst.html#ab6aac2fda018dd26fa4cb43b8b15846f">idx_end</a>();</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;            I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;        Indices.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Builder-&gt;getInt32(*I));</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;      <span class="comment">// We need to insert these at the location of the old load, not at that of</span></div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;      <span class="comment">// the extractvalue.</span></div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;      Builder-&gt;SetInsertPoint(L-&gt;getParent(), L);</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *GEP = Builder-&gt;CreateInBoundsGEP(L-&gt;getPointerOperand(), Indices);</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;      <span class="comment">// Returning the load directly will cause the main loop to insert it in</span></div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;      <span class="comment">// the wrong spot, so use ReplaceInstUsesWith().</span></div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;      <span class="keywordflow">return</span> ReplaceInstUsesWith(EV, Builder-&gt;CreateLoad(GEP));</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;    }</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;  <span class="comment">// We could simplify extracts from other values. Note that nested extracts may</span></div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;  <span class="comment">// already be simplified implicitly by the above: extract (extract (insert) )</span></div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;  <span class="comment">// will be translated into extract ( insert ( extract ) ) first and then just</span></div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;  <span class="comment">// the value inserted, if appropriate. Similarly for extracts from single-use</span></div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;  <span class="comment">// loads: extract (extract (load)) will be translated to extract (load (gep))</span></div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;  <span class="comment">// and if again single-use then via load (gep (gep)) to load (gep).</span></div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;  <span class="comment">// However, double extracts from e.g. function arguments or return values</span></div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;  <span class="comment">// aren&#39;t handled yet.</span></div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;}</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;</div><div class="line"><a name="l01830"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#a7b411f919e9298c8e86fae1794c3fcec"> 1830</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="InstructionCombining_8cpp.html#a7b411f919e9298c8e86fae1794c3fcec">Personality_Type</a> {</div><div class="line"><a name="l01831"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#a7b411f919e9298c8e86fae1794c3fceca81e079acf8b55d4547c8c56a1aff358a"> 1831</a></span>&#160;  <a class="code" href="InstructionCombining_8cpp.html#a7b411f919e9298c8e86fae1794c3fceca81e079acf8b55d4547c8c56a1aff358a">Unknown_Personality</a>,</div><div class="line"><a name="l01832"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#a7b411f919e9298c8e86fae1794c3fcecae42a316fa16964a2189a63eafb02321d"> 1832</a></span>&#160;  <a class="code" href="InstructionCombining_8cpp.html#a7b411f919e9298c8e86fae1794c3fcecae42a316fa16964a2189a63eafb02321d">GNU_Ada_Personality</a>,</div><div class="line"><a name="l01833"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#a7b411f919e9298c8e86fae1794c3fceca6a371cd3d7534a425c90e324bbed75aa"> 1833</a></span>&#160;  <a class="code" href="InstructionCombining_8cpp.html#a7b411f919e9298c8e86fae1794c3fceca6a371cd3d7534a425c90e324bbed75aa">GNU_CXX_Personality</a>,</div><div class="line"><a name="l01834"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#a7b411f919e9298c8e86fae1794c3fcecaaeef37b5503975660ff3cb350bc5b162"> 1834</a></span>&#160;  <a class="code" href="InstructionCombining_8cpp.html#a7b411f919e9298c8e86fae1794c3fcecaaeef37b5503975660ff3cb350bc5b162">GNU_ObjC_Personality</a></div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;};</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;<span class="comment">/// RecognizePersonality - See if the given exception handling personality</span></div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;<span class="comment">/// function is one that we understand.  If so, return a description of it;</span></div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;<span class="comment">/// otherwise return Unknown_Personality.</span></div><div class="line"><a name="l01840"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#aba1a7ea04978c1d1d7f0dd865b24a213"> 1840</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="InstructionCombining_8cpp.html#a7b411f919e9298c8e86fae1794c3fcec">Personality_Type</a> <a class="code" href="InstructionCombining_8cpp.html#aba1a7ea04978c1d1d7f0dd865b24a213">RecognizePersonality</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *Pers) {</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a> = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1Function.html">Function</a>&gt;(Pers-&gt;<a class="code" href="classllvm_1_1Value.html#a38ea12c04523d63adda732b9c5d6da0a">stripPointerCasts</a>());</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;  <span class="keywordflow">if</span> (!F)</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="InstructionCombining_8cpp.html#a7b411f919e9298c8e86fae1794c3fceca81e079acf8b55d4547c8c56a1aff358a">Unknown_Personality</a>;</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1StringSwitch.html">StringSwitch&lt;Personality_Type&gt;</a>(F-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>())</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;    .Case(<span class="stringliteral">&quot;__gnat_eh_personality&quot;</span>, <a class="code" href="InstructionCombining_8cpp.html#a7b411f919e9298c8e86fae1794c3fcecae42a316fa16964a2189a63eafb02321d">GNU_Ada_Personality</a>)</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;    .<a class="code" href="classllvm_1_1StringSwitch.html#a043081d818ac1bce1f866ec6c4b4b43c">Case</a>(<span class="stringliteral">&quot;__gxx_personality_v0&quot;</span>,  <a class="code" href="InstructionCombining_8cpp.html#a7b411f919e9298c8e86fae1794c3fceca6a371cd3d7534a425c90e324bbed75aa">GNU_CXX_Personality</a>)</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;    .<a class="code" href="classllvm_1_1StringSwitch.html#a043081d818ac1bce1f866ec6c4b4b43c">Case</a>(<span class="stringliteral">&quot;__objc_personality_v0&quot;</span>, <a class="code" href="InstructionCombining_8cpp.html#a7b411f919e9298c8e86fae1794c3fcecaaeef37b5503975660ff3cb350bc5b162">GNU_ObjC_Personality</a>)</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;    .<a class="code" href="classllvm_1_1StringSwitch.html#a2ff0de0d109fdde7fada2091c69183b2">Default</a>(<a class="code" href="InstructionCombining_8cpp.html#a7b411f919e9298c8e86fae1794c3fceca81e079acf8b55d4547c8c56a1aff358a">Unknown_Personality</a>);</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;}</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;<span class="comment">/// isCatchAll - Return &#39;true&#39; if the given typeinfo will match anything.</span></div><div class="line"><a name="l01852"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#aa4790342aeb6f773552d018e0bcf410b"> 1852</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstructionCombining_8cpp.html#aa4790342aeb6f773552d018e0bcf410b">isCatchAll</a>(<a class="code" href="InstructionCombining_8cpp.html#a7b411f919e9298c8e86fae1794c3fcec">Personality_Type</a> Personality, <a class="code" href="classllvm_1_1Constant.html">Constant</a> *TypeInfo) {</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;  <span class="keywordflow">switch</span> (Personality) {</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="InstructionCombining_8cpp.html#a7b411f919e9298c8e86fae1794c3fceca81e079acf8b55d4547c8c56a1aff358a">Unknown_Personality</a>:</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="InstructionCombining_8cpp.html#a7b411f919e9298c8e86fae1794c3fcecae42a316fa16964a2189a63eafb02321d">GNU_Ada_Personality</a>:</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;    <span class="comment">// While __gnat_all_others_value will match any Ada exception, it doesn&#39;t</span></div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;    <span class="comment">// match foreign exceptions (or didn&#39;t, before gcc-4.7).</span></div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="InstructionCombining_8cpp.html#a7b411f919e9298c8e86fae1794c3fceca6a371cd3d7534a425c90e324bbed75aa">GNU_CXX_Personality</a>:</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="InstructionCombining_8cpp.html#a7b411f919e9298c8e86fae1794c3fcecaaeef37b5503975660ff3cb350bc5b162">GNU_ObjC_Personality</a>:</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;    <span class="keywordflow">return</span> TypeInfo-&gt;<a class="code" href="classllvm_1_1Constant.html#ad7ec8482f19e8e86e3de573b060a17e5">isNullValue</a>();</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;  }</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;  <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unknown personality!&quot;</span>);</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;}</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;</div><div class="line"><a name="l01867"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#a13d41ea63582902162e0efd8a78a5ad5"> 1867</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstructionCombining_8cpp.html#a13d41ea63582902162e0efd8a78a5ad5">shorter_filter</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *LHS, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *RHS) {</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;  <span class="keywordflow">return</span></div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;    cast&lt;ArrayType&gt;(LHS-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())-&gt;getNumElements()</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;  &lt;</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;    cast&lt;ArrayType&gt;(RHS-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())-&gt;getNumElements();</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;}</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;</div><div class="line"><a name="l01874"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#ab6379d689ffcbeb12778a3fb9623eb9a"> 1874</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombiner.html#ab6379d689ffcbeb12778a3fb9623eb9a">InstCombiner::visitLandingPadInst</a>(<a class="code" href="classllvm_1_1LandingPadInst.html">LandingPadInst</a> &amp;LI) {</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;  <span class="comment">// The logic here should be correct for any real-world personality function.</span></div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;  <span class="comment">// However if that turns out not to be true, the offending logic can always</span></div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;  <span class="comment">// be conditioned on the personality function, like the catch-all logic is.</span></div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;  <a class="code" href="InstructionCombining_8cpp.html#a7b411f919e9298c8e86fae1794c3fcec">Personality_Type</a> Personality = <a class="code" href="InstructionCombining_8cpp.html#aba1a7ea04978c1d1d7f0dd865b24a213">RecognizePersonality</a>(LI.<a class="code" href="classllvm_1_1LandingPadInst.html#a7e36bd4ab20bc5b099513596126ff236">getPersonalityFn</a>());</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;  <span class="comment">// Simplify the list of clauses, eg by removing repeated catch clauses</span></div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;  <span class="comment">// (these are often created by inlining).</span></div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;  <span class="keywordtype">bool</span> MakeNewInstruction = <span class="keyword">false</span>; <span class="comment">// If true, recreate using the following:</span></div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 16&gt;</a> NewClauses; <span class="comment">// - Clauses for the new instruction;</span></div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;  <span class="keywordtype">bool</span> CleanupFlag = LI.<a class="code" href="classllvm_1_1LandingPadInst.html#a79bc76d95af0c68ea5d77c5a0743c930">isCleanup</a>();   <span class="comment">// - The new instruction is a cleanup.</span></div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Value *, 16&gt;</a> AlreadyCaught; <span class="comment">// Typeinfos known caught already.</span></div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = LI.<a class="code" href="classllvm_1_1LandingPadInst.html#a0996e256e9037e03a45d904b48c90aac">getNumClauses</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;    <span class="keywordtype">bool</span> isLastClause = <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1 == e;</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;    <span class="keywordflow">if</span> (LI.<a class="code" href="classllvm_1_1LandingPadInst.html#aba66c0ac59ae4b9a08ae5ed04cc8e3db">isCatch</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)) {</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;      <span class="comment">// A catch clause.</span></div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *CatchClause = LI.<a class="code" href="classllvm_1_1LandingPadInst.html#ac32253b1954f4abfcbff519ab343f2b1">getClause</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *TypeInfo = cast&lt;Constant&gt;(CatchClause-&gt;<a class="code" href="classllvm_1_1Value.html#a38ea12c04523d63adda732b9c5d6da0a">stripPointerCasts</a>());</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;      <span class="comment">// If we already saw this clause, there is no point in having a second</span></div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;      <span class="comment">// copy of it.</span></div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;      <span class="keywordflow">if</span> (AlreadyCaught.<a class="code" href="classllvm_1_1SmallPtrSet.html#a9b6dd0fc7a648a939e571246045b673e">insert</a>(TypeInfo)) {</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;        <span class="comment">// This catch clause was not already seen.</span></div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;        NewClauses.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(CatchClause);</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;        <span class="comment">// Repeated catch clause - drop the redundant copy.</span></div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;        MakeNewInstruction = <span class="keyword">true</span>;</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;      }</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;      <span class="comment">// If this is a catch-all then there is no point in keeping any following</span></div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;      <span class="comment">// clauses or marking the landingpad as having a cleanup.</span></div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="InstructionCombining_8cpp.html#aa4790342aeb6f773552d018e0bcf410b">isCatchAll</a>(Personality, TypeInfo)) {</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;        <span class="keywordflow">if</span> (!isLastClause)</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;          MakeNewInstruction = <span class="keyword">true</span>;</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;        CleanupFlag = <span class="keyword">false</span>;</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;      }</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;      <span class="comment">// A filter clause.  If any of the filter elements were already caught</span></div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;      <span class="comment">// then they can be dropped from the filter.  It is tempting to try to</span></div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;      <span class="comment">// exploit the filter further by saying that any typeinfo that does not</span></div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;      <span class="comment">// occur in the filter can&#39;t be caught later (and thus can be dropped).</span></div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;      <span class="comment">// However this would be wrong, since typeinfos can match without being</span></div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;      <span class="comment">// equal (for example if one represents a C++ class, and the other some</span></div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;      <span class="comment">// class derived from it).</span></div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;      assert(LI.<a class="code" href="classllvm_1_1LandingPadInst.html#acbe7fa255524e60e4a8ad959ae51aa22">isFilter</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) &amp;&amp; <span class="stringliteral">&quot;Unsupported landingpad clause!&quot;</span>);</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *FilterClause = LI.<a class="code" href="classllvm_1_1LandingPadInst.html#ac32253b1954f4abfcbff519ab343f2b1">getClause</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;      <a class="code" href="classllvm_1_1ArrayType.html">ArrayType</a> *FilterType = cast&lt;ArrayType&gt;(FilterClause-&gt;getType());</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;      <span class="keywordtype">unsigned</span> NumTypeInfos = FilterType-&gt;<a class="code" href="classllvm_1_1ArrayType.html#a688547c04258bde2eaf6515048bf3f3b">getNumElements</a>();</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;      <span class="comment">// An empty filter catches everything, so there is no point in keeping any</span></div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;      <span class="comment">// following clauses or marking the landingpad as having a cleanup.  By</span></div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;      <span class="comment">// dealing with this case here the following code is made a bit simpler.</span></div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;      <span class="keywordflow">if</span> (!NumTypeInfos) {</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;        NewClauses.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(FilterClause);</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;        <span class="keywordflow">if</span> (!isLastClause)</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;          MakeNewInstruction = <span class="keyword">true</span>;</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;        CleanupFlag = <span class="keyword">false</span>;</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;      }</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;      <span class="keywordtype">bool</span> MakeNewFilter = <span class="keyword">false</span>; <span class="comment">// If true, make a new filter.</span></div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Constant *, 16&gt;</a> NewFilterElts; <span class="comment">// New elements.</span></div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;      <span class="keywordflow">if</span> (isa&lt;ConstantAggregateZero&gt;(FilterClause)) {</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;        <span class="comment">// Not an empty filter - it contains at least one null typeinfo.</span></div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;        assert(NumTypeInfos &gt; 0 &amp;&amp; <span class="stringliteral">&quot;Should have handled empty filter already!&quot;</span>);</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *TypeInfo =</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;          <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(FilterType-&gt;<a class="code" href="classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">getElementType</a>());</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;        <span class="comment">// If this typeinfo is a catch-all then the filter can never match.</span></div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="InstructionCombining_8cpp.html#aa4790342aeb6f773552d018e0bcf410b">isCatchAll</a>(Personality, TypeInfo)) {</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;          <span class="comment">// Throw the filter away.</span></div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;          MakeNewInstruction = <span class="keyword">true</span>;</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;        }</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;        <span class="comment">// There is no point in having multiple copies of this typeinfo, so</span></div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;        <span class="comment">// discard all but the first copy if there is more than one.</span></div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;        NewFilterElts.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(TypeInfo);</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;        <span class="keywordflow">if</span> (NumTypeInfos &gt; 1)</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;          MakeNewFilter = <span class="keyword">true</span>;</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;        <a class="code" href="classllvm_1_1ConstantArray.html">ConstantArray</a> *Filter = cast&lt;ConstantArray&gt;(FilterClause);</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;        <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Value *, 16&gt;</a> SeenInFilter; <span class="comment">// For uniquing the elements.</span></div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;        NewFilterElts.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a4786e64977a3af38f29adee46b70a863">reserve</a>(NumTypeInfos);</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;        <span class="comment">// Remove any filter elements that were already caught or that already</span></div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;        <span class="comment">// occurred in the filter.  While there, see if any of the elements are</span></div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;        <span class="comment">// catch-alls.  If so, the filter can be discarded.</span></div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;        <span class="keywordtype">bool</span> SawCatchAll = <span class="keyword">false</span>;</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> = 0; <a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> != NumTypeInfos; ++<a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>) {</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *Elt = Filter-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(<a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>);</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;          <a class="code" href="classllvm_1_1Constant.html">Constant</a> *TypeInfo = cast&lt;Constant&gt;(Elt-&gt;<a class="code" href="classllvm_1_1Value.html#a38ea12c04523d63adda732b9c5d6da0a">stripPointerCasts</a>());</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="InstructionCombining_8cpp.html#aa4790342aeb6f773552d018e0bcf410b">isCatchAll</a>(Personality, TypeInfo)) {</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;            <span class="comment">// This element is a catch-all.  Bail out, noting this fact.</span></div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;            SawCatchAll = <span class="keyword">true</span>;</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;          }</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;          <span class="keywordflow">if</span> (AlreadyCaught.<a class="code" href="classllvm_1_1SmallPtrSet.html#a2ced6343b8ad006a757059554bbf9f37">count</a>(TypeInfo))</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;            <span class="comment">// Already caught by an earlier clause, so having it in the filter</span></div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;            <span class="comment">// is pointless.</span></div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;          <span class="comment">// There is no point in having multiple copies of the same typeinfo in</span></div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;          <span class="comment">// a filter, so only add it if we didn&#39;t already.</span></div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;          <span class="keywordflow">if</span> (SeenInFilter.insert(TypeInfo))</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;            NewFilterElts.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(cast&lt;Constant&gt;(Elt));</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;        }</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;        <span class="comment">// A filter containing a catch-all cannot match anything by definition.</span></div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;        <span class="keywordflow">if</span> (SawCatchAll) {</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;          <span class="comment">// Throw the filter away.</span></div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;          MakeNewInstruction = <span class="keyword">true</span>;</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;        }</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;        <span class="comment">// If we dropped something from the filter, make a new one.</span></div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;        <span class="keywordflow">if</span> (NewFilterElts.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>() &lt; NumTypeInfos)</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;          MakeNewFilter = <span class="keyword">true</span>;</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;      }</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;      <span class="keywordflow">if</span> (MakeNewFilter) {</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;        FilterType = <a class="code" href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">ArrayType::get</a>(FilterType-&gt;<a class="code" href="classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">getElementType</a>(),</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;                                    NewFilterElts.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>());</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;        FilterClause = <a class="code" href="classllvm_1_1ConstantArray.html#a0900dacdc7ad8e3ea0cc92993c7fd422">ConstantArray::get</a>(FilterType, NewFilterElts);</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;        MakeNewInstruction = <span class="keyword">true</span>;</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;      }</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;      NewClauses.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(FilterClause);</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;      <span class="comment">// If the new filter is empty then it will catch everything so there is</span></div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;      <span class="comment">// no point in keeping any following clauses or marking the landingpad</span></div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;      <span class="comment">// as having a cleanup.  The case of the original filter being empty was</span></div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;      <span class="comment">// already handled above.</span></div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;      <span class="keywordflow">if</span> (MakeNewFilter &amp;&amp; !NewFilterElts.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>()) {</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;        assert(MakeNewInstruction &amp;&amp; <span class="stringliteral">&quot;New filter but not a new instruction!&quot;</span>);</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;        CleanupFlag = <span class="keyword">false</span>;</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;      }</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;    }</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;  }</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;  <span class="comment">// If several filters occur in a row then reorder them so that the shortest</span></div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;  <span class="comment">// filters come first (those with the smallest number of elements).  This is</span></div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;  <span class="comment">// advantageous because shorter filters are more likely to match, speeding up</span></div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;  <span class="comment">// unwinding, but mostly because it increases the effectiveness of the other</span></div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;  <span class="comment">// filter optimizations below.</span></div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = NewClauses.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1 &lt; e; ) {</div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>;</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;    <span class="comment">// Find the maximal &#39;j&#39; s.t. the range [i, j) consists entirely of filters.</span></div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;    <span class="keywordflow">for</span> (j = <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>; j != e; ++<a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>)</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;      <span class="keywordflow">if</span> (!isa&lt;ArrayType&gt;(NewClauses[j]-&gt;<a class="code" href="namespacellvm_1_1Intrinsic.html#ac015f68d60ea67a2e31bc10bc720d3e8">getType</a>()))</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;    <span class="comment">// Check whether the filters are already sorted by length.  We need to know</span></div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;    <span class="comment">// if sorting them is actually going to do anything so that we only make a</span></div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;    <span class="comment">// new landingpad instruction if it does.</span></div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> k = <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>; k + 1 &lt; <a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>; ++k)</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="InstructionCombining_8cpp.html#a13d41ea63582902162e0efd8a78a5ad5">shorter_filter</a>(NewClauses[k+1], NewClauses[k])) {</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;        <span class="comment">// Not sorted, so sort the filters now.  Doing an unstable sort would be</span></div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;        <span class="comment">// correct too but reordering filters pointlessly might confuse users.</span></div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;        std::stable_sort(NewClauses.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>() + <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, NewClauses.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>() + <a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>,</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;                         <a class="code" href="InstructionCombining_8cpp.html#a13d41ea63582902162e0efd8a78a5ad5">shorter_filter</a>);</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;        MakeNewInstruction = <span class="keyword">true</span>;</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;      }</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;    <span class="comment">// Look for the next batch of filters.</span></div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;    <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = j + 1;</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;  }</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;  <span class="comment">// If typeinfos matched if and only if equal, then the elements of a filter L</span></div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;  <span class="comment">// that occurs later than a filter F could be replaced by the intersection of</span></div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;  <span class="comment">// the elements of F and L.  In reality two typeinfos can match without being</span></div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;  <span class="comment">// equal (for example if one represents a C++ class, and the other some class</span></div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;  <span class="comment">// derived from it) so it would be wrong to perform this transform in general.</span></div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;  <span class="comment">// However the transform is correct and useful if F is a subset of L.  In that</span></div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;  <span class="comment">// case L can be replaced by F, and thus removed altogether since repeating a</span></div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;  <span class="comment">// filter is pointless.  So here we look at all pairs of filters F and L where</span></div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;  <span class="comment">// L follows F in the list of clauses, and remove L if every element of F is</span></div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;  <span class="comment">// an element of L.  This can occur when inlining C++ functions with exception</span></div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;  <span class="comment">// specifications.</span></div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1 &lt; NewClauses.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;    <span class="comment">// Examine each filter in turn.</span></div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Filter = NewClauses[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;    <a class="code" href="classllvm_1_1ArrayType.html">ArrayType</a> *FTy = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ArrayType.html">ArrayType</a>&gt;(Filter-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;    <span class="keywordflow">if</span> (!FTy)</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;      <span class="comment">// Not a filter - skip it.</span></div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;    <span class="keywordtype">unsigned</span> FElts = FTy-&gt;<a class="code" href="classllvm_1_1ArrayType.html#a688547c04258bde2eaf6515048bf3f3b">getNumElements</a>();</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;    <span class="comment">// Examine each filter following this one.  Doing this backwards means that</span></div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;    <span class="comment">// we don&#39;t have to worry about filters disappearing under us when removed.</span></div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> = NewClauses.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>() - 1; <a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> != <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>; --<a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>) {</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *LFilter = NewClauses[<a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>];</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;      <a class="code" href="classllvm_1_1ArrayType.html">ArrayType</a> *LTy = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ArrayType.html">ArrayType</a>&gt;(LFilter-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;      <span class="keywordflow">if</span> (!LTy)</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;        <span class="comment">// Not a filter - skip it.</span></div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;      <span class="comment">// If Filter is a subset of LFilter, i.e. every element of Filter is also</span></div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;      <span class="comment">// an element of LFilter, then discard LFilter.</span></div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;      <a class="code" href="classT.html">SmallVectorImpl&lt;Value *&gt;::iterator</a> J = NewClauses.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>() + <a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>;</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;      <span class="comment">// If Filter is empty then it is a subset of LFilter.</span></div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;      <span class="keywordflow">if</span> (!FElts) {</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;        <span class="comment">// Discard LFilter.</span></div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;        NewClauses.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a18c110c35e9133222a37b28d30f8a90f">erase</a>(J);</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;        MakeNewInstruction = <span class="keyword">true</span>;</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;        <span class="comment">// Move on to the next filter.</span></div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;      }</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;      <span class="keywordtype">unsigned</span> LElts = LTy-&gt;<a class="code" href="classllvm_1_1ArrayType.html#a688547c04258bde2eaf6515048bf3f3b">getNumElements</a>();</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;      <span class="comment">// If Filter is longer than LFilter then it cannot be a subset of it.</span></div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;      <span class="keywordflow">if</span> (FElts &gt; LElts)</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;        <span class="comment">// Move on to the next filter.</span></div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;      <span class="comment">// At this point we know that LFilter has at least one element.</span></div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;      <span class="keywordflow">if</span> (isa&lt;ConstantAggregateZero&gt;(LFilter)) { <span class="comment">// LFilter only contains zeros.</span></div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;        <span class="comment">// Filter is a subset of LFilter iff Filter contains only zeros (as we</span></div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;        <span class="comment">// already know that Filter is not longer than LFilter).</span></div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;        <span class="keywordflow">if</span> (isa&lt;ConstantAggregateZero&gt;(Filter)) {</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;          assert(FElts &lt;= LElts &amp;&amp; <span class="stringliteral">&quot;Should have handled this case earlier!&quot;</span>);</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;          <span class="comment">// Discard LFilter.</span></div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;          NewClauses.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a18c110c35e9133222a37b28d30f8a90f">erase</a>(J);</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;          MakeNewInstruction = <span class="keyword">true</span>;</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;        }</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;        <span class="comment">// Move on to the next filter.</span></div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;      }</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;      <a class="code" href="classllvm_1_1ConstantArray.html">ConstantArray</a> *LArray = cast&lt;ConstantArray&gt;(LFilter);</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;      <span class="keywordflow">if</span> (isa&lt;ConstantAggregateZero&gt;(Filter)) { <span class="comment">// Filter only contains zeros.</span></div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;        <span class="comment">// Since Filter is non-empty and contains only zeros, it is a subset of</span></div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;        <span class="comment">// LFilter iff LFilter contains a zero.</span></div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;        assert(FElts &gt; 0 &amp;&amp; <span class="stringliteral">&quot;Should have eliminated the empty filter earlier!&quot;</span>);</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#a3b42845ada2673a44442c88221edf65f">l</a> = 0; <a class="code" href="Target_2README_8txt.html#a3b42845ada2673a44442c88221edf65f">l</a> != LElts; ++<a class="code" href="Target_2README_8txt.html#a3b42845ada2673a44442c88221edf65f">l</a>)</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;          <span class="keywordflow">if</span> (LArray-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(<a class="code" href="Target_2README_8txt.html#a3b42845ada2673a44442c88221edf65f">l</a>)-&gt;isNullValue()) {</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;            <span class="comment">// LFilter contains a zero - discard it.</span></div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;            NewClauses.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a18c110c35e9133222a37b28d30f8a90f">erase</a>(J);</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;            MakeNewInstruction = <span class="keyword">true</span>;</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;          }</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;        <span class="comment">// Move on to the next filter.</span></div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;      }</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;      <span class="comment">// At this point we know that both filters are ConstantArrays.  Loop over</span></div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;      <span class="comment">// operands to see whether every element of Filter is also an element of</span></div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;      <span class="comment">// LFilter.  Since filters tend to be short this is probably faster than</span></div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;      <span class="comment">// using a method that scales nicely.</span></div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;      <a class="code" href="classllvm_1_1ConstantArray.html">ConstantArray</a> *FArray = cast&lt;ConstantArray&gt;(Filter);</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;      <span class="keywordtype">bool</span> AllFound = <span class="keyword">true</span>;</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="README__ALTIVEC_8txt.html#afb354c8aea0150628f8aa06c7f4a4168">f</a> = 0; <a class="code" href="README__ALTIVEC_8txt.html#afb354c8aea0150628f8aa06c7f4a4168">f</a> != FElts; ++<a class="code" href="README__ALTIVEC_8txt.html#afb354c8aea0150628f8aa06c7f4a4168">f</a>) {</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *FTypeInfo = FArray-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(<a class="code" href="README__ALTIVEC_8txt.html#afb354c8aea0150628f8aa06c7f4a4168">f</a>)-&gt;<a class="code" href="classllvm_1_1Value.html#a38ea12c04523d63adda732b9c5d6da0a">stripPointerCasts</a>();</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;        AllFound = <span class="keyword">false</span>;</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#a3b42845ada2673a44442c88221edf65f">l</a> = 0; <a class="code" href="Target_2README_8txt.html#a3b42845ada2673a44442c88221edf65f">l</a> != LElts; ++<a class="code" href="Target_2README_8txt.html#a3b42845ada2673a44442c88221edf65f">l</a>) {</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *LTypeInfo = LArray-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(<a class="code" href="Target_2README_8txt.html#a3b42845ada2673a44442c88221edf65f">l</a>)-&gt;<a class="code" href="classllvm_1_1Value.html#a38ea12c04523d63adda732b9c5d6da0a">stripPointerCasts</a>();</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;          <span class="keywordflow">if</span> (LTypeInfo == FTypeInfo) {</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;            AllFound = <span class="keyword">true</span>;</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;          }</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;        }</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;        <span class="keywordflow">if</span> (!AllFound)</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;      }</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;      <span class="keywordflow">if</span> (AllFound) {</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;        <span class="comment">// Discard LFilter.</span></div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;        NewClauses.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a18c110c35e9133222a37b28d30f8a90f">erase</a>(J);</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;        MakeNewInstruction = <span class="keyword">true</span>;</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;      }</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;      <span class="comment">// Move on to the next filter.</span></div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;    }</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;  }</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;  <span class="comment">// If we changed any of the clauses, replace the old landingpad instruction</span></div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;  <span class="comment">// with a new one.</span></div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;  <span class="keywordflow">if</span> (MakeNewInstruction) {</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;    <a class="code" href="classllvm_1_1LandingPadInst.html">LandingPadInst</a> *NLI = <a class="code" href="classllvm_1_1LandingPadInst.html#ab79ff0e2579505f12d7eee951335e5ff">LandingPadInst::Create</a>(LI.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(),</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;                                                 LI.<a class="code" href="classllvm_1_1LandingPadInst.html#a7e36bd4ab20bc5b099513596126ff236">getPersonalityFn</a>(),</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;                                                 NewClauses.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>());</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = NewClauses.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;      NLI-&gt;<a class="code" href="classllvm_1_1LandingPadInst.html#acfc7ce8a4359705f956484f74ca722c9">addClause</a>(NewClauses[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;    <span class="comment">// A landing pad with no clauses must have the cleanup flag set.  It is</span></div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;    <span class="comment">// theoretically possible, though highly unlikely, that we eliminated all</span></div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;    <span class="comment">// clauses.  If so, force the cleanup flag to true.</span></div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;    <span class="keywordflow">if</span> (NewClauses.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>())</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;      CleanupFlag = <span class="keyword">true</span>;</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;    NLI-&gt;<a class="code" href="classllvm_1_1LandingPadInst.html#a97bc0afbd46cc7b3539e1cba861ac350">setCleanup</a>(CleanupFlag);</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;    <span class="keywordflow">return</span> NLI;</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;  }</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;  <span class="comment">// Even if none of the clauses changed, we may nonetheless have understood</span></div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;  <span class="comment">// that the cleanup flag is pointless.  Clear it if so.</span></div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;  <span class="keywordflow">if</span> (LI.<a class="code" href="classllvm_1_1LandingPadInst.html#a79bc76d95af0c68ea5d77c5a0743c930">isCleanup</a>() != CleanupFlag) {</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;    assert(!CleanupFlag &amp;&amp; <span class="stringliteral">&quot;Adding a cleanup, not removing one?!&quot;</span>);</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;    LI.<a class="code" href="classllvm_1_1LandingPadInst.html#a97bc0afbd46cc7b3539e1cba861ac350">setCleanup</a>(CleanupFlag);</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;    <span class="keywordflow">return</span> &amp;LI;</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;  }</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;}</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;<span class="comment">/// TryToSinkInstruction - Try to move the specified instruction from its</span></div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;<span class="comment">/// current block into the beginning of DestBlock, which can only happen if it&#39;s</span></div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;<span class="comment">/// safe to move the instruction past all of the instructions between it and the</span></div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;<span class="comment">/// end of its block.</span></div><div class="line"><a name="l02176"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#a1ea2b997ffc11a09339f80ef8287c8d5"> 2176</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstructionCombining_8cpp.html#a1ea2b997ffc11a09339f80ef8287c8d5">TryToSinkInstruction</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *DestBlock) {</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;  assert(I-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp; <span class="stringliteral">&quot;Invariants didn&#39;t hold!&quot;</span>);</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;  <span class="comment">// Cannot move control-flow-involving, volatile loads, vaarg, etc.</span></div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;  <span class="keywordflow">if</span> (isa&lt;PHINode&gt;(I) || isa&lt;LandingPadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) || I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a573063aad4c101462893d0490d867524">mayHaveSideEffects</a>() ||</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;      isa&lt;TerminatorInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;  <span class="comment">// Do not sink alloca instructions out of the entry block.</span></div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;  <span class="keywordflow">if</span> (isa&lt;AllocaInst&gt;(I) &amp;&amp; I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>() ==</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;        &amp;DestBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#a30f2c362631e3728d2f47a8203071ade">getEntryBlock</a>())</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;  <span class="comment">// We can only sink load instructions if there is nothing between the load and</span></div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;  <span class="comment">// the end of block that could change the value.</span></div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;  <span class="keywordflow">if</span> (I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a0fd8d3c26bf5cd614b0e6a9b8886a5d0">mayReadFromMemory</a>()) {</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> Scan = I, E = I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>();</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;         Scan != E; ++Scan)</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;      <span class="keywordflow">if</span> (Scan-&gt;mayWriteToMemory())</div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;  }</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;  <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> InsertPos = DestBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ab1cd5a3713b93a33f89a2086d473cf6e">getFirstInsertionPt</a>();</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;  I-&gt;<a class="code" href="classllvm_1_1Instruction.html#af67d1f3a518964d80a109bb3d9d5cf1e">moveBefore</a>(InsertPos);</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;  ++NumSunkInst;</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;}</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;<span class="comment">/// AddReachableCodeToWorklist - Walk the function in depth-first order, adding</span></div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;<span class="comment">/// all reachable code to the worklist.</span></div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;<span class="comment">/// This has a couple of tricks to make the code faster and more powerful.  In</span></div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;<span class="comment">/// particular, we constant fold and DCE instructions as we go, to avoid adding</span></div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;<span class="comment">/// them to the worklist (this significantly speeds up instcombine on code where</span></div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;<span class="comment">/// many instructions are dead or constant).  Additionally, if we find a branch</span></div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;<span class="comment">/// whose condition is a known constant, we only visit the reachable successors.</span></div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l02214"></a><span class="lineno"><a class="line" href="InstructionCombining_8cpp.html#a758068c5c175fc10dcd4b9086abfdfba"> 2214</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstructionCombining_8cpp.html#a758068c5c175fc10dcd4b9086abfdfba">AddReachableCodeToWorklist</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;                                       <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock*, 64&gt;</a> &amp;Visited,</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;                                       <a class="code" href="classllvm_1_1InstCombiner.html">InstCombiner</a> &amp;IC,</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;                                       <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> *TD,</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;                                       <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI) {</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;  <span class="keywordtype">bool</span> MadeIRChange = <span class="keyword">false</span>;</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock*, 256&gt;</a> Worklist;</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;  Worklist.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(BB);</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction*, 128&gt;</a> InstrsForInstCombineWorklist;</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;ConstantExpr*, Constant*&gt;</a> FoldedConstants;</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;  <span class="keywordflow">do</span> {</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;    BB = Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">pop_back_val</a>();</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;    <span class="comment">// We have now visited this block!  If we&#39;ve already been here, ignore it.</span></div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;    <span class="keywordflow">if</span> (!Visited.<a class="code" href="classllvm_1_1SmallPtrSet.html#a9b6dd0fc7a648a939e571246045b673e">insert</a>(BB)) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> BBI = BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(), E = BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>(); BBI != E; ) {</div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst = BBI++;</div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;      <span class="comment">// DCE instruction if trivially dead.</span></div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#abe283966f269761ee387642061c4451e">isInstructionTriviallyDead</a>(Inst, TLI)) {</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;        ++NumDeadInst;</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;IC: DCE: &quot;</span> &lt;&lt; *Inst &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;        Inst-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;      }</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;      <span class="comment">// ConstantProp instruction if trivially constant.</span></div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;      <span class="keywordflow">if</span> (!Inst-&gt;<a class="code" href="classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">use_empty</a>() &amp;&amp; isa&lt;Constant&gt;(Inst-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)))</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="namespacellvm.html#afaf85770fdd46c58822741178d7fd03d">ConstantFoldInstruction</a>(Inst, TD, TLI)) {</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;          <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;IC: ConstFold to: &quot;</span> &lt;&lt; *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &lt;&lt; <span class="stringliteral">&quot; from: &quot;</span></div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;                       &lt;&lt; *Inst &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;          Inst-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;          ++NumConstProp;</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;          Inst-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;        }</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;      <span class="keywordflow">if</span> (TD) {</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;        <span class="comment">// See if we can constant fold its operands.</span></div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">User::op_iterator</a> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = Inst-&gt;<a class="code" href="classllvm_1_1User.html#a2eeb1c7ed1cfe403f2ae0470e36c07e2">op_begin</a>(), e = Inst-&gt;<a class="code" href="classllvm_1_1User.html#af41f58e730804d10b91fcff39b035f74">op_end</a>();</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;             <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;          <a class="code" href="classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantExpr.html">ConstantExpr</a>&gt;(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;          <span class="keywordflow">if</span> (CE == 0) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;          <a class="code" href="classllvm_1_1Constant.html">Constant</a>*&amp; FoldRes = FoldedConstants[CE];</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;          <span class="keywordflow">if</span> (!FoldRes)</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;            FoldRes = <a class="code" href="namespacellvm.html#a8891be7c27326c20a6dba7d98e9030b5">ConstantFoldConstantExpression</a>(CE, TD, TLI);</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;          <span class="keywordflow">if</span> (!FoldRes)</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;            FoldRes = CE;</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;          <span class="keywordflow">if</span> (FoldRes != CE) {</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;            *<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = FoldRes;</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;            MadeIRChange = <span class="keyword">true</span>;</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;          }</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;        }</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;      }</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;      InstrsForInstCombineWorklist.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Inst);</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;    }</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;    <span class="comment">// Recursively visit successors.  If this is a branch or switch on a</span></div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;    <span class="comment">// constant, only visit the reachable successor.</span></div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;    <a class="code" href="classllvm_1_1TerminatorInst.html">TerminatorInst</a> *TI = BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>();</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = dyn_cast&lt;BranchInst&gt;(TI)) {</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;      <span class="keywordflow">if</span> (BI-&gt;isConditional() &amp;&amp; isa&lt;ConstantInt&gt;(BI-&gt;getCondition())) {</div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;        <span class="keywordtype">bool</span> CondVal = cast&lt;ConstantInt&gt;(BI-&gt;getCondition())-&gt;getZExtValue();</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;        <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ReachableBB = BI-&gt;getSuccessor(!CondVal);</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;        Worklist.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(ReachableBB);</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;      }</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SwitchInst.html">SwitchInst</a> *SI = dyn_cast&lt;SwitchInst&gt;(TI)) {</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *Cond = dyn_cast&lt;ConstantInt&gt;(SI-&gt;<a class="code" href="classllvm_1_1SelectInst.html#ad285a69e32ddeee367fed93b5f392801">getCondition</a>())) {</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;        <span class="comment">// See if this is an explicit destination.</span></div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SwitchInst_1_1CaseIt.html">SwitchInst::CaseIt</a> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = SI-&gt;case_begin(), e = SI-&gt;case_end();</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;             <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>.getCaseValue() == Cond) {</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;            <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ReachableBB = <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>.getCaseSuccessor();</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;            Worklist.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(ReachableBB);</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;          }</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;        <span class="comment">// Otherwise it is the default destination.</span></div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;        Worklist.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(SI-&gt;getDefaultDest());</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;      }</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;    }</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = TI-&gt;<a class="code" href="classllvm_1_1TerminatorInst.html#a4c26d3b92af99a6c8defd89a2d39ca32">getNumSuccessors</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;      Worklist.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(TI-&gt;<a class="code" href="classllvm_1_1TerminatorInst.html#a3aac3b6c36415a2b08f65ead9e3e51e7">getSuccessor</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;  } <span class="keywordflow">while</span> (!Worklist.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>());</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;  <span class="comment">// Once we&#39;ve found all of the instructions to add to instcombine&#39;s worklist,</span></div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;  <span class="comment">// add them in reverse order.  This way instcombine will visit from the top</span></div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;  <span class="comment">// of the function down.  This jives well with the way that it adds all uses</span></div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;  <span class="comment">// of instructions to the worklist after doing a transformation, thus avoiding</span></div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;  <span class="comment">// some N^2 behavior in pathological cases.</span></div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;  IC.<a class="code" href="classllvm_1_1InstCombiner.html#aaca490f77b8a0ca6b013db8c0de18972">Worklist</a>.<a class="code" href="classllvm_1_1InstCombineWorklist.html#a57c8e1e6503c4ef44f00954dfdbaf0da">AddInitialGroup</a>(&amp;InstrsForInstCombineWorklist[0],</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;                              InstrsForInstCombineWorklist.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>());</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;  <span class="keywordflow">return</span> MadeIRChange;</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;}</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;</div><div class="line"><a name="l02319"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#a7d51bb3a32d5bcdd7d273fcae8529fde"> 2319</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1InstCombiner.html#a7d51bb3a32d5bcdd7d273fcae8529fde">InstCombiner::DoOneIteration</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>, <span class="keywordtype">unsigned</span> Iteration) {</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;  MadeIRChange = <span class="keyword">false</span>;</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n\nINSTCOMBINE ITERATION #&quot;</span> &lt;&lt; Iteration &lt;&lt; <span class="stringliteral">&quot; on &quot;</span></div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;               &lt;&lt; F.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;  {</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;    <span class="comment">// Do a depth-first traversal of the function, populate the worklist with</span></div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;    <span class="comment">// the reachable instructions.  Ignore blocks that are not reachable.  Keep</span></div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;    <span class="comment">// track of which blocks we visit.</span></div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock*, 64&gt;</a> Visited;</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;    MadeIRChange |= <a class="code" href="InstructionCombining_8cpp.html#a758068c5c175fc10dcd4b9086abfdfba">AddReachableCodeToWorklist</a>(F.<a class="code" href="classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">begin</a>(), Visited, *<span class="keyword">this</span>, TD,</div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;                                               TLI);</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;    <span class="comment">// Do a quick scan over the function.  If we find any blocks that are</span></div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;    <span class="comment">// unreachable, remove any instructions inside of them.  This prevents</span></div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;    <span class="comment">// the instcombine code from having to deal with some bad special cases.</span></div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">Function::iterator</a> <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = F.<a class="code" href="classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">begin</a>(), E = F.<a class="code" href="classllvm_1_1Function.html#ae4ca2261b8b901e415fda7feac5051ea">end</a>(); <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> != E; ++<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;      <span class="keywordflow">if</span> (Visited.<a class="code" href="classllvm_1_1SmallPtrSet.html#a2ced6343b8ad006a757059554bbf9f37">count</a>(<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;      <span class="comment">// Delete the instructions backwards, as it has a reduced likelihood of</span></div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;      <span class="comment">// having to update as many def-use and use-def chains.</span></div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *EndInst = <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator(); <span class="comment">// Last not to be deleted.</span></div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;      <span class="keywordflow">while</span> (EndInst != <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;begin()) {</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;        <span class="comment">// Delete the next to last instruction.</span></div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;        <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> I = EndInst;</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst = --<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;        <span class="keywordflow">if</span> (!Inst-&gt;<a class="code" href="classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">use_empty</a>())</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;          Inst-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(<a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(Inst-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;        <span class="keywordflow">if</span> (isa&lt;LandingPadInst&gt;(Inst)) {</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;          EndInst = Inst;</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;        }</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;        <span class="keywordflow">if</span> (!isa&lt;DbgInfoIntrinsic&gt;(Inst)) {</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;          ++NumDeadInst;</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;          MadeIRChange = <span class="keyword">true</span>;</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;        }</div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;        Inst-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;      }</div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;    }</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;  }</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;  <span class="keywordflow">while</span> (!Worklist.isEmpty()) {</div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I = Worklist.RemoveOne();</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;    <span class="keywordflow">if</span> (I == 0) <span class="keywordflow">continue</span>;  <span class="comment">// skip null values.</span></div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;    <span class="comment">// Check to see if we can DCE the instruction.</span></div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#abe283966f269761ee387642061c4451e">isInstructionTriviallyDead</a>(I, TLI)) {</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;IC: DCE: &quot;</span> &lt;&lt; *I &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;      EraseInstFromFunction(*I);</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;      ++NumDeadInst;</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;      MadeIRChange = <span class="keyword">true</span>;</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;    }</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;    <span class="comment">// Instruction isn&#39;t dead, see if we can constant propagate it.</span></div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;    <span class="keywordflow">if</span> (!I-&gt;<a class="code" href="classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">use_empty</a>() &amp;&amp; isa&lt;Constant&gt;(I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)))</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="namespacellvm.html#afaf85770fdd46c58822741178d7fd03d">ConstantFoldInstruction</a>(I, TD, TLI)) {</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;IC: ConstFold to: &quot;</span> &lt;&lt; *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &lt;&lt; <span class="stringliteral">&quot; from: &quot;</span> &lt;&lt; *I &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;        <span class="comment">// Add operands to the worklist.</span></div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;        ReplaceInstUsesWith(*I, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;        ++NumConstProp;</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;        EraseInstFromFunction(*I);</div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;        MadeIRChange = <span class="keyword">true</span>;</div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;      }</div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;    <span class="comment">// See if we can trivially sink this instruction to a successor basic block.</span></div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;    <span class="keywordflow">if</span> (I-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()) {</div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *UserInst = cast&lt;Instruction&gt;(I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a5ac211f24970dea81fa9a7118a8ce36b">use_back</a>());</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *UserParent;</div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;      <span class="comment">// Get the block the use occurs in.</span></div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(UserInst))</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;        UserParent = PN-&gt;getIncomingBlock(I-&gt;<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>().<a class="code" href="classllvm_1_1value__use__iterator.html#a94ea49d6aa255c31746f4f2b8cbf4443">getUse</a>());</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;        UserParent = UserInst-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;</div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;      <span class="keywordflow">if</span> (UserParent != BB) {</div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;        <span class="keywordtype">bool</span> UserIsSuccessor = <span class="keyword">false</span>;</div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;        <span class="comment">// See if the user is one of our successors.</span></div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SuccIterator.html">succ_iterator</a> SI = <a class="code" href="namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">succ_begin</a>(BB), E = <a class="code" href="namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">succ_end</a>(BB); SI != E; ++SI)</div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;          <span class="keywordflow">if</span> (*SI == UserParent) {</div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;            UserIsSuccessor = <span class="keyword">true</span>;</div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;          }</div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;        <span class="comment">// If the user is one of our immediate successors, and if that successor</span></div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;        <span class="comment">// only has us as a predecessors (we&#39;d have to split the critical edge</span></div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;        <span class="comment">// otherwise), we can keep going.</span></div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;        <span class="keywordflow">if</span> (UserIsSuccessor &amp;&amp; UserParent-&gt;getSinglePredecessor())</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;          <span class="comment">// Okay, the CFG is simple enough, try to sink this instruction.</span></div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;          MadeIRChange |= <a class="code" href="InstructionCombining_8cpp.html#a1ea2b997ffc11a09339f80ef8287c8d5">TryToSinkInstruction</a>(I, UserParent);</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;      }</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;    }</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;    <span class="comment">// Now that we have an instruction, try combining it to simplify it.</span></div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;    Builder-&gt;SetInsertPoint(I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>(), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;    Builder-&gt;SetCurrentDebugLocation(I-&gt;<a class="code" href="classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">getDebugLoc</a>());</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;    std::string OrigI;</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="classllvm_1_1raw__string__ostream.html">raw_string_ostream</a> SS(OrigI); I-&gt;<a class="code" href="classllvm_1_1Value.html#a8684e39c1b3c53d525b96996b5b771ed">print</a>(SS); OrigI = SS.str(););</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;IC: Visiting: &quot;</span> &lt;&lt; OrigI &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Result = visit(*I)) {</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;      ++NumCombined;</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;      <span class="comment">// Should we replace the old instruction with a new one?</span></div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;      <span class="keywordflow">if</span> (Result != I) {</div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;IC: Old = &quot;</span> &lt;&lt; *I &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;                     &lt;&lt; <span class="stringliteral">&quot;    New = &quot;</span> &lt;&lt; *Result &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;        <span class="keywordflow">if</span> (!I-&gt;<a class="code" href="classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">getDebugLoc</a>().<a class="code" href="classllvm_1_1DebugLoc.html#acb015270a969bc45af93da5d0ad45ba7">isUnknown</a>())</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;          Result-&gt;setDebugLoc(I-&gt;<a class="code" href="classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">getDebugLoc</a>());</div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;        <span class="comment">// Everything uses the new instruction now.</span></div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;        I-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(Result);</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;        <span class="comment">// Move the name to the new instruction first.</span></div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;        Result-&gt;takeName(I);</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;        <span class="comment">// Push the new instruction and any users onto the worklist.</span></div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;        Worklist.Add(Result);</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;        Worklist.AddUsersToWorkList(*Result);</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;        <span class="comment">// Insert the new instruction into the basic block...</span></div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;        <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InstParent = I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;        <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> InsertPos = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;        <span class="comment">// If we replace a PHI with something that isn&#39;t a PHI, fix up the</span></div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;        <span class="comment">// insertion point.</span></div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;        <span class="keywordflow">if</span> (!isa&lt;PHINode&gt;(Result) &amp;&amp; isa&lt;PHINode&gt;(InsertPos))</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;          InsertPos = InstParent-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ab1cd5a3713b93a33f89a2086d473cf6e">getFirstInsertionPt</a>();</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;        InstParent-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a531d11ba36ed48d86057d507cc8d5567">getInstList</a>().<a class="code" href="classllvm_1_1iplist.html#a35c71de7e8bbe3c0353d042beb58263f">insert</a>(InsertPos, Result);</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;        EraseInstFromFunction(*I);</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;IC: Mod = &quot;</span> &lt;&lt; OrigI &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;                     &lt;&lt; <span class="stringliteral">&quot;    New = &quot;</span> &lt;&lt; *I &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;        <span class="comment">// If the instruction was modified, it&#39;s possible that it is now dead.</span></div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;        <span class="comment">// if so, remove it.</span></div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#abe283966f269761ee387642061c4451e">isInstructionTriviallyDead</a>(I, TLI)) {</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;          EraseInstFromFunction(*I);</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;          Worklist.Add(I);</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;          Worklist.AddUsersToWorkList(*I);</div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;        }</div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;      }</div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;      MadeIRChange = <span class="keyword">true</span>;</div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;    }</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;  }</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;  Worklist.Zap();</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;  <span class="keywordflow">return</span> MadeIRChange;</div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;}</div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;<span class="keyword">class </span>InstCombinerLibCallSimplifier : <span class="keyword">public</span> <a class="code" href="classllvm_1_1LibCallSimplifier.html">LibCallSimplifier</a> {</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;  <a class="code" href="classllvm_1_1InstCombiner.html">InstCombiner</a> *IC;</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;  InstCombinerLibCallSimplifier(<span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> *TD,</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;                                <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI,</div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;                                <a class="code" href="classllvm_1_1InstCombiner.html">InstCombiner</a> *IC)</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;    : <a class="code" href="classllvm_1_1LibCallSimplifier.html">LibCallSimplifier</a>(TD, TLI, <a class="code" href="InstructionCombining_8cpp.html#a85b6b7c082723d74f04ac701c91daa47">UnsafeFPShrink</a>) {</div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;    this-&gt;IC = IC;</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;  }</div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;<span class="comment">  /// replaceAllUsesWith - override so that instruction replacement</span></div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;<span class="comment">  /// can be defined in terms of the instruction combiner framework.</span></div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;<span class="comment"></span>  <span class="keyword">virtual</span> <span class="keywordtype">void</span> replaceAllUsesWith(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I, <a class="code" href="classllvm_1_1Value.html">Value</a> *With)<span class="keyword"> const </span>{</div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;    IC-&gt;<a class="code" href="classllvm_1_1InstCombiner.html#af7c1b579548e5b90a8db22d2f26a4afc">ReplaceInstUsesWith</a>(*I, With);</div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;  }</div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;};</div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;}</div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;</div><div class="line"><a name="l02500"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#a063885bf217077cd1f83f9a418086a87"> 2500</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1InstCombiner.html#a063885bf217077cd1f83f9a418086a87">InstCombiner::runOnFunction</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>) {</div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;  TD = getAnalysisIfAvailable&lt;DataLayout&gt;();</div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;  TLI = &amp;getAnalysis&lt;TargetLibraryInfo&gt;();</div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;  <span class="comment">// Minimizing size?</span></div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;  MinimizeSize = F.<a class="code" href="classllvm_1_1Function.html#a72873ed64b7be01507a2248b8e756ec8">getAttributes</a>().<a class="code" href="classllvm_1_1AttributeSet.html#a54abbe67d4a53c92652f1666dc19281f">hasAttribute</a>(AttributeSet::FunctionIndex,</div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;                                                <a class="code" href="classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60ea490ee0eef953b867ec5f39859c6a03bf">Attribute::MinSize</a>);</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;<span class="comment">  /// Builder - This is an IRBuilder that automatically inserts new</span></div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;<span class="comment">  /// instructions into the worklist when they are created.</span></div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;true, TargetFolder, InstCombineIRInserter&gt;</a></div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;    TheBuilder(F.<a class="code" href="classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">getContext</a>(), <a class="code" href="classllvm_1_1TargetFolder.html">TargetFolder</a>(TD),</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;               <a class="code" href="classllvm_1_1InstCombineIRInserter.html">InstCombineIRInserter</a>(Worklist));</div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;  Builder = &amp;TheBuilder;</div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;  InstCombinerLibCallSimplifier TheSimplifier(TD, TLI, <span class="keyword">this</span>);</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;  Simplifier = &amp;TheSimplifier;</div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;</div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;  <span class="keywordtype">bool</span> EverMadeChange = <span class="keyword">false</span>;</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;</div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;  <span class="comment">// Lower dbg.declare intrinsics otherwise their value may be clobbered</span></div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;  <span class="comment">// by instcombiner.</span></div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;  EverMadeChange = <a class="code" href="namespacellvm.html#a7994fd7ca0d8f8fcf2a9d18d151d0988">LowerDbgDeclare</a>(F);</div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;</div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;  <span class="comment">// Iterate while there is work to do.</span></div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;  <span class="keywordtype">unsigned</span> Iteration = 0;</div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;  <span class="keywordflow">while</span> (DoOneIteration(F, Iteration++))</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;    EverMadeChange = <span class="keyword">true</span>;</div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;</div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;  Builder = 0;</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;  <span class="keywordflow">return</span> EverMadeChange;</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;}</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;</div><div class="line"><a name="l02532"></a><span class="lineno"><a class="line" href="namespacellvm.html#a195c85317ba5f5262812d33289c7a2b3"> 2532</a></span>&#160;<a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a> *<a class="code" href="namespacellvm.html#a195c85317ba5f5262812d33289c7a2b3">llvm::createInstructionCombiningPass</a>() {</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1InstCombiner.html">InstCombiner</a>();</div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;}</div><div class="ttc" id="classllvm_1_1ConstantDataVector_html"><div class="ttname"><a href="classllvm_1_1ConstantDataVector.html">llvm::ConstantDataVector</a></div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00697">Constants.h:697</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00127">SmallVector.h:127</a></div></div>
<div class="ttc" id="classllvm_1_1LibCallSimplifier_html"><div class="ttname"><a href="classllvm_1_1LibCallSimplifier.html">llvm::LibCallSimplifier</a></div><div class="ttdef"><b>Definition:</b> <a href="SimplifyLibCalls_8h_source.html#l00029">SimplifyLibCalls.h:29</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00236">SmallVector.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad86469939d2a8bdd4169be9403b89f5a"><div class="ttname"><a href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">llvm::Value::use_end</a></div><div class="ttdeci">use_iterator use_end()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00152">Value.h:152</a></div></div>
<div class="ttc" id="namespacellvm_html_a455d82c49557ac1d6c8da8e8d86a94b5"><div class="ttname"><a href="namespacellvm.html#a455d82c49557ac1d6c8da8e8d86a94b5">llvm::isAllocationFn</a></div><div class="ttdeci">bool isAllocationFn(const Value *V, const TargetLibraryInfo *TLI, bool LookThroughBitCast=false)</div><div class="ttdoc">Tests if a value is a call or invoke to a library function that allocates or reallocates memory (eith...</div><div class="ttdef"><b>Definition:</b> <a href="MemoryBuiltins_8cpp_source.html#l00150">MemoryBuiltins.cpp:150</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90aa332b90dd5e4ebf4bbbcc0964220d373"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aa332b90dd5e4ebf4bbbcc0964220d373">llvm::Intrinsic::lifetime_end</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l01254">Intrinsics.h:1254</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html"><div class="ttname"><a href="classllvm_1_1DataLayout.html">llvm::DataLayout</a></div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00098">DataLayout.h:98</a></div></div>
<div class="ttc" id="classllvm_1_1CastInst_html_adc3489e61d5f37a0e4c5589859fbccc2"><div class="ttname"><a href="classllvm_1_1CastInst.html#adc3489e61d5f37a0e4c5589859fbccc2">llvm::CastInst::getOpcode</a></div><div class="ttdeci">Instruction::CastOps getOpcode() const </div><div class="ttdoc">Return the opcode of this CastInst. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00603">InstrTypes.h:603</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a24bca8838396aa81b87de8e7ac774b19"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">llvm::PatternMatch::m_Value</a></div><div class="ttdeci">class_match&lt; Value &gt; m_Value()</div><div class="ttdoc">m_Value() - Match an arbitrary value and ignore it. </div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00070">PatternMatch.h:70</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html_a21ce697328893029ae2c63974061a294"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a21ce697328893029ae2c63974061a294">llvm::BinaryOperator::setHasNoSignedWrap</a></div><div class="ttdeci">void setHasNoSignedWrap(bool b=true)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l02001">Instructions.cpp:2001</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_a219f2a3514d904d05dc8003a4ee5d291"><div class="ttname"><a href="classllvm_1_1SwitchInst.html#a219f2a3514d904d05dc8003a4ee5d291">llvm::SwitchInst::case_end</a></div><div class="ttdeci">CaseIt case_end()</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02640">Instructions.h:2640</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html"><div class="ttname"><a href="classllvm_1_1CmpInst.html">llvm::CmpInst</a></div><div class="ttdoc">Abstract base class of comparison instructions. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00633">InstrTypes.h:633</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a8aca9237e5fbd3b1028d8fe92b5a74ee"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a8aca9237e5fbd3b1028d8fe92b5a74ee">llvm::IRBuilder::CreateCast</a></div><div class="ttdeci">Value * CreateCast(Instruction::CastOps Op, Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01164">IRBuilder.h:1164</a></div></div>
<div class="ttc" id="namespacellvm_1_1ARM__PROC_html_aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5"><div class="ttname"><a href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">llvm::ARM_PROC::A</a></div><div class="ttdef"><b>Definition:</b> <a href="ARMBaseInfo_8h_source.html#l00098">ARMBaseInfo.h:98</a></div></div>
<div class="ttc" id="namespacellvm_html_af78c2ae339b228fa6be74a95c1812783"><div class="ttname"><a href="namespacellvm.html#af78c2ae339b228fa6be74a95c1812783">llvm::initializeInstCombinerPass</a></div><div class="ttdeci">void initializeInstCombinerPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a5ca8aa62fa8b3fe5bc0e8fbe5d8b8b7a"><div class="ttname"><a href="classllvm_1_1Instruction.html#a5ca8aa62fa8b3fe5bc0e8fbe5d8b8b7a">llvm::Instruction::setFastMathFlags</a></div><div class="ttdeci">void setFastMathFlags(FastMathFlags FMF)</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00137">Instruction.cpp:137</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_aa75984a442f2379de0c66018201fa628"><div class="ttname"><a href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">llvm::Type::getInt1Ty</a></div><div class="ttdeci">static IntegerType * getInt1Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00238">Type.cpp:238</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a4786e64977a3af38f29adee46b70a863"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a4786e64977a3af38f29adee46b70a863">llvm::SmallVectorImpl::reserve</a></div><div class="ttdeci">void reserve(unsigned N)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00425">SmallVector.h:425</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a089cccb6f231efee72abc76d0f9c695f"><div class="ttname"><a href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">llvm::PHINode::addIncoming</a></div><div class="ttdeci">void addIncoming(Value *V, BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02100">Instructions.h:2100</a></div></div>
<div class="ttc" id="classllvm_1_1ExtractValueInst_html"><div class="ttname"><a href="classllvm_1_1ExtractValueInst.html">llvm::ExtractValueInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01740">Instructions.h:1740</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a2da53ac53516a3f16191f4c8a8eaa3e5"><div class="ttname"><a href="classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">llvm::Function::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00167">Function.cpp:167</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a6fe2f06b8a4b2c3d6308afb223a0238a"><div class="ttname"><a href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00072">Instruction.cpp:72</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html_a27e3026c3e49895d18e9a1b3cb507fee"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a27e3026c3e49895d18e9a1b3cb507fee">llvm::BinaryOperator::getFNegArgument</a></div><div class="ttdeci">static const Value * getFNegArgument(const Value *BinOp)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l01965">Instructions.cpp:1965</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a495d91fb3d2662acbffd0162c56153ed"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a495d91fb3d2662acbffd0162c56153ed">llvm::IRBuilder::CreateICmp</a></div><div class="ttdeci">Value * CreateICmp(CmpInst::Predicate P, Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01280">IRBuilder.h:1280</a></div></div>
<div class="ttc" id="group__LLVMCInitialization_html_gaf7d731d72d80afb7917f7cd548da8298"><div class="ttname"><a href="group__LLVMCInitialization.html#gaf7d731d72d80afb7917f7cd548da8298">LLVMInitializeInstCombine</a></div><div class="ttdeci">void LLVMInitializeInstCombine(LLVMPassRegistryRef R)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l00079">InstructionCombining.cpp:79</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html_a89471513a05fad4bbef69ec411b2586d"><div class="ttname"><a href="classllvm_1_1StoreInst.html#a89471513a05fad4bbef69ec411b2586d">llvm::StoreInst::isVolatile</a></div><div class="ttdeci">bool isVolatile() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00287">Instructions.h:287</a></div></div>
<div class="ttc" id="InstructionCombining_8cpp_html_a7b411f919e9298c8e86fae1794c3fcec"><div class="ttname"><a href="InstructionCombining_8cpp.html#a7b411f919e9298c8e86fae1794c3fcec">Personality_Type</a></div><div class="ttdeci">Personality_Type</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l01830">InstructionCombining.cpp:1830</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a6550fe5bd437c1c3c6e237d726e36b90"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a6550fe5bd437c1c3c6e237d726e36b90">llvm::BranchInst::swapSuccessors</a></div><div class="ttdeci">void swapSuccessors()</div><div class="ttdoc">Swap the successors of this branch instruction. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l00786">Instructions.cpp:786</a></div></div>
<div class="ttc" id="namespacellvm_html_a1d0ac37acc2482f8794195f5042b61b5acd12d6cf678f7504ca49c922fb16ce01"><div class="ttname"><a href="namespacellvm.html#a1d0ac37acc2482f8794195f5042b61b5acd12d6cf678f7504ca49c922fb16ce01">llvm::None</a></div><div class="ttdef"><b>Definition:</b> <a href="None_8h_source.html#l00023">None.h:23</a></div></div>
<div class="ttc" id="classllvm_1_1MemIntrinsic_html_a9558faebdbb62c072aed98e33604889d"><div class="ttname"><a href="classllvm_1_1MemIntrinsic.html#a9558faebdbb62c072aed98e33604889d">llvm::MemIntrinsic::isVolatile</a></div><div class="ttdeci">bool isVolatile() const </div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00134">IntrinsicInst.h:134</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_ad979b3c1bc975ee23810e3018ffe951b"><div class="ttname"><a href="classllvm_1_1Type.html#ad979b3c1bc975ee23810e3018ffe951b">llvm::Type::getScalarSizeInBits</a></div><div class="ttdeci">unsigned getScalarSizeInBits()</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00135">Type.cpp:135</a></div></div>
<div class="ttc" id="InstructionCombining_8cpp_html_a7b411f919e9298c8e86fae1794c3fcecaaeef37b5503975660ff3cb350bc5b162"><div class="ttname"><a href="InstructionCombining_8cpp.html#a7b411f919e9298c8e86fae1794c3fcecaaeef37b5503975660ff3cb350bc5b162">GNU_ObjC_Personality</a></div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l01834">InstructionCombining.cpp:1834</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html"><div class="ttname"><a href="classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">The main container class for the LLVM Intermediate Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00112">Module.h:112</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_ae4ca2261b8b901e415fda7feac5051ea"><div class="ttname"><a href="classllvm_1_1Function.html#ae4ca2261b8b901e415fda7feac5051ea">llvm::Function::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00397">Function.h:397</a></div></div>
<div class="ttc" id="InstructionCombining_8cpp_html_a4904699fe3329a5027ccd76991b0c1e4"><div class="ttname"><a href="InstructionCombining_8cpp.html#a4904699fe3329a5027ccd76991b0c1e4">ClearSubclassDataAfterReassociation</a></div><div class="ttdeci">static void ClearSubclassDataAfterReassociation(BinaryOperator &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l00168">InstructionCombining.cpp:168</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_ab3b5beca3a0dedd21adac813123a2ae6"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ab3b5beca3a0dedd21adac813123a2ae6">llvm::PatternMatch::m_Zero</a></div><div class="ttdeci">match_zero m_Zero()</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00137">PatternMatch.h:137</a></div></div>
<div class="ttc" id="InstCombine_8h_html"><div class="ttname"><a href="InstCombine_8h.html">InstCombine.h</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html_a8bce457e977f23507c48c9dfd7052990"><div class="ttname"><a href="classllvm_1_1SelectInst.html#a8bce457e977f23507c48c9dfd7052990">llvm::SelectInst::Create</a></div><div class="ttdeci">static SelectInst * Create(Value *C, Value *S1, Value *S2, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01455">Instructions.h:1455</a></div></div>
<div class="ttc" id="IntrinsicInst_8h_html"><div class="ttname"><a href="IntrinsicInst_8h.html">IntrinsicInst.h</a></div></div>
<div class="ttc" id="namespacellvm_html_a3f2f98c2a67c9e79f58aad9150a62e42"><div class="ttname"><a href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">llvm::dyn_cast</a></div><div class="ttdeci">enable_if_c&lt;!is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="Casting_8h_source.html#l00266">Casting.h:266</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a2f81e0c1fc6554df7ad2eafabf5fc5a5"><div class="ttname"><a href="classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">llvm::User::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00108">User.h:108</a></div></div>
<div class="ttc" id="classllvm_1_1OverflowingBinaryOperator_html_a5a1ebefdf12a23a94f8a135cdfa0cd90"><div class="ttname"><a href="classllvm_1_1OverflowingBinaryOperator.html#a5a1ebefdf12a23a94f8a135cdfa0cd90">llvm::OverflowingBinaryOperator::hasNoSignedWrap</a></div><div class="ttdeci">bool hasNoSignedWrap() const </div><div class="ttdef"><b>Definition:</b> <a href="Operator_8h_source.html#l00107">Operator.h:107</a></div></div>
<div class="ttc" id="DataLayout_8h_html"><div class="ttname"><a href="DataLayout_8h.html">DataLayout.h</a></div></div>
<div class="ttc" id="classllvm_1_1GetElementPtrInst_html_a7a3407da7842ed0cff1dc06fd59d6d54"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html#a7a3407da7842ed0cff1dc06fd59d6d54">llvm::GetElementPtrInst::getPointerAddressSpace</a></div><div class="ttdeci">unsigned getPointerAddressSpace() const </div><div class="ttdoc">Returns the address space of the pointer operand. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00807">Instructions.h:807</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00534">DenseMap.h:534</a></div></div>
<div class="ttc" id="InstructionCombining_8cpp_html_a3475a57398d86c1748bdd006dfc0c4f3"><div class="ttname"><a href="InstructionCombining_8cpp.html#a3475a57398d86c1748bdd006dfc0c4f3">INITIALIZE_PASS_BEGIN</a></div><div class="ttdeci">INITIALIZE_PASS_BEGIN(InstCombiner,&quot;instcombine&quot;,&quot;Combine redundant instructions&quot;, false, false) INITIALIZE_PASS_END(InstCombiner</div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a1de3bd08ca83d6b976d4c8deacbf5e71"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a1de3bd08ca83d6b976d4c8deacbf5e71">llvm::PatternMatch::m_UnconditionalBr</a></div><div class="ttdeci">br_match m_UnconditionalBr(BasicBlock *&amp;Succ)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00814">PatternMatch.h:814</a></div></div>
<div class="ttc" id="classllvm_1_1Registry_html"><div class="ttname"><a href="classllvm_1_1Registry.html">llvm::Registry</a></div><div class="ttdef"><b>Definition:</b> <a href="Registry_8h_source.html#l00058">Registry.h:58</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01978">Instructions.h:1978</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a534c8dc56785061e35fb476480d11a3d"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a534c8dc56785061e35fb476480d11a3d">llvm::Intrinsic::smul_with_overflow</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02436">Intrinsics.h:2436</a></div></div>
<div class="ttc" id="Debug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html"><div class="ttname"><a href="classllvm_1_1CallInst.html">llvm::CallInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01161">Instructions.h:1161</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_a3a76669632041022e6976766a22bd2b0"><div class="ttname"><a href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a></div><div class="ttdeci">return j(j&lt;&lt; 16)</div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a3c76890714593c78e3b5d142c9030548"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a3c76890714593c78e3b5d142c9030548">llvm::CmpInst::getInversePredicate</a></div><div class="ttdeci">Predicate getInversePredicate() const </div><div class="ttdoc">Return the inverse of the instruction&amp;#39;s predicate. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00737">InstrTypes.h:737</a></div></div>
<div class="ttc" id="namespacellvm_html_a87a909169e4e5de59bb72705c1d7d026"><div class="ttname"><a href="namespacellvm.html#a87a909169e4e5de59bb72705c1d7d026">llvm::EmitGEPOffset</a></div><div class="ttdeci">Value * EmitGEPOffset(IRBuilderTy *Builder, const DataLayout &amp;TD, User *GEP, bool NoAssumptions=false)</div><div class="ttdef"><b>Definition:</b> <a href="Local_8h_source.html#l00187">Local.h:187</a></div></div>
<div class="ttc" id="namespacellvm_html_a43c6ebb4fd35ebd815d66a2df4eed0b9"><div class="ttname"><a href="namespacellvm.html#a43c6ebb4fd35ebd815d66a2df4eed0b9">llvm::gep_type_end</a></div><div class="ttdeci">gep_type_iterator gep_type_end(const User *GEP)</div><div class="ttdef"><b>Definition:</b> <a href="GetElementPtrTypeIterator_8h_source.html#l00089">GetElementPtrTypeIterator.h:89</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_ae69c15ce940c41719cb96209e113a26e"><div class="ttname"><a href="classllvm_1_1SwitchInst.html#ae69c15ce940c41719cb96209e113a26e">llvm::SwitchInst::case_begin</a></div><div class="ttdeci">CaseIt case_begin()</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02629">Instructions.h:2629</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05ad92f160316221fd4090520bb2b3cefc5"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ad92f160316221fd4090520bb2b3cefc5">llvm::CmpInst::ICMP_ULE</a></div><div class="ttdoc">unsigned less or equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00677">InstrTypes.h:677</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html_a9b6dd0fc7a648a939e571246045b673e"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html#a9b6dd0fc7a648a939e571246045b673e">llvm::SmallPtrSet::insert</a></div><div class="ttdeci">bool insert(PtrType Ptr)</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00253">SmallPtrSet.h:253</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a573063aad4c101462893d0490d867524"><div class="ttname"><a href="classllvm_1_1Instruction.html#a573063aad4c101462893d0490d867524">llvm::Instruction::mayHaveSideEffects</a></div><div class="ttdeci">bool mayHaveSideEffects() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00324">Instruction.h:324</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a4010b27bb068167801ff99622ea92907"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a4010b27bb068167801ff99622ea92907">llvm::Intrinsic::uadd_with_overflow</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02445">Intrinsics.h:2445</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a24187c2e178af0df22dac26cd5229294"><div class="ttname"><a href="classllvm_1_1APInt.html#a24187c2e178af0df22dac26cd5229294">llvm::APInt::sdivrem</a></div><div class="ttdeci">static void sdivrem(const APInt &amp;LHS, const APInt &amp;RHS, APInt &amp;Quotient, APInt &amp;Remainder)</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l01978">APInt.cpp:1978</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_ac830a02a025d9d5a5dc53c444cf625ee"><div class="ttname"><a href="classllvm_1_1Type.html#ac830a02a025d9d5a5dc53c444cf625ee">llvm::Type::isPtrOrPtrVectorTy</a></div><div class="ttdeci">bool isPtrOrPtrVectorTy() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00225">Type.h:225</a></div></div>
<div class="ttc" id="InstructionCombining_8cpp_html_aaeaff568610aa9560be815db546329dc"><div class="ttname"><a href="InstructionCombining_8cpp.html#aaeaff568610aa9560be815db546329dc">RightDistributesOverLeft</a></div><div class="ttdeci">static bool RightDistributesOverLeft(Instruction::BinaryOps LOp, Instruction::BinaryOps ROp)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l00381">InstructionCombining.cpp:381</a></div></div>
<div class="ttc" id="classllvm_1_1ICmpInst_html_abe8988eef2e6fc2baba032cb22afedd7"><div class="ttname"><a href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">llvm::ICmpInst::isEquality</a></div><div class="ttdeci">static bool isEquality(Predicate P)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00997">Instructions.h:997</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_ace8e61a4dcf2a13945cdde73a3a6805a"><div class="ttname"><a href="classllvm_1_1Instruction.html#ace8e61a4dcf2a13945cdde73a3a6805a">llvm::Instruction::getFastMathFlags</a></div><div class="ttdeci">FastMathFlags getFastMathFlags() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00175">Instruction.cpp:175</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_aca229503e4f5c83a187a6a921c625fa8"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">llvm::BasicBlock::getParent</a></div><div class="ttdeci">const Function * getParent() const </div><div class="ttdoc">Return the enclosing method, or null if none. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00116">BasicBlock.h:116</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a063885bf217077cd1f83f9a418086a87"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a063885bf217077cd1f83f9a418086a87">llvm::InstCombiner::runOnFunction</a></div><div class="ttdeci">virtual bool runOnFunction(Function &amp;F)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l02500">InstructionCombining.cpp:2500</a></div></div>
<div class="ttc" id="LLParser_8cpp_html_a33ece1ef8074506a15d7f86eb76dbae6"><div class="ttname"><a href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a></div><div class="ttdeci">F(f)</div></div>
<div class="ttc" id="classllvm_1_1ExtractValueInst_html_a8e7f8107cfcd8c4f169185e70a3d64ff"><div class="ttname"><a href="classllvm_1_1ExtractValueInst.html#a8e7f8107cfcd8c4f169185e70a3d64ff">llvm::ExtractValueInst::Create</a></div><div class="ttdeci">static ExtractValueInst * Create(Value *Agg, ArrayRef&lt; unsigned &gt; Idxs, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01766">Instructions.h:1766</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00070">Function.h:70</a></div></div>
<div class="ttc" id="classllvm_1_1PointerType_html_a921061a57ec3cfbaf6422f09f7d79fc3"><div class="ttname"><a href="classllvm_1_1PointerType.html#a921061a57ec3cfbaf6422f09f7d79fc3">llvm::PointerType::getAddressSpace</a></div><div class="ttdeci">unsigned getAddressSpace() const </div><div class="ttdoc">Return the address space of the Pointer type. </div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00445">DerivedTypes.h:445</a></div></div>
<div class="ttc" id="namespacellvm_html_a8f52f7baf3c7cf6519b12ca5ea8c6690"><div class="ttname"><a href="namespacellvm.html#a8f52f7baf3c7cf6519b12ca5ea8c6690">llvm::unwrap</a></div><div class="ttdeci">LLVMContext ** unwrap(LLVMContextRef *Tys)</div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00119">LLVMContext.h:119</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html"><div class="ttname"><a href="classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00136">Instructions.h:136</a></div></div>
<div class="ttc" id="InstructionSimplify_8h_html"><div class="ttname"><a href="InstructionSimplify_8h.html">InstructionSimplify.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_ac015f68d60ea67a2e31bc10bc720d3e8"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#ac015f68d60ea67a2e31bc10bc720d3e8">llvm::Intrinsic::getType</a></div><div class="ttdeci">FunctionType * getType(LLVMContext &amp;Context, ID id, ArrayRef&lt; Type * &gt; Tys=None)</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00657">Function.cpp:657</a></div></div>
<div class="ttc" id="classllvm_1_1User_html"><div class="ttname"><a href="classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00033">User.h:33</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_a554ab77949b0a16670a83ec3307501eb"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a554ab77949b0a16670a83ec3307501eb">llvm::ConstantExpr::getSub</a></div><div class="ttdeci">static Constant * getSub(Constant *C1, Constant *C2, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02051">Constants.cpp:2051</a></div></div>
<div class="ttc" id="IVUsers_8cpp_html_a4e5b9edb51eec9dbca592075eb64dfcb"><div class="ttname"><a href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a></div><div class="ttdeci">iv Induction Variable Users</div><div class="ttdef"><b>Definition:</b> <a href="IVUsers_8cpp_source.html#l00039">IVUsers.cpp:39</a></div></div>
<div class="ttc" id="classllvm_1_1AttributeSet_html_a54abbe67d4a53c92652f1666dc19281f"><div class="ttname"><a href="classllvm_1_1AttributeSet.html#a54abbe67d4a53c92652f1666dc19281f">llvm::AttributeSet::hasAttribute</a></div><div class="ttdeci">bool hasAttribute(unsigned Index, Attribute::AttrKind Kind) const </div><div class="ttdoc">Return true if the attribute exists at the given index. </div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l00818">Attributes.cpp:818</a></div></div>
<div class="ttc" id="Statistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="classllvm_1_1StringSwitch_html_a043081d818ac1bce1f866ec6c4b4b43c"><div class="ttname"><a href="classllvm_1_1StringSwitch.html#a043081d818ac1bce1f866ec6c4b4b43c">llvm::StringSwitch::Case</a></div><div class="ttdeci">StringSwitch &amp; Case(const char(&amp;S)[N], const T &amp;Value)</div><div class="ttdef"><b>Definition:</b> <a href="StringSwitch_8h_source.html#l00055">StringSwitch.h:55</a></div></div>
<div class="ttc" id="classllvm_1_1LandingPadInst_html_a7e36bd4ab20bc5b099513596126ff236"><div class="ttname"><a href="classllvm_1_1LandingPadInst.html#a7e36bd4ab20bc5b099513596126ff236">llvm::LandingPadInst::getPersonalityFn</a></div><div class="ttdeci">Value * getPersonalityFn() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02219">Instructions.h:2219</a></div></div>
<div class="ttc" id="InstructionCombining_8cpp_html_ad6b4395aa43cd570081d8ef779730d81"><div class="ttname"><a href="InstructionCombining_8cpp.html#ad6b4395aa43cd570081d8ef779730d81">MaintainNoSignedWrap</a></div><div class="ttdeci">static bool MaintainNoSignedWrap(BinaryOperator &amp;I, Value *B, Value *C)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l00132">InstructionCombining.cpp:132</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90ab20709bfc1ed1765cd3b43f69bf11edc"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ab20709bfc1ed1765cd3b43f69bf11edc">llvm::Intrinsic::memcpy</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l01260">Intrinsics.h:1260</a></div></div>
<div class="ttc" id="classllvm_1_1GetElementPtrInst_html_acdc6505f15f589324fce8b59cc2cb8a2"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html#acdc6505f15f589324fce8b59cc2cb8a2">llvm::GetElementPtrInst::getNumIndices</a></div><div class="ttdeci">unsigned getNumIndices() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00827">Instructions.h:827</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a2eeb1c7ed1cfe403f2ae0470e36c07e2"><div class="ttname"><a href="classllvm_1_1User.html#a2eeb1c7ed1cfe403f2ae0470e36c07e2">llvm::User::op_begin</a></div><div class="ttdeci">op_iterator op_begin()</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00116">User.h:116</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a5d92067295d524ee8086167bddc6de66"><div class="ttname"><a href="classllvm_1_1APInt.html#a5d92067295d524ee8086167bddc6de66">llvm::APInt::ssub_ov</a></div><div class="ttdeci">APInt ssub_ov(const APInt &amp;RHS, bool &amp;Overflow) const </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l02009">APInt.cpp:2009</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00109">CommandLine.h:109</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a5c09d927a0079ad16e8367271efe9bc2"><div class="ttname"><a href="classllvm_1_1Type.html#a5c09d927a0079ad16e8367271efe9bc2">llvm::Type::getPointerElementType</a></div><div class="ttdeci">Type * getPointerElementType() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00373">Type.h:373</a></div></div>
<div class="ttc" id="namespacellvm_html_a42a9f1e04ad580b344123c15dbb29d39"><div class="ttname"><a href="namespacellvm.html#a42a9f1e04ad580b344123c15dbb29d39">llvm::isFreeCall</a></div><div class="ttdeci">const CallInst * isFreeCall(const Value *I, const TargetLibraryInfo *TLI)</div><div class="ttdoc">isFreeCall - Returns non-null if the value is a call to the builtin free() </div><div class="ttdef"><b>Definition:</b> <a href="MemoryBuiltins_8cpp_source.html#l00316">MemoryBuiltins.cpp:316</a></div></div>
<div class="ttc" id="classllvm_1_1ExtractValueInst_html_a44c87e8da8c79e2fdb74e4feef0b9ad6"><div class="ttname"><a href="classllvm_1_1ExtractValueInst.html#a44c87e8da8c79e2fdb74e4feef0b9ad6">llvm::ExtractValueInst::hasIndices</a></div><div class="ttdeci">bool hasIndices() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01808">Instructions.h:1808</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_aa6574d526b3e38a28f688a7bb4325c2c"><div class="ttname"><a href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">llvm::Constant::getNullValue</a></div><div class="ttdeci">static Constant * getNullValue(Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00111">Constants.cpp:111</a></div></div>
<div class="ttc" id="classllvm_1_1generic__gep__type__iterator_html"><div class="ttname"><a href="classllvm_1_1generic__gep__type__iterator.html">llvm::generic_gep_type_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="GetElementPtrTypeIterator_8h_source.html#l00023">GetElementPtrTypeIterator.h:23</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00167">Value.cpp:167</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00193">BasicBlock.h:193</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html_a80cc7c4bd4a37fc13e9765fd3a31dbfe"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a80cc7c4bd4a37fc13e9765fd3a31dbfe">llvm::BinaryOperator::swapOperands</a></div><div class="ttdeci">bool swapOperands()</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l01990">Instructions.cpp:1990</a></div></div>
<div class="ttc" id="classllvm_1_1ExtractValueInst_html_aabcc9d0c7c5b68bf66032d1c1c1aa4dd"><div class="ttname"><a href="classllvm_1_1ExtractValueInst.html#aabcc9d0c7c5b68bf66032d1c1c1aa4dd">llvm::ExtractValueInst::getIndices</a></div><div class="ttdeci">ArrayRef&lt; unsigned &gt; getIndices() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01800">Instructions.h:1800</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a25d956d9e0beadd47ce4bc255dfa811d"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">llvm::PatternMatch::match</a></div><div class="ttdeci">bool match(Val *V, const Pattern &amp;P)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00042">PatternMatch.h:42</a></div></div>
<div class="ttc" id="classllvm_1_1DebugLoc_html_acb015270a969bc45af93da5d0ad45ba7"><div class="ttname"><a href="classllvm_1_1DebugLoc.html#acb015270a969bc45af93da5d0ad45ba7">llvm::DebugLoc::isUnknown</a></div><div class="ttdeci">bool isUnknown() const </div><div class="ttdoc">isUnknown - Return true if this is an unknown location. </div><div class="ttdef"><b>Definition:</b> <a href="DebugLoc_8h_source.html#l00070">DebugLoc.h:70</a></div></div>
<div class="ttc" id="classllvm_1_1StructLayout_html"><div class="ttname"><a href="classllvm_1_1StructLayout.html">llvm::StructLayout</a></div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00418">DataLayout.h:418</a></div></div>
<div class="ttc" id="PassSupport_8h_html_a14724f1ccf528e73bb29bc9230737967"><div class="ttname"><a href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a></div><div class="ttdeci">#define INITIALIZE_PASS_DEPENDENCY(depName)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00167">PassSupport.h:167</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html_a983e52a82d604057b45a59101a7ef257"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a983e52a82d604057b45a59101a7ef257">llvm::BinaryOperator::getNegArgument</a></div><div class="ttdeci">static const Value * getNegArgument(const Value *BinOp)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l01957">Instructions.cpp:1957</a></div></div>
<div class="ttc" id="InstructionCombining_8cpp_html_a7b411f919e9298c8e86fae1794c3fcecae42a316fa16964a2189a63eafb02321d"><div class="ttname"><a href="InstructionCombining_8cpp.html#a7b411f919e9298c8e86fae1794c3fcecae42a316fa16964a2189a63eafb02321d">GNU_Ada_Personality</a></div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l01832">InstructionCombining.cpp:1832</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a5772946ca265c6a5c951cb331983daa5"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a5772946ca265c6a5c951cb331983daa5">llvm::PatternMatch::m_FCmp</a></div><div class="ttdeci">CmpClass_match&lt; LHS, RHS, FCmpInst, FCmpInst::Predicate &gt; m_FCmp(FCmpInst::Predicate &amp;Pred, const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00599">PatternMatch.h:599</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a382131e712e55e8324fbd5068de17b78"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a382131e712e55e8324fbd5068de17b78">llvm::BranchInst::isUnconditional</a></div><div class="ttdeci">bool isUnconditional() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02391">Instructions.h:2391</a></div></div>
<div class="ttc" id="namespacellvm_html_a7618d7ef63ad3ee589da4e8c4c6e8d35"><div class="ttname"><a href="namespacellvm.html#a7618d7ef63ad3ee589da4e8c4c6e8d35">llvm::getComplexity</a></div><div class="ttdeci">static unsigned getComplexity(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombine_8h_source.html#l00042">InstCombine.h:42</a></div></div>
<div class="ttc" id="classllvm_1_1value__use__iterator_html"><div class="ttname"><a href="classllvm_1_1value__use__iterator.html">llvm::value_use_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00168">Use.h:168</a></div></div>
<div class="ttc" id="ValueTracking_8cpp_html_a06c14477546c3a0eb4c79ff007ea2375"><div class="ttname"><a href="ValueTracking_8cpp.html#a06c14477546c3a0eb4c79ff007ea2375">getBitWidth</a></div><div class="ttdeci">static unsigned getBitWidth(Type *Ty, const DataLayout *TD)</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l00040">ValueTracking.cpp:40</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html"><div class="ttname"><a href="classllvm_1_1SelectInst.html">llvm::SelectInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01430">Instructions.h:1430</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_ac72e0be80ec7138a1ec42c798b249981"><div class="ttname"><a href="classllvm_1_1Instruction.html#ac72e0be80ec7138a1ec42c798b249981">llvm::Instruction::isIdenticalTo</a></div><div class="ttdeci">bool isIdenticalTo(const Instruction *I) const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00264">Instruction.cpp:264</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_afd44535c4ae204571d5721fa4a7042f2"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#afd44535c4ae204571d5721fa4a7042f2">llvm::ConstantExpr::get</a></div><div class="ttdeci">static Constant * get(unsigned Opcode, Constant *C1, Constant *C2, unsigned Flags=0)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01690">Constants.cpp:1690</a></div></div>
<div class="ttc" id="classllvm_1_1CastInst_html"><div class="ttname"><a href="classllvm_1_1CastInst.html">llvm::CastInst</a></div><div class="ttdoc">Base class of casting instructions. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00387">InstrTypes.h:387</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_af8dde13a97efce293a7b04daf1e208fb"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">llvm::ConstantInt::getValue</a></div><div class="ttdeci">const APInt &amp; getValue() const </div><div class="ttdoc">Return the constant&amp;#39;s value. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00105">Constants.h:105</a></div></div>
<div class="ttc" id="namespacellvm_html_a0448108c43f3a226744d0a4c28c989f7"><div class="ttname"><a href="namespacellvm.html#a0448108c43f3a226744d0a4c28c989f7">llvm::makeArrayRef</a></div><div class="ttdeci">ArrayRef&lt; T &gt; makeArrayRef(const T &amp;OneElt)</div><div class="ttdoc">Construct an ArrayRef from a single element. </div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00266">ArrayRef.h:266</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">llvm::CmpInst::ICMP_NE</a></div><div class="ttdoc">not equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00673">InstrTypes.h:673</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a400eaca9881c8dcab97e9f42b1ab1815"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">llvm::SmallVectorImpl::pop_back_val</a></div><div class="ttdeci">T LLVM_ATTRIBUTE_UNUSED_RESULT pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00430">SmallVector.h:430</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html"><div class="ttname"><a href="classllvm_1_1StructType.html">llvm::StructType</a></div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00187">DerivedTypes.h:187</a></div></div>
<div class="ttc" id="ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdef"><b>Definition:</b> <a href="ErrorHandling_8h_source.html#l00103">ErrorHandling.h:103</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_acae189c1d913af7e7f37a8b202070997"><div class="ttname"><a href="classllvm_1_1Type.html#acae189c1d913af7e7f37a8b202070997">llvm::Type::getArrayElementType</a></div><div class="ttdeci">Type * getArrayElementType() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00368">Type.h:368</a></div></div>
<div class="ttc" id="classllvm_1_1Use_html"><div class="ttname"><a href="classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00060">Use.h:60</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00035">APInt.h:35</a></div></div>
<div class="ttc" id="PassSupport_8h_html_a74ce8276b89067e806f67c45a6d92575"><div class="ttname"><a href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a></div><div class="ttdeci">#define INITIALIZE_PASS_END(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00172">PassSupport.h:172</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html"><div class="ttname"><a href="classllvm_1_1IRBuilder.html">llvm::IRBuilder</a></div><div class="ttdoc">This provides a uniform API for creating instructions and inserting them into a basic block: either a...</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00421">IRBuilder.h:421</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html"><div class="ttname"><a href="classllvm_1_1InstCombiner.html">llvm::InstCombiner</a></div><div class="ttdoc">InstCombiner - The -instcombine pass. </div><div class="ttdef"><b>Definition:</b> <a href="InstCombine_8h_source.html#l00072">InstCombine.h:72</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90acd74a673807c129d89e2456d8d2e566d"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90acd74a673807c129d89e2456d8d2e566d">llvm::Intrinsic::usub_with_overflow</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02447">Intrinsics.h:2447</a></div></div>
<div class="ttc" id="classllvm_1_1ExtractValueInst_html_accfb950dd96959bfa9d44451540d088a"><div class="ttname"><a href="classllvm_1_1ExtractValueInst.html#accfb950dd96959bfa9d44451540d088a">llvm::ExtractValueInst::getNumIndices</a></div><div class="ttdeci">unsigned getNumIndices() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01804">Instructions.h:1804</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a9835cfe02fb5027680bd7203b024f77a"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a9835cfe02fb5027680bd7203b024f77a">llvm::CmpInst::FCMP_OLE</a></div><div class="ttdoc">0 1 0 1 True if ordered and less than or equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00658">InstrTypes.h:658</a></div></div>
<div class="ttc" id="namespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00126">StackSlotColoring.cpp:126</a></div></div>
<div class="ttc" id="InstructionCombining_8cpp_html_a7b411f919e9298c8e86fae1794c3fceca81e079acf8b55d4547c8c56a1aff358a"><div class="ttname"><a href="InstructionCombining_8cpp.html#a7b411f919e9298c8e86fae1794c3fceca81e079acf8b55d4547c8c56a1aff358a">Unknown_Personality</a></div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l01831">InstructionCombining.cpp:1831</a></div></div>
<div class="ttc" id="InstructionCombining_8cpp_html_a13d41ea63582902162e0efd8a78a5ad5"><div class="ttname"><a href="InstructionCombining_8cpp.html#a13d41ea63582902162e0efd8a78a5ad5">shorter_filter</a></div><div class="ttdeci">static bool shorter_filter(const Value *LHS, const Value *RHS)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l01867">InstructionCombining.cpp:1867</a></div></div>
<div class="ttc" id="classllvm_1_1GetElementPtrInst_html_a7400b6ae12470abc8ea6e18e171016b2"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html#a7400b6ae12470abc8ea6e18e171016b2">llvm::GetElementPtrInst::getPointerOperandType</a></div><div class="ttdeci">Type * getPointerOperandType() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00802">Instructions.h:802</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00031">Instruction.h:31</a></div></div>
<div class="ttc" id="TargetLibraryInfo_8h_html"><div class="ttname"><a href="TargetLibraryInfo_8h.html">TargetLibraryInfo.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a4cfd328368353696e64a4d1b15a7cbfa"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a4cfd328368353696e64a4d1b15a7cbfa">llvm::PatternMatch::m_Not</a></div><div class="ttdeci">not_match&lt; LHS &gt; m_Not(const LHS &amp;L)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00738">PatternMatch.h:738</a></div></div>
<div class="ttc" id="StringSwitch_8h_html"><div class="ttname"><a href="StringSwitch_8h.html">StringSwitch.h</a></div></div>
<div class="ttc" id="namespacellvm_html_a3720211f6e6389ab53734b989bfb6fce"><div class="ttname"><a href="namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">llvm::succ_begin</a></div><div class="ttdeci">Interval::succ_iterator succ_begin(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00107">Interval.h:107</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_ade82d6a0e72fdbc33d3a247f0b42225d"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#ade82d6a0e72fdbc33d3a247f0b42225d">llvm::InstCombiner::visitBranchInst</a></div><div class="ttdeci">Instruction * visitBranchInst(BranchInst &amp;BI)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l01608">InstructionCombining.cpp:1608</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html">llvm::ConstantExpr</a></div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00790">Constants.h:790</a></div></div>
<div class="ttc" id="classllvm_1_1LandingPadInst_html_a97bc0afbd46cc7b3539e1cba861ac350"><div class="ttname"><a href="classllvm_1_1LandingPadInst.html#a97bc0afbd46cc7b3539e1cba861ac350">llvm::LandingPadInst::setCleanup</a></div><div class="ttdeci">void setCleanup(bool V)</div><div class="ttdoc">setCleanup - Indicate that this landingpad instruction is a cleanup. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02227">Instructions.h:2227</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a0fd8d3c26bf5cd614b0e6a9b8886a5d0"><div class="ttname"><a href="classllvm_1_1Instruction.html#a0fd8d3c26bf5cd614b0e6a9b8886a5d0">llvm::Instruction::mayReadFromMemory</a></div><div class="ttdeci">bool mayReadFromMemory() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00421">Instruction.cpp:421</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_af348d5ea83429d08ba891ca3dd0e92b2"><div class="ttname"><a href="classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">llvm::Type::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">getContext - Return the LLVMContext in which this type was uniqued. </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00128">Type.h:128</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html_a2ced6343b8ad006a757059554bbf9f37"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html#a2ced6343b8ad006a757059554bbf9f37">llvm::SmallPtrSet::count</a></div><div class="ttdeci">bool count(PtrType Ptr) const </div><div class="ttdoc">count - Return true if the specified pointer is in the set. </div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00264">SmallPtrSet.h:264</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorBase_html_a8a8df4d85555c7954a95f86080cd3b64"><div class="ttname"><a href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">llvm::SmallVectorBase::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const </div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00056">SmallVector.h:56</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_ac26154a24f393f523c87cc5f8239f36c"><div class="ttname"><a href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">llvm::Instruction::BinaryOps</a></div><div class="ttdeci">BinaryOps</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00387">Instruction.h:387</a></div></div>
<div class="ttc" id="InstructionCombining_8cpp_html_a7d4d7e39548303ef4c1f5a0ed13a9c23"><div class="ttname"><a href="InstructionCombining_8cpp.html#a7d4d7e39548303ef4c1f5a0ed13a9c23">instcombine</a></div><div class="ttdeci">instcombine</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l00087">InstructionCombining.cpp:87</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_aa113b8a9ef3de9c2f075a046ad658717"><div class="ttname"><a href="classllvm_1_1Instruction.html#aa113b8a9ef3de9c2f075a046ad658717">llvm::Instruction::isAssociative</a></div><div class="ttdeci">bool isAssociative() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00482">Instruction.cpp:482</a></div></div>
<div class="ttc" id="namespacellvm_html_a8891be7c27326c20a6dba7d98e9030b5"><div class="ttname"><a href="namespacellvm.html#a8891be7c27326c20a6dba7d98e9030b5">llvm::ConstantFoldConstantExpression</a></div><div class="ttdeci">Constant * ConstantFoldConstantExpression(const ConstantExpr *CE, const DataLayout *TD=0, const TargetLibraryInfo *TLI=0)</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFolding_8cpp_source.html#l00937">ConstantFolding.cpp:937</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayType_html"><div class="ttname"><a href="classllvm_1_1ArrayType.html">llvm::ArrayType</a></div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00332">DerivedTypes.h:332</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90ae857cbc5cf8c5a980f0bd245ad5ec61a"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ae857cbc5cf8c5a980f0bd245ad5ec61a">llvm::Intrinsic::memset</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l01262">Intrinsics.h:1262</a></div></div>
<div class="ttc" id="classllvm_1_1FCmpInst_html"><div class="ttname"><a href="classllvm_1_1FCmpInst.html">llvm::FCmpInst</a></div><div class="ttdoc">Represents a floating point comparison operator. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01055">Instructions.h:1055</a></div></div>
<div class="ttc" id="classllvm_1_1LandingPadInst_html_ab79ff0e2579505f12d7eee951335e5ff"><div class="ttname"><a href="classllvm_1_1LandingPadInst.html#ab79ff0e2579505f12d7eee951335e5ff">llvm::LandingPadInst::Create</a></div><div class="ttdeci">static LandingPadInst * Create(Type *RetTy, Value *PersonalityFn, unsigned NumReservedClauses, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l00209">Instructions.cpp:209</a></div></div>
<div class="ttc" id="SmallPtrSet_8h_html"><div class="ttname"><a href="SmallPtrSet_8h.html">SmallPtrSet.h</a></div></div>
<div class="ttc" id="classllvm_1_1BitCastInst_html"><div class="ttname"><a href="classllvm_1_1BitCastInst.html">llvm::BitCastInst</a></div><div class="ttdoc">This class represents a no-op cast from one type to another. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03587">Instructions.h:3587</a></div></div>
<div class="ttc" id="classllvm_1_1GetElementPtrInst_html_aceaa5a2bd964e34d0dbf3ed1f146abc7"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html#aceaa5a2bd964e34d0dbf3ed1f146abc7">llvm::GetElementPtrInst::idx_begin</a></div><div class="ttdeci">op_iterator idx_begin()</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00785">Instructions.h:785</a></div></div>
<div class="ttc" id="namespacellvm_html_af6d6a791770bad2303c4399986979e3eae411369b2f0d8f484fec62c3291b1b51"><div class="ttname"><a href="namespacellvm.html#af6d6a791770bad2303c4399986979e3eae411369b2f0d8f484fec62c3291b1b51">llvm::Call</a></div><div class="ttdef"><b>Definition:</b> <a href="CallingConvLower_8h_source.html#l00149">CallingConvLower.h:149</a></div></div>
<div class="ttc" id="namespacellvm_html_afaf85770fdd46c58822741178d7fd03d"><div class="ttname"><a href="namespacellvm.html#afaf85770fdd46c58822741178d7fd03d">llvm::ConstantFoldInstruction</a></div><div class="ttdeci">Constant * ConstantFoldInstruction(Instruction *I, const DataLayout *TD=0, const TargetLibraryInfo *TLI=0)</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFolding_8cpp_source.html#l00839">ConstantFolding.cpp:839</a></div></div>
<div class="ttc" id="classllvm_1_1TargetFolder_html"><div class="ttname"><a href="classllvm_1_1TargetFolder.html">llvm::TargetFolder</a></div><div class="ttdoc">TargetFolder - Create constants with target dependent folding. </div><div class="ttdef"><b>Definition:</b> <a href="TargetFolder_8h_source.html#l00032">TargetFolder.h:32</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a842176a2c8c60a94bc788454b0828ea2"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a842176a2c8c60a94bc788454b0828ea2">llvm::Intrinsic::getDeclaration</a></div><div class="ttdeci">Function * getDeclaration(Module *M, ID id, ArrayRef&lt; Type * &gt; Tys=None)</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00683">Function.cpp:683</a></div></div>
<div class="ttc" id="classllvm_1_1LandingPadInst_html_a0996e256e9037e03a45d904b48c90aac"><div class="ttname"><a href="classllvm_1_1LandingPadInst.html#a0996e256e9037e03a45d904b48c90aac">llvm::LandingPadInst::getNumClauses</a></div><div class="ttdeci">unsigned getNumClauses() const </div><div class="ttdoc">getNumClauses - Get the number of clauses for this landing pad. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02250">Instructions.h:2250</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html"><div class="ttname"><a href="classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00255">Instructions.h:255</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00303">Value.cpp:303</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a9aae7c60b468bcf6db982dc76e6c703a"><div class="ttname"><a href="classllvm_1_1Type.html#a9aae7c60b468bcf6db982dc76e6c703a">llvm::Type::isArrayTy</a></div><div class="ttdeci">bool isArrayTy() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00216">Type.h:216</a></div></div>
<div class="ttc" id="classllvm_1_1VectorType_html_a580510fa692dccfb26d0e967d8f164e7"><div class="ttname"><a href="classllvm_1_1VectorType.html#a580510fa692dccfb26d0e967d8f164e7">llvm::VectorType::getNumElements</a></div><div class="ttdeci">unsigned getNumElements() const </div><div class="ttdoc">Return the number of elements in the Vector type. </div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00408">DerivedTypes.h:408</a></div></div>
<div class="ttc" id="namespacellvm_html_a195c85317ba5f5262812d33289c7a2b3"><div class="ttname"><a href="namespacellvm.html#a195c85317ba5f5262812d33289c7a2b3">llvm::createInstructionCombiningPass</a></div><div class="ttdeci">FunctionPass * createInstructionCombiningPass()</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l02532">InstructionCombining.cpp:2532</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ae855357b6c5e6e7ed1869272708a3a84"><div class="ttname"><a href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">llvm::Value::takeName</a></div><div class="ttdeci">void takeName(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00239">Value.cpp:239</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a88a5e60837674780a9d812d661897ac5"><div class="ttname"><a href="classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">llvm::Function::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00395">Function.h:395</a></div></div>
<div class="ttc" id="classllvm_1_1LandingPadInst_html_acfc7ce8a4359705f956484f74ca722c9"><div class="ttname"><a href="classllvm_1_1LandingPadInst.html#acfc7ce8a4359705f956484f74ca722c9">llvm::LandingPadInst::addClause</a></div><div class="ttdeci">void addClause(Value *ClauseVal)</div><div class="ttdoc">addClause - Add a catch or filter clause to the landing pad. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l00251">Instructions.cpp:251</a></div></div>
<div class="ttc" id="classllvm_1_1SequentialType_html_a39f2c3a62f293faf11ac28b15bc53359"><div class="ttname"><a href="classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">llvm::SequentialType::getElementType</a></div><div class="ttdeci">Type * getElementType() const </div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00319">DerivedTypes.h:319</a></div></div>
<div class="ttc" id="namespacellvm_html_a7fba1a9b7761f82c4e9da63290d71af5"><div class="ttname"><a href="namespacellvm.html#a7fba1a9b7761f82c4e9da63290d71af5">llvm::SimplifyGEPInst</a></div><div class="ttdeci">Value * SimplifyGEPInst(ArrayRef&lt; Value * &gt; Ops, const DataLayout *TD=0, const TargetLibraryInfo *TLI=0, const DominatorTree *DT=0)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l02771">InstructionSimplify.cpp:2771</a></div></div>
<div class="ttc" id="classllvm_1_1GetElementPtrInst_html_aa87e8100bba232cc73678f86231d7e58"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html#aa87e8100bba232cc73678f86231d7e58">llvm::GetElementPtrInst::isInBounds</a></div><div class="ttdeci">bool isInBounds() const </div><div class="ttdoc">isInBounds - Determine whether the GEP has the inbounds flag. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l01426">Instructions.cpp:1426</a></div></div>
<div class="ttc" id="classllvm_1_1PointerType_html"><div class="ttname"><a href="classllvm_1_1PointerType.html">llvm::PointerType</a></div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00425">DerivedTypes.h:425</a></div></div>
<div class="ttc" id="namespacellvm_html_a069c4ae2290101bde0f8d6a5074dc72b"><div class="ttname"><a href="namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">llvm::succ_end</a></div><div class="ttdeci">Interval::succ_iterator succ_end(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00110">Interval.h:110</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_aa45f6c0433576e3858a6209a43750ad4"><div class="ttname"><a href="classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">llvm::PHINode::getNumIncomingValues</a></div><div class="ttdeci">unsigned getNumIncomingValues() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02055">Instructions.h:2055</a></div></div>
<div class="ttc" id="classllvm_1_1StructLayout_html_ae10c4483372a357a0d3411b3d64be10c"><div class="ttname"><a href="classllvm_1_1StructLayout.html#ae10c4483372a357a0d3411b3d64be10c">llvm::StructLayout::getElementOffset</a></div><div class="ttdeci">uint64_t getElementOffset(unsigned Idx) const </div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00442">DataLayout.h:442</a></div></div>
<div class="ttc" id="classllvm_1_1CastInst_html_a0f7dea9550778374905e12da6d6ba8a8"><div class="ttname"><a href="classllvm_1_1CastInst.html#a0f7dea9550778374905e12da6d6ba8a8">llvm::CastInst::Create</a></div><div class="ttdeci">static CastInst * Create(Instruction::CastOps, Value *S, Type *Ty, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdoc">Construct any of the CastInst subclasses. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l02350">Instructions.cpp:2350</a></div></div>
<div class="ttc" id="classllvm_1_1TerminatorInst_html_a4c26d3b92af99a6c8defd89a2d39ca32"><div class="ttname"><a href="classllvm_1_1TerminatorInst.html#a4c26d3b92af99a6c8defd89a2d39ca32">llvm::TerminatorInst::getNumSuccessors</a></div><div class="ttdeci">unsigned getNumSuccessors() const </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00059">InstrTypes.h:59</a></div></div>
<div class="ttc" id="classllvm_1_1LandingPadInst_html_ac32253b1954f4abfcbff519ab343f2b1"><div class="ttname"><a href="classllvm_1_1LandingPadInst.html#ac32253b1954f4abfcbff519ab343f2b1">llvm::LandingPadInst::getClause</a></div><div class="ttdeci">Value * getClause(unsigned Idx) const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02237">Instructions.h:2237</a></div></div>
<div class="ttc" id="classllvm_1_1GetElementPtrInst_html"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html">llvm::GetElementPtrInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00709">Instructions.h:709</a></div></div>
<div class="ttc" id="classllvm_1_1LandingPadInst_html_acbe7fa255524e60e4a8ad959ae51aa22"><div class="ttname"><a href="classllvm_1_1LandingPadInst.html#acbe7fa255524e60e4a8ad959ae51aa22">llvm::LandingPadInst::isFilter</a></div><div class="ttdeci">bool isFilter(unsigned Idx) const </div><div class="ttdoc">isFilter - Return &amp;#39;true&amp;#39; if the clause and index Idx is a filter clause. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02245">Instructions.h:2245</a></div></div>
<div class="ttc" id="InstructionCombining_8cpp_html_aa4790342aeb6f773552d018e0bcf410b"><div class="ttname"><a href="InstructionCombining_8cpp.html#aa4790342aeb6f773552d018e0bcf410b">isCatchAll</a></div><div class="ttdeci">static bool isCatchAll(Personality_Type Personality, Constant *TypeInfo)</div><div class="ttdoc">isCatchAll - Return &amp;#39;true&amp;#39; if the given typeinfo will match anything. </div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l01852">InstructionCombining.cpp:1852</a></div></div>
<div class="ttc" id="README__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A,*B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00091">README_ALTIVEC.txt:91</a></div></div>
<div class="ttc" id="CommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_a283af50f80d0a7b532f5e845623dce53"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a283af50f80d0a7b532f5e845623dce53">llvm::ConstantExpr::getFNeg</a></div><div class="ttdeci">static Constant * getFNeg(Constant *C)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02028">Constants.cpp:2028</a></div></div>
<div class="ttc" id="classllvm_1_1StringSwitch_html"><div class="ttname"><a href="classllvm_1_1StringSwitch.html">llvm::StringSwitch</a></div><div class="ttdoc">A switch()-like statement whose cases are string literals. </div><div class="ttdef"><b>Definition:</b> <a href="StringSwitch_8h_source.html#l00042">StringSwitch.h:42</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00314">CommandLine.h:314</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a2bd8d3ea479e99434bac72362a59f078"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a2bd8d3ea479e99434bac72362a59f078">llvm::IRBuilder::CreateBinOp</a></div><div class="ttdeci">Value * CreateBinOp(Instruction::BinaryOps Opc, Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00834">IRBuilder.h:834</a></div></div>
<div class="ttc" id="classllvm_1_1LandingPadInst_html"><div class="ttname"><a href="classllvm_1_1LandingPadInst.html">llvm::LandingPadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02178">Instructions.h:2178</a></div></div>
<div class="ttc" id="classllvm_1_1TerminatorInst_html"><div class="ttname"><a href="classllvm_1_1TerminatorInst.html">llvm::TerminatorInst</a></div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00035">InstrTypes.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1SuccIterator_html"><div class="ttname"><a href="classllvm_1_1SuccIterator.html">llvm::SuccIterator&lt; TerminatorInst *, BasicBlock &gt;</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a8cf5475fb3e9c737112cc248194c1040"><div class="ttname"><a href="classllvm_1_1APInt.html#a8cf5475fb3e9c737112cc248194c1040">llvm::APInt::trunc</a></div><div class="ttdeci">APInt LLVM_ATTRIBUTE_UNUSED_RESULT trunc(unsigned width) const </div><div class="ttdoc">Truncate to new width. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l00919">APInt.cpp:919</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00044">Type.h:44</a></div></div>
<div class="ttc" id="classllvm_1_1TerminatorInst_html_a3aac3b6c36415a2b08f65ead9e3e51e7"><div class="ttname"><a href="classllvm_1_1TerminatorInst.html#a3aac3b6c36415a2b08f65ead9e3e51e7">llvm::TerminatorInst::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned idx) const </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00065">InstrTypes.h:65</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html"><div class="ttname"><a href="classllvm_1_1BranchInst.html">llvm::BranchInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02350">Instructions.h:2350</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="Support_2CFG_8h_html"><div class="ttname"><a href="Support_2CFG_8h.html">CFG.h</a></div></div>
<div class="ttc" id="InstructionCombining_8cpp_html_a85b6b7c082723d74f04ac701c91daa47"><div class="ttname"><a href="InstructionCombining_8cpp.html#a85b6b7c082723d74f04ac701c91daa47">UnsafeFPShrink</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; UnsafeFPShrink(&quot;enable-double-float-shrink&quot;, cl::Hidden, cl::init(false), cl::desc(&quot;Enable unsafe double to float &quot;&quot;shrinking for math lib calls&quot;))</div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html_ad285a69e32ddeee367fed93b5f392801"><div class="ttname"><a href="classllvm_1_1SelectInst.html#ad285a69e32ddeee367fed93b5f392801">llvm::SelectInst::getCondition</a></div><div class="ttdeci">const Value * getCondition() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01466">Instructions.h:1466</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a7189a37206963029447c31d57771b997"><div class="ttname"><a href="classllvm_1_1APInt.html#a7189a37206963029447c31d57771b997">llvm::APInt::getSExtValue</a></div><div class="ttdeci">int64_t getSExtValue() const </div><div class="ttdoc">Get sign extended value. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01318">APInt.h:1318</a></div></div>
<div class="ttc" id="InstructionCombining_8cpp_html_afa4bb891679df17d0d41dc77417d28f5"><div class="ttname"><a href="InstructionCombining_8cpp.html#afa4bb891679df17d0d41dc77417d28f5">LeftDistributesOverRight</a></div><div class="ttdeci">static bool LeftDistributesOverRight(Instruction::BinaryOps LOp, Instruction::BinaryOps ROp)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l00342">InstructionCombining.cpp:342</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a137f4ed94704473ee62c0a70084984fc"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a137f4ed94704473ee62c0a70084984fc">llvm::Intrinsic::sadd_with_overflow</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02431">Intrinsics.h:2431</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a59ba1d701385742520aa8a3478099fb7"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a59ba1d701385742520aa8a3478099fb7">llvm::Intrinsic::memmove</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l01261">Intrinsics.h:1261</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_af7c1b579548e5b90a8db22d2f26a4afc"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#af7c1b579548e5b90a8db22d2f26a4afc">llvm::InstCombiner::ReplaceInstUsesWith</a></div><div class="ttdeci">Instruction * ReplaceInstUsesWith(Instruction &amp;I, Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombine_8h_source.html#l00267">InstCombine.h:267</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_a22f056804d2b9882f74adc905872bc39"><div class="ttname"><a href="namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">llvm::APIntOps::Or</a></div><div class="ttdeci">APInt Or(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise OR function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01845">APInt.h:1845</a></div></div>
<div class="ttc" id="namespacellvm_html_abe283966f269761ee387642061c4451e"><div class="ttname"><a href="namespacellvm.html#abe283966f269761ee387642061c4451e">llvm::isInstructionTriviallyDead</a></div><div class="ttdeci">bool isInstructionTriviallyDead(Instruction *I, const TargetLibraryInfo *TLI=0)</div><div class="ttdef"><b>Definition:</b> <a href="Local_8cpp_source.html#l00266">Local.cpp:266</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantArray_html_a0900dacdc7ad8e3ea0cc92993c7fd422"><div class="ttname"><a href="classllvm_1_1ConstantArray.html#a0900dacdc7ad8e3ea0cc92993c7fd422">llvm::ConstantArray::get</a></div><div class="ttdeci">static Constant * get(ArrayType *T, ArrayRef&lt; Constant * &gt; V)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00745">Constants.cpp:745</a></div></div>
<div class="ttc" id="classllvm_1_1InvokeInst_html_a03007b982a936464f7116e3c47df89ee"><div class="ttname"><a href="classllvm_1_1InvokeInst.html#a03007b982a936464f7116e3c47df89ee">llvm::InvokeInst::Create</a></div><div class="ttdeci">static InvokeInst * Create(Value *Func, BasicBlock *IfNormal, BasicBlock *IfException, ArrayRef&lt; Value * &gt; Args, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02863">Instructions.h:2863</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantFP_html"><div class="ttname"><a href="classllvm_1_1ConstantFP.html">llvm::ConstantFP</a></div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00232">Constants.h:232</a></div></div>
<div class="ttc" id="structllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00286">CommandLine.h:286</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_afc7c4d88d09cba0c5e920f8a3a3ace55"><div class="ttname"><a href="namespacellvm_1_1APIntOps.html#afc7c4d88d09cba0c5e920f8a3a3ace55">llvm::APIntOps::Xor</a></div><div class="ttdeci">APInt Xor(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise XOR function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01850">APInt.h:1850</a></div></div>
<div class="ttc" id="classllvm_1_1MemIntrinsic_html_a3ec0c47a5532e568d54c8d452dfb58df"><div class="ttname"><a href="classllvm_1_1MemIntrinsic.html#a3ec0c47a5532e568d54c8d452dfb58df">llvm::MemIntrinsic::getRawDest</a></div><div class="ttdeci">Value * getRawDest() const </div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00120">IntrinsicInst.h:120</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a2d9861feadd3a09792967a012559e7b2"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">llvm::PatternMatch::m_Specific</a></div><div class="ttdeci">specificval_ty m_Specific(const Value *V)</div><div class="ttdoc">m_Specific - Match if we have a specific specified value. </div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00323">PatternMatch.h:323</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_aab8e16a35183ce39aad394714087bcff"><div class="ttname"><a href="classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">llvm::Instruction::getDebugLoc</a></div><div class="ttdeci">const DebugLoc &amp; getDebugLoc() const </div><div class="ttdoc">getDebugLoc - Return the debug location for this node as a DebugLoc. </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00178">Instruction.h:178</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_aa3464694bcec68b89b4bffd71360b897"><div class="ttname"><a href="classllvm_1_1APInt.html#aa3464694bcec68b89b4bffd71360b897">llvm::APInt::sext</a></div><div class="ttdeci">APInt LLVM_ATTRIBUTE_UNUSED_RESULT sext(unsigned width) const </div><div class="ttdoc">Sign extend to a new width. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l00942">APInt.cpp:942</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a2e54f4d4281f1a8386087844328cd93b"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a2e54f4d4281f1a8386087844328cd93b">llvm::Intrinsic::donothing</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l00372">Intrinsics.h:372</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a5d28b362c7869ec2b8c1ed9e58cbc290"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a5d28b362c7869ec2b8c1ed9e58cbc290">llvm::PatternMatch::m_Br</a></div><div class="ttdeci">brc_match&lt; Cond_t &gt; m_Br(const Cond_t &amp;C, BasicBlock *&amp;T, BasicBlock *&amp;F)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00837">PatternMatch.h:837</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00037">PassAnalysisSupport.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_af41f58e730804d10b91fcff39b035f74"><div class="ttname"><a href="classllvm_1_1User.html#af41f58e730804d10b91fcff39b035f74">llvm::User::op_end</a></div><div class="ttdeci">op_iterator op_end()</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00118">User.h:118</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_afb5e83bf5123ff7c51058eb0ebebcdc6"><div class="ttname"><a href="classllvm_1_1PHINode.html#afb5e83bf5123ff7c51058eb0ebebcdc6">llvm::PHINode::Create</a></div><div class="ttdeci">static PHINode * Create(Type *Ty, unsigned NumReservedValues, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02013">Instructions.h:2013</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a4c25b6c00c4867281779c81ab64d2081"><div class="ttname"><a href="classllvm_1_1PHINode.html#a4c25b6c00c4867281779c81ab64d2081">llvm::PHINode::getIncomingBlock</a></div><div class="ttdeci">BasicBlock * getIncomingBlock(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02074">Instructions.h:2074</a></div></div>
<div class="ttc" id="classllvm_1_1ExtractValueInst_html_a4fe735fcf509b757252e91d53498708a"><div class="ttname"><a href="classllvm_1_1ExtractValueInst.html#a4fe735fcf509b757252e91d53498708a">llvm::ExtractValueInst::idx_iterator</a></div><div class="ttdeci">const unsigned * idx_iterator</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01786">Instructions.h:1786</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a531d11ba36ed48d86057d507cc8d5567"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a531d11ba36ed48d86057d507cc8d5567">llvm::BasicBlock::getInstList</a></div><div class="ttdeci">const InstListType &amp; getInstList() const </div><div class="ttdoc">Return the underlying instruction list container. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00214">BasicBlock.h:214</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayType_html_a688547c04258bde2eaf6515048bf3f3b"><div class="ttname"><a href="classllvm_1_1ArrayType.html#a688547c04258bde2eaf6515048bf3f3b">llvm::ArrayType::getNumElements</a></div><div class="ttdeci">uint64_t getNumElements() const </div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00348">DerivedTypes.h:348</a></div></div>
<div class="ttc" id="classllvm_1_1ICmpInst_html"><div class="ttname"><a href="classllvm_1_1ICmpInst.html">llvm::ICmpInst</a></div><div class="ttdoc">Represent an integer comparison operator. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00911">Instructions.h:911</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">llvm::CmpInst::Predicate</a></div><div class="ttdeci">Predicate</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00651">InstrTypes.h:651</a></div></div>
<div class="ttc" id="classllvm_1_1OverflowingBinaryOperator_html"><div class="ttname"><a href="classllvm_1_1OverflowingBinaryOperator.html">llvm::OverflowingBinaryOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="Operator_8h_source.html#l00079">Operator.h:79</a></div></div>
<div class="ttc" id="classllvm_1_1iplist_html_a35c71de7e8bbe3c0353d042beb58263f"><div class="ttname"><a href="classllvm_1_1iplist.html#a35c71de7e8bbe3c0353d042beb58263f">llvm::iplist::insert</a></div><div class="ttdeci">iterator insert(iterator where, NodeTy *New)</div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00412">ilist.h:412</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_ad081689e23a8f5dea78dedd623d6a8f8"><div class="ttname"><a href="classllvm_1_1APInt.html#ad081689e23a8f5dea78dedd623d6a8f8">llvm::APInt::getBitWidth</a></div><div class="ttdeci">unsigned getBitWidth() const </div><div class="ttdoc">Return the number of bits in the APInt. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01252">APInt.h:1252</a></div></div>
<div class="ttc" id="Target_2X86_2README_8txt_html_a0ed5c5d6ff68f354e354920a3680185c"><div class="ttname"><a href="Target_2X86_2README_8txt.html#a0ed5c5d6ff68f354e354920a3680185c">Sum</a></div><div class="ttdeci">return Sum</div><div class="ttdef"><b>Definition:</b> <a href="Target_2X86_2README_8txt_source.html#l00112">Target/X86/README.txt:112</a></div></div>
<div class="ttc" id="classllvm_1_1FunctionPass_html"><div class="ttname"><a href="classllvm_1_1FunctionPass.html">llvm::FunctionPass</a></div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00293">Pass.h:293</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00088">User.h:88</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a1c2048f254df730c4de1643ec791ddf9"><div class="ttname"><a href="classllvm_1_1Instruction.html#a1c2048f254df730c4de1643ec791ddf9">llvm::Instruction::isCommutative</a></div><div class="ttdeci">bool isCommutative() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00269">Instruction.h:269</a></div></div>
<div class="ttc" id="Target_2PowerPC_2README_8txt_html_afc7ca55ad1da67847ecd4b99ef64dc84"><div class="ttname"><a href="Target_2PowerPC_2README_8txt.html#afc7ca55ad1da67847ecd4b99ef64dc84">CC</a></div><div class="ttdeci">which only computes the address of bar double int Z void if you have a function since the bit double ate up the argument bytes for r4 and r5 The trick then would be to shuffle the argument order for functions we can internalize so that the maximum number of integers pointers get passed in regs before you see any of the fp arguments Instead of implementing it would actually probably be easier to just implement a PPC where we could do whatever we wanted to the CC</div><div class="ttdef"><b>Definition:</b> <a href="Target_2PowerPC_2README_8txt_source.html#l00247">Target/PowerPC/README.txt:247</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_aaca490f77b8a0ca6b013db8c0de18972"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#aaca490f77b8a0ca6b013db8c0de18972">llvm::InstCombiner::Worklist</a></div><div class="ttdeci">InstCombineWorklist Worklist</div><div class="ttdoc">Worklist - All of the instructions that need to be simplified. </div><div class="ttdef"><b>Definition:</b> <a href="InstCombine_8h_source.html#l00082">InstCombine.h:82</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_a5b43a866f0fca605556f0f69f70c522a"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a5b43a866f0fca605556f0f69f70c522a">llvm::ConstantExpr::getNot</a></div><div class="ttdeci">static Constant * getNot(Constant *C)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02034">Constants.cpp:2034</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_a01fee21e2c679094ce5ab193369d5198"><div class="ttname"><a href="classllvm_1_1Constant.html#a01fee21e2c679094ce5ab193369d5198">llvm::Constant::getAggregateElement</a></div><div class="ttdeci">Constant * getAggregateElement(unsigned Elt) const </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00183">Constants.cpp:183</a></div></div>
<div class="ttc" id="README__ALTIVEC_8txt_html_afb354c8aea0150628f8aa06c7f4a4168"><div class="ttname"><a href="README__ALTIVEC_8txt.html#afb354c8aea0150628f8aa06c7f4a4168">f</a></div><div class="ttdeci">vector float f(vector float a, vector float b)</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00205">README_ALTIVEC.txt:205</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a6e33228c0d5bb3b72f357677fa105185"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">llvm::InstCombiner::Builder</a></div><div class="ttdeci">BuilderTy * Builder</div><div class="ttdef"><b>Definition:</b> <a href="InstCombine_8h_source.html#l00087">InstCombine.h:87</a></div></div>
<div class="ttc" id="InstructionCombining_8cpp_html_a6435fba4effd1a8feeb1307acc4041ea"><div class="ttname"><a href="InstructionCombining_8cpp.html#a6435fba4effd1a8feeb1307acc4041ea">FoldOperationIntoSelectOperand</a></div><div class="ttdeci">static Value * FoldOperationIntoSelectOperand(Instruction &amp;I, Value *SO, InstCombiner *IC)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l00549">InstructionCombining.cpp:549</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a669d55980a7d4b6307b94596deeb0b1f"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a669d55980a7d4b6307b94596deeb0b1f">llvm::SmallVectorImpl::append</a></div><div class="ttdeci">void append(in_iter in_start, in_iter in_end)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00445">SmallVector.h:445</a></div></div>
<div class="ttc" id="classllvm_1_1UndefValue_html_a4ae5ff22b700a42bcc5d889233721335"><div class="ttname"><a href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">llvm::UndefValue::get</a></div><div class="ttdeci">static UndefValue * get(Type *T)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01334">Constants.cpp:1334</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a18c110c35e9133222a37b28d30f8a90f"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a18c110c35e9133222a37b28d30f8a90f">llvm::SmallVectorImpl::erase</a></div><div class="ttdeci">iterator erase(iterator I)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00478">SmallVector.h:478</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_af85a4828b6b5a8de7fc0a55cc0e5b52f"><div class="ttname"><a href="classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">All values hold a context through their type. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00517">Value.cpp:517</a></div></div>
<div class="ttc" id="classT_html"><div class="ttname"><a href="classT.html">T</a></div></div>
<div class="ttc" id="namespacellvm_html_a7994fd7ca0d8f8fcf2a9d18d151d0988"><div class="ttname"><a href="namespacellvm.html#a7994fd7ca0d8f8fcf2a9d18d151d0988">llvm::LowerDbgDeclare</a></div><div class="ttdeci">bool LowerDbgDeclare(Function &amp;F)</div><div class="ttdef"><b>Definition:</b> <a href="Local_8cpp_source.html#l01034">Local.cpp:1034</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a7fe9ccd4893f4e2caa826126c09545ea"><div class="ttname"><a href="classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">llvm::Type::getInt8PtrTy</a></div><div class="ttdeci">static PointerType * getInt8PtrTy(LLVMContext &amp;C, unsigned AS=0)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00284">Type.cpp:284</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html_a07783e6f39803037259a1ebe376c2b1e"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a07783e6f39803037259a1ebe376c2b1e">llvm::BinaryOperator::hasNoSignedWrap</a></div><div class="ttdeci">bool hasNoSignedWrap() const </div><div class="ttdoc">hasNoSignedWrap - Determine whether the no signed wrap flag is set. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l02013">Instructions.cpp:2013</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html_a67bf091383cd61e1225445e78b61d9f9"><div class="ttname"><a href="classllvm_1_1SelectInst.html#a67bf091383cd61e1225445e78b61d9f9">llvm::SelectInst::getTrueValue</a></div><div class="ttdeci">const Value * getTrueValue() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01467">Instructions.h:1467</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90af3ede9077760c88ac478707b1ff19273"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90af3ede9077760c88ac478707b1ff19273">llvm::Intrinsic::dbg_value</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l00370">Intrinsics.h:370</a></div></div>
<div class="ttc" id="namespacellvm_html_a9a0b7acac205af164daef4017f9d193d"><div class="ttname"><a href="namespacellvm.html#a9a0b7acac205af164daef4017f9d193d">llvm::SimplifyBinOp</a></div><div class="ttdeci">Value * SimplifyBinOp(unsigned Opcode, Value *LHS, Value *RHS, const DataLayout *TD=0, const TargetLibraryInfo *TLI=0, const DominatorTree *DT=0)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l02929">InstructionSimplify.cpp:2929</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html">llvm::PatternMatch</a></div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00039">PatternMatch.h:39</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a66117262c223380ed69d25376318a8b4"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a66117262c223380ed69d25376318a8b4">llvm::PatternMatch::m_Neg</a></div><div class="ttdeci">neg_match&lt; LHS &gt; m_Neg(const LHS &amp;L)</div><div class="ttdoc">m_Neg - Match an integer negate. </div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00764">PatternMatch.h:764</a></div></div>
<div class="ttc" id="classllvm_1_1SequentialType_html"><div class="ttname"><a href="classllvm_1_1SequentialType.html">llvm::SequentialType</a></div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00306">DerivedTypes.h:306</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html_a88505baf41407782678a5df1702d2d31"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">llvm::BinaryOperator::getOpcode</a></div><div class="ttdeci">BinaryOps getOpcode() const </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00326">InstrTypes.h:326</a></div></div>
<div class="ttc" id="classllvm_1_1MemIntrinsic_html"><div class="ttname"><a href="classllvm_1_1MemIntrinsic.html">llvm::MemIntrinsic</a></div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00118">IntrinsicInst.h:118</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a2ee2de2efa05f2abb95007892fc559a4"><div class="ttname"><a href="classllvm_1_1Type.html#a2ee2de2efa05f2abb95007892fc559a4">llvm::Type::getInt1PtrTy</a></div><div class="ttdeci">static PointerType * getInt1PtrTy(LLVMContext &amp;C, unsigned AS=0)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00280">Type.cpp:280</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00236">SmallPtrSet.h:236</a></div></div>
<div class="ttc" id="Initialization_8h_html"><div class="ttname"><a href="Initialization_8h.html">Initialization.h</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="group__LLVMCCoreTypes_html_gab1ca1ff855478bc0f33874a1182e4b94"><div class="ttname"><a href="group__LLVMCCoreTypes.html#gab1ca1ff855478bc0f33874a1182e4b94">LLVMPassRegistryRef</a></div><div class="ttdeci">struct LLVMOpaquePassRegistry * LLVMPassRegistryRef</div><div class="ttdef"><b>Definition:</b> <a href="Core_8h_source.html#l00128">Core.h:128</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a7d51bb3a32d5bcdd7d273fcae8529fde"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a7d51bb3a32d5bcdd7d273fcae8529fde">llvm::InstCombiner::DoOneIteration</a></div><div class="ttdeci">bool DoOneIteration(Function &amp;F, unsigned ItNum)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l02319">InstructionCombining.cpp:2319</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_aba6a4cc4ed6d6fef3664b8d65ef04820"><div class="ttname"><a href="classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">llvm::PHINode::getIncomingValue</a></div><div class="ttdeci">Value * getIncomingValue(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02059">Instructions.h:2059</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a7a5732db5f7198200d61bd40da6e488c"><div class="ttname"><a href="classllvm_1_1Value.html#a7a5732db5f7198200d61bd40da6e488c">llvm::Value::DoPHITranslation</a></div><div class="ttdeci">Value * DoPHITranslation(const BasicBlock *CurBB, const BasicBlock *PredBB)</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00509">Value.cpp:509</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0b4e7bee9b8575cc7db73329f1a561bd"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">llvm::BasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00195">BasicBlock.h:195</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_a2a2df5a25b9c703e74e82b48a75d0c3d"><div class="ttname"><a href="Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a></div><div class="ttdeci">instcombine should handle this C2 when C1</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00300">Target/README.txt:300</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a1558c7c51d5102374564fd690d19df99"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a1558c7c51d5102374564fd690d19df99">llvm::Intrinsic::ssub_with_overflow</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02438">Intrinsics.h:2438</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00880">SmallVector.h:880</a></div></div>
<div class="ttc" id="classllvm_1_1FPMathOperator_html"><div class="ttname"><a href="classllvm_1_1FPMathOperator.html">llvm::FPMathOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="Operator_8h_source.html#l00218">Operator.h:218</a></div></div>
<div class="ttc" id="classllvm_1_1Operator_html"><div class="ttname"><a href="classllvm_1_1Operator.html">llvm::Operator</a></div><div class="ttdef"><b>Definition:</b> <a href="Operator_8h_source.html#l00034">Operator.h:34</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00111">Value.h:111</a></div></div>
<div class="ttc" id="classllvm_1_1TargetLibraryInfo_html"><div class="ttname"><a href="classllvm_1_1TargetLibraryInfo.html">llvm::TargetLibraryInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00657">TargetLibraryInfo.h:657</a></div></div>
<div class="ttc" id="classllvm_1_1GEPOperator_html_a6941012bf4bc39a24118a66ee023c3d3"><div class="ttname"><a href="classllvm_1_1GEPOperator.html#a6941012bf4bc39a24118a66ee023c3d3">llvm::GEPOperator::hasAllZeroIndices</a></div><div class="ttdeci">bool hasAllZeroIndices() const </div><div class="ttdef"><b>Definition:</b> <a href="Operator_8h_source.html#l00415">Operator.h:415</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html">llvm::BinaryOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00138">InstrTypes.h:138</a></div></div>
<div class="ttc" id="classllvm_1_1StructLayout_html_a582a5b21a8f91d7f713fa9d57c0525de"><div class="ttname"><a href="classllvm_1_1StructLayout.html#a582a5b21a8f91d7f713fa9d57c0525de">llvm::StructLayout::getSizeInBytes</a></div><div class="ttdeci">uint64_t getSizeInBytes() const </div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00425">DataLayout.h:425</a></div></div>
<div class="ttc" id="classllvm_1_1GetElementPtrInst_html_abfc8f5fb56fb06e32a26f28ba7ec1c0b"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html#abfc8f5fb56fb06e32a26f28ba7ec1c0b">llvm::GetElementPtrInst::getType</a></div><div class="ttdeci">SequentialType * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00764">Instructions.h:764</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a38ea12c04523d63adda732b9c5d6da0a"><div class="ttname"><a href="classllvm_1_1Value.html#a38ea12c04523d63adda732b9c5d6da0a">llvm::Value::stripPointerCasts</a></div><div class="ttdeci">Value * stripPointerCasts()</div><div class="ttdoc">Strips off any unneeded pointer casts, all-zero GEPs and aliases from the specified value...</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00385">Value.cpp:385</a></div></div>
<div class="ttc" id="classllvm_1_1StructLayout_html_a795cfd43d30c44c33b97fe850bc0451f"><div class="ttname"><a href="classllvm_1_1StructLayout.html#a795cfd43d30c44c33b97fe850bc0451f">llvm::StructLayout::getElementContainingOffset</a></div><div class="ttdeci">unsigned getElementContainingOffset(uint64_t Offset) const </div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8cpp_source.html#l00078">DataLayout.cpp:78</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a53e5c6efc4d9b9efe54a0c1429b852ea"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a53e5c6efc4d9b9efe54a0c1429b852ea">llvm::InstCombiner::visitFree</a></div><div class="ttdeci">Instruction * visitFree(CallInst &amp;FI)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l01577">InstructionCombining.cpp:1577</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a9105541412dab869e18b3cceebfff07d"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool isSigned=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00492">Constants.cpp:492</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_ad4ea4748170f687710a54c919dde5625"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#ad4ea4748170f687710a54c919dde5625">llvm::ConstantInt::isZero</a></div><div class="ttdeci">bool isZero() const </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00160">Constants.h:160</a></div></div>
<div class="ttc" id="classllvm_1_1GetElementPtrInst_html_a1585a1ee545bef997b3120f87fd992a0"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html#a1585a1ee545bef997b3120f87fd992a0">llvm::GetElementPtrInst::Create</a></div><div class="ttdeci">static GetElementPtrInst * Create(Value *Ptr, ArrayRef&lt; Value * &gt; IdxList, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00726">Instructions.h:726</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a1b4936730cfc275f478f1c1ea085f6c0"><div class="ttname"><a href="classllvm_1_1APInt.html#a1b4936730cfc275f478f1c1ea085f6c0">llvm::APInt::exactLogBase2</a></div><div class="ttdeci">int32_t exactLogBase2() const </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01509">APInt.h:1509</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a30f2c362631e3728d2f47a8203071ade"><div class="ttname"><a href="classllvm_1_1Function.html#a30f2c362631e3728d2f47a8203071ade">llvm::Function::getEntryBlock</a></div><div class="ttdeci">const BasicBlock &amp; getEntryBlock() const </div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00380">Function.h:380</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_a0805f256f4e5964c2e9e9874891a38be"><div class="ttname"><a href="Target_2README_8txt.html#a0805f256f4e5964c2e9e9874891a38be">Combine</a></div><div class="ttdeci">Add support for conditional and other related patterns Instead eax eax je LBB16_2 eax edi eax movl _foo Combine</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00169">Target/README.txt:169</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_ad7ec8482f19e8e86e3de573b060a17e5"><div class="ttname"><a href="classllvm_1_1Constant.html#ad7ec8482f19e8e86e3de573b060a17e5">llvm::Constant::isNullValue</a></div><div class="ttdeci">bool isNullValue() const </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00075">Constants.cpp:75</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a82dbbd8e3688b0bc1eedb338864d0d0c"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">llvm::ConstantInt::getTrue</a></div><div class="ttdeci">static ConstantInt * getTrue(LLVMContext &amp;Context)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00438">Constants.cpp:438</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a126a12b67fa620ad28ec0c919ca7a3e8"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a126a12b67fa620ad28ec0c919ca7a3e8">llvm::CmpInst::setPredicate</a></div><div class="ttdeci">void setPredicate(Predicate P)</div><div class="ttdoc">Set the predicate for this instruction to the specified value. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00719">InstrTypes.h:719</a></div></div>
<div class="ttc" id="classllvm_1_1ExtractValueInst_html_ab87e7c5a729885396b3b045ad375e4b8"><div class="ttname"><a href="classllvm_1_1ExtractValueInst.html#ab87e7c5a729885396b3b045ad375e4b8">llvm::ExtractValueInst::getAggregateOperand</a></div><div class="ttdeci">Value * getAggregateOperand()</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01790">Instructions.h:1790</a></div></div>
<div class="ttc" id="classllvm_1_1StringSwitch_html_a2ff0de0d109fdde7fada2091c69183b2"><div class="ttname"><a href="classllvm_1_1StringSwitch.html#a2ff0de0d109fdde7fada2091c69183b2">llvm::StringSwitch::Default</a></div><div class="ttdeci">R Default(const T &amp;Value) const </div><div class="ttdef"><b>Definition:</b> <a href="StringSwitch_8h_source.html#l00111">StringSwitch.h:111</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a5fa9b8e1842b354f64c1ba6be0a4a17f"><div class="ttname"><a href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">llvm::User::setOperand</a></div><div class="ttdeci">void setOperand(unsigned i, Value *Val)</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00092">User.h:92</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00101">Debug.cpp:101</a></div></div>
<div class="ttc" id="classllvm_1_1GEPOperator_html"><div class="ttname"><a href="classllvm_1_1GEPOperator.html">llvm::GEPOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="Operator_8h_source.html#l00357">Operator.h:357</a></div></div>
<div class="ttc" id="namespacestd_html_ab8424022895aee3e366fb9a32f2883cb"><div class="ttname"><a href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a></div><div class="ttdeci">void swap(llvm::BitVector &amp;LHS, llvm::BitVector &amp;RHS)</div><div class="ttdoc">Implement std::swap in terms of BitVector swap. </div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00591">BitVector.h:591</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a72873ed64b7be01507a2248b8e756ec8"><div class="ttname"><a href="classllvm_1_1Function.html#a72873ed64b7be01507a2248b8e756ec8">llvm::Function::getAttributes</a></div><div class="ttdeci">AttributeSet getAttributes() const </div><div class="ttdoc">Return the attribute list for this Function. </div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00170">Function.h:170</a></div></div>
<div class="ttc" id="classllvm_1_1GetElementPtrInst_html_afe38363fd2129dd5797d12097b54d834"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html#afe38363fd2129dd5797d12097b54d834">llvm::GetElementPtrInst::accumulateConstantOffset</a></div><div class="ttdeci">bool accumulateConstantOffset(const DataLayout &amp;DL, APInt &amp;Offset) const </div><div class="ttdoc">Accumulate the constant address offset of this GEP if possible. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l01430">Instructions.cpp:1430</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html_a150b33ecedbc8c7803c2db8040fbe3f8"><div class="ttname"><a href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">llvm::CallInst::getArgOperand</a></div><div class="ttdeci">Value * getArgOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01245">Instructions.h:1245</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a2751d6136a2819749dcef65dc19a4246"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a2751d6136a2819749dcef65dc19a4246">llvm::CmpInst::ICMP_SLE</a></div><div class="ttdoc">signed less or equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00681">InstrTypes.h:681</a></div></div>
<div class="ttc" id="classllvm_1_1VectorType_html"><div class="ttname"><a href="classllvm_1_1VectorType.html">llvm::VectorType</a></div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00358">DerivedTypes.h:358</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html_a2215d5a274d2cf9c064e69452ce17f03"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a2215d5a274d2cf9c064e69452ce17f03">llvm::BinaryOperator::isNeg</a></div><div class="ttdeci">static bool isNeg(const Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l01926">Instructions.cpp:1926</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantArray_html"><div class="ttname"><a href="classllvm_1_1ConstantArray.html">llvm::ConstantArray</a></div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00340">Constants.h:340</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html"><div class="ttname"><a href="classllvm_1_1APInt.html">llvm::APInt</a></div><div class="ttdoc">Class for arbitrary precision integers. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00075">APInt.h:75</a></div></div>
<div class="ttc" id="CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2README_8txt_source.html#l00036">CodeGen/README.txt:36</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a6e328feb83afa5cf1c966d6704e43fc1"><div class="ttname"><a href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">llvm::Type::isIntegerTy</a></div><div class="ttdeci">bool isIntegerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00196">Type.h:196</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a5ac211f24970dea81fa9a7118a8ce36b"><div class="ttname"><a href="classllvm_1_1Instruction.html#a5ac211f24970dea81fa9a7118a8ce36b">llvm::Instruction::use_back</a></div><div class="ttdeci">Instruction * use_back()</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00049">Instruction.h:49</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a3ffbacd388121d5e3ba1c4360b7449d0"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a3ffbacd388121d5e3ba1c4360b7449d0">llvm::PatternMatch::m_PtrToInt</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::PtrToInt &gt; m_PtrToInt(const OpTy &amp;Op)</div><div class="ttdoc">m_PtrToInt </div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00671">PatternMatch.h:671</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a5ef55181ae0bb0f5c561b9a29087b1e5"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a5ef55181ae0bb0f5c561b9a29087b1e5">llvm::BasicBlock::getSinglePredecessor</a></div><div class="ttdeci">BasicBlock * getSinglePredecessor()</div><div class="ttdoc">Return this block if it has a single predecessor block. Otherwise return a null pointer. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00183">BasicBlock.cpp:183</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a89f9afb2a0a0c066924fee31fed8b00b"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a89f9afb2a0a0c066924fee31fed8b00b">llvm::InstCombiner::visitSwitchInst</a></div><div class="ttdeci">Instruction * visitSwitchInst(SwitchInst &amp;SI)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l01656">InstructionCombining.cpp:1656</a></div></div>
<div class="ttc" id="PatternMatch_8h_html"><div class="ttname"><a href="PatternMatch_8h.html">PatternMatch.h</a></div></div>
<div class="ttc" id="InstructionCombining_8cpp_html_a1ea2b997ffc11a09339f80ef8287c8d5"><div class="ttname"><a href="InstructionCombining_8cpp.html#a1ea2b997ffc11a09339f80ef8287c8d5">TryToSinkInstruction</a></div><div class="ttdeci">static bool TryToSinkInstruction(Instruction *I, BasicBlock *DestBlock)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l02176">InstructionCombining.cpp:2176</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_aaece37eef26aed797aa4b200c9de2bb8"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#aaece37eef26aed797aa4b200c9de2bb8">llvm::InstCombiner::visitExtractValueInst</a></div><div class="ttdeci">Instruction * visitExtractValueInst(ExtractValueInst &amp;EV)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l01680">InstructionCombining.cpp:1680</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a6648755fa72fec0f698deb53b6123101"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a6648755fa72fec0f698deb53b6123101">llvm::InstCombiner::ID</a></div><div class="ttdeci">static char ID</div><div class="ttdef"><b>Definition:</b> <a href="InstCombine_8h_source.html#l00089">InstCombine.h:89</a></div></div>
<div class="ttc" id="classllvm_1_1ExtractValueInst_html_ab6aac2fda018dd26fa4cb43b8b15846f"><div class="ttname"><a href="classllvm_1_1ExtractValueInst.html#ab6aac2fda018dd26fa4cb43b8b15846f">llvm::ExtractValueInst::idx_end</a></div><div class="ttdeci">idx_iterator idx_end() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01788">Instructions.h:1788</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_add5ee99852e9927d0777e74572c91708"><div class="ttname"><a href="classllvm_1_1SwitchInst.html#add5ee99852e9927d0777e74572c91708">llvm::SwitchInst::getCondition</a></div><div class="ttdeci">Value * getCondition() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02610">Instructions.h:2610</a></div></div>
<div class="ttc" id="classllvm_1_1value__use__iterator_html_a94ea49d6aa255c31746f4f2b8cbf4443"><div class="ttname"><a href="classllvm_1_1value__use__iterator.html#a94ea49d6aa255c31746f4f2b8cbf4443">llvm::value_use_iterator::getUse</a></div><div class="ttdeci">Use &amp; getUse() const </div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00210">Use.h:210</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a963c4f881fbc3e316e8260bf98453ce4"><div class="ttname"><a href="classllvm_1_1APInt.html#a963c4f881fbc3e316e8260bf98453ce4">llvm::APInt::isMinValue</a></div><div class="ttdeci">bool isMinValue() const </div><div class="ttdoc">Determine if this is the smallest unsigned value. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00365">APInt.h:365</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombineWorklist_html_a57c8e1e6503c4ef44f00954dfdbaf0da"><div class="ttname"><a href="classllvm_1_1InstCombineWorklist.html#a57c8e1e6503c4ef44f00954dfdbaf0da">llvm::InstCombineWorklist::AddInitialGroup</a></div><div class="ttdeci">void AddInitialGroup(Instruction *const *List, unsigned NumEntries)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineWorklist_8h_source.html#l00053">InstCombineWorklist.h:53</a></div></div>
<div class="ttc" id="ConstantFolding_8h_html"><div class="ttname"><a href="ConstantFolding_8h.html">ConstantFolding.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_a684cfe02c582e8d75cd6d457e63e6c25"><div class="ttname"><a href="namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">llvm::APIntOps::And</a></div><div class="ttdeci">APInt And(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise AND function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01840">APInt.h:1840</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a8a045d250952c0867382a9840ee18fdf"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">llvm::SmallVectorTemplateCommon&lt; T &gt;::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00112">SmallVector.h:112</a></div></div>
<div class="ttc" id="ValueHandle_8h_html"><div class="ttname"><a href="ValueHandle_8h.html">ValueHandle.h</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_ab6379d689ffcbeb12778a3fb9623eb9a"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#ab6379d689ffcbeb12778a3fb9623eb9a">llvm::InstCombiner::visitLandingPadInst</a></div><div class="ttdeci">Instruction * visitLandingPadInst(LandingPadInst &amp;LI)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l01874">InstructionCombining.cpp:1874</a></div></div>
<div class="ttc" id="classllvm_1_1InsertValueInst_html_a6df8a5db1907e4cfed3029c0c786a40b"><div class="ttname"><a href="classllvm_1_1InsertValueInst.html#a6df8a5db1907e4cfed3029c0c786a40b">llvm::InsertValueInst::Create</a></div><div class="ttdeci">static InsertValueInst * Create(Value *Agg, Value *Val, ArrayRef&lt; unsigned &gt; Idxs, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01881">Instructions.h:1881</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a413abcab8dbc3900fc2fde96a5d8fca6"><div class="ttname"><a href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">llvm::Value::use_begin</a></div><div class="ttdeci">use_iterator use_begin()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00150">Value.h:150</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_afa29f0cd072ab9b3a2630681ffe5760f"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#afa29f0cd072ab9b3a2630681ffe5760f">llvm::ConstantExpr::getNeg</a></div><div class="ttdeci">static Constant * getNeg(Constant *C, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02021">Constants.cpp:2021</a></div></div>
<div class="ttc" id="GetElementPtrTypeIterator_8h_html"><div class="ttname"><a href="GetElementPtrTypeIterator_8h.html">GetElementPtrTypeIterator.h</a></div></div>
<div class="ttc" id="Transforms_2Scalar_8h_html"><div class="ttname"><a href="Transforms_2Scalar_8h.html">Scalar.h</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a84309bb8c34c8bc5694ec5d48dd8668f"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a84309bb8c34c8bc5694ec5d48dd8668f">llvm::BranchInst::getCondition</a></div><div class="ttdeci">Value * getCondition() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02394">Instructions.h:2394</a></div></div>
<div class="ttc" id="classllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l01149">CommandLine.h:1149</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a39197eb94db0d5d99219a826fef11477"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a39197eb94db0d5d99219a826fef11477">llvm::Intrinsic::invariant_start</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l01253">Intrinsics.h:1253</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a30dd396c5b40cd86c1591872e574ccdf"><div class="ttname"><a href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">llvm::Type::getInt32Ty</a></div><div class="ttdeci">static IntegerType * getInt32Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00241">Type.cpp:241</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_a48f1c68131a864a29455ce86c1d571b2"><div class="ttname"><a href="classllvm_1_1SwitchInst.html#a48f1c68131a864a29455ce86c1d571b2">llvm::SwitchInst::setCondition</a></div><div class="ttdeci">void setCondition(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02611">Instructions.h:2611</a></div></div>
<div class="ttc" id="InstructionCombining_8cpp_html_a7b411f919e9298c8e86fae1794c3fceca6a371cd3d7534a425c90e324bbed75aa"><div class="ttname"><a href="InstructionCombining_8cpp.html#a7b411f919e9298c8e86fae1794c3fceca6a371cd3d7534a425c90e324bbed75aa">GNU_CXX_Personality</a></div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l01833">InstructionCombining.cpp:1833</a></div></div>
<div class="ttc" id="InstructionCombining_8cpp_html_a9360db2a972441c49cdbbabb5b20cc27"><div class="ttname"><a href="InstructionCombining_8cpp.html#a9360db2a972441c49cdbbabb5b20cc27">instructions</a></div><div class="ttdeci">Combine redundant instructions</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l00087">InstructionCombining.cpp:87</a></div></div>
<div class="ttc" id="classllvm_1_1GetElementPtrInst_html_a63d9ee4f6ab51fd7586c7ad7510a5b33"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html#a63d9ee4f6ab51fd7586c7ad7510a5b33">llvm::GetElementPtrInst::idx_end</a></div><div class="ttdeci">op_iterator idx_end()</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00787">Instructions.h:787</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a573bcd571c938fce863525330bbfc4b8"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a573bcd571c938fce863525330bbfc4b8">llvm::CmpInst::ICMP_UGE</a></div><div class="ttdoc">unsigned greater or equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00675">InstrTypes.h:675</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a95107a51be6c979110631a4c9145d6e0"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a95107a51be6c979110631a4c9145d6e0">llvm::Intrinsic::umul_with_overflow</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02446">Intrinsics.h:2446</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html_ab87cae7de3df7420fff131c5305d5b6f"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#ab87cae7de3df7420fff131c5305d5b6f">llvm::BinaryOperator::isFNeg</a></div><div class="ttdeci">static bool isFNeg(const Value *V, bool IgnoreZeroSign=false)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l01934">Instructions.cpp:1934</a></div></div>
<div class="ttc" id="classllvm_1_1LandingPadInst_html_aba66c0ac59ae4b9a08ae5ed04cc8e3db"><div class="ttname"><a href="classllvm_1_1LandingPadInst.html#aba66c0ac59ae4b9a08ae5ed04cc8e3db">llvm::LandingPadInst::isCatch</a></div><div class="ttdeci">bool isCatch(unsigned Idx) const </div><div class="ttdoc">isCatch - Return &amp;#39;true&amp;#39; if the clause and index Idx is a catch clause. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02240">Instructions.h:2240</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a5cb76a65b6524dba1493dd2b9dc3abbe"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">TerminatorInst * getTerminator()</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00120">BasicBlock.cpp:120</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a085b82f074c28030fb8e194377ed2d0c"><div class="ttname"><a href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">llvm::Value::hasOneUse</a></div><div class="ttdeci">bool hasOneUse() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00161">Value.h:161</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90afb99c5b4c79f8419d2018d9499d15a93"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90afb99c5b4c79f8419d2018d9499d15a93">llvm::Intrinsic::objectsize</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02214">Intrinsics.h:2214</a></div></div>
<div class="ttc" id="InstructionCombining_8cpp_html_a758068c5c175fc10dcd4b9086abfdfba"><div class="ttname"><a href="InstructionCombining_8cpp.html#a758068c5c175fc10dcd4b9086abfdfba">AddReachableCodeToWorklist</a></div><div class="ttdeci">static bool AddReachableCodeToWorklist(BasicBlock *BB, SmallPtrSet&lt; BasicBlock *, 64 &gt; &amp;Visited, InstCombiner &amp;IC, const DataLayout *TD, const TargetLibraryInfo *TLI)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l02214">InstructionCombining.cpp:2214</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a8a80b27ca29fe2076b9bbdee02c65464"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a8a80b27ca29fe2076b9bbdee02c65464">llvm::CmpInst::FCMP_ONE</a></div><div class="ttdoc">0 1 1 0 True if ordered and operands are unequal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00659">InstrTypes.h:659</a></div></div>
<div class="ttc" id="MemoryBuiltins_8h_html"><div class="ttname"><a href="MemoryBuiltins_8h.html">MemoryBuiltins.h</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayType_html_adf411edc4f135b570ab218079474ce77"><div class="ttname"><a href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">llvm::ArrayType::get</a></div><div class="ttdeci">static ArrayType * get(Type *ElementType, uint64_t NumElements)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00679">Type.cpp:679</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html_a4a4628e91a9c6a339fa61105614fac76"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a4a4628e91a9c6a339fa61105614fac76">llvm::BinaryOperator::Create</a></div><div class="ttdeci">static BinaryOperator * Create(BinaryOps Op, Value *S1, Value *S2, const Twine &amp;Name=Twine(), Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l01834">Instructions.cpp:1834</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a4eff027d00f60bd9ebe9b2ac960e4643"><div class="ttname"><a href="classllvm_1_1APInt.html#a4eff027d00f60bd9ebe9b2ac960e4643">llvm::APInt::sadd_ov</a></div><div class="ttdeci">APInt sadd_ov(const APInt &amp;RHS, bool &amp;Overflow) const </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l01996">APInt.cpp:1996</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a5a7cfa245af120b44ac8a86143bb9e57"><div class="ttname"><a href="classllvm_1_1Type.html#a5a7cfa245af120b44ac8a86143bb9e57">llvm::Type::getPrimitiveSizeInBits</a></div><div class="ttdeci">unsigned getPrimitiveSizeInBits() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00117">Type.cpp:117</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_aed28607f3ab19dda7ec1cf1a0319276f"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#aed28607f3ab19dda7ec1cf1a0319276f">llvm::BasicBlock::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00203">BasicBlock.h:203</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a3505dab06f59c36142a234321cdc3411"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a3505dab06f59c36142a234321cdc3411">llvm::BranchInst::setCondition</a></div><div class="ttdeci">void setCondition(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02399">Instructions.h:2399</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">llvm::CmpInst::ICMP_EQ</a></div><div class="ttdoc">equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00672">InstrTypes.h:672</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a63eff34e14f4840ec2f23581d9d4a126"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a63eff34e14f4840ec2f23581d9d4a126">llvm::Intrinsic::dbg_declare</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l00369">Intrinsics.h:369</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html"><div class="ttname"><a href="classllvm_1_1SwitchInst.html">llvm::SwitchInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02449">Instructions.h:2449</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a41b4c572902601d7499bc287874271d9"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a41b4c572902601d7499bc287874271d9">llvm::Intrinsic::invariant_end</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l01252">Intrinsics.h:1252</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ac38c53f76ef532f91f1666c8a87370e9"><div class="ttname"><a href="classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">llvm::Value::use_empty</a></div><div class="ttdeci">bool use_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00149">Value.h:149</a></div></div>
<div class="ttc" id="InstructionCombining_8cpp_html_a22f50a59f6de5223d536d8b5fc5cd91c"><div class="ttname"><a href="InstructionCombining_8cpp.html#a22f50a59f6de5223d536d8b5fc5cd91c">isAllocSiteRemovable</a></div><div class="ttdeci">static bool isAllocSiteRemovable(Instruction *AI, SmallVectorImpl&lt; WeakVH &gt; &amp;Users, const TargetLibraryInfo *TLI)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l01404">InstructionCombining.cpp:1404</a></div></div>
<div class="ttc" id="Local_8h_html"><div class="ttname"><a href="Local_8h.html">Local.h</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_a3b42845ada2673a44442c88221edf65f"><div class="ttname"><a href="Target_2README_8txt.html#a3b42845ada2673a44442c88221edf65f">l</a></div><div class="ttdeci">Which allows the multiply by constant to be CSE xmm1 movapd xmm2 addsd xmm2 subsd xmm0 mulsd xmm0 ret This doesn t need ffast math support at all This is particularly bad because the llvm gcc frontend is canonicalizing the later into the but clang doesn t have this problem These two functions should generate the same code on big endian int * l</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00138">Target/README.txt:138</a></div></div>
<div class="ttc" id="classllvm_1_1raw__string__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__string__ostream.html">llvm::raw_string_ostream</a></div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00426">raw_ostream.h:426</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00066">Value.h:66</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a021bb7c9aad6003fe8089f6327356c6c"><div class="ttname"><a href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">llvm::Instruction::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const </div><div class="ttdoc">getOpcode() returns a member of one of the enums like Instruction::Add. </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00083">Instruction.h:83</a></div></div>
<div class="ttc" id="Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="Target_2X86_2README_8txt_source.html#l00297">Target/X86/README.txt:297</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombineIRInserter_html"><div class="ttname"><a href="classllvm_1_1InstCombineIRInserter.html">llvm::InstCombineIRInserter</a></div><div class="ttdef"><b>Definition:</b> <a href="InstCombine_8h_source.html#l00058">InstCombine.h:58</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a48790dc28d4007833380faed30c9f44c"><div class="ttname"><a href="classllvm_1_1Value.html#a48790dc28d4007833380faed30c9f44c">llvm::Value::clearSubclassOptionalData</a></div><div class="ttdeci">void clearSubclassOptionalData()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00246">Value.h:246</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_af67d1f3a518964d80a109bb3d9d5cf1e"><div class="ttname"><a href="classllvm_1_1Instruction.html#af67d1f3a518964d80a109bb3d9d5cf1e">llvm::Instruction::moveBefore</a></div><div class="ttdeci">void moveBefore(Instruction *MovePos)</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00091">Instruction.cpp:91</a></div></div>
<div class="ttc" id="namespacellvm_1_1A64CC_html_af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442"><div class="ttname"><a href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">llvm::A64CC::MI</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00035">AArch64BaseInfo.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a9dc5111b1a9b1d5c4652d50f74fe850b"><div class="ttname"><a href="classllvm_1_1Type.html#a9dc5111b1a9b1d5c4652d50f74fe850b">llvm::Type::isSized</a></div><div class="ttdeci">bool isSized() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00278">Type.h:278</a></div></div>
<div class="ttc" id="InstructionCombining_8cpp_html_ae9b9a9768b1162f8db3dec7a8ec71ab1"><div class="ttname"><a href="InstructionCombining_8cpp.html#ae9b9a9768b1162f8db3dec7a8ec71ab1">tryToMoveFreeBeforeNullTest</a></div><div class="ttdeci">static Instruction * tryToMoveFreeBeforeNullTest(CallInst &amp;FI)</div><div class="ttdoc">Move the call to free before a NULL test. </div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l01535">InstructionCombining.cpp:1535</a></div></div>
<div class="ttc" id="classllvm_1_1InvokeInst_html"><div class="ttname"><a href="classllvm_1_1InvokeInst.html">llvm::InvokeInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02841">Instructions.h:2841</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a8684e39c1b3c53d525b96996b5b771ed"><div class="ttname"><a href="classllvm_1_1Value.html#a8684e39c1b3c53d525b96996b5b771ed">llvm::Value::print</a></div><div class="ttdeci">void print(raw_ostream &amp;O, AssemblyAnnotationWriter *AAW=0) const </div><div class="ttdef"><b>Definition:</b> <a href="AsmWriter_8cpp_source.html#l02162">AsmWriter.cpp:2162</a></div></div>
<div class="ttc" id="Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00097">Debug.h:97</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a61b234550f4bfd64d0b3e87cd5aa1fbc"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a61b234550f4bfd64d0b3e87cd5aa1fbc">llvm::InstCombiner::visitGetElementPtrInst</a></div><div class="ttdeci">Instruction * visitGetElementPtrInst(GetElementPtrInst &amp;GEP)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l01076">InstructionCombining.cpp:1076</a></div></div>
<div class="ttc" id="classllvm_1_1LandingPadInst_html_a79bc76d95af0c68ea5d77c5a0743c930"><div class="ttname"><a href="classllvm_1_1LandingPadInst.html#a79bc76d95af0c68ea5d77c5a0743c930">llvm::LandingPadInst::isCleanup</a></div><div class="ttdeci">bool isCleanup() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02224">Instructions.h:2224</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html_a29a16f32075ee4f23cd769701463952c"><div class="ttname"><a href="classllvm_1_1SelectInst.html#a29a16f32075ee4f23cd769701463952c">llvm::SelectInst::getFalseValue</a></div><div class="ttdeci">const Value * getFalseValue() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01468">Instructions.h:1468</a></div></div>
<div class="ttc" id="classllvm_1_1FastMathFlags_html"><div class="ttname"><a href="classllvm_1_1FastMathFlags.html">llvm::FastMathFlags</a></div><div class="ttdoc">Convenience struct for specifying and reasoning about fast-math flags. </div><div class="ttdef"><b>Definition:</b> <a href="Operator_8h_source.html#l00170">Operator.h:170</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a607cecdc5172814382033e001ed11fad">llvm::CmpInst::ICMP_UGT</a></div><div class="ttdoc">unsigned greater than </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00674">InstrTypes.h:674</a></div></div>
<div class="ttc" id="classllvm_1_1PassRegistry_html"><div class="ttname"><a href="classllvm_1_1PassRegistry.html">llvm::PassRegistry</a></div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8h_source.html#l00035">PassRegistry.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_ac5728c914b7e92030243a21e49ab1552"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#ac5728c914b7e92030243a21e49ab1552">llvm::ConstantExpr::getCompare</a></div><div class="ttdeci">static Constant * getCompare(unsigned short pred, Constant *C1, Constant *C2)</div><div class="ttdoc">Return an ICmp or FCmp comparison operator constant expression. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01809">Constants.cpp:1809</a></div></div>
<div class="ttc" id="InstructionCombining_8cpp_html_a0cb157e7251482c582e36d8c63893ae1"><div class="ttname"><a href="InstructionCombining_8cpp.html#a0cb157e7251482c582e36d8c63893ae1">STATISTIC</a></div><div class="ttdeci">STATISTIC(NumCombined,&quot;Number of insts combined&quot;)</div></div>
<div class="ttc" id="OcamlGCPrinter_8cpp_html_a1bdbcdc4205781eefd549946d40ff378"><div class="ttname"><a href="OcamlGCPrinter_8cpp.html#a1bdbcdc4205781eefd549946d40ff378">Y</a></div><div class="ttdeci">static GCMetadataPrinterRegistry::Add&lt; OcamlGCMetadataPrinter &gt; Y(&quot;ocaml&quot;,&quot;ocaml 3.10-compatible collector&quot;)</div></div>
<div class="ttc" id="classllvm_1_1ExtractValueInst_html_a7f9b7f9abcc0d7c98df4c00dc2ae6e7e"><div class="ttname"><a href="classllvm_1_1ExtractValueInst.html#a7f9b7f9abcc0d7c98df4c00dc2ae6e7e">llvm::ExtractValueInst::idx_begin</a></div><div class="ttdeci">idx_iterator idx_begin() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01787">Instructions.h:1787</a></div></div>
<div class="ttc" id="classllvm_1_1GetElementPtrInst_html_a3e10b4db1ded36654416d3aed2bc56ba"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html#a3e10b4db1ded36654416d3aed2bc56ba">llvm::GetElementPtrInst::CreateInBounds</a></div><div class="ttdeci">static GetElementPtrInst * CreateInBounds(Value *Ptr, ArrayRef&lt; Value * &gt; IdxList, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00743">Instructions.h:743</a></div></div>
<div class="ttc" id="namespacellvm_1_1SPII_html_a11e9b8fca4a074643a6a21f444e51406a36b3dd3b84fde3f8494a9b18af131856"><div class="ttname"><a href="namespacellvm_1_1SPII.html#a11e9b8fca4a074643a6a21f444e51406a36b3dd3b84fde3f8494a9b18af131856">llvm::SPII::Store</a></div><div class="ttdef"><b>Definition:</b> <a href="SparcInstrInfo_8h_source.html#l00032">SparcInstrInfo.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_ab1cd5a3713b93a33f89a2086d473cf6e"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ab1cd5a3713b93a33f89a2086d473cf6e">llvm::BasicBlock::getFirstInsertionPt</a></div><div class="ttdeci">iterator getFirstInsertionPt()</div><div class="ttdoc">Returns an iterator to the first instruction in this block that is suitable for inserting a non-PHI i...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00170">BasicBlock.cpp:170</a></div></div>
<div class="ttc" id="InstructionCombining_8cpp_html_a27dc41c474e5376ef7d1865735cfb3dd"><div class="ttname"><a href="InstructionCombining_8cpp.html#a27dc41c474e5376ef7d1865735cfb3dd">shouldMergeGEPs</a></div><div class="ttdeci">static bool shouldMergeGEPs(GEPOperator &amp;GEP, GEPOperator &amp;Src)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l00828">InstructionCombining.cpp:828</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a541533f34077bbbcfb703a90f6d2da9b"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a541533f34077bbbcfb703a90f6d2da9b">llvm::CmpInst::FCMP_OGE</a></div><div class="ttdoc">0 0 1 1 True if ordered and greater than or equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00656">InstrTypes.h:656</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a90cca76dd78688687e0d697679dbc799"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional ldr LCPI1_0 ldr ldr tst movne lsr ldr LCPI1_1 and r0 bx lr it saves an instruction and a register It might be profitable to cse MOVi16 if there are lots of bit immediates with the same bottom half Robert Muth started working on an alternate jump table implementation that does not put the tables in line in the text This is more like the llvm default jump table implementation This might be useful sometime Several revisions of patches are on the mailing beginning while CMP sets them like a subtract Therefore to be able to use CMN for comparisons other than the Z we ll need additional logic to reverse the conditionals associated with the comparison Perhaps a pseudo instruction for the with a post codegen pass to clean up and handle the condition codes See PR5694 for testcase Given the following on int B</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00592">Target/ARM/README.txt:592</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_a1e1ce75d651c76b6869b4218e34618c8"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a1e1ce75d651c76b6869b4218e34618c8">llvm::ConstantExpr::getCast</a></div><div class="ttdeci">static Constant * getCast(unsigned ops, Constant *C, Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01444">Constants.cpp:1444</a></div></div>
<div class="ttc" id="namespacellvm_html_a66ec5bc7aeba0ba7ab0921a92e76ee55"><div class="ttname"><a href="namespacellvm.html#a66ec5bc7aeba0ba7ab0921a92e76ee55">llvm::initializeInstCombine</a></div><div class="ttdeci">void initializeInstCombine(PassRegistry &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l00075">InstructionCombining.cpp:75</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html_ac03c1c093059ea000216af8dd6f2dbf4"><div class="ttname"><a href="classllvm_1_1StoreInst.html#ac03c1c093059ea000216af8dd6f2dbf4">llvm::StoreInst::getPointerOperand</a></div><div class="ttdeci">Value * getPointerOperand()</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00346">Instructions.h:346</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_ad9114d86dbeaa0f40b79579f3836c5c6"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#ad9114d86dbeaa0f40b79579f3836c5c6">llvm::InstCombiner::visitAllocSite</a></div><div class="ttdeci">Instruction * visitAllocSite(Instruction &amp;FI)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l01481">InstructionCombining.cpp:1481</a></div></div>
<div class="ttc" id="namespacellvm_html_a6569d00d31a5d74e563e2f39f82271ab"><div class="ttname"><a href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">llvm::X</a></div><div class="ttdeci">static RegisterPass&lt; NVPTXAllocaHoisting &gt; X(&quot;alloca-hoisting&quot;,&quot;Hoisting alloca instructions in non-entry &quot;&quot;blocks to the entry block&quot;)</div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00052">Instruction.h:52</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90ae365354e47542c51f9bd46e329e3323e"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ae365354e47542c51f9bd46e329e3323e">llvm::Intrinsic::lifetime_start</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l01255">Intrinsics.h:1255</a></div></div>
<div class="ttc" id="InstructionCombining_8cpp_html_aba1a7ea04978c1d1d7f0dd865b24a213"><div class="ttname"><a href="InstructionCombining_8cpp.html#aba1a7ea04978c1d1d7f0dd865b24a213">RecognizePersonality</a></div><div class="ttdeci">static Personality_Type RecognizePersonality(Value *Pers)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l01840">InstructionCombining.cpp:1840</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05ac1aa7b798ba11d2e497d5cce6ce6d3dc"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac1aa7b798ba11d2e497d5cce6ce6d3dc">llvm::CmpInst::ICMP_SGE</a></div><div class="ttdoc">signed greater or equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00679">InstrTypes.h:679</a></div></div>
<div class="ttc" id="classllvm_1_1IntrinsicInst_html"><div class="ttname"><a href="classllvm_1_1IntrinsicInst.html">llvm::IntrinsicInst</a></div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00036">IntrinsicInst.h:36</a></div></div>
<div class="ttc" id="classllvm_1_1InsertValueInst_html"><div class="ttname"><a href="classllvm_1_1InsertValueInst.html">llvm::InsertValueInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01846">Instructions.h:1846</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a3fe9b3ddb71b9fb53d9fc74b3a0710bf"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">llvm::PatternMatch::m_ICmp</a></div><div class="ttdeci">CmpClass_match&lt; LHS, RHS, ICmpInst, ICmpInst::Predicate &gt; m_ICmp(ICmpInst::Predicate &amp;Pred, const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00592">PatternMatch.h:592</a></div></div>
<div class="ttc" id="namespacellvm_html_ac828b9b52935f87659a4adf237f820a3"><div class="ttname"><a href="namespacellvm.html#ac828b9b52935f87659a4adf237f820a3">llvm::gep_type_begin</a></div><div class="ttdeci">gep_type_iterator gep_type_begin(const User *GEP)</div><div class="ttdef"><b>Definition:</b> <a href="GetElementPtrTypeIterator_8h_source.html#l00085">GetElementPtrTypeIterator.h:85</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_1_1CaseIt_html"><div class="ttname"><a href="classllvm_1_1SwitchInst_1_1CaseIt.html">llvm::SwitchInst::CaseIt</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02574">Instructions.h:2574</a></div></div>
<div class="ttc" id="classllvm_1_1Attribute_html_aab7ee4b8fd1d3e7e4cea87868855e60ea490ee0eef953b867ec5f39859c6a03bf"><div class="ttname"><a href="classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60ea490ee0eef953b867ec5f39859c6a03bf">llvm::Attribute::MinSize</a></div><div class="ttdoc">Function must be optimized for size first. </div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00077">Attributes.h:77</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 22:59:05 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
