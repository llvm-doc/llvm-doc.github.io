<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: ThreadSanitizer.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('ThreadSanitizer_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">ThreadSanitizer.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="ThreadSanitizer_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===-- ThreadSanitizer.cpp - race detector -------------------------------===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// This file is a part of ThreadSanitizer, a race detector.</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// The tool is under development, for the details about previous versions see</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// http://code.google.com/p/data-race-test</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// The instrumentation phase is quite simple:</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">//   - Insert calls to run-time library before every memory access.</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">//      - Optimizations may apply to avoid instrumenting some of the accesses.</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">//   - Insert calls at function entry/exit.</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">// The rest is handled by the run-time library.</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div><div class="line"><a name="l00022"></a><span class="lineno"><a class="line" href="ThreadSanitizer_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   22</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;tsan&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instrumentation_8h.html">llvm/Transforms/Instrumentation.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallSet_8h.html">llvm/ADT/SmallSet.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallString_8h.html">llvm/ADT/SmallString.h</a>&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallVector_8h.html">llvm/ADT/SmallVector.h</a>&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="StringExtras_8h.html">llvm/ADT/StringExtras.h</a>&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DataLayout_8h.html">llvm/IR/DataLayout.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Function_8h.html">llvm/IR/Function.h</a>&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IRBuilder_8h.html">llvm/IR/IRBuilder.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IntrinsicInst_8h.html">llvm/IR/IntrinsicInst.h</a>&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Intrinsics_8h.html">llvm/IR/Intrinsics.h</a>&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LLVMContext_8h.html">llvm/IR/LLVMContext.h</a>&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Metadata_8h.html">llvm/IR/Metadata.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Module_8h.html">llvm/IR/Module.h</a>&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Type_8h.html">llvm/IR/Type.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MathExtras_8h.html">llvm/Support/MathExtras.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlockUtils_8h.html">llvm/Transforms/Utils/BasicBlockUtils.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ModuleUtils_8h.html">llvm/Transforms/Utils/ModuleUtils.h</a>&quot;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SpecialCaseList_8h.html">llvm/Transforms/Utils/SpecialCaseList.h</a>&quot;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;std::string&gt;</a>  <a class="code" href="ThreadSanitizer_8cpp.html#a86b233aee0cd756302462f9fd2c6501d">ClBlacklistFile</a>(<span class="stringliteral">&quot;tsan-blacklist&quot;</span>,</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Blacklist file&quot;</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a>  <a class="code" href="ThreadSanitizer_8cpp.html#ae9a6c12fdf4ec6cd050e9c320ceac9f6">ClInstrumentMemoryAccesses</a>(</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="stringliteral">&quot;tsan-instrument-memory-accesses&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>),</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Instrument memory accesses&quot;</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a>  <a class="code" href="ThreadSanitizer_8cpp.html#ae40d4d90566731cab0da1ce17eff68cc">ClInstrumentFuncEntryExit</a>(</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="stringliteral">&quot;tsan-instrument-func-entry-exit&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>),</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Instrument function entry and exit&quot;</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a>  <a class="code" href="ThreadSanitizer_8cpp.html#a729cb67fb2583fad4e5ff29acbbac3e8">ClInstrumentAtomics</a>(</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="stringliteral">&quot;tsan-instrument-atomics&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>),</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Instrument atomics&quot;</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a>  <a class="code" href="ThreadSanitizer_8cpp.html#aaf71ac0f2b61dccfb3e4cd42cc134ea8">ClInstrumentMemIntrinsics</a>(</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="stringliteral">&quot;tsan-instrument-memintrinsics&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>),</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Instrument memintrinsics (memset/memcpy/memmove)&quot;</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<a class="code" href="ThreadSanitizer_8cpp.html#a0a2dafc8a99b0b69c364d81bea56f1fd">STATISTIC</a>(NumInstrumentedReads, <span class="stringliteral">&quot;Number of instrumented reads&quot;</span>);</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<a class="code" href="ThreadSanitizer_8cpp.html#a0a2dafc8a99b0b69c364d81bea56f1fd">STATISTIC</a>(NumInstrumentedWrites, <span class="stringliteral">&quot;Number of instrumented writes&quot;</span>);</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<a class="code" href="ThreadSanitizer_8cpp.html#a0a2dafc8a99b0b69c364d81bea56f1fd">STATISTIC</a>(NumOmittedReadsBeforeWrite,</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;          <span class="stringliteral">&quot;Number of reads ignored due to following writes&quot;</span>);</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<a class="code" href="ThreadSanitizer_8cpp.html#a0a2dafc8a99b0b69c364d81bea56f1fd">STATISTIC</a>(NumAccessesWithBadSize, <span class="stringliteral">&quot;Number of accesses with bad size&quot;</span>);</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<a class="code" href="ThreadSanitizer_8cpp.html#a0a2dafc8a99b0b69c364d81bea56f1fd">STATISTIC</a>(NumInstrumentedVtableWrites, <span class="stringliteral">&quot;Number of vtable ptr writes&quot;</span>);</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<a class="code" href="ThreadSanitizer_8cpp.html#a0a2dafc8a99b0b69c364d81bea56f1fd">STATISTIC</a>(NumInstrumentedVtableReads, <span class="stringliteral">&quot;Number of vtable ptr reads&quot;</span>);</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<a class="code" href="ThreadSanitizer_8cpp.html#a0a2dafc8a99b0b69c364d81bea56f1fd">STATISTIC</a>(NumOmittedReadsFromConstantGlobals,</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;          <span class="stringliteral">&quot;Number of reads from constant globals&quot;</span>);</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<a class="code" href="ThreadSanitizer_8cpp.html#a0a2dafc8a99b0b69c364d81bea56f1fd">STATISTIC</a>(NumOmittedReadsFromVtable, <span class="stringliteral">&quot;Number of vtable reads&quot;</span>);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">/// ThreadSanitizer: instrument the code in module to find races.</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment"></span><span class="keyword">struct </span>ThreadSanitizer : <span class="keyword">public</span> <a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a> {</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  ThreadSanitizer(<a class="code" href="classllvm_1_1StringRef.html">StringRef</a> BlacklistFile = <a class="code" href="classllvm_1_1StringRef.html">StringRef</a>())</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;      : <a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a>(<a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>),</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        TD(0),</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        BlacklistFile(BlacklistFile.empty() ? <a class="code" href="ThreadSanitizer_8cpp.html#a86b233aee0cd756302462f9fd2c6501d">ClBlacklistFile</a></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                                            : BlacklistFile) { }</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *getPassName() <span class="keyword">const</span>;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="keywordtype">bool</span> runOnFunction(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>);</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="keywordtype">bool</span> doInitialization(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;<a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>);</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>;  <span class="comment">// Pass identification, replacement for typeid.</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; <span class="keyword">private</span>:</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="keywordtype">void</span> initializeCallbacks(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;<a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>);</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keywordtype">bool</span> instrumentLoadOrStore(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="keywordtype">bool</span> instrumentAtomic(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <span class="keywordtype">bool</span> instrumentMemIntrinsic(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="keywordtype">void</span> chooseInstructionsToInstrument(<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Instruction*&gt;</a> &amp;Local,</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                                      <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Instruction*&gt;</a> &amp;All);</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="keywordtype">bool</span> addrPointsToConstantData(<a class="code" href="classllvm_1_1Value.html">Value</a> *Addr);</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="keywordtype">int</span> getMemoryAccessFuncIndex(<a class="code" href="classllvm_1_1Value.html">Value</a> *Addr);</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> *TD;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *IntptrTy;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;64&gt;</a> BlacklistFile;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <a class="code" href="classllvm_1_1OwningPtr.html">OwningPtr&lt;SpecialCaseList&gt;</a> <a class="code" href="namespacellvm_1_1XCoreISD.html#aef28e79e1ebefed9020708b2350b1f10adba71479b3d85460f040da54d76bd319">BL</a>;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <a class="code" href="classllvm_1_1IntegerType.html">IntegerType</a> *OrdTy;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="comment">// Callbacks to run-time library are computed in doInitialization.</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *TsanFuncEntry;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *TsanFuncExit;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="comment">// Accesses sizes are powers of two: 1, 2, 4, 8, 16.</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code" href="AddressSanitizer_8cpp.html#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a> = 5;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *TsanRead[<a class="code" href="AddressSanitizer_8cpp.html#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a>];</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *TsanWrite[<a class="code" href="AddressSanitizer_8cpp.html#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a>];</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *TsanAtomicLoad[<a class="code" href="AddressSanitizer_8cpp.html#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a>];</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *TsanAtomicStore[<a class="code" href="AddressSanitizer_8cpp.html#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a>];</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *TsanAtomicRMW[<a class="code" href="classllvm_1_1AtomicRMWInst.html#adbf3dd67a56ac91e0d98970d31e053c0a4afdbe301c2ed66ac3752096b8962226">AtomicRMWInst::LAST_BINOP</a> + 1][<a class="code" href="AddressSanitizer_8cpp.html#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a>];</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *TsanAtomicCAS[<a class="code" href="AddressSanitizer_8cpp.html#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a>];</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *TsanAtomicThreadFence;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *TsanAtomicSignalFence;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *TsanVptrUpdate;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *TsanVptrLoad;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *MemmoveFn, *MemcpyFn, *MemsetFn;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;};</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;}  <span class="comment">// namespace</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ThreadSanitizer::ID</a> = 0;</div><div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="ThreadSanitizer_8cpp.html#ab8b8a7f50eb15e3e8d1112f277535572">  124</a></span>&#160;<a class="code" href="ThreadSanitizer_8cpp.html#ab8b8a7f50eb15e3e8d1112f277535572">INITIALIZE_PASS</a>(ThreadSanitizer, <span class="stringliteral">&quot;tsan&quot;</span>,</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="stringliteral">&quot;ThreadSanitizer: detects data races.&quot;</span>,</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keyword">false</span>, <span class="keyword">false</span>)</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;const <span class="keywordtype">char</span> *ThreadSanitizer::getPassName()<span class="keyword"> const </span>{</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="keywordflow">return</span> <span class="stringliteral">&quot;ThreadSanitizer&quot;</span>;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;}</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a> *<a class="code" href="namespacellvm.html#a5f72f2adfb879a5d476b0ef2e6f48451">llvm::createThreadSanitizerPass</a>(<a class="code" href="classllvm_1_1StringRef.html">StringRef</a> BlacklistFile) {</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> ThreadSanitizer(BlacklistFile);</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;}</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="ThreadSanitizer_8cpp.html#a4328cdcfec6258e6e111866ad3e306d2">  136</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="ThreadSanitizer_8cpp.html#a4328cdcfec6258e6e111866ad3e306d2">checkInterfaceFunction</a>(<a class="code" href="classllvm_1_1Constant.html">Constant</a> *FuncOrBitcast) {</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a> = dyn_cast&lt;Function&gt;(FuncOrBitcast))</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;     <span class="keywordflow">return</span> <a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  FuncOrBitcast-&gt;<a class="code" href="classllvm_1_1Value.html#a1933ce346f4cbadcc151cea432c2b316">dump</a>();</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <a class="code" href="namespacellvm.html#a1f6978055dbb761b380de39070e34bd3">report_fatal_error</a>(<span class="stringliteral">&quot;ThreadSanitizer interface function redefined&quot;</span>);</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;}</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="keywordtype">void</span> ThreadSanitizer::initializeCallbacks(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;<a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>) {</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(M.<a class="code" href="classllvm_1_1Module.html#a0e74af4b7c739f3a14e737c3042b6617">getContext</a>());</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <span class="comment">// Initialize the callbacks.</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  TsanFuncEntry = <a class="code" href="ThreadSanitizer_8cpp.html#a4328cdcfec6258e6e111866ad3e306d2">checkInterfaceFunction</a>(M.<a class="code" href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      <span class="stringliteral">&quot;__tsan_func_entry&quot;</span>, IRB.getVoidTy(), IRB.getInt8PtrTy(), NULL));</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  TsanFuncExit = <a class="code" href="ThreadSanitizer_8cpp.html#a4328cdcfec6258e6e111866ad3e306d2">checkInterfaceFunction</a>(M.<a class="code" href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      <span class="stringliteral">&quot;__tsan_func_exit&quot;</span>, IRB.getVoidTy(), NULL));</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  OrdTy = IRB.getInt32Ty();</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="AddressSanitizer_8cpp.html#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a>; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> ByteSize = 1 &lt;&lt; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> BitSize = ByteSize * 8;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;32&gt;</a> ReadName(<span class="stringliteral">&quot;__tsan_read&quot;</span> + <a class="code" href="namespacellvm.html#a36e9868826fbe487571befb79d9030c5">itostr</a>(ByteSize));</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    TsanRead[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="ThreadSanitizer_8cpp.html#a4328cdcfec6258e6e111866ad3e306d2">checkInterfaceFunction</a>(M.<a class="code" href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        ReadName, IRB.getVoidTy(), IRB.getInt8PtrTy(), NULL));</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;32&gt;</a> WriteName(<span class="stringliteral">&quot;__tsan_write&quot;</span> + <a class="code" href="namespacellvm.html#a36e9868826fbe487571befb79d9030c5">itostr</a>(ByteSize));</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    TsanWrite[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="ThreadSanitizer_8cpp.html#a4328cdcfec6258e6e111866ad3e306d2">checkInterfaceFunction</a>(M.<a class="code" href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        WriteName, IRB.getVoidTy(), IRB.getInt8PtrTy(), NULL));</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = <a class="code" href="classllvm_1_1Type.html#acaf8e4c3e40e01e848c1fad5f05b81cd">Type::getIntNTy</a>(M.<a class="code" href="classllvm_1_1Module.html#a0e74af4b7c739f3a14e737c3042b6617">getContext</a>(), BitSize);</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *PtrTy = Ty-&gt;<a class="code" href="classllvm_1_1Type.html#ab6cc070c37c59589af100aab6f48ef4f">getPointerTo</a>();</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;32&gt;</a> AtomicLoadName(<span class="stringliteral">&quot;__tsan_atomic&quot;</span> + <a class="code" href="namespacellvm.html#a36e9868826fbe487571befb79d9030c5">itostr</a>(BitSize) +</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                                   <span class="stringliteral">&quot;_load&quot;</span>);</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    TsanAtomicLoad[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="ThreadSanitizer_8cpp.html#a4328cdcfec6258e6e111866ad3e306d2">checkInterfaceFunction</a>(M.<a class="code" href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        AtomicLoadName, Ty, PtrTy, OrdTy, NULL));</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;32&gt;</a> AtomicStoreName(<span class="stringliteral">&quot;__tsan_atomic&quot;</span> + <a class="code" href="namespacellvm.html#a36e9868826fbe487571befb79d9030c5">itostr</a>(BitSize) +</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                                    <span class="stringliteral">&quot;_store&quot;</span>);</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    TsanAtomicStore[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="ThreadSanitizer_8cpp.html#a4328cdcfec6258e6e111866ad3e306d2">checkInterfaceFunction</a>(M.<a class="code" href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        AtomicStoreName, IRB.getVoidTy(), PtrTy, Ty, OrdTy,</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        NULL));</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> op = <a class="code" href="classllvm_1_1AtomicRMWInst.html#adbf3dd67a56ac91e0d98970d31e053c0ad76dfbda6c10d959f44e01788b4c0f66">AtomicRMWInst::FIRST_BINOP</a>;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        op &lt;= <a class="code" href="classllvm_1_1AtomicRMWInst.html#adbf3dd67a56ac91e0d98970d31e053c0a4afdbe301c2ed66ac3752096b8962226">AtomicRMWInst::LAST_BINOP</a>; ++op) {</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      TsanAtomicRMW[op][<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = NULL;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *NamePart = NULL;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      <span class="keywordflow">if</span> (op == <a class="code" href="classllvm_1_1AtomicRMWInst.html#adbf3dd67a56ac91e0d98970d31e053c0afc870a548088c5b7a93a34f648889d77">AtomicRMWInst::Xchg</a>)</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        NamePart = <span class="stringliteral">&quot;_exchange&quot;</span>;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op == <a class="code" href="classllvm_1_1AtomicRMWInst.html#adbf3dd67a56ac91e0d98970d31e053c0a0794c42b44989f9d9f1454d79ca0dd88">AtomicRMWInst::Add</a>)</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        NamePart = <span class="stringliteral">&quot;_fetch_add&quot;</span>;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op == <a class="code" href="classllvm_1_1AtomicRMWInst.html#adbf3dd67a56ac91e0d98970d31e053c0a5db6ca0c3e18acd87290f22ccb2ce564">AtomicRMWInst::Sub</a>)</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        NamePart = <span class="stringliteral">&quot;_fetch_sub&quot;</span>;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op == <a class="code" href="classllvm_1_1AtomicRMWInst.html#adbf3dd67a56ac91e0d98970d31e053c0a660a31179bfecd737a256372e5fd6122">AtomicRMWInst::And</a>)</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        NamePart = <span class="stringliteral">&quot;_fetch_and&quot;</span>;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op == <a class="code" href="classllvm_1_1AtomicRMWInst.html#adbf3dd67a56ac91e0d98970d31e053c0a5954f59053121b87ebe0c5fe79942c6e">AtomicRMWInst::Or</a>)</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        NamePart = <span class="stringliteral">&quot;_fetch_or&quot;</span>;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op == <a class="code" href="classllvm_1_1AtomicRMWInst.html#adbf3dd67a56ac91e0d98970d31e053c0a71aab8ee954b6d71a4eed315e8f6556e">AtomicRMWInst::Xor</a>)</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        NamePart = <span class="stringliteral">&quot;_fetch_xor&quot;</span>;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op == <a class="code" href="classllvm_1_1AtomicRMWInst.html#adbf3dd67a56ac91e0d98970d31e053c0afdcdc631cf4fa6829fd7499cd06a306b">AtomicRMWInst::Nand</a>)</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        NamePart = <span class="stringliteral">&quot;_fetch_nand&quot;</span>;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;32&gt;</a> RMWName(<span class="stringliteral">&quot;__tsan_atomic&quot;</span> + <a class="code" href="namespacellvm.html#a36e9868826fbe487571befb79d9030c5">itostr</a>(BitSize) + NamePart);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      TsanAtomicRMW[op][<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="ThreadSanitizer_8cpp.html#a4328cdcfec6258e6e111866ad3e306d2">checkInterfaceFunction</a>(M.<a class="code" href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;          RMWName, Ty, PtrTy, Ty, OrdTy, NULL));</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    }</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;32&gt;</a> AtomicCASName(<span class="stringliteral">&quot;__tsan_atomic&quot;</span> + <a class="code" href="namespacellvm.html#a36e9868826fbe487571befb79d9030c5">itostr</a>(BitSize) +</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                                  <span class="stringliteral">&quot;_compare_exchange_val&quot;</span>);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    TsanAtomicCAS[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="ThreadSanitizer_8cpp.html#a4328cdcfec6258e6e111866ad3e306d2">checkInterfaceFunction</a>(M.<a class="code" href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        AtomicCASName, Ty, PtrTy, Ty, Ty, OrdTy, OrdTy, NULL));</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  }</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  TsanVptrUpdate = <a class="code" href="ThreadSanitizer_8cpp.html#a4328cdcfec6258e6e111866ad3e306d2">checkInterfaceFunction</a>(M.<a class="code" href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      <span class="stringliteral">&quot;__tsan_vptr_update&quot;</span>, IRB.getVoidTy(), IRB.getInt8PtrTy(),</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;      IRB.getInt8PtrTy(), NULL));</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  TsanVptrLoad = <a class="code" href="ThreadSanitizer_8cpp.html#a4328cdcfec6258e6e111866ad3e306d2">checkInterfaceFunction</a>(M.<a class="code" href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      <span class="stringliteral">&quot;__tsan_vptr_read&quot;</span>, IRB.getVoidTy(), IRB.getInt8PtrTy(), NULL));</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  TsanAtomicThreadFence = <a class="code" href="ThreadSanitizer_8cpp.html#a4328cdcfec6258e6e111866ad3e306d2">checkInterfaceFunction</a>(M.<a class="code" href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      <span class="stringliteral">&quot;__tsan_atomic_thread_fence&quot;</span>, IRB.getVoidTy(), OrdTy, NULL));</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  TsanAtomicSignalFence = <a class="code" href="ThreadSanitizer_8cpp.html#a4328cdcfec6258e6e111866ad3e306d2">checkInterfaceFunction</a>(M.<a class="code" href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      <span class="stringliteral">&quot;__tsan_atomic_signal_fence&quot;</span>, IRB.getVoidTy(), OrdTy, NULL));</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  MemmoveFn = <a class="code" href="ThreadSanitizer_8cpp.html#a4328cdcfec6258e6e111866ad3e306d2">checkInterfaceFunction</a>(M.<a class="code" href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="stringliteral">&quot;memmove&quot;</span>, IRB.getInt8PtrTy(), IRB.getInt8PtrTy(),</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    IRB.getInt8PtrTy(), IntptrTy, NULL));</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  MemcpyFn = <a class="code" href="ThreadSanitizer_8cpp.html#a4328cdcfec6258e6e111866ad3e306d2">checkInterfaceFunction</a>(M.<a class="code" href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="stringliteral">&quot;memcpy&quot;</span>, IRB.getInt8PtrTy(), IRB.getInt8PtrTy(), IRB.getInt8PtrTy(),</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    IntptrTy, NULL));</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  MemsetFn = <a class="code" href="ThreadSanitizer_8cpp.html#a4328cdcfec6258e6e111866ad3e306d2">checkInterfaceFunction</a>(M.<a class="code" href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="stringliteral">&quot;memset&quot;</span>, IRB.getInt8PtrTy(), IRB.getInt8PtrTy(), IRB.getInt32Ty(),</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    IntptrTy, NULL));</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;}</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="keywordtype">bool</span> ThreadSanitizer::doInitialization(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M) {</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  TD = getAnalysisIfAvailable&lt;DataLayout&gt;();</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="keywordflow">if</span> (!TD)</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <a class="code" href="namespacellvm_1_1XCoreISD.html#aef28e79e1ebefed9020708b2350b1f10adba71479b3d85460f040da54d76bd319">BL</a>.reset(<a class="code" href="classllvm_1_1SpecialCaseList.html#a764fef55eb958b69088c065dc47e31cc">SpecialCaseList::createOrDie</a>(BlacklistFile));</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="comment">// Always insert a call to __tsan_init into the module&#39;s CTORs.</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(M.<a class="code" href="classllvm_1_1Module.html#a0e74af4b7c739f3a14e737c3042b6617">getContext</a>());</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  IntptrTy = IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a9e003820a7f92a76b0cd56a6cb1bcbc6">getIntPtrTy</a>(TD);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *TsanInit = M.<a class="code" href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(<span class="stringliteral">&quot;__tsan_init&quot;</span>,</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                                          IRB.getVoidTy(), NULL);</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <a class="code" href="namespacellvm.html#ae85c8b3bbab3831fdbb0a4eddebddcdf">appendToGlobalCtors</a>(M, cast&lt;Function&gt;(TsanInit), 0);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;}</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno"><a class="line" href="ThreadSanitizer_8cpp.html#a15cf887d2d1af2b11ee47e28142ac131">  242</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="ThreadSanitizer_8cpp.html#a15cf887d2d1af2b11ee47e28142ac131">isVtableAccess</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *Tag = I-&gt;<a class="code" href="classllvm_1_1Instruction.html#aafa29112cbe02e4adc9b36752c771991">getMetadata</a>(<a class="code" href="classllvm_1_1LLVMContext.html#a0869c4dfee48696ce863fcd367eba52da66682b7e33233c8e51196bbf274726a2">LLVMContext::MD_tbaa</a>))</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">return</span> Tag-&gt;isTBAAVtableAccess();</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;}</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="keywordtype">bool</span> ThreadSanitizer::addrPointsToConstantData(<a class="code" href="classllvm_1_1Value.html">Value</a> *Addr) {</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="comment">// If this is a GEP, just analyze its pointer operand.</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *GEP = dyn_cast&lt;GetElementPtrInst&gt;(Addr))</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    Addr = GEP-&gt;getPointerOperand();</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV = dyn_cast&lt;GlobalVariable&gt;(Addr)) {</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keywordflow">if</span> (GV-&gt;isConstant()) {</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      <span class="comment">// Reads from constant globals can not race with any writes.</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      NumOmittedReadsFromConstantGlobals++;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    }</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *L = dyn_cast&lt;LoadInst&gt;(Addr)) {</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ThreadSanitizer_8cpp.html#a15cf887d2d1af2b11ee47e28142ac131">isVtableAccess</a>(L)) {</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      <span class="comment">// Reads from a vtable pointer can not race with any writes.</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      NumOmittedReadsFromVtable++;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    }</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  }</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;}</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment">// Instrumenting some of the accesses may be proven redundant.</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">// Currently handled:</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">//  - read-before-write (within same BB, no calls between)</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment">// We do not handle some of the patterns that should not survive</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment">// after the classic compiler optimizations.</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">// E.g. two reads from the same temp should be eliminated by CSE,</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">// two writes should be eliminated by DSE, etc.</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">// &#39;Local&#39; is a vector of insns within the same BB (no calls between).</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment">// &#39;All&#39; is a vector of insns that will be instrumented.</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="keywordtype">void</span> ThreadSanitizer::chooseInstructionsToInstrument(</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Instruction*&gt;</a> &amp;Local,</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Instruction*&gt;</a> &amp;All) {</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <a class="code" href="classllvm_1_1SmallSet.html">SmallSet&lt;Value*, 8&gt;</a> WriteTargets;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <span class="comment">// Iterate from the end.</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Instruction*&gt;::reverse_iterator</a> It = Local.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a23aab542398091e1fcfd46b6006d64ac">rbegin</a>(),</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;       E = Local.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#ad696953257cf1c4e5bd12d02146e7287">rend</a>(); It != E; ++It) {</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = *It;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *<a class="code" href="namespacellvm_1_1SPII.html#a11e9b8fca4a074643a6a21f444e51406a36b3dd3b84fde3f8494a9b18af131856">Store</a> = dyn_cast&lt;StoreInst&gt;(I)) {</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      WriteTargets.<a class="code" href="classllvm_1_1SmallSet.html#a8d8348060ccdeeba13fb8bc651dfbf82">insert</a>(<a class="code" href="namespacellvm_1_1SPII.html#a11e9b8fca4a074643a6a21f444e51406a36b3dd3b84fde3f8494a9b18af131856">Store</a>-&gt;getPointerOperand());</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *<a class="code" href="namespacellvm_1_1SPII.html#a11e9b8fca4a074643a6a21f444e51406a5069619ca8fdce305534f3fe85091a0f">Load</a> = cast&lt;LoadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Addr = Load-&gt;<a class="code" href="classllvm_1_1LoadInst.html#ad47eefa1d094f60494b6b927061ca001">getPointerOperand</a>();</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      <span class="keywordflow">if</span> (WriteTargets.<a class="code" href="classllvm_1_1SmallSet.html#ab28aa342862f6d16361be514fd98c22e">count</a>(Addr)) {</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <span class="comment">// We will write to this temp, so no reason to analyze the read.</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        NumOmittedReadsBeforeWrite++;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      }</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <span class="keywordflow">if</span> (addrPointsToConstantData(Addr)) {</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="comment">// Addr points to some constant data -- it can not race with any writes.</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      }</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    }</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    All.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(I);</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  }</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  Local.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;}</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div><div class="line"><a name="l00308"></a><span class="lineno"><a class="line" href="ThreadSanitizer_8cpp.html#accbf04314e7caef9ac81d62928dda8b8">  308</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="ThreadSanitizer_8cpp.html#accbf04314e7caef9ac81d62928dda8b8">isAtomic</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI = dyn_cast&lt;LoadInst&gt;(I))</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keywordflow">return</span> LI-&gt;isAtomic() &amp;&amp; LI-&gt;getSynchScope() == <a class="code" href="namespacellvm.html#af044e7b099a53c587d1568b5b153b1a5a07c0d90622ea528b2c294a075ec0232d">CrossThread</a>;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *SI = dyn_cast&lt;StoreInst&gt;(I))</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordflow">return</span> SI-&gt;isAtomic() &amp;&amp; SI-&gt;getSynchScope() == <a class="code" href="namespacellvm.html#af044e7b099a53c587d1568b5b153b1a5a07c0d90622ea528b2c294a075ec0232d">CrossThread</a>;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="keywordflow">if</span> (isa&lt;AtomicRMWInst&gt;(I))</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <span class="keywordflow">if</span> (isa&lt;AtomicCmpXchgInst&gt;(I))</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <span class="keywordflow">if</span> (isa&lt;FenceInst&gt;(I))</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;}</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="keywordtype">bool</span> ThreadSanitizer::runOnFunction(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>) {</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="keywordflow">if</span> (!TD) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1XCoreISD.html#aef28e79e1ebefed9020708b2350b1f10adba71479b3d85460f040da54d76bd319">BL</a>-&gt;isIn(F)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  initializeCallbacks(*F.<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>());</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction*, 8&gt;</a> RetVec;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction*, 8&gt;</a> AllLoadsAndStores;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction*, 8&gt;</a> LocalLoadsAndStores;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction*, 8&gt;</a> AtomicAccesses;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction*, 8&gt;</a> MemIntrinCalls;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="keywordtype">bool</span> Res = <span class="keyword">false</span>;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="keywordtype">bool</span> HasCalls = <span class="keyword">false</span>;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="comment">// Traverse all instructions, collect loads/stores/returns, check for calls.</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">Function::iterator</a> FI = F.<a class="code" href="classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">begin</a>(), FE = F.<a class="code" href="classllvm_1_1Function.html#ae4ca2261b8b901e415fda7feac5051ea">end</a>();</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;       FI != FE; ++FI) {</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = *FI;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> BI = BB.<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(), BE = BB.<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>();</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;         BI != BE; ++BI) {</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="ThreadSanitizer_8cpp.html#accbf04314e7caef9ac81d62928dda8b8">isAtomic</a>(BI))</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        AtomicAccesses.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(BI);</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;LoadInst&gt;(BI) || isa&lt;StoreInst&gt;(BI))</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        LocalLoadsAndStores.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(BI);</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;ReturnInst&gt;(BI))</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        RetVec.push_back(BI);</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;CallInst&gt;(BI) || isa&lt;InvokeInst&gt;(BI)) {</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        <span class="keywordflow">if</span> (isa&lt;MemIntrinsic&gt;(BI))</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;          MemIntrinCalls.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(BI);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        HasCalls = <span class="keyword">true</span>;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        chooseInstructionsToInstrument(LocalLoadsAndStores, AllLoadsAndStores);</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      }</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    }</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    chooseInstructionsToInstrument(LocalLoadsAndStores, AllLoadsAndStores);</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  }</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="comment">// We have collected all loads and stores.</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="comment">// FIXME: many of these accesses do not need to be checked for races</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <span class="comment">// (e.g. variables that do not escape, etc).</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="comment">// Instrument memory accesses.</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="ThreadSanitizer_8cpp.html#ae9a6c12fdf4ec6cd050e9c320ceac9f6">ClInstrumentMemoryAccesses</a> &amp;&amp; F.<a class="code" href="classllvm_1_1Function.html#a603f8f8d2c9d8de6762092830cf82b13">hasFnAttribute</a>(<a class="code" href="classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60ead9b16070672b3e2ba75616590c7f5678">Attribute::SanitizeThread</a>))</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a> = AllLoadsAndStores.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      Res |= instrumentLoadOrStore(AllLoadsAndStores[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    }</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <span class="comment">// Instrument atomic memory accesses.</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="ThreadSanitizer_8cpp.html#a729cb67fb2583fad4e5ff29acbbac3e8">ClInstrumentAtomics</a>)</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, n = AtomicAccesses.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      Res |= instrumentAtomic(AtomicAccesses[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    }</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="ThreadSanitizer_8cpp.html#aaf71ac0f2b61dccfb3e4cd42cc134ea8">ClInstrumentMemIntrinsics</a>)</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, n = MemIntrinCalls.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      Res |= instrumentMemIntrinsic(MemIntrinCalls[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    }</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <span class="comment">// Instrument function entry/exit points if there were instrumented accesses.</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <span class="keywordflow">if</span> ((Res || HasCalls) &amp;&amp; <a class="code" href="ThreadSanitizer_8cpp.html#ae40d4d90566731cab0da1ce17eff68cc">ClInstrumentFuncEntryExit</a>) {</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(F.<a class="code" href="classllvm_1_1Function.html#a30f2c362631e3728d2f47a8203071ade">getEntryBlock</a>().<a class="code" href="classllvm_1_1BasicBlock.html#a0e73f4e09745bb69fdd7b15232c45428">getFirstNonPHI</a>());</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *ReturnAddress = IRB.CreateCall(</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        <a class="code" href="namespacellvm_1_1Intrinsic.html#a842176a2c8c60a94bc788454b0828ea2">Intrinsic::getDeclaration</a>(F.<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>(), <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a113918fa3c1d3337f44cfc4d961ac82e">Intrinsic::returnaddress</a>),</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        IRB.getInt32(0));</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    IRB.CreateCall(TsanFuncEntry, ReturnAddress);</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, n = RetVec.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRBRet(RetVec[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      IRBRet.<a class="code" href="classllvm_1_1IRBuilder.html#a7e31b0c02df2aeed261b103b790cc01e">CreateCall</a>(TsanFuncExit);</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    }</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    Res = <span class="keyword">true</span>;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  }</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="keywordflow">return</span> Res;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;}</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="keywordtype">bool</span> ThreadSanitizer::instrumentLoadOrStore(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(I);</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <span class="keywordtype">bool</span> IsWrite = isa&lt;StoreInst&gt;(*I);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Addr = IsWrite</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      ? cast&lt;StoreInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)-&gt;<a class="code" href="Delinearization_8cpp.html#a67193aea0752a127930d6f762e685eef">getPointerOperand</a>()</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      : cast&lt;LoadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)-&gt;<a class="code" href="Delinearization_8cpp.html#a67193aea0752a127930d6f762e685eef">getPointerOperand</a>();</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <span class="keywordtype">int</span> Idx = getMemoryAccessFuncIndex(Addr);</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="keywordflow">if</span> (Idx &lt; 0)</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="keywordflow">if</span> (IsWrite &amp;&amp; <a class="code" href="ThreadSanitizer_8cpp.html#a15cf887d2d1af2b11ee47e28142ac131">isVtableAccess</a>(I)) {</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  VPTR : &quot;</span> &lt;&lt; *I &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *StoredValue = cast&lt;StoreInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)-&gt;getValueOperand();</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="comment">// StoredValue does not necessary have a pointer type.</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordflow">if</span> (isa&lt;IntegerType&gt;(StoredValue-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()))</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      StoredValue = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a11d3f8bbc5a14f60879a87175db6695c">CreateIntToPtr</a>(StoredValue, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7badbb741cd23e73ad063428c9cd5fea">getInt8PtrTy</a>());</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="comment">// Call TsanVptrUpdate.</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a902af4d6cb3a421a7f5723d0fc81efd1">CreateCall2</a>(TsanVptrUpdate,</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                    IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(Addr, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7badbb741cd23e73ad063428c9cd5fea">getInt8PtrTy</a>()),</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                    IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(StoredValue, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7badbb741cd23e73ad063428c9cd5fea">getInt8PtrTy</a>()));</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    NumInstrumentedVtableWrites++;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  }</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="keywordflow">if</span> (!IsWrite &amp;&amp; <a class="code" href="ThreadSanitizer_8cpp.html#a15cf887d2d1af2b11ee47e28142ac131">isVtableAccess</a>(I)) {</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a7e31b0c02df2aeed261b103b790cc01e">CreateCall</a>(TsanVptrLoad,</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                   IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(Addr, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7badbb741cd23e73ad063428c9cd5fea">getInt8PtrTy</a>()));</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    NumInstrumentedVtableReads++;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  }</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *OnAccessFunc = IsWrite ? TsanWrite[Idx] : TsanRead[Idx];</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a7e31b0c02df2aeed261b103b790cc01e">CreateCall</a>(OnAccessFunc, IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(Addr, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7badbb741cd23e73ad063428c9cd5fea">getInt8PtrTy</a>()));</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  <span class="keywordflow">if</span> (IsWrite) NumInstrumentedWrites++;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="keywordflow">else</span>         NumInstrumentedReads++;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;}</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div><div class="line"><a name="l00428"></a><span class="lineno"><a class="line" href="ThreadSanitizer_8cpp.html#afdcf7dc835e87d1c94a3f3db62d526a3">  428</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="ThreadSanitizer_8cpp.html#afdcf7dc835e87d1c94a3f3db62d526a3">createOrdering</a>(<a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> *IRB, <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02">AtomicOrdering</a> ord) {</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  uint32_t v = 0;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="keywordflow">switch</span> (ord) {</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02ad1fbbfdf093cdd213b0df02550ac94d0">NotAtomic</a>:              assert(<span class="keyword">false</span>);</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02a531de0ce6ad557d61b2a1c737e767d07">Unordered</a>:              <span class="comment">// Fall-through.</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02a7754cbc42d54bad3979ed1789b780b28">Monotonic</a>:              v = 0; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="comment">// case Consume:                v = 1; break;  // Not specified yet.</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02a53e60dc61e8ffd260c7e21f04054265a">Acquire</a>:                v = 2; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02a489aa5052a55520044e1e82b2da7a336">Release</a>:                v = 3; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02a0fb0d2c15b4a7654025d4db4d2953e93">AcquireRelease</a>:         v = 4; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02ad642db52d1fbfed4f42253c64f23018f">SequentiallyConsistent</a>: v = 5; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  }</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  <span class="keywordflow">return</span> IRB-&gt;<a class="code" href="classllvm_1_1IRBuilderBase.html#ac0e8c554bf1c1e117a74d51df89c137d">getInt32</a>(v);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;}</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div><div class="line"><a name="l00443"></a><span class="lineno"><a class="line" href="ThreadSanitizer_8cpp.html#aeda269d4e21df08fb5dc2facc028e57c">  443</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="ThreadSanitizer_8cpp.html#aeda269d4e21df08fb5dc2facc028e57c">createFailOrdering</a>(<a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> *IRB, <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02">AtomicOrdering</a> ord) {</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  uint32_t v = 0;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <span class="keywordflow">switch</span> (ord) {</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02ad1fbbfdf093cdd213b0df02550ac94d0">NotAtomic</a>:              assert(<span class="keyword">false</span>);</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02a531de0ce6ad557d61b2a1c737e767d07">Unordered</a>:              <span class="comment">// Fall-through.</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02a7754cbc42d54bad3979ed1789b780b28">Monotonic</a>:              v = 0; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="comment">// case Consume:                v = 1; break;  // Not specified yet.</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02a53e60dc61e8ffd260c7e21f04054265a">Acquire</a>:                v = 2; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02a489aa5052a55520044e1e82b2da7a336">Release</a>:                v = 0; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02a0fb0d2c15b4a7654025d4db4d2953e93">AcquireRelease</a>:         v = 2; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02ad642db52d1fbfed4f42253c64f23018f">SequentiallyConsistent</a>: v = 5; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  }</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <span class="keywordflow">return</span> IRB-&gt;<a class="code" href="classllvm_1_1IRBuilderBase.html#ac0e8c554bf1c1e117a74d51df89c137d">getInt32</a>(v);</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;}</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="comment">// If a memset intrinsic gets inlined by the code gen, we will miss races on it.</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="comment">// So, we either need to ensure the intrinsic is not inlined, or instrument it.</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="comment">// We do not instrument memset/memmove/memcpy intrinsics (too complicated),</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="comment">// instead we simply replace them with regular function calls, which are then</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment">// intercepted by the run-time.</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment">// Since tsan is running after everyone else, the calls should not be</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment">// replaced back with intrinsics. If that becomes wrong at some point,</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment">// we will need to call e.g. __tsan_memset to avoid the intrinsics.</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="keywordtype">bool</span> ThreadSanitizer::instrumentMemIntrinsic(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I) {</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(I);</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemSetInst.html">MemSetInst</a> *M = dyn_cast&lt;MemSetInst&gt;(I)) {</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    IRB.<a class="code" href="classllvm_1_1IRBuilder.html#aec1340aa456977785b902da5d5203948">CreateCall3</a>(MemsetFn,</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;      IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(M-&gt;getArgOperand(0), IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7badbb741cd23e73ad063428c9cd5fea">getInt8PtrTy</a>()),</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;      IRB.<a class="code" href="classllvm_1_1IRBuilder.html#afdd8a08bfcbd94f60d166a71a3e79ff3">CreateIntCast</a>(M-&gt;getArgOperand(1), IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6ee1d1e7a13072ef579558d64b208d3c">getInt32Ty</a>(), <span class="keyword">false</span>),</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;      IRB.<a class="code" href="classllvm_1_1IRBuilder.html#afdd8a08bfcbd94f60d166a71a3e79ff3">CreateIntCast</a>(M-&gt;getArgOperand(2), IntptrTy, <span class="keyword">false</span>));</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemTransferInst.html">MemTransferInst</a> *M = dyn_cast&lt;MemTransferInst&gt;(I)) {</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    IRB.<a class="code" href="classllvm_1_1IRBuilder.html#aec1340aa456977785b902da5d5203948">CreateCall3</a>(isa&lt;MemCpyInst&gt;(M) ? MemcpyFn : MemmoveFn,</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(M-&gt;getArgOperand(0), IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7badbb741cd23e73ad063428c9cd5fea">getInt8PtrTy</a>()),</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;      IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(M-&gt;getArgOperand(1), IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7badbb741cd23e73ad063428c9cd5fea">getInt8PtrTy</a>()),</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      IRB.<a class="code" href="classllvm_1_1IRBuilder.html#afdd8a08bfcbd94f60d166a71a3e79ff3">CreateIntCast</a>(M-&gt;getArgOperand(2), IntptrTy, <span class="keyword">false</span>));</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  }</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;}</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment">// Both llvm and ThreadSanitizer atomic operations are based on C++11/C1x</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment">// standards.  For background see C++11 standard.  A slightly older, publically</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment">// available draft of the standard (not entirely up-to-date, but close enough</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment">// for casual browsing) is available here:</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment">// http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2011/n3242.pdf</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment">// The following page contains more background information:</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment">// http://www.hpl.hp.com/personal/Hans_Boehm/c++mm/</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="keywordtype">bool</span> ThreadSanitizer::instrumentAtomic(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I) {</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(I);</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI = dyn_cast&lt;LoadInst&gt;(I)) {</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Addr = LI-&gt;getPointerOperand();</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="keywordtype">int</span> Idx = getMemoryAccessFuncIndex(Addr);</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="keywordflow">if</span> (Idx &lt; 0)</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> ByteSize = 1 &lt;&lt; Idx;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> BitSize = ByteSize * 8;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = <a class="code" href="classllvm_1_1Type.html#acaf8e4c3e40e01e848c1fad5f05b81cd">Type::getIntNTy</a>(IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a66e16f68f09053c6fd906a228b5240bb">getContext</a>(), BitSize);</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *PtrTy = Ty-&gt;<a class="code" href="classllvm_1_1Type.html#ab6cc070c37c59589af100aab6f48ef4f">getPointerTo</a>();</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Args[] = {IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(Addr, PtrTy),</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                     <a class="code" href="ThreadSanitizer_8cpp.html#afdcf7dc835e87d1c94a3f3db62d526a3">createOrdering</a>(&amp;IRB, LI-&gt;getOrdering())};</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="classllvm_1_1CallInst.html#a861226dd056dd2438da26760b8e7a9a0">CallInst::Create</a>(TsanAtomicLoad[Idx],</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                                   <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Value*&gt;</a>(Args));</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <a class="code" href="namespacellvm.html#aa6aa39b86007ee97f50248d2fb1b7220">ReplaceInstWithInst</a>(I, C);</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *SI = dyn_cast&lt;StoreInst&gt;(I)) {</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Addr = SI-&gt;getPointerOperand();</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keywordtype">int</span> Idx = getMemoryAccessFuncIndex(Addr);</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="keywordflow">if</span> (Idx &lt; 0)</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> ByteSize = 1 &lt;&lt; Idx;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> BitSize = ByteSize * 8;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = <a class="code" href="classllvm_1_1Type.html#acaf8e4c3e40e01e848c1fad5f05b81cd">Type::getIntNTy</a>(IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a66e16f68f09053c6fd906a228b5240bb">getContext</a>(), BitSize);</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *PtrTy = Ty-&gt;<a class="code" href="classllvm_1_1Type.html#ab6cc070c37c59589af100aab6f48ef4f">getPointerTo</a>();</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Args[] = {IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(Addr, PtrTy),</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                     IRB.<a class="code" href="classllvm_1_1IRBuilder.html#afdd8a08bfcbd94f60d166a71a3e79ff3">CreateIntCast</a>(SI-&gt;getValueOperand(), Ty, <span class="keyword">false</span>),</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                     <a class="code" href="ThreadSanitizer_8cpp.html#afdcf7dc835e87d1c94a3f3db62d526a3">createOrdering</a>(&amp;IRB, SI-&gt;getOrdering())};</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="classllvm_1_1CallInst.html#a861226dd056dd2438da26760b8e7a9a0">CallInst::Create</a>(TsanAtomicStore[Idx],</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                                   <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Value*&gt;</a>(Args));</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <a class="code" href="namespacellvm.html#aa6aa39b86007ee97f50248d2fb1b7220">ReplaceInstWithInst</a>(I, C);</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1AtomicRMWInst.html">AtomicRMWInst</a> *RMWI = dyn_cast&lt;AtomicRMWInst&gt;(I)) {</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Addr = RMWI-&gt;getPointerOperand();</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keywordtype">int</span> Idx = getMemoryAccessFuncIndex(Addr);</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="keywordflow">if</span> (Idx &lt; 0)</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *F = TsanAtomicRMW[RMWI-&gt;getOperation()][Idx];</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="keywordflow">if</span> (F == NULL)</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> ByteSize = 1 &lt;&lt; Idx;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> BitSize = ByteSize * 8;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = <a class="code" href="classllvm_1_1Type.html#acaf8e4c3e40e01e848c1fad5f05b81cd">Type::getIntNTy</a>(IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a66e16f68f09053c6fd906a228b5240bb">getContext</a>(), BitSize);</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *PtrTy = Ty-&gt;<a class="code" href="classllvm_1_1Type.html#ab6cc070c37c59589af100aab6f48ef4f">getPointerTo</a>();</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Args[] = {IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(Addr, PtrTy),</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                     IRB.<a class="code" href="classllvm_1_1IRBuilder.html#afdd8a08bfcbd94f60d166a71a3e79ff3">CreateIntCast</a>(RMWI-&gt;getValOperand(), Ty, <span class="keyword">false</span>),</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                     <a class="code" href="ThreadSanitizer_8cpp.html#afdcf7dc835e87d1c94a3f3db62d526a3">createOrdering</a>(&amp;IRB, RMWI-&gt;getOrdering())};</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="classllvm_1_1CallInst.html#a861226dd056dd2438da26760b8e7a9a0">CallInst::Create</a>(F, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Value*&gt;</a>(Args));</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <a class="code" href="namespacellvm.html#aa6aa39b86007ee97f50248d2fb1b7220">ReplaceInstWithInst</a>(I, C);</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1AtomicCmpXchgInst.html">AtomicCmpXchgInst</a> *CASI = dyn_cast&lt;AtomicCmpXchgInst&gt;(I)) {</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Addr = CASI-&gt;getPointerOperand();</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="keywordtype">int</span> Idx = getMemoryAccessFuncIndex(Addr);</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keywordflow">if</span> (Idx &lt; 0)</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> ByteSize = 1 &lt;&lt; Idx;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> BitSize = ByteSize * 8;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = <a class="code" href="classllvm_1_1Type.html#acaf8e4c3e40e01e848c1fad5f05b81cd">Type::getIntNTy</a>(IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a66e16f68f09053c6fd906a228b5240bb">getContext</a>(), BitSize);</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *PtrTy = Ty-&gt;<a class="code" href="classllvm_1_1Type.html#ab6cc070c37c59589af100aab6f48ef4f">getPointerTo</a>();</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Args[] = {IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(Addr, PtrTy),</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                     IRB.<a class="code" href="classllvm_1_1IRBuilder.html#afdd8a08bfcbd94f60d166a71a3e79ff3">CreateIntCast</a>(CASI-&gt;getCompareOperand(), Ty, <span class="keyword">false</span>),</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                     IRB.<a class="code" href="classllvm_1_1IRBuilder.html#afdd8a08bfcbd94f60d166a71a3e79ff3">CreateIntCast</a>(CASI-&gt;getNewValOperand(), Ty, <span class="keyword">false</span>),</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                     <a class="code" href="ThreadSanitizer_8cpp.html#afdcf7dc835e87d1c94a3f3db62d526a3">createOrdering</a>(&amp;IRB, CASI-&gt;getOrdering()),</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                     <a class="code" href="ThreadSanitizer_8cpp.html#aeda269d4e21df08fb5dc2facc028e57c">createFailOrdering</a>(&amp;IRB, CASI-&gt;getOrdering())};</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="classllvm_1_1CallInst.html#a861226dd056dd2438da26760b8e7a9a0">CallInst::Create</a>(TsanAtomicCAS[Idx], <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Value*&gt;</a>(Args));</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <a class="code" href="namespacellvm.html#aa6aa39b86007ee97f50248d2fb1b7220">ReplaceInstWithInst</a>(I, C);</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1FenceInst.html">FenceInst</a> *FI = dyn_cast&lt;FenceInst&gt;(I)) {</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Args[] = {<a class="code" href="ThreadSanitizer_8cpp.html#afdcf7dc835e87d1c94a3f3db62d526a3">createOrdering</a>(&amp;IRB, FI-&gt;getOrdering())};</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *F = FI-&gt;getSynchScope() == <a class="code" href="namespacellvm.html#af044e7b099a53c587d1568b5b153b1a5a01517d08d0f4c3f85b82435346b96fe7">SingleThread</a> ?</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        TsanAtomicSignalFence : TsanAtomicThreadFence;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="classllvm_1_1CallInst.html#a861226dd056dd2438da26760b8e7a9a0">CallInst::Create</a>(F, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Value*&gt;</a>(Args));</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <a class="code" href="namespacellvm.html#aa6aa39b86007ee97f50248d2fb1b7220">ReplaceInstWithInst</a>(I, C);</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  }</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;}</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="keywordtype">int</span> ThreadSanitizer::getMemoryAccessFuncIndex(<a class="code" href="classllvm_1_1Value.html">Value</a> *Addr) {</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *OrigPtrTy = Addr-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *OrigTy = cast&lt;PointerType&gt;(OrigPtrTy)-&gt;getElementType();</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  assert(OrigTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9dc5111b1a9b1d5c4652d50f74fe850b">isSized</a>());</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  uint32_t TypeSize = TD-&gt;getTypeStoreSizeInBits(OrigTy);</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  <span class="keywordflow">if</span> (TypeSize != 8  &amp;&amp; TypeSize != 16 &amp;&amp;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;      TypeSize != 32 &amp;&amp; TypeSize != 64 &amp;&amp; TypeSize != 128) {</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    NumAccessesWithBadSize++;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="comment">// Ignore all unusual sizes.</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  }</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  <span class="keywordtype">size_t</span> Idx = <a class="code" href="namespacellvm.html#abdaf1eaf6120421977095bd97eee892e">countTrailingZeros</a>(TypeSize / 8);</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  assert(Idx &lt; <a class="code" href="AddressSanitizer_8cpp.html#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a>);</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  <span class="keywordflow">return</span> Idx;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;}</div><div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00127">SmallVector.h:127</a></div></div>
<div class="ttc" id="SmallSet_8h_html"><div class="ttname"><a href="SmallSet_8h.html">SmallSet.h</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00236">SmallVector.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html"><div class="ttname"><a href="classllvm_1_1DataLayout.html">llvm::DataLayout</a></div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00098">DataLayout.h:98</a></div></div>
<div class="ttc" id="classllvm_1_1AtomicRMWInst_html_adbf3dd67a56ac91e0d98970d31e053c0ad76dfbda6c10d959f44e01788b4c0f66"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#adbf3dd67a56ac91e0d98970d31e053c0ad76dfbda6c10d959f44e01788b4c0f66">llvm::AtomicRMWInst::FIRST_BINOP</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00589">Instructions.h:589</a></div></div>
<div class="ttc" id="namespacellvm_html_aa6aa39b86007ee97f50248d2fb1b7220"><div class="ttname"><a href="namespacellvm.html#aa6aa39b86007ee97f50248d2fb1b7220">llvm::ReplaceInstWithInst</a></div><div class="ttdeci">void ReplaceInstWithInst(BasicBlock::InstListType &amp;BIL, BasicBlock::iterator &amp;BI, Instruction *I)</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00216">BasicBlockUtils.cpp:216</a></div></div>
<div class="ttc" id="namespacellvm_1_1SPII_html_a11e9b8fca4a074643a6a21f444e51406a5069619ca8fdce305534f3fe85091a0f"><div class="ttname"><a href="namespacellvm_1_1SPII.html#a11e9b8fca4a074643a6a21f444e51406a5069619ca8fdce305534f3fe85091a0f">llvm::SPII::Load</a></div><div class="ttdef"><b>Definition:</b> <a href="SparcInstrInfo_8h_source.html#l00031">SparcInstrInfo.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a6fe2f06b8a4b2c3d6308afb223a0238a"><div class="ttname"><a href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00072">Instruction.cpp:72</a></div></div>
<div class="ttc" id="namespacellvm_html_abf74b2f0dbae96f4708d3e407b36df02ad642db52d1fbfed4f42253c64f23018f"><div class="ttname"><a href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02ad642db52d1fbfed4f42253c64f23018f">llvm::SequentiallyConsistent</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00044">Instructions.h:44</a></div></div>
<div class="ttc" id="namespacellvm_1_1XCoreISD_html_aef28e79e1ebefed9020708b2350b1f10adba71479b3d85460f040da54d76bd319"><div class="ttname"><a href="namespacellvm_1_1XCoreISD.html#aef28e79e1ebefed9020708b2350b1f10adba71479b3d85460f040da54d76bd319">llvm::XCoreISD::BL</a></div><div class="ttdef"><b>Definition:</b> <a href="XCoreISelLowering_8h_source.html#l00034">XCoreISelLowering.h:34</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_afdd8a08bfcbd94f60d166a71a3e79ff3"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#afdd8a08bfcbd94f60d166a71a3e79ff3">llvm::IRBuilder::CreateIntCast</a></div><div class="ttdeci">Value * CreateIntCast(Value *V, Type *DestTy, bool isSigned, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01180">IRBuilder.h:1180</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html"><div class="ttname"><a href="classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">The main container class for the LLVM Intermediate Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00112">Module.h:112</a></div></div>
<div class="ttc" id="Type_8h_html"><div class="ttname"><a href="Type_8h.html">Type.h</a></div></div>
<div class="ttc" id="classllvm_1_1FenceInst_html"><div class="ttname"><a href="classllvm_1_1FenceInst.html">llvm::FenceInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00382">Instructions.h:382</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_ae4ca2261b8b901e415fda7feac5051ea"><div class="ttname"><a href="classllvm_1_1Function.html#ae4ca2261b8b901e415fda7feac5051ea">llvm::Function::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00397">Function.h:397</a></div></div>
<div class="ttc" id="classllvm_1_1AtomicCmpXchgInst_html"><div class="ttname"><a href="classllvm_1_1AtomicCmpXchgInst.html">llvm::AtomicCmpXchgInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00449">Instructions.h:449</a></div></div>
<div class="ttc" id="IntrinsicInst_8h_html"><div class="ttname"><a href="IntrinsicInst_8h.html">IntrinsicInst.h</a></div></div>
<div class="ttc" id="namespacellvm_html_ae85c8b3bbab3831fdbb0a4eddebddcdf"><div class="ttname"><a href="namespacellvm.html#ae85c8b3bbab3831fdbb0a4eddebddcdf">llvm::appendToGlobalCtors</a></div><div class="ttdeci">void appendToGlobalCtors(Module &amp;M, Function *F, int Priority)</div><div class="ttdef"><b>Definition:</b> <a href="ModuleUtils_8cpp_source.html#l00059">ModuleUtils.cpp:59</a></div></div>
<div class="ttc" id="DataLayout_8h_html"><div class="ttname"><a href="DataLayout_8h.html">DataLayout.h</a></div></div>
<div class="ttc" id="namespacellvm_html_abf74b2f0dbae96f4708d3e407b36df02a489aa5052a55520044e1e82b2da7a336"><div class="ttname"><a href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02a489aa5052a55520044e1e82b2da7a336">llvm::Release</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00042">Instructions.h:42</a></div></div>
<div class="ttc" id="Debug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html"><div class="ttname"><a href="classllvm_1_1CallInst.html">llvm::CallInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01161">Instructions.h:1161</a></div></div>
<div class="ttc" id="Metadata_8h_html"><div class="ttname"><a href="Metadata_8h.html">Metadata.h</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a5ccd8260c37f3ac075e782b7df2229e5"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">llvm::IRBuilder::CreatePointerCast</a></div><div class="ttdeci">Value * CreatePointerCast(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01172">IRBuilder.h:1172</a></div></div>
<div class="ttc" id="classllvm_1_1SpecialCaseList_html_a764fef55eb958b69088c065dc47e31cc"><div class="ttname"><a href="classllvm_1_1SpecialCaseList.html#a764fef55eb958b69088c065dc47e31cc">llvm::SpecialCaseList::createOrDie</a></div><div class="ttdeci">static SpecialCaseList * createOrDie(const StringRef Path)</div><div class="ttdef"><b>Definition:</b> <a href="SpecialCaseList_8cpp_source.html#l00074">SpecialCaseList.cpp:74</a></div></div>
<div class="ttc" id="classllvm_1_1MemSetInst_html"><div class="ttname"><a href="classllvm_1_1MemSetInst.html">llvm::MemSetInst</a></div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00190">IntrinsicInst.h:190</a></div></div>
<div class="ttc" id="classllvm_1_1MDNode_html"><div class="ttname"><a href="classllvm_1_1MDNode.html">llvm::MDNode</a></div><div class="ttdoc">MDNode - a tuple of other values. </div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00073">Metadata.h:73</a></div></div>
<div class="ttc" id="namespacellvm_html_af044e7b099a53c587d1568b5b153b1a5a07c0d90622ea528b2c294a075ec0232d"><div class="ttname"><a href="namespacellvm.html#af044e7b099a53c587d1568b5b153b1a5a07c0d90622ea528b2c294a075ec0232d">llvm::CrossThread</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00049">Instructions.h:49</a></div></div>
<div class="ttc" id="LLParser_8cpp_html_a33ece1ef8074506a15d7f86eb76dbae6"><div class="ttname"><a href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a></div><div class="ttdeci">F(f)</div></div>
<div class="ttc" id="classllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00070">Function.h:70</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html"><div class="ttname"><a href="classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00136">Instructions.h:136</a></div></div>
<div class="ttc" id="classllvm_1_1AtomicRMWInst_html_adbf3dd67a56ac91e0d98970d31e053c0a5db6ca0c3e18acd87290f22ccb2ce564"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#adbf3dd67a56ac91e0d98970d31e053c0a5db6ca0c3e18acd87290f22ccb2ce564">llvm::AtomicRMWInst::Sub</a></div><div class="ttdoc">*p = old - v </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00571">Instructions.h:571</a></div></div>
<div class="ttc" id="classllvm_1_1AtomicRMWInst_html"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html">llvm::AtomicRMWInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00556">Instructions.h:556</a></div></div>
<div class="ttc" id="Statistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00109">CommandLine.h:109</a></div></div>
<div class="ttc" id="namespacellvm_html_a1f6978055dbb761b380de39070e34bd3"><div class="ttname"><a href="namespacellvm.html#a1f6978055dbb761b380de39070e34bd3">llvm::report_fatal_error</a></div><div class="ttdeci">LLVM_ATTRIBUTE_NORETURN void report_fatal_error(const char *reason, bool gen_crash_diag=true)</div><div class="ttdef"><b>Definition:</b> <a href="ErrorHandling_8cpp_source.html#l00053">ErrorHandling.cpp:53</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00193">BasicBlock.h:193</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_a6ee1d1e7a13072ef579558d64b208d3c"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a6ee1d1e7a13072ef579558d64b208d3c">llvm::IRBuilderBase::getInt32Ty</a></div><div class="ttdeci">IntegerType * getInt32Ty()</div><div class="ttdoc">Fetch the type representing a 32-bit integer. </div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00310">IRBuilder.h:310</a></div></div>
<div class="ttc" id="ThreadSanitizer_8cpp_html_a729cb67fb2583fad4e5ff29acbbac3e8"><div class="ttname"><a href="ThreadSanitizer_8cpp.html#a729cb67fb2583fad4e5ff29acbbac3e8">ClInstrumentAtomics</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClInstrumentAtomics(&quot;tsan-instrument-atomics&quot;, cl::init(true), cl::desc(&quot;Instrument atomics&quot;), cl::Hidden)</div></div>
<div class="ttc" id="classllvm_1_1AtomicRMWInst_html_adbf3dd67a56ac91e0d98970d31e053c0afc870a548088c5b7a93a34f648889d77"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#adbf3dd67a56ac91e0d98970d31e053c0afc870a548088c5b7a93a34f648889d77">llvm::AtomicRMWInst::Xchg</a></div><div class="ttdoc">*p = v </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00567">Instructions.h:567</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a1933ce346f4cbadcc151cea432c2b316"><div class="ttname"><a href="classllvm_1_1Value.html#a1933ce346f4cbadcc151cea432c2b316">llvm::Value::dump</a></div><div class="ttdeci">void dump() const </div><div class="ttdoc">dump - Support for debugging, callable in GDB: V-&gt;dump() </div><div class="ttdef"><b>Definition:</b> <a href="AsmWriter_8cpp_source.html#l02212">AsmWriter.cpp:2212</a></div></div>
<div class="ttc" id="Delinearization_8cpp_html_a67193aea0752a127930d6f762e685eef"><div class="ttname"><a href="Delinearization_8cpp.html#a67193aea0752a127930d6f762e685eef">getPointerOperand</a></div><div class="ttdeci">static Value * getPointerOperand(Instruction &amp;Inst)</div><div class="ttdef"><b>Definition:</b> <a href="Delinearization_8cpp_source.html#l00072">Delinearization.cpp:72</a></div></div>
<div class="ttc" id="classllvm_1_1AtomicRMWInst_html_adbf3dd67a56ac91e0d98970d31e053c0a660a31179bfecd737a256372e5fd6122"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#adbf3dd67a56ac91e0d98970d31e053c0a660a31179bfecd737a256372e5fd6122">llvm::AtomicRMWInst::And</a></div><div class="ttdoc">*p = old &amp; v </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00573">Instructions.h:573</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a11d3f8bbc5a14f60879a87175db6695c"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a11d3f8bbc5a14f60879a87175db6695c">llvm::IRBuilder::CreateIntToPtr</a></div><div class="ttdeci">Value * CreateIntToPtr(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01128">IRBuilder.h:1128</a></div></div>
<div class="ttc" id="SmallString_8h_html"><div class="ttname"><a href="SmallString_8h.html">SmallString.h</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00035">APInt.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0e73f4e09745bb69fdd7b15232c45428"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0e73f4e09745bb69fdd7b15232c45428">llvm::BasicBlock::getFirstNonPHI</a></div><div class="ttdeci">Instruction * getFirstNonPHI()</div><div class="ttdoc">Returns a pointer to the first instruction in this block that is not a PHINode instruction. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00130">BasicBlock.cpp:130</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html"><div class="ttname"><a href="classllvm_1_1IRBuilder.html">llvm::IRBuilder</a></div><div class="ttdoc">This provides a uniform API for creating instructions and inserting them into a basic block: either a...</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00421">IRBuilder.h:421</a></div></div>
<div class="ttc" id="namespacellvm_1_1CallingConv_html_a4f861731fc6dbfdccc05af5968d98974"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">llvm::CallingConv::ID</a></div><div class="ttdeci">ID</div><div class="ttdoc">LLVM Calling Convention Representation. </div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00026">CallingConv.h:26</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00031">Instruction.h:31</a></div></div>
<div class="ttc" id="namespacellvm_html_abf74b2f0dbae96f4708d3e407b36df02"><div class="ttname"><a href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02">llvm::AtomicOrdering</a></div><div class="ttdeci">AtomicOrdering</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00036">Instructions.h:36</a></div></div>
<div class="ttc" id="namespacellvm_html_abdaf1eaf6120421977095bd97eee892e"><div class="ttname"><a href="namespacellvm.html#abdaf1eaf6120421977095bd97eee892e">llvm::countTrailingZeros</a></div><div class="ttdeci">enable_if_c&lt; std::numeric_limits&lt; T &gt;::is_integer &amp;&amp;!std::numeric_limits&lt; T &gt;::is_signed, std::size_t &gt;::type countTrailingZeros(T Val, ZeroBehavior ZB=ZB_Width)</div><div class="ttdoc">Count number of 0&amp;#39;s from the least significant bit to the most stopping at the first 1...</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00049">MathExtras.h:49</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a></div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00031">ArrayRef.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1SmallString_html"><div class="ttname"><a href="classllvm_1_1SmallString.html">llvm::SmallString</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallString_8h_source.html#l00025">SmallString.h:25</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a842176a2c8c60a94bc788454b0828ea2"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a842176a2c8c60a94bc788454b0828ea2">llvm::Intrinsic::getDeclaration</a></div><div class="ttdeci">Function * getDeclaration(Module *M, ID id, ArrayRef&lt; Type * &gt; Tys=None)</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00683">Function.cpp:683</a></div></div>
<div class="ttc" id="classllvm_1_1SmallSet_html_a8d8348060ccdeeba13fb8bc651dfbf82"><div class="ttname"><a href="classllvm_1_1SmallSet.html#a8d8348060ccdeeba13fb8bc651dfbf82">llvm::SmallSet::insert</a></div><div class="ttdeci">bool insert(const T &amp;V)</div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00059">SmallSet.h:59</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html"><div class="ttname"><a href="classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00255">Instructions.h:255</a></div></div>
<div class="ttc" id="MathExtras_8h_html"><div class="ttname"><a href="MathExtras_8h.html">MathExtras.h</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a88a5e60837674780a9d812d661897ac5"><div class="ttname"><a href="classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">llvm::Function::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00395">Function.h:395</a></div></div>
<div class="ttc" id="classllvm_1_1GetElementPtrInst_html"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html">llvm::GetElementPtrInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00709">Instructions.h:709</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_aa62a4d0672bab180dd339cda25b23b2e"><div class="ttname"><a href="AddressSanitizer_8cpp.html#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a></div><div class="ttdeci">static const size_t kNumberOfAccessSizes</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00106">AddressSanitizer.cpp:106</a></div></div>
<div class="ttc" id="README__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A,*B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00091">README_ALTIVEC.txt:91</a></div></div>
<div class="ttc" id="CommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00314">CommandLine.h:314</a></div></div>
<div class="ttc" id="namespacellvm_html_abf74b2f0dbae96f4708d3e407b36df02a7754cbc42d54bad3979ed1789b780b28"><div class="ttname"><a href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02a7754cbc42d54bad3979ed1789b780b28">llvm::Monotonic</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00039">Instructions.h:39</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html_a96581205e1149f5d70b56f9a83bc841a"><div class="ttname"><a href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">llvm::Module::getOrInsertFunction</a></div><div class="ttdeci">Constant * getOrInsertFunction(StringRef Name, FunctionType *T, AttributeSet AttributeList)</div><div class="ttdef"><b>Definition:</b> <a href="Module_8cpp_source.html#l00138">Module.cpp:138</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00396">SmallVector.h:396</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00044">Type.h:44</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="ThreadSanitizer_8cpp_html_ab8b8a7f50eb15e3e8d1112f277535572"><div class="ttname"><a href="ThreadSanitizer_8cpp.html#ab8b8a7f50eb15e3e8d1112f277535572">INITIALIZE_PASS</a></div><div class="ttdeci">INITIALIZE_PASS(ThreadSanitizer,&quot;tsan&quot;,&quot;ThreadSanitizer: detects data races.&quot;, false, false) const char *ThreadSanitizer</div><div class="ttdef"><b>Definition:</b> <a href="ThreadSanitizer_8cpp_source.html#l00124">ThreadSanitizer.cpp:124</a></div></div>
<div class="ttc" id="classllvm_1_1SmallSet_html"><div class="ttname"><a href="classllvm_1_1SmallSet.html">llvm::SmallSet</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00031">SmallSet.h:31</a></div></div>
<div class="ttc" id="structllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00286">CommandLine.h:286</a></div></div>
<div class="ttc" id="Instrumentation_8h_html"><div class="ttname"><a href="Instrumentation_8h.html">Instrumentation.h</a></div></div>
<div class="ttc" id="namespacellvm_html_af044e7b099a53c587d1568b5b153b1a5a01517d08d0f4c3f85b82435346b96fe7"><div class="ttname"><a href="namespacellvm.html#af044e7b099a53c587d1568b5b153b1a5a01517d08d0f4c3f85b82435346b96fe7">llvm::SingleThread</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00048">Instructions.h:48</a></div></div>
<div class="ttc" id="ThreadSanitizer_8cpp_html_aeda269d4e21df08fb5dc2facc028e57c"><div class="ttname"><a href="ThreadSanitizer_8cpp.html#aeda269d4e21df08fb5dc2facc028e57c">createFailOrdering</a></div><div class="ttdeci">static ConstantInt * createFailOrdering(IRBuilder&lt;&gt; *IRB, AtomicOrdering ord)</div><div class="ttdef"><b>Definition:</b> <a href="ThreadSanitizer_8cpp_source.html#l00443">ThreadSanitizer.cpp:443</a></div></div>
<div class="ttc" id="classllvm_1_1OwningPtr_html"><div class="ttname"><a href="classllvm_1_1OwningPtr.html">llvm::OwningPtr</a></div><div class="ttdef"><b>Definition:</b> <a href="OwningPtr_8h_source.html#l00028">OwningPtr.h:28</a></div></div>
<div class="ttc" id="classllvm_1_1FunctionPass_html"><div class="ttname"><a href="classllvm_1_1FunctionPass.html">llvm::FunctionPass</a></div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00293">Pass.h:293</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_ad47eefa1d094f60494b6b927061ca001"><div class="ttname"><a href="classllvm_1_1LoadInst.html#ad47eefa1d094f60494b6b927061ca001">llvm::LoadInst::getPointerOperand</a></div><div class="ttdeci">Value * getPointerOperand()</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00223">Instructions.h:223</a></div></div>
<div class="ttc" id="classllvm_1_1LLVMContext_html_a0869c4dfee48696ce863fcd367eba52da66682b7e33233c8e51196bbf274726a2"><div class="ttname"><a href="classllvm_1_1LLVMContext.html#a0869c4dfee48696ce863fcd367eba52da66682b7e33233c8e51196bbf274726a2">llvm::LLVMContext::MD_tbaa</a></div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00047">LLVMContext.h:47</a></div></div>
<div class="ttc" id="classllvm_1_1IntegerType_html"><div class="ttname"><a href="classllvm_1_1IntegerType.html">llvm::IntegerType</a></div><div class="ttdoc">Integer representation type. </div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00037">DerivedTypes.h:37</a></div></div>
<div class="ttc" id="ThreadSanitizer_8cpp_html_a0a2dafc8a99b0b69c364d81bea56f1fd"><div class="ttname"><a href="ThreadSanitizer_8cpp.html#a0a2dafc8a99b0b69c364d81bea56f1fd">STATISTIC</a></div><div class="ttdeci">STATISTIC(NumInstrumentedReads,&quot;Number of instrumented reads&quot;)</div></div>
<div class="ttc" id="classllvm_1_1AtomicRMWInst_html_adbf3dd67a56ac91e0d98970d31e053c0a4afdbe301c2ed66ac3752096b8962226"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#adbf3dd67a56ac91e0d98970d31e053c0a4afdbe301c2ed66ac3752096b8962226">llvm::AtomicRMWInst::LAST_BINOP</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00590">Instructions.h:590</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_ad696953257cf1c4e5bd12d02146e7287"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#ad696953257cf1c4e5bd12d02146e7287">llvm::SmallVectorTemplateCommon&lt; T &gt;::rend</a></div><div class="ttdeci">reverse_iterator rend()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00124">SmallVector.h:124</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html">llvm::GlobalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalVariable_8h_source.html#l00035">GlobalVariable.h:35</a></div></div>
<div class="ttc" id="namespacellvm_html_a36e9868826fbe487571befb79d9030c5"><div class="ttname"><a href="namespacellvm.html#a36e9868826fbe487571befb79d9030c5">llvm::itostr</a></div><div class="ttdeci">static std::string itostr(int64_t X)</div><div class="ttdef"><b>Definition:</b> <a href="StringExtras_8h_source.html#l00104">StringExtras.h:104</a></div></div>
<div class="ttc" id="ThreadSanitizer_8cpp_html_ae40d4d90566731cab0da1ce17eff68cc"><div class="ttname"><a href="ThreadSanitizer_8cpp.html#ae40d4d90566731cab0da1ce17eff68cc">ClInstrumentFuncEntryExit</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClInstrumentFuncEntryExit(&quot;tsan-instrument-func-entry-exit&quot;, cl::init(true), cl::desc(&quot;Instrument function entry and exit&quot;), cl::Hidden)</div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_a66e16f68f09053c6fd906a228b5240bb"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a66e16f68f09053c6fd906a228b5240bb">llvm::IRBuilderBase::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00079">IRBuilder.h:79</a></div></div>
<div class="ttc" id="ThreadSanitizer_8cpp_html_accbf04314e7caef9ac81d62928dda8b8"><div class="ttname"><a href="ThreadSanitizer_8cpp.html#accbf04314e7caef9ac81d62928dda8b8">isAtomic</a></div><div class="ttdeci">static bool isAtomic(Instruction *I)</div><div class="ttdef"><b>Definition:</b> <a href="ThreadSanitizer_8cpp_source.html#l00308">ThreadSanitizer.cpp:308</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_ab6cc070c37c59589af100aab6f48ef4f"><div class="ttname"><a href="classllvm_1_1Type.html#ab6cc070c37c59589af100aab6f48ef4f">llvm::Type::getPointerTo</a></div><div class="ttdeci">PointerType * getPointerTo(unsigned AddrSpace=0)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00756">Type.cpp:756</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_a7badbb741cd23e73ad063428c9cd5fea"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a7badbb741cd23e73ad063428c9cd5fea">llvm::IRBuilderBase::getInt8PtrTy</a></div><div class="ttdeci">PointerType * getInt8PtrTy(unsigned AddrSpace=0)</div><div class="ttdoc">Fetch the type representing a pointer to an 8-bit integer value. </div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00335">IRBuilder.h:335</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_ab335e668fd33542ea14a2c7b527e64d3"><div class="ttname"><a href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a></div><div class="ttdeci">The same transformation can work with an even modulo with the addition of a and shrink the compare RHS by the same amount Unless the target supports that transformation probably isn t worthwhile The transformation can also easily be made to work with non zero equality for n</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00723">Target/README.txt:723</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_a9e003820a7f92a76b0cd56a6cb1bcbc6"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a9e003820a7f92a76b0cd56a6cb1bcbc6">llvm::IRBuilderBase::getIntPtrTy</a></div><div class="ttdeci">IntegerType * getIntPtrTy(const DataLayout *DL, unsigned AddrSpace=0)</div><div class="ttdoc">Fetch the type representing a pointer to an integer value. </div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00340">IRBuilder.h:340</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html_a861226dd056dd2438da26760b8e7a9a0"><div class="ttname"><a href="classllvm_1_1CallInst.html#a861226dd056dd2438da26760b8e7a9a0">llvm::CallInst::Create</a></div><div class="ttdeci">static CallInst * Create(Value *Func, ArrayRef&lt; Value * &gt; Args, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01187">Instructions.h:1187</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="namespacellvm_html_abf74b2f0dbae96f4708d3e407b36df02ad1fbbfdf093cdd213b0df02550ac94d0"><div class="ttname"><a href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02ad1fbbfdf093cdd213b0df02550ac94d0">llvm::NotAtomic</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00037">Instructions.h:37</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0b4e7bee9b8575cc7db73329f1a561bd"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">llvm::BasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00195">BasicBlock.h:195</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00880">SmallVector.h:880</a></div></div>
<div class="ttc" id="ThreadSanitizer_8cpp_html_a86b233aee0cd756302462f9fd2c6501d"><div class="ttname"><a href="ThreadSanitizer_8cpp.html#a86b233aee0cd756302462f9fd2c6501d">ClBlacklistFile</a></div><div class="ttdeci">static cl::opt&lt; std::string &gt; ClBlacklistFile(&quot;tsan-blacklist&quot;, cl::desc(&quot;Blacklist file&quot;), cl::Hidden)</div></div>
<div class="ttc" id="Module_8h_html"><div class="ttname"><a href="Module_8h.html">Module.h</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00111">Value.h:111</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_aafa29112cbe02e4adc9b36752c771991"><div class="ttname"><a href="classllvm_1_1Instruction.html#aafa29112cbe02e4adc9b36752c771991">llvm::Instruction::getMetadata</a></div><div class="ttdeci">MDNode * getMetadata(unsigned KindID) const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00140">Instruction.h:140</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a113918fa3c1d3337f44cfc4d961ac82e"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a113918fa3c1d3337f44cfc4d961ac82e">llvm::Intrinsic::returnaddress</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02428">Intrinsics.h:2428</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_ac0e8c554bf1c1e117a74d51df89c137d"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#ac0e8c554bf1c1e117a74d51df89c137d">llvm::IRBuilderBase::getInt32</a></div><div class="ttdeci">ConstantInt * getInt32(uint32_t C)</div><div class="ttdoc">Get a constant 32-bit value. </div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00276">IRBuilder.h:276</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_acaf8e4c3e40e01e848c1fad5f05b81cd"><div class="ttname"><a href="classllvm_1_1Type.html#acaf8e4c3e40e01e848c1fad5f05b81cd">llvm::Type::getIntNTy</a></div><div class="ttdeci">static IntegerType * getIntNTy(LLVMContext &amp;C, unsigned N)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00244">Type.cpp:244</a></div></div>
<div class="ttc" id="ThreadSanitizer_8cpp_html_afdcf7dc835e87d1c94a3f3db62d526a3"><div class="ttname"><a href="ThreadSanitizer_8cpp.html#afdcf7dc835e87d1c94a3f3db62d526a3">createOrdering</a></div><div class="ttdeci">static ConstantInt * createOrdering(IRBuilder&lt;&gt; *IRB, AtomicOrdering ord)</div><div class="ttdef"><b>Definition:</b> <a href="ThreadSanitizer_8cpp_source.html#l00428">ThreadSanitizer.cpp:428</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a30f2c362631e3728d2f47a8203071ade"><div class="ttname"><a href="classllvm_1_1Function.html#a30f2c362631e3728d2f47a8203071ade">llvm::Function::getEntryBlock</a></div><div class="ttdeci">const BasicBlock &amp; getEntryBlock() const </div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00380">Function.h:380</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00101">Debug.cpp:101</a></div></div>
<div class="ttc" id="ModuleUtils_8h_html"><div class="ttname"><a href="ModuleUtils_8h.html">ModuleUtils.h</a></div></div>
<div class="ttc" id="CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2README_8txt_source.html#l00036">CodeGen/README.txt:36</a></div></div>
<div class="ttc" id="ThreadSanitizer_8cpp_html_a4328cdcfec6258e6e111866ad3e306d2"><div class="ttname"><a href="ThreadSanitizer_8cpp.html#a4328cdcfec6258e6e111866ad3e306d2">checkInterfaceFunction</a></div><div class="ttdeci">static Function * checkInterfaceFunction(Constant *FuncOrBitcast)</div><div class="ttdef"><b>Definition:</b> <a href="ThreadSanitizer_8cpp_source.html#l00136">ThreadSanitizer.cpp:136</a></div></div>
<div class="ttc" id="classllvm_1_1AtomicRMWInst_html_adbf3dd67a56ac91e0d98970d31e053c0afdcdc631cf4fa6829fd7499cd06a306b"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#adbf3dd67a56ac91e0d98970d31e053c0afdcdc631cf4fa6829fd7499cd06a306b">llvm::AtomicRMWInst::Nand</a></div><div class="ttdoc">*p = ~old &amp; v </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00575">Instructions.h:575</a></div></div>
<div class="ttc" id="Function_8h_html"><div class="ttname"><a href="Function_8h.html">Function.h</a></div></div>
<div class="ttc" id="classllvm_1_1AtomicRMWInst_html_adbf3dd67a56ac91e0d98970d31e053c0a71aab8ee954b6d71a4eed315e8f6556e"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#adbf3dd67a56ac91e0d98970d31e053c0a71aab8ee954b6d71a4eed315e8f6556e">llvm::AtomicRMWInst::Xor</a></div><div class="ttdoc">*p = old ^ v </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00579">Instructions.h:579</a></div></div>
<div class="ttc" id="classllvm_1_1SmallSet_html_ab28aa342862f6d16361be514fd98c22e"><div class="ttname"><a href="classllvm_1_1SmallSet.html#ab28aa342862f6d16361be514fd98c22e">llvm::SmallSet::count</a></div><div class="ttdeci">bool count(const T &amp;V) const </div><div class="ttdoc">count - Return true if the element is in the set. </div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00048">SmallSet.h:48</a></div></div>
<div class="ttc" id="classllvm_1_1Attribute_html_aab7ee4b8fd1d3e7e4cea87868855e60ead9b16070672b3e2ba75616590c7f5678"><div class="ttname"><a href="classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60ead9b16070672b3e2ba75616590c7f5678">llvm::Attribute::SanitizeThread</a></div><div class="ttdoc">ThreadSanitizer is on. </div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00107">Attributes.h:107</a></div></div>
<div class="ttc" id="StringExtras_8h_html"><div class="ttname"><a href="StringExtras_8h.html">StringExtras.h</a></div></div>
<div class="ttc" id="classllvm_1_1MemTransferInst_html"><div class="ttname"><a href="classllvm_1_1MemTransferInst.html">llvm::MemTransferInst</a></div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00213">IntrinsicInst.h:213</a></div></div>
<div class="ttc" id="classllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l01149">CommandLine.h:1149</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a603f8f8d2c9d8de6762092830cf82b13"><div class="ttname"><a href="classllvm_1_1Function.html#a603f8f8d2c9d8de6762092830cf82b13">llvm::Function::hasFnAttribute</a></div><div class="ttdeci">bool hasFnAttribute(Attribute::AttrKind Kind) const </div><div class="ttdoc">Return true if the function has the attribute. </div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00200">Function.h:200</a></div></div>
<div class="ttc" id="classllvm_1_1AtomicRMWInst_html_adbf3dd67a56ac91e0d98970d31e053c0a0794c42b44989f9d9f1454d79ca0dd88"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#adbf3dd67a56ac91e0d98970d31e053c0a0794c42b44989f9d9f1454d79ca0dd88">llvm::AtomicRMWInst::Add</a></div><div class="ttdoc">*p = old + v </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00569">Instructions.h:569</a></div></div>
<div class="ttc" id="Intrinsics_8h_html"><div class="ttname"><a href="Intrinsics_8h.html">Intrinsics.h</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="ThreadSanitizer_8cpp_html_ae9a6c12fdf4ec6cd050e9c320ceac9f6"><div class="ttname"><a href="ThreadSanitizer_8cpp.html#ae9a6c12fdf4ec6cd050e9c320ceac9f6">ClInstrumentMemoryAccesses</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClInstrumentMemoryAccesses(&quot;tsan-instrument-memory-accesses&quot;, cl::init(true), cl::desc(&quot;Instrument memory accesses&quot;), cl::Hidden)</div></div>
<div class="ttc" id="BasicBlockUtils_8h_html"><div class="ttname"><a href="BasicBlockUtils_8h.html">BasicBlockUtils.h</a></div></div>
<div class="ttc" id="ThreadSanitizer_8cpp_html_aaf71ac0f2b61dccfb3e4cd42cc134ea8"><div class="ttname"><a href="ThreadSanitizer_8cpp.html#aaf71ac0f2b61dccfb3e4cd42cc134ea8">ClInstrumentMemIntrinsics</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClInstrumentMemIntrinsics(&quot;tsan-instrument-memintrinsics&quot;, cl::init(true), cl::desc(&quot;Instrument memintrinsics (memset/memcpy/memmove)&quot;), cl::Hidden)</div></div>
<div class="ttc" id="namespacellvm_html_a5f72f2adfb879a5d476b0ef2e6f48451"><div class="ttname"><a href="namespacellvm.html#a5f72f2adfb879a5d476b0ef2e6f48451">llvm::createThreadSanitizerPass</a></div><div class="ttdeci">FunctionPass * createThreadSanitizerPass(StringRef BlacklistFile=StringRef())</div></div>
<div class="ttc" id="IRBuilder_8h_html"><div class="ttname"><a href="IRBuilder_8h.html">IRBuilder.h</a></div></div>
<div class="ttc" id="LLVMContext_8h_html"><div class="ttname"><a href="LLVMContext_8h.html">LLVMContext.h</a></div></div>
<div class="ttc" id="SpecialCaseList_8h_html"><div class="ttname"><a href="SpecialCaseList_8h.html">SpecialCaseList.h</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a902af4d6cb3a421a7f5723d0fc81efd1"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a902af4d6cb3a421a7f5723d0fc81efd1">llvm::IRBuilder::CreateCall2</a></div><div class="ttdeci">CallInst * CreateCall2(Value *Callee, Value *Arg1, Value *Arg2, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01310">IRBuilder.h:1310</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a23aab542398091e1fcfd46b6006d64ac"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a23aab542398091e1fcfd46b6006d64ac">llvm::SmallVectorTemplateCommon&lt; T &gt;::rbegin</a></div><div class="ttdeci">reverse_iterator rbegin()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00122">SmallVector.h:122</a></div></div>
<div class="ttc" id="namespacellvm_html_abf74b2f0dbae96f4708d3e407b36df02a531de0ce6ad557d61b2a1c737e767d07"><div class="ttname"><a href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02a531de0ce6ad557d61b2a1c737e767d07">llvm::Unordered</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00038">Instructions.h:38</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_a9e1fc23a17e97d2d1732e753ae9251ac"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">llvm::GlobalValue::getParent</a></div><div class="ttdeci">Module * getParent()</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00286">GlobalValue.h:286</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00066">Value.h:66</a></div></div>
<div class="ttc" id="Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="Target_2X86_2README_8txt_source.html#l00297">Target/X86/README.txt:297</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a7e31b0c02df2aeed261b103b790cc01e"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a7e31b0c02df2aeed261b103b790cc01e">llvm::IRBuilder::CreateCall</a></div><div class="ttdeci">CallInst * CreateCall(Value *Callee, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01304">IRBuilder.h:1304</a></div></div>
<div class="ttc" id="SmallVector_8h_html"><div class="ttname"><a href="SmallVector_8h.html">SmallVector.h</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a9dc5111b1a9b1d5c4652d50f74fe850b"><div class="ttname"><a href="classllvm_1_1Type.html#a9dc5111b1a9b1d5c4652d50f74fe850b">llvm::Type::isSized</a></div><div class="ttdeci">bool isSized() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00278">Type.h:278</a></div></div>
<div class="ttc" id="Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00097">Debug.h:97</a></div></div>
<div class="ttc" id="classllvm_1_1AtomicRMWInst_html_adbf3dd67a56ac91e0d98970d31e053c0a5954f59053121b87ebe0c5fe79942c6e"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#adbf3dd67a56ac91e0d98970d31e053c0a5954f59053121b87ebe0c5fe79942c6e">llvm::AtomicRMWInst::Or</a></div><div class="ttdoc">*p = old | v </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00577">Instructions.h:577</a></div></div>
<div class="ttc" id="classllvm_1_1StringRef_html"><div class="ttname"><a href="classllvm_1_1StringRef.html">llvm::StringRef</a></div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00041">StringRef.h:41</a></div></div>
<div class="ttc" id="raw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1SPII_html_a11e9b8fca4a074643a6a21f444e51406a36b3dd3b84fde3f8494a9b18af131856"><div class="ttname"><a href="namespacellvm_1_1SPII.html#a11e9b8fca4a074643a6a21f444e51406a36b3dd3b84fde3f8494a9b18af131856">llvm::SPII::Store</a></div><div class="ttdef"><b>Definition:</b> <a href="SparcInstrInfo_8h_source.html#l00032">SparcInstrInfo.h:32</a></div></div>
<div class="ttc" id="namespacellvm_html_abf74b2f0dbae96f4708d3e407b36df02a53e60dc61e8ffd260c7e21f04054265a"><div class="ttname"><a href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02a53e60dc61e8ffd260c7e21f04054265a">llvm::Acquire</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00041">Instructions.h:41</a></div></div>
<div class="ttc" id="ThreadSanitizer_8cpp_html_a15cf887d2d1af2b11ee47e28142ac131"><div class="ttname"><a href="ThreadSanitizer_8cpp.html#a15cf887d2d1af2b11ee47e28142ac131">isVtableAccess</a></div><div class="ttdeci">static bool isVtableAccess(Instruction *I)</div><div class="ttdef"><b>Definition:</b> <a href="ThreadSanitizer_8cpp_source.html#l00242">ThreadSanitizer.cpp:242</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html_a0e74af4b7c739f3a14e737c3042b6617"><div class="ttname"><a href="classllvm_1_1Module.html#a0e74af4b7c739f3a14e737c3042b6617">llvm::Module::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00249">Module.h:249</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_aec1340aa456977785b902da5d5203948"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#aec1340aa456977785b902da5d5203948">llvm::IRBuilder::CreateCall3</a></div><div class="ttdeci">CallInst * CreateCall3(Value *Callee, Value *Arg1, Value *Arg2, Value *Arg3, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01315">IRBuilder.h:1315</a></div></div>
<div class="ttc" id="namespacellvm_html_abf74b2f0dbae96f4708d3e407b36df02a0fb0d2c15b4a7654025d4db4d2953e93"><div class="ttname"><a href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02a0fb0d2c15b4a7654025d4db4d2953e93">llvm::AcquireRelease</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00043">Instructions.h:43</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 23:02:54 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
