<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: R600EmitClauseMarkers.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('R600EmitClauseMarkers_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">R600EmitClauseMarkers.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="R600EmitClauseMarkers_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===-- R600EmitClauseMarkers.cpp - Emit CF_ALU ---------------------------===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span><span class="comment"></span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">/// \file</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">/// Add CF_ALU. R600 Alu instructions are grouped in clause which can hold</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">/// 128 Alu instructions ; these instructions can access up to 4 prefetched</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">/// 4 lines of 16 registers from constant buffers. Such ALU clauses are</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">/// initiated by CF_ALU instructions.</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"></span><span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AMDGPU_8h.html">AMDGPU.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="R600Defines_8h.html">R600Defines.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="R600InstrInfo_8h.html">R600InstrInfo.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="R600MachineFunctionInfo_8h.html">R600MachineFunctionInfo.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="R600RegisterInfo_8h.html">R600RegisterInfo.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineFunctionPass_8h.html">llvm/CodeGen/MachineFunctionPass.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineInstrBuilder_8h.html">llvm/CodeGen/MachineInstrBuilder.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineRegisterInfo_8h.html">llvm/CodeGen/MachineRegisterInfo.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keyword">class </span>R600EmitClauseMarkersPass : <span class="keyword">public</span> <a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a> {</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1R600InstrInfo.html">R600InstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <span class="keywordtype">int</span> Address;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="keywordtype">unsigned</span> OccupiedDwords(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>)<span class="keyword"> const </span>{</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="keywordflow">switch</span> (MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>()) {</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="keywordflow">case</span> AMDGPU::INTERP_PAIR_XY:</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="keywordflow">case</span> AMDGPU::INTERP_PAIR_ZW:</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="keywordflow">case</span> AMDGPU::INTERP_VEC_LOAD:</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="keywordflow">case</span> AMDGPU::DOT_4:</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;      <span class="keywordflow">return</span> 4;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8a3de0a03c0721e0683934a37868f6a421">AMDGPU::KILL</a>:</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    }</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="comment">// These will be expanded to two ALU instructions in the</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="comment">// ExpandSpecialInstructions pass.</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="keywordflow">if</span> (TII-&gt;<a class="code" href="classllvm_1_1R600InstrInfo.html#aff4929f96b07058beefbcb3097a7da7f">isLDSRetInstr</a>(MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>()))</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;      <span class="keywordflow">return</span> 2;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keywordflow">if</span>(TII-&gt;<a class="code" href="classllvm_1_1R600InstrInfo.html#a74f5793375f2d6bd33bd6ebfc4ca2eb5">isVector</a>(*MI) ||</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        TII-&gt;<a class="code" href="classllvm_1_1R600InstrInfo.html#a75f287b5a8a0375ca8a96ebfee2dd90c">isCubeOp</a>(MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>()) ||</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        TII-&gt;<a class="code" href="classllvm_1_1R600InstrInfo.html#a520bbb1242cd198cb0e5b3d157870f32">isReductionOp</a>(MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>()))</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;      <span class="keywordflow">return</span> 4;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordtype">unsigned</span> NumLiteral = 0;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineOperand.html">MachineInstr::mop_iterator</a> It = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a0037ac891190e1408b04a48156c3368c">operands_begin</a>(),</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        E = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a6e6014fca5895fa5f9487ff7c79678b0">operands_end</a>(); It != E; ++It) {</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;      <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = *It;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;      <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>() &amp;&amp; MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>() == AMDGPU::ALU_LITERAL_X)</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        ++NumLiteral;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    }</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordflow">return</span> 1 + NumLiteral;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  }</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <span class="keywordtype">bool</span> isALU(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *MI)<span class="keyword"> const </span>{</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keywordflow">if</span> (TII-&gt;<a class="code" href="classllvm_1_1R600InstrInfo.html#af84cb86f767529ac5d4123e1ca51cffd">isALUInstr</a>(MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>()))</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keywordflow">if</span> (TII-&gt;<a class="code" href="classllvm_1_1R600InstrInfo.html#a74f5793375f2d6bd33bd6ebfc4ca2eb5">isVector</a>(*MI) || TII-&gt;<a class="code" href="classllvm_1_1R600InstrInfo.html#a75f287b5a8a0375ca8a96ebfee2dd90c">isCubeOp</a>(MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>()))</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keywordflow">switch</span> (MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>()) {</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="keywordflow">case</span> AMDGPU::PRED_X:</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordflow">case</span> AMDGPU::INTERP_PAIR_XY:</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordflow">case</span> AMDGPU::INTERP_PAIR_ZW:</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordflow">case</span> AMDGPU::INTERP_VEC_LOAD:</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8afbad4e5ed543b4325115bdb3aff2f8d9">AMDGPU::COPY</a>:</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordflow">case</span> AMDGPU::DOT_4:</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    }</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  }</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="keywordtype">bool</span> IsTrivialInst(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *MI)<span class="keyword"> const </span>{</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordflow">switch</span> (MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>()) {</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8a3de0a03c0721e0683934a37868f6a421">AMDGPU::KILL</a>:</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1NVPTXISD.html#a594ac167d52343b1fe4cec37bb7dc31ca5809de82deaac64863d62b48e0177f08">AMDGPU::RETURN</a>:</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8a5a91c23866687baf221ce86ff6fde01f">AMDGPU::IMPLICIT_DEF</a>:</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    }</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  }</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  std::pair&lt;unsigned, unsigned&gt; getAccessedBankLine(<span class="keywordtype">unsigned</span> Sel)<span class="keyword"> const </span>{</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="comment">// Sel is (512 + (kc_bank &lt;&lt; 12) + ConstIndex) &lt;&lt; 2</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="comment">// (See also R600ISelLowering.cpp)</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="comment">// ConstIndex value is in [0, 4095];</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordflow">return</span> std::pair&lt;unsigned, unsigned&gt;(</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        ((Sel &gt;&gt; 2) - 512) &gt;&gt; 12, <span class="comment">// KC_BANK</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="comment">// Line Number of ConstIndex</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <span class="comment">// A line contains 16 constant registers however KCX bank can lock</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="comment">// two line at the same time ; thus we want to get an even line number.</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <span class="comment">// Line number can be retrieved with (&gt;&gt;4), using (&gt;&gt;5) &lt;&lt;1 generates</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="comment">// an even number.</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        ((((Sel &gt;&gt; 2) - 512) &amp; 4095) &gt;&gt; 5) &lt;&lt; 1);</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  }</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="keywordtype">bool</span> SubstituteKCacheBank(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *MI,</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      std::vector&lt;std::pair&lt;unsigned, unsigned&gt; &gt; &amp;CachedConsts,</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      <span class="keywordtype">bool</span> UpdateInstr = <span class="keyword">true</span>)<span class="keyword"> const </span>{</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    std::vector&lt;std::pair&lt;unsigned, unsigned&gt; &gt; UsedKCache;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordflow">if</span> (!TII-&gt;<a class="code" href="classllvm_1_1R600InstrInfo.html#af84cb86f767529ac5d4123e1ca51cffd">isALUInstr</a>(MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>()) &amp;&amp; MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>() != AMDGPU::DOT_4)</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;std::pair&lt;MachineOperand *, int64_t&gt;</a> &gt; &amp;Consts =</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        TII-&gt;<a class="code" href="classllvm_1_1R600InstrInfo.html#af6055deb7ab8c9eb563d8b3ea3220c4e">getSrcs</a>(MI);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    assert((TII-&gt;<a class="code" href="classllvm_1_1R600InstrInfo.html#af84cb86f767529ac5d4123e1ca51cffd">isALUInstr</a>(MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>()) ||</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>() == AMDGPU::DOT_4) &amp;&amp; <span class="stringliteral">&quot;Can&#39;t assign Const&quot;</span>);</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a> = Consts.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      <span class="keywordflow">if</span> (Consts[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].first-&gt;getReg() != AMDGPU::ALU_CONST)</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      <span class="keywordtype">unsigned</span> Sel = Consts[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].second;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;      <span class="keywordtype">unsigned</span> Chan = Sel &amp; 3, Index = ((Sel &gt;&gt; 2) - 512) &amp; 31;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;      <span class="keywordtype">unsigned</span> KCacheIndex = Index * 4 + Chan;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      <span class="keyword">const</span> std::pair&lt;unsigned, unsigned&gt; &amp;BankLine = getAccessedBankLine(Sel);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      <span class="keywordflow">if</span> (CachedConsts.empty()) {</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        CachedConsts.push_back(BankLine);</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        UsedKCache.push_back(std::pair&lt;unsigned, unsigned&gt;(0, KCacheIndex));</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      }</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      <span class="keywordflow">if</span> (CachedConsts[0] == BankLine) {</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        UsedKCache.push_back(std::pair&lt;unsigned, unsigned&gt;(0, KCacheIndex));</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      }</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      <span class="keywordflow">if</span> (CachedConsts.size() == 1) {</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        CachedConsts.push_back(BankLine);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        UsedKCache.push_back(std::pair&lt;unsigned, unsigned&gt;(1, KCacheIndex));</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      }</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <span class="keywordflow">if</span> (CachedConsts[1] == BankLine) {</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        UsedKCache.push_back(std::pair&lt;unsigned, unsigned&gt;(1, KCacheIndex));</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      }</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    }</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">if</span> (!UpdateInstr)</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> = 0, n = Consts.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      <span class="keywordflow">if</span> (Consts[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].first-&gt;getReg() != AMDGPU::ALU_CONST)</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      <span class="keywordflow">switch</span>(UsedKCache[<a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>].first) {</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      <span class="keywordflow">case</span> 0:</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        Consts[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].first-&gt;setReg(</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            AMDGPU::R600_KC0RegClass.getRegister(UsedKCache[<a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>].second));</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      <span class="keywordflow">case</span> 1:</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        Consts[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].first-&gt;setReg(</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            AMDGPU::R600_KC1RegClass.getRegister(UsedKCache[<a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>].second));</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Wrong Cache Line&quot;</span>);</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      }</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      <a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>++;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    }</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  }</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <span class="keywordtype">bool</span> canClauseLocalKillFitInClause(</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                        <span class="keywordtype">unsigned</span> AluInstCount,</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                        std::vector&lt;std::pair&lt;unsigned, unsigned&gt; &gt; KCacheBanks,</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                        <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>,</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                        <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> BBEnd) {</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1R600RegisterInfo.html">R600RegisterInfo</a> &amp;TRI = TII-&gt;<a class="code" href="classllvm_1_1R600InstrInfo.html#ace87802d98aa558e3ab9e6bd927f9fb4">getRegisterInfo</a>();</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineOperand.html">MachineInstr::const_mop_iterator</a></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;           MOI = Def-&gt;operands_begin(),</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;           MOE = Def-&gt;operands_end(); MOI != MOE; ++MOI) {</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      <span class="keywordflow">if</span> (!MOI-&gt;isReg() || !MOI-&gt;isDef() ||</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;          TRI.<a class="code" href="structllvm_1_1R600RegisterInfo.html#a282bdc42bb882ca7beb29fe5c21da074">isPhysRegLiveAcrossClauses</a>(MOI-&gt;getReg()))</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      <span class="comment">// Def defines a clause local register, so check that its use will fit</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      <span class="comment">// in the clause.</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      <span class="keywordtype">unsigned</span> LastUseCount = 0;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> UseI = Def; UseI != BBEnd; ++UseI) {</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        AluInstCount += OccupiedDwords(UseI);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="comment">// Make sure we won&#39;t need to end the clause due to KCache limitations.</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <span class="keywordflow">if</span> (!SubstituteKCacheBank(UseI, KCacheBanks, <span class="keyword">false</span>))</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="comment">// We have reached the maximum instruction limit before finding the</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="comment">// use that kills this register, so we cannot use this def in the</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="comment">// current clause.</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <span class="keywordflow">if</span> (AluInstCount &gt;= TII-&gt;<a class="code" href="classllvm_1_1R600InstrInfo.html#abb29912c607d99a0dbc42453b3fdeadf">getMaxAlusPerClause</a>())</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <span class="comment">// Register kill flags have been cleared by the time we get to this</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <span class="comment">// pass, but it is safe to assume that all uses of this register</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <span class="comment">// occur in the same basic block as its definition, because</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <span class="comment">// it is illegal for the scheduler to schedule them in</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <span class="comment">// different blocks.</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <span class="keywordflow">if</span> (UseI-&gt;findRegisterUseOperandIdx(MOI-&gt;getReg()))</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;          LastUseCount = AluInstCount;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <span class="keywordflow">if</span> (UseI != Def &amp;&amp; UseI-&gt;findRegisterDefOperandIdx(MOI-&gt;getReg()) != -1)</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      }</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      <span class="keywordflow">if</span> (LastUseCount)</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <span class="keywordflow">return</span> LastUseCount &lt;= TII-&gt;<a class="code" href="classllvm_1_1R600InstrInfo.html#abb29912c607d99a0dbc42453b3fdeadf">getMaxAlusPerClause</a>();</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Clause local register live at end of clause.&quot;</span>);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    }</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  }</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  MakeALUClause(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;MBB, <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> ClauseHead = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    std::vector&lt;std::pair&lt;unsigned, unsigned&gt; &gt; KCacheBanks;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keywordtype">bool</span> PushBeforeModifier = <span class="keyword">false</span>;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordtype">unsigned</span> AluInstCount = 0;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> E = MBB.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>(); I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      <span class="keywordflow">if</span> (IsTrivialInst(I))</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      <span class="keywordflow">if</span> (!isALU(I))</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      <span class="keywordflow">if</span> (AluInstCount &gt; TII-&gt;<a class="code" href="classllvm_1_1R600InstrInfo.html#abb29912c607d99a0dbc42453b3fdeadf">getMaxAlusPerClause</a>())</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      <span class="keywordflow">if</span> (I-&gt;getOpcode() == AMDGPU::PRED_X) {</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="comment">// We put PRED_X in its own clause to ensure that ifcvt won&#39;t create</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <span class="comment">// clauses with more than 128 insts.</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <span class="comment">// IfCvt is indeed checking that &quot;then&quot; and &quot;else&quot; branches of an if</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <span class="comment">// statement have less than ~60 insts thus converted clauses can&#39;t be</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="comment">// bigger than ~121 insts (predicate setter needs to be in the same</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="comment">// clause as predicated alus).</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <span class="keywordflow">if</span> (AluInstCount &gt; 0)</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="keywordflow">if</span> (TII-&gt;<a class="code" href="classllvm_1_1R600InstrInfo.html#a4671f8263c7cec241186ad392534117e">getFlagOp</a>(I).<a class="code" href="classllvm_1_1MachineOperand.html#a7059d68a29d5ecfb37623ab45cdb4e8d">getImm</a>() &amp; <a class="code" href="R600Defines_8h.html#afeec7edbcb979a86b4d931ecce39750c">MO_FLAG_PUSH</a>)</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;          PushBeforeModifier = <span class="keyword">true</span>;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        AluInstCount ++;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      }</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      <span class="comment">// XXX: GROUP_BARRIER instructions cannot be in the same ALU clause as:</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      <span class="comment">//</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      <span class="comment">// * KILL or INTERP instructions</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      <span class="comment">// * Any instruction that sets UPDATE_EXEC_MASK or UPDATE_PRED bits</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      <span class="comment">// * Uses waterfalling (i.e. INDEX_MODE = AR.X)</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      <span class="comment">//</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      <span class="comment">// XXX: These checks have not been implemented yet.</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      <span class="keywordflow">if</span> (TII-&gt;<a class="code" href="classllvm_1_1R600InstrInfo.html#a62318be18f9fc4ffb5247c9bae6befb4">mustBeLastInClause</a>(I-&gt;getOpcode())) {</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        I++;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      }</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      <span class="comment">// If this instruction defines a clause local register, make sure</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      <span class="comment">// its use can fit in this clause.</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      <span class="keywordflow">if</span> (!canClauseLocalKillFitInClause(AluInstCount, KCacheBanks, I, E))</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      <span class="keywordflow">if</span> (!SubstituteKCacheBank(I, KCacheBanks))</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      AluInstCount += OccupiedDwords(I);</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    }</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keywordtype">unsigned</span> Opcode = PushBeforeModifier ?</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        AMDGPU::CF_ALU_PUSH_BEFORE : AMDGPU::CF_ALU;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <a class="code" href="namespacellvm.html#a980570dc1410d4ef53806f82028ca381">BuildMI</a>(MBB, ClauseHead, MBB.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a45028d169700cac71cf6c613a94236ee">findDebugLoc</a>(ClauseHead), TII-&gt;get(Opcode))</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="comment">// We don&#39;t use the ADDR field until R600ControlFlowFinalizer pass, where</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="comment">// it is safe to assume it is 0. However if we always put 0 here, the ifcvt</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="comment">// pass may assume that identical ALU clause starter at the beginning of a </span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="comment">// true and false branch can be factorized which is not the case.</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        .addImm(Address++) <span class="comment">// ADDR</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a9f1fae6a5dbb6e378ca85df1fded8515">addImm</a>(KCacheBanks.empty()?0:KCacheBanks[0].first) <span class="comment">// KB0</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        .addImm((KCacheBanks.size() &lt; 2)?0:KCacheBanks[1].first) <span class="comment">// KB1</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a9f1fae6a5dbb6e378ca85df1fded8515">addImm</a>(KCacheBanks.empty()?0:2) <span class="comment">// KM0</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        .addImm((KCacheBanks.size() &lt; 2)?0:2) <span class="comment">// KM1</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a9f1fae6a5dbb6e378ca85df1fded8515">addImm</a>(KCacheBanks.empty()?0:KCacheBanks[0].second) <span class="comment">// KLINE0</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        .addImm((KCacheBanks.size() &lt; 2)?0:KCacheBanks[1].second) <span class="comment">// KLINE1</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a9f1fae6a5dbb6e378ca85df1fded8515">addImm</a>(AluInstCount) <span class="comment">// COUNT</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a9f1fae6a5dbb6e378ca85df1fded8515">addImm</a>(1); <span class="comment">// Enabled</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  }</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  R600EmitClauseMarkersPass(<a class="code" href="classllvm_1_1TargetMachine.html">TargetMachine</a> &amp;tm) : <a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a>(ID),</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    TII(0), Address(0) { }</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">bool</span> runOnMachineFunction(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF) {</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    TII = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classllvm_1_1R600InstrInfo.html">R600InstrInfo</a> *<span class="keyword">&gt;</span>(MF.<a class="code" href="classllvm_1_1MachineFunction.html#a6745c3bfdfc5b0643b078b96df2db252">getTarget</a>().<a class="code" href="classllvm_1_1TargetMachine.html#ac13d0f6f2c915757013b101ef6e8afbc">getInstrInfo</a>());</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">MachineFunction::iterator</a> <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ab0789854909cf47f640a85fa2bac29c7">begin</a>(), BB_E = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a9d017af749f76484cb9aec9ff6e4330c">end</a>();</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                                                    <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> != BB_E; ++<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;MBB = *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> I = MBB.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>();</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      <span class="keywordflow">if</span> (I-&gt;getOpcode() == AMDGPU::CF_ALU)</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <span class="keywordflow">continue</span>; <span class="comment">// BB was already parsed</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> E = MBB.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>(); I != E;) {</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <span class="keywordflow">if</span> (isALU(I))</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;          I = MakeALUClause(MBB, I);</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;          ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      }</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    }</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  }</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *getPassName()<span class="keyword"> const </span>{</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;R600 Emit Clause Markers Pass&quot;</span>;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  }</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;};</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">R600EmitClauseMarkersPass::ID</a> = 0;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;} <span class="comment">// end anonymous namespace</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno"><a class="line" href="namespacellvm.html#a2415e48ebebf426e5b1439d4bbaa4e3d">  322</a></span>&#160;<a class="code" href="classllvm_1_1FunctionPass.html">llvm::FunctionPass</a> *<a class="code" href="namespacellvm.html#a2415e48ebebf426e5b1439d4bbaa4e3d">llvm::createR600EmitClauseMarkers</a>(<a class="code" href="classllvm_1_1TargetMachine.html">TargetMachine</a> &amp;<a class="code" href="namespacellvm_1_1SystemZISD.html#a9a3c050e4bfe8d0d09d74c979f5bb121a68ace50a32835aa0562cf8f9694ba510">TM</a>) {</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> R600EmitClauseMarkersPass(TM);</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;}</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00127">SmallVector.h:127</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a6e6014fca5895fa5f9487ff7c79678b0"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a6e6014fca5895fa5f9487ff7c79678b0">llvm::MachineInstr::operands_end</a></div><div class="ttdeci">mop_iterator operands_end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00285">MachineInstr.h:285</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="R600InstrInfo_8h_html"><div class="ttname"><a href="R600InstrInfo_8h.html">R600InstrInfo.h</a></div><div class="ttdoc">Interface definition for R600InstrInfo. </div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_a9d017af749f76484cb9aec9ff6e4330c"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a9d017af749f76484cb9aec9ff6e4330c">llvm::MachineFunction::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00317">MachineFunction.h:317</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html"><div class="ttname"><a href="classllvm_1_1MachineFunction.html">llvm::MachineFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00075">MachineFunction.h:75</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_ab0789854909cf47f640a85fa2bac29c7"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ab0789854909cf47f640a85fa2bac29c7">llvm::MachineFunction::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00315">MachineFunction.h:315</a></div></div>
<div class="ttc" id="namespacellvm_1_1SystemZISD_html_a9a3c050e4bfe8d0d09d74c979f5bb121a68ace50a32835aa0562cf8f9694ba510"><div class="ttname"><a href="namespacellvm_1_1SystemZISD.html#a9a3c050e4bfe8d0d09d74c979f5bb121a68ace50a32835aa0562cf8f9694ba510">llvm::SystemZISD::TM</a></div><div class="ttdef"><b>Definition:</b> <a href="SystemZISelLowering_8h_source.html#l00060">SystemZISelLowering.h:60</a></div></div>
<div class="ttc" id="classllvm_1_1R600InstrInfo_html_a74f5793375f2d6bd33bd6ebfc4ca2eb5"><div class="ttname"><a href="classllvm_1_1R600InstrInfo.html#a74f5793375f2d6bd33bd6ebfc4ca2eb5">llvm::R600InstrInfo::isVector</a></div><div class="ttdeci">bool isVector(const MachineInstr &amp;MI) const </div><div class="ttdef"><b>Definition:</b> <a href="R600InstrInfo_8cpp_source.html#l00045">R600InstrInfo.cpp:45</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_a3a76669632041022e6976766a22bd2b0"><div class="ttname"><a href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a></div><div class="ttdeci">return j(j&lt;&lt; 16)</div></div>
<div class="ttc" id="AMDGPU_8h_html"><div class="ttname"><a href="AMDGPU_8h.html">AMDGPU.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1TargetOpcode_html_a348d4259b5fa6a8ecfe94e7ae512e1a8afbad4e5ed543b4325115bdb3aff2f8d9"><div class="ttname"><a href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8afbad4e5ed543b4325115bdb3aff2f8d9">llvm::TargetOpcode::COPY</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetOpcodes_8h_source.html#l00086">TargetOpcodes.h:86</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_acbc921830578e2741be6549db716c0ce"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">llvm::MachineBasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00238">MachineBasicBlock.h:238</a></div></div>
<div class="ttc" id="R600RegisterInfo_8h_html"><div class="ttname"><a href="R600RegisterInfo_8h.html">R600RegisterInfo.h</a></div><div class="ttdoc">Interface definition for R600RegisterInfo. </div></div>
<div class="ttc" id="classllvm_1_1R600InstrInfo_html_a75f287b5a8a0375ca8a96ebfee2dd90c"><div class="ttname"><a href="classllvm_1_1R600InstrInfo.html#a75f287b5a8a0375ca8a96ebfee2dd90c">llvm::R600InstrInfo::isCubeOp</a></div><div class="ttdeci">bool isCubeOp(unsigned opcode) const </div><div class="ttdef"><b>Definition:</b> <a href="R600InstrInfo_8cpp_source.html#l00123">R600InstrInfo.cpp:123</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunctionPass_html"><div class="ttname"><a href="classllvm_1_1MachineFunctionPass.html">llvm::MachineFunctionPass</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunctionPass_8h_source.html#l00032">MachineFunctionPass.h:32</a></div></div>
<div class="ttc" id="HexagonCopyToCombine_8cpp_html_a1d40004718218dbdf06b496766299101"><div class="ttname"><a href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a></div><div class="ttdeci">const HexagonInstrInfo * TII</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCopyToCombine_8cpp_source.html#l00115">HexagonCopyToCombine.cpp:115</a></div></div>
<div class="ttc" id="ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdef"><b>Definition:</b> <a href="ErrorHandling_8h_source.html#l00103">ErrorHandling.h:103</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00035">APInt.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_ad8198d6d83af9410d867136e33fbf4b2"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">llvm::MachineOperand::isReg</a></div><div class="ttdeci">bool isReg() const </div><div class="ttdoc">isReg - Tests if this is a MO_Register operand. </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00224">MachineOperand.h:224</a></div></div>
<div class="ttc" id="namespacellvm_1_1CallingConv_html_a4f861731fc6dbfdccc05af5968d98974"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">llvm::CallingConv::ID</a></div><div class="ttdeci">ID</div><div class="ttdoc">LLVM Calling Convention Representation. </div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00026">CallingConv.h:26</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstrBuilder_html_a9f1fae6a5dbb6e378ca85df1fded8515"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#a9f1fae6a5dbb6e378ca85df1fded8515">llvm::MachineInstrBuilder::addImm</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addImm(int64_t Val) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00083">MachineInstrBuilder.h:83</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a242314c0ae0147d1a7ef54c9bc312616"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">llvm::MachineInstr::getOpcode</a></div><div class="ttdeci">int getOpcode() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00261">MachineInstr.h:261</a></div></div>
<div class="ttc" id="MachineInstrBuilder_8h_html"><div class="ttname"><a href="MachineInstrBuilder_8h.html">MachineInstrBuilder.h</a></div></div>
<div class="ttc" id="classllvm_1_1R600InstrInfo_html_a4671f8263c7cec241186ad392534117e"><div class="ttname"><a href="classllvm_1_1R600InstrInfo.html#a4671f8263c7cec241186ad392534117e">llvm::R600InstrInfo::getFlagOp</a></div><div class="ttdeci">MachineOperand &amp; getFlagOp(MachineInstr *MI, unsigned SrcIdx=0, unsigned Flag=0) const </div><div class="ttdef"><b>Definition:</b> <a href="R600InstrInfo_8cpp_source.html#l01301">R600InstrInfo.cpp:1301</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a7059d68a29d5ecfb37623ab45cdb4e8d"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a7059d68a29d5ecfb37623ab45cdb4e8d">llvm::MachineOperand::getImm</a></div><div class="ttdeci">int64_t getImm() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00402">MachineOperand.h:402</a></div></div>
<div class="ttc" id="R600MachineFunctionInfo_8h_html"><div class="ttname"><a href="R600MachineFunctionInfo_8h.html">R600MachineFunctionInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ac51be7ff80fe8d6ae5e8c0acb194908a"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">llvm::MachineBasicBlock::iterator</a></div><div class="ttdeci">bundle_iterator&lt; MachineInstr, instr_iterator &gt; iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00212">MachineBasicBlock.h:212</a></div></div>
<div class="ttc" id="classllvm_1_1R600InstrInfo_html_af6055deb7ab8c9eb563d8b3ea3220c4e"><div class="ttname"><a href="classllvm_1_1R600InstrInfo.html#af6055deb7ab8c9eb563d8b3ea3220c4e">llvm::R600InstrInfo::getSrcs</a></div><div class="ttdeci">SmallVector&lt; std::pair&lt; MachineOperand *, int64_t &gt;, 3 &gt; getSrcs(MachineInstr *MI) const </div><div class="ttdef"><b>Definition:</b> <a href="R600InstrInfo_8cpp_source.html#l00294">R600InstrInfo.cpp:294</a></div></div>
<div class="ttc" id="namespacellvm_1_1tgtok_html_abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a"><div class="ttname"><a href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">llvm::tgtok::Def</a></div><div class="ttdef"><b>Definition:</b> <a href="TGLexer_8h_source.html#l00046">TGLexer.h:46</a></div></div>
<div class="ttc" id="namespacellvm_html_a2415e48ebebf426e5b1439d4bbaa4e3d"><div class="ttname"><a href="namespacellvm.html#a2415e48ebebf426e5b1439d4bbaa4e3d">llvm::createR600EmitClauseMarkers</a></div><div class="ttdeci">FunctionPass * createR600EmitClauseMarkers(TargetMachine &amp;tm)</div><div class="ttdef"><b>Definition:</b> <a href="R600EmitClauseMarkers_8cpp_source.html#l00322">R600EmitClauseMarkers.cpp:322</a></div></div>
<div class="ttc" id="classllvm_1_1R600InstrInfo_html_ace87802d98aa558e3ab9e6bd927f9fb4"><div class="ttname"><a href="classllvm_1_1R600InstrInfo.html#ace87802d98aa558e3ab9e6bd927f9fb4">llvm::R600InstrInfo::getRegisterInfo</a></div><div class="ttdeci">const R600RegisterInfo &amp; getRegisterInfo() const </div><div class="ttdef"><b>Definition:</b> <a href="R600InstrInfo_8cpp_source.html#l00037">R600InstrInfo.cpp:37</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html">llvm::MachineBasicBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00062">MachineBasicBlock.h:62</a></div></div>
<div class="ttc" id="namespacellvm_1_1NVPTXISD_html_a594ac167d52343b1fe4cec37bb7dc31ca5809de82deaac64863d62b48e0177f08"><div class="ttname"><a href="namespacellvm_1_1NVPTXISD.html#a594ac167d52343b1fe4cec37bb7dc31ca5809de82deaac64863d62b48e0177f08">llvm::NVPTXISD::RETURN</a></div><div class="ttdef"><b>Definition:</b> <a href="NVPTXISelLowering_8h_source.html#l00049">NVPTXISelLowering.h:49</a></div></div>
<div class="ttc" id="classllvm_1_1FunctionPass_html"><div class="ttname"><a href="classllvm_1_1FunctionPass.html">llvm::FunctionPass</a></div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00293">Pass.h:293</a></div></div>
<div class="ttc" id="classllvm_1_1R600InstrInfo_html"><div class="ttname"><a href="classllvm_1_1R600InstrInfo.html">llvm::R600InstrInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="R600InstrInfo_8h_source.html#l00032">R600InstrInfo.h:32</a></div></div>
<div class="ttc" id="namespacellvm_html_a980570dc1410d4ef53806f82028ca381"><div class="ttname"><a href="namespacellvm.html#a980570dc1410d4ef53806f82028ca381">llvm::BuildMI</a></div><div class="ttdeci">MachineInstrBuilder BuildMI(MachineFunction &amp;MF, DebugLoc DL, const MCInstrDesc &amp;MCID)</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00223">MachineInstrBuilder.h:223</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_ab335e668fd33542ea14a2c7b527e64d3"><div class="ttname"><a href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a></div><div class="ttdeci">The same transformation can work with an even modulo with the addition of a and shrink the compare RHS by the same amount Unless the target supports that transformation probably isn t worthwhile The transformation can also easily be made to work with non zero equality for n</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00723">Target/README.txt:723</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a45028d169700cac71cf6c613a94236ee"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a45028d169700cac71cf6c613a94236ee">llvm::MachineBasicBlock::findDebugLoc</a></div><div class="ttdeci">DebugLoc findDebugLoc(instr_iterator MBBI)</div></div>
<div class="ttc" id="classllvm_1_1TargetMachine_html_ac13d0f6f2c915757013b101ef6e8afbc"><div class="ttname"><a href="classllvm_1_1TargetMachine.html#ac13d0f6f2c915757013b101ef6e8afbc">llvm::TargetMachine::getInstrInfo</a></div><div class="ttdeci">virtual const TargetInstrInfo * getInstrInfo() const </div><div class="ttdef"><b>Definition:</b> <a href="Target_2TargetMachine_8h_source.html#l00119">Target/TargetMachine.h:119</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html"><div class="ttname"><a href="classllvm_1_1MachineOperand.html">llvm::MachineOperand</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00043">MachineOperand.h:43</a></div></div>
<div class="ttc" id="namespacellvm_1_1TargetOpcode_html_a348d4259b5fa6a8ecfe94e7ae512e1a8a3de0a03c0721e0683934a37868f6a421"><div class="ttname"><a href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8a3de0a03c0721e0683934a37868f6a421">llvm::TargetOpcode::KILL</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetOpcodes_8h_source.html#l00035">TargetOpcodes.h:35</a></div></div>
<div class="ttc" id="structllvm_1_1R600RegisterInfo_html_a282bdc42bb882ca7beb29fe5c21da074"><div class="ttname"><a href="structllvm_1_1R600RegisterInfo.html#a282bdc42bb882ca7beb29fe5c21da074">llvm::R600RegisterInfo::isPhysRegLiveAcrossClauses</a></div><div class="ttdeci">virtual bool isPhysRegLiveAcrossClauses(unsigned Reg) const </div><div class="ttdef"><b>Definition:</b> <a href="R600RegisterInfo_8cpp_source.html#l00089">R600RegisterInfo.cpp:89</a></div></div>
<div class="ttc" id="R600Defines_8h_html"><div class="ttname"><a href="R600Defines_8h.html">R600Defines.h</a></div></div>
<div class="ttc" id="classllvm_1_1R600InstrInfo_html_a62318be18f9fc4ffb5247c9bae6befb4"><div class="ttname"><a href="classllvm_1_1R600InstrInfo.html#a62318be18f9fc4ffb5247c9bae6befb4">llvm::R600InstrInfo::mustBeLastInClause</a></div><div class="ttdeci">bool mustBeLastInClause(unsigned Opcode) const </div><div class="ttdef"><b>Definition:</b> <a href="R600InstrInfo_8cpp_source.html#l00223">R600InstrInfo.cpp:223</a></div></div>
<div class="ttc" id="CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2README_8txt_source.html#l00036">CodeGen/README.txt:36</a></div></div>
<div class="ttc" id="structllvm_1_1R600RegisterInfo_html"><div class="ttname"><a href="structllvm_1_1R600RegisterInfo.html">llvm::R600RegisterInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="R600RegisterInfo_8h_source.html#l00025">R600RegisterInfo.h:25</a></div></div>
<div class="ttc" id="MachineRegisterInfo_8h_html"><div class="ttname"><a href="MachineRegisterInfo_8h.html">MachineRegisterInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html"><div class="ttname"><a href="classllvm_1_1MachineInstr.html">llvm::MachineInstr</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00050">MachineInstr.h:50</a></div></div>
<div class="ttc" id="namespacellvm_1_1TargetOpcode_html_a348d4259b5fa6a8ecfe94e7ae512e1a8a5a91c23866687baf221ce86ff6fde01f"><div class="ttname"><a href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8a5a91c23866687baf221ce86ff6fde01f">llvm::TargetOpcode::IMPLICIT_DEF</a></div><div class="ttdoc">IMPLICIT_DEF - This is the MachineInstr-level equivalent of undef. </div><div class="ttdef"><b>Definition:</b> <a href="TargetOpcodes_8h_source.html#l00052">TargetOpcodes.h:52</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_a6745c3bfdfc5b0643b078b96df2db252"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a6745c3bfdfc5b0643b078b96df2db252">llvm::MachineFunction::getTarget</a></div><div class="ttdeci">const TargetMachine &amp; getTarget() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00163">MachineFunction.h:163</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ab2d91e7bec944efcbc39d8e30644f111"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">llvm::MachineBasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00236">MachineBasicBlock.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1R600InstrInfo_html_abb29912c607d99a0dbc42453b3fdeadf"><div class="ttname"><a href="classllvm_1_1R600InstrInfo.html#abb29912c607d99a0dbc42453b3fdeadf">llvm::R600InstrInfo::getMaxAlusPerClause</a></div><div class="ttdeci">unsigned getMaxAlusPerClause() const </div><div class="ttdef"><b>Definition:</b> <a href="R600InstrInfo_8cpp_source.html#l01129">R600InstrInfo.cpp:1129</a></div></div>
<div class="ttc" id="classllvm_1_1R600InstrInfo_html_a520bbb1242cd198cb0e5b3d157870f32"><div class="ttname"><a href="classllvm_1_1R600InstrInfo.html#a520bbb1242cd198cb0e5b3d157870f32">llvm::R600InstrInfo::isReductionOp</a></div><div class="ttdeci">bool isReductionOp(unsigned opcode) const </div><div class="ttdef"><b>Definition:</b> <a href="R600InstrInfo_8cpp_source.html#l00119">R600InstrInfo.cpp:119</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_ab75f703d251cc0ce0206fe00a999db86"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">llvm::MachineOperand::getReg</a></div><div class="ttdeci">unsigned getReg() const </div><div class="ttdoc">getReg - Returns the register number. </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00259">MachineOperand.h:259</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a0037ac891190e1408b04a48156c3368c"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a0037ac891190e1408b04a48156c3368c">llvm::MachineInstr::operands_begin</a></div><div class="ttdeci">mop_iterator operands_begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00284">MachineInstr.h:284</a></div></div>
<div class="ttc" id="MachineFunctionPass_8h_html"><div class="ttname"><a href="MachineFunctionPass_8h.html">MachineFunctionPass.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1A64CC_html_af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442"><div class="ttname"><a href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">llvm::A64CC::MI</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00035">AArch64BaseInfo.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_a340712de3e78fec11c338735cab17df7"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">llvm::MachineFunction::iterator</a></div><div class="ttdeci">BasicBlockListType::iterator iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00303">MachineFunction.h:303</a></div></div>
<div class="ttc" id="classllvm_1_1TargetMachine_html"><div class="ttname"><a href="classllvm_1_1TargetMachine.html">llvm::TargetMachine</a></div><div class="ttdef"><b>Definition:</b> <a href="Target_2TargetMachine_8h_source.html#l00061">Target/TargetMachine.h:61</a></div></div>
<div class="ttc" id="classllvm_1_1R600InstrInfo_html_aff4929f96b07058beefbcb3097a7da7f"><div class="ttname"><a href="classllvm_1_1R600InstrInfo.html#aff4929f96b07058beefbcb3097a7da7f">llvm::R600InstrInfo::isLDSRetInstr</a></div><div class="ttdeci">bool isLDSRetInstr(unsigned Opcode) const </div><div class="ttdef"><b>Definition:</b> <a href="R600InstrInfo_8cpp_source.html#l00160">R600InstrInfo.cpp:160</a></div></div>
<div class="ttc" id="classllvm_1_1R600InstrInfo_html_af84cb86f767529ac5d4123e1ca51cffd"><div class="ttname"><a href="classllvm_1_1R600InstrInfo.html#af84cb86f767529ac5d4123e1ca51cffd">llvm::R600InstrInfo::isALUInstr</a></div><div class="ttdeci">bool isALUInstr(unsigned Opcode) const </div><div class="ttdef"><b>Definition:</b> <a href="R600InstrInfo_8cpp_source.html#l00134">R600InstrInfo.cpp:134</a></div></div>
<div class="ttc" id="R600Defines_8h_html_afeec7edbcb979a86b4d931ecce39750c"><div class="ttname"><a href="R600Defines_8h.html#afeec7edbcb979a86b4d931ecce39750c">MO_FLAG_PUSH</a></div><div class="ttdeci">#define MO_FLAG_PUSH</div><div class="ttdef"><b>Definition:</b> <a href="R600Defines_8h_source.html#l00021">R600Defines.h:21</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 23:00:55 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
