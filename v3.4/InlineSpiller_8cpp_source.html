<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: InlineSpiller.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('InlineSpiller_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">InlineSpiller.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="InlineSpiller_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===-------- InlineSpiller.cpp - Insert spills and restores inline -------===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// The inline spiller modifies the machine function directly instead of</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// inserting spills and restores in VirtRegMap.</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div><div class="line"><a name="l00015"></a><span class="lineno"><a class="line" href="InlineSpiller_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   15</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;regalloc&quot;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Spiller_8h.html">Spiller.h</a>&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SetVector_8h.html">llvm/ADT/SetVector.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TinyPtrVector_8h.html">llvm/ADT/TinyPtrVector.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AliasAnalysis_8h.html">llvm/Analysis/AliasAnalysis.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LiveIntervalAnalysis_8h.html">llvm/CodeGen/LiveIntervalAnalysis.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LiveRangeEdit_8h.html">llvm/CodeGen/LiveRangeEdit.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LiveStackAnalysis_8h.html">llvm/CodeGen/LiveStackAnalysis.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineDominators_8h.html">llvm/CodeGen/MachineDominators.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineBlockFrequencyInfo_8h.html">llvm/CodeGen/MachineBlockFrequencyInfo.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineFrameInfo_8h.html">llvm/CodeGen/MachineFrameInfo.h</a>&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineFunction_8h.html">llvm/CodeGen/MachineFunction.h</a>&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineInstrBuilder_8h.html">llvm/CodeGen/MachineInstrBuilder.h</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineInstrBundle_8h.html">llvm/CodeGen/MachineInstrBundle.h</a>&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineLoopInfo_8h.html">llvm/CodeGen/MachineLoopInfo.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineRegisterInfo_8h.html">llvm/CodeGen/MachineRegisterInfo.h</a>&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="VirtRegMap_8h.html">llvm/CodeGen/VirtRegMap.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetInstrInfo_8h.html">llvm/Target/TargetInstrInfo.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Target_2TargetMachine_8h.html">llvm/Target/TargetMachine.h</a>&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<a class="code" href="InlineSpiller_8cpp.html#ac409a43ebdf6f33ce2a1cbbea63ef4e6">STATISTIC</a>(NumSpilledRanges,   <span class="stringliteral">&quot;Number of spilled live ranges&quot;</span>);</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<a class="code" href="InlineSpiller_8cpp.html#ac409a43ebdf6f33ce2a1cbbea63ef4e6">STATISTIC</a>(NumSnippets,        <span class="stringliteral">&quot;Number of spilled snippets&quot;</span>);</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<a class="code" href="InlineSpiller_8cpp.html#ac409a43ebdf6f33ce2a1cbbea63ef4e6">STATISTIC</a>(NumSpills,          <span class="stringliteral">&quot;Number of spills inserted&quot;</span>);</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<a class="code" href="InlineSpiller_8cpp.html#ac409a43ebdf6f33ce2a1cbbea63ef4e6">STATISTIC</a>(NumSpillsRemoved,   <span class="stringliteral">&quot;Number of spills removed&quot;</span>);</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<a class="code" href="InlineSpiller_8cpp.html#ac409a43ebdf6f33ce2a1cbbea63ef4e6">STATISTIC</a>(NumReloads,         <span class="stringliteral">&quot;Number of reloads inserted&quot;</span>);</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<a class="code" href="InlineSpiller_8cpp.html#ac409a43ebdf6f33ce2a1cbbea63ef4e6">STATISTIC</a>(NumReloadsRemoved,  <span class="stringliteral">&quot;Number of reloads removed&quot;</span>);</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<a class="code" href="InlineSpiller_8cpp.html#ac409a43ebdf6f33ce2a1cbbea63ef4e6">STATISTIC</a>(NumFolded,          <span class="stringliteral">&quot;Number of folded stack accesses&quot;</span>);</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<a class="code" href="InlineSpiller_8cpp.html#ac409a43ebdf6f33ce2a1cbbea63ef4e6">STATISTIC</a>(NumFoldedLoads,     <span class="stringliteral">&quot;Number of folded loads&quot;</span>);</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<a class="code" href="InlineSpiller_8cpp.html#ac409a43ebdf6f33ce2a1cbbea63ef4e6">STATISTIC</a>(NumRemats,          <span class="stringliteral">&quot;Number of rematerialized defs for spilling&quot;</span>);</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<a class="code" href="InlineSpiller_8cpp.html#ac409a43ebdf6f33ce2a1cbbea63ef4e6">STATISTIC</a>(NumOmitReloadSpill, <span class="stringliteral">&quot;Number of omitted spills of reloads&quot;</span>);</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<a class="code" href="InlineSpiller_8cpp.html#ac409a43ebdf6f33ce2a1cbbea63ef4e6">STATISTIC</a>(NumHoists,          <span class="stringliteral">&quot;Number of hoisted spills&quot;</span>);</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="InlineSpiller_8cpp.html#a7819774f1578a13aaf380ec73782c9e4">DisableHoisting</a>(<span class="stringliteral">&quot;disable-spill-hoist&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;                                     <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Disable inline spill hoisting&quot;</span>));</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="keyword">class </span>InlineSpiller : <span class="keyword">public</span> <a class="code" href="classllvm_1_1Spiller.html">Spiller</a> {</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <a class="code" href="classllvm_1_1LiveIntervals.html">LiveIntervals</a> &amp;LIS;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <a class="code" href="classllvm_1_1LiveStacks.html">LiveStacks</a> &amp;LSS;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a> *AA;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <a class="code" href="classllvm_1_1MachineDominatorTree.html">MachineDominatorTree</a> &amp;MDT;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a> &amp;<a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <a class="code" href="classllvm_1_1VirtRegMap.html">VirtRegMap</a> &amp;VRM;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> &amp;<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> &amp;TRI;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBlockFrequencyInfo.html">MachineBlockFrequencyInfo</a> &amp;MBFI;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="comment">// Variables that are valid during spill(), but used by multiple methods.</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <a class="code" href="classllvm_1_1LiveRangeEdit.html">LiveRangeEdit</a> *Edit;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> *StackInt;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="keywordtype">int</span> StackSlot;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="keywordtype">unsigned</span> Original;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="comment">// All registers to spill to StackSlot, including the main register.</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 8&gt;</a> RegsToSpill;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <span class="comment">// All COPY instructions to/from snippets.</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="comment">// They are ignored since both operands refer to the same stack slot.</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;MachineInstr*, 8&gt;</a> SnippetCopies;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="comment">// Values that failed to remat at some point.</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;VNInfo*, 8&gt;</a> UsedValues;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="comment">// Information about a value that was defined by a copy from a sibling</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="comment">// register.</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="keyword">struct </span>SibValueInfo {</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="comment">// True when all reaching defs were reloads: No spill is necessary.</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordtype">bool</span> AllDefsAreReloads;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="comment">// True when value is defined by an original PHI not from splitting.</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keywordtype">bool</span> DefByOrigPHI;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="comment">// True when the COPY defining this value killed its source.</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordtype">bool</span> KillsSource;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="comment">// The preferred register to spill.</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordtype">unsigned</span> SpillReg;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="comment">// The value of SpillReg that should be spilled.</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <a class="code" href="classllvm_1_1VNInfo.html">VNInfo</a> *SpillVNI;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="comment">// The block where SpillVNI should be spilled. Currently, this must be the</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="comment">// block containing SpillVNI-&gt;def.</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *SpillMBB;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="comment">// A defining instruction that is not a sibling copy or a reload, or NULL.</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="comment">// This can be used as a template for rematerialization.</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *DefMI;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="comment">// List of values that depend on this one.  These values are actually the</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="comment">// same, but live range splitting has placed them in different registers,</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="comment">// or SSA update needed to insert PHI-defs to preserve SSA form.  This is</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="comment">// copies of the current value and phi-kills.  Usually only phi-kills cause</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="comment">// more than one dependent value.</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <a class="code" href="classllvm_1_1TinyPtrVector.html">TinyPtrVector&lt;VNInfo*&gt;</a> Deps;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    SibValueInfo(<span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>, <a class="code" href="classllvm_1_1VNInfo.html">VNInfo</a> *VNI)</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      : AllDefsAreReloads(<a class="code" href="namespacetrue.html">true</a>), DefByOrigPHI(<a class="code" href="namespacefalse.html">false</a>), KillsSource(<a class="code" href="namespacefalse.html">false</a>),</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        SpillReg(Reg), SpillVNI(VNI), SpillMBB(0), DefMI(0) {}</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="comment">// Returns true when a def has been found.</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordtype">bool</span> hasDef()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> DefByOrigPHI || DefMI; }</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  };</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="comment">// Values in RegsToSpill defined by sibling copies.</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;VNInfo*, SibValueInfo&gt;</a> SibValueMap;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  SibValueMap SibValues;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="comment">// Dead defs generated during spilling.</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineInstr*, 8&gt;</a> DeadDefs;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  ~InlineSpiller() {}</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  InlineSpiller(<a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a> &amp;<a class="code" href="TwoAddressInstructionPass_8cpp.html#a34b5cf133e2453a532a504197fec9171">pass</a>,</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;mf,</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                <a class="code" href="classllvm_1_1VirtRegMap.html">VirtRegMap</a> &amp;vrm)</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    : MF(mf),</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      LIS(pass.getAnalysis&lt;<a class="code" href="classllvm_1_1LiveIntervals.html">LiveIntervals</a>&gt;()),</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      LSS(pass.getAnalysis&lt;<a class="code" href="classllvm_1_1LiveStacks.html">LiveStacks</a>&gt;()),</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      AA(&amp;pass.getAnalysis&lt;<a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a>&gt;()),</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      MDT(pass.getAnalysis&lt;<a class="code" href="classllvm_1_1MachineDominatorTree.html">MachineDominatorTree</a>&gt;()),</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      Loops(pass.getAnalysis&lt;<a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a>&gt;()),</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      VRM(vrm),</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      MFI(*mf.getFrameInfo()),</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      MRI(mf.getRegInfo()),</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      TII(*mf.getTarget().getInstrInfo()),</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      TRI(*mf.getTarget().getRegisterInfo()),</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      MBFI(pass.getAnalysis&lt;<a class="code" href="classllvm_1_1MachineBlockFrequencyInfo.html">MachineBlockFrequencyInfo</a>&gt;()) {}</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="README-SSE_8txt.html#a7246178f42b1eaef4e9bba10a9f39323">spill</a>(<a class="code" href="classllvm_1_1LiveRangeEdit.html">LiveRangeEdit</a> &amp;);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="keywordtype">bool</span> isSnippet(<span class="keyword">const</span> <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;SnipLI);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="keywordtype">void</span> collectRegsToSpill();</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="keywordtype">bool</span> isRegToSpill(<span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>) {</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordflow">return</span> std::find(RegsToSpill.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(),</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                     RegsToSpill.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>(), <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>) != RegsToSpill.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>();</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  }</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="keywordtype">bool</span> isSibling(<span class="keywordtype">unsigned</span> Reg);</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *traceSiblingValue(<span class="keywordtype">unsigned</span>, <a class="code" href="classllvm_1_1VNInfo.html">VNInfo</a>*, <a class="code" href="classllvm_1_1VNInfo.html">VNInfo</a>*);</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="keywordtype">void</span> propagateSiblingValue(SibValueMap::iterator, <a class="code" href="classllvm_1_1VNInfo.html">VNInfo</a> *VNI = 0);</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="keywordtype">void</span> analyzeSiblingValues();</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="keywordtype">bool</span> hoistSpill(<a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;SpillLI, <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *CopyMI);</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="keywordtype">void</span> eliminateRedundantSpills(<a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;LI, <a class="code" href="classllvm_1_1VNInfo.html">VNInfo</a> *VNI);</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="keywordtype">void</span> markValueUsed(<a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a>*, <a class="code" href="classllvm_1_1VNInfo.html">VNInfo</a>*);</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <span class="keywordtype">bool</span> reMaterializeFor(<a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a>&amp;, <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>);</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="keywordtype">void</span> reMaterializeAll();</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="keywordtype">bool</span> coalesceStackAccess(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>, <span class="keywordtype">unsigned</span> Reg);</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="keywordtype">bool</span> foldMemoryOperand(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt;std::pair&lt;MachineInstr*, unsigned&gt; &gt;,</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                         <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *LoadMI = 0);</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="keywordtype">void</span> insertReload(<span class="keywordtype">unsigned</span> VReg, <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a>, <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>);</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="keywordtype">void</span> insertSpill(<span class="keywordtype">unsigned</span> VReg, <span class="keywordtype">bool</span> isKill, <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>);</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="keywordtype">void</span> spillAroundUses(<span class="keywordtype">unsigned</span> Reg);</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="keywordtype">void</span> spillAll();</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;};</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;}</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div><div class="line"><a name="l00191"></a><span class="lineno"><a class="line" href="namespacellvm.html#abc755629d1844132f222498e5c454d9b">  191</a></span>&#160;<a class="code" href="classllvm_1_1Spiller.html">Spiller</a> *<a class="code" href="namespacellvm.html#abc755629d1844132f222498e5c454d9b">createInlineSpiller</a>(<a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a> &amp;<a class="code" href="TwoAddressInstructionPass_8cpp.html#a34b5cf133e2453a532a504197fec9171">pass</a>,</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                             <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;mf,</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                             <a class="code" href="classllvm_1_1VirtRegMap.html">VirtRegMap</a> &amp;vrm) {</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> InlineSpiller(pass, mf, vrm);</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;}</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;}</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">//                                Snippets</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment">// When spilling a virtual register, we also spill any snippets it is connected</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">// to. The snippets are small live ranges that only have a single real use,</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment">// leftovers from live range splitting. Spilling them enables memory operand</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">// folding or tightens the live range around the single use.</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">// This minimizes register pressure and maximizes the store-to-load distance for</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">// spill slots which can be important in tight loops.</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">/// isFullCopyOf - If MI is a COPY to or from Reg, return the other register,</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">/// otherwise return 0.</span></div><div class="line"><a name="l00212"></a><span class="lineno"><a class="line" href="InlineSpiller_8cpp.html#a5be2fd119675b3a42f255829d377267d">  212</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="InlineSpiller_8cpp.html#a5be2fd119675b3a42f255829d377267d">isFullCopyOf</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>, <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>) {</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="keywordflow">if</span> (!MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a3453f907d426baccbf3d657b3724f359">isFullCopy</a>())</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <span class="keywordflow">if</span> (MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(0).<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>() == <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>)</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      <span class="keywordflow">return</span> MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(1).<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <span class="keywordflow">if</span> (MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(1).<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>() == <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>)</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      <span class="keywordflow">return</span> MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(0).<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;}</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">/// isSnippet - Identify if a live interval is a snippet that should be spilled.</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">/// It is assumed that SnipLI is a virtual register with the same original as</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment">/// Edit-&gt;getReg().</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> InlineSpiller::isSnippet(<span class="keyword">const</span> <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;SnipLI) {</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = Edit-&gt;<a class="code" href="classllvm_1_1LiveRangeEdit.html#a8038b08f86db8d7e7f951f7ef4352767">getReg</a>();</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="comment">// A snippet is a tiny live range with only a single instruction using it</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <span class="comment">// besides copies to/from Reg or spills/fills. We accept:</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="comment">//   %snip = COPY %Reg / FILL fi#</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="comment">//   %snip = USE %snip</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="comment">//   %Reg = COPY %snip / SPILL %snip, fi#</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keywordflow">if</span> (SnipLI.<a class="code" href="classllvm_1_1LiveRange.html#a0a864b86bcfc75081923b157f0c3e212">getNumValNums</a>() &gt; 2 || !LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#a33c530a347219feffbfaa5d708337925">intervalIsInOneMBB</a>(SnipLI))</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *UseMI = 0;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="comment">// Check that all uses satisfy our criteria.</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator.html">MachineRegisterInfo::reg_nodbg_iterator</a></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;         RI = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5ccf3c33d602c228a2d76b31c732628d">reg_nodbg_begin</a>(SnipLI.<a class="code" href="classllvm_1_1LiveInterval.html#a4ec9ddf8db4481c798f557e8af82693f">reg</a>);</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;       <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a> = RI.skipInstruction();) {</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="comment">// Allow copies to/from Reg.</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="InlineSpiller_8cpp.html#a5be2fd119675b3a42f255829d377267d">isFullCopyOf</a>(MI, Reg))</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="comment">// Allow stack slot loads.</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordtype">int</span> FI;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordflow">if</span> (SnipLI.<a class="code" href="classllvm_1_1LiveInterval.html#a4ec9ddf8db4481c798f557e8af82693f">reg</a> == TII.<a class="code" href="classllvm_1_1TargetInstrInfo.html#a9fcdc96a6712deb1a8a3d2e18af6db3f">isLoadFromStackSlot</a>(MI, FI) &amp;&amp; FI == StackSlot)</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="comment">// Allow stack slot stores.</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordflow">if</span> (SnipLI.<a class="code" href="classllvm_1_1LiveInterval.html#a4ec9ddf8db4481c798f557e8af82693f">reg</a> == TII.<a class="code" href="classllvm_1_1TargetInstrInfo.html#aa8d4d336ac91a47a6e4568ba18b9d66a">isStoreToStackSlot</a>(MI, FI) &amp;&amp; FI == StackSlot)</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="comment">// Allow a single additional instruction.</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">if</span> (UseMI &amp;&amp; MI != UseMI)</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    UseMI = <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  }</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;}</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">/// collectRegsToSpill - Collect live range snippets that only have a single</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">/// real use.</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> InlineSpiller::collectRegsToSpill() {</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = Edit-&gt;<a class="code" href="classllvm_1_1LiveRangeEdit.html#a8038b08f86db8d7e7f951f7ef4352767">getReg</a>();</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="comment">// Main register always spills.</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  RegsToSpill.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a465f75c78f1dc551152248c9f203b88d">assign</a>(1, Reg);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  SnippetCopies.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#aa72472422d95c7052d62432ec279ff85">clear</a>();</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="comment">// Snippets all have the same original, so there can&#39;t be any for an original</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <span class="comment">// register.</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="keywordflow">if</span> (Original == Reg)</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator.html">MachineRegisterInfo::reg_iterator</a> RI = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#adfeaea4e5c82dea47ff9aa1f8367104c">reg_begin</a>(Reg);</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;       <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a> = RI.skipInstruction();) {</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordtype">unsigned</span> SnipReg = <a class="code" href="InlineSpiller_8cpp.html#a5be2fd119675b3a42f255829d377267d">isFullCopyOf</a>(MI, Reg);</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordflow">if</span> (!isSibling(SnipReg))</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;SnipLI = LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#a70cf6a51b043dc9f8ae683c266d5d9c4">getInterval</a>(SnipReg);</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordflow">if</span> (!isSnippet(SnipLI))</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    SnippetCopies.<a class="code" href="classllvm_1_1SmallPtrSet.html#a9b6dd0fc7a648a939e571246045b673e">insert</a>(MI);</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordflow">if</span> (isRegToSpill(SnipReg))</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    RegsToSpill.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(SnipReg);</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\talso spill snippet &quot;</span> &lt;&lt; SnipLI &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    ++NumSnippets;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  }</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;}</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment">//                            Sibling Values</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">// After live range splitting, some values to be spilled may be defined by</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">// copies from sibling registers. We trace the sibling copies back to the</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment">// original value if it still exists. We need it for rematerialization.</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment">// Even when the value can&#39;t be rematerialized, we still want to determine if</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment">// the value has already been spilled, or we may want to hoist the spill from a</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment">// loop.</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="keywordtype">bool</span> InlineSpiller::isSibling(<span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>) {</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">TargetRegisterInfo::isVirtualRegister</a>(Reg) &amp;&amp;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;           VRM.<a class="code" href="classllvm_1_1VirtRegMap.html#ad0a065b0808d2d3112a829b020332d69">getOriginal</a>(Reg) == Original;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;}</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l00316"></a><span class="lineno"><a class="line" href="InlineSpiller_8cpp.html#afa2d5297013e3e0bb19c30b38db134dc">  316</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="namespacellvm.html#a6a02d446812b76c3b271d9e3e3c77b49">operator&lt;&lt;</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;OS,</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                               <span class="keyword">const</span> InlineSpiller::SibValueInfo &amp;SVI) {</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  OS &lt;&lt; <span class="stringliteral">&quot;spill &quot;</span> &lt;&lt; <a class="code" href="classllvm_1_1PrintReg.html">PrintReg</a>(SVI.SpillReg) &lt;&lt; <span class="charliteral">&#39;:&#39;</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;     &lt;&lt; SVI.SpillVNI-&gt;id &lt;&lt; <span class="charliteral">&#39;@&#39;</span> &lt;&lt; SVI.SpillVNI-&gt;def;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="keywordflow">if</span> (SVI.SpillMBB)</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    OS &lt;&lt; <span class="stringliteral">&quot; in BB#&quot;</span> &lt;&lt; SVI.SpillMBB-&gt;getNumber();</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="keywordflow">if</span> (SVI.AllDefsAreReloads)</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    OS &lt;&lt; <span class="stringliteral">&quot; all-reloads&quot;</span>;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <span class="keywordflow">if</span> (SVI.DefByOrigPHI)</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    OS &lt;&lt; <span class="stringliteral">&quot; orig-phi&quot;</span>;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="keywordflow">if</span> (SVI.KillsSource)</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    OS &lt;&lt; <span class="stringliteral">&quot; kill&quot;</span>;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  OS &lt;&lt; <span class="stringliteral">&quot; deps[&quot;</span>;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = SVI.Deps.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    OS &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; SVI.Deps[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;id &lt;&lt; <span class="charliteral">&#39;@&#39;</span> &lt;&lt; SVI.Deps[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;def;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  OS &lt;&lt; <span class="stringliteral">&quot; ]&quot;</span>;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <a class="code" href="LLParser_8cpp.html#aae58e3df0180401e8f3ab75c18fbc07a">if</a> (SVI.DefMI)</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    OS &lt;&lt; <span class="stringliteral">&quot; def: &quot;</span> &lt;&lt; *SVI.DefMI;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    OS &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="keywordflow">return</span> OS;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;}</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment">/// propagateSiblingValue - Propagate the value in SVI to dependents if it is</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment">/// known.  Otherwise remember the dependency for later.</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">/// @param SVIIter SibValues entry to propagate.</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment">/// @param VNI Dependent value, or NULL to propagate to all saved dependents.</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> InlineSpiller::propagateSiblingValue(SibValueMap::iterator SVIIter,</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                                          <a class="code" href="classllvm_1_1VNInfo.html">VNInfo</a> *VNI) {</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  SibValueMap::value_type *SVI = &amp;*SVIIter;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <span class="comment">// When VNI is non-NULL, add it to SVI&#39;s deps, and only propagate to that.</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <a class="code" href="classllvm_1_1TinyPtrVector.html">TinyPtrVector&lt;VNInfo*&gt;</a> FirstDeps;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="keywordflow">if</span> (VNI) {</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    FirstDeps.<a class="code" href="classllvm_1_1TinyPtrVector.html#a1437e12220a4cd03b10656dcb607c642">push_back</a>(VNI);</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    SVI-&gt;second.Deps.push_back(VNI);</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  }</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="comment">// Has the value been completely determined yet?  If not, defer propagation.</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="keywordflow">if</span> (!SVI-&gt;second.hasDef())</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="comment">// Work list of values to propagate.</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;SibValueMap::value_type *, 8&gt;</a> WorkList;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  WorkList.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(SVI);</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <span class="keywordflow">do</span> {</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    SVI = WorkList.<a class="code" href="classllvm_1_1SetVector.html#ae8edadd3fd98e95c3dbdda8f0e36b1c6">pop_back_val</a>();</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <a class="code" href="classllvm_1_1TinyPtrVector.html">TinyPtrVector&lt;VNInfo*&gt;</a> *Deps = VNI ? &amp;FirstDeps : &amp;SVI-&gt;second.Deps;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    VNI = 0;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    SibValueInfo &amp;SV = SVI-&gt;second;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keywordflow">if</span> (!SV.SpillMBB)</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      SV.SpillMBB = LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#a7948bdc0e257a3c8310ff82dfd3441d6">getMBBFromIndex</a>(SV.SpillVNI-&gt;def);</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  prop to &quot;</span> &lt;&lt; Deps-&gt;<a class="code" href="classllvm_1_1TinyPtrVector.html#acbf133519c18f7e338abf7f355fbf4a0">size</a>() &lt;&lt; <span class="stringliteral">&quot;: &quot;</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                 &lt;&lt; SVI-&gt;first-&gt;id &lt;&lt; <span class="charliteral">&#39;@&#39;</span> &lt;&lt; SVI-&gt;first-&gt;def &lt;&lt; <span class="stringliteral">&quot;:\t&quot;</span> &lt;&lt; SV);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    assert(SV.hasDef() &amp;&amp; <span class="stringliteral">&quot;Propagating undefined value&quot;</span>);</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="comment">// Should this value be propagated as a preferred spill candidate?  We don&#39;t</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="comment">// propagate values of registers that are about to spill.</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keywordtype">bool</span> PropSpill = !<a class="code" href="InlineSpiller_8cpp.html#a7819774f1578a13aaf380ec73782c9e4">DisableHoisting</a> &amp;&amp; !isRegToSpill(SV.SpillReg);</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordtype">unsigned</span> SpillDepth = ~0u;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1VNInfo.html">TinyPtrVector&lt;VNInfo*&gt;::iterator</a> DepI = Deps-&gt;<a class="code" href="classllvm_1_1TinyPtrVector.html#a0e09f111089ae4fffb14fa1b22816483">begin</a>(),</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;         DepE = Deps-&gt;<a class="code" href="classllvm_1_1TinyPtrVector.html#aa8dc0937a5c524026865ef2a68d3c4f1">end</a>(); DepI != DepE; ++DepI) {</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      SibValueMap::iterator DepSVI = SibValues.find(*DepI);</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      assert(DepSVI != SibValues.end() &amp;&amp; <span class="stringliteral">&quot;Dependent value not in SibValues&quot;</span>);</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      SibValueInfo &amp;DepSV = DepSVI-&gt;second;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      <span class="keywordflow">if</span> (!DepSV.SpillMBB)</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        DepSV.SpillMBB = LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#a7948bdc0e257a3c8310ff82dfd3441d6">getMBBFromIndex</a>(DepSV.SpillVNI-&gt;def);</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      <span class="comment">// Propagate defining instruction.</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      <span class="keywordflow">if</span> (!DepSV.hasDef()) {</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        DepSV.DefMI = SV.DefMI;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        DepSV.DefByOrigPHI = SV.DefByOrigPHI;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      }</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;      <span class="comment">// Propagate AllDefsAreReloads.  For PHI values, this computes an AND of</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      <span class="comment">// all predecessors.</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;      <span class="keywordflow">if</span> (!SV.AllDefsAreReloads &amp;&amp; DepSV.AllDefsAreReloads) {</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        DepSV.AllDefsAreReloads = <span class="keyword">false</span>;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;      }</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      <span class="comment">// Propagate best spill value.</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;      <span class="keywordflow">if</span> (PropSpill &amp;&amp; SV.SpillVNI != DepSV.SpillVNI) {</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        <span class="keywordflow">if</span> (SV.SpillMBB == DepSV.SpillMBB) {</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;          <span class="comment">// DepSV is in the same block.  Hoist when dominated.</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;          <span class="keywordflow">if</span> (DepSV.KillsSource &amp;&amp; SV.SpillVNI-&gt;def &lt; DepSV.SpillVNI-&gt;def) {</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            <span class="comment">// This is an alternative def earlier in the same MBB.</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            <span class="comment">// Hoist the spill as far as possible in SpillMBB. This can ease</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            <span class="comment">// register pressure:</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            <span class="comment">//</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;            <span class="comment">//   x = def</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            <span class="comment">//   y = use x</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            <span class="comment">//   s = copy x</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            <span class="comment">//</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            <span class="comment">// Hoisting the spill of s to immediately after the def removes the</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            <span class="comment">// interference between x and y:</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            <span class="comment">//</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;            <span class="comment">//   x = def</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            <span class="comment">//   spill x</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            <span class="comment">//   y = use x&lt;kill&gt;</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;            <span class="comment">//</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;            <span class="comment">// This hoist only helps when the DepSV copy kills its source.</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;            DepSV.SpillReg = SV.SpillReg;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            DepSV.SpillVNI = SV.SpillVNI;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            DepSV.SpillMBB = SV.SpillMBB;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;          }</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;          <span class="comment">// DepSV is in a different block.</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;          <span class="keywordflow">if</span> (SpillDepth == ~0u)</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            SpillDepth = Loops.<a class="code" href="classllvm_1_1MachineLoopInfo.html#a77d3f9c52df47750480d4302ae639749">getLoopDepth</a>(SV.SpillMBB);</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;          <span class="comment">// Also hoist spills to blocks with smaller loop depth, but make sure</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;          <span class="comment">// that the new value dominates.  Non-phi dependents are always</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;          <span class="comment">// dominated, phis need checking.</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;          <span class="keywordflow">if</span> ((Loops.<a class="code" href="classllvm_1_1MachineLoopInfo.html#a77d3f9c52df47750480d4302ae639749">getLoopDepth</a>(DepSV.SpillMBB) &gt; SpillDepth) &amp;&amp;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;              (!DepSVI-&gt;first-&gt;isPHIDef() ||</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;               MDT.<a class="code" href="classllvm_1_1MachineDominatorTree.html#a22bd7da7d9fa4793cb214e659c198ff6">dominates</a>(SV.SpillMBB, DepSV.SpillMBB))) {</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;            Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;            DepSV.SpillReg = SV.SpillReg;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            DepSV.SpillVNI = SV.SpillVNI;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;            DepSV.SpillMBB = SV.SpillMBB;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;          }</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        }</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      }</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;      <span class="keywordflow">if</span> (!Changed)</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      <span class="comment">// Something changed in DepSVI. Propagate to dependents.</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      WorkList.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(&amp;*DepSVI);</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  update &quot;</span> &lt;&lt; DepSVI-&gt;first-&gt;id &lt;&lt; <span class="charliteral">&#39;@&#39;</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            &lt;&lt; DepSVI-&gt;first-&gt;def &lt;&lt; <span class="stringliteral">&quot; to:\t&quot;</span> &lt;&lt; DepSV);</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    }</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  } <span class="keywordflow">while</span> (!WorkList.<a class="code" href="classllvm_1_1SetVector.html#a298a4f422dfc8478ad9cdd0a106cd5e4">empty</a>());</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;}</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment">/// traceSiblingValue - Trace a value that is about to be spilled back to the</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment">/// real defining instructions by looking through sibling copies. Always stay</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment">/// within the range of OrigVNI so the registers are known to carry the same</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment">/// value.</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment">/// Determine if the value is defined by all reloads, so spilling isn&#39;t</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="comment">/// necessary - the value is already in the stack slot.</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment">/// Return a defining instruction that may be a candidate for rematerialization.</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *InlineSpiller::traceSiblingValue(<span class="keywordtype">unsigned</span> UseReg, <a class="code" href="classllvm_1_1VNInfo.html">VNInfo</a> *UseVNI,</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                                               <a class="code" href="classllvm_1_1VNInfo.html">VNInfo</a> *OrigVNI) {</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <span class="comment">// Check if a cached value already exists.</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  SibValueMap::iterator SVI;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="keywordtype">bool</span> Inserted;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <a class="code" href="namespacellvm.html#a7dc3e2c002713fec56bdbf16aa704576">tie</a>(SVI, Inserted) =</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    SibValues.insert(std::make_pair(UseVNI, SibValueInfo(UseReg, UseVNI)));</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  <span class="keywordflow">if</span> (!Inserted) {</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Cached value &quot;</span> &lt;&lt; <a class="code" href="classllvm_1_1PrintReg.html">PrintReg</a>(UseReg) &lt;&lt; <span class="charliteral">&#39;:&#39;</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                 &lt;&lt; UseVNI-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ad989a0c1b26066308798f4d11a0e69df">id</a> &lt;&lt; <span class="charliteral">&#39;@&#39;</span> &lt;&lt; UseVNI-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ae623a0f1ab59da851f2ebf1674d1fddb">def</a> &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; SVI-&gt;second);</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keywordflow">return</span> SVI-&gt;second.DefMI;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  }</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Tracing value &quot;</span> &lt;&lt; <a class="code" href="classllvm_1_1PrintReg.html">PrintReg</a>(UseReg) &lt;&lt; <span class="charliteral">&#39;:&#39;</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;               &lt;&lt; UseVNI-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ad989a0c1b26066308798f4d11a0e69df">id</a> &lt;&lt; <span class="charliteral">&#39;@&#39;</span> &lt;&lt; UseVNI-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ae623a0f1ab59da851f2ebf1674d1fddb">def</a> &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  <span class="comment">// List of (Reg, VNI) that have been inserted into SibValues, but need to be</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  <span class="comment">// processed.</span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;unsigned, VNInfo*&gt;</a>, 8&gt; WorkList;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  WorkList.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(std::make_pair(UseReg, UseVNI));</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <span class="keywordflow">do</span> {</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <a class="code" href="classllvm_1_1VNInfo.html">VNInfo</a> *VNI;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <a class="code" href="namespacellvm.html#a7dc3e2c002713fec56bdbf16aa704576">tie</a>(Reg, VNI) = WorkList.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">pop_back_val</a>();</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> &lt;&lt; <a class="code" href="classllvm_1_1PrintReg.html">PrintReg</a>(Reg) &lt;&lt; <span class="charliteral">&#39;:&#39;</span> &lt;&lt; VNI-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ad989a0c1b26066308798f4d11a0e69df">id</a> &lt;&lt; <span class="charliteral">&#39;@&#39;</span> &lt;&lt; VNI-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ae623a0f1ab59da851f2ebf1674d1fddb">def</a></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot;:\t&quot;</span>);</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="comment">// First check if this value has already been computed.</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    SVI = SibValues.find(VNI);</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    assert(SVI != SibValues.end() &amp;&amp; <span class="stringliteral">&quot;Missing SibValues entry&quot;</span>);</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="comment">// Trace through PHI-defs created by live range splitting.</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keywordflow">if</span> (VNI-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ae0af39c31bb54b8c908d8d4a15f55da5">isPHIDef</a>()) {</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      <span class="comment">// Stop at original PHIs.  We don&#39;t know the value at the predecessors.</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      <span class="keywordflow">if</span> (VNI-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ae623a0f1ab59da851f2ebf1674d1fddb">def</a> == OrigVNI-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ae623a0f1ab59da851f2ebf1674d1fddb">def</a>) {</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;orig phi value\n&quot;</span>);</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        SVI-&gt;second.DefByOrigPHI = <span class="keyword">true</span>;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        SVI-&gt;second.AllDefsAreReloads = <span class="keyword">false</span>;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        propagateSiblingValue(SVI);</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;      }</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;      <span class="comment">// This is a PHI inserted by live range splitting.  We could trace the</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;      <span class="comment">// live-out value from predecessor blocks, but that search can be very</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      <span class="comment">// expensive if there are many predecessors and many more PHIs as</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      <span class="comment">// generated by tail-dup when it sees an indirectbr.  Instead, look at</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;      <span class="comment">// all the non-PHI defs that have the same value as OrigVNI.  They must</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;      <span class="comment">// jointly dominate VNI-&gt;def.  This is not optimal since VNI may actually</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;      <span class="comment">// be jointly dominated by a smaller subset of defs, so there is a change</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      <span class="comment">// we will miss a AllDefsAreReloads optimization.</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      <span class="comment">// Separate all values dominated by OrigVNI into PHIs and non-PHIs.</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;VNInfo*, 8&gt;</a> PHIs, NonPHIs;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;LI = LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#a70cf6a51b043dc9f8ae683c266d5d9c4">getInterval</a>(Reg);</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;OrigLI = LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#a70cf6a51b043dc9f8ae683c266d5d9c4">getInterval</a>(Original);</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LiveRange.html#aab457d3251eb957215a85c472346e064">LiveInterval::vni_iterator</a> VI = LI.<a class="code" href="classllvm_1_1LiveRange.html#a5fb099e2afb74f4c922f32894b30b279">vni_begin</a>(), VE = LI.<a class="code" href="classllvm_1_1LiveRange.html#aca7b7d6f329690e6bd5b5e1c83db7c1e">vni_end</a>();</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;           VI != VE; ++VI) {</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        <a class="code" href="classllvm_1_1VNInfo.html">VNInfo</a> *VNI2 = *VI;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        <span class="keywordflow">if</span> (VNI2-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ae4b6b5a6aeabaa9cd6ba683d8786b2a5">isUnused</a>())</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        <span class="keywordflow">if</span> (!OrigLI.<a class="code" href="classllvm_1_1LiveRange.html#ae2d701db395706c251a9b945d9b43b3b">containsOneValue</a>() &amp;&amp;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;            OrigLI.<a class="code" href="classllvm_1_1LiveRange.html#a367c3737ac6d7da627333ad5515be2e7">getVNInfoAt</a>(VNI2-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ae623a0f1ab59da851f2ebf1674d1fddb">def</a>) != OrigVNI)</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        <span class="keywordflow">if</span> (VNI2-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ae0af39c31bb54b8c908d8d4a15f55da5">isPHIDef</a>() &amp;&amp; VNI2-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ae623a0f1ab59da851f2ebf1674d1fddb">def</a> != OrigVNI-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ae623a0f1ab59da851f2ebf1674d1fddb">def</a>)</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;          PHIs.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(VNI2);</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;          NonPHIs.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(VNI2);</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;      }</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;split phi value, checking &quot;</span> &lt;&lt; PHIs.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>()</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot; phi-defs, and &quot;</span> &lt;&lt; NonPHIs.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>()</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot; non-phi/orig defs\n&quot;</span>);</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;      <span class="comment">// Create entries for all the PHIs.  Don&#39;t add them to the worklist, we</span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;      <span class="comment">// are processing all of them in one go here.</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = PHIs.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        SibValues.insert(std::make_pair(PHIs[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], SibValueInfo(Reg, PHIs[i])));</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      <span class="comment">// Add every PHI as a dependent of all the non-PHIs.</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = NonPHIs.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); i != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        <a class="code" href="classllvm_1_1VNInfo.html">VNInfo</a> *NonPHI = NonPHIs[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        <span class="comment">// Known value? Try an insertion.</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        <a class="code" href="namespacellvm.html#a7dc3e2c002713fec56bdbf16aa704576">tie</a>(SVI, Inserted) =</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;          SibValues.insert(std::make_pair(NonPHI, SibValueInfo(Reg, NonPHI)));</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        <span class="comment">// Add all the PHIs as dependents of NonPHI.</span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> pi = 0, pe = PHIs.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); pi != pe; ++pi)</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;          SVI-&gt;second.Deps.push_back(PHIs[pi]);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        <span class="comment">// This is the first time we see NonPHI, add it to the worklist.</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        <span class="keywordflow">if</span> (Inserted)</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;          WorkList.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(std::make_pair(Reg, NonPHI));</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;          <span class="comment">// Propagate to all inserted PHIs, not just VNI.</span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;          propagateSiblingValue(SVI);</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      }</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      <span class="comment">// Next work list item.</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    }</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a> = LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#ab306d0d7e986cc18578a5150c44a9f7a">getInstructionFromIndex</a>(VNI-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ae623a0f1ab59da851f2ebf1674d1fddb">def</a>);</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    assert(MI &amp;&amp; <span class="stringliteral">&quot;Missing def&quot;</span>);</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="comment">// Trace through sibling copies.</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="keywordflow">if</span> (<span class="keywordtype">unsigned</span> SrcReg = <a class="code" href="InlineSpiller_8cpp.html#a5be2fd119675b3a42f255829d377267d">isFullCopyOf</a>(MI, Reg)) {</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;      <span class="keywordflow">if</span> (isSibling(SrcReg)) {</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;SrcLI = LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#a70cf6a51b043dc9f8ae683c266d5d9c4">getInterval</a>(SrcReg);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        <a class="code" href="classllvm_1_1LiveQueryResult.html">LiveQueryResult</a> SrcQ = SrcLI.<a class="code" href="classllvm_1_1LiveRange.html#acd0853cbfd87e166b73d3e24502f2346">Query</a>(VNI-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ae623a0f1ab59da851f2ebf1674d1fddb">def</a>);</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        assert(SrcQ.<a class="code" href="classllvm_1_1LiveQueryResult.html#a04fcce5cd33d3ffe16309a908387a982">valueIn</a>() &amp;&amp; <span class="stringliteral">&quot;Copy from non-existing value&quot;</span>);</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <span class="comment">// Check if this COPY kills its source.</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        SVI-&gt;second.KillsSource = SrcQ.<a class="code" href="classllvm_1_1LiveQueryResult.html#a5c02c56a4b3e6554395d57b0ac08dbf1">isKill</a>();</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        <a class="code" href="classllvm_1_1VNInfo.html">VNInfo</a> *SrcVNI = SrcQ.<a class="code" href="classllvm_1_1LiveQueryResult.html#a04fcce5cd33d3ffe16309a908387a982">valueIn</a>();</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;copy of &quot;</span> &lt;&lt; <a class="code" href="classllvm_1_1PrintReg.html">PrintReg</a>(SrcReg) &lt;&lt; <span class="charliteral">&#39;:&#39;</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                     &lt;&lt; SrcVNI-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ad989a0c1b26066308798f4d11a0e69df">id</a> &lt;&lt; <span class="charliteral">&#39;@&#39;</span> &lt;&lt; SrcVNI-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ae623a0f1ab59da851f2ebf1674d1fddb">def</a></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                     &lt;&lt; <span class="stringliteral">&quot; kill=&quot;</span> &lt;&lt; <span class="keywordtype">unsigned</span>(SVI-&gt;second.KillsSource) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        <span class="comment">// Known sibling source value? Try an insertion.</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <a class="code" href="namespacellvm.html#a7dc3e2c002713fec56bdbf16aa704576">tie</a>(SVI, Inserted) = SibValues.insert(std::make_pair(SrcVNI,</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                                                 SibValueInfo(SrcReg, SrcVNI)));</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        <span class="comment">// This is the first time we see Src, add it to the worklist.</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        <span class="keywordflow">if</span> (Inserted)</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;          WorkList.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(std::make_pair(SrcReg, SrcVNI));</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        propagateSiblingValue(SVI, VNI);</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        <span class="comment">// Next work list item.</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;      }</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    }</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="comment">// Track reachable reloads.</span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    SVI-&gt;second.DefMI = <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    SVI-&gt;second.SpillMBB = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">getParent</a>();</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="keywordtype">int</span> FI;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="keywordflow">if</span> (Reg == TII.<a class="code" href="classllvm_1_1TargetInstrInfo.html#a9fcdc96a6712deb1a8a3d2e18af6db3f">isLoadFromStackSlot</a>(MI, FI) &amp;&amp; FI == StackSlot) {</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;reload\n&quot;</span>);</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;      propagateSiblingValue(SVI);</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;      <span class="comment">// Next work list item.</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    }</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="comment">// Potential remat candidate.</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;def &quot;</span> &lt;&lt; *MI);</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    SVI-&gt;second.AllDefsAreReloads = <span class="keyword">false</span>;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    propagateSiblingValue(SVI);</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  } <span class="keywordflow">while</span> (!WorkList.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>());</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <span class="comment">// Look up the value we were looking for.  We already did this lookup at the</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <span class="comment">// top of the function, but SibValues may have been invalidated.</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  SVI = SibValues.find(UseVNI);</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  assert(SVI != SibValues.end() &amp;&amp; <span class="stringliteral">&quot;Didn&#39;t compute requested info&quot;</span>);</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  traced to:\t&quot;</span> &lt;&lt; SVI-&gt;second);</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <span class="keywordflow">return</span> SVI-&gt;second.DefMI;</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;}</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="comment">/// analyzeSiblingValues - Trace values defined by sibling copies back to</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="comment">/// something that isn&#39;t a sibling copy.</span></div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="comment">/// Keep track of values that may be rematerializable.</span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> InlineSpiller::analyzeSiblingValues() {</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  SibValues.clear();</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  <span class="comment">// No siblings at all?</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  <span class="keywordflow">if</span> (Edit-&gt;<a class="code" href="classllvm_1_1LiveRangeEdit.html#a8038b08f86db8d7e7f951f7ef4352767">getReg</a>() == Original)</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;OrigLI = LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#a70cf6a51b043dc9f8ae683c266d5d9c4">getInterval</a>(Original);</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = RegsToSpill.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <span class="keywordtype">unsigned</span> Reg = RegsToSpill[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;LI = LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#a70cf6a51b043dc9f8ae683c266d5d9c4">getInterval</a>(Reg);</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LiveRange.html#aab1fd974b038b678da5bf05d9df2f930">LiveInterval::const_vni_iterator</a> VI = LI.<a class="code" href="classllvm_1_1LiveRange.html#a5fb099e2afb74f4c922f32894b30b279">vni_begin</a>(),</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;         VE = LI.<a class="code" href="classllvm_1_1LiveRange.html#aca7b7d6f329690e6bd5b5e1c83db7c1e">vni_end</a>(); VI != VE; ++VI) {</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;      <a class="code" href="classllvm_1_1VNInfo.html">VNInfo</a> *VNI = *VI;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;      <span class="keywordflow">if</span> (VNI-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ae4b6b5a6aeabaa9cd6ba683d8786b2a5">isUnused</a>())</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;      <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *DefMI = 0;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;      <span class="keywordflow">if</span> (!VNI-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ae0af39c31bb54b8c908d8d4a15f55da5">isPHIDef</a>()) {</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;       DefMI = LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#ab306d0d7e986cc18578a5150c44a9f7a">getInstructionFromIndex</a>(VNI-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ae623a0f1ab59da851f2ebf1674d1fddb">def</a>);</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;       assert(DefMI &amp;&amp; <span class="stringliteral">&quot;No defining instruction&quot;</span>);</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      }</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;      <span class="comment">// Check possible sibling copies.</span></div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;      <span class="keywordflow">if</span> (VNI-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ae0af39c31bb54b8c908d8d4a15f55da5">isPHIDef</a>() || DefMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ae0ac5973cd95f76e3365e67aaad69de6">isCopy</a>()) {</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        <a class="code" href="classllvm_1_1VNInfo.html">VNInfo</a> *OrigVNI = OrigLI.<a class="code" href="classllvm_1_1LiveRange.html#a367c3737ac6d7da627333ad5515be2e7">getVNInfoAt</a>(VNI-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ae623a0f1ab59da851f2ebf1674d1fddb">def</a>);</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        assert(OrigVNI &amp;&amp; <span class="stringliteral">&quot;Def outside original live range&quot;</span>);</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        <span class="keywordflow">if</span> (OrigVNI-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ae623a0f1ab59da851f2ebf1674d1fddb">def</a> != VNI-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ae623a0f1ab59da851f2ebf1674d1fddb">def</a>)</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;          DefMI = traceSiblingValue(Reg, VNI, OrigVNI);</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;      }</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;      <span class="keywordflow">if</span> (DefMI &amp;&amp; Edit-&gt;<a class="code" href="classllvm_1_1LiveRangeEdit.html#af8d7caeee6400e3a30914fba0e181866">checkRematerializable</a>(VNI, DefMI, AA)) {</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Value &quot;</span> &lt;&lt; <a class="code" href="classllvm_1_1PrintReg.html">PrintReg</a>(Reg) &lt;&lt; <span class="charliteral">&#39;:&#39;</span> &lt;&lt; VNI-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ad989a0c1b26066308798f4d11a0e69df">id</a> &lt;&lt; <span class="charliteral">&#39;@&#39;</span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                     &lt;&lt; VNI-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ae623a0f1ab59da851f2ebf1674d1fddb">def</a> &lt;&lt; <span class="stringliteral">&quot; may remat from &quot;</span> &lt;&lt; *DefMI);</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      }</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    }</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  }</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;}</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;<span class="comment">/// hoistSpill - Given a sibling copy that defines a value to be spilled, insert</span></div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;<span class="comment">/// a spill at a better location.</span></div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> InlineSpiller::hoistSpill(<a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;SpillLI, <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *CopyMI) {</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> Idx = LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#a6bbcfa1e19c409a905ffc0356c060bd4">getInstructionIndex</a>(CopyMI);</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  <a class="code" href="classllvm_1_1VNInfo.html">VNInfo</a> *VNI = SpillLI.<a class="code" href="classllvm_1_1LiveRange.html#a367c3737ac6d7da627333ad5515be2e7">getVNInfoAt</a>(Idx.<a class="code" href="classllvm_1_1SlotIndex.html#a04196b5e551d63690ede0244f80f2503">getRegSlot</a>());</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  assert(VNI &amp;&amp; VNI-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ae623a0f1ab59da851f2ebf1674d1fddb">def</a> == Idx.<a class="code" href="classllvm_1_1SlotIndex.html#a04196b5e551d63690ede0244f80f2503">getRegSlot</a>() &amp;&amp; <span class="stringliteral">&quot;Not defined by copy&quot;</span>);</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  SibValueMap::iterator <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = SibValues.find(VNI);</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <span class="keywordflow">if</span> (I == SibValues.end())</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  <span class="keyword">const</span> SibValueInfo &amp;SVI = I-&gt;second;</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  <span class="comment">// Let the normal folding code deal with the boring case.</span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  <span class="keywordflow">if</span> (!SVI.AllDefsAreReloads &amp;&amp; SVI.SpillVNI == VNI)</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  <span class="comment">// SpillReg may have been deleted by remat and DCE.</span></div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <span class="keywordflow">if</span> (!LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#a658add65ad8e7c1421fbe79179559121">hasInterval</a>(SVI.SpillReg)) {</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Stale interval: &quot;</span> &lt;&lt; <a class="code" href="classllvm_1_1PrintReg.html">PrintReg</a>(SVI.SpillReg) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    SibValues.erase(I);</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  }</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;SibLI = LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#a70cf6a51b043dc9f8ae683c266d5d9c4">getInterval</a>(SVI.SpillReg);</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  <span class="keywordflow">if</span> (!SibLI.<a class="code" href="classllvm_1_1LiveRange.html#a0fcc0f0a530494e39f8d378120886f9d">containsValue</a>(SVI.SpillVNI)) {</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Stale value: &quot;</span> &lt;&lt; <a class="code" href="classllvm_1_1PrintReg.html">PrintReg</a>(SVI.SpillReg) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    SibValues.erase(I);</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  }</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  <span class="comment">// Conservatively extend the stack slot range to the range of the original</span></div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <span class="comment">// value. We may be able to do better with stack slot coloring by being more</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  <span class="comment">// careful here.</span></div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  assert(StackInt &amp;&amp; <span class="stringliteral">&quot;No stack slot assigned yet.&quot;</span>);</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;OrigLI = LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#a70cf6a51b043dc9f8ae683c266d5d9c4">getInterval</a>(Original);</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <a class="code" href="classllvm_1_1VNInfo.html">VNInfo</a> *OrigVNI = OrigLI.<a class="code" href="classllvm_1_1LiveRange.html#a367c3737ac6d7da627333ad5515be2e7">getVNInfoAt</a>(Idx);</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  StackInt-&gt;<a class="code" href="classllvm_1_1LiveRange.html#a325a4ec9c33a3dead9ff01c9e70fd534">MergeValueInAsValue</a>(OrigLI, OrigVNI, StackInt-&gt;<a class="code" href="classllvm_1_1LiveRange.html#a699598a93a78f8b0376cfb49933cbce7">getValNumInfo</a>(0));</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\tmerged orig valno &quot;</span> &lt;&lt; OrigVNI-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ad989a0c1b26066308798f4d11a0e69df">id</a> &lt;&lt; <span class="stringliteral">&quot;: &quot;</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;               &lt;&lt; *StackInt &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  <span class="comment">// Already spilled everywhere.</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  <span class="keywordflow">if</span> (SVI.AllDefsAreReloads) {</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\tno spill needed: &quot;</span> &lt;&lt; SVI);</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    ++NumOmitReloadSpill;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  }</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  <span class="comment">// We are going to spill SVI.SpillVNI immediately after its def, so clear out</span></div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  <span class="comment">// any later spills of the same value.</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  eliminateRedundantSpills(SibLI, SVI.SpillVNI);</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB = LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#a7948bdc0e257a3c8310ff82dfd3441d6">getMBBFromIndex</a>(SVI.SpillVNI-&gt;def);</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> <a class="code" href="MCModuleYAML_8cpp.html#a5cdd6ae6b245e832e7cc5e4edf035cb2">MII</a>;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  <span class="keywordflow">if</span> (SVI.SpillVNI-&gt;isPHIDef())</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    MII = MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3be7d94076d328797ab57ce09cefab33">SkipPHIsAndLabels</a>(MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>());</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  <span class="keywordflow">else</span> {</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *DefMI = LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#ab306d0d7e986cc18578a5150c44a9f7a">getInstructionFromIndex</a>(SVI.SpillVNI-&gt;def);</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    assert(DefMI &amp;&amp; <span class="stringliteral">&quot;Defining instruction disappeared&quot;</span>);</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    MII = DefMI;</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    ++<a class="code" href="MCModuleYAML_8cpp.html#a5cdd6ae6b245e832e7cc5e4edf035cb2">MII</a>;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  }</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  <span class="comment">// Insert spill without kill flag immediately after def.</span></div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  TII.<a class="code" href="classllvm_1_1TargetInstrInfo.html#a94d273699f7fdbd1a01477c4ca8014dd">storeRegToStackSlot</a>(*MBB, MII, SVI.SpillReg, <span class="keyword">false</span>, StackSlot,</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                          MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#ab3904d3601dbe52865d5f2e33a06d80d">getRegClass</a>(SVI.SpillReg), &amp;TRI);</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  --<a class="code" href="MCModuleYAML_8cpp.html#a5cdd6ae6b245e832e7cc5e4edf035cb2">MII</a>; <span class="comment">// Point to store instruction.</span></div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#a72032c8eefbf5b63bd37f24bdf2bbbe8">InsertMachineInstrInMaps</a>(MII);</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\thoisted: &quot;</span> &lt;&lt; SVI.SpillVNI-&gt;def &lt;&lt; <span class="charliteral">&#39;\t&#39;</span> &lt;&lt; *MII);</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  ++NumSpills;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  ++NumHoists;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;}</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="comment">/// eliminateRedundantSpills - SLI:VNI is known to be on the stack. Remove any</span></div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;<span class="comment">/// redundant spills of this value in SLI.reg and sibling copies.</span></div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> InlineSpiller::eliminateRedundantSpills(<a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;SLI, <a class="code" href="classllvm_1_1VNInfo.html">VNInfo</a> *VNI) {</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  assert(VNI &amp;&amp; <span class="stringliteral">&quot;Missing value&quot;</span>);</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;LiveInterval*, VNInfo*&gt;</a>, 8&gt; WorkList;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  WorkList.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(std::make_pair(&amp;SLI, VNI));</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  assert(StackInt &amp;&amp; <span class="stringliteral">&quot;No stack slot assigned yet.&quot;</span>);</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  <span class="keywordflow">do</span> {</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> *LI;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <a class="code" href="namespacellvm.html#a7dc3e2c002713fec56bdbf16aa704576">tie</a>(LI, VNI) = WorkList.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">pop_back_val</a>();</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <span class="keywordtype">unsigned</span> Reg = LI-&gt;<a class="code" href="classllvm_1_1LiveInterval.html#a4ec9ddf8db4481c798f557e8af82693f">reg</a>;</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Checking redundant spills for &quot;</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;                 &lt;&lt; VNI-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ad989a0c1b26066308798f4d11a0e69df">id</a> &lt;&lt; <span class="charliteral">&#39;@&#39;</span> &lt;&lt; VNI-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ae623a0f1ab59da851f2ebf1674d1fddb">def</a> &lt;&lt; <span class="stringliteral">&quot; in &quot;</span> &lt;&lt; *LI &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <span class="comment">// Regs to spill are taken care of.</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <span class="keywordflow">if</span> (isRegToSpill(Reg))</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <span class="comment">// Add all of VNI&#39;s live range to StackInt.</span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    StackInt-&gt;<a class="code" href="classllvm_1_1LiveRange.html#a325a4ec9c33a3dead9ff01c9e70fd534">MergeValueInAsValue</a>(*LI, VNI, StackInt-&gt;<a class="code" href="classllvm_1_1LiveRange.html#a699598a93a78f8b0376cfb49933cbce7">getValNumInfo</a>(0));</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Merged to stack int: &quot;</span> &lt;&lt; *StackInt &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <span class="comment">// Find all spills and copies of VNI.</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator.html">MachineRegisterInfo::use_nodbg_iterator</a> UI = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#aad684f050965249161650dcdf5a58fa4">use_nodbg_begin</a>(Reg);</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;         <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a> = UI.skipInstruction();) {</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      <span class="keywordflow">if</span> (!MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ae0ac5973cd95f76e3365e67aaad69de6">isCopy</a>() &amp;&amp; !MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aa5f0eb2aad4a731d5d5133b8cb5e0a98">mayStore</a>())</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;      <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> Idx = LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#a6bbcfa1e19c409a905ffc0356c060bd4">getInstructionIndex</a>(MI);</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      <span class="keywordflow">if</span> (LI-&gt;<a class="code" href="classllvm_1_1LiveRange.html#a367c3737ac6d7da627333ad5515be2e7">getVNInfoAt</a>(Idx) != VNI)</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;      <span class="comment">// Follow sibling copies down the dominator tree.</span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;      <span class="keywordflow">if</span> (<span class="keywordtype">unsigned</span> DstReg = <a class="code" href="InlineSpiller_8cpp.html#a5be2fd119675b3a42f255829d377267d">isFullCopyOf</a>(MI, Reg)) {</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        <span class="keywordflow">if</span> (isSibling(DstReg)) {</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;           <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;DstLI = LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#a70cf6a51b043dc9f8ae683c266d5d9c4">getInterval</a>(DstReg);</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;           <a class="code" href="classllvm_1_1VNInfo.html">VNInfo</a> *DstVNI = DstLI.<a class="code" href="classllvm_1_1LiveRange.html#a367c3737ac6d7da627333ad5515be2e7">getVNInfoAt</a>(Idx.<a class="code" href="classllvm_1_1SlotIndex.html#a04196b5e551d63690ede0244f80f2503">getRegSlot</a>());</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;           assert(DstVNI &amp;&amp; <span class="stringliteral">&quot;Missing defined value&quot;</span>);</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;           assert(DstVNI-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ae623a0f1ab59da851f2ebf1674d1fddb">def</a> == Idx.<a class="code" href="classllvm_1_1SlotIndex.html#a04196b5e551d63690ede0244f80f2503">getRegSlot</a>() &amp;&amp; <span class="stringliteral">&quot;Wrong copy def slot&quot;</span>);</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;           WorkList.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(std::make_pair(&amp;DstLI, DstVNI));</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        }</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;      }</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;      <span class="comment">// Erase spills.</span></div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;      <span class="keywordtype">int</span> FI;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;      <span class="keywordflow">if</span> (Reg == TII.<a class="code" href="classllvm_1_1TargetInstrInfo.html#aa8d4d336ac91a47a6e4568ba18b9d66a">isStoreToStackSlot</a>(MI, FI) &amp;&amp; FI == StackSlot) {</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Redundant spill &quot;</span> &lt;&lt; Idx &lt;&lt; <span class="charliteral">&#39;\t&#39;</span> &lt;&lt; *MI);</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        <span class="comment">// eliminateDeadDefs won&#39;t normally remove stores, so switch opcode.</span></div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a1ecb35298bc4d1fe03997959e1210c87">setDesc</a>(TII.<a class="code" href="classllvm_1_1MCInstrInfo.html#ab16f5a81fccfe4b7f645ba5a74ffad02">get</a>(<a class="code" href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8a3de0a03c0721e0683934a37868f6a421">TargetOpcode::KILL</a>));</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;        DeadDefs.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(MI);</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        ++NumSpillsRemoved;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        --NumSpills;</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;      }</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    }</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;  } <span class="keywordflow">while</span> (!WorkList.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>());</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;}</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;<span class="comment">//                            Rematerialization</span></div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="comment">/// markValueUsed - Remember that VNI failed to rematerialize, so its defining</span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="comment">/// instruction cannot be eliminated. See through snippet copies</span></div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> InlineSpiller::markValueUsed(<a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> *LI, <a class="code" href="classllvm_1_1VNInfo.html">VNInfo</a> *VNI) {</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;LiveInterval*, VNInfo*&gt;</a>, 8&gt; WorkList;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;  WorkList.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(std::make_pair(LI, VNI));</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  <span class="keywordflow">do</span> {</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    <a class="code" href="namespacellvm.html#a7dc3e2c002713fec56bdbf16aa704576">tie</a>(LI, VNI) = WorkList.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">pop_back_val</a>();</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    <span class="keywordflow">if</span> (!UsedValues.<a class="code" href="classllvm_1_1SmallPtrSet.html#a9b6dd0fc7a648a939e571246045b673e">insert</a>(VNI))</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <span class="keywordflow">if</span> (VNI-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ae0af39c31bb54b8c908d8d4a15f55da5">isPHIDef</a>()) {</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;      <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB = LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#a7948bdc0e257a3c8310ff82dfd3441d6">getMBBFromIndex</a>(VNI-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ae623a0f1ab59da851f2ebf1674d1fddb">def</a>);</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7e7a1a247b7725a24fe19a91f90782cc">MachineBasicBlock::pred_iterator</a> PI = MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab644fcf07a4c2708333cf66276282357">pred_begin</a>(),</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;             PE = MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a0359a738e0412c5a7ea55d61175e0661">pred_end</a>(); PI != PE; ++PI) {</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        <a class="code" href="classllvm_1_1VNInfo.html">VNInfo</a> *PVNI = LI-&gt;<a class="code" href="classllvm_1_1LiveRange.html#a435a93196594094643aae944c4ec6cb0">getVNInfoBefore</a>(LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#a4ed1e0b18a1fa4219caac5e38e99286e">getMBBEndIdx</a>(*PI));</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;        <span class="keywordflow">if</span> (PVNI)</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;          WorkList.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(std::make_pair(LI, PVNI));</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;      }</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    }</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <span class="comment">// Follow snippet copies.</span></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a> = LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#ab306d0d7e986cc18578a5150c44a9f7a">getInstructionFromIndex</a>(VNI-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ae623a0f1ab59da851f2ebf1674d1fddb">def</a>);</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <span class="keywordflow">if</span> (!SnippetCopies.<a class="code" href="classllvm_1_1SmallPtrSet.html#a2ced6343b8ad006a757059554bbf9f37">count</a>(MI))</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;SnipLI = LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#a70cf6a51b043dc9f8ae683c266d5d9c4">getInterval</a>(MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(1).<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>());</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    assert(isRegToSpill(SnipLI.<a class="code" href="classllvm_1_1LiveInterval.html#a4ec9ddf8db4481c798f557e8af82693f">reg</a>) &amp;&amp; <span class="stringliteral">&quot;Unexpected register in copy&quot;</span>);</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <a class="code" href="classllvm_1_1VNInfo.html">VNInfo</a> *SnipVNI = SnipLI.<a class="code" href="classllvm_1_1LiveRange.html#a367c3737ac6d7da627333ad5515be2e7">getVNInfoAt</a>(VNI-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ae623a0f1ab59da851f2ebf1674d1fddb">def</a>.<a class="code" href="classllvm_1_1SlotIndex.html#a04196b5e551d63690ede0244f80f2503">getRegSlot</a>(<span class="keyword">true</span>));</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    assert(SnipVNI &amp;&amp; <span class="stringliteral">&quot;Snippet undefined before copy&quot;</span>);</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    WorkList.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(std::make_pair(&amp;SnipLI, SnipVNI));</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;  } <span class="keywordflow">while</span> (!WorkList.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>());</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;}</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;<span class="comment">/// reMaterializeFor - Attempt to rematerialize before MI instead of reloading.</span></div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> InlineSpiller::reMaterializeFor(<a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;VirtReg,</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;                                     <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>) {</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> UseIdx = LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#a6bbcfa1e19c409a905ffc0356c060bd4">getInstructionIndex</a>(MI).<a class="code" href="classllvm_1_1SlotIndex.html#a04196b5e551d63690ede0244f80f2503">getRegSlot</a>(<span class="keyword">true</span>);</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  <a class="code" href="classllvm_1_1VNInfo.html">VNInfo</a> *ParentVNI = VirtReg.<a class="code" href="classllvm_1_1LiveRange.html#a367c3737ac6d7da627333ad5515be2e7">getVNInfoAt</a>(UseIdx.<a class="code" href="classllvm_1_1SlotIndex.html#ae1bbc48a5bdb10b387be69816bf67f6f">getBaseIndex</a>());</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  <span class="keywordflow">if</span> (!ParentVNI) {</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\tadding &lt;undef&gt; flags: &quot;</span>);</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = MI-&gt;getNumOperands(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;      <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = MI-&gt;getOperand(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;      <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>() &amp;&amp; MO.<a class="code" href="classllvm_1_1MachineOperand.html#a57bf9ee7219097ff0f98da23a3b3b782">isUse</a>() &amp;&amp; MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>() == VirtReg.<a class="code" href="classllvm_1_1LiveInterval.html#a4ec9ddf8db4481c798f557e8af82693f">reg</a>)</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab979122f21b7fa46d3d2d9b21983068b">setIsUndef</a>();</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    }</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; UseIdx &lt;&lt; <span class="charliteral">&#39;\t&#39;</span> &lt;&lt; *MI);</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  }</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  <span class="keywordflow">if</span> (SnippetCopies.<a class="code" href="classllvm_1_1SmallPtrSet.html#a2ced6343b8ad006a757059554bbf9f37">count</a>(MI))</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;  <span class="comment">// Use an OrigVNI from traceSiblingValue when ParentVNI is a sibling copy.</span></div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;  <a class="code" href="structllvm_1_1LiveRangeEdit_1_1Remat.html">LiveRangeEdit::Remat</a> <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fab649a92948d9ef9d051acb0681fea44a">RM</a>(ParentVNI);</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  SibValueMap::const_iterator SibI = SibValues.find(ParentVNI);</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  <span class="keywordflow">if</span> (SibI != SibValues.end())</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    RM.<a class="code" href="structllvm_1_1LiveRangeEdit_1_1Remat.html#a61601a24103a27519540ea2914a83da3">OrigMI</a> = SibI-&gt;second.DefMI;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;  <a class="code" href="LLParser_8cpp.html#aae58e3df0180401e8f3ab75c18fbc07a">if</a> (!Edit-&gt;<a class="code" href="classllvm_1_1LiveRangeEdit.html#a551aeedea62b16d80a284a4c3cb578cf">canRematerializeAt</a>(RM, UseIdx, <span class="keyword">false</span>)) {</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    markValueUsed(&amp;VirtReg, ParentVNI);</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\tcannot remat for &quot;</span> &lt;&lt; UseIdx &lt;&lt; <span class="charliteral">&#39;\t&#39;</span> &lt;&lt; *MI);</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  }</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;  <span class="comment">// If the instruction also writes VirtReg.reg, it had better not require the</span></div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  <span class="comment">// same register for uses and defs.</span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;MachineInstr*, unsigned&gt;</a>, 8&gt; Ops;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  MIBundleOperands::VirtRegInfo RI =</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    <a class="code" href="classllvm_1_1MIBundleOperands.html">MIBundleOperands</a>(MI).<a class="code" href="classllvm_1_1MachineOperandIteratorBase.html#a7f3be7515f152b4514c5979e69e8e693">analyzeVirtReg</a>(VirtReg.<a class="code" href="classllvm_1_1LiveInterval.html#a4ec9ddf8db4481c798f557e8af82693f">reg</a>, &amp;Ops);</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;  <span class="keywordflow">if</span> (RI.Tied) {</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    markValueUsed(&amp;VirtReg, ParentVNI);</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\tcannot remat tied reg: &quot;</span> &lt;&lt; UseIdx &lt;&lt; <span class="charliteral">&#39;\t&#39;</span> &lt;&lt; *MI);</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  }</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;  <span class="comment">// Before rematerializing into a register for a single instruction, try to</span></div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;  <span class="comment">// fold a load into the instruction. That avoids allocating a new register.</span></div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;  <span class="keywordflow">if</span> (RM.<a class="code" href="structllvm_1_1LiveRangeEdit_1_1Remat.html#a61601a24103a27519540ea2914a83da3">OrigMI</a>-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a6ea66ea696ee423ada504c8d21786451">canFoldAsLoad</a>() &amp;&amp;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;      foldMemoryOperand(Ops, RM.<a class="code" href="structllvm_1_1LiveRangeEdit_1_1Remat.html#a61601a24103a27519540ea2914a83da3">OrigMI</a>)) {</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    Edit-&gt;<a class="code" href="classllvm_1_1LiveRangeEdit.html#af296216a2d7d12b2cc2273effb7da1bd">markRematerialized</a>(RM.<a class="code" href="structllvm_1_1LiveRangeEdit_1_1Remat.html#a13c35d2beb52c8a901a5bb1173ac2775">ParentVNI</a>);</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    ++NumFoldedLoads;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  }</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  <span class="comment">// Alocate a new register for the remat.</span></div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  <span class="keywordtype">unsigned</span> NewVReg = Edit-&gt;<a class="code" href="classllvm_1_1LiveRangeEdit.html#a1865c0f9577162fd3ed02083206d6865">createFrom</a>(Original);</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  <span class="comment">// Finally we can rematerialize OrigMI before MI.</span></div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> DefIdx = Edit-&gt;<a class="code" href="classllvm_1_1LiveRangeEdit.html#a927669230af7ef04e85ea4b8796757f7">rematerializeAt</a>(*MI-&gt;getParent(), <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>, NewVReg, <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fab649a92948d9ef9d051acb0681fea44a">RM</a>,</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;                                           TRI);</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  (void)DefIdx;</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\tremat:  &quot;</span> &lt;&lt; DefIdx &lt;&lt; <span class="charliteral">&#39;\t&#39;</span></div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;               &lt;&lt; *LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#ab306d0d7e986cc18578a5150c44a9f7a">getInstructionFromIndex</a>(DefIdx));</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <span class="comment">// Replace operands</span></div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Ops.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = MI-&gt;getOperand(Ops[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].second);</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>() &amp;&amp; MO.<a class="code" href="classllvm_1_1MachineOperand.html#a57bf9ee7219097ff0f98da23a3b3b782">isUse</a>() &amp;&amp; MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>() == VirtReg.<a class="code" href="classllvm_1_1LiveInterval.html#a4ec9ddf8db4481c798f557e8af82693f">reg</a>) {</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;      MO.<a class="code" href="classllvm_1_1MachineOperand.html#a624a062754a09d3787614d8627096705">setReg</a>(NewVReg);</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;      MO.<a class="code" href="classllvm_1_1MachineOperand.html#a8a82683fccdef8a5ef772ef03277aee7">setIsKill</a>();</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    }</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  }</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\t        &quot;</span> &lt;&lt; UseIdx &lt;&lt; <span class="charliteral">&#39;\t&#39;</span> &lt;&lt; *MI &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  ++NumRemats;</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;}</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;<span class="comment">/// reMaterializeAll - Try to rematerialize as many uses as possible,</span></div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;<span class="comment">/// and trim the live ranges after.</span></div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> InlineSpiller::reMaterializeAll() {</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  <span class="comment">// analyzeSiblingValues has already tested all relevant defining instructions.</span></div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  <span class="keywordflow">if</span> (!Edit-&gt;<a class="code" href="classllvm_1_1LiveRangeEdit.html#ade51ad9c1dcf5d40b3117028a8be4fc7">anyRematerializable</a>(AA))</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;  UsedValues.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#aa72472422d95c7052d62432ec279ff85">clear</a>();</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;  <span class="comment">// Try to remat before all uses of snippets.</span></div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;  <span class="keywordtype">bool</span> anyRemat = <span class="keyword">false</span>;</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = RegsToSpill.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    <span class="keywordtype">unsigned</span> Reg = RegsToSpill[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;LI = LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#a70cf6a51b043dc9f8ae683c266d5d9c4">getInterval</a>(Reg);</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator.html">MachineRegisterInfo::use_nodbg_iterator</a></div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;         RI = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#aad684f050965249161650dcdf5a58fa4">use_nodbg_begin</a>(Reg);</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;         <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *MI = RI.skipBundle();)</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;      anyRemat |= reMaterializeFor(LI, MI);</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  }</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  <span class="keywordflow">if</span> (!anyRemat)</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  <span class="comment">// Remove any values that were completely rematted.</span></div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = RegsToSpill.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <span class="keywordtype">unsigned</span> Reg = RegsToSpill[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;LI = LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#a70cf6a51b043dc9f8ae683c266d5d9c4">getInterval</a>(Reg);</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LiveRange.html#aab457d3251eb957215a85c472346e064">LiveInterval::vni_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = LI.<a class="code" href="classllvm_1_1LiveRange.html#a5fb099e2afb74f4c922f32894b30b279">vni_begin</a>(), E = LI.<a class="code" href="classllvm_1_1LiveRange.html#aca7b7d6f329690e6bd5b5e1c83db7c1e">vni_end</a>();</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;         <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;      <a class="code" href="classllvm_1_1VNInfo.html">VNInfo</a> *VNI = *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;      <span class="keywordflow">if</span> (VNI-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ae4b6b5a6aeabaa9cd6ba683d8786b2a5">isUnused</a>() || VNI-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ae0af39c31bb54b8c908d8d4a15f55da5">isPHIDef</a>() || UsedValues.<a class="code" href="classllvm_1_1SmallPtrSet.html#a2ced6343b8ad006a757059554bbf9f37">count</a>(VNI))</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;      <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *MI = LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#ab306d0d7e986cc18578a5150c44a9f7a">getInstructionFromIndex</a>(VNI-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ae623a0f1ab59da851f2ebf1674d1fddb">def</a>);</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;      MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aa5ca90043aeb3cda69edd3685e5c872d">addRegisterDead</a>(Reg, &amp;TRI);</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;      <span class="keywordflow">if</span> (!MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a89e006230bfc175988ee94b655eed619">allDefsAreDead</a>())</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;All defs dead: &quot;</span> &lt;&lt; *MI);</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;      DeadDefs.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(MI);</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    }</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  }</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  <span class="comment">// Eliminate dead code after remat. Note that some snippet copies may be</span></div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;  <span class="comment">// deleted here.</span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;  <span class="keywordflow">if</span> (DeadDefs.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>())</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Remat created &quot;</span> &lt;&lt; DeadDefs.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>() &lt;&lt; <span class="stringliteral">&quot; dead defs.\n&quot;</span>);</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;  Edit-&gt;<a class="code" href="classllvm_1_1LiveRangeEdit.html#a3ca43df2edcebdd041ebf1f5fc434384">eliminateDeadDefs</a>(DeadDefs, RegsToSpill);</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;  <span class="comment">// Get rid of deleted and empty intervals.</span></div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;  <span class="keywordtype">unsigned</span> ResultPos = 0;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = RegsToSpill.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    <span class="keywordtype">unsigned</span> Reg = RegsToSpill[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    <span class="keywordflow">if</span> (!LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#a658add65ad8e7c1421fbe79179559121">hasInterval</a>(Reg))</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;LI = LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#a70cf6a51b043dc9f8ae683c266d5d9c4">getInterval</a>(Reg);</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    <span class="keywordflow">if</span> (LI.<a class="code" href="classllvm_1_1LiveRange.html#abfed19760ab95747976edc7862a35807">empty</a>()) {</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;      Edit-&gt;<a class="code" href="classllvm_1_1LiveRangeEdit.html#a18fa678e0ede001d8ab728ea77177a32">eraseVirtReg</a>(Reg);</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    }</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    RegsToSpill[ResultPos++] = <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>;</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;  }</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;  RegsToSpill.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a18c110c35e9133222a37b28d30f8a90f">erase</a>(RegsToSpill.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>() + ResultPos, RegsToSpill.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>());</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; RegsToSpill.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>() &lt;&lt; <span class="stringliteral">&quot; registers to spill after remat.\n&quot;</span>);</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;}</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;<span class="comment">//                                 Spilling</span></div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;<span class="comment">/// If MI is a load or store of StackSlot, it can be removed.</span></div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> InlineSpiller::coalesceStackAccess(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *MI, <span class="keywordtype">unsigned</span> Reg) {</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;  <span class="keywordtype">int</span> FI = 0;</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  <span class="keywordtype">unsigned</span> InstrReg = TII.<a class="code" href="classllvm_1_1TargetInstrInfo.html#a9fcdc96a6712deb1a8a3d2e18af6db3f">isLoadFromStackSlot</a>(MI, FI);</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  <span class="keywordtype">bool</span> IsLoad = InstrReg;</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  <span class="keywordflow">if</span> (!IsLoad)</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    InstrReg = TII.<a class="code" href="classllvm_1_1TargetInstrInfo.html#aa8d4d336ac91a47a6e4568ba18b9d66a">isStoreToStackSlot</a>(MI, FI);</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;  <span class="comment">// We have a stack access. Is it the right register and slot?</span></div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;  <span class="keywordflow">if</span> (InstrReg != Reg || FI != StackSlot)</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Coalescing stack access: &quot;</span> &lt;&lt; *MI);</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;  LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#a4913e06cfa1f22a3040d3090f924e4ed">RemoveMachineInstrFromMaps</a>(MI);</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ac2421adbb9996e1b15f03a8abb6c70a8">eraseFromParent</a>();</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;  <span class="keywordflow">if</span> (IsLoad) {</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    ++NumReloadsRemoved;</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    --NumReloads;</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    ++NumSpillsRemoved;</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    --NumSpills;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  }</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;}</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;<span class="preprocessor">#if !defined(NDEBUG)</span></div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;<span class="comment">// Dump the range of instructions from B to E with their slot indexes.</span></div><div class="line"><a name="l01009"></a><span class="lineno"><a class="line" href="InlineSpiller_8cpp.html#a3e0cafa0a53b9b94f44f091ca02ddc70"> 1009</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="InlineSpiller_8cpp.html#a3e0cafa0a53b9b94f44f091ca02ddc70">dumpMachineInstrRangeWithSlotIndex</a>(<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>,</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;                                               <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> E,</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;                                               <a class="code" href="classllvm_1_1LiveIntervals.html">LiveIntervals</a> <span class="keyword">const</span> &amp;LIS,</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;                                               <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> header,</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;                                               <span class="keywordtype">unsigned</span> VReg =0) {</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;  <span class="keywordtype">char</span> NextLine = <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;  <span class="keywordtype">char</span> SlotIndent = <span class="charliteral">&#39;\t&#39;</span>;</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#aa1704159f75e6eacd595962ea6d93ffe">llvm::next</a>(B) == E) {</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    NextLine = <span class="charliteral">&#39; &#39;</span>;</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    SlotIndent = <span class="charliteral">&#39; &#39;</span>;</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;  }</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;  <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="charliteral">&#39;\t&#39;</span> &lt;&lt; header &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; NextLine;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = B; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> Idx = LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#a6bbcfa1e19c409a905ffc0356c060bd4">getInstructionIndex</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>).<a class="code" href="classllvm_1_1SlotIndex.html#a04196b5e551d63690ede0244f80f2503">getRegSlot</a>();</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    <span class="comment">// If a register was passed in and this instruction has it as a</span></div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    <span class="comment">// destination that is marked as an early clobber, print the</span></div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <span class="comment">// early-clobber slot index.</span></div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    <span class="keywordflow">if</span> (VReg) {</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;      <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> *MO = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;findRegisterDefOperand(VReg);</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;      <span class="keywordflow">if</span> (MO &amp;&amp; MO-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#a11d72231fe6da4abec10afff58dede5d">isEarlyClobber</a>())</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;        Idx = Idx.<a class="code" href="classllvm_1_1SlotIndex.html#a04196b5e551d63690ede0244f80f2503">getRegSlot</a>(<span class="keyword">true</span>);</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    }</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; SlotIndent &lt;&lt; Idx &lt;&lt; <span class="charliteral">&#39;\t&#39;</span> &lt;&lt; *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;  }</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;}</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;<span class="comment">/// foldMemoryOperand - Try folding stack slot references in Ops into their</span></div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;<span class="comment">/// instructions.</span></div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;<span class="comment">/// @param Ops    Operand indices from analyzeVirtReg().</span></div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;<span class="comment">/// @param LoadMI Load instruction to use instead of stack slot when non-null.</span></div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;<span class="comment">/// @return       True on success.</span></div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> InlineSpiller::</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;foldMemoryOperand(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt;std::pair&lt;MachineInstr*, unsigned&gt; &gt; Ops,</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *LoadMI) {</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;  <span class="keywordflow">if</span> (Ops.empty())</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;  <span class="comment">// Don&#39;t attempt folding in bundles.</span></div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *MI = Ops.front().first;</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;  <span class="keywordflow">if</span> (Ops.back().first != MI || MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a1b1d62bd2a92c9c7d1f2c9692b6c5698">isBundled</a>())</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;  <span class="keywordtype">bool</span> WasCopy = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ae0ac5973cd95f76e3365e67aaad69de6">isCopy</a>();</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;  <span class="keywordtype">unsigned</span> ImpReg = 0;</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;  <span class="keywordtype">bool</span> SpillSubRegs = (MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>() == <a class="code" href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8acd0cccd396f412a2f6eef00422b3106a">TargetOpcode::PATCHPOINT</a> ||</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;                       MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>() == <a class="code" href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8a4a927c0cc4c49f647732262cdd77f832">TargetOpcode::STACKMAP</a>);</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;  <span class="comment">// TargetInstrInfo::foldMemoryOperand only expects explicit, non-tied</span></div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;  <span class="comment">// operands.</span></div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 8&gt;</a> FoldOps;</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Ops.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <span class="keywordtype">unsigned</span> Idx = Ops[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].second;</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(Idx);</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#a40a5d6e03f5bfd15839355a7c39ab3a0">isImplicit</a>()) {</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;      ImpReg = MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    }</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    <span class="comment">// FIXME: Teach targets to deal with subregs.</span></div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    <span class="keywordflow">if</span> (!SpillSubRegs &amp;&amp; MO.<a class="code" href="classllvm_1_1MachineOperand.html#aca37b55b20f45c96067bac1d4f1dcb7f">getSubReg</a>())</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    <span class="comment">// We cannot fold a load instruction into a def.</span></div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    <span class="keywordflow">if</span> (LoadMI &amp;&amp; MO.<a class="code" href="classllvm_1_1MachineOperand.html#a8de7d5cf38939044471c6ee60a01a3df">isDef</a>())</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <span class="comment">// Tied use operands should not be passed to foldMemoryOperand.</span></div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    <span class="keywordflow">if</span> (!MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a24f355a6becd20125a8f556c22c2c0af">isRegTiedToDefOperand</a>(Idx))</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;      FoldOps.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Idx);</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  }</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrSpan.html">MachineInstrSpan</a> MIS(MI);</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *FoldMI =</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                LoadMI ? TII.<a class="code" href="classllvm_1_1TargetInstrInfo.html#a87d3465cea944f88b225d34b06d54aa9">foldMemoryOperand</a>(MI, FoldOps, LoadMI)</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;                       : TII.<a class="code" href="classllvm_1_1TargetInstrInfo.html#a87d3465cea944f88b225d34b06d54aa9">foldMemoryOperand</a>(MI, FoldOps, StackSlot);</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;  <span class="keywordflow">if</span> (!FoldMI)</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;  <span class="comment">// Remove LIS for any dead defs in the original MI not in FoldMI.</span></div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MIBundleOperands.html">MIBundleOperands</a> MO(MI); MO.<a class="code" href="classllvm_1_1MachineOperandIteratorBase.html#af3802cbef7a57e8de316fe13fbed8e67">isValid</a>(); ++MO) {</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    <span class="keywordflow">if</span> (!MO-&gt;isReg())</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    <span class="keywordtype">unsigned</span> Reg = MO-&gt;getReg();</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    <span class="keywordflow">if</span> (!Reg || <a class="code" href="classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">TargetRegisterInfo::isVirtualRegister</a>(Reg) ||</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a008f499ae277e4936b5b897ddb4bcb7e">isReserved</a>(Reg)) {</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    }</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    MIBundleOperands::PhysRegInfo RI =</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;      <a class="code" href="classllvm_1_1MIBundleOperands.html">MIBundleOperands</a>(FoldMI).<a class="code" href="classllvm_1_1MachineOperandIteratorBase.html#a37582434549f9f01e3e5f69fb2117be3">analyzePhysReg</a>(Reg, &amp;TRI);</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    <span class="keywordflow">if</span> (MO-&gt;readsReg()) {</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;      assert(RI.Reads &amp;&amp; <span class="stringliteral">&quot;Cannot fold physreg reader&quot;</span>);</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    }</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    <span class="keywordflow">if</span> (RI.Defines)</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    <span class="comment">// FoldMI does not define this physreg. Remove the LI segment.</span></div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    assert(MO-&gt;isDead() &amp;&amp; <span class="stringliteral">&quot;Cannot fold physreg def&quot;</span>);</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MCRegUnitIterator.html">MCRegUnitIterator</a> Units(Reg, &amp;TRI); Units.<a class="code" href="classllvm_1_1MCRegisterInfo_1_1DiffListIterator.html#abccd358b92366e5284e7e674e86b241f">isValid</a>(); ++Units) {</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LiveRange.html">LiveRange</a> *LR = LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#af68f45baf4510224cb6ecf00019a9987">getCachedRegUnit</a>(*Units)) {</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;        <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> Idx = LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#a6bbcfa1e19c409a905ffc0356c060bd4">getInstructionIndex</a>(MI).<a class="code" href="classllvm_1_1SlotIndex.html#a04196b5e551d63690ede0244f80f2503">getRegSlot</a>();</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1VNInfo.html">VNInfo</a> *VNI = LR-&gt;getVNInfoAt(Idx))</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;          LR-&gt;removeValNo(VNI);</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;      }</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    }</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;  }</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;  LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#a403a7d7aa7ebd74f4bf85d036a247cc1">ReplaceMachineInstrInMaps</a>(MI, FoldMI);</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ac2421adbb9996e1b15f03a8abb6c70a8">eraseFromParent</a>();</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;  <span class="comment">// Insert any new instructions other than FoldMI into the LIS maps.</span></div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;  assert(!MIS.<a class="code" href="classllvm_1_1MachineInstrSpan.html#a860cfa64416722d1278abb770272e460">empty</a>() &amp;&amp; <span class="stringliteral">&quot;Unexpected empty span of instructions!&quot;</span>);</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> <a class="code" href="MCModuleYAML_8cpp.html#a5cdd6ae6b245e832e7cc5e4edf035cb2">MII</a> = MIS.<a class="code" href="classllvm_1_1MachineInstrSpan.html#a80cf68c228dc30772af16e45ec4f825c">begin</a>(), End = MIS.<a class="code" href="classllvm_1_1MachineInstrSpan.html#ad7baac24bfd68006d3efe73d6c3037f4">end</a>();</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;       <a class="code" href="MCModuleYAML_8cpp.html#a5cdd6ae6b245e832e7cc5e4edf035cb2">MII</a> != End; ++<a class="code" href="MCModuleYAML_8cpp.html#a5cdd6ae6b245e832e7cc5e4edf035cb2">MII</a>)</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <span class="keywordflow">if</span> (&amp;*<a class="code" href="MCModuleYAML_8cpp.html#a5cdd6ae6b245e832e7cc5e4edf035cb2">MII</a> != FoldMI)</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;      LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#a72032c8eefbf5b63bd37f24bdf2bbbe8">InsertMachineInstrInMaps</a>(&amp;*<a class="code" href="MCModuleYAML_8cpp.html#a5cdd6ae6b245e832e7cc5e4edf035cb2">MII</a>);</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;  <span class="comment">// TII.foldMemoryOperand may have left some implicit operands on the</span></div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;  <span class="comment">// instruction.  Strip them.</span></div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;  <span class="keywordflow">if</span> (ImpReg)</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = FoldMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>; --<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;      <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = FoldMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1);</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;      <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>() || !MO.<a class="code" href="classllvm_1_1MachineOperand.html#a40a5d6e03f5bfd15839355a7c39ab3a0">isImplicit</a>())</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;      <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>() == ImpReg)</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;        FoldMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a001a88e1d71c2e11ccd57efe75da4af3">RemoveOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1);</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    }</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="InlineSpiller_8cpp.html#a3e0cafa0a53b9b94f44f091ca02ddc70">dumpMachineInstrRangeWithSlotIndex</a>(MIS.<a class="code" href="classllvm_1_1MachineInstrSpan.html#a80cf68c228dc30772af16e45ec4f825c">begin</a>(), MIS.<a class="code" href="classllvm_1_1MachineInstrSpan.html#ad7baac24bfd68006d3efe73d6c3037f4">end</a>(), LIS,</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;                                           <span class="stringliteral">&quot;folded&quot;</span>));</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;  <span class="keywordflow">if</span> (!WasCopy)</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    ++NumFolded;</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Ops.front().second == 0)</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    ++NumSpills;</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    ++NumReloads;</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;}</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;<span class="keywordtype">void</span> InlineSpiller::insertReload(<span class="keywordtype">unsigned</span> NewVReg,</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;                                 <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> Idx,</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;                                 <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> MI) {</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;MBB = *MI-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#af2e482ff2a9253ec6bc2285491496bd6">getParent</a>();</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrSpan.html">MachineInstrSpan</a> MIS(MI);</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;  TII.<a class="code" href="classllvm_1_1TargetInstrInfo.html#a1f16d509bf2e2c2d0e0176f04c253a96">loadRegFromStackSlot</a>(MBB, MI, NewVReg, StackSlot,</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;                           MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#ab3904d3601dbe52865d5f2e33a06d80d">getRegClass</a>(NewVReg), &amp;TRI);</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;  LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#a87b097de2261d68334195870a03412b9">InsertMachineInstrRangeInMaps</a>(MIS.<a class="code" href="classllvm_1_1MachineInstrSpan.html#a80cf68c228dc30772af16e45ec4f825c">begin</a>(), <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>);</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="InlineSpiller_8cpp.html#a3e0cafa0a53b9b94f44f091ca02ddc70">dumpMachineInstrRangeWithSlotIndex</a>(MIS.<a class="code" href="classllvm_1_1MachineInstrSpan.html#a80cf68c228dc30772af16e45ec4f825c">begin</a>(), <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>, LIS, <span class="stringliteral">&quot;reload&quot;</span>,</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;                                           NewVReg));</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;  ++NumReloads;</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;}</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;<span class="comment">/// insertSpill - Insert a spill of NewVReg after MI.</span></div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> InlineSpiller::insertSpill(<span class="keywordtype">unsigned</span> NewVReg, <span class="keywordtype">bool</span> isKill,</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;                                 <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> MI) {</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;MBB = *MI-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#af2e482ff2a9253ec6bc2285491496bd6">getParent</a>();</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrSpan.html">MachineInstrSpan</a> MIS(MI);</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;  TII.<a class="code" href="classllvm_1_1TargetInstrInfo.html#a94d273699f7fdbd1a01477c4ca8014dd">storeRegToStackSlot</a>(MBB, <a class="code" href="namespacellvm.html#aa1704159f75e6eacd595962ea6d93ffe">llvm::next</a>(MI), NewVReg, isKill, StackSlot,</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;                          MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#ab3904d3601dbe52865d5f2e33a06d80d">getRegClass</a>(NewVReg), &amp;TRI);</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;  LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#a87b097de2261d68334195870a03412b9">InsertMachineInstrRangeInMaps</a>(<a class="code" href="namespacellvm.html#aa1704159f75e6eacd595962ea6d93ffe">llvm::next</a>(MI), MIS.<a class="code" href="classllvm_1_1MachineInstrSpan.html#ad7baac24bfd68006d3efe73d6c3037f4">end</a>());</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="InlineSpiller_8cpp.html#a3e0cafa0a53b9b94f44f091ca02ddc70">dumpMachineInstrRangeWithSlotIndex</a>(<a class="code" href="namespacellvm.html#aa1704159f75e6eacd595962ea6d93ffe">llvm::next</a>(MI), MIS.<a class="code" href="classllvm_1_1MachineInstrSpan.html#ad7baac24bfd68006d3efe73d6c3037f4">end</a>(), LIS,</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;                                           <span class="stringliteral">&quot;spill&quot;</span>));</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;  ++NumSpills;</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;}</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;<span class="comment">/// spillAroundUses - insert spill code around each use of Reg.</span></div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> InlineSpiller::spillAroundUses(<span class="keywordtype">unsigned</span> Reg) {</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;spillAroundUses &quot;</span> &lt;&lt; <a class="code" href="classllvm_1_1PrintReg.html">PrintReg</a>(Reg) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;  <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;OldLI = LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#a70cf6a51b043dc9f8ae683c266d5d9c4">getInterval</a>(Reg);</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  <span class="comment">// Iterate over instructions using Reg.</span></div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator.html">MachineRegisterInfo::reg_iterator</a> RegI = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#adfeaea4e5c82dea47ff9aa1f8367104c">reg_begin</a>(Reg);</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;       <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *MI = RegI.skipBundle();) {</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    <span class="comment">// Debug values are not allowed to affect codegen.</span></div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    <span class="keywordflow">if</span> (MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a1e1d26226c627cf3dcf3c191b85e7d7d">isDebugValue</a>()) {</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;      <span class="comment">// Modify DBG_VALUE now that the value is in a spill slot.</span></div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;      <span class="keywordtype">bool</span> IsIndirect = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#afe61057aa8a91199724dfb9943671582">isIndirectDebugValue</a>();</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;      uint64_t Offset = IsIndirect ? MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(1).<a class="code" href="classllvm_1_1MachineOperand.html#a7059d68a29d5ecfb37623ab45cdb4e8d">getImm</a>() : 0;</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *MDPtr = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(2).<a class="code" href="classllvm_1_1MachineOperand.html#afd78a2f55a6c4914e7e9cf442a0dabe8">getMetadata</a>();</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;      <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> DL = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a5ca4af2a257043145ad650eafb4402f9">getDebugLoc</a>();</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Modifying debug info due to spill:&quot;</span> &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span> &lt;&lt; *MI);</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;      <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">getParent</a>();</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;      <a class="code" href="namespacellvm.html#a980570dc1410d4ef53806f82028ca381">BuildMI</a>(*MBB, MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a537a9265c55392ab47d44954f27db538">erase</a>(MI), DL, TII.<a class="code" href="classllvm_1_1MCInstrInfo.html#ab16f5a81fccfe4b7f645ba5a74ffad02">get</a>(<a class="code" href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8ad3fe1d0d0fe22d208bcd8712b2ea051a">TargetOpcode::DBG_VALUE</a>))</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;          .addFrameIndex(StackSlot).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a9f1fae6a5dbb6e378ca85df1fded8515">addImm</a>(Offset).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ac68a44416cb977887fbd4c4e5297491d">addMetadata</a>(MDPtr);</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    }</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    <span class="comment">// Ignore copies to/from snippets. We&#39;ll delete them.</span></div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    <span class="keywordflow">if</span> (SnippetCopies.<a class="code" href="classllvm_1_1SmallPtrSet.html#a2ced6343b8ad006a757059554bbf9f37">count</a>(MI))</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    <span class="comment">// Stack slot accesses may coalesce away.</span></div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    <span class="keywordflow">if</span> (coalesceStackAccess(MI, Reg))</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    <span class="comment">// Analyze instruction.</span></div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;MachineInstr*, unsigned&gt;</a>, 8&gt; Ops;</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    MIBundleOperands::VirtRegInfo RI =</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;      <a class="code" href="classllvm_1_1MIBundleOperands.html">MIBundleOperands</a>(MI).<a class="code" href="classllvm_1_1MachineOperandIteratorBase.html#a7f3be7515f152b4514c5979e69e8e693">analyzeVirtReg</a>(Reg, &amp;Ops);</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    <span class="comment">// Find the slot index where this instruction reads and writes OldLI.</span></div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="comment">// This is usually the def slot, except for tied early clobbers.</span></div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> Idx = LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#a6bbcfa1e19c409a905ffc0356c060bd4">getInstructionIndex</a>(MI).<a class="code" href="classllvm_1_1SlotIndex.html#a04196b5e551d63690ede0244f80f2503">getRegSlot</a>();</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1VNInfo.html">VNInfo</a> *VNI = OldLI.<a class="code" href="classllvm_1_1LiveRange.html#a367c3737ac6d7da627333ad5515be2e7">getVNInfoAt</a>(Idx.<a class="code" href="classllvm_1_1SlotIndex.html#a04196b5e551d63690ede0244f80f2503">getRegSlot</a>(<span class="keyword">true</span>)))</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SlotIndex.html#a0b73244049319d841fd11a238f35b5d1">SlotIndex::isSameInstr</a>(Idx, VNI-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ae623a0f1ab59da851f2ebf1674d1fddb">def</a>))</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;        Idx = VNI-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ae623a0f1ab59da851f2ebf1674d1fddb">def</a>;</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    <span class="comment">// Check for a sibling copy.</span></div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    <span class="keywordtype">unsigned</span> SibReg = <a class="code" href="InlineSpiller_8cpp.html#a5be2fd119675b3a42f255829d377267d">isFullCopyOf</a>(MI, Reg);</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    <span class="keywordflow">if</span> (SibReg &amp;&amp; isSibling(SibReg)) {</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;      <span class="comment">// This may actually be a copy between snippets.</span></div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;      <span class="keywordflow">if</span> (isRegToSpill(SibReg)) {</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Found new snippet copy: &quot;</span> &lt;&lt; *MI);</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;        SnippetCopies.<a class="code" href="classllvm_1_1SmallPtrSet.html#a9b6dd0fc7a648a939e571246045b673e">insert</a>(MI);</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;      }</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;      <span class="keywordflow">if</span> (RI.Writes) {</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;        <span class="comment">// Hoist the spill of a sib-reg copy.</span></div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;        <span class="keywordflow">if</span> (hoistSpill(OldLI, MI)) {</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;          <span class="comment">// This COPY is now dead, the value is already in the stack slot.</span></div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;          MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(0).<a class="code" href="classllvm_1_1MachineOperand.html#a61a42c85bd86c6ca4554e27d33c3f798">setIsDead</a>();</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;          DeadDefs.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(MI);</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;        }</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;        <span class="comment">// This is a reload for a sib-reg copy. Drop spills downstream.</span></div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;        <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;SibLI = LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#a70cf6a51b043dc9f8ae683c266d5d9c4">getInterval</a>(SibReg);</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;        eliminateRedundantSpills(SibLI, SibLI.<a class="code" href="classllvm_1_1LiveRange.html#a367c3737ac6d7da627333ad5515be2e7">getVNInfoAt</a>(Idx));</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;        <span class="comment">// The COPY will fold to a reload below.</span></div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;      }</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    }</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    <span class="comment">// Attempt to fold memory ops.</span></div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    <span class="keywordflow">if</span> (foldMemoryOperand(Ops))</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;    <span class="comment">// Create a new virtual register for spill/fill.</span></div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    <span class="comment">// FIXME: Infer regclass from instruction alone.</span></div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    <span class="keywordtype">unsigned</span> NewVReg = Edit-&gt;<a class="code" href="classllvm_1_1LiveRangeEdit.html#a1865c0f9577162fd3ed02083206d6865">createFrom</a>(Reg);</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;    <span class="keywordflow">if</span> (RI.Reads)</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;      insertReload(NewVReg, Idx, MI);</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    <span class="comment">// Rewrite instruction operands.</span></div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    <span class="keywordtype">bool</span> hasLiveDef = <span class="keyword">false</span>;</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Ops.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;      <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = Ops[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].first-&gt;getOperand(Ops[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].second);</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;      MO.<a class="code" href="classllvm_1_1MachineOperand.html#a624a062754a09d3787614d8627096705">setReg</a>(NewVReg);</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;      <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#a57bf9ee7219097ff0f98da23a3b3b782">isUse</a>()) {</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;        <span class="keywordflow">if</span> (!Ops[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].first-&gt;isRegTiedToDefOperand(Ops[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].second))</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;          MO.<a class="code" href="classllvm_1_1MachineOperand.html#a8a82683fccdef8a5ef772ef03277aee7">setIsKill</a>();</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;        <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#a196420aa839c2b21f42c4bf5c36df437">isDead</a>())</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;          hasLiveDef = <span class="keyword">true</span>;</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;      }</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;    }</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\trewrite: &quot;</span> &lt;&lt; Idx &lt;&lt; <span class="charliteral">&#39;\t&#39;</span> &lt;&lt; *MI &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    <span class="comment">// FIXME: Use a second vreg if instruction has no tied ops.</span></div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    <span class="keywordflow">if</span> (RI.Writes)</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;      <span class="keywordflow">if</span> (hasLiveDef)</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;        insertSpill(NewVReg, <span class="keyword">true</span>, MI);</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;  }</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;}</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;<span class="comment">/// spillAll - Spill all registers remaining after rematerialization.</span></div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> InlineSpiller::spillAll() {</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;  <span class="comment">// Update LiveStacks now that we are committed to spilling.</span></div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;  <span class="keywordflow">if</span> (StackSlot == <a class="code" href="classllvm_1_1VirtRegMap.html#a9913d276d75825db133ca87939ef94bfa120c86e3ef630a99345f58523740bfd3">VirtRegMap::NO_STACK_SLOT</a>) {</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;    StackSlot = VRM.<a class="code" href="classllvm_1_1VirtRegMap.html#a93b5ccff01ce3ebd1575f5c57561d554">assignVirt2StackSlot</a>(Original);</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    StackInt = &amp;LSS.<a class="code" href="classllvm_1_1LiveStacks.html#a77ec673a7fde73e91e8fa6be83a82b01">getOrCreateInterval</a>(StackSlot, MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#ab3904d3601dbe52865d5f2e33a06d80d">getRegClass</a>(Original));</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    StackInt-&gt;<a class="code" href="classllvm_1_1LiveRange.html#a69331ac1fdc66eee11c977845f2e472b">getNextValue</a>(<a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a>(), LSS.<a class="code" href="classllvm_1_1LiveStacks.html#a776c2d304a03130488c07e56f496c0b0">getVNInfoAllocator</a>());</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;  } <span class="keywordflow">else</span></div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    StackInt = &amp;LSS.<a class="code" href="classllvm_1_1LiveStacks.html#a33b374130efdc910ad7daa9e54eef8f2">getInterval</a>(StackSlot);</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;  <span class="keywordflow">if</span> (Original != Edit-&gt;<a class="code" href="classllvm_1_1LiveRangeEdit.html#a8038b08f86db8d7e7f951f7ef4352767">getReg</a>())</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    VRM.<a class="code" href="classllvm_1_1VirtRegMap.html#a93b5ccff01ce3ebd1575f5c57561d554">assignVirt2StackSlot</a>(Edit-&gt;<a class="code" href="classllvm_1_1LiveRangeEdit.html#a8038b08f86db8d7e7f951f7ef4352767">getReg</a>(), StackSlot);</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;  assert(StackInt-&gt;<a class="code" href="classllvm_1_1LiveRange.html#a0a864b86bcfc75081923b157f0c3e212">getNumValNums</a>() == 1 &amp;&amp; <span class="stringliteral">&quot;Bad stack interval values&quot;</span>);</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = RegsToSpill.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    StackInt-&gt;<a class="code" href="classllvm_1_1LiveRange.html#aae51d91c7cb4dc1a4ffabbfd1b7be9a1">MergeSegmentsInAsValue</a>(LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#a70cf6a51b043dc9f8ae683c266d5d9c4">getInterval</a>(RegsToSpill[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]),</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;                                     StackInt-&gt;<a class="code" href="classllvm_1_1LiveRange.html#a699598a93a78f8b0376cfb49933cbce7">getValNumInfo</a>(0));</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Merged spilled regs: &quot;</span> &lt;&lt; *StackInt &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;  <span class="comment">// Spill around uses of all RegsToSpill.</span></div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = RegsToSpill.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); i != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    spillAroundUses(RegsToSpill[i]);</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;  <span class="comment">// Hoisted spills may cause dead code.</span></div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;  <span class="keywordflow">if</span> (!DeadDefs.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>()) {</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Eliminating &quot;</span> &lt;&lt; DeadDefs.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>() &lt;&lt; <span class="stringliteral">&quot; dead defs\n&quot;</span>);</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;    Edit-&gt;<a class="code" href="classllvm_1_1LiveRangeEdit.html#a3ca43df2edcebdd041ebf1f5fc434384">eliminateDeadDefs</a>(DeadDefs, RegsToSpill);</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;  }</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;  <span class="comment">// Finally delete the SnippetCopies.</span></div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = RegsToSpill.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); i != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator.html">MachineRegisterInfo::reg_iterator</a> RI = MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#adfeaea4e5c82dea47ff9aa1f8367104c">reg_begin</a>(RegsToSpill[i]);</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;         <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *MI = RI.skipInstruction();) {</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;      assert(SnippetCopies.<a class="code" href="classllvm_1_1SmallPtrSet.html#a2ced6343b8ad006a757059554bbf9f37">count</a>(MI) &amp;&amp; <span class="stringliteral">&quot;Remaining use wasn&#39;t a snippet copy&quot;</span>);</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;      <span class="comment">// FIXME: Do this with a LiveRangeEdit callback.</span></div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;      LIS.<a class="code" href="classllvm_1_1LiveIntervals.html#a4913e06cfa1f22a3040d3090f924e4ed">RemoveMachineInstrFromMaps</a>(MI);</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;      MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ac2421adbb9996e1b15f03a8abb6c70a8">eraseFromParent</a>();</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;    }</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;  }</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;  <span class="comment">// Delete all spilled registers.</span></div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = RegsToSpill.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); i != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    Edit-&gt;<a class="code" href="classllvm_1_1LiveRangeEdit.html#a18fa678e0ede001d8ab728ea77177a32">eraseVirtReg</a>(RegsToSpill[i]);</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;}</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;<span class="keywordtype">void</span> <a class="code" href="README-SSE_8txt.html#a7246178f42b1eaef4e9bba10a9f39323">InlineSpiller::spill</a>(<a class="code" href="classllvm_1_1LiveRangeEdit.html">LiveRangeEdit</a> &amp;edit) {</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;  ++NumSpilledRanges;</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;  Edit = &amp;edit;</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;  assert(!<a class="code" href="classllvm_1_1TargetRegisterInfo.html#acd7ff2004156240432b82c305aab07db">TargetRegisterInfo::isStackSlot</a>(edit.<a class="code" href="classllvm_1_1LiveRangeEdit.html#a8038b08f86db8d7e7f951f7ef4352767">getReg</a>())</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;         &amp;&amp; <span class="stringliteral">&quot;Trying to spill a stack slot.&quot;</span>);</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;  <span class="comment">// Share a stack slot among all descendants of Original.</span></div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;  Original = VRM.<a class="code" href="classllvm_1_1VirtRegMap.html#ad0a065b0808d2d3112a829b020332d69">getOriginal</a>(edit.<a class="code" href="classllvm_1_1LiveRangeEdit.html#a8038b08f86db8d7e7f951f7ef4352767">getReg</a>());</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;  StackSlot = VRM.<a class="code" href="classllvm_1_1VirtRegMap.html#a06870c103c7b03c7845f2a8a30362999">getStackSlot</a>(Original);</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;  StackInt = 0;</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Inline spilling &quot;</span></div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;               &lt;&lt; MRI.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#ab3904d3601dbe52865d5f2e33a06d80d">getRegClass</a>(edit.<a class="code" href="classllvm_1_1LiveRangeEdit.html#a8038b08f86db8d7e7f951f7ef4352767">getReg</a>())-&gt;<a class="code" href="namespacellvm_1_1Intrinsic.html#a5d4ca65de6e43d76586fbdd89bf930d2">getName</a>()</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;               &lt;&lt; <span class="charliteral">&#39;:&#39;</span> &lt;&lt; edit.<a class="code" href="classllvm_1_1LiveRangeEdit.html#a39247d9f0a920790c427c7bacac001f0">getParent</a>()</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;\nFrom original &quot;</span> &lt;&lt; <a class="code" href="classllvm_1_1PrintReg.html">PrintReg</a>(Original) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;  assert(edit.<a class="code" href="classllvm_1_1LiveRangeEdit.html#a39247d9f0a920790c427c7bacac001f0">getParent</a>().<a class="code" href="classllvm_1_1LiveInterval.html#ac6eb568d30c5719664c2ccfe8dab72e8">isSpillable</a>() &amp;&amp;</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;         <span class="stringliteral">&quot;Attempting to spill already spilled value.&quot;</span>);</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;  assert(DeadDefs.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>() &amp;&amp; <span class="stringliteral">&quot;Previous spill didn&#39;t remove dead defs&quot;</span>);</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;  collectRegsToSpill();</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;  analyzeSiblingValues();</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;  reMaterializeAll();</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;  <span class="comment">// Remat may handle everything.</span></div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;  <span class="keywordflow">if</span> (!RegsToSpill.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>())</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;    spillAll();</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;  Edit-&gt;<a class="code" href="classllvm_1_1LiveRangeEdit.html#afef40b63bf88c12c6f8600f02f2e1ec2">calculateRegClassAndHint</a>(MF, Loops, MBFI);</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;}</div><div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a075e34e98605d0e7c289763a104869ac"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">llvm::SmallVectorTemplateCommon::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00114">SmallVector.h:114</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a3453f907d426baccbf3d657b3724f359"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a3453f907d426baccbf3d657b3724f359">llvm::MachineInstr::isFullCopy</a></div><div class="ttdeci">bool isFullCopy() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00672">MachineInstr.h:672</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a40a5d6e03f5bfd15839355a7c39ab3a0"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a40a5d6e03f5bfd15839355a7c39ab3a0">llvm::MachineOperand::isImplicit</a></div><div class="ttdeci">bool isImplicit() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00279">MachineOperand.h:279</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00127">SmallVector.h:127</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstrBuilder_html_ac68a44416cb977887fbd4c4e5297491d"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#ac68a44416cb977887fbd4c4e5297491d">llvm::MachineInstrBuilder::addMetadata</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addMetadata(const MDNode *MD) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00171">MachineInstrBuilder.h:171</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00236">SmallVector.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_af2e482ff2a9253ec6bc2285491496bd6"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#af2e482ff2a9253ec6bc2285491496bd6">llvm::MachineBasicBlock::getParent</a></div><div class="ttdeci">const MachineFunction * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00137">MachineBasicBlock.h:137</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a24f355a6becd20125a8f556c22c2c0af"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a24f355a6becd20125a8f556c22c2c0af">llvm::MachineInstr::isRegTiedToDefOperand</a></div><div class="ttdeci">bool isRegTiedToDefOperand(unsigned UseOpIdx, unsigned *DefOpIdx=0) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00862">MachineInstr.h:862</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a537a9265c55392ab47d44954f27db538"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a537a9265c55392ab47d44954f27db538">llvm::MachineBasicBlock::erase</a></div><div class="ttdeci">instr_iterator erase(instr_iterator I)</div></div>
<div class="ttc" id="classllvm_1_1LiveInterval_html_a4ec9ddf8db4481c798f557e8af82693f"><div class="ttname"><a href="classllvm_1_1LiveInterval.html#a4ec9ddf8db4481c798f557e8af82693f">llvm::LiveInterval::reg</a></div><div class="ttdeci">const unsigned reg</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00532">LiveInterval.h:532</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperandIteratorBase_html_a7f3be7515f152b4514c5979e69e8e693"><div class="ttname"><a href="classllvm_1_1MachineOperandIteratorBase.html#a7f3be7515f152b4514c5979e69e8e693">llvm::MachineOperandIteratorBase::analyzeVirtReg</a></div><div class="ttdeci">VirtRegInfo analyzeVirtReg(unsigned Reg, SmallVectorImpl&lt; std::pair&lt; MachineInstr *, unsigned &gt; &gt; *Ops=0)</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBundle_8cpp_source.html#l00252">MachineInstrBundle.cpp:252</a></div></div>
<div class="ttc" id="classllvm_1_1VNInfo_html_ae623a0f1ab59da851f2ebf1674d1fddb"><div class="ttname"><a href="classllvm_1_1VNInfo.html#ae623a0f1ab59da851f2ebf1674d1fddb">llvm::VNInfo::def</a></div><div class="ttdeci">SlotIndex def</div><div class="ttdoc">The index of the defining instruction. </div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00052">LiveInterval.h:52</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRangeEdit_html_ade51ad9c1dcf5d40b3117028a8be4fc7"><div class="ttname"><a href="classllvm_1_1LiveRangeEdit.html#ade51ad9c1dcf5d40b3117028a8be4fc7">llvm::LiveRangeEdit::anyRematerializable</a></div><div class="ttdeci">bool anyRematerializable(AliasAnalysis *)</div><div class="ttdef"><b>Definition:</b> <a href="LiveRangeEdit_8cpp_source.html#l00075">LiveRangeEdit.cpp:75</a></div></div>
<div class="ttc" id="classllvm_1_1MCRegisterInfo_1_1DiffListIterator_html_abccd358b92366e5284e7e674e86b241f"><div class="ttname"><a href="classllvm_1_1MCRegisterInfo_1_1DiffListIterator.html#abccd358b92366e5284e7e674e86b241f">llvm::MCRegisterInfo::DiffListIterator::isValid</a></div><div class="ttdeci">bool isValid() const </div><div class="ttdoc">isValid - returns true if this iterator is not yet at the end. </div><div class="ttdef"><b>Definition:</b> <a href="MCRegisterInfo_8h_source.html#l00217">MCRegisterInfo.h:217</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstrSpan_html_a860cfa64416722d1278abb770272e460"><div class="ttname"><a href="classllvm_1_1MachineInstrSpan.html#a860cfa64416722d1278abb770272e460">llvm::MachineInstrSpan::empty</a></div><div class="ttdeci">bool empty()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00756">MachineBasicBlock.h:756</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html"><div class="ttname"><a href="classllvm_1_1MachineFunction.html">llvm::MachineFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00075">MachineFunction.h:75</a></div></div>
<div class="ttc" id="classllvm_1_1SlotIndex_html_ae1bbc48a5bdb10b387be69816bf67f6f"><div class="ttname"><a href="classllvm_1_1SlotIndex.html#ae1bbc48a5bdb10b387be69816bf67f6f">llvm::SlotIndex::getBaseIndex</a></div><div class="ttdeci">SlotIndex getBaseIndex() const </div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00244">SlotIndexes.h:244</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRange_html_a325a4ec9c33a3dead9ff01c9e70fd534"><div class="ttname"><a href="classllvm_1_1LiveRange.html#a325a4ec9c33a3dead9ff01c9e70fd534">llvm::LiveRange::MergeValueInAsValue</a></div><div class="ttdeci">void MergeValueInAsValue(const LiveRange &amp;RHS, const VNInfo *RHSValNo, VNInfo *LHSValNo)</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8cpp_source.html#l00505">LiveInterval.cpp:505</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_aa5ca90043aeb3cda69edd3685e5c872d"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#aa5ca90043aeb3cda69edd3685e5c872d">llvm::MachineInstr::addRegisterDead</a></div><div class="ttdeci">bool addRegisterDead(unsigned Reg, const TargetRegisterInfo *RegInfo, bool AddIfNotFound=false)</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8cpp_source.html#l01708">MachineInstr.cpp:1708</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRange_html_a5fb099e2afb74f4c922f32894b30b279"><div class="ttname"><a href="classllvm_1_1LiveRange.html#a5fb099e2afb74f4c922f32894b30b279">llvm::LiveRange::vni_begin</a></div><div class="ttdeci">vni_iterator vni_begin()</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00200">LiveInterval.h:200</a></div></div>
<div class="ttc" id="classllvm_1_1LiveInterval_html"><div class="ttname"><a href="classllvm_1_1LiveInterval.html">llvm::LiveInterval</a></div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00528">LiveInterval.h:528</a></div></div>
<div class="ttc" id="classllvm_1_1MIBundleOperands_html"><div class="ttname"><a href="classllvm_1_1MIBundleOperands.html">llvm::MIBundleOperands</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBundle_8h_source.html#l00232">MachineInstrBundle.h:232</a></div></div>
<div class="ttc" id="namespacellvm_1_1TargetOpcode_html_a348d4259b5fa6a8ecfe94e7ae512e1a8a4a927c0cc4c49f647732262cdd77f832"><div class="ttname"><a href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8a4a927c0cc4c49f647732262cdd77f832">llvm::TargetOpcode::STACKMAP</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetOpcodes_8h_source.html#l00100">TargetOpcodes.h:100</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_aa5f0eb2aad4a731d5d5133b8cb5e0a98"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#aa5f0eb2aad4a731d5d5133b8cb5e0a98">llvm::MachineInstr::mayStore</a></div><div class="ttdeci">bool mayStore(QueryType Type=AnyInBundle) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00479">MachineInstr.h:479</a></div></div>
<div class="ttc" id="classllvm_1_1LiveInterval_html_ac6eb568d30c5719664c2ccfe8dab72e8"><div class="ttname"><a href="classllvm_1_1LiveInterval.html#ac6eb568d30c5719664c2ccfe8dab72e8">llvm::LiveInterval::isSpillable</a></div><div class="ttdeci">bool isSpillable() const </div><div class="ttdoc">isSpillable - Can this interval be spilled? </div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00543">LiveInterval.h:543</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_ab979122f21b7fa46d3d2d9b21983068b"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ab979122f21b7fa46d3d2d9b21983068b">llvm::MachineOperand::setIsUndef</a></div><div class="ttdeci">void setIsUndef(bool Val=true)</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00378">MachineOperand.h:378</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00534">DenseMap.h:534</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a196420aa839c2b21f42c4bf5c36df437"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a196420aa839c2b21f42c4bf5c36df437">llvm::MachineOperand::isDead</a></div><div class="ttdeci">bool isDead() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00284">MachineOperand.h:284</a></div></div>
<div class="ttc" id="classllvm_1_1LiveIntervals_html_a6bbcfa1e19c409a905ffc0356c060bd4"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#a6bbcfa1e19c409a905ffc0356c060bd4">llvm::LiveIntervals::getInstructionIndex</a></div><div class="ttdeci">SlotIndex getInstructionIndex(const MachineInstr *instr) const </div><div class="ttdoc">Returns the base index of the given instruction. </div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervalAnalysis_8h_source.html#l00190">LiveIntervalAnalysis.h:190</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterInfo_html_ae62c5ea35b71f9020caa94340bc78f37"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">llvm::TargetRegisterInfo::isVirtualRegister</a></div><div class="ttdeci">static bool isVirtualRegister(unsigned Reg)</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00287">TargetRegisterInfo.h:287</a></div></div>
<div class="ttc" id="Debug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="classllvm_1_1LiveIntervals_html_a7948bdc0e257a3c8310ff82dfd3441d6"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#a7948bdc0e257a3c8310ff82dfd3441d6">llvm::LiveIntervals::getMBBFromIndex</a></div><div class="ttdeci">MachineBasicBlock * getMBBFromIndex(SlotIndex index) const </div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervalAnalysis_8h_source.html#l00219">LiveIntervalAnalysis.h:219</a></div></div>
<div class="ttc" id="classllvm_1_1LiveIntervals_html_a4ed1e0b18a1fa4219caac5e38e99286e"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#a4ed1e0b18a1fa4219caac5e38e99286e">llvm::LiveIntervals::getMBBEndIdx</a></div><div class="ttdeci">SlotIndex getMBBEndIdx(const MachineBasicBlock *mbb) const </div><div class="ttdoc">Return the last index in the given basic block. </div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervalAnalysis_8h_source.html#l00205">LiveIntervalAnalysis.h:205</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html_a9b6dd0fc7a648a939e571246045b673e"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html#a9b6dd0fc7a648a939e571246045b673e">llvm::SmallPtrSet::insert</a></div><div class="ttdeci">bool insert(PtrType Ptr)</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00253">SmallPtrSet.h:253</a></div></div>
<div class="ttc" id="Target_2TargetMachine_8h_html"><div class="ttname"><a href="Target_2TargetMachine_8h.html">TargetMachine.h</a></div></div>
<div class="ttc" id="classllvm_1_1Spiller_html"><div class="ttname"><a href="classllvm_1_1Spiller.html">llvm::Spiller</a></div><div class="ttdef"><b>Definition:</b> <a href="Spiller_8h_source.html#l00024">Spiller.h:24</a></div></div>
<div class="ttc" id="InlineSpiller_8cpp_html_a5be2fd119675b3a42f255829d377267d"><div class="ttname"><a href="InlineSpiller_8cpp.html#a5be2fd119675b3a42f255829d377267d">isFullCopyOf</a></div><div class="ttdeci">static unsigned isFullCopyOf(const MachineInstr *MI, unsigned Reg)</div><div class="ttdef"><b>Definition:</b> <a href="InlineSpiller_8cpp_source.html#l00212">InlineSpiller.cpp:212</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBlockFrequencyInfo_html"><div class="ttname"><a href="classllvm_1_1MachineBlockFrequencyInfo.html">llvm::MachineBlockFrequencyInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineBlockFrequencyInfo_8h_source.html#l00030">MachineBlockFrequencyInfo.h:30</a></div></div>
<div class="ttc" id="classllvm_1_1LiveStacks_html_a33b374130efdc910ad7daa9e54eef8f2"><div class="ttname"><a href="classllvm_1_1LiveStacks.html#a33b374130efdc910ad7daa9e54eef8f2">llvm::LiveStacks::getInterval</a></div><div class="ttdeci">LiveInterval &amp; getInterval(int Slot)</div><div class="ttdef"><b>Definition:</b> <a href="LiveStackAnalysis_8h_source.html#l00059">LiveStackAnalysis.h:59</a></div></div>
<div class="ttc" id="classllvm_1_1MCRegUnitIterator_html"><div class="ttname"><a href="classllvm_1_1MCRegUnitIterator.html">llvm::MCRegUnitIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="MCRegisterInfo_8h_source.html#l00489">MCRegisterInfo.h:489</a></div></div>
<div class="ttc" id="classllvm_1_1LiveQueryResult_html_a5c02c56a4b3e6554395d57b0ac08dbf1"><div class="ttname"><a href="classllvm_1_1LiveQueryResult.html#a5c02c56a4b3e6554395d57b0ac08dbf1">llvm::LiveQueryResult::isKill</a></div><div class="ttdeci">bool isKill() const </div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00107">LiveInterval.h:107</a></div></div>
<div class="ttc" id="classllvm_1_1DebugLoc_html"><div class="ttname"><a href="classllvm_1_1DebugLoc.html">llvm::DebugLoc</a></div><div class="ttdef"><b>Definition:</b> <a href="DebugLoc_8h_source.html#l00028">DebugLoc.h:28</a></div></div>
<div class="ttc" id="classllvm_1_1MDNode_html"><div class="ttname"><a href="classllvm_1_1MDNode.html">llvm::MDNode</a></div><div class="ttdoc">MDNode - a tuple of other values. </div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00073">Metadata.h:73</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a61a42c85bd86c6ca4554e27d33c3f798"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a61a42c85bd86c6ca4554e27d33c3f798">llvm::MachineOperand::setIsDead</a></div><div class="ttdeci">void setIsDead(bool Val=true)</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00373">MachineOperand.h:373</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a6ea66ea696ee423ada504c8d21786451"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a6ea66ea696ee423ada504c8d21786451">llvm::MachineInstr::canFoldAsLoad</a></div><div class="ttdeci">bool canFoldAsLoad(QueryType Type=IgnoreBundle) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00454">MachineInstr.h:454</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_afd78a2f55a6c4914e7e9cf442a0dabe8"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#afd78a2f55a6c4914e7e9cf442a0dabe8">llvm::MachineOperand::getMetadata</a></div><div class="ttdeci">const MDNode * getMetadata() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00479">MachineOperand.h:479</a></div></div>
<div class="ttc" id="classllvm_1_1VNInfo_html"><div class="ttname"><a href="classllvm_1_1VNInfo.html">llvm::VNInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00044">LiveInterval.h:44</a></div></div>
<div class="ttc" id="classllvm_1_1LiveStacks_html_a776c2d304a03130488c07e56f496c0b0"><div class="ttname"><a href="classllvm_1_1LiveStacks.html#a776c2d304a03130488c07e56f496c0b0">llvm::LiveStacks::getVNInfoAllocator</a></div><div class="ttdeci">VNInfo::Allocator &amp; getVNInfoAllocator()</div><div class="ttdef"><b>Definition:</b> <a href="LiveStackAnalysis_8h_source.html#l00086">LiveStackAnalysis.h:86</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_a87d3465cea944f88b225d34b06d54aa9"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#a87d3465cea944f88b225d34b06d54aa9">llvm::TargetInstrInfo::foldMemoryOperand</a></div><div class="ttdeci">MachineInstr * foldMemoryOperand(MachineBasicBlock::iterator MI, const SmallVectorImpl&lt; unsigned &gt; &amp;Ops, int FrameIndex) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8cpp_source.html#l00382">TargetInstrInfo.cpp:382</a></div></div>
<div class="ttc" id="Statistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="classllvm_1_1TinyPtrVector_html"><div class="ttname"><a href="classllvm_1_1TinyPtrVector.html">llvm::TinyPtrVector</a></div><div class="ttdef"><b>Definition:</b> <a href="TinyPtrVector_8h_source.html#l00028">TinyPtrVector.h:28</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRange_html_a0a864b86bcfc75081923b157f0c3e212"><div class="ttname"><a href="classllvm_1_1LiveRange.html#a0a864b86bcfc75081923b157f0c3e212">llvm::LiveRange::getNumValNums</a></div><div class="ttdeci">unsigned getNumValNums() const </div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00246">LiveInterval.h:246</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRange_html_abfed19760ab95747976edc7862a35807"><div class="ttname"><a href="classllvm_1_1LiveRange.html#abfed19760ab95747976edc7862a35807">llvm::LiveRange::empty</a></div><div class="ttdeci">bool empty() const </div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00311">LiveInterval.h:311</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRange_html_a367c3737ac6d7da627333ad5515be2e7"><div class="ttname"><a href="classllvm_1_1LiveRange.html#a367c3737ac6d7da627333ad5515be2e7">llvm::LiveRange::getVNInfoAt</a></div><div class="ttdeci">VNInfo * getVNInfoAt(SlotIndex Idx) const </div><div class="ttdoc">getVNInfoAt - Return the VNInfo that is live at Idx, or NULL. </div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00350">LiveInterval.h:350</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00109">CommandLine.h:109</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a89e006230bfc175988ee94b655eed619"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a89e006230bfc175988ee94b655eed619">llvm::MachineInstr::allDefsAreDead</a></div><div class="ttdeci">bool allDefsAreDead() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8cpp_source.html#l01357">MachineInstr.cpp:1357</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRange_html"><div class="ttname"><a href="classllvm_1_1LiveRange.html">llvm::LiveRange</a></div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00146">LiveInterval.h:146</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRangeEdit_html_af8d7caeee6400e3a30914fba0e181866"><div class="ttname"><a href="classllvm_1_1LiveRangeEdit.html#af8d7caeee6400e3a30914fba0e181866">llvm::LiveRangeEdit::checkRematerializable</a></div><div class="ttdeci">bool checkRematerializable(VNInfo *VNI, const MachineInstr *DefMI, AliasAnalysis *)</div><div class="ttdef"><b>Definition:</b> <a href="LiveRangeEdit_8cpp_source.html#l00050">LiveRangeEdit.cpp:50</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstrSpan_html"><div class="ttname"><a href="classllvm_1_1MachineInstrSpan.html">llvm::MachineInstrSpan</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00742">MachineBasicBlock.h:742</a></div></div>
<div class="ttc" id="X86DisassemblerDecoder_8h_html_a546839a5c4bcf9f9450967155f48de41"><div class="ttname"><a href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></div><div class="ttdeci">Reg</div><div class="ttdef"><b>Definition:</b> <a href="X86DisassemblerDecoder_8h_source.html#l00428">X86DisassemblerDecoder.h:428</a></div></div>
<div class="ttc" id="InlineSpiller_8cpp_html_ac409a43ebdf6f33ce2a1cbbea63ef4e6"><div class="ttname"><a href="InlineSpiller_8cpp.html#ac409a43ebdf6f33ce2a1cbbea63ef4e6">STATISTIC</a></div><div class="ttdeci">STATISTIC(NumSpilledRanges,&quot;Number of spilled live ranges&quot;)</div></div>
<div class="ttc" id="classllvm_1_1LiveIntervals_html"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html">llvm::LiveIntervals</a></div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervalAnalysis_8h_source.html#l00049">LiveIntervalAnalysis.h:49</a></div></div>
<div class="ttc" id="HexagonHardwareLoops_8cpp_html_ada7c1594a393ede3ce32602d64d7ddb2"><div class="ttname"><a href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a></div><div class="ttdeci">Hexagon Hardware Loops</div><div class="ttdef"><b>Definition:</b> <a href="HexagonHardwareLoops_8cpp_source.html#l00281">HexagonHardwareLoops.cpp:281</a></div></div>
<div class="ttc" id="InlineSpiller_8cpp_html_a3e0cafa0a53b9b94f44f091ca02ddc70"><div class="ttname"><a href="InlineSpiller_8cpp.html#a3e0cafa0a53b9b94f44f091ca02ddc70">dumpMachineInstrRangeWithSlotIndex</a></div><div class="ttdeci">static void dumpMachineInstrRangeWithSlotIndex(MachineBasicBlock::iterator B, MachineBasicBlock::iterator E, LiveIntervals const &amp;LIS, const char *const header, unsigned VReg=0)</div><div class="ttdef"><b>Definition:</b> <a href="InlineSpiller_8cpp_source.html#l01009">InlineSpiller.cpp:1009</a></div></div>
<div class="ttc" id="MachineFunction_8h_html"><div class="ttname"><a href="MachineFunction_8h.html">MachineFunction.h</a></div></div>
<div class="ttc" id="classllvm_1_1LiveIntervals_html_a33c530a347219feffbfaa5d708337925"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#a33c530a347219feffbfaa5d708337925">llvm::LiveIntervals::intervalIsInOneMBB</a></div><div class="ttdeci">MachineBasicBlock * intervalIsInOneMBB(const LiveInterval &amp;LI) const </div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervalAnalysis_8cpp_source.html#l00580">LiveIntervalAnalysis.cpp:580</a></div></div>
<div class="ttc" id="namespacellvm_1_1NVPTX_1_1PTXCvtMode_html_ad81eb7557182862503894d8bc5e8328fab649a92948d9ef9d051acb0681fea44a"><div class="ttname"><a href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fab649a92948d9ef9d051acb0681fea44a">llvm::NVPTX::PTXCvtMode::RM</a></div><div class="ttdef"><b>Definition:</b> <a href="NVPTX_8h_source.html#l00142">NVPTX.h:142</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunctionPass_html"><div class="ttname"><a href="classllvm_1_1MachineFunctionPass.html">llvm::MachineFunctionPass</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunctionPass_8h_source.html#l00032">MachineFunctionPass.h:32</a></div></div>
<div class="ttc" id="HexagonCopyToCombine_8cpp_html_a1d40004718218dbdf06b496766299101"><div class="ttname"><a href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a></div><div class="ttdeci">const HexagonInstrInfo * TII</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCopyToCombine_8cpp_source.html#l00115">HexagonCopyToCombine.cpp:115</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a400eaca9881c8dcab97e9f42b1ab1815"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">llvm::SmallVectorImpl::pop_back_val</a></div><div class="ttdeci">T LLVM_ATTRIBUTE_UNUSED_RESULT pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00430">SmallVector.h:430</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_ad8198d6d83af9410d867136e33fbf4b2"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">llvm::MachineOperand::isReg</a></div><div class="ttdeci">bool isReg() const </div><div class="ttdoc">isReg - Tests if this is a MO_Register operand. </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00224">MachineOperand.h:224</a></div></div>
<div class="ttc" id="classllvm_1_1TinyPtrVector_html_aa8dc0937a5c524026865ef2a68d3c4f1"><div class="ttname"><a href="classllvm_1_1TinyPtrVector.html#aa8dc0937a5c524026865ef2a68d3c4f1">llvm::TinyPtrVector::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="TinyPtrVector_8h_source.html#l00139">TinyPtrVector.h:139</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_ac2421adbb9996e1b15f03a8abb6c70a8"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#ac2421adbb9996e1b15f03a8abb6c70a8">llvm::MachineInstr::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8cpp_source.html#l00846">MachineInstr.cpp:846</a></div></div>
<div class="ttc" id="MachineFrameInfo_8h_html"><div class="ttname"><a href="MachineFrameInfo_8h.html">MachineFrameInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1LiveQueryResult_html"><div class="ttname"><a href="classllvm_1_1LiveQueryResult.html">llvm::LiveQueryResult</a></div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00085">LiveInterval.h:85</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_ab3904d3601dbe52865d5f2e33a06d80d"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#ab3904d3601dbe52865d5f2e33a06d80d">llvm::MachineRegisterInfo::getRegClass</a></div><div class="ttdeci">const TargetRegisterClass * getRegClass(unsigned Reg) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00342">MachineRegisterInfo.h:342</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a465f75c78f1dc551152248c9f203b88d"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a465f75c78f1dc551152248c9f203b88d">llvm::SmallVectorImpl::assign</a></div><div class="ttdeci">void assign(unsigned NumElts, const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00470">SmallVector.h:470</a></div></div>
<div class="ttc" id="classllvm_1_1AliasAnalysis_html"><div class="ttname"><a href="classllvm_1_1AliasAnalysis.html">llvm::AliasAnalysis</a></div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00056">AliasAnalysis.h:56</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFrameInfo_html"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html">llvm::MachineFrameInfo</a></div><div class="ttdoc">Abstract Stack Frame Information. </div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00080">MachineFrameInfo.h:80</a></div></div>
<div class="ttc" id="classllvm_1_1LiveIntervals_html_a87b097de2261d68334195870a03412b9"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#a87b097de2261d68334195870a03412b9">llvm::LiveIntervals::InsertMachineInstrRangeInMaps</a></div><div class="ttdeci">void InsertMachineInstrRangeInMaps(MachineBasicBlock::iterator B, MachineBasicBlock::iterator E)</div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervalAnalysis_8h_source.html#l00234">LiveIntervalAnalysis.h:234</a></div></div>
<div class="ttc" id="namespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00126">StackSlotColoring.cpp:126</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperandIteratorBase_html_a37582434549f9f01e3e5f69fb2117be3"><div class="ttname"><a href="classllvm_1_1MachineOperandIteratorBase.html#a37582434549f9f01e3e5f69fb2117be3">llvm::MachineOperandIteratorBase::analyzePhysReg</a></div><div class="ttdeci">PhysRegInfo analyzePhysReg(unsigned Reg, const TargetRegisterInfo *TRI)</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBundle_8cpp_source.html#l00281">MachineInstrBundle.cpp:281</a></div></div>
<div class="ttc" id="classllvm_1_1LiveStacks_html_a77ec673a7fde73e91e8fa6be83a82b01"><div class="ttname"><a href="classllvm_1_1LiveStacks.html#a77ec673a7fde73e91e8fa6be83a82b01">llvm::LiveStacks::getOrCreateInterval</a></div><div class="ttdeci">LiveInterval &amp; getOrCreateInterval(int Slot, const TargetRegisterClass *RC)</div><div class="ttdef"><b>Definition:</b> <a href="LiveStackAnalysis_8cpp_source.html#l00058">LiveStackAnalysis.cpp:58</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstrSpan_html_ad7baac24bfd68006d3efe73d6c3037f4"><div class="ttname"><a href="classllvm_1_1MachineInstrSpan.html#ad7baac24bfd68006d3efe73d6c3037f4">llvm::MachineInstrSpan::end</a></div><div class="ttdeci">MachineBasicBlock::iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00755">MachineBasicBlock.h:755</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstrBuilder_html_a9f1fae6a5dbb6e378ca85df1fded8515"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#a9f1fae6a5dbb6e378ca85df1fded8515">llvm::MachineInstrBuilder::addImm</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addImm(int64_t Val) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00083">MachineInstrBuilder.h:83</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a7b5fe96d88954efc855e6c466207e535"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">llvm::MachineInstr::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00265">MachineInstr.h:265</a></div></div>
<div class="ttc" id="classllvm_1_1VNInfo_html_ae4b6b5a6aeabaa9cd6ba683d8786b2a5"><div class="ttname"><a href="classllvm_1_1VNInfo.html#ae4b6b5a6aeabaa9cd6ba683d8786b2a5">llvm::VNInfo::isUnused</a></div><div class="ttdeci">bool isUnused() const </div><div class="ttdoc">Returns true if this value is unused. </div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00076">LiveInterval.h:76</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRange_html_aae51d91c7cb4dc1a4ffabbfd1b7be9a1"><div class="ttname"><a href="classllvm_1_1LiveRange.html#aae51d91c7cb4dc1a4ffabbfd1b7be9a1">llvm::LiveRange::MergeSegmentsInAsValue</a></div><div class="ttdeci">void MergeSegmentsInAsValue(const LiveRange &amp;RHS, VNInfo *LHSValNo)</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8cpp_source.html#l00493">LiveInterval.cpp:493</a></div></div>
<div class="ttc" id="classllvm_1_1PrintReg_html"><div class="ttname"><a href="classllvm_1_1PrintReg.html">llvm::PrintReg</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00878">TargetRegisterInfo.h:878</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a001a88e1d71c2e11ccd57efe75da4af3"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a001a88e1d71c2e11ccd57efe75da4af3">llvm::MachineInstr::RemoveOperand</a></div><div class="ttdeci">void RemoveOperand(unsigned i)</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8cpp_source.html#l00717">MachineInstr.cpp:717</a></div></div>
<div class="ttc" id="classllvm_1_1SetVector_html_a72d928b7fc2c5f2d56c6ac0265fd9c6e"><div class="ttname"><a href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallSet&lt; T, N &gt; &gt;::insert</a></div><div class="ttdeci">bool insert(const value_type &amp;X)</div><div class="ttdoc">Insert a new element into the SetVector. </div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00102">SetVector.h:102</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html_a2ced6343b8ad006a757059554bbf9f37"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html#a2ced6343b8ad006a757059554bbf9f37">llvm::SmallPtrSet::count</a></div><div class="ttdeci">bool count(PtrType Ptr) const </div><div class="ttdoc">count - Return true if the specified pointer is in the set. </div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00264">SmallPtrSet.h:264</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorBase_html_a8a8df4d85555c7954a95f86080cd3b64"><div class="ttname"><a href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">llvm::SmallVectorBase::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const </div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00056">SmallVector.h:56</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a242314c0ae0147d1a7ef54c9bc312616"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">llvm::MachineInstr::getOpcode</a></div><div class="ttdeci">int getOpcode() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00261">MachineInstr.h:261</a></div></div>
<div class="ttc" id="MachineInstrBuilder_8h_html"><div class="ttname"><a href="MachineInstrBuilder_8h.html">MachineInstrBuilder.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a1b1d62bd2a92c9c7d1f2c9692b6c5698"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a1b1d62bd2a92c9c7d1f2c9692b6c5698">llvm::MachineInstr::isBundled</a></div><div class="ttdeci">bool isBundled() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00216">MachineInstr.h:216</a></div></div>
<div class="ttc" id="classllvm_1_1SetVector_html_a298a4f422dfc8478ad9cdd0a106cd5e4"><div class="ttname"><a href="classllvm_1_1SetVector.html#a298a4f422dfc8478ad9cdd0a106cd5e4">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallSet&lt; T, N &gt; &gt;::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdoc">Determine if the SetVector is empty or not. </div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00059">SetVector.h:59</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a></div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00031">ArrayRef.h:31</a></div></div>
<div class="ttc" id="MachineInstrBundle_8h_html"><div class="ttname"><a href="MachineInstrBundle_8h.html">MachineInstrBundle.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a7e7a1a247b7725a24fe19a91f90782cc"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a7e7a1a247b7725a24fe19a91f90782cc">llvm::MachineBasicBlock::pred_iterator</a></div><div class="ttdeci">std::vector&lt; MachineBasicBlock * &gt;::iterator pred_iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00247">MachineBasicBlock.h:247</a></div></div>
<div class="ttc" id="classllvm_1_1VirtRegMap_html"><div class="ttname"><a href="classllvm_1_1VirtRegMap.html">llvm::VirtRegMap</a></div><div class="ttdef"><b>Definition:</b> <a href="VirtRegMap_8h_source.html#l00032">VirtRegMap.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a7059d68a29d5ecfb37623ab45cdb4e8d"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a7059d68a29d5ecfb37623ab45cdb4e8d">llvm::MachineOperand::getImm</a></div><div class="ttdeci">int64_t getImm() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00402">MachineOperand.h:402</a></div></div>
<div class="ttc" id="classllvm_1_1SetVector_html_ae8edadd3fd98e95c3dbdda8f0e36b1c6"><div class="ttname"><a href="classllvm_1_1SetVector.html#ae8edadd3fd98e95c3dbdda8f0e36b1c6">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallSet&lt; T, N &gt; &gt;::pop_back_val</a></div><div class="ttdeci">T LLVM_ATTRIBUTE_UNUSED_RESULT pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00173">SetVector.h:173</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRange_html_aab1fd974b038b678da5bf05d9df2f930"><div class="ttname"><a href="classllvm_1_1LiveRange.html#aab1fd974b038b678da5bf05d9df2f930">llvm::LiveRange::const_vni_iterator</a></div><div class="ttdeci">VNInfoList::const_iterator const_vni_iterator</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00203">LiveInterval.h:203</a></div></div>
<div class="ttc" id="classllvm_1_1LiveIntervals_html_af68f45baf4510224cb6ecf00019a9987"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#af68f45baf4510224cb6ecf00019a9987">llvm::LiveIntervals::getCachedRegUnit</a></div><div class="ttdeci">LiveRange * getCachedRegUnit(unsigned Unit)</div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervalAnalysis_8h_source.html#l00379">LiveIntervalAnalysis.h:379</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_aabad9b72f6d20d3462efc34020d39f73"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">llvm::MachineInstr::getParent</a></div><div class="ttdeci">const MachineBasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00119">MachineInstr.h:119</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html">llvm::TargetInstrInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00047">TargetInstrInfo.h:47</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a1e1d26226c627cf3dcf3c191b85e7d7d"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a1e1d26226c627cf3dcf3c191b85e7d7d">llvm::MachineInstr::isDebugValue</a></div><div class="ttdeci">bool isDebugValue() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00639">MachineInstr.h:639</a></div></div>
<div class="ttc" id="MachineBlockFrequencyInfo_8h_html"><div class="ttname"><a href="MachineBlockFrequencyInfo_8h.html">MachineBlockFrequencyInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a11d72231fe6da4abec10afff58dede5d"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a11d72231fe6da4abec10afff58dede5d">llvm::MachineOperand::isEarlyClobber</a></div><div class="ttdeci">bool isEarlyClobber() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00304">MachineOperand.h:304</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ac51be7ff80fe8d6ae5e8c0acb194908a"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">llvm::MachineBasicBlock::iterator</a></div><div class="ttdeci">bundle_iterator&lt; MachineInstr, instr_iterator &gt; iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00212">MachineBasicBlock.h:212</a></div></div>
<div class="ttc" id="CommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="classllvm_1_1LiveIntervals_html_a4913e06cfa1f22a3040d3090f924e4ed"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#a4913e06cfa1f22a3040d3090f924e4ed">llvm::LiveIntervals::RemoveMachineInstrFromMaps</a></div><div class="ttdeci">void RemoveMachineInstrFromMaps(MachineInstr *MI)</div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervalAnalysis_8h_source.html#l00240">LiveIntervalAnalysis.h:240</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRangeEdit_html_a1865c0f9577162fd3ed02083206d6865"><div class="ttname"><a href="classllvm_1_1LiveRangeEdit.html#a1865c0f9577162fd3ed02083206d6865">llvm::LiveRangeEdit::createFrom</a></div><div class="ttdeci">unsigned createFrom(unsigned OldReg)</div><div class="ttdoc">createFrom - Create a new virtual register based on OldReg. </div><div class="ttdef"><b>Definition:</b> <a href="LiveRangeEdit_8cpp_source.html#l00042">LiveRangeEdit.cpp:42</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a3be7d94076d328797ab57ce09cefab33"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a3be7d94076d328797ab57ce09cefab33">llvm::MachineBasicBlock::SkipPHIsAndLabels</a></div><div class="ttdeci">iterator SkipPHIsAndLabels(iterator I)</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00161">MachineBasicBlock.cpp:161</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRange_html_acd0853cbfd87e166b73d3e24502f2346"><div class="ttname"><a href="classllvm_1_1LiveRange.html#acd0853cbfd87e166b73d3e24502f2346">llvm::LiveRange::Query</a></div><div class="ttdeci">LiveQueryResult Query(SlotIndex Idx) const </div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00441">LiveInterval.h:441</a></div></div>
<div class="ttc" id="LLParser_8cpp_html_aae58e3df0180401e8f3ab75c18fbc07a"><div class="ttname"><a href="LLParser_8cpp.html#aae58e3df0180401e8f3ab75c18fbc07a">if</a></div><div class="ttdeci">* if(!EatIfPresent(lltok::kw_thread_local)) return false</div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a0359a738e0412c5a7ea55d61175e0661"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a0359a738e0412c5a7ea55d61175e0661">llvm::MachineBasicBlock::pred_end</a></div><div class="ttdeci">pred_iterator pred_end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00262">MachineBasicBlock.h:262</a></div></div>
<div class="ttc" id="classllvm_1_1TinyPtrVector_html_a1437e12220a4cd03b10656dcb607c642"><div class="ttname"><a href="classllvm_1_1TinyPtrVector.html#a1437e12220a4cd03b10656dcb607c642">llvm::TinyPtrVector::push_back</a></div><div class="ttdeci">void push_back(EltTy NewVal)</div><div class="ttdef"><b>Definition:</b> <a href="TinyPtrVector_8h_source.html#l00180">TinyPtrVector.h:180</a></div></div>
<div class="ttc" id="classllvm_1_1TinyPtrVector_html_a0e09f111089ae4fffb14fa1b22816483"><div class="ttname"><a href="classllvm_1_1TinyPtrVector.html#a0e09f111089ae4fffb14fa1b22816483">llvm::TinyPtrVector::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="TinyPtrVector_8h_source.html#l00132">TinyPtrVector.h:132</a></div></div>
<div class="ttc" id="classllvm_1_1VirtRegMap_html_ad0a065b0808d2d3112a829b020332d69"><div class="ttname"><a href="classllvm_1_1VirtRegMap.html#ad0a065b0808d2d3112a829b020332d69">llvm::VirtRegMap::getOriginal</a></div><div class="ttdeci">unsigned getOriginal(unsigned VirtReg) const </div><div class="ttdef"><b>Definition:</b> <a href="VirtRegMap_8h_source.html#l00151">VirtRegMap.h:151</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_a008f499ae277e4936b5b897ddb4bcb7e"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a008f499ae277e4936b5b897ddb4bcb7e">llvm::MachineRegisterInfo::isReserved</a></div><div class="ttdeci">bool isReserved(unsigned PhysReg) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00500">MachineRegisterInfo.h:500</a></div></div>
<div class="ttc" id="MCModuleYAML_8cpp_html_a5cdd6ae6b245e832e7cc5e4edf035cb2"><div class="ttname"><a href="MCModuleYAML_8cpp.html#a5cdd6ae6b245e832e7cc5e4edf035cb2">MII</a></div><div class="ttdeci">const MCInstrInfo &amp; MII</div><div class="ttdef"><b>Definition:</b> <a href="MCModuleYAML_8cpp_source.html#l00055">MCModuleYAML.cpp:55</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_afe61057aa8a91199724dfb9943671582"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#afe61057aa8a91199724dfb9943671582">llvm::MachineInstr::isIndirectDebugValue</a></div><div class="ttdeci">bool isIndirectDebugValue() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00642">MachineInstr.h:642</a></div></div>
<div class="ttc" id="TargetInstrInfo_8h_html"><div class="ttname"><a href="TargetInstrInfo_8h.html">TargetInstrInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a302e45878c6dc1714334c7ce96d56846"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">llvm::MachineInstr::getOperand</a></div><div class="ttdeci">const MachineOperand &amp; getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00267">MachineInstr.h:267</a></div></div>
<div class="ttc" id="structllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00286">CommandLine.h:286</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_a1f16d509bf2e2c2d0e0176f04c253a96"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#a1f16d509bf2e2c2d0e0176f04c253a96">llvm::TargetInstrInfo::loadRegFromStackSlot</a></div><div class="ttdeci">virtual void loadRegFromStackSlot(MachineBasicBlock &amp;MBB, MachineBasicBlock::iterator MI, unsigned DestReg, int FrameIndex, const TargetRegisterClass *RC, const TargetRegisterInfo *TRI) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00514">TargetInstrInfo.h:514</a></div></div>
<div class="ttc" id="classllvm_1_1TinyPtrVector_html_acbf133519c18f7e338abf7f355fbf4a0"><div class="ttname"><a href="classllvm_1_1TinyPtrVector.html#acbf133519c18f7e338abf7f355fbf4a0">llvm::TinyPtrVector::size</a></div><div class="ttdeci">unsigned size() const </div><div class="ttdef"><b>Definition:</b> <a href="TinyPtrVector_8h_source.html#l00121">TinyPtrVector.h:121</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html">llvm::MachineBasicBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00062">MachineBasicBlock.h:62</a></div></div>
<div class="ttc" id="TwoAddressInstructionPass_8cpp_html_a34b5cf133e2453a532a504197fec9171"><div class="ttname"><a href="TwoAddressInstructionPass_8cpp.html#a34b5cf133e2453a532a504197fec9171">pass</a></div><div class="ttdeci">Two Address instruction pass</div><div class="ttdef"><b>Definition:</b> <a href="TwoAddressInstructionPass_8cpp_source.html#l00167">TwoAddressInstructionPass.cpp:167</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_aa8d4d336ac91a47a6e4568ba18b9d66a"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#aa8d4d336ac91a47a6e4568ba18b9d66a">llvm::TargetInstrInfo::isStoreToStackSlot</a></div><div class="ttdeci">virtual unsigned isStoreToStackSlot(const MachineInstr *MI, int &amp;FrameIndex) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00153">TargetInstrInfo.h:153</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_ae0ac5973cd95f76e3365e67aaad69de6"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#ae0ac5973cd95f76e3365e67aaad69de6">llvm::MachineInstr::isCopy</a></div><div class="ttdeci">bool isCopy() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00669">MachineInstr.h:669</a></div></div>
<div class="ttc" id="namespacellvm_html_aa1704159f75e6eacd595962ea6d93ffe"><div class="ttname"><a href="namespacellvm.html#aa1704159f75e6eacd595962ea6d93ffe">llvm::next</a></div><div class="ttdeci">ItTy next(ItTy it, Dist n)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00154">STLExtras.h:154</a></div></div>
<div class="ttc" id="classllvm_1_1VirtRegMap_html_a9913d276d75825db133ca87939ef94bfa120c86e3ef630a99345f58523740bfd3"><div class="ttname"><a href="classllvm_1_1VirtRegMap.html#a9913d276d75825db133ca87939ef94bfa120c86e3ef630a99345f58523740bfd3">llvm::VirtRegMap::NO_STACK_SLOT</a></div><div class="ttdef"><b>Definition:</b> <a href="VirtRegMap_8h_source.html#l00036">VirtRegMap.h:36</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRangeEdit_html_a551aeedea62b16d80a284a4c3cb578cf"><div class="ttname"><a href="classllvm_1_1LiveRangeEdit.html#a551aeedea62b16d80a284a4c3cb578cf">llvm::LiveRangeEdit::canRematerializeAt</a></div><div class="ttdeci">bool canRematerializeAt(Remat &amp;RM, SlotIndex UseIdx, bool cheapAsAMove)</div><div class="ttdef"><b>Definition:</b> <a href="LiveRangeEdit_8cpp_source.html#l00117">LiveRangeEdit.cpp:117</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRangeEdit_html_a39247d9f0a920790c427c7bacac001f0"><div class="ttname"><a href="classllvm_1_1LiveRangeEdit.html#a39247d9f0a920790c427c7bacac001f0">llvm::LiveRangeEdit::getParent</a></div><div class="ttdeci">LiveInterval &amp; getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="LiveRangeEdit_8h_source.html#l00129">LiveRangeEdit.h:129</a></div></div>
<div class="ttc" id="namespacellvm_html_a980570dc1410d4ef53806f82028ca381"><div class="ttname"><a href="namespacellvm.html#a980570dc1410d4ef53806f82028ca381">llvm::BuildMI</a></div><div class="ttdeci">MachineInstrBuilder BuildMI(MachineFunction &amp;MF, DebugLoc DL, const MCInstrDesc &amp;MCID)</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00223">MachineInstrBuilder.h:223</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_a94d273699f7fdbd1a01477c4ca8014dd"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#a94d273699f7fdbd1a01477c4ca8014dd">llvm::TargetInstrInfo::storeRegToStackSlot</a></div><div class="ttdeci">virtual void storeRegToStackSlot(MachineBasicBlock &amp;MBB, MachineBasicBlock::iterator MI, unsigned SrcReg, bool isKill, int FrameIndex, const TargetRegisterClass *RC, const TargetRegisterInfo *TRI) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00501">TargetInstrInfo.h:501</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_aca37b55b20f45c96067bac1d4f1dcb7f"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#aca37b55b20f45c96067bac1d4f1dcb7f">llvm::MachineOperand::getSubReg</a></div><div class="ttdeci">unsigned getSubReg() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00264">MachineOperand.h:264</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a18c110c35e9133222a37b28d30f8a90f"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a18c110c35e9133222a37b28d30f8a90f">llvm::SmallVectorImpl::erase</a></div><div class="ttdeci">iterator erase(iterator I)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00478">SmallVector.h:478</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html">llvm::TargetRegisterInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00219">TargetRegisterInfo.h:219</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ab644fcf07a4c2708333cf66276282357"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ab644fcf07a4c2708333cf66276282357">llvm::MachineBasicBlock::pred_begin</a></div><div class="ttdeci">pred_iterator pred_begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00260">MachineBasicBlock.h:260</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRange_html_aab457d3251eb957215a85c472346e064"><div class="ttname"><a href="classllvm_1_1LiveRange.html#aab457d3251eb957215a85c472346e064">llvm::LiveRange::vni_iterator</a></div><div class="ttdeci">VNInfoList::iterator vni_iterator</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00199">LiveInterval.h:199</a></div></div>
<div class="ttc" id="classllvm_1_1VNInfo_html_ae0af39c31bb54b8c908d8d4a15f55da5"><div class="ttname"><a href="classllvm_1_1VNInfo.html#ae0af39c31bb54b8c908d8d4a15f55da5">llvm::VNInfo::isPHIDef</a></div><div class="ttdeci">bool isPHIDef() const </div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00073">LiveInterval.h:73</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRange_html_a0fcc0f0a530494e39f8d378120886f9d"><div class="ttname"><a href="classllvm_1_1LiveRange.html#a0fcc0f0a530494e39f8d378120886f9d">llvm::LiveRange::containsValue</a></div><div class="ttdeci">bool containsValue(const VNInfo *VNI) const </div><div class="ttdoc">containsValue - Returns true if VNI belongs to this range. </div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00258">LiveInterval.h:258</a></div></div>
<div class="ttc" id="classllvm_1_1MCInstrInfo_html_ab16f5a81fccfe4b7f645ba5a74ffad02"><div class="ttname"><a href="classllvm_1_1MCInstrInfo.html#ab16f5a81fccfe4b7f645ba5a74ffad02">llvm::MCInstrInfo::get</a></div><div class="ttdeci">const MCInstrDesc &amp; get(unsigned Opcode) const </div><div class="ttdef"><b>Definition:</b> <a href="MCInstrInfo_8h_source.html#l00048">MCInstrInfo.h:48</a></div></div>
<div class="ttc" id="LiveRangeEdit_8h_html"><div class="ttname"><a href="LiveRangeEdit_8h.html">LiveRangeEdit.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a8a82683fccdef8a5ef772ef03277aee7"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a8a82683fccdef8a5ef772ef03277aee7">llvm::MachineOperand::setIsKill</a></div><div class="ttdeci">void setIsKill(bool Val=true)</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00367">MachineOperand.h:367</a></div></div>
<div class="ttc" id="classllvm_1_1LiveStacks_html"><div class="ttname"><a href="classllvm_1_1LiveStacks.html">llvm::LiveStacks</a></div><div class="ttdef"><b>Definition:</b> <a href="LiveStackAnalysis_8h_source.html#l00027">LiveStackAnalysis.h:27</a></div></div>
<div class="ttc" id="structllvm_1_1LiveRangeEdit_1_1Remat_html_a13c35d2beb52c8a901a5bb1173ac2775"><div class="ttname"><a href="structllvm_1_1LiveRangeEdit_1_1Remat.html#a13c35d2beb52c8a901a5bb1173ac2775">llvm::LiveRangeEdit::Remat::ParentVNI</a></div><div class="ttdeci">VNInfo * ParentVNI</div><div class="ttdef"><b>Definition:</b> <a href="LiveRangeEdit_8h_source.html#l00175">LiveRangeEdit.h:175</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterInfo_html_acd7ff2004156240432b82c305aab07db"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#acd7ff2004156240432b82c305aab07db">llvm::TargetRegisterInfo::isStackSlot</a></div><div class="ttdeci">static bool isStackSlot(unsigned Reg)</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00260">TargetRegisterInfo.h:260</a></div></div>
<div class="ttc" id="classllvm_1_1VNInfo_html_ad989a0c1b26066308798f4d11a0e69df"><div class="ttname"><a href="classllvm_1_1VNInfo.html#ad989a0c1b26066308798f4d11a0e69df">llvm::VNInfo::id</a></div><div class="ttdeci">unsigned id</div><div class="ttdoc">The ID number of this value. </div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00049">LiveInterval.h:49</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSetImpl_html_aa72472422d95c7052d62432ec279ff85"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#aa72472422d95c7052d62432ec279ff85">llvm::SmallPtrSetImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00077">SmallPtrSet.h:77</a></div></div>
<div class="ttc" id="classllvm_1_1SmallSetVector_html"><div class="ttname"><a href="classllvm_1_1SmallSetVector.html">llvm::SmallSetVector</a></div><div class="ttdoc">A SetVector that performs no allocations if smaller than a certain size. </div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00218">SetVector.h:218</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00236">SmallPtrSet.h:236</a></div></div>
<div class="ttc" id="LiveIntervalAnalysis_8h_html"><div class="ttname"><a href="LiveIntervalAnalysis_8h.html">LiveIntervalAnalysis.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a1ecb35298bc4d1fe03997959e1210c87"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a1ecb35298bc4d1fe03997959e1210c87">llvm::MachineInstr::setDesc</a></div><div class="ttdeci">void setDesc(const MCInstrDesc &amp;tid)</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00984">MachineInstr.h:984</a></div></div>
<div class="ttc" id="classllvm_1_1SlotIndex_html_a0b73244049319d841fd11a238f35b5d1"><div class="ttname"><a href="classllvm_1_1SlotIndex.html#a0b73244049319d841fd11a238f35b5d1">llvm::SlotIndex::isSameInstr</a></div><div class="ttdeci">static bool isSameInstr(SlotIndex A, SlotIndex B)</div><div class="ttdoc">isSameInstr - Return true if A and B refer to the same instruction. </div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00206">SlotIndexes.h:206</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html"><div class="ttname"><a href="classllvm_1_1MachineOperand.html">llvm::MachineOperand</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00043">MachineOperand.h:43</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector&lt; unsigned, 8 &gt;</a></div></div>
<div class="ttc" id="InlineSpiller_8cpp_html_a7819774f1578a13aaf380ec73782c9e4"><div class="ttname"><a href="InlineSpiller_8cpp.html#a7819774f1578a13aaf380ec73782c9e4">DisableHoisting</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; DisableHoisting(&quot;disable-spill-hoist&quot;, cl::Hidden, cl::desc(&quot;Disable inline spill hoisting&quot;))</div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a8de7d5cf38939044471c6ee60a01a3df"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a8de7d5cf38939044471c6ee60a01a3df">llvm::MachineOperand::isDef</a></div><div class="ttdeci">bool isDef() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00274">MachineOperand.h:274</a></div></div>
<div class="ttc" id="namespacellvm_1_1TargetOpcode_html_a348d4259b5fa6a8ecfe94e7ae512e1a8a3de0a03c0721e0683934a37868f6a421"><div class="ttname"><a href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8a3de0a03c0721e0683934a37868f6a421">llvm::TargetOpcode::KILL</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetOpcodes_8h_source.html#l00035">TargetOpcodes.h:35</a></div></div>
<div class="ttc" id="LiveStackAnalysis_8h_html"><div class="ttname"><a href="LiveStackAnalysis_8h.html">LiveStackAnalysis.h</a></div></div>
<div class="ttc" id="classllvm_1_1LiveIntervals_html_a70cf6a51b043dc9f8ae683c266d5d9c4"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#a70cf6a51b043dc9f8ae683c266d5d9c4">llvm::LiveIntervals::getInterval</a></div><div class="ttdeci">LiveInterval &amp; getInterval(unsigned Reg)</div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervalAnalysis_8h_source.html#l00105">LiveIntervalAnalysis.h:105</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00101">Debug.cpp:101</a></div></div>
<div class="ttc" id="classllvm_1_1LiveIntervals_html_a72032c8eefbf5b63bd37f24bdf2bbbe8"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#a72032c8eefbf5b63bd37f24bdf2bbbe8">llvm::LiveIntervals::InsertMachineInstrInMaps</a></div><div class="ttdeci">SlotIndex InsertMachineInstrInMaps(MachineInstr *MI)</div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervalAnalysis_8h_source.html#l00230">LiveIntervalAnalysis.h:230</a></div></div>
<div class="ttc" id="classllvm_1_1LiveIntervals_html_a403a7d7aa7ebd74f4bf85d036a247cc1"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#a403a7d7aa7ebd74f4bf85d036a247cc1">llvm::LiveIntervals::ReplaceMachineInstrInMaps</a></div><div class="ttdeci">void ReplaceMachineInstrInMaps(MachineInstr *MI, MachineInstr *NewMI)</div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervalAnalysis_8h_source.html#l00244">LiveIntervalAnalysis.h:244</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRange_html_a699598a93a78f8b0376cfb49933cbce7"><div class="ttname"><a href="classllvm_1_1LiveRange.html#a699598a93a78f8b0376cfb49933cbce7">llvm::LiveRange::getValNumInfo</a></div><div class="ttdeci">VNInfo * getValNumInfo(unsigned ValNo)</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00250">LiveInterval.h:250</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRange_html_ae2d701db395706c251a9b945d9b43b3b"><div class="ttname"><a href="classllvm_1_1LiveRange.html#ae2d701db395706c251a9b945d9b43b3b">llvm::LiveRange::containsOneValue</a></div><div class="ttdeci">bool containsOneValue() const </div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00244">LiveInterval.h:244</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html">llvm::MachineRegisterInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00030">MachineRegisterInfo.h:30</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a8a045d250952c0867382a9840ee18fdf"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">llvm::SmallVectorTemplateCommon::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00112">SmallVector.h:112</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRangeEdit_html_af296216a2d7d12b2cc2273effb7da1bd"><div class="ttname"><a href="classllvm_1_1LiveRangeEdit.html#af296216a2d7d12b2cc2273effb7da1bd">llvm::LiveRangeEdit::markRematerialized</a></div><div class="ttdeci">void markRematerialized(const VNInfo *ParentVNI)</div><div class="ttdef"><b>Definition:</b> <a href="LiveRangeEdit_8h_source.html#l00200">LiveRangeEdit.h:200</a></div></div>
<div class="ttc" id="namespacellvm_html_abc755629d1844132f222498e5c454d9b"><div class="ttname"><a href="namespacellvm.html#abc755629d1844132f222498e5c454d9b">llvm::createInlineSpiller</a></div><div class="ttdeci">Spiller * createInlineSpiller(MachineFunctionPass &amp;pass, MachineFunction &amp;mf, VirtRegMap &amp;vrm)</div><div class="ttdef"><b>Definition:</b> <a href="InlineSpiller_8cpp_source.html#l00191">InlineSpiller.cpp:191</a></div></div>
<div class="ttc" id="MachineRegisterInfo_8h_html"><div class="ttname"><a href="MachineRegisterInfo_8h.html">MachineRegisterInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html"><div class="ttname"><a href="classllvm_1_1MachineInstr.html">llvm::MachineInstr</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00050">MachineInstr.h:50</a></div></div>
<div class="ttc" id="AliasAnalysis_8h_html"><div class="ttname"><a href="AliasAnalysis_8h.html">AliasAnalysis.h</a></div></div>
<div class="ttc" id="README-SSE_8txt_html_a7246178f42b1eaef4e9bba10a9f39323"><div class="ttname"><a href="README-SSE_8txt.html#a7246178f42b1eaef4e9bba10a9f39323">spill</a></div><div class="ttdeci">the custom lowered code happens to be but we shouldn t have to custom lower anything This is probably related to&lt; 2 x i64 &gt; ops being so bad LLVM currently generates stack realignment when it is not necessary needed The problem is that we need to know about stack alignment too before RA runs At that point we don t whether there will be vector spill</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00515">README-SSE.txt:515</a></div></div>
<div class="ttc" id="classllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l01149">CommandLine.h:1149</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a5d4ca65de6e43d76586fbdd89bf930d2"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a5d4ca65de6e43d76586fbdd89bf930d2">llvm::Intrinsic::getName</a></div><div class="ttdeci">std::string getName(ID id, ArrayRef&lt; Type * &gt; Tys=None)</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00400">Function.cpp:400</a></div></div>
<div class="ttc" id="namespacellvm_1_1TargetOpcode_html_a348d4259b5fa6a8ecfe94e7ae512e1a8acd0cccd396f412a2f6eef00422b3106a"><div class="ttname"><a href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8acd0cccd396f412a2f6eef00422b3106a">llvm::TargetOpcode::PATCHPOINT</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetOpcodes_8h_source.html#l00107">TargetOpcodes.h:107</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRangeEdit_html_a927669230af7ef04e85ea4b8796757f7"><div class="ttname"><a href="classllvm_1_1LiveRangeEdit.html#a927669230af7ef04e85ea4b8796757f7">llvm::LiveRangeEdit::rematerializeAt</a></div><div class="ttdeci">SlotIndex rematerializeAt(MachineBasicBlock &amp;MBB, MachineBasicBlock::iterator MI, unsigned DestReg, const Remat &amp;RM, const TargetRegisterInfo &amp;, bool Late=false)</div><div class="ttdef"><b>Definition:</b> <a href="LiveRangeEdit_8cpp_source.html#l00147">LiveRangeEdit.cpp:147</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_a9fcdc96a6712deb1a8a3d2e18af6db3f"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#a9fcdc96a6712deb1a8a3d2e18af6db3f">llvm::TargetInstrInfo::isLoadFromStackSlot</a></div><div class="ttdeci">virtual unsigned isLoadFromStackSlot(const MachineInstr *MI, int &amp;FrameIndex) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00124">TargetInstrInfo.h:124</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a57bf9ee7219097ff0f98da23a3b3b782"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a57bf9ee7219097ff0f98da23a3b3b782">llvm::MachineOperand::isUse</a></div><div class="ttdeci">bool isUse() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00269">MachineOperand.h:269</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a624a062754a09d3787614d8627096705"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a624a062754a09d3787614d8627096705">llvm::MachineOperand::setReg</a></div><div class="ttdeci">void setReg(unsigned Reg)</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8cpp_source.html#l00049">MachineInstr.cpp:49</a></div></div>
<div class="ttc" id="namespacellvm_1_1TargetOpcode_html_a348d4259b5fa6a8ecfe94e7ae512e1a8ad3fe1d0d0fe22d208bcd8712b2ea051a"><div class="ttname"><a href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8ad3fe1d0d0fe22d208bcd8712b2ea051a">llvm::TargetOpcode::DBG_VALUE</a></div><div class="ttdoc">DBG_VALUE - a mapping of the llvm.dbg.value intrinsic. </div><div class="ttdef"><b>Definition:</b> <a href="TargetOpcodes_8h_source.html#l00069">TargetOpcodes.h:69</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRangeEdit_html"><div class="ttname"><a href="classllvm_1_1LiveRangeEdit.html">llvm::LiveRangeEdit</a></div><div class="ttdef"><b>Definition:</b> <a href="LiveRangeEdit_8h_source.html#l00036">LiveRangeEdit.h:36</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ab2d91e7bec944efcbc39d8e30644f111"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">llvm::MachineBasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00236">MachineBasicBlock.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1LiveIntervals_html_a658add65ad8e7c1421fbe79179559121"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#a658add65ad8e7c1421fbe79179559121">llvm::LiveIntervals::hasInterval</a></div><div class="ttdeci">bool hasInterval(unsigned Reg) const </div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervalAnalysis_8h_source.html#l00116">LiveIntervalAnalysis.h:116</a></div></div>
<div class="ttc" id="namespacellvm_html_a6a02d446812b76c3b271d9e3e3c77b49"><div class="ttname"><a href="namespacellvm.html#a6a02d446812b76c3b271d9e3e3c77b49">llvm::operator&lt;&lt;</a></div><div class="ttdeci">raw_ostream &amp; operator&lt;&lt;(raw_ostream &amp;OS, const APInt &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01688">APInt.h:1688</a></div></div>
<div class="ttc" id="structllvm_1_1LiveRangeEdit_1_1Remat_html"><div class="ttname"><a href="structllvm_1_1LiveRangeEdit_1_1Remat.html">llvm::LiveRangeEdit::Remat</a></div><div class="ttdoc">Remat - Information needed to rematerialize at a specific location. </div><div class="ttdef"><b>Definition:</b> <a href="LiveRangeEdit_8h_source.html#l00174">LiveRangeEdit.h:174</a></div></div>
<div class="ttc" id="classllvm_1_1SlotIndex_html_a04196b5e551d63690ede0244f80f2503"><div class="ttname"><a href="classllvm_1_1SlotIndex.html#a04196b5e551d63690ede0244f80f2503">llvm::SlotIndex::getRegSlot</a></div><div class="ttdeci">SlotIndex getRegSlot(bool EC=false) const </div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00257">SlotIndexes.h:257</a></div></div>
<div class="ttc" id="SetVector_8h_html"><div class="ttname"><a href="SetVector_8h.html">SetVector.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineLoopInfo_html_a77d3f9c52df47750480d4302ae639749"><div class="ttname"><a href="classllvm_1_1MachineLoopInfo.html#a77d3f9c52df47750480d4302ae639749">llvm::MachineLoopInfo::getLoopDepth</a></div><div class="ttdeci">unsigned getLoopDepth(const MachineBasicBlock *BB) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineLoopInfo_8h_source.html#l00111">MachineLoopInfo.h:111</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_ab75f703d251cc0ce0206fe00a999db86"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">llvm::MachineOperand::getReg</a></div><div class="ttdeci">unsigned getReg() const </div><div class="ttdoc">getReg - Returns the register number. </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00259">MachineOperand.h:259</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperandIteratorBase_html_af3802cbef7a57e8de316fe13fbed8e67"><div class="ttname"><a href="classllvm_1_1MachineOperandIteratorBase.html#af3802cbef7a57e8de316fe13fbed8e67">llvm::MachineOperandIteratorBase::isValid</a></div><div class="ttdeci">bool isValid() const </div><div class="ttdoc">isValid - Returns true until all the operands have been visited. </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBundle_8h_source.html#l00135">MachineInstrBundle.h:135</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRange_html_a69331ac1fdc66eee11c977845f2e472b"><div class="ttname"><a href="classllvm_1_1LiveRange.html#a69331ac1fdc66eee11c977845f2e472b">llvm::LiveRange::getNextValue</a></div><div class="ttdeci">VNInfo * getNextValue(SlotIndex def, VNInfo::Allocator &amp;VNInfoAllocator)</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00264">LiveInterval.h:264</a></div></div>
<div class="ttc" id="VirtRegMap_8h_html"><div class="ttname"><a href="VirtRegMap_8h.html">VirtRegMap.h</a></div></div>
<div class="ttc" id="Spiller_8h_html"><div class="ttname"><a href="Spiller_8h.html">Spiller.h</a></div></div>
<div class="ttc" id="namespacetrue_html"><div class="ttname"><a href="namespacetrue.html">true</a></div><div class="ttdef"><b>Definition:</b> <a href="DominanceFrontier_8cpp_source.html#l00024">DominanceFrontier.cpp:24</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRangeEdit_html_a3ca43df2edcebdd041ebf1f5fc434384"><div class="ttname"><a href="classllvm_1_1LiveRangeEdit.html#a3ca43df2edcebdd041ebf1f5fc434384">llvm::LiveRangeEdit::eliminateDeadDefs</a></div><div class="ttdeci">void eliminateDeadDefs(SmallVectorImpl&lt; MachineInstr * &gt; &amp;Dead, ArrayRef&lt; unsigned &gt; RegsBeingSpilled=None)</div><div class="ttdef"><b>Definition:</b> <a href="LiveRangeEdit_8cpp_source.html#l00332">LiveRangeEdit.cpp:332</a></div></div>
<div class="ttc" id="classllvm_1_1VirtRegMap_html_a06870c103c7b03c7845f2a8a30362999"><div class="ttname"><a href="classllvm_1_1VirtRegMap.html#a06870c103c7b03c7845f2a8a30362999">llvm::VirtRegMap::getStackSlot</a></div><div class="ttdeci">int getStackSlot(unsigned virtReg) const </div><div class="ttdoc">returns the stack slot mapped to the specified virtual register </div><div class="ttdef"><b>Definition:</b> <a href="VirtRegMap_8h_source.html#l00168">VirtRegMap.h:168</a></div></div>
<div class="ttc" id="classllvm_1_1LiveIntervals_html_ab306d0d7e986cc18578a5150c44a9f7a"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#ab306d0d7e986cc18578a5150c44a9f7a">llvm::LiveIntervals::getInstructionFromIndex</a></div><div class="ttdeci">MachineInstr * getInstructionFromIndex(SlotIndex index) const </div><div class="ttdoc">Returns the instruction associated with the given index. </div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervalAnalysis_8h_source.html#l00195">LiveIntervalAnalysis.h:195</a></div></div>
<div class="ttc" id="namespacellvm_1_1A64CC_html_af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442"><div class="ttname"><a href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">llvm::A64CC::MI</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00035">AArch64BaseInfo.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1raw__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__ostream.html">llvm::raw_ostream</a></div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00031">raw_ostream.h:31</a></div></div>
<div class="ttc" id="Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00097">Debug.h:97</a></div></div>
<div class="ttc" id="classllvm_1_1VirtRegMap_html_a93b5ccff01ce3ebd1575f5c57561d554"><div class="ttname"><a href="classllvm_1_1VirtRegMap.html#a93b5ccff01ce3ebd1575f5c57561d554">llvm::VirtRegMap::assignVirt2StackSlot</a></div><div class="ttdeci">int assignVirt2StackSlot(unsigned virtReg)</div><div class="ttdoc">create a mapping for the specifed virtual register to the next available stack slot ...</div><div class="ttdef"><b>Definition:</b> <a href="VirtRegMap_8cpp_source.html#l00099">VirtRegMap.cpp:99</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRangeEdit_html_afef40b63bf88c12c6f8600f02f2e1ec2"><div class="ttname"><a href="classllvm_1_1LiveRangeEdit.html#afef40b63bf88c12c6f8600f02f2e1ec2">llvm::LiveRangeEdit::calculateRegClassAndHint</a></div><div class="ttdeci">void calculateRegClassAndHint(MachineFunction &amp;, const MachineLoopInfo &amp;, const MachineBlockFrequencyInfo &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="LiveRangeEdit_8cpp_source.html#l00408">LiveRangeEdit.cpp:408</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_adfeaea4e5c82dea47ff9aa1f8367104c"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#adfeaea4e5c82dea47ff9aa1f8367104c">llvm::MachineRegisterInfo::reg_begin</a></div><div class="ttdeci">reg_iterator reg_begin(unsigned RegNo) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00212">MachineRegisterInfo.h:212</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRangeEdit_html_a18fa678e0ede001d8ab728ea77177a32"><div class="ttname"><a href="classllvm_1_1LiveRangeEdit.html#a18fa678e0ede001d8ab728ea77177a32">llvm::LiveRangeEdit::eraseVirtReg</a></div><div class="ttdeci">void eraseVirtReg(unsigned Reg)</div><div class="ttdef"><b>Definition:</b> <a href="LiveRangeEdit_8cpp_source.html#l00160">LiveRangeEdit.cpp:160</a></div></div>
<div class="ttc" id="MCModuleYAML_8cpp_html_a5e410df3f6875c5af4a7f2be284f235d"><div class="ttname"><a href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a></div><div class="ttdeci">const MCRegisterInfo &amp; MRI</div><div class="ttdef"><b>Definition:</b> <a href="MCModuleYAML_8cpp_source.html#l00056">MCModuleYAML.cpp:56</a></div></div>
<div class="ttc" id="raw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="MachineDominators_8h_html"><div class="ttname"><a href="MachineDominators_8h.html">MachineDominators.h</a></div></div>
<div class="ttc" id="classllvm_1_1LiveQueryResult_html_a04fcce5cd33d3ffe16309a908387a982"><div class="ttname"><a href="classllvm_1_1LiveQueryResult.html#a04fcce5cd33d3ffe16309a908387a982">llvm::LiveQueryResult::valueIn</a></div><div class="ttdeci">VNInfo * valueIn() const </div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00100">LiveInterval.h:100</a></div></div>
<div class="ttc" id="classllvm_1_1MachineLoopInfo_html"><div class="ttname"><a href="classllvm_1_1MachineLoopInfo.html">llvm::MachineLoopInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineLoopInfo_8h_source.html#l00072">MachineLoopInfo.h:72</a></div></div>
<div class="ttc" id="TinyPtrVector_8h_html"><div class="ttname"><a href="TinyPtrVector_8h.html">TinyPtrVector.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_a5ccf3c33d602c228a2d76b31c732628d"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a5ccf3c33d602c228a2d76b31c732628d">llvm::MachineRegisterInfo::reg_nodbg_begin</a></div><div class="ttdeci">reg_nodbg_iterator reg_nodbg_begin(unsigned RegNo) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00224">MachineRegisterInfo.h:224</a></div></div>
<div class="ttc" id="classllvm_1_1MachineDominatorTree_html_a22bd7da7d9fa4793cb214e659c198ff6"><div class="ttname"><a href="classllvm_1_1MachineDominatorTree.html#a22bd7da7d9fa4793cb214e659c198ff6">llvm::MachineDominatorTree::dominates</a></div><div class="ttdeci">bool dominates(const MachineDomTreeNode *A, const MachineDomTreeNode *B) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineDominators_8h_source.html#l00071">MachineDominators.h:71</a></div></div>
<div class="ttc" id="classllvm_1_1SlotIndex_html"><div class="ttname"><a href="classllvm_1_1SlotIndex.html">llvm::SlotIndex</a></div><div class="ttdoc">SlotIndex - An opaque wrapper around machine indexes. </div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00092">SlotIndexes.h:92</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a90cca76dd78688687e0d697679dbc799"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional ldr LCPI1_0 ldr ldr tst movne lsr ldr LCPI1_1 and r0 bx lr it saves an instruction and a register It might be profitable to cse MOVi16 if there are lots of bit immediates with the same bottom half Robert Muth started working on an alternate jump table implementation that does not put the tables in line in the text This is more like the llvm default jump table implementation This might be useful sometime Several revisions of patches are on the mailing beginning while CMP sets them like a subtract Therefore to be able to use CMN for comparisons other than the Z we ll need additional logic to reverse the conditionals associated with the comparison Perhaps a pseudo instruction for the with a post codegen pass to clean up and handle the condition codes See PR5694 for testcase Given the following on int B</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00592">Target/ARM/README.txt:592</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator_html"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator.html">llvm::MachineRegisterInfo::defusechain_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00204">MachineRegisterInfo.h:204</a></div></div>
<div class="ttc" id="namespacellvm_html_a7dc3e2c002713fec56bdbf16aa704576"><div class="ttname"><a href="namespacellvm.html#a7dc3e2c002713fec56bdbf16aa704576">llvm::tie</a></div><div class="ttdeci">tier&lt; T1, T2 &gt; tie(T1 &amp;f, T2 &amp;s)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00216">STLExtras.h:216</a></div></div>
<div class="ttc" id="classllvm_1_1MachineDominatorTree_html"><div class="ttname"><a href="classllvm_1_1MachineDominatorTree.html">llvm::MachineDominatorTree</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineDominators_8h_source.html#l00040">MachineDominators.h:40</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRange_html_aca7b7d6f329690e6bd5b5e1c83db7c1e"><div class="ttname"><a href="classllvm_1_1LiveRange.html#aca7b7d6f329690e6bd5b5e1c83db7c1e">llvm::LiveRange::vni_end</a></div><div class="ttdeci">vni_iterator vni_end()</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00201">LiveInterval.h:201</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRangeEdit_html_a8038b08f86db8d7e7f951f7ef4352767"><div class="ttname"><a href="classllvm_1_1LiveRangeEdit.html#a8038b08f86db8d7e7f951f7ef4352767">llvm::LiveRangeEdit::getReg</a></div><div class="ttdeci">unsigned getReg() const </div><div class="ttdef"><b>Definition:</b> <a href="LiveRangeEdit_8h_source.html#l00133">LiveRangeEdit.h:133</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_aad684f050965249161650dcdf5a58fa4"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#aad684f050965249161650dcdf5a58fa4">llvm::MachineRegisterInfo::use_nodbg_begin</a></div><div class="ttdeci">use_nodbg_iterator use_nodbg_begin(unsigned RegNo) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00278">MachineRegisterInfo.h:278</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a5ca4af2a257043145ad650eafb4402f9"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a5ca4af2a257043145ad650eafb4402f9">llvm::MachineInstr::getDebugLoc</a></div><div class="ttdeci">DebugLoc getDebugLoc() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00244">MachineInstr.h:244</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRange_html_a435a93196594094643aae944c4ec6cb0"><div class="ttname"><a href="classllvm_1_1LiveRange.html#a435a93196594094643aae944c4ec6cb0">llvm::LiveRange::getVNInfoBefore</a></div><div class="ttdeci">VNInfo * getVNInfoBefore(SlotIndex Idx) const </div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00358">LiveInterval.h:358</a></div></div>
<div class="ttc" id="structllvm_1_1LiveRangeEdit_1_1Remat_html_a61601a24103a27519540ea2914a83da3"><div class="ttname"><a href="structllvm_1_1LiveRangeEdit_1_1Remat.html#a61601a24103a27519540ea2914a83da3">llvm::LiveRangeEdit::Remat::OrigMI</a></div><div class="ttdeci">MachineInstr * OrigMI</div><div class="ttdef"><b>Definition:</b> <a href="LiveRangeEdit_8h_source.html#l00176">LiveRangeEdit.h:176</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstrSpan_html_a80cf68c228dc30772af16e45ec4f825c"><div class="ttname"><a href="classllvm_1_1MachineInstrSpan.html#a80cf68c228dc30772af16e45ec4f825c">llvm::MachineInstrSpan::begin</a></div><div class="ttdeci">MachineBasicBlock::iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00752">MachineBasicBlock.h:752</a></div></div>
<div class="ttc" id="MachineLoopInfo_8h_html"><div class="ttname"><a href="MachineLoopInfo_8h.html">MachineLoopInfo.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 22:58:59 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
