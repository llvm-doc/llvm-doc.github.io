<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: GVN.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('GVN_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">GVN.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="GVN_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- GVN.cpp - Eliminate redundant values and loads ---------------------===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// This pass performs global value numbering to eliminate fully redundant</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// instructions.  It also performs simple dead load elimination.</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// Note that this pass does the value numbering itself; it does not use the</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// ValueNumbering analysis passes.</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div><div class="line"><a name="l00018"></a><span class="lineno"><a class="line" href="GVN_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   18</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;gvn&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Transforms_2Scalar_8h.html">llvm/Transforms/Scalar.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseMap_8h.html">llvm/ADT/DenseMap.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DepthFirstIterator_8h.html">llvm/ADT/DepthFirstIterator.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Hashing_8h.html">llvm/ADT/Hashing.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallPtrSet_8h.html">llvm/ADT/SmallPtrSet.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SetVector_8h.html">llvm/ADT/SetVector.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AliasAnalysis_8h.html">llvm/Analysis/AliasAnalysis.h</a>&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Analysis_2CFG_8h.html">llvm/Analysis/CFG.h</a>&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ConstantFolding_8h.html">llvm/Analysis/ConstantFolding.h</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Dominators_8h.html">llvm/Analysis/Dominators.h</a>&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstructionSimplify_8h.html">llvm/Analysis/InstructionSimplify.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Loads_8h.html">llvm/Analysis/Loads.h</a>&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MemoryBuiltins_8h.html">llvm/Analysis/MemoryBuiltins.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MemoryDependenceAnalysis_8h.html">llvm/Analysis/MemoryDependenceAnalysis.h</a>&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PHITransAddr_8h.html">llvm/Analysis/PHITransAddr.h</a>&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueTracking_8h.html">llvm/Analysis/ValueTracking.h</a>&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Writer_8h.html">llvm/Assembly/Writer.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DataLayout_8h.html">llvm/IR/DataLayout.h</a>&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="GlobalVariable_8h.html">llvm/IR/GlobalVariable.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IRBuilder_8h.html">llvm/IR/IRBuilder.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IntrinsicInst_8h.html">llvm/IR/IntrinsicInst.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LLVMContext_8h.html">llvm/IR/LLVMContext.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Metadata_8h.html">llvm/IR/Metadata.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Allocator_8h.html">llvm/Support/Allocator.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PatternMatch_8h.html">llvm/Support/PatternMatch.h</a>&quot;</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetLibraryInfo_8h.html">llvm/Target/TargetLibraryInfo.h</a>&quot;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlockUtils_8h.html">llvm/Transforms/Utils/BasicBlockUtils.h</a>&quot;</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SSAUpdater_8h.html">llvm/Transforms/Utils/SSAUpdater.h</a>&quot;</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="keyword">using namespace </span>PatternMatch;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<a class="code" href="GVN_8cpp.html#ad7bf8a029cda4c015beec62bd3c1c701">STATISTIC</a>(NumGVNInstr,  <span class="stringliteral">&quot;Number of instructions deleted&quot;</span>);</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<a class="code" href="GVN_8cpp.html#ad7bf8a029cda4c015beec62bd3c1c701">STATISTIC</a>(NumGVNLoad,   <span class="stringliteral">&quot;Number of loads deleted&quot;</span>);</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<a class="code" href="GVN_8cpp.html#ad7bf8a029cda4c015beec62bd3c1c701">STATISTIC</a>(NumGVNPRE,    <span class="stringliteral">&quot;Number of instructions PRE&#39;d&quot;</span>);</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<a class="code" href="GVN_8cpp.html#ad7bf8a029cda4c015beec62bd3c1c701">STATISTIC</a>(NumGVNBlocks, <span class="stringliteral">&quot;Number of blocks merged&quot;</span>);</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<a class="code" href="GVN_8cpp.html#ad7bf8a029cda4c015beec62bd3c1c701">STATISTIC</a>(NumGVNSimpl,  <span class="stringliteral">&quot;Number of instructions simplified&quot;</span>);</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<a class="code" href="GVN_8cpp.html#ad7bf8a029cda4c015beec62bd3c1c701">STATISTIC</a>(NumGVNEqProp, <span class="stringliteral">&quot;Number of equalities propagated&quot;</span>);</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<a class="code" href="GVN_8cpp.html#ad7bf8a029cda4c015beec62bd3c1c701">STATISTIC</a>(NumPRELoad,   <span class="stringliteral">&quot;Number of loads PRE&#39;d&quot;</span>);</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="GVN_8cpp.html#a9b51dd24187fb51cb70169bb921da81b">EnablePRE</a>(<span class="stringliteral">&quot;enable-pre&quot;</span>,</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;                               <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="GVN_8cpp.html#a0f919fce34215a248b020304ab0f121b">EnableLoadPRE</a>(<span class="stringliteral">&quot;enable-load-pre&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>));</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">// Maximum allowed recursion depth.</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;uint32_t&gt;</a></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<a class="code" href="GVN_8cpp.html#ad0d196a9b22e43ebe2fe1bc471cefa45">MaxRecurseDepth</a>(<span class="stringliteral">&quot;max-recurse-depth&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(1000), <a class="code" href="namespacellvm_1_1cl.html#a492234b10e0c5918d72a3a15a6f0fa6ea61d3cb794533763159788c493ad266d9">cl::ZeroOrMore</a>,</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Max recurse depth (default = 1000)&quot;</span>));</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">//                         ValueTable Class</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">/// This class holds the mapping between values and value numbers.  It is used</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">/// as an efficient mechanism to determine the expression-wise equivalence of</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">/// two values.</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment"></span><span class="keyword">namespace </span>{</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="keyword">struct </span>Expression {</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    uint32_t opcode;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *<a class="code" href="Target_2LLVMBuild_8txt.html#ac6653103ff5a7ab01c54613c5a0e5b2d">type</a>;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;uint32_t, 4&gt;</a> varargs;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    Expression(uint32_t o = ~2U) : opcode(o) { }</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#a162c90bc179a6359438d060722bee35f">operator==</a>(<span class="keyword">const</span> Expression &amp;other)<span class="keyword"> const </span>{</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      <span class="keywordflow">if</span> (opcode != other.opcode)</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      <span class="keywordflow">if</span> (opcode == ~0U || opcode == ~1U)</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      <span class="keywordflow">if</span> (type != other.type)</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      <span class="keywordflow">if</span> (varargs != other.varargs)</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    }</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keyword">friend</span> <a class="code" href="classllvm_1_1hash__code.html">hash_code</a> <a class="code" href="namespacellvm.html#a4dd787942e0bd9f46c0cc2642cce0a4c">hash_value</a>(<span class="keyword">const</span> Expression &amp;<a class="code" href="classllvm_1_1Value.html">Value</a>) {</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a2b33f2166f38124ec3081c2fd59672f7">hash_combine</a>(Value.opcode, Value.type,</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                          <a class="code" href="namespacellvm.html#af80edfc5e42059e045aa7bf7fe42bee3">hash_combine_range</a>(Value.varargs.begin(),</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                                             Value.varargs.end()));</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    }</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  };</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="keyword">class </span>ValueTable {</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value*, uint32_t&gt;</a> valueNumbering;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Expression, uint32_t&gt;</a> expressionNumbering;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a> *AA;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <a class="code" href="classllvm_1_1MemoryDependenceAnalysis.html">MemoryDependenceAnalysis</a> *MD;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    uint32_t nextValueNumber;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    Expression create_expression(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a>* <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    Expression create_cmp_expression(<span class="keywordtype">unsigned</span> Opcode,</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                                     <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">CmpInst::Predicate</a> <a class="code" href="classPredicate.html">Predicate</a>,</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                                     Value *LHS, Value *RHS);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    Expression create_extractvalue_expression(<a class="code" href="classllvm_1_1ExtractValueInst.html">ExtractValueInst</a>* EI);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    uint32_t lookup_or_add_call(<a class="code" href="classllvm_1_1CallInst.html">CallInst</a>* <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="keyword">public</span>:</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    ValueTable() : nextValueNumber(1) { }</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    uint32_t lookup_or_add(Value *V);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    uint32_t <a class="code" href="X86InstrInfo_8cpp.html#a772a541f137327db635e21a1c8a2b7cd">lookup</a>(Value *V) <span class="keyword">const</span>;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    uint32_t lookup_or_add_cmp(<span class="keywordtype">unsigned</span> Opcode, <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">CmpInst::Predicate</a> Pred,</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                               Value *LHS, Value *RHS);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="namespacellvm_1_1ARM__AM.html#a5d0557608eaebed12bc00812724ba2cdae6bcee28992dab735eaa43f5dfa48a09">add</a>(Value *V, uint32_t num);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordtype">void</span> clear();</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordtype">void</span> erase(Value *v);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordtype">void</span> setAliasAnalysis(<a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a>* <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>) { AA = <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>; }</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a> *getAliasAnalysis()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> AA; }</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keywordtype">void</span> setMemDep(<a class="code" href="classllvm_1_1MemoryDependenceAnalysis.html">MemoryDependenceAnalysis</a>* <a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>) { MD = <a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>; }</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordtype">void</span> setDomTree(<a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a>* D) { DT = D; }</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    uint32_t getNextUnusedValueNumber() { <span class="keywordflow">return</span> nextValueNumber; }</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordtype">void</span> verifyRemoved(<span class="keyword">const</span> Value *) <span class="keyword">const</span>;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  };</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;}</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div><div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="structllvm_1_1DenseMapInfo_3_01Expression_01_4.html">  139</a></span>&#160;<span class="keyword">template</span> &lt;&gt; <span class="keyword">struct </span><a class="code" href="structllvm_1_1DenseMapInfo.html">DenseMapInfo</a>&lt;Expression&gt; {</div><div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="structllvm_1_1DenseMapInfo_3_01Expression_01_4.html#a5b3e2878dce330c9f022d23494b46eb0">  140</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">inline</span> Expression <a class="code" href="structllvm_1_1DenseMapInfo_3_01Expression_01_4.html#a5b3e2878dce330c9f022d23494b46eb0">getEmptyKey</a>() {</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">return</span> ~0U;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  }</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div><div class="line"><a name="l00144"></a><span class="lineno"><a class="line" href="structllvm_1_1DenseMapInfo_3_01Expression_01_4.html#a049e7715cd0f850919aa3a283975c17d">  144</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">inline</span> Expression <a class="code" href="structllvm_1_1DenseMapInfo_3_01Expression_01_4.html#a049e7715cd0f850919aa3a283975c17d">getTombstoneKey</a>() {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">return</span> ~1U;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  }</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div><div class="line"><a name="l00148"></a><span class="lineno"><a class="line" href="structllvm_1_1DenseMapInfo_3_01Expression_01_4.html#a8e8f4f897644685e35c606eebf8ed6d2">  148</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="structllvm_1_1DenseMapInfo_3_01Expression_01_4.html#a8e8f4f897644685e35c606eebf8ed6d2">getHashValue</a>(<span class="keyword">const</span> Expression e) {</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keyword">using</span> <a class="code" href="namespacellvm.html#a4dd787942e0bd9f46c0cc2642cce0a4c">llvm::hash_value</a>;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span><span class="keyword">&gt;</span>(<a class="code" href="namespacellvm.html#a4dd787942e0bd9f46c0cc2642cce0a4c">hash_value</a>(e));</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  }</div><div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="structllvm_1_1DenseMapInfo_3_01Expression_01_4.html#a85b6767cce7ece02465f7b9b29d4d78c">  152</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="structllvm_1_1DenseMapInfo_3_01Expression_01_4.html#a85b6767cce7ece02465f7b9b29d4d78c">isEqual</a>(<span class="keyword">const</span> Expression &amp;LHS, <span class="keyword">const</span> Expression &amp;RHS) {</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">return</span> LHS == RHS;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  }</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;};</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;}</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">//                     ValueTable Internal Functions</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;Expression ValueTable::create_expression(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  Expression e;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  e.type = I-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  e.opcode = I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>();</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">Instruction::op_iterator</a> OI = I-&gt;<a class="code" href="classllvm_1_1User.html#a2eeb1c7ed1cfe403f2ae0470e36c07e2">op_begin</a>(), OE = I-&gt;<a class="code" href="classllvm_1_1User.html#af41f58e730804d10b91fcff39b035f74">op_end</a>();</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;       OI != OE; ++OI)</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    e.varargs.push_back(lookup_or_add(*OI));</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="keywordflow">if</span> (I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1c2048f254df730c4de1643ec791ddf9">isCommutative</a>()) {</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="comment">// Ensure that commutative instructions that only differ by a permutation</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="comment">// of their operands get the same value number by sorting the operand value</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="comment">// numbers.  Since all commutative instructions have two operands it is more</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="comment">// efficient to sort by hand rather than using, say, std::sort.</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    assert(I-&gt;<a class="code" href="classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>() == 2 &amp;&amp; <span class="stringliteral">&quot;Unsupported commutative instruction!&quot;</span>);</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">if</span> (e.varargs[0] &gt; e.varargs[1])</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(e.varargs[0], e.varargs[1]);</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  }</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CmpInst.html">CmpInst</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;CmpInst&gt;(I)) {</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="comment">// Sort the operand value numbers so x&lt;y and y&gt;x get the same value number.</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">CmpInst::Predicate</a> <a class="code" href="classPredicate.html">Predicate</a> = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getPredicate();</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">if</span> (e.varargs[0] &gt; e.varargs[1]) {</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(e.varargs[0], e.varargs[1]);</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      Predicate = <a class="code" href="classllvm_1_1CmpInst.html#ab5d3f9900a0284e85ee7a1520a4eeb60">CmpInst::getSwappedPredicate</a>(Predicate);</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    }</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    e.opcode = (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getOpcode() &lt;&lt; 8) | Predicate;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InsertValueInst.html">InsertValueInst</a> *E = dyn_cast&lt;InsertValueInst&gt;(I)) {</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1InsertValueInst.html#a3f7c92fd20f790be6bf2182edd6919a5">InsertValueInst::idx_iterator</a> II = E-&gt;idx_begin(), <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a> = E-&gt;idx_end();</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;         II != <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a>; ++II)</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      e.varargs.push_back(*II);</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  }</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="keywordflow">return</span> e;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;}</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;Expression ValueTable::create_cmp_expression(<span class="keywordtype">unsigned</span> Opcode,</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                                             <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">CmpInst::Predicate</a> <a class="code" href="classPredicate.html">Predicate</a>,</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                                             <a class="code" href="classllvm_1_1Value.html">Value</a> *LHS, <a class="code" href="classllvm_1_1Value.html">Value</a> *RHS) {</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  assert((Opcode == Instruction::ICmp || Opcode == Instruction::FCmp) &amp;&amp;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;         <span class="stringliteral">&quot;Not a comparison!&quot;</span>);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  Expression e;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  e.type = <a class="code" href="classllvm_1_1CmpInst.html#a4b5e1f50cb0890ec60d8c61a61241170">CmpInst::makeCmpResultType</a>(LHS-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  e.varargs.push_back(lookup_or_add(LHS));</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  e.varargs.push_back(lookup_or_add(RHS));</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="comment">// Sort the operand value numbers so x&lt;y and y&gt;x get the same value number.</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="keywordflow">if</span> (e.varargs[0] &gt; e.varargs[1]) {</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(e.varargs[0], e.varargs[1]);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    Predicate = <a class="code" href="classllvm_1_1CmpInst.html#ab5d3f9900a0284e85ee7a1520a4eeb60">CmpInst::getSwappedPredicate</a>(Predicate);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  }</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  e.opcode = (Opcode &lt;&lt; 8) | Predicate;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="keywordflow">return</span> e;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;}</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;Expression ValueTable::create_extractvalue_expression(<a class="code" href="classllvm_1_1ExtractValueInst.html">ExtractValueInst</a> *EI) {</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  assert(EI != 0 &amp;&amp; <span class="stringliteral">&quot;Not an ExtractValueInst?&quot;</span>);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  Expression e;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  e.type = EI-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  e.opcode = 0;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *I = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a>&gt;(EI-&gt;<a class="code" href="classllvm_1_1ExtractValueInst.html#ab87e7c5a729885396b3b045ad375e4b8">getAggregateOperand</a>());</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="keywordflow">if</span> (I != 0 &amp;&amp; EI-&gt;<a class="code" href="classllvm_1_1ExtractValueInst.html#accfb950dd96959bfa9d44451540d088a">getNumIndices</a>() == 1 &amp;&amp; *EI-&gt;<a class="code" href="classllvm_1_1ExtractValueInst.html#a7f9b7f9abcc0d7c98df4c00dc2ae6e7e">idx_begin</a>() == 0 ) {</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="comment">// EI might be an extract from one of our recognised intrinsics. If it</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="comment">// is we&#39;ll synthesize a semantically equivalent expression instead on</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="comment">// an extract value expression.</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">switch</span> (I-&gt;<a class="code" href="classllvm_1_1IntrinsicInst.html#a6cbb4809b81f3994ee0c79b38556bd66">getIntrinsicID</a>()) {</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a137f4ed94704473ee62c0a70084984fc">Intrinsic::sadd_with_overflow</a>:</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a4010b27bb068167801ff99622ea92907">Intrinsic::uadd_with_overflow</a>:</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        e.opcode = Instruction::Add;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a1558c7c51d5102374564fd690d19df99">Intrinsic::ssub_with_overflow</a>:</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90acd74a673807c129d89e2456d8d2e566d">Intrinsic::usub_with_overflow</a>:</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        e.opcode = Instruction::Sub;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a534c8dc56785061e35fb476480d11a3d">Intrinsic::smul_with_overflow</a>:</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a95107a51be6c979110631a4c9145d6e0">Intrinsic::umul_with_overflow</a>:</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        e.opcode = Instruction::Mul;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    }</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">if</span> (e.opcode != 0) {</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      <span class="comment">// Intrinsic recognized. Grab its args to finish building the expression.</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      assert(I-&gt;<a class="code" href="classllvm_1_1CallInst.html#ac88b95273e6c753188f6a54d65548579">getNumArgOperands</a>() == 2 &amp;&amp;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;             <span class="stringliteral">&quot;Expect two args for recognised intrinsics.&quot;</span>);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      e.varargs.push_back(lookup_or_add(I-&gt;<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(0)));</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      e.varargs.push_back(lookup_or_add(I-&gt;<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(1)));</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      <span class="keywordflow">return</span> e;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    }</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  }</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="comment">// Not a recognised intrinsic. Fall back to producing an extract value</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="comment">// expression.</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  e.opcode = EI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>();</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">Instruction::op_iterator</a> OI = EI-&gt;<a class="code" href="classllvm_1_1User.html#a2eeb1c7ed1cfe403f2ae0470e36c07e2">op_begin</a>(), OE = EI-&gt;<a class="code" href="classllvm_1_1User.html#af41f58e730804d10b91fcff39b035f74">op_end</a>();</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;       OI != OE; ++OI)</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    e.varargs.push_back(lookup_or_add(*OI));</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ExtractValueInst.html#a4fe735fcf509b757252e91d53498708a">ExtractValueInst::idx_iterator</a> II = EI-&gt;<a class="code" href="classllvm_1_1ExtractValueInst.html#a7f9b7f9abcc0d7c98df4c00dc2ae6e7e">idx_begin</a>(), <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a> = EI-&gt;<a class="code" href="classllvm_1_1ExtractValueInst.html#ab6aac2fda018dd26fa4cb43b8b15846f">idx_end</a>();</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;         II != <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a>; ++II)</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    e.varargs.push_back(*II);</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <span class="keywordflow">return</span> e;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;}</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment">//                     ValueTable External Functions</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">/// add - Insert a value into the table with a specified value number.</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="namespacellvm_1_1ARM__AM.html#a5d0557608eaebed12bc00812724ba2cdae6bcee28992dab735eaa43f5dfa48a09">ValueTable::add</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, uint32_t num) {</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  valueNumbering.insert(std::make_pair(V, num));</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;}</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;uint32_t ValueTable::lookup_or_add_call(<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="keywordflow">if</span> (AA-&gt;doesNotAccessMemory(C)) {</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    Expression <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aa3d4911fd70a787382c691646d119ff4">exp</a> = create_expression(C);</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    uint32_t &amp;e = expressionNumbering[<a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aa3d4911fd70a787382c691646d119ff4">exp</a>];</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordflow">if</span> (!e) e = nextValueNumber++;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    valueNumbering[<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>] = e;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordflow">return</span> e;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (AA-&gt;onlyReadsMemory(C)) {</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    Expression <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aa3d4911fd70a787382c691646d119ff4">exp</a> = create_expression(C);</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    uint32_t &amp;e = expressionNumbering[<a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aa3d4911fd70a787382c691646d119ff4">exp</a>];</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordflow">if</span> (!e) {</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      e = nextValueNumber++;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      valueNumbering[<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>] = e;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      <span class="keywordflow">return</span> e;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    }</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordflow">if</span> (!MD) {</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      e = nextValueNumber++;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      valueNumbering[<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>] = e;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      <span class="keywordflow">return</span> e;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    }</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <a class="code" href="classllvm_1_1MemDepResult.html">MemDepResult</a> local_dep = MD-&gt;getDependency(C);</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keywordflow">if</span> (!local_dep.<a class="code" href="classllvm_1_1MemDepResult.html#aa6d7a9e81b4749376498640463eb5dc2">isDef</a>() &amp;&amp; !local_dep.<a class="code" href="classllvm_1_1MemDepResult.html#a2a64d8f5153ebc0e8c08d0702c2c4aab">isNonLocal</a>()) {</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      valueNumbering[<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>] =  nextValueNumber;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      <span class="keywordflow">return</span> nextValueNumber++;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    }</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordflow">if</span> (local_dep.<a class="code" href="classllvm_1_1MemDepResult.html#aa6d7a9e81b4749376498640463eb5dc2">isDef</a>()) {</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      <a class="code" href="classllvm_1_1CallInst.html">CallInst</a>* local_cdep = cast&lt;CallInst&gt;(local_dep.<a class="code" href="classllvm_1_1MemDepResult.html#a8452eb6508c00e2b6d56926bebc79f57">getInst</a>());</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      <span class="keywordflow">if</span> (local_cdep-&gt;<a class="code" href="classllvm_1_1CallInst.html#ac88b95273e6c753188f6a54d65548579">getNumArgOperands</a>() != C-&gt;<a class="code" href="classllvm_1_1CallInst.html#ac88b95273e6c753188f6a54d65548579">getNumArgOperands</a>()) {</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        valueNumbering[<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>] = nextValueNumber;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <span class="keywordflow">return</span> nextValueNumber++;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      }</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = C-&gt;<a class="code" href="classllvm_1_1CallInst.html#ac88b95273e6c753188f6a54d65548579">getNumArgOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        uint32_t c_vn = lookup_or_add(C-&gt;<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        uint32_t cd_vn = lookup_or_add(local_cdep-&gt;<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <span class="keywordflow">if</span> (c_vn != cd_vn) {</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;          valueNumbering[<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>] = nextValueNumber;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;          <span class="keywordflow">return</span> nextValueNumber++;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        }</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      }</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      uint32_t v = lookup_or_add(local_cdep);</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      valueNumbering[<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>] = v;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      <span class="keywordflow">return</span> v;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    }</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="comment">// Non-local case.</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryDependenceAnalysis.html#af98ef3ed6d09824e50ec69cebc839609">MemoryDependenceAnalysis::NonLocalDepInfo</a> &amp;deps =</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      MD-&gt;getNonLocalCallDependency(<a class="code" href="classllvm_1_1CallSite.html">CallSite</a>(C));</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="comment">// FIXME: Move the checking logic to MemDep!</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html">CallInst</a>* cdep = 0;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="comment">// Check to see if we have a single dominating call instruction that is</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="comment">// identical to C.</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = deps.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1NonLocalDepEntry.html">NonLocalDepEntry</a> *I = &amp;deps[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      <span class="keywordflow">if</span> (I-&gt;<a class="code" href="classllvm_1_1NonLocalDepEntry.html#abd0c15cf35f0f3bfd2e092c55d5e6069">getResult</a>().<a class="code" href="classllvm_1_1MemDepResult.html#a2a64d8f5153ebc0e8c08d0702c2c4aab">isNonLocal</a>())</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      <span class="comment">// We don&#39;t handle non-definitions.  If we already have a call, reject</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      <span class="comment">// instruction dependencies.</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      <span class="keywordflow">if</span> (!I-&gt;<a class="code" href="classllvm_1_1NonLocalDepEntry.html#abd0c15cf35f0f3bfd2e092c55d5e6069">getResult</a>().<a class="code" href="classllvm_1_1MemDepResult.html#aa6d7a9e81b4749376498640463eb5dc2">isDef</a>() || cdep != 0) {</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        cdep = 0;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      }</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *NonLocalDepCall = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1CallInst.html">CallInst</a>&gt;(I-&gt;<a class="code" href="classllvm_1_1NonLocalDepEntry.html#abd0c15cf35f0f3bfd2e092c55d5e6069">getResult</a>().<a class="code" href="classllvm_1_1MemDepResult.html#a8452eb6508c00e2b6d56926bebc79f57">getInst</a>());</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      <span class="comment">// FIXME: All duplicated with non-local case.</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      <span class="keywordflow">if</span> (NonLocalDepCall &amp;&amp; DT-&gt;properlyDominates(I-&gt;<a class="code" href="classllvm_1_1NonLocalDepEntry.html#a9484eee2611393c9db4e3ca858455221">getBB</a>(), C-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>())){</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        cdep = NonLocalDepCall;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      }</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      cdep = 0;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    }</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordflow">if</span> (!cdep) {</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      valueNumbering[<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>] = nextValueNumber;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      <span class="keywordflow">return</span> nextValueNumber++;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    }</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordflow">if</span> (cdep-&gt;<a class="code" href="classllvm_1_1CallInst.html#ac88b95273e6c753188f6a54d65548579">getNumArgOperands</a>() != C-&gt;<a class="code" href="classllvm_1_1CallInst.html#ac88b95273e6c753188f6a54d65548579">getNumArgOperands</a>()) {</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      valueNumbering[<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>] = nextValueNumber;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      <span class="keywordflow">return</span> nextValueNumber++;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    }</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = C-&gt;<a class="code" href="classllvm_1_1CallInst.html#ac88b95273e6c753188f6a54d65548579">getNumArgOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      uint32_t c_vn = lookup_or_add(C-&gt;<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      uint32_t cd_vn = lookup_or_add(cdep-&gt;<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      <span class="keywordflow">if</span> (c_vn != cd_vn) {</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        valueNumbering[<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>] = nextValueNumber;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <span class="keywordflow">return</span> nextValueNumber++;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      }</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    }</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    uint32_t v = lookup_or_add(cdep);</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    valueNumbering[<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>] = v;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordflow">return</span> v;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    valueNumbering[<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>] = nextValueNumber;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keywordflow">return</span> nextValueNumber++;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  }</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;}</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment">/// lookup_or_add - Returns the value number for the specified value, assigning</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment">/// it a new number if it did not have one before.</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment"></span>uint32_t ValueTable::lookup_or_add(<a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <a class="code" href="classllvm_1_1DenseMapIterator.html">DenseMap&lt;Value*, uint32_t&gt;::iterator</a> VI = valueNumbering.find(V);</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="keywordflow">if</span> (VI != valueNumbering.end())</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keywordflow">return</span> VI-&gt;second;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <a class="code" href="LLParser_8cpp.html#aae58e3df0180401e8f3ab75c18fbc07a">if</a> (!isa&lt;Instruction&gt;(V)) {</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    valueNumbering[V] = nextValueNumber;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordflow">return</span> nextValueNumber++;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  }</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a>* I = cast&lt;Instruction&gt;(V);</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  Expression <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aa3d4911fd70a787382c691646d119ff4">exp</a>;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="keywordflow">switch</span> (I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>()) {</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#af6d6a791770bad2303c4399986979e3eae411369b2f0d8f484fec62c3291b1b51">Instruction::Call</a>:</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;      <span class="keywordflow">return</span> lookup_or_add_call(cast&lt;CallInst&gt;(I));</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keywordflow">case</span> Instruction::Add:</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordflow">case</span> Instruction::FAdd:</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordflow">case</span> Instruction::Sub:</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordflow">case</span> Instruction::FSub:</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordflow">case</span> Instruction::Mul:</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="keywordflow">case</span> Instruction::FMul:</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordflow">case</span> Instruction::UDiv:</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="keywordflow">case</span> Instruction::SDiv:</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="keywordflow">case</span> Instruction::FDiv:</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="keywordflow">case</span> Instruction::URem:</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">case</span> Instruction::SRem:</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordflow">case</span> Instruction::FRem:</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordflow">case</span> Instruction::Shl:</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="keywordflow">case</span> Instruction::LShr:</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">case</span> Instruction::AShr:</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">Instruction::And</a>:</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">Instruction::Or</a>:</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1APIntOps.html#afc7c4d88d09cba0c5e920f8a3a3ace55">Instruction::Xor</a>:</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="keywordflow">case</span> Instruction::ICmp:</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordflow">case</span> Instruction::FCmp:</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="keywordflow">case</span> Instruction::Trunc:</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordflow">case</span> Instruction::ZExt:</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keywordflow">case</span> Instruction::SExt:</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keywordflow">case</span> Instruction::FPToUI:</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordflow">case</span> Instruction::FPToSI:</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keywordflow">case</span> Instruction::UIToFP:</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordflow">case</span> Instruction::SIToFP:</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="keywordflow">case</span> Instruction::FPTrunc:</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keywordflow">case</span> Instruction::FPExt:</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="keywordflow">case</span> Instruction::PtrToInt:</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordflow">case</span> Instruction::IntToPtr:</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keywordflow">case</span> Instruction::BitCast:</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1MCID.html#a8035044d40d3758eb45b65dce69dc90ba32dbd2c72a98eaee90e3ad5ef7b5af16">Instruction::Select</a>:</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="InstCombineCompares_8cpp.html#aa5ab8c7b55d8bc7cab66be444daa70a1">Instruction::ExtractElement</a>:</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="keywordflow">case</span> Instruction::InsertElement:</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="keywordflow">case</span> Instruction::ShuffleVector:</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keywordflow">case</span> Instruction::InsertValue:</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keywordflow">case</span> Instruction::GetElementPtr:</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;      exp = create_expression(I);</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="keywordflow">case</span> Instruction::ExtractValue:</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;      exp = create_extractvalue_expression(cast&lt;ExtractValueInst&gt;(I));</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      valueNumbering[V] = nextValueNumber;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      <span class="keywordflow">return</span> nextValueNumber++;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  }</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  uint32_t&amp; e = expressionNumbering[<a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aa3d4911fd70a787382c691646d119ff4">exp</a>];</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <span class="keywordflow">if</span> (!e) e = nextValueNumber++;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  valueNumbering[V] = e;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <span class="keywordflow">return</span> e;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;}</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="comment">/// lookup - Returns the value number of the specified value. Fails if</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="comment">/// the value has not yet been numbered.</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="comment"></span>uint32_t <a class="code" href="X86InstrInfo_8cpp.html#a772a541f137327db635e21a1c8a2b7cd">ValueTable::lookup</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V)<span class="keyword"> const </span>{</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <a class="code" href="classllvm_1_1DenseMapIterator.html">DenseMap&lt;Value*, uint32_t&gt;::const_iterator</a> VI = valueNumbering.find(V);</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  assert(VI != valueNumbering.end() &amp;&amp; <span class="stringliteral">&quot;Value not numbered?&quot;</span>);</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  <span class="keywordflow">return</span> VI-&gt;second;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;}</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment">/// lookup_or_add_cmp - Returns the value number of the given comparison,</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment">/// assigning it a new number if it did not have one before.  Useful when</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment">/// we deduced the result of a comparison, but don&#39;t immediately have an</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment">/// instruction realizing that comparison to hand.</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment"></span>uint32_t ValueTable::lookup_or_add_cmp(<span class="keywordtype">unsigned</span> Opcode,</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                                       <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">CmpInst::Predicate</a> Predicate,</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                                       <a class="code" href="classllvm_1_1Value.html">Value</a> *LHS, <a class="code" href="classllvm_1_1Value.html">Value</a> *RHS) {</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  Expression <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aa3d4911fd70a787382c691646d119ff4">exp</a> = create_cmp_expression(Opcode, Predicate, LHS, RHS);</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  uint32_t&amp; e = expressionNumbering[<a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aa3d4911fd70a787382c691646d119ff4">exp</a>];</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <span class="keywordflow">if</span> (!e) e = nextValueNumber++;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <span class="keywordflow">return</span> e;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;}</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment">/// clear - Remove all entries from the ValueTable.</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> ValueTable::clear() {</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  valueNumbering.clear();</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  expressionNumbering.clear();</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  nextValueNumber = 1;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;}</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment">/// erase - Remove a value from the value numbering.</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> ValueTable::erase(<a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  valueNumbering.erase(V);</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;}</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment">/// verifyRemoved - Verify that the value is removed from all internal data</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="comment">/// structures.</span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> ValueTable::verifyRemoved(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *V)<span class="keyword"> const </span>{</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DenseMapIterator.html">DenseMap&lt;Value*, uint32_t&gt;::const_iterator</a></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;         I = valueNumbering.begin(), E = valueNumbering.end(); I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    assert(I-&gt;first != V &amp;&amp; <span class="stringliteral">&quot;Inst still occurs in value numbering map!&quot;</span>);</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  }</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;}</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="comment">//                                GVN Pass</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <span class="keyword">class </span>GVN;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  <span class="keyword">struct </span>AvailableValueInBlock {<span class="comment"></span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment">    /// BB - The basic block in question.</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment"></span>    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keyword">enum</span> ValType {</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      SimpleVal,  <span class="comment">// A simple offsetted value that is accessed.</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      LoadVal,    <span class="comment">// A value produced by a load.</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;      MemIntrin,  <span class="comment">// A memory intrinsic which is loaded from.</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;      UndefVal    <span class="comment">// A UndefValue representing a value from dead block (which</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                  <span class="comment">// is not yet physically removed from the CFG). </span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    };</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <span class="comment"></span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="comment">    /// V - The value that is live out of the block.</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="comment"></span>    <a class="code" href="classllvm_1_1PointerIntPair.html">PointerIntPair&lt;Value *, 2, ValType&gt;</a> Val;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <span class="comment"></span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment">    /// Offset - The byte offset in Val that is interesting for the load query.</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment"></span>    <span class="keywordtype">unsigned</span> Offset;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  </div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <span class="keyword">static</span> AvailableValueInBlock <span class="keyword">get</span>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *V,</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                                     <span class="keywordtype">unsigned</span> Offset = 0) {</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      AvailableValueInBlock Res;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;      Res.BB = <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      Res.Val.setPointer(V);</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      Res.Val.setInt(SimpleVal);</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      Res.Offset = Offset;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      <span class="keywordflow">return</span> Res;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    }</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  </div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keyword">static</span> AvailableValueInBlock getMI(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB, <a class="code" href="classllvm_1_1MemIntrinsic.html">MemIntrinsic</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>,</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                                       <span class="keywordtype">unsigned</span> Offset = 0) {</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;      AvailableValueInBlock Res;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;      Res.BB = <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;      Res.Val.setPointer(MI);</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      Res.Val.setInt(MemIntrin);</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      Res.Offset = Offset;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      <span class="keywordflow">return</span> Res;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    }</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  </div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keyword">static</span> AvailableValueInBlock getLoad(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB, <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI,</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                                         <span class="keywordtype">unsigned</span> Offset = 0) {</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;      AvailableValueInBlock Res;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      Res.BB = <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      Res.Val.setPointer(LI);</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;      Res.Val.setInt(LoadVal);</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;      Res.Offset = Offset;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;      <span class="keywordflow">return</span> Res;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    }</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="keyword">static</span> AvailableValueInBlock getUndef(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB) {</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      AvailableValueInBlock Res;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      Res.BB = <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      Res.Val.setPointer(0);</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      Res.Val.setInt(UndefVal);</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      Res.Offset = 0;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      <span class="keywordflow">return</span> Res;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    }</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <span class="keywordtype">bool</span> isSimpleValue()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> Val.<a class="code" href="classllvm_1_1PointerIntPair.html#ae8f9fce2cb409f89c47535165f214a23">getInt</a>() == SimpleVal; }</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordtype">bool</span> isCoercedLoadValue()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> Val.<a class="code" href="classllvm_1_1PointerIntPair.html#ae8f9fce2cb409f89c47535165f214a23">getInt</a>() == LoadVal; }</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="keywordtype">bool</span> isMemIntrinValue()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> Val.<a class="code" href="classllvm_1_1PointerIntPair.html#ae8f9fce2cb409f89c47535165f214a23">getInt</a>() == MemIntrin; }</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keywordtype">bool</span> isUndefValue()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> Val.<a class="code" href="classllvm_1_1PointerIntPair.html#ae8f9fce2cb409f89c47535165f214a23">getInt</a>() == UndefVal; }</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  </div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *getSimpleValue()<span class="keyword"> const </span>{</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      assert(isSimpleValue() &amp;&amp; <span class="stringliteral">&quot;Wrong accessor&quot;</span>);</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      <span class="keywordflow">return</span> Val.<a class="code" href="classllvm_1_1PointerIntPair.html#a2aafa035d16eddeaadc40efbf8c721e5">getPointer</a>();</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    }</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  </div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *getCoercedLoadValue()<span class="keyword"> const </span>{</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      assert(isCoercedLoadValue() &amp;&amp; <span class="stringliteral">&quot;Wrong accessor&quot;</span>);</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;      <span class="keywordflow">return</span> cast&lt;LoadInst&gt;(Val.<a class="code" href="classllvm_1_1PointerIntPair.html#a2aafa035d16eddeaadc40efbf8c721e5">getPointer</a>());</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    }</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  </div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <a class="code" href="classllvm_1_1MemIntrinsic.html">MemIntrinsic</a> *getMemIntrinValue()<span class="keyword"> const </span>{</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      assert(isMemIntrinValue() &amp;&amp; <span class="stringliteral">&quot;Wrong accessor&quot;</span>);</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      <span class="keywordflow">return</span> cast&lt;MemIntrinsic&gt;(Val.<a class="code" href="classllvm_1_1PointerIntPair.html#a2aafa035d16eddeaadc40efbf8c721e5">getPointer</a>());</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    }</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  <span class="comment"></span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="comment">    /// MaterializeAdjustedValue - Emit code into this block to adjust the value</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="comment">    /// defined here to the specified type.  This handles various coercion cases.</span></div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="comment"></span>    <a class="code" href="classllvm_1_1Value.html">Value</a> *MaterializeAdjustedValue(<a class="code" href="classllvm_1_1Type.html">Type</a> *LoadTy, GVN &amp;gvn) <span class="keyword">const</span>;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  };</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  <span class="keyword">class </span>GVN : <span class="keyword">public</span> <a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a> {</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordtype">bool</span> NoLoads;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <a class="code" href="classllvm_1_1MemoryDependenceAnalysis.html">MemoryDependenceAnalysis</a> *MD;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> *TD;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <a class="code" href="classllvm_1_1SetVector.html">SetVector&lt;BasicBlock *&gt;</a> DeadBlocks;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    ValueTable VN;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="comment">    /// LeaderTable - A mapping from value numbers to lists of Value*&#39;s that</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="comment">    /// have that value number.  Use findLeader to query it.</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="comment"></span>    <span class="keyword">struct </span>LeaderTableEntry {</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Val;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;      LeaderTableEntry *Next;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    };</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;uint32_t, LeaderTableEntry&gt;</a> LeaderTable;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <a class="code" href="classllvm_1_1BumpPtrAllocator.html">BumpPtrAllocator</a> TableAllocator;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction*, 8&gt;</a> InstrsToErase;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="keyword">typedef</span> <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;NonLocalDepResult, 64&gt;</a> LoadDepVect;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <span class="keyword">typedef</span> <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;AvailableValueInBlock, 64&gt;</a> AvailValInBlkVect;</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="keyword">typedef</span> <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock*, 64&gt;</a> UnavailBlkVect;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <span class="keyword">public</span>:</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>; <span class="comment">// Pass identification, replacement for typeid</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="keyword">explicit</span> GVN(<span class="keywordtype">bool</span> noloads = <span class="keyword">false</span>)</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        : <a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a>(ID), NoLoads(noloads), MD(0) {</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;      <a class="code" href="namespacellvm.html#a5805d700b433574a9fe43c9837f7e84d">initializeGVNPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    }</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="keywordtype">bool</span> runOnFunction(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>);</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="comment">    /// markInstructionForDeletion - This removes the specified instruction from</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<span class="comment">    /// our various maps and marks it for deletion.</span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> markInstructionForDeletion(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I) {</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;      VN.erase(I);</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;      InstrsToErase.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(I);</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    }</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> *getDataLayout()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> TD; }</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;getDominatorTree()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> *DT; }</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a> *getAliasAnalysis()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> VN.getAliasAnalysis(); }</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <a class="code" href="classllvm_1_1MemoryDependenceAnalysis.html">MemoryDependenceAnalysis</a> &amp;getMemDep()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> *MD; }</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  <span class="keyword">private</span>:<span class="comment"></span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="comment">    /// addToLeaderTable - Push a new Value to the LeaderTable onto the list for</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="comment">    /// its value number.</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> addToLeaderTable(uint32_t <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *V, <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;      LeaderTableEntry &amp;Curr = LeaderTable[<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>];</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;      <span class="keywordflow">if</span> (!Curr.Val) {</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        Curr.Val = V;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        Curr.BB = <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;      }</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;      LeaderTableEntry *Node = TableAllocator.<a class="code" href="classllvm_1_1BumpPtrAllocator.html#a77df739db3a1603903dfa595e214a84b">Allocate</a>&lt;LeaderTableEntry&gt;();</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;      Node-&gt;Val = V;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;      Node-&gt;BB = <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;      Node-&gt;Next = Curr.Next;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;      Curr.Next = Node;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    }</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="comment">    /// removeFromLeaderTable - Scan the list of values corresponding to a given</span></div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="comment">    /// value number, and remove the given instruction if encountered.</span></div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> removeFromLeaderTable(uint32_t N, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB) {</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;      LeaderTableEntry* Prev = 0;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;      LeaderTableEntry* Curr = &amp;LeaderTable[<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>];</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;      <span class="keywordflow">while</span> (Curr-&gt;Val != I || Curr-&gt;BB != BB) {</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        Prev = Curr;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        Curr = Curr-&gt;Next;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;      }</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      <span class="keywordflow">if</span> (Prev) {</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        Prev-&gt;Next = Curr-&gt;Next;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        <span class="keywordflow">if</span> (!Curr-&gt;Next) {</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;          Curr-&gt;Val = 0;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;          Curr-&gt;BB = 0;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;          LeaderTableEntry* Next = Curr-&gt;Next;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;          Curr-&gt;Val = Next-&gt;Val;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;          Curr-&gt;BB = Next-&gt;BB;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;          Curr-&gt;Next = Next-&gt;Next;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;        }</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;      }</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    }</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <span class="comment">// List of critical edges to be split between iterations.</span></div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;TerminatorInst*, unsigned&gt;</a>, 4&gt; toSplit;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="comment">// This transformation requires dominator postdominator info</span></div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const </span>{</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a>&gt;();</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a>&gt;();</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;      <span class="keywordflow">if</span> (!NoLoads)</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1MemoryDependenceAnalysis.html">MemoryDependenceAnalysis</a>&gt;();</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a>&gt;();</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a>&gt;();</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a>&gt;();</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    }</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="comment">// Helper fuctions of redundant load elimination </span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="keywordtype">bool</span> processLoad(<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *L);</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="keywordtype">bool</span> processNonLocalLoad(<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *L);</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <span class="keywordtype">void</span> AnalyzeLoadAvailability(<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI, LoadDepVect &amp;Deps, </div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                                 AvailValInBlkVect &amp;ValuesPerBlock,</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                                 UnavailBlkVect &amp;UnavailableBlocks);</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    <span class="keywordtype">bool</span> PerformLoadPRE(<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI, AvailValInBlkVect &amp;ValuesPerBlock, </div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                        UnavailBlkVect &amp;UnavailableBlocks);</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <span class="comment">// Other helper routines</span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="keywordtype">bool</span> processInstruction(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I);</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="keywordtype">bool</span> processBlock(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB);</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#a03503773241005f01b090b9862aad304">dump</a>(<a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;uint32_t, Value*&gt;</a> &amp;<a class="code" href="Target_2ARM_2README_8txt.html#a901ce7389ca67dd79b8ab5b53c4a7da8">d</a>);</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <span class="keywordtype">bool</span> iterateOnFunction(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;F);</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <span class="keywordtype">bool</span> performPRE(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;F);</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *findLeader(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB, uint32_t num);</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <span class="keywordtype">void</span> cleanupGlobalSets();</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <span class="keywordtype">void</span> verifyRemoved(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I) <span class="keyword">const</span>;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <span class="keywordtype">bool</span> splitCriticalEdges();</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *splitCriticalEdges(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Succ);</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <span class="keywordtype">unsigned</span> replaceAllDominatedUsesWith(<a class="code" href="classllvm_1_1Value.html">Value</a> *From, <a class="code" href="classllvm_1_1Value.html">Value</a> *To,</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                                         <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlockEdge.html">BasicBlockEdge</a> &amp;Root);</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="keywordtype">bool</span> propagateEquality(<a class="code" href="classllvm_1_1Value.html">Value</a> *LHS, <a class="code" href="classllvm_1_1Value.html">Value</a> *RHS, <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlockEdge.html">BasicBlockEdge</a> &amp;Root);</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <span class="keywordtype">bool</span> processFoldableCondBr(<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI);</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <span class="keywordtype">void</span> addDeadBlock(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB);</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="keywordtype">void</span> assignValNumForDeadCode();</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  };</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">GVN::ID</a> = 0;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;}</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="comment">// createGVNPass - The public interface to this file...</span></div><div class="line"><a name="l00724"></a><span class="lineno"><a class="line" href="namespacellvm.html#addab2512c302d9436450bd665b56fe72">  724</a></span>&#160;<a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a> *<a class="code" href="namespacellvm.html#addab2512c302d9436450bd665b56fe72">llvm::createGVNPass</a>(<span class="keywordtype">bool</span> NoLoads) {</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> GVN(NoLoads);</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;}</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;<a class="code" href="PassSupport_8h.html#aaa970fc931c1c63037a8182e028d04b1">INITIALIZE_PASS_BEGIN</a>(GVN, <span class="stringliteral">&quot;gvn&quot;</span>, <span class="stringliteral">&quot;Global Value Numbering&quot;</span>, <span class="keyword">false</span>, <span class="keyword">false</span>)</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1MemoryDependenceAnalysis.html">MemoryDependenceAnalysis</a>)</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a>)</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a>)</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<a class="code" href="PassSupport_8h.html#af0564bcdde2dd4400c670ca278c6035f">INITIALIZE_AG_DEPENDENCY</a>(<a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a>)</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;<a class="code" href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a>(GVN, <span class="stringliteral">&quot;gvn&quot;</span>, <span class="stringliteral">&quot;Global Value Numbering&quot;</span>, <span class="keyword">false</span>, <span class="keyword">false</span>)</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;<span class="preprocessor">#if !defined(NDEBUG) || defined(LLVM_ENABLE_DUMP)</span></div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#a03503773241005f01b090b9862aad304">GVN::dump</a>(<a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;uint32_t, Value*&gt;</a>&amp; <a class="code" href="Target_2ARM_2README_8txt.html#a901ce7389ca67dd79b8ab5b53c4a7da8">d</a>) {</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  <a class="code" href="namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">errs</a>() &lt;&lt; <span class="stringliteral">&quot;{\n&quot;</span>;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DenseMapIterator.html">DenseMap&lt;uint32_t, Value*&gt;::iterator</a> I = d.<a class="code" href="classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">begin</a>(),</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;       E = d.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>(); I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;      <a class="code" href="namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">errs</a>() &lt;&lt; I-&gt;first &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;      I-&gt;second-&gt;<a class="code" href="classllvm_1_1Value.html#a1933ce346f4cbadcc151cea432c2b316">dump</a>();</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  }</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  <a class="code" href="namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">errs</a>() &lt;&lt; <span class="stringliteral">&quot;}\n&quot;</span>;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;}</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="comment">/// IsValueFullyAvailableInBlock - Return true if we can prove that the value</span></div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="comment">/// we&#39;re analyzing is fully available in the specified block.  As we go, keep</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="comment">/// track of which blocks we know are fully alive in FullyAvailableBlocks.  This</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="comment">/// map is actually a tri-state map with the following values:</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment">///   0) we know the block *is not* fully available.</span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment">///   1) we know the block *is* fully available.</span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment">///   2) we do not know whether the block is fully available or not, but we are</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="comment">///      currently speculating that it will be.</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="comment">///   3) we are speculating for this block and have used that to speculate for</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="comment">///      other blocks.</span></div><div class="line"><a name="l00757"></a><span class="lineno"><a class="line" href="GVN_8cpp.html#a0f8c728bc2ed20849bdc6b61d85f4bb2">  757</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="GVN_8cpp.html#a0f8c728bc2ed20849bdc6b61d85f4bb2">IsValueFullyAvailableInBlock</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;                            <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;BasicBlock*, char&gt;</a> &amp;FullyAvailableBlocks,</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;                            uint32_t RecurseDepth) {</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  <span class="keywordflow">if</span> (RecurseDepth &gt; <a class="code" href="GVN_8cpp.html#ad0d196a9b22e43ebe2fe1bc471cefa45">MaxRecurseDepth</a>)</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  <span class="comment">// Optimistically assume that the block is fully available and check to see</span></div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  <span class="comment">// if we already know about this block in one lookup.</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  std::pair&lt;DenseMap&lt;BasicBlock*, char&gt;::iterator, <span class="keywordtype">char</span>&gt; IV =</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    FullyAvailableBlocks.<a class="code" href="classllvm_1_1DenseMapBase.html#a699a66e504b48fdeff124e82f6c61917">insert</a>(std::make_pair(BB, 2));</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;  <span class="comment">// If the entry already existed for this block, return the precomputed value.</span></div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  <span class="keywordflow">if</span> (!IV.second) {</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <span class="comment">// If this is a speculative &quot;available&quot; value, mark it as being used for</span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="comment">// speculation of other blocks.</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <span class="keywordflow">if</span> (IV.first-&gt;second == 2)</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;      IV.first-&gt;second = 3;</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    <span class="keywordflow">return</span> IV.first-&gt;second != 0;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;  }</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  <span class="comment">// Otherwise, see if it is fully available in all predecessors.</span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  <a class="code" href="classllvm_1_1PredIterator.html">pred_iterator</a> PI = <a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(BB), PE = <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(BB);</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  <span class="comment">// If this block has no predecessors, it isn&#39;t live-in here.</span></div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  <span class="keywordflow">if</span> (PI == PE)</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    <span class="keywordflow">goto</span> SpeculationFailure;</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <span class="keywordflow">for</span> (; PI != PE; ++PI)</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="comment">// If the value isn&#39;t fully available in one of our predecessors, then it</span></div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <span class="comment">// isn&#39;t fully available in this block either.  Undo our previous</span></div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <span class="comment">// optimistic assumption and bail out.</span></div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="GVN_8cpp.html#a0f8c728bc2ed20849bdc6b61d85f4bb2">IsValueFullyAvailableInBlock</a>(*PI, FullyAvailableBlocks,RecurseDepth+1))</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;      <span class="keywordflow">goto</span> SpeculationFailure;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="comment">// SpeculationFailure - If we get here, we found out that this is not, after</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="comment">// all, a fully-available block.  We have a problem if we speculated on this and</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="comment">// used the speculation to mark other blocks as available.</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;SpeculationFailure:</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  <span class="keywordtype">char</span> &amp;BBVal = FullyAvailableBlocks[<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>];</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  <span class="comment">// If we didn&#39;t speculate on this, just return with it set to false.</span></div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  <span class="keywordflow">if</span> (BBVal == 2) {</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    BBVal = 0;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;  }</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;  <span class="comment">// If we did speculate on this value, we could have blocks set to 1 that are</span></div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  <span class="comment">// incorrect.  Walk the (transitive) successors of this block and mark them as</span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  <span class="comment">// 0 if set to one.</span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock*, 32&gt;</a> BBWorklist;</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  BBWorklist.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(BB);</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  <span class="keywordflow">do</span> {</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Entry = BBWorklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">pop_back_val</a>();</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <span class="comment">// Note that this sets blocks to 0 (unavailable) if they happen to not</span></div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <span class="comment">// already be in FullyAvailableBlocks.  This is safe.</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <span class="keywordtype">char</span> &amp;EntryVal = FullyAvailableBlocks[Entry];</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    <span class="keywordflow">if</span> (EntryVal == 0) <span class="keywordflow">continue</span>;  <span class="comment">// Already unavailable.</span></div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <span class="comment">// Mark as unavailable.</span></div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    EntryVal = 0;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SuccIterator.html">succ_iterator</a> I = <a class="code" href="namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">succ_begin</a>(Entry), E = <a class="code" href="namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">succ_end</a>(Entry); I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;      BBWorklist.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(*I);</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  } <span class="keywordflow">while</span> (!BBWorklist.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>());</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;}</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;<span class="comment">/// CanCoerceMustAliasedValueToLoad - Return true if</span></div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;<span class="comment">/// CoerceAvailableValueToLoadType will succeed.</span></div><div class="line"><a name="l00831"></a><span class="lineno"><a class="line" href="GVN_8cpp.html#a3455164f36b257abea8311bb9db5b2b1">  831</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="GVN_8cpp.html#a3455164f36b257abea8311bb9db5b2b1">CanCoerceMustAliasedValueToLoad</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *StoredVal,</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;                                            <a class="code" href="classllvm_1_1Type.html">Type</a> *LoadTy,</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                                            <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;TD) {</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;  <span class="comment">// If the loaded or stored value is an first class array or struct, don&#39;t try</span></div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  <span class="comment">// to transform them.  We need to be able to bitcast to integer.</span></div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  <span class="keywordflow">if</span> (LoadTy-&gt;<a class="code" href="classllvm_1_1Type.html#aed87738661d539150b3fc4bb46e36aa3">isStructTy</a>() || LoadTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9aae7c60b468bcf6db982dc76e6c703a">isArrayTy</a>() ||</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;      StoredVal-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#aed87738661d539150b3fc4bb46e36aa3">isStructTy</a>() ||</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;      StoredVal-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9aae7c60b468bcf6db982dc76e6c703a">isArrayTy</a>())</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  <span class="comment">// The store has to be at least as big as the load.</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  <span class="keywordflow">if</span> (TD.<a class="code" href="classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">getTypeSizeInBits</a>(StoredVal-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()) &lt;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        TD.<a class="code" href="classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">getTypeSizeInBits</a>(LoadTy))</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;}</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="comment">/// CoerceAvailableValueToLoadType - If we saw a store of a value to memory, and</span></div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="comment">/// then a load from a must-aliased pointer of a different type, try to coerce</span></div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;<span class="comment">/// the stored value.  LoadedTy is the type of the load we want to replace and</span></div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;<span class="comment">/// InsertPt is the place to insert new instructions.</span></div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;<span class="comment">/// If we can&#39;t do it, return null.</span></div><div class="line"><a name="l00855"></a><span class="lineno"><a class="line" href="GVN_8cpp.html#a1acb03d8fcbe31554aa6049a77790fe9">  855</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="GVN_8cpp.html#a1acb03d8fcbe31554aa6049a77790fe9">CoerceAvailableValueToLoadType</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *StoredVal,</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;                                             <a class="code" href="classllvm_1_1Type.html">Type</a> *LoadedTy,</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;                                             <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InsertPt,</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;                                             <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;TD) {</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="GVN_8cpp.html#a3455164f36b257abea8311bb9db5b2b1">CanCoerceMustAliasedValueToLoad</a>(StoredVal, LoadedTy, TD))</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  <span class="comment">// If this is already the right type, just return it.</span></div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *StoredValTy = StoredVal-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;  uint64_t StoreSize = TD.<a class="code" href="classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">getTypeSizeInBits</a>(StoredValTy);</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  uint64_t LoadSize = TD.<a class="code" href="classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">getTypeSizeInBits</a>(LoadedTy);</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  <span class="comment">// If the store and reload are the same size, we can always reuse it.</span></div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  <span class="keywordflow">if</span> (StoreSize == LoadSize) {</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    <span class="comment">// Pointer to Pointer -&gt; use bitcast.</span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <span class="keywordflow">if</span> (StoredValTy-&gt;<a class="code" href="classllvm_1_1Type.html#a8eafa71cf399da8f21b2af5549f3f9e7">getScalarType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>() &amp;&amp;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;        LoadedTy-&gt;<a class="code" href="classllvm_1_1Type.html#a8eafa71cf399da8f21b2af5549f3f9e7">getScalarType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>())</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a>(StoredVal, LoadedTy, <span class="stringliteral">&quot;&quot;</span>, InsertPt);</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    <span class="comment">// Convert source pointers to integers, which can be bitcast.</span></div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <span class="keywordflow">if</span> (StoredValTy-&gt;<a class="code" href="classllvm_1_1Type.html#a8eafa71cf399da8f21b2af5549f3f9e7">getScalarType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>()) {</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;      StoredValTy = TD.<a class="code" href="classllvm_1_1DataLayout.html#ae84bb2408dfffa4e8b5fe2ce0714a3bd">getIntPtrType</a>(StoredValTy);</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;      StoredVal = <span class="keyword">new</span> <a class="code" href="classllvm_1_1PtrToIntInst.html">PtrToIntInst</a>(StoredVal, StoredValTy, <span class="stringliteral">&quot;&quot;</span>, InsertPt);</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    }</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *TypeToCastTo = LoadedTy;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <span class="keywordflow">if</span> (TypeToCastTo-&gt;<a class="code" href="classllvm_1_1Type.html#a8eafa71cf399da8f21b2af5549f3f9e7">getScalarType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>())</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;      TypeToCastTo = TD.<a class="code" href="classllvm_1_1DataLayout.html#ae84bb2408dfffa4e8b5fe2ce0714a3bd">getIntPtrType</a>(TypeToCastTo);</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <span class="keywordflow">if</span> (StoredValTy != TypeToCastTo)</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;      StoredVal = <span class="keyword">new</span> <a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a>(StoredVal, TypeToCastTo, <span class="stringliteral">&quot;&quot;</span>, InsertPt);</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <span class="comment">// Cast to pointer if the load needs a pointer type.</span></div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    <span class="keywordflow">if</span> (LoadedTy-&gt;<a class="code" href="classllvm_1_1Type.html#a8eafa71cf399da8f21b2af5549f3f9e7">getScalarType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>())</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;      StoredVal = <span class="keyword">new</span> <a class="code" href="classllvm_1_1IntToPtrInst.html">IntToPtrInst</a>(StoredVal, LoadedTy, <span class="stringliteral">&quot;&quot;</span>, InsertPt);</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <span class="keywordflow">return</span> StoredVal;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  }</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <span class="comment">// If the loaded value is smaller than the available value, then we can</span></div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  <span class="comment">// extract out a piece from it.  If the available value is too small, then we</span></div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;  <span class="comment">// can&#39;t do anything.</span></div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  assert(StoreSize &gt;= LoadSize &amp;&amp; <span class="stringliteral">&quot;CanCoerceMustAliasedValueToLoad fail&quot;</span>);</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  <span class="comment">// Convert source pointers to integers, which can be manipulated.</span></div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;  <span class="keywordflow">if</span> (StoredValTy-&gt;<a class="code" href="classllvm_1_1Type.html#a8eafa71cf399da8f21b2af5549f3f9e7">getScalarType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>()) {</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    StoredValTy = TD.<a class="code" href="classllvm_1_1DataLayout.html#ae84bb2408dfffa4e8b5fe2ce0714a3bd">getIntPtrType</a>(StoredValTy);</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    StoredVal = <span class="keyword">new</span> <a class="code" href="classllvm_1_1PtrToIntInst.html">PtrToIntInst</a>(StoredVal, StoredValTy, <span class="stringliteral">&quot;&quot;</span>, InsertPt);</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  }</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  <span class="comment">// Convert vectors and fp to integer, which can be manipulated.</span></div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;  <span class="keywordflow">if</span> (!StoredValTy-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>()) {</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    StoredValTy = <a class="code" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(StoredValTy-&gt;<a class="code" href="classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">getContext</a>(), StoreSize);</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    StoredVal = <span class="keyword">new</span> <a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a>(StoredVal, StoredValTy, <span class="stringliteral">&quot;&quot;</span>, InsertPt);</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  }</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  <span class="comment">// If this is a big-endian system, we need to shift the value down to the low</span></div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  <span class="comment">// bits so that a truncate will work.</span></div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;  <span class="keywordflow">if</span> (TD.<a class="code" href="classllvm_1_1DataLayout.html#a9b876cc57d1884621f481b26b0892633">isBigEndian</a>()) {</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Val = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(StoredVal-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), StoreSize-LoadSize);</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    StoredVal = BinaryOperator::CreateLShr(StoredVal, Val, <span class="stringliteral">&quot;tmp&quot;</span>, InsertPt);</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;  }</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;  <span class="comment">// Truncate the integer to the right size now.</span></div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *NewIntTy = <a class="code" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(StoredValTy-&gt;<a class="code" href="classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">getContext</a>(), LoadSize);</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;  StoredVal = <span class="keyword">new</span> <a class="code" href="classllvm_1_1TruncInst.html">TruncInst</a>(StoredVal, NewIntTy, <span class="stringliteral">&quot;trunc&quot;</span>, InsertPt);</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  <span class="keywordflow">if</span> (LoadedTy == NewIntTy)</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    <span class="keywordflow">return</span> StoredVal;</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;  <span class="comment">// If the result is a pointer, inttoptr.</span></div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  <span class="keywordflow">if</span> (LoadedTy-&gt;<a class="code" href="classllvm_1_1Type.html#a8eafa71cf399da8f21b2af5549f3f9e7">getScalarType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>())</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1IntToPtrInst.html">IntToPtrInst</a>(StoredVal, LoadedTy, <span class="stringliteral">&quot;inttoptr&quot;</span>, InsertPt);</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  <span class="comment">// Otherwise, bitcast.</span></div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a>(StoredVal, LoadedTy, <span class="stringliteral">&quot;bitcast&quot;</span>, InsertPt);</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;}</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;<span class="comment">/// AnalyzeLoadFromClobberingWrite - This function is called when we have a</span></div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;<span class="comment">/// memdep query of a load that ends up being a clobbering memory write (store,</span></div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;<span class="comment">/// memset, memcpy, memmove).  This means that the write *may* provide bits used</span></div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;<span class="comment">/// by the load but we can&#39;t be sure because the pointers don&#39;t mustalias.</span></div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;<span class="comment">/// Check this case to see if there is anything more we can do before we give</span></div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;<span class="comment">/// up.  This returns -1 if we have to give up, or a byte number in the stored</span></div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;<span class="comment">/// value of the piece that feeds the load.</span></div><div class="line"><a name="l00942"></a><span class="lineno"><a class="line" href="GVN_8cpp.html#a4fcd9c82bc8bdb252603674dd9a7ad1a">  942</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="GVN_8cpp.html#a4fcd9c82bc8bdb252603674dd9a7ad1a">AnalyzeLoadFromClobberingWrite</a>(<a class="code" href="classllvm_1_1Type.html">Type</a> *LoadTy, <a class="code" href="classllvm_1_1Value.html">Value</a> *LoadPtr,</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;                                          <a class="code" href="classllvm_1_1Value.html">Value</a> *WritePtr,</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;                                          uint64_t WriteSizeInBits,</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;                                          <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;TD) {</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;  <span class="comment">// If the loaded or stored value is a first class array or struct, don&#39;t try</span></div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  <span class="comment">// to transform them.  We need to be able to bitcast to integer.</span></div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;  <span class="keywordflow">if</span> (LoadTy-&gt;<a class="code" href="classllvm_1_1Type.html#aed87738661d539150b3fc4bb46e36aa3">isStructTy</a>() || LoadTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9aae7c60b468bcf6db982dc76e6c703a">isArrayTy</a>())</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;  int64_t StoreOffset = 0, LoadOffset = 0;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *StoreBase = <a class="code" href="namespacellvm.html#a090878b40a781fbfccd4496adb00dd19">GetPointerBaseWithConstantOffset</a>(WritePtr,StoreOffset,&amp;TD);</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *LoadBase = <a class="code" href="namespacellvm.html#a090878b40a781fbfccd4496adb00dd19">GetPointerBaseWithConstantOffset</a>(LoadPtr, LoadOffset, &amp;TD);</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;  <span class="keywordflow">if</span> (StoreBase != LoadBase)</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;  <span class="comment">// If the load and store are to the exact same address, they should have been</span></div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  <span class="comment">// a must alias.  AA must have gotten confused.</span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  <span class="comment">// FIXME: Study to see if/when this happens.  One case is forwarding a memset</span></div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;  <span class="comment">// to a load from the base of the memset.</span></div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;<span class="preprocessor">#if 0</span></div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;  <span class="keywordflow">if</span> (LoadOffset == StoreOffset) {</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;STORE/LOAD DEP WITH COMMON POINTER MISSED:\n&quot;</span></div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;Base       = &quot;</span> &lt;&lt; *StoreBase &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;Store Ptr  = &quot;</span> &lt;&lt; *WritePtr &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;Store Offs = &quot;</span> &lt;&lt; StoreOffset &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;Load Ptr   = &quot;</span> &lt;&lt; *LoadPtr &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    <a class="code" href="README-Thumb_8txt.html#aa36a842dc9742127230b93f16e106ddd">abort</a>();</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;  }</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;  <span class="comment">// If the load and store don&#39;t overlap at all, the store doesn&#39;t provide</span></div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  <span class="comment">// anything to the load.  In this case, they really don&#39;t alias at all, AA</span></div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;  <span class="comment">// must have gotten confused.</span></div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;  uint64_t LoadSize = TD.<a class="code" href="classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">getTypeSizeInBits</a>(LoadTy);</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;  <span class="keywordflow">if</span> ((WriteSizeInBits &amp; 7) | (LoadSize &amp; 7))</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;  uint64_t StoreSize = WriteSizeInBits &gt;&gt; 3;  <span class="comment">// Convert to bytes.</span></div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;  LoadSize &gt;&gt;= 3;</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  <span class="keywordtype">bool</span> isAAFailure = <span class="keyword">false</span>;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  <span class="keywordflow">if</span> (StoreOffset &lt; LoadOffset)</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    isAAFailure = StoreOffset+int64_t(StoreSize) &lt;= LoadOffset;</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    isAAFailure = LoadOffset+int64_t(LoadSize) &lt;= StoreOffset;</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;  <span class="keywordflow">if</span> (isAAFailure) {</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;<span class="preprocessor">#if 0</span></div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;STORE LOAD DEP WITH COMMON BASE:\n&quot;</span></div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;Base       = &quot;</span> &lt;&lt; *StoreBase &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;Store Ptr  = &quot;</span> &lt;&lt; *WritePtr &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;Store Offs = &quot;</span> &lt;&lt; StoreOffset &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;Load Ptr   = &quot;</span> &lt;&lt; *LoadPtr &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <a class="code" href="README-Thumb_8txt.html#aa36a842dc9742127230b93f16e106ddd">abort</a>();</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  }</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;  <span class="comment">// If the Load isn&#39;t completely contained within the stored bits, we don&#39;t</span></div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  <span class="comment">// have all the bits to feed it.  We could do something crazy in the future</span></div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;  <span class="comment">// (issue a smaller load then merge the bits in) but this seems unlikely to be</span></div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  <span class="comment">// valuable.</span></div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  <span class="keywordflow">if</span> (StoreOffset &gt; LoadOffset ||</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;      StoreOffset+StoreSize &lt; LoadOffset+LoadSize)</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;  <span class="comment">// Okay, we can do this transformation.  Return the number of bytes into the</span></div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;  <span class="comment">// store that the load is.</span></div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;  <span class="keywordflow">return</span> LoadOffset-StoreOffset;</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;}</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;<span class="comment">/// AnalyzeLoadFromClobberingStore - This function is called when we have a</span></div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;<span class="comment">/// memdep query of a load that ends up being a clobbering store.</span></div><div class="line"><a name="l01016"></a><span class="lineno"><a class="line" href="GVN_8cpp.html#a06110688fb79e0a9abb3971d66b25bf9"> 1016</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="GVN_8cpp.html#a06110688fb79e0a9abb3971d66b25bf9">AnalyzeLoadFromClobberingStore</a>(<a class="code" href="classllvm_1_1Type.html">Type</a> *LoadTy, <a class="code" href="classllvm_1_1Value.html">Value</a> *LoadPtr,</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;                                          <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *DepSI,</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;                                          <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;TD) {</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;  <span class="comment">// Cannot handle reading from store of first-class aggregate yet.</span></div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;  <span class="keywordflow">if</span> (DepSI-&gt;<a class="code" href="classllvm_1_1StoreInst.html#a14298313bdf734e2db5a921cc6e861a0">getValueOperand</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#aed87738661d539150b3fc4bb46e36aa3">isStructTy</a>() ||</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;      DepSI-&gt;<a class="code" href="classllvm_1_1StoreInst.html#a14298313bdf734e2db5a921cc6e861a0">getValueOperand</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9aae7c60b468bcf6db982dc76e6c703a">isArrayTy</a>())</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *StorePtr = DepSI-&gt;<a class="code" href="classllvm_1_1StoreInst.html#ac03c1c093059ea000216af8dd6f2dbf4">getPointerOperand</a>();</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;  uint64_t StoreSize =TD.<a class="code" href="classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">getTypeSizeInBits</a>(DepSI-&gt;<a class="code" href="classllvm_1_1StoreInst.html#a14298313bdf734e2db5a921cc6e861a0">getValueOperand</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="GVN_8cpp.html#a4fcd9c82bc8bdb252603674dd9a7ad1a">AnalyzeLoadFromClobberingWrite</a>(LoadTy, LoadPtr,</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;                                        StorePtr, StoreSize, TD);</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;}</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;<span class="comment">/// AnalyzeLoadFromClobberingLoad - This function is called when we have a</span></div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;<span class="comment">/// memdep query of a load that ends up being clobbered by another load.  See if</span></div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;<span class="comment">/// the other load can feed into the second load.</span></div><div class="line"><a name="l01033"></a><span class="lineno"><a class="line" href="GVN_8cpp.html#aa306b8d484291ede665613aac3084548"> 1033</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="GVN_8cpp.html#aa306b8d484291ede665613aac3084548">AnalyzeLoadFromClobberingLoad</a>(<a class="code" href="classllvm_1_1Type.html">Type</a> *LoadTy, <a class="code" href="classllvm_1_1Value.html">Value</a> *LoadPtr,</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;                                         <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *DepLI, <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;TD){</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;  <span class="comment">// Cannot handle reading from store of first-class aggregate yet.</span></div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;  <span class="keywordflow">if</span> (DepLI-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#aed87738661d539150b3fc4bb46e36aa3">isStructTy</a>() || DepLI-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9aae7c60b468bcf6db982dc76e6c703a">isArrayTy</a>())</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *DepPtr = DepLI-&gt;<a class="code" href="classllvm_1_1LoadInst.html#ad47eefa1d094f60494b6b927061ca001">getPointerOperand</a>();</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;  uint64_t DepSize = TD.<a class="code" href="classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">getTypeSizeInBits</a>(DepLI-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;  <span class="keywordtype">int</span> R = <a class="code" href="GVN_8cpp.html#a4fcd9c82bc8bdb252603674dd9a7ad1a">AnalyzeLoadFromClobberingWrite</a>(LoadTy, LoadPtr, DepPtr, DepSize, TD);</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;  <span class="keywordflow">if</span> (R != -1) <span class="keywordflow">return</span> R;</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;  <span class="comment">// If we have a load/load clobber an DepLI can be widened to cover this load,</span></div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;  <span class="comment">// then we should widen it!</span></div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;  int64_t LoadOffs = 0;</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *LoadBase =</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <a class="code" href="namespacellvm.html#a090878b40a781fbfccd4496adb00dd19">GetPointerBaseWithConstantOffset</a>(LoadPtr, LoadOffs, &amp;TD);</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;  <span class="keywordtype">unsigned</span> LoadSize = TD.<a class="code" href="classllvm_1_1DataLayout.html#a4b979cd93852fd44c48851c94ee00758">getTypeStoreSize</a>(LoadTy);</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;  <span class="keywordtype">unsigned</span> Size = <a class="code" href="classllvm_1_1MemoryDependenceAnalysis.html#a7136be51f5ad007feee921c8ffec54da">MemoryDependenceAnalysis::</a></div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;<a class="code" href="classllvm_1_1MemoryDependenceAnalysis.html#a7136be51f5ad007feee921c8ffec54da">    getLoadLoadClobberFullWidthSize</a>(LoadBase, LoadOffs, LoadSize, DepLI, TD);</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;  <span class="keywordflow">if</span> (Size == 0) <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="GVN_8cpp.html#a4fcd9c82bc8bdb252603674dd9a7ad1a">AnalyzeLoadFromClobberingWrite</a>(LoadTy, LoadPtr, DepPtr, Size*8, TD);</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;}</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;</div><div class="line"><a name="l01060"></a><span class="lineno"><a class="line" href="GVN_8cpp.html#a403222386aafded02ab0f7903ada29b9"> 1060</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="GVN_8cpp.html#a403222386aafded02ab0f7903ada29b9">AnalyzeLoadFromClobberingMemInst</a>(<a class="code" href="classllvm_1_1Type.html">Type</a> *LoadTy, <a class="code" href="classllvm_1_1Value.html">Value</a> *LoadPtr,</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;                                            <a class="code" href="classllvm_1_1MemIntrinsic.html">MemIntrinsic</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>,</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;                                            <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;TD) {</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;  <span class="comment">// If the mem operation is a non-constant size, we can&#39;t handle it.</span></div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *SizeCst = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(MI-&gt;<a class="code" href="classllvm_1_1MemIntrinsic.html#abad10f74789466601c7a025540c1c072">getLength</a>());</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;  <span class="keywordflow">if</span> (SizeCst == 0) <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;  uint64_t MemSizeInBits = SizeCst-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a6edd823ba5e4e1effc8280ca8a1194ef">getZExtValue</a>()*8;</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;  <span class="comment">// If this is memset, we just need to see if the offset is valid in the size</span></div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;  <span class="comment">// of the memset..</span></div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;  <span class="keywordflow">if</span> (MI-&gt;<a class="code" href="classllvm_1_1IntrinsicInst.html#a6cbb4809b81f3994ee0c79b38556bd66">getIntrinsicID</a>() == <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ae857cbc5cf8c5a980f0bd245ad5ec61a">Intrinsic::memset</a>)</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="GVN_8cpp.html#a4fcd9c82bc8bdb252603674dd9a7ad1a">AnalyzeLoadFromClobberingWrite</a>(LoadTy, LoadPtr, MI-&gt;<a class="code" href="classllvm_1_1MemIntrinsic.html#ad8bf46d46e8f14bc23bd30df57cc9a77">getDest</a>(),</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;                                          MemSizeInBits, TD);</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;  <span class="comment">// If we have a memcpy/memmove, the only case we can handle is if this is a</span></div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;  <span class="comment">// copy from constant memory.  In that case, we can read directly from the</span></div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;  <span class="comment">// constant memory.</span></div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  <a class="code" href="classllvm_1_1MemTransferInst.html">MemTransferInst</a> *MTI = cast&lt;MemTransferInst&gt;(<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>);</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Src = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1Constant.html">Constant</a>&gt;(MTI-&gt;<a class="code" href="classllvm_1_1MemTransferInst.html#a1d23e59237a8e4a61f4af0deb7320104">getSource</a>());</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  <span class="keywordflow">if</span> (Src == 0) <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>&gt;(<a class="code" href="namespacellvm.html#ace6c957db39858291c6ce01c38e78480">GetUnderlyingObject</a>(Src, &amp;TD));</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;  <span class="keywordflow">if</span> (GV == 0 || !GV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#a1500a3fe55cf38153aa1e0fbe7284e05">isConstant</a>()) <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  <span class="comment">// See if the access is within the bounds of the transfer.</span></div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;  <span class="keywordtype">int</span> Offset = <a class="code" href="GVN_8cpp.html#a4fcd9c82bc8bdb252603674dd9a7ad1a">AnalyzeLoadFromClobberingWrite</a>(LoadTy, LoadPtr,</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                                              MI-&gt;<a class="code" href="classllvm_1_1MemIntrinsic.html#ad8bf46d46e8f14bc23bd30df57cc9a77">getDest</a>(), MemSizeInBits, TD);</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;  <span class="keywordflow">if</span> (Offset == -1)</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    <span class="keywordflow">return</span> Offset;</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;  <span class="keywordtype">unsigned</span> AS = Src-&gt;getType()-&gt;getPointerAddressSpace();</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;  <span class="comment">// Otherwise, see if we can constant fold a load from the constant with the</span></div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;  <span class="comment">// offset applied as appropriate.</span></div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;  Src = <a class="code" href="classllvm_1_1ConstantExpr.html#aba93ec4079f8d709a1d5b4745310782e">ConstantExpr::getBitCast</a>(Src,</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;                                 <a class="code" href="classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">Type::getInt8PtrTy</a>(Src-&gt;getContext(), AS));</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *OffsetCst =</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#a05186fa23e4d11b9855a9599ba87a4b7">Type::getInt64Ty</a>(Src-&gt;getContext()), (<span class="keywordtype">unsigned</span>)Offset);</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  Src = <a class="code" href="classllvm_1_1ConstantExpr.html#a51940249c228e46f1f97932e5f4b8450">ConstantExpr::getGetElementPtr</a>(Src, OffsetCst);</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;  Src = <a class="code" href="classllvm_1_1ConstantExpr.html#aba93ec4079f8d709a1d5b4745310782e">ConstantExpr::getBitCast</a>(Src, <a class="code" href="classllvm_1_1PointerType.html#a050a395d1656e546679d8b144d951bb2">PointerType::get</a>(LoadTy, AS));</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#acf81840e57f5d7beb1d5983f4dac772f">ConstantFoldLoadFromConstPtr</a>(Src, &amp;TD))</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    <span class="keywordflow">return</span> Offset;</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;  <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;}</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;<span class="comment">/// GetStoreValueForLoad - This function is called when we have a</span></div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;<span class="comment">/// memdep query of a load that ends up being a clobbering store.  This means</span></div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;<span class="comment">/// that the store provides bits used by the load but we the pointers don&#39;t</span></div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;<span class="comment">/// mustalias.  Check this case to see if there is anything more we can do</span></div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;<span class="comment">/// before we give up.</span></div><div class="line"><a name="l01111"></a><span class="lineno"><a class="line" href="GVN_8cpp.html#a06c6349768c68b00910351436ff995b8"> 1111</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="GVN_8cpp.html#a06c6349768c68b00910351436ff995b8">GetStoreValueForLoad</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *SrcVal, <span class="keywordtype">unsigned</span> Offset,</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;                                   <a class="code" href="classllvm_1_1Type.html">Type</a> *LoadTy,</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;                                   <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InsertPt, <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;TD){</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;Ctx = SrcVal-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">getContext</a>();</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;  uint64_t StoreSize = (TD.<a class="code" href="classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">getTypeSizeInBits</a>(SrcVal-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()) + 7) / 8;</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  uint64_t LoadSize = (TD.<a class="code" href="classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">getTypeSizeInBits</a>(LoadTy) + 7) / 8;</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> Builder(InsertPt-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>(), InsertPt);</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  <span class="comment">// Compute which bits of the stored value are being used by the load.  Convert</span></div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;  <span class="comment">// to an integer type to start with.</span></div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;  <span class="keywordflow">if</span> (SrcVal-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a8eafa71cf399da8f21b2af5549f3f9e7">getScalarType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>())</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    SrcVal = Builder.CreatePtrToInt(SrcVal,</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;        TD.<a class="code" href="classllvm_1_1DataLayout.html#ae84bb2408dfffa4e8b5fe2ce0714a3bd">getIntPtrType</a>(SrcVal-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  <span class="keywordflow">if</span> (!SrcVal-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>())</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    SrcVal = Builder.CreateBitCast(SrcVal, <a class="code" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(Ctx, StoreSize*8));</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;  <span class="comment">// Shift the bits to the least significant depending on endianness.</span></div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;  <span class="keywordtype">unsigned</span> ShiftAmt;</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;  <span class="keywordflow">if</span> (TD.<a class="code" href="classllvm_1_1DataLayout.html#ab5073dd57732298abf080ef8381ad14e">isLittleEndian</a>())</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    ShiftAmt = Offset*8;</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    ShiftAmt = (StoreSize-LoadSize-Offset)*8;</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;  <span class="keywordflow">if</span> (ShiftAmt)</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    SrcVal = Builder.CreateLShr(SrcVal, ShiftAmt);</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  <span class="keywordflow">if</span> (LoadSize != StoreSize)</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    SrcVal = Builder.CreateTrunc(SrcVal, <a class="code" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(Ctx, LoadSize*8));</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="GVN_8cpp.html#a1acb03d8fcbe31554aa6049a77790fe9">CoerceAvailableValueToLoadType</a>(SrcVal, LoadTy, InsertPt, TD);</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;}</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;<span class="comment">/// GetLoadValueForLoad - This function is called when we have a</span></div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;<span class="comment">/// memdep query of a load that ends up being a clobbering load.  This means</span></div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;<span class="comment">/// that the load *may* provide bits used by the load but we can&#39;t be sure</span></div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;<span class="comment">/// because the pointers don&#39;t mustalias.  Check this case to see if there is</span></div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;<span class="comment">/// anything more we can do before we give up.</span></div><div class="line"><a name="l01150"></a><span class="lineno"><a class="line" href="GVN_8cpp.html#a5a14f90fae625ff076364378de0c57ed"> 1150</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="GVN_8cpp.html#a5a14f90fae625ff076364378de0c57ed">GetLoadValueForLoad</a>(<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *SrcVal, <span class="keywordtype">unsigned</span> Offset,</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;                                  <a class="code" href="classllvm_1_1Type.html">Type</a> *LoadTy, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InsertPt,</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;                                  GVN &amp;gvn) {</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;TD = *gvn.getDataLayout();</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;  <span class="comment">// If Offset+LoadTy exceeds the size of SrcVal, then we must be wanting to</span></div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  <span class="comment">// widen SrcVal out to a larger load.</span></div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;  <span class="keywordtype">unsigned</span> SrcValSize = TD.<a class="code" href="classllvm_1_1DataLayout.html#a4b979cd93852fd44c48851c94ee00758">getTypeStoreSize</a>(SrcVal-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  <span class="keywordtype">unsigned</span> LoadSize = TD.<a class="code" href="classllvm_1_1DataLayout.html#a4b979cd93852fd44c48851c94ee00758">getTypeStoreSize</a>(LoadTy);</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  <span class="keywordflow">if</span> (Offset+LoadSize &gt; SrcValSize) {</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    assert(SrcVal-&gt;<a class="code" href="classllvm_1_1LoadInst.html#a156c478ee8e7d1602143cdbad4bd5385">isSimple</a>() &amp;&amp; <span class="stringliteral">&quot;Cannot widen volatile/atomic load!&quot;</span>);</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    assert(SrcVal-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>() &amp;&amp; <span class="stringliteral">&quot;Can&#39;t widen non-integer load&quot;</span>);</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    <span class="comment">// If we have a load/load clobber an DepLI can be widened to cover this</span></div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    <span class="comment">// load, then we should widen it to the next power of 2 size big enough!</span></div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    <span class="keywordtype">unsigned</span> NewLoadSize = Offset+LoadSize;</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#af4d1a918800291e75b01ce1447be0e83">isPowerOf2_32</a>(NewLoadSize))</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;      NewLoadSize = <a class="code" href="namespacellvm.html#a0490c32aa8dd63ddc56bb046fd0258c7">NextPowerOf2</a>(NewLoadSize);</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *PtrVal = SrcVal-&gt;<a class="code" href="classllvm_1_1LoadInst.html#ad47eefa1d094f60494b6b927061ca001">getPointerOperand</a>();</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    <span class="comment">// Insert the new load after the old load.  This ensures that subsequent</span></div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    <span class="comment">// memdep queries will find the new load.  We can&#39;t easily remove the old</span></div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <span class="comment">// load completely because it is already in the value numbering table.</span></div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> Builder(SrcVal-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>(), ++<a class="code" href="classllvm_1_1BasicBlock.html#a1445356b70fbb95acc5e0d3d2ac9101c">BasicBlock::iterator</a>(SrcVal));</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *DestPTy =</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;      <a class="code" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(LoadTy-&gt;<a class="code" href="classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">getContext</a>(), NewLoadSize*8);</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    DestPTy = <a class="code" href="classllvm_1_1PointerType.html#a050a395d1656e546679d8b144d951bb2">PointerType::get</a>(DestPTy,</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;                               PtrVal-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a33f9fa1a7cb21319a30836fce847c3c4">getPointerAddressSpace</a>());</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    Builder.SetCurrentDebugLocation(SrcVal-&gt;<a class="code" href="classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">getDebugLoc</a>());</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    PtrVal = Builder.CreateBitCast(PtrVal, DestPTy);</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *NewLoad = Builder.CreateLoad(PtrVal);</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    NewLoad-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(SrcVal);</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    NewLoad-&gt;<a class="code" href="classllvm_1_1LoadInst.html#a218ef27c964707a907f12db0f9b002ba">setAlignment</a>(SrcVal-&gt;<a class="code" href="classllvm_1_1LoadInst.html#ad1168fc42bcba1b71217a4969483671a">getAlignment</a>());</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;GVN WIDENED LOAD: &quot;</span> &lt;&lt; *SrcVal &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;TO: &quot;</span> &lt;&lt; *NewLoad &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    <span class="comment">// Replace uses of the original load with the wider load.  On a big endian</span></div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    <span class="comment">// system, we need to shift down to get the relevant bits.</span></div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *RV = NewLoad;</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    <span class="keywordflow">if</span> (TD.<a class="code" href="classllvm_1_1DataLayout.html#a9b876cc57d1884621f481b26b0892633">isBigEndian</a>())</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;      RV = Builder.CreateLShr(RV,</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;                    NewLoadSize*8-SrcVal-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a5a7cfa245af120b44ac8a86143bb9e57">getPrimitiveSizeInBits</a>());</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    RV = Builder.CreateTrunc(RV, SrcVal-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    SrcVal-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(RV);</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    <span class="comment">// We would like to use gvn.markInstructionForDeletion here, but we can&#39;t</span></div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    <span class="comment">// because the load is already memoized into the leader map table that GVN</span></div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    <span class="comment">// tracks.  It is potentially possible to remove the load from the table,</span></div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    <span class="comment">// but then there all of the operations based on it would need to be</span></div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    <span class="comment">// rehashed.  Just leave the dead load around.</span></div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    gvn.getMemDep().removeInstruction(SrcVal);</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    SrcVal = NewLoad;</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;  }</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="GVN_8cpp.html#a06c6349768c68b00910351436ff995b8">GetStoreValueForLoad</a>(SrcVal, Offset, LoadTy, InsertPt, TD);</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;}</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;<span class="comment">/// GetMemInstValueForLoad - This function is called when we have a</span></div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;<span class="comment">/// memdep query of a load that ends up being a clobbering mem intrinsic.</span></div><div class="line"><a name="l01210"></a><span class="lineno"><a class="line" href="GVN_8cpp.html#a12252830c9aff84c819c6afb1ac4fb70"> 1210</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="GVN_8cpp.html#a12252830c9aff84c819c6afb1ac4fb70">GetMemInstValueForLoad</a>(<a class="code" href="classllvm_1_1MemIntrinsic.html">MemIntrinsic</a> *SrcInst, <span class="keywordtype">unsigned</span> Offset,</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;                                     <a class="code" href="classllvm_1_1Type.html">Type</a> *LoadTy, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InsertPt,</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;                                     <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;TD){</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;Ctx = LoadTy-&gt;<a class="code" href="classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">getContext</a>();</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;  uint64_t LoadSize = TD.<a class="code" href="classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">getTypeSizeInBits</a>(LoadTy)/8;</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> Builder(InsertPt-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>(), InsertPt);</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;  <span class="comment">// We know that this method is only called when the mem transfer fully</span></div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;  <span class="comment">// provides the bits for the load.</span></div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemSetInst.html">MemSetInst</a> *MSI = dyn_cast&lt;MemSetInst&gt;(SrcInst)) {</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    <span class="comment">// memset(P, &#39;x&#39;, 1234) -&gt; splat(&#39;x&#39;), even if x is a variable, and</span></div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="comment">// independently of what the offset is.</span></div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Val = MSI-&gt;getValue();</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    <span class="keywordflow">if</span> (LoadSize != 1)</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;      Val = Builder.CreateZExt(Val, <a class="code" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(Ctx, LoadSize*8));</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *OneElt = Val;</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    <span class="comment">// Splat the value out to the right number of bits.</span></div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> NumBytesSet = 1; NumBytesSet != LoadSize; ) {</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;      <span class="comment">// If we can double the number of bytes set, do it.</span></div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;      <span class="keywordflow">if</span> (NumBytesSet*2 &lt;= LoadSize) {</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *ShVal = Builder.CreateShl(Val, NumBytesSet*8);</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;        Val = Builder.CreateOr(Val, ShVal);</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;        NumBytesSet &lt;&lt;= 1;</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;      }</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;      <span class="comment">// Otherwise insert one byte at a time.</span></div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *ShVal = Builder.CreateShl(Val, 1*8);</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;      Val = Builder.CreateOr(OneElt, ShVal);</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;      ++NumBytesSet;</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    }</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="GVN_8cpp.html#a1acb03d8fcbe31554aa6049a77790fe9">CoerceAvailableValueToLoadType</a>(Val, LoadTy, InsertPt, TD);</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;  }</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;  <span class="comment">// Otherwise, this is a memcpy/memmove from a constant global.</span></div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;  <a class="code" href="classllvm_1_1MemTransferInst.html">MemTransferInst</a> *MTI = cast&lt;MemTransferInst&gt;(SrcInst);</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Src = cast&lt;Constant&gt;(MTI-&gt;<a class="code" href="classllvm_1_1MemTransferInst.html#a1d23e59237a8e4a61f4af0deb7320104">getSource</a>());</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;  <span class="keywordtype">unsigned</span> AS = Src-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a33f9fa1a7cb21319a30836fce847c3c4">getPointerAddressSpace</a>();</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;  <span class="comment">// Otherwise, see if we can constant fold a load from the constant with the</span></div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;  <span class="comment">// offset applied as appropriate.</span></div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;  Src = <a class="code" href="classllvm_1_1ConstantExpr.html#aba93ec4079f8d709a1d5b4745310782e">ConstantExpr::getBitCast</a>(Src,</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;                                 <a class="code" href="classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">Type::getInt8PtrTy</a>(Src-&gt;getContext(), AS));</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *OffsetCst =</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#a05186fa23e4d11b9855a9599ba87a4b7">Type::getInt64Ty</a>(Src-&gt;getContext()), (<span class="keywordtype">unsigned</span>)Offset);</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;  Src = <a class="code" href="classllvm_1_1ConstantExpr.html#a51940249c228e46f1f97932e5f4b8450">ConstantExpr::getGetElementPtr</a>(Src, OffsetCst);</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;  Src = <a class="code" href="classllvm_1_1ConstantExpr.html#aba93ec4079f8d709a1d5b4745310782e">ConstantExpr::getBitCast</a>(Src, <a class="code" href="classllvm_1_1PointerType.html#a050a395d1656e546679d8b144d951bb2">PointerType::get</a>(LoadTy, AS));</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#acf81840e57f5d7beb1d5983f4dac772f">ConstantFoldLoadFromConstPtr</a>(Src, &amp;TD);</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;}</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;<span class="comment">/// ConstructSSAForLoadSet - Given a set of loads specified by ValuesPerBlock,</span></div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;<span class="comment">/// construct SSA form, allowing us to eliminate LI.  This returns the value</span></div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;<span class="comment">/// that should be used at LI&#39;s definition site.</span></div><div class="line"><a name="l01268"></a><span class="lineno"><a class="line" href="GVN_8cpp.html#a61d5060162c77138d1c3244c8e001ea2"> 1268</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="GVN_8cpp.html#a61d5060162c77138d1c3244c8e001ea2">ConstructSSAForLoadSet</a>(<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI,</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;                         <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;AvailableValueInBlock&gt;</a> &amp;ValuesPerBlock,</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;                                     GVN &amp;gvn) {</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;  <span class="comment">// Check for the fully redundant, dominating load case.  In this case, we can</span></div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;  <span class="comment">// just use the dominating value directly.</span></div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;  <span class="keywordflow">if</span> (ValuesPerBlock.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>() == 1 &amp;&amp;</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;      gvn.getDominatorTree().properlyDominates(ValuesPerBlock[0].<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;                                               LI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>())) {</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;    assert(!ValuesPerBlock[0].isUndefValue() &amp;&amp; <span class="stringliteral">&quot;Dead BB dominate this block&quot;</span>);</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    <span class="keywordflow">return</span> ValuesPerBlock[0].MaterializeAdjustedValue(LI-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), gvn);</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;  }</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;  <span class="comment">// Otherwise, we have to construct SSA form.</span></div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;PHINode*, 8&gt;</a> NewPHIs;</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;  <a class="code" href="classllvm_1_1SSAUpdater.html">SSAUpdater</a> SSAUpdate(&amp;NewPHIs);</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;  SSAUpdate.<a class="code" href="classllvm_1_1SSAUpdater.html#a4fe3279aae4f726813a672d4a9b26cb1">Initialize</a>(LI-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), LI-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>());</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *LoadTy = LI-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = ValuesPerBlock.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    <span class="keyword">const</span> AvailableValueInBlock &amp;AV = ValuesPerBlock[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB = AV.BB;</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    <span class="keywordflow">if</span> (SSAUpdate.<a class="code" href="classllvm_1_1SSAUpdater.html#a7df49ea3c5b04f4f97332498f038ba60">HasValueForBlock</a>(BB))</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    SSAUpdate.<a class="code" href="classllvm_1_1SSAUpdater.html#af0d1a82b4e629e834c2ed53e5cbe22ef">AddAvailableValue</a>(BB, AV.MaterializeAdjustedValue(LoadTy, gvn));</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;  }</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;  <span class="comment">// Perform PHI construction.</span></div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *V = SSAUpdate.<a class="code" href="classllvm_1_1SSAUpdater.html#a5b0e45dbba53e985f1b9c532fb5f200b">GetValueInMiddleOfBlock</a>(LI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>());</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;  <span class="comment">// If new PHI nodes were created, notify alias analysis.</span></div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;  <span class="keywordflow">if</span> (V-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a8eafa71cf399da8f21b2af5549f3f9e7">getScalarType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>()) {</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    <a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a> *AA = gvn.getAliasAnalysis();</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = NewPHIs.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;      AA-&gt;<a class="code" href="classllvm_1_1AliasAnalysis.html#a533cd570eeebdb48681e253dc174a777">copyValue</a>(LI, NewPHIs[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    <span class="comment">// Now that we&#39;ve copied information to the new PHIs, scan through</span></div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;    <span class="comment">// them again and inform alias analysis that we&#39;ve added potentially</span></div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;    <span class="comment">// escaping uses to any values that are operands to these PHIs.</span></div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = NewPHIs.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); i != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;      <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = NewPHIs[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> ii = 0, ee = P-&gt;<a class="code" href="classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">getNumIncomingValues</a>(); ii != ee; ++ii) {</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;        <span class="keywordtype">unsigned</span> jj = <a class="code" href="classllvm_1_1PHINode.html#a928f57745ef3ec4a823afdf7100a70ad">PHINode::getOperandNumForIncomingValue</a>(ii);</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;        AA-&gt;<a class="code" href="classllvm_1_1AliasAnalysis.html#ab3cecb80aa774bc87bc9e136d245acba">addEscapingUse</a>(P-&gt;<a class="code" href="classllvm_1_1User.html#a363947eeecf72de326468ed5231e3a04">getOperandUse</a>(jj));</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;      }</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    }</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;  }</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;  <span class="keywordflow">return</span> V;</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;}</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *AvailableValueInBlock::MaterializeAdjustedValue(<a class="code" href="classllvm_1_1Type.html">Type</a> *LoadTy, GVN &amp;gvn)<span class="keyword"> const </span>{</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Res;</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;  <span class="keywordflow">if</span> (isSimpleValue()) {</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    Res = getSimpleValue();</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;    <span class="keywordflow">if</span> (Res-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() != LoadTy) {</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> *TD = gvn.getDataLayout();</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;      assert(TD &amp;&amp; <span class="stringliteral">&quot;Need target data to handle type mismatch case&quot;</span>);</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;      Res = <a class="code" href="GVN_8cpp.html#a06c6349768c68b00910351436ff995b8">GetStoreValueForLoad</a>(Res, Offset, LoadTy, <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator(),</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;                                 *TD);</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;  </div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;GVN COERCED NONLOCAL VAL:\nOffset: &quot;</span> &lt;&lt; Offset &lt;&lt; <span class="stringliteral">&quot;  &quot;</span></div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;                   &lt;&lt; *getSimpleValue() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;                   &lt;&lt; *Res &lt;&lt; <span class="charliteral">&#39;\n&#39;</span> &lt;&lt; <span class="stringliteral">&quot;\n\n\n&quot;</span>);</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;    }</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isCoercedLoadValue()) {</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *<a class="code" href="namespacellvm_1_1SPII.html#a11e9b8fca4a074643a6a21f444e51406a5069619ca8fdce305534f3fe85091a0f">Load</a> = getCoercedLoadValue();</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    <span class="keywordflow">if</span> (Load-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() == LoadTy &amp;&amp; Offset == 0) {</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;      Res = <a class="code" href="namespacellvm_1_1SPII.html#a11e9b8fca4a074643a6a21f444e51406a5069619ca8fdce305534f3fe85091a0f">Load</a>;</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;      Res = <a class="code" href="GVN_8cpp.html#a5a14f90fae625ff076364378de0c57ed">GetLoadValueForLoad</a>(Load, Offset, LoadTy, <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator(),</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;                                gvn);</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;  </div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;GVN COERCED NONLOCAL LOAD:\nOffset: &quot;</span> &lt;&lt; Offset &lt;&lt; <span class="stringliteral">&quot;  &quot;</span></div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;                   &lt;&lt; *getCoercedLoadValue() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;                   &lt;&lt; *Res &lt;&lt; <span class="charliteral">&#39;\n&#39;</span> &lt;&lt; <span class="stringliteral">&quot;\n\n\n&quot;</span>);</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;    }</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isMemIntrinValue()) {</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> *TD = gvn.getDataLayout();</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;    assert(TD &amp;&amp; <span class="stringliteral">&quot;Need target data to handle type mismatch case&quot;</span>);</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    Res = <a class="code" href="GVN_8cpp.html#a12252830c9aff84c819c6afb1ac4fb70">GetMemInstValueForLoad</a>(getMemIntrinValue(), Offset,</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;                                 LoadTy, <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator(), *TD);</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;GVN COERCED NONLOCAL MEM INTRIN:\nOffset: &quot;</span> &lt;&lt; Offset</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> &lt;&lt; *getMemIntrinValue() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;                 &lt;&lt; *Res &lt;&lt; <span class="charliteral">&#39;\n&#39;</span> &lt;&lt; <span class="stringliteral">&quot;\n\n\n&quot;</span>);</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    assert(isUndefValue() &amp;&amp; <span class="stringliteral">&quot;Should be UndefVal&quot;</span>);</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;GVN COERCED NONLOCAL Undef:\n&quot;</span>;);</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(LoadTy);</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;  }</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;  <span class="keywordflow">return</span> Res;</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;}</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;</div><div class="line"><a name="l01364"></a><span class="lineno"><a class="line" href="GVN_8cpp.html#ab1faa49b43014e07caaf2bf2d3db07e4"> 1364</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="GVN_8cpp.html#ab1faa49b43014e07caaf2bf2d3db07e4">isLifetimeStart</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst) {</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a>* II = dyn_cast&lt;IntrinsicInst&gt;(Inst))</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    <span class="keywordflow">return</span> II-&gt;getIntrinsicID() == <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ae365354e47542c51f9bd46e329e3323e">Intrinsic::lifetime_start</a>;</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;}</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;<span class="keywordtype">void</span> GVN::AnalyzeLoadAvailability(<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI, LoadDepVect &amp;Deps, </div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;                                  AvailValInBlkVect &amp;ValuesPerBlock,</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;                                  UnavailBlkVect &amp;UnavailableBlocks) {</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;  <span class="comment">// Filter out useless results (non-locals, etc).  Keep track of the blocks</span></div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;  <span class="comment">// where we have a value available in repl, also keep track of whether we see</span></div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;  <span class="comment">// dependencies that produce an unknown value for the load (such as a call</span></div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;  <span class="comment">// that could potentially clobber the load).</span></div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;  <span class="keywordtype">unsigned</span> NumDeps = Deps.size();</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = NumDeps; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *DepBB = Deps[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].getBB();</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;    <a class="code" href="classllvm_1_1MemDepResult.html">MemDepResult</a> DepInfo = Deps[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].getResult();</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    <span class="keywordflow">if</span> (DeadBlocks.count(DepBB)) {</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;      <span class="comment">// Dead dependent mem-op disguise as a load evaluating the same value</span></div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;      <span class="comment">// as the load in question.</span></div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;      ValuesPerBlock.push_back(AvailableValueInBlock::getUndef(DepBB));</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    }</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    <span class="keywordflow">if</span> (!DepInfo.<a class="code" href="classllvm_1_1MemDepResult.html#aa6d7a9e81b4749376498640463eb5dc2">isDef</a>() &amp;&amp; !DepInfo.<a class="code" href="classllvm_1_1MemDepResult.html#ae409b288c7f70a6c57586535abed3808">isClobber</a>()) {</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;      UnavailableBlocks.push_back(DepBB);</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    }</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;    <span class="keywordflow">if</span> (DepInfo.<a class="code" href="classllvm_1_1MemDepResult.html#ae409b288c7f70a6c57586535abed3808">isClobber</a>()) {</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;      <span class="comment">// The address being loaded in this non-local block may not be the same as</span></div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;      <span class="comment">// the pointer operand of the load if PHI translation occurs.  Make sure</span></div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;      <span class="comment">// to consider the right address.</span></div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Address = Deps[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].getAddress();</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;      <span class="comment">// If the dependence is to a store that writes to a superset of the bits</span></div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;      <span class="comment">// read by the load, we can extract the bits we need for the load from the</span></div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;      <span class="comment">// stored value.</span></div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *DepSI = dyn_cast&lt;StoreInst&gt;(DepInfo.<a class="code" href="classllvm_1_1MemDepResult.html#a8452eb6508c00e2b6d56926bebc79f57">getInst</a>())) {</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;        <span class="keywordflow">if</span> (TD &amp;&amp; Address) {</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;          <span class="keywordtype">int</span> Offset = <a class="code" href="GVN_8cpp.html#a06110688fb79e0a9abb3971d66b25bf9">AnalyzeLoadFromClobberingStore</a>(LI-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), Address,</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;                                                      DepSI, *TD);</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;          <span class="keywordflow">if</span> (Offset != -1) {</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;            ValuesPerBlock.push_back(<a class="code" href="Target_2PowerPC_2README_8txt.html#a1c23e7f459a1051c48b302e7f4ff100e">AvailableValueInBlock::get</a>(DepBB,</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;                                                       DepSI-&gt;getValueOperand(),</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;                                                                Offset));</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;          }</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;        }</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;      }</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;      <span class="comment">// Check to see if we have something like this:</span></div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;      <span class="comment">//    load i32* P</span></div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;      <span class="comment">//    load i8* (P+1)</span></div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;      <span class="comment">// if we have this, replace the later with an extraction from the former.</span></div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *DepLI = dyn_cast&lt;LoadInst&gt;(DepInfo.<a class="code" href="classllvm_1_1MemDepResult.html#a8452eb6508c00e2b6d56926bebc79f57">getInst</a>())) {</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;        <span class="comment">// If this is a clobber and L is the first instruction in its block, then</span></div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;        <span class="comment">// we have the first instruction in the entry block.</span></div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;        <span class="keywordflow">if</span> (DepLI != LI &amp;&amp; Address &amp;&amp; TD) {</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;          <span class="keywordtype">int</span> Offset = <a class="code" href="GVN_8cpp.html#aa306b8d484291ede665613aac3084548">AnalyzeLoadFromClobberingLoad</a>(LI-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(),</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;                                                     LI-&gt;<a class="code" href="classllvm_1_1LoadInst.html#ad47eefa1d094f60494b6b927061ca001">getPointerOperand</a>(),</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;                                                     DepLI, *TD);</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;          <span class="keywordflow">if</span> (Offset != -1) {</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;            ValuesPerBlock.push_back(AvailableValueInBlock::getLoad(DepBB,DepLI,</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;                                                                    Offset));</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;          }</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;        }</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;      }</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;      <span class="comment">// If the clobbering value is a memset/memcpy/memmove, see if we can</span></div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;      <span class="comment">// forward a value on from it.</span></div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemIntrinsic.html">MemIntrinsic</a> *DepMI = dyn_cast&lt;MemIntrinsic&gt;(DepInfo.<a class="code" href="classllvm_1_1MemDepResult.html#a8452eb6508c00e2b6d56926bebc79f57">getInst</a>())) {</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;        <span class="keywordflow">if</span> (TD &amp;&amp; Address) {</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;          <span class="keywordtype">int</span> Offset = <a class="code" href="GVN_8cpp.html#a403222386aafded02ab0f7903ada29b9">AnalyzeLoadFromClobberingMemInst</a>(LI-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), Address,</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;                                                        DepMI, *TD);</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;          <span class="keywordflow">if</span> (Offset != -1) {</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;            ValuesPerBlock.push_back(AvailableValueInBlock::getMI(DepBB, DepMI,</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;                                                                  Offset));</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;          }</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;        }</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;      }</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;      UnavailableBlocks.push_back(DepBB);</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;    }</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;    <span class="comment">// DepInfo.isDef() here</span></div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *DepInst = DepInfo.<a class="code" href="classllvm_1_1MemDepResult.html#a8452eb6508c00e2b6d56926bebc79f57">getInst</a>();</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;    <span class="comment">// Loading the allocation -&gt; undef.</span></div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;    <span class="keywordflow">if</span> (isa&lt;AllocaInst&gt;(DepInst) || <a class="code" href="namespacellvm.html#a2658c0d02aefac95af1af537f4180cb2">isMallocLikeFn</a>(DepInst, TLI) ||</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;        <span class="comment">// Loading immediately after lifetime begin -&gt; undef.</span></div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;        <a class="code" href="GVN_8cpp.html#ab1faa49b43014e07caaf2bf2d3db07e4">isLifetimeStart</a>(DepInst)) {</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;      ValuesPerBlock.push_back(<a class="code" href="Target_2PowerPC_2README_8txt.html#a1c23e7f459a1051c48b302e7f4ff100e">AvailableValueInBlock::get</a>(DepBB,</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;                                             <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(LI-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())));</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;    }</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> = dyn_cast&lt;StoreInst&gt;(DepInst)) {</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;      <span class="comment">// Reject loads and stores that are to the same address but are of</span></div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;      <span class="comment">// different types if we have to.</span></div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;getValueOperand()-&gt;getType() != LI-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()) {</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;        <span class="comment">// If the stored value is larger or equal to the loaded value, we can</span></div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;        <span class="comment">// reuse it.</span></div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;        <span class="keywordflow">if</span> (TD == 0 || !<a class="code" href="GVN_8cpp.html#a3455164f36b257abea8311bb9db5b2b1">CanCoerceMustAliasedValueToLoad</a>(<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;getValueOperand(),</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;                                                        LI-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), *TD)) {</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;          UnavailableBlocks.push_back(DepBB);</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;        }</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;      }</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;      ValuesPerBlock.push_back(<a class="code" href="Target_2PowerPC_2README_8txt.html#a1c23e7f459a1051c48b302e7f4ff100e">AvailableValueInBlock::get</a>(DepBB,</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;                                                         <a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;getValueOperand()));</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    }</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *<a class="code" href="namespacellvm_1_1A64DB.html#a6fce8157775f3ec93f326b52b0f1e0f5ad61b145eb8cbab18feb1b2e2ce269a7e">LD</a> = dyn_cast&lt;LoadInst&gt;(DepInst)) {</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;      <span class="comment">// If the types mismatch and we can&#39;t handle it, reject reuse of the load.</span></div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1A64DB.html#a6fce8157775f3ec93f326b52b0f1e0f5ad61b145eb8cbab18feb1b2e2ce269a7e">LD</a>-&gt;getType() != LI-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()) {</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;        <span class="comment">// If the stored value is larger or equal to the loaded value, we can</span></div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;        <span class="comment">// reuse it.</span></div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;        <span class="keywordflow">if</span> (TD == 0 || !<a class="code" href="GVN_8cpp.html#a3455164f36b257abea8311bb9db5b2b1">CanCoerceMustAliasedValueToLoad</a>(<a class="code" href="namespacellvm_1_1A64DB.html#a6fce8157775f3ec93f326b52b0f1e0f5ad61b145eb8cbab18feb1b2e2ce269a7e">LD</a>, LI-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(),*TD)){</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;          UnavailableBlocks.push_back(DepBB);</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;        }</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;      }</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;      ValuesPerBlock.push_back(AvailableValueInBlock::getLoad(DepBB, <a class="code" href="namespacellvm_1_1A64DB.html#a6fce8157775f3ec93f326b52b0f1e0f5ad61b145eb8cbab18feb1b2e2ce269a7e">LD</a>));</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    }</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    UnavailableBlocks.push_back(DepBB);</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;  }</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;}</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;<span class="keywordtype">bool</span> GVN::PerformLoadPRE(<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI, AvailValInBlkVect &amp;ValuesPerBlock, </div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;                         UnavailBlkVect &amp;UnavailableBlocks) {</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;  <span class="comment">// Okay, we have *some* definitions of the value.  This means that the value</span></div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;  <span class="comment">// is available in some of our (transitive) predecessors.  Lets think about</span></div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;  <span class="comment">// doing PRE of this load.  This will involve inserting a new load into the</span></div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;  <span class="comment">// predecessor when it&#39;s not available.  We could do this in general, but</span></div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;  <span class="comment">// prefer to not increase code size.  As such, we only do this when we know</span></div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;  <span class="comment">// that we only have to insert *one* load (which means we&#39;re basically moving</span></div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;  <span class="comment">// the load, not inserting a new one).</span></div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 4&gt;</a> Blockers;</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = UnavailableBlocks.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;    Blockers.<a class="code" href="classllvm_1_1SmallPtrSet.html#a9b6dd0fc7a648a939e571246045b673e">insert</a>(UnavailableBlocks[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;  <span class="comment">// Let&#39;s find the first basic block with more than one predecessor.  Walk</span></div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;  <span class="comment">// backwards through predecessors if needed.</span></div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *LoadBB = LI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *TmpBB = LoadBB;</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;  <span class="keywordflow">while</span> (TmpBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5ef55181ae0bb0f5c561b9a29087b1e5">getSinglePredecessor</a>()) {</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;    TmpBB = TmpBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5ef55181ae0bb0f5c561b9a29087b1e5">getSinglePredecessor</a>();</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;    <span class="keywordflow">if</span> (TmpBB == LoadBB) <span class="comment">// Infinite (unreachable) loop.</span></div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    <span class="keywordflow">if</span> (Blockers.<a class="code" href="classllvm_1_1SmallPtrSet.html#a2ced6343b8ad006a757059554bbf9f37">count</a>(TmpBB))</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    <span class="comment">// If any of these blocks has more than one successor (i.e. if the edge we</span></div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;    <span class="comment">// just traversed was critical), then there are other paths through this</span></div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;    <span class="comment">// block along which the load may not be anticipated.  Hoisting the load</span></div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;    <span class="comment">// above this block would be adding the load to execution paths along</span></div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;    <span class="comment">// which it was not previously executed.</span></div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;    <span class="keywordflow">if</span> (TmpBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1TerminatorInst.html#a4c26d3b92af99a6c8defd89a2d39ca32">getNumSuccessors</a>() != 1)</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;  }</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;  assert(TmpBB);</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;  LoadBB = TmpBB;</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;  <span class="comment">// Check to see how many predecessors have the loaded value fully</span></div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;  <span class="comment">// available.</span></div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;BasicBlock*, Value*&gt;</a> PredLoads;</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;BasicBlock*, char&gt;</a> FullyAvailableBlocks;</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = ValuesPerBlock.size(); i != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    FullyAvailableBlocks[ValuesPerBlock[i].<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>] = <span class="keyword">true</span>;</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = UnavailableBlocks.size(); i != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;    FullyAvailableBlocks[UnavailableBlocks[i]] = <span class="keyword">false</span>;</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 4&gt;</a> CriticalEdgePred;</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PredIterator.html">pred_iterator</a> PI = <a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(LoadBB), E = <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(LoadBB);</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;       PI != E; ++PI) {</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred = *PI;</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="GVN_8cpp.html#a0f8c728bc2ed20849bdc6b61d85f4bb2">IsValueFullyAvailableInBlock</a>(Pred, FullyAvailableBlocks, 0)) {</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    }</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;    PredLoads[Pred] = 0;</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    <span class="keywordflow">if</span> (Pred-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1TerminatorInst.html#a4c26d3b92af99a6c8defd89a2d39ca32">getNumSuccessors</a>() != 1) {</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;      <span class="keywordflow">if</span> (isa&lt;IndirectBrInst&gt;(Pred-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>())) {</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;COULD NOT PRE LOAD BECAUSE OF INDBR CRITICAL EDGE &#39;&quot;</span></div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;              &lt;&lt; Pred-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt; <span class="stringliteral">&quot;&#39;: &quot;</span> &lt;&lt; *LI &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;      }</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;      <span class="keywordflow">if</span> (LoadBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a3075a9eef753018bed561df31f38dc23">isLandingPad</a>()) {</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;              &lt;&lt; <span class="stringliteral">&quot;COULD NOT PRE LOAD BECAUSE OF LANDING PAD CRITICAL EDGE &#39;&quot;</span></div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;              &lt;&lt; Pred-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt; <span class="stringliteral">&quot;&#39;: &quot;</span> &lt;&lt; *LI &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;      }</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;      CriticalEdgePred.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Pred);</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    }</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;  }</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;  <span class="comment">// Decide whether PRE is profitable for this load.</span></div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;  <span class="keywordtype">unsigned</span> NumUnavailablePreds = PredLoads.<a class="code" href="classllvm_1_1DenseMapBase.html#a957e195a6793721ddc164589934b8f89">size</a>();</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;  assert(NumUnavailablePreds != 0 &amp;&amp;</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;         <span class="stringliteral">&quot;Fully available value should already be eliminated!&quot;</span>);</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;  <span class="comment">// If this load is unavailable in multiple predecessors, reject it.</span></div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;  <span class="comment">// FIXME: If we could restructure the CFG, we could make a common pred with</span></div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;  <span class="comment">// all the preds that don&#39;t have an available LI and insert a new load into</span></div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;  <span class="comment">// that one block.</span></div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;  <span class="keywordflow">if</span> (NumUnavailablePreds != 1)</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;  <span class="comment">// Split critical edges, and update the unavailable predecessors accordingly.</span></div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classT.html">SmallVectorImpl&lt;BasicBlock *&gt;::iterator</a> I = CriticalEdgePred.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(),</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;         E = CriticalEdgePred.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>(); I != E; I++) {</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OrigPred = *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewPred = splitCriticalEdges(OrigPred, LoadBB);</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;    PredLoads.<a class="code" href="classllvm_1_1DenseMapBase.html#a269c7b8adcd29645a4f901196fc08806">erase</a>(OrigPred);</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;    PredLoads[NewPred] = 0;</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Split critical edge &quot;</span> &lt;&lt; OrigPred-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt; <span class="stringliteral">&quot;-&gt;&quot;</span></div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;                 &lt;&lt; LoadBB-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;  }</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;  <span class="comment">// Check if the load can safely be moved to all the unavailable predecessors.</span></div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;  <span class="keywordtype">bool</span> CanDoPRE = <span class="keyword">true</span>;</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction*, 8&gt;</a> NewInsts;</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;BasicBlock*, Value*&gt;::iterator</a> I = PredLoads.<a class="code" href="classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">begin</a>(),</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;         E = PredLoads.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>(); I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *UnavailablePred = I-&gt;first;</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    <span class="comment">// Do PHI translation to get its value in the predecessor if necessary.  The</span></div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    <span class="comment">// returned pointer (if non-null) is guaranteed to dominate UnavailablePred.</span></div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;    <span class="comment">// If all preds have a single successor, then we know it is safe to insert</span></div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;    <span class="comment">// the load on the pred (?!?), so we can insert code to materialize the</span></div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;    <span class="comment">// pointer if it is not available.</span></div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;    <a class="code" href="classllvm_1_1PHITransAddr.html">PHITransAddr</a> Address(LI-&gt;<a class="code" href="classllvm_1_1LoadInst.html#ad47eefa1d094f60494b6b927061ca001">getPointerOperand</a>(), TD);</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *LoadPtr = 0;</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;    LoadPtr = Address.PHITranslateWithInsertion(LoadBB, UnavailablePred,</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;                                                *DT, NewInsts);</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;    <span class="comment">// If we couldn&#39;t find or insert a computation of this phi translated value,</span></div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;    <span class="comment">// we fail PRE.</span></div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;    <span class="keywordflow">if</span> (LoadPtr == 0) {</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;COULDN&#39;T INSERT PHI TRANSLATED VALUE OF: &quot;</span></div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;            &lt;&lt; *LI-&gt;<a class="code" href="classllvm_1_1LoadInst.html#ad47eefa1d094f60494b6b927061ca001">getPointerOperand</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;      CanDoPRE = <span class="keyword">false</span>;</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    }</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    I-&gt;second = LoadPtr;</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;  }</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;  <span class="keywordflow">if</span> (!CanDoPRE) {</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    <span class="keywordflow">while</span> (!NewInsts.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>()) {</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I = NewInsts.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">pop_back_val</a>();</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;      <span class="keywordflow">if</span> (MD) MD-&gt;removeInstruction(I);</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;      I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    }</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    <span class="comment">// HINT:Don&#39;t revert the edge-splitting as following transformation may </span></div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;    <span class="comment">// also need to split these critial edges.</span></div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;    <span class="keywordflow">return</span> !CriticalEdgePred.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>();</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;  }</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;  <span class="comment">// Okay, we can eliminate this load by inserting a reload in the predecessor</span></div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;  <span class="comment">// and using PHI construction to get the value in the other predecessors, do</span></div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;  <span class="comment">// it.</span></div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;GVN REMOVING PRE LOAD: &quot;</span> &lt;&lt; *LI &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<span class="keywordflow">if</span> (!NewInsts.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>())</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;INSERTED &quot;</span> &lt;&lt; NewInsts.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>() &lt;&lt; <span class="stringliteral">&quot; INSTS: &quot;</span></div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;                 &lt;&lt; *NewInsts.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#acd9e771a3296c6b24146955754620557">back</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;  <span class="comment">// Assign value numbers to the new instructions.</span></div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = NewInsts.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); i != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    <span class="comment">// FIXME: We really _ought_ to insert these value numbers into their</span></div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;    <span class="comment">// parent&#39;s availability map.  However, in doing so, we risk getting into</span></div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    <span class="comment">// ordering issues.  If a block hasn&#39;t been processed yet, we would be</span></div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    <span class="comment">// marking a value as AVAIL-IN, which isn&#39;t what we intend.</span></div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;    VN.lookup_or_add(NewInsts[i]);</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;  }</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;BasicBlock*, Value*&gt;::iterator</a> I = PredLoads.<a class="code" href="classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">begin</a>(),</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;         E = PredLoads.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>(); I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *UnavailablePred = I-&gt;first;</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *LoadPtr = I-&gt;second;</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewLoad = <span class="keyword">new</span> <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a>(LoadPtr, LI-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.pre&quot;</span>, <span class="keyword">false</span>,</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;                                        LI-&gt;<a class="code" href="classllvm_1_1LoadInst.html#ad1168fc42bcba1b71217a4969483671a">getAlignment</a>(),</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;                                        UnavailablePred-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>());</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    <span class="comment">// Transfer the old load&#39;s TBAA tag to the new load.</span></div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *Tag = LI-&gt;<a class="code" href="classllvm_1_1Instruction.html#aafa29112cbe02e4adc9b36752c771991">getMetadata</a>(<a class="code" href="classllvm_1_1LLVMContext.html#a0869c4dfee48696ce863fcd367eba52da66682b7e33233c8e51196bbf274726a2">LLVMContext::MD_tbaa</a>))</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;      NewLoad-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">setMetadata</a>(<a class="code" href="classllvm_1_1LLVMContext.html#a0869c4dfee48696ce863fcd367eba52da66682b7e33233c8e51196bbf274726a2">LLVMContext::MD_tbaa</a>, Tag);</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;    <span class="comment">// Transfer DebugLoc.</span></div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;    NewLoad-&gt;<a class="code" href="classllvm_1_1Instruction.html#a7bd545769621a0a9d2cfb074f86f4295">setDebugLoc</a>(LI-&gt;<a class="code" href="classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">getDebugLoc</a>());</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;    <span class="comment">// Add the newly created load.</span></div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;    ValuesPerBlock.push_back(<a class="code" href="Target_2PowerPC_2README_8txt.html#a1c23e7f459a1051c48b302e7f4ff100e">AvailableValueInBlock::get</a>(UnavailablePred,</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;                                                        NewLoad));</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;    MD-&gt;invalidateCachedPointerInfo(LoadPtr);</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;GVN INSERTED &quot;</span> &lt;&lt; *NewLoad &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;  }</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;  <span class="comment">// Perform PHI construction.</span></div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="GVN_8cpp.html#a61d5060162c77138d1c3244c8e001ea2">ConstructSSAForLoadSet</a>(LI, ValuesPerBlock, *<span class="keyword">this</span>);</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;  LI-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(V);</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;  <span class="keywordflow">if</span> (isa&lt;PHINode&gt;(V))</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;    V-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(LI);</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;  <span class="keywordflow">if</span> (V-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a8eafa71cf399da8f21b2af5549f3f9e7">getScalarType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>())</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    MD-&gt;invalidateCachedPointerInfo(V);</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;  markInstructionForDeletion(LI);</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;  ++NumPRELoad;</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;}</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;<span class="comment">/// processNonLocalLoad - Attempt to eliminate a load whose dependencies are</span></div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;<span class="comment">/// non-local by performing PHI construction.</span></div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> GVN::processNonLocalLoad(<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI) {</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;  <span class="comment">// Step 1: Find the non-local dependencies of the load.</span></div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;  LoadDepVect Deps;</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;  <a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html">AliasAnalysis::Location</a> Loc = VN.getAliasAnalysis()-&gt;getLocation(LI);</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;  MD-&gt;getNonLocalPointerDependency(Loc, <span class="keyword">true</span>, LI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>(), Deps);</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;  <span class="comment">// If we had to process more than one hundred blocks to find the</span></div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;  <span class="comment">// dependencies, this load isn&#39;t worth worrying about.  Optimizing</span></div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;  <span class="comment">// it will be too expensive.</span></div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;  <span class="keywordtype">unsigned</span> NumDeps = Deps.size();</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;  <span class="keywordflow">if</span> (NumDeps &gt; 100)</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;  <span class="comment">// If we had a phi translation failure, we&#39;ll have a single entry which is a</span></div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;  <span class="comment">// clobber in the current block.  Reject this early.</span></div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;  <span class="keywordflow">if</span> (NumDeps == 1 &amp;&amp;</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;      !Deps[0].getResult().isDef() &amp;&amp; !Deps[0].getResult().isClobber()) {</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;GVN: non-local load &quot;</span>;</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;      <a class="code" href="namespacellvm.html#ae712552495c21ee77ad82ced255ad6df">WriteAsOperand</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>(), LI);</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; has unknown dependencies\n&quot;</span>;</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    );</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;  }</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;  <span class="comment">// Step 2: Analyze the availability of the load</span></div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;  AvailValInBlkVect ValuesPerBlock;</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;  UnavailBlkVect UnavailableBlocks;</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;  AnalyzeLoadAvailability(LI, Deps, ValuesPerBlock, UnavailableBlocks);</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;  <span class="comment">// If we have no predecessors that produce a known value for this load, exit</span></div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;  <span class="comment">// early.</span></div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;  <span class="keywordflow">if</span> (ValuesPerBlock.empty())</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;  <span class="comment">// Step 3: Eliminate fully redundancy.</span></div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;  <span class="comment">// If all of the instructions we depend on produce a known value for this</span></div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;  <span class="comment">// load, then it is fully redundant and we can use PHI insertion to compute</span></div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;  <span class="comment">// its value.  Insert PHIs and remove the fully redundant value now.</span></div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;  <span class="keywordflow">if</span> (UnavailableBlocks.empty()) {</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;GVN REMOVING NONLOCAL LOAD: &quot;</span> &lt;&lt; *LI &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;    <span class="comment">// Perform PHI construction.</span></div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="GVN_8cpp.html#a61d5060162c77138d1c3244c8e001ea2">ConstructSSAForLoadSet</a>(LI, ValuesPerBlock, *<span class="keyword">this</span>);</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;    LI-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(V);</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;    <span class="keywordflow">if</span> (isa&lt;PHINode&gt;(V))</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;      V-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(LI);</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;    <span class="keywordflow">if</span> (V-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a8eafa71cf399da8f21b2af5549f3f9e7">getScalarType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>())</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;      MD-&gt;invalidateCachedPointerInfo(V);</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;    markInstructionForDeletion(LI);</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;    ++NumGVNLoad;</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;  }</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;  <span class="comment">// Step 4: Eliminate partial redundancy.</span></div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="GVN_8cpp.html#a9b51dd24187fb51cb70169bb921da81b">EnablePRE</a> || !<a class="code" href="GVN_8cpp.html#a0f919fce34215a248b020304ab0f121b">EnableLoadPRE</a>)</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;  <span class="keywordflow">return</span> PerformLoadPRE(LI, ValuesPerBlock, UnavailableBlocks);</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;}</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;</div><div class="line"><a name="l01760"></a><span class="lineno"><a class="line" href="GVN_8cpp.html#aec2b1a93f189c825a7d2e1ae14f1dc32"> 1760</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="GVN_8cpp.html#aec2b1a93f189c825a7d2e1ae14f1dc32">patchReplacementInstruction</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I, <a class="code" href="classllvm_1_1Value.html">Value</a> *Repl) {</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;  <span class="comment">// Patch the replacement so that it is not more restrictive than the value</span></div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;  <span class="comment">// being replaced.</span></div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;  <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *Op = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a>&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;  <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *ReplOp = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a>&gt;(Repl);</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;  <span class="keywordflow">if</span> (Op &amp;&amp; ReplOp &amp;&amp; isa&lt;OverflowingBinaryOperator&gt;(Op) &amp;&amp;</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;      isa&lt;OverflowingBinaryOperator&gt;(ReplOp)) {</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;    <span class="keywordflow">if</span> (ReplOp-&gt;hasNoSignedWrap() &amp;&amp; !Op-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a07783e6f39803037259a1ebe376c2b1e">hasNoSignedWrap</a>())</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;      ReplOp-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a21ce697328893029ae2c63974061a294">setHasNoSignedWrap</a>(<span class="keyword">false</span>);</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;    <span class="keywordflow">if</span> (ReplOp-&gt;hasNoUnsignedWrap() &amp;&amp; !Op-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a5b6cd6c043f54b40899aff62e6e40488">hasNoUnsignedWrap</a>())</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;      ReplOp-&gt;setHasNoUnsignedWrap(<span class="keyword">false</span>);</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;  }</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *ReplInst = dyn_cast&lt;Instruction&gt;(Repl)) {</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;unsigned, MDNode*&gt;</a>, 4&gt; Metadata;</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;    ReplInst-&gt;getAllMetadataOtherThanDebugLoc(Metadata);</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a> = Metadata.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1EngineKind.html#a9df47239a42cd9621ac26d9ecbd57441">Kind</a> = Metadata[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].first;</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;      <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *IMD = I-&gt;<a class="code" href="classllvm_1_1Instruction.html#aafa29112cbe02e4adc9b36752c771991">getMetadata</a>(Kind);</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;      <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *ReplMD = Metadata[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].second;</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;      <span class="keywordflow">switch</span>(Kind) {</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;        ReplInst-&gt;setMetadata(Kind, NULL); <span class="comment">// Remove unknown metadata</span></div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1LLVMContext.html#a0869c4dfee48696ce863fcd367eba52da1f686cbc5b60419e0698adf924dffa43">LLVMContext::MD_dbg</a>:</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;        <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;getAllMetadataOtherThanDebugLoc returned a MD_dbg&quot;</span>);</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1LLVMContext.html#a0869c4dfee48696ce863fcd367eba52da66682b7e33233c8e51196bbf274726a2">LLVMContext::MD_tbaa</a>:</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;        ReplInst-&gt;setMetadata(Kind, <a class="code" href="classllvm_1_1MDNode.html#a3c210e8905029a012df3384a7eeb63ad">MDNode::getMostGenericTBAA</a>(IMD, ReplMD));</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1LLVMContext.html#a0869c4dfee48696ce863fcd367eba52da75f0c503935327915cc9325b04f23de4">LLVMContext::MD_range</a>:</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;        ReplInst-&gt;setMetadata(Kind, <a class="code" href="classllvm_1_1MDNode.html#aac6e3a0dec40a6721857cbbd4330039f">MDNode::getMostGenericRange</a>(IMD, ReplMD));</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1LLVMContext.html#a0869c4dfee48696ce863fcd367eba52da31130c233c11d5b171bae969ee4c8af8">LLVMContext::MD_prof</a>:</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;        <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;MD_prof in a non terminator instruction&quot;</span>);</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1LLVMContext.html#a0869c4dfee48696ce863fcd367eba52da1b73df7e27f0fa94e338ffc4fac9daf3">LLVMContext::MD_fpmath</a>:</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;        ReplInst-&gt;setMetadata(Kind, <a class="code" href="classllvm_1_1MDNode.html#a9d9f2d817781a31c771406d1f0acc9fb">MDNode::getMostGenericFPMath</a>(IMD, ReplMD));</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;      }</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;    }</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;  }</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;}</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;</div><div class="line"><a name="l01802"></a><span class="lineno"><a class="line" href="GVN_8cpp.html#ab85468c2bfc360b5d4bc512d241d1440"> 1802</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="GVN_8cpp.html#ab85468c2bfc360b5d4bc512d241d1440">patchAndReplaceAllUsesWith</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I, <a class="code" href="classllvm_1_1Value.html">Value</a> *Repl) {</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;  <a class="code" href="GVN_8cpp.html#aec2b1a93f189c825a7d2e1ae14f1dc32">patchReplacementInstruction</a>(I, Repl);</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;  I-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(Repl);</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;}</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;<span class="comment">/// processLoad - Attempt to eliminate a load, first by eliminating it</span></div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;<span class="comment">/// locally, and then attempting non-local elimination if that fails.</span></div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> GVN::processLoad(<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *L) {</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;  <span class="keywordflow">if</span> (!MD)</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;  <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1LoadInst.html#a156c478ee8e7d1602143cdbad4bd5385">isSimple</a>())</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;  <span class="keywordflow">if</span> (L-&gt;<a class="code" href="classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">use_empty</a>()) {</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;    markInstructionForDeletion(L);</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;  }</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;  <span class="comment">// ... to a pointer that has been loaded from before...</span></div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;  <a class="code" href="classllvm_1_1MemDepResult.html">MemDepResult</a> Dep = MD-&gt;getDependency(L);</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;  <span class="comment">// If we have a clobber and target data is around, see if this is a clobber</span></div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;  <span class="comment">// that we can fix up through code synthesis.</span></div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;  <span class="keywordflow">if</span> (Dep.<a class="code" href="classllvm_1_1MemDepResult.html#ae409b288c7f70a6c57586535abed3808">isClobber</a>() &amp;&amp; TD) {</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;    <span class="comment">// Check to see if we have something like this:</span></div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;    <span class="comment">//   store i32 123, i32* %P</span></div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;    <span class="comment">//   %A = bitcast i32* %P to i8*</span></div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;    <span class="comment">//   %B = gep i8* %A, i32 1</span></div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;    <span class="comment">//   %C = load i8* %B</span></div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;    <span class="comment">// We could do that by recognizing if the clobber instructions are obviously</span></div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;    <span class="comment">// a common base + constant offset, and if the previous store (or memset)</span></div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;    <span class="comment">// completely covers this load.  This sort of thing can happen in bitfield</span></div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;    <span class="comment">// access code.</span></div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *AvailVal = 0;</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *DepSI = dyn_cast&lt;StoreInst&gt;(Dep.<a class="code" href="classllvm_1_1MemDepResult.html#a8452eb6508c00e2b6d56926bebc79f57">getInst</a>())) {</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;      <span class="keywordtype">int</span> Offset = <a class="code" href="GVN_8cpp.html#a06110688fb79e0a9abb3971d66b25bf9">AnalyzeLoadFromClobberingStore</a>(L-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(),</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;                                                  L-&gt;<a class="code" href="classllvm_1_1LoadInst.html#ad47eefa1d094f60494b6b927061ca001">getPointerOperand</a>(),</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;                                                  DepSI, *TD);</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;      <span class="keywordflow">if</span> (Offset != -1)</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;        AvailVal = <a class="code" href="GVN_8cpp.html#a06c6349768c68b00910351436ff995b8">GetStoreValueForLoad</a>(DepSI-&gt;getValueOperand(), Offset,</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;                                        L-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), L, *TD);</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;    }</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;    <span class="comment">// Check to see if we have something like this:</span></div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;    <span class="comment">//    load i32* P</span></div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;    <span class="comment">//    load i8* (P+1)</span></div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;    <span class="comment">// if we have this, replace the later with an extraction from the former.</span></div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *DepLI = dyn_cast&lt;LoadInst&gt;(Dep.<a class="code" href="classllvm_1_1MemDepResult.html#a8452eb6508c00e2b6d56926bebc79f57">getInst</a>())) {</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;      <span class="comment">// If this is a clobber and L is the first instruction in its block, then</span></div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;      <span class="comment">// we have the first instruction in the entry block.</span></div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;      <span class="keywordflow">if</span> (DepLI == L)</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;      <span class="keywordtype">int</span> Offset = <a class="code" href="GVN_8cpp.html#aa306b8d484291ede665613aac3084548">AnalyzeLoadFromClobberingLoad</a>(L-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(),</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;                                                 L-&gt;<a class="code" href="classllvm_1_1LoadInst.html#ad47eefa1d094f60494b6b927061ca001">getPointerOperand</a>(),</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;                                                 DepLI, *TD);</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;      <span class="keywordflow">if</span> (Offset != -1)</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;        AvailVal = <a class="code" href="GVN_8cpp.html#a5a14f90fae625ff076364378de0c57ed">GetLoadValueForLoad</a>(DepLI, Offset, L-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), L, *<span class="keyword">this</span>);</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;    }</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;    <span class="comment">// If the clobbering value is a memset/memcpy/memmove, see if we can forward</span></div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;    <span class="comment">// a value on from it.</span></div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemIntrinsic.html">MemIntrinsic</a> *DepMI = dyn_cast&lt;MemIntrinsic&gt;(Dep.<a class="code" href="classllvm_1_1MemDepResult.html#a8452eb6508c00e2b6d56926bebc79f57">getInst</a>())) {</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;      <span class="keywordtype">int</span> Offset = <a class="code" href="GVN_8cpp.html#a403222386aafded02ab0f7903ada29b9">AnalyzeLoadFromClobberingMemInst</a>(L-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(),</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;                                                    L-&gt;<a class="code" href="classllvm_1_1LoadInst.html#ad47eefa1d094f60494b6b927061ca001">getPointerOperand</a>(),</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;                                                    DepMI, *TD);</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;      <span class="keywordflow">if</span> (Offset != -1)</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;        AvailVal = <a class="code" href="GVN_8cpp.html#a12252830c9aff84c819c6afb1ac4fb70">GetMemInstValueForLoad</a>(DepMI, Offset, L-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), L, *TD);</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;    }</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;    <span class="keywordflow">if</span> (AvailVal) {</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;GVN COERCED INST:\n&quot;</span> &lt;&lt; *Dep.<a class="code" href="classllvm_1_1MemDepResult.html#a8452eb6508c00e2b6d56926bebc79f57">getInst</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;            &lt;&lt; *AvailVal &lt;&lt; <span class="charliteral">&#39;\n&#39;</span> &lt;&lt; *L &lt;&lt; <span class="stringliteral">&quot;\n\n\n&quot;</span>);</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;      <span class="comment">// Replace the load!</span></div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;      L-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(AvailVal);</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;      <span class="keywordflow">if</span> (AvailVal-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a8eafa71cf399da8f21b2af5549f3f9e7">getScalarType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>())</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;        MD-&gt;invalidateCachedPointerInfo(AvailVal);</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;      markInstructionForDeletion(L);</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;      ++NumGVNLoad;</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;    }</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;  }</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;  <span class="comment">// If the value isn&#39;t available, don&#39;t do anything!</span></div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;  <span class="keywordflow">if</span> (Dep.<a class="code" href="classllvm_1_1MemDepResult.html#ae409b288c7f70a6c57586535abed3808">isClobber</a>()) {</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;      <span class="comment">// fast print dep, using operator&lt;&lt; on instruction is too slow.</span></div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;GVN: load &quot;</span>;</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;      <a class="code" href="namespacellvm.html#ae712552495c21ee77ad82ced255ad6df">WriteAsOperand</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>(), L);</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I = Dep.<a class="code" href="classllvm_1_1MemDepResult.html#a8452eb6508c00e2b6d56926bebc79f57">getInst</a>();</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; is clobbered by &quot;</span> &lt;&lt; *I &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;    );</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;  }</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;  <span class="comment">// If it is defined in another block, try harder.</span></div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;  <span class="keywordflow">if</span> (Dep.<a class="code" href="classllvm_1_1MemDepResult.html#a2a64d8f5153ebc0e8c08d0702c2c4aab">isNonLocal</a>())</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;    <span class="keywordflow">return</span> processNonLocalLoad(L);</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;  <span class="keywordflow">if</span> (!Dep.<a class="code" href="classllvm_1_1MemDepResult.html#aa6d7a9e81b4749376498640463eb5dc2">isDef</a>()) {</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;      <span class="comment">// fast print dep, using operator&lt;&lt; on instruction is too slow.</span></div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;GVN: load &quot;</span>;</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;      <a class="code" href="namespacellvm.html#ae712552495c21ee77ad82ced255ad6df">WriteAsOperand</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>(), L);</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; has unknown dependence\n&quot;</span>;</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;    );</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;  }</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *DepInst = Dep.<a class="code" href="classllvm_1_1MemDepResult.html#a8452eb6508c00e2b6d56926bebc79f57">getInst</a>();</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *DepSI = dyn_cast&lt;StoreInst&gt;(DepInst)) {</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *StoredVal = DepSI-&gt;getValueOperand();</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;    <span class="comment">// The store and load are to a must-aliased pointer, but they may not</span></div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;    <span class="comment">// actually have the same type.  See if we know how to reuse the stored</span></div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;    <span class="comment">// value (depending on its type).</span></div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;    <span class="keywordflow">if</span> (StoredVal-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() != L-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()) {</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;      <span class="keywordflow">if</span> (TD) {</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;        StoredVal = <a class="code" href="GVN_8cpp.html#a1acb03d8fcbe31554aa6049a77790fe9">CoerceAvailableValueToLoadType</a>(StoredVal, L-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(),</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;                                                   L, *TD);</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;        <span class="keywordflow">if</span> (StoredVal == 0)</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;GVN COERCED STORE:\n&quot;</span> &lt;&lt; *DepSI &lt;&lt; <span class="charliteral">&#39;\n&#39;</span> &lt;&lt; *StoredVal</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;                     &lt;&lt; <span class="charliteral">&#39;\n&#39;</span> &lt;&lt; *L &lt;&lt; <span class="stringliteral">&quot;\n\n\n&quot;</span>);</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;      }</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;    }</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;    <span class="comment">// Remove it!</span></div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;    L-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(StoredVal);</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;    <span class="keywordflow">if</span> (StoredVal-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a8eafa71cf399da8f21b2af5549f3f9e7">getScalarType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>())</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;      MD-&gt;invalidateCachedPointerInfo(StoredVal);</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;    markInstructionForDeletion(L);</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;    ++NumGVNLoad;</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;  }</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *DepLI = dyn_cast&lt;LoadInst&gt;(DepInst)) {</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *AvailableVal = DepLI;</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;    <span class="comment">// The loads are of a must-aliased pointer, but they may not actually have</span></div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;    <span class="comment">// the same type.  See if we know how to reuse the previously loaded value</span></div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;    <span class="comment">// (depending on its type).</span></div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;    <span class="keywordflow">if</span> (DepLI-&gt;getType() != L-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()) {</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;      <span class="keywordflow">if</span> (TD) {</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;        AvailableVal = <a class="code" href="GVN_8cpp.html#a1acb03d8fcbe31554aa6049a77790fe9">CoerceAvailableValueToLoadType</a>(DepLI, L-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(),</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;                                                      L, *TD);</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;        <span class="keywordflow">if</span> (AvailableVal == 0)</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;GVN COERCED LOAD:\n&quot;</span> &lt;&lt; *DepLI &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; *AvailableVal</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;                     &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; *L &lt;&lt; <span class="stringliteral">&quot;\n\n\n&quot;</span>);</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;      }</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;    }</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;    <span class="comment">// Remove it!</span></div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;    <a class="code" href="GVN_8cpp.html#ab85468c2bfc360b5d4bc512d241d1440">patchAndReplaceAllUsesWith</a>(L, AvailableVal);</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;    <span class="keywordflow">if</span> (DepLI-&gt;getType()-&gt;getScalarType()-&gt;isPointerTy())</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;      MD-&gt;invalidateCachedPointerInfo(DepLI);</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;    markInstructionForDeletion(L);</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;    ++NumGVNLoad;</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;  }</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;  <span class="comment">// If this load really doesn&#39;t depend on anything, then we must be loading an</span></div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;  <span class="comment">// undef value.  This can happen when loading for a fresh allocation with no</span></div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;  <span class="comment">// intervening stores, for example.</span></div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;  <span class="keywordflow">if</span> (isa&lt;AllocaInst&gt;(DepInst) || <a class="code" href="namespacellvm.html#a2658c0d02aefac95af1af537f4180cb2">isMallocLikeFn</a>(DepInst, TLI)) {</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;    L-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(<a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(L-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;    markInstructionForDeletion(L);</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;    ++NumGVNLoad;</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;  }</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;  <span class="comment">// If this load occurs either right after a lifetime begin,</span></div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;  <span class="comment">// then the loaded value is undefined.</span></div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *II = dyn_cast&lt;IntrinsicInst&gt;(DepInst)) {</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;    <span class="keywordflow">if</span> (II-&gt;getIntrinsicID() == <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ae365354e47542c51f9bd46e329e3323e">Intrinsic::lifetime_start</a>) {</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;      L-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(<a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(L-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;      markInstructionForDeletion(L);</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;      ++NumGVNLoad;</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;    }</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;  }</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;}</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;<span class="comment">// findLeader - In order to find a leader for a given value number at a</span></div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;<span class="comment">// specific basic block, we first obtain the list of all Values for that number,</span></div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;<span class="comment">// and then scan the list to find one whose block dominates the block in</span></div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;<span class="comment">// question.  This is fast because dominator tree queries consist of only</span></div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;<span class="comment">// a few comparisons of DFS numbers.</span></div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *GVN::findLeader(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, uint32_t num) {</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;  LeaderTableEntry Vals = LeaderTable[num];</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;  <span class="keywordflow">if</span> (!Vals.Val) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Val = 0;</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;  <span class="keywordflow">if</span> (DT-&gt;dominates(Vals.BB, BB)) {</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;    Val = Vals.Val;</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;    <span class="keywordflow">if</span> (isa&lt;Constant&gt;(Val)) <span class="keywordflow">return</span> Val;</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;  }</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;  LeaderTableEntry* Next = Vals.Next;</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;  <span class="keywordflow">while</span> (Next) {</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;    <span class="keywordflow">if</span> (DT-&gt;dominates(Next-&gt;BB, BB)) {</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;      <span class="keywordflow">if</span> (isa&lt;Constant&gt;(Next-&gt;Val)) <span class="keywordflow">return</span> Next-&gt;Val;</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;      <a class="code" href="LLParser_8cpp.html#aae58e3df0180401e8f3ab75c18fbc07a">if</a> (!Val) Val = Next-&gt;Val;</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;    }</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;</div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;    Next = Next-&gt;Next;</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;  }</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;  <span class="keywordflow">return</span> Val;</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;}</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;<span class="comment">/// replaceAllDominatedUsesWith - Replace all uses of &#39;From&#39; with &#39;To&#39; if the</span></div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;<span class="comment">/// use is dominated by the given basic block.  Returns the number of uses that</span></div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;<span class="comment">/// were replaced.</span></div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;<span class="comment"></span><span class="keywordtype">unsigned</span> GVN::replaceAllDominatedUsesWith(<a class="code" href="classllvm_1_1Value.html">Value</a> *From, <a class="code" href="classllvm_1_1Value.html">Value</a> *To,</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;                                          <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlockEdge.html">BasicBlockEdge</a> &amp;Root) {</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;  <span class="keywordtype">unsigned</span> Count = 0;</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::use_iterator</a> UI = From-&gt;<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>(), UE = From-&gt;<a class="code" href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">use_end</a>();</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;       UI != UE; ) {</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;    <a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U = (UI++).getUse();</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;    <span class="keywordflow">if</span> (DT-&gt;dominates(Root, U)) {</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;      U.<a class="code" href="classllvm_1_1Use.html#a40360b4fa7b8e6920a68e5a8a0814f1f">set</a>(To);</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;      ++Count;</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;    }</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;  }</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;  <span class="keywordflow">return</span> Count;</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;}</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;<span class="comment">/// isOnlyReachableViaThisEdge - There is an edge from &#39;Src&#39; to &#39;Dst&#39;.  Return</span></div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;<span class="comment">/// true if every path from the entry block to &#39;Dst&#39; passes via this edge.  In</span></div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;<span class="comment">/// particular &#39;Dst&#39; must not be reachable via another edge from &#39;Src&#39;.</span></div><div class="line"><a name="l02046"></a><span class="lineno"><a class="line" href="GVN_8cpp.html#a7ecb019c18583eca74daad14ff133d54"> 2046</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="GVN_8cpp.html#a7ecb019c18583eca74daad14ff133d54">isOnlyReachableViaThisEdge</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlockEdge.html">BasicBlockEdge</a> &amp;E,</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;                                       <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT) {</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;  <span class="comment">// While in theory it is interesting to consider the case in which Dst has</span></div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;  <span class="comment">// more than one predecessor, because Dst might be part of a loop which is</span></div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;  <span class="comment">// only reachable from Src, in practice it is pointless since at the time</span></div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;  <span class="comment">// GVN runs all such loops have preheaders, which means that Dst will have</span></div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;  <span class="comment">// been changed to have only one predecessor, namely Src.</span></div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred = E.<a class="code" href="classllvm_1_1BasicBlockEdge.html#ae855b6a8f5e36aa51ee96ff018af63d1">getEnd</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5ef55181ae0bb0f5c561b9a29087b1e5">getSinglePredecessor</a>();</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Src = E.<a class="code" href="classllvm_1_1BasicBlockEdge.html#ae19ed5c4897c23cf94108549768fe2f4">getStart</a>();</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;  assert((!Pred || Pred == Src) &amp;&amp; <span class="stringliteral">&quot;No edge between these basic blocks!&quot;</span>);</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;  (void)Src;</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;  <span class="keywordflow">return</span> Pred != 0;</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;}</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;<span class="comment">/// propagateEquality - The given values are known to be equal in every block</span></div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;<span class="comment">/// dominated by &#39;Root&#39;.  Exploit this, for example by replacing &#39;LHS&#39; with</span></div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;<span class="comment">/// &#39;RHS&#39; everywhere in the scope.  Returns whether a change was made.</span></div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> GVN::propagateEquality(<a class="code" href="classllvm_1_1Value.html">Value</a> *LHS, <a class="code" href="classllvm_1_1Value.html">Value</a> *RHS,</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;                            <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlockEdge.html">BasicBlockEdge</a> &amp;Root) {</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;Value*, Value*&gt;</a>, 4&gt; Worklist;</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;  Worklist.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(std::make_pair(LHS, RHS));</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;  <span class="comment">// For speed, compute a conservative fast approximation to</span></div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;  <span class="comment">// DT-&gt;dominates(Root, Root.getEnd());</span></div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;  <span class="keywordtype">bool</span> RootDominatesEnd = <a class="code" href="GVN_8cpp.html#a7ecb019c18583eca74daad14ff133d54">isOnlyReachableViaThisEdge</a>(Root, DT);</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;  <span class="keywordflow">while</span> (!Worklist.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>()) {</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;    std::pair&lt;Value*, Value*&gt; Item = Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">pop_back_val</a>();</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;    LHS = Item.first; RHS = Item.second;</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;    <span class="keywordflow">if</span> (LHS == RHS) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;    assert(LHS-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() == RHS-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() &amp;&amp; <span class="stringliteral">&quot;Equality but unequal types!&quot;</span>);</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;    <span class="comment">// Don&#39;t try to propagate equalities between constants.</span></div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;    <span class="keywordflow">if</span> (isa&lt;Constant&gt;(LHS) &amp;&amp; isa&lt;Constant&gt;(RHS)) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;    <span class="comment">// Prefer a constant on the right-hand side, or an Argument if no constants.</span></div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;    <span class="keywordflow">if</span> (isa&lt;Constant&gt;(LHS) || (isa&lt;Argument&gt;(LHS) &amp;&amp; !isa&lt;Constant&gt;(RHS)))</div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;      <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(LHS, RHS);</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;    assert((isa&lt;Argument&gt;(LHS) || isa&lt;Instruction&gt;(LHS)) &amp;&amp; <span class="stringliteral">&quot;Unexpected value!&quot;</span>);</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;    <span class="comment">// If there is no obvious reason to prefer the left-hand side over the right-</span></div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;    <span class="comment">// hand side, ensure the longest lived term is on the right-hand side, so the</span></div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;    <span class="comment">// shortest lived term will be replaced by the longest lived.  This tends to</span></div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;    <span class="comment">// expose more simplifications.</span></div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;    uint32_t LVN = VN.lookup_or_add(LHS);</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;    <span class="keywordflow">if</span> ((isa&lt;Argument&gt;(LHS) &amp;&amp; isa&lt;Argument&gt;(RHS)) ||</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;        (isa&lt;Instruction&gt;(LHS) &amp;&amp; isa&lt;Instruction&gt;(RHS))) {</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;      <span class="comment">// Move the &#39;oldest&#39; value to the right-hand side, using the value number as</span></div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;      <span class="comment">// a proxy for age.</span></div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;      uint32_t RVN = VN.lookup_or_add(RHS);</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;      <span class="keywordflow">if</span> (LVN &lt; RVN) {</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;        <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(LHS, RHS);</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;        LVN = RVN;</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;      }</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;    }</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;    <span class="comment">// If value numbering later sees that an instruction in the scope is equal</span></div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;    <span class="comment">// to &#39;LHS&#39; then ensure it will be turned into &#39;RHS&#39;.  In order to preserve</span></div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;    <span class="comment">// the invariant that instructions only occur in the leader table for their</span></div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;    <span class="comment">// own value number (this is used by removeFromLeaderTable), do not do this</span></div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;    <span class="comment">// if RHS is an instruction (if an instruction in the scope is morphed into</span></div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;    <span class="comment">// LHS then it will be turned into RHS by the next GVN iteration anyway, so</span></div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;    <span class="comment">// using the leader table is about compiling faster, not optimizing better).</span></div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;    <span class="comment">// The leader table only tracks basic blocks, not edges. Only add to if we</span></div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;    <span class="comment">// have the simple case where the edge dominates the end.</span></div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;    <span class="keywordflow">if</span> (RootDominatesEnd &amp;&amp; !isa&lt;Instruction&gt;(RHS))</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;      addToLeaderTable(LVN, RHS, Root.<a class="code" href="classllvm_1_1BasicBlockEdge.html#ae855b6a8f5e36aa51ee96ff018af63d1">getEnd</a>());</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;    <span class="comment">// Replace all occurrences of &#39;LHS&#39; with &#39;RHS&#39; everywhere in the scope.  As</span></div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;    <span class="comment">// LHS always has at least one use that is not dominated by Root, this will</span></div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;    <span class="comment">// never do anything if LHS has only one use.</span></div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;    <span class="keywordflow">if</span> (!LHS-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()) {</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;      <span class="keywordtype">unsigned</span> NumReplacements = replaceAllDominatedUsesWith(LHS, RHS, Root);</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;      Changed |= NumReplacements &gt; 0;</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;      NumGVNEqProp += NumReplacements;</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;    }</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;    <span class="comment">// Now try to deduce additional equalities from this one.  For example, if the</span></div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;    <span class="comment">// known equality was &quot;(A != B)&quot; == &quot;false&quot; then it follows that A and B are</span></div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;    <span class="comment">// equal in the scope.  Only boolean equalities with an explicit true or false</span></div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;    <span class="comment">// RHS are currently supported.</span></div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;    <span class="keywordflow">if</span> (!RHS-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>(1))</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;      <span class="comment">// Not a boolean equality - bail out.</span></div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;    <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(RHS);</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;    <span class="keywordflow">if</span> (!CI)</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;      <span class="comment">// RHS neither &#39;true&#39; nor &#39;false&#39; - bail out.</span></div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;    <span class="comment">// Whether RHS equals &#39;true&#39;.  Otherwise it equals &#39;false&#39;.</span></div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;    <span class="keywordtype">bool</span> isKnownTrue = CI-&gt;<a class="code" href="classllvm_1_1Constant.html#ac8ddb745480a7e75a3862ddf0be3a298">isAllOnesValue</a>();</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;    <span class="keywordtype">bool</span> isKnownFalse = !isKnownTrue;</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;    <span class="comment">// If &quot;A &amp;&amp; B&quot; is known true then both A and B are known true.  If &quot;A || B&quot;</span></div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;    <span class="comment">// is known false then both A and B are known false.</span></div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>, *<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>;</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;    <span class="keywordflow">if</span> ((isKnownTrue &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(LHS, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(B)))) ||</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;        (isKnownFalse &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(LHS, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(B))))) {</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;      Worklist.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(std::make_pair(A, RHS));</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;      Worklist.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(std::make_pair(B, RHS));</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;    }</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;    <span class="comment">// If we are propagating an equality like &quot;(A == B)&quot; == &quot;true&quot; then also</span></div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;    <span class="comment">// propagate the equality A == B.  When propagating a comparison such as</span></div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;    <span class="comment">// &quot;(A &gt;= B)&quot; == &quot;true&quot;, replace all instances of &quot;A &lt; B&quot; with &quot;false&quot;.</span></div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *Cmp = dyn_cast&lt;ICmpInst&gt;(LHS)) {</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = Cmp-&gt;getOperand(0), *Op1 = Cmp-&gt;getOperand(1);</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;      <span class="comment">// If &quot;A == B&quot; is known true, or &quot;A != B&quot; is known false, then replace</span></div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;      <span class="comment">// A with B everywhere in the scope.</span></div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;      <span class="keywordflow">if</span> ((isKnownTrue &amp;&amp; Cmp-&gt;getPredicate() == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP_EQ</a>) ||</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;          (isKnownFalse &amp;&amp; Cmp-&gt;getPredicate() == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a>))</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;        Worklist.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(std::make_pair(Op0, Op1));</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;      <span class="comment">// If &quot;A &gt;= B&quot; is known true, replace &quot;A &lt; B&quot; with false everywhere.</span></div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;      <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">CmpInst::Predicate</a> NotPred = Cmp-&gt;getInversePredicate();</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NotVal = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(Cmp-&gt;getType(), isKnownFalse);</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;      <span class="comment">// Since we don&#39;t have the instruction &quot;A &lt; B&quot; immediately to hand, work out</span></div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;      <span class="comment">// the value number that it would have and use that to find an appropriate</span></div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;      <span class="comment">// instruction (if any).</span></div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;      uint32_t NextNum = VN.getNextUnusedValueNumber();</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;      uint32_t Num = VN.lookup_or_add_cmp(Cmp-&gt;getOpcode(), NotPred, Op0, Op1);</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;      <span class="comment">// If the number we were assigned was brand new then there is no point in</span></div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;      <span class="comment">// looking for an instruction realizing it: there cannot be one!</span></div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;      <span class="keywordflow">if</span> (Num &lt; NextNum) {</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NotCmp = findLeader(Root.<a class="code" href="classllvm_1_1BasicBlockEdge.html#ae855b6a8f5e36aa51ee96ff018af63d1">getEnd</a>(), Num);</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;        <span class="keywordflow">if</span> (NotCmp &amp;&amp; isa&lt;Instruction&gt;(NotCmp)) {</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;          <span class="keywordtype">unsigned</span> NumReplacements =</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;            replaceAllDominatedUsesWith(NotCmp, NotVal, Root);</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;          Changed |= NumReplacements &gt; 0;</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;          NumGVNEqProp += NumReplacements;</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;        }</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;      }</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;      <span class="comment">// Ensure that any instruction in scope that gets the &quot;A &lt; B&quot; value number</span></div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;      <span class="comment">// is replaced with false.</span></div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;      <span class="comment">// The leader table only tracks basic blocks, not edges. Only add to if we</span></div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;      <span class="comment">// have the simple case where the edge dominates the end.</span></div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;      <span class="keywordflow">if</span> (RootDominatesEnd)</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;        addToLeaderTable(Num, NotVal, Root.<a class="code" href="classllvm_1_1BasicBlockEdge.html#ae855b6a8f5e36aa51ee96ff018af63d1">getEnd</a>());</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;    }</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;  }</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;  <span class="keywordflow">return</span> Changed;</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;}</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;<span class="comment">/// processInstruction - When calculating availability, handle an instruction</span></div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;<span class="comment">/// by inserting it into the appropriate sets</span></div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> GVN::processInstruction(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I) {</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;  <span class="comment">// Ignore dbg info intrinsics.</span></div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;  <span class="keywordflow">if</span> (isa&lt;DbgInfoIntrinsic&gt;(I))</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;  <span class="comment">// If the instruction can be easily simplified then do so now in preference</span></div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;  <span class="comment">// to value numbering it.  Value numbering often exposes redundancies, for</span></div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;  <span class="comment">// example if it determines that %y is equal to %x then the instruction</span></div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;  <span class="comment">// &quot;%z = and i32 %x, %y&quot; becomes &quot;%z = and i32 %x, %x&quot; which we now simplify.</span></div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#a50f8f41fccbea466816345520e9bfabb">SimplifyInstruction</a>(I, TD, TLI, DT)) {</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;    I-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(V);</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;    <span class="keywordflow">if</span> (MD &amp;&amp; V-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a8eafa71cf399da8f21b2af5549f3f9e7">getScalarType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>())</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;      MD-&gt;invalidateCachedPointerInfo(V);</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;    markInstructionForDeletion(I);</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;    ++NumGVNSimpl;</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;  }</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI = dyn_cast&lt;LoadInst&gt;(I)) {</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;    <span class="keywordflow">if</span> (processLoad(LI))</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;    <span class="keywordtype">unsigned</span> Num = VN.lookup_or_add(LI);</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;    addToLeaderTable(Num, LI, LI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>());</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;  }</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;  <span class="comment">// For conditional branches, we can perform simple conditional propagation on</span></div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;  <span class="comment">// the condition value itself.</span></div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = dyn_cast&lt;BranchInst&gt;(I)) {</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;    <span class="keywordflow">if</span> (!BI-&gt;isConditional())</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;    <span class="keywordflow">if</span> (isa&lt;Constant&gt;(BI-&gt;getCondition()))</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;      <span class="keywordflow">return</span> processFoldableCondBr(BI);</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *BranchCond = BI-&gt;getCondition();</div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *TrueSucc = BI-&gt;getSuccessor(0);</div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *FalseSucc = BI-&gt;getSuccessor(1);</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;    <span class="comment">// Avoid multiple edges early.</span></div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;    <span class="keywordflow">if</span> (TrueSucc == FalseSucc)</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Parent = BI-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>();</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;    <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *TrueVal = <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(TrueSucc-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ad652423d9d91271ba153eb86482b2f55">getContext</a>());</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;    <a class="code" href="classllvm_1_1BasicBlockEdge.html">BasicBlockEdge</a> TrueE(Parent, TrueSucc);</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;    Changed |= propagateEquality(BranchCond, TrueVal, TrueE);</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *FalseVal = <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(FalseSucc-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ad652423d9d91271ba153eb86482b2f55">getContext</a>());</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;    <a class="code" href="classllvm_1_1BasicBlockEdge.html">BasicBlockEdge</a> FalseE(Parent, FalseSucc);</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;    Changed |= propagateEquality(BranchCond, FalseVal, FalseE);</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;    <span class="keywordflow">return</span> Changed;</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;  }</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;  <span class="comment">// For switches, propagate the case values into the case destinations.</span></div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SwitchInst.html">SwitchInst</a> *SI = dyn_cast&lt;SwitchInst&gt;(I)) {</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *SwitchCond = SI-&gt;getCondition();</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Parent = SI-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>();</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;    <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;    <span class="comment">// Remember how many outgoing edges there are to every successor.</span></div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;    <a class="code" href="classllvm_1_1SmallDenseMap.html">SmallDenseMap&lt;BasicBlock *, unsigned, 16&gt;</a> SwitchEdges;</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a> = SI-&gt;getNumSuccessors(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;      ++SwitchEdges[SI-&gt;getSuccessor(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)];</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SwitchInst_1_1CaseIt.html">SwitchInst::CaseIt</a> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = SI-&gt;case_begin(), e = SI-&gt;case_end();</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;         <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Dst = <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>.getCaseSuccessor();</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;      <span class="comment">// If there is only a single edge, propagate the case value into it.</span></div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;      <span class="keywordflow">if</span> (SwitchEdges.<a class="code" href="classllvm_1_1DenseMapBase.html#acfd7cc74125222a81c02b4097ed5166c">lookup</a>(Dst) == 1) {</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;        <a class="code" href="classllvm_1_1BasicBlockEdge.html">BasicBlockEdge</a> E(Parent, Dst);</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;        Changed |= propagateEquality(SwitchCond, <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>.getCaseValue(), E);</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;      }</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;    }</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;    <span class="keywordflow">return</span> Changed;</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;  }</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;  <span class="comment">// Instructions with void type don&#39;t return a value, so there&#39;s</span></div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;  <span class="comment">// no point in trying to find redundancies in them.</span></div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;  <span class="keywordflow">if</span> (I-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#af5c7041df3ad5edffe5da17b5264c1fc">isVoidTy</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;  uint32_t NextNum = VN.getNextUnusedValueNumber();</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;  <span class="keywordtype">unsigned</span> Num = VN.lookup_or_add(I);</div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;  <span class="comment">// Allocations are always uniquely numbered, so we can save time and memory</span></div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;  <span class="comment">// by fast failing them.</span></div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;  <span class="keywordflow">if</span> (isa&lt;AllocaInst&gt;(I) || isa&lt;TerminatorInst&gt;(I) || isa&lt;PHINode&gt;(I)) {</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;    addToLeaderTable(Num, I, I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>());</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;  }</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;  <span class="comment">// If the number we were assigned was a brand new VN, then we don&#39;t</span></div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;  <span class="comment">// need to do a lookup to see if the number already exists</span></div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;  <span class="comment">// somewhere in the domtree: it can&#39;t!</span></div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;  <span class="keywordflow">if</span> (Num &gt;= NextNum) {</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;    addToLeaderTable(Num, I, I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>());</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;  }</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;  <span class="comment">// Perform fast-path value-number based elimination of values inherited from</span></div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;  <span class="comment">// dominators.</span></div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *repl = findLeader(I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>(), Num);</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;  <span class="keywordflow">if</span> (repl == 0) {</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;    <span class="comment">// Failure, just remember this instance for future use.</span></div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;    addToLeaderTable(Num, I, I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>());</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;  }</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;  <span class="comment">// Remove it!</span></div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;  <a class="code" href="GVN_8cpp.html#ab85468c2bfc360b5d4bc512d241d1440">patchAndReplaceAllUsesWith</a>(I, repl);</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;  <span class="keywordflow">if</span> (MD &amp;&amp; repl-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a8eafa71cf399da8f21b2af5549f3f9e7">getScalarType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>())</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;    MD-&gt;invalidateCachedPointerInfo(repl);</div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;  markInstructionForDeletion(I);</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;}</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;<span class="comment">/// runOnFunction - This is the main transformation entry point for a function.</span></div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> GVN::runOnFunction(<a class="code" href="classllvm_1_1Function.html">Function</a>&amp; <a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>) {</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;  <span class="keywordflow">if</span> (!NoLoads)</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;    MD = &amp;getAnalysis&lt;MemoryDependenceAnalysis&gt;();</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;  DT = &amp;getAnalysis&lt;DominatorTree&gt;();</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;  TD = getAnalysisIfAvailable&lt;DataLayout&gt;();</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;  TLI = &amp;getAnalysis&lt;TargetLibraryInfo&gt;();</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;  VN.setAliasAnalysis(&amp;getAnalysis&lt;AliasAnalysis&gt;());</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;  VN.setMemDep(MD);</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;  VN.setDomTree(DT);</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;  <span class="keywordtype">bool</span> ShouldContinue = <span class="keyword">true</span>;</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;  <span class="comment">// Merge unconditional branches, allowing PRE to catch more</span></div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;  <span class="comment">// optimization opportunities.</span></div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">Function::iterator</a> FI = F.<a class="code" href="classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">begin</a>(), FE = F.<a class="code" href="classllvm_1_1Function.html#ae4ca2261b8b901e415fda7feac5051ea">end</a>(); FI != FE; ) {</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB = FI++;</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;    <span class="keywordtype">bool</span> removedBlock = <a class="code" href="namespacellvm.html#a0f249e36f196bbea3e4178ad0793544d">MergeBlockIntoPredecessor</a>(BB, <span class="keyword">this</span>);</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;    <span class="keywordflow">if</span> (removedBlock) ++NumGVNBlocks;</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;</div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;    Changed |= removedBlock;</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;  }</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;  <span class="keywordtype">unsigned</span> Iteration = 0;</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;  <span class="keywordflow">while</span> (ShouldContinue) {</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;GVN iteration: &quot;</span> &lt;&lt; Iteration &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;    ShouldContinue = iterateOnFunction(F);</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;    Changed |= ShouldContinue;</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;    ++Iteration;</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;  }</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="GVN_8cpp.html#a9b51dd24187fb51cb70169bb921da81b">EnablePRE</a>) {</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;    <span class="comment">// Fabricate val-num for dead-code in order to suppress assertion in</span></div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;    <span class="comment">// performPRE().</span></div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;    assignValNumForDeadCode();</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;    <span class="keywordtype">bool</span> PREChanged = <span class="keyword">true</span>;</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;    <span class="keywordflow">while</span> (PREChanged) {</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;      PREChanged = performPRE(F);</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;      Changed |= PREChanged;</div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;    }</div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;  }</div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;  <span class="comment">// FIXME: Should perform GVN again after PRE does something.  PRE can move</span></div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;  <span class="comment">// computations into blocks where they become fully redundant.  Note that</span></div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;  <span class="comment">// we can&#39;t do this until PRE&#39;s critical edge splitting updates memdep.</span></div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;  <span class="comment">// Actually, when this happens, we should just fully integrate PRE into GVN.</span></div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;  cleanupGlobalSets();</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;  <span class="comment">// Do not cleanup DeadBlocks in cleanupGlobalSets() as it&#39;s called for each</span></div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;  <span class="comment">// iteration. </span></div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;  DeadBlocks.clear();</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;  <span class="keywordflow">return</span> Changed;</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;}</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;<span class="keywordtype">bool</span> GVN::processBlock(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB) {</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;  <span class="comment">// FIXME: Kill off InstrsToErase by doing erasing eagerly in a helper function</span></div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;  <span class="comment">// (and incrementing BI before processing an instruction).</span></div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;  assert(InstrsToErase.empty() &amp;&amp;</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;         <span class="stringliteral">&quot;We expect InstrsToErase to be empty across iterations&quot;</span>);</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;  <span class="keywordflow">if</span> (DeadBlocks.count(BB))</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;</div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;  <span class="keywordtype">bool</span> ChangedFunction = <span class="keyword">false</span>;</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;</div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> BI = BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(), BE = BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>();</div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;       BI != BE;) {</div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;    ChangedFunction |= processInstruction(BI);</div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;    <span class="keywordflow">if</span> (InstrsToErase.empty()) {</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;      ++BI;</div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;    }</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;    <span class="comment">// If we need some instructions deleted, do it now.</span></div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;    NumGVNInstr += InstrsToErase.size();</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;    <span class="comment">// Avoid iterator invalidation.</span></div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;    <span class="keywordtype">bool</span> AtStart = BI == BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;    <span class="keywordflow">if</span> (!AtStart)</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;      --BI;</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;</div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classT.html">SmallVectorImpl&lt;Instruction *&gt;::iterator</a> I = InstrsToErase.begin(),</div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;         E = InstrsToErase.end(); I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;GVN removed: &quot;</span> &lt;&lt; **I &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;      <span class="keywordflow">if</span> (MD) MD-&gt;removeInstruction(*I);</div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(verifyRemoved(*I));</div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;      (*I)-&gt;eraseFromParent();</div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;    }</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;    InstrsToErase.clear();</div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;    <span class="keywordflow">if</span> (AtStart)</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;      BI = BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;      ++BI;</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;  }</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;  <span class="keywordflow">return</span> ChangedFunction;</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;}</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;<span class="comment">/// performPRE - Perform a purely local form of PRE that looks for diamond</span></div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;<span class="comment">/// control flow patterns and attempts to perform simple PRE at the join point.</span></div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> GVN::performPRE(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;F) {</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;Value*, BasicBlock*&gt;</a>, 8&gt; predMap;</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1df__iterator.html">df_iterator&lt;BasicBlock*&gt;</a> DI = <a class="code" href="namespacellvm.html#afb9c37d2aea316c81a0b2b63c6b480e7">df_begin</a>(&amp;F.<a class="code" href="classllvm_1_1Function.html#a30f2c362631e3728d2f47a8203071ade">getEntryBlock</a>()),</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;       <a class="code" href="namespacellvm_1_1X86II.html#a97dc14052814702ba0e2b14fb14dd02da2c6497f6ed5314c6fcd9ab88c9528543">DE</a> = <a class="code" href="namespacellvm.html#a849b445fe6bce862c395ea6b97c1f658">df_end</a>(&amp;F.<a class="code" href="classllvm_1_1Function.html#a30f2c362631e3728d2f47a8203071ade">getEntryBlock</a>()); DI != <a class="code" href="namespacellvm_1_1X86II.html#a97dc14052814702ba0e2b14fb14dd02da2c6497f6ed5314c6fcd9ab88c9528543">DE</a>; ++DI) {</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *CurrentBlock = *DI;</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;    <span class="comment">// Nothing to PRE in the entry block.</span></div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;    <span class="keywordflow">if</span> (CurrentBlock == &amp;F.<a class="code" href="classllvm_1_1Function.html#a30f2c362631e3728d2f47a8203071ade">getEntryBlock</a>()) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;    <span class="comment">// Don&#39;t perform PRE on a landing pad.</span></div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;    <span class="keywordflow">if</span> (CurrentBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a3075a9eef753018bed561df31f38dc23">isLandingPad</a>()) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> BI = CurrentBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(),</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;         BE = CurrentBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>(); BI != BE; ) {</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *CurInst = BI++;</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;</div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;      <span class="keywordflow">if</span> (isa&lt;AllocaInst&gt;(CurInst) ||</div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;          isa&lt;TerminatorInst&gt;(CurInst) || isa&lt;PHINode&gt;(CurInst) ||</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;          CurInst-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#af5c7041df3ad5edffe5da17b5264c1fc">isVoidTy</a>() ||</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;          CurInst-&gt;<a class="code" href="classllvm_1_1Instruction.html#a0fd8d3c26bf5cd614b0e6a9b8886a5d0">mayReadFromMemory</a>() || CurInst-&gt;<a class="code" href="classllvm_1_1Instruction.html#a573063aad4c101462893d0490d867524">mayHaveSideEffects</a>() ||</div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;          isa&lt;DbgInfoIntrinsic&gt;(CurInst))</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;      <span class="comment">// Don&#39;t do PRE on compares. The PHI would prevent CodeGenPrepare from</span></div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;      <span class="comment">// sinking the compare again, and it would force the code generator to</span></div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;      <span class="comment">// move the i1 from processor flags or predicate registers into a general</span></div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;      <span class="comment">// purpose register.</span></div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;      <span class="keywordflow">if</span> (isa&lt;CmpInst&gt;(CurInst))</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;      <span class="comment">// We don&#39;t currently value number ANY inline asm calls.</span></div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CallI = dyn_cast&lt;CallInst&gt;(CurInst))</div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;        <span class="keywordflow">if</span> (CallI-&gt;isInlineAsm())</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;      uint32_t ValNo = VN.lookup(CurInst);</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;      <span class="comment">// Look for the predecessors for PRE opportunities.  We&#39;re</span></div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;      <span class="comment">// only trying to solve the basic diamond case, where</span></div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;      <span class="comment">// a value is computed in the successor and one predecessor,</span></div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;      <span class="comment">// but not the other.  We also explicitly disallow cases</span></div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;      <span class="comment">// where the successor is its own predecessor, because they&#39;re</span></div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;      <span class="comment">// more complicated to get right.</span></div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;      <span class="keywordtype">unsigned</span> NumWith = 0;</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;      <span class="keywordtype">unsigned</span> NumWithout = 0;</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PREPred = 0;</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;      predMap.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PredIterator.html">pred_iterator</a> PI = <a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(CurrentBlock),</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;           PE = <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(CurrentBlock); PI != PE; ++PI) {</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;        <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = *PI;</div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;        <span class="comment">// We&#39;re not interested in PRE where the block is its</span></div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;        <span class="comment">// own predecessor, or in blocks with predecessors</span></div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;        <span class="comment">// that are not reachable.</span></div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;        <span class="keywordflow">if</span> (P == CurrentBlock) {</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;          NumWithout = 2;</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!DT-&gt;isReachableFromEntry(P))  {</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;          NumWithout = 2;</div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;        }</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a>* predV = findLeader(P, ValNo);</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;        <span class="keywordflow">if</span> (predV == 0) {</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;          predMap.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(std::make_pair(static_cast&lt;Value *&gt;(0), P));</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;          PREPred = <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>;</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;          ++NumWithout;</div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (predV == CurInst) {</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;          <span class="comment">/* CurInst dominates this predecessor. */</span></div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;          NumWithout = 2;</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;          predMap.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(std::make_pair(predV, P));</div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;          ++NumWith;</div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;        }</div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;      }</div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;</div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;      <span class="comment">// Don&#39;t do PRE when it might increase code size, i.e. when</span></div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;      <span class="comment">// we would need to insert instructions in more than one pred.</span></div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;      <span class="keywordflow">if</span> (NumWithout != 1 || NumWith == 0)</div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;</div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;      <span class="comment">// Don&#39;t do PRE across indirect branch.</span></div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;      <span class="keywordflow">if</span> (isa&lt;IndirectBrInst&gt;(PREPred-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>()))</div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;      <span class="comment">// We can&#39;t do PRE safely on a critical edge, so instead we schedule</span></div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;      <span class="comment">// the edge to be split and perform the PRE the next time we iterate</span></div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;      <span class="comment">// on the function.</span></div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;      <span class="keywordtype">unsigned</span> SuccNum = <a class="code" href="namespacellvm.html#ad8c05603cdeedfb0ca29aeaa551f1206">GetSuccessorNumber</a>(PREPred, CurrentBlock);</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#add821dcb197999d4b14c33ee49e74b51">isCriticalEdge</a>(PREPred-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>(), SuccNum)) {</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;        toSplit.push_back(std::make_pair(PREPred-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>(), SuccNum));</div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;      }</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;      <span class="comment">// Instantiate the expression in the predecessor that lacked it.</span></div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;      <span class="comment">// Because we are going top-down through the block, all value numbers</span></div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;      <span class="comment">// will be available in the predecessor by the time we need them.  Any</span></div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;      <span class="comment">// that weren&#39;t originally present will have been instantiated earlier</span></div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;      <span class="comment">// in this loop.</span></div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *PREInstr = CurInst-&gt;<a class="code" href="classllvm_1_1Instruction.html#af6aad0c9ba7b8720130235c9621b55b5">clone</a>();</div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;      <span class="keywordtype">bool</span> success = <span class="keyword">true</span>;</div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = CurInst-&gt;<a class="code" href="classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Op = PREInstr-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;        <span class="keywordflow">if</span> (isa&lt;Argument&gt;(Op) || isa&lt;Constant&gt;(Op) || isa&lt;GlobalValue&gt;(Op))</div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;</div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = findLeader(PREPred, VN.lookup(Op))) {</div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;          PREInstr-&gt;<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, V);</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;          success = <span class="keyword">false</span>;</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;        }</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;      }</div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;      <span class="comment">// Fail out if we encounter an operand that is not available in</span></div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;      <span class="comment">// the PRE predecessor.  This is typically because of loads which</span></div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;      <span class="comment">// are not value numbered precisely.</span></div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;      <span class="keywordflow">if</span> (!success) {</div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(verifyRemoved(PREInstr));</div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;        <span class="keyword">delete</span> PREInstr;</div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;      }</div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;</div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;      PREInstr-&gt;<a class="code" href="classllvm_1_1Instruction.html#a482498a1c760122fd33c7fc8190dd277">insertBefore</a>(PREPred-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>());</div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;      PREInstr-&gt;<a class="code" href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">setName</a>(CurInst-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() + <span class="stringliteral">&quot;.pre&quot;</span>);</div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;      PREInstr-&gt;<a class="code" href="classllvm_1_1Instruction.html#a7bd545769621a0a9d2cfb074f86f4295">setDebugLoc</a>(CurInst-&gt;<a class="code" href="classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">getDebugLoc</a>());</div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;      VN.add(PREInstr, ValNo);</div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;      ++NumGVNPRE;</div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;</div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;      <span class="comment">// Update the availability map to include the new instruction.</span></div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;      addToLeaderTable(ValNo, PREInstr, PREPred);</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;      <span class="comment">// Create a PHI to make the value available in this block.</span></div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;      <a class="code" href="classllvm_1_1PHINode.html">PHINode</a>* Phi = <a class="code" href="classllvm_1_1PHINode.html#afb5e83bf5123ff7c51058eb0ebebcdc6">PHINode::Create</a>(CurInst-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), predMap.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(),</div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;                                     CurInst-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() + <span class="stringliteral">&quot;.pre-phi&quot;</span>,</div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;                                     CurrentBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>());</div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = predMap.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = predMap[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].first)</div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;          Phi-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(V, predMap[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].second);</div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;          Phi-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(PREInstr, PREPred);</div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;      }</div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;      VN.add(Phi, ValNo);</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;      addToLeaderTable(ValNo, Phi, CurrentBlock);</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;      Phi-&gt;<a class="code" href="classllvm_1_1Instruction.html#a7bd545769621a0a9d2cfb074f86f4295">setDebugLoc</a>(CurInst-&gt;<a class="code" href="classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">getDebugLoc</a>());</div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;      CurInst-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(Phi);</div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;      <span class="keywordflow">if</span> (Phi-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a8eafa71cf399da8f21b2af5549f3f9e7">getScalarType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>()) {</div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;        <span class="comment">// Because we have added a PHI-use of the pointer value, it has now</span></div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;        <span class="comment">// &quot;escaped&quot; from alias analysis&#39; perspective.  We need to inform</span></div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;        <span class="comment">// AA of this.</span></div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> ii = 0, ee = Phi-&gt;<a class="code" href="classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">getNumIncomingValues</a>(); ii != ee;</div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;             ++ii) {</div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;          <span class="keywordtype">unsigned</span> jj = <a class="code" href="classllvm_1_1PHINode.html#a928f57745ef3ec4a823afdf7100a70ad">PHINode::getOperandNumForIncomingValue</a>(ii);</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;          VN.getAliasAnalysis()-&gt;addEscapingUse(Phi-&gt;<a class="code" href="classllvm_1_1User.html#a363947eeecf72de326468ed5231e3a04">getOperandUse</a>(jj));</div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;        }</div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;</div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;        <span class="keywordflow">if</span> (MD)</div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;          MD-&gt;invalidateCachedPointerInfo(Phi);</div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;      }</div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;      VN.erase(CurInst);</div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;      removeFromLeaderTable(ValNo, CurInst, CurrentBlock);</div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;</div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;GVN PRE removed: &quot;</span> &lt;&lt; *CurInst &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;      <span class="keywordflow">if</span> (MD) MD-&gt;removeInstruction(CurInst);</div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(verifyRemoved(CurInst));</div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;      CurInst-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;      Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;    }</div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;  }</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;  <span class="keywordflow">if</span> (splitCriticalEdges())</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;    Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;</div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;  <span class="keywordflow">return</span> Changed;</div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;}</div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;<span class="comment">/// Split the critical edge connecting the given two blocks, and return</span></div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;<span class="comment">/// the block inserted to the critical edge.</span></div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *GVN::splitCriticalEdges(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Succ) {</div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB = <a class="code" href="namespacellvm.html#afa6abaa0eea3b2083902cf651a9653b1">SplitCriticalEdge</a>(Pred, Succ, <span class="keyword">this</span>);</div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;  <span class="keywordflow">if</span> (MD)</div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;    MD-&gt;invalidateCachedPredecessors();</div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>;</div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;}</div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;<span class="comment">/// splitCriticalEdges - Split critical edges found during the previous</span></div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;<span class="comment">/// iteration that may enable further optimization.</span></div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> GVN::splitCriticalEdges() {</div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;  <span class="keywordflow">if</span> (toSplit.empty())</div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;  <span class="keywordflow">do</span> {</div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;    std::pair&lt;TerminatorInst*, unsigned&gt; Edge = toSplit.pop_back_val();</div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;    <a class="code" href="namespacellvm.html#afa6abaa0eea3b2083902cf651a9653b1">SplitCriticalEdge</a>(Edge.first, Edge.second, <span class="keyword">this</span>);</div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;  } <span class="keywordflow">while</span> (!toSplit.empty());</div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;  <span class="keywordflow">if</span> (MD) MD-&gt;invalidateCachedPredecessors();</div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;}</div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;<span class="comment">/// iterateOnFunction - Executes one iteration of GVN</span></div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> GVN::iterateOnFunction(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;F) {</div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;  cleanupGlobalSets();</div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;</div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;  <span class="comment">// Top-down walk of the dominator tree</span></div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;<span class="preprocessor">#if 0</span></div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;  <span class="comment">// Needed for value numbering with phi construction to work.</span></div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;  <a class="code" href="classllvm_1_1ReversePostOrderTraversal.html">ReversePostOrderTraversal&lt;Function*&gt;</a> RPOT(&amp;F);</div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ReversePostOrderTraversal.html#aa447608e2881e813215c3f289496c6ea">ReversePostOrderTraversal&lt;Function*&gt;::rpo_iterator</a> RI = RPOT.<a class="code" href="classllvm_1_1ReversePostOrderTraversal.html#ac958000d711f19778f1b40792821b5b3">begin</a>(),</div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;       RE = RPOT.<a class="code" href="classllvm_1_1ReversePostOrderTraversal.html#ae945899e1218a9240c3fed1e5789cbba">end</a>(); RI != RE; ++RI)</div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;    Changed |= processBlock(*RI);</div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;  <span class="comment">// Save the blocks this function have before transformation begins. GVN may</span></div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;  <span class="comment">// split critical edge, and hence may invalidate the RPO/DT iterator.</span></div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;  std::vector&lt;BasicBlock *&gt; BBVect;</div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;  BBVect.reserve(256);</div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1df__iterator.html">df_iterator&lt;DomTreeNode*&gt;</a> DI = <a class="code" href="namespacellvm.html#afb9c37d2aea316c81a0b2b63c6b480e7">df_begin</a>(DT-&gt;getRootNode()),</div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;       <a class="code" href="namespacellvm_1_1X86II.html#a97dc14052814702ba0e2b14fb14dd02da2c6497f6ed5314c6fcd9ab88c9528543">DE</a> = <a class="code" href="namespacellvm.html#a849b445fe6bce862c395ea6b97c1f658">df_end</a>(DT-&gt;getRootNode()); DI != <a class="code" href="namespacellvm_1_1X86II.html#a97dc14052814702ba0e2b14fb14dd02da2c6497f6ed5314c6fcd9ab88c9528543">DE</a>; ++DI)</div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;    BBVect.push_back(DI-&gt;getBlock());</div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;</div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;  <span class="keywordflow">for</span> (std::vector&lt;BasicBlock *&gt;::iterator I = BBVect.begin(), E = BBVect.end();</div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;       I != E; I++)</div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;    Changed |= processBlock(*I);</div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;</div><div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;  <span class="keywordflow">return</span> Changed;</div><div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;}</div><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;</div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;<span class="keywordtype">void</span> GVN::cleanupGlobalSets() {</div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;  VN.clear();</div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;  LeaderTable.clear();</div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;  TableAllocator.Reset();</div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;}</div><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;<span class="comment">/// verifyRemoved - Verify that the specified instruction does not occur in our</span></div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;<span class="comment">/// internal data structures.</span></div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> GVN::verifyRemoved(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst)<span class="keyword"> const </span>{</div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;  VN.verifyRemoved(Inst);</div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;</div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;  <span class="comment">// Walk through the value number scope to make sure the instruction isn&#39;t</span></div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;  <span class="comment">// ferreted away in it.</span></div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;uint32_t, LeaderTableEntry&gt;::const_iterator</a></div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;       I = LeaderTable.begin(), E = LeaderTable.end(); I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;    <span class="keyword">const</span> LeaderTableEntry *Node = &amp;I-&gt;second;</div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;    assert(Node-&gt;Val != Inst &amp;&amp; <span class="stringliteral">&quot;Inst still in value numbering scope!&quot;</span>);</div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;</div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;    <span class="keywordflow">while</span> (Node-&gt;Next) {</div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;      Node = Node-&gt;Next;</div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;      assert(Node-&gt;Val != Inst &amp;&amp; <span class="stringliteral">&quot;Inst still in value numbering scope!&quot;</span>);</div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;    }</div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;  }</div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;}</div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;</div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;<span class="comment">// BB is declared dead, which implied other blocks become dead as well. This</span></div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;<span class="comment">// function is to add all these blocks to &quot;DeadBlocks&quot;. For the dead blocks&#39;</span></div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;<span class="comment">// live successors, update their phi nodes by replacing the operands</span></div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;<span class="comment">// corresponding to dead blocks with UndefVal.</span></div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;<span class="keywordtype">void</span> GVN::addDeadBlock(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB) {</div><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 4&gt;</a> NewDead;</div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;  <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;BasicBlock *, 4&gt;</a> <a class="code" href="namespacellvm_1_1X86II.html#a97dc14052814702ba0e2b14fb14dd02da5a78bc4e042ab2fbe041f0c29c1de4c0">DF</a>;</div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;</div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;  NewDead.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(BB);</div><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;  <span class="keywordflow">while</span> (!NewDead.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>()) {</div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *D = NewDead.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">pop_back_val</a>();</div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;    <span class="keywordflow">if</span> (DeadBlocks.count(D))</div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;</div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;    <span class="comment">// All blocks dominated by D are dead.</span></div><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 8&gt;</a> Dom;</div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;    DT-&gt;getDescendants(D, Dom);</div><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;    DeadBlocks.<a class="code" href="classllvm_1_1SmallVectorImpl.html#af622128e353515efebccad40eae495cb">insert</a>(Dom.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), Dom.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>());</div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;    </div><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;    <span class="comment">// Figure out the dominance-frontier(D).</span></div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classT.html">SmallVectorImpl&lt;BasicBlock *&gt;::iterator</a> I = Dom.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(),</div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;           E = Dom.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>(); I != E; I++) {</div><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> = *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SuccIterator.html">succ_iterator</a> SI = <a class="code" href="namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">succ_begin</a>(B), SE = <a class="code" href="namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">succ_end</a>(B); SI != SE; SI++) {</div><div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;        <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> = *SI;</div><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;        <span class="keywordflow">if</span> (DeadBlocks.count(S))</div><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;</div><div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;        <span class="keywordtype">bool</span> AllPredDead = <span class="keyword">true</span>;</div><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PredIterator.html">pred_iterator</a> PI = <a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(S), PE = <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(S); PI != PE; PI++)</div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;          <span class="keywordflow">if</span> (!DeadBlocks.count(*PI)) {</div><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;            AllPredDead = <span class="keyword">false</span>;</div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;          }</div><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;</div><div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;        <span class="keywordflow">if</span> (!AllPredDead) {</div><div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;          <span class="comment">// S could be proved dead later on. That is why we don&#39;t update phi</span></div><div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;          <span class="comment">// operands at this moment.</span></div><div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;          DF.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(S);</div><div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;          <span class="comment">// While S is not dominated by D, it is dead by now. This could take</span></div><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;          <span class="comment">// place if S already have a dead predecessor before D is declared</span></div><div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;          <span class="comment">// dead.</span></div><div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;          NewDead.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(S);</div><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;        }</div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;      }</div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;    }</div><div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;  }</div><div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;</div><div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;  <span class="comment">// For the dead blocks&#39; live successors, update their phi nodes by replacing</span></div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;  <span class="comment">// the operands corresponding to dead blocks with UndefVal.</span></div><div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;  <span class="keywordflow">for</span>(<a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;BasicBlock *, 4&gt;::iterator</a> I = DF.<a class="code" href="classllvm_1_1SetVector.html#adb13793b98ab59209a5309d26f831850">begin</a>(), E = DF.<a class="code" href="classllvm_1_1SetVector.html#affac0dc3d407ef3dee29b8bc9a4836bc">end</a>();</div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;        I != E; I++) {</div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> = *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;    <span class="keywordflow">if</span> (DeadBlocks.count(B))</div><div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;</div><div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 4&gt;</a> Preds(<a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(B), <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(B));</div><div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classT.html">SmallVectorImpl&lt;BasicBlock *&gt;::iterator</a> PI = Preds.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(),</div><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;           PE = Preds.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>(); PI != PE; PI++) {</div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = *PI;</div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;</div><div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;      <span class="keywordflow">if</span> (!DeadBlocks.count(P))</div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;</div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#add821dcb197999d4b14c33ee49e74b51">isCriticalEdge</a>(P-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>(), <a class="code" href="namespacellvm.html#ad8c05603cdeedfb0ca29aeaa551f1206">GetSuccessorNumber</a>(P, B))) {</div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> = splitCriticalEdges(P, B))</div><div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;          DeadBlocks.insert(P = <a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>);</div><div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;      }</div><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;</div><div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> II = B-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(); isa&lt;PHINode&gt;(II); ++II) {</div><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;        <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> &amp;Phi = cast&lt;PHINode&gt;(*II);</div><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;        Phi.<a class="code" href="classllvm_1_1PHINode.html#a88cdefb709309eddc6e5daca0be6a7b4">setIncomingValue</a>(Phi.<a class="code" href="classllvm_1_1PHINode.html#a5c2b7d7f19aac93b27b845858a7eb73e">getBasicBlockIndex</a>(P),</div><div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;                             <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(Phi.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;      }</div><div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;    }</div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;  }</div><div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;}</div><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;</div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;<span class="comment">// If the given branch is recognized as a foldable branch (i.e. conditional</span></div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;<span class="comment">// branch with constant condition), it will perform following analyses and</span></div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;<span class="comment">// transformation.</span></div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;<span class="comment">//  1) If the dead out-coming edge is a critical-edge, split it. Let </span></div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;<span class="comment">//     R be the target of the dead out-coming edge.</span></div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;<span class="comment">//  1) Identify the set of dead blocks implied by the branch&#39;s dead outcoming</span></div><div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;<span class="comment">//     edge. The result of this step will be {X| X is dominated by R}</span></div><div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;<span class="comment">//  2) Identify those blocks which haves at least one dead prodecessor. The</span></div><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;<span class="comment">//     result of this step will be dominance-frontier(R).</span></div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;<span class="comment">//  3) Update the PHIs in DF(R) by replacing the operands corresponding to </span></div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;<span class="comment">//     dead blocks with &quot;UndefVal&quot; in an hope these PHIs will optimized away.</span></div><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;<span class="comment">// Return true iff *NEW* dead code are found.</span></div><div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;<span class="keywordtype">bool</span> GVN::processFoldableCondBr(<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI) {</div><div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;  <span class="keywordflow">if</span> (!BI || BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a382131e712e55e8324fbd5068de17b78">isUnconditional</a>())</div><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;</div><div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *Cond = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a84309bb8c34c8bc5694ec5d48dd8668f">getCondition</a>());</div><div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;  <span class="keywordflow">if</span> (!Cond)</div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;</div><div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *DeadRoot = Cond-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a6edd823ba5e4e1effc8280ca8a1194ef">getZExtValue</a>() ? </div><div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;                         BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(1) : BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(0);</div><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;  <span class="keywordflow">if</span> (DeadBlocks.count(DeadRoot))</div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;</div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;  <span class="keywordflow">if</span> (!DeadRoot-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5ef55181ae0bb0f5c561b9a29087b1e5">getSinglePredecessor</a>())</div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;    DeadRoot = splitCriticalEdges(BI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>(), DeadRoot);</div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;</div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;  addDeadBlock(DeadRoot);</div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;}</div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;</div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;<span class="comment">// performPRE() will trigger assert if it come across an instruciton without</span></div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;<span class="comment">// associated val-num. As it normally has far more live instructions than dead</span></div><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;<span class="comment">// instructions, it makes more sense just to &quot;fabricate&quot; a val-number for the</span></div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;<span class="comment">// dead code than checking if instruction involved is dead or not.</span></div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;<span class="keywordtype">void</span> GVN::assignValNumForDeadCode() {</div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SetVector.html#a9ceb97666ed8de600fb9520a563ff95d">SetVector&lt;BasicBlock *&gt;::iterator</a> I = DeadBlocks.begin(),</div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;        E = DeadBlocks.end(); I != E; I++) {</div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB = *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> II = BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(), EE = BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>();</div><div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;          II != EE; II++) {</div><div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst = &amp;*II;</div><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;      <span class="keywordtype">unsigned</span> ValNum = VN.lookup_or_add(Inst);</div><div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;      addToLeaderTable(ValNum, Inst, BB);</div><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;    }</div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;  }</div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;}</div><div class="ttc" id="GVN_8cpp_html_a12252830c9aff84c819c6afb1ac4fb70"><div class="ttname"><a href="GVN_8cpp.html#a12252830c9aff84c819c6afb1ac4fb70">GetMemInstValueForLoad</a></div><div class="ttdeci">static Value * GetMemInstValueForLoad(MemIntrinsic *SrcInst, unsigned Offset, Type *LoadTy, Instruction *InsertPt, const DataLayout &amp;TD)</div><div class="ttdef"><b>Definition:</b> <a href="GVN_8cpp_source.html#l01210">GVN.cpp:1210</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a075e34e98605d0e7c289763a104869ac"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">llvm::SmallVectorTemplateCommon&lt; T &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00114">SmallVector.h:114</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a363947eeecf72de326468ed5231e3a04"><div class="ttname"><a href="classllvm_1_1User.html#a363947eeecf72de326468ed5231e3a04">llvm::User::getOperandUse</a></div><div class="ttdeci">const Use &amp; getOperandUse(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00099">User.h:99</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a427435d4da769ae680a8e77ef89520aa"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">llvm::PatternMatch::m_And</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::And &gt; m_And(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00467">PatternMatch.h:467</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00127">SmallVector.h:127</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html_a14298313bdf734e2db5a921cc6e861a0"><div class="ttname"><a href="classllvm_1_1StoreInst.html#a14298313bdf734e2db5a921cc6e861a0">llvm::StoreInst::getValueOperand</a></div><div class="ttdeci">Value * getValueOperand()</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00343">Instructions.h:343</a></div></div>
<div class="ttc" id="namespacellvm_html_addab2512c302d9436450bd665b56fe72"><div class="ttname"><a href="namespacellvm.html#addab2512c302d9436450bd665b56fe72">llvm::createGVNPass</a></div><div class="ttdeci">FunctionPass * createGVNPass(bool NoLoads=false)</div><div class="ttdef"><b>Definition:</b> <a href="GVN_8cpp_source.html#l00724">GVN.cpp:724</a></div></div>
<div class="ttc" id="GVN_8cpp_html_a0f919fce34215a248b020304ab0f121b"><div class="ttname"><a href="GVN_8cpp.html#a0f919fce34215a248b020304ab0f121b">EnableLoadPRE</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; EnableLoadPRE(&quot;enable-load-pre&quot;, cl::init(true))</div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00236">SmallVector.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad86469939d2a8bdd4169be9403b89f5a"><div class="ttname"><a href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">llvm::Value::use_end</a></div><div class="ttdeci">use_iterator use_end()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00152">Value.h:152</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html"><div class="ttname"><a href="classllvm_1_1DataLayout.html">llvm::DataLayout</a></div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00098">DataLayout.h:98</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_aa7cce62ac5cc6df09cce0535874336b7"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">llvm::ConstantInt::getFalse</a></div><div class="ttdeci">static ConstantInt * getFalse(LLVMContext &amp;Context)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00445">Constants.cpp:445</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a24bca8838396aa81b87de8e7ac774b19"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">llvm::PatternMatch::m_Value</a></div><div class="ttdeci">class_match&lt; Value &gt; m_Value()</div><div class="ttdoc">m_Value() - Match an arbitrary value and ignore it. </div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00070">PatternMatch.h:70</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html_a21ce697328893029ae2c63974061a294"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a21ce697328893029ae2c63974061a294">llvm::BinaryOperator::setHasNoSignedWrap</a></div><div class="ttdeci">void setHasNoSignedWrap(bool b=true)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l02001">Instructions.cpp:2001</a></div></div>
<div class="ttc" id="classllvm_1_1SmallDenseMap_html"><div class="ttname"><a href="classllvm_1_1SmallDenseMap.html">llvm::SmallDenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00690">DenseMap.h:690</a></div></div>
<div class="ttc" id="Loads_8h_html"><div class="ttname"><a href="Loads_8h.html">Loads.h</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html"><div class="ttname"><a href="classllvm_1_1CmpInst.html">llvm::CmpInst</a></div><div class="ttdoc">Abstract base class of comparison instructions. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00633">InstrTypes.h:633</a></div></div>
<div class="ttc" id="namespacellvm_1_1ARM__PROC_html_aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5"><div class="ttname"><a href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">llvm::ARM_PROC::A</a></div><div class="ttdef"><b>Definition:</b> <a href="ARMBaseInfo_8h_source.html#l00098">ARMBaseInfo.h:98</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_a884f90190bca4bd354f2d5c91c264028"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">llvm::AnalysisUsage::addPreserved</a></div><div class="ttdeci">AnalysisUsage &amp; addPreserved()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00081">PassAnalysisSupport.h:81</a></div></div>
<div class="ttc" id="namespacellvm_html_ab8e34eca3b0817ef7a127913fbf6d9e4"><div class="ttname"><a href="namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">llvm::errs</a></div><div class="ttdeci">raw_ostream &amp; errs()</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8cpp_source.html#l00664">raw_ostream.cpp:664</a></div></div>
<div class="ttc" id="classllvm_1_1SSAUpdater_html"><div class="ttname"><a href="classllvm_1_1SSAUpdater.html">llvm::SSAUpdater</a></div><div class="ttdoc">Helper class for SSA formation on a set of values defined in multiple blocks. </div><div class="ttdef"><b>Definition:</b> <a href="SSAUpdater_8h_source.html#l00037">SSAUpdater.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a089cccb6f231efee72abc76d0f9c695f"><div class="ttname"><a href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">llvm::PHINode::addIncoming</a></div><div class="ttdeci">void addIncoming(Value *V, BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02100">Instructions.h:2100</a></div></div>
<div class="ttc" id="classllvm_1_1ExtractValueInst_html"><div class="ttname"><a href="classllvm_1_1ExtractValueInst.html">llvm::ExtractValueInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01740">Instructions.h:1740</a></div></div>
<div class="ttc" id="classllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00035">PassRegistry.cpp:35</a></div></div>
<div class="ttc" id="namespacellvm_1_1SPII_html_a11e9b8fca4a074643a6a21f444e51406a5069619ca8fdce305534f3fe85091a0f"><div class="ttname"><a href="namespacellvm_1_1SPII.html#a11e9b8fca4a074643a6a21f444e51406a5069619ca8fdce305534f3fe85091a0f">llvm::SPII::Load</a></div><div class="ttdef"><b>Definition:</b> <a href="SparcInstrInfo_8h_source.html#l00031">SparcInstrInfo.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a6fe2f06b8a4b2c3d6308afb223a0238a"><div class="ttname"><a href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00072">Instruction.cpp:72</a></div></div>
<div class="ttc" id="classllvm_1_1MemDepResult_html_aa6d7a9e81b4749376498640463eb5dc2"><div class="ttname"><a href="classllvm_1_1MemDepResult.html#aa6d7a9e81b4749376498640463eb5dc2">llvm::MemDepResult::isDef</a></div><div class="ttdeci">bool isDef() const </div><div class="ttdef"><b>Definition:</b> <a href="MemoryDependenceAnalysis_8h_source.html#l00132">MemoryDependenceAnalysis.h:132</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a4b5e1f50cb0890ec60d8c61a61241170"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a4b5e1f50cb0890ec60d8c61a61241170">llvm::CmpInst::makeCmpResultType</a></div><div class="ttdeci">static Type * makeCmpResultType(Type *opnd_type)</div><div class="ttdoc">Create a result type for fcmp/icmp. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00832">InstrTypes.h:832</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="MemoryDependenceAnalysis_8h_html"><div class="ttname"><a href="MemoryDependenceAnalysis_8h.html">MemoryDependenceAnalysis.h</a></div></div>
<div class="ttc" id="classllvm_1_1SSAUpdater_html_a4fe3279aae4f726813a672d4a9b26cb1"><div class="ttname"><a href="classllvm_1_1SSAUpdater.html#a4fe3279aae4f726813a672d4a9b26cb1">llvm::SSAUpdater::Initialize</a></div><div class="ttdeci">void Initialize(Type *Ty, StringRef Name)</div><div class="ttdoc">Reset this object to get ready for a new set of SSA updates with type &amp;#39;Ty&amp;#39;. </div><div class="ttdef"><b>Definition:</b> <a href="SSAUpdater_8cpp_source.html#l00045">SSAUpdater.cpp:45</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_ae4ca2261b8b901e415fda7feac5051ea"><div class="ttname"><a href="classllvm_1_1Function.html#ae4ca2261b8b901e415fda7feac5051ea">llvm::Function::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00397">Function.h:397</a></div></div>
<div class="ttc" id="classllvm_1_1IntrinsicInst_html_a6cbb4809b81f3994ee0c79b38556bd66"><div class="ttname"><a href="classllvm_1_1IntrinsicInst.html#a6cbb4809b81f3994ee0c79b38556bd66">llvm::IntrinsicInst::getIntrinsicID</a></div><div class="ttdeci">Intrinsic::ID getIntrinsicID() const </div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00043">IntrinsicInst.h:43</a></div></div>
<div class="ttc" id="namespacellvm_html_afa6abaa0eea3b2083902cf651a9653b1"><div class="ttname"><a href="namespacellvm.html#afa6abaa0eea3b2083902cf651a9653b1">llvm::SplitCriticalEdge</a></div><div class="ttdeci">BasicBlock * SplitCriticalEdge(TerminatorInst *TI, unsigned SuccNum, Pass *P=0, bool MergeIdenticalEdges=false, bool DontDeleteUselessPHIs=false, bool SplitLandingPads=false)</div><div class="ttdef"><b>Definition:</b> <a href="BreakCriticalEdges_8cpp_source.html#l00140">BreakCriticalEdges.cpp:140</a></div></div>
<div class="ttc" id="IntrinsicInst_8h_html"><div class="ttname"><a href="IntrinsicInst_8h.html">IntrinsicInst.h</a></div></div>
<div class="ttc" id="namespacellvm_html_a3f2f98c2a67c9e79f58aad9150a62e42"><div class="ttname"><a href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">llvm::dyn_cast</a></div><div class="ttdeci">enable_if_c&lt;!is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="Casting_8h_source.html#l00266">Casting.h:266</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlockEdge_html_ae19ed5c4897c23cf94108549768fe2f4"><div class="ttname"><a href="classllvm_1_1BasicBlockEdge.html#ae19ed5c4897c23cf94108549768fe2f4">llvm::BasicBlockEdge::getStart</a></div><div class="ttdeci">const BasicBlock * getStart() const </div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00727">Dominators.h:727</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a2f81e0c1fc6554df7ad2eafabf5fc5a5"><div class="ttname"><a href="classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">llvm::User::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00108">User.h:108</a></div></div>
<div class="ttc" id="classllvm_1_1SSAUpdater_html_af0d1a82b4e629e834c2ed53e5cbe22ef"><div class="ttname"><a href="classllvm_1_1SSAUpdater.html#af0d1a82b4e629e834c2ed53e5cbe22ef">llvm::SSAUpdater::AddAvailableValue</a></div><div class="ttdeci">void AddAvailableValue(BasicBlock *BB, Value *V)</div><div class="ttdoc">Indicate that a rewritten value is available in the specified block with the specified value...</div><div class="ttdef"><b>Definition:</b> <a href="SSAUpdater_8cpp_source.html#l00058">SSAUpdater.cpp:58</a></div></div>
<div class="ttc" id="DataLayout_8h_html"><div class="ttname"><a href="DataLayout_8h.html">DataLayout.h</a></div></div>
<div class="ttc" id="namespacellvm_html_a090878b40a781fbfccd4496adb00dd19"><div class="ttname"><a href="namespacellvm.html#a090878b40a781fbfccd4496adb00dd19">llvm::GetPointerBaseWithConstantOffset</a></div><div class="ttdeci">Value * GetPointerBaseWithConstantOffset(Value *Ptr, int64_t &amp;Offset, const DataLayout *TD)</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l01716">ValueTracking.cpp:1716</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_a51940249c228e46f1f97932e5f4b8450"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a51940249c228e46f1f97932e5f4b8450">llvm::ConstantExpr::getGetElementPtr</a></div><div class="ttdeci">static Constant * getGetElementPtr(Constant *C, ArrayRef&lt; Constant * &gt; IdxList, bool InBounds=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l01012">Constants.h:1012</a></div></div>
<div class="ttc" id="structllvm_1_1DenseMapInfo_3_01Expression_01_4_html_a85b6767cce7ece02465f7b9b29d4d78c"><div class="ttname"><a href="structllvm_1_1DenseMapInfo_3_01Expression_01_4.html#a85b6767cce7ece02465f7b9b29d4d78c">llvm::DenseMapInfo&lt; Expression &gt;::isEqual</a></div><div class="ttdeci">static bool isEqual(const Expression &amp;LHS, const Expression &amp;RHS)</div><div class="ttdef"><b>Definition:</b> <a href="GVN_8cpp_source.html#l00152">GVN.cpp:152</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00534">DenseMap.h:534</a></div></div>
<div class="ttc" id="namespacellvm_1_1ARM__AM_html_a5d0557608eaebed12bc00812724ba2cdae6bcee28992dab735eaa43f5dfa48a09"><div class="ttname"><a href="namespacellvm_1_1ARM__AM.html#a5d0557608eaebed12bc00812724ba2cdae6bcee28992dab735eaa43f5dfa48a09">llvm::ARM_AM::add</a></div><div class="ttdef"><b>Definition:</b> <a href="ARMAddressingModes_8h_source.html#l00038">ARMAddressingModes.h:38</a></div></div>
<div class="ttc" id="README-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00427">README-SSE.txt:427</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01978">Instructions.h:1978</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a534c8dc56785061e35fb476480d11a3d"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a534c8dc56785061e35fb476480d11a3d">llvm::Intrinsic::smul_with_overflow</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02436">Intrinsics.h:2436</a></div></div>
<div class="ttc" id="Debug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html"><div class="ttname"><a href="classllvm_1_1CallInst.html">llvm::CallInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01161">Instructions.h:1161</a></div></div>
<div class="ttc" id="Metadata_8h_html"><div class="ttname"><a href="Metadata_8h.html">Metadata.h</a></div></div>
<div class="ttc" id="structllvm_1_1DenseMapInfo_html"><div class="ttname"><a href="structllvm_1_1DenseMapInfo.html">llvm::DenseMapInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMapInfo_8h_source.html#l00023">DenseMapInfo.h:23</a></div></div>
<div class="ttc" id="classllvm_1_1PointerType_html_a050a395d1656e546679d8b144d951bb2"><div class="ttname"><a href="classllvm_1_1PointerType.html#a050a395d1656e546679d8b144d951bb2">llvm::PointerType::get</a></div><div class="ttdeci">static PointerType * get(Type *ElementType, unsigned AddressSpace)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00730">Type.cpp:730</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html_a9b6dd0fc7a648a939e571246045b673e"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html#a9b6dd0fc7a648a939e571246045b673e">llvm::SmallPtrSet::insert</a></div><div class="ttdeci">bool insert(PtrType Ptr)</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00253">SmallPtrSet.h:253</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a573063aad4c101462893d0490d867524"><div class="ttname"><a href="classllvm_1_1Instruction.html#a573063aad4c101462893d0490d867524">llvm::Instruction::mayHaveSideEffects</a></div><div class="ttdeci">bool mayHaveSideEffects() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00324">Instruction.h:324</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a4010b27bb068167801ff99622ea92907"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a4010b27bb068167801ff99622ea92907">llvm::Intrinsic::uadd_with_overflow</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02445">Intrinsics.h:2445</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_af622128e353515efebccad40eae495cb"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#af622128e353515efebccad40eae495cb">llvm::SmallVectorImpl::insert</a></div><div class="ttdeci">iterator insert(iterator I, const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00537">SmallVector.h:537</a></div></div>
<div class="ttc" id="classllvm_1_1df__iterator_html"><div class="ttname"><a href="classllvm_1_1df__iterator.html">llvm::df_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="DepthFirstIterator_8h_source.html#l00065">DepthFirstIterator.h:65</a></div></div>
<div class="ttc" id="GVN_8cpp_html_ad7bf8a029cda4c015beec62bd3c1c701"><div class="ttname"><a href="GVN_8cpp.html#ad7bf8a029cda4c015beec62bd3c1c701">STATISTIC</a></div><div class="ttdeci">STATISTIC(NumGVNInstr,&quot;Number of instructions deleted&quot;)</div></div>
<div class="ttc" id="GVN_8cpp_html_a06c6349768c68b00910351436ff995b8"><div class="ttname"><a href="GVN_8cpp.html#a06c6349768c68b00910351436ff995b8">GetStoreValueForLoad</a></div><div class="ttdeci">static Value * GetStoreValueForLoad(Value *SrcVal, unsigned Offset, Type *LoadTy, Instruction *InsertPt, const DataLayout &amp;TD)</div><div class="ttdef"><b>Definition:</b> <a href="GVN_8cpp_source.html#l01111">GVN.cpp:1111</a></div></div>
<div class="ttc" id="classllvm_1_1MemSetInst_html"><div class="ttname"><a href="classllvm_1_1MemSetInst.html">llvm::MemSetInst</a></div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00190">IntrinsicInst.h:190</a></div></div>
<div class="ttc" id="SSAUpdater_8h_html"><div class="ttname"><a href="SSAUpdater_8h.html">SSAUpdater.h</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_aca229503e4f5c83a187a6a921c625fa8"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">llvm::BasicBlock::getParent</a></div><div class="ttdeci">const Function * getParent() const </div><div class="ttdoc">Return the enclosing method, or null if none. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00116">BasicBlock.h:116</a></div></div>
<div class="ttc" id="classllvm_1_1PredIterator_html"><div class="ttname"><a href="classllvm_1_1PredIterator.html">llvm::PredIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="Support_2CFG_8h_source.html#l00029">Support/CFG.h:29</a></div></div>
<div class="ttc" id="classllvm_1_1MDNode_html"><div class="ttname"><a href="classllvm_1_1MDNode.html">llvm::MDNode</a></div><div class="ttdoc">MDNode - a tuple of other values. </div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00073">Metadata.h:73</a></div></div>
<div class="ttc" id="LLParser_8cpp_html_a33ece1ef8074506a15d7f86eb76dbae6"><div class="ttname"><a href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a></div><div class="ttdeci">F(f)</div></div>
<div class="ttc" id="namespacellvm_html_ad8c05603cdeedfb0ca29aeaa551f1206"><div class="ttname"><a href="namespacellvm.html#ad8c05603cdeedfb0ca29aeaa551f1206">llvm::GetSuccessorNumber</a></div><div class="ttdeci">unsigned GetSuccessorNumber(BasicBlock *BB, BasicBlock *Succ)</div><div class="ttdef"><b>Definition:</b> <a href="CFG_8cpp_source.html#l00073">CFG.cpp:73</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00070">Function.h:70</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html"><div class="ttname"><a href="classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00136">Instructions.h:136</a></div></div>
<div class="ttc" id="InstructionSimplify_8h_html"><div class="ttname"><a href="InstructionSimplify_8h.html">InstructionSimplify.h</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a05186fa23e4d11b9855a9599ba87a4b7"><div class="ttname"><a href="classllvm_1_1Type.html#a05186fa23e4d11b9855a9599ba87a4b7">llvm::Type::getInt64Ty</a></div><div class="ttdeci">static IntegerType * getInt64Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00242">Type.cpp:242</a></div></div>
<div class="ttc" id="GVN_8cpp_html_a06110688fb79e0a9abb3971d66b25bf9"><div class="ttname"><a href="GVN_8cpp.html#a06110688fb79e0a9abb3971d66b25bf9">AnalyzeLoadFromClobberingStore</a></div><div class="ttdeci">static int AnalyzeLoadFromClobberingStore(Type *LoadTy, Value *LoadPtr, StoreInst *DepSI, const DataLayout &amp;TD)</div><div class="ttdef"><b>Definition:</b> <a href="GVN_8cpp_source.html#l01016">GVN.cpp:1016</a></div></div>
<div class="ttc" id="PHITransAddr_8h_html"><div class="ttname"><a href="PHITransAddr_8h.html">PHITransAddr.h</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a33f9fa1a7cb21319a30836fce847c3c4"><div class="ttname"><a href="classllvm_1_1Type.html#a33f9fa1a7cb21319a30836fce847c3c4">llvm::Type::getPointerAddressSpace</a></div><div class="ttdeci">unsigned getPointerAddressSpace() const </div><div class="ttdoc">Get the address space of this pointer or pointer vector type. </div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00218">Type.cpp:218</a></div></div>
<div class="ttc" id="README-Thumb_8txt_html_aa36a842dc9742127230b93f16e106ddd"><div class="ttname"><a href="README-Thumb_8txt.html#aa36a842dc9742127230b93f16e106ddd">abort</a></div><div class="ttdeci">*Add support for compiling functions in both ARM and Thumb then taking the smallest *Add support for compiling individual basic blocks in thumb when in a larger ARM function This can be used for presumed cold like paths to abort(failure path of asserts)</div></div>
<div class="ttc" id="Statistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="structllvm_1_1DenseMapInfo_3_01Expression_01_4_html_a5b3e2878dce330c9f022d23494b46eb0"><div class="ttname"><a href="structllvm_1_1DenseMapInfo_3_01Expression_01_4.html#a5b3e2878dce330c9f022d23494b46eb0">llvm::DenseMapInfo&lt; Expression &gt;::getEmptyKey</a></div><div class="ttdeci">static Expression getEmptyKey()</div><div class="ttdef"><b>Definition:</b> <a href="GVN_8cpp_source.html#l00140">GVN.cpp:140</a></div></div>
<div class="ttc" id="GVN_8cpp_html_a1acb03d8fcbe31554aa6049a77790fe9"><div class="ttname"><a href="GVN_8cpp.html#a1acb03d8fcbe31554aa6049a77790fe9">CoerceAvailableValueToLoadType</a></div><div class="ttdeci">static Value * CoerceAvailableValueToLoadType(Value *StoredVal, Type *LoadedTy, Instruction *InsertPt, const DataLayout &amp;TD)</div><div class="ttdef"><b>Definition:</b> <a href="GVN_8cpp_source.html#l00855">GVN.cpp:855</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_a156c478ee8e7d1602143cdbad4bd5385"><div class="ttname"><a href="classllvm_1_1LoadInst.html#a156c478ee8e7d1602143cdbad4bd5385">llvm::LoadInst::isSimple</a></div><div class="ttdeci">bool isSimple() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00218">Instructions.h:218</a></div></div>
<div class="ttc" id="classllvm_1_1SetVector_html_affac0dc3d407ef3dee29b8bc9a4836bc"><div class="ttname"><a href="classllvm_1_1SetVector.html#affac0dc3d407ef3dee29b8bc9a4836bc">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallSet&lt; T, N &gt; &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdoc">Get an iterator to the end of the SetVector. </div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00079">SetVector.h:79</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a7bd545769621a0a9d2cfb074f86f4295"><div class="ttname"><a href="classllvm_1_1Instruction.html#a7bd545769621a0a9d2cfb074f86f4295">llvm::Instruction::setDebugLoc</a></div><div class="ttdeci">void setDebugLoc(const DebugLoc &amp;Loc)</div><div class="ttdoc">setDebugLoc - Set the debug location information for this instruction. </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00175">Instruction.h:175</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a2eeb1c7ed1cfe403f2ae0470e36c07e2"><div class="ttname"><a href="classllvm_1_1User.html#a2eeb1c7ed1cfe403f2ae0470e36c07e2">llvm::User::op_begin</a></div><div class="ttdeci">op_iterator op_begin()</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00116">User.h:116</a></div></div>
<div class="ttc" id="classllvm_1_1MemDepResult_html_ae409b288c7f70a6c57586535abed3808"><div class="ttname"><a href="classllvm_1_1MemDepResult.html#ae409b288c7f70a6c57586535abed3808">llvm::MemDepResult::isClobber</a></div><div class="ttdeci">bool isClobber() const </div><div class="ttdef"><b>Definition:</b> <a href="MemoryDependenceAnalysis_8h_source.html#l00128">MemoryDependenceAnalysis.h:128</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a901ce7389ca67dd79b8ab5b53c4a7da8"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a901ce7389ca67dd79b8ab5b53c4a7da8">d</a></div><div class="ttdeci">the resulting code requires compare and branches when and if the revised code is with conditional branches instead of More there is a byte word extend before each where there should be only and the condition codes are not remembered when the same two values are compared twice More LSR enhancements i8 and i32 load store addressing modes are identical int int int d</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00418">Target/ARM/README.txt:418</a></div></div>
<div class="ttc" id="namespacellvm_1_1ARM__PROC_html_a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e"><div class="ttname"><a href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">llvm::ARM_PROC::IE</a></div><div class="ttdef"><b>Definition:</b> <a href="ARMBaseInfo_8h_source.html#l00091">ARMBaseInfo.h:91</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00109">CommandLine.h:109</a></div></div>
<div class="ttc" id="Allocator_8h_html"><div class="ttname"><a href="Allocator_8h.html">Allocator.h</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00167">Value.cpp:167</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00193">BasicBlock.h:193</a></div></div>
<div class="ttc" id="namespacellvm_html_ae712552495c21ee77ad82ced255ad6df"><div class="ttname"><a href="namespacellvm.html#ae712552495c21ee77ad82ced255ad6df">llvm::WriteAsOperand</a></div><div class="ttdeci">void WriteAsOperand(raw_ostream &amp;, const Value *, bool PrintTy=true, const Module *Context=0)</div><div class="ttdef"><b>Definition:</b> <a href="AsmWriter_8cpp_source.html#l01179">AsmWriter.cpp:1179</a></div></div>
<div class="ttc" id="namespacellvm_1_1MCID_html_a8035044d40d3758eb45b65dce69dc90ba32dbd2c72a98eaee90e3ad5ef7b5af16"><div class="ttname"><a href="namespacellvm_1_1MCID.html#a8035044d40d3758eb45b65dce69dc90ba32dbd2c72a98eaee90e3ad5ef7b5af16">llvm::MCID::Select</a></div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00113">MCInstrDesc.h:113</a></div></div>
<div class="ttc" id="structllvm_1_1DenseMapInfo_3_01Expression_01_4_html_a8e8f4f897644685e35c606eebf8ed6d2"><div class="ttname"><a href="structllvm_1_1DenseMapInfo_3_01Expression_01_4.html#a8e8f4f897644685e35c606eebf8ed6d2">llvm::DenseMapInfo&lt; Expression &gt;::getHashValue</a></div><div class="ttdeci">static unsigned getHashValue(const Expression e)</div><div class="ttdef"><b>Definition:</b> <a href="GVN_8cpp_source.html#l00148">GVN.cpp:148</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a928f57745ef3ec4a823afdf7100a70ad"><div class="ttname"><a href="classllvm_1_1PHINode.html#a928f57745ef3ec4a823afdf7100a70ad">llvm::PHINode::getOperandNumForIncomingValue</a></div><div class="ttdeci">static unsigned getOperandNumForIncomingValue(unsigned i)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02065">Instructions.h:2065</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a25d956d9e0beadd47ce4bc255dfa811d"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">llvm::PatternMatch::match</a></div><div class="ttdeci">bool match(Val *V, const Pattern &amp;P)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00042">PatternMatch.h:42</a></div></div>
<div class="ttc" id="namespacellvm_html_ace6c957db39858291c6ce01c38e78480"><div class="ttname"><a href="namespacellvm.html#ace6c957db39858291c6ce01c38e78480">llvm::GetUnderlyingObject</a></div><div class="ttdeci">Value * GetUnderlyingObject(Value *V, const DataLayout *TD=0, unsigned MaxLookup=6)</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l01899">ValueTracking.cpp:1899</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_ae5c60fd282ee894c87ea02c3f0fcb6d0"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">llvm::AnalysisUsage::addRequired</a></div><div class="ttdeci">AnalysisUsage &amp; addRequired()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00055">PassAnalysisSupport.h:55</a></div></div>
<div class="ttc" id="PassSupport_8h_html_a14724f1ccf528e73bb29bc9230737967"><div class="ttname"><a href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a></div><div class="ttdeci">#define INITIALIZE_PASS_DEPENDENCY(depName)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00167">PassSupport.h:167</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a382131e712e55e8324fbd5068de17b78"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a382131e712e55e8324fbd5068de17b78">llvm::BranchInst::isUnconditional</a></div><div class="ttdeci">bool isUnconditional() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02391">Instructions.h:2391</a></div></div>
<div class="ttc" id="GVN_8cpp_html_ad0d196a9b22e43ebe2fe1bc471cefa45"><div class="ttname"><a href="GVN_8cpp.html#ad0d196a9b22e43ebe2fe1bc471cefa45">MaxRecurseDepth</a></div><div class="ttdeci">static cl::opt&lt; uint32_t &gt; MaxRecurseDepth(&quot;max-recurse-depth&quot;, cl::Hidden, cl::init(1000), cl::ZeroOrMore, cl::desc(&quot;Max recurse depth (default = 1000)&quot;))</div></div>
<div class="ttc" id="classllvm_1_1Value_html_a1933ce346f4cbadcc151cea432c2b316"><div class="ttname"><a href="classllvm_1_1Value.html#a1933ce346f4cbadcc151cea432c2b316">llvm::Value::dump</a></div><div class="ttdeci">void dump() const </div><div class="ttdoc">dump - Support for debugging, callable in GDB: V-&gt;dump() </div><div class="ttdef"><b>Definition:</b> <a href="AsmWriter_8cpp_source.html#l02212">AsmWriter.cpp:2212</a></div></div>
<div class="ttc" id="GVN_8cpp_html_a9b51dd24187fb51cb70169bb921da81b"><div class="ttname"><a href="GVN_8cpp.html#a9b51dd24187fb51cb70169bb921da81b">EnablePRE</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; EnablePRE(&quot;enable-pre&quot;, cl::init(true), cl::Hidden)</div></div>
<div class="ttc" id="classllvm_1_1value__use__iterator_html"><div class="ttname"><a href="classllvm_1_1value__use__iterator.html">llvm::value_use_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00168">Use.h:168</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlockEdge_html"><div class="ttname"><a href="classllvm_1_1BasicBlockEdge.html">llvm::BasicBlockEdge</a></div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00721">Dominators.h:721</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac17897ebf2f6a6986280fc3bdf28a30a">llvm::CmpInst::ICMP_NE</a></div><div class="ttdoc">not equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00673">InstrTypes.h:673</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a400eaca9881c8dcab97e9f42b1ab1815"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">llvm::SmallVectorImpl::pop_back_val</a></div><div class="ttdeci">T LLVM_ATTRIBUTE_UNUSED_RESULT pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00430">SmallVector.h:430</a></div></div>
<div class="ttc" id="ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdef"><b>Definition:</b> <a href="ErrorHandling_8h_source.html#l00103">ErrorHandling.h:103</a></div></div>
<div class="ttc" id="classllvm_1_1Use_html"><div class="ttname"><a href="classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00060">Use.h:60</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00035">APInt.h:35</a></div></div>
<div class="ttc" id="PassSupport_8h_html_a74ce8276b89067e806f67c45a6d92575"><div class="ttname"><a href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a></div><div class="ttdeci">#define INITIALIZE_PASS_END(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00172">PassSupport.h:172</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html_ac88b95273e6c753188f6a54d65548579"><div class="ttname"><a href="classllvm_1_1CallInst.html#ac88b95273e6c753188f6a54d65548579">llvm::CallInst::getNumArgOperands</a></div><div class="ttdeci">unsigned getNumArgOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01241">Instructions.h:1241</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html"><div class="ttname"><a href="classllvm_1_1IRBuilder.html">llvm::IRBuilder</a></div><div class="ttdoc">This provides a uniform API for creating instructions and inserting them into a basic block: either a...</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00421">IRBuilder.h:421</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90acd74a673807c129d89e2456d8d2e566d"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90acd74a673807c129d89e2456d8d2e566d">llvm::Intrinsic::usub_with_overflow</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02447">Intrinsics.h:2447</a></div></div>
<div class="ttc" id="classllvm_1_1ExtractValueInst_html_accfb950dd96959bfa9d44451540d088a"><div class="ttname"><a href="classllvm_1_1ExtractValueInst.html#accfb950dd96959bfa9d44451540d088a">llvm::ExtractValueInst::getNumIndices</a></div><div class="ttdeci">unsigned getNumIndices() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01804">Instructions.h:1804</a></div></div>
<div class="ttc" id="classllvm_1_1AliasAnalysis_html"><div class="ttname"><a href="classllvm_1_1AliasAnalysis.html">llvm::AliasAnalysis</a></div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00056">AliasAnalysis.h:56</a></div></div>
<div class="ttc" id="classllvm_1_1MemoryDependenceAnalysis_html"><div class="ttname"><a href="classllvm_1_1MemoryDependenceAnalysis.html">llvm::MemoryDependenceAnalysis</a></div><div class="ttdef"><b>Definition:</b> <a href="MemoryDependenceAnalysis_8h_source.html#l00257">MemoryDependenceAnalysis.h:257</a></div></div>
<div class="ttc" id="namespacellvm_html_a0f249e36f196bbea3e4178ad0793544d"><div class="ttname"><a href="namespacellvm.html#a0f249e36f196bbea3e4178ad0793544d">llvm::MergeBlockIntoPredecessor</a></div><div class="ttdeci">bool MergeBlockIntoPredecessor(BasicBlock *BB, Pass *P=0)</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00116">BasicBlockUtils.cpp:116</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a35ee267850af7c235474a8c46c7ac5af"><div class="ttname"><a href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">llvm::Value::setName</a></div><div class="ttdeci">void setName(const Twine &amp;Name)</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00175">Value.cpp:175</a></div></div>
<div class="ttc" id="InstCombineCompares_8cpp_html_aa5ab8c7b55d8bc7cab66be444daa70a1"><div class="ttname"><a href="InstCombineCompares_8cpp.html#aa5ab8c7b55d8bc7cab66be444daa70a1">ExtractElement</a></div><div class="ttdeci">static ConstantInt * ExtractElement(Constant *V, Constant *Idx)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l00040">InstCombineCompares.cpp:40</a></div></div>
<div class="ttc" id="namespacellvm_1_1CallingConv_html_a4f861731fc6dbfdccc05af5968d98974"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">llvm::CallingConv::ID</a></div><div class="ttdeci">ID</div><div class="ttdoc">LLVM Calling Convention Representation. </div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00026">CallingConv.h:26</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_af6aad0c9ba7b8720130235c9621b55b5"><div class="ttname"><a href="classllvm_1_1Instruction.html#af6aad0c9ba7b8720130235c9621b55b5">llvm::Instruction::clone</a></div><div class="ttdeci">Instruction * clone() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00541">Instruction.cpp:541</a></div></div>
<div class="ttc" id="classllvm_1_1MemoryDependenceAnalysis_html_a7136be51f5ad007feee921c8ffec54da"><div class="ttname"><a href="classllvm_1_1MemoryDependenceAnalysis.html#a7136be51f5ad007feee921c8ffec54da">llvm::MemoryDependenceAnalysis::getLoadLoadClobberFullWidthSize</a></div><div class="ttdeci">static unsigned getLoadLoadClobberFullWidthSize(const Value *MemLocBase, int64_t MemLocOffs, unsigned MemLocSize, const LoadInst *LI, const DataLayout &amp;TD)</div><div class="ttdef"><b>Definition:</b> <a href="MemoryDependenceAnalysis_8cpp_source.html#l00281">MemoryDependenceAnalysis.cpp:281</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00031">Instruction.h:31</a></div></div>
<div class="ttc" id="TargetLibraryInfo_8h_html"><div class="ttname"><a href="TargetLibraryInfo_8h.html">TargetLibraryInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1PtrToIntInst_html"><div class="ttname"><a href="classllvm_1_1PtrToIntInst.html">llvm::PtrToIntInst</a></div><div class="ttdoc">This class represents a cast from a pointer to an integer. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03539">Instructions.h:3539</a></div></div>
<div class="ttc" id="Dominators_8h_html"><div class="ttname"><a href="Dominators_8h.html">Dominators.h</a></div></div>
<div class="ttc" id="namespacellvm_html_a3720211f6e6389ab53734b989bfb6fce"><div class="ttname"><a href="namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">llvm::succ_begin</a></div><div class="ttdeci">Interval::succ_iterator succ_begin(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00107">Interval.h:107</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a6edd823ba5e4e1effc8280ca8a1194ef"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a6edd823ba5e4e1effc8280ca8a1194ef">llvm::ConstantInt::getZExtValue</a></div><div class="ttdeci">uint64_t getZExtValue() const </div><div class="ttdoc">Return the zero extended value. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00116">Constants.h:116</a></div></div>
<div class="ttc" id="classllvm_1_1AliasAnalysis_html_a533cd570eeebdb48681e253dc174a777"><div class="ttname"><a href="classllvm_1_1AliasAnalysis.html#a533cd570eeebdb48681e253dc174a777">llvm::AliasAnalysis::copyValue</a></div><div class="ttdeci">virtual void copyValue(Value *From, Value *To)</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8cpp_source.html#l00068">AliasAnalysis.cpp:68</a></div></div>
<div class="ttc" id="GVN_8cpp_html_aec2b1a93f189c825a7d2e1ae14f1dc32"><div class="ttname"><a href="GVN_8cpp.html#aec2b1a93f189c825a7d2e1ae14f1dc32">patchReplacementInstruction</a></div><div class="ttdeci">static void patchReplacementInstruction(Instruction *I, Value *Repl)</div><div class="ttdef"><b>Definition:</b> <a href="GVN_8cpp_source.html#l01760">GVN.cpp:1760</a></div></div>
<div class="ttc" id="classllvm_1_1SetVector_html_a72d928b7fc2c5f2d56c6ac0265fd9c6e"><div class="ttname"><a href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallSet&lt; T, N &gt; &gt;::insert</a></div><div class="ttdeci">bool insert(const value_type &amp;X)</div><div class="ttdoc">Insert a new element into the SetVector. </div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00102">SetVector.h:102</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a0fd8d3c26bf5cd614b0e6a9b8886a5d0"><div class="ttname"><a href="classllvm_1_1Instruction.html#a0fd8d3c26bf5cd614b0e6a9b8886a5d0">llvm::Instruction::mayReadFromMemory</a></div><div class="ttdeci">bool mayReadFromMemory() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00421">Instruction.cpp:421</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_af348d5ea83429d08ba891ca3dd0e92b2"><div class="ttname"><a href="classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">llvm::Type::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">getContext - Return the LLVMContext in which this type was uniqued. </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00128">Type.h:128</a></div></div>
<div class="ttc" id="Hashing_8h_html"><div class="ttname"><a href="Hashing_8h.html">Hashing.h</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html_a2ced6343b8ad006a757059554bbf9f37"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html#a2ced6343b8ad006a757059554bbf9f37">llvm::SmallPtrSet::count</a></div><div class="ttdeci">bool count(PtrType Ptr) const </div><div class="ttdoc">count - Return true if the specified pointer is in the set. </div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00264">SmallPtrSet.h:264</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorBase_html_a8a8df4d85555c7954a95f86080cd3b64"><div class="ttname"><a href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">llvm::SmallVectorBase::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const </div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00056">SmallVector.h:56</a></div></div>
<div class="ttc" id="classllvm_1_1InsertValueInst_html_a3f7c92fd20f790be6bf2182edd6919a5"><div class="ttname"><a href="classllvm_1_1InsertValueInst.html#a3f7c92fd20f790be6bf2182edd6919a5">llvm::InsertValueInst::idx_iterator</a></div><div class="ttdeci">const unsigned * idx_iterator</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01897">Instructions.h:1897</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90ae857cbc5cf8c5a980f0bd245ad5ec61a"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ae857cbc5cf8c5a980f0bd245ad5ec61a">llvm::Intrinsic::memset</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l01262">Intrinsics.h:1262</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a74e70ecbb79defbbfa6f6c87f76155bf"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">llvm::BranchInst::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02406">Instructions.h:2406</a></div></div>
<div class="ttc" id="classllvm_1_1SetVector_html_adb13793b98ab59209a5309d26f831850"><div class="ttname"><a href="classllvm_1_1SetVector.html#adb13793b98ab59209a5309d26f831850">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallSet&lt; T, N &gt; &gt;::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdoc">Get an iterator to the beginning of the SetVector. </div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00069">SetVector.h:69</a></div></div>
<div class="ttc" id="SmallPtrSet_8h_html"><div class="ttname"><a href="SmallPtrSet_8h.html">SmallPtrSet.h</a></div></div>
<div class="ttc" id="classllvm_1_1BitCastInst_html"><div class="ttname"><a href="classllvm_1_1BitCastInst.html">llvm::BitCastInst</a></div><div class="ttdoc">This class represents a no-op cast from one type to another. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03587">Instructions.h:3587</a></div></div>
<div class="ttc" id="classllvm_1_1AliasAnalysis_html_ab3cecb80aa774bc87bc9e136d245acba"><div class="ttname"><a href="classllvm_1_1AliasAnalysis.html#ab3cecb80aa774bc87bc9e136d245acba">llvm::AliasAnalysis::addEscapingUse</a></div><div class="ttdeci">virtual void addEscapingUse(Use &amp;U)</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8cpp_source.html#l00073">AliasAnalysis.cpp:73</a></div></div>
<div class="ttc" id="namespacellvm_html_a4dd787942e0bd9f46c0cc2642cce0a4c"><div class="ttname"><a href="namespacellvm.html#a4dd787942e0bd9f46c0cc2642cce0a4c">llvm::hash_value</a></div><div class="ttdeci">hash_code hash_value(const APFloat &amp;Arg)</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8cpp_source.html#l02814">APFloat.cpp:2814</a></div></div>
<div class="ttc" id="namespacellvm_html_af6d6a791770bad2303c4399986979e3eae411369b2f0d8f484fec62c3291b1b51"><div class="ttname"><a href="namespacellvm.html#af6d6a791770bad2303c4399986979e3eae411369b2f0d8f484fec62c3291b1b51">llvm::Call</a></div><div class="ttdef"><b>Definition:</b> <a href="CallingConvLower_8h_source.html#l00149">CallingConvLower.h:149</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_ab5073dd57732298abf080ef8381ad14e"><div class="ttname"><a href="classllvm_1_1DataLayout.html#ab5073dd57732298abf080ef8381ad14e">llvm::DataLayout::isLittleEndian</a></div><div class="ttdeci">bool isLittleEndian() const </div><div class="ttdoc">Layout endianness... </div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00195">DataLayout.h:195</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html"><div class="ttname"><a href="classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00255">Instructions.h:255</a></div></div>
<div class="ttc" id="classllvm_1_1ReversePostOrderTraversal_html_ac958000d711f19778f1b40792821b5b3"><div class="ttname"><a href="classllvm_1_1ReversePostOrderTraversal.html#ac958000d711f19778f1b40792821b5b3">llvm::ReversePostOrderTraversal::begin</a></div><div class="ttdeci">rpo_iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="PostOrderIterator_8h_source.html#l00273">PostOrderIterator.h:273</a></div></div>
<div class="ttc" id="classllvm_1_1LLVMContext_html_a0869c4dfee48696ce863fcd367eba52da31130c233c11d5b171bae969ee4c8af8"><div class="ttname"><a href="classllvm_1_1LLVMContext.html#a0869c4dfee48696ce863fcd367eba52da31130c233c11d5b171bae969ee4c8af8">llvm::LLVMContext::MD_prof</a></div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00048">LLVMContext.h:48</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00303">Value.cpp:303</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a9aae7c60b468bcf6db982dc76e6c703a"><div class="ttname"><a href="classllvm_1_1Type.html#a9aae7c60b468bcf6db982dc76e6c703a">llvm::Type::isArrayTy</a></div><div class="ttdeci">bool isArrayTy() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00216">Type.h:216</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ae855357b6c5e6e7ed1869272708a3a84"><div class="ttname"><a href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">llvm::Value::takeName</a></div><div class="ttdeci">void takeName(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00239">Value.cpp:239</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a88a5e60837674780a9d812d661897ac5"><div class="ttname"><a href="classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">llvm::Function::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00395">Function.h:395</a></div></div>
<div class="ttc" id="GVN_8cpp_html_aa306b8d484291ede665613aac3084548"><div class="ttname"><a href="GVN_8cpp.html#aa306b8d484291ede665613aac3084548">AnalyzeLoadFromClobberingLoad</a></div><div class="ttdeci">static int AnalyzeLoadFromClobberingLoad(Type *LoadTy, Value *LoadPtr, LoadInst *DepLI, const DataLayout &amp;TD)</div><div class="ttdef"><b>Definition:</b> <a href="GVN_8cpp_source.html#l01033">GVN.cpp:1033</a></div></div>
<div class="ttc" id="classllvm_1_1DominatorTree_html"><div class="ttname"><a href="classllvm_1_1DominatorTree.html">llvm::DominatorTree</a></div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00740">Dominators.h:740</a></div></div>
<div class="ttc" id="classllvm_1_1TruncInst_html"><div class="ttname"><a href="classllvm_1_1TruncInst.html">llvm::TruncInst</a></div><div class="ttdoc">This class represents a truncation of integer types. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03175">Instructions.h:3175</a></div></div>
<div class="ttc" id="GVN_8cpp_html_a5a14f90fae625ff076364378de0c57ed"><div class="ttname"><a href="GVN_8cpp.html#a5a14f90fae625ff076364378de0c57ed">GetLoadValueForLoad</a></div><div class="ttdeci">static Value * GetLoadValueForLoad(LoadInst *SrcVal, unsigned Offset, Type *LoadTy, Instruction *InsertPt, GVN &amp;gvn)</div><div class="ttdef"><b>Definition:</b> <a href="GVN_8cpp_source.html#l01150">GVN.cpp:1150</a></div></div>
<div class="ttc" id="DepthFirstIterator_8h_html"><div class="ttname"><a href="DepthFirstIterator_8h.html">DepthFirstIterator.h</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_aa45f6c0433576e3858a6209a43750ad4"><div class="ttname"><a href="classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">llvm::PHINode::getNumIncomingValues</a></div><div class="ttdeci">unsigned getNumIncomingValues() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02055">Instructions.h:2055</a></div></div>
<div class="ttc" id="namespacellvm_html_a069c4ae2290101bde0f8d6a5074dc72b"><div class="ttname"><a href="namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">llvm::succ_end</a></div><div class="ttdeci">Interval::succ_iterator succ_end(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00110">Interval.h:110</a></div></div>
<div class="ttc" id="classllvm_1_1LLVMContext_html_a0869c4dfee48696ce863fcd367eba52da1b73df7e27f0fa94e338ffc4fac9daf3"><div class="ttname"><a href="classllvm_1_1LLVMContext.html#a0869c4dfee48696ce863fcd367eba52da1b73df7e27f0fa94e338ffc4fac9daf3">llvm::LLVMContext::MD_fpmath</a></div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00049">LLVMContext.h:49</a></div></div>
<div class="ttc" id="classllvm_1_1TerminatorInst_html_a4c26d3b92af99a6c8defd89a2d39ca32"><div class="ttname"><a href="classllvm_1_1TerminatorInst.html#a4c26d3b92af99a6c8defd89a2d39ca32">llvm::TerminatorInst::getNumSuccessors</a></div><div class="ttdeci">unsigned getNumSuccessors() const </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00059">InstrTypes.h:59</a></div></div>
<div class="ttc" id="README__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A,*B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00091">README_ALTIVEC.txt:91</a></div></div>
<div class="ttc" id="CommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="Target_2PowerPC_2README_8txt_html_a1c23e7f459a1051c48b302e7f4ff100e"><div class="ttname"><a href="Target_2PowerPC_2README_8txt.html#a1c23e7f459a1051c48b302e7f4ff100e">get</a></div><div class="ttdeci">could compile rldicr blr rldicl blr we ori sldi blr sldi oris ori r4 addze r3 instead we get</div><div class="ttdef"><b>Definition:</b> <a href="Target_2PowerPC_2README_8txt_source.html#l00038">Target/PowerPC/README.txt:38</a></div></div>
<div class="ttc" id="classllvm_1_1MDNode_html_aac6e3a0dec40a6721857cbbd4330039f"><div class="ttname"><a href="classllvm_1_1MDNode.html#aac6e3a0dec40a6721857cbbd4330039f">llvm::MDNode::getMostGenericRange</a></div><div class="ttdeci">static MDNode * getMostGenericRange(MDNode *A, MDNode *B)</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l00454">Metadata.cpp:454</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00314">CommandLine.h:314</a></div></div>
<div class="ttc" id="classllvm_1_1SSAUpdater_html_a5b0e45dbba53e985f1b9c532fb5f200b"><div class="ttname"><a href="classllvm_1_1SSAUpdater.html#a5b0e45dbba53e985f1b9c532fb5f200b">llvm::SSAUpdater::GetValueInMiddleOfBlock</a></div><div class="ttdeci">Value * GetValueInMiddleOfBlock(BasicBlock *BB)</div><div class="ttdoc">Construct SSA form, materializing a value that is live in the middle of the specified block...</div><div class="ttdef"><b>Definition:</b> <a href="SSAUpdater_8cpp_source.html#l00086">SSAUpdater.cpp:86</a></div></div>
<div class="ttc" id="namespacellvm_html_a03503773241005f01b090b9862aad304"><div class="ttname"><a href="namespacellvm.html#a03503773241005f01b090b9862aad304">llvm::dump</a></div><div class="ttdeci">void dump(const SparseBitVector&lt; ElementSize &gt; &amp;LHS, raw_ostream &amp;out)</div><div class="ttdef"><b>Definition:</b> <a href="SparseBitVector_8h_source.html#l00882">SparseBitVector.h:882</a></div></div>
<div class="ttc" id="LLParser_8cpp_html_aae58e3df0180401e8f3ab75c18fbc07a"><div class="ttname"><a href="LLParser_8cpp.html#aae58e3df0180401e8f3ab75c18fbc07a">if</a></div><div class="ttdeci">* if(!EatIfPresent(lltok::kw_thread_local)) return false</div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90aa3d4911fd70a787382c691646d119ff4"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aa3d4911fd70a787382c691646d119ff4">llvm::Intrinsic::exp</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l00383">Intrinsics.h:383</a></div></div>
<div class="ttc" id="classllvm_1_1SuccIterator_html"><div class="ttname"><a href="classllvm_1_1SuccIterator.html">llvm::SuccIterator&lt; TerminatorInst *, BasicBlock &gt;</a></div></div>
<div class="ttc" id="classllvm_1_1Use_html_a40360b4fa7b8e6920a68e5a8a0814f1f"><div class="ttname"><a href="classllvm_1_1Use.html#a40360b4fa7b8e6920a68e5a8a0814f1f">llvm::Use::set</a></div><div class="ttdeci">void set(Value *Val)</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00356">Value.h:356</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a482498a1c760122fd33c7fc8190dd277"><div class="ttname"><a href="classllvm_1_1Instruction.html#a482498a1c760122fd33c7fc8190dd277">llvm::Instruction::insertBefore</a></div><div class="ttdeci">void insertBefore(Instruction *InsertPos)</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00078">Instruction.cpp:78</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_acd9e771a3296c6b24146955754620557"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#acd9e771a3296c6b24146955754620557">llvm::SmallVectorTemplateCommon&lt; T &gt;::back</a></div><div class="ttdeci">reference back()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00157">SmallVector.h:157</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00396">SmallVector.h:396</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1PointerIntPair_html"><div class="ttname"><a href="classllvm_1_1PointerIntPair.html">llvm::PointerIntPair</a></div><div class="ttdef"><b>Definition:</b> <a href="PointerIntPair_8h_source.html#l00042">PointerIntPair.h:42</a></div></div>
<div class="ttc" id="classllvm_1_1PHITransAddr_html"><div class="ttname"><a href="classllvm_1_1PHITransAddr.html">llvm::PHITransAddr</a></div><div class="ttdef"><b>Definition:</b> <a href="PHITransAddr_8h_source.html#l00035">PHITransAddr.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00044">Type.h:44</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a42569041ddafba7d40243e126af07f42"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">llvm::PatternMatch::m_Or</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Or &gt; m_Or(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00473">PatternMatch.h:473</a></div></div>
<div class="ttc" id="classllvm_1_1LLVMContext_html"><div class="ttname"><a href="classllvm_1_1LLVMContext.html">llvm::LLVMContext</a></div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00037">LLVMContext.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html"><div class="ttname"><a href="classllvm_1_1BranchInst.html">llvm::BranchInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02350">Instructions.h:2350</a></div></div>
<div class="ttc" id="namespacellvm_html_a849b445fe6bce862c395ea6b97c1f658"><div class="ttname"><a href="namespacellvm.html#a849b445fe6bce862c395ea6b97c1f658">llvm::df_end</a></div><div class="ttdeci">df_iterator&lt; T &gt; df_end(const T &amp;G)</div><div class="ttdef"><b>Definition:</b> <a href="DepthFirstIterator_8h_source.html#l00206">DepthFirstIterator.h:206</a></div></div>
<div class="ttc" id="GVN_8cpp_html_a61d5060162c77138d1c3244c8e001ea2"><div class="ttname"><a href="GVN_8cpp.html#a61d5060162c77138d1c3244c8e001ea2">ConstructSSAForLoadSet</a></div><div class="ttdeci">static Value * ConstructSSAForLoadSet(LoadInst *LI, SmallVectorImpl&lt; AvailableValueInBlock &gt; &amp;ValuesPerBlock, GVN &amp;gvn)</div><div class="ttdef"><b>Definition:</b> <a href="GVN_8cpp_source.html#l01268">GVN.cpp:1268</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1ReversePostOrderTraversal_html"><div class="ttname"><a href="classllvm_1_1ReversePostOrderTraversal.html">llvm::ReversePostOrderTraversal</a></div><div class="ttdef"><b>Definition:</b> <a href="PostOrderIterator_8h_source.html#l00259">PostOrderIterator.h:259</a></div></div>
<div class="ttc" id="namespacellvm_html_a2b33f2166f38124ec3081c2fd59672f7"><div class="ttname"><a href="namespacellvm.html#a2b33f2166f38124ec3081c2fd59672f7">llvm::hash_combine</a></div><div class="ttdeci">hash_code hash_combine(const T1 &amp;arg1, const T2 &amp;arg2, const T3 &amp;arg3, const T4 &amp;arg4, const T5 &amp;arg5, const T6 &amp;arg6)</div><div class="ttdef"><b>Definition:</b> <a href="Hashing_8h_source.html#l00674">Hashing.h:674</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a137f4ed94704473ee62c0a70084984fc"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a137f4ed94704473ee62c0a70084984fc">llvm::Intrinsic::sadd_with_overflow</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02431">Intrinsics.h:2431</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_a22f056804d2b9882f74adc905872bc39"><div class="ttname"><a href="namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">llvm::APIntOps::Or</a></div><div class="ttdeci">APInt Or(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise OR function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01845">APInt.h:1845</a></div></div>
<div class="ttc" id="structllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00286">CommandLine.h:286</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_afc7c4d88d09cba0c5e920f8a3a3ace55"><div class="ttname"><a href="namespacellvm_1_1APIntOps.html#afc7c4d88d09cba0c5e920f8a3a3ace55">llvm::APIntOps::Xor</a></div><div class="ttdeci">APInt Xor(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise XOR function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01850">APInt.h:1850</a></div></div>
<div class="ttc" id="namespacellvm_html_a7e108932dc3da5294aed99a353aac9c4"><div class="ttname"><a href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">llvm::pred_begin</a></div><div class="ttdeci">Interval::pred_iterator pred_begin(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00117">Interval.h:117</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_aab8e16a35183ce39aad394714087bcff"><div class="ttname"><a href="classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">llvm::Instruction::getDebugLoc</a></div><div class="ttdeci">const DebugLoc &amp; getDebugLoc() const </div><div class="ttdoc">getDebugLoc - Return the debug location for this node as a DebugLoc. </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00178">Instruction.h:178</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00037">PassAnalysisSupport.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_afb5e83bf5123ff7c51058eb0ebebcdc6"><div class="ttname"><a href="classllvm_1_1PHINode.html#afb5e83bf5123ff7c51058eb0ebebcdc6">llvm::PHINode::Create</a></div><div class="ttdeci">static PHINode * Create(Type *Ty, unsigned NumReservedValues, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02013">Instructions.h:2013</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_af41f58e730804d10b91fcff39b035f74"><div class="ttname"><a href="classllvm_1_1User.html#af41f58e730804d10b91fcff39b035f74">llvm::User::op_end</a></div><div class="ttdeci">op_iterator op_end()</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00118">User.h:118</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a492234b10e0c5918d72a3a15a6f0fa6ea61d3cb794533763159788c493ad266d9"><div class="ttname"><a href="namespacellvm_1_1cl.html#a492234b10e0c5918d72a3a15a6f0fa6ea61d3cb794533763159788c493ad266d9">llvm::cl::ZeroOrMore</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00086">CommandLine.h:86</a></div></div>
<div class="ttc" id="classllvm_1_1NonLocalDepEntry_html_a9484eee2611393c9db4e3ca858455221"><div class="ttname"><a href="classllvm_1_1NonLocalDepEntry.html#a9484eee2611393c9db4e3ca858455221">llvm::NonLocalDepEntry::getBB</a></div><div class="ttdeci">BasicBlock * getBB() const </div><div class="ttdef"><b>Definition:</b> <a href="MemoryDependenceAnalysis_8h_source.html#l00201">MemoryDependenceAnalysis.h:201</a></div></div>
<div class="ttc" id="classllvm_1_1ExtractValueInst_html_a4fe735fcf509b757252e91d53498708a"><div class="ttname"><a href="classllvm_1_1ExtractValueInst.html#a4fe735fcf509b757252e91d53498708a">llvm::ExtractValueInst::idx_iterator</a></div><div class="ttdeci">const unsigned * idx_iterator</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01786">Instructions.h:1786</a></div></div>
<div class="ttc" id="classllvm_1_1ICmpInst_html"><div class="ttname"><a href="classllvm_1_1ICmpInst.html">llvm::ICmpInst</a></div><div class="ttdoc">Represent an integer comparison operator. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00911">Instructions.h:911</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">llvm::CmpInst::Predicate</a></div><div class="ttdeci">Predicate</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00651">InstrTypes.h:651</a></div></div>
<div class="ttc" id="classllvm_1_1FunctionPass_html"><div class="ttname"><a href="classllvm_1_1FunctionPass.html">llvm::FunctionPass</a></div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00293">Pass.h:293</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a321e37d79af8b4287f8a1dcf9aff9c01"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00057">DenseMap.h:57</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00088">User.h:88</a></div></div>
<div class="ttc" id="namespacellvm_html_a5eeaf08e96168c2cac8960f87f0ef360"><div class="ttname"><a href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">llvm::pred_end</a></div><div class="ttdeci">Interval::pred_iterator pred_end(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00120">Interval.h:120</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_ad47eefa1d094f60494b6b927061ca001"><div class="ttname"><a href="classllvm_1_1LoadInst.html#ad47eefa1d094f60494b6b927061ca001">llvm::LoadInst::getPointerOperand</a></div><div class="ttdeci">Value * getPointerOperand()</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00223">Instructions.h:223</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a1c2048f254df730c4de1643ec791ddf9"><div class="ttname"><a href="classllvm_1_1Instruction.html#a1c2048f254df730c4de1643ec791ddf9">llvm::Instruction::isCommutative</a></div><div class="ttdeci">bool isCommutative() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00269">Instruction.h:269</a></div></div>
<div class="ttc" id="classllvm_1_1NonLocalDepEntry_html_abd0c15cf35f0f3bfd2e092c55d5e6069"><div class="ttname"><a href="classllvm_1_1NonLocalDepEntry.html#abd0c15cf35f0f3bfd2e092c55d5e6069">llvm::NonLocalDepEntry::getResult</a></div><div class="ttdeci">const MemDepResult &amp; getResult() const </div><div class="ttdef"><b>Definition:</b> <a href="MemoryDependenceAnalysis_8h_source.html#l00205">MemoryDependenceAnalysis.h:205</a></div></div>
<div class="ttc" id="classllvm_1_1LLVMContext_html_a0869c4dfee48696ce863fcd367eba52da66682b7e33233c8e51196bbf274726a2"><div class="ttname"><a href="classllvm_1_1LLVMContext.html#a0869c4dfee48696ce863fcd367eba52da66682b7e33233c8e51196bbf274726a2">llvm::LLVMContext::MD_tbaa</a></div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00047">LLVMContext.h:47</a></div></div>
<div class="ttc" id="classllvm_1_1SSAUpdater_html_a7df49ea3c5b04f4f97332498f038ba60"><div class="ttname"><a href="classllvm_1_1SSAUpdater.html#a7df49ea3c5b04f4f97332498f038ba60">llvm::SSAUpdater::HasValueForBlock</a></div><div class="ttdeci">bool HasValueForBlock(BasicBlock *BB) const </div><div class="ttdoc">Return true if the SSAUpdater already has a value for the specified block. </div><div class="ttdef"><b>Definition:</b> <a href="SSAUpdater_8cpp_source.html#l00054">SSAUpdater.cpp:54</a></div></div>
<div class="ttc" id="namespacellvm_html_acf81840e57f5d7beb1d5983f4dac772f"><div class="ttname"><a href="namespacellvm.html#acf81840e57f5d7beb1d5983f4dac772f">llvm::ConstantFoldLoadFromConstPtr</a></div><div class="ttdeci">Constant * ConstantFoldLoadFromConstPtr(Constant *C, const DataLayout *TD=0)</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFolding_8cpp_source.html#l00472">ConstantFolding.cpp:472</a></div></div>
<div class="ttc" id="GVN_8cpp_html_a3455164f36b257abea8311bb9db5b2b1"><div class="ttname"><a href="GVN_8cpp.html#a3455164f36b257abea8311bb9db5b2b1">CanCoerceMustAliasedValueToLoad</a></div><div class="ttdeci">static bool CanCoerceMustAliasedValueToLoad(Value *StoredVal, Type *LoadTy, const DataLayout &amp;TD)</div><div class="ttdef"><b>Definition:</b> <a href="GVN_8cpp_source.html#l00831">GVN.cpp:831</a></div></div>
<div class="ttc" id="structllvm_1_1AliasAnalysis_1_1Location_html"><div class="ttname"><a href="structllvm_1_1AliasAnalysis_1_1Location.html">llvm::AliasAnalysis::Location</a></div><div class="ttdoc">Location - A description of a memory location. </div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00106">AliasAnalysis.h:106</a></div></div>
<div class="ttc" id="Writer_8h_html"><div class="ttname"><a href="Writer_8h.html">Writer.h</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_a218ef27c964707a907f12db0f9b002ba"><div class="ttname"><a href="classllvm_1_1LoadInst.html#a218ef27c964707a907f12db0f9b002ba">llvm::LoadInst::setAlignment</a></div><div class="ttdeci">void setAlignment(unsigned Align)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l01065">Instructions.cpp:1065</a></div></div>
<div class="ttc" id="classllvm_1_1IntToPtrInst_html"><div class="ttname"><a href="classllvm_1_1IntToPtrInst.html">llvm::IntToPtrInst</a></div><div class="ttdoc">This class represents a cast from an integer to a pointer. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03499">Instructions.h:3499</a></div></div>
<div class="ttc" id="DenseMap_8h_html"><div class="ttname"><a href="DenseMap_8h.html">DenseMap.h</a></div></div>
<div class="ttc" id="PassSupport_8h_html_af0564bcdde2dd4400c670ca278c6035f"><div class="ttname"><a href="PassSupport_8h.html#af0564bcdde2dd4400c670ca278c6035f">INITIALIZE_AG_DEPENDENCY</a></div><div class="ttdeci">#define INITIALIZE_AG_DEPENDENCY(depName)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00169">PassSupport.h:169</a></div></div>
<div class="ttc" id="Target_2LLVMBuild_8txt_html_ac6653103ff5a7ab01c54613c5a0e5b2d"><div class="ttname"><a href="Target_2LLVMBuild_8txt.html#ac6653103ff5a7ab01c54613c5a0e5b2d">type</a></div><div class="ttdeci">with the configured native if any[component_1] type</div><div class="ttdef"><b>Definition:</b> <a href="Target_2LLVMBuild_8txt_source.html#l00032">Target/LLVMBuild.txt:32</a></div></div>
<div class="ttc" id="classllvm_1_1MDNode_html_a3c210e8905029a012df3384a7eeb63ad"><div class="ttname"><a href="classllvm_1_1MDNode.html#a3c210e8905029a012df3384a7eeb63ad">llvm::MDNode::getMostGenericTBAA</a></div><div class="ttdeci">static MDNode * getMostGenericTBAA(MDNode *A, MDNode *B)</div><div class="ttdoc">Methods for metadata merging. </div><div class="ttdef"><b>Definition:</b> <a href="TypeBasedAliasAnalysis_8cpp_source.html#l00556">TypeBasedAliasAnalysis.cpp:556</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html">llvm::GlobalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalVariable_8h_source.html#l00035">GlobalVariable.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a2eba483f5cc876e824aa6c085736086b"><div class="ttname"><a href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">llvm::Type::isPointerTy</a></div><div class="ttdeci">bool isPointerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00220">Type.h:220</a></div></div>
<div class="ttc" id="classllvm_1_1UndefValue_html_a4ae5ff22b700a42bcc5d889233721335"><div class="ttname"><a href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">llvm::UndefValue::get</a></div><div class="ttdeci">static UndefValue * get(Type *T)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01334">Constants.cpp:1334</a></div></div>
<div class="ttc" id="namespacellvm_html_a0490c32aa8dd63ddc56bb046fd0258c7"><div class="ttname"><a href="namespacellvm.html#a0490c32aa8dd63ddc56bb046fd0258c7">llvm::NextPowerOf2</a></div><div class="ttdeci">uint64_t NextPowerOf2(uint64_t A)</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00546">MathExtras.h:546</a></div></div>
<div class="ttc" id="classllvm_1_1PointerIntPair_html_ae8f9fce2cb409f89c47535165f214a23"><div class="ttname"><a href="classllvm_1_1PointerIntPair.html#ae8f9fce2cb409f89c47535165f214a23">llvm::PointerIntPair::getInt</a></div><div class="ttdeci">IntType getInt() const </div><div class="ttdef"><b>Definition:</b> <a href="PointerIntPair_8h_source.html#l00075">PointerIntPair.h:75</a></div></div>
<div class="ttc" id="namespacellvm_html_a50f8f41fccbea466816345520e9bfabb"><div class="ttname"><a href="namespacellvm.html#a50f8f41fccbea466816345520e9bfabb">llvm::SimplifyInstruction</a></div><div class="ttdeci">Value * SimplifyInstruction(Instruction *I, const DataLayout *TD=0, const TargetLibraryInfo *TLI=0, const DominatorTree *DT=0)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l03036">InstructionSimplify.cpp:3036</a></div></div>
<div class="ttc" id="classT_html"><div class="ttname"><a href="classT.html">T</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a7fe9ccd4893f4e2caa826126c09545ea"><div class="ttname"><a href="classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">llvm::Type::getInt8PtrTy</a></div><div class="ttdeci">static PointerType * getInt8PtrTy(LLVMContext &amp;C, unsigned AS=0)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00284">Type.cpp:284</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html_a07783e6f39803037259a1ebe376c2b1e"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a07783e6f39803037259a1ebe376c2b1e">llvm::BinaryOperator::hasNoSignedWrap</a></div><div class="ttdeci">bool hasNoSignedWrap() const </div><div class="ttdoc">hasNoSignedWrap - Determine whether the no signed wrap flag is set. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l02013">Instructions.cpp:2013</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9247a212ea89acc9573fa7e7f557eaba"><div class="ttname"><a href="classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">llvm::Instruction::setMetadata</a></div><div class="ttdeci">void setMetadata(unsigned KindID, MDNode *Node)</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l00589">Metadata.cpp:589</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_ab335e668fd33542ea14a2c7b527e64d3"><div class="ttname"><a href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a></div><div class="ttdeci">The same transformation can work with an even modulo with the addition of a and shrink the compare RHS by the same amount Unless the target supports that transformation probably isn t worthwhile The transformation can also easily be made to work with non zero equality for n</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00723">Target/README.txt:723</a></div></div>
<div class="ttc" id="classllvm_1_1ReversePostOrderTraversal_html_aa447608e2881e813215c3f289496c6ea"><div class="ttname"><a href="classllvm_1_1ReversePostOrderTraversal.html#aa447608e2881e813215c3f289496c6ea">llvm::ReversePostOrderTraversal::rpo_iterator</a></div><div class="ttdeci">std::vector&lt; NodeType * &gt;::reverse_iterator rpo_iterator</div><div class="ttdef"><b>Definition:</b> <a href="PostOrderIterator_8h_source.html#l00266">PostOrderIterator.h:266</a></div></div>
<div class="ttc" id="classllvm_1_1MemDepResult_html"><div class="ttname"><a href="classllvm_1_1MemDepResult.html">llvm::MemDepResult</a></div><div class="ttdef"><b>Definition:</b> <a href="MemoryDependenceAnalysis_8h_source.html#l00040">MemoryDependenceAnalysis.h:40</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86II_html_a97dc14052814702ba0e2b14fb14dd02da5a78bc4e042ab2fbe041f0c29c1de4c0"><div class="ttname"><a href="namespacellvm_1_1X86II.html#a97dc14052814702ba0e2b14fb14dd02da5a78bc4e042ab2fbe041f0c29c1de4c0">llvm::X86II::DF</a></div><div class="ttdef"><b>Definition:</b> <a href="X86BaseInfo_8h_source.html#l00332">X86BaseInfo.h:332</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlockEdge_html_ae855b6a8f5e36aa51ee96ff018af63d1"><div class="ttname"><a href="classllvm_1_1BasicBlockEdge.html#ae855b6a8f5e36aa51ee96ff018af63d1">llvm::BasicBlockEdge::getEnd</a></div><div class="ttdeci">const BasicBlock * getEnd() const </div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00730">Dominators.h:730</a></div></div>
<div class="ttc" id="classllvm_1_1LLVMContext_html_a0869c4dfee48696ce863fcd367eba52da1f686cbc5b60419e0698adf924dffa43"><div class="ttname"><a href="classllvm_1_1LLVMContext.html#a0869c4dfee48696ce863fcd367eba52da1f686cbc5b60419e0698adf924dffa43">llvm::LLVMContext::MD_dbg</a></div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00046">LLVMContext.h:46</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_ae84bb2408dfffa4e8b5fe2ce0714a3bd"><div class="ttname"><a href="classllvm_1_1DataLayout.html#ae84bb2408dfffa4e8b5fe2ce0714a3bd">llvm::DataLayout::getIntPtrType</a></div><div class="ttdeci">IntegerType * getIntPtrType(LLVMContext &amp;C, unsigned AddressSpace=0) const </div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8cpp_source.html#l00610">DataLayout.cpp:610</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a699a66e504b48fdeff124e82f6c61917"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a699a66e504b48fdeff124e82f6c61917">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const std::pair&lt; KeyT, ValueT &gt; &amp;KV)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00153">DenseMap.h:153</a></div></div>
<div class="ttc" id="classllvm_1_1IntegerType_html_a14f7b4f1aed38192fb6b7772eb506bdb"><div class="ttname"><a href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">llvm::IntegerType::get</a></div><div class="ttdeci">static IntegerType * get(LLVMContext &amp;C, unsigned NumBits)</div><div class="ttdoc">Get or create an IntegerType instance. </div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00305">Type.cpp:305</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_aba93ec4079f8d709a1d5b4745310782e"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#aba93ec4079f8d709a1d5b4745310782e">llvm::ConstantExpr::getBitCast</a></div><div class="ttdeci">static Constant * getBitCast(Constant *C, Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01672">Constants.cpp:1672</a></div></div>
<div class="ttc" id="classllvm_1_1PointerIntPair_html_a2aafa035d16eddeaadc40efbf8c721e5"><div class="ttname"><a href="classllvm_1_1PointerIntPair.html#a2aafa035d16eddeaadc40efbf8c721e5">llvm::PointerIntPair::getPointer</a></div><div class="ttdeci">PointerTy getPointer() const </div><div class="ttdef"><b>Definition:</b> <a href="PointerIntPair_8h_source.html#l00070">PointerIntPair.h:70</a></div></div>
<div class="ttc" id="classllvm_1_1SmallSetVector_html"><div class="ttname"><a href="classllvm_1_1SmallSetVector.html">llvm::SmallSetVector</a></div><div class="ttdoc">A SetVector that performs no allocations if smaller than a certain size. </div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00218">SetVector.h:218</a></div></div>
<div class="ttc" id="classllvm_1_1MemIntrinsic_html"><div class="ttname"><a href="classllvm_1_1MemIntrinsic.html">llvm::MemIntrinsic</a></div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00118">IntrinsicInst.h:118</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1BumpPtrAllocator_html"><div class="ttname"><a href="classllvm_1_1BumpPtrAllocator.html">llvm::BumpPtrAllocator</a></div><div class="ttdef"><b>Definition:</b> <a href="Allocator_8h_source.html#l00090">Allocator.h:90</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a1b45f45820a60c09244a87eb59824aec"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a></div><div class="ttdeci">add sub stmia L5 ldr r0 bl L_printf $stub Instead of a and a wouldn t it be better to do three moves *Return an aggregate type is even return S</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00197">Target/ARM/README.txt:197</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00236">SmallPtrSet.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="classllvm_1_1MemIntrinsic_html_ad8bf46d46e8f14bc23bd30df57cc9a77"><div class="ttname"><a href="classllvm_1_1MemIntrinsic.html#ad8bf46d46e8f14bc23bd30df57cc9a77">llvm::MemIntrinsic::getDest</a></div><div class="ttdeci">Value * getDest() const </div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00145">IntrinsicInst.h:145</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0b4e7bee9b8575cc7db73329f1a561bd"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">llvm::BasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00195">BasicBlock.h:195</a></div></div>
<div class="ttc" id="namespacellvm_1_1EngineKind_html_a9df47239a42cd9621ac26d9ecbd57441"><div class="ttname"><a href="namespacellvm_1_1EngineKind.html#a9df47239a42cd9621ac26d9ecbd57441">llvm::EngineKind::Kind</a></div><div class="ttdeci">Kind</div><div class="ttdef"><b>Definition:</b> <a href="ExecutionEngine_2ExecutionEngine_8h_source.html#l00499">ExecutionEngine/ExecutionEngine.h:499</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a1558c7c51d5102374564fd690d19df99"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a1558c7c51d5102374564fd690d19df99">llvm::Intrinsic::ssub_with_overflow</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02438">Intrinsics.h:2438</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00880">SmallVector.h:880</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00111">Value.h:111</a></div></div>
<div class="ttc" id="classllvm_1_1TargetLibraryInfo_html"><div class="ttname"><a href="classllvm_1_1TargetLibraryInfo.html">llvm::TargetLibraryInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00657">TargetLibraryInfo.h:657</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_aafa29112cbe02e4adc9b36752c771991"><div class="ttname"><a href="classllvm_1_1Instruction.html#aafa29112cbe02e4adc9b36752c771991">llvm::Instruction::getMetadata</a></div><div class="ttdeci">MDNode * getMetadata(unsigned KindID) const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00140">Instruction.h:140</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html">llvm::BinaryOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00138">InstrTypes.h:138</a></div></div>
<div class="ttc" id="PassSupport_8h_html_aaa970fc931c1c63037a8182e028d04b1"><div class="ttname"><a href="PassSupport_8h.html#aaa970fc931c1c63037a8182e028d04b1">INITIALIZE_PASS_BEGIN</a></div><div class="ttdeci">#define INITIALIZE_PASS_BEGIN(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00164">PassSupport.h:164</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a269c7b8adcd29645a4f901196fc08806"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a269c7b8adcd29645a4f901196fc08806">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::erase</a></div><div class="ttdeci">bool erase(const KeyT &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00190">DenseMap.h:190</a></div></div>
<div class="ttc" id="classllvm_1_1MemIntrinsic_html_abad10f74789466601c7a025540c1c072"><div class="ttname"><a href="classllvm_1_1MemIntrinsic.html#abad10f74789466601c7a025540c1c072">llvm::MemIntrinsic::getLength</a></div><div class="ttdeci">Value * getLength() const </div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00122">IntrinsicInst.h:122</a></div></div>
<div class="ttc" id="classllvm_1_1MemDepResult_html_a2a64d8f5153ebc0e8c08d0702c2c4aab"><div class="ttname"><a href="classllvm_1_1MemDepResult.html#a2a64d8f5153ebc0e8c08d0702c2c4aab">llvm::MemDepResult::isNonLocal</a></div><div class="ttdeci">bool isNonLocal() const </div><div class="ttdef"><b>Definition:</b> <a href="MemoryDependenceAnalysis_8h_source.html#l00137">MemoryDependenceAnalysis.h:137</a></div></div>
<div class="ttc" id="classllvm_1_1MemoryDependenceAnalysis_html_af98ef3ed6d09824e50ec69cebc839609"><div class="ttname"><a href="classllvm_1_1MemoryDependenceAnalysis.html#af98ef3ed6d09824e50ec69cebc839609">llvm::MemoryDependenceAnalysis::NonLocalDepInfo</a></div><div class="ttdeci">std::vector&lt; NonLocalDepEntry &gt; NonLocalDepInfo</div><div class="ttdef"><b>Definition:</b> <a href="MemoryDependenceAnalysis_8h_source.html#l00263">MemoryDependenceAnalysis.h:263</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_ab5d3f9900a0284e85ee7a1520a4eeb60"><div class="ttname"><a href="classllvm_1_1CmpInst.html#ab5d3f9900a0284e85ee7a1520a4eeb60">llvm::CmpInst::getSwappedPredicate</a></div><div class="ttdeci">Predicate getSwappedPredicate() const </div><div class="ttdoc">Return the predicate as if the operands were swapped. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00753">InstrTypes.h:753</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a9105541412dab869e18b3cceebfff07d"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool isSigned=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00492">Constants.cpp:492</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a30f2c362631e3728d2f47a8203071ade"><div class="ttname"><a href="classllvm_1_1Function.html#a30f2c362631e3728d2f47a8203071ade">llvm::Function::getEntryBlock</a></div><div class="ttdeci">const BasicBlock &amp; getEntryBlock() const </div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00380">Function.h:380</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a82dbbd8e3688b0bc1eedb338864d0d0c"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">llvm::ConstantInt::getTrue</a></div><div class="ttdeci">static ConstantInt * getTrue(LLVMContext &amp;Context)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00438">Constants.cpp:438</a></div></div>
<div class="ttc" id="namespacellvm_1_1A64DB_html_a6fce8157775f3ec93f326b52b0f1e0f5ad61b145eb8cbab18feb1b2e2ce269a7e"><div class="ttname"><a href="namespacellvm_1_1A64DB.html#a6fce8157775f3ec93f326b52b0f1e0f5ad61b145eb8cbab18feb1b2e2ce269a7e">llvm::A64DB::LD</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00177">AArch64BaseInfo.h:177</a></div></div>
<div class="ttc" id="classllvm_1_1ExtractValueInst_html_ab87e7c5a729885396b3b045ad375e4b8"><div class="ttname"><a href="classllvm_1_1ExtractValueInst.html#ab87e7c5a729885396b3b045ad375e4b8">llvm::ExtractValueInst::getAggregateOperand</a></div><div class="ttdeci">Value * getAggregateOperand()</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01790">Instructions.h:1790</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a5fa9b8e1842b354f64c1ba6be0a4a17f"><div class="ttname"><a href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">llvm::User::setOperand</a></div><div class="ttdeci">void setOperand(unsigned i, Value *Val)</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00092">User.h:92</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00101">Debug.cpp:101</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_ac8ddb745480a7e75a3862ddf0be3a298"><div class="ttname"><a href="classllvm_1_1Constant.html#ac8ddb745480a7e75a3862ddf0be3a298">llvm::Constant::isAllOnesValue</a></div><div class="ttdeci">bool isAllOnesValue() const </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00088">Constants.cpp:88</a></div></div>
<div class="ttc" id="namespacestd_html_ab8424022895aee3e366fb9a32f2883cb"><div class="ttname"><a href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a></div><div class="ttdeci">void swap(llvm::BitVector &amp;LHS, llvm::BitVector &amp;RHS)</div><div class="ttdoc">Implement std::swap in terms of BitVector swap. </div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00591">BitVector.h:591</a></div></div>
<div class="ttc" id="namespacellvm_html_afb9c37d2aea316c81a0b2b63c6b480e7"><div class="ttname"><a href="namespacellvm.html#afb9c37d2aea316c81a0b2b63c6b480e7">llvm::df_begin</a></div><div class="ttdeci">df_iterator&lt; T &gt; df_begin(const T &amp;G)</div><div class="ttdef"><b>Definition:</b> <a href="DepthFirstIterator_8h_source.html#l00201">DepthFirstIterator.h:201</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html_a150b33ecedbc8c7803c2db8040fbe3f8"><div class="ttname"><a href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">llvm::CallInst::getArgOperand</a></div><div class="ttdeci">Value * getArgOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01245">Instructions.h:1245</a></div></div>
<div class="ttc" id="GlobalVariable_8h_html"><div class="ttname"><a href="GlobalVariable_8h.html">GlobalVariable.h</a></div></div>
<div class="ttc" id="classllvm_1_1BumpPtrAllocator_html_a77df739db3a1603903dfa595e214a84b"><div class="ttname"><a href="classllvm_1_1BumpPtrAllocator.html#a77df739db3a1603903dfa595e214a84b">llvm::BumpPtrAllocator::Allocate</a></div><div class="ttdeci">void * Allocate(size_t Size, size_t Alignment)</div><div class="ttdef"><b>Definition:</b> <a href="Allocator_8cpp_source.html#l00095">Allocator.cpp:95</a></div></div>
<div class="ttc" id="CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2README_8txt_source.html#l00036">CodeGen/README.txt:36</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html_a1500a3fe55cf38153aa1e0fbe7284e05"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html#a1500a3fe55cf38153aa1e0fbe7284e05">llvm::GlobalVariable::isConstant</a></div><div class="ttdeci">bool isConstant() const </div><div class="ttdef"><b>Definition:</b> <a href="GlobalVariable_8h_source.html#l00155">GlobalVariable.h:155</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a6e328feb83afa5cf1c966d6704e43fc1"><div class="ttname"><a href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">llvm::Type::isIntegerTy</a></div><div class="ttdeci">bool isIntegerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00196">Type.h:196</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a957e195a6793721ddc164589934b8f89"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a957e195a6793721ddc164589934b8f89">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::size</a></div><div class="ttdeci">unsigned size() const</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00070">DenseMap.h:70</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a5ef55181ae0bb0f5c561b9a29087b1e5"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a5ef55181ae0bb0f5c561b9a29087b1e5">llvm::BasicBlock::getSinglePredecessor</a></div><div class="ttdeci">BasicBlock * getSinglePredecessor()</div><div class="ttdoc">Return this block if it has a single predecessor block. Otherwise return a null pointer. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00183">BasicBlock.cpp:183</a></div></div>
<div class="ttc" id="PatternMatch_8h_html"><div class="ttname"><a href="PatternMatch_8h.html">PatternMatch.h</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a432d7e955f44b118b4261eae03d7a8af"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a432d7e955f44b118b4261eae03d7a8af">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00053">DenseMap.h:53</a></div></div>
<div class="ttc" id="namespacellvm_html_af80edfc5e42059e045aa7bf7fe42bee3"><div class="ttname"><a href="namespacellvm.html#af80edfc5e42059e045aa7bf7fe42bee3">llvm::hash_combine_range</a></div><div class="ttdeci">hash_code hash_combine_range(InputIteratorT first, InputIteratorT last)</div><div class="ttdoc">Compute a hash_code for a sequence of values. </div><div class="ttdef"><b>Definition:</b> <a href="Hashing_8h_source.html#l00487">Hashing.h:487</a></div></div>
<div class="ttc" id="classllvm_1_1ExtractValueInst_html_ab6aac2fda018dd26fa4cb43b8b15846f"><div class="ttname"><a href="classllvm_1_1ExtractValueInst.html#ab6aac2fda018dd26fa4cb43b8b15846f">llvm::ExtractValueInst::idx_end</a></div><div class="ttdeci">idx_iterator idx_end() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01788">Instructions.h:1788</a></div></div>
<div class="ttc" id="classllvm_1_1hash__code_html"><div class="ttname"><a href="classllvm_1_1hash__code.html">llvm::hash_code</a></div><div class="ttdoc">An opaque object representing a hash code. </div><div class="ttdef"><b>Definition:</b> <a href="Hashing_8h_source.html#l00079">Hashing.h:79</a></div></div>
<div class="ttc" id="namespacellvm_html_a2658c0d02aefac95af1af537f4180cb2"><div class="ttname"><a href="namespacellvm.html#a2658c0d02aefac95af1af537f4180cb2">llvm::isMallocLikeFn</a></div><div class="ttdeci">bool isMallocLikeFn(const Value *V, const TargetLibraryInfo *TLI, bool LookThroughBitCast=false)</div><div class="ttdoc">Tests if a value is a call or invoke to a library function that allocates uninitialized memory (such ...</div><div class="ttdef"><b>Definition:</b> <a href="MemoryBuiltins_8cpp_source.html#l00167">MemoryBuiltins.cpp:167</a></div></div>
<div class="ttc" id="ConstantFolding_8h_html"><div class="ttname"><a href="ConstantFolding_8h.html">ConstantFolding.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_a684cfe02c582e8d75cd6d457e63e6c25"><div class="ttname"><a href="namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">llvm::APIntOps::And</a></div><div class="ttdeci">APInt And(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise AND function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01840">APInt.h:1840</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_aed87738661d539150b3fc4bb46e36aa3"><div class="ttname"><a href="classllvm_1_1Type.html#aed87738661d539150b3fc4bb46e36aa3">llvm::Type::isStructTy</a></div><div class="ttdeci">bool isStructTy() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00212">Type.h:212</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a8a045d250952c0867382a9840ee18fdf"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">llvm::SmallVectorTemplateCommon&lt; T &gt;::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00112">SmallVector.h:112</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a413abcab8dbc3900fc2fde96a5d8fca6"><div class="ttname"><a href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">llvm::Value::use_begin</a></div><div class="ttdeci">use_iterator use_begin()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00150">Value.h:150</a></div></div>
<div class="ttc" id="classllvm_1_1MemTransferInst_html_a1d23e59237a8e4a61f4af0deb7320104"><div class="ttname"><a href="classllvm_1_1MemTransferInst.html#a1d23e59237a8e4a61f4af0deb7320104">llvm::MemTransferInst::getSource</a></div><div class="ttdeci">Value * getSource() const </div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00222">IntrinsicInst.h:222</a></div></div>
<div class="ttc" id="AliasAnalysis_8h_html"><div class="ttname"><a href="AliasAnalysis_8h.html">AliasAnalysis.h</a></div></div>
<div class="ttc" id="GVN_8cpp_html_ab1faa49b43014e07caaf2bf2d3db07e4"><div class="ttname"><a href="GVN_8cpp.html#ab1faa49b43014e07caaf2bf2d3db07e4">isLifetimeStart</a></div><div class="ttdeci">static bool isLifetimeStart(const Instruction *Inst)</div><div class="ttdef"><b>Definition:</b> <a href="GVN_8cpp_source.html#l01364">GVN.cpp:1364</a></div></div>
<div class="ttc" id="X86InstrInfo_8cpp_html_a772a541f137327db635e21a1c8a2b7cd"><div class="ttname"><a href="X86InstrInfo_8cpp.html#a772a541f137327db635e21a1c8a2b7cd">lookup</a></div><div class="ttdeci">static const uint16_t * lookup(unsigned opcode, unsigned domain)</div><div class="ttdef"><b>Definition:</b> <a href="X86InstrInfo_8cpp_source.html#l05181">X86InstrInfo.cpp:5181</a></div></div>
<div class="ttc" id="classllvm_1_1MemTransferInst_html"><div class="ttname"><a href="classllvm_1_1MemTransferInst.html">llvm::MemTransferInst</a></div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00213">IntrinsicInst.h:213</a></div></div>
<div class="ttc" id="Transforms_2Scalar_8h_html"><div class="ttname"><a href="Transforms_2Scalar_8h.html">Scalar.h</a></div></div>
<div class="ttc" id="Analysis_2CFG_8h_html"><div class="ttname"><a href="Analysis_2CFG_8h.html">CFG.h</a></div></div>
<div class="ttc" id="classllvm_1_1MemDepResult_html_a8452eb6508c00e2b6d56926bebc79f57"><div class="ttname"><a href="classllvm_1_1MemDepResult.html#a8452eb6508c00e2b6d56926bebc79f57">llvm::MemDepResult::getInst</a></div><div class="ttdeci">Instruction * getInst() const </div><div class="ttdef"><b>Definition:</b> <a href="MemoryDependenceAnalysis_8h_source.html#l00158">MemoryDependenceAnalysis.h:158</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a84309bb8c34c8bc5694ec5d48dd8668f"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a84309bb8c34c8bc5694ec5d48dd8668f">llvm::BranchInst::getCondition</a></div><div class="ttdeci">Value * getCondition() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02394">Instructions.h:2394</a></div></div>
<div class="ttc" id="classllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l01149">CommandLine.h:1149</a></div></div>
<div class="ttc" id="classPredicate_html"><div class="ttname"><a href="classPredicate.html">Predicate</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a95107a51be6c979110631a4c9145d6e0"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a95107a51be6c979110631a4c9145d6e0">llvm::Intrinsic::umul_with_overflow</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02446">Intrinsics.h:2446</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_ad1168fc42bcba1b71217a4969483671a"><div class="ttname"><a href="classllvm_1_1LoadInst.html#ad1168fc42bcba1b71217a4969483671a">llvm::LoadInst::getAlignment</a></div><div class="ttdeci">unsigned getAlignment() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00181">Instructions.h:181</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86II_html_a97dc14052814702ba0e2b14fb14dd02da2c6497f6ed5314c6fcd9ab88c9528543"><div class="ttname"><a href="namespacellvm_1_1X86II.html#a97dc14052814702ba0e2b14fb14dd02da2c6497f6ed5314c6fcd9ab88c9528543">llvm::X86II::DE</a></div><div class="ttdef"><b>Definition:</b> <a href="X86BaseInfo_8h_source.html#l00332">X86BaseInfo.h:332</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="regcomp_8c_html_a0240ac851181b84ac374872dc5434ee4"><div class="ttname"><a href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div><div class="ttdeci">#define N</div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a5cb76a65b6524dba1493dd2b9dc3abbe"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">TerminatorInst * getTerminator()</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00120">BasicBlock.cpp:120</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a3075a9eef753018bed561df31f38dc23"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a3075a9eef753018bed561df31f38dc23">llvm::BasicBlock::isLandingPad</a></div><div class="ttdeci">bool isLandingPad() const </div><div class="ttdoc">Return true if this basic block is a landing pad. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00360">BasicBlock.cpp:360</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a085b82f074c28030fb8e194377ed2d0c"><div class="ttname"><a href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">llvm::Value::hasOneUse</a></div><div class="ttdeci">bool hasOneUse() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00161">Value.h:161</a></div></div>
<div class="ttc" id="MemoryBuiltins_8h_html"><div class="ttname"><a href="MemoryBuiltins_8h.html">MemoryBuiltins.h</a></div></div>
<div class="ttc" id="BasicBlockUtils_8h_html"><div class="ttname"><a href="BasicBlockUtils_8h.html">BasicBlockUtils.h</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a8eafa71cf399da8f21b2af5549f3f9e7"><div class="ttname"><a href="classllvm_1_1Type.html#a8eafa71cf399da8f21b2af5549f3f9e7">llvm::Type::getScalarType</a></div><div class="ttdeci">const Type * getScalarType() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00051">Type.cpp:51</a></div></div>
<div class="ttc" id="ValueTracking_8h_html"><div class="ttname"><a href="ValueTracking_8h.html">ValueTracking.h</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a5a7cfa245af120b44ac8a86143bb9e57"><div class="ttname"><a href="classllvm_1_1Type.html#a5a7cfa245af120b44ac8a86143bb9e57">llvm::Type::getPrimitiveSizeInBits</a></div><div class="ttdeci">unsigned getPrimitiveSizeInBits() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00117">Type.cpp:117</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a4b979cd93852fd44c48851c94ee00758"><div class="ttname"><a href="classllvm_1_1DataLayout.html#a4b979cd93852fd44c48851c94ee00758">llvm::DataLayout::getTypeStoreSize</a></div><div class="ttdeci">uint64_t getTypeStoreSize(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00311">DataLayout.h:311</a></div></div>
<div class="ttc" id="IRBuilder_8h_html"><div class="ttname"><a href="IRBuilder_8h.html">IRBuilder.h</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">llvm::CmpInst::ICMP_EQ</a></div><div class="ttdoc">equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00672">InstrTypes.h:672</a></div></div>
<div class="ttc" id="LLVMContext_8h_html"><div class="ttname"><a href="LLVMContext_8h.html">LLVMContext.h</a></div></div>
<div class="ttc" id="structllvm_1_1DenseMapInfo_3_01Expression_01_4_html_a049e7715cd0f850919aa3a283975c17d"><div class="ttname"><a href="structllvm_1_1DenseMapInfo_3_01Expression_01_4.html#a049e7715cd0f850919aa3a283975c17d">llvm::DenseMapInfo&lt; Expression &gt;::getTombstoneKey</a></div><div class="ttdeci">static Expression getTombstoneKey()</div><div class="ttdef"><b>Definition:</b> <a href="GVN_8cpp_source.html#l00144">GVN.cpp:144</a></div></div>
<div class="ttc" id="SetVector_8h_html"><div class="ttname"><a href="SetVector_8h.html">SetVector.h</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html"><div class="ttname"><a href="classllvm_1_1SwitchInst.html">llvm::SwitchInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02449">Instructions.h:2449</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ac38c53f76ef532f91f1666c8a87370e9"><div class="ttname"><a href="classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">llvm::Value::use_empty</a></div><div class="ttdeci">bool use_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00149">Value.h:149</a></div></div>
<div class="ttc" id="classllvm_1_1ReversePostOrderTraversal_html_ae945899e1218a9240c3fed1e5789cbba"><div class="ttname"><a href="classllvm_1_1ReversePostOrderTraversal.html#ae945899e1218a9240c3fed1e5789cbba">llvm::ReversePostOrderTraversal::end</a></div><div class="ttdeci">rpo_iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="PostOrderIterator_8h_source.html#l00274">PostOrderIterator.h:274</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapIterator_html"><div class="ttname"><a href="classllvm_1_1DenseMapIterator.html">llvm::DenseMapIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00037">DenseMap.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_ad652423d9d91271ba153eb86482b2f55"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ad652423d9d91271ba153eb86482b2f55">llvm::BasicBlock::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">Get the context in which this basic block lives. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00033">BasicBlock.cpp:33</a></div></div>
<div class="ttc" id="GVN_8cpp_html_a0f8c728bc2ed20849bdc6b61d85f4bb2"><div class="ttname"><a href="GVN_8cpp.html#a0f8c728bc2ed20849bdc6b61d85f4bb2">IsValueFullyAvailableInBlock</a></div><div class="ttdeci">static bool IsValueFullyAvailableInBlock(BasicBlock *BB, DenseMap&lt; BasicBlock *, char &gt; &amp;FullyAvailableBlocks, uint32_t RecurseDepth)</div><div class="ttdef"><b>Definition:</b> <a href="GVN_8cpp_source.html#l00757">GVN.cpp:757</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00066">Value.h:66</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html_a5b6cd6c043f54b40899aff62e6e40488"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a5b6cd6c043f54b40899aff62e6e40488">llvm::BinaryOperator::hasNoUnsignedWrap</a></div><div class="ttdeci">bool hasNoUnsignedWrap() const </div><div class="ttdoc">hasNoUnsignedWrap - Determine whether the no unsigned wrap flag is set. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l02009">Instructions.cpp:2009</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_acfd7cc74125222a81c02b4097ed5166c"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#acfd7cc74125222a81c02b4097ed5166c">llvm::DenseMapBase&lt; SmallDenseMap&lt; KeyT, ValueT, InlineBuckets, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::lookup</a></div><div class="ttdeci">ValueT lookup(const KeyT &amp;Val) const</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00143">DenseMap.h:143</a></div></div>
<div class="ttc" id="classllvm_1_1SetVector_html_a9ceb97666ed8de600fb9520a563ff95d"><div class="ttname"><a href="classllvm_1_1SetVector.html#a9ceb97666ed8de600fb9520a563ff95d">llvm::SetVector::iterator</a></div><div class="ttdeci">vector_type::const_iterator iterator</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00045">SetVector.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a021bb7c9aad6003fe8089f6327356c6c"><div class="ttname"><a href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">llvm::Instruction::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const </div><div class="ttdoc">getOpcode() returns a member of one of the enums like Instruction::Add. </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00083">Instruction.h:83</a></div></div>
<div class="ttc" id="Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="Target_2X86_2README_8txt_source.html#l00297">Target/X86/README.txt:297</a></div></div>
<div class="ttc" id="classllvm_1_1SetVector_html"><div class="ttname"><a href="classllvm_1_1SetVector.html">llvm::SetVector</a></div><div class="ttdoc">A vector that has set insertion semantics. </div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00037">SetVector.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1LLVMContext_html_a0869c4dfee48696ce863fcd367eba52da75f0c503935327915cc9325b04f23de4"><div class="ttname"><a href="classllvm_1_1LLVMContext.html#a0869c4dfee48696ce863fcd367eba52da75f0c503935327915cc9325b04f23de4">llvm::LLVMContext::MD_range</a></div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00050">LLVMContext.h:50</a></div></div>
<div class="ttc" id="namespacellvm_1_1A64CC_html_af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442"><div class="ttname"><a href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">llvm::A64CC::MI</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00035">AArch64BaseInfo.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_add914112e0b2935dda06ad5dfd3a31db"><div class="ttname"><a href="classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">llvm::DataLayout::getTypeSizeInBits</a></div><div class="ttdeci">uint64_t getTypeSizeInBits(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00459">DataLayout.h:459</a></div></div>
<div class="ttc" id="Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00097">Debug.h:97</a></div></div>
<div class="ttc" id="GVN_8cpp_html_a403222386aafded02ab0f7903ada29b9"><div class="ttname"><a href="GVN_8cpp.html#a403222386aafded02ab0f7903ada29b9">AnalyzeLoadFromClobberingMemInst</a></div><div class="ttdeci">static int AnalyzeLoadFromClobberingMemInst(Type *LoadTy, Value *LoadPtr, MemIntrinsic *MI, const DataLayout &amp;TD)</div><div class="ttdef"><b>Definition:</b> <a href="GVN_8cpp_source.html#l01060">GVN.cpp:1060</a></div></div>
<div class="ttc" id="namespacellvm_html_af4d1a918800291e75b01ce1447be0e83"><div class="ttname"><a href="namespacellvm.html#af4d1a918800291e75b01ce1447be0e83">llvm::isPowerOf2_32</a></div><div class="ttdeci">bool isPowerOf2_32(uint32_t Value)</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00354">MathExtras.h:354</a></div></div>
<div class="ttc" id="classllvm_1_1NonLocalDepEntry_html"><div class="ttname"><a href="classllvm_1_1NonLocalDepEntry.html">llvm::NonLocalDepEntry</a></div><div class="ttdef"><b>Definition:</b> <a href="MemoryDependenceAnalysis_8h_source.html#l00190">MemoryDependenceAnalysis.h:190</a></div></div>
<div class="ttc" id="GVN_8cpp_html_ab85468c2bfc360b5d4bc512d241d1440"><div class="ttname"><a href="GVN_8cpp.html#ab85468c2bfc360b5d4bc512d241d1440">patchAndReplaceAllUsesWith</a></div><div class="ttdeci">static void patchAndReplaceAllUsesWith(Instruction *I, Value *Repl)</div><div class="ttdef"><b>Definition:</b> <a href="GVN_8cpp_source.html#l01802">GVN.cpp:1802</a></div></div>
<div class="ttc" id="classllvm_1_1ExtractValueInst_html_a7f9b7f9abcc0d7c98df4c00dc2ae6e7e"><div class="ttname"><a href="classllvm_1_1ExtractValueInst.html#a7f9b7f9abcc0d7c98df4c00dc2ae6e7e">llvm::ExtractValueInst::idx_begin</a></div><div class="ttdeci">idx_iterator idx_begin() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01787">Instructions.h:1787</a></div></div>
<div class="ttc" id="namespacellvm_html_a162c90bc179a6359438d060722bee35f"><div class="ttname"><a href="namespacellvm.html#a162c90bc179a6359438d060722bee35f">llvm::operator==</a></div><div class="ttdeci">bool operator==(uint64_t V1, const APInt &amp;V2)</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01684">APInt.h:1684</a></div></div>
<div class="ttc" id="classllvm_1_1CallSite_html"><div class="ttname"><a href="classllvm_1_1CallSite.html">llvm::CallSite</a></div><div class="ttdef"><b>Definition:</b> <a href="CallSite_8h_source.html#l00295">CallSite.h:295</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a88cdefb709309eddc6e5daca0be6a7b4"><div class="ttname"><a href="classllvm_1_1PHINode.html#a88cdefb709309eddc6e5daca0be6a7b4">llvm::PHINode::setIncomingValue</a></div><div class="ttdeci">void setIncomingValue(unsigned i, Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02062">Instructions.h:2062</a></div></div>
<div class="ttc" id="classllvm_1_1MDNode_html_a9d9f2d817781a31c771406d1f0acc9fb"><div class="ttname"><a href="classllvm_1_1MDNode.html#a9d9f2d817781a31c771406d1f0acc9fb">llvm::MDNode::getMostGenericFPMath</a></div><div class="ttdeci">static MDNode * getMostGenericFPMath(MDNode *A, MDNode *B)</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l00408">Metadata.cpp:408</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a9b876cc57d1884621f481b26b0892633"><div class="ttname"><a href="classllvm_1_1DataLayout.html#a9b876cc57d1884621f481b26b0892633">llvm::DataLayout::isBigEndian</a></div><div class="ttdeci">bool isBigEndian() const </div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00196">DataLayout.h:196</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a90cca76dd78688687e0d697679dbc799"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional ldr LCPI1_0 ldr ldr tst movne lsr ldr LCPI1_1 and r0 bx lr it saves an instruction and a register It might be profitable to cse MOVi16 if there are lots of bit immediates with the same bottom half Robert Muth started working on an alternate jump table implementation that does not put the tables in line in the text This is more like the llvm default jump table implementation This might be useful sometime Several revisions of patches are on the mailing beginning while CMP sets them like a subtract Therefore to be able to use CMN for comparisons other than the Z we ll need additional logic to reverse the conditionals associated with the comparison Perhaps a pseudo instruction for the with a post codegen pass to clean up and handle the condition codes See PR5694 for testcase Given the following on int B</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00592">Target/ARM/README.txt:592</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html_ac03c1c093059ea000216af8dd6f2dbf4"><div class="ttname"><a href="classllvm_1_1StoreInst.html#ac03c1c093059ea000216af8dd6f2dbf4">llvm::StoreInst::getPointerOperand</a></div><div class="ttdeci">Value * getPointerOperand()</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00346">Instructions.h:346</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a5c2b7d7f19aac93b27b845858a7eb73e"><div class="ttname"><a href="classllvm_1_1PHINode.html#a5c2b7d7f19aac93b27b845858a7eb73e">llvm::PHINode::getBasicBlockIndex</a></div><div class="ttdeci">int getBasicBlockIndex(const BasicBlock *BB) const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02132">Instructions.h:2132</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00052">Instruction.h:52</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a1445356b70fbb95acc5e0d3d2ac9101c"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a1445356b70fbb95acc5e0d3d2ac9101c">llvm::BasicBlock::iterator</a></div><div class="ttdeci">InstListType::iterator iterator</div><div class="ttdoc">Instruction iterators... </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00099">BasicBlock.h:99</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90ae365354e47542c51f9bd46e329e3323e"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ae365354e47542c51f9bd46e329e3323e">llvm::Intrinsic::lifetime_start</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l01255">Intrinsics.h:1255</a></div></div>
<div class="ttc" id="GVN_8cpp_html_a4fcd9c82bc8bdb252603674dd9a7ad1a"><div class="ttname"><a href="GVN_8cpp.html#a4fcd9c82bc8bdb252603674dd9a7ad1a">AnalyzeLoadFromClobberingWrite</a></div><div class="ttdeci">static int AnalyzeLoadFromClobberingWrite(Type *LoadTy, Value *LoadPtr, Value *WritePtr, uint64_t WriteSizeInBits, const DataLayout &amp;TD)</div><div class="ttdef"><b>Definition:</b> <a href="GVN_8cpp_source.html#l00942">GVN.cpp:942</a></div></div>
<div class="ttc" id="GVN_8cpp_html_a7ecb019c18583eca74daad14ff133d54"><div class="ttname"><a href="GVN_8cpp.html#a7ecb019c18583eca74daad14ff133d54">isOnlyReachableViaThisEdge</a></div><div class="ttdeci">static bool isOnlyReachableViaThisEdge(const BasicBlockEdge &amp;E, DominatorTree *DT)</div><div class="ttdef"><b>Definition:</b> <a href="GVN_8cpp_source.html#l02046">GVN.cpp:2046</a></div></div>
<div class="ttc" id="classllvm_1_1IntrinsicInst_html"><div class="ttname"><a href="classllvm_1_1IntrinsicInst.html">llvm::IntrinsicInst</a></div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00036">IntrinsicInst.h:36</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_af5c7041df3ad5edffe5da17b5264c1fc"><div class="ttname"><a href="classllvm_1_1Type.html#af5c7041df3ad5edffe5da17b5264c1fc">llvm::Type::isVoidTy</a></div><div class="ttdeci">bool isVoidTy() const </div><div class="ttdoc">isVoidTy - Return true if this is &amp;#39;void&amp;#39;. </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00140">Type.h:140</a></div></div>
<div class="ttc" id="classllvm_1_1InsertValueInst_html"><div class="ttname"><a href="classllvm_1_1InsertValueInst.html">llvm::InsertValueInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01846">Instructions.h:1846</a></div></div>
<div class="ttc" id="namespacellvm_html_add821dcb197999d4b14c33ee49e74b51"><div class="ttname"><a href="namespacellvm.html#add821dcb197999d4b14c33ee49e74b51">llvm::isCriticalEdge</a></div><div class="ttdeci">bool isCriticalEdge(const TerminatorInst *TI, unsigned SuccNum, bool AllowIdenticalEdges=false)</div><div class="ttdef"><b>Definition:</b> <a href="CFG_8cpp_source.html#l00088">CFG.cpp:88</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_1_1CaseIt_html"><div class="ttname"><a href="classllvm_1_1SwitchInst_1_1CaseIt.html">llvm::SwitchInst::CaseIt</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02574">Instructions.h:2574</a></div></div>
<div class="ttc" id="namespacellvm_html_a5805d700b433574a9fe43c9837f7e84d"><div class="ttname"><a href="namespacellvm.html#a5805d700b433574a9fe43c9837f7e84d">llvm::initializeGVNPass</a></div><div class="ttdeci">void initializeGVNPass(PassRegistry &amp;)</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 22:58:46 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
