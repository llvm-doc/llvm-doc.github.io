<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: DeadStoreElimination.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('DeadStoreElimination_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">DeadStoreElimination.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="DeadStoreElimination_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- DeadStoreElimination.cpp - Fast Dead Store Elimination -------------===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// This file implements a trivial dead store elimination that only considers</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// basic-block local redundant stores.</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// FIXME: This should eventually be extended to be a post-dominator tree</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// traversal.  Doing so would be pretty trivial.</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div><div class="line"><a name="l00018"></a><span class="lineno"><a class="line" href="DeadStoreElimination_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   18</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;dse&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Transforms_2Scalar_8h.html">llvm/Transforms/Scalar.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="STLExtras_8h.html">llvm/ADT/STLExtras.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SetVector_8h.html">llvm/ADT/SetVector.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AliasAnalysis_8h.html">llvm/Analysis/AliasAnalysis.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CaptureTracking_8h.html">llvm/Analysis/CaptureTracking.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Dominators_8h.html">llvm/Analysis/Dominators.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MemoryBuiltins_8h.html">llvm/Analysis/MemoryBuiltins.h</a>&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MemoryDependenceAnalysis_8h.html">llvm/Analysis/MemoryDependenceAnalysis.h</a>&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueTracking_8h.html">llvm/Analysis/ValueTracking.h</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constants_8h.html">llvm/IR/Constants.h</a>&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DataLayout_8h.html">llvm/IR/DataLayout.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Function_8h.html">llvm/IR/Function.h</a>&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="GlobalVariable_8h.html">llvm/IR/GlobalVariable.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instructions_8h.html">llvm/IR/Instructions.h</a>&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IntrinsicInst_8h.html">llvm/IR/IntrinsicInst.h</a>&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Pass_8h.html">llvm/Pass.h</a>&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetLibraryInfo_8h.html">llvm/Target/TargetLibraryInfo.h</a>&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Local_8h.html">llvm/Transforms/Utils/Local.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<a class="code" href="DeadStoreElimination_8cpp.html#a1a8ebbdcf6eabe21a1834f849064d37d">STATISTIC</a>(NumFastStores, <span class="stringliteral">&quot;Number of stores deleted&quot;</span>);</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<a class="code" href="DeadStoreElimination_8cpp.html#a1a8ebbdcf6eabe21a1834f849064d37d">STATISTIC</a>(NumFastOther , <span class="stringliteral">&quot;Number of other instrs removed&quot;</span>);</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <span class="keyword">struct </span>DSE : <span class="keyword">public</span> <a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a> {</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a> *AA;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <a class="code" href="classllvm_1_1MemoryDependenceAnalysis.html">MemoryDependenceAnalysis</a> *MD;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>; <span class="comment">// Pass identification, replacement for typeid</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    DSE() : <a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a>(ID), AA(0), MD(0), DT(0) {</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;      <a class="code" href="namespacellvm.html#ad4a3ccd487a8e2d252a1b779ff88159b">initializeDSEPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    }</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> runOnFunction(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>) {</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;      AA = &amp;getAnalysis&lt;AliasAnalysis&gt;();</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;      MD = &amp;getAnalysis&lt;MemoryDependenceAnalysis&gt;();</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;      DT = &amp;getAnalysis&lt;DominatorTree&gt;();</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;      TLI = AA-&gt;<a class="code" href="classllvm_1_1AliasAnalysis.html#a2f0a6f0f6e25c24ba9b434ba5b5a9906">getTargetLibraryInfo</a>();</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;      <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">Function::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = F.<a class="code" href="classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">begin</a>(), E = F.<a class="code" href="classllvm_1_1Function.html#ae4ca2261b8b901e415fda7feac5051ea">end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        <span class="comment">// Only check non-dead blocks.  Dead blocks may have strange pointer</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        <span class="comment">// cycles that will confuse alias analysis.</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <span class="keywordflow">if</span> (DT-&gt;isReachableFromEntry(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;          Changed |= runOnBasicBlock(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;      AA = 0; MD = 0; DT = 0;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;      <span class="keywordflow">return</span> Changed;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    }</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keywordtype">bool</span> runOnBasicBlock(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordtype">bool</span> HandleFree(<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *F);</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keywordtype">bool</span> handleEndBlock(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="keywordtype">void</span> RemoveAccessedObjects(<span class="keyword">const</span> <a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html">AliasAnalysis::Location</a> &amp;LoadedLoc,</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                               <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;Value*, 16&gt;</a> &amp;DeadStackObjects);</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const </span>{</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#af11a6ebf7ab3c388234cb6d5378439a3">setPreservesCFG</a>();</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a>&gt;();</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a>&gt;();</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1MemoryDependenceAnalysis.html">MemoryDependenceAnalysis</a>&gt;();</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a>&gt;();</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a>&gt;();</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1MemoryDependenceAnalysis.html">MemoryDependenceAnalysis</a>&gt;();</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    }</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  };</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;}</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">DSE::ID</a> = 0;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<a class="code" href="PassSupport_8h.html#aaa970fc931c1c63037a8182e028d04b1">INITIALIZE_PASS_BEGIN</a>(DSE, <span class="stringliteral">&quot;dse&quot;</span>, <span class="stringliteral">&quot;Dead Store Elimination&quot;</span>, <span class="keyword">false</span>, <span class="keyword">false</span>)</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a>)</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1MemoryDependenceAnalysis.html">MemoryDependenceAnalysis</a>)</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<a class="code" href="PassSupport_8h.html#af0564bcdde2dd4400c670ca278c6035f">INITIALIZE_AG_DEPENDENCY</a>(<a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a>)</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<a class="code" href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a>(DSE, &quot;dse&quot;, &quot;<a class="code" href="namespacellvm_1_1RegState.html#a079b254e749130fbe5d740f314ca92daa2fee1a7db4e84247a193a9af1f907013">Dead</a> <a class="code" href="namespacellvm_1_1SPII.html#a11e9b8fca4a074643a6a21f444e51406a36b3dd3b84fde3f8494a9b18af131856">Store</a> <a class="code" href="MachineCSE_8cpp.html#a7978bc3965e51d710dfc641e29d2f8ef">Elimination</a>&quot;, <a class="code" href="namespacefalse.html">false</a>, false)</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="namespacellvm.html#a157f9c76f79fd232243993c2a4afedc6">   98</a></span>&#160;<a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a> *<a class="code" href="namespacellvm.html">llvm</a>::<a class="code" href="namespacellvm.html#a157f9c76f79fd232243993c2a4afedc6">createDeadStoreEliminationPass</a>() { <span class="keywordflow">return</span> <span class="keyword">new</span> DSE(); }</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">// Helper functions</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">/// DeleteDeadInstruction - Delete this instruction.  Before we do, go through</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">/// and zero out all the operands of this instruction.  If any of them become</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">/// dead, delete them and the computation tree that feeds them.</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">/// If ValueSet is non-null, remove any deleted instructions from it as well.</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="DeadStoreElimination_8cpp.html#a956b8b042e18734565af895157e7a6ce">  110</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="DeadStoreElimination_8cpp.html#a956b8b042e18734565af895157e7a6ce">DeleteDeadInstruction</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                                  <a class="code" href="classllvm_1_1MemoryDependenceAnalysis.html">MemoryDependenceAnalysis</a> &amp;MD,</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                                  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI,</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                                  <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;Value*, 16&gt;</a> *ValueSet = 0) {</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction*, 32&gt;</a> NowDeadInsts;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  NowDeadInsts.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(I);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  --NumFastOther;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="comment">// Before we touch this instruction, remove it from memdep!</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="keywordflow">do</span> {</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *DeadInst = NowDeadInsts.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">pop_back_val</a>();</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    ++NumFastOther;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="comment">// This instruction is dead, zap it, in stages.  Start by removing it from</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="comment">// MemDep, which needs to know the operands and needs it to be in the</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="comment">// function.</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    MD.<a class="code" href="classllvm_1_1MemoryDependenceAnalysis.html#ad400b0aba217fdd5a826f50204b5d7c0">removeInstruction</a>(DeadInst);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> op = 0, e = DeadInst-&gt;<a class="code" href="classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>(); op != e; ++op) {</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Op = DeadInst-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(op);</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      DeadInst-&gt;<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(op, 0);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      <span class="comment">// If this operand just became dead, add it to the NowDeadInsts list.</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      <span class="keywordflow">if</span> (!Op-&gt;<a class="code" href="classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">use_empty</a>()) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *OpI = dyn_cast&lt;Instruction&gt;(Op))</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#abe283966f269761ee387642061c4451e">isInstructionTriviallyDead</a>(OpI, TLI))</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;          NowDeadInsts.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(OpI);</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    }</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    DeadInst-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">if</span> (ValueSet) ValueSet-&gt;remove(DeadInst);</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  } <span class="keywordflow">while</span> (!NowDeadInsts.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>());</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;}</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">/// hasMemoryWrite - Does this instruction write some memory?  This only returns</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">/// true for things that we can analyze with other helpers below.</span></div><div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="DeadStoreElimination_8cpp.html#aaeef0320df7c6a19fa885a77d1d18c27">  150</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="DeadStoreElimination_8cpp.html#aaeef0320df7c6a19fa885a77d1d18c27">hasMemoryWrite</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI) {</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="keywordflow">if</span> (isa&lt;StoreInst&gt;(I))</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *II = dyn_cast&lt;IntrinsicInst&gt;(I)) {</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordflow">switch</span> (II-&gt;getIntrinsicID()) {</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ae857cbc5cf8c5a980f0bd245ad5ec61a">Intrinsic::memset</a>:</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a59ba1d701385742520aa8a3478099fb7">Intrinsic::memmove</a>:</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ab20709bfc1ed1765cd3b43f69bf11edc">Intrinsic::memcpy</a>:</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a01db82ed39d59c36bdb4687fe724a739">Intrinsic::init_trampoline</a>:</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aa332b90dd5e4ebf4bbbcc0964220d373">Intrinsic::lifetime_end</a>:</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    }</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  }</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CallSite.html">CallSite</a> CS = I) {</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> *F = CS.getCalledFunction()) {</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      <span class="keywordflow">if</span> (TLI &amp;&amp; TLI-&gt;<a class="code" href="classllvm_1_1TargetLibraryInfo.html#a986085d3cd43522192d93e84bc660978">has</a>(<a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa9359403a52c2d2696ad24d7c0045ee81">LibFunc::strcpy</a>) &amp;&amp;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;          F-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() == TLI-&gt;<a class="code" href="classllvm_1_1TargetLibraryInfo.html#a0fe1c6579053c75b2089f8c2e60c65e0">getName</a>(<a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa9359403a52c2d2696ad24d7c0045ee81">LibFunc::strcpy</a>)) {</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      }</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      <span class="keywordflow">if</span> (TLI &amp;&amp; TLI-&gt;<a class="code" href="classllvm_1_1TargetLibraryInfo.html#a986085d3cd43522192d93e84bc660978">has</a>(<a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa3880572b66ab5faef56c79335acdcc0e">LibFunc::strncpy</a>) &amp;&amp;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;          F-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() == TLI-&gt;<a class="code" href="classllvm_1_1TargetLibraryInfo.html#a0fe1c6579053c75b2089f8c2e60c65e0">getName</a>(<a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa3880572b66ab5faef56c79335acdcc0e">LibFunc::strncpy</a>)) {</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      }</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      <span class="keywordflow">if</span> (TLI &amp;&amp; TLI-&gt;<a class="code" href="classllvm_1_1TargetLibraryInfo.html#a986085d3cd43522192d93e84bc660978">has</a>(<a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6faf46a9a65ff8ff48a87f575fe056fcec1">LibFunc::strcat</a>) &amp;&amp;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;          F-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() == TLI-&gt;<a class="code" href="classllvm_1_1TargetLibraryInfo.html#a0fe1c6579053c75b2089f8c2e60c65e0">getName</a>(<a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6faf46a9a65ff8ff48a87f575fe056fcec1">LibFunc::strcat</a>)) {</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      }</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      <span class="keywordflow">if</span> (TLI &amp;&amp; TLI-&gt;<a class="code" href="classllvm_1_1TargetLibraryInfo.html#a986085d3cd43522192d93e84bc660978">has</a>(<a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6faaf7f323cc371044c729cb295eaea743b">LibFunc::strncat</a>) &amp;&amp;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;          F-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() == TLI-&gt;<a class="code" href="classllvm_1_1TargetLibraryInfo.html#a0fe1c6579053c75b2089f8c2e60c65e0">getName</a>(<a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6faaf7f323cc371044c729cb295eaea743b">LibFunc::strncat</a>)) {</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;      }</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    }</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  }</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;}</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">/// getLocForWrite - Return a Location stored to by the specified instruction.</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">/// If isRemovable returns true, this function and getLocForRead completely</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">/// describe the memory operations for this instruction.</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html">AliasAnalysis::Location</a></div><div class="line"><a name="l00192"></a><span class="lineno"><a class="line" href="DeadStoreElimination_8cpp.html#a06efb1a4f95406645eb811d1fe240812">  192</a></span>&#160;<a class="code" href="DeadStoreElimination_8cpp.html#a06efb1a4f95406645eb811d1fe240812">getLocForWrite</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst, <a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a> &amp;AA) {</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *SI = dyn_cast&lt;StoreInst&gt;(Inst))</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordflow">return</span> AA.<a class="code" href="classllvm_1_1AliasAnalysis.html#aec9dbab832cd8052f85cd2a9dbb3816e">getLocation</a>(SI);</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemIntrinsic.html">MemIntrinsic</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a> = dyn_cast&lt;MemIntrinsic&gt;(Inst)) {</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="comment">// memcpy/memmove/memset.</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html">AliasAnalysis::Location</a> Loc = AA.<a class="code" href="classllvm_1_1AliasAnalysis.html#af02eef65834a820ff7a4f05a831d39ea">getLocationForDest</a>(<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>);</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="comment">// If we don&#39;t have target data around, an unknown size in Location means</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="comment">// that we should use the size of the pointee type.  This isn&#39;t valid for</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="comment">// memset/memcpy, which writes more than an i8.</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">if</span> (Loc.<a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html#aba42e84910b42f9684564b8512a30b2e">Size</a> == <a class="code" href="classllvm_1_1AliasAnalysis.html#a8d894818f6befa30ad9bb75085ed0a20">AliasAnalysis::UnknownSize</a> &amp;&amp; AA.<a class="code" href="classllvm_1_1AliasAnalysis.html#a3858309898f2565757da3abdd90be922">getDataLayout</a>() == 0)</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html">AliasAnalysis::Location</a>();</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keywordflow">return</span> Loc;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  }</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *II = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a>&gt;(Inst);</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="keywordflow">if</span> (II == 0) <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html">AliasAnalysis::Location</a>();</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="keywordflow">switch</span> (II-&gt;<a class="code" href="classllvm_1_1IntrinsicInst.html#a6cbb4809b81f3994ee0c79b38556bd66">getIntrinsicID</a>()) {</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <span class="keywordflow">default</span>: <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html">AliasAnalysis::Location</a>(); <span class="comment">// Unhandled intrinsic.</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a01db82ed39d59c36bdb4687fe724a739">Intrinsic::init_trampoline</a>:</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="comment">// If we don&#39;t have target data around, an unknown size in Location means</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="comment">// that we should use the size of the pointee type.  This isn&#39;t valid for</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="comment">// init.trampoline, which writes more than an i8.</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordflow">if</span> (AA.<a class="code" href="classllvm_1_1AliasAnalysis.html#a3858309898f2565757da3abdd90be922">getDataLayout</a>() == 0) <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html">AliasAnalysis::Location</a>();</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="comment">// FIXME: We don&#39;t know the size of the trampoline, so we can&#39;t really</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="comment">// handle it here.</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html">AliasAnalysis::Location</a>(II-&gt;<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(0));</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aa332b90dd5e4ebf4bbbcc0964220d373">Intrinsic::lifetime_end</a>: {</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    uint64_t Len = cast&lt;ConstantInt&gt;(II-&gt;<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(0))-&gt;getZExtValue();</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html">AliasAnalysis::Location</a>(II-&gt;<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(1), Len);</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  }</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  }</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;}</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">/// getLocForRead - Return the location read by the specified &quot;hasMemoryWrite&quot;</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">/// instruction if any.</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html">AliasAnalysis::Location</a></div><div class="line"><a name="l00231"></a><span class="lineno"><a class="line" href="DeadStoreElimination_8cpp.html#a69646f2a946c61a94f94192815365e1a">  231</a></span>&#160;<a class="code" href="DeadStoreElimination_8cpp.html#a69646f2a946c61a94f94192815365e1a">getLocForRead</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst, <a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a> &amp;AA) {</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  assert(<a class="code" href="DeadStoreElimination_8cpp.html#aaeef0320df7c6a19fa885a77d1d18c27">hasMemoryWrite</a>(Inst, AA.<a class="code" href="classllvm_1_1AliasAnalysis.html#a2f0a6f0f6e25c24ba9b434ba5b5a9906">getTargetLibraryInfo</a>()) &amp;&amp;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;         <span class="stringliteral">&quot;Unknown instruction case&quot;</span>);</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="comment">// The only instructions that both read and write are the mem transfer</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <span class="comment">// instructions (memcpy/memmove).</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemTransferInst.html">MemTransferInst</a> *MTI = dyn_cast&lt;MemTransferInst&gt;(Inst))</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">return</span> AA.<a class="code" href="classllvm_1_1AliasAnalysis.html#a7130fcc16699c8bad067d00ccc5a8c95">getLocationForSource</a>(MTI);</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html">AliasAnalysis::Location</a>();</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;}</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">/// isRemovable - If the value of this instruction and the memory it writes to</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">/// is unused, may we delete this instruction?</span></div><div class="line"><a name="l00245"></a><span class="lineno"><a class="line" href="DeadStoreElimination_8cpp.html#a586c20ef578b9c947aaf22cf220f98da">  245</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="DeadStoreElimination_8cpp.html#a586c20ef578b9c947aaf22cf220f98da">isRemovable</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="comment">// Don&#39;t remove volatile/atomic stores.</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *SI = dyn_cast&lt;StoreInst&gt;(I))</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">return</span> SI-&gt;isUnordered();</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *II = dyn_cast&lt;IntrinsicInst&gt;(I)) {</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordflow">switch</span> (II-&gt;getIntrinsicID()) {</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;doesn&#39;t pass &#39;hasMemoryWrite&#39; predicate&quot;</span>);</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aa332b90dd5e4ebf4bbbcc0964220d373">Intrinsic::lifetime_end</a>:</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      <span class="comment">// Never remove dead lifetime_end&#39;s, e.g. because it is followed by a</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      <span class="comment">// free.</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a01db82ed39d59c36bdb4687fe724a739">Intrinsic::init_trampoline</a>:</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      <span class="comment">// Always safe to remove init_trampoline.</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ae857cbc5cf8c5a980f0bd245ad5ec61a">Intrinsic::memset</a>:</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a59ba1d701385742520aa8a3478099fb7">Intrinsic::memmove</a>:</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ab20709bfc1ed1765cd3b43f69bf11edc">Intrinsic::memcpy</a>:</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      <span class="comment">// Don&#39;t remove volatile memory intrinsics.</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      <span class="keywordflow">return</span> !cast&lt;MemIntrinsic&gt;(II)-&gt;isVolatile();</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    }</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  }</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CallSite.html">CallSite</a> CS = I)</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keywordflow">return</span> CS.getInstruction()-&gt;use_empty();</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;}</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">/// isShortenable - Returns true if this instruction can be safely shortened in</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">/// length.</span></div><div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="DeadStoreElimination_8cpp.html#ab61aeec4fccffbbab2b733baaff6fd59">  278</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="DeadStoreElimination_8cpp.html#ab61aeec4fccffbbab2b733baaff6fd59">isShortenable</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="comment">// Don&#39;t shorten stores for now</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="keywordflow">if</span> (isa&lt;StoreInst&gt;(I))</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *II = dyn_cast&lt;IntrinsicInst&gt;(I)) {</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordflow">switch</span> (II-&gt;getIntrinsicID()) {</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      <span class="keywordflow">default</span>: <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ae857cbc5cf8c5a980f0bd245ad5ec61a">Intrinsic::memset</a>:</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ab20709bfc1ed1765cd3b43f69bf11edc">Intrinsic::memcpy</a>:</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <span class="comment">// Do shorten memory intrinsics.</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    }</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  }</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <span class="comment">// Don&#39;t shorten libcalls calls for now.</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;}</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment">/// getStoredPointerOperand - Return the pointer that is being written to.</span></div><div class="line"><a name="l00299"></a><span class="lineno"><a class="line" href="DeadStoreElimination_8cpp.html#af1ce67e46bfa7f3f0e87d52e8552caac">  299</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="DeadStoreElimination_8cpp.html#af1ce67e46bfa7f3f0e87d52e8552caac">getStoredPointerOperand</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *SI = dyn_cast&lt;StoreInst&gt;(I))</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordflow">return</span> SI-&gt;getPointerOperand();</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemIntrinsic.html">MemIntrinsic</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a> = dyn_cast&lt;MemIntrinsic&gt;(I))</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>-&gt;getDest();</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *II = dyn_cast&lt;IntrinsicInst&gt;(I)) {</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">switch</span> (II-&gt;getIntrinsicID()) {</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unexpected intrinsic!&quot;</span>);</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a01db82ed39d59c36bdb4687fe724a739">Intrinsic::init_trampoline</a>:</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      <span class="keywordflow">return</span> II-&gt;getArgOperand(0);</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    }</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  }</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <a class="code" href="classllvm_1_1CallSite.html">CallSite</a> CS = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <span class="comment">// All the supported functions so far happen to have dest as their first</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <span class="comment">// argument.</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="keywordflow">return</span> CS.<a class="code" href="classllvm_1_1CallSiteBase.html#a65a550af73bd99c96abea847916aa4e9">getArgument</a>(0);</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;}</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno"><a class="line" href="DeadStoreElimination_8cpp.html#abd4594e793d14c9f01a1f92d0afb0851">  319</a></span>&#160;<span class="keyword">static</span> uint64_t <a class="code" href="DeadStoreElimination_8cpp.html#abd4594e793d14c9f01a1f92d0afb0851">getPointerSize</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *V, <a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a> &amp;AA) {</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  uint64_t Size;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ade9baf821f59f9a2977a1deaccb18023">getObjectSize</a>(V, Size, AA.<a class="code" href="classllvm_1_1AliasAnalysis.html#a3858309898f2565757da3abdd90be922">getDataLayout</a>(), AA.<a class="code" href="classllvm_1_1AliasAnalysis.html#a2f0a6f0f6e25c24ba9b434ba5b5a9906">getTargetLibraryInfo</a>()))</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keywordflow">return</span> Size;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AliasAnalysis.html#a8d894818f6befa30ad9bb75085ed0a20">AliasAnalysis::UnknownSize</a>;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;}</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00327"></a><span class="lineno"><a class="line" href="DeadStoreElimination_8cpp.html#ae0fd34cbfd6b1219de8ceee42e6dd436">  327</a></span>&#160;  <span class="keyword">enum</span> <a class="code" href="DeadStoreElimination_8cpp.html#ae0fd34cbfd6b1219de8ceee42e6dd436">OverwriteResult</a></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  {</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    OverwriteComplete,</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    OverwriteEnd,</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    OverwriteUnknown</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  };</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;}</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment">/// isOverwrite - Return &#39;OverwriteComplete&#39; if a store to the &#39;Later&#39; location</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment">/// completely overwrites a store to the &#39;Earlier&#39; location.</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment">/// &#39;OverwriteEnd&#39; if the end of the &#39;Earlier&#39; location is completely</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment">/// overwritten by &#39;Later&#39;, or &#39;OverwriteUnknown&#39; if nothing can be determined</span></div><div class="line"><a name="l00339"></a><span class="lineno"><a class="line" href="DeadStoreElimination_8cpp.html#adfe45295c28178d47c9b8ee42df10a20">  339</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="DeadStoreElimination_8cpp.html#ae0fd34cbfd6b1219de8ceee42e6dd436">OverwriteResult</a> <a class="code" href="DeadStoreElimination_8cpp.html#adfe45295c28178d47c9b8ee42df10a20">isOverwrite</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html">AliasAnalysis::Location</a> &amp;Later,</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                                   <span class="keyword">const</span> <a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html">AliasAnalysis::Location</a> &amp;Earlier,</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                                   <a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a> &amp;AA,</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                                   int64_t &amp;EarlierOff,</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                                   int64_t &amp;LaterOff) {</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *P1 = Earlier.<a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html#a24197872686f605dcfd25b6e5d3cc7fa">Ptr</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a38ea12c04523d63adda732b9c5d6da0a">stripPointerCasts</a>();</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README-SSE_8txt.html#ae7fc2fb0e2d536219c1193f1a178e7db">P2</a> = Later.<a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html#a24197872686f605dcfd25b6e5d3cc7fa">Ptr</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a38ea12c04523d63adda732b9c5d6da0a">stripPointerCasts</a>();</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="comment">// If the start pointers are the same, we just have to compare sizes to see if</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <span class="comment">// the later store was larger than the earlier store.</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <span class="keywordflow">if</span> (P1 == P2) {</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="comment">// If we don&#39;t know the sizes of either access, then we can&#39;t do a</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="comment">// comparison.</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordflow">if</span> (Later.<a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html#aba42e84910b42f9684564b8512a30b2e">Size</a> == <a class="code" href="classllvm_1_1AliasAnalysis.html#a8d894818f6befa30ad9bb75085ed0a20">AliasAnalysis::UnknownSize</a> ||</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        Earlier.<a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html#aba42e84910b42f9684564b8512a30b2e">Size</a> == <a class="code" href="classllvm_1_1AliasAnalysis.html#a8d894818f6befa30ad9bb75085ed0a20">AliasAnalysis::UnknownSize</a>) {</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      <span class="comment">// If we have no DataLayout information around, then the size of the store</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      <span class="comment">// is inferrable from the pointee type.  If they are the same type, then</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      <span class="comment">// we know that the store is safe.</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      <span class="keywordflow">if</span> (AA.<a class="code" href="classllvm_1_1AliasAnalysis.html#a3858309898f2565757da3abdd90be922">getDataLayout</a>() == 0 &amp;&amp;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;          Later.<a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html#a24197872686f605dcfd25b6e5d3cc7fa">Ptr</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() == Earlier.<a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html#a24197872686f605dcfd25b6e5d3cc7fa">Ptr</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        <span class="keywordflow">return</span> OverwriteComplete;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;      <span class="keywordflow">return</span> OverwriteUnknown;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    }</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="comment">// Make sure that the Later size is &gt;= the Earlier size.</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keywordflow">if</span> (Later.<a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html#aba42e84910b42f9684564b8512a30b2e">Size</a> &gt;= Earlier.<a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html#aba42e84910b42f9684564b8512a30b2e">Size</a>)</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      <span class="keywordflow">return</span> OverwriteComplete;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  }</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="comment">// Otherwise, we have to have size information, and the later store has to be</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <span class="comment">// larger than the earlier one.</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="keywordflow">if</span> (Later.<a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html#aba42e84910b42f9684564b8512a30b2e">Size</a> == <a class="code" href="classllvm_1_1AliasAnalysis.html#a8d894818f6befa30ad9bb75085ed0a20">AliasAnalysis::UnknownSize</a> ||</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      Earlier.<a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html#aba42e84910b42f9684564b8512a30b2e">Size</a> == <a class="code" href="classllvm_1_1AliasAnalysis.html#a8d894818f6befa30ad9bb75085ed0a20">AliasAnalysis::UnknownSize</a> ||</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      AA.<a class="code" href="classllvm_1_1AliasAnalysis.html#a3858309898f2565757da3abdd90be922">getDataLayout</a>() == 0)</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keywordflow">return</span> OverwriteUnknown;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <span class="comment">// Check to see if the later store is to the entire object (either a global,</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <span class="comment">// an alloca, or a byval argument).  If so, then it clearly overwrites any</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <span class="comment">// other store to the same object.</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> *TD = AA.<a class="code" href="classllvm_1_1AliasAnalysis.html#a3858309898f2565757da3abdd90be922">getDataLayout</a>();</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *UO1 = <a class="code" href="namespacellvm.html#ace6c957db39858291c6ce01c38e78480">GetUnderlyingObject</a>(P1, TD),</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;              *UO2 = <a class="code" href="namespacellvm.html#ace6c957db39858291c6ce01c38e78480">GetUnderlyingObject</a>(P2, TD);</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <span class="comment">// If we can&#39;t resolve the same pointers to the same object, then we can&#39;t</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <span class="comment">// analyze them at all.</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="keywordflow">if</span> (UO1 != UO2)</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="keywordflow">return</span> OverwriteUnknown;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <span class="comment">// If the &quot;Later&quot; store is to a recognizable object, get its size.</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  uint64_t ObjectSize = <a class="code" href="DeadStoreElimination_8cpp.html#abd4594e793d14c9f01a1f92d0afb0851">getPointerSize</a>(UO2, AA);</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <span class="keywordflow">if</span> (ObjectSize != <a class="code" href="classllvm_1_1AliasAnalysis.html#a8d894818f6befa30ad9bb75085ed0a20">AliasAnalysis::UnknownSize</a>)</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordflow">if</span> (ObjectSize == Later.<a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html#aba42e84910b42f9684564b8512a30b2e">Size</a> &amp;&amp; ObjectSize &gt;= Earlier.<a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html#aba42e84910b42f9684564b8512a30b2e">Size</a>)</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      <span class="keywordflow">return</span> OverwriteComplete;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <span class="comment">// Okay, we have stores to two completely different pointers.  Try to</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="comment">// decompose the pointer into a &quot;base + constant_offset&quot; form.  If the base</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <span class="comment">// pointers are equal, then we can reason about the two stores.</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  EarlierOff = 0;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  LaterOff = 0;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *BP1 = <a class="code" href="namespacellvm.html#a090878b40a781fbfccd4496adb00dd19">GetPointerBaseWithConstantOffset</a>(P1, EarlierOff, TD);</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *BP2 = <a class="code" href="namespacellvm.html#a090878b40a781fbfccd4496adb00dd19">GetPointerBaseWithConstantOffset</a>(P2, LaterOff, TD);</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="comment">// If the base pointers still differ, we have two completely different stores.</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  <span class="keywordflow">if</span> (BP1 != BP2)</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordflow">return</span> OverwriteUnknown;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="comment">// The later store completely overlaps the earlier store if:</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="comment">// 1. Both start at the same offset and the later one&#39;s size is greater than</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <span class="comment">//    or equal to the earlier one&#39;s, or</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="comment">//      |--earlier--|</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <span class="comment">//      |--   later   --|</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="comment">// 2. The earlier store has an offset greater than the later offset, but which</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <span class="comment">//    still lies completely within the later store.</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="comment">//        |--earlier--|</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="comment">//    |-----  later  ------|</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="comment">// We have to be careful here as *Off is signed while *.Size is unsigned.</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <span class="keywordflow">if</span> (EarlierOff &gt;= LaterOff &amp;&amp;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      Later.<a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html#aba42e84910b42f9684564b8512a30b2e">Size</a> &gt;= Earlier.<a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html#aba42e84910b42f9684564b8512a30b2e">Size</a> &amp;&amp;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      uint64_t(EarlierOff - LaterOff) + Earlier.<a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html#aba42e84910b42f9684564b8512a30b2e">Size</a> &lt;= Later.<a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html#aba42e84910b42f9684564b8512a30b2e">Size</a>)</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keywordflow">return</span> OverwriteComplete;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <span class="comment">// The other interesting case is if the later store overwrites the end of</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  <span class="comment">// the earlier store</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="comment">//      |--earlier--|</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="comment">//                |--   later   --|</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <span class="comment">// In this case we may want to trim the size of earlier to avoid generating</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <span class="comment">// writes to addresses which will definitely be overwritten later</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <span class="keywordflow">if</span> (LaterOff &gt; EarlierOff &amp;&amp;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      LaterOff &lt; int64_t(EarlierOff + Earlier.<a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html#aba42e84910b42f9684564b8512a30b2e">Size</a>) &amp;&amp;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;      int64_t(LaterOff + Later.<a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html#aba42e84910b42f9684564b8512a30b2e">Size</a>) &gt;= int64_t(EarlierOff + Earlier.<a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html#aba42e84910b42f9684564b8512a30b2e">Size</a>))</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="keywordflow">return</span> OverwriteEnd;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  <span class="comment">// Otherwise, they don&#39;t completely overlap.</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <span class="keywordflow">return</span> OverwriteUnknown;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;}</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment">/// isPossibleSelfRead - If &#39;Inst&#39; might be a self read (i.e. a noop copy of a</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment">/// memory region into an identical pointer) then it doesn&#39;t actually make its</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment">/// input dead in the traditional sense.  Consider this case:</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment">///   memcpy(A &lt;- B)</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="comment">///   memcpy(A &lt;- A)</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment">/// In this case, the second store to A does not make the first store to A dead.</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment">/// The usual situation isn&#39;t an explicit A&lt;-A store like this (which can be</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="comment">/// trivially removed) but a case where two pointers may alias.</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="comment">/// This function detects when it is unsafe to remove a dependent instruction</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment">/// because the DSE inducing instruction may be a self-read.</span></div><div class="line"><a name="l00457"></a><span class="lineno"><a class="line" href="DeadStoreElimination_8cpp.html#a1d9bae16f4fc2f74d2ee6efe04739ec3">  457</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="DeadStoreElimination_8cpp.html#a1d9bae16f4fc2f74d2ee6efe04739ec3">isPossibleSelfRead</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst,</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                               <span class="keyword">const</span> <a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html">AliasAnalysis::Location</a> &amp;InstStoreLoc,</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                               <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *DepWrite, <a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a> &amp;AA) {</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <span class="comment">// Self reads can only happen for instructions that read memory.  Get the</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <span class="comment">// location read.</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  <a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html">AliasAnalysis::Location</a> InstReadLoc = <a class="code" href="DeadStoreElimination_8cpp.html#a69646f2a946c61a94f94192815365e1a">getLocForRead</a>(Inst, AA);</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="keywordflow">if</span> (InstReadLoc.<a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html#a24197872686f605dcfd25b6e5d3cc7fa">Ptr</a> == 0) <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">// Not a reading instruction.</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <span class="comment">// If the read and written loc obviously don&#39;t alias, it isn&#39;t a read.</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  <span class="keywordflow">if</span> (AA.<a class="code" href="classllvm_1_1AliasAnalysis.html#a18afcc2fefe15651254db4a92c29f5c4">isNoAlias</a>(InstReadLoc, InstStoreLoc)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  <span class="comment">// Okay, &#39;Inst&#39; may copy over itself.  However, we can still remove a the</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  <span class="comment">// DepWrite instruction if we can prove that it reads from the same location</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  <span class="comment">// as Inst.  This handles useful cases like:</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  <span class="comment">//   memcpy(A &lt;- B)</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  <span class="comment">//   memcpy(A &lt;- B)</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  <span class="comment">// Here we don&#39;t know if A/B may alias, but we do know that B/B are must</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <span class="comment">// aliases, so removing the first memcpy is safe (assuming it writes &lt;= #</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <span class="comment">// bytes as the second one.</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html">AliasAnalysis::Location</a> DepReadLoc = <a class="code" href="DeadStoreElimination_8cpp.html#a69646f2a946c61a94f94192815365e1a">getLocForRead</a>(DepWrite, AA);</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="keywordflow">if</span> (DepReadLoc.<a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html#a24197872686f605dcfd25b6e5d3cc7fa">Ptr</a> &amp;&amp; AA.<a class="code" href="classllvm_1_1AliasAnalysis.html#a06b4956d73c0a0f5b4901924bf2a98d7">isMustAlias</a>(InstReadLoc.<a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html#a24197872686f605dcfd25b6e5d3cc7fa">Ptr</a>, DepReadLoc.<a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html#a24197872686f605dcfd25b6e5d3cc7fa">Ptr</a>))</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  <span class="comment">// If DepWrite doesn&#39;t read memory or if we can&#39;t prove it is a must alias,</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <span class="comment">// then it can&#39;t be considered dead.</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;}</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment">// DSE Pass</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="keywordtype">bool</span> DSE::runOnBasicBlock(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <span class="keywordtype">bool</span> MadeChange = <span class="keyword">false</span>;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  <span class="comment">// Do a top-down walk on the BB.</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> BBI = BB.<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(), BBE = BB.<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>(); BBI != BBE; ) {</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst = BBI++;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="comment">// Handle &#39;free&#39; calls specially.</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *F = <a class="code" href="namespacellvm.html#a42a9f1e04ad580b344123c15dbb29d39">isFreeCall</a>(Inst, TLI)) {</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      MadeChange |= HandleFree(F);</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    }</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="comment">// If we find something that writes memory, get its memory dependence.</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="DeadStoreElimination_8cpp.html#aaeef0320df7c6a19fa885a77d1d18c27">hasMemoryWrite</a>(Inst, TLI))</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <a class="code" href="classllvm_1_1MemDepResult.html">MemDepResult</a> InstDep = MD-&gt;getDependency(Inst);</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="comment">// Ignore any store where we can&#39;t find a local dependence.</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="comment">// FIXME: cross-block DSE would be fun. :)</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="keywordflow">if</span> (!InstDep.<a class="code" href="classllvm_1_1MemDepResult.html#aa6d7a9e81b4749376498640463eb5dc2">isDef</a>() &amp;&amp; !InstDep.<a class="code" href="classllvm_1_1MemDepResult.html#ae409b288c7f70a6c57586535abed3808">isClobber</a>())</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="comment">// If we&#39;re storing the same value back to a pointer that we just</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="comment">// loaded from, then the store can be removed.</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *SI = dyn_cast&lt;StoreInst&gt;(Inst)) {</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *DepLoad = dyn_cast&lt;LoadInst&gt;(InstDep.<a class="code" href="classllvm_1_1MemDepResult.html#a8452eb6508c00e2b6d56926bebc79f57">getInst</a>())) {</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        <span class="keywordflow">if</span> (SI-&gt;getPointerOperand() == DepLoad-&gt;getPointerOperand() &amp;&amp;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;            SI-&gt;getOperand(0) == DepLoad &amp;&amp; <a class="code" href="DeadStoreElimination_8cpp.html#a586c20ef578b9c947aaf22cf220f98da">isRemovable</a>(SI)) {</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;          <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;DSE: Remove Store Of Load from same pointer:\n  &quot;</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                       &lt;&lt; <span class="stringliteral">&quot;LOAD: &quot;</span> &lt;&lt; *DepLoad &lt;&lt; <span class="stringliteral">&quot;\n  STORE: &quot;</span> &lt;&lt; *SI &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;          <span class="comment">// DeleteDeadInstruction can delete the current instruction.  Save BBI</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;          <span class="comment">// in case we need it.</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;          <a class="code" href="classllvm_1_1WeakVH.html">WeakVH</a> NextInst(BBI);</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;          <a class="code" href="DeadStoreElimination_8cpp.html#a956b8b042e18734565af895157e7a6ce">DeleteDeadInstruction</a>(SI, *MD, TLI);</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;          <span class="keywordflow">if</span> (NextInst == 0)  <span class="comment">// Next instruction deleted.</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;            BBI = BB.<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (BBI != BB.<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>())  <span class="comment">// Revisit this instruction if possible.</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            --BBI;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;          ++NumFastStores;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;          MadeChange = <span class="keyword">true</span>;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        }</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      }</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    }</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="comment">// Figure out what location is being stored to.</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html">AliasAnalysis::Location</a> Loc = <a class="code" href="DeadStoreElimination_8cpp.html#a06efb1a4f95406645eb811d1fe240812">getLocForWrite</a>(Inst, *AA);</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="comment">// If we didn&#39;t get a useful location, fail.</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="keywordflow">if</span> (Loc.<a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html#a24197872686f605dcfd25b6e5d3cc7fa">Ptr</a> == 0)</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="keywordflow">while</span> (InstDep.<a class="code" href="classllvm_1_1MemDepResult.html#aa6d7a9e81b4749376498640463eb5dc2">isDef</a>() || InstDep.<a class="code" href="classllvm_1_1MemDepResult.html#ae409b288c7f70a6c57586535abed3808">isClobber</a>()) {</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;      <span class="comment">// Get the memory clobbered by the instruction we depend on.  MemDep will</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      <span class="comment">// skip any instructions that &#39;Loc&#39; clearly doesn&#39;t interact with.  If we</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      <span class="comment">// end up depending on a may- or must-aliased load, then we can&#39;t optimize</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      <span class="comment">// away the store and we bail out.  However, if we depend on on something</span></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      <span class="comment">// that overwrites the memory location we *can* potentially optimize it.</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      <span class="comment">//</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      <span class="comment">// Find out what memory location the dependent instruction stores.</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *DepWrite = InstDep.<a class="code" href="classllvm_1_1MemDepResult.html#a8452eb6508c00e2b6d56926bebc79f57">getInst</a>();</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      <a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html">AliasAnalysis::Location</a> DepLoc = <a class="code" href="DeadStoreElimination_8cpp.html#a06efb1a4f95406645eb811d1fe240812">getLocForWrite</a>(DepWrite, *AA);</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      <span class="comment">// If we didn&#39;t get a useful location, or if it isn&#39;t a size, bail out.</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      <span class="keywordflow">if</span> (DepLoc.<a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html#a24197872686f605dcfd25b6e5d3cc7fa">Ptr</a> == 0)</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      <span class="comment">// If we find a write that is a) removable (i.e., non-volatile), b) is</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      <span class="comment">// completely obliterated by the store to &#39;Loc&#39;, and c) which we know that</span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      <span class="comment">// &#39;Inst&#39; doesn&#39;t load from, then we can remove it.</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="DeadStoreElimination_8cpp.html#a586c20ef578b9c947aaf22cf220f98da">isRemovable</a>(DepWrite) &amp;&amp;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;          !<a class="code" href="DeadStoreElimination_8cpp.html#a1d9bae16f4fc2f74d2ee6efe04739ec3">isPossibleSelfRead</a>(Inst, Loc, DepWrite, *AA)) {</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        int64_t InstWriteOffset, DepWriteOffset;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        <a class="code" href="DeadStoreElimination_8cpp.html#ae0fd34cbfd6b1219de8ceee42e6dd436">OverwriteResult</a> <a class="code" href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9a96727447c0ad447987df1c6415aef074">OR</a> = <a class="code" href="DeadStoreElimination_8cpp.html#adfe45295c28178d47c9b8ee42df10a20">isOverwrite</a>(Loc, DepLoc, *AA,</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                                         DepWriteOffset, InstWriteOffset);</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        <span class="keywordflow">if</span> (OR == OverwriteComplete) {</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;          <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;DSE: Remove Dead Store:\n  DEAD: &quot;</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                &lt;&lt; *DepWrite &lt;&lt; <span class="stringliteral">&quot;\n  KILLER: &quot;</span> &lt;&lt; *Inst &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;          <span class="comment">// Delete the store and now-dead instructions that feed it.</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;          <a class="code" href="DeadStoreElimination_8cpp.html#a956b8b042e18734565af895157e7a6ce">DeleteDeadInstruction</a>(DepWrite, *MD, TLI);</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;          ++NumFastStores;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;          MadeChange = <span class="keyword">true</span>;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;          <span class="comment">// DeleteDeadInstruction can delete the current instruction in loop</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;          <span class="comment">// cases, reset BBI.</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;          BBI = Inst;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;          <span class="keywordflow">if</span> (BBI != BB.<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>())</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;            --BBI;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (OR == OverwriteEnd &amp;&amp; <a class="code" href="DeadStoreElimination_8cpp.html#ab61aeec4fccffbbab2b733baaff6fd59">isShortenable</a>(DepWrite)) {</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;          <span class="comment">// TODO: base this on the target vector size so that if the earlier</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;          <span class="comment">// store was too small to get vector writes anyway then its likely</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;          <span class="comment">// a good idea to shorten it</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;          <span class="comment">// Power of 2 vector writes are probably always a bad idea to optimize</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;          <span class="comment">// as any store/memset/memcpy is likely using vector instructions so</span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;          <span class="comment">// shortening it to not vector size is likely to be slower</span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;          <a class="code" href="classllvm_1_1MemIntrinsic.html">MemIntrinsic</a>* DepIntrinsic = cast&lt;MemIntrinsic&gt;(DepWrite);</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;          <span class="keywordtype">unsigned</span> DepWriteAlign = DepIntrinsic-&gt;<a class="code" href="classllvm_1_1MemIntrinsic.html#a42dd65db3521498f10afb8c6f66e1bb5">getAlignment</a>();</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a19358222bb2c2199975e3a4ec4b40eed">llvm::isPowerOf2_64</a>(InstWriteOffset) ||</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;              ((DepWriteAlign != 0) &amp;&amp; InstWriteOffset % DepWriteAlign == 0)) {</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;            <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;DSE: Remove Dead Store:\n  OW END: &quot;</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                  &lt;&lt; *DepWrite &lt;&lt; <span class="stringliteral">&quot;\n  KILLER (offset &quot;</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                  &lt;&lt; InstWriteOffset &lt;&lt; <span class="stringliteral">&quot;, &quot;</span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                  &lt;&lt; DepLoc.<a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html#aba42e84910b42f9684564b8512a30b2e">Size</a> &lt;&lt; <span class="stringliteral">&quot;)&quot;</span></div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                  &lt;&lt; *Inst &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;            <a class="code" href="classllvm_1_1Value.html">Value</a>* DepWriteLength = DepIntrinsic-&gt;<a class="code" href="classllvm_1_1MemIntrinsic.html#abad10f74789466601c7a025540c1c072">getLength</a>();</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;            <a class="code" href="classllvm_1_1Value.html">Value</a>* TrimmedLength = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(DepWriteLength-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(),</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                                                    InstWriteOffset -</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                                                    DepWriteOffset);</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            DepIntrinsic-&gt;<a class="code" href="classllvm_1_1MemIntrinsic.html#a898aa65c5d00f6073df71f3dd709a84d">setLength</a>(TrimmedLength);</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;            MadeChange = <span class="keyword">true</span>;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;          }</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        }</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;      }</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      <span class="comment">// If this is a may-aliased store that is clobbering the store value, we</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;      <span class="comment">// can keep searching past it for another must-aliased pointer that stores</span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      <span class="comment">// to the same location.  For example, in:</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;      <span class="comment">//   store -&gt; P</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;      <span class="comment">//   store -&gt; Q</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      <span class="comment">//   store -&gt; P</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;      <span class="comment">// we can remove the first store to P even though we don&#39;t know if P and Q</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      <span class="comment">// alias.</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <span class="keywordflow">if</span> (DepWrite == &amp;BB.<a class="code" href="classllvm_1_1BasicBlock.html#a33603355becfb1a050b62aa015c1cc57">front</a>()) <span class="keywordflow">break</span>;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;      <span class="comment">// Can&#39;t look past this instruction if it might read &#39;Loc&#39;.</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;      <span class="keywordflow">if</span> (AA-&gt;<a class="code" href="classllvm_1_1AliasAnalysis.html#a3f09a65a9c9d7bfff6c6271976d1baba">getModRefInfo</a>(DepWrite, Loc) &amp; <a class="code" href="classllvm_1_1AliasAnalysis.html#a83d29c51155787c607268c2659559460a20c70d6d2838a070cafe0b3f82b7aee5">AliasAnalysis::Ref</a>)</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      InstDep = MD-&gt;getPointerDependencyFrom(Loc, <span class="keyword">false</span>, DepWrite, &amp;BB);</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    }</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  }</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  <span class="comment">// If this block ends in a return, unwind, or unreachable, all allocas are</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  <span class="comment">// dead at its end, which means stores to them are also dead.</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  <span class="keywordflow">if</span> (BB.<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1TerminatorInst.html#a4c26d3b92af99a6c8defd89a2d39ca32">getNumSuccessors</a>() == 0)</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    MadeChange |= handleEndBlock(BB);</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  <span class="keywordflow">return</span> MadeChange;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;}</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="comment">/// Find all blocks that will unconditionally lead to the block BB and append</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="comment">/// them to F.</span></div><div class="line"><a name="l00641"></a><span class="lineno"><a class="line" href="DeadStoreElimination_8cpp.html#aa38f1b2ac4e3afadc60a9b67888154fa">  641</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="DeadStoreElimination_8cpp.html#aa38f1b2ac4e3afadc60a9b67888154fa">FindUnconditionalPreds</a>(<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;BasicBlock *&gt;</a> &amp;Blocks,</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                                   <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT) {</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PredIterator.html">pred_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(BB), E = <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(BB); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred = *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="keywordflow">if</span> (Pred == BB) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <a class="code" href="classllvm_1_1TerminatorInst.html">TerminatorInst</a> *PredTI = Pred-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>();</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <span class="keywordflow">if</span> (PredTI-&gt;<a class="code" href="classllvm_1_1TerminatorInst.html#a4c26d3b92af99a6c8defd89a2d39ca32">getNumSuccessors</a>() != 1)</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <span class="keywordflow">if</span> (DT-&gt;<a class="code" href="classllvm_1_1DominatorTree.html#a5ff15505ad3a19cbc8e6d4cb3633d669">isReachableFromEntry</a>(Pred))</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;      Blocks.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Pred);</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  }</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;}</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="comment">/// HandleFree - Handle frees of entire structures whose dependency is a store</span></div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="comment">/// to a field of that structure.</span></div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> DSE::HandleFree(<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *F) {</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <span class="keywordtype">bool</span> MadeChange = <span class="keyword">false</span>;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  <a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html">AliasAnalysis::Location</a> Loc = <a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html">AliasAnalysis::Location</a>(F-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0));</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 16&gt;</a> Blocks;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  Blocks.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(F-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>());</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  <span class="keywordflow">while</span> (!Blocks.empty()) {</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB = Blocks.pop_back_val();</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InstPt = BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>();</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="keywordflow">if</span> (BB == F-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>()) InstPt = F;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <a class="code" href="classllvm_1_1MemDepResult.html">MemDepResult</a> Dep = MD-&gt;getPointerDependencyFrom(Loc, <span class="keyword">false</span>, InstPt, BB);</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <span class="keywordflow">while</span> (Dep.<a class="code" href="classllvm_1_1MemDepResult.html#aa6d7a9e81b4749376498640463eb5dc2">isDef</a>() || Dep.<a class="code" href="classllvm_1_1MemDepResult.html#ae409b288c7f70a6c57586535abed3808">isClobber</a>()) {</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Dependency = Dep.<a class="code" href="classllvm_1_1MemDepResult.html#a8452eb6508c00e2b6d56926bebc79f57">getInst</a>();</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="DeadStoreElimination_8cpp.html#aaeef0320df7c6a19fa885a77d1d18c27">hasMemoryWrite</a>(Dependency, TLI) || !<a class="code" href="DeadStoreElimination_8cpp.html#a586c20ef578b9c947aaf22cf220f98da">isRemovable</a>(Dependency))</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *DepPointer =</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        <a class="code" href="namespacellvm.html#ace6c957db39858291c6ce01c38e78480">GetUnderlyingObject</a>(<a class="code" href="DeadStoreElimination_8cpp.html#af1ce67e46bfa7f3f0e87d52e8552caac">getStoredPointerOperand</a>(Dependency));</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;      <span class="comment">// Check for aliasing.</span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;      <span class="keywordflow">if</span> (!AA-&gt;<a class="code" href="classllvm_1_1AliasAnalysis.html#a06b4956d73c0a0f5b4901924bf2a98d7">isMustAlias</a>(F-&gt;<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(0), DepPointer))</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Next = <a class="code" href="namespacellvm.html#aa1704159f75e6eacd595962ea6d93ffe">llvm::next</a>(<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a>(Dependency));</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;      <span class="comment">// DCE instructions only used to calculate that store</span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;      <a class="code" href="DeadStoreElimination_8cpp.html#a956b8b042e18734565af895157e7a6ce">DeleteDeadInstruction</a>(Dependency, *MD, TLI);</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;      ++NumFastStores;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;      MadeChange = <span class="keyword">true</span>;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;      <span class="comment">// Inst&#39;s old Dependency is now deleted. Compute the next dependency,</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;      <span class="comment">// which may also be dead, as in</span></div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;      <span class="comment">//    s[0] = 0;</span></div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;      <span class="comment">//    s[1] = 0; // This has just been deleted.</span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;      <span class="comment">//    free(s);</span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;      Dep = MD-&gt;getPointerDependencyFrom(Loc, <span class="keyword">false</span>, Next, BB);</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    }</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="keywordflow">if</span> (Dep.<a class="code" href="classllvm_1_1MemDepResult.html#a2a64d8f5153ebc0e8c08d0702c2c4aab">isNonLocal</a>())</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;      <a class="code" href="DeadStoreElimination_8cpp.html#aa38f1b2ac4e3afadc60a9b67888154fa">FindUnconditionalPreds</a>(Blocks, BB, DT);</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  }</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <span class="keywordflow">return</span> MadeChange;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;}</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;  <span class="keyword">struct </span>CouldRef {</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <span class="keyword">typedef</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *argument_type;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1CallSite.html">CallSite</a> CS;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a> *AA;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <span class="keywordtype">bool</span> operator()(<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      <span class="comment">// See if the call site touches the value.</span></div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      <a class="code" href="classllvm_1_1AliasAnalysis.html#a83d29c51155787c607268c2659559460">AliasAnalysis::ModRefResult</a> <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a> =</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        AA-&gt;<a class="code" href="classllvm_1_1AliasAnalysis.html#a3f09a65a9c9d7bfff6c6271976d1baba">getModRefInfo</a>(CS, I, <a class="code" href="DeadStoreElimination_8cpp.html#abd4594e793d14c9f01a1f92d0afb0851">getPointerSize</a>(I, *AA));</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;      <span class="keywordflow">return</span> A == <a class="code" href="classllvm_1_1AliasAnalysis.html#a83d29c51155787c607268c2659559460ae5518d24851e606666c97b9daa9a647f">AliasAnalysis::ModRef</a> || A == <a class="code" href="classllvm_1_1AliasAnalysis.html#a83d29c51155787c607268c2659559460a20c70d6d2838a070cafe0b3f82b7aee5">AliasAnalysis::Ref</a>;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    }</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  };</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;}</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="comment">/// handleEndBlock - Remove dead stores to stack-allocated locations in the</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="comment">/// function end block.  Ex:</span></div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="comment">/// %A = alloca i32</span></div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="comment">/// ...</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;<span class="comment">/// store i32 1, i32* %A</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;<span class="comment">/// ret void</span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> DSE::handleEndBlock(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;BB) {</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  <span class="keywordtype">bool</span> MadeChange = <span class="keyword">false</span>;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  <span class="comment">// Keep track of all of the stack objects that are dead at the end of the</span></div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  <span class="comment">// function.</span></div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;Value*, 16&gt;</a> DeadStackObjects;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  <span class="comment">// Find all of the alloca&#39;d pointers in the entry block.</span></div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Entry = BB.<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">begin</a>();</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Entry-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(), E = Entry-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <span class="keywordflow">if</span> (isa&lt;AllocaInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;      DeadStackObjects.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <span class="comment">// Okay, so these are dead heap objects, but if the pointer never escapes</span></div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="comment">// then it&#39;s leaked by this function anyways.</span></div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a0e0017717a140769348ff4379f97c28d">isAllocLikeFn</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, TLI) &amp;&amp; !<a class="code" href="namespacellvm.html#a0b8531ebccf07d33408272bd51999962">PointerMayBeCaptured</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="keyword">true</span>, <span class="keyword">true</span>))</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;      DeadStackObjects.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  }</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  <span class="comment">// Treat byval arguments the same, stores to them are dead at the end of the</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  <span class="comment">// function.</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">Function::arg_iterator</a> AI = BB.<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#a8bf193a781a92cae52d7f9216d0824f8">arg_begin</a>(),</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;       AE = BB.<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#a8300ac1ef141b8a7c63c13fa9369d976">arg_end</a>(); AI != AE; ++AI)</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <span class="keywordflow">if</span> (AI-&gt;hasByValAttr())</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;      DeadStackObjects.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(AI);</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  <span class="comment">// Scan the basic block backwards</span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> BBI = BB.<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>(); BBI != BB.<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(); ){</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    --BBI;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="comment">// If we find a store, check to see if it points into a dead stack value.</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="DeadStoreElimination_8cpp.html#aaeef0320df7c6a19fa885a77d1d18c27">hasMemoryWrite</a>(BBI, TLI) &amp;&amp; <a class="code" href="DeadStoreElimination_8cpp.html#a586c20ef578b9c947aaf22cf220f98da">isRemovable</a>(BBI)) {</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;      <span class="comment">// See through pointer-to-pointer bitcasts</span></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 4&gt;</a> Pointers;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;      <a class="code" href="namespacellvm.html#ae7484b83e7c2b58ffd67422a919aba40">GetUnderlyingObjects</a>(<a class="code" href="DeadStoreElimination_8cpp.html#af1ce67e46bfa7f3f0e87d52e8552caac">getStoredPointerOperand</a>(BBI), Pointers);</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;      <span class="comment">// Stores to stack values are valid candidates for removal.</span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;      <span class="keywordtype">bool</span> AllDead = <span class="keyword">true</span>;</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classT.html">SmallVectorImpl&lt;Value *&gt;::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Pointers.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(),</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;           E = Pointers.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        <span class="keywordflow">if</span> (!DeadStackObjects.<a class="code" href="classllvm_1_1SetVector.html#a0fd2953d62c1b1cabb87e420be5177c4">count</a>(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;          AllDead = <span class="keyword">false</span>;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        }</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;      <span class="keywordflow">if</span> (AllDead) {</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1RegState.html#a079b254e749130fbe5d740f314ca92daa2fee1a7db4e84247a193a9af1f907013">Dead</a> = BBI++;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;DSE: Dead Store at End of Block:\n  DEAD: &quot;</span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                     &lt;&lt; *Dead &lt;&lt; <span class="stringliteral">&quot;\n  Objects: &quot;</span>;</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;              <span class="keywordflow">for</span> (<a class="code" href="classT.html">SmallVectorImpl&lt;Value *&gt;::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Pointers.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(),</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                   E = Pointers.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; **<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#aa1704159f75e6eacd595962ea6d93ffe">llvm::next</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) != E)</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                  <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;, &quot;</span>;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;              }</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;              <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;        <span class="comment">// DCE instructions only used to calculate that store.</span></div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        <a class="code" href="DeadStoreElimination_8cpp.html#a956b8b042e18734565af895157e7a6ce">DeleteDeadInstruction</a>(Dead, *MD, TLI, &amp;DeadStackObjects);</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        ++NumFastStores;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        MadeChange = <span class="keyword">true</span>;</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;      }</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    }</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <span class="comment">// Remove any dead non-memory-mutating instructions.</span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#abe283966f269761ee387642061c4451e">isInstructionTriviallyDead</a>(BBI, TLI)) {</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst = BBI++;</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;      <a class="code" href="DeadStoreElimination_8cpp.html#a956b8b042e18734565af895157e7a6ce">DeleteDeadInstruction</a>(Inst, *MD, TLI, &amp;DeadStackObjects);</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;      ++NumFastOther;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;      MadeChange = <span class="keyword">true</span>;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    }</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    <span class="keywordflow">if</span> (isa&lt;AllocaInst&gt;(BBI)) {</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;      <span class="comment">// Remove allocas from the list of dead stack objects; there can&#39;t be</span></div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      <span class="comment">// any references before the definition.</span></div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      DeadStackObjects.<a class="code" href="classllvm_1_1SetVector.html#a6357ff5654c7cbe5fed8516dc8328eb4">remove</a>(BBI);</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    }</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CallSite.html">CallSite</a> CS = cast&lt;Value&gt;(BBI)) {</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      <span class="comment">// Remove allocation function calls from the list of dead stack objects; </span></div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;      <span class="comment">// there can&#39;t be any references before the definition.</span></div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a0e0017717a140769348ff4379f97c28d">isAllocLikeFn</a>(BBI, TLI))</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        DeadStackObjects.<a class="code" href="classllvm_1_1SetVector.html#a6357ff5654c7cbe5fed8516dc8328eb4">remove</a>(BBI);</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;      <span class="comment">// If this call does not access memory, it can&#39;t be loading any of our</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;      <span class="comment">// pointers.</span></div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;      <span class="keywordflow">if</span> (AA-&gt;<a class="code" href="classllvm_1_1AliasAnalysis.html#a5c79078554f411d7c99723d34d4e1cbf">doesNotAccessMemory</a>(CS))</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;      <span class="comment">// If the call might load from any of our allocas, then any store above</span></div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;      <span class="comment">// the call is live.</span></div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;      CouldRef Pred = { CS, AA };</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;      DeadStackObjects.<a class="code" href="classllvm_1_1SetVector.html#a5779c9e110b51323b5f8a8216499634d">remove_if</a>(Pred);</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      <span class="comment">// If all of the allocas were clobbered by the call then we&#39;re not going</span></div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;      <span class="comment">// to find anything else to process.</span></div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;      <span class="keywordflow">if</span> (DeadStackObjects.<a class="code" href="classllvm_1_1SetVector.html#a298a4f422dfc8478ad9cdd0a106cd5e4">empty</a>())</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    }</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html">AliasAnalysis::Location</a> LoadedLoc;</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <span class="comment">// If we encounter a use of the pointer, it is no longer considered dead</span></div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *L = dyn_cast&lt;LoadInst&gt;(BBI)) {</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;      <span class="keywordflow">if</span> (!L-&gt;isUnordered()) <span class="comment">// Be conservative with atomic/volatile load</span></div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;      LoadedLoc = AA-&gt;<a class="code" href="classllvm_1_1AliasAnalysis.html#aec9dbab832cd8052f85cd2a9dbb3816e">getLocation</a>(L);</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1VAArgInst.html">VAArgInst</a> *V = dyn_cast&lt;VAArgInst&gt;(BBI)) {</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      LoadedLoc = AA-&gt;<a class="code" href="classllvm_1_1AliasAnalysis.html#aec9dbab832cd8052f85cd2a9dbb3816e">getLocation</a>(V);</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemTransferInst.html">MemTransferInst</a> *MTI = dyn_cast&lt;MemTransferInst&gt;(BBI)) {</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;      LoadedLoc = AA-&gt;<a class="code" href="classllvm_1_1AliasAnalysis.html#a7130fcc16699c8bad067d00ccc5a8c95">getLocationForSource</a>(MTI);</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!BBI-&gt;mayReadFromMemory()) {</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;      <span class="comment">// Instruction doesn&#39;t read memory.  Note that stores that weren&#39;t removed</span></div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;      <span class="comment">// above will hit this case.</span></div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;      <span class="comment">// Unknown inst; assume it clobbers everything.</span></div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    }</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <span class="comment">// Remove any allocas from the DeadPointer set that are loaded, as this</span></div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    <span class="comment">// makes any stores above the access live.</span></div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    RemoveAccessedObjects(LoadedLoc, DeadStackObjects);</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <span class="comment">// If all of the allocas were clobbered by the access then we&#39;re not going</span></div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <span class="comment">// to find anything else to process.</span></div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <span class="keywordflow">if</span> (DeadStackObjects.<a class="code" href="classllvm_1_1SetVector.html#a298a4f422dfc8478ad9cdd0a106cd5e4">empty</a>())</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  }</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  <span class="keywordflow">return</span> MadeChange;</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;}</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  <span class="keyword">struct </span>CouldAlias {</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    <span class="keyword">typedef</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *argument_type;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html">AliasAnalysis::Location</a> &amp;LoadedLoc;</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    <a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a> *AA;</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <span class="keywordtype">bool</span> operator()(<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;      <span class="comment">// See if the loaded location could alias the stack location.</span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;      <a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html">AliasAnalysis::Location</a> StackLoc(I, <a class="code" href="DeadStoreElimination_8cpp.html#abd4594e793d14c9f01a1f92d0afb0851">getPointerSize</a>(I, *AA));</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;      <span class="keywordflow">return</span> !AA-&gt;<a class="code" href="classllvm_1_1AliasAnalysis.html#a18afcc2fefe15651254db4a92c29f5c4">isNoAlias</a>(StackLoc, LoadedLoc);</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    }</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;  };</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;}</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;<span class="comment">/// RemoveAccessedObjects - Check to see if the specified location may alias any</span></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;<span class="comment">/// of the stack objects in the DeadStackObjects set.  If so, they become live</span></div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;<span class="comment">/// because the location is being loaded.</span></div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> DSE::RemoveAccessedObjects(<span class="keyword">const</span> <a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html">AliasAnalysis::Location</a> &amp;LoadedLoc,</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;                                <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;Value*, 16&gt;</a> &amp;DeadStackObjects) {</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *UnderlyingPointer = <a class="code" href="namespacellvm.html#ace6c957db39858291c6ce01c38e78480">GetUnderlyingObject</a>(LoadedLoc.<a class="code" href="structllvm_1_1AliasAnalysis_1_1Location.html#a24197872686f605dcfd25b6e5d3cc7fa">Ptr</a>);</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  <span class="comment">// A constant can&#39;t be in the dead pointer set.</span></div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  <span class="keywordflow">if</span> (isa&lt;Constant&gt;(UnderlyingPointer))</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  <span class="comment">// If the kill pointer can be easily reduced to an alloca, don&#39;t bother doing</span></div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  <span class="comment">// extraneous AA queries.</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  <span class="keywordflow">if</span> (isa&lt;AllocaInst&gt;(UnderlyingPointer) || isa&lt;Argument&gt;(UnderlyingPointer)) {</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    DeadStackObjects.<a class="code" href="classllvm_1_1SetVector.html#a6357ff5654c7cbe5fed8516dc8328eb4">remove</a>(const_cast&lt;Value*&gt;(UnderlyingPointer));</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  }</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;  <span class="comment">// Remove objects that could alias LoadedLoc.</span></div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  CouldAlias Pred = { LoadedLoc, AA };</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  DeadStackObjects.<a class="code" href="classllvm_1_1SetVector.html#a5779c9e110b51323b5f8a8216499634d">remove_if</a>(Pred);</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;}</div><div class="ttc" id="classllvm_1_1MemIntrinsic_html_a42dd65db3521498f10afb8c6f66e1bb5"><div class="ttname"><a href="classllvm_1_1MemIntrinsic.html#a42dd65db3521498f10afb8c6f66e1bb5">llvm::MemIntrinsic::getAlignment</a></div><div class="ttdeci">unsigned getAlignment() const </div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00127">IntrinsicInst.h:127</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a01db82ed39d59c36bdb4687fe724a739"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a01db82ed39d59c36bdb4687fe724a739">llvm::Intrinsic::init_trampoline</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l01251">Intrinsics.h:1251</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a075e34e98605d0e7c289763a104869ac"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">llvm::SmallVectorTemplateCommon&lt; T &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00114">SmallVector.h:114</a></div></div>
<div class="ttc" id="classllvm_1_1AliasAnalysis_html_a3858309898f2565757da3abdd90be922"><div class="ttname"><a href="classllvm_1_1AliasAnalysis.html#a3858309898f2565757da3abdd90be922">llvm::AliasAnalysis::getDataLayout</a></div><div class="ttdeci">const DataLayout * getDataLayout() const </div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00089">AliasAnalysis.h:89</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00236">SmallVector.h:236</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90aa332b90dd5e4ebf4bbbcc0964220d373"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aa332b90dd5e4ebf4bbbcc0964220d373">llvm::Intrinsic::lifetime_end</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l01254">Intrinsics.h:1254</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html"><div class="ttname"><a href="classllvm_1_1DataLayout.html">llvm::DataLayout</a></div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00098">DataLayout.h:98</a></div></div>
<div class="ttc" id="namespacellvm_1_1ARM__PROC_html_aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5"><div class="ttname"><a href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">llvm::ARM_PROC::A</a></div><div class="ttdef"><b>Definition:</b> <a href="ARMBaseInfo_8h_source.html#l00098">ARMBaseInfo.h:98</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_a884f90190bca4bd354f2d5c91c264028"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">llvm::AnalysisUsage::addPreserved</a></div><div class="ttdeci">AnalysisUsage &amp; addPreserved()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00081">PassAnalysisSupport.h:81</a></div></div>
<div class="ttc" id="classllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00035">PassRegistry.cpp:35</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a6fe2f06b8a4b2c3d6308afb223a0238a"><div class="ttname"><a href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00072">Instruction.cpp:72</a></div></div>
<div class="ttc" id="classllvm_1_1AliasAnalysis_html_a83d29c51155787c607268c2659559460a20c70d6d2838a070cafe0b3f82b7aee5"><div class="ttname"><a href="classllvm_1_1AliasAnalysis.html#a83d29c51155787c607268c2659559460a20c70d6d2838a070cafe0b3f82b7aee5">llvm::AliasAnalysis::Ref</a></div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00231">AliasAnalysis.h:231</a></div></div>
<div class="ttc" id="classllvm_1_1MemDepResult_html_aa6d7a9e81b4749376498640463eb5dc2"><div class="ttname"><a href="classllvm_1_1MemDepResult.html#aa6d7a9e81b4749376498640463eb5dc2">llvm::MemDepResult::isDef</a></div><div class="ttdeci">bool isDef() const </div><div class="ttdef"><b>Definition:</b> <a href="MemoryDependenceAnalysis_8h_source.html#l00132">MemoryDependenceAnalysis.h:132</a></div></div>
<div class="ttc" id="Instructions_8h_html"><div class="ttname"><a href="Instructions_8h.html">Instructions.h</a></div></div>
<div class="ttc" id="namespacellvm_html_ae7484b83e7c2b58ffd67422a919aba40"><div class="ttname"><a href="namespacellvm.html#ae7484b83e7c2b58ffd67422a919aba40">llvm::GetUnderlyingObjects</a></div><div class="ttdeci">void GetUnderlyingObjects(Value *V, SmallVectorImpl&lt; Value * &gt; &amp;Objects, const DataLayout *TD=0, unsigned MaxLookup=6)</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l01928">ValueTracking.cpp:1928</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="MemoryDependenceAnalysis_8h_html"><div class="ttname"><a href="MemoryDependenceAnalysis_8h.html">MemoryDependenceAnalysis.h</a></div></div>
<div class="ttc" id="classllvm_1_1AliasAnalysis_html_a3f09a65a9c9d7bfff6c6271976d1baba"><div class="ttname"><a href="classllvm_1_1AliasAnalysis.html#a3f09a65a9c9d7bfff6c6271976d1baba">llvm::AliasAnalysis::getModRefInfo</a></div><div class="ttdeci">ModRefResult getModRefInfo(const Instruction *I, const Location &amp;Loc)</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00353">AliasAnalysis.h:353</a></div></div>
<div class="ttc" id="classllvm_1_1DominatorTree_html_a5ff15505ad3a19cbc8e6d4cb3633d669"><div class="ttname"><a href="classllvm_1_1DominatorTree.html#a5ff15505ad3a19cbc8e6d4cb3633d669">llvm::DominatorTree::isReachableFromEntry</a></div><div class="ttdeci">bool isReachableFromEntry(const BasicBlock *A) const </div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00879">Dominators.h:879</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_ae4ca2261b8b901e415fda7feac5051ea"><div class="ttname"><a href="classllvm_1_1Function.html#ae4ca2261b8b901e415fda7feac5051ea">llvm::Function::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00397">Function.h:397</a></div></div>
<div class="ttc" id="classllvm_1_1IntrinsicInst_html_a6cbb4809b81f3994ee0c79b38556bd66"><div class="ttname"><a href="classllvm_1_1IntrinsicInst.html#a6cbb4809b81f3994ee0c79b38556bd66">llvm::IntrinsicInst::getIntrinsicID</a></div><div class="ttdeci">Intrinsic::ID getIntrinsicID() const </div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00043">IntrinsicInst.h:43</a></div></div>
<div class="ttc" id="IntrinsicInst_8h_html"><div class="ttname"><a href="IntrinsicInst_8h.html">IntrinsicInst.h</a></div></div>
<div class="ttc" id="namespacellvm_html_a3f2f98c2a67c9e79f58aad9150a62e42"><div class="ttname"><a href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">llvm::dyn_cast</a></div><div class="ttdeci">enable_if_c&lt;!is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="Casting_8h_source.html#l00266">Casting.h:266</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a2f81e0c1fc6554df7ad2eafabf5fc5a5"><div class="ttname"><a href="classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">llvm::User::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00108">User.h:108</a></div></div>
<div class="ttc" id="DataLayout_8h_html"><div class="ttname"><a href="DataLayout_8h.html">DataLayout.h</a></div></div>
<div class="ttc" id="classllvm_1_1AliasAnalysis_html_a7130fcc16699c8bad067d00ccc5a8c95"><div class="ttname"><a href="classllvm_1_1AliasAnalysis.html#a7130fcc16699c8bad067d00ccc5a8c95">llvm::AliasAnalysis::getLocationForSource</a></div><div class="ttdeci">static Location getLocationForSource(const MemTransferInst *MTI)</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8cpp_source.html#l00260">AliasAnalysis.cpp:260</a></div></div>
<div class="ttc" id="namespacellvm_html_a090878b40a781fbfccd4496adb00dd19"><div class="ttname"><a href="namespacellvm.html#a090878b40a781fbfccd4496adb00dd19">llvm::GetPointerBaseWithConstantOffset</a></div><div class="ttdeci">Value * GetPointerBaseWithConstantOffset(Value *Ptr, int64_t &amp;Offset, const DataLayout *TD)</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l01716">ValueTracking.cpp:1716</a></div></div>
<div class="ttc" id="Debug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html"><div class="ttname"><a href="classllvm_1_1CallInst.html">llvm::CallInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01161">Instructions.h:1161</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_aca229503e4f5c83a187a6a921c625fa8"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">llvm::BasicBlock::getParent</a></div><div class="ttdeci">const Function * getParent() const </div><div class="ttdoc">Return the enclosing method, or null if none. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00116">BasicBlock.h:116</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a8300ac1ef141b8a7c63c13fa9369d976"><div class="ttname"><a href="classllvm_1_1Function.html#a8300ac1ef141b8a7c63c13fa9369d976">llvm::Function::arg_end</a></div><div class="ttdeci">arg_iterator arg_end()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00418">Function.h:418</a></div></div>
<div class="ttc" id="classllvm_1_1PredIterator_html"><div class="ttname"><a href="classllvm_1_1PredIterator.html">llvm::PredIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="Support_2CFG_8h_source.html#l00029">Support/CFG.h:29</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6faf46a9a65ff8ff48a87f575fe056fcec1"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6faf46a9a65ff8ff48a87f575fe056fcec1">llvm::LibFunc::strcat</a></div><div class="ttdoc">char *strcat(char *s1, const char *s2); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00535">TargetLibraryInfo.h:535</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a33603355becfb1a050b62aa015c1cc57"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a33603355becfb1a050b62aa015c1cc57">llvm::BasicBlock::front</a></div><div class="ttdeci">const Instruction &amp; front() const </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00205">BasicBlock.h:205</a></div></div>
<div class="ttc" id="DeadStoreElimination_8cpp_html_abd4594e793d14c9f01a1f92d0afb0851"><div class="ttname"><a href="DeadStoreElimination_8cpp.html#abd4594e793d14c9f01a1f92d0afb0851">getPointerSize</a></div><div class="ttdeci">static uint64_t getPointerSize(const Value *V, AliasAnalysis &amp;AA)</div><div class="ttdef"><b>Definition:</b> <a href="DeadStoreElimination_8cpp_source.html#l00319">DeadStoreElimination.cpp:319</a></div></div>
<div class="ttc" id="LLParser_8cpp_html_a33ece1ef8074506a15d7f86eb76dbae6"><div class="ttname"><a href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a></div><div class="ttdeci">F(f)</div></div>
<div class="ttc" id="classllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00070">Function.h:70</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html"><div class="ttname"><a href="classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00136">Instructions.h:136</a></div></div>
<div class="ttc" id="classllvm_1_1AliasAnalysis_html_a83d29c51155787c607268c2659559460ae5518d24851e606666c97b9daa9a647f"><div class="ttname"><a href="classllvm_1_1AliasAnalysis.html#a83d29c51155787c607268c2659559460ae5518d24851e606666c97b9daa9a647f">llvm::AliasAnalysis::ModRef</a></div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00231">AliasAnalysis.h:231</a></div></div>
<div class="ttc" id="namespacellvm_html_ad4a3ccd487a8e2d252a1b779ff88159b"><div class="ttname"><a href="namespacellvm.html#ad4a3ccd487a8e2d252a1b779ff88159b">llvm::initializeDSEPass</a></div><div class="ttdeci">void initializeDSEPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="DeadStoreElimination_8cpp_html_ab61aeec4fccffbbab2b733baaff6fd59"><div class="ttname"><a href="DeadStoreElimination_8cpp.html#ab61aeec4fccffbbab2b733baaff6fd59">isShortenable</a></div><div class="ttdeci">static bool isShortenable(Instruction *I)</div><div class="ttdef"><b>Definition:</b> <a href="DeadStoreElimination_8cpp_source.html#l00278">DeadStoreElimination.cpp:278</a></div></div>
<div class="ttc" id="Statistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="DeadStoreElimination_8cpp_html_adfe45295c28178d47c9b8ee42df10a20"><div class="ttname"><a href="DeadStoreElimination_8cpp.html#adfe45295c28178d47c9b8ee42df10a20">isOverwrite</a></div><div class="ttdeci">static OverwriteResult isOverwrite(const AliasAnalysis::Location &amp;Later, const AliasAnalysis::Location &amp;Earlier, AliasAnalysis &amp;AA, int64_t &amp;EarlierOff, int64_t &amp;LaterOff)</div><div class="ttdef"><b>Definition:</b> <a href="DeadStoreElimination_8cpp_source.html#l00339">DeadStoreElimination.cpp:339</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90ab20709bfc1ed1765cd3b43f69bf11edc"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ab20709bfc1ed1765cd3b43f69bf11edc">llvm::Intrinsic::memcpy</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l01260">Intrinsics.h:1260</a></div></div>
<div class="ttc" id="classllvm_1_1MemDepResult_html_ae409b288c7f70a6c57586535abed3808"><div class="ttname"><a href="classllvm_1_1MemDepResult.html#ae409b288c7f70a6c57586535abed3808">llvm::MemDepResult::isClobber</a></div><div class="ttdeci">bool isClobber() const </div><div class="ttdef"><b>Definition:</b> <a href="MemoryDependenceAnalysis_8h_source.html#l00128">MemoryDependenceAnalysis.h:128</a></div></div>
<div class="ttc" id="classllvm_1_1CallSiteBase_html_a65a550af73bd99c96abea847916aa4e9"><div class="ttname"><a href="classllvm_1_1CallSiteBase.html#a65a550af73bd99c96abea847916aa4e9">llvm::CallSiteBase::getArgument</a></div><div class="ttdeci">ValTy * getArgument(unsigned ArgNo) const </div><div class="ttdef"><b>Definition:</b> <a href="CallSite_8h_source.html#l00111">CallSite.h:111</a></div></div>
<div class="ttc" id="namespacellvm_html_a42a9f1e04ad580b344123c15dbb29d39"><div class="ttname"><a href="namespacellvm.html#a42a9f1e04ad580b344123c15dbb29d39">llvm::isFreeCall</a></div><div class="ttdeci">const CallInst * isFreeCall(const Value *I, const TargetLibraryInfo *TLI)</div><div class="ttdoc">isFreeCall - Returns non-null if the value is a call to the builtin free() </div><div class="ttdef"><b>Definition:</b> <a href="MemoryBuiltins_8cpp_source.html#l00316">MemoryBuiltins.cpp:316</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00167">Value.cpp:167</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00193">BasicBlock.h:193</a></div></div>
<div class="ttc" id="namespacellvm_html_ace6c957db39858291c6ce01c38e78480"><div class="ttname"><a href="namespacellvm.html#ace6c957db39858291c6ce01c38e78480">llvm::GetUnderlyingObject</a></div><div class="ttdeci">Value * GetUnderlyingObject(Value *V, const DataLayout *TD=0, unsigned MaxLookup=6)</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l01899">ValueTracking.cpp:1899</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_ae5c60fd282ee894c87ea02c3f0fcb6d0"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">llvm::AnalysisUsage::addRequired</a></div><div class="ttdeci">AnalysisUsage &amp; addRequired()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00055">PassAnalysisSupport.h:55</a></div></div>
<div class="ttc" id="classllvm_1_1AliasAnalysis_html_a18afcc2fefe15651254db4a92c29f5c4"><div class="ttname"><a href="classllvm_1_1AliasAnalysis.html#a18afcc2fefe15651254db4a92c29f5c4">llvm::AliasAnalysis::isNoAlias</a></div><div class="ttdeci">bool isNoAlias(const Location &amp;LocA, const Location &amp;LocB)</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00187">AliasAnalysis.h:187</a></div></div>
<div class="ttc" id="PassSupport_8h_html_a14724f1ccf528e73bb29bc9230737967"><div class="ttname"><a href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a></div><div class="ttdeci">#define INITIALIZE_PASS_DEPENDENCY(depName)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00167">PassSupport.h:167</a></div></div>
<div class="ttc" id="CaptureTracking_8h_html"><div class="ttname"><a href="CaptureTracking_8h.html">CaptureTracking.h</a></div></div>
<div class="ttc" id="classllvm_1_1TargetLibraryInfo_html_a986085d3cd43522192d93e84bc660978"><div class="ttname"><a href="classllvm_1_1TargetLibraryInfo.html#a986085d3cd43522192d93e84bc660978">llvm::TargetLibraryInfo::has</a></div><div class="ttdeci">bool has(LibFunc::Func F) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00688">TargetLibraryInfo.h:688</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a400eaca9881c8dcab97e9f42b1ab1815"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">llvm::SmallVectorImpl::pop_back_val</a></div><div class="ttdeci">T LLVM_ATTRIBUTE_UNUSED_RESULT pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00430">SmallVector.h:430</a></div></div>
<div class="ttc" id="ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdef"><b>Definition:</b> <a href="ErrorHandling_8h_source.html#l00103">ErrorHandling.h:103</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00035">APInt.h:35</a></div></div>
<div class="ttc" id="PassSupport_8h_html_a74ce8276b89067e806f67c45a6d92575"><div class="ttname"><a href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a></div><div class="ttdeci">#define INITIALIZE_PASS_END(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00172">PassSupport.h:172</a></div></div>
<div class="ttc" id="STLExtras_8h_html"><div class="ttname"><a href="STLExtras_8h.html">STLExtras.h</a></div></div>
<div class="ttc" id="classllvm_1_1AliasAnalysis_html"><div class="ttname"><a href="classllvm_1_1AliasAnalysis.html">llvm::AliasAnalysis</a></div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00056">AliasAnalysis.h:56</a></div></div>
<div class="ttc" id="classllvm_1_1MemoryDependenceAnalysis_html"><div class="ttname"><a href="classllvm_1_1MemoryDependenceAnalysis.html">llvm::MemoryDependenceAnalysis</a></div><div class="ttdef"><b>Definition:</b> <a href="MemoryDependenceAnalysis_8h_source.html#l00257">MemoryDependenceAnalysis.h:257</a></div></div>
<div class="ttc" id="namespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00126">StackSlotColoring.cpp:126</a></div></div>
<div class="ttc" id="namespacellvm_1_1CallingConv_html_a4f861731fc6dbfdccc05af5968d98974"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">llvm::CallingConv::ID</a></div><div class="ttdeci">ID</div><div class="ttdoc">LLVM Calling Convention Representation. </div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00026">CallingConv.h:26</a></div></div>
<div class="ttc" id="classllvm_1_1SetVector_html_a6357ff5654c7cbe5fed8516dc8328eb4"><div class="ttname"><a href="classllvm_1_1SetVector.html#a6357ff5654c7cbe5fed8516dc8328eb4">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallSet&lt; T, N &gt; &gt;::remove</a></div><div class="ttdeci">bool remove(const value_type &amp;X)</div><div class="ttdoc">Remove an item from the set vector. </div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00118">SetVector.h:118</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00031">Instruction.h:31</a></div></div>
<div class="ttc" id="TargetLibraryInfo_8h_html"><div class="ttname"><a href="TargetLibraryInfo_8h.html">TargetLibraryInfo.h</a></div></div>
<div class="ttc" id="Dominators_8h_html"><div class="ttname"><a href="Dominators_8h.html">Dominators.h</a></div></div>
<div class="ttc" id="classllvm_1_1SetVector_html_a72d928b7fc2c5f2d56c6ac0265fd9c6e"><div class="ttname"><a href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallSet&lt; T, N &gt; &gt;::insert</a></div><div class="ttdeci">bool insert(const value_type &amp;X)</div><div class="ttdoc">Insert a new element into the SetVector. </div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00102">SetVector.h:102</a></div></div>
<div class="ttc" id="DeadStoreElimination_8cpp_html_af1ce67e46bfa7f3f0e87d52e8552caac"><div class="ttname"><a href="DeadStoreElimination_8cpp.html#af1ce67e46bfa7f3f0e87d52e8552caac">getStoredPointerOperand</a></div><div class="ttdeci">static Value * getStoredPointerOperand(Instruction *I)</div><div class="ttdoc">getStoredPointerOperand - Return the pointer that is being written to. </div><div class="ttdef"><b>Definition:</b> <a href="DeadStoreElimination_8cpp_source.html#l00299">DeadStoreElimination.cpp:299</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorBase_html_a8a8df4d85555c7954a95f86080cd3b64"><div class="ttname"><a href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">llvm::SmallVectorBase::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const </div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00056">SmallVector.h:56</a></div></div>
<div class="ttc" id="classllvm_1_1WeakVH_html"><div class="ttname"><a href="classllvm_1_1WeakVH.html">llvm::WeakVH</a></div><div class="ttdef"><b>Definition:</b> <a href="ValueHandle_8h_source.html#l00145">ValueHandle.h:145</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90ae857cbc5cf8c5a980f0bd245ad5ec61a"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ae857cbc5cf8c5a980f0bd245ad5ec61a">llvm::Intrinsic::memset</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l01262">Intrinsics.h:1262</a></div></div>
<div class="ttc" id="DeadStoreElimination_8cpp_html_a956b8b042e18734565af895157e7a6ce"><div class="ttname"><a href="DeadStoreElimination_8cpp.html#a956b8b042e18734565af895157e7a6ce">DeleteDeadInstruction</a></div><div class="ttdeci">static void DeleteDeadInstruction(Instruction *I, MemoryDependenceAnalysis &amp;MD, const TargetLibraryInfo *TLI, SmallSetVector&lt; Value *, 16 &gt; *ValueSet=0)</div><div class="ttdef"><b>Definition:</b> <a href="DeadStoreElimination_8cpp_source.html#l00110">DeadStoreElimination.cpp:110</a></div></div>
<div class="ttc" id="classllvm_1_1SetVector_html_a298a4f422dfc8478ad9cdd0a106cd5e4"><div class="ttname"><a href="classllvm_1_1SetVector.html#a298a4f422dfc8478ad9cdd0a106cd5e4">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallSet&lt; T, N &gt; &gt;::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdoc">Determine if the SetVector is empty or not. </div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00059">SetVector.h:59</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html"><div class="ttname"><a href="classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00255">Instructions.h:255</a></div></div>
<div class="ttc" id="DeadStoreElimination_8cpp_html_aaeef0320df7c6a19fa885a77d1d18c27"><div class="ttname"><a href="DeadStoreElimination_8cpp.html#aaeef0320df7c6a19fa885a77d1d18c27">hasMemoryWrite</a></div><div class="ttdeci">static bool hasMemoryWrite(Instruction *I, const TargetLibraryInfo *TLI)</div><div class="ttdef"><b>Definition:</b> <a href="DeadStoreElimination_8cpp_source.html#l00150">DeadStoreElimination.cpp:150</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a88a5e60837674780a9d812d661897ac5"><div class="ttname"><a href="classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">llvm::Function::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00395">Function.h:395</a></div></div>
<div class="ttc" id="classllvm_1_1DominatorTree_html"><div class="ttname"><a href="classllvm_1_1DominatorTree.html">llvm::DominatorTree</a></div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00740">Dominators.h:740</a></div></div>
<div class="ttc" id="DeadStoreElimination_8cpp_html_a1d9bae16f4fc2f74d2ee6efe04739ec3"><div class="ttname"><a href="DeadStoreElimination_8cpp.html#a1d9bae16f4fc2f74d2ee6efe04739ec3">isPossibleSelfRead</a></div><div class="ttdeci">static bool isPossibleSelfRead(Instruction *Inst, const AliasAnalysis::Location &amp;InstStoreLoc, Instruction *DepWrite, AliasAnalysis &amp;AA)</div><div class="ttdef"><b>Definition:</b> <a href="DeadStoreElimination_8cpp_source.html#l00457">DeadStoreElimination.cpp:457</a></div></div>
<div class="ttc" id="classllvm_1_1TerminatorInst_html_a4c26d3b92af99a6c8defd89a2d39ca32"><div class="ttname"><a href="classllvm_1_1TerminatorInst.html#a4c26d3b92af99a6c8defd89a2d39ca32">llvm::TerminatorInst::getNumSuccessors</a></div><div class="ttdeci">unsigned getNumSuccessors() const </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00059">InstrTypes.h:59</a></div></div>
<div class="ttc" id="DeadStoreElimination_8cpp_html_a69646f2a946c61a94f94192815365e1a"><div class="ttname"><a href="DeadStoreElimination_8cpp.html#a69646f2a946c61a94f94192815365e1a">getLocForRead</a></div><div class="ttdeci">static AliasAnalysis::Location getLocForRead(Instruction *Inst, AliasAnalysis &amp;AA)</div><div class="ttdef"><b>Definition:</b> <a href="DeadStoreElimination_8cpp_source.html#l00231">DeadStoreElimination.cpp:231</a></div></div>
<div class="ttc" id="classllvm_1_1TerminatorInst_html"><div class="ttname"><a href="classllvm_1_1TerminatorInst.html">llvm::TerminatorInst</a></div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00035">InstrTypes.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="MachineCSE_8cpp_html_a7978bc3965e51d710dfc641e29d2f8ef"><div class="ttname"><a href="MachineCSE_8cpp.html#a7978bc3965e51d710dfc641e29d2f8ef">Elimination</a></div><div class="ttdeci">machine Machine Common Subexpression Elimination</div><div class="ttdef"><b>Definition:</b> <a href="MachineCSE_8cpp_source.html#l00111">MachineCSE.cpp:111</a></div></div>
<div class="ttc" id="Constants_8h_html"><div class="ttname"><a href="Constants_8h.html">Constants.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a59ba1d701385742520aa8a3478099fb7"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a59ba1d701385742520aa8a3478099fb7">llvm::Intrinsic::memmove</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l01261">Intrinsics.h:1261</a></div></div>
<div class="ttc" id="namespacellvm_html_abe283966f269761ee387642061c4451e"><div class="ttname"><a href="namespacellvm.html#abe283966f269761ee387642061c4451e">llvm::isInstructionTriviallyDead</a></div><div class="ttdeci">bool isInstructionTriviallyDead(Instruction *I, const TargetLibraryInfo *TLI=0)</div><div class="ttdef"><b>Definition:</b> <a href="Local_8cpp_source.html#l00266">Local.cpp:266</a></div></div>
<div class="ttc" id="namespacellvm_html_a7e108932dc3da5294aed99a353aac9c4"><div class="ttname"><a href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">llvm::pred_begin</a></div><div class="ttdeci">Interval::pred_iterator pred_begin(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00117">Interval.h:117</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00037">PassAnalysisSupport.h:37</a></div></div>
<div class="ttc" id="namespacellvm_html_aa1704159f75e6eacd595962ea6d93ffe"><div class="ttname"><a href="namespacellvm.html#aa1704159f75e6eacd595962ea6d93ffe">llvm::next</a></div><div class="ttdeci">ItTy next(ItTy it, Dist n)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00154">STLExtras.h:154</a></div></div>
<div class="ttc" id="classllvm_1_1AliasAnalysis_html_a5c79078554f411d7c99723d34d4e1cbf"><div class="ttname"><a href="classllvm_1_1AliasAnalysis.html#a5c79078554f411d7c99723d34d4e1cbf">llvm::AliasAnalysis::doesNotAccessMemory</a></div><div class="ttdeci">bool doesNotAccessMemory(ImmutableCallSite CS)</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00295">AliasAnalysis.h:295</a></div></div>
<div class="ttc" id="classllvm_1_1AliasAnalysis_html_af02eef65834a820ff7a4f05a831d39ea"><div class="ttname"><a href="classllvm_1_1AliasAnalysis.html#af02eef65834a820ff7a4f05a831d39ea">llvm::AliasAnalysis::getLocationForDest</a></div><div class="ttdeci">static Location getLocationForDest(const MemIntrinsic *MI)</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8cpp_source.html#l00273">AliasAnalysis.cpp:273</a></div></div>
<div class="ttc" id="classllvm_1_1FunctionPass_html"><div class="ttname"><a href="classllvm_1_1FunctionPass.html">llvm::FunctionPass</a></div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00293">Pass.h:293</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00088">User.h:88</a></div></div>
<div class="ttc" id="namespacellvm_html_a5eeaf08e96168c2cac8960f87f0ef360"><div class="ttname"><a href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">llvm::pred_end</a></div><div class="ttdeci">Interval::pred_iterator pred_end(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00120">Interval.h:120</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a8bf193a781a92cae52d7f9216d0824f8"><div class="ttname"><a href="classllvm_1_1Function.html#a8bf193a781a92cae52d7f9216d0824f8">llvm::Function::arg_begin</a></div><div class="ttdeci">arg_iterator arg_begin()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00410">Function.h:410</a></div></div>
<div class="ttc" id="structllvm_1_1AliasAnalysis_1_1Location_html"><div class="ttname"><a href="structllvm_1_1AliasAnalysis_1_1Location.html">llvm::AliasAnalysis::Location</a></div><div class="ttdoc">Location - A description of a memory location. </div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00106">AliasAnalysis.h:106</a></div></div>
<div class="ttc" id="PassSupport_8h_html_af0564bcdde2dd4400c670ca278c6035f"><div class="ttname"><a href="PassSupport_8h.html#af0564bcdde2dd4400c670ca278c6035f">INITIALIZE_AG_DEPENDENCY</a></div><div class="ttdeci">#define INITIALIZE_AG_DEPENDENCY(depName)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00169">PassSupport.h:169</a></div></div>
<div class="ttc" id="classllvm_1_1VAArgInst_html"><div class="ttname"><a href="classllvm_1_1VAArgInst.html">llvm::VAArgInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01506">Instructions.h:1506</a></div></div>
<div class="ttc" id="namespacellvm_html_a0b8531ebccf07d33408272bd51999962"><div class="ttname"><a href="namespacellvm.html#a0b8531ebccf07d33408272bd51999962">llvm::PointerMayBeCaptured</a></div><div class="ttdeci">bool PointerMayBeCaptured(const Value *V, bool ReturnCaptures, bool StoreCaptures)</div><div class="ttdef"><b>Definition:</b> <a href="CaptureTracking_8cpp_source.html#l00061">CaptureTracking.cpp:61</a></div></div>
<div class="ttc" id="classT_html"><div class="ttname"><a href="classT.html">T</a></div></div>
<div class="ttc" id="README-SSE_8txt_html_ae7fc2fb0e2d536219c1193f1a178e7db"><div class="ttname"><a href="README-SSE_8txt.html#ae7fc2fb0e2d536219c1193f1a178e7db">P2</a></div><div class="ttdeci">This might compile to this xmm1 xorps xmm0 movss xmm0 ret Now consider if the code caused xmm1 to get spilled This might produce this xmm1 movaps xmm0 movaps xmm1 movss xmm0 ret since the reload is only used by these we could fold it into the producing something like xmm1 movaps xmm0 ret saving two instructions The basic idea is that a reload from a spill if only one byte chunk is bring in zeros the one element instead of elements This can be used to simplify a variety of shuffle where the elements are fixed zeros This code generates ugly probably due to costs being off or&lt; 4 x float &gt; * P2</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00308">README-SSE.txt:308</a></div></div>
<div class="ttc" id="classllvm_1_1MemDepResult_html"><div class="ttname"><a href="classllvm_1_1MemDepResult.html">llvm::MemDepResult</a></div><div class="ttdef"><b>Definition:</b> <a href="MemoryDependenceAnalysis_8h_source.html#l00040">MemoryDependenceAnalysis.h:40</a></div></div>
<div class="ttc" id="classllvm_1_1AliasAnalysis_html_a06b4956d73c0a0f5b4901924bf2a98d7"><div class="ttname"><a href="classllvm_1_1AliasAnalysis.html#a06b4956d73c0a0f5b4901924bf2a98d7">llvm::AliasAnalysis::isMustAlias</a></div><div class="ttdeci">bool isMustAlias(const Location &amp;LocA, const Location &amp;LocB)</div><div class="ttdoc">isMustAlias - A convenience wrapper. </div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00203">AliasAnalysis.h:203</a></div></div>
<div class="ttc" id="classllvm_1_1SmallSetVector_html"><div class="ttname"><a href="classllvm_1_1SmallSetVector.html">llvm::SmallSetVector</a></div><div class="ttdoc">A SetVector that performs no allocations if smaller than a certain size. </div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00218">SetVector.h:218</a></div></div>
<div class="ttc" id="classllvm_1_1MemIntrinsic_html"><div class="ttname"><a href="classllvm_1_1MemIntrinsic.html">llvm::MemIntrinsic</a></div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00118">IntrinsicInst.h:118</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6faaf7f323cc371044c729cb295eaea743b"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6faaf7f323cc371044c729cb295eaea743b">llvm::LibFunc::strncat</a></div><div class="ttdoc">char *strncat(char *s1, const char *s2, size_t n); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00553">TargetLibraryInfo.h:553</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0b4e7bee9b8575cc7db73329f1a561bd"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">llvm::BasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00195">BasicBlock.h:195</a></div></div>
<div class="ttc" id="namespacellvm_html_a157f9c76f79fd232243993c2a4afedc6"><div class="ttname"><a href="namespacellvm.html#a157f9c76f79fd232243993c2a4afedc6">llvm::createDeadStoreEliminationPass</a></div><div class="ttdeci">FunctionPass * createDeadStoreEliminationPass()</div><div class="ttdef"><b>Definition:</b> <a href="DeadStoreElimination_8cpp_source.html#l00098">DeadStoreElimination.cpp:98</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00880">SmallVector.h:880</a></div></div>
<div class="ttc" id="DeadStoreElimination_8cpp_html_a1a8ebbdcf6eabe21a1834f849064d37d"><div class="ttname"><a href="DeadStoreElimination_8cpp.html#a1a8ebbdcf6eabe21a1834f849064d37d">STATISTIC</a></div><div class="ttdeci">STATISTIC(NumFastStores,&quot;Number of stores deleted&quot;)</div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00111">Value.h:111</a></div></div>
<div class="ttc" id="classllvm_1_1TargetLibraryInfo_html"><div class="ttname"><a href="classllvm_1_1TargetLibraryInfo.html">llvm::TargetLibraryInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00657">TargetLibraryInfo.h:657</a></div></div>
<div class="ttc" id="PassSupport_8h_html_aaa970fc931c1c63037a8182e028d04b1"><div class="ttname"><a href="PassSupport_8h.html#aaa970fc931c1c63037a8182e028d04b1">INITIALIZE_PASS_BEGIN</a></div><div class="ttdeci">#define INITIALIZE_PASS_BEGIN(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00164">PassSupport.h:164</a></div></div>
<div class="ttc" id="classllvm_1_1MemIntrinsic_html_abad10f74789466601c7a025540c1c072"><div class="ttname"><a href="classllvm_1_1MemIntrinsic.html#abad10f74789466601c7a025540c1c072">llvm::MemIntrinsic::getLength</a></div><div class="ttdeci">Value * getLength() const </div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00122">IntrinsicInst.h:122</a></div></div>
<div class="ttc" id="classllvm_1_1MemDepResult_html_a2a64d8f5153ebc0e8c08d0702c2c4aab"><div class="ttname"><a href="classllvm_1_1MemDepResult.html#a2a64d8f5153ebc0e8c08d0702c2c4aab">llvm::MemDepResult::isNonLocal</a></div><div class="ttdeci">bool isNonLocal() const </div><div class="ttdef"><b>Definition:</b> <a href="MemoryDependenceAnalysis_8h_source.html#l00137">MemoryDependenceAnalysis.h:137</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a38ea12c04523d63adda732b9c5d6da0a"><div class="ttname"><a href="classllvm_1_1Value.html#a38ea12c04523d63adda732b9c5d6da0a">llvm::Value::stripPointerCasts</a></div><div class="ttdeci">Value * stripPointerCasts()</div><div class="ttdoc">Strips off any unneeded pointer casts, all-zero GEPs and aliases from the specified value...</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00385">Value.cpp:385</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a9105541412dab869e18b3cceebfff07d"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool isSigned=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00492">Constants.cpp:492</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_af11a6ebf7ab3c388234cb6d5378439a3"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#af11a6ebf7ab3c388234cb6d5378439a3">llvm::AnalysisUsage::setPreservesCFG</a></div><div class="ttdeci">void setPreservesCFG()</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8cpp_source.html#l00249">Pass.cpp:249</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a5fa9b8e1842b354f64c1ba6be0a4a17f"><div class="ttname"><a href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">llvm::User::setOperand</a></div><div class="ttdeci">void setOperand(unsigned i, Value *Val)</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00092">User.h:92</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00101">Debug.cpp:101</a></div></div>
<div class="ttc" id="DeadStoreElimination_8cpp_html_aa38f1b2ac4e3afadc60a9b67888154fa"><div class="ttname"><a href="DeadStoreElimination_8cpp.html#aa38f1b2ac4e3afadc60a9b67888154fa">FindUnconditionalPreds</a></div><div class="ttdeci">static void FindUnconditionalPreds(SmallVectorImpl&lt; BasicBlock * &gt; &amp;Blocks, BasicBlock *BB, DominatorTree *DT)</div><div class="ttdef"><b>Definition:</b> <a href="DeadStoreElimination_8cpp_source.html#l00641">DeadStoreElimination.cpp:641</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html_a150b33ecedbc8c7803c2db8040fbe3f8"><div class="ttname"><a href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">llvm::CallInst::getArgOperand</a></div><div class="ttdeci">Value * getArgOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01245">Instructions.h:1245</a></div></div>
<div class="ttc" id="GlobalVariable_8h_html"><div class="ttname"><a href="GlobalVariable_8h.html">GlobalVariable.h</a></div></div>
<div class="ttc" id="CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2README_8txt_source.html#l00036">CodeGen/README.txt:36</a></div></div>
<div class="ttc" id="Pass_8h_html"><div class="ttname"><a href="Pass_8h.html">Pass.h</a></div></div>
<div class="ttc" id="namespacellvm_html_a19358222bb2c2199975e3a4ec4b40eed"><div class="ttname"><a href="namespacellvm.html#a19358222bb2c2199975e3a4ec4b40eed">llvm::isPowerOf2_64</a></div><div class="ttdeci">bool isPowerOf2_64(uint64_t Value)</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00360">MathExtras.h:360</a></div></div>
<div class="ttc" id="classllvm_1_1AliasAnalysis_html_aec9dbab832cd8052f85cd2a9dbb3816e"><div class="ttname"><a href="classllvm_1_1AliasAnalysis.html#aec9dbab832cd8052f85cd2a9dbb3816e">llvm::AliasAnalysis::getLocation</a></div><div class="ttdeci">Location getLocation(const LoadInst *LI)</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8cpp_source.html#l00227">AliasAnalysis.cpp:227</a></div></div>
<div class="ttc" id="Function_8h_html"><div class="ttname"><a href="Function_8h.html">Function.h</a></div></div>
<div class="ttc" id="classllvm_1_1MemIntrinsic_html_a898aa65c5d00f6073df71f3dd709a84d"><div class="ttname"><a href="classllvm_1_1MemIntrinsic.html#a898aa65c5d00f6073df71f3dd709a84d">llvm::MemIntrinsic::setLength</a></div><div class="ttdeci">void setLength(Value *L)</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00155">IntrinsicInst.h:155</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a8a045d250952c0867382a9840ee18fdf"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">llvm::SmallVectorTemplateCommon&lt; T &gt;::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00112">SmallVector.h:112</a></div></div>
<div class="ttc" id="DeadStoreElimination_8cpp_html_ae0fd34cbfd6b1219de8ceee42e6dd436"><div class="ttname"><a href="DeadStoreElimination_8cpp.html#ae0fd34cbfd6b1219de8ceee42e6dd436">OverwriteResult</a></div><div class="ttdeci">OverwriteResult</div><div class="ttdef"><b>Definition:</b> <a href="DeadStoreElimination_8cpp_source.html#l00327">DeadStoreElimination.cpp:327</a></div></div>
<div class="ttc" id="AliasAnalysis_8h_html"><div class="ttname"><a href="AliasAnalysis_8h.html">AliasAnalysis.h</a></div></div>
<div class="ttc" id="classllvm_1_1MemTransferInst_html"><div class="ttname"><a href="classllvm_1_1MemTransferInst.html">llvm::MemTransferInst</a></div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00213">IntrinsicInst.h:213</a></div></div>
<div class="ttc" id="Transforms_2Scalar_8h_html"><div class="ttname"><a href="Transforms_2Scalar_8h.html">Scalar.h</a></div></div>
<div class="ttc" id="classllvm_1_1MemDepResult_html_a8452eb6508c00e2b6d56926bebc79f57"><div class="ttname"><a href="classllvm_1_1MemDepResult.html#a8452eb6508c00e2b6d56926bebc79f57">llvm::MemDepResult::getInst</a></div><div class="ttdeci">Instruction * getInst() const </div><div class="ttdef"><b>Definition:</b> <a href="MemoryDependenceAnalysis_8h_source.html#l00158">MemoryDependenceAnalysis.h:158</a></div></div>
<div class="ttc" id="namespacellvm_1_1RegState_html_a079b254e749130fbe5d740f314ca92daa2fee1a7db4e84247a193a9af1f907013"><div class="ttname"><a href="namespacellvm_1_1RegState.html#a079b254e749130fbe5d740f314ca92daa2fee1a7db4e84247a193a9af1f907013">llvm::RegState::Dead</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00034">MachineInstrBuilder.h:34</a></div></div>
<div class="ttc" id="classllvm_1_1SetVector_html_a0fd2953d62c1b1cabb87e420be5177c4"><div class="ttname"><a href="classllvm_1_1SetVector.html#a0fd2953d62c1b1cabb87e420be5177c4">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallSet&lt; T, N &gt; &gt;::count</a></div><div class="ttdeci">size_type count(const key_type &amp;key) const</div><div class="ttdoc">Count the number of elements of a given key in the SetVector. </div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00156">SetVector.h:156</a></div></div>
<div class="ttc" id="classllvm_1_1TargetLibraryInfo_html_a0fe1c6579053c75b2089f8c2e60c65e0"><div class="ttname"><a href="classllvm_1_1TargetLibraryInfo.html#a0fe1c6579053c75b2089f8c2e60c65e0">llvm::TargetLibraryInfo::getName</a></div><div class="ttdeci">StringRef getName(LibFunc::Func F) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00722">TargetLibraryInfo.h:722</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a5cb76a65b6524dba1493dd2b9dc3abbe"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">TerminatorInst * getTerminator()</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00120">BasicBlock.cpp:120</a></div></div>
<div class="ttc" id="structllvm_1_1AliasAnalysis_1_1Location_html_a24197872686f605dcfd25b6e5d3cc7fa"><div class="ttname"><a href="structllvm_1_1AliasAnalysis_1_1Location.html#a24197872686f605dcfd25b6e5d3cc7fa">llvm::AliasAnalysis::Location::Ptr</a></div><div class="ttdeci">const Value * Ptr</div><div class="ttdoc">Ptr - The address of the start of the location. </div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00108">AliasAnalysis.h:108</a></div></div>
<div class="ttc" id="namespacellvm_html_a0e0017717a140769348ff4379f97c28d"><div class="ttname"><a href="namespacellvm.html#a0e0017717a140769348ff4379f97c28d">llvm::isAllocLikeFn</a></div><div class="ttdeci">bool isAllocLikeFn(const Value *V, const TargetLibraryInfo *TLI, bool LookThroughBitCast=false)</div><div class="ttdoc">Tests if a value is a call or invoke to a library function that allocates memory (either malloc...</div><div class="ttdef"><b>Definition:</b> <a href="MemoryBuiltins_8cpp_source.html#l00181">MemoryBuiltins.cpp:181</a></div></div>
<div class="ttc" id="MemoryBuiltins_8h_html"><div class="ttname"><a href="MemoryBuiltins_8h.html">MemoryBuiltins.h</a></div></div>
<div class="ttc" id="structllvm_1_1AliasAnalysis_1_1Location_html_aba42e84910b42f9684564b8512a30b2e"><div class="ttname"><a href="structllvm_1_1AliasAnalysis_1_1Location.html#aba42e84910b42f9684564b8512a30b2e">llvm::AliasAnalysis::Location::Size</a></div><div class="ttdeci">uint64_t Size</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00114">AliasAnalysis.h:114</a></div></div>
<div class="ttc" id="ValueTracking_8h_html"><div class="ttname"><a href="ValueTracking_8h.html">ValueTracking.h</a></div></div>
<div class="ttc" id="classllvm_1_1AliasAnalysis_html_a8d894818f6befa30ad9bb75085ed0a20"><div class="ttname"><a href="classllvm_1_1AliasAnalysis.html#a8d894818f6befa30ad9bb75085ed0a20">llvm::AliasAnalysis::UnknownSize</a></div><div class="ttdeci">static uint64_t const UnknownSize</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00084">AliasAnalysis.h:84</a></div></div>
<div class="ttc" id="SetVector_8h_html"><div class="ttname"><a href="SetVector_8h.html">SetVector.h</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ac38c53f76ef532f91f1666c8a87370e9"><div class="ttname"><a href="classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">llvm::Value::use_empty</a></div><div class="ttdeci">bool use_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00149">Value.h:149</a></div></div>
<div class="ttc" id="Local_8h_html"><div class="ttname"><a href="Local_8h.html">Local.h</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00066">Value.h:66</a></div></div>
<div class="ttc" id="classllvm_1_1AliasAnalysis_html_a83d29c51155787c607268c2659559460"><div class="ttname"><a href="classllvm_1_1AliasAnalysis.html#a83d29c51155787c607268c2659559460">llvm::AliasAnalysis::ModRefResult</a></div><div class="ttdeci">ModRefResult</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00231">AliasAnalysis.h:231</a></div></div>
<div class="ttc" id="classllvm_1_1SetVector_html_a5779c9e110b51323b5f8a8216499634d"><div class="ttname"><a href="classllvm_1_1SetVector.html#a5779c9e110b51323b5f8a8216499634d">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallSet&lt; T, N &gt; &gt;::remove_if</a></div><div class="ttdeci">bool remove_if(UnaryPredicate P)</div><div class="ttdoc">Remove items from the set vector based on a predicate function. </div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00143">SetVector.h:143</a></div></div>
<div class="ttc" id="namespacellvm_1_1A64CC_html_af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442"><div class="ttname"><a href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">llvm::A64CC::MI</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00035">AArch64BaseInfo.h:35</a></div></div>
<div class="ttc" id="DeadStoreElimination_8cpp_html_a586c20ef578b9c947aaf22cf220f98da"><div class="ttname"><a href="DeadStoreElimination_8cpp.html#a586c20ef578b9c947aaf22cf220f98da">isRemovable</a></div><div class="ttdeci">static bool isRemovable(Instruction *I)</div><div class="ttdef"><b>Definition:</b> <a href="DeadStoreElimination_8cpp_source.html#l00245">DeadStoreElimination.cpp:245</a></div></div>
<div class="ttc" id="Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00097">Debug.h:97</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6fa9359403a52c2d2696ad24d7c0045ee81"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa9359403a52c2d2696ad24d7c0045ee81">llvm::LibFunc::strcpy</a></div><div class="ttdoc">char *strcpy(char *s1, const char *s2); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00543">TargetLibraryInfo.h:543</a></div></div>
<div class="ttc" id="classllvm_1_1AliasAnalysis_html_a2f0a6f0f6e25c24ba9b434ba5b5a9906"><div class="ttname"><a href="classllvm_1_1AliasAnalysis.html#a2f0a6f0f6e25c24ba9b434ba5b5a9906">llvm::AliasAnalysis::getTargetLibraryInfo</a></div><div class="ttdeci">const TargetLibraryInfo * getTargetLibraryInfo() const </div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00094">AliasAnalysis.h:94</a></div></div>
<div class="ttc" id="DeadStoreElimination_8cpp_html_a06efb1a4f95406645eb811d1fe240812"><div class="ttname"><a href="DeadStoreElimination_8cpp.html#a06efb1a4f95406645eb811d1fe240812">getLocForWrite</a></div><div class="ttdeci">static AliasAnalysis::Location getLocForWrite(Instruction *Inst, AliasAnalysis &amp;AA)</div><div class="ttdef"><b>Definition:</b> <a href="DeadStoreElimination_8cpp_source.html#l00192">DeadStoreElimination.cpp:192</a></div></div>
<div class="ttc" id="namespacellvm_html_ade9baf821f59f9a2977a1deaccb18023"><div class="ttname"><a href="namespacellvm.html#ade9baf821f59f9a2977a1deaccb18023">llvm::getObjectSize</a></div><div class="ttdeci">bool getObjectSize(const Value *Ptr, uint64_t &amp;Size, const DataLayout *DL, const TargetLibraryInfo *TLI, bool RoundToAlign=false)</div><div class="ttdoc">Compute the size of the object pointed by Ptr. Returns true and the object size in Size if successful...</div><div class="ttdef"><b>Definition:</b> <a href="MemoryBuiltins_8cpp_source.html#l00365">MemoryBuiltins.cpp:365</a></div></div>
<div class="ttc" id="namespacellvm_1_1SPII_html_a11e9b8fca4a074643a6a21f444e51406a36b3dd3b84fde3f8494a9b18af131856"><div class="ttname"><a href="namespacellvm_1_1SPII.html#a11e9b8fca4a074643a6a21f444e51406a36b3dd3b84fde3f8494a9b18af131856">llvm::SPII::Store</a></div><div class="ttdef"><b>Definition:</b> <a href="SparcInstrInfo_8h_source.html#l00032">SparcInstrInfo.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1CallSite_html"><div class="ttname"><a href="classllvm_1_1CallSite.html">llvm::CallSite</a></div><div class="ttdef"><b>Definition:</b> <a href="CallSite_8h_source.html#l00295">CallSite.h:295</a></div></div>
<div class="ttc" id="X86ISelDAGToDAG_8cpp_html_afc4e10b4f2ab2d548ab80b30f3b712e9a96727447c0ad447987df1c6415aef074"><div class="ttname"><a href="X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9a96727447c0ad447987df1c6415aef074">OR</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelDAGToDAG_8cpp_source.html#l01587">X86ISelDAGToDAG.cpp:1587</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00052">Instruction.h:52</a></div></div>
<div class="ttc" id="classllvm_1_1MemoryDependenceAnalysis_html_ad400b0aba217fdd5a826f50204b5d7c0"><div class="ttname"><a href="classllvm_1_1MemoryDependenceAnalysis.html#ad400b0aba217fdd5a826f50204b5d7c0">llvm::MemoryDependenceAnalysis::removeInstruction</a></div><div class="ttdeci">void removeInstruction(Instruction *InstToRemove)</div><div class="ttdef"><b>Definition:</b> <a href="MemoryDependenceAnalysis_8cpp_source.html#l01316">MemoryDependenceAnalysis.cpp:1316</a></div></div>
<div class="ttc" id="classllvm_1_1IntrinsicInst_html"><div class="ttname"><a href="classllvm_1_1IntrinsicInst.html">llvm::IntrinsicInst</a></div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00036">IntrinsicInst.h:36</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6fa3880572b66ab5faef56c79335acdcc0e"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa3880572b66ab5faef56c79335acdcc0e">llvm::LibFunc::strncpy</a></div><div class="ttdoc">char *strncpy(char *s1, const char *s2, size_t n); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00557">TargetLibraryInfo.h:557</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 22:58:28 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
