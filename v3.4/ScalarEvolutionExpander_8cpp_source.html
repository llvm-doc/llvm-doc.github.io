<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: ScalarEvolutionExpander.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('ScalarEvolutionExpander_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">ScalarEvolutionExpander.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="ScalarEvolutionExpander_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- ScalarEvolutionExpander.cpp - Scalar Evolution Analysis --*- C++ -*-===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// This file contains the implementation of the scalar evolution expander,</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// which is used to generate the code corresponding to a given scalar evolution</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// expression.</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ScalarEvolutionExpander_8h.html">llvm/Analysis/ScalarEvolutionExpander.h</a>&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallSet_8h.html">llvm/ADT/SmallSet.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="STLExtras_8h.html">llvm/ADT/STLExtras.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopInfo_8h.html">llvm/Analysis/LoopInfo.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetTransformInfo_8h.html">llvm/Analysis/TargetTransformInfo.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DataLayout_8h.html">llvm/IR/DataLayout.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IntrinsicInst_8h.html">llvm/IR/IntrinsicInst.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LLVMContext_8h.html">llvm/IR/LLVMContext.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">/// ReuseOrCreateCast - Arrange for there to be a cast of V to Ty at IP,</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">/// reusing an existing cast if a suitable one exists, moving an existing</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">/// cast if a suitable one exists but isn&#39;t in the right place, or</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">/// creating a new one.</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Value.html">Value</a> *SCEVExpander::ReuseOrCreateCast(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty,</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;                                       <a class="code" href="classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">Instruction::CastOps</a> Op,</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;                                       <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> IP) {</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <span class="comment">// This function must be called with the builder having a valid insertion</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  <span class="comment">// point. It doesn&#39;t need to be the actual IP where the uses of the returned</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="comment">// cast will be added, but it must dominate such IP.</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <span class="comment">// We use this precondition to produce a cast that will dominate all its</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <span class="comment">// uses. In particular, this is crucial for the case where the builder&#39;s</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <span class="comment">// insertion point *is* the point where we were asked to put the cast.</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <span class="comment">// Since we don&#39;t know the builder&#39;s insertion point is actually</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <span class="comment">// where the uses will be added (only that it dominates it), we are</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <span class="comment">// not allowed to move it.</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> BIP = Builder.<a class="code" href="classllvm_1_1IRBuilderBase.html#ae2bfc7d05689f33b3f9cf2f2b3eca7dd">GetInsertPoint</a>();</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1AArch64ISD.html#a246d89cb58f606179b1435937830bbdca84e96c468affe3b1fd3076b4fc5d063e">Ret</a> = NULL;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="comment">// Check to see if there is already a cast!</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::use_iterator</a> UI = V-&gt;<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>(), E = V-&gt;<a class="code" href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">use_end</a>();</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;       UI != E; ++UI) {</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <a class="code" href="classllvm_1_1User.html">User</a> *U = *UI;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="keywordflow">if</span> (U-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() == Ty)</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CastInst.html">CastInst</a> *CI = dyn_cast&lt;CastInst&gt;(U))</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        <span class="keywordflow">if</span> (CI-&gt;getOpcode() == Op) {</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;          <span class="comment">// If the cast isn&#39;t where we want it, create a new cast at IP.</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;          <span class="comment">// Likewise, do not reuse a cast at BIP because it must dominate</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;          <span class="comment">// instructions that might be inserted before BIP.</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a>(CI) != IP || BIP == IP) {</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;            <span class="comment">// Create a new cast, and leave the old cast in place in case</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;            <span class="comment">// it is being used as an insert point. Clear its operand</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;            <span class="comment">// so that it doesn&#39;t hold anything live.</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;            Ret = <a class="code" href="classllvm_1_1CastInst.html#a0f7dea9550778374905e12da6d6ba8a8">CastInst::Create</a>(Op, V, Ty, <span class="stringliteral">&quot;&quot;</span>, IP);</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;            Ret-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(CI);</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;            CI-&gt;replaceAllUsesWith(Ret);</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;            CI-&gt;setOperand(0, <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(V-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;          }</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;          Ret = CI;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        }</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  }</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="comment">// Create a new cast.</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="keywordflow">if</span> (!Ret)</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    Ret = <a class="code" href="classllvm_1_1CastInst.html#a0f7dea9550778374905e12da6d6ba8a8">CastInst::Create</a>(Op, V, Ty, V-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>(), IP);</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="comment">// We assert at the end of the function since IP might point to an</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="comment">// instruction with different dominance properties than a cast</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="comment">// (an invoke for example) and not dominate BIP (but the cast does).</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  assert(SE.DT-&gt;<a class="code" href="classllvm_1_1DominatorTree.html#a6fe9272dc67fe2ff4cafc33b895c4a6c">dominates</a>(Ret, BIP));</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  rememberInstruction(Ret);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1AArch64ISD.html#a246d89cb58f606179b1435937830bbdca84e96c468affe3b1fd3076b4fc5d063e">Ret</a>;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;}</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">/// InsertNoopCastOfTo - Insert a cast of V to the specified type,</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">/// which must be possible with a noop cast, doing what we can to share</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">/// the casts.</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Value.html">Value</a> *SCEVExpander::InsertNoopCastOfTo(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty) {</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">Instruction::CastOps</a> Op = <a class="code" href="classllvm_1_1CastInst.html#a06dc25da1f16f389f5244304e8d33127">CastInst::getCastOpcode</a>(V, <span class="keyword">false</span>, Ty, <span class="keyword">false</span>);</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  assert((Op == Instruction::BitCast ||</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;          Op == Instruction::PtrToInt ||</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;          Op == Instruction::IntToPtr) &amp;&amp;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;         <span class="stringliteral">&quot;InsertNoopCastOfTo cannot perform non-noop casts!&quot;</span>);</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  assert(SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a983dbdce6af7840357ed33a20c8f30bb">getTypeSizeInBits</a>(V-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()) == SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a983dbdce6af7840357ed33a20c8f30bb">getTypeSizeInBits</a>(Ty) &amp;&amp;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;         <span class="stringliteral">&quot;InsertNoopCastOfTo cannot change sizes!&quot;</span>);</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="comment">// Short-circuit unnecessary bitcasts.</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="keywordflow">if</span> (Op == Instruction::BitCast) {</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordflow">if</span> (V-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() == Ty)</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;      <span class="keywordflow">return</span> V;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CastInst.html">CastInst</a> *CI = dyn_cast&lt;CastInst&gt;(V)) {</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;      <span class="keywordflow">if</span> (CI-&gt;getOperand(0)-&gt;getType() == Ty)</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <span class="keywordflow">return</span> CI-&gt;getOperand(0);</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    }</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  }</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="comment">// Short-circuit unnecessary inttoptr&lt;-&gt;ptrtoint casts.</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="keywordflow">if</span> ((Op == Instruction::PtrToInt || Op == Instruction::IntToPtr) &amp;&amp;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a983dbdce6af7840357ed33a20c8f30bb">getTypeSizeInBits</a>(Ty) == SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a983dbdce6af7840357ed33a20c8f30bb">getTypeSizeInBits</a>(V-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())) {</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CastInst.html">CastInst</a> *CI = dyn_cast&lt;CastInst&gt;(V))</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      <span class="keywordflow">if</span> ((CI-&gt;getOpcode() == Instruction::PtrToInt ||</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;           CI-&gt;getOpcode() == Instruction::IntToPtr) &amp;&amp;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;          SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a983dbdce6af7840357ed33a20c8f30bb">getTypeSizeInBits</a>(CI-&gt;getType()) ==</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;          SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a983dbdce6af7840357ed33a20c8f30bb">getTypeSizeInBits</a>(CI-&gt;getOperand(0)-&gt;getType()))</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="keywordflow">return</span> CI-&gt;getOperand(0);</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE = dyn_cast&lt;ConstantExpr&gt;(V))</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;      <span class="keywordflow">if</span> ((CE-&gt;getOpcode() == Instruction::PtrToInt ||</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;           CE-&gt;getOpcode() == Instruction::IntToPtr) &amp;&amp;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;          SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a983dbdce6af7840357ed33a20c8f30bb">getTypeSizeInBits</a>(CE-&gt;getType()) ==</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;          SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a983dbdce6af7840357ed33a20c8f30bb">getTypeSizeInBits</a>(CE-&gt;getOperand(0)-&gt;getType()))</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="keywordflow">return</span> CE-&gt;getOperand(0);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  }</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="comment">// Fold a cast of a constant.</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;Constant&gt;(V))</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantExpr.html#a1e1ce75d651c76b6869b4218e34618c8">ConstantExpr::getCast</a>(Op, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, Ty);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="comment">// Cast the argument at the beginning of the entry block, after</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="comment">// any bitcasts of other arguments.</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Argument.html">Argument</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a> = dyn_cast&lt;Argument&gt;(V)) {</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> IP = <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>-&gt;getParent()-&gt;getEntryBlock().begin();</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">while</span> ((isa&lt;BitCastInst&gt;(IP) &amp;&amp;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            isa&lt;Argument&gt;(cast&lt;BitCastInst&gt;(IP)-&gt;getOperand(0)) &amp;&amp;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            cast&lt;BitCastInst&gt;(IP)-&gt;getOperand(0) != <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>) ||</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;           isa&lt;DbgInfoIntrinsic&gt;(IP) ||</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;           isa&lt;LandingPadInst&gt;(IP))</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      ++IP;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordflow">return</span> ReuseOrCreateCast(<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>, Ty, Op, IP);</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  }</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="comment">// Cast the instruction immediately after the instruction.</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = cast&lt;Instruction&gt;(V);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> IP = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>; ++IP;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InvokeInst.html">InvokeInst</a> *II = dyn_cast&lt;InvokeInst&gt;(I))</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    IP = II-&gt;getNormalDest()-&gt;begin();</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="keywordflow">while</span> (isa&lt;PHINode&gt;(IP) || isa&lt;LandingPadInst&gt;(IP))</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    ++IP;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="keywordflow">return</span> ReuseOrCreateCast(I, Ty, Op, IP);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;}</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">/// InsertBinop - Insert the specified binary operator, doing a small amount</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">/// of work to avoid inserting an obviously redundant operation.</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Value.html">Value</a> *SCEVExpander::InsertBinop(<a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> Opcode,</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                                 <a class="code" href="classllvm_1_1Value.html">Value</a> *LHS, <a class="code" href="classllvm_1_1Value.html">Value</a> *RHS) {</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="comment">// Fold a binop with constant operands.</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *CLHS = dyn_cast&lt;Constant&gt;(LHS))</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *CRHS = dyn_cast&lt;Constant&gt;(RHS))</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantExpr.html#afd44535c4ae204571d5721fa4a7042f2">ConstantExpr::get</a>(Opcode, CLHS, CRHS);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="comment">// Do a quick scan to see if we have this binop nearby.  If so, reuse it.</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="keywordtype">unsigned</span> ScanLimit = 6;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> BlockBegin = Builder.<a class="code" href="classllvm_1_1IRBuilderBase.html#a05750ee4a9742f3ea2755efb4b747efe">GetInsertBlock</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <span class="comment">// Scanning starts from the last instruction before the insertion point.</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> IP = Builder.<a class="code" href="classllvm_1_1IRBuilderBase.html#ae2bfc7d05689f33b3f9cf2f2b3eca7dd">GetInsertPoint</a>();</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="keywordflow">if</span> (IP != BlockBegin) {</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    --IP;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keywordflow">for</span> (; ScanLimit; --IP, --ScanLimit) {</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      <span class="comment">// Don&#39;t count dbg.value against the ScanLimit, to avoid perturbing the</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      <span class="comment">// generated code.</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      <span class="keywordflow">if</span> (isa&lt;DbgInfoIntrinsic&gt;(IP))</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        ScanLimit++;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      <span class="keywordflow">if</span> (IP-&gt;getOpcode() == (unsigned)Opcode &amp;&amp; IP-&gt;getOperand(0) == LHS &amp;&amp;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;          IP-&gt;getOperand(1) == RHS)</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="keywordflow">return</span> IP;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      <span class="keywordflow">if</span> (IP == BlockBegin) <span class="keywordflow">break</span>;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    }</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  }</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="comment">// Save the original insertion point so we can restore it when we&#39;re done.</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> Loc = Builder.<a class="code" href="classllvm_1_1IRBuilderBase.html#ae2bfc7d05689f33b3f9cf2f2b3eca7dd">GetInsertPoint</a>()-&gt;getDebugLoc();</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  BuilderType::InsertPointGuard Guard(Builder);</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="comment">// Move the insertion point out of as many loops as we can.</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="keywordflow">while</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L = SE.LI-&gt;<a class="code" href="classllvm_1_1LoopInfo.html#a4abca289c73cd09487e05d11d9f7d877">getLoopFor</a>(Builder.<a class="code" href="classllvm_1_1IRBuilderBase.html#a05750ee4a9742f3ea2755efb4b747efe">GetInsertBlock</a>())) {</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordflow">if</span> (!L-&gt;isLoopInvariant(LHS) || !L-&gt;isLoopInvariant(RHS)) <span class="keywordflow">break</span>;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Preheader = L-&gt;getLoopPreheader();</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">if</span> (!Preheader) <span class="keywordflow">break</span>;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="comment">// Ok, move up a level.</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    Builder.<a class="code" href="classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(Preheader, Preheader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>());</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  }</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <span class="comment">// If we haven&#39;t found this binop, insert it.</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *BO = cast&lt;Instruction&gt;(Builder.<a class="code" href="classllvm_1_1IRBuilder.html#a2bd8d3ea479e99434bac72362a59f078">CreateBinOp</a>(Opcode, LHS, RHS));</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  BO-&gt;<a class="code" href="classllvm_1_1Instruction.html#a7bd545769621a0a9d2cfb074f86f4295">setDebugLoc</a>(Loc);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  rememberInstruction(BO);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="keywordflow">return</span> BO;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;}</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">/// FactorOutConstant - Test if S is divisible by Factor, using signed</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment">/// division. If so, update S with Factor divided out and return true.</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">/// S need not be evenly divisible if a reasonable remainder can be</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment">/// computed.</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">/// TODO: When ScalarEvolution gets a SCEVSDivExpr, this can be made</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">/// unnecessary; in its place, just signed-divide Ops[i] by the scale and</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">/// check to see if the divide was folded.</span></div><div class="line"><a name="l00208"></a><span class="lineno"><a class="line" href="ScalarEvolutionExpander_8cpp.html#a496dd62afde2db64983c40c3a1d4a75b">  208</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="ScalarEvolutionExpander_8cpp.html#a496dd62afde2db64983c40c3a1d4a75b">FactorOutConstant</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *&amp;<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>,</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                              <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *&amp;Remainder,</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                              <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *Factor,</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                              <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> &amp;SE,</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                              <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> *TD) {</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="comment">// Everything is divisible by one.</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="keywordflow">if</span> (Factor-&gt;<a class="code" href="classllvm_1_1SCEV.html#a3935a9de0ebdf3dc625cfb28e35bd009">isOne</a>())</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <span class="comment">// x/x == 1.</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <span class="keywordflow">if</span> (S == Factor) {</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    S = SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a2eb94d079d8416118f4aaed865ab05d7">getConstant</a>(S-&gt;<a class="code" href="classllvm_1_1SCEV.html#a9a16f1241255a605fc8debc1e26eaa4c">getType</a>(), 1);</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  }</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="comment">// For a Constant, check for a multiple of the given factor.</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVConstant.html">SCEVConstant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;SCEVConstant&gt;(S)) {</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="comment">// 0/x == 0.</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isZero())</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="comment">// Check for divisibility.</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVConstant.html">SCEVConstant</a> *<a class="code" href="namespaceR600__InstFlag.html#a23106439cc906be24dc8953eedd3940da8949a42ff4563a29d1e70e18338fd522">FC</a> = dyn_cast&lt;SCEVConstant&gt;(Factor)) {</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI =</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#aa89f44fd7549e81b02f2be1be894f098">getContext</a>(),</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                         <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getValue()-&gt;getValue().sdiv(</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                                                   <a class="code" href="namespaceR600__InstFlag.html#a23106439cc906be24dc8953eedd3940da8949a42ff4563a29d1e70e18338fd522">FC</a>-&gt;getValue()-&gt;getValue()));</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      <span class="comment">// If the quotient is zero and the remainder is non-zero, reject</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      <span class="comment">// the value at this scale. It will be considered for subsequent</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      <span class="comment">// smaller scales.</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      <span class="keywordflow">if</span> (!CI-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#ad4ea4748170f687710a54c919dde5625">isZero</a>()) {</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *Div = SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a2eb94d079d8416118f4aaed865ab05d7">getConstant</a>(CI);</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        S = Div;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        Remainder =</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;          SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a23541ecba66207184eaf2279a70c5b12">getAddExpr</a>(Remainder,</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                        SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a2eb94d079d8416118f4aaed865ab05d7">getConstant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getValue()-&gt;getValue().srem(</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                                                  <a class="code" href="namespaceR600__InstFlag.html#a23106439cc906be24dc8953eedd3940da8949a42ff4563a29d1e70e18338fd522">FC</a>-&gt;getValue()-&gt;getValue())));</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      }</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    }</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  }</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="comment">// In a Mul, check if there is a constant operand which is a multiple</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="comment">// of the given factor.</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVMulExpr.html">SCEVMulExpr</a> *<a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = dyn_cast&lt;SCEVMulExpr&gt;(S)) {</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">if</span> (TD) {</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      <span class="comment">// With DataLayout, the size is known. Check if there is a constant</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      <span class="comment">// operand which is a multiple of the given factor. If so, we can</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      <span class="comment">// factor it.</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVConstant.html">SCEVConstant</a> *<a class="code" href="namespaceR600__InstFlag.html#a23106439cc906be24dc8953eedd3940da8949a42ff4563a29d1e70e18338fd522">FC</a> = cast&lt;SCEVConstant&gt;(Factor);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVConstant.html">SCEVConstant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;SCEVConstant&gt;(<a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getOperand(0)))</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getValue()-&gt;getValue().srem(FC-&gt;<a class="code" href="classllvm_1_1SCEVConstant.html#a64f0133adf37f9513005465580a19a66">getValue</a>()-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>())) {</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;          <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const SCEV *, 4&gt;</a> NewMulOps(<a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;op_begin(), <a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;op_end());</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;          NewMulOps[0] =</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a2eb94d079d8416118f4aaed865ab05d7">getConstant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getValue()-&gt;getValue().sdiv(</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                                                   FC-&gt;<a class="code" href="classllvm_1_1SCEVConstant.html#a64f0133adf37f9513005465580a19a66">getValue</a>()-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>()));</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;          S = SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#ad5829d76e14852080c205f8b94d830f1">getMulExpr</a>(NewMulOps);</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        }</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      <span class="comment">// Without DataLayout, check if Factor can be factored out of any of the</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      <span class="comment">// Mul&#39;s operands. If so, we can just remove it.</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = <a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getNumOperands(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *SOp = <a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getOperand(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *Remainder = SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a2eb94d079d8416118f4aaed865ab05d7">getConstant</a>(SOp-&gt;<a class="code" href="classllvm_1_1SCEV.html#a9a16f1241255a605fc8debc1e26eaa4c">getType</a>(), 0);</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ScalarEvolutionExpander_8cpp.html#a496dd62afde2db64983c40c3a1d4a75b">FactorOutConstant</a>(SOp, Remainder, Factor, SE, TD) &amp;&amp;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            Remainder-&gt;<a class="code" href="classllvm_1_1SCEV.html#a3f76d2fd4788225548dc36ef9e417030">isZero</a>()) {</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;          <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const SCEV *, 4&gt;</a> NewMulOps(<a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;op_begin(), <a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;op_end());</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;          NewMulOps[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = SOp;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;          S = SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#ad5829d76e14852080c205f8b94d830f1">getMulExpr</a>(NewMulOps);</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        }</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      }</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    }</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  }</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <span class="comment">// In an AddRec, check if both start and step are divisible.</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVAddRecExpr.html">SCEVAddRecExpr</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a> = dyn_cast&lt;SCEVAddRecExpr&gt;(S)) {</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *Step = <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>-&gt;getStepRecurrence(SE);</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *StepRem = SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a2eb94d079d8416118f4aaed865ab05d7">getConstant</a>(Step-&gt;<a class="code" href="classllvm_1_1SCEV.html#a9a16f1241255a605fc8debc1e26eaa4c">getType</a>(), 0);</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="ScalarEvolutionExpander_8cpp.html#a496dd62afde2db64983c40c3a1d4a75b">FactorOutConstant</a>(Step, StepRem, Factor, SE, TD))</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordflow">if</span> (!StepRem-&gt;<a class="code" href="classllvm_1_1SCEV.html#a3f76d2fd4788225548dc36ef9e417030">isZero</a>())</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *Start = <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>-&gt;getStart();</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="ScalarEvolutionExpander_8cpp.html#a496dd62afde2db64983c40c3a1d4a75b">FactorOutConstant</a>(Start, Remainder, Factor, SE, TD))</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    S = SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a659b27f6737fcb7eaf333b0279da1154">getAddRecExpr</a>(Start, Step, <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>-&gt;getLoop(),</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                         <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>-&gt;getNoWrapFlags(<a class="code" href="classllvm_1_1SCEV.html#af43000d4dcb7d6d63cb6e36933ed3f6faf763167030e97d18e8f8c8ed3dba28e3">SCEV::FlagNW</a>));</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  }</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;}</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">/// SimplifyAddOperands - Sort and simplify a list of add operands. NumAddRecs</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">/// is the number of SCEVAddRecExprs present, which are kept at the end of</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment">/// the list.</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00306"></a><span class="lineno"><a class="line" href="ScalarEvolutionExpander_8cpp.html#a9bc337eb05f0a2d638e1fe8e583db078">  306</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ScalarEvolutionExpander_8cpp.html#a9bc337eb05f0a2d638e1fe8e583db078">SimplifyAddOperands</a>(<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;const SCEV *&gt;</a> &amp;Ops,</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                                <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty,</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                                <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> &amp;SE) {</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <span class="keywordtype">unsigned</span> NumAddRecs = 0;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = Ops.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt; 0 &amp;&amp; isa&lt;SCEVAddRecExpr&gt;(Ops[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>-1]); --<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    ++NumAddRecs;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <span class="comment">// Group Ops into non-addrecs and addrecs.</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const SCEV *, 8&gt;</a> NoAddRecs(Ops.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), Ops.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>() - NumAddRecs);</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const SCEV *, 8&gt;</a> AddRecs(Ops.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>() - NumAddRecs, Ops.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>());</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <span class="comment">// Let ScalarEvolution sort and simplify the non-addrecs list.</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *<a class="code" href="Target_2X86_2README_8txt.html#a0ed5c5d6ff68f354e354920a3680185c">Sum</a> = NoAddRecs.empty() ?</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                    SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a2eb94d079d8416118f4aaed865ab05d7">getConstant</a>(Ty, 0) :</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                    SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a23541ecba66207184eaf2279a70c5b12">getAddExpr</a>(NoAddRecs);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="comment">// If it returned an add, use the operands. Otherwise it simplified</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="comment">// the sum into a single value, so just use that.</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  Ops.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVAddExpr.html">SCEVAddExpr</a> *Add = dyn_cast&lt;SCEVAddExpr&gt;(Sum))</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    Ops.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a669d55980a7d4b6307b94596deeb0b1f">append</a>(Add-&gt;op_begin(), Add-&gt;op_end());</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!Sum-&gt;isZero())</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    Ops.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Sum);</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="comment">// Then append the addrecs.</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  Ops.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a669d55980a7d4b6307b94596deeb0b1f">append</a>(AddRecs.begin(), AddRecs.end());</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;}</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment">/// SplitAddRecs - Flatten a list of add operands, moving addrec start values</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment">/// out to the top level. For example, convert {a + b,+,c} to a, b, {0,+,d}.</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment">/// This helps expose more opportunities for folding parts of the expressions</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment">/// into GEP indices.</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00335"></a><span class="lineno"><a class="line" href="ScalarEvolutionExpander_8cpp.html#ae138dd892b8a5f945944cdbd7d151304">  335</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ScalarEvolutionExpander_8cpp.html#ae138dd892b8a5f945944cdbd7d151304">SplitAddRecs</a>(<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;const SCEV *&gt;</a> &amp;Ops,</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                         <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty,</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                         <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> &amp;SE) {</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="comment">// Find the addrecs.</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const SCEV *, 8&gt;</a> AddRecs;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Ops.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordflow">while</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVAddRecExpr.html">SCEVAddRecExpr</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a> = dyn_cast&lt;SCEVAddRecExpr&gt;(Ops[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>])) {</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *Start = <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>-&gt;getStart();</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      <span class="keywordflow">if</span> (Start-&gt;<a class="code" href="classllvm_1_1SCEV.html#a3f76d2fd4788225548dc36ef9e417030">isZero</a>()) <span class="keywordflow">break</span>;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *Zero = SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a2eb94d079d8416118f4aaed865ab05d7">getConstant</a>(Ty, 0);</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      AddRecs.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a659b27f6737fcb7eaf333b0279da1154">getAddRecExpr</a>(Zero,</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                                         <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>-&gt;getStepRecurrence(SE),</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                                         <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>-&gt;getLoop(),</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                                         <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>-&gt;getNoWrapFlags(<a class="code" href="classllvm_1_1SCEV.html#af43000d4dcb7d6d63cb6e36933ed3f6faf763167030e97d18e8f8c8ed3dba28e3">SCEV::FlagNW</a>)));</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVAddExpr.html">SCEVAddExpr</a> *Add = dyn_cast&lt;SCEVAddExpr&gt;(Start)) {</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        Ops[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = Zero;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        Ops.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a669d55980a7d4b6307b94596deeb0b1f">append</a>(Add-&gt;op_begin(), Add-&gt;op_end());</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        e += Add-&gt;getNumOperands();</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        Ops[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = Start;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      }</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    }</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="keywordflow">if</span> (!AddRecs.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>()) {</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="comment">// Add the addrecs onto the end of the list.</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    Ops.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a669d55980a7d4b6307b94596deeb0b1f">append</a>(AddRecs.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), AddRecs.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>());</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="comment">// Resort the operand list, moving any constants to the front.</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <a class="code" href="ScalarEvolutionExpander_8cpp.html#a9bc337eb05f0a2d638e1fe8e583db078">SimplifyAddOperands</a>(Ops, Ty, SE);</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  }</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;}</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment">/// expandAddToGEP - Expand an addition expression with a pointer type into</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="comment">/// a GEP instead of using ptrtoint+arithmetic+inttoptr. This helps</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment">/// BasicAliasAnalysis and other passes analyze the result. See the rules</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment">/// for getelementptr vs. inttoptr in</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="comment">/// http://llvm.org/docs/LangRef.html#pointeraliasing</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment">/// for details.</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment">/// Design note: The correctness of using getelementptr here depends on</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="comment">/// ScalarEvolution not recognizing inttoptr and ptrtoint operators, as</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="comment">/// they may introduce pointer arithmetic which may not be safely converted</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment">/// into getelementptr.</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment">/// Design note: It might seem desirable for this function to be more</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment">/// loop-aware. If some of the indices are loop-invariant while others</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment">/// aren&#39;t, it might seem desirable to emit multiple GEPs, keeping the</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment">/// loop-invariant portions of the overall computation outside the loop.</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="comment">/// However, there are a few reasons this is not done here. Hoisting simple</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="comment">/// arithmetic is a low-level optimization that often isn&#39;t very</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="comment">/// important until late in the optimization process. In fact, passes</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment">/// like InstructionCombining will combine GEPs, even if it means</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment">/// pushing loop-invariant computation down into loops, so even if the</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment">/// GEPs were split here, the work would quickly be undone. The</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment">/// LoopStrengthReduction pass, which is usually run quite late (and</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment">/// after the last InstructionCombining pass), takes care of hoisting</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">/// loop-invariant portions of expressions, after considering what</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">/// can be folded using target addressing modes.</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Value.html">Value</a> *SCEVExpander::expandAddToGEP(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *<span class="keyword">const</span> *op_begin,</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                                    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *<span class="keyword">const</span> *op_end,</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                                    <a class="code" href="classllvm_1_1PointerType.html">PointerType</a> *PTy,</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                                    <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty,</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                                    <a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *ElTy = PTy-&gt;<a class="code" href="classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">getElementType</a>();</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 4&gt;</a> GepIndices;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const SCEV *, 8&gt;</a> Ops(op_begin, op_end);</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="keywordtype">bool</span> AnyNonZeroIndices = <span class="keyword">false</span>;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="comment">// Split AddRecs up into parts as either of the parts may be usable</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="comment">// without the other.</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  <a class="code" href="ScalarEvolutionExpander_8cpp.html#ae138dd892b8a5f945944cdbd7d151304">SplitAddRecs</a>(Ops, Ty, SE);</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *IntPtrTy = SE.TD</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                 ? SE.TD-&gt;<a class="code" href="classllvm_1_1DataLayout.html#ae84bb2408dfffa4e8b5fe2ce0714a3bd">getIntPtrType</a>(PTy)</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                 : <a class="code" href="classllvm_1_1Type.html#a05186fa23e4d11b9855a9599ba87a4b7">Type::getInt64Ty</a>(PTy-&gt;<a class="code" href="classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">getContext</a>());</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <span class="comment">// Descend down the pointer&#39;s type and attempt to convert the other</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="comment">// operands into GEP indices, at each level. The first index in a GEP</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="comment">// indexes into the array implied by the pointer operand; the rest of</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <span class="comment">// the indices index into the element or field type selected by the</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="comment">// preceding index.</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="comment">// If the scale size is not 0, attempt to factor out a scale for</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="comment">// array indexing.</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const SCEV *, 8&gt;</a> ScaledOps;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordflow">if</span> (ElTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9dc5111b1a9b1d5c4652d50f74fe850b">isSized</a>()) {</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *ElSize = SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a5b01f1061607731f6d2953b935649570">getSizeOfExpr</a>(IntPtrTy, ElTy);</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      <span class="keywordflow">if</span> (!ElSize-&gt;<a class="code" href="classllvm_1_1SCEV.html#a3f76d2fd4788225548dc36ef9e417030">isZero</a>()) {</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const SCEV *, 8&gt;</a> NewOps;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Ops.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;          <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *Op = Ops[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;          <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *Remainder = SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a2eb94d079d8416118f4aaed865ab05d7">getConstant</a>(Ty, 0);</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="ScalarEvolutionExpander_8cpp.html#a496dd62afde2db64983c40c3a1d4a75b">FactorOutConstant</a>(Op, Remainder, ElSize, SE, SE.TD)) {</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;            <span class="comment">// Op now has ElSize factored out.</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            ScaledOps.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Op);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;            <span class="keywordflow">if</span> (!Remainder-&gt;<a class="code" href="classllvm_1_1SCEV.html#a3f76d2fd4788225548dc36ef9e417030">isZero</a>())</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;              NewOps.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Remainder);</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            AnyNonZeroIndices = <span class="keyword">true</span>;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;          } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;            <span class="comment">// The operand was not divisible, so add it to the list of operands</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;            <span class="comment">// we&#39;ll scan next iteration.</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;            NewOps.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Ops[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;          }</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        }</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        <span class="comment">// If we made any changes, update Ops.</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        <span class="keywordflow">if</span> (!ScaledOps.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>()) {</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;          Ops = NewOps;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;          <a class="code" href="ScalarEvolutionExpander_8cpp.html#a9bc337eb05f0a2d638e1fe8e583db078">SimplifyAddOperands</a>(Ops, Ty, SE);</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        }</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;      }</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    }</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="comment">// Record the scaled array index for this level of the type. If</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="comment">// we didn&#39;t find any operands that could be factored, tentatively</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="comment">// assume that element zero was selected (since the zero offset</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="comment">// would obviously be folded away).</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Scaled = ScaledOps.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>() ?</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                    <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Ty) :</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                    <a class="code" href="classllvm_1_1SCEVExpander.html#a583d3ca95f83216d632a4d1ae0330dd0">expandCodeFor</a>(SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a23541ecba66207184eaf2279a70c5b12">getAddExpr</a>(ScaledOps), Ty);</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    GepIndices.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Scaled);</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="comment">// Collect struct field index operands.</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="classllvm_1_1StructType.html">StructType</a> *STy = dyn_cast&lt;StructType&gt;(ElTy)) {</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;      <span class="keywordtype">bool</span> FoundFieldNo = <span class="keyword">false</span>;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      <span class="comment">// An empty struct has no fields.</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      <span class="keywordflow">if</span> (STy-&gt;getNumElements() == 0) <span class="keywordflow">break</span>;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;      <span class="keywordflow">if</span> (SE.TD) {</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <span class="comment">// With DataLayout, field offsets are known. See if a constant offset</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <span class="comment">// falls within any of the struct fields.</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        <span class="keywordflow">if</span> (Ops.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>()) <span class="keywordflow">break</span>;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVConstant.html">SCEVConstant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;SCEVConstant&gt;(Ops[0]))</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;          <span class="keywordflow">if</span> (SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a983dbdce6af7840357ed33a20c8f30bb">getTypeSizeInBits</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getType()) &lt;= 64) {</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            <span class="keyword">const</span> <a class="code" href="classllvm_1_1StructLayout.html">StructLayout</a> &amp;SL = *SE.TD-&gt;<a class="code" href="classllvm_1_1DataLayout.html#a35c840104f32575e0d91422cf1ef3ce4">getStructLayout</a>(STy);</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            uint64_t FullOffset = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getValue()-&gt;getZExtValue();</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            <span class="keywordflow">if</span> (FullOffset &lt; SL.<a class="code" href="classllvm_1_1StructLayout.html#a582a5b21a8f91d7f713fa9d57c0525de">getSizeInBytes</a>()) {</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;              <span class="keywordtype">unsigned</span> ElIdx = SL.<a class="code" href="classllvm_1_1StructLayout.html#a795cfd43d30c44c33b97fe850bc0451f">getElementContainingOffset</a>(FullOffset);</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;              GepIndices.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                  <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(Ty-&gt;<a class="code" href="classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">getContext</a>()), ElIdx));</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;              ElTy = STy-&gt;getTypeAtIndex(ElIdx);</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;              Ops[0] =</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a2eb94d079d8416118f4aaed865ab05d7">getConstant</a>(Ty, FullOffset - SL.<a class="code" href="classllvm_1_1StructLayout.html#ae10c4483372a357a0d3411b3d64be10c">getElementOffset</a>(ElIdx));</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;              AnyNonZeroIndices = <span class="keyword">true</span>;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;              FoundFieldNo = <span class="keyword">true</span>;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;            }</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;          }</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <span class="comment">// Without DataLayout, just check for an offsetof expression of the</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        <span class="comment">// appropriate struct type.</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Ops.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;          <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVUnknown.html">SCEVUnknown</a> *U = dyn_cast&lt;SCEVUnknown&gt;(Ops[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>])) {</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;            <a class="code" href="classllvm_1_1Type.html">Type</a> *CTy;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;            <a class="code" href="classllvm_1_1Constant.html">Constant</a> *FieldNo;</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;            <span class="keywordflow">if</span> (U-&gt;isOffsetOf(CTy, FieldNo) &amp;&amp; CTy == STy) {</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;              GepIndices.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(FieldNo);</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;              ElTy =</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                STy-&gt;getTypeAtIndex(cast&lt;ConstantInt&gt;(FieldNo)-&gt;getZExtValue());</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;              Ops[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a2eb94d079d8416118f4aaed865ab05d7">getConstant</a>(Ty, 0);</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;              AnyNonZeroIndices = <span class="keyword">true</span>;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;              FoundFieldNo = <span class="keyword">true</span>;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;              <span class="keywordflow">break</span>;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;            }</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;          }</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;      }</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;      <span class="comment">// If no struct field offsets were found, tentatively assume that</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      <span class="comment">// field zero was selected (since the zero offset would obviously</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;      <span class="comment">// be folded away).</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      <span class="keywordflow">if</span> (!FoundFieldNo) {</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        ElTy = STy-&gt;getTypeAtIndex(0u);</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        GepIndices.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;          <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(Ty-&gt;<a class="code" href="classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">getContext</a>())));</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      }</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    }</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ArrayType.html">ArrayType</a> *ATy = dyn_cast&lt;ArrayType&gt;(ElTy))</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      ElTy = ATy-&gt;getElementType();</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  }</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <span class="comment">// If none of the operands were convertible to proper GEP indices, cast</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <span class="comment">// the base to i8* and do an ugly getelementptr with that. It&#39;s still</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <span class="comment">// better than ptrtoint+arithmetic+inttoptr at least.</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <span class="keywordflow">if</span> (!AnyNonZeroIndices) {</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="comment">// Cast the base to i8*.</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    V = InsertNoopCastOfTo(V,</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;       <a class="code" href="classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">Type::getInt8PtrTy</a>(Ty-&gt;<a class="code" href="classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">getContext</a>(), PTy-&gt;<a class="code" href="classllvm_1_1PointerType.html#a921061a57ec3cfbaf6422f09f7d79fc3">getAddressSpace</a>()));</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    assert(!isa&lt;Instruction&gt;(V) ||</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;           SE.DT-&gt;<a class="code" href="classllvm_1_1DominatorTree.html#a6fe9272dc67fe2ff4cafc33b895c4a6c">dominates</a>(cast&lt;Instruction&gt;(V), Builder.<a class="code" href="classllvm_1_1IRBuilderBase.html#ae2bfc7d05689f33b3f9cf2f2b3eca7dd">GetInsertPoint</a>()));</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="comment">// Expand the operands for a plain byte offset.</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Idx = <a class="code" href="classllvm_1_1SCEVExpander.html#a583d3ca95f83216d632a4d1ae0330dd0">expandCodeFor</a>(SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a23541ecba66207184eaf2279a70c5b12">getAddExpr</a>(Ops), Ty);</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="comment">// Fold a GEP with constant operands.</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *CLHS = dyn_cast&lt;Constant&gt;(V))</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *CRHS = dyn_cast&lt;Constant&gt;(Idx))</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantExpr.html#a51940249c228e46f1f97932e5f4b8450">ConstantExpr::getGetElementPtr</a>(CLHS, CRHS);</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="comment">// Do a quick scan to see if we have this GEP nearby.  If so, reuse it.</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <span class="keywordtype">unsigned</span> ScanLimit = 6;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> BlockBegin = Builder.<a class="code" href="classllvm_1_1IRBuilderBase.html#a05750ee4a9742f3ea2755efb4b747efe">GetInsertBlock</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="comment">// Scanning starts from the last instruction before the insertion point.</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> IP = Builder.<a class="code" href="classllvm_1_1IRBuilderBase.html#ae2bfc7d05689f33b3f9cf2f2b3eca7dd">GetInsertPoint</a>();</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="keywordflow">if</span> (IP != BlockBegin) {</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      --IP;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      <span class="keywordflow">for</span> (; ScanLimit; --IP, --ScanLimit) {</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        <span class="comment">// Don&#39;t count dbg.value against the ScanLimit, to avoid perturbing the</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        <span class="comment">// generated code.</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <span class="keywordflow">if</span> (isa&lt;DbgInfoIntrinsic&gt;(IP))</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;          ScanLimit++;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        <span class="keywordflow">if</span> (IP-&gt;getOpcode() == Instruction::GetElementPtr &amp;&amp;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;            IP-&gt;getOperand(0) == V &amp;&amp; IP-&gt;getOperand(1) == Idx)</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;          <span class="keywordflow">return</span> IP;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        <span class="keywordflow">if</span> (IP == BlockBegin) <span class="keywordflow">break</span>;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;      }</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    }</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <span class="comment">// Save the original insertion point so we can restore it when we&#39;re done.</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    BuilderType::InsertPointGuard Guard(Builder);</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="comment">// Move the insertion point out of as many loops as we can.</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <span class="keywordflow">while</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L = SE.LI-&gt;<a class="code" href="classllvm_1_1LoopInfo.html#a4abca289c73cd09487e05d11d9f7d877">getLoopFor</a>(Builder.<a class="code" href="classllvm_1_1IRBuilderBase.html#a05750ee4a9742f3ea2755efb4b747efe">GetInsertBlock</a>())) {</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      <span class="keywordflow">if</span> (!L-&gt;isLoopInvariant(V) || !L-&gt;isLoopInvariant(Idx)) <span class="keywordflow">break</span>;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Preheader = L-&gt;getLoopPreheader();</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      <span class="keywordflow">if</span> (!Preheader) <span class="keywordflow">break</span>;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      <span class="comment">// Ok, move up a level.</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      Builder.<a class="code" href="classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(Preheader, Preheader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>());</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    }</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="comment">// Emit a GEP.</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *GEP = Builder.<a class="code" href="classllvm_1_1IRBuilder.html#ac46176b523c8a76a9ccdb5683279db94">CreateGEP</a>(V, Idx, <span class="stringliteral">&quot;uglygep&quot;</span>);</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    rememberInstruction(GEP);</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="keywordflow">return</span> GEP;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  }</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <span class="comment">// Save the original insertion point so we can restore it when we&#39;re done.</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  BuilderType::InsertPoint SaveInsertPt = Builder.<a class="code" href="classllvm_1_1IRBuilderBase.html#a78b7be0d9fe2c93afd2fbca74d67a0d4">saveIP</a>();</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  <span class="comment">// Move the insertion point out of as many loops as we can.</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  <span class="keywordflow">while</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L = SE.LI-&gt;<a class="code" href="classllvm_1_1LoopInfo.html#a4abca289c73cd09487e05d11d9f7d877">getLoopFor</a>(Builder.<a class="code" href="classllvm_1_1IRBuilderBase.html#a05750ee4a9742f3ea2755efb4b747efe">GetInsertBlock</a>())) {</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="keywordflow">if</span> (!L-&gt;isLoopInvariant(V)) <span class="keywordflow">break</span>;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="keywordtype">bool</span> AnyIndexNotLoopInvariant = <span class="keyword">false</span>;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Value *&gt;::const_iterator</a> I = GepIndices.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(),</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;         E = GepIndices.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>(); I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;      <span class="keywordflow">if</span> (!L-&gt;isLoopInvariant(*I)) {</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        AnyIndexNotLoopInvariant = <span class="keyword">true</span>;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      }</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="keywordflow">if</span> (AnyIndexNotLoopInvariant)</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Preheader = L-&gt;getLoopPreheader();</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="keywordflow">if</span> (!Preheader) <span class="keywordflow">break</span>;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <span class="comment">// Ok, move up a level.</span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    Builder.<a class="code" href="classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(Preheader, Preheader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>());</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  }</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  <span class="comment">// Insert a pretty getelementptr. Note that this GEP is not marked inbounds,</span></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  <span class="comment">// because ScalarEvolution may have changed the address arithmetic to</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  <span class="comment">// compute a value which is beyond the end of the allocated object.</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Casted = V;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  <span class="keywordflow">if</span> (V-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() != PTy)</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    Casted = InsertNoopCastOfTo(Casted, PTy);</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *GEP = Builder.<a class="code" href="classllvm_1_1IRBuilder.html#ac46176b523c8a76a9ccdb5683279db94">CreateGEP</a>(Casted,</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                                 GepIndices,</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                                 <span class="stringliteral">&quot;scevgep&quot;</span>);</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  Ops.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#ad8e4f5b2ced08ad7d138b598aefdd338">getUnknown</a>(GEP));</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  rememberInstruction(GEP);</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  <span class="comment">// Restore the original insert point.</span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  Builder.<a class="code" href="classllvm_1_1IRBuilderBase.html#ac8778dcbd35e8ae5902050117feb57a0">restoreIP</a>(SaveInsertPt);</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  <span class="keywordflow">return</span> expand(SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a23541ecba66207184eaf2279a70c5b12">getAddExpr</a>(Ops));</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;}</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="comment">/// PickMostRelevantLoop - Given two loops pick the one that&#39;s most relevant for</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="comment">/// SCEV expansion. If they are nested, this is the most nested. If they are</span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="comment">/// neighboring, pick the later.</span></div><div class="line"><a name="l00616"></a><span class="lineno"><a class="line" href="ScalarEvolutionExpander_8cpp.html#a0292c0709f879d1d205ac0b4f5d7e6ef">  616</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *<a class="code" href="ScalarEvolutionExpander_8cpp.html#a0292c0709f879d1d205ac0b4f5d7e6ef">PickMostRelevantLoop</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>,</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                                        <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;DT) {</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <span class="keywordflow">if</span> (!A) <span class="keywordflow">return</span> <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <span class="keywordflow">if</span> (!B) <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  <span class="keywordflow">if</span> (A-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a92a38e2e3412bde7fd2b71db212b61aa">contains</a>(B)) <span class="keywordflow">return</span> B;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  <span class="keywordflow">if</span> (B-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a92a38e2e3412bde7fd2b71db212b61aa">contains</a>(A)) <span class="keywordflow">return</span> A;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  <span class="keywordflow">if</span> (DT.<a class="code" href="classllvm_1_1DominatorTree.html#a6fe9272dc67fe2ff4cafc33b895c4a6c">dominates</a>(A-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>(), B-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>())) <span class="keywordflow">return</span> <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <span class="keywordflow">if</span> (DT.<a class="code" href="classllvm_1_1DominatorTree.html#a6fe9272dc67fe2ff4cafc33b895c4a6c">dominates</a>(B-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>(), A-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>())) <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>;</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>; <span class="comment">// Arbitrarily break the tie.</span></div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;}</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="comment">/// getRelevantLoop - Get the most relevant loop associated with the given</span></div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="comment">/// expression, according to PickMostRelevantLoop.</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="comment"></span><span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *SCEVExpander::getRelevantLoop(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>) {</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <span class="comment">// Test whether we&#39;ve already computed the most relevant loop for this SCEV.</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  std::pair&lt;DenseMap&lt;const SCEV *, const Loop *&gt;::iterator, <span class="keywordtype">bool</span>&gt; Pair =</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    RelevantLoops.insert(std::make_pair(S, static_cast&lt;const Loop *&gt;(0)));</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  <span class="keywordflow">if</span> (!Pair.second)</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <span class="keywordflow">return</span> Pair.first-&gt;second;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  <span class="keywordflow">if</span> (isa&lt;SCEVConstant&gt;(S))</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="comment">// A constant has no relevant loops.</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVUnknown.html">SCEVUnknown</a> *U = dyn_cast&lt;SCEVUnknown&gt;(S)) {</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I = dyn_cast&lt;Instruction&gt;(U-&gt;getValue()))</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;      <span class="keywordflow">return</span> Pair.first-&gt;second = SE.LI-&gt;<a class="code" href="classllvm_1_1LoopInfo.html#a4abca289c73cd09487e05d11d9f7d877">getLoopFor</a>(I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>());</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="comment">// A non-instruction has no relevant loops.</span></div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  }</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVNAryExpr.html">SCEVNAryExpr</a> *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> = dyn_cast&lt;SCEVNAryExpr&gt;(S)) {</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L = 0;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVAddRecExpr.html">SCEVAddRecExpr</a> *AR = dyn_cast&lt;SCEVAddRecExpr&gt;(S))</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;      L = AR-&gt;getLoop();</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SCEVNAryExpr.html#a82ad83d40ce0e57efef84b421c7f805a">SCEVNAryExpr::op_iterator</a> I = <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;op_begin(), E = <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;op_end();</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;         I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;      L = <a class="code" href="ScalarEvolutionExpander_8cpp.html#a0292c0709f879d1d205ac0b4f5d7e6ef">PickMostRelevantLoop</a>(L, getRelevantLoop(*I), *SE.DT);</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keywordflow">return</span> RelevantLoops[<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>] = L;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  }</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVCastExpr.html">SCEVCastExpr</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;SCEVCastExpr&gt;(S)) {</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *Result = getRelevantLoop(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getOperand());</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <span class="keywordflow">return</span> RelevantLoops[<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>] = Result;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  }</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVUDivExpr.html">SCEVUDivExpr</a> *D = dyn_cast&lt;SCEVUDivExpr&gt;(S)) {</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *Result =</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      <a class="code" href="ScalarEvolutionExpander_8cpp.html#a0292c0709f879d1d205ac0b4f5d7e6ef">PickMostRelevantLoop</a>(getRelevantLoop(D-&gt;getLHS()),</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                           getRelevantLoop(D-&gt;getRHS()),</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                           *SE.DT);</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="keywordflow">return</span> RelevantLoops[D] = Result;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  }</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unexpected SCEV type!&quot;</span>);</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;}</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="comment">/// LoopCompare - Compare loops by PickMostRelevantLoop.</span></div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="comment"></span><span class="keyword">class </span>LoopCompare {</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;DT;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  <span class="keyword">explicit</span> LoopCompare(<a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;dt) : DT(dt) {}</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  <span class="keywordtype">bool</span> operator()(std::pair&lt;const Loop *, const SCEV *&gt; LHS,</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                  std::pair&lt;const Loop *, const SCEV *&gt; RHS)<span class="keyword"> const </span>{</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="comment">// Keep pointer operands sorted at the end.</span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="keywordflow">if</span> (LHS.second-&gt;getType()-&gt;isPointerTy() !=</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        RHS.second-&gt;getType()-&gt;isPointerTy())</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;      <span class="keywordflow">return</span> LHS.second-&gt;getType()-&gt;isPointerTy();</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <span class="comment">// Compare loops with PickMostRelevantLoop.</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <span class="keywordflow">if</span> (LHS.first != RHS.first)</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="ScalarEvolutionExpander_8cpp.html#a0292c0709f879d1d205ac0b4f5d7e6ef">PickMostRelevantLoop</a>(LHS.first, RHS.first, DT) != LHS.first;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    <span class="comment">// If one operand is a non-constant negative and the other is not,</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <span class="comment">// put the non-constant negative on the right so that a sub can</span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <span class="comment">// be used instead of a negate and add.</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <span class="keywordflow">if</span> (LHS.second-&gt;isNonConstantNegative()) {</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;      <span class="keywordflow">if</span> (!RHS.second-&gt;isNonConstantNegative())</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (RHS.second-&gt;isNonConstantNegative())</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <span class="comment">// Otherwise they are equivalent according to this comparison.</span></div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  }</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;};</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;}</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *SCEVExpander::visitAddExpr(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVAddExpr.html">SCEVAddExpr</a> *S) {</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = SE.getEffectiveSCEVType(S-&gt;<a class="code" href="classllvm_1_1SCEVAddExpr.html#adaa7ea82a902c95919c4bb6f7f6bf904">getType</a>());</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  <span class="comment">// Collect all the add operands in a loop, along with their associated loops.</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  <span class="comment">// Iterate in reverse so that constants are emitted last, all else equal, and</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  <span class="comment">// so that pointer operands are inserted first, which the code below relies on</span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  <span class="comment">// to form more involved GEPs.</span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;const Loop *, const SCEV *&gt;</a>, 8&gt; OpsAndLoops;</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  <span class="keywordflow">for</span> (std::reverse_iterator&lt;SCEVAddExpr::op_iterator&gt; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>(S-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#a5877c3a289aa71796140f54b73f654f7">op_end</a>()),</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;       E(S-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#a107163b3c781d2b0137bf2021e7dc984">op_begin</a>()); I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    OpsAndLoops.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(std::make_pair(getRelevantLoop(*I), *I));</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  <span class="comment">// Sort by loop. Use a stable sort so that constants follow non-constants and</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  <span class="comment">// pointer operands precede non-pointer operands.</span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  std::stable_sort(OpsAndLoops.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), OpsAndLoops.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>(), LoopCompare(*SE.DT));</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  <span class="comment">// Emit instructions to add all the operands. Hoist as much as possible</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  <span class="comment">// out of loops, and form meaningful getelementptrs where possible.</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="Target_2X86_2README_8txt.html#a0ed5c5d6ff68f354e354920a3680185c">Sum</a> = 0;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt;std::pair&lt;const Loop *, const SCEV *&gt; &gt;::iterator</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;       I = OpsAndLoops.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), E = OpsAndLoops.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>(); I != E; ) {</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *CurLoop = I-&gt;first;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *Op = I-&gt;second;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="keywordflow">if</span> (!Sum) {</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      <span class="comment">// This is the first operand. Just expand it.</span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;      Sum = expand(Op);</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;      ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1PointerType.html">PointerType</a> *PTy = dyn_cast&lt;PointerType&gt;(Sum-&gt;getType())) {</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;      <span class="comment">// The running sum expression is a pointer. Try to form a getelementptr</span></div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;      <span class="comment">// at this level with that as the base.</span></div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const SCEV *, 4&gt;</a> NewOps;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;      <span class="keywordflow">for</span> (; I != E &amp;&amp; I-&gt;first == CurLoop; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        <span class="comment">// If the operand is SCEVUnknown and not instructions, peek through</span></div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        <span class="comment">// it, to enable more of it to be folded into the GEP.</span></div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *<a class="code" href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">X</a> = I-&gt;second;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVUnknown.html">SCEVUnknown</a> *U = dyn_cast&lt;SCEVUnknown&gt;(X))</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;          <span class="keywordflow">if</span> (!isa&lt;Instruction&gt;(U-&gt;getValue()))</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;            X = SE.getSCEV(U-&gt;getValue());</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        NewOps.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(X);</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;      }</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;      Sum = expandAddToGEP(NewOps.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), NewOps.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>(), PTy, Ty, <a class="code" href="Target_2X86_2README_8txt.html#a0ed5c5d6ff68f354e354920a3680185c">Sum</a>);</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1PointerType.html">PointerType</a> *PTy = dyn_cast&lt;PointerType&gt;(Op-&gt;<a class="code" href="classllvm_1_1SCEV.html#a9a16f1241255a605fc8debc1e26eaa4c">getType</a>())) {</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;      <span class="comment">// The running sum is an integer, and there&#39;s a pointer at this level.</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;      <span class="comment">// Try to form a getelementptr. If the running sum is instructions,</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;      <span class="comment">// use a SCEVUnknown to avoid re-analyzing them.</span></div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const SCEV *, 4&gt;</a> NewOps;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;      NewOps.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(isa&lt;Instruction&gt;(Sum) ? SE.getUnknown(Sum) :</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;                                               SE.getSCEV(Sum));</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;      <span class="keywordflow">for</span> (++I; I != E &amp;&amp; I-&gt;first == CurLoop; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        NewOps.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(I-&gt;second);</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      Sum = expandAddToGEP(NewOps.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), NewOps.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>(), PTy, Ty, expand(Op));</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Op-&gt;<a class="code" href="classllvm_1_1SCEV.html#a004121efb296aedb4f06091d92b89442">isNonConstantNegative</a>()) {</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;      <span class="comment">// Instead of doing a negate and add, just do a subtract.</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *W = <a class="code" href="classllvm_1_1SCEVExpander.html#a583d3ca95f83216d632a4d1ae0330dd0">expandCodeFor</a>(SE.getNegativeSCEV(Op), Ty);</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;      Sum = InsertNoopCastOfTo(Sum, Ty);</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;      Sum = InsertBinop(Instruction::Sub, Sum, W);</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;      ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;      <span class="comment">// A simple add.</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *W = <a class="code" href="classllvm_1_1SCEVExpander.html#a583d3ca95f83216d632a4d1ae0330dd0">expandCodeFor</a>(Op, Ty);</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;      Sum = InsertNoopCastOfTo(Sum, Ty);</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      <span class="comment">// Canonicalize a constant to the RHS.</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;      <span class="keywordflow">if</span> (isa&lt;Constant&gt;(Sum)) <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Sum, W);</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;      Sum = InsertBinop(Instruction::Add, Sum, W);</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    }</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  }</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="Target_2X86_2README_8txt.html#a0ed5c5d6ff68f354e354920a3680185c">Sum</a>;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;}</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *SCEVExpander::visitMulExpr(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVMulExpr.html">SCEVMulExpr</a> *S) {</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = SE.getEffectiveSCEVType(S-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#aed1b1d3b764c76210c67dd1b4a6be2f2">getType</a>());</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  <span class="comment">// Collect all the mul operands in a loop, along with their associated loops.</span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  <span class="comment">// Iterate in reverse so that constants are emitted last, all else equal.</span></div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;const Loop *, const SCEV *&gt;</a>, 8&gt; OpsAndLoops;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  <span class="keywordflow">for</span> (std::reverse_iterator&lt;SCEVMulExpr::op_iterator&gt; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>(S-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#a5877c3a289aa71796140f54b73f654f7">op_end</a>()),</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;       E(S-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#a107163b3c781d2b0137bf2021e7dc984">op_begin</a>()); I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    OpsAndLoops.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(std::make_pair(getRelevantLoop(*I), *I));</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <span class="comment">// Sort by loop. Use a stable sort so that constants follow non-constants.</span></div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  std::stable_sort(OpsAndLoops.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), OpsAndLoops.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>(), LoopCompare(*SE.DT));</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  <span class="comment">// Emit instructions to mul all the operands. Hoist as much as possible</span></div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  <span class="comment">// out of loops.</span></div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Prod = 0;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt;std::pair&lt;const Loop *, const SCEV *&gt; &gt;::iterator</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;       I = OpsAndLoops.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), E = OpsAndLoops.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>(); I != E; ) {</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *Op = I-&gt;second;</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="keywordflow">if</span> (!Prod) {</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;      <span class="comment">// This is the first operand. Just expand it.</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;      Prod = expand(Op);</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;      ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Op-&gt;<a class="code" href="classllvm_1_1SCEV.html#a6e915d0a915541a818ab88b1fac7cbd1">isAllOnesValue</a>()) {</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;      <span class="comment">// Instead of doing a multiply by negative one, just do a negate.</span></div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;      Prod = InsertNoopCastOfTo(Prod, Ty);</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;      Prod = InsertBinop(Instruction::Sub, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Ty), Prod);</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;      ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      <span class="comment">// A simple mul.</span></div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *W = <a class="code" href="classllvm_1_1SCEVExpander.html#a583d3ca95f83216d632a4d1ae0330dd0">expandCodeFor</a>(Op, Ty);</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;      Prod = InsertNoopCastOfTo(Prod, Ty);</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;      <span class="comment">// Canonicalize a constant to the RHS.</span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;      <span class="keywordflow">if</span> (isa&lt;Constant&gt;(Prod)) <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Prod, W);</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;      Prod = InsertBinop(Instruction::Mul, Prod, W);</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    }</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  }</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;  <span class="keywordflow">return</span> Prod;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;}</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *SCEVExpander::visitUDivExpr(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVUDivExpr.html">SCEVUDivExpr</a> *S) {</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = SE.getEffectiveSCEVType(S-&gt;<a class="code" href="classllvm_1_1SCEVUDivExpr.html#a38e73ccf223d1b8eec8fc3a026a7da1c">getType</a>());</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *LHS = <a class="code" href="classllvm_1_1SCEVExpander.html#a583d3ca95f83216d632a4d1ae0330dd0">expandCodeFor</a>(S-&gt;<a class="code" href="classllvm_1_1SCEVUDivExpr.html#a0556409bb7d6f1fb0e4681aaf5e88e1f">getLHS</a>(), Ty);</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVConstant.html">SCEVConstant</a> *<a class="code" href="namespacellvm_1_1PPCISD.html#a69ad64696d1df3be05f01dfb67f5bc66a2ae057e4de45c51c89b7e5dc5053df62">SC</a> = dyn_cast&lt;SCEVConstant&gt;(S-&gt;<a class="code" href="classllvm_1_1SCEVUDivExpr.html#a0745b63bdc2e2b907b936bf105e3eeb9">getRHS</a>())) {</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;RHS = <a class="code" href="namespacellvm_1_1PPCISD.html#a69ad64696d1df3be05f01dfb67f5bc66a2ae057e4de45c51c89b7e5dc5053df62">SC</a>-&gt;getValue()-&gt;getValue();</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <span class="keywordflow">if</span> (RHS.<a class="code" href="classllvm_1_1APInt.html#af3deb6522c4fe2043fe07af2ec90190c">isPowerOf2</a>())</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;      <span class="keywordflow">return</span> InsertBinop(Instruction::LShr, LHS,</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;                         <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(Ty, RHS.<a class="code" href="classllvm_1_1APInt.html#a474f562a4871689af74b0fd1ae42daa1">logBase2</a>()));</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  }</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *RHS = <a class="code" href="classllvm_1_1SCEVExpander.html#a583d3ca95f83216d632a4d1ae0330dd0">expandCodeFor</a>(S-&gt;<a class="code" href="classllvm_1_1SCEVUDivExpr.html#a0745b63bdc2e2b907b936bf105e3eeb9">getRHS</a>(), Ty);</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  <span class="keywordflow">return</span> InsertBinop(Instruction::UDiv, LHS, RHS);</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;}</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;<span class="comment">/// Move parts of Base into Rest to leave Base with the minimal</span></div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;<span class="comment">/// expression that provides a pointer operand suitable for a</span></div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;<span class="comment">/// GEP expansion.</span></div><div class="line"><a name="l00834"></a><span class="lineno"><a class="line" href="ScalarEvolutionExpander_8cpp.html#aeb811bb4a3e1c56acb04c713200c9a42">  834</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ScalarEvolutionExpander_8cpp.html#aeb811bb4a3e1c56acb04c713200c9a42">ExposePointerBase</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *&amp;Base, <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *&amp;Rest,</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;                              <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> &amp;SE) {</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  <span class="keywordflow">while</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVAddRecExpr.html">SCEVAddRecExpr</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a> = dyn_cast&lt;SCEVAddRecExpr&gt;(Base)) {</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    Base = <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>-&gt;getStart();</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    Rest = SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a23541ecba66207184eaf2279a70c5b12">getAddExpr</a>(Rest,</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;                         SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a659b27f6737fcb7eaf333b0279da1154">getAddRecExpr</a>(SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a2eb94d079d8416118f4aaed865ab05d7">getConstant</a>(<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>-&gt;getType(), 0),</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;                                          <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>-&gt;getStepRecurrence(SE),</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;                                          <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>-&gt;getLoop(),</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                                          <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>-&gt;getNoWrapFlags(<a class="code" href="classllvm_1_1SCEV.html#af43000d4dcb7d6d63cb6e36933ed3f6faf763167030e97d18e8f8c8ed3dba28e3">SCEV::FlagNW</a>)));</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  }</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVAddExpr.html">SCEVAddExpr</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a> = dyn_cast&lt;SCEVAddExpr&gt;(Base)) {</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    Base = <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>-&gt;getOperand(<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>-&gt;getNumOperands()-1);</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const SCEV *, 8&gt;</a> NewAddOps(<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>-&gt;op_begin(), <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>-&gt;op_end());</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    NewAddOps.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#acd9e771a3296c6b24146955754620557">back</a>() = Rest;</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    Rest = SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#a23541ecba66207184eaf2279a70c5b12">getAddExpr</a>(NewAddOps);</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <a class="code" href="ScalarEvolutionExpander_8cpp.html#aeb811bb4a3e1c56acb04c713200c9a42">ExposePointerBase</a>(Base, Rest, SE);</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;  }</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;}</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;<span class="comment">/// Determine if this is a well-behaved chain of instructions leading back to</span></div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;<span class="comment">/// the PHI. If so, it may be reused by expanded expressions.</span></div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> SCEVExpander::isNormalAddRecExprPHI(<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *IncV,</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;                                         <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L) {</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  <span class="keywordflow">if</span> (IncV-&gt;<a class="code" href="classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>() == 0 || isa&lt;PHINode&gt;(IncV) ||</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;      (isa&lt;CastInst&gt;(IncV) &amp;&amp; !isa&lt;BitCastInst&gt;(IncV)))</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  <span class="comment">// If any of the operands don&#39;t dominate the insert position, bail.</span></div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  <span class="comment">// Addrec operands are always loop-invariant, so this can only happen</span></div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  <span class="comment">// if there are instructions which haven&#39;t been hoisted.</span></div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  <span class="keywordflow">if</span> (L == IVIncInsertLoop) {</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">User::op_iterator</a> OI = IncV-&gt;<a class="code" href="classllvm_1_1User.html#a2eeb1c7ed1cfe403f2ae0470e36c07e2">op_begin</a>()+1,</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;           OE = IncV-&gt;<a class="code" href="classllvm_1_1User.html#af41f58e730804d10b91fcff39b035f74">op_end</a>(); OI != OE; ++OI)</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *OInst = dyn_cast&lt;Instruction&gt;(OI))</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;        <span class="keywordflow">if</span> (!SE.DT-&gt;dominates(OInst, IVIncInsertPos))</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  }</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;  <span class="comment">// Advance to the next instruction.</span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  IncV = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a>&gt;(IncV-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0));</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;  <span class="keywordflow">if</span> (!IncV)</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;  <span class="keywordflow">if</span> (IncV-&gt;<a class="code" href="classllvm_1_1Instruction.html#a573063aad4c101462893d0490d867524">mayHaveSideEffects</a>())</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;  <span class="keywordflow">if</span> (IncV != PN)</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;  <span class="keywordflow">return</span> isNormalAddRecExprPHI(PN, IncV, L);</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;}</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;<span class="comment">/// getIVIncOperand returns an induction variable increment&#39;s induction</span></div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;<span class="comment">/// variable operand.</span></div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;<span class="comment">/// If allowScale is set, any type of GEP is allowed as long as the nonIV</span></div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;<span class="comment">/// operands dominate InsertPos.</span></div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;<span class="comment">/// If allowScale is not set, ensure that a GEP increment conforms to one of the</span></div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;<span class="comment">/// simple patterns generated by getAddRecExprPHILiterally and</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="comment">/// expandAddtoGEP. If the pattern isn&#39;t recognized, return NULL.</span></div><div class="line"><a name="l00893"></a><span class="lineno"><a class="line" href="classllvm_1_1SCEVExpander.html#aece02adc8e4cc74296bfe410eabe287b">  893</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1SCEVExpander.html#aece02adc8e4cc74296bfe410eabe287b">SCEVExpander::getIVIncOperand</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *IncV,</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;                                           <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InsertPos,</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                                           <span class="keywordtype">bool</span> allowScale) {</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  <span class="keywordflow">if</span> (IncV == InsertPos)</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  <span class="keywordflow">switch</span> (IncV-&gt;<a class="code" href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>()) {</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  <span class="keywordflow">default</span>:</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  <span class="comment">// Check for a simple Add/Sub or GEP of a loop invariant step.</span></div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  <span class="keywordflow">case</span> Instruction::Add:</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  <span class="keywordflow">case</span> Instruction::Sub: {</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *OInst = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a>&gt;(IncV-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <span class="keywordflow">if</span> (!OInst || SE.DT-&gt;dominates(OInst, InsertPos))</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;      <span class="keywordflow">return</span> dyn_cast&lt;Instruction&gt;(IncV-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0));</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;  }</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  <span class="keywordflow">case</span> Instruction::BitCast:</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a>&gt;(IncV-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0));</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  <span class="keywordflow">case</span> Instruction::GetElementPtr:</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">Instruction::op_iterator</a> I = IncV-&gt;<a class="code" href="classllvm_1_1User.html#a2eeb1c7ed1cfe403f2ae0470e36c07e2">op_begin</a>()+1, E = IncV-&gt;<a class="code" href="classllvm_1_1User.html#af41f58e730804d10b91fcff39b035f74">op_end</a>();</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;         I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;      <span class="keywordflow">if</span> (isa&lt;Constant&gt;(*I))</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *OInst = dyn_cast&lt;Instruction&gt;(*I)) {</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;        <span class="keywordflow">if</span> (!SE.DT-&gt;dominates(OInst, InsertPos))</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;          <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;      }</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;      <span class="keywordflow">if</span> (allowScale) {</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        <span class="comment">// allow any kind of GEP as long as it can be hoisted.</span></div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;      }</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;      <span class="comment">// This must be a pointer addition of constants (pretty), which is already</span></div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;      <span class="comment">// handled, or some number of address-size elements (ugly). Ugly geps</span></div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;      <span class="comment">// have 2 operands. i1* is used by the expander to represent an</span></div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;      <span class="comment">// address-size element.</span></div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;      <span class="keywordflow">if</span> (IncV-&gt;<a class="code" href="classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>() != 2)</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;        <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;      <span class="keywordtype">unsigned</span> AS = cast&lt;PointerType&gt;(IncV-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())-&gt;getAddressSpace();</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;      <span class="keywordflow">if</span> (IncV-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() != <a class="code" href="classllvm_1_1Type.html#a2ee2de2efa05f2abb95007892fc559a4">Type::getInt1PtrTy</a>(SE.getContext(), AS)</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;          &amp;&amp; IncV-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() != <a class="code" href="classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">Type::getInt8PtrTy</a>(SE.getContext(), AS))</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;        <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    }</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a>&gt;(IncV-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0));</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;  }</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;}</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;<span class="comment">/// hoistStep - Attempt to hoist a simple IV increment above InsertPos to make</span></div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;<span class="comment">/// it available to other uses in this loop. Recursively hoist any operands,</span></div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;<span class="comment">/// until we reach a value that dominates InsertPos.</span></div><div class="line"><a name="l00944"></a><span class="lineno"><a class="line" href="classllvm_1_1SCEVExpander.html#a9093ff54a20ae387e9643cc4ed615214">  944</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1SCEVExpander.html#a9093ff54a20ae387e9643cc4ed615214">SCEVExpander::hoistIVInc</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *IncV, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InsertPos) {</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;  <span class="keywordflow">if</span> (SE.DT-&gt;dominates(IncV, InsertPos))</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;  <span class="comment">// InsertPos must itself dominate IncV so that IncV&#39;s new position satisfies</span></div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  <span class="comment">// its existing users.</span></div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;  <span class="keywordflow">if</span> (isa&lt;PHINode&gt;(InsertPos)</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;      || !SE.DT-&gt;dominates(InsertPos-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>(), IncV-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>()))</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;  <span class="comment">// Check that the chain of IV operands leading back to Phi can be hoisted.</span></div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction*, 4&gt;</a> IVIncs;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;  <span class="keywordflow">for</span>(;;) {</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Oper = <a class="code" href="classllvm_1_1SCEVExpander.html#aece02adc8e4cc74296bfe410eabe287b">getIVIncOperand</a>(IncV, InsertPos, <span class="comment">/*allowScale*/</span><span class="keyword">true</span>);</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    <span class="keywordflow">if</span> (!Oper)</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    <span class="comment">// IncV is safe to hoist.</span></div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    IVIncs.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(IncV);</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    IncV = Oper;</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <span class="keywordflow">if</span> (SE.DT-&gt;dominates(IncV, InsertPos))</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;  }</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#abb743e3278f1d451eb396849040adf48">SmallVectorImpl&lt;Instruction*&gt;::reverse_iterator</a> I = IVIncs.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a23aab542398091e1fcfd46b6006d64ac">rbegin</a>(),</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;         E = IVIncs.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#ad696953257cf1c4e5bd12d02146e7287">rend</a>(); I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    (*I)-&gt;<a class="code" href="classllvm_1_1Instruction.html#af67d1f3a518964d80a109bb3d9d5cf1e">moveBefore</a>(InsertPos);</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;  }</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;}</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;<span class="comment">/// Determine if this cyclic phi is in a form that would have been generated by</span></div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;<span class="comment">/// LSR. We don&#39;t care if the phi was actually expanded in this pass, as long</span></div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;<span class="comment">/// as it is in a low-cost form, for example, no implied multiplication. This</span></div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;<span class="comment">/// should match any patterns generated by getAddRecExprPHILiterally and</span></div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;<span class="comment">/// expandAddtoGEP.</span></div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> SCEVExpander::isExpandedAddRecExprPHI(<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *IncV,</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;                                           <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L) {</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;  <span class="keywordflow">for</span>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *IVOper = IncV;</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;      (IVOper = <a class="code" href="classllvm_1_1SCEVExpander.html#aece02adc8e4cc74296bfe410eabe287b">getIVIncOperand</a>(IVOper, L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1bc74c76b876ad387293ecde0f21ed45">getLoopPreheader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>(),</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;                                <span class="comment">/*allowScale=*/</span><span class="keyword">false</span>));) {</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    <span class="keywordflow">if</span> (IVOper == PN)</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  }</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;}</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;<span class="comment">/// expandIVInc - Expand an IV increment at Builder&#39;s current InsertPos.</span></div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;<span class="comment">/// Typically this is the LatchBlock terminator or IVIncInsertPos, but we may</span></div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;<span class="comment">/// need to materialize IV increments elsewhere to handle difficult situations.</span></div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Value.html">Value</a> *SCEVExpander::expandIVInc(<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN, <a class="code" href="classllvm_1_1Value.html">Value</a> *StepV, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L,</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;                                 <a class="code" href="classllvm_1_1Type.html">Type</a> *ExpandTy, <a class="code" href="classllvm_1_1Type.html">Type</a> *IntTy,</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;                                 <span class="keywordtype">bool</span> useSubtract) {</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *IncV;</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;  <span class="comment">// If the PHI is a pointer, use a GEP, otherwise use an add or sub.</span></div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;  <span class="keywordflow">if</span> (ExpandTy-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>()) {</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <a class="code" href="classllvm_1_1PointerType.html">PointerType</a> *GEPPtrTy = cast&lt;PointerType&gt;(ExpandTy);</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    <span class="comment">// If the step isn&#39;t constant, don&#39;t use an implicitly scaled GEP, because</span></div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    <span class="comment">// that would require a multiply inside the loop.</span></div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    <span class="keywordflow">if</span> (!isa&lt;ConstantInt&gt;(StepV))</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;      GEPPtrTy = <a class="code" href="classllvm_1_1PointerType.html#a050a395d1656e546679d8b144d951bb2">PointerType::get</a>(<a class="code" href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">Type::getInt1Ty</a>(SE.getContext()),</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;                                  GEPPtrTy-&gt;<a class="code" href="classllvm_1_1PointerType.html#a921061a57ec3cfbaf6422f09f7d79fc3">getAddressSpace</a>());</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *<span class="keyword">const</span> StepArray[1] = { SE.getSCEV(StepV) };</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    IncV = expandAddToGEP(StepArray, StepArray+1, GEPPtrTy, IntTy, PN);</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    <span class="keywordflow">if</span> (IncV-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() != PN-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()) {</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;      IncV = Builder.CreateBitCast(IncV, PN-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;      rememberInstruction(IncV);</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    }</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    IncV = useSubtract ?</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;      Builder.CreateSub(PN, StepV, <a class="code" href="classllvm_1_1Twine.html">Twine</a>(IVName) + <span class="stringliteral">&quot;.iv.next&quot;</span>) :</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;      Builder.CreateAdd(PN, StepV, <a class="code" href="classllvm_1_1Twine.html">Twine</a>(IVName) + <span class="stringliteral">&quot;.iv.next&quot;</span>);</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    rememberInstruction(IncV);</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;  }</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;  <span class="keywordflow">return</span> IncV;</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;}</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;<span class="comment">/// getAddRecExprPHILiterally - Helper for expandAddRecExprLiterally. Expand</span></div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;<span class="comment">/// the base addrec, which is the addrec without any non-loop-dominating</span></div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;<span class="comment">/// values, and return the PHI.</span></div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;SCEVExpander::getAddRecExprPHILiterally(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVAddRecExpr.html">SCEVAddRecExpr</a> *Normalized,</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;                                        <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L,</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;                                        <a class="code" href="classllvm_1_1Type.html">Type</a> *ExpandTy,</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;                                        <a class="code" href="classllvm_1_1Type.html">Type</a> *IntTy) {</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;  assert((!IVIncInsertLoop||IVIncInsertPos) &amp;&amp; <span class="stringliteral">&quot;Uninitialized insert position&quot;</span>);</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;  <span class="comment">// Reuse a previously-inserted PHI, if present.</span></div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *LatchBlock = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a8917d359fc92f25eb0117386588c6f1c">getLoopLatch</a>();</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;  <span class="keywordflow">if</span> (LatchBlock) {</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> I = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;         <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1PHINode.html">PHINode</a>&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>); ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;      <span class="keywordflow">if</span> (!SE.isSCEVable(PN-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()) ||</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;          (SE.getEffectiveSCEVType(PN-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()) !=</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;           SE.getEffectiveSCEVType(Normalized-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#aed1b1d3b764c76210c67dd1b4a6be2f2">getType</a>())) ||</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;          SE.getSCEV(PN) != Normalized)</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *IncV =</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;        cast&lt;Instruction&gt;(PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a21960167f529265a1cb02ac1e8ad10f6">getIncomingValueForBlock</a>(LatchBlock));</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;      <span class="keywordflow">if</span> (LSRMode) {</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;        <span class="keywordflow">if</span> (!isExpandedAddRecExprPHI(PN, IncV, L))</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;        <span class="keywordflow">if</span> (L == IVIncInsertLoop &amp;&amp; !<a class="code" href="classllvm_1_1SCEVExpander.html#a9093ff54a20ae387e9643cc4ed615214">hoistIVInc</a>(IncV, IVIncInsertPos))</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;      }</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        <span class="keywordflow">if</span> (!isNormalAddRecExprPHI(PN, IncV, L))</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;        <span class="keywordflow">if</span> (L == IVIncInsertLoop)</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;          <span class="keywordflow">do</span> {</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;            <span class="keywordflow">if</span> (SE.DT-&gt;dominates(IncV, IVIncInsertPos))</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;              <span class="keywordflow">break</span>;</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;            <span class="comment">// Make sure the increment is where we want it. But don&#39;t move it</span></div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;            <span class="comment">// down past a potential existing post-inc user.</span></div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;            IncV-&gt;<a class="code" href="classllvm_1_1Instruction.html#af67d1f3a518964d80a109bb3d9d5cf1e">moveBefore</a>(IVIncInsertPos);</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;            IVIncInsertPos = IncV;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;            IncV = cast&lt;Instruction&gt;(IncV-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0));</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;          } <span class="keywordflow">while</span> (IncV != PN);</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;      }</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;      <span class="comment">// Ok, the add recurrence looks usable.</span></div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;      <span class="comment">// Remember this PHI, even in post-inc mode.</span></div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;      InsertedValues.insert(PN);</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;      <span class="comment">// Remember the increment.</span></div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;      rememberInstruction(IncV);</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;      <span class="keywordflow">return</span> PN;</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    }</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;  }</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;  <span class="comment">// Save the original insertion point so we can restore it when we&#39;re done.</span></div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;  <a class="code" href="classllvm_1_1IRBuilderBase_1_1InsertPointGuard.html">BuilderType::InsertPointGuard</a> Guard(Builder);</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;  <span class="comment">// Another AddRec may need to be recursively expanded below. For example, if</span></div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;  <span class="comment">// this AddRec is quadratic, the StepV may itself be an AddRec in this</span></div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  <span class="comment">// loop. Remove this loop from the PostIncLoops set before expanding such</span></div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;  <span class="comment">// AddRecs. Otherwise, we cannot find a valid position for the step</span></div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;  <span class="comment">// (i.e. StepV can never dominate its loop header).  Ideally, we could do</span></div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  <span class="comment">// SavedIncLoops.swap(PostIncLoops), but we generally have a single element,</span></div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;  <span class="comment">// so it&#39;s not worth implementing SmallPtrSet::swap.</span></div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">PostIncLoopSet</a> SavedPostIncLoops = PostIncLoops;</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;  PostIncLoops.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#aa72472422d95c7052d62432ec279ff85">clear</a>();</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  <span class="comment">// Expand code for the start value.</span></div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *StartV = <a class="code" href="classllvm_1_1SCEVExpander.html#a583d3ca95f83216d632a4d1ae0330dd0">expandCodeFor</a>(Normalized-&gt;<a class="code" href="classllvm_1_1SCEVAddRecExpr.html#a0d53a749bd858b270d322b34b8d7e1e5">getStart</a>(), ExpandTy,</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                                L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>());</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;  <span class="comment">// StartV must be hoisted into L&#39;s preheader to dominate the new phi.</span></div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;  assert(!isa&lt;Instruction&gt;(StartV) ||</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;         SE.DT-&gt;properlyDominates(cast&lt;Instruction&gt;(StartV)-&gt;getParent(),</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;                                  L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>()));</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;  <span class="comment">// Expand code for the step value. Do this before creating the PHI so that PHI</span></div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;  <span class="comment">// reuse code doesn&#39;t see an incomplete PHI.</span></div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *Step = Normalized-&gt;<a class="code" href="classllvm_1_1SCEVAddRecExpr.html#a443e9130cd9f3e3baaa1b566e6aa5060">getStepRecurrence</a>(SE);</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;  <span class="comment">// If the stride is negative, insert a sub instead of an add for the increment</span></div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  <span class="comment">// (unless it&#39;s a constant, because subtracts of constants are canonicalized</span></div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;  <span class="comment">// to adds).</span></div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  <span class="keywordtype">bool</span> useSubtract = !ExpandTy-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>() &amp;&amp; Step-&gt;<a class="code" href="classllvm_1_1SCEV.html#a004121efb296aedb4f06091d92b89442">isNonConstantNegative</a>();</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;  <span class="keywordflow">if</span> (useSubtract)</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    Step = SE.getNegativeSCEV(Step);</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;  <span class="comment">// Expand the step somewhere that dominates the loop header.</span></div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *StepV = <a class="code" href="classllvm_1_1SCEVExpander.html#a583d3ca95f83216d632a4d1ae0330dd0">expandCodeFor</a>(Step, IntTy, L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>());</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;  <span class="comment">// Create the PHI.</span></div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Header = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>();</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;  Builder.SetInsertPoint(Header, Header-&gt;begin());</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;  <a class="code" href="classllvm_1_1PredIterator.html">pred_iterator</a> HPB = <a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(Header), HPE = <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(Header);</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = Builder.CreatePHI(ExpandTy, std::distance(HPB, HPE),</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;                                  <a class="code" href="classllvm_1_1Twine.html">Twine</a>(IVName) + <span class="stringliteral">&quot;.iv&quot;</span>);</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;  rememberInstruction(PN);</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  <span class="comment">// Create the step instructions and populate the PHI.</span></div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PredIterator.html">pred_iterator</a> HPI = HPB; HPI != HPE; ++HPI) {</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred = *HPI;</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    <span class="comment">// Add a start value.</span></div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a92a38e2e3412bde7fd2b71db212b61aa">contains</a>(Pred)) {</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;      PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(StartV, Pred);</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    }</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <span class="comment">// Create a step value and add it to the PHI.</span></div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <span class="comment">// If IVIncInsertLoop is non-null and equal to the addrec&#39;s loop, insert the</span></div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    <span class="comment">// instructions at IVIncInsertPos.</span></div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InsertPos = L == IVIncInsertLoop ?</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;      IVIncInsertPos : Pred-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>();</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    Builder.SetInsertPoint(InsertPos);</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *IncV = expandIVInc(PN, StepV, L, ExpandTy, IntTy, useSubtract);</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    <span class="keywordflow">if</span> (isa&lt;OverflowingBinaryOperator&gt;(IncV)) {</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;      <span class="keywordflow">if</span> (Normalized-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#aaca141c03630036930698325f423cb49">getNoWrapFlags</a>(<a class="code" href="classllvm_1_1SCEV.html#af43000d4dcb7d6d63cb6e36933ed3f6faafb62cd6afdc004ef6e8a1f6288eb382">SCEV::FlagNUW</a>))</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;        cast&lt;BinaryOperator&gt;(IncV)-&gt;setHasNoUnsignedWrap();</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;      <span class="keywordflow">if</span> (Normalized-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#aaca141c03630036930698325f423cb49">getNoWrapFlags</a>(<a class="code" href="classllvm_1_1SCEV.html#af43000d4dcb7d6d63cb6e36933ed3f6fa2f7a8775a783f7ea3ad24b3f9cb5d949">SCEV::FlagNSW</a>))</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;        cast&lt;BinaryOperator&gt;(IncV)-&gt;setHasNoSignedWrap();</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    }</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(IncV, Pred);</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;  }</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;  <span class="comment">// After expanding subexpressions, restore the PostIncLoops set so the caller</span></div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  <span class="comment">// can ensure that IVIncrement dominates the current uses.</span></div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;  PostIncLoops = SavedPostIncLoops;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;  <span class="comment">// Remember this PHI, even in post-inc mode.</span></div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;  InsertedValues.<a class="code" href="classllvm_1_1SmallPtrSet.html#a9b6dd0fc7a648a939e571246045b673e">insert</a>(PN);</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;  <span class="keywordflow">return</span> PN;</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;}</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *SCEVExpander::expandAddRecExprLiterally(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVAddRecExpr.html">SCEVAddRecExpr</a> *S) {</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *STy = S-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#aed1b1d3b764c76210c67dd1b4a6be2f2">getType</a>();</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *IntTy = SE.getEffectiveSCEVType(STy);</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L = S-&gt;<a class="code" href="classllvm_1_1SCEVAddRecExpr.html#a7fcbbc51eef313e675a2442bb2053ae9">getLoop</a>();</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  <span class="comment">// Determine a normalized form of this expression, which is the expression</span></div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;  <span class="comment">// before any post-inc adjustment is made.</span></div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVAddRecExpr.html">SCEVAddRecExpr</a> *Normalized = <a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>;</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  <span class="keywordflow">if</span> (PostIncLoops.count(L)) {</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">PostIncLoopSet</a> <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>;</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    Loops.<a class="code" href="classllvm_1_1SmallPtrSet.html#a9b6dd0fc7a648a939e571246045b673e">insert</a>(L);</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    Normalized =</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;      cast&lt;SCEVAddRecExpr&gt;(<a class="code" href="namespacellvm.html#adfac6898b7e6f186616ff5c337670296">TransformForPostIncUse</a>(<a class="code" href="namespacellvm.html#a72e1beba38b6627c9307ab8b5141ac64aeb131ce4dfb8eeef7197e6b0afd145d4">Normalize</a>, S, 0, 0,</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;                                                  Loops, SE, *SE.DT));</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  }</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;  <span class="comment">// Strip off any non-loop-dominating component from the addrec start.</span></div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *Start = Normalized-&gt;<a class="code" href="classllvm_1_1SCEVAddRecExpr.html#a0d53a749bd858b270d322b34b8d7e1e5">getStart</a>();</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *PostLoopOffset = 0;</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;  <span class="keywordflow">if</span> (!SE.properlyDominates(Start, L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>())) {</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    PostLoopOffset = Start;</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    Start = SE.getConstant(Normalized-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#aed1b1d3b764c76210c67dd1b4a6be2f2">getType</a>(), 0);</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    Normalized = cast&lt;SCEVAddRecExpr&gt;(</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;      SE.getAddRecExpr(Start, Normalized-&gt;<a class="code" href="classllvm_1_1SCEVAddRecExpr.html#a443e9130cd9f3e3baaa1b566e6aa5060">getStepRecurrence</a>(SE),</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;                       Normalized-&gt;<a class="code" href="classllvm_1_1SCEVAddRecExpr.html#a7fcbbc51eef313e675a2442bb2053ae9">getLoop</a>(),</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;                       Normalized-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#aaca141c03630036930698325f423cb49">getNoWrapFlags</a>(<a class="code" href="classllvm_1_1SCEV.html#af43000d4dcb7d6d63cb6e36933ed3f6faf763167030e97d18e8f8c8ed3dba28e3">SCEV::FlagNW</a>)));</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;  }</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;  <span class="comment">// Strip off any non-loop-dominating component from the addrec step.</span></div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *Step = Normalized-&gt;<a class="code" href="classllvm_1_1SCEVAddRecExpr.html#a443e9130cd9f3e3baaa1b566e6aa5060">getStepRecurrence</a>(SE);</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *PostLoopScale = 0;</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;  <span class="keywordflow">if</span> (!SE.dominates(Step, L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>())) {</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    PostLoopScale = Step;</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    Step = SE.getConstant(Normalized-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#aed1b1d3b764c76210c67dd1b4a6be2f2">getType</a>(), 1);</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    Normalized =</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;      cast&lt;SCEVAddRecExpr&gt;(SE.getAddRecExpr(</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;                             Start, Step, Normalized-&gt;<a class="code" href="classllvm_1_1SCEVAddRecExpr.html#a7fcbbc51eef313e675a2442bb2053ae9">getLoop</a>(),</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;                             Normalized-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#aaca141c03630036930698325f423cb49">getNoWrapFlags</a>(<a class="code" href="classllvm_1_1SCEV.html#af43000d4dcb7d6d63cb6e36933ed3f6faf763167030e97d18e8f8c8ed3dba28e3">SCEV::FlagNW</a>)));</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;  }</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  <span class="comment">// Expand the core addrec. If we need post-loop scaling, force it to</span></div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;  <span class="comment">// expand to an integer type to avoid the need for additional casting.</span></div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *ExpandTy = PostLoopScale ? IntTy : STy;</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = getAddRecExprPHILiterally(Normalized, L, ExpandTy, IntTy);</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;  <span class="comment">// Accommodate post-inc mode, if necessary.</span></div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Result;</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;  <span class="keywordflow">if</span> (!PostIncLoops.count(L))</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    Result = PN;</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;  <span class="keywordflow">else</span> {</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    <span class="comment">// In PostInc mode, use the post-incremented value.</span></div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *LatchBlock = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a8917d359fc92f25eb0117386588c6f1c">getLoopLatch</a>();</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    assert(LatchBlock &amp;&amp; <span class="stringliteral">&quot;PostInc mode requires a unique loop latch!&quot;</span>);</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    Result = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a21960167f529265a1cb02ac1e8ad10f6">getIncomingValueForBlock</a>(LatchBlock);</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    <span class="comment">// For an expansion to use the postinc form, the client must call</span></div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    <span class="comment">// expandCodeFor with an InsertPoint that is either outside the PostIncLoop</span></div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    <span class="comment">// or dominated by IVIncInsertPos.</span></div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    <span class="keywordflow">if</span> (isa&lt;Instruction&gt;(Result)</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;        &amp;&amp; !SE.DT-&gt;dominates(cast&lt;Instruction&gt;(Result),</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;                             Builder.GetInsertPoint())) {</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;      <span class="comment">// The induction variable&#39;s postinc expansion does not dominate this use.</span></div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;      <span class="comment">// IVUsers tries to prevent this case, so it is rare. However, it can</span></div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;      <span class="comment">// happen when an IVUser outside the loop is not dominated by the latch</span></div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;      <span class="comment">// block. Adjusting IVIncInsertPos before expansion begins cannot handle</span></div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;      <span class="comment">// all cases. Consider a phi outide whose operand is replaced during</span></div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;      <span class="comment">// expansion with the value of the postinc user. Without fundamentally</span></div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;      <span class="comment">// changing the way postinc users are tracked, the only remedy is</span></div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;      <span class="comment">// inserting an extra IV increment. StepV might fold into PostLoopOffset,</span></div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;      <span class="comment">// but hopefully expandCodeFor handles that.</span></div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;      <span class="keywordtype">bool</span> useSubtract =</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;        !ExpandTy-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>() &amp;&amp; Step-&gt;<a class="code" href="classllvm_1_1SCEV.html#a004121efb296aedb4f06091d92b89442">isNonConstantNegative</a>();</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;      <span class="keywordflow">if</span> (useSubtract)</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;        Step = SE.getNegativeSCEV(Step);</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *StepV;</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;      {</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;        <span class="comment">// Expand the step somewhere that dominates the loop header.</span></div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;        <a class="code" href="classllvm_1_1IRBuilderBase_1_1InsertPointGuard.html">BuilderType::InsertPointGuard</a> Guard(Builder);</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;        StepV = <a class="code" href="classllvm_1_1SCEVExpander.html#a583d3ca95f83216d632a4d1ae0330dd0">expandCodeFor</a>(Step, IntTy, L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>());</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;      }</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;      Result = expandIVInc(PN, StepV, L, ExpandTy, IntTy, useSubtract);</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    }</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;  }</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;  <span class="comment">// Re-apply any non-loop-dominating scale.</span></div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;  <span class="keywordflow">if</span> (PostLoopScale) {</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    assert(S-&gt;<a class="code" href="classllvm_1_1SCEVAddRecExpr.html#a88f514461ddb0af0fc59ac4639f644bc">isAffine</a>() &amp;&amp; <span class="stringliteral">&quot;Can&#39;t linearly scale non-affine recurrences.&quot;</span>);</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    Result = InsertNoopCastOfTo(Result, IntTy);</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    Result = Builder.CreateMul(Result,</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;                               <a class="code" href="classllvm_1_1SCEVExpander.html#a583d3ca95f83216d632a4d1ae0330dd0">expandCodeFor</a>(PostLoopScale, IntTy));</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    rememberInstruction(Result);</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;  }</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;  <span class="comment">// Re-apply any non-loop-dominating offset.</span></div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;  <span class="keywordflow">if</span> (PostLoopOffset) {</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1PointerType.html">PointerType</a> *PTy = dyn_cast&lt;PointerType&gt;(ExpandTy)) {</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *<span class="keyword">const</span> OffsetArray[1] = { PostLoopOffset };</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;      Result = expandAddToGEP(OffsetArray, OffsetArray+1, PTy, IntTy, Result);</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;      Result = InsertNoopCastOfTo(Result, IntTy);</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;      Result = Builder.CreateAdd(Result,</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;                                 <a class="code" href="classllvm_1_1SCEVExpander.html#a583d3ca95f83216d632a4d1ae0330dd0">expandCodeFor</a>(PostLoopOffset, IntTy));</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;      rememberInstruction(Result);</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    }</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;  }</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;  <span class="keywordflow">return</span> Result;</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;}</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *SCEVExpander::visitAddRecExpr(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVAddRecExpr.html">SCEVAddRecExpr</a> *S) {</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;  <span class="keywordflow">if</span> (!CanonicalMode) <span class="keywordflow">return</span> expandAddRecExprLiterally(S);</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = SE.getEffectiveSCEVType(S-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#aed1b1d3b764c76210c67dd1b4a6be2f2">getType</a>());</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L = S-&gt;<a class="code" href="classllvm_1_1SCEVAddRecExpr.html#a7fcbbc51eef313e675a2442bb2053ae9">getLoop</a>();</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;  <span class="comment">// First check for an existing canonical IV in a suitable type.</span></div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *CanonicalIV = 0;</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = L-&gt;<a class="code" href="classllvm_1_1Loop.html#a72bbf45d2e00971f56bf8cfe4e1df01c">getCanonicalInductionVariable</a>())</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    <span class="keywordflow">if</span> (SE.getTypeSizeInBits(PN-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()) &gt;= SE.getTypeSizeInBits(Ty))</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;      CanonicalIV = PN;</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;  <span class="comment">// Rewrite an AddRec in terms of the canonical induction variable, if</span></div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;  <span class="comment">// its type is more narrow.</span></div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;  <span class="keywordflow">if</span> (CanonicalIV &amp;&amp;</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;      SE.getTypeSizeInBits(CanonicalIV-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()) &gt;</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;      SE.getTypeSizeInBits(Ty)) {</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const SCEV *, 4&gt;</a> NewOps(S-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#a97221eb4fea7333f0b7b35b35e1169b2">getNumOperands</a>());</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = S-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#a97221eb4fea7333f0b7b35b35e1169b2">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;      NewOps[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = SE.getAnyExtendExpr(S-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#a107163b3c781d2b0137bf2021e7dc984">op_begin</a>()[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], CanonicalIV-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *V = expand(SE.getAddRecExpr(NewOps, S-&gt;<a class="code" href="classllvm_1_1SCEVAddRecExpr.html#a7fcbbc51eef313e675a2442bb2053ae9">getLoop</a>(),</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;                                       S-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#aaca141c03630036930698325f423cb49">getNoWrapFlags</a>(<a class="code" href="classllvm_1_1SCEV.html#af43000d4dcb7d6d63cb6e36933ed3f6faf763167030e97d18e8f8c8ed3dba28e3">SCEV::FlagNW</a>)));</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;    <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> NewInsertPt =</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;      <a class="code" href="namespacellvm.html#aa1704159f75e6eacd595962ea6d93ffe">llvm::next</a>(<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a>(cast&lt;Instruction&gt;(V)));</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    <a class="code" href="classllvm_1_1IRBuilderBase_1_1InsertPointGuard.html">BuilderType::InsertPointGuard</a> Guard(Builder);</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    <span class="keywordflow">while</span> (isa&lt;PHINode&gt;(NewInsertPt) || isa&lt;DbgInfoIntrinsic&gt;(NewInsertPt) ||</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;           isa&lt;LandingPadInst&gt;(NewInsertPt))</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;      ++NewInsertPt;</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;    V = <a class="code" href="classllvm_1_1SCEVExpander.html#a583d3ca95f83216d632a4d1ae0330dd0">expandCodeFor</a>(SE.getTruncateExpr(SE.getUnknown(V), Ty), 0,</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;                      NewInsertPt);</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    <span class="keywordflow">return</span> V;</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;  }</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;  <span class="comment">// {X,+,F} --&gt; X + {0,+,F}</span></div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;  <span class="keywordflow">if</span> (!S-&gt;<a class="code" href="classllvm_1_1SCEVAddRecExpr.html#a0d53a749bd858b270d322b34b8d7e1e5">getStart</a>()-&gt;<a class="code" href="classllvm_1_1SCEV.html#a3f76d2fd4788225548dc36ef9e417030">isZero</a>()) {</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const SCEV *, 4&gt;</a> NewOps(S-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#a107163b3c781d2b0137bf2021e7dc984">op_begin</a>(), S-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#a5877c3a289aa71796140f54b73f654f7">op_end</a>());</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;    NewOps[0] = SE.getConstant(Ty, 0);</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *Rest = SE.getAddRecExpr(NewOps, L,</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;                                        S-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#aaca141c03630036930698325f423cb49">getNoWrapFlags</a>(<a class="code" href="classllvm_1_1SCEV.html#af43000d4dcb7d6d63cb6e36933ed3f6faf763167030e97d18e8f8c8ed3dba28e3">SCEV::FlagNW</a>));</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    <span class="comment">// Turn things like ptrtoint+arithmetic+inttoptr into GEP. See the</span></div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    <span class="comment">// comments on expandAddToGEP for details.</span></div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *Base = S-&gt;<a class="code" href="classllvm_1_1SCEVAddRecExpr.html#a0d53a749bd858b270d322b34b8d7e1e5">getStart</a>();</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *RestArray[1] = { Rest };</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    <span class="comment">// Dig into the expression to find the pointer base for a GEP.</span></div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    <a class="code" href="ScalarEvolutionExpander_8cpp.html#aeb811bb4a3e1c56acb04c713200c9a42">ExposePointerBase</a>(Base, RestArray[0], SE);</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    <span class="comment">// If we found a pointer, expand the AddRec with a GEP.</span></div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1PointerType.html">PointerType</a> *PTy = dyn_cast&lt;PointerType&gt;(Base-&gt;<a class="code" href="classllvm_1_1SCEV.html#a9a16f1241255a605fc8debc1e26eaa4c">getType</a>())) {</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;      <span class="comment">// Make sure the Base isn&#39;t something exotic, such as a multiplied</span></div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;      <span class="comment">// or divided pointer value. In those cases, the result type isn&#39;t</span></div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;      <span class="comment">// actually a pointer type.</span></div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;      <span class="keywordflow">if</span> (!isa&lt;SCEVMulExpr&gt;(Base) &amp;&amp; !isa&lt;SCEVUDivExpr&gt;(Base)) {</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *StartV = expand(Base);</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;        assert(StartV-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() == PTy &amp;&amp; <span class="stringliteral">&quot;Pointer type mismatch for GEP!&quot;</span>);</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;        <span class="keywordflow">return</span> expandAddToGEP(RestArray, RestArray+1, PTy, Ty, StartV);</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;      }</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;    }</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    <span class="comment">// Just do a normal add. Pre-expand the operands to suppress folding.</span></div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    <span class="keywordflow">return</span> expand(SE.getAddExpr(SE.getUnknown(expand(S-&gt;<a class="code" href="classllvm_1_1SCEVAddRecExpr.html#a0d53a749bd858b270d322b34b8d7e1e5">getStart</a>())),</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;                                SE.getUnknown(expand(Rest))));</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;  }</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;  <span class="comment">// If we don&#39;t yet have a canonical IV, create one.</span></div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;  <span class="keywordflow">if</span> (!CanonicalIV) {</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    <span class="comment">// Create and insert the PHI node for the induction variable in the</span></div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    <span class="comment">// specified loop.</span></div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Header = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>();</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    <a class="code" href="classllvm_1_1PredIterator.html">pred_iterator</a> HPB = <a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(Header), HPE = <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(Header);</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    CanonicalIV = <a class="code" href="classllvm_1_1PHINode.html#afb5e83bf5123ff7c51058eb0ebebcdc6">PHINode::Create</a>(Ty, std::distance(HPB, HPE), <span class="stringliteral">&quot;indvar&quot;</span>,</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;                                  Header-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>());</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    rememberInstruction(CanonicalIV);</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    <a class="code" href="classllvm_1_1SmallSet.html">SmallSet&lt;BasicBlock *, 4&gt;</a> PredSeen;</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *One = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(Ty, 1);</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PredIterator.html">pred_iterator</a> HPI = HPB; HPI != HPE; ++HPI) {</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *HP = *HPI;</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;      <span class="keywordflow">if</span> (!PredSeen.<a class="code" href="classllvm_1_1SmallSet.html#a8d8348060ccdeeba13fb8bc651dfbf82">insert</a>(HP))</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;      <span class="keywordflow">if</span> (L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a92a38e2e3412bde7fd2b71db212b61aa">contains</a>(HP)) {</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;        <span class="comment">// Insert a unit add instruction right before the terminator</span></div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;        <span class="comment">// corresponding to the back-edge.</span></div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Add = BinaryOperator::CreateAdd(CanonicalIV, One,</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;                                                     <span class="stringliteral">&quot;indvar.next&quot;</span>,</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;                                                     HP-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>());</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;        Add-&gt;<a class="code" href="classllvm_1_1Instruction.html#a7bd545769621a0a9d2cfb074f86f4295">setDebugLoc</a>(HP-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">getDebugLoc</a>());</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;        rememberInstruction(Add);</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;        CanonicalIV-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(Add, HP);</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;        CanonicalIV-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(<a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Ty), HP);</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;      }</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    }</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;  }</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;  <span class="comment">// {0,+,1} --&gt; Insert a canonical induction variable into the loop!</span></div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;  <span class="keywordflow">if</span> (S-&gt;<a class="code" href="classllvm_1_1SCEVAddRecExpr.html#a88f514461ddb0af0fc59ac4639f644bc">isAffine</a>() &amp;&amp; S-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#a8d1a2d2a4d2f935841d226bbcbf54a48">getOperand</a>(1)-&gt;<a class="code" href="classllvm_1_1SCEV.html#a3935a9de0ebdf3dc625cfb28e35bd009">isOne</a>()) {</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    assert(Ty == SE.getEffectiveSCEVType(CanonicalIV-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()) &amp;&amp;</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;           <span class="stringliteral">&quot;IVs with types different from the canonical IV should &quot;</span></div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;           <span class="stringliteral">&quot;already have been handled!&quot;</span>);</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;    <span class="keywordflow">return</span> CanonicalIV;</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;  }</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;  <span class="comment">// {0,+,F} --&gt; {0,+,1} * F</span></div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;  <span class="comment">// If this is a simple linear addrec, emit it now as a special case.</span></div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;  <span class="keywordflow">if</span> (S-&gt;<a class="code" href="classllvm_1_1SCEVAddRecExpr.html#a88f514461ddb0af0fc59ac4639f644bc">isAffine</a>())    <span class="comment">// {0,+,F} --&gt; i*F</span></div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    <span class="keywordflow">return</span></div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;      expand(SE.getTruncateOrNoop(</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;        SE.getMulExpr(SE.getUnknown(CanonicalIV),</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;                      SE.getNoopOrAnyExtend(S-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#a8d1a2d2a4d2f935841d226bbcbf54a48">getOperand</a>(1),</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;                                            CanonicalIV-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())),</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;        Ty));</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;  <span class="comment">// If this is a chain of recurrences, turn it into a closed form, using the</span></div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;  <span class="comment">// folders, then expandCodeFor the closed form.  This allows the folders to</span></div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;  <span class="comment">// simplify the expression without having to build a bunch of special code</span></div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;  <span class="comment">// into this folder.</span></div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *IH = SE.getUnknown(CanonicalIV);   <span class="comment">// Get I as a &quot;symbolic&quot; SCEV.</span></div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;  <span class="comment">// Promote S up to the canonical IV type, if the cast is foldable.</span></div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *NewS = <a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>;</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *<a class="code" href="namespacellvm_1_1MipsISD.html#a7a7035feda1dc16252a7a15a7e230122a88a797f57846adb2c382b3732b471913">Ext</a> = SE.getNoopOrAnyExtend(S, CanonicalIV-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;  <span class="keywordflow">if</span> (isa&lt;SCEVAddRecExpr&gt;(Ext))</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    NewS = Ext;</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *V = cast&lt;SCEVAddRecExpr&gt;(NewS)-&gt;evaluateAtIteration(IH, SE);</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;  <span class="comment">//cerr &lt;&lt; &quot;Evaluated: &quot; &lt;&lt; *this &lt;&lt; &quot;\n     to: &quot; &lt;&lt; *V &lt;&lt; &quot;\n&quot;;</span></div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;  <span class="comment">// Truncate the result down to the original type, if needed.</span></div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *<a class="code" href="classT.html">T</a> = SE.getTruncateOrNoop(V, Ty);</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;  <span class="keywordflow">return</span> expand(T);</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;}</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *SCEVExpander::visitTruncateExpr(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVTruncateExpr.html">SCEVTruncateExpr</a> *S) {</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = SE.getEffectiveSCEVType(S-&gt;<a class="code" href="classllvm_1_1SCEVCastExpr.html#a43b64c3b800f1451fee1e2c42eb61f92">getType</a>());</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="classllvm_1_1SCEVExpander.html#a583d3ca95f83216d632a4d1ae0330dd0">expandCodeFor</a>(S-&gt;<a class="code" href="classllvm_1_1SCEVCastExpr.html#a84e9130d41f267f3f1bb29f432af267d">getOperand</a>(),</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;                           SE.getEffectiveSCEVType(S-&gt;<a class="code" href="classllvm_1_1SCEVCastExpr.html#a84e9130d41f267f3f1bb29f432af267d">getOperand</a>()-&gt;<a class="code" href="classllvm_1_1SCEV.html#a9a16f1241255a605fc8debc1e26eaa4c">getType</a>()));</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *I = Builder.CreateTrunc(V, Ty);</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;  rememberInstruction(I);</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;}</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *SCEVExpander::visitZeroExtendExpr(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVZeroExtendExpr.html">SCEVZeroExtendExpr</a> *S) {</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = SE.getEffectiveSCEVType(S-&gt;<a class="code" href="classllvm_1_1SCEVCastExpr.html#a43b64c3b800f1451fee1e2c42eb61f92">getType</a>());</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="classllvm_1_1SCEVExpander.html#a583d3ca95f83216d632a4d1ae0330dd0">expandCodeFor</a>(S-&gt;<a class="code" href="classllvm_1_1SCEVCastExpr.html#a84e9130d41f267f3f1bb29f432af267d">getOperand</a>(),</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;                           SE.getEffectiveSCEVType(S-&gt;<a class="code" href="classllvm_1_1SCEVCastExpr.html#a84e9130d41f267f3f1bb29f432af267d">getOperand</a>()-&gt;<a class="code" href="classllvm_1_1SCEV.html#a9a16f1241255a605fc8debc1e26eaa4c">getType</a>()));</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *I = Builder.CreateZExt(V, Ty);</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;  rememberInstruction(I);</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;}</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *SCEVExpander::visitSignExtendExpr(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVSignExtendExpr.html">SCEVSignExtendExpr</a> *S) {</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = SE.getEffectiveSCEVType(S-&gt;<a class="code" href="classllvm_1_1SCEVCastExpr.html#a43b64c3b800f1451fee1e2c42eb61f92">getType</a>());</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="classllvm_1_1SCEVExpander.html#a583d3ca95f83216d632a4d1ae0330dd0">expandCodeFor</a>(S-&gt;<a class="code" href="classllvm_1_1SCEVCastExpr.html#a84e9130d41f267f3f1bb29f432af267d">getOperand</a>(),</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;                           SE.getEffectiveSCEVType(S-&gt;<a class="code" href="classllvm_1_1SCEVCastExpr.html#a84e9130d41f267f3f1bb29f432af267d">getOperand</a>()-&gt;<a class="code" href="classllvm_1_1SCEV.html#a9a16f1241255a605fc8debc1e26eaa4c">getType</a>()));</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *I = Builder.CreateSExt(V, Ty);</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;  rememberInstruction(I);</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;}</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *SCEVExpander::visitSMaxExpr(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVSMaxExpr.html">SCEVSMaxExpr</a> *S) {</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *LHS = expand(S-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#a8d1a2d2a4d2f935841d226bbcbf54a48">getOperand</a>(S-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#a97221eb4fea7333f0b7b35b35e1169b2">getNumOperands</a>()-1));</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = LHS-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = S-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#a97221eb4fea7333f0b7b35b35e1169b2">getNumOperands</a>()-2; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt;= 0; --<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    <span class="comment">// In the case of mixed integer and pointer types, do the</span></div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;    <span class="comment">// rest of the comparisons as integer.</span></div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    <span class="keywordflow">if</span> (S-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#a8d1a2d2a4d2f935841d226bbcbf54a48">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)-&gt;<a class="code" href="classllvm_1_1SCEV.html#a9a16f1241255a605fc8debc1e26eaa4c">getType</a>() != Ty) {</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;      Ty = SE.getEffectiveSCEVType(Ty);</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;      LHS = InsertNoopCastOfTo(LHS, Ty);</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    }</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *RHS = <a class="code" href="classllvm_1_1SCEVExpander.html#a583d3ca95f83216d632a4d1ae0330dd0">expandCodeFor</a>(S-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#a8d1a2d2a4d2f935841d226bbcbf54a48">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>), Ty);</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *ICmp = Builder.CreateICmpSGT(LHS, RHS);</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    rememberInstruction(ICmp);</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Sel = Builder.CreateSelect(ICmp, LHS, RHS, <span class="stringliteral">&quot;smax&quot;</span>);</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    rememberInstruction(Sel);</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    LHS = Sel;</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;  }</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;  <span class="comment">// In the case of mixed integer and pointer types, cast the</span></div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;  <span class="comment">// final result back to the pointer type.</span></div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;  <span class="keywordflow">if</span> (LHS-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() != S-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#aed1b1d3b764c76210c67dd1b4a6be2f2">getType</a>())</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    LHS = InsertNoopCastOfTo(LHS, S-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#aed1b1d3b764c76210c67dd1b4a6be2f2">getType</a>());</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;  <span class="keywordflow">return</span> LHS;</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;}</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *SCEVExpander::visitUMaxExpr(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVUMaxExpr.html">SCEVUMaxExpr</a> *S) {</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *LHS = expand(S-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#a8d1a2d2a4d2f935841d226bbcbf54a48">getOperand</a>(S-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#a97221eb4fea7333f0b7b35b35e1169b2">getNumOperands</a>()-1));</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = LHS-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = S-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#a97221eb4fea7333f0b7b35b35e1169b2">getNumOperands</a>()-2; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt;= 0; --<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;    <span class="comment">// In the case of mixed integer and pointer types, do the</span></div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;    <span class="comment">// rest of the comparisons as integer.</span></div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;    <span class="keywordflow">if</span> (S-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#a8d1a2d2a4d2f935841d226bbcbf54a48">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)-&gt;<a class="code" href="classllvm_1_1SCEV.html#a9a16f1241255a605fc8debc1e26eaa4c">getType</a>() != Ty) {</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;      Ty = SE.getEffectiveSCEVType(Ty);</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;      LHS = InsertNoopCastOfTo(LHS, Ty);</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;    }</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *RHS = <a class="code" href="classllvm_1_1SCEVExpander.html#a583d3ca95f83216d632a4d1ae0330dd0">expandCodeFor</a>(S-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#a8d1a2d2a4d2f935841d226bbcbf54a48">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>), Ty);</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *ICmp = Builder.CreateICmpUGT(LHS, RHS);</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;    rememberInstruction(ICmp);</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Sel = Builder.CreateSelect(ICmp, LHS, RHS, <span class="stringliteral">&quot;umax&quot;</span>);</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;    rememberInstruction(Sel);</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;    LHS = Sel;</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;  }</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;  <span class="comment">// In the case of mixed integer and pointer types, cast the</span></div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;  <span class="comment">// final result back to the pointer type.</span></div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;  <span class="keywordflow">if</span> (LHS-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() != S-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#aed1b1d3b764c76210c67dd1b4a6be2f2">getType</a>())</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;    LHS = InsertNoopCastOfTo(LHS, S-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#aed1b1d3b764c76210c67dd1b4a6be2f2">getType</a>());</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;  <span class="keywordflow">return</span> LHS;</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;}</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;</div><div class="line"><a name="l01468"></a><span class="lineno"><a class="line" href="classllvm_1_1SCEVExpander.html#a583d3ca95f83216d632a4d1ae0330dd0"> 1468</a></span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classllvm_1_1SCEVExpander.html#a583d3ca95f83216d632a4d1ae0330dd0">SCEVExpander::expandCodeFor</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *SH, <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty,</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;                                   <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *IP) {</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;  Builder.SetInsertPoint(IP-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>(), IP);</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SCEVExpander.html#a583d3ca95f83216d632a4d1ae0330dd0">expandCodeFor</a>(SH, Ty);</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;}</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classllvm_1_1SCEVExpander.html#a583d3ca95f83216d632a4d1ae0330dd0">SCEVExpander::expandCodeFor</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *SH, <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty) {</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;  <span class="comment">// Expand the code for this SCEV.</span></div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *V = expand(SH);</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;  <span class="keywordflow">if</span> (Ty) {</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;    assert(SE.getTypeSizeInBits(Ty) == SE.getTypeSizeInBits(SH-&gt;<a class="code" href="classllvm_1_1SCEV.html#a9a16f1241255a605fc8debc1e26eaa4c">getType</a>()) &amp;&amp;</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;           <span class="stringliteral">&quot;non-trivial casts should be done with the SCEVs directly!&quot;</span>);</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;    V = InsertNoopCastOfTo(V, Ty);</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;  }</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;  <span class="keywordflow">return</span> V;</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;}</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *SCEVExpander::expand(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *S) {</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;  <span class="comment">// Compute an insertion point for this SCEV object. Hoist the instructions</span></div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;  <span class="comment">// as far out in the loop nest as possible.</span></div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InsertPt = Builder.GetInsertPoint();</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L = SE.LI-&gt;getLoopFor(Builder.GetInsertBlock()); ;</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;       L = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1431766de798501f107d9031821f311e">getParentLoop</a>())</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    <span class="keywordflow">if</span> (SE.isLoopInvariant(S, L)) {</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;      <span class="keywordflow">if</span> (!L) <span class="keywordflow">break</span>;</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Preheader = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1bc74c76b876ad387293ecde0f21ed45">getLoopPreheader</a>())</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;        InsertPt = Preheader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>();</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;        <span class="comment">// LSR sets the insertion point for AddRec start/step values to the</span></div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;        <span class="comment">// block start to simplify value reuse, even though it&#39;s an invalid</span></div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;        <span class="comment">// position. SCEVExpander must correct for this in all cases.</span></div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;        InsertPt = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ab1cd5a3713b93a33f89a2086d473cf6e">getFirstInsertionPt</a>();</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;      }</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;      <span class="comment">// If the SCEV is computable at this level, insert it into the header</span></div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;      <span class="comment">// after the PHIs (and after any other instructions that we&#39;ve inserted</span></div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;      <span class="comment">// there) so that it is guaranteed to dominate any user inside the loop.</span></div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;      <span class="keywordflow">if</span> (L &amp;&amp; SE.hasComputableLoopEvolution(S, L) &amp;&amp; !PostIncLoops.count(L))</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;        InsertPt = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ab1cd5a3713b93a33f89a2086d473cf6e">getFirstInsertionPt</a>();</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;      <span class="keywordflow">while</span> (InsertPt != Builder.GetInsertPoint()</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;             &amp;&amp; (<a class="code" href="classllvm_1_1SCEVExpander.html#a6b023424193e702b745da77d6ead62e8">isInsertedInstruction</a>(InsertPt)</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;                 || isa&lt;DbgInfoIntrinsic&gt;(InsertPt))) {</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;        InsertPt = <a class="code" href="namespacellvm.html#aa1704159f75e6eacd595962ea6d93ffe">llvm::next</a>(<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a>(InsertPt));</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;      }</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;    }</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;  <span class="comment">// Check to see if we already expanded this here.</span></div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;  std::map&lt;std::pair&lt;const SCEV *, Instruction *&gt;, <a class="code" href="classllvm_1_1TrackingVH.html">TrackingVH&lt;Value&gt;</a> &gt;::iterator</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;    I = InsertedExpressions.find(std::make_pair(S, InsertPt));</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;  <span class="keywordflow">if</span> (I != InsertedExpressions.end())</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    <span class="keywordflow">return</span> I-&gt;second;</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;  <a class="code" href="classllvm_1_1IRBuilderBase_1_1InsertPointGuard.html">BuilderType::InsertPointGuard</a> Guard(Builder);</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;  Builder.SetInsertPoint(InsertPt-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>(), InsertPt);</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;  <span class="comment">// Expand the expression into instructions.</span></div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="structllvm_1_1SCEVVisitor.html#a1e7a5297e3ded4db5e828ee4bd651b34">visit</a>(S);</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;  <span class="comment">// Remember the expanded value for this SCEV at this location.</span></div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;  <span class="comment">// This is independent of PostIncLoops. The mapped value simply materializes</span></div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;  <span class="comment">// the expression at this insertion point. If the mapped value happened to be</span></div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;  <span class="comment">// a postinc expansion, it could be reused by a non postinc user, but only if</span></div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;  <span class="comment">// its insertion point was already at the head of the loop.</span></div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;  InsertedExpressions[std::make_pair(S, InsertPt)] = V;</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;  <span class="keywordflow">return</span> V;</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;}</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;<span class="keywordtype">void</span> SCEVExpander::rememberInstruction(<a class="code" href="classllvm_1_1Value.html">Value</a> *I) {</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;  <span class="keywordflow">if</span> (!PostIncLoops.empty())</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    InsertedPostIncValues.insert(I);</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;    InsertedValues.insert(I);</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;}</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;<span class="comment">/// getOrInsertCanonicalInductionVariable - This method returns the</span></div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;<span class="comment">/// canonical induction variable of the specified type for the specified</span></div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;<span class="comment">/// loop (inserting one if there is none).  A canonical induction variable</span></div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;<span class="comment">/// starts at zero and steps by one on each iteration.</span></div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *</div><div class="line"><a name="l01549"></a><span class="lineno"><a class="line" href="classllvm_1_1SCEVExpander.html#a48f2a886637b7ccf57c00ad89d4df1a7"> 1549</a></span>&#160;<a class="code" href="classllvm_1_1SCEVExpander.html#a48f2a886637b7ccf57c00ad89d4df1a7">SCEVExpander::getOrInsertCanonicalInductionVariable</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L,</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;                                                    <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty) {</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;  assert(Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>() &amp;&amp; <span class="stringliteral">&quot;Can only insert integer induction variables!&quot;</span>);</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;  <span class="comment">// Build a SCEV for {0,+,1}&lt;L&gt;.</span></div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;  <span class="comment">// Conservatively use FlagAnyWrap for now.</span></div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *<a class="code" href="MD5_8cpp.html#ae42219072d798876e6b08e6b78614ff6">H</a> = SE.getAddRecExpr(SE.getConstant(Ty, 0),</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;                                   SE.getConstant(Ty, 1), L, <a class="code" href="classllvm_1_1SCEV.html#af43000d4dcb7d6d63cb6e36933ed3f6fa23e74052c4d79cfdaa23460a3c946656">SCEV::FlagAnyWrap</a>);</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;  <span class="comment">// Emit code for it.</span></div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;  <a class="code" href="classllvm_1_1IRBuilderBase_1_1InsertPointGuard.html">BuilderType::InsertPointGuard</a> Guard(Builder);</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *V = cast&lt;PHINode&gt;(<a class="code" href="classllvm_1_1SCEVExpander.html#a583d3ca95f83216d632a4d1ae0330dd0">expandCodeFor</a>(H, 0, L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>()));</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;  <span class="keywordflow">return</span> V;</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;}</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;<span class="comment">/// Sort values by integer width for replaceCongruentIVs.</span></div><div class="line"><a name="l01566"></a><span class="lineno"><a class="line" href="ScalarEvolutionExpander_8cpp.html#ae1abc6cc8542d8d240fc78625714f330"> 1566</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="ScalarEvolutionExpander_8cpp.html#ae1abc6cc8542d8d240fc78625714f330">width_descending</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *lhs, <a class="code" href="classllvm_1_1Value.html">Value</a> *rhs) {</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;  <span class="comment">// Put pointers at the back and make sure pointer &lt; pointer = false.</span></div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;  <span class="keywordflow">if</span> (!lhs-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>() || !rhs-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>())</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;    <span class="keywordflow">return</span> rhs-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>() &amp;&amp; !lhs-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>();</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;  <span class="keywordflow">return</span> rhs-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a5a7cfa245af120b44ac8a86143bb9e57">getPrimitiveSizeInBits</a>()</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;    &lt; lhs-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a5a7cfa245af120b44ac8a86143bb9e57">getPrimitiveSizeInBits</a>();</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;}</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;<span class="comment">/// replaceCongruentIVs - Check for congruent phis in this loop header and</span></div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;<span class="comment">/// replace them with their most canonical representative. Return the number of</span></div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;<span class="comment">/// phis eliminated.</span></div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;<span class="comment">/// This does not depend on any SCEVExpander state but should be used in</span></div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;<span class="comment">/// the same context that SCEVExpander is used.</span></div><div class="line"><a name="l01580"></a><span class="lineno"><a class="line" href="classllvm_1_1SCEVExpander.html#ab35b69a7c369aadf7ac052ab21ad2ec6"> 1580</a></span>&#160;<span class="comment"></span><span class="keywordtype">unsigned</span> <a class="code" href="classllvm_1_1SCEVExpander.html#ab35b69a7c369aadf7ac052ab21ad2ec6">SCEVExpander::replaceCongruentIVs</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <span class="keyword">const</span> <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT,</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;                                           <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;WeakVH&gt;</a> &amp;DeadInsts,</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;                                           <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> *TTI) {</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;  <span class="comment">// Find integer phis in order of increasing width.</span></div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;PHINode*, 8&gt;</a> Phis;</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> I = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;       <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *Phi = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1PHINode.html">PHINode</a>&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>); ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;    Phis.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Phi);</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;  }</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;  <span class="keywordflow">if</span> (TTI)</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;    std::sort(Phis.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), Phis.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>(), <a class="code" href="ScalarEvolutionExpander_8cpp.html#ae1abc6cc8542d8d240fc78625714f330">width_descending</a>);</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;  <span class="keywordtype">unsigned</span> NumElim = 0;</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;const SCEV *, PHINode *&gt;</a> ExprToIVMap;</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;  <span class="comment">// Process phis from wide to narrow. Mapping wide phis to the their truncation</span></div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;  <span class="comment">// so narrow phis can reuse them.</span></div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classT.html">SmallVectorImpl&lt;PHINode*&gt;::const_iterator</a> PIter = Phis.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(),</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;         PEnd = Phis.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>(); PIter != PEnd; ++PIter) {</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *Phi = *PIter;</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    <span class="comment">// Fold constant phis. They may be congruent to other constant phis and</span></div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;    <span class="comment">// would confuse the logic below that expects proper IVs.</span></div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = Phi-&gt;<a class="code" href="classllvm_1_1PHINode.html#ab421865744bd8b5aea08be18e86c6aa5">hasConstantValue</a>()) {</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;      Phi-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(V);</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;      DeadInsts.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Phi);</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;      ++NumElim;</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;      <a class="code" href="Debug_8h.html#a0e760853102aabaceef5ef82347c593c">DEBUG_WITH_TYPE</a>(DebugType, <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;INDVARS: Eliminated constant iv: &quot;</span> &lt;&lt; *Phi &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    }</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;    <span class="keywordflow">if</span> (!SE.isSCEVable(Phi-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()))</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *&amp;OrigPhiRef = ExprToIVMap[SE.getSCEV(Phi)];</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;    <span class="keywordflow">if</span> (!OrigPhiRef) {</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;      OrigPhiRef = Phi;</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;      <span class="keywordflow">if</span> (Phi-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>() &amp;&amp; TTI</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;          &amp;&amp; TTI-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#a547c815fb7093e41196bc8dd0c4b9317">isTruncateFree</a>(Phi-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), Phis.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#acd9e771a3296c6b24146955754620557">back</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())) {</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;        <span class="comment">// This phi can be freely truncated to the narrowest phi type. Map the</span></div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;        <span class="comment">// truncated expression to it so it will be reused for narrow types.</span></div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *TruncExpr =</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;          SE.getTruncateExpr(SE.getSCEV(Phi), Phis.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#acd9e771a3296c6b24146955754620557">back</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;        ExprToIVMap[TruncExpr] = Phi;</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;      }</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    }</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    <span class="comment">// Replacing a pointer phi with an integer phi or vice-versa doesn&#39;t make</span></div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;    <span class="comment">// sense.</span></div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;    <span class="keywordflow">if</span> (OrigPhiRef-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>() != Phi-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>())</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *LatchBlock = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a8917d359fc92f25eb0117386588c6f1c">getLoopLatch</a>()) {</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *OrigInc =</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;        cast&lt;Instruction&gt;(OrigPhiRef-&gt;<a class="code" href="classllvm_1_1PHINode.html#a21960167f529265a1cb02ac1e8ad10f6">getIncomingValueForBlock</a>(LatchBlock));</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *IsomorphicInc =</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;        cast&lt;Instruction&gt;(Phi-&gt;<a class="code" href="classllvm_1_1PHINode.html#a21960167f529265a1cb02ac1e8ad10f6">getIncomingValueForBlock</a>(LatchBlock));</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;      <span class="comment">// If this phi has the same width but is more canonical, replace the</span></div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;      <span class="comment">// original with it. As part of the &quot;more canonical&quot; determination,</span></div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;      <span class="comment">// respect a prior decision to use an IV chain.</span></div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;      <span class="keywordflow">if</span> (OrigPhiRef-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() == Phi-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;          &amp;&amp; !(ChainedPhis.count(Phi)</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;               || isExpandedAddRecExprPHI(OrigPhiRef, OrigInc, L))</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;          &amp;&amp; (ChainedPhis.count(Phi)</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;              || isExpandedAddRecExprPHI(Phi, IsomorphicInc, L))) {</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;        <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(OrigPhiRef, Phi);</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;        <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(OrigInc, IsomorphicInc);</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;      }</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;      <span class="comment">// Replacing the congruent phi is sufficient because acyclic redundancy</span></div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;      <span class="comment">// elimination, CSE/GVN, should handle the rest. However, once SCEV proves</span></div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;      <span class="comment">// that a phi is congruent, it&#39;s often the head of an IV user cycle that</span></div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;      <span class="comment">// is isomorphic with the original phi. It&#39;s worth eagerly cleaning up the</span></div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;      <span class="comment">// common case of a single IV increment so that DeleteDeadPHIs can remove</span></div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;      <span class="comment">// cycles that had postinc uses.</span></div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *TruncExpr = SE.getTruncateOrNoop(SE.getSCEV(OrigInc),</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;                                                   IsomorphicInc-&gt;getType());</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;      <span class="keywordflow">if</span> (OrigInc != IsomorphicInc</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;          &amp;&amp; TruncExpr == SE.getSCEV(IsomorphicInc)</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;          &amp;&amp; ((isa&lt;PHINode&gt;(OrigInc) &amp;&amp; isa&lt;PHINode&gt;(IsomorphicInc))</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;              || <a class="code" href="classllvm_1_1SCEVExpander.html#a9093ff54a20ae387e9643cc4ed615214">hoistIVInc</a>(OrigInc, IsomorphicInc))) {</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;        <a class="code" href="Debug_8h.html#a0e760853102aabaceef5ef82347c593c">DEBUG_WITH_TYPE</a>(DebugType, <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;INDVARS: Eliminated congruent iv.inc: &quot;</span></div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;                        &lt;&lt; *IsomorphicInc &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewInc = OrigInc;</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;        <span class="keywordflow">if</span> (OrigInc-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() != IsomorphicInc-&gt;getType()) {</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;          <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *IP = isa&lt;PHINode&gt;(OrigInc)</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;            ? (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a>*)L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ab1cd5a3713b93a33f89a2086d473cf6e">getFirstInsertionPt</a>()</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;            : OrigInc-&gt;<a class="code" href="classllvm_1_1ilist__node.html#a6ac308903849239f2f308aa180dda61b">getNextNode</a>();</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;          <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> Builder(IP);</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;          Builder.<a class="code" href="classllvm_1_1IRBuilderBase.html#a571ae7ebae7038da7f6073efc65aaa50">SetCurrentDebugLocation</a>(IsomorphicInc-&gt;getDebugLoc());</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;          NewInc = Builder.</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;            CreateTruncOrBitCast(OrigInc, IsomorphicInc-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), IVName);</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;        }</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;        IsomorphicInc-&gt;replaceAllUsesWith(NewInc);</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;        DeadInsts.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(IsomorphicInc);</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;      }</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;    }</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;    <a class="code" href="Debug_8h.html#a0e760853102aabaceef5ef82347c593c">DEBUG_WITH_TYPE</a>(DebugType, <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;INDVARS: Eliminated congruent iv: &quot;</span> &lt;&lt; *Phi &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;    ++NumElim;</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewIV = OrigPhiRef;</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;    <span class="keywordflow">if</span> (OrigPhiRef-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() != Phi-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()) {</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;      <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> Builder(L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ab1cd5a3713b93a33f89a2086d473cf6e">getFirstInsertionPt</a>());</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;      Builder.<a class="code" href="classllvm_1_1IRBuilderBase.html#a571ae7ebae7038da7f6073efc65aaa50">SetCurrentDebugLocation</a>(Phi-&gt;<a class="code" href="classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">getDebugLoc</a>());</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;      NewIV = Builder.CreateTruncOrBitCast(OrigPhiRef, Phi-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), IVName);</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;    }</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    Phi-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(NewIV);</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;    DeadInsts.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Phi);</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;  }</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;  <span class="keywordflow">return</span> NumElim;</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;}</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;<span class="comment">// Search for a SCEV subexpression that is not safe to expand.  Any expression</span></div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;<span class="comment">// that may expand to a !isSafeToSpeculativelyExecute value is unsafe, namely</span></div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;<span class="comment">// UDiv expressions. We don&#39;t know if the UDiv is derived from an IR divide</span></div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;<span class="comment">// instruction, but the important thing is that we prove the denominator is</span></div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;<span class="comment">// nonzero before expansion.</span></div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;<span class="comment">// IVUsers already checks that IV-derived expressions are safe. So this check is</span></div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;<span class="comment">// only needed when the expression includes some subexpression that is not IV</span></div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;<span class="comment">// derived.</span></div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;<span class="comment">// Currently, we only allow division by a nonzero constant here. If this is</span></div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;<span class="comment">// inadequate, we could easily allow division by SCEVUnknown by using</span></div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;<span class="comment">// ValueTracking to check isKnownNonZero().</span></div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;<span class="comment">// We cannot generally expand recurrences unless the step dominates the loop</span></div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;<span class="comment">// header. The expander handles the special case of affine recurrences by</span></div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;<span class="comment">// scaling the recurrence outside the loop, but this technique isn&#39;t generally</span></div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;<span class="comment">// applicable. Expanding a nested recurrence outside a loop requires computing</span></div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;<span class="comment">// binomial coefficients. This could be done, but the recurrence has to be in a</span></div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;<span class="comment">// perfectly reduced form, which can&#39;t be guaranteed.</span></div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;<span class="keyword">struct </span>SCEVFindUnsafe {</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;  <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> &amp;SE;</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;  <span class="keywordtype">bool</span> IsUnsafe;</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;  SCEVFindUnsafe(<a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> &amp;se): SE(se), IsUnsafe(<span class="keyword">false</span>) {}</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;  <span class="keywordtype">bool</span> follow(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *S) {</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVUDivExpr.html">SCEVUDivExpr</a> *D = dyn_cast&lt;SCEVUDivExpr&gt;(S)) {</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVConstant.html">SCEVConstant</a> *<a class="code" href="namespacellvm_1_1PPCISD.html#a69ad64696d1df3be05f01dfb67f5bc66a2ae057e4de45c51c89b7e5dc5053df62">SC</a> = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1SCEVConstant.html">SCEVConstant</a>&gt;(D-&gt;getRHS());</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;      <span class="keywordflow">if</span> (!SC || SC-&gt;<a class="code" href="classllvm_1_1SCEVConstant.html#a64f0133adf37f9513005465580a19a66">getValue</a>()-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#ad4ea4748170f687710a54c919dde5625">isZero</a>()) {</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;        IsUnsafe = <span class="keyword">true</span>;</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;      }</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;    }</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVAddRecExpr.html">SCEVAddRecExpr</a> *AR = dyn_cast&lt;SCEVAddRecExpr&gt;(S)) {</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *Step = AR-&gt;getStepRecurrence(SE);</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;      <span class="keywordflow">if</span> (!AR-&gt;isAffine() &amp;&amp; !SE.<a class="code" href="classllvm_1_1ScalarEvolution.html#ac7ccf429f5c75676bdacadf3c9d1c7fa">dominates</a>(Step, AR-&gt;getLoop()-&gt;getHeader())) {</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;        IsUnsafe = <span class="keyword">true</span>;</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;      }</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;    }</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;  }</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;  <span class="keywordtype">bool</span> isDone()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> IsUnsafe; }</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;};</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;}</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div><div class="line"><a name="l01743"></a><span class="lineno"><a class="line" href="namespacellvm.html#aed54a8c39c1f5f066957f1297bd6bd0b"> 1743</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#aed54a8c39c1f5f066957f1297bd6bd0b">isSafeToExpand</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *S, <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> &amp;SE) {</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;  SCEVFindUnsafe Search(SE);</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;  <a class="code" href="namespacellvm.html#a002c7b1beef8b58691fe7aa42ffa2fe7">visitAll</a>(S, Search);</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;  <span class="keywordflow">return</span> !Search.IsUnsafe;</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;}</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;}</div><div class="ttc" id="classllvm_1_1SCEVNAryExpr_html_aaca141c03630036930698325f423cb49"><div class="ttname"><a href="classllvm_1_1SCEVNAryExpr.html#aaca141c03630036930698325f423cb49">llvm::SCEVNAryExpr::getNoWrapFlags</a></div><div class="ttdeci">NoWrapFlags getNoWrapFlags(NoWrapFlags Mask=NoWrapMask) const </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00159">ScalarEvolutionExpressions.h:159</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a075e34e98605d0e7c289763a104869ac"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">llvm::SmallVectorTemplateCommon&lt; T &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00114">SmallVector.h:114</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_ac46176b523c8a76a9ccdb5683279db94"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#ac46176b523c8a76a9ccdb5683279db94">llvm::IRBuilder::CreateGEP</a></div><div class="ttdeci">Value * CreateGEP(Value *Ptr, ArrayRef&lt; Value * &gt; IdxList, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00931">IRBuilder.h:931</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00127">SmallVector.h:127</a></div></div>
<div class="ttc" id="SmallSet_8h_html"><div class="ttname"><a href="SmallSet_8h.html">SmallSet.h</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_abb743e3278f1d451eb396849040adf48"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#abb743e3278f1d451eb396849040adf48">llvm::SmallVectorTemplateCommon&lt; T &gt;::reverse_iterator</a></div><div class="ttdeci">std::reverse_iterator&lt; iterator &gt; reverse_iterator</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00104">SmallVector.h:104</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00236">SmallVector.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad86469939d2a8bdd4169be9403b89f5a"><div class="ttname"><a href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">llvm::Value::use_end</a></div><div class="ttdeci">use_iterator use_end()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00152">Value.h:152</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html"><div class="ttname"><a href="classllvm_1_1DataLayout.html">llvm::DataLayout</a></div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00098">DataLayout.h:98</a></div></div>
<div class="ttc" id="namespaceR600__InstFlag_html_a23106439cc906be24dc8953eedd3940da8949a42ff4563a29d1e70e18338fd522"><div class="ttname"><a href="namespaceR600__InstFlag.html#a23106439cc906be24dc8953eedd3940da8949a42ff4563a29d1e70e18338fd522">R600_InstFlag::FC</a></div><div class="ttdef"><b>Definition:</b> <a href="R600Defines_8h_source.html#l00035">R600Defines.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVExpander_html_a9093ff54a20ae387e9643cc4ed615214"><div class="ttname"><a href="classllvm_1_1SCEVExpander.html#a9093ff54a20ae387e9643cc4ed615214">llvm::SCEVExpander::hoistIVInc</a></div><div class="ttdeci">bool hoistIVInc(Instruction *IncV, Instruction *InsertPos)</div><div class="ttdoc">hoistIVInc - Utility for hoisting an IV increment. </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpander_8cpp_source.html#l00944">ScalarEvolutionExpander.cpp:944</a></div></div>
<div class="ttc" id="namespacellvm_1_1ARM__PROC_html_aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5"><div class="ttname"><a href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">llvm::ARM_PROC::A</a></div><div class="ttdef"><b>Definition:</b> <a href="ARMBaseInfo_8h_source.html#l00098">ARMBaseInfo.h:98</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_aa75984a442f2379de0c66018201fa628"><div class="ttname"><a href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">llvm::Type::getInt1Ty</a></div><div class="ttdeci">static IntegerType * getInt1Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00238">Type.cpp:238</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_ae2bfc7d05689f33b3f9cf2f2b3eca7dd"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#ae2bfc7d05689f33b3f9cf2f2b3eca7dd">llvm::IRBuilderBase::GetInsertPoint</a></div><div class="ttdeci">BasicBlock::iterator GetInsertPoint() const </div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00078">IRBuilder.h:78</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a089cccb6f231efee72abc76d0f9c695f"><div class="ttname"><a href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">llvm::PHINode::addIncoming</a></div><div class="ttdeci">void addIncoming(Value *V, BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02100">Instructions.h:2100</a></div></div>
<div class="ttc" id="classllvm_1_1Argument_html"><div class="ttname"><a href="classllvm_1_1Argument.html">llvm::Argument</a></div><div class="ttdoc">LLVM Argument representation. </div><div class="ttdef"><b>Definition:</b> <a href="Argument_8h_source.html#l00035">Argument.h:35</a></div></div>
<div class="ttc" id="namespacellvm_html_adfac6898b7e6f186616ff5c337670296"><div class="ttname"><a href="namespacellvm.html#adfac6898b7e6f186616ff5c337670296">llvm::TransformForPostIncUse</a></div><div class="ttdeci">const SCEV * TransformForPostIncUse(TransformKind Kind, const SCEV *S, Instruction *User, Value *OperandValToReplace, PostIncLoopSet &amp;Loops, ScalarEvolution &amp;SE, DominatorTree &amp;DT)</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionNormalization_8cpp_source.html#l00222">ScalarEvolutionNormalization.cpp:222</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_a571ae7ebae7038da7f6073efc65aaa50"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a571ae7ebae7038da7f6073efc65aaa50">llvm::IRBuilderBase::SetCurrentDebugLocation</a></div><div class="ttdeci">void SetCurrentDebugLocation(const DebugLoc &amp;L)</div><div class="ttdoc">Set location information used by debugging information. </div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00118">IRBuilder.h:118</a></div></div>
<div class="ttc" id="classllvm_1_1SCEV_html_a3935a9de0ebdf3dc625cfb28e35bd009"><div class="ttname"><a href="classllvm_1_1SCEV.html#a3935a9de0ebdf3dc625cfb28e35bd009">llvm::SCEV::isOne</a></div><div class="ttdeci">bool isOne() const </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l00281">ScalarEvolution.cpp:281</a></div></div>
<div class="ttc" id="classllvm_1_1ScalarEvolution_html_a2eb94d079d8416118f4aaed865ab05d7"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a2eb94d079d8416118f4aaed865ab05d7">llvm::ScalarEvolution::getConstant</a></div><div class="ttdeci">const SCEV * getConstant(ConstantInt *V)</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l00314">ScalarEvolution.cpp:314</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="classllvm_1_1ScalarEvolution_html_aa89f44fd7549e81b02f2be1be894f098"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#aa89f44fd7549e81b02f2be1be894f098">llvm::ScalarEvolution::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l00551">ScalarEvolution.h:551</a></div></div>
<div class="ttc" id="classllvm_1_1SCEV_html_a3f76d2fd4788225548dc36ef9e417030"><div class="ttname"><a href="classllvm_1_1SCEV.html#a3f76d2fd4788225548dc36ef9e417030">llvm::SCEV::isZero</a></div><div class="ttdeci">bool isZero() const </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l00275">ScalarEvolution.cpp:275</a></div></div>
<div class="ttc" id="IntrinsicInst_8h_html"><div class="ttname"><a href="IntrinsicInst_8h.html">IntrinsicInst.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1MipsISD_html_a7a7035feda1dc16252a7a15a7e230122a88a797f57846adb2c382b3732b471913"><div class="ttname"><a href="namespacellvm_1_1MipsISD.html#a7a7035feda1dc16252a7a15a7e230122a88a797f57846adb2c382b3732b471913">llvm::MipsISD::Ext</a></div><div class="ttdef"><b>Definition:</b> <a href="MipsISelLowering_8h_source.html#l00104">MipsISelLowering.h:104</a></div></div>
<div class="ttc" id="namespacellvm_html_a3f2f98c2a67c9e79f58aad9150a62e42"><div class="ttname"><a href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">llvm::dyn_cast</a></div><div class="ttdeci">enable_if_c&lt;!is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="Casting_8h_source.html#l00266">Casting.h:266</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a2f81e0c1fc6554df7ad2eafabf5fc5a5"><div class="ttname"><a href="classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">llvm::User::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00108">User.h:108</a></div></div>
<div class="ttc" id="DataLayout_8h_html"><div class="ttname"><a href="DataLayout_8h.html">DataLayout.h</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_a51940249c228e46f1f97932e5f4b8450"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a51940249c228e46f1f97932e5f4b8450">llvm::ConstantExpr::getGetElementPtr</a></div><div class="ttdeci">static Constant * getGetElementPtr(Constant *C, ArrayRef&lt; Constant * &gt; IdxList, bool InBounds=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l01012">Constants.h:1012</a></div></div>
<div class="ttc" id="classllvm_1_1ScalarEvolution_html"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html">llvm::ScalarEvolution</a></div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l00172">ScalarEvolution.h:172</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00534">DenseMap.h:534</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01978">Instructions.h:1978</a></div></div>
<div class="ttc" id="Debug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="ScalarEvolutionExpander_8cpp_html_a496dd62afde2db64983c40c3a1d4a75b"><div class="ttname"><a href="ScalarEvolutionExpander_8cpp.html#a496dd62afde2db64983c40c3a1d4a75b">FactorOutConstant</a></div><div class="ttdeci">static bool FactorOutConstant(const SCEV *&amp;S, const SCEV *&amp;Remainder, const SCEV *Factor, ScalarEvolution &amp;SE, const DataLayout *TD)</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpander_8cpp_source.html#l00208">ScalarEvolutionExpander.cpp:208</a></div></div>
<div class="ttc" id="classllvm_1_1PointerType_html_a050a395d1656e546679d8b144d951bb2"><div class="ttname"><a href="classllvm_1_1PointerType.html#a050a395d1656e546679d8b144d951bb2">llvm::PointerType::get</a></div><div class="ttdeci">static PointerType * get(Type *ElementType, unsigned AddressSpace)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00730">Type.cpp:730</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html_a9b6dd0fc7a648a939e571246045b673e"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html#a9b6dd0fc7a648a939e571246045b673e">llvm::SmallPtrSet::insert</a></div><div class="ttdeci">bool insert(PtrType Ptr)</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00253">SmallPtrSet.h:253</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a573063aad4c101462893d0490d867524"><div class="ttname"><a href="classllvm_1_1Instruction.html#a573063aad4c101462893d0490d867524">llvm::Instruction::mayHaveSideEffects</a></div><div class="ttdeci">bool mayHaveSideEffects() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00324">Instruction.h:324</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVAddExpr_html_adaa7ea82a902c95919c4bb6f7f6bf904"><div class="ttname"><a href="classllvm_1_1SCEVAddExpr.html#adaa7ea82a902c95919c4bb6f7f6bf904">llvm::SCEVAddExpr::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00211">ScalarEvolutionExpressions.h:211</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVAddRecExpr_html_a443e9130cd9f3e3baaa1b566e6aa5060"><div class="ttname"><a href="classllvm_1_1SCEVAddRecExpr.html#a443e9130cd9f3e3baaa1b566e6aa5060">llvm::SCEVAddRecExpr::getStepRecurrence</a></div><div class="ttdeci">const SCEV * getStepRecurrence(ScalarEvolution &amp;SE) const </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00300">ScalarEvolutionExpressions.h:300</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVTruncateExpr_html"><div class="ttname"><a href="classllvm_1_1SCEVTruncateExpr.html">llvm::SCEVTruncateExpr</a></div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00081">ScalarEvolutionExpressions.h:81</a></div></div>
<div class="ttc" id="classllvm_1_1PredIterator_html"><div class="ttname"><a href="classllvm_1_1PredIterator.html">llvm::PredIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="Support_2CFG_8h_source.html#l00029">Support/CFG.h:29</a></div></div>
<div class="ttc" id="classllvm_1_1DebugLoc_html"><div class="ttname"><a href="classllvm_1_1DebugLoc.html">llvm::DebugLoc</a></div><div class="ttdef"><b>Definition:</b> <a href="DebugLoc_8h_source.html#l00028">DebugLoc.h:28</a></div></div>
<div class="ttc" id="classllvm_1_1PointerType_html_a921061a57ec3cfbaf6422f09f7d79fc3"><div class="ttname"><a href="classllvm_1_1PointerType.html#a921061a57ec3cfbaf6422f09f7d79fc3">llvm::PointerType::getAddressSpace</a></div><div class="ttdeci">unsigned getAddressSpace() const </div><div class="ttdoc">Return the address space of the Pointer type. </div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00445">DerivedTypes.h:445</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a05186fa23e4d11b9855a9599ba87a4b7"><div class="ttname"><a href="classllvm_1_1Type.html#a05186fa23e4d11b9855a9599ba87a4b7">llvm::Type::getInt64Ty</a></div><div class="ttdeci">static IntegerType * getInt64Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00242">Type.cpp:242</a></div></div>
<div class="ttc" id="classllvm_1_1User_html"><div class="ttname"><a href="classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00033">User.h:33</a></div></div>
<div class="ttc" id="structllvm_1_1SCEVVisitor_html_a1e7a5297e3ded4db5e828ee4bd651b34"><div class="ttname"><a href="structllvm_1_1SCEVVisitor.html#a1e7a5297e3ded4db5e828ee4bd651b34">llvm::SCEVVisitor&lt; SCEVExpander, Value * &gt;::visit</a></div><div class="ttdeci">Value * visit(const SCEV *S)</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00454">ScalarEvolutionExpressions.h:454</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a7bd545769621a0a9d2cfb074f86f4295"><div class="ttname"><a href="classllvm_1_1Instruction.html#a7bd545769621a0a9d2cfb074f86f4295">llvm::Instruction::setDebugLoc</a></div><div class="ttdeci">void setDebugLoc(const DebugLoc &amp;Loc)</div><div class="ttdoc">setDebugLoc - Set the debug location information for this instruction. </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00175">Instruction.h:175</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a2eeb1c7ed1cfe403f2ae0470e36c07e2"><div class="ttname"><a href="classllvm_1_1User.html#a2eeb1c7ed1cfe403f2ae0470e36c07e2">llvm::User::op_begin</a></div><div class="ttdeci">op_iterator op_begin()</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00116">User.h:116</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVCastExpr_html"><div class="ttname"><a href="classllvm_1_1SCEVCastExpr.html">llvm::SCEVCastExpr</a></div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00057">ScalarEvolutionExpressions.h:57</a></div></div>
<div class="ttc" id="classllvm_1_1SCEV_html_af43000d4dcb7d6d63cb6e36933ed3f6faf763167030e97d18e8f8c8ed3dba28e3"><div class="ttname"><a href="classllvm_1_1SCEV.html#af43000d4dcb7d6d63cb6e36933ed3f6faf763167030e97d18e8f8c8ed3dba28e3">llvm::SCEV::FlagNW</a></div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l00095">ScalarEvolution.h:95</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVAddRecExpr_html_a0d53a749bd858b270d322b34b8d7e1e5"><div class="ttname"><a href="classllvm_1_1SCEVAddRecExpr.html#a0d53a749bd858b270d322b34b8d7e1e5">llvm::SCEVAddRecExpr::getStart</a></div><div class="ttdeci">const SCEV * getStart() const </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00293">ScalarEvolutionExpressions.h:293</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_aa6574d526b3e38a28f688a7bb4325c2c"><div class="ttname"><a href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">llvm::Constant::getNullValue</a></div><div class="ttdeci">static Constant * getNullValue(Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00111">Constants.cpp:111</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00167">Value.cpp:167</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a8917d359fc92f25eb0117386588c6f1c"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a8917d359fc92f25eb0117386588c6f1c">llvm::LoopBase::getLoopLatch</a></div><div class="ttdeci">BlockT * getLoopLatch() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00154">LoopInfoImpl.h:154</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00193">BasicBlock.h:193</a></div></div>
<div class="ttc" id="Debug_8h_html_a0e760853102aabaceef5ef82347c593c"><div class="ttname"><a href="Debug_8h.html#a0e760853102aabaceef5ef82347c593c">DEBUG_WITH_TYPE</a></div><div class="ttdeci">#define DEBUG_WITH_TYPE(TYPE, X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00067">Debug.h:67</a></div></div>
<div class="ttc" id="ScalarEvolutionExpander_8h_html"><div class="ttname"><a href="ScalarEvolutionExpander_8h.html">ScalarEvolutionExpander.h</a></div></div>
<div class="ttc" id="classllvm_1_1StructLayout_html"><div class="ttname"><a href="classllvm_1_1StructLayout.html">llvm::StructLayout</a></div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00418">DataLayout.h:418</a></div></div>
<div class="ttc" id="HexagonHardwareLoops_8cpp_html_ada7c1594a393ede3ce32602d64d7ddb2"><div class="ttname"><a href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a></div><div class="ttdeci">Hexagon Hardware Loops</div><div class="ttdef"><b>Definition:</b> <a href="HexagonHardwareLoops_8cpp_source.html#l00281">HexagonHardwareLoops.cpp:281</a></div></div>
<div class="ttc" id="classllvm_1_1value__use__iterator_html"><div class="ttname"><a href="classllvm_1_1value__use__iterator.html">llvm::value_use_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00168">Use.h:168</a></div></div>
<div class="ttc" id="classllvm_1_1Twine_html"><div class="ttname"><a href="classllvm_1_1Twine.html">llvm::Twine</a></div><div class="ttdef"><b>Definition:</b> <a href="Twine_8h_source.html#l00081">Twine.h:81</a></div></div>
<div class="ttc" id="ScalarEvolutionExpander_8cpp_html_a0292c0709f879d1d205ac0b4f5d7e6ef"><div class="ttname"><a href="ScalarEvolutionExpander_8cpp.html#a0292c0709f879d1d205ac0b4f5d7e6ef">PickMostRelevantLoop</a></div><div class="ttdeci">static const Loop * PickMostRelevantLoop(const Loop *A, const Loop *B, DominatorTree &amp;DT)</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpander_8cpp_source.html#l00616">ScalarEvolutionExpander.cpp:616</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a35c840104f32575e0d91422cf1ef3ce4"><div class="ttname"><a href="classllvm_1_1DataLayout.html#a35c840104f32575e0d91422cf1ef3ce4">llvm::DataLayout::getStructLayout</a></div><div class="ttdeci">const StructLayout * getStructLayout(StructType *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8cpp_source.html#l00445">DataLayout.cpp:445</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_afd44535c4ae204571d5721fa4a7042f2"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#afd44535c4ae204571d5721fa4a7042f2">llvm::ConstantExpr::get</a></div><div class="ttdeci">static Constant * get(unsigned Opcode, Constant *C1, Constant *C2, unsigned Flags=0)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01690">Constants.cpp:1690</a></div></div>
<div class="ttc" id="classllvm_1_1CastInst_html"><div class="ttname"><a href="classllvm_1_1CastInst.html">llvm::CastInst</a></div><div class="ttdoc">Base class of casting instructions. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00387">InstrTypes.h:387</a></div></div>
<div class="ttc" id="LoopInfo_8h_html"><div class="ttname"><a href="LoopInfo_8h.html">LoopInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__node_html_a6ac308903849239f2f308aa180dda61b"><div class="ttname"><a href="classllvm_1_1ilist__node.html#a6ac308903849239f2f308aa180dda61b">llvm::ilist_node::getNextNode</a></div><div class="ttdeci">NodeTy * getNextNode()</div><div class="ttdoc">Get the next node, or 0 for the list tail. </div><div class="ttdef"><b>Definition:</b> <a href="ilist__node_8h_source.html#l00080">ilist_node.h:80</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_af8dde13a97efce293a7b04daf1e208fb"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">llvm::ConstantInt::getValue</a></div><div class="ttdeci">const APInt &amp; getValue() const </div><div class="ttdoc">Return the constant&amp;#39;s value. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00105">Constants.h:105</a></div></div>
<div class="ttc" id="ScalarEvolutionExpander_8cpp_html_ae1abc6cc8542d8d240fc78625714f330"><div class="ttname"><a href="ScalarEvolutionExpander_8cpp.html#ae1abc6cc8542d8d240fc78625714f330">width_descending</a></div><div class="ttdeci">static bool width_descending(Value *lhs, Value *rhs)</div><div class="ttdoc">Sort values by integer width for replaceCongruentIVs. </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpander_8cpp_source.html#l01566">ScalarEvolutionExpander.cpp:1566</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html"><div class="ttname"><a href="classllvm_1_1StructType.html">llvm::StructType</a></div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00187">DerivedTypes.h:187</a></div></div>
<div class="ttc" id="ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdef"><b>Definition:</b> <a href="ErrorHandling_8h_source.html#l00103">ErrorHandling.h:103</a></div></div>
<div class="ttc" id="classllvm_1_1Use_html"><div class="ttname"><a href="classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00060">Use.h:60</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVNAryExpr_html_a82ad83d40ce0e57efef84b421c7f805a"><div class="ttname"><a href="classllvm_1_1SCEVNAryExpr.html#a82ad83d40ce0e57efef84b421c7f805a">llvm::SCEVNAryExpr::op_iterator</a></div><div class="ttdeci">const SCEV *const * op_iterator</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00153">ScalarEvolutionExpressions.h:153</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00035">APInt.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html"><div class="ttname"><a href="classllvm_1_1IRBuilder.html">llvm::IRBuilder</a></div><div class="ttdoc">This provides a uniform API for creating instructions and inserting them into a basic block: either a...</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00421">IRBuilder.h:421</a></div></div>
<div class="ttc" id="STLExtras_8h_html"><div class="ttname"><a href="STLExtras_8h.html">STLExtras.h</a></div></div>
<div class="ttc" id="classllvm_1_1ScalarEvolution_html_a983dbdce6af7840357ed33a20c8f30bb"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a983dbdce6af7840357ed33a20c8f30bb">llvm::ScalarEvolution::getTypeSizeInBits</a></div><div class="ttdeci">uint64_t getTypeSizeInBits(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l02666">ScalarEvolution.cpp:2666</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_afa0b2fa29ba074f2b6ec9ac11163f2d9"><div class="ttname"><a href="classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">llvm::Instruction::CastOps</a></div><div class="ttdeci">CastOps</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00401">Instruction.h:401</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVNAryExpr_html_a107163b3c781d2b0137bf2021e7dc984"><div class="ttname"><a href="classllvm_1_1SCEVNAryExpr.html#a107163b3c781d2b0137bf2021e7dc984">llvm::SCEVNAryExpr::op_begin</a></div><div class="ttdeci">op_iterator op_begin() const </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00154">ScalarEvolutionExpressions.h:154</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVMulExpr_html"><div class="ttname"><a href="classllvm_1_1SCEVMulExpr.html">llvm::SCEVMulExpr</a></div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00227">ScalarEvolutionExpressions.h:227</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00031">Instruction.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html">llvm::ConstantExpr</a></div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00790">Constants.h:790</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_af348d5ea83429d08ba891ca3dd0e92b2"><div class="ttname"><a href="classllvm_1_1Type.html#af348d5ea83429d08ba891ca3dd0e92b2">llvm::Type::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">getContext - Return the LLVMContext in which this type was uniqued. </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00128">Type.h:128</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVAddRecExpr_html"><div class="ttname"><a href="classllvm_1_1SCEVAddRecExpr.html">llvm::SCEVAddRecExpr</a></div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00283">ScalarEvolutionExpressions.h:283</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorBase_html_a8a8df4d85555c7954a95f86080cd3b64"><div class="ttname"><a href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">llvm::SmallVectorBase::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const </div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00056">SmallVector.h:56</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_ac26154a24f393f523c87cc5f8239f36c"><div class="ttname"><a href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">llvm::Instruction::BinaryOps</a></div><div class="ttdeci">BinaryOps</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00387">Instruction.h:387</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_a78b7be0d9fe2c93afd2fbca74d67a0d4"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a78b7be0d9fe2c93afd2fbca74d67a0d4">llvm::IRBuilderBase::saveIP</a></div><div class="ttdeci">InsertPoint saveIP() const </div><div class="ttdoc">Returns the current insert point. </div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00157">IRBuilder.h:157</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayType_html"><div class="ttname"><a href="classllvm_1_1ArrayType.html">llvm::ArrayType</a></div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00332">DerivedTypes.h:332</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVNAryExpr_html_aed1b1d3b764c76210c67dd1b4a6be2f2"><div class="ttname"><a href="classllvm_1_1SCEVNAryExpr.html#aed1b1d3b764c76210c67dd1b4a6be2f2">llvm::SCEVNAryExpr::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00157">ScalarEvolutionExpressions.h:157</a></div></div>
<div class="ttc" id="classllvm_1_1ScalarEvolution_html_a5b01f1061607731f6d2953b935649570"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a5b01f1061607731f6d2953b935649570">llvm::ScalarEvolution::getSizeOfExpr</a></div><div class="ttdeci">const SCEV * getSizeOfExpr(Type *IntTy, Type *AllocTy)</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l02593">ScalarEvolution.cpp:2593</a></div></div>
<div class="ttc" id="classllvm_1_1SCEV_html_af43000d4dcb7d6d63cb6e36933ed3f6fa2f7a8775a783f7ea3ad24b3f9cb5d949"><div class="ttname"><a href="classllvm_1_1SCEV.html#af43000d4dcb7d6d63cb6e36933ed3f6fa2f7a8775a783f7ea3ad24b3f9cb5d949">llvm::SCEV::FlagNSW</a></div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l00097">ScalarEvolution.h:97</a></div></div>
<div class="ttc" id="classllvm_1_1LoopInfo_html_a4abca289c73cd09487e05d11d9f7d877"><div class="ttname"><a href="classllvm_1_1LoopInfo.html#a4abca289c73cd09487e05d11d9f7d877">llvm::LoopInfo::getLoopFor</a></div><div class="ttdeci">Loop * getLoopFor(const BasicBlock *BB) const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00618">LoopInfo.h:618</a></div></div>
<div class="ttc" id="classllvm_1_1SmallSet_html_a8d8348060ccdeeba13fb8bc651dfbf82"><div class="ttname"><a href="classllvm_1_1SmallSet.html#a8d8348060ccdeeba13fb8bc651dfbf82">llvm::SmallSet::insert</a></div><div class="ttdeci">bool insert(const T &amp;V)</div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00059">SmallSet.h:59</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00303">Value.cpp:303</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ae855357b6c5e6e7ed1869272708a3a84"><div class="ttname"><a href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">llvm::Value::takeName</a></div><div class="ttdeci">void takeName(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00239">Value.cpp:239</a></div></div>
<div class="ttc" id="classllvm_1_1DominatorTree_html"><div class="ttname"><a href="classllvm_1_1DominatorTree.html">llvm::DominatorTree</a></div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00740">Dominators.h:740</a></div></div>
<div class="ttc" id="classllvm_1_1SequentialType_html_a39f2c3a62f293faf11ac28b15bc53359"><div class="ttname"><a href="classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">llvm::SequentialType::getElementType</a></div><div class="ttdeci">Type * getElementType() const </div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00319">DerivedTypes.h:319</a></div></div>
<div class="ttc" id="classllvm_1_1ScalarEvolution_html_a659b27f6737fcb7eaf333b0279da1154"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a659b27f6737fcb7eaf333b0279da1154">llvm::ScalarEvolution::getAddRecExpr</a></div><div class="ttdeci">const SCEV * getAddRecExpr(const SCEV *Start, const SCEV *Step, const Loop *L, SCEV::NoWrapFlags Flags)</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l02246">ScalarEvolution.cpp:2246</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_ace45cae6925c65e9d6916e09dd5b17cc"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">llvm::IRBuilderBase::SetInsertPoint</a></div><div class="ttdeci">void SetInsertPoint(BasicBlock *TheBB)</div><div class="ttdoc">This specifies that created instructions should be appended to the end of the specified block...</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00083">IRBuilder.h:83</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVNAryExpr_html_a97221eb4fea7333f0b7b35b35e1169b2"><div class="ttname"><a href="classllvm_1_1SCEVNAryExpr.html#a97221eb4fea7333f0b7b35b35e1169b2">llvm::SCEVNAryExpr::getNumOperands</a></div><div class="ttdeci">size_t getNumOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00147">ScalarEvolutionExpressions.h:147</a></div></div>
<div class="ttc" id="classllvm_1_1SCEV_html_af43000d4dcb7d6d63cb6e36933ed3f6fa23e74052c4d79cfdaa23460a3c946656"><div class="ttname"><a href="classllvm_1_1SCEV.html#af43000d4dcb7d6d63cb6e36933ed3f6fa23e74052c4d79cfdaa23460a3c946656">llvm::SCEV::FlagAnyWrap</a></div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l00094">ScalarEvolution.h:94</a></div></div>
<div class="ttc" id="classllvm_1_1PointerType_html"><div class="ttname"><a href="classllvm_1_1PointerType.html">llvm::PointerType</a></div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00425">DerivedTypes.h:425</a></div></div>
<div class="ttc" id="classllvm_1_1StructLayout_html_ae10c4483372a357a0d3411b3d64be10c"><div class="ttname"><a href="classllvm_1_1StructLayout.html#ae10c4483372a357a0d3411b3d64be10c">llvm::StructLayout::getElementOffset</a></div><div class="ttdeci">uint64_t getElementOffset(unsigned Idx) const </div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00442">DataLayout.h:442</a></div></div>
<div class="ttc" id="classllvm_1_1CastInst_html_a0f7dea9550778374905e12da6d6ba8a8"><div class="ttname"><a href="classllvm_1_1CastInst.html#a0f7dea9550778374905e12da6d6ba8a8">llvm::CastInst::Create</a></div><div class="ttdeci">static CastInst * Create(Instruction::CastOps, Value *S, Type *Ty, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdoc">Construct any of the CastInst subclasses. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l02350">Instructions.cpp:2350</a></div></div>
<div class="ttc" id="README__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A,*B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00091">README_ALTIVEC.txt:91</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVUnknown_html"><div class="ttname"><a href="classllvm_1_1SCEVUnknown.html">llvm::SCEVUnknown</a></div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00409">ScalarEvolutionExpressions.h:409</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_ac8778dcbd35e8ae5902050117feb57a0"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#ac8778dcbd35e8ae5902050117feb57a0">llvm::IRBuilderBase::restoreIP</a></div><div class="ttdeci">void restoreIP(InsertPoint IP)</div><div class="ttdoc">Sets the current insert point to a previously-saved location. </div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00169">IRBuilder.h:169</a></div></div>
<div class="ttc" id="namespacellvm_1_1AArch64ISD_html_a246d89cb58f606179b1435937830bbdca84e96c468affe3b1fd3076b4fc5d063e"><div class="ttname"><a href="namespacellvm_1_1AArch64ISD.html#a246d89cb58f606179b1435937830bbdca84e96c468affe3b1fd3076b4fc5d063e">llvm::AArch64ISD::Ret</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64ISelLowering_8h_source.html#l00060">AArch64ISelLowering.h:60</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a2bd8d3ea479e99434bac72362a59f078"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a2bd8d3ea479e99434bac72362a59f078">llvm::IRBuilder::CreateBinOp</a></div><div class="ttdeci">Value * CreateBinOp(Instruction::BinaryOps Opc, Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00834">IRBuilder.h:834</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVAddRecExpr_html_a88f514461ddb0af0fc59ac4639f644bc"><div class="ttname"><a href="classllvm_1_1SCEVAddRecExpr.html#a88f514461ddb0af0fc59ac4639f644bc">llvm::SCEVAddRecExpr::isAffine</a></div><div class="ttdeci">bool isAffine() const </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00309">ScalarEvolutionExpressions.h:309</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a1bc74c76b876ad387293ecde0f21ed45"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a1bc74c76b876ad387293ecde0f21ed45">llvm::LoopBase::getLoopPreheader</a></div><div class="ttdeci">BlockT * getLoopPreheader() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00106">LoopInfoImpl.h:106</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_acd9e771a3296c6b24146955754620557"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#acd9e771a3296c6b24146955754620557">llvm::SmallVectorTemplateCommon::back</a></div><div class="ttdeci">reference back()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00157">SmallVector.h:157</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00396">SmallVector.h:396</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_ab421865744bd8b5aea08be18e86c6aa5"><div class="ttname"><a href="classllvm_1_1PHINode.html#ab421865744bd8b5aea08be18e86c6aa5">llvm::PHINode::hasConstantValue</a></div><div class="ttdeci">Value * hasConstantValue() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l00161">Instructions.cpp:161</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVUDivExpr_html"><div class="ttname"><a href="classllvm_1_1SCEVUDivExpr.html">llvm::SCEVUDivExpr</a></div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00246">ScalarEvolutionExpressions.h:246</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00044">Type.h:44</a></div></div>
<div class="ttc" id="classllvm_1_1SCEV_html_a9a16f1241255a605fc8debc1e26eaa4c"><div class="ttname"><a href="classllvm_1_1SCEV.html#a9a16f1241255a605fc8debc1e26eaa4c">llvm::SCEV::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l00249">ScalarEvolution.cpp:249</a></div></div>
<div class="ttc" id="ScalarEvolutionExpander_8cpp_html_ae138dd892b8a5f945944cdbd7d151304"><div class="ttname"><a href="ScalarEvolutionExpander_8cpp.html#ae138dd892b8a5f945944cdbd7d151304">SplitAddRecs</a></div><div class="ttdeci">static void SplitAddRecs(SmallVectorImpl&lt; const SCEV * &gt; &amp;Ops, Type *Ty, ScalarEvolution &amp;SE)</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpander_8cpp_source.html#l00335">ScalarEvolutionExpander.cpp:335</a></div></div>
<div class="ttc" id="classllvm_1_1TrackingVH_html"><div class="ttname"><a href="classllvm_1_1TrackingVH.html">llvm::TrackingVH</a></div><div class="ttdef"><b>Definition:</b> <a href="ValueHandle_8h_source.html#l00279">ValueHandle.h:279</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVNAryExpr_html_a8d1a2d2a4d2f935841d226bbcbf54a48"><div class="ttname"><a href="classllvm_1_1SCEVNAryExpr.html#a8d1a2d2a4d2f935841d226bbcbf54a48">llvm::SCEVNAryExpr::getOperand</a></div><div class="ttdeci">const SCEV * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00148">ScalarEvolutionExpressions.h:148</a></div></div>
<div class="ttc" id="classllvm_1_1SmallSet_html"><div class="ttname"><a href="classllvm_1_1SmallSet.html">llvm::SmallSet</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00031">SmallSet.h:31</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ae42219072d798876e6b08e6b78614ff6"><div class="ttname"><a href="MD5_8cpp.html#ae42219072d798876e6b08e6b78614ff6">H</a></div><div class="ttdeci">#define H(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00053">MD5.cpp:53</a></div></div>
<div class="ttc" id="namespacellvm_html_a72e1beba38b6627c9307ab8b5141ac64aeb131ce4dfb8eeef7197e6b0afd145d4"><div class="ttname"><a href="namespacellvm.html#a72e1beba38b6627c9307ab8b5141ac64aeb131ce4dfb8eeef7197e6b0afd145d4">llvm::Normalize</a></div><div class="ttdoc">Normalize - Normalize according to the given loops. </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionNormalization_8h_source.html#l00054">ScalarEvolutionNormalization.h:54</a></div></div>
<div class="ttc" id="namespacellvm_html_a7e108932dc3da5294aed99a353aac9c4"><div class="ttname"><a href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">llvm::pred_begin</a></div><div class="ttdeci">Interval::pred_iterator pred_begin(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00117">Interval.h:117</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_aab8e16a35183ce39aad394714087bcff"><div class="ttname"><a href="classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">llvm::Instruction::getDebugLoc</a></div><div class="ttdeci">const DebugLoc &amp; getDebugLoc() const </div><div class="ttdoc">getDebugLoc - Return the debug location for this node as a DebugLoc. </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00178">Instruction.h:178</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_afb5e83bf5123ff7c51058eb0ebebcdc6"><div class="ttname"><a href="classllvm_1_1PHINode.html#afb5e83bf5123ff7c51058eb0ebebcdc6">llvm::PHINode::Create</a></div><div class="ttdeci">static PHINode * Create(Type *Ty, unsigned NumReservedValues, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02013">Instructions.h:2013</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_af41f58e730804d10b91fcff39b035f74"><div class="ttname"><a href="classllvm_1_1User.html#af41f58e730804d10b91fcff39b035f74">llvm::User::op_end</a></div><div class="ttdeci">op_iterator op_end()</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00118">User.h:118</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_ac4f141a355e5898255f2cbc57c5b54c3"><div class="ttname"><a href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">llvm::LoopBase::getHeader</a></div><div class="ttdeci">BlockT * getHeader() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00095">LoopInfo.h:95</a></div></div>
<div class="ttc" id="namespacellvm_html_aa1704159f75e6eacd595962ea6d93ffe"><div class="ttname"><a href="namespacellvm.html#aa1704159f75e6eacd595962ea6d93ffe">llvm::next</a></div><div class="ttdeci">ItTy next(ItTy it, Dist n)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00154">STLExtras.h:154</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVExpander_html_a583d3ca95f83216d632a4d1ae0330dd0"><div class="ttname"><a href="classllvm_1_1SCEVExpander.html#a583d3ca95f83216d632a4d1ae0330dd0">llvm::SCEVExpander::expandCodeFor</a></div><div class="ttdeci">Value * expandCodeFor(const SCEV *SH, Type *Ty, Instruction *I)</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpander_8cpp_source.html#l01468">ScalarEvolutionExpander.cpp:1468</a></div></div>
<div class="ttc" id="Target_2X86_2README_8txt_html_a0ed5c5d6ff68f354e354920a3680185c"><div class="ttname"><a href="Target_2X86_2README_8txt.html#a0ed5c5d6ff68f354e354920a3680185c">Sum</a></div><div class="ttdeci">return Sum</div><div class="ttdef"><b>Definition:</b> <a href="Target_2X86_2README_8txt_source.html#l00112">Target/X86/README.txt:112</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00088">User.h:88</a></div></div>
<div class="ttc" id="namespacellvm_html_a5eeaf08e96168c2cac8960f87f0ef360"><div class="ttname"><a href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">llvm::pred_end</a></div><div class="ttdeci">Interval::pred_iterator pred_end(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00120">Interval.h:120</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a92a38e2e3412bde7fd2b71db212b61aa"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a92a38e2e3412bde7fd2b71db212b61aa">llvm::LoopBase::contains</a></div><div class="ttdeci">bool contains(const LoopT *L) const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00104">LoopInfo.h:104</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVUDivExpr_html_a0556409bb7d6f1fb0e4681aaf5e88e1f"><div class="ttname"><a href="classllvm_1_1SCEVUDivExpr.html#a0556409bb7d6f1fb0e4681aaf5e88e1f">llvm::SCEVUDivExpr::getLHS</a></div><div class="ttdeci">const SCEV * getLHS() const </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00255">ScalarEvolutionExpressions.h:255</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_ad696953257cf1c4e5bd12d02146e7287"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#ad696953257cf1c4e5bd12d02146e7287">llvm::SmallVectorTemplateCommon&lt; T &gt;::rend</a></div><div class="ttdeci">reverse_iterator rend()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00124">SmallVector.h:124</a></div></div>
<div class="ttc" id="ScalarEvolutionExpander_8cpp_html_a9bc337eb05f0a2d638e1fe8e583db078"><div class="ttname"><a href="ScalarEvolutionExpander_8cpp.html#a9bc337eb05f0a2d638e1fe8e583db078">SimplifyAddOperands</a></div><div class="ttdeci">static void SimplifyAddOperands(SmallVectorImpl&lt; const SCEV * &gt; &amp;Ops, Type *Ty, ScalarEvolution &amp;SE)</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpander_8cpp_source.html#l00306">ScalarEvolutionExpander.cpp:306</a></div></div>
<div class="ttc" id="classllvm_1_1DominatorTree_html_a6fe9272dc67fe2ff4cafc33b895c4a6c"><div class="ttname"><a href="classllvm_1_1DominatorTree.html#a6fe9272dc67fe2ff4cafc33b895c4a6c">llvm::DominatorTree::dominates</a></div><div class="ttdeci">bool dominates(const DomTreeNode *A, const DomTreeNode *B) const </div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00801">Dominators.h:801</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a669d55980a7d4b6307b94596deeb0b1f"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a669d55980a7d4b6307b94596deeb0b1f">llvm::SmallVectorImpl::append</a></div><div class="ttdeci">void append(in_iter in_start, in_iter in_end)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00445">SmallVector.h:445</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a2eba483f5cc876e824aa6c085736086b"><div class="ttname"><a href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">llvm::Type::isPointerTy</a></div><div class="ttdeci">bool isPointerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00220">Type.h:220</a></div></div>
<div class="ttc" id="classllvm_1_1UndefValue_html_a4ae5ff22b700a42bcc5d889233721335"><div class="ttname"><a href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">llvm::UndefValue::get</a></div><div class="ttdeci">static UndefValue * get(Type *T)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01334">Constants.cpp:1334</a></div></div>
<div class="ttc" id="classllvm_1_1SCEV_html_a004121efb296aedb4f06091d92b89442"><div class="ttname"><a href="classllvm_1_1SCEV.html#a004121efb296aedb4f06091d92b89442">llvm::SCEV::isNonConstantNegative</a></div><div class="ttdeci">bool isNonConstantNegative() const </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l00295">ScalarEvolution.cpp:295</a></div></div>
<div class="ttc" id="classT_html"><div class="ttname"><a href="classT.html">T</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a7fe9ccd4893f4e2caa826126c09545ea"><div class="ttname"><a href="classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">llvm::Type::getInt8PtrTy</a></div><div class="ttdeci">static PointerType * getInt8PtrTy(LLVMContext &amp;C, unsigned AS=0)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00284">Type.cpp:284</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_af3deb6522c4fe2043fe07af2ec90190c"><div class="ttname"><a href="classllvm_1_1APInt.html#af3deb6522c4fe2043fe07af2ec90190c">llvm::APInt::isPowerOf2</a></div><div class="ttdeci">bool isPowerOf2() const </div><div class="ttdoc">Check if this APInt&amp;#39;s value is a power of two greater than zero. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00390">APInt.h:390</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVUDivExpr_html_a0745b63bdc2e2b907b936bf105e3eeb9"><div class="ttname"><a href="classllvm_1_1SCEVUDivExpr.html#a0745b63bdc2e2b907b936bf105e3eeb9">llvm::SCEVUDivExpr::getRHS</a></div><div class="ttdeci">const SCEV * getRHS() const </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00256">ScalarEvolutionExpressions.h:256</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVExpander_html_ab35b69a7c369aadf7ac052ab21ad2ec6"><div class="ttname"><a href="classllvm_1_1SCEVExpander.html#ab35b69a7c369aadf7ac052ab21ad2ec6">llvm::SCEVExpander::replaceCongruentIVs</a></div><div class="ttdeci">unsigned replaceCongruentIVs(Loop *L, const DominatorTree *DT, SmallVectorImpl&lt; WeakVH &gt; &amp;DeadInsts, const TargetTransformInfo *TTI=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpander_8cpp_source.html#l01580">ScalarEvolutionExpander.cpp:1580</a></div></div>
<div class="ttc" id="ScalarEvolutionExpander_8cpp_html_aeb811bb4a3e1c56acb04c713200c9a42"><div class="ttname"><a href="ScalarEvolutionExpander_8cpp.html#aeb811bb4a3e1c56acb04c713200c9a42">ExposePointerBase</a></div><div class="ttdeci">static void ExposePointerBase(const SCEV *&amp;Base, const SCEV *&amp;Rest, ScalarEvolution &amp;SE)</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpander_8cpp_source.html#l00834">ScalarEvolutionExpander.cpp:834</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVUDivExpr_html_a38e73ccf223d1b8eec8fc3a026a7da1c"><div class="ttname"><a href="classllvm_1_1SCEVUDivExpr.html#a38e73ccf223d1b8eec8fc3a026a7da1c">llvm::SCEVUDivExpr::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00258">ScalarEvolutionExpressions.h:258</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_ae84bb2408dfffa4e8b5fe2ce0714a3bd"><div class="ttname"><a href="classllvm_1_1DataLayout.html#ae84bb2408dfffa4e8b5fe2ce0714a3bd">llvm::DataLayout::getIntPtrType</a></div><div class="ttdeci">IntegerType * getIntPtrType(LLVMContext &amp;C, unsigned AddressSpace=0) const </div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8cpp_source.html#l00610">DataLayout.cpp:610</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSetImpl_html_aa72472422d95c7052d62432ec279ff85"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#aa72472422d95c7052d62432ec279ff85">llvm::SmallPtrSetImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00077">SmallPtrSet.h:77</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_1_1InsertPointGuard_html"><div class="ttname"><a href="classllvm_1_1IRBuilderBase_1_1InsertPointGuard.html">llvm::IRBuilderBase::InsertPointGuard</a></div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00197">IRBuilder.h:197</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVCastExpr_html_a43b64c3b800f1451fee1e2c42eb61f92"><div class="ttname"><a href="classllvm_1_1SCEVCastExpr.html#a43b64c3b800f1451fee1e2c42eb61f92">llvm::SCEVCastExpr::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00067">ScalarEvolutionExpressions.h:67</a></div></div>
<div class="ttc" id="namespacellvm_1_1PPCISD_html_a69ad64696d1df3be05f01dfb67f5bc66a2ae057e4de45c51c89b7e5dc5053df62"><div class="ttname"><a href="namespacellvm_1_1PPCISD.html#a69ad64696d1df3be05f01dfb67f5bc66a2ae057e4de45c51c89b7e5dc5053df62">llvm::PPCISD::SC</a></div><div class="ttdef"><b>Definition:</b> <a href="PPCISelLowering_8h_source.html#l00247">PPCISelLowering.h:247</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a2ee2de2efa05f2abb95007892fc559a4"><div class="ttname"><a href="classllvm_1_1Type.html#a2ee2de2efa05f2abb95007892fc559a4">llvm::Type::getInt1PtrTy</a></div><div class="ttdeci">static PointerType * getInt1PtrTy(LLVMContext &amp;C, unsigned AS=0)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00280">Type.cpp:280</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a1b45f45820a60c09244a87eb59824aec"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a></div><div class="ttdeci">add sub stmia L5 ldr r0 bl L_printf $stub Instead of a and a wouldn t it be better to do three moves *Return an aggregate type is even return S</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00197">Target/ARM/README.txt:197</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet&lt; const Loop *, 2 &gt;</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="classllvm_1_1TargetTransformInfo_html"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html">llvm::TargetTransformInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00039">TargetTransformInfo.h:39</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_a474f562a4871689af74b0fd1ae42daa1"><div class="ttname"><a href="classllvm_1_1APInt.html#a474f562a4871689af74b0fd1ae42daa1">llvm::APInt::logBase2</a></div><div class="ttdeci">unsigned logBase2() const </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01500">APInt.h:1500</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVExpander_html_a48f2a886637b7ccf57c00ad89d4df1a7"><div class="ttname"><a href="classllvm_1_1SCEVExpander.html#a48f2a886637b7ccf57c00ad89d4df1a7">llvm::SCEVExpander::getOrInsertCanonicalInductionVariable</a></div><div class="ttdeci">PHINode * getOrInsertCanonicalInductionVariable(const Loop *L, Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpander_8cpp_source.html#l01549">ScalarEvolutionExpander.cpp:1549</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00880">SmallVector.h:880</a></div></div>
<div class="ttc" id="classllvm_1_1SCEV_html_a6e915d0a915541a818ab88b1fac7cbd1"><div class="ttname"><a href="classllvm_1_1SCEV.html#a6e915d0a915541a818ab88b1fac7cbd1">llvm::SCEV::isAllOnesValue</a></div><div class="ttdeci">bool isAllOnesValue() const </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l00287">ScalarEvolution.cpp:287</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00111">Value.h:111</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a1431766de798501f107d9031821f311e"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a1431766de798501f107d9031821f311e">llvm::LoopBase::getParentLoop</a></div><div class="ttdeci">LoopT * getParentLoop() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00096">LoopInfo.h:96</a></div></div>
<div class="ttc" id="classllvm_1_1StructLayout_html_a582a5b21a8f91d7f713fa9d57c0525de"><div class="ttname"><a href="classllvm_1_1StructLayout.html#a582a5b21a8f91d7f713fa9d57c0525de">llvm::StructLayout::getSizeInBytes</a></div><div class="ttdeci">uint64_t getSizeInBytes() const </div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00425">DataLayout.h:425</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_a05750ee4a9742f3ea2755efb4b747efe"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a05750ee4a9742f3ea2755efb4b747efe">llvm::IRBuilderBase::GetInsertBlock</a></div><div class="ttdeci">BasicBlock * GetInsertBlock() const </div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00077">IRBuilder.h:77</a></div></div>
<div class="ttc" id="classllvm_1_1Loop_html_a72bbf45d2e00971f56bf8cfe4e1df01c"><div class="ttname"><a href="classllvm_1_1Loop.html#a72bbf45d2e00971f56bf8cfe4e1df01c">llvm::Loop::getCanonicalInductionVariable</a></div><div class="ttdeci">PHINode * getCanonicalInductionVariable() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00142">LoopInfo.cpp:142</a></div></div>
<div class="ttc" id="classllvm_1_1StructLayout_html_a795cfd43d30c44c33b97fe850bc0451f"><div class="ttname"><a href="classllvm_1_1StructLayout.html#a795cfd43d30c44c33b97fe850bc0451f">llvm::StructLayout::getElementContainingOffset</a></div><div class="ttdeci">unsigned getElementContainingOffset(uint64_t Offset) const </div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8cpp_source.html#l00078">DataLayout.cpp:78</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a9105541412dab869e18b3cceebfff07d"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool isSigned=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00492">Constants.cpp:492</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_ad4ea4748170f687710a54c919dde5625"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#ad4ea4748170f687710a54c919dde5625">llvm::ConstantInt::isZero</a></div><div class="ttdeci">bool isZero() const </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00160">Constants.h:160</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVConstant_html_a64f0133adf37f9513005465580a19a66"><div class="ttname"><a href="classllvm_1_1SCEVConstant.html#a64f0133adf37f9513005465580a19a66">llvm::SCEVConstant::getValue</a></div><div class="ttdeci">ConstantInt * getValue() const </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00044">ScalarEvolutionExpressions.h:44</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00101">Debug.cpp:101</a></div></div>
<div class="ttc" id="namespacestd_html_ab8424022895aee3e366fb9a32f2883cb"><div class="ttname"><a href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a></div><div class="ttdeci">void swap(llvm::BitVector &amp;LHS, llvm::BitVector &amp;RHS)</div><div class="ttdoc">Implement std::swap in terms of BitVector swap. </div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00591">BitVector.h:591</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html"><div class="ttname"><a href="classllvm_1_1APInt.html">llvm::APInt</a></div><div class="ttdoc">Class for arbitrary precision integers. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00075">APInt.h:75</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVAddExpr_html"><div class="ttname"><a href="classllvm_1_1SCEVAddExpr.html">llvm::SCEVAddExpr</a></div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00202">ScalarEvolutionExpressions.h:202</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a21960167f529265a1cb02ac1e8ad10f6"><div class="ttname"><a href="classllvm_1_1PHINode.html#a21960167f529265a1cb02ac1e8ad10f6">llvm::PHINode::getIncomingValueForBlock</a></div><div class="ttdeci">Value * getIncomingValueForBlock(const BasicBlock *BB) const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02139">Instructions.h:2139</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a6e328feb83afa5cf1c966d6704e43fc1"><div class="ttname"><a href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">llvm::Type::isIntegerTy</a></div><div class="ttdeci">bool isIntegerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00196">Type.h:196</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVSMaxExpr_html"><div class="ttname"><a href="classllvm_1_1SCEVSMaxExpr.html">llvm::SCEVSMaxExpr</a></div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00366">ScalarEvolutionExpressions.h:366</a></div></div>
<div class="ttc" id="classllvm_1_1ScalarEvolution_html_a23541ecba66207184eaf2279a70c5b12"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a23541ecba66207184eaf2279a70c5b12">llvm::ScalarEvolution::getAddExpr</a></div><div class="ttdeci">const SCEV * getAddExpr(SmallVectorImpl&lt; const SCEV * &gt; &amp;Ops, SCEV::NoWrapFlags Flags=SCEV::FlagAnyWrap)</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l01461">ScalarEvolution.cpp:1461</a></div></div>
<div class="ttc" id="namespacellvm_html_a002c7b1beef8b58691fe7aa42ffa2fe7"><div class="ttname"><a href="namespacellvm.html#a002c7b1beef8b58691fe7aa42ffa2fe7">llvm::visitAll</a></div><div class="ttdeci">void visitAll(const SCEV *Root, SV &amp;Visitor)</div><div class="ttdoc">Use SCEVTraversal to visit all nodes in the givien expression tree. </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00553">ScalarEvolutionExpressions.h:553</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a8a045d250952c0867382a9840ee18fdf"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">llvm::SmallVectorTemplateCommon&lt; T &gt;::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00112">SmallVector.h:112</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVZeroExtendExpr_html"><div class="ttname"><a href="classllvm_1_1SCEVZeroExtendExpr.html">llvm::SCEVZeroExtendExpr</a></div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00098">ScalarEvolutionExpressions.h:98</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a413abcab8dbc3900fc2fde96a5d8fca6"><div class="ttname"><a href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">llvm::Value::use_begin</a></div><div class="ttdeci">use_iterator use_begin()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00150">Value.h:150</a></div></div>
<div class="ttc" id="classllvm_1_1SCEV_html"><div class="ttname"><a href="classllvm_1_1SCEV.html">llvm::SCEV</a></div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l00057">ScalarEvolution.h:57</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a30dd396c5b40cd86c1591872e574ccdf"><div class="ttname"><a href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">llvm::Type::getInt32Ty</a></div><div class="ttdeci">static IntegerType * getInt32Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00241">Type.cpp:241</a></div></div>
<div class="ttc" id="classllvm_1_1Loop_html"><div class="ttname"><a href="classllvm_1_1Loop.html">llvm::Loop</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00338">LoopInfo.h:338</a></div></div>
<div class="ttc" id="classllvm_1_1SCEV_html_af43000d4dcb7d6d63cb6e36933ed3f6faafb62cd6afdc004ef6e8a1f6288eb382"><div class="ttname"><a href="classllvm_1_1SCEV.html#af43000d4dcb7d6d63cb6e36933ed3f6faafb62cd6afdc004ef6e8a1f6288eb382">llvm::SCEV::FlagNUW</a></div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l00096">ScalarEvolution.h:96</a></div></div>
<div class="ttc" id="classllvm_1_1CastInst_html_a06dc25da1f16f389f5244304e8d33127"><div class="ttname"><a href="classllvm_1_1CastInst.html#a06dc25da1f16f389f5244304e8d33127">llvm::CastInst::getCastOpcode</a></div><div class="ttdeci">static Instruction::CastOps getCastOpcode(const Value *Val, bool SrcIsSigned, Type *Ty, bool DstIsSigned)</div><div class="ttdoc">Infer the opcode for cast operand and type. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l02650">Instructions.cpp:2650</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="regcomp_8c_html_a0240ac851181b84ac374872dc5434ee4"><div class="ttname"><a href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div><div class="ttdeci">#define N</div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a5cb76a65b6524dba1493dd2b9dc3abbe"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">TerminatorInst * getTerminator()</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00120">BasicBlock.cpp:120</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVSignExtendExpr_html"><div class="ttname"><a href="classllvm_1_1SCEVSignExtendExpr.html">llvm::SCEVSignExtendExpr</a></div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00115">ScalarEvolutionExpressions.h:115</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVUMaxExpr_html"><div class="ttname"><a href="classllvm_1_1SCEVUMaxExpr.html">llvm::SCEVUMaxExpr</a></div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00387">ScalarEvolutionExpressions.h:387</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVExpander_html_aece02adc8e4cc74296bfe410eabe287b"><div class="ttname"><a href="classllvm_1_1SCEVExpander.html#aece02adc8e4cc74296bfe410eabe287b">llvm::SCEVExpander::getIVIncOperand</a></div><div class="ttdeci">Instruction * getIVIncOperand(Instruction *IncV, Instruction *InsertPos, bool allowScale)</div><div class="ttdoc">getIVIncOperand - Return the induction variable increment&amp;#39;s IV operand. </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpander_8cpp_source.html#l00893">ScalarEvolutionExpander.cpp:893</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a5a7cfa245af120b44ac8a86143bb9e57"><div class="ttname"><a href="classllvm_1_1Type.html#a5a7cfa245af120b44ac8a86143bb9e57">llvm::Type::getPrimitiveSizeInBits</a></div><div class="ttdeci">unsigned getPrimitiveSizeInBits() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00117">Type.cpp:117</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVAddRecExpr_html_a7fcbbc51eef313e675a2442bb2053ae9"><div class="ttname"><a href="classllvm_1_1SCEVAddRecExpr.html#a7fcbbc51eef313e675a2442bb2053ae9">llvm::SCEVAddRecExpr::getLoop</a></div><div class="ttdeci">const Loop * getLoop() const </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00294">ScalarEvolutionExpressions.h:294</a></div></div>
<div class="ttc" id="LLVMContext_8h_html"><div class="ttname"><a href="LLVMContext_8h.html">LLVMContext.h</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a23aab542398091e1fcfd46b6006d64ac"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a23aab542398091e1fcfd46b6006d64ac">llvm::SmallVectorTemplateCommon&lt; T &gt;::rbegin</a></div><div class="ttdeci">reverse_iterator rbegin()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00122">SmallVector.h:122</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00066">Value.h:66</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a021bb7c9aad6003fe8089f6327356c6c"><div class="ttname"><a href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">llvm::Instruction::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const </div><div class="ttdoc">getOpcode() returns a member of one of the enums like Instruction::Add. </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00083">Instruction.h:83</a></div></div>
<div class="ttc" id="Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="Target_2X86_2README_8txt_source.html#l00297">Target/X86/README.txt:297</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_af67d1f3a518964d80a109bb3d9d5cf1e"><div class="ttname"><a href="classllvm_1_1Instruction.html#af67d1f3a518964d80a109bb3d9d5cf1e">llvm::Instruction::moveBefore</a></div><div class="ttdeci">void moveBefore(Instruction *MovePos)</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00091">Instruction.cpp:91</a></div></div>
<div class="ttc" id="classllvm_1_1TargetTransformInfo_html_a547c815fb7093e41196bc8dd0c4b9317"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a547c815fb7093e41196bc8dd0c4b9317">llvm::TargetTransformInfo::isTruncateFree</a></div><div class="ttdeci">virtual bool isTruncateFree(Type *Ty1, Type *Ty2) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00128">TargetTransformInfo.cpp:128</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a9dc5111b1a9b1d5c4652d50f74fe850b"><div class="ttname"><a href="classllvm_1_1Type.html#a9dc5111b1a9b1d5c4652d50f74fe850b">llvm::Type::isSized</a></div><div class="ttdeci">bool isSized() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00278">Type.h:278</a></div></div>
<div class="ttc" id="classllvm_1_1InvokeInst_html"><div class="ttname"><a href="classllvm_1_1InvokeInst.html">llvm::InvokeInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02841">Instructions.h:2841</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVExpander_html_a6b023424193e702b745da77d6ead62e8"><div class="ttname"><a href="classllvm_1_1SCEVExpander.html#a6b023424193e702b745da77d6ead62e8">llvm::SCEVExpander::isInsertedInstruction</a></div><div class="ttdeci">bool isInsertedInstruction(Instruction *I) const </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpander_8h_source.html#l00184">ScalarEvolutionExpander.h:184</a></div></div>
<div class="ttc" id="classllvm_1_1ScalarEvolution_html_ad8e4f5b2ced08ad7d138b598aefdd338"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#ad8e4f5b2ced08ad7d138b598aefdd338">llvm::ScalarEvolution::getUnknown</a></div><div class="ttdeci">const SCEV * getUnknown(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l02629">ScalarEvolution.cpp:2629</a></div></div>
<div class="ttc" id="classllvm_1_1ScalarEvolution_html_ac7ccf429f5c75676bdacadf3c9d1c7fa"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#ac7ccf429f5c75676bdacadf3c9d1c7fa">llvm::ScalarEvolution::dominates</a></div><div class="ttdeci">bool dominates(const SCEV *S, const BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l07588">ScalarEvolution.cpp:7588</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVNAryExpr_html_a5877c3a289aa71796140f54b73f654f7"><div class="ttname"><a href="classllvm_1_1SCEVNAryExpr.html#a5877c3a289aa71796140f54b73f654f7">llvm::SCEVNAryExpr::op_end</a></div><div class="ttdeci">op_iterator op_end() const </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00155">ScalarEvolutionExpressions.h:155</a></div></div>
<div class="ttc" id="TargetTransformInfo_8h_html"><div class="ttname"><a href="TargetTransformInfo_8h.html">TargetTransformInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_ab1cd5a3713b93a33f89a2086d473cf6e"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ab1cd5a3713b93a33f89a2086d473cf6e">llvm::BasicBlock::getFirstInsertionPt</a></div><div class="ttdeci">iterator getFirstInsertionPt()</div><div class="ttdoc">Returns an iterator to the first instruction in this block that is suitable for inserting a non-PHI i...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00170">BasicBlock.cpp:170</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVNAryExpr_html"><div class="ttname"><a href="classllvm_1_1SCEVNAryExpr.html">llvm::SCEVNAryExpr</a></div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00133">ScalarEvolutionExpressions.h:133</a></div></div>
<div class="ttc" id="namespacellvm_html_aed54a8c39c1f5f066957f1297bd6bd0b"><div class="ttname"><a href="namespacellvm.html#aed54a8c39c1f5f066957f1297bd6bd0b">llvm::isSafeToExpand</a></div><div class="ttdeci">bool isSafeToExpand(const SCEV *S, ScalarEvolution &amp;SE)</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpander_8cpp_source.html#l01743">ScalarEvolutionExpander.cpp:1743</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a90cca76dd78688687e0d697679dbc799"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional ldr LCPI1_0 ldr ldr tst movne lsr ldr LCPI1_1 and r0 bx lr it saves an instruction and a register It might be profitable to cse MOVi16 if there are lots of bit immediates with the same bottom half Robert Muth started working on an alternate jump table implementation that does not put the tables in line in the text This is more like the llvm default jump table implementation This might be useful sometime Several revisions of patches are on the mailing beginning while CMP sets them like a subtract Therefore to be able to use CMN for comparisons other than the Z we ll need additional logic to reverse the conditionals associated with the comparison Perhaps a pseudo instruction for the with a post codegen pass to clean up and handle the condition codes See PR5694 for testcase Given the following on int B</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00592">Target/ARM/README.txt:592</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVCastExpr_html_a84e9130d41f267f3f1bb29f432af267d"><div class="ttname"><a href="classllvm_1_1SCEVCastExpr.html#a84e9130d41f267f3f1bb29f432af267d">llvm::SCEVCastExpr::getOperand</a></div><div class="ttdeci">const SCEV * getOperand() const </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00066">ScalarEvolutionExpressions.h:66</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_a1e1ce75d651c76b6869b4218e34618c8"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a1e1ce75d651c76b6869b4218e34618c8">llvm::ConstantExpr::getCast</a></div><div class="ttdeci">static Constant * getCast(unsigned ops, Constant *C, Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01444">Constants.cpp:1444</a></div></div>
<div class="ttc" id="classllvm_1_1ScalarEvolution_html_ad5829d76e14852080c205f8b94d830f1"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#ad5829d76e14852080c205f8b94d830f1">llvm::ScalarEvolution::getMulExpr</a></div><div class="ttdeci">const SCEV * getMulExpr(SmallVectorImpl&lt; const SCEV * &gt; &amp;Ops, SCEV::NoWrapFlags Flags=SCEV::FlagAnyWrap)</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l01864">ScalarEvolution.cpp:1864</a></div></div>
<div class="ttc" id="namespacellvm_html_a6569d00d31a5d74e563e2f39f82271ab"><div class="ttname"><a href="namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">llvm::X</a></div><div class="ttdeci">static RegisterPass&lt; NVPTXAllocaHoisting &gt; X(&quot;alloca-hoisting&quot;,&quot;Hoisting alloca instructions in non-entry &quot;&quot;blocks to the entry block&quot;)</div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00052">Instruction.h:52</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVConstant_html"><div class="ttname"><a href="classllvm_1_1SCEVConstant.html">llvm::SCEVConstant</a></div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00037">ScalarEvolutionExpressions.h:37</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 23:01:23 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
