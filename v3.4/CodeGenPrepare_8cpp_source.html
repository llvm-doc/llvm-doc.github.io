<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: CodeGenPrepare.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('CodeGenPrepare_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">CodeGenPrepare.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="CodeGenPrepare_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- CodeGenPrepare.cpp - Prepare a function for code generation --------===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// This pass munges the code in the input function to better prepare it for</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// SelectionDAG-based code generation. This works around limitations in it&#39;s</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// basic-block-at-a-time approach. It should eventually be removed.</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div><div class="line"><a name="l00016"></a><span class="lineno"><a class="line" href="CodeGenPrepare_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   16</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;codegenprepare&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Transforms_2Scalar_8h.html">llvm/Transforms/Scalar.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseMap_8h.html">llvm/ADT/DenseMap.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallSet_8h.html">llvm/ADT/SmallSet.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueMap_8h.html">llvm/ADT/ValueMap.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DominatorInternals_8h.html">llvm/Analysis/DominatorInternals.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Dominators_8h.html">llvm/Analysis/Dominators.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstructionSimplify_8h.html">llvm/Analysis/InstructionSimplify.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Writer_8h.html">llvm/Assembly/Writer.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constants_8h.html">llvm/IR/Constants.h</a>&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DataLayout_8h.html">llvm/IR/DataLayout.h</a>&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DerivedTypes_8h.html">llvm/IR/DerivedTypes.h</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Function_8h.html">llvm/IR/Function.h</a>&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IRBuilder_8h.html">llvm/IR/IRBuilder.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InlineAsm_8h.html">llvm/IR/InlineAsm.h</a>&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instructions_8h.html">llvm/IR/Instructions.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IntrinsicInst_8h.html">llvm/IR/IntrinsicInst.h</a>&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Pass_8h.html">llvm/Pass.h</a>&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CallSite_8h.html">llvm/Support/CallSite.h</a>&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="GetElementPtrTypeIterator_8h.html">llvm/Support/GetElementPtrTypeIterator.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PatternMatch_8h.html">llvm/Support/PatternMatch.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueHandle_8h.html">llvm/Support/ValueHandle.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetLibraryInfo_8h.html">llvm/Target/TargetLibraryInfo.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetLowering_8h.html">llvm/Target/TargetLowering.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlockUtils_8h.html">llvm/Transforms/Utils/BasicBlockUtils.h</a>&quot;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BuildLibCalls_8h.html">llvm/Transforms/Utils/BuildLibCalls.h</a>&quot;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BypassSlowDivision_8h.html">llvm/Transforms/Utils/BypassSlowDivision.h</a>&quot;</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Local_8h.html">llvm/Transforms/Utils/Local.h</a>&quot;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm_1_1PatternMatch.html">llvm::PatternMatch</a>;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<a class="code" href="CodeGenPrepare_8cpp.html#a3bdfef32b8f739f6dfb8ac8728d4fdd7">STATISTIC</a>(NumBlocksElim, <span class="stringliteral">&quot;Number of blocks eliminated&quot;</span>);</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<a class="code" href="CodeGenPrepare_8cpp.html#a3bdfef32b8f739f6dfb8ac8728d4fdd7">STATISTIC</a>(NumPHIsElim,   <span class="stringliteral">&quot;Number of trivial PHIs eliminated&quot;</span>);</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<a class="code" href="CodeGenPrepare_8cpp.html#a3bdfef32b8f739f6dfb8ac8728d4fdd7">STATISTIC</a>(NumGEPsElim,   <span class="stringliteral">&quot;Number of GEPs converted to casts&quot;</span>);</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<a class="code" href="CodeGenPrepare_8cpp.html#a3bdfef32b8f739f6dfb8ac8728d4fdd7">STATISTIC</a>(NumCmpUses, <span class="stringliteral">&quot;Number of uses of Cmp expressions replaced with uses of &quot;</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;                      <span class="stringliteral">&quot;sunken Cmps&quot;</span>);</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<a class="code" href="CodeGenPrepare_8cpp.html#a3bdfef32b8f739f6dfb8ac8728d4fdd7">STATISTIC</a>(NumCastUses, <span class="stringliteral">&quot;Number of uses of Cast expressions replaced with uses &quot;</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;                       <span class="stringliteral">&quot;of sunken Casts&quot;</span>);</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<a class="code" href="CodeGenPrepare_8cpp.html#a3bdfef32b8f739f6dfb8ac8728d4fdd7">STATISTIC</a>(NumMemoryInsts, <span class="stringliteral">&quot;Number of memory instructions whose address &quot;</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;                          <span class="stringliteral">&quot;computations were sunk&quot;</span>);</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<a class="code" href="CodeGenPrepare_8cpp.html#a3bdfef32b8f739f6dfb8ac8728d4fdd7">STATISTIC</a>(NumExtsMoved,  <span class="stringliteral">&quot;Number of [s|z]ext instructions combined with loads&quot;</span>);</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<a class="code" href="CodeGenPrepare_8cpp.html#a3bdfef32b8f739f6dfb8ac8728d4fdd7">STATISTIC</a>(NumExtUses,    <span class="stringliteral">&quot;Number of uses of [s|z]ext instructions optimized&quot;</span>);</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<a class="code" href="CodeGenPrepare_8cpp.html#a3bdfef32b8f739f6dfb8ac8728d4fdd7">STATISTIC</a>(NumRetsDup,    <span class="stringliteral">&quot;Number of return instructions duplicated&quot;</span>);</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<a class="code" href="CodeGenPrepare_8cpp.html#a3bdfef32b8f739f6dfb8ac8728d4fdd7">STATISTIC</a>(NumDbgValueMoved, <span class="stringliteral">&quot;Number of debug value instructions moved&quot;</span>);</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<a class="code" href="CodeGenPrepare_8cpp.html#a3bdfef32b8f739f6dfb8ac8728d4fdd7">STATISTIC</a>(NumSelectsExpanded, <span class="stringliteral">&quot;Number of selects turned into branches&quot;</span>);</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="CodeGenPrepare_8cpp.html#ae51b73b67e301b063abfdd618fc6537e">DisableBranchOpts</a>(</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="stringliteral">&quot;disable-cgp-branch-opts&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>),</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Disable branch optimizations in CodeGenPrepare&quot;</span>));</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="CodeGenPrepare_8cpp.html#a18ea06b4e195aedc9dbd091d60d74365">DisableSelectToBranch</a>(</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="stringliteral">&quot;disable-cgp-select2branch&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>),</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Disable select to branch conversion.&quot;</span>));</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="keyword">class </span>CodeGenPrepare : <span class="keyword">public</span> <a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a> {<span class="comment"></span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">    /// TLI - Keep a pointer of a TargetLowering to consult for determining</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">    /// transformation profitability.</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment"></span>    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetMachine.html">TargetMachine</a> *<a class="code" href="namespacellvm_1_1SystemZISD.html#a9a3c050e4bfe8d0d09d74c979f5bb121a68ace50a32835aa0562cf8f9694ba510">TM</a>;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLowering.html">TargetLowering</a> *TLI;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLInfo;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">    /// CurInstIterator - As we scan instructions optimizing them, this is the</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">    /// next instruction to optimize.  Xforms that can invalidate this should</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">    /// update it.</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment"></span>    <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> CurInstIterator;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">    /// Keeps track of non-local addresses that have been sunk into a block.</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">    /// This allows us to avoid inserting duplicate code for blocks with</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">    /// multiple load/stores of the same address.</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment"></span>    <a class="code" href="classllvm_1_1ValueMap.html">ValueMap&lt;Value*, Value*&gt;</a> SunkAddrs;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">    /// ModifiedDT - If CFG is modified in anyway, dominator tree may need to</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">    /// be updated.</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> ModifiedDT;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">    /// OptSize - True if optimizing for size.</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> OptSize;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="keyword">public</span>:</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>; <span class="comment">// Pass identification, replacement for typeid</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keyword">explicit</span> CodeGenPrepare(<span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetMachine.html">TargetMachine</a> *TM = 0)</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;      : <a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a>(ID), TM(TM), TLI(0) {</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <a class="code" href="namespacellvm.html#a8f1d94877a9c9ea068af41c5315f5117">initializeCodeGenPreparePass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      }</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keywordtype">bool</span> runOnFunction(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>);</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *getPassName()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="stringliteral">&quot;CodeGen Prepare&quot;</span>; }</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const </span>{</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a>&gt;();</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a>&gt;();</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    }</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="keyword">private</span>:</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordtype">bool</span> EliminateFallThrough(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordtype">bool</span> EliminateMostlyEmptyBlocks(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordtype">bool</span> CanMergeBlocks(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *DestBB) <span class="keyword">const</span>;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keywordtype">void</span> EliminateMostlyEmptyBlock(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordtype">bool</span> OptimizeBlock(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keywordtype">bool</span> OptimizeInst(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordtype">bool</span> OptimizeMemoryInst(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *Addr, <a class="code" href="classllvm_1_1Type.html">Type</a> *AccessTy);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordtype">bool</span> OptimizeInlineAsmInst(<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CS);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordtype">bool</span> OptimizeCallInst(<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI);</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordtype">bool</span> MoveExtToFormExtLoad(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordtype">bool</span> OptimizeExtUses(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordtype">bool</span> OptimizeSelectInst(<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *SI);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordtype">bool</span> DupRetToEnableTailCallOpts(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordtype">bool</span> PlaceDbgValues(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>);</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  };</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;}</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">CodeGenPrepare::ID</a> = 0;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<a class="code" href="CodeGenPrepare_8cpp.html#a9f3b1621e479023525ae3f15b83651f6">INITIALIZE_PASS_BEGIN</a>(CodeGenPrepare, <span class="stringliteral">&quot;codegenprepare&quot;</span>,</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                <span class="stringliteral">&quot;Optimize for code generation&quot;</span>, <span class="keyword">false</span>, <span class="keyword">false</span>)</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a>)</div><div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="CodeGenPrepare_8cpp.html#a109eb00135035c7badb12cece015c58d">  137</a></span>&#160;<a class="code" href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a>(CodeGenPrepare, &quot;<a class="code" href="CodeGenPrepare_8cpp.html#aad73fa98571d735a6c438eeafcf23d93">codegenprepare</a>&quot;,</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                &quot;Optimize <a class="code" href="Target_2README_8txt.html#a7df6ed7588301267782c2bd4b7f6899d">for</a> <a class="code" href="README-Thumb_8txt.html#a5d98a8b5139e56ebf0d2ff4cbaa0dc5e">code</a> <a class="code" href="CodeGenPrepare_8cpp.html#a109eb00135035c7badb12cece015c58d">generation</a>&quot;, <a class="code" href="namespacefalse.html">false</a>, false)</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="namespacellvm.html#ad1843182b2dd138465209e5dfd66dcd2">  140</a></span>&#160;<a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a> *<a class="code" href="namespacellvm.html">llvm</a>::<a class="code" href="namespacellvm.html#ad1843182b2dd138465209e5dfd66dcd2">createCodeGenPreparePass</a>(const <a class="code" href="classllvm_1_1TargetMachine.html">TargetMachine</a> *<a class="code" href="namespacellvm_1_1SystemZISD.html#a9a3c050e4bfe8d0d09d74c979f5bb121a68ace50a32835aa0562cf8f9694ba510">TM</a>) {</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> CodeGenPrepare(TM);</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;}</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="keywordtype">bool</span> CodeGenPrepare::runOnFunction(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>) {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <span class="keywordtype">bool</span> EverMadeChange = <span class="keyword">false</span>;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  ModifiedDT = <span class="keyword">false</span>;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1SystemZISD.html#a9a3c050e4bfe8d0d09d74c979f5bb121a68ace50a32835aa0562cf8f9694ba510">TM</a>) TLI = <a class="code" href="namespacellvm_1_1SystemZISD.html#a9a3c050e4bfe8d0d09d74c979f5bb121a68ace50a32835aa0562cf8f9694ba510">TM</a>-&gt;getTargetLowering();</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  TLInfo = &amp;getAnalysis&lt;TargetLibraryInfo&gt;();</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  DT = getAnalysisIfAvailable&lt;DominatorTree&gt;();</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  OptSize = F.<a class="code" href="classllvm_1_1Function.html#a72873ed64b7be01507a2248b8e756ec8">getAttributes</a>().<a class="code" href="classllvm_1_1AttributeSet.html#a54abbe67d4a53c92652f1666dc19281f">hasAttribute</a>(AttributeSet::FunctionIndex,</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                                           <a class="code" href="classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60ea2ac83e0612ce8f8d69651cd529061feb">Attribute::OptimizeForSize</a>);</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">  /// This optimization identifies DIV instructions that can be</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">  /// profitably bypassed and carried out with a shorter, faster divide.</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment"></span>  <span class="keywordflow">if</span> (!OptSize &amp;&amp; TLI &amp;&amp; TLI-&gt;isSlowDivBypassed()) {</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;unsigned int, unsigned int&gt;</a> &amp;BypassWidths =</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;       TLI-&gt;getBypassSlowDivWidths();</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">Function::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = F.<a class="code" href="classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">begin</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != F.<a class="code" href="classllvm_1_1Function.html#ae4ca2261b8b901e415fda7feac5051ea">end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++)</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      EverMadeChange |= <a class="code" href="namespacellvm.html#a786eacc1517959ee09e2c6b20d454514">bypassSlowDivision</a>(F, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, BypassWidths);</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  }</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <span class="comment">// Eliminate blocks that contain only PHI nodes and an</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="comment">// unconditional branch.</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  EverMadeChange |= EliminateMostlyEmptyBlocks(F);</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="comment">// llvm.dbg.value is far away from the value then iSel may not be able</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="comment">// handle it properly. iSel will drop llvm.dbg.value if it can not</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="comment">// find a node corresponding to the value.</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  EverMadeChange |= PlaceDbgValues(F);</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="keywordtype">bool</span> MadeChange = <span class="keyword">true</span>;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="keywordflow">while</span> (MadeChange) {</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    MadeChange = <span class="keyword">false</span>;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">Function::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = F.<a class="code" href="classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">begin</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != F.<a class="code" href="classllvm_1_1Function.html#ae4ca2261b8b901e415fda7feac5051ea">end</a>(); ) {</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      MadeChange |= OptimizeBlock(*BB);</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    }</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    EverMadeChange |= MadeChange;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  }</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  SunkAddrs.clear();</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="CodeGenPrepare_8cpp.html#ae51b73b67e301b063abfdd618fc6537e">DisableBranchOpts</a>) {</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    MadeChange = <span class="keyword">false</span>;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock*, 8&gt;</a> WorkList;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">Function::iterator</a> <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = F.<a class="code" href="classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">begin</a>(), E = F.<a class="code" href="classllvm_1_1Function.html#ae4ca2261b8b901e415fda7feac5051ea">end</a>(); <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> != E; ++<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock*, 2&gt;</a> Successors(<a class="code" href="namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">succ_begin</a>(<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>), <a class="code" href="namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">succ_end</a>(<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>));</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      MadeChange |= <a class="code" href="namespacellvm.html#a78ab69092404fc83d77ccb06b3f7138d">ConstantFoldTerminator</a>(<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <span class="keyword">true</span>);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      <span class="keywordflow">if</span> (!MadeChange) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classT.html">SmallVectorImpl&lt;BasicBlock*&gt;::iterator</a></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;             II = Successors.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a> = Successors.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>(); II != <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a>; ++II)</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(*II) == <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(*II))</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;          WorkList.<a class="code" href="classllvm_1_1SmallPtrSet.html#a9b6dd0fc7a648a939e571246045b673e">insert</a>(*II);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    }</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="comment">// Delete the dead blocks and any of their dead successors.</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    MadeChange |= !WorkList.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a095445850ef2c64e96b4c05120cecf66">empty</a>();</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">while</span> (!WorkList.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a095445850ef2c64e96b4c05120cecf66">empty</a>()) {</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = *WorkList.<a class="code" href="classllvm_1_1SmallPtrSet.html#a669d599eeacffd29a09050e2af83bf67">begin</a>();</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      WorkList.<a class="code" href="classllvm_1_1SmallPtrSet.html#a2ce650c1d4a48661b501206d04b6ab04">erase</a>(BB);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock*, 2&gt;</a> Successors(<a class="code" href="namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">succ_begin</a>(BB), <a class="code" href="namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">succ_end</a>(BB));</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      <a class="code" href="namespacellvm.html#a9d7d0a4008434561f28c20126b992b89">DeleteDeadBlock</a>(BB);</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classT.html">SmallVectorImpl&lt;BasicBlock*&gt;::iterator</a></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;             II = Successors.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a> = Successors.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>(); II != <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a>; ++II)</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(*II) == <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(*II))</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;          WorkList.<a class="code" href="classllvm_1_1SmallPtrSet.html#a9b6dd0fc7a648a939e571246045b673e">insert</a>(*II);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    }</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="comment">// Merge pairs of basic blocks with unconditional branches, connected by</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="comment">// a single edge.</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">if</span> (EverMadeChange || MadeChange)</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      MadeChange |= EliminateFallThrough(F);</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordflow">if</span> (MadeChange)</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      ModifiedDT = <span class="keyword">true</span>;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    EverMadeChange |= MadeChange;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  }</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="keywordflow">if</span> (ModifiedDT &amp;&amp; DT)</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    DT-&gt;DT-&gt;recalculate(F);</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="keywordflow">return</span> EverMadeChange;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;}</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">/// EliminateFallThrough - Merge basic blocks which are connected</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">/// by a single edge, where one of the basic blocks has a single successor</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">/// pointing to the other basic block, which has a single predecessor.</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> CodeGenPrepare::EliminateFallThrough(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;F) {</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="comment">// Scan all of the blocks in the function, except for the entry block.</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">Function::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = ++F.<a class="code" href="classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">begin</a>(), E = F.<a class="code" href="classllvm_1_1Function.html#ae4ca2261b8b901e415fda7feac5051ea">end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ) {</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="comment">// If the destination block has a single pred, then this is a trivial</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="comment">// edge, just collapse it.</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SinglePred = BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5ef55181ae0bb0f5c561b9a29087b1e5">getSinglePredecessor</a>();</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="comment">// Don&#39;t merge if BB&#39;s address is taken.</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordflow">if</span> (!SinglePred || SinglePred == BB || BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a12fd03c41b1697fca070c12317794400">hasAddressTaken</a>()) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *Term = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a>&gt;(SinglePred-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>());</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordflow">if</span> (Term &amp;&amp; !Term-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a03cc0dff22b31447f43af97acb76b1a2">isConditional</a>()) {</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;To merge:\n&quot;</span>&lt;&lt; *SinglePred &lt;&lt; <span class="stringliteral">&quot;\n\n\n&quot;</span>);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      <span class="comment">// Remember if SinglePred was the entry block of the function.</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      <span class="comment">// If so, we will need to move BB back to the entry position.</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      <span class="keywordtype">bool</span> isEntry = SinglePred == &amp;SinglePred-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#a30f2c362631e3728d2f47a8203071ade">getEntryBlock</a>();</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      <a class="code" href="namespacellvm.html#a02b5336d71826082af53837f2ffe6128">MergeBasicBlockIntoOnlyPred</a>(BB, <span class="keyword">this</span>);</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      <span class="keywordflow">if</span> (isEntry &amp;&amp; BB != &amp;BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#a30f2c362631e3728d2f47a8203071ade">getEntryBlock</a>())</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a41da369a9d31d911c8af724d5630f724">moveBefore</a>(&amp;BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#a30f2c362631e3728d2f47a8203071ade">getEntryBlock</a>());</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      <span class="comment">// We have erased a block. Update the iterator.</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    }</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  }</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <span class="keywordflow">return</span> Changed;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;}</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">/// EliminateMostlyEmptyBlocks - eliminate blocks that contain only PHI nodes,</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">/// debug info directives, and an unconditional branch.  Passes before isel</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">/// (e.g. LSR/loopsimplify) often split edges in ways that are non-optimal for</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">/// isel.  Start by eliminating these blocks so we can split them the way we</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">/// want them.</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> CodeGenPrepare::EliminateMostlyEmptyBlocks(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;F) {</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="keywordtype">bool</span> MadeChange = <span class="keyword">false</span>;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <span class="comment">// Note that this intentionally skips the entry block.</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">Function::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = ++F.<a class="code" href="classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">begin</a>(), E = F.<a class="code" href="classllvm_1_1Function.html#ae4ca2261b8b901e415fda7feac5051ea">end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ) {</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="comment">// If this block doesn&#39;t end with an uncond branch, ignore it.</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a>&gt;(BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>());</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">if</span> (!BI || !BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a382131e712e55e8324fbd5068de17b78">isUnconditional</a>())</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="comment">// If the instruction before the branch (skipping debug info) isn&#39;t a phi</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="comment">// node, then other stuff is happening here.</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> BBI = BI;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordflow">if</span> (BBI != BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>()) {</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      --BBI;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      <span class="keywordflow">while</span> (isa&lt;DbgInfoIntrinsic&gt;(BBI)) {</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <span class="keywordflow">if</span> (BBI == BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>())</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        --BBI;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      }</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      <span class="keywordflow">if</span> (!isa&lt;DbgInfoIntrinsic&gt;(BBI) &amp;&amp; !isa&lt;PHINode&gt;(BBI))</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    }</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="comment">// Do not break infinite loops.</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *DestBB = BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(0);</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keywordflow">if</span> (DestBB == BB)</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordflow">if</span> (!CanMergeBlocks(BB, DestBB))</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    EliminateMostlyEmptyBlock(BB);</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    MadeChange = <span class="keyword">true</span>;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  }</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <span class="keywordflow">return</span> MadeChange;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;}</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment">/// CanMergeBlocks - Return true if we can merge BB into DestBB if there is a</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment">/// single uncond branch between them, and BB contains no other non-phi</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment">/// instructions.</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> CodeGenPrepare::CanMergeBlocks(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                                    <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *DestBB)<span class="keyword"> const </span>{</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <span class="comment">// We only want to eliminate blocks whose phi nodes are used by phi nodes in</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="comment">// the successor.  If there are more complex condition (e.g. preheaders),</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <span class="comment">// don&#39;t mess around with them.</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::const_iterator</a> BBI = BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="keywordflow">while</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(BBI++)) {</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::const_use_iterator</a> UI = PN-&gt;use_begin(), E = PN-&gt;use_end();</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;         UI != E; ++UI) {</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1User.html">User</a> = cast&lt;Instruction&gt;(*UI);</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      <span class="keywordflow">if</span> (User-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>() != DestBB || !isa&lt;PHINode&gt;(User))</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      <span class="comment">// If User is inside DestBB block and it is a PHINode then check</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      <span class="comment">// incoming value. If incoming value is not from BB then this is</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      <span class="comment">// a complex condition (e.g. preheaders) we want to avoid here.</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      <span class="keywordflow">if</span> (User-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>() == DestBB) {</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *UPN = dyn_cast&lt;PHINode&gt;(User))</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, E = UPN-&gt;getNumIncomingValues(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Insn = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a>&gt;(UPN-&gt;getIncomingValue(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            <span class="keywordflow">if</span> (Insn &amp;&amp; Insn-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>() == BB &amp;&amp;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                Insn-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>() != UPN-&gt;getIncomingBlock(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;              <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;          }</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      }</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    }</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  }</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <span class="comment">// If BB and DestBB contain any common predecessors, then the phi nodes in BB</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="comment">// and DestBB may have conflicting incoming values for the block.  If so, we</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <span class="comment">// can&#39;t merge the block.</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *DestBBPN = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1PHINode.html">PHINode</a>&gt;(DestBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>());</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <span class="keywordflow">if</span> (!DestBBPN) <span class="keywordflow">return</span> <span class="keyword">true</span>;  <span class="comment">// no conflict.</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="comment">// Collect the preds of BB.</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const BasicBlock*, 16&gt;</a> BBPreds;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *BBPN = dyn_cast&lt;PHINode&gt;(BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>())) {</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="comment">// It is faster to get preds from a PHI than with pred_iterator.</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = BBPN-&gt;getNumIncomingValues(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      BBPreds.<a class="code" href="classllvm_1_1SmallPtrSet.html#a9b6dd0fc7a648a939e571246045b673e">insert</a>(BBPN-&gt;getIncomingBlock(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    BBPreds.<a class="code" href="classllvm_1_1SmallPtrSet.html#a9b6dd0fc7a648a939e571246045b673e">insert</a>(<a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(BB), <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(BB));</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  }</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="comment">// Walk the preds of DestBB.</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = DestBBPN-&gt;<a class="code" href="classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">getNumIncomingValues</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred = DestBBPN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a4c25b6c00c4867281779c81ab64d2081">getIncomingBlock</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keywordflow">if</span> (BBPreds.<a class="code" href="classllvm_1_1SmallPtrSet.html#a2ced6343b8ad006a757059554bbf9f37">count</a>(Pred)) {   <span class="comment">// Common predecessor?</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      BBI = DestBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;      <span class="keywordflow">while</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(BBI++)) {</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *V1 = PN-&gt;getIncomingValueForBlock(Pred);</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a> = PN-&gt;getIncomingValueForBlock(BB);</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <span class="comment">// If V2 is a phi node in BB, look up what the mapped value will be.</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *V2PN = dyn_cast&lt;PHINode&gt;(V2))</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;          <span class="keywordflow">if</span> (V2PN-&gt;getParent() == <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            V2 = V2PN-&gt;getIncomingValueForBlock(Pred);</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <span class="comment">// If there is a conflict, bail out.</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <span class="keywordflow">if</span> (V1 != V2) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      }</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    }</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  }</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;}</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment">/// EliminateMostlyEmptyBlock - Eliminate a basic block that have only phi&#39;s and</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment">/// an unconditional branch in it.</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> CodeGenPrepare::EliminateMostlyEmptyBlock(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB) {</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = cast&lt;BranchInst&gt;(BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>());</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *DestBB = BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(0);</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;MERGING MOSTLY EMPTY BLOCKS - BEFORE:\n&quot;</span> &lt;&lt; *BB &lt;&lt; *DestBB);</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <span class="comment">// If the destination block has a single pred, then this is a trivial edge,</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="comment">// just collapse it.</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SinglePred = DestBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5ef55181ae0bb0f5c561b9a29087b1e5">getSinglePredecessor</a>()) {</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keywordflow">if</span> (SinglePred != DestBB) {</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      <span class="comment">// Remember if SinglePred was the entry block of the function.  If so, we</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;      <span class="comment">// will need to move BB back to the entry position.</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      <span class="keywordtype">bool</span> isEntry = SinglePred == &amp;SinglePred-&gt;getParent()-&gt;getEntryBlock();</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;      <a class="code" href="namespacellvm.html#a02b5336d71826082af53837f2ffe6128">MergeBasicBlockIntoOnlyPred</a>(DestBB, <span class="keyword">this</span>);</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      <span class="keywordflow">if</span> (isEntry &amp;&amp; BB != &amp;BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#a30f2c362631e3728d2f47a8203071ade">getEntryBlock</a>())</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a41da369a9d31d911c8af724d5630f724">moveBefore</a>(&amp;BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#a30f2c362631e3728d2f47a8203071ade">getEntryBlock</a>());</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;AFTER:\n&quot;</span> &lt;&lt; *DestBB &lt;&lt; <span class="stringliteral">&quot;\n\n\n&quot;</span>);</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    }</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  }</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="comment">// Otherwise, we have multiple predecessors of BB.  Update the PHIs in DestBB</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="comment">// to handle the new incoming edges it is about to have.</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> BBI = DestBB-&gt;begin();</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;       (PN = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1PHINode.html">PHINode</a>&gt;(BBI)); ++BBI) {</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="comment">// Remove the incoming value for BB, and remember it.</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *InVal = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a6f01dbe965b38186b1a78378689d4105">removeIncomingValue</a>(BB, <span class="keyword">false</span>);</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="comment">// Two options: either the InVal is a phi node defined in BB or it is some</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="comment">// value that dominates BB.</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *InValPhi = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1PHINode.html">PHINode</a>&gt;(InVal);</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">if</span> (InValPhi &amp;&amp; InValPhi-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>() == <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      <span class="comment">// Add all of the input values of the input PHI as inputs of this phi.</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = InValPhi-&gt;<a class="code" href="classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">getNumIncomingValues</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(InValPhi-&gt;<a class="code" href="classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">getIncomingValue</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>),</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                        InValPhi-&gt;<a class="code" href="classllvm_1_1PHINode.html#a4c25b6c00c4867281779c81ab64d2081">getIncomingBlock</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      <span class="comment">// Otherwise, add one instance of the dominating value for each edge that</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      <span class="comment">// we will be adding.</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *BBPN = dyn_cast&lt;PHINode&gt;(BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>())) {</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = BBPN-&gt;getNumIncomingValues(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;          PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(InVal, BBPN-&gt;getIncomingBlock(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PredIterator.html">pred_iterator</a> PI = <a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(BB), E = <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(BB); PI != E; ++PI)</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;          PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(InVal, *PI);</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      }</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    }</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  }</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="comment">// The PHIs are now updated, change everything that refers to BB to use</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <span class="comment">// DestBB and remove BB.</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  BB-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(DestBB);</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <span class="keywordflow">if</span> (DT &amp;&amp; !ModifiedDT) {</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BBIDom  = DT-&gt;getNode(BB)-&gt;getIDom()-&gt;getBlock();</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *DestBBIDom = DT-&gt;getNode(DestBB)-&gt;getIDom()-&gt;getBlock();</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewIDom = DT-&gt;findNearestCommonDominator(BBIDom, DestBBIDom);</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    DT-&gt;changeImmediateDominator(DestBB, NewIDom);</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    DT-&gt;eraseNode(BB);</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  }</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ace1ad5ed624dd5df8efb4eb611cb71ff">eraseFromParent</a>();</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  ++NumBlocksElim;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;AFTER:\n&quot;</span> &lt;&lt; *DestBB &lt;&lt; <span class="stringliteral">&quot;\n\n\n&quot;</span>);</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;}</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment">/// OptimizeNoopCopyExpression - If the specified cast instruction is a noop</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment">/// copy (e.g. it&#39;s casting from one pointer type to another, i32-&gt;i8 on PPC),</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="comment">/// sink it into user blocks to reduce the number of virtual</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="comment">/// registers that must be created and coalesced.</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment">/// Return true if any changes are made.</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00454"></a><span class="lineno"><a class="line" href="CodeGenPrepare_8cpp.html#a5879e98ff962702779287b966f4dce4b">  454</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="CodeGenPrepare_8cpp.html#a5879e98ff962702779287b966f4dce4b">OptimizeNoopCopyExpression</a>(<a class="code" href="classllvm_1_1CastInst.html">CastInst</a> *CI, <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLowering.html">TargetLowering</a> &amp;TLI){</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <span class="comment">// If this is a noop copy,</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  <a class="code" href="structllvm_1_1EVT.html">EVT</a> SrcVT = TLI.<a class="code" href="classllvm_1_1TargetLoweringBase.html#a9a29cc66e132c19330ddabb82d44bef7">getValueType</a>(CI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  <a class="code" href="structllvm_1_1EVT.html">EVT</a> DstVT = TLI.<a class="code" href="classllvm_1_1TargetLoweringBase.html#a9a29cc66e132c19330ddabb82d44bef7">getValueType</a>(CI-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <span class="comment">// This is an fp&lt;-&gt;int conversion?</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <span class="keywordflow">if</span> (SrcVT.<a class="code" href="structllvm_1_1EVT.html#a8cc407ac00df4edd4ec4d5168d6ecb26">isInteger</a>() != DstVT.<a class="code" href="structllvm_1_1EVT.html#a8cc407ac00df4edd4ec4d5168d6ecb26">isInteger</a>())</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="comment">// If this is an extension, it will be a zero or sign extension, which</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <span class="comment">// isn&#39;t a noop.</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <span class="keywordflow">if</span> (SrcVT.<a class="code" href="structllvm_1_1EVT.html#a5ebe5227fe53e0dcf4102a6ebf1594a2">bitsLT</a>(DstVT)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <span class="comment">// If these values will be promoted, find out what they will be promoted</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  <span class="comment">// to.  This helps us consider truncates on PPC as noop copies when they</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  <span class="comment">// are.</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  <span class="keywordflow">if</span> (TLI.<a class="code" href="classllvm_1_1TargetLoweringBase.html#a7b93b105a426bc0eda1eadd856aa195e">getTypeAction</a>(CI-&gt;<a class="code" href="classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>(), SrcVT) ==</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;      <a class="code" href="classllvm_1_1TargetLoweringBase.html#a88a8b01d4dbc2ebd81244d1eb459b193a26f35604723482a1aee6514940c2987d">TargetLowering::TypePromoteInteger</a>)</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    SrcVT = TLI.<a class="code" href="classllvm_1_1TargetLoweringBase.html#a76daffc43a9b516f4fe4999c7b680ca0">getTypeToTransformTo</a>(CI-&gt;<a class="code" href="classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>(), SrcVT);</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  <span class="keywordflow">if</span> (TLI.<a class="code" href="classllvm_1_1TargetLoweringBase.html#a7b93b105a426bc0eda1eadd856aa195e">getTypeAction</a>(CI-&gt;<a class="code" href="classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>(), DstVT) ==</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      <a class="code" href="classllvm_1_1TargetLoweringBase.html#a88a8b01d4dbc2ebd81244d1eb459b193a26f35604723482a1aee6514940c2987d">TargetLowering::TypePromoteInteger</a>)</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    DstVT = TLI.<a class="code" href="classllvm_1_1TargetLoweringBase.html#a76daffc43a9b516f4fe4999c7b680ca0">getTypeToTransformTo</a>(CI-&gt;<a class="code" href="classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>(), DstVT);</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <span class="comment">// If, after promotion, these are the same types, this is a noop copy.</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="keywordflow">if</span> (SrcVT != DstVT)</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *DefBB = CI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment">  /// InsertedCasts - Only insert a cast in each block once.</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;BasicBlock*, CastInst*&gt;</a> InsertedCasts;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  <span class="keywordtype">bool</span> MadeChange = <span class="keyword">false</span>;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::use_iterator</a> UI = CI-&gt;<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>(), E = CI-&gt;<a class="code" href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">use_end</a>();</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;       UI != E; ) {</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <a class="code" href="classllvm_1_1Use.html">Use</a> &amp;TheUse = UI.getUse();</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1User.html">User</a> = cast&lt;Instruction&gt;(*UI);</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="comment">// Figure out which BB this cast is used in.  For PHI&#39;s this is the</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="comment">// appropriate predecessor block.</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *UserBB = User-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(User)) {</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;      UserBB = PN-&gt;getIncomingBlock(UI);</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    }</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="comment">// Preincrement use iterator so we don&#39;t invalidate it.</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    ++UI;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="comment">// If this user is in the same block as the cast, don&#39;t change the cast.</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="keywordflow">if</span> (UserBB == DefBB) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="comment">// If we have already inserted a cast into this block, use it.</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <a class="code" href="classllvm_1_1CastInst.html">CastInst</a> *&amp;InsertedCast = InsertedCasts[UserBB];</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keywordflow">if</span> (!InsertedCast) {</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> InsertPt = UserBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ab1cd5a3713b93a33f89a2086d473cf6e">getFirstInsertionPt</a>();</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      InsertedCast =</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        <a class="code" href="classllvm_1_1CastInst.html#a0f7dea9550778374905e12da6d6ba8a8">CastInst::Create</a>(CI-&gt;<a class="code" href="classllvm_1_1CastInst.html#adc3489e61d5f37a0e4c5589859fbccc2">getOpcode</a>(), CI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), CI-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                         InsertPt);</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;      MadeChange = <span class="keyword">true</span>;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    }</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="comment">// Replace a use of the cast with a use of the new cast.</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    TheUse = InsertedCast;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    ++NumCastUses;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  }</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <span class="comment">// If we removed all uses, nuke the cast.</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="keywordflow">if</span> (CI-&gt;<a class="code" href="classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">use_empty</a>()) {</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    CI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    MadeChange = <span class="keyword">true</span>;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  }</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  <span class="keywordflow">return</span> MadeChange;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;}</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment">/// OptimizeCmpExpression - sink the given CmpInst into user blocks to reduce</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment">/// the number of virtual registers that must be created and coalesced.  This is</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment">/// a clear win except on targets with multiple condition code registers</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment">///  (PowerPC), where it might lose; some adjustment may be wanted there.</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="comment">/// Return true if any changes are made.</span></div><div class="line"><a name="l00536"></a><span class="lineno"><a class="line" href="CodeGenPrepare_8cpp.html#aa7cb7b30ab9793838d6ad4e23f67673d">  536</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="CodeGenPrepare_8cpp.html#aa7cb7b30ab9793838d6ad4e23f67673d">OptimizeCmpExpression</a>(<a class="code" href="classllvm_1_1CmpInst.html">CmpInst</a> *CI) {</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *DefBB = CI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment">  /// InsertedCmp - Only insert a cmp in each block once.</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;BasicBlock*, CmpInst*&gt;</a> InsertedCmps;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <span class="keywordtype">bool</span> MadeChange = <span class="keyword">false</span>;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::use_iterator</a> UI = CI-&gt;<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>(), E = CI-&gt;<a class="code" href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">use_end</a>();</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;       UI != E; ) {</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <a class="code" href="classllvm_1_1Use.html">Use</a> &amp;TheUse = UI.getUse();</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1User.html">User</a> = cast&lt;Instruction&gt;(*UI);</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="comment">// Preincrement use iterator so we don&#39;t invalidate it.</span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    ++UI;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <span class="comment">// Don&#39;t bother for PHI nodes.</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="keywordflow">if</span> (isa&lt;PHINode&gt;(User))</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <span class="comment">// Figure out which BB this cmp is used in.</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *UserBB = User-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <span class="comment">// If this user is in the same block as the cmp, don&#39;t change the cmp.</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="keywordflow">if</span> (UserBB == DefBB) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <span class="comment">// If we have already inserted a cmp into this block, use it.</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <a class="code" href="classllvm_1_1CmpInst.html">CmpInst</a> *&amp;InsertedCmp = InsertedCmps[UserBB];</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keywordflow">if</span> (!InsertedCmp) {</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> InsertPt = UserBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ab1cd5a3713b93a33f89a2086d473cf6e">getFirstInsertionPt</a>();</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      InsertedCmp =</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <a class="code" href="classllvm_1_1CmpInst.html#a4cd12603c3c76eb84d050733f6ddc8b7">CmpInst::Create</a>(CI-&gt;<a class="code" href="classllvm_1_1CmpInst.html#afb3301fb99a3b118d9fe496faf1b114b">getOpcode</a>(),</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                        CI-&gt;<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(),  CI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0),</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                        CI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1), <span class="stringliteral">&quot;&quot;</span>, InsertPt);</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      MadeChange = <span class="keyword">true</span>;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    }</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="comment">// Replace a use of the cmp with a use of the new cmp.</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    TheUse = InsertedCmp;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    ++NumCmpUses;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  }</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  <span class="comment">// If we removed all uses, nuke the cmp.</span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  <span class="keywordflow">if</span> (CI-&gt;<a class="code" href="classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">use_empty</a>())</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    CI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  <span class="keywordflow">return</span> MadeChange;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;}</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="keyword">class </span>CodeGenPrepareFortifiedLibCalls : <span class="keyword">public</span> <a class="code" href="classllvm_1_1SimplifyFortifiedLibCalls.html">SimplifyFortifiedLibCalls</a> {</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="keyword">protected</span>:</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  <span class="keywordtype">void</span> replaceCall(<a class="code" href="classllvm_1_1Value.html">Value</a> *With) {</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    CI-&gt;replaceAllUsesWith(With);</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    CI-&gt;eraseFromParent();</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  }</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="keywordtype">bool</span> isFoldable(<span class="keywordtype">unsigned</span> SizeCIOp, <span class="keywordtype">unsigned</span>, <span class="keywordtype">bool</span>)<span class="keyword"> const </span>{</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *SizeCI =</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                             dyn_cast&lt;ConstantInt&gt;(CI-&gt;getArgOperand(SizeCIOp)))</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        <span class="keywordflow">return</span> SizeCI-&gt;isAllOnesValue();</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  }</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;};</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;} <span class="comment">// end anonymous namespace</span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="keywordtype">bool</span> CodeGenPrepare::OptimizeCallInst(<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI) {</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB = CI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  <span class="comment">// Lower inline assembly if we can.</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <span class="comment">// If we found an inline asm expession, and if the target knows how to</span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  <span class="comment">// lower it to normal LLVM code, do so now.</span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  <span class="keywordflow">if</span> (TLI &amp;&amp; isa&lt;InlineAsm&gt;(CI-&gt;<a class="code" href="classllvm_1_1CallInst.html#a6917dcd78ac6655e9640ac3a96175e39">getCalledValue</a>())) {</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="keywordflow">if</span> (TLI-&gt;ExpandInlineAsm(CI)) {</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;      <span class="comment">// Avoid invalidating the iterator.</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      CurInstIterator = BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;      <span class="comment">// Avoid processing instructions out of order, which could cause</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;      <span class="comment">// reuse before a value is defined.</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      SunkAddrs.clear();</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    }</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="comment">// Sink address computing for memory operands into the block.</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="keywordflow">if</span> (OptimizeInlineAsmInst(CI))</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  }</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  <span class="comment">// Lower all uses of llvm.objectsize.*</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  <a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *II = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a>&gt;(CI);</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <span class="keywordflow">if</span> (II &amp;&amp; II-&gt;<a class="code" href="classllvm_1_1IntrinsicInst.html#a6cbb4809b81f3994ee0c79b38556bd66">getIntrinsicID</a>() == <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90afb99c5b4c79f8419d2018d9499d15a93">Intrinsic::objectsize</a>) {</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <span class="keywordtype">bool</span> Min = (cast&lt;ConstantInt&gt;(II-&gt;<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(1))-&gt;getZExtValue() == 1);</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *ReturnTy = CI-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *RetVal = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(ReturnTy, Min ? 0 : -1ULL);</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="comment">// Substituting this can cause recursive simplifications, which can</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="comment">// invalidate our iterator.  Use a WeakVH to hold onto it in case this</span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="comment">// happens.</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <a class="code" href="classllvm_1_1WeakVH.html">WeakVH</a> IterHandle(CurInstIterator);</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <a class="code" href="namespacellvm.html#a75689d3e1098e4a4e5f915c89c6db541">replaceAndRecursivelySimplify</a>(CI, RetVal, TLI ? TLI-&gt;getDataLayout() : 0,</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                                  TLInfo, ModifiedDT ? 0 : DT);</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <span class="comment">// If the iterator instruction was recursively deleted, start over at the</span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="comment">// start of the block.</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="keywordflow">if</span> (IterHandle != CurInstIterator) {</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;      CurInstIterator = BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;      SunkAddrs.clear();</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    }</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  }</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <span class="keywordflow">if</span> (II &amp;&amp; TLI) {</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value*, 2&gt;</a> PtrOps;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *AccessTy;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="keywordflow">if</span> (TLI-&gt;GetAddrModeArguments(II, PtrOps, AccessTy))</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;      <span class="keywordflow">while</span> (!PtrOps.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>())</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        <span class="keywordflow">if</span> (OptimizeMemoryInst(II, PtrOps.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">pop_back_val</a>(), AccessTy))</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  }</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  <span class="comment">// From here on out we&#39;re working with named functions.</span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  <span class="keywordflow">if</span> (CI-&gt;<a class="code" href="classllvm_1_1CallInst.html#a0bcd4131e1a1d92215f5385b4e16cd2e">getCalledFunction</a>() == 0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  <span class="comment">// We&#39;ll need DataLayout from here on out.</span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> *TD = TLI ? TLI-&gt;getDataLayout() : 0;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  <span class="keywordflow">if</span> (!TD) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  <span class="comment">// Lower all default uses of _chk calls.  This is very similar</span></div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  <span class="comment">// to what InstCombineCalls does, but here we are only lowering calls</span></div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  <span class="comment">// that have the default &quot;don&#39;t know&quot; as the objectsize.  Anything else</span></div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  <span class="comment">// should be left alone.</span></div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  CodeGenPrepareFortifiedLibCalls Simplifier;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  <span class="keywordflow">return</span> Simplifier.fold(CI, TD, TLInfo);</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;}</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="comment">/// DupRetToEnableTailCallOpts - Look for opportunities to duplicate return</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="comment">/// instructions to the predecessor to enable tail call optimizations. The</span></div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="comment">/// case it is currently looking for is:</span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="comment">/// @code</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<span class="comment">/// bb0:</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="comment">///   %tmp0 = tail call i32 @f0()</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<span class="comment">///   br label %return</span></div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;<span class="comment">/// bb1:</span></div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;<span class="comment">///   %tmp1 = tail call i32 @f1()</span></div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;<span class="comment">///   br label %return</span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;<span class="comment">/// bb2:</span></div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;<span class="comment">///   %tmp2 = tail call i32 @f2()</span></div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;<span class="comment">///   br label %return</span></div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;<span class="comment">/// return:</span></div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="comment">///   %retval = phi i32 [ %tmp0, %bb0 ], [ %tmp1, %bb1 ], [ %tmp2, %bb2 ]</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;<span class="comment">///   ret i32 %retval</span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="comment">/// @endcode</span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="comment">/// =&gt;</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="comment">/// @code</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="comment">/// bb0:</span></div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;<span class="comment">///   %tmp0 = tail call i32 @f0()</span></div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;<span class="comment">///   ret i32 %tmp0</span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="comment">/// bb1:</span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;<span class="comment">///   %tmp1 = tail call i32 @f1()</span></div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;<span class="comment">///   ret i32 %tmp1</span></div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="comment">/// bb2:</span></div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="comment">///   %tmp2 = tail call i32 @f2()</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="comment">///   ret i32 %tmp2</span></div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;<span class="comment">/// @endcode</span></div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> CodeGenPrepare::DupRetToEnableTailCallOpts(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB) {</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <span class="keywordflow">if</span> (!TLI)</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <a class="code" href="classllvm_1_1ReturnInst.html">ReturnInst</a> *RI = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ReturnInst.html">ReturnInst</a>&gt;(BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>());</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;  <span class="keywordflow">if</span> (!RI)</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = 0;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  <a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a> *BCI = 0;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *V = RI-&gt;<a class="code" href="classllvm_1_1ReturnInst.html#a7f6ab6ba1947d832a651e3589614a10d">getReturnValue</a>();</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  <span class="keywordflow">if</span> (V) {</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    BCI = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a>&gt;(V);</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="keywordflow">if</span> (BCI)</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;      V = BCI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    PN = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1PHINode.html">PHINode</a>&gt;(V);</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="keywordflow">if</span> (!PN)</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  }</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  <span class="keywordflow">if</span> (PN &amp;&amp; PN-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>() != <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <span class="comment">// It&#39;s not safe to eliminate the sign / zero extension of the return value.</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <span class="comment">// See llvm::isInTailCallPosition().</span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> *F = BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>();</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  <a class="code" href="classllvm_1_1AttributeSet.html">AttributeSet</a> CallerAttrs = F-&gt;<a class="code" href="classllvm_1_1Function.html#a72873ed64b7be01507a2248b8e756ec8">getAttributes</a>();</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  <span class="keywordflow">if</span> (CallerAttrs.<a class="code" href="classllvm_1_1AttributeSet.html#a54abbe67d4a53c92652f1666dc19281f">hasAttribute</a>(AttributeSet::ReturnIndex, <a class="code" href="classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60eabff1744e650ee242de2e5f05c25df983">Attribute::ZExt</a>) ||</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;      CallerAttrs.<a class="code" href="classllvm_1_1AttributeSet.html#a54abbe67d4a53c92652f1666dc19281f">hasAttribute</a>(AttributeSet::ReturnIndex, <a class="code" href="classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60ea133970930e56cfea2076c22632b4ba0f">Attribute::SExt</a>))</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  <span class="comment">// Make sure there are no instructions between the PHI and return, or that the</span></div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  <span class="comment">// return is the first instruction in the block.</span></div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  <span class="keywordflow">if</span> (PN) {</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> BI = BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <span class="keywordflow">do</span> { ++BI; } <span class="keywordflow">while</span> (isa&lt;DbgInfoIntrinsic&gt;(BI));</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <span class="keywordflow">if</span> (&amp;*BI == BCI)</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;      <span class="comment">// Also skip over the bitcast.</span></div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;      ++BI;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="keywordflow">if</span> (&amp;*BI != RI)</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> BI = BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="keywordflow">while</span> (isa&lt;DbgInfoIntrinsic&gt;(BI)) ++BI;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <span class="keywordflow">if</span> (&amp;*BI != RI)</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  }</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="comment">  /// Only dup the ReturnInst if the CallInst is likely to be emitted as a tail</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="comment">  /// call.</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;CallInst*, 4&gt;</a> TailCalls;</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  <span class="keywordflow">if</span> (PN) {</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, E = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">getNumIncomingValues</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;      <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1CallInst.html">CallInst</a>&gt;(PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">getIncomingValue</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;      <span class="comment">// Make sure the phi value is indeed produced by the tail call.</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;      <span class="keywordflow">if</span> (CI &amp;&amp; CI-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp; CI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>() == PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a4c25b6c00c4867281779c81ab64d2081">getIncomingBlock</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;          TLI-&gt;mayBeEmittedAsTailCall(CI))</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        TailCalls.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(CI);</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    }</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock*, 4&gt;</a> VisitedBBs;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PredIterator.html">pred_iterator</a> PI = <a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(BB), PE = <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(BB); PI != PE; ++PI) {</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;      <span class="keywordflow">if</span> (!VisitedBBs.<a class="code" href="classllvm_1_1SmallPtrSet.html#a9b6dd0fc7a648a939e571246045b673e">insert</a>(*PI))</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;      <a class="code" href="classllvm_1_1iplist.html">BasicBlock::InstListType</a> &amp;InstList = (*PI)-&gt;getInstList();</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      <a class="code" href="classllvm_1_1iplist.html#ab1b660345b57db3d80ad42123d6163ce">BasicBlock::InstListType::reverse_iterator</a> RI = InstList.<a class="code" href="classllvm_1_1iplist.html#ad5f5ac50ca28fc89c173eb3d64344afc">rbegin</a>();</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      <a class="code" href="classllvm_1_1iplist.html#ab1b660345b57db3d80ad42123d6163ce">BasicBlock::InstListType::reverse_iterator</a> RE = InstList.<a class="code" href="classllvm_1_1iplist.html#a99d24ef8a3c3b81d43fa244e43f976fc">rend</a>();</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;      <span class="keywordflow">do</span> { ++RI; } <span class="keywordflow">while</span> (RI != RE &amp;&amp; isa&lt;DbgInfoIntrinsic&gt;(&amp;*RI));</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;      <span class="keywordflow">if</span> (RI == RE)</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;      <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1CallInst.html">CallInst</a>&gt;(&amp;*RI);</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      <span class="keywordflow">if</span> (CI &amp;&amp; CI-&gt;<a class="code" href="classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">use_empty</a>() &amp;&amp; TLI-&gt;mayBeEmittedAsTailCall(CI))</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;        TailCalls.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(CI);</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    }</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  }</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = TailCalls.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI = TailCalls[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    <a class="code" href="classllvm_1_1CallSite.html">CallSite</a> CS(CI);</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <span class="comment">// Conservatively require the attributes of the call to match those of the</span></div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="comment">// return. Ignore noalias because it doesn&#39;t affect the call sequence.</span></div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <a class="code" href="classllvm_1_1AttributeSet.html">AttributeSet</a> CalleeAttrs = CS.<a class="code" href="classllvm_1_1CallSiteBase.html#a4e7c7828319bc9db0f49c3c6d8f56ac7">getAttributes</a>();</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1AttrBuilder.html">AttrBuilder</a>(CalleeAttrs, AttributeSet::ReturnIndex).</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;          removeAttribute(<a class="code" href="classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60ea785b9cc2e0b37298b4bef4b68cb50b75">Attribute::NoAlias</a>) !=</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        <a class="code" href="classllvm_1_1AttrBuilder.html">AttrBuilder</a>(CalleeAttrs, AttributeSet::ReturnIndex).</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;          removeAttribute(<a class="code" href="classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60ea785b9cc2e0b37298b4bef4b68cb50b75">Attribute::NoAlias</a>))</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="comment">// Make sure the call instruction is followed by an unconditional branch to</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <span class="comment">// the return block.</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *CallBB = CI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a>&gt;(CallBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>());</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <span class="keywordflow">if</span> (!BI || !BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a382131e712e55e8324fbd5068de17b78">isUnconditional</a>() || BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(0) != <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <span class="comment">// Duplicate the return into CallBB.</span></div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    (void)<a class="code" href="namespacellvm.html#a2b8a0d5fd8cacf34a300e31e25eaa77f">FoldReturnIntoUncondBranch</a>(RI, BB, CallBB);</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    ModifiedDT = Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    ++NumRetsDup;</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  }</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  <span class="comment">// If we eliminated all predecessors of the block, delete the block now.</span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  <span class="keywordflow">if</span> (Changed &amp;&amp; !BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a12fd03c41b1697fca070c12317794400">hasAddressTaken</a>() &amp;&amp; <a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(BB) == <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(BB))</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ace1ad5ed624dd5df8efb4eb611cb71ff">eraseFromParent</a>();</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;  <span class="keywordflow">return</span> Changed;</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;}</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;<span class="comment">// Memory Optimization</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;<span class="comment">/// ExtAddrMode - This is an extended version of TargetLowering::AddrMode</span></div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;<span class="comment">/// which holds actual Value*&#39;s for register values.</span></div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;<span class="comment"></span><span class="keyword">struct </span>ExtAddrMode : <span class="keyword">public</span> <a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">TargetLowering::AddrMode</a> {</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *BaseReg;</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ScaledReg;</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  ExtAddrMode() : BaseReg(0), ScaledReg(0) {}</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  <span class="keywordtype">void</span> print(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;OS) <span class="keyword">const</span>;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#a03503773241005f01b090b9862aad304">dump</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#a162c90bc179a6359438d060722bee35f">operator==</a>(<span class="keyword">const</span> ExtAddrMode&amp; O)<span class="keyword"> const </span>{</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="keywordflow">return</span> (BaseReg == O.BaseReg) &amp;&amp; (ScaledReg == O.ScaledReg) &amp;&amp;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;           (BaseGV == O.BaseGV) &amp;&amp; (BaseOffs == O.BaseOffs) &amp;&amp;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;           (HasBaseReg == O.HasBaseReg) &amp;&amp; (Scale == O.Scale);</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  }</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;};</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="namespacellvm.html#a6a02d446812b76c3b271d9e3e3c77b49">operator&lt;&lt;</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;OS, <span class="keyword">const</span> ExtAddrMode &amp;AM) {</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  AM.print(OS);</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  <span class="keywordflow">return</span> OS;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;}</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;<span class="keywordtype">void</span> ExtAddrMode::print(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;OS)<span class="keyword"> const </span>{</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  <span class="keywordtype">bool</span> NeedPlus = <span class="keyword">false</span>;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  OS &lt;&lt; <span class="stringliteral">&quot;[&quot;</span>;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  <span class="keywordflow">if</span> (BaseGV) {</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    OS &lt;&lt; (NeedPlus ? <span class="stringliteral">&quot; + &quot;</span> : <span class="stringliteral">&quot;&quot;</span>)</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;       &lt;&lt; <span class="stringliteral">&quot;GV:&quot;</span>;</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    <a class="code" href="namespacellvm.html#ae712552495c21ee77ad82ced255ad6df">WriteAsOperand</a>(OS, BaseGV, <span class="comment">/*PrintType=*/</span><span class="keyword">false</span>);</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    NeedPlus = <span class="keyword">true</span>;</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;  }</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  <span class="keywordflow">if</span> (BaseOffs)</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    OS &lt;&lt; (NeedPlus ? <span class="stringliteral">&quot; + &quot;</span> : <span class="stringliteral">&quot;&quot;</span>) &lt;&lt; BaseOffs, NeedPlus = <span class="keyword">true</span>;</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;  <span class="keywordflow">if</span> (BaseReg) {</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    OS &lt;&lt; (NeedPlus ? <span class="stringliteral">&quot; + &quot;</span> : <span class="stringliteral">&quot;&quot;</span>)</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;       &lt;&lt; <span class="stringliteral">&quot;Base:&quot;</span>;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <a class="code" href="namespacellvm.html#ae712552495c21ee77ad82ced255ad6df">WriteAsOperand</a>(OS, BaseReg, <span class="comment">/*PrintType=*/</span><span class="keyword">false</span>);</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    NeedPlus = <span class="keyword">true</span>;</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  }</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  <span class="keywordflow">if</span> (Scale) {</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    OS &lt;&lt; (NeedPlus ? <span class="stringliteral">&quot; + &quot;</span> : <span class="stringliteral">&quot;&quot;</span>)</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;       &lt;&lt; Scale &lt;&lt; <span class="stringliteral">&quot;*&quot;</span>;</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    <a class="code" href="namespacellvm.html#ae712552495c21ee77ad82ced255ad6df">WriteAsOperand</a>(OS, ScaledReg, <span class="comment">/*PrintType=*/</span><span class="keyword">false</span>);</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;  }</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  OS &lt;&lt; <span class="charliteral">&#39;]&#39;</span>;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;}</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;<span class="preprocessor">#if !defined(NDEBUG) || defined(LLVM_ENABLE_DUMP)</span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#a03503773241005f01b090b9862aad304">ExtAddrMode::dump</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;  print(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>());</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;}</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;<span class="comment">/// \brief A helper class for matching addressing modes.</span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;<span class="comment">/// This encapsulates the logic for matching the target-legal addressing modes.</span></div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;<span class="comment"></span><span class="keyword">class </span>AddressingModeMatcher {</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;  <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Instruction*&gt;</a> &amp;AddrModeInsts;</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLowering.html">TargetLowering</a> &amp;TLI;</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;<span class="comment">  /// AccessTy/MemoryInst - This is the type for the access (e.g. double) and</span></div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;<span class="comment">  /// the memory instruction that we&#39;re computing this address for.</span></div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Type.html">Type</a> *AccessTy;</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *MemoryInst;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;<span class="comment">  /// AddrMode - This is the addressing mode that we&#39;re building up.  This is</span></div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;<span class="comment">  /// part of the return value of this addressing mode matching stuff.</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="comment"></span>  ExtAddrMode &amp;<a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="comment">  /// IgnoreProfitability - This is set to true when we should not do</span></div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;<span class="comment">  /// profitability checks.  When true, IsProfitableToFoldIntoAddressingMode</span></div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;<span class="comment">  /// always returns true.</span></div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> IgnoreProfitability;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  AddressingModeMatcher(<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Instruction*&gt;</a> &amp;AMI,</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLowering.html">TargetLowering</a> &amp;<a class="code" href="classT.html">T</a>, <a class="code" href="classllvm_1_1Type.html">Type</a> *AT,</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;                        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>, ExtAddrMode &amp;AM)</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    : AddrModeInsts(AMI), TLI(T), AccessTy(AT), MemoryInst(MI), <a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>(AM) {</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    IgnoreProfitability = <span class="keyword">false</span>;</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  }</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;<span class="comment">  /// Match - Find the maximal addressing mode that a load/store of V can fold,</span></div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;<span class="comment">  /// give an access type of AccessTy.  This returns a list of involved</span></div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;<span class="comment">  /// instructions in AddrModeInsts.</span></div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;<span class="comment"></span>  <span class="keyword">static</span> ExtAddrMode Match(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <a class="code" href="classllvm_1_1Type.html">Type</a> *AccessTy,</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;                           <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *MemoryInst,</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;                           <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Instruction*&gt;</a> &amp;AddrModeInsts,</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;                           <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLowering.html">TargetLowering</a> &amp;TLI) {</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    ExtAddrMode Result;</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    <span class="keywordtype">bool</span> Success =</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;      AddressingModeMatcher(AddrModeInsts, TLI, AccessTy,</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;                            MemoryInst, Result).MatchAddr(V, 0);</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    (void)Success; assert(Success &amp;&amp; <span class="stringliteral">&quot;Couldn&#39;t select *anything*?&quot;</span>);</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <span class="keywordflow">return</span> Result;</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;  }</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  <span class="keywordtype">bool</span> MatchScaledValue(<a class="code" href="classllvm_1_1Value.html">Value</a> *ScaleReg, int64_t Scale, <span class="keywordtype">unsigned</span> Depth);</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;  <span class="keywordtype">bool</span> MatchAddr(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <span class="keywordtype">unsigned</span> Depth);</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;  <span class="keywordtype">bool</span> MatchOperationAddr(<a class="code" href="classllvm_1_1User.html">User</a> *Operation, <span class="keywordtype">unsigned</span> Opcode, <span class="keywordtype">unsigned</span> Depth);</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;  <span class="keywordtype">bool</span> IsProfitableToFoldIntoAddressingMode(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;                                            ExtAddrMode &amp;AMBefore,</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;                                            ExtAddrMode &amp;AMAfter);</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;  <span class="keywordtype">bool</span> ValueAlreadyLiveAtInst(<a class="code" href="classllvm_1_1Value.html">Value</a> *Val, <a class="code" href="classllvm_1_1Value.html">Value</a> *KnownLive1, <a class="code" href="classllvm_1_1Value.html">Value</a> *KnownLive2);</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;};</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;<span class="comment">/// MatchScaledValue - Try adding ScaleReg*Scale to the current addressing mode.</span></div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;<span class="comment">/// Return true and update AddrMode if this addr mode is legal for the target,</span></div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;<span class="comment">/// false if not.</span></div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> AddressingModeMatcher::MatchScaledValue(<a class="code" href="classllvm_1_1Value.html">Value</a> *ScaleReg, int64_t Scale,</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;                                             <span class="keywordtype">unsigned</span> Depth) {</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  <span class="comment">// If Scale is 1, then this is the same as adding ScaleReg to the addressing</span></div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;  <span class="comment">// mode.  Just process that directly.</span></div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  <span class="keywordflow">if</span> (Scale == 1)</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    <span class="keywordflow">return</span> MatchAddr(ScaleReg, Depth);</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;  <span class="comment">// If the scale is 0, it takes nothing to add this.</span></div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;  <span class="keywordflow">if</span> (Scale == 0)</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;  <span class="comment">// If we already have a scale of this value, we can add to it, otherwise, we</span></div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  <span class="comment">// need an available scale field.</span></div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>.Scale != 0 &amp;&amp; <a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>.ScaledReg != ScaleReg)</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;  ExtAddrMode TestAddrMode = <a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;  <span class="comment">// Add scale to turn X*4+X*3 -&gt; X*7.  This could also do things like</span></div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;  <span class="comment">// [A+B + A*7] -&gt; [B+A*8].</span></div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  TestAddrMode.Scale += Scale;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;  TestAddrMode.ScaledReg = ScaleReg;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  <span class="comment">// If the new address isn&#39;t legal, bail out.</span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  <span class="keywordflow">if</span> (!TLI.isLegalAddressingMode(TestAddrMode, AccessTy))</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;  <span class="comment">// It was legal, so commit it.</span></div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;  <a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a> = TestAddrMode;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;  <span class="comment">// Okay, we decided that we can add ScaleReg+Scale to AddrMode.  Check now</span></div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;  <span class="comment">// to see if ScaleReg is actually X+C.  If so, we can turn this into adding</span></div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;  <span class="comment">// X*Scale + C*Scale to addr mode.</span></div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = 0; <a class="code" href="classllvm_1_1Value.html">Value</a> *AddLHS = 0;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;  <span class="keywordflow">if</span> (isa&lt;Instruction&gt;(ScaleReg) &amp;&amp;  <span class="comment">// not a constant expr.</span></div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(ScaleReg, <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(AddLHS), <a class="code" href="namespacellvm_1_1PatternMatch.html#a34a92072122412c6020d4afb43725bf4">m_ConstantInt</a>(CI)))) {</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    TestAddrMode.ScaledReg = AddLHS;</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    TestAddrMode.BaseOffs += CI-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a097c2d42e4deffabe6d54b007ad83367">getSExtValue</a>()*TestAddrMode.Scale;</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    <span class="comment">// If this addressing mode is legal, commit it and remember that we folded</span></div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    <span class="comment">// this instruction.</span></div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    <span class="keywordflow">if</span> (TLI.isLegalAddressingMode(TestAddrMode, AccessTy)) {</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;      AddrModeInsts.push_back(cast&lt;Instruction&gt;(ScaleReg));</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;      <a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a> = TestAddrMode;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    }</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;  }</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  <span class="comment">// Otherwise, not (x+c)*scale, just return what we have.</span></div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;}</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;<span class="comment">/// MightBeFoldableInst - This is a little filter, which returns true if an</span></div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;<span class="comment">/// addressing computation involving I might be folded into a load/store</span></div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;<span class="comment">/// accessing it.  This doesn&#39;t need to be perfect, but needs to accept at least</span></div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;<span class="comment">/// the set of instructions that MatchOperationAddr can.</span></div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> MightBeFoldableInst(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;  <span class="keywordflow">switch</span> (I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>()) {</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;  <span class="keywordflow">case</span> Instruction::BitCast:</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    <span class="comment">// Don&#39;t touch identity bitcasts.</span></div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    <span class="keywordflow">if</span> (I-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() == I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    <span class="keywordflow">return</span> I-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>() || I-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>();</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  <span class="keywordflow">case</span> Instruction::PtrToInt:</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    <span class="comment">// PtrToInt is always a noop, as we know that the int type is pointer sized.</span></div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;  <span class="keywordflow">case</span> Instruction::IntToPtr:</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    <span class="comment">// We know the input is intptr_t, so this is foldable.</span></div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  <span class="keywordflow">case</span> Instruction::Add:</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;  <span class="keywordflow">case</span> Instruction::Mul:</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;  <span class="keywordflow">case</span> Instruction::Shl:</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    <span class="comment">// Can only handle X*C and X &lt;&lt; C.</span></div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    <span class="keywordflow">return</span> isa&lt;ConstantInt&gt;(I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;  <span class="keywordflow">case</span> Instruction::GetElementPtr:</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;  <span class="keywordflow">default</span>:</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;  }</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;}</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;<span class="comment">/// MatchOperationAddr - Given an instruction or constant expr, see if we can</span></div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;<span class="comment">/// fold the operation into the addressing mode.  If so, update the addressing</span></div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;<span class="comment">/// mode and return true, otherwise return false without modifying AddrMode.</span></div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> AddressingModeMatcher::MatchOperationAddr(<a class="code" href="classllvm_1_1User.html">User</a> *AddrInst, <span class="keywordtype">unsigned</span> Opcode,</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;                                               <span class="keywordtype">unsigned</span> Depth) {</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;  <span class="comment">// Avoid exponential behavior on extremely deep expression trees.</span></div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;  <span class="keywordflow">if</span> (Depth &gt;= 5) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;  <span class="keywordflow">switch</span> (Opcode) {</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  <span class="keywordflow">case</span> Instruction::PtrToInt:</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    <span class="comment">// PtrToInt is always a noop, as we know that the int type is pointer sized.</span></div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    <span class="keywordflow">return</span> MatchAddr(AddrInst-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), Depth);</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;  <span class="keywordflow">case</span> Instruction::IntToPtr:</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    <span class="comment">// This inttoptr is a no-op if the integer type is pointer sized.</span></div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    <span class="keywordflow">if</span> (TLI.getValueType(AddrInst-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()) ==</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;        TLI.getPointerTy(AddrInst-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a33f9fa1a7cb21319a30836fce847c3c4">getPointerAddressSpace</a>()))</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;      <span class="keywordflow">return</span> MatchAddr(AddrInst-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), Depth);</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;  <span class="keywordflow">case</span> Instruction::BitCast:</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <span class="comment">// BitCast is always a noop, and we can handle it as long as it is</span></div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <span class="comment">// int-&gt;int or pointer-&gt;pointer (we don&#39;t want int&lt;-&gt;fp or something).</span></div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <span class="keywordflow">if</span> ((AddrInst-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>() ||</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;         AddrInst-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>()) &amp;&amp;</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;        <span class="comment">// Don&#39;t touch identity bitcasts.  These were probably put here by LSR,</span></div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;        <span class="comment">// and we don&#39;t want to mess around with them.  Assume it knows what it</span></div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;        <span class="comment">// is doing.</span></div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;        AddrInst-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() != AddrInst-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;      <span class="keywordflow">return</span> MatchAddr(AddrInst-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), Depth);</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;  <span class="keywordflow">case</span> Instruction::Add: {</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <span class="comment">// Check to see if we can merge in the RHS then the LHS.  If so, we win.</span></div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    ExtAddrMode BackupAddrMode = <a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>;</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    <span class="keywordtype">unsigned</span> OldSize = AddrModeInsts.size();</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    <span class="keywordflow">if</span> (MatchAddr(AddrInst-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1), Depth+1) &amp;&amp;</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;        MatchAddr(AddrInst-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), Depth+1))</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    <span class="comment">// Restore the old addr mode info.</span></div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    <a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a> = BackupAddrMode;</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    AddrModeInsts.resize(OldSize);</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    <span class="comment">// Otherwise this was over-aggressive.  Try merging in the LHS then the RHS.</span></div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    <span class="keywordflow">if</span> (MatchAddr(AddrInst-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), Depth+1) &amp;&amp;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;        MatchAddr(AddrInst-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1), Depth+1))</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    <span class="comment">// Otherwise we definitely can&#39;t merge the ADD in.</span></div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a> = BackupAddrMode;</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    AddrModeInsts.resize(OldSize);</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  }</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;  <span class="comment">//case Instruction::Or:</span></div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;  <span class="comment">// TODO: We can handle &quot;Or Val, Imm&quot; iff this OR is equivalent to an ADD.</span></div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;  <span class="comment">//break;</span></div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;  <span class="keywordflow">case</span> Instruction::Mul:</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;  <span class="keywordflow">case</span> Instruction::Shl: {</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    <span class="comment">// Can only handle X*C and X &lt;&lt; C.</span></div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *RHS = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(AddrInst-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <span class="keywordflow">if</span> (!RHS) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    int64_t Scale = RHS-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a097c2d42e4deffabe6d54b007ad83367">getSExtValue</a>();</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    <span class="keywordflow">if</span> (Opcode == Instruction::Shl)</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;      Scale = 1LL &lt;&lt; Scale;</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    <span class="keywordflow">return</span> MatchScaledValue(AddrInst-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), Scale, Depth);</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;  }</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  <span class="keywordflow">case</span> Instruction::GetElementPtr: {</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    <span class="comment">// Scan the GEP.  We check it if it contains constant offsets and at most</span></div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    <span class="comment">// one variable offset.</span></div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    <span class="keywordtype">int</span> VariableOperand = -1;</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    <span class="keywordtype">unsigned</span> VariableScale = 0;</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    int64_t ConstantOffset = 0;</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> *TD = TLI.getDataLayout();</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <a class="code" href="classllvm_1_1generic__gep__type__iterator.html">gep_type_iterator</a> GTI = <a class="code" href="namespacellvm.html#ac828b9b52935f87659a4adf237f820a3">gep_type_begin</a>(AddrInst);</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1, e = AddrInst-&gt;<a class="code" href="classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, ++GTI) {</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StructType.html">StructType</a> *STy = dyn_cast&lt;StructType&gt;(*GTI)) {</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1StructLayout.html">StructLayout</a> *SL = TD-&gt;<a class="code" href="classllvm_1_1DataLayout.html#a35c840104f32575e0d91422cf1ef3ce4">getStructLayout</a>(STy);</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;        <span class="keywordtype">unsigned</span> Idx =</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;          cast&lt;ConstantInt&gt;(AddrInst-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>))-&gt;getZExtValue();</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;        ConstantOffset += SL-&gt;<a class="code" href="classllvm_1_1StructLayout.html#ae10c4483372a357a0d3411b3d64be10c">getElementOffset</a>(Idx);</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        uint64_t TypeSize = TD-&gt;<a class="code" href="classllvm_1_1DataLayout.html#a1d6fcc02e91ba24510aba42660c90e29">getTypeAllocSize</a>(GTI.<a class="code" href="classllvm_1_1generic__gep__type__iterator.html#aa9576aea404b156a949122affc839777">getIndexedType</a>());</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(AddrInst-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>))) {</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;          ConstantOffset += CI-&gt;getSExtValue()*TypeSize;</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (TypeSize) {  <span class="comment">// Scales of zero don&#39;t do anything.</span></div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;          <span class="comment">// We only allow one variable index at the moment.</span></div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;          <span class="keywordflow">if</span> (VariableOperand != -1)</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;          <span class="comment">// Remember the variable index.</span></div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;          VariableOperand = <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;          VariableScale = TypeSize;</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;        }</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;      }</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    }</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    <span class="comment">// A common case is for the GEP to only do a constant offset.  In this case,</span></div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <span class="comment">// just add it to the disp field and check validity.</span></div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    <span class="keywordflow">if</span> (VariableOperand == -1) {</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;      <a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>.BaseOffs += ConstantOffset;</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;      <span class="keywordflow">if</span> (ConstantOffset == 0 || TLI.isLegalAddressingMode(<a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>, AccessTy)){</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;        <span class="comment">// Check to see if we can fold the base pointer in too.</span></div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;        <span class="keywordflow">if</span> (MatchAddr(AddrInst-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), Depth+1))</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;      }</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;      <a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>.BaseOffs -= ConstantOffset;</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    }</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    <span class="comment">// Save the valid addressing mode in case we can&#39;t match.</span></div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    ExtAddrMode BackupAddrMode = <a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>;</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    <span class="keywordtype">unsigned</span> OldSize = AddrModeInsts.size();</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    <span class="comment">// See if the scale and offset amount is valid for this target.</span></div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    <a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>.BaseOffs += ConstantOffset;</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    <span class="comment">// Match the base operand of the GEP.</span></div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    <span class="keywordflow">if</span> (!MatchAddr(AddrInst-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), Depth+1)) {</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;      <span class="comment">// If it couldn&#39;t be matched, just stuff the value in a register.</span></div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>.HasBaseReg) {</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;        <a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a> = BackupAddrMode;</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;        AddrModeInsts.resize(OldSize);</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;      }</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;      <a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>.HasBaseReg = <span class="keyword">true</span>;</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;      <a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>.BaseReg = AddrInst-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    }</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    <span class="comment">// Match the remaining variable portion of the GEP.</span></div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    <span class="keywordflow">if</span> (!MatchScaledValue(AddrInst-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(VariableOperand), VariableScale,</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;                          Depth)) {</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;      <span class="comment">// If it couldn&#39;t be matched, try stuffing the base into a register</span></div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;      <span class="comment">// instead of matching it, and retrying the match of the scale.</span></div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;      <a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a> = BackupAddrMode;</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;      AddrModeInsts.resize(OldSize);</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>.HasBaseReg)</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;      <a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>.HasBaseReg = <span class="keyword">true</span>;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;      <a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>.BaseReg = AddrInst-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;      <a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>.BaseOffs += ConstantOffset;</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;      <span class="keywordflow">if</span> (!MatchScaledValue(AddrInst-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(VariableOperand),</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;                            VariableScale, Depth)) {</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;        <span class="comment">// If even that didn&#39;t work, bail.</span></div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;        <a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a> = BackupAddrMode;</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;        AddrModeInsts.resize(OldSize);</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;      }</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    }</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;  }</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;  }</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;}</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;<span class="comment">/// MatchAddr - If we can, try to add the value of &#39;Addr&#39; into the current</span></div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;<span class="comment">/// addressing mode.  If Addr can&#39;t be added to AddrMode this returns false and</span></div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;<span class="comment">/// leaves AddrMode unmodified.  This assumes that Addr is either a pointer type</span></div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;<span class="comment">/// or intptr_t for the target.</span></div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> AddressingModeMatcher::MatchAddr(<a class="code" href="classllvm_1_1Value.html">Value</a> *Addr, <span class="keywordtype">unsigned</span> Depth) {</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(Addr)) {</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    <span class="comment">// Fold in immediates if legal for the target.</span></div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    <a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>.BaseOffs += CI-&gt;getSExtValue();</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    <span class="keywordflow">if</span> (TLI.isLegalAddressingMode(<a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>, AccessTy))</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    <a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>.BaseOffs -= CI-&gt;getSExtValue();</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a> *GV = dyn_cast&lt;GlobalValue&gt;(Addr)) {</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    <span class="comment">// If this is a global variable, try to fold it into the addressing mode.</span></div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>.BaseGV == 0) {</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;      <a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>.BaseGV = GV;</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;      <span class="keywordflow">if</span> (TLI.isLegalAddressingMode(<a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>, AccessTy))</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;      <a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>.BaseGV = 0;</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    }</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I = dyn_cast&lt;Instruction&gt;(Addr)) {</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    ExtAddrMode BackupAddrMode = <a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>;</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    <span class="keywordtype">unsigned</span> OldSize = AddrModeInsts.size();</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    <span class="comment">// Check to see if it is possible to fold this operation.</span></div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    <span class="keywordflow">if</span> (MatchOperationAddr(I, I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">getOpcode</a>(), Depth)) {</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;      <span class="comment">// Okay, it&#39;s possible to fold this.  Check to see if it is actually</span></div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;      <span class="comment">// *profitable* to do so.  We use a simple cost model to avoid increasing</span></div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;      <span class="comment">// register pressure too much.</span></div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;      <span class="keywordflow">if</span> (I-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() ||</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;          IsProfitableToFoldIntoAddressingMode(I, BackupAddrMode, <a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>)) {</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;        AddrModeInsts.push_back(I);</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;      }</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;      <span class="comment">// It isn&#39;t profitable to do this, roll back.</span></div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;      <span class="comment">//cerr &lt;&lt; &quot;NOT FOLDING: &quot; &lt;&lt; *I;</span></div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;      <a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a> = BackupAddrMode;</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;      AddrModeInsts.resize(OldSize);</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    }</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE = dyn_cast&lt;ConstantExpr&gt;(Addr)) {</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    <span class="keywordflow">if</span> (MatchOperationAddr(CE, CE-&gt;getOpcode(), Depth))</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;ConstantPointerNull&gt;(Addr)) {</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    <span class="comment">// Null pointer gets folded without affecting the addressing mode.</span></div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;  }</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;  <span class="comment">// Worse case, the target should support [reg] addressing modes. :)</span></div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>.HasBaseReg) {</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>.HasBaseReg = <span class="keyword">true</span>;</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    <a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>.BaseReg = Addr;</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    <span class="comment">// Still check for legality in case the target supports [imm] but not [i+r].</span></div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    <span class="keywordflow">if</span> (TLI.isLegalAddressingMode(<a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>, AccessTy))</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;    <a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>.HasBaseReg = <span class="keyword">false</span>;</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    <a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>.BaseReg = 0;</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;  }</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;  <span class="comment">// If the base register is already taken, see if we can do [r+r].</span></div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>.Scale == 0) {</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    <a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>.Scale = 1;</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    <a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>.ScaledReg = Addr;</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    <span class="keywordflow">if</span> (TLI.isLegalAddressingMode(<a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>, AccessTy))</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    <a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>.Scale = 0;</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    <a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>.ScaledReg = 0;</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;  }</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;  <span class="comment">// Couldn&#39;t match.</span></div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;}</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;<span class="comment">/// IsOperandAMemoryOperand - Check to see if all uses of OpVal by the specified</span></div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;<span class="comment">/// inline asm call are due to memory operands.  If so, return true, otherwise</span></div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;<span class="comment">/// return false.</span></div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> IsOperandAMemoryOperand(<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI, <a class="code" href="classllvm_1_1InlineAsm.html">InlineAsm</a> *IA, <a class="code" href="classllvm_1_1Value.html">Value</a> *OpVal,</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;                                    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLowering.html">TargetLowering</a> &amp;TLI) {</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;  <a class="code" href="classllvm_1_1TargetLowering.html#a08a19e975c43ee759d51b879a0f2c75c">TargetLowering::AsmOperandInfoVector</a> TargetConstraints = TLI.<a class="code" href="classllvm_1_1TargetLowering.html#acf45b67bb53a2c5b9f6ee1d1ecf57eae">ParseConstraints</a>(<a class="code" href="classllvm_1_1ImmutableCallSite.html">ImmutableCallSite</a>(CI));</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = TargetConstraints.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    <a class="code" href="structllvm_1_1TargetLowering_1_1AsmOperandInfo.html">TargetLowering::AsmOperandInfo</a> &amp;OpInfo = TargetConstraints[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    <span class="comment">// Compute the constraint code and ConstraintType to use.</span></div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    TLI.<a class="code" href="classllvm_1_1TargetLowering.html#a6dcf7d50b78212d30593a554bd966bd2">ComputeConstraintToUse</a>(OpInfo, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>());</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    <span class="comment">// If this asm operand is our Value*, and if it isn&#39;t an indirect memory</span></div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;    <span class="comment">// operand, we can&#39;t fold it!</span></div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    <span class="keywordflow">if</span> (OpInfo.<a class="code" href="structllvm_1_1TargetLowering_1_1AsmOperandInfo.html#aeea750ec380d5c1514f57df90dbd6c3d">CallOperandVal</a> == OpVal &amp;&amp;</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;        (OpInfo.<a class="code" href="structllvm_1_1TargetLowering_1_1AsmOperandInfo.html#ab6af857f66a2fc271535a12203d7dad6">ConstraintType</a> != <a class="code" href="classllvm_1_1TargetLowering.html#a0b0176781cd4fd9f45cc739f1d007116a420d729d2e7d056ec884c094ccdc4467">TargetLowering::C_Memory</a> ||</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;         !OpInfo.<a class="code" href="structllvm_1_1InlineAsm_1_1ConstraintInfo.html#acbf697bfd59727faf13eeb80fdf90d79">isIndirect</a>))</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  }</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;}</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;<span class="comment">/// FindAllMemoryUses - Recursively walk all the uses of I until we find a</span></div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;<span class="comment">/// memory use.  If we find an obviously non-foldable instruction, return true.</span></div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;<span class="comment">/// Add the ultimately found memory instructions to MemoryUses.</span></div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> FindAllMemoryUses(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I,</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;                <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt;std::pair&lt;Instruction*,unsigned&gt; &gt; &amp;MemoryUses,</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;                              <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Instruction*, 16&gt;</a> &amp;ConsideredInsts,</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;                              <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLowering.html">TargetLowering</a> &amp;TLI) {</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;  <span class="comment">// If we already considered this instruction, we&#39;re done.</span></div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;  <span class="keywordflow">if</span> (!ConsideredInsts.<a class="code" href="classllvm_1_1SmallPtrSet.html#a9b6dd0fc7a648a939e571246045b673e">insert</a>(I))</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;  <span class="comment">// If this is an obviously unfoldable instruction, bail out.</span></div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;  <span class="keywordflow">if</span> (!MightBeFoldableInst(I))</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;  <span class="comment">// Loop over all the uses, recursively processing them.</span></div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::use_iterator</a> UI = I-&gt;<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>(), E = I-&gt;<a class="code" href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">use_end</a>();</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;       UI != E; ++UI) {</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    <a class="code" href="classllvm_1_1User.html">User</a> *U = *UI;</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI = dyn_cast&lt;LoadInst&gt;(U)) {</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;      MemoryUses.push_back(std::make_pair(LI, UI.getOperandNo()));</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;    }</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *SI = dyn_cast&lt;StoreInst&gt;(U)) {</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;      <span class="keywordtype">unsigned</span> opNo = UI.getOperandNo();</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;      <span class="keywordflow">if</span> (opNo == 0) <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">// Storing addr, not into addr.</span></div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;      MemoryUses.push_back(std::make_pair(SI, opNo));</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    }</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI = dyn_cast&lt;CallInst&gt;(U)) {</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;      <a class="code" href="classllvm_1_1InlineAsm.html">InlineAsm</a> *IA = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1InlineAsm.html">InlineAsm</a>&gt;(CI-&gt;<a class="code" href="classllvm_1_1CallInst.html#a6917dcd78ac6655e9640ac3a96175e39">getCalledValue</a>());</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;      <span class="keywordflow">if</span> (!IA) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;      <span class="comment">// If this is a memory operand, we&#39;re cool, otherwise bail out.</span></div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;      <span class="keywordflow">if</span> (!IsOperandAMemoryOperand(CI, IA, I, TLI))</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    }</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;    <span class="keywordflow">if</span> (FindAllMemoryUses(cast&lt;Instruction&gt;(U), MemoryUses, ConsideredInsts,</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;                          TLI))</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;  }</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;}</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;<span class="comment">/// ValueAlreadyLiveAtInst - Retrn true if Val is already known to be live at</span></div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;<span class="comment">/// the use site that we&#39;re folding it into.  If so, there is no cost to</span></div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;<span class="comment">/// include it in the addressing mode.  KnownLive1 and KnownLive2 are two values</span></div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;<span class="comment">/// that we know are live at the instruction already.</span></div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> AddressingModeMatcher::ValueAlreadyLiveAtInst(<a class="code" href="classllvm_1_1Value.html">Value</a> *Val,<a class="code" href="classllvm_1_1Value.html">Value</a> *KnownLive1,</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;                                                   <a class="code" href="classllvm_1_1Value.html">Value</a> *KnownLive2) {</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;  <span class="comment">// If Val is either of the known-live values, we know it is live!</span></div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;  <span class="keywordflow">if</span> (Val == 0 || Val == KnownLive1 || Val == KnownLive2)</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;  <span class="comment">// All values other than instructions and arguments (e.g. constants) are live.</span></div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;Instruction&gt;(Val) &amp;&amp; !isa&lt;Argument&gt;(Val)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;  <span class="comment">// If Val is a constant sized alloca in the entry block, it is live, this is</span></div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;  <span class="comment">// true because it is just a reference to the stack/frame pointer, which is</span></div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;  <span class="comment">// live for the whole function.</span></div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *AI = dyn_cast&lt;AllocaInst&gt;(Val))</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    <span class="keywordflow">if</span> (AI-&gt;isStaticAlloca())</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;  <span class="comment">// Check to see if this value is already used in the memory instruction&#39;s</span></div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;  <span class="comment">// block.  If so, it&#39;s already live into the block at the very least, so we</span></div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;  <span class="comment">// can reasonably fold it.</span></div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;  <span class="keywordflow">return</span> Val-&gt;<a class="code" href="classllvm_1_1Value.html#ae653031669d53ef43398e34c620131a5">isUsedInBasicBlock</a>(MemoryInst-&gt;getParent());</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;}</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;<span class="comment">/// IsProfitableToFoldIntoAddressingMode - It is possible for the addressing</span></div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;<span class="comment">/// mode of the machine to fold the specified instruction into a load or store</span></div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;<span class="comment">/// that ultimately uses it.  However, the specified instruction has multiple</span></div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;<span class="comment">/// uses.  Given this, it may actually increase register pressure to fold it</span></div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;<span class="comment">/// into the load.  For example, consider this code:</span></div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;<span class="comment">///     X = ...</span></div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;<span class="comment">///     Y = X+1</span></div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;<span class="comment">///     use(Y)   -&gt; nonload/store</span></div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;<span class="comment">///     Z = Y+1</span></div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;<span class="comment">///     load Z</span></div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;<span class="comment">/// In this case, Y has multiple uses, and can be folded into the load of Z</span></div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;<span class="comment">/// (yielding load [X+2]).  However, doing this will cause both &quot;X&quot; and &quot;X+1&quot; to</span></div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;<span class="comment">/// be live at the use(Y) line.  If we don&#39;t fold Y into load Z, we use one</span></div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;<span class="comment">/// fewer register.  Since Y can&#39;t be folded into &quot;use(Y)&quot; we don&#39;t increase the</span></div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;<span class="comment">/// number of computations either.</span></div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;<span class="comment">/// Note that this (like most of CodeGenPrepare) is just a rough heuristic.  If</span></div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;<span class="comment">/// X was live across &#39;load Z&#39; for other reasons, we actually *would* want to</span></div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;<span class="comment">/// fold the addressing mode in the Z case.  This would make Y die earlier.</span></div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> AddressingModeMatcher::</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;IsProfitableToFoldIntoAddressingMode(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I, ExtAddrMode &amp;AMBefore,</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;                                     ExtAddrMode &amp;AMAfter) {</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;  <span class="keywordflow">if</span> (IgnoreProfitability) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;  <span class="comment">// AMBefore is the addressing mode before this instruction was folded into it,</span></div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;  <span class="comment">// and AMAfter is the addressing mode after the instruction was folded.  Get</span></div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;  <span class="comment">// the set of registers referenced by AMAfter and subtract out those</span></div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;  <span class="comment">// referenced by AMBefore: this is the set of values which folding in this</span></div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;  <span class="comment">// address extends the lifetime of.</span></div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;  <span class="comment">// Note that there are only two potential values being referenced here,</span></div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;  <span class="comment">// BaseReg and ScaleReg (global addresses are always available, as are any</span></div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;  <span class="comment">// folded immediates).</span></div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *BaseReg = AMAfter.BaseReg, *ScaledReg = AMAfter.ScaledReg;</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;  <span class="comment">// If the BaseReg or ScaledReg was referenced by the previous addrmode, their</span></div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;  <span class="comment">// lifetime wasn&#39;t extended by adding this instruction.</span></div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;  <span class="keywordflow">if</span> (ValueAlreadyLiveAtInst(BaseReg, AMBefore.BaseReg, AMBefore.ScaledReg))</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    BaseReg = 0;</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;  <span class="keywordflow">if</span> (ValueAlreadyLiveAtInst(ScaledReg, AMBefore.BaseReg, AMBefore.ScaledReg))</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;    ScaledReg = 0;</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;  <span class="comment">// If folding this instruction (and it&#39;s subexprs) didn&#39;t extend any live</span></div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;  <span class="comment">// ranges, we&#39;re ok with it.</span></div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;  <span class="keywordflow">if</span> (BaseReg == 0 &amp;&amp; ScaledReg == 0)</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;  <span class="comment">// If all uses of this instruction are ultimately load/store/inlineasm&#39;s,</span></div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;  <span class="comment">// check to see if their addressing modes will include this instruction.  If</span></div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;  <span class="comment">// so, we can fold it into all uses, so it doesn&#39;t matter if it has multiple</span></div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;  <span class="comment">// uses.</span></div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;Instruction*,unsigned&gt;</a>, 16&gt; MemoryUses;</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Instruction*, 16&gt;</a> ConsideredInsts;</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;  <span class="keywordflow">if</span> (FindAllMemoryUses(I, MemoryUses, ConsideredInsts, TLI))</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">// Has a non-memory, non-foldable use!</span></div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;  <span class="comment">// Now that we know that all uses of this instruction are part of a chain of</span></div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;  <span class="comment">// computation involving only operations that could theoretically be folded</span></div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;  <span class="comment">// into a memory use, loop over each of these uses and see if they could</span></div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;  <span class="comment">// *actually* fold the instruction.</span></div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction*, 32&gt;</a> MatchedAddrModeInsts;</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = MemoryUses.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1User.html">User</a> = MemoryUses[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].first;</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    <span class="keywordtype">unsigned</span> OpNo = MemoryUses[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].second;</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;    <span class="comment">// Get the access type of this use.  If the use isn&#39;t a pointer, we don&#39;t</span></div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    <span class="comment">// know what it accesses.</span></div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Address = User-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(OpNo);</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    <span class="keywordflow">if</span> (!Address-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>())</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *AddressAccessTy = Address-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a5c09d927a0079ad16e8367271efe9bc2">getPointerElementType</a>();</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;    <span class="comment">// Do a match against the root of this address, ignoring profitability. This</span></div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    <span class="comment">// will tell us if the addressing mode for the memory operation will</span></div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    <span class="comment">// *actually* cover the shared instruction.</span></div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;    ExtAddrMode Result;</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;    AddressingModeMatcher Matcher(MatchedAddrModeInsts, TLI, AddressAccessTy,</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;                                  MemoryInst, Result);</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;    Matcher.IgnoreProfitability = <span class="keyword">true</span>;</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    <span class="keywordtype">bool</span> Success = Matcher.MatchAddr(Address, 0);</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;    (void)Success; assert(Success &amp;&amp; <span class="stringliteral">&quot;Couldn&#39;t select *anything*?&quot;</span>);</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;    <span class="comment">// If the match didn&#39;t cover I, then it won&#39;t be shared by it.</span></div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    <span class="keywordflow">if</span> (std::find(MatchedAddrModeInsts.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), MatchedAddrModeInsts.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>(),</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;                  <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) == MatchedAddrModeInsts.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>())</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    MatchedAddrModeInsts.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;  }</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;}</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;} <span class="comment">// end anonymous namespace</span></div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;<span class="comment">/// IsNonLocalValue - Return true if the specified values are defined in a</span></div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;<span class="comment">/// different basic block than BB.</span></div><div class="line"><a name="l01442"></a><span class="lineno"><a class="line" href="CodeGenPrepare_8cpp.html#ad897d4beb50aa8f0d4d2eaa08ac0987d"> 1442</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="CodeGenPrepare_8cpp.html#ad897d4beb50aa8f0d4d2eaa08ac0987d">IsNonLocalValue</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB) {</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(V))</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent() != <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>;</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;}</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;<span class="comment">/// OptimizeMemoryInst - Load and Store Instructions often have</span></div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;<span class="comment">/// addressing modes that can do significant amounts of computation.  As such,</span></div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;<span class="comment">/// instruction selection will try to get the load or store to do as much</span></div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;<span class="comment">/// computation as possible for the program.  The problem is that isel can only</span></div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;<span class="comment">/// see within a single block.  As such, we sink as much legal addressing mode</span></div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;<span class="comment">/// stuff into the block as possible.</span></div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;<span class="comment">/// This method is used to optimize both load/store and inline asms with memory</span></div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;<span class="comment">/// operands.</span></div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> CodeGenPrepare::OptimizeMemoryInst(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *MemoryInst, <a class="code" href="classllvm_1_1Value.html">Value</a> *Addr,</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;                                        <a class="code" href="classllvm_1_1Type.html">Type</a> *AccessTy) {</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Repl = Addr;</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;  <span class="comment">// Try to collapse single-value PHI nodes.  This is necessary to undo</span></div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;  <span class="comment">// unprofitable PRE transformations.</span></div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value*, 8&gt;</a> worklist;</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Value*, 16&gt;</a> Visited;</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;  worklist.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Addr);</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;  <span class="comment">// Use a worklist to iteratively look through PHI nodes, and ensure that</span></div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;  <span class="comment">// the addressing mode obtained from the non-PHI roots of the graph</span></div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;  <span class="comment">// are equivalent.</span></div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Consensus = 0;</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;  <span class="keywordtype">unsigned</span> NumUsesConsensus = 0;</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;  <span class="keywordtype">bool</span> IsNumUsesConsensusValid = <span class="keyword">false</span>;</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction*, 16&gt;</a> AddrModeInsts;</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;  ExtAddrMode <a class="code" href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">AddrMode</a>;</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;  <span class="keywordflow">while</span> (!worklist.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>()) {</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *V = worklist.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#acd9e771a3296c6b24146955754620557">back</a>();</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;    worklist.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#a1f2303df9bbee2233c11d61c2f6f7930">pop_back</a>();</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;    <span class="comment">// Break use-def graph loops.</span></div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;    <span class="keywordflow">if</span> (!Visited.<a class="code" href="classllvm_1_1SmallPtrSet.html#a9b6dd0fc7a648a939e571246045b673e">insert</a>(V)) {</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;      Consensus = 0;</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;    }</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    <span class="comment">// For a PHI node, push all of its incoming values.</span></div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = dyn_cast&lt;PHINode&gt;(V)) {</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>-&gt;getNumIncomingValues(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;        worklist.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>-&gt;getIncomingValue(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    }</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    <span class="comment">// For non-PHIs, determine the addressing mode being computed.</span></div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction*, 16&gt;</a> NewAddrModeInsts;</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    ExtAddrMode NewAddrMode =</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;      AddressingModeMatcher::Match(V, AccessTy, MemoryInst,</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;                                   NewAddrModeInsts, *TLI);</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    <span class="comment">// This check is broken into two cases with very similar code to avoid using</span></div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    <span class="comment">// getNumUses() as much as possible. Some values have a lot of uses, so</span></div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    <span class="comment">// calling getNumUses() unconditionally caused a significant compile-time</span></div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;    <span class="comment">// regression.</span></div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    <span class="keywordflow">if</span> (!Consensus) {</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;      Consensus = V;</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;      AddrMode = NewAddrMode;</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;      AddrModeInsts = NewAddrModeInsts;</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (NewAddrMode == AddrMode) {</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;      <span class="keywordflow">if</span> (!IsNumUsesConsensusValid) {</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;        NumUsesConsensus = Consensus-&gt;<a class="code" href="classllvm_1_1Value.html#a380559e99b47632a34f74de7c1d03cc0">getNumUses</a>();</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;        IsNumUsesConsensusValid = <span class="keyword">true</span>;</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;      }</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;      <span class="comment">// Ensure that the obtained addressing mode is equivalent to that obtained</span></div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;      <span class="comment">// for all other roots of the PHI traversal.  Also, when choosing one</span></div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;      <span class="comment">// such root as representative, select the one with the most uses in order</span></div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;      <span class="comment">// to keep the cost modeling heuristics in AddressingModeMatcher</span></div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;      <span class="comment">// applicable.</span></div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;      <span class="keywordtype">unsigned</span> NumUses = V-&gt;<a class="code" href="classllvm_1_1Value.html#a380559e99b47632a34f74de7c1d03cc0">getNumUses</a>();</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;      <span class="keywordflow">if</span> (NumUses &gt; NumUsesConsensus) {</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;        Consensus = V;</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;        NumUsesConsensus = NumUses;</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;        AddrModeInsts = NewAddrModeInsts;</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;      }</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;    }</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    Consensus = 0;</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;  }</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;  <span class="comment">// If the addressing mode couldn&#39;t be determined, or if multiple different</span></div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;  <span class="comment">// ones were determined, bail out now.</span></div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;  <span class="keywordflow">if</span> (!Consensus) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;  <span class="comment">// Check to see if any of the instructions supersumed by this addr mode are</span></div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;  <span class="comment">// non-local to I&#39;s BB.</span></div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;  <span class="keywordtype">bool</span> AnyNonLocal = <span class="keyword">false</span>;</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = AddrModeInsts.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="CodeGenPrepare_8cpp.html#ad897d4beb50aa8f0d4d2eaa08ac0987d">IsNonLocalValue</a>(AddrModeInsts[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], MemoryInst-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>())) {</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;      AnyNonLocal = <span class="keyword">true</span>;</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    }</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;  }</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;  <span class="comment">// If all the instructions matched are already in this BB, don&#39;t do anything.</span></div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;  <span class="keywordflow">if</span> (!AnyNonLocal) {</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;CGP: Found      local addrmode: &quot;</span> &lt;&lt; AddrMode &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;  }</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;  <span class="comment">// Insert this computation right after this user.  Since our caller is</span></div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;  <span class="comment">// scanning from the top of the BB to the bottom, reuse of the expr are</span></div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;  <span class="comment">// guaranteed to happen later.</span></div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> Builder(MemoryInst);</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;  <span class="comment">// Now that we determined the addressing expression we want to use and know</span></div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;  <span class="comment">// that we have to sink it into this block.  Check to see if we have already</span></div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;  <span class="comment">// done this for some other load/store instr in this block.  If so, reuse the</span></div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;  <span class="comment">// computation.</span></div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;SunkAddr = SunkAddrs[Addr];</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;  <span class="keywordflow">if</span> (SunkAddr) {</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;CGP: Reusing nonlocal addrmode: &quot;</span> &lt;&lt; AddrMode &lt;&lt; <span class="stringliteral">&quot; for &quot;</span></div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;                 &lt;&lt; *MemoryInst);</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;    <span class="keywordflow">if</span> (SunkAddr-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() != Addr-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;      SunkAddr = Builder.<a class="code" href="classllvm_1_1IRBuilder.html#a87b363b9dad9f5040ea7e29ea9e60ff5">CreateBitCast</a>(SunkAddr, Addr-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;CGP: SINKING nonlocal addrmode: &quot;</span> &lt;&lt; AddrMode &lt;&lt; <span class="stringliteral">&quot; for &quot;</span></div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;                 &lt;&lt; *MemoryInst);</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *IntPtrTy = TLI-&gt;getDataLayout()-&gt;getIntPtrType(Addr-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Result = 0;</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;    <span class="comment">// Start with the base register. Do this first so that subsequent address</span></div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;    <span class="comment">// matching finds it last, which will prevent it from trying to match it</span></div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;    <span class="comment">// as the scaled value in case it happens to be a mul. That would be</span></div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    <span class="comment">// problematic if we&#39;ve sunk a different mul for the scale, because then</span></div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    <span class="comment">// we&#39;d end up sinking both muls.</span></div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;    <span class="keywordflow">if</span> (AddrMode.BaseReg) {</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *V = AddrMode.BaseReg;</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;      <span class="keywordflow">if</span> (V-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>())</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;        V = Builder.<a class="code" href="classllvm_1_1IRBuilder.html#a9299aed1efa0ef459a0f1c7fa11fbe61">CreatePtrToInt</a>(V, IntPtrTy, <span class="stringliteral">&quot;sunkaddr&quot;</span>);</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;      <span class="keywordflow">if</span> (V-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() != IntPtrTy)</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;        V = Builder.<a class="code" href="classllvm_1_1IRBuilder.html#afdd8a08bfcbd94f60d166a71a3e79ff3">CreateIntCast</a>(V, IntPtrTy, <span class="comment">/*isSigned=*/</span><span class="keyword">true</span>, <span class="stringliteral">&quot;sunkaddr&quot;</span>);</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;      Result = V;</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;    }</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;    <span class="comment">// Add the scale value.</span></div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;    <span class="keywordflow">if</span> (AddrMode.Scale) {</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *V = AddrMode.ScaledReg;</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;      <span class="keywordflow">if</span> (V-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() == IntPtrTy) {</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;        <span class="comment">// done.</span></div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (V-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>()) {</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;        V = Builder.<a class="code" href="classllvm_1_1IRBuilder.html#a9299aed1efa0ef459a0f1c7fa11fbe61">CreatePtrToInt</a>(V, IntPtrTy, <span class="stringliteral">&quot;sunkaddr&quot;</span>);</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cast&lt;IntegerType&gt;(IntPtrTy)-&gt;<a class="code" href="ValueTracking_8cpp.html#a06c14477546c3a0eb4c79ff007ea2375">getBitWidth</a>() &lt;</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;                 cast&lt;IntegerType&gt;(V-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())-&gt;<a class="code" href="ValueTracking_8cpp.html#a06c14477546c3a0eb4c79ff007ea2375">getBitWidth</a>()) {</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;        V = Builder.<a class="code" href="classllvm_1_1IRBuilder.html#aa933549689e79685bb67de64dddc9f7c">CreateTrunc</a>(V, IntPtrTy, <span class="stringliteral">&quot;sunkaddr&quot;</span>);</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;        V = Builder.<a class="code" href="classllvm_1_1IRBuilder.html#a2081b822b121723df82782c24314a37e">CreateSExt</a>(V, IntPtrTy, <span class="stringliteral">&quot;sunkaddr&quot;</span>);</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;      }</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;      <span class="keywordflow">if</span> (AddrMode.Scale != 1)</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;        V = Builder.<a class="code" href="classllvm_1_1IRBuilder.html#a94c18bf85a5105e0a22fba23b0bedafa">CreateMul</a>(V, <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(IntPtrTy, AddrMode.Scale),</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;                              <span class="stringliteral">&quot;sunkaddr&quot;</span>);</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;      <span class="keywordflow">if</span> (Result)</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;        Result = Builder.<a class="code" href="classllvm_1_1IRBuilder.html#a112f87f5844b5d94c07940f3d47f1e99">CreateAdd</a>(Result, V, <span class="stringliteral">&quot;sunkaddr&quot;</span>);</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;        Result = V;</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;    }</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    <span class="comment">// Add in the BaseGV if present.</span></div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    <span class="keywordflow">if</span> (AddrMode.BaseGV) {</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *V = Builder.<a class="code" href="classllvm_1_1IRBuilder.html#a9299aed1efa0ef459a0f1c7fa11fbe61">CreatePtrToInt</a>(AddrMode.BaseGV, IntPtrTy, <span class="stringliteral">&quot;sunkaddr&quot;</span>);</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;      <span class="keywordflow">if</span> (Result)</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;        Result = Builder.<a class="code" href="classllvm_1_1IRBuilder.html#a112f87f5844b5d94c07940f3d47f1e99">CreateAdd</a>(Result, V, <span class="stringliteral">&quot;sunkaddr&quot;</span>);</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;        Result = V;</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;    }</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    <span class="comment">// Add in the Base Offset if present.</span></div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    <span class="keywordflow">if</span> (AddrMode.BaseOffs) {</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(IntPtrTy, AddrMode.BaseOffs);</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;      <span class="keywordflow">if</span> (Result)</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;        Result = Builder.<a class="code" href="classllvm_1_1IRBuilder.html#a112f87f5844b5d94c07940f3d47f1e99">CreateAdd</a>(Result, V, <span class="stringliteral">&quot;sunkaddr&quot;</span>);</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;        Result = V;</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;    }</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    <span class="keywordflow">if</span> (Result == 0)</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;      SunkAddr = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Addr-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;      SunkAddr = Builder.<a class="code" href="classllvm_1_1IRBuilder.html#a11d3f8bbc5a14f60879a87175db6695c">CreateIntToPtr</a>(Result, Addr-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), <span class="stringliteral">&quot;sunkaddr&quot;</span>);</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;  }</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;  MemoryInst-&gt;<a class="code" href="classllvm_1_1User.html#a1f0b9358936e3e00c42a460abbfb2868">replaceUsesOfWith</a>(Repl, SunkAddr);</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;  <span class="comment">// If we have no uses, recursively delete the value and all dead instructions</span></div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;  <span class="comment">// using it.</span></div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;  <span class="keywordflow">if</span> (Repl-&gt;<a class="code" href="classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">use_empty</a>()) {</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    <span class="comment">// This can cause recursive deletion, which can invalidate our iterator.</span></div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;    <span class="comment">// Use a WeakVH to hold onto it in case this happens.</span></div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;    <a class="code" href="classllvm_1_1WeakVH.html">WeakVH</a> IterHandle(CurInstIterator);</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB = CurInstIterator-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>();</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;    <a class="code" href="namespacellvm.html#a23b3753cc662a87b599913814ccf2444">RecursivelyDeleteTriviallyDeadInstructions</a>(Repl, TLInfo);</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;    <span class="keywordflow">if</span> (IterHandle != CurInstIterator) {</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;      <span class="comment">// If the iterator instruction was recursively deleted, start over at the</span></div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;      <span class="comment">// start of the block.</span></div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;      CurInstIterator = BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;      SunkAddrs.clear();</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;    }</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;  }</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;  ++NumMemoryInsts;</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;}</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;<span class="comment">/// OptimizeInlineAsmInst - If there are any memory operands, use</span></div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;<span class="comment">/// OptimizeMemoryInst to sink their address computing into the block when</span></div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;<span class="comment">/// possible / profitable.</span></div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> CodeGenPrepare::OptimizeInlineAsmInst(<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CS) {</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;  <span class="keywordtype">bool</span> MadeChange = <span class="keyword">false</span>;</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;  <a class="code" href="classllvm_1_1TargetLowering.html#a08a19e975c43ee759d51b879a0f2c75c">TargetLowering::AsmOperandInfoVector</a></div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;    TargetConstraints = TLI-&gt;ParseConstraints(CS);</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;  <span class="keywordtype">unsigned</span> ArgNo = 0;</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = TargetConstraints.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;    <a class="code" href="structllvm_1_1TargetLowering_1_1AsmOperandInfo.html">TargetLowering::AsmOperandInfo</a> &amp;OpInfo = TargetConstraints[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;    <span class="comment">// Compute the constraint code and ConstraintType to use.</span></div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    TLI-&gt;ComputeConstraintToUse(OpInfo, <a class="code" href="classllvm_1_1SDValue.html">SDValue</a>());</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    <span class="keywordflow">if</span> (OpInfo.<a class="code" href="structllvm_1_1TargetLowering_1_1AsmOperandInfo.html#ab6af857f66a2fc271535a12203d7dad6">ConstraintType</a> == <a class="code" href="classllvm_1_1TargetLowering.html#a0b0176781cd4fd9f45cc739f1d007116a420d729d2e7d056ec884c094ccdc4467">TargetLowering::C_Memory</a> &amp;&amp;</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;        OpInfo.<a class="code" href="structllvm_1_1InlineAsm_1_1ConstraintInfo.html#acbf697bfd59727faf13eeb80fdf90d79">isIndirect</a>) {</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *OpVal = CS-&gt;<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(ArgNo++);</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;      MadeChange |= OptimizeMemoryInst(CS, OpVal, OpVal-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (OpInfo.<a class="code" href="structllvm_1_1InlineAsm_1_1ConstraintInfo.html#a3400e49d5c9d94f96aa1117ecd0b799d">Type</a> == <a class="code" href="classllvm_1_1InlineAsm.html#a511f48809ad14f13e50b957a137a9d34a79ca3881430605a6c7da5227cfb115d6">InlineAsm::isInput</a>)</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;      ArgNo++;</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;  }</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;  <span class="keywordflow">return</span> MadeChange;</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;}</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;<span class="comment">/// MoveExtToFormExtLoad - Move a zext or sext fed by a load into the same</span></div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;<span class="comment">/// basic block as the load, unless conditions are unfavorable. This allows</span></div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;<span class="comment">/// SelectionDAG to fold the extend into the load.</span></div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> CodeGenPrepare::MoveExtToFormExtLoad(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;  <span class="comment">// Look for a load being extended.</span></div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;  <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a>&gt;(I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0));</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;  <span class="keywordflow">if</span> (!LI) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;  <span class="comment">// If they&#39;re already in the same block, there&#39;s nothing to do.</span></div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;  <span class="keywordflow">if</span> (LI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>() == I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>())</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;  <span class="comment">// If the load has other users and the truncate is not free, this probably</span></div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;  <span class="comment">// isn&#39;t worthwhile.</span></div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;  <span class="keywordflow">if</span> (!LI-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp;</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;      TLI &amp;&amp; (TLI-&gt;isTypeLegal(TLI-&gt;getValueType(LI-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())) ||</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;              !TLI-&gt;isTypeLegal(TLI-&gt;getValueType(I-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()))) &amp;&amp;</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;      !TLI-&gt;isTruncateFree(I-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), LI-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()))</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;  <span class="comment">// Check whether the target supports casts folded into loads.</span></div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;  <span class="keywordtype">unsigned</span> LType;</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;  <span class="keywordflow">if</span> (isa&lt;ZExtInst&gt;(I))</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;    LType = <a class="code" href="namespacellvm_1_1ISD.html#ad4d48171b87ca51ff54c10a436bac4d7a8d89c7da4444d9ec11667aa369abc5f7">ISD::ZEXTLOAD</a>;</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;  <span class="keywordflow">else</span> {</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    assert(isa&lt;SExtInst&gt;(I) &amp;&amp; <span class="stringliteral">&quot;Unexpected ext type!&quot;</span>);</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;    LType = <a class="code" href="namespacellvm_1_1ISD.html#ad4d48171b87ca51ff54c10a436bac4d7a6c61b6125c7901c549f90ee0e443a770">ISD::SEXTLOAD</a>;</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;  }</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;  <span class="keywordflow">if</span> (TLI &amp;&amp; !TLI-&gt;isLoadExtLegal(LType, TLI-&gt;getValueType(LI-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())))</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;  <span class="comment">// Move the extend into the same block as the load, so that SelectionDAG</span></div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;  <span class="comment">// can fold it.</span></div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;  I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a0fd53f63d349dc8a7c5fc0cdd7a94c8d">removeFromParent</a>();</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;  I-&gt;<a class="code" href="classllvm_1_1Instruction.html#af09e4096de244d2fb345891328714a63">insertAfter</a>(LI);</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;  ++NumExtsMoved;</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;}</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;<span class="keywordtype">bool</span> CodeGenPrepare::OptimizeExtUses(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I) {</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *DefBB = I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;  <span class="comment">// If the result of a {s|z}ext and its source are both live out, rewrite all</span></div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;  <span class="comment">// other uses of the source with result of extension.</span></div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Src = I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;  <span class="keywordflow">if</span> (Src-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>())</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;  <span class="comment">// Only do this xform if truncating is free.</span></div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;  <span class="keywordflow">if</span> (TLI &amp;&amp; !TLI-&gt;isTruncateFree(I-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), Src-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()))</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;  <span class="comment">// Only safe to perform the optimization if the source is also defined in</span></div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;  <span class="comment">// this block.</span></div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;Instruction&gt;(Src) || DefBB != cast&lt;Instruction&gt;(Src)-&gt;<a class="code" href="BasicAliasAnalysis_8cpp.html#a2675de1d8479c7b00387979714da43f7">getParent</a>())</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;  <span class="keywordtype">bool</span> DefIsLiveOut = <span class="keyword">false</span>;</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::use_iterator</a> UI = I-&gt;<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>(), E = I-&gt;<a class="code" href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">use_end</a>();</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;       UI != E; ++UI) {</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1User.html">User</a> = cast&lt;Instruction&gt;(*UI);</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;    <span class="comment">// Figure out which BB this ext is used in.</span></div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *UserBB = User-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;    <span class="keywordflow">if</span> (UserBB == DefBB) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;    DefIsLiveOut = <span class="keyword">true</span>;</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;  }</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;  <span class="keywordflow">if</span> (!DefIsLiveOut)</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;  <span class="comment">// Make sure none of the uses are PHI nodes.</span></div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::use_iterator</a> UI = Src-&gt;<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>(), E = Src-&gt;<a class="code" href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">use_end</a>();</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;       UI != E; ++UI) {</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1User.html">User</a> = cast&lt;Instruction&gt;(*UI);</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *UserBB = User-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;    <span class="keywordflow">if</span> (UserBB == DefBB) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;    <span class="comment">// Be conservative. We don&#39;t want this xform to end up introducing</span></div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;    <span class="comment">// reloads just before load / store instructions.</span></div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;    <span class="keywordflow">if</span> (isa&lt;PHINode&gt;(User) || isa&lt;LoadInst&gt;(User) || isa&lt;StoreInst&gt;(User))</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;  }</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;  <span class="comment">// InsertedTruncs - Only insert one trunc in each block once.</span></div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;BasicBlock*, Instruction*&gt;</a> InsertedTruncs;</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;  <span class="keywordtype">bool</span> MadeChange = <span class="keyword">false</span>;</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::use_iterator</a> UI = Src-&gt;<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>(), E = Src-&gt;<a class="code" href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">use_end</a>();</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;       UI != E; ++UI) {</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;    <a class="code" href="classllvm_1_1Use.html">Use</a> &amp;TheUse = UI.getUse();</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1User.html">User</a> = cast&lt;Instruction&gt;(*UI);</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;    <span class="comment">// Figure out which BB this ext is used in.</span></div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *UserBB = User-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;    <span class="keywordflow">if</span> (UserBB == DefBB) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;    <span class="comment">// Both src and def are live in this block. Rewrite the use.</span></div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *&amp;InsertedTrunc = InsertedTruncs[UserBB];</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;    <span class="keywordflow">if</span> (!InsertedTrunc) {</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;      <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> InsertPt = UserBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ab1cd5a3713b93a33f89a2086d473cf6e">getFirstInsertionPt</a>();</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;      InsertedTrunc = <span class="keyword">new</span> <a class="code" href="classllvm_1_1TruncInst.html">TruncInst</a>(I, Src-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), <span class="stringliteral">&quot;&quot;</span>, InsertPt);</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;    }</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;    <span class="comment">// Replace a use of the {s|z}ext source with a use of the result.</span></div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;    TheUse = InsertedTrunc;</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;    ++NumExtUses;</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;    MadeChange = <span class="keyword">true</span>;</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;  }</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;  <span class="keywordflow">return</span> MadeChange;</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;}</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;<span class="comment">/// isFormingBranchFromSelectProfitable - Returns true if a SelectInst should be</span></div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;<span class="comment">/// turned into an explicit branch.</span></div><div class="line"><a name="l01797"></a><span class="lineno"><a class="line" href="CodeGenPrepare_8cpp.html#a90f66db387331ade4548891d8fa6d296"> 1797</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="CodeGenPrepare_8cpp.html#a90f66db387331ade4548891d8fa6d296">isFormingBranchFromSelectProfitable</a>(<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *SI) {</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;  <span class="comment">// FIXME: This should use the same heuristics as IfConversion to determine</span></div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;  <span class="comment">// whether a select is better represented as a branch.  This requires that</span></div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;  <span class="comment">// branch probability metadata is preserved for the select, which is not the</span></div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;  <span class="comment">// case currently.</span></div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html">CmpInst</a> *Cmp = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1CmpInst.html">CmpInst</a>&gt;(SI-&gt;<a class="code" href="classllvm_1_1SelectInst.html#ad285a69e32ddeee367fed93b5f392801">getCondition</a>());</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;  <span class="comment">// If the branch is predicted right, an out of order CPU can avoid blocking on</span></div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;  <span class="comment">// the compare.  Emit cmovs on compares with a memory operand as branches to</span></div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;  <span class="comment">// avoid stalls on the load from memory.  If the compare has more than one use</span></div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;  <span class="comment">// there&#39;s probably another cmov or setcc around so it&#39;s not worth emitting a</span></div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;  <span class="comment">// branch.</span></div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;  <span class="keywordflow">if</span> (!Cmp)</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CmpOp0 = Cmp-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CmpOp1 = Cmp-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;  <span class="comment">// We check that the memory operand has one use to avoid uses of the loaded</span></div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;  <span class="comment">// value directly after the compare, making branches unprofitable.</span></div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;  <span class="keywordflow">return</span> Cmp-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>() &amp;&amp;</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;         ((isa&lt;LoadInst&gt;(CmpOp0) &amp;&amp; CmpOp0-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()) ||</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;          (isa&lt;LoadInst&gt;(CmpOp1) &amp;&amp; CmpOp1-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()));</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;}</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;<span class="comment">/// If we have a SelectInst that will likely profit from branch prediction,</span></div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;<span class="comment">/// turn it into a branch.</span></div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> CodeGenPrepare::OptimizeSelectInst(<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *SI) {</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;  <span class="keywordtype">bool</span> VectorCond = !SI-&gt;<a class="code" href="classllvm_1_1SelectInst.html#ad285a69e32ddeee367fed93b5f392801">getCondition</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>(1);</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;  <span class="comment">// Can we convert the &#39;select&#39; to CF ?</span></div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="CodeGenPrepare_8cpp.html#a18ea06b4e195aedc9dbd091d60d74365">DisableSelectToBranch</a> || OptSize || !TLI || VectorCond)</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;  <a class="code" href="classllvm_1_1TargetLoweringBase.html#a575e134a5e8414029a5c4a284858e6cd">TargetLowering::SelectSupportKind</a> SelectKind;</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;  <span class="keywordflow">if</span> (VectorCond)</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;    SelectKind = <a class="code" href="classllvm_1_1TargetLoweringBase.html#a575e134a5e8414029a5c4a284858e6cda57d13a184979a5a9b7110c20e9d6f55d">TargetLowering::VectorMaskSelect</a>;</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (SI-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">isVectorTy</a>())</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;    SelectKind = <a class="code" href="classllvm_1_1TargetLoweringBase.html#a575e134a5e8414029a5c4a284858e6cda14714058f9e9eb27b0a4ec62d23bddd5">TargetLowering::ScalarCondVectorVal</a>;</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;    SelectKind = <a class="code" href="classllvm_1_1TargetLoweringBase.html#a575e134a5e8414029a5c4a284858e6cda87a93c29e9b581a0845c5cd878a8d3b7">TargetLowering::ScalarValSelect</a>;</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;  <span class="comment">// Do we have efficient codegen support for this kind of &#39;selects&#39; ?</span></div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;  <span class="keywordflow">if</span> (TLI-&gt;isSelectSupported(SelectKind)) {</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;    <span class="comment">// We have efficient codegen support for the select instruction.</span></div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;    <span class="comment">// Check if it is profitable to keep this &#39;select&#39;.</span></div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;    <span class="keywordflow">if</span> (!TLI-&gt;isPredictableSelectExpensive() ||</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;        !<a class="code" href="CodeGenPrepare_8cpp.html#a90f66db387331ade4548891d8fa6d296">isFormingBranchFromSelectProfitable</a>(SI))</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;  }</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;  ModifiedDT = <span class="keyword">true</span>;</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;  <span class="comment">// First, we split the block containing the select into 2 blocks.</span></div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *StartBlock = SI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;  <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> SplitPt = ++(<a class="code" href="classllvm_1_1BasicBlock.html#a1445356b70fbb95acc5e0d3d2ac9101c">BasicBlock::iterator</a>(SI));</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NextBlock = StartBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a19445f836d9e1ecb32cba27ec4338fff">splitBasicBlock</a>(SplitPt, <span class="stringliteral">&quot;select.end&quot;</span>);</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;  <span class="comment">// Create a new block serving as the landing pad for the branch.</span></div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SmallBlock = <a class="code" href="classllvm_1_1BasicBlock.html#ae1d53a21892854816885c7288f8b46f1">BasicBlock::Create</a>(SI-&gt;<a class="code" href="classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>(), <span class="stringliteral">&quot;select.mid&quot;</span>,</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;                                             NextBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>(), NextBlock);</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;  <span class="comment">// Move the unconditional branch from the block with the select in it into our</span></div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;  <span class="comment">// landing pad block.</span></div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;  StartBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html#ae9cbc599309fd2da33ec1c61df01ce1f">BranchInst::Create</a>(NextBlock, SmallBlock);</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;  <span class="comment">// Insert the real conditional branch based on the original condition.</span></div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html#ae9cbc599309fd2da33ec1c61df01ce1f">BranchInst::Create</a>(NextBlock, SmallBlock, SI-&gt;<a class="code" href="classllvm_1_1SelectInst.html#ad285a69e32ddeee367fed93b5f392801">getCondition</a>(), SI);</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;  <span class="comment">// The select itself is replaced with a PHI Node.</span></div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = <a class="code" href="classllvm_1_1PHINode.html#afb5e83bf5123ff7c51058eb0ebebcdc6">PHINode::Create</a>(SI-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), 2, <span class="stringliteral">&quot;&quot;</span>, NextBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>());</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;  PN-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(SI);</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;  PN-&gt;addIncoming(SI-&gt;<a class="code" href="classllvm_1_1SelectInst.html#a67bf091383cd61e1225445e78b61d9f9">getTrueValue</a>(), StartBlock);</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;  PN-&gt;addIncoming(SI-&gt;<a class="code" href="classllvm_1_1SelectInst.html#a29a16f32075ee4f23cd769701463952c">getFalseValue</a>(), SmallBlock);</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;  SI-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(PN);</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;  SI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;  <span class="comment">// Instruct OptimizeBlock to skip to the next block.</span></div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;  CurInstIterator = StartBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>();</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;  ++NumSelectsExpanded;</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;}</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;<span class="keywordtype">bool</span> CodeGenPrepare::OptimizeInst(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I) {</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = dyn_cast&lt;PHINode&gt;(I)) {</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;    <span class="comment">// It is possible for very late stage optimizations (such as SimplifyCFG)</span></div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;    <span class="comment">// to introduce PHI nodes too late to be cleaned up.  If we detect such a</span></div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;    <span class="comment">// trivial PHI, go ahead and zap it here.</span></div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#a50f8f41fccbea466816345520e9bfabb">SimplifyInstruction</a>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>, TLI ? TLI-&gt;getDataLayout() : 0,</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;                                       TLInfo, DT)) {</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;      <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>-&gt;replaceAllUsesWith(V);</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;      <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>-&gt;eraseFromParent();</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;      ++NumPHIsElim;</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;    }</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;  }</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CastInst.html">CastInst</a> *CI = dyn_cast&lt;CastInst&gt;(I)) {</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;    <span class="comment">// If the source of the cast is a constant, then this should have</span></div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;    <span class="comment">// already been constant folded.  The only reason NOT to constant fold</span></div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;    <span class="comment">// it is if something (e.g. LSR) was careful to place the constant</span></div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;    <span class="comment">// evaluation in a block other than then one that uses it (e.g. to hoist</span></div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;    <span class="comment">// the address of globals out of a loop).  If this is the case, we don&#39;t</span></div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;    <span class="comment">// want to forward-subst the cast.</span></div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;    <span class="keywordflow">if</span> (isa&lt;Constant&gt;(CI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)))</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;    <span class="keywordflow">if</span> (TLI &amp;&amp; <a class="code" href="CodeGenPrepare_8cpp.html#a5879e98ff962702779287b966f4dce4b">OptimizeNoopCopyExpression</a>(CI, *TLI))</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;    <span class="keywordflow">if</span> (isa&lt;ZExtInst&gt;(I) || isa&lt;SExtInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;      <span class="keywordtype">bool</span> MadeChange = MoveExtToFormExtLoad(I);</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;      <span class="keywordflow">return</span> MadeChange | OptimizeExtUses(I);</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;    }</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;  }</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CmpInst.html">CmpInst</a> *CI = dyn_cast&lt;CmpInst&gt;(I))</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CodeGenPrepare_8cpp.html#aa7cb7b30ab9793838d6ad4e23f67673d">OptimizeCmpExpression</a>(CI);</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI = dyn_cast&lt;LoadInst&gt;(I)) {</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;    <span class="keywordflow">if</span> (TLI)</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;      <span class="keywordflow">return</span> OptimizeMemoryInst(I, I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), LI-&gt;getType());</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;  }</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *SI = dyn_cast&lt;StoreInst&gt;(I)) {</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;    <span class="keywordflow">if</span> (TLI)</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;      <span class="keywordflow">return</span> OptimizeMemoryInst(I, SI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1),</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;                                SI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;  }</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *GEPI = dyn_cast&lt;GetElementPtrInst&gt;(I)) {</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;    <span class="keywordflow">if</span> (GEPI-&gt;hasAllZeroIndices()) {<span class="comment"></span></div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;<span class="comment">      /// The GEP operand must be a pointer, so must its result -&gt; BitCast</span></div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;<span class="comment"></span>      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="regutils_8h.html#a1fa2460e32327ade49189c95740bc1b5">NC</a> = <span class="keyword">new</span> <a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a>(GEPI-&gt;getOperand(0), GEPI-&gt;getType(),</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;                                        GEPI-&gt;getName(), GEPI);</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;      GEPI-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(NC);</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;      GEPI-&gt;eraseFromParent();</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;      ++NumGEPsElim;</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;      OptimizeInst(NC);</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;    }</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;  }</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI = dyn_cast&lt;CallInst&gt;(I))</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;    <span class="keywordflow">return</span> OptimizeCallInst(CI);</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *SI = dyn_cast&lt;SelectInst&gt;(I))</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;    <span class="keywordflow">return</span> OptimizeSelectInst(SI);</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;}</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;<span class="comment">// In this pass we look for GEP and cast instructions that are used</span></div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;<span class="comment">// across basic blocks and rewrite them to improve basic-block-at-a-time</span></div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;<span class="comment">// selection.</span></div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;<span class="keywordtype">bool</span> CodeGenPrepare::OptimizeBlock(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;BB) {</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;  SunkAddrs.clear();</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;  <span class="keywordtype">bool</span> MadeChange = <span class="keyword">false</span>;</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;  CurInstIterator = BB.<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;  <span class="keywordflow">while</span> (CurInstIterator != BB.<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>())</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;    MadeChange |= OptimizeInst(CurInstIterator++);</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;  MadeChange |= DupRetToEnableTailCallOpts(&amp;BB);</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;  <span class="keywordflow">return</span> MadeChange;</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;}</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;<span class="comment">// llvm.dbg.value is far away from the value then iSel may not be able</span></div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;<span class="comment">// handle it properly. iSel will drop llvm.dbg.value if it can not</span></div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;<span class="comment">// find a node corresponding to the value.</span></div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;<span class="keywordtype">bool</span> CodeGenPrepare::PlaceDbgValues(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;F) {</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;  <span class="keywordtype">bool</span> MadeChange = <span class="keyword">false</span>;</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">Function::iterator</a> I = F.<a class="code" href="classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">begin</a>(), E = F.<a class="code" href="classllvm_1_1Function.html#ae4ca2261b8b901e415fda7feac5051ea">end</a>(); I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *PrevNonDbgInst = NULL;</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> BI = I-&gt;begin(), BE = I-&gt;end(); BI != BE;) {</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Insn = BI; ++BI;</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;      <a class="code" href="classllvm_1_1DbgValueInst.html">DbgValueInst</a> *DVI = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1DbgValueInst.html">DbgValueInst</a>&gt;(Insn);</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;      <span class="keywordflow">if</span> (!DVI) {</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;        PrevNonDbgInst = Insn;</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;      }</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *VI = dyn_cast_or_null&lt;Instruction&gt;(DVI-&gt;<a class="code" href="classllvm_1_1DbgValueInst.html#a53ed1196551e59f6c7be49a9ae12eba0">getValue</a>());</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;      <span class="keywordflow">if</span> (VI &amp;&amp; VI != PrevNonDbgInst &amp;&amp; !VI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a237e6bf58bc993ea494bdde7480ca428">isTerminator</a>()) {</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Moving Debug Value before :\n&quot;</span> &lt;&lt; *DVI &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; *VI);</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;        DVI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a0fd53f63d349dc8a7c5fc0cdd7a94c8d">removeFromParent</a>();</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;        <span class="keywordflow">if</span> (isa&lt;PHINode&gt;(VI))</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;          DVI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a482498a1c760122fd33c7fc8190dd277">insertBefore</a>(VI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ab1cd5a3713b93a33f89a2086d473cf6e">getFirstInsertionPt</a>());</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;          DVI-&gt;<a class="code" href="classllvm_1_1Instruction.html#af09e4096de244d2fb345891328714a63">insertAfter</a>(VI);</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;        MadeChange = <span class="keyword">true</span>;</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;        ++NumDbgValueMoved;</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;      }</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;    }</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;  }</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;  <span class="keywordflow">return</span> MadeChange;</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;}</div><div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a075e34e98605d0e7c289763a104869ac"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">llvm::SmallVectorTemplateCommon&lt; T &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00114">SmallVector.h:114</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00127">SmallVector.h:127</a></div></div>
<div class="ttc" id="SmallSet_8h_html"><div class="ttname"><a href="SmallSet_8h.html">SmallSet.h</a></div></div>
<div class="ttc" id="classllvm_1_1ReturnInst_html"><div class="ttname"><a href="classllvm_1_1ReturnInst.html">llvm::ReturnInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02279">Instructions.h:2279</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html_a6917dcd78ac6655e9640ac3a96175e39"><div class="ttname"><a href="classllvm_1_1CallInst.html#a6917dcd78ac6655e9640ac3a96175e39">llvm::CallInst::getCalledValue</a></div><div class="ttdeci">const Value * getCalledValue() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01363">Instructions.h:1363</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00236">SmallVector.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad86469939d2a8bdd4169be9403b89f5a"><div class="ttname"><a href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">llvm::Value::use_end</a></div><div class="ttdeci">use_iterator use_end()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00152">Value.h:152</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html"><div class="ttname"><a href="classllvm_1_1DataLayout.html">llvm::DataLayout</a></div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00098">DataLayout.h:98</a></div></div>
<div class="ttc" id="classllvm_1_1generic__gep__type__iterator_html_aa9576aea404b156a949122affc839777"><div class="ttname"><a href="classllvm_1_1generic__gep__type__iterator.html#aa9576aea404b156a949122affc839777">llvm::generic_gep_type_iterator::getIndexedType</a></div><div class="ttdeci">Type * getIndexedType() const </div><div class="ttdef"><b>Definition:</b> <a href="GetElementPtrTypeIterator_8h_source.html#l00057">GetElementPtrTypeIterator.h:57</a></div></div>
<div class="ttc" id="classllvm_1_1CastInst_html_adc3489e61d5f37a0e4c5589859fbccc2"><div class="ttname"><a href="classllvm_1_1CastInst.html#adc3489e61d5f37a0e4c5589859fbccc2">llvm::CastInst::getOpcode</a></div><div class="ttdeci">Instruction::CastOps getOpcode() const </div><div class="ttdoc">Return the opcode of this CastInst. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00603">InstrTypes.h:603</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a24bca8838396aa81b87de8e7ac774b19"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">llvm::PatternMatch::m_Value</a></div><div class="ttdeci">class_match&lt; Value &gt; m_Value()</div><div class="ttdoc">m_Value() - Match an arbitrary value and ignore it. </div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00070">PatternMatch.h:70</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html"><div class="ttname"><a href="classllvm_1_1CmpInst.html">llvm::CmpInst</a></div><div class="ttdoc">Abstract base class of comparison instructions. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00633">InstrTypes.h:633</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_a884f90190bca4bd354f2d5c91c264028"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">llvm::AnalysisUsage::addPreserved</a></div><div class="ttdeci">AnalysisUsage &amp; addPreserved()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00081">PassAnalysisSupport.h:81</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a089cccb6f231efee72abc76d0f9c695f"><div class="ttname"><a href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">llvm::PHINode::addIncoming</a></div><div class="ttdeci">void addIncoming(Value *V, BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02100">Instructions.h:2100</a></div></div>
<div class="ttc" id="classllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00035">PassRegistry.cpp:35</a></div></div>
<div class="ttc" id="classllvm_1_1CallSiteBase_html_a4e7c7828319bc9db0f49c3c6d8f56ac7"><div class="ttname"><a href="classllvm_1_1CallSiteBase.html#a4e7c7828319bc9db0f49c3c6d8f56ac7">llvm::CallSiteBase::getAttributes</a></div><div class="ttdeci">const AttributeSet &amp; getAttributes() const </div><div class="ttdef"><b>Definition:</b> <a href="CallSite_8h_source.html#l00179">CallSite.h:179</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a6fe2f06b8a4b2c3d6308afb223a0238a"><div class="ttname"><a href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00072">Instruction.cpp:72</a></div></div>
<div class="ttc" id="Instructions_8h_html"><div class="ttname"><a href="Instructions_8h.html">Instructions.h</a></div></div>
<div class="ttc" id="classllvm_1_1TargetLoweringBase_html_a7b93b105a426bc0eda1eadd856aa195e"><div class="ttname"><a href="classllvm_1_1TargetLoweringBase.html#a7b93b105a426bc0eda1eadd856aa195e">llvm::TargetLoweringBase::getTypeAction</a></div><div class="ttdeci">LegalizeTypeAction getTypeAction(LLVMContext &amp;Context, EVT VT) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00319">TargetLowering.h:319</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="classllvm_1_1Attribute_html_aab7ee4b8fd1d3e7e4cea87868855e60ea133970930e56cfea2076c22632b4ba0f"><div class="ttname"><a href="classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60ea133970930e56cfea2076c22632b4ba0f">llvm::Attribute::SExt</a></div><div class="ttdoc">Sign extended before/after call. </div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00097">Attributes.h:97</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_afdd8a08bfcbd94f60d166a71a3e79ff3"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#afdd8a08bfcbd94f60d166a71a3e79ff3">llvm::IRBuilder::CreateIntCast</a></div><div class="ttdeci">Value * CreateIntCast(Value *V, Type *DestTy, bool isSigned, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01180">IRBuilder.h:1180</a></div></div>
<div class="ttc" id="DerivedTypes_8h_html"><div class="ttname"><a href="DerivedTypes_8h.html">DerivedTypes.h</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_ae4ca2261b8b901e415fda7feac5051ea"><div class="ttname"><a href="classllvm_1_1Function.html#ae4ca2261b8b901e415fda7feac5051ea">llvm::Function::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00397">Function.h:397</a></div></div>
<div class="ttc" id="classllvm_1_1IntrinsicInst_html_a6cbb4809b81f3994ee0c79b38556bd66"><div class="ttname"><a href="classllvm_1_1IntrinsicInst.html#a6cbb4809b81f3994ee0c79b38556bd66">llvm::IntrinsicInst::getIntrinsicID</a></div><div class="ttdeci">Intrinsic::ID getIntrinsicID() const </div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00043">IntrinsicInst.h:43</a></div></div>
<div class="ttc" id="classllvm_1_1iplist_html_a99d24ef8a3c3b81d43fa244e43f976fc"><div class="ttname"><a href="classllvm_1_1iplist.html#a99d24ef8a3c3b81d43fa244e43f976fc">llvm::iplist::rend</a></div><div class="ttdeci">reverse_iterator rend()</div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00379">ilist.h:379</a></div></div>
<div class="ttc" id="classllvm_1_1TargetLowering_html_a6dcf7d50b78212d30593a554bd966bd2"><div class="ttname"><a href="classllvm_1_1TargetLowering.html#a6dcf7d50b78212d30593a554bd966bd2">llvm::TargetLowering::ComputeConstraintToUse</a></div><div class="ttdeci">virtual void ComputeConstraintToUse(AsmOperandInfo &amp;OpInfo, SDValue Op, SelectionDAG *DAG=0) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8cpp_source.html#l02477">TargetLowering.cpp:2477</a></div></div>
<div class="ttc" id="IntrinsicInst_8h_html"><div class="ttname"><a href="IntrinsicInst_8h.html">IntrinsicInst.h</a></div></div>
<div class="ttc" id="DominatorInternals_8h_html"><div class="ttname"><a href="DominatorInternals_8h.html">DominatorInternals.h</a></div></div>
<div class="ttc" id="namespacellvm_html_a3f2f98c2a67c9e79f58aad9150a62e42"><div class="ttname"><a href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">llvm::dyn_cast</a></div><div class="ttdeci">enable_if_c&lt;!is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="Casting_8h_source.html#l00266">Casting.h:266</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a2f81e0c1fc6554df7ad2eafabf5fc5a5"><div class="ttname"><a href="classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">llvm::User::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00108">User.h:108</a></div></div>
<div class="ttc" id="namespacellvm_1_1SystemZISD_html_a9a3c050e4bfe8d0d09d74c979f5bb121a68ace50a32835aa0562cf8f9694ba510"><div class="ttname"><a href="namespacellvm_1_1SystemZISD.html#a9a3c050e4bfe8d0d09d74c979f5bb121a68ace50a32835aa0562cf8f9694ba510">llvm::SystemZISD::TM</a></div><div class="ttdef"><b>Definition:</b> <a href="SystemZISelLowering_8h_source.html#l00060">SystemZISelLowering.h:60</a></div></div>
<div class="ttc" id="namespacellvm_html_a9d7d0a4008434561f28c20126b992b89"><div class="ttname"><a href="namespacellvm.html#a9d7d0a4008434561f28c20126b992b89">llvm::DeleteDeadBlock</a></div><div class="ttdeci">void DeleteDeadBlock(BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00036">BasicBlockUtils.cpp:36</a></div></div>
<div class="ttc" id="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode_html_a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4"><div class="ttname"><a href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">llvm::NVPTX::PTXLdStInstCode::V2</a></div><div class="ttdef"><b>Definition:</b> <a href="NVPTX_8h_source.html#l00127">NVPTX.h:127</a></div></div>
<div class="ttc" id="DataLayout_8h_html"><div class="ttname"><a href="DataLayout_8h.html">DataLayout.h</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap&lt; unsigned int, unsigned int &gt;</a></div></div>
<div class="ttc" id="README-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00427">README-SSE.txt:427</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01978">Instructions.h:1978</a></div></div>
<div class="ttc" id="namespacellvm_html_a23b3753cc662a87b599913814ccf2444"><div class="ttname"><a href="namespacellvm.html#a23b3753cc662a87b599913814ccf2444">llvm::RecursivelyDeleteTriviallyDeadInstructions</a></div><div class="ttdeci">bool RecursivelyDeleteTriviallyDeadInstructions(Value *V, const TargetLibraryInfo *TLI=0)</div><div class="ttdef"><b>Definition:</b> <a href="Local_8cpp_source.html#l00316">Local.cpp:316</a></div></div>
<div class="ttc" id="Debug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html"><div class="ttname"><a href="classllvm_1_1CallInst.html">llvm::CallInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01161">Instructions.h:1161</a></div></div>
<div class="ttc" id="namespacellvm_html_a02b5336d71826082af53837f2ffe6128"><div class="ttname"><a href="namespacellvm.html#a02b5336d71826082af53837f2ffe6128">llvm::MergeBasicBlockIntoOnlyPred</a></div><div class="ttdeci">void MergeBasicBlockIntoOnlyPred(BasicBlock *BB, Pass *P=0)</div><div class="ttdef"><b>Definition:</b> <a href="Local_8cpp_source.html#l00477">Local.cpp:477</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html_a9b6dd0fc7a648a939e571246045b673e"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html#a9b6dd0fc7a648a939e571246045b673e">llvm::SmallPtrSet::insert</a></div><div class="ttdeci">bool insert(PtrType Ptr)</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00253">SmallPtrSet.h:253</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_aca229503e4f5c83a187a6a921c625fa8"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">llvm::BasicBlock::getParent</a></div><div class="ttdeci">const Function * getParent() const </div><div class="ttdoc">Return the enclosing method, or null if none. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00116">BasicBlock.h:116</a></div></div>
<div class="ttc" id="classllvm_1_1PredIterator_html"><div class="ttname"><a href="classllvm_1_1PredIterator.html">llvm::PredIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="Support_2CFG_8h_source.html#l00029">Support/CFG.h:29</a></div></div>
<div class="ttc" id="LLParser_8cpp_html_a33ece1ef8074506a15d7f86eb76dbae6"><div class="ttname"><a href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a></div><div class="ttdeci">F(f)</div></div>
<div class="ttc" id="classllvm_1_1InlineAsm_html"><div class="ttname"><a href="classllvm_1_1InlineAsm.html">llvm::InlineAsm</a></div><div class="ttdef"><b>Definition:</b> <a href="InlineAsm_8h_source.html#l00035">InlineAsm.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00070">Function.h:70</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html"><div class="ttname"><a href="classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00136">Instructions.h:136</a></div></div>
<div class="ttc" id="InstructionSimplify_8h_html"><div class="ttname"><a href="InstructionSimplify_8h.html">InstructionSimplify.h</a></div></div>
<div class="ttc" id="classllvm_1_1User_html"><div class="ttname"><a href="classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00033">User.h:33</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a33f9fa1a7cb21319a30836fce847c3c4"><div class="ttname"><a href="classllvm_1_1Type.html#a33f9fa1a7cb21319a30836fce847c3c4">llvm::Type::getPointerAddressSpace</a></div><div class="ttdeci">unsigned getPointerAddressSpace() const </div><div class="ttdoc">Get the address space of this pointer or pointer vector type. </div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00218">Type.cpp:218</a></div></div>
<div class="ttc" id="structllvm_1_1TargetLowering_1_1AsmOperandInfo_html_aeea750ec380d5c1514f57df90dbd6c3d"><div class="ttname"><a href="structllvm_1_1TargetLowering_1_1AsmOperandInfo.html#aeea750ec380d5c1514f57df90dbd6c3d">llvm::TargetLowering::AsmOperandInfo::CallOperandVal</a></div><div class="ttdeci">Value * CallOperandVal</div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l02180">TargetLowering.h:2180</a></div></div>
<div class="ttc" id="classllvm_1_1AttributeSet_html_a54abbe67d4a53c92652f1666dc19281f"><div class="ttname"><a href="classllvm_1_1AttributeSet.html#a54abbe67d4a53c92652f1666dc19281f">llvm::AttributeSet::hasAttribute</a></div><div class="ttdeci">bool hasAttribute(unsigned Index, Attribute::AttrKind Kind) const </div><div class="ttdoc">Return true if the attribute exists at the given index. </div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l00818">Attributes.cpp:818</a></div></div>
<div class="ttc" id="Statistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_a7df6ed7588301267782c2bd4b7f6899d"><div class="ttname"><a href="Target_2README_8txt.html#a7df6ed7588301267782c2bd4b7f6899d">for</a></div><div class="ttdeci">this could be done in SelectionDAGISel along with other special for</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00141">Target/README.txt:141</a></div></div>
<div class="ttc" id="structllvm_1_1EVT_html_a5ebe5227fe53e0dcf4102a6ebf1594a2"><div class="ttname"><a href="structllvm_1_1EVT.html#a5ebe5227fe53e0dcf4102a6ebf1594a2">llvm::EVT::bitsLT</a></div><div class="ttdeci">bool bitsLT(EVT VT) const </div><div class="ttdoc">bitsLT - Return true if this has less bits than VT. </div><div class="ttdef"><b>Definition:</b> <a href="ValueTypes_8h_source.html#l00735">ValueTypes.h:735</a></div></div>
<div class="ttc" id="namespacellvm_1_1ARM__PROC_html_a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e"><div class="ttname"><a href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">llvm::ARM_PROC::IE</a></div><div class="ttdef"><b>Definition:</b> <a href="ARMBaseInfo_8h_source.html#l00091">ARMBaseInfo.h:91</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00109">CommandLine.h:109</a></div></div>
<div class="ttc" id="CodeGenPrepare_8cpp_html_a9f3b1621e479023525ae3f15b83651f6"><div class="ttname"><a href="CodeGenPrepare_8cpp.html#a9f3b1621e479023525ae3f15b83651f6">INITIALIZE_PASS_BEGIN</a></div><div class="ttdeci">INITIALIZE_PASS_BEGIN(CodeGenPrepare,&quot;codegenprepare&quot;,&quot;Optimize for code generation&quot;, false, false) INITIALIZE_PASS_END(CodeGenPrepare</div></div>
<div class="ttc" id="classllvm_1_1Type_html_a5c09d927a0079ad16e8367271efe9bc2"><div class="ttname"><a href="classllvm_1_1Type.html#a5c09d927a0079ad16e8367271efe9bc2">llvm::Type::getPointerElementType</a></div><div class="ttdeci">Type * getPointerElementType() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00373">Type.h:373</a></div></div>
<div class="ttc" id="classllvm_1_1TargetLoweringBase_html_a9a29cc66e132c19330ddabb82d44bef7"><div class="ttname"><a href="classllvm_1_1TargetLoweringBase.html#a9a29cc66e132c19330ddabb82d44bef7">llvm::TargetLoweringBase::getValueType</a></div><div class="ttdeci">EVT getValueType(Type *Ty, bool AllowUnknown=false) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00582">TargetLowering.h:582</a></div></div>
<div class="ttc" id="CallSite_8h_html"><div class="ttname"><a href="CallSite_8h.html">CallSite.h</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_aa6574d526b3e38a28f688a7bb4325c2c"><div class="ttname"><a href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">llvm::Constant::getNullValue</a></div><div class="ttdeci">static Constant * getNullValue(Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00111">Constants.cpp:111</a></div></div>
<div class="ttc" id="classllvm_1_1generic__gep__type__iterator_html"><div class="ttname"><a href="classllvm_1_1generic__gep__type__iterator.html">llvm::generic_gep_type_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="GetElementPtrTypeIterator_8h_source.html#l00023">GetElementPtrTypeIterator.h:23</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00193">BasicBlock.h:193</a></div></div>
<div class="ttc" id="classllvm_1_1iplist_html_ad5f5ac50ca28fc89c173eb3d64344afc"><div class="ttname"><a href="classllvm_1_1iplist.html#ad5f5ac50ca28fc89c173eb3d64344afc">llvm::iplist::rbegin</a></div><div class="ttdeci">reverse_iterator rbegin()</div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00377">ilist.h:377</a></div></div>
<div class="ttc" id="namespacellvm_html_ae712552495c21ee77ad82ced255ad6df"><div class="ttname"><a href="namespacellvm.html#ae712552495c21ee77ad82ced255ad6df">llvm::WriteAsOperand</a></div><div class="ttdeci">void WriteAsOperand(raw_ostream &amp;, const Value *, bool PrintTy=true, const Module *Context=0)</div><div class="ttdef"><b>Definition:</b> <a href="AsmWriter_8cpp_source.html#l01179">AsmWriter.cpp:1179</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a25d956d9e0beadd47ce4bc255dfa811d"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">llvm::PatternMatch::match</a></div><div class="ttdeci">bool match(Val *V, const Pattern &amp;P)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00042">PatternMatch.h:42</a></div></div>
<div class="ttc" id="InlineAsm_8h_html"><div class="ttname"><a href="InlineAsm_8h.html">InlineAsm.h</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_ae5c60fd282ee894c87ea02c3f0fcb6d0"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">llvm::AnalysisUsage::addRequired</a></div><div class="ttdeci">AnalysisUsage &amp; addRequired()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00055">PassAnalysisSupport.h:55</a></div></div>
<div class="ttc" id="classllvm_1_1StructLayout_html"><div class="ttname"><a href="classllvm_1_1StructLayout.html">llvm::StructLayout</a></div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00418">DataLayout.h:418</a></div></div>
<div class="ttc" id="PassSupport_8h_html_a14724f1ccf528e73bb29bc9230737967"><div class="ttname"><a href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a></div><div class="ttdeci">#define INITIALIZE_PASS_DEPENDENCY(depName)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00167">PassSupport.h:167</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a382131e712e55e8324fbd5068de17b78"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a382131e712e55e8324fbd5068de17b78">llvm::BranchInst::isUnconditional</a></div><div class="ttdeci">bool isUnconditional() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02391">Instructions.h:2391</a></div></div>
<div class="ttc" id="namespacellvm_html_ad1843182b2dd138465209e5dfd66dcd2"><div class="ttname"><a href="namespacellvm.html#ad1843182b2dd138465209e5dfd66dcd2">llvm::createCodeGenPreparePass</a></div><div class="ttdeci">FunctionPass * createCodeGenPreparePass(const TargetMachine *TM=0)</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenPrepare_8cpp_source.html#l00140">CodeGenPrepare.cpp:140</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a6f01dbe965b38186b1a78378689d4105"><div class="ttname"><a href="classllvm_1_1PHINode.html#a6f01dbe965b38186b1a78378689d4105">llvm::PHINode::removeIncomingValue</a></div><div class="ttdeci">Value * removeIncomingValue(unsigned Idx, bool DeletePHIIfEmpty=true)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l00114">Instructions.cpp:114</a></div></div>
<div class="ttc" id="classllvm_1_1AttributeSet_html"><div class="ttname"><a href="classllvm_1_1AttributeSet.html">llvm::AttributeSet</a></div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00202">Attributes.h:202</a></div></div>
<div class="ttc" id="classllvm_1_1value__use__iterator_html"><div class="ttname"><a href="classllvm_1_1value__use__iterator.html">llvm::value_use_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00168">Use.h:168</a></div></div>
<div class="ttc" id="ValueTracking_8cpp_html_a06c14477546c3a0eb4c79ff007ea2375"><div class="ttname"><a href="ValueTracking_8cpp.html#a06c14477546c3a0eb4c79ff007ea2375">getBitWidth</a></div><div class="ttdeci">static unsigned getBitWidth(Type *Ty, const DataLayout *TD)</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l00040">ValueTracking.cpp:40</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html"><div class="ttname"><a href="classllvm_1_1SelectInst.html">llvm::SelectInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01430">Instructions.h:1430</a></div></div>
<div class="ttc" id="classllvm_1_1ReturnInst_html_a7f6ab6ba1947d832a651e3589614a10d"><div class="ttname"><a href="classllvm_1_1ReturnInst.html#a7f6ab6ba1947d832a651e3589614a10d">llvm::ReturnInst::getReturnValue</a></div><div class="ttdeci">Value * getReturnValue() const </div><div class="ttdoc">Convenience accessor. Returns null if there is no return value. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02318">Instructions.h:2318</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a35c840104f32575e0d91422cf1ef3ce4"><div class="ttname"><a href="classllvm_1_1DataLayout.html#a35c840104f32575e0d91422cf1ef3ce4">llvm::DataLayout::getStructLayout</a></div><div class="ttdeci">const StructLayout * getStructLayout(StructType *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8cpp_source.html#l00445">DataLayout.cpp:445</a></div></div>
<div class="ttc" id="classllvm_1_1CastInst_html"><div class="ttname"><a href="classllvm_1_1CastInst.html">llvm::CastInst</a></div><div class="ttdoc">Base class of casting instructions. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00387">InstrTypes.h:387</a></div></div>
<div class="ttc" id="classllvm_1_1TargetLoweringBase_html_a575e134a5e8414029a5c4a284858e6cda57d13a184979a5a9b7110c20e9d6f55d"><div class="ttname"><a href="classllvm_1_1TargetLoweringBase.html#a575e134a5e8414029a5c4a284858e6cda57d13a184979a5a9b7110c20e9d6f55d">llvm::TargetLoweringBase::VectorMaskSelect</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00116">TargetLowering.h:116</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a400eaca9881c8dcab97e9f42b1ab1815"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">llvm::SmallVectorImpl::pop_back_val</a></div><div class="ttdeci">T LLVM_ATTRIBUTE_UNUSED_RESULT pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00430">SmallVector.h:430</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html"><div class="ttname"><a href="classllvm_1_1StructType.html">llvm::StructType</a></div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00187">DerivedTypes.h:187</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a11d3f8bbc5a14f60879a87175db6695c"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a11d3f8bbc5a14f60879a87175db6695c">llvm::IRBuilder::CreateIntToPtr</a></div><div class="ttdeci">Value * CreateIntToPtr(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01128">IRBuilder.h:1128</a></div></div>
<div class="ttc" id="classllvm_1_1Use_html"><div class="ttname"><a href="classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00060">Use.h:60</a></div></div>
<div class="ttc" id="structllvm_1_1TargetLowering_1_1AsmOperandInfo_html_ab6af857f66a2fc271535a12203d7dad6"><div class="ttname"><a href="structllvm_1_1TargetLowering_1_1AsmOperandInfo.html#ab6af857f66a2fc271535a12203d7dad6">llvm::TargetLowering::AsmOperandInfo::ConstraintType</a></div><div class="ttdeci">TargetLowering::ConstraintType ConstraintType</div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l02175">TargetLowering.h:2175</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00035">APInt.h:35</a></div></div>
<div class="ttc" id="PassSupport_8h_html_a74ce8276b89067e806f67c45a6d92575"><div class="ttname"><a href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a></div><div class="ttdeci">#define INITIALIZE_PASS_END(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00172">PassSupport.h:172</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html"><div class="ttname"><a href="classllvm_1_1IRBuilder.html">llvm::IRBuilder</a></div><div class="ttdoc">This provides a uniform API for creating instructions and inserting them into a basic block: either a...</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00421">IRBuilder.h:421</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_ae9cbc599309fd2da33ec1c61df01ce1f"><div class="ttname"><a href="classllvm_1_1BranchInst.html#ae9cbc599309fd2da33ec1c61df01ce1f">llvm::BranchInst::Create</a></div><div class="ttdeci">static BranchInst * Create(BasicBlock *IfTrue, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02373">Instructions.h:2373</a></div></div>
<div class="ttc" id="CodeGenPrepare_8cpp_html_ae51b73b67e301b063abfdd618fc6537e"><div class="ttname"><a href="CodeGenPrepare_8cpp.html#ae51b73b67e301b063abfdd618fc6537e">DisableBranchOpts</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; DisableBranchOpts(&quot;disable-cgp-branch-opts&quot;, cl::Hidden, cl::init(false), cl::desc(&quot;Disable branch optimizations in CodeGenPrepare&quot;))</div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a12fd03c41b1697fca070c12317794400"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a12fd03c41b1697fca070c12317794400">llvm::BasicBlock::hasAddressTaken</a></div><div class="ttdeci">bool hasAddressTaken() const </div><div class="ttdoc">Returns true if there are any uses of this basic block other than direct branches, switches, etc. to it. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00268">BasicBlock.h:268</a></div></div>
<div class="ttc" id="ValueMap_8h_html"><div class="ttname"><a href="ValueMap_8h.html">ValueMap.h</a></div></div>
<div class="ttc" id="namespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00126">StackSlotColoring.cpp:126</a></div></div>
<div class="ttc" id="namespacellvm_1_1CallingConv_html_a4f861731fc6dbfdccc05af5968d98974"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">llvm::CallingConv::ID</a></div><div class="ttdeci">ID</div><div class="ttdoc">LLVM Calling Convention Representation. </div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00026">CallingConv.h:26</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00031">Instruction.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1TargetLowering_html"><div class="ttname"><a href="classllvm_1_1TargetLowering.html">llvm::TargetLowering</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l01695">TargetLowering.h:1695</a></div></div>
<div class="ttc" id="TargetLibraryInfo_8h_html"><div class="ttname"><a href="TargetLibraryInfo_8h.html">TargetLibraryInfo.h</a></div></div>
<div class="ttc" id="structllvm_1_1EVT_html_a8cc407ac00df4edd4ec4d5168d6ecb26"><div class="ttname"><a href="structllvm_1_1EVT.html#a8cc407ac00df4edd4ec4d5168d6ecb26">llvm::EVT::isInteger</a></div><div class="ttdeci">bool isInteger() const </div><div class="ttdoc">isInteger - Return true if this is an integer, or a vector integer type. </div><div class="ttdef"><b>Definition:</b> <a href="ValueTypes_8h_source.html#l00656">ValueTypes.h:656</a></div></div>
<div class="ttc" id="namespacellvm_html_a75689d3e1098e4a4e5f915c89c6db541"><div class="ttname"><a href="namespacellvm.html#a75689d3e1098e4a4e5f915c89c6db541">llvm::replaceAndRecursivelySimplify</a></div><div class="ttdeci">bool replaceAndRecursivelySimplify(Instruction *I, Value *SimpleV, const DataLayout *TD=0, const TargetLibraryInfo *TLI=0, const DominatorTree *DT=0)</div><div class="ttdoc">Replace all uses of &amp;#39;I&amp;#39; with &amp;#39;SimpleV&amp;#39; and simplify the uses recursively. </div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l03232">InstructionSimplify.cpp:3232</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a944c25ac9b73b02a17a20a08a25b9b21"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">llvm::PatternMatch::m_Add</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Add &gt; m_Add(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00395">PatternMatch.h:395</a></div></div>
<div class="ttc" id="Dominators_8h_html"><div class="ttname"><a href="Dominators_8h.html">Dominators.h</a></div></div>
<div class="ttc" id="namespacellvm_html_a3720211f6e6389ab53734b989bfb6fce"><div class="ttname"><a href="namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">llvm::succ_begin</a></div><div class="ttdeci">Interval::succ_iterator succ_begin(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00107">Interval.h:107</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html">llvm::ConstantExpr</a></div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00790">Constants.h:790</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html_a2ced6343b8ad006a757059554bbf9f37"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html#a2ced6343b8ad006a757059554bbf9f37">llvm::SmallPtrSet::count</a></div><div class="ttdeci">bool count(PtrType Ptr) const </div><div class="ttdoc">count - Return true if the specified pointer is in the set. </div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00264">SmallPtrSet.h:264</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorBase_html_a8a8df4d85555c7954a95f86080cd3b64"><div class="ttname"><a href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">llvm::SmallVectorBase::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const </div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00056">SmallVector.h:56</a></div></div>
<div class="ttc" id="classllvm_1_1WeakVH_html"><div class="ttname"><a href="classllvm_1_1WeakVH.html">llvm::WeakVH</a></div><div class="ttdef"><b>Definition:</b> <a href="ValueHandle_8h_source.html#l00145">ValueHandle.h:145</a></div></div>
<div class="ttc" id="structllvm_1_1TargetLowering_1_1AsmOperandInfo_html"><div class="ttname"><a href="structllvm_1_1TargetLowering_1_1AsmOperandInfo.html">llvm::TargetLowering::AsmOperandInfo</a></div><div class="ttdoc">This contains information for each constraint that we are lowering. </div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l02167">TargetLowering.h:2167</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a74e70ecbb79defbbfa6f6c87f76155bf"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">llvm::BranchInst::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02406">Instructions.h:2406</a></div></div>
<div class="ttc" id="classllvm_1_1BitCastInst_html"><div class="ttname"><a href="classllvm_1_1BitCastInst.html">llvm::BitCastInst</a></div><div class="ttdoc">This class represents a no-op cast from one type to another. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03587">Instructions.h:3587</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a34a92072122412c6020d4afb43725bf4"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a34a92072122412c6020d4afb43725bf4">llvm::PatternMatch::m_ConstantInt</a></div><div class="ttdeci">class_match&lt; ConstantInt &gt; m_ConstantInt()</div><div class="ttdoc">m_ConstantInt() - Match an arbitrary ConstantInt and ignore it. </div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00072">PatternMatch.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html"><div class="ttname"><a href="classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00255">Instructions.h:255</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00303">Value.cpp:303</a></div></div>
<div class="ttc" id="structllvm_1_1InlineAsm_1_1ConstraintInfo_html_a3400e49d5c9d94f96aa1117ecd0b799d"><div class="ttname"><a href="structllvm_1_1InlineAsm_1_1ConstraintInfo.html#a3400e49d5c9d94f96aa1117ecd0b799d">llvm::InlineAsm::ConstraintInfo::Type</a></div><div class="ttdeci">ConstraintPrefix Type</div><div class="ttdef"><b>Definition:</b> <a href="InlineAsm_8h_source.html#l00124">InlineAsm.h:124</a></div></div>
<div class="ttc" id="CodeGenPrepare_8cpp_html_a109eb00135035c7badb12cece015c58d"><div class="ttname"><a href="CodeGenPrepare_8cpp.html#a109eb00135035c7badb12cece015c58d">generation</a></div><div class="ttdeci">Optimize for code generation</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenPrepare_8cpp_source.html#l00137">CodeGenPrepare.cpp:137</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ae855357b6c5e6e7ed1869272708a3a84"><div class="ttname"><a href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">llvm::Value::takeName</a></div><div class="ttdeci">void takeName(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00239">Value.cpp:239</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a88a5e60837674780a9d812d661897ac5"><div class="ttname"><a href="classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">llvm::Function::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00395">Function.h:395</a></div></div>
<div class="ttc" id="classllvm_1_1DominatorTree_html"><div class="ttname"><a href="classllvm_1_1DominatorTree.html">llvm::DominatorTree</a></div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00740">Dominators.h:740</a></div></div>
<div class="ttc" id="classllvm_1_1TruncInst_html"><div class="ttname"><a href="classllvm_1_1TruncInst.html">llvm::TruncInst</a></div><div class="ttdoc">This class represents a truncation of integer types. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03175">Instructions.h:3175</a></div></div>
<div class="ttc" id="classllvm_1_1Attribute_html_aab7ee4b8fd1d3e7e4cea87868855e60ea785b9cc2e0b37298b4bef4b68cb50b75"><div class="ttname"><a href="classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60ea785b9cc2e0b37298b4bef4b68cb50b75">llvm::Attribute::NoAlias</a></div><div class="ttdoc">Considered to not alias after call. </div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00080">Attributes.h:80</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_aa45f6c0433576e3858a6209a43750ad4"><div class="ttname"><a href="classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">llvm::PHINode::getNumIncomingValues</a></div><div class="ttdeci">unsigned getNumIncomingValues() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02055">Instructions.h:2055</a></div></div>
<div class="ttc" id="namespacellvm_html_a069c4ae2290101bde0f8d6a5074dc72b"><div class="ttname"><a href="namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">llvm::succ_end</a></div><div class="ttdeci">Interval::succ_iterator succ_end(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00110">Interval.h:110</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a1f0b9358936e3e00c42a460abbfb2868"><div class="ttname"><a href="classllvm_1_1User.html#a1f0b9358936e3e00c42a460abbfb2868">llvm::User::replaceUsesOfWith</a></div><div class="ttdeci">void replaceUsesOfWith(Value *From, Value *To)</div><div class="ttdef"><b>Definition:</b> <a href="User_8cpp_source.html#l00026">User.cpp:26</a></div></div>
<div class="ttc" id="BypassSlowDivision_8h_html"><div class="ttname"><a href="BypassSlowDivision_8h.html">BypassSlowDivision.h</a></div></div>
<div class="ttc" id="classllvm_1_1StructLayout_html_ae10c4483372a357a0d3411b3d64be10c"><div class="ttname"><a href="classllvm_1_1StructLayout.html#ae10c4483372a357a0d3411b3d64be10c">llvm::StructLayout::getElementOffset</a></div><div class="ttdeci">uint64_t getElementOffset(unsigned Idx) const </div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00442">DataLayout.h:442</a></div></div>
<div class="ttc" id="classllvm_1_1CastInst_html_a0f7dea9550778374905e12da6d6ba8a8"><div class="ttname"><a href="classllvm_1_1CastInst.html#a0f7dea9550778374905e12da6d6ba8a8">llvm::CastInst::Create</a></div><div class="ttdeci">static CastInst * Create(Instruction::CastOps, Value *S, Type *Ty, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdoc">Construct any of the CastInst subclasses. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l02350">Instructions.cpp:2350</a></div></div>
<div class="ttc" id="classllvm_1_1GetElementPtrInst_html"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html">llvm::GetElementPtrInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00709">Instructions.h:709</a></div></div>
<div class="ttc" id="CommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00314">CommandLine.h:314</a></div></div>
<div class="ttc" id="namespacellvm_html_a03503773241005f01b090b9862aad304"><div class="ttname"><a href="namespacellvm.html#a03503773241005f01b090b9862aad304">llvm::dump</a></div><div class="ttdeci">void dump(const SparseBitVector&lt; ElementSize &gt; &amp;LHS, raw_ostream &amp;out)</div><div class="ttdef"><b>Definition:</b> <a href="SparseBitVector_8h_source.html#l00882">SparseBitVector.h:882</a></div></div>
<div class="ttc" id="BuildLibCalls_8h_html"><div class="ttname"><a href="BuildLibCalls_8h.html">BuildLibCalls.h</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a482498a1c760122fd33c7fc8190dd277"><div class="ttname"><a href="classllvm_1_1Instruction.html#a482498a1c760122fd33c7fc8190dd277">llvm::Instruction::insertBefore</a></div><div class="ttdeci">void insertBefore(Instruction *InsertPos)</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00078">Instruction.cpp:78</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_acd9e771a3296c6b24146955754620557"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#acd9e771a3296c6b24146955754620557">llvm::SmallVectorTemplateCommon&lt; T &gt;::back</a></div><div class="ttdeci">reference back()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00157">SmallVector.h:157</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00396">SmallVector.h:396</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00044">Type.h:44</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html"><div class="ttname"><a href="classllvm_1_1BranchInst.html">llvm::BranchInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02350">Instructions.h:2350</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a6f725580f7834e2ca90762965866dad4"><div class="ttname"><a href="classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">llvm::Type::isVectorTy</a></div><div class="ttdeci">bool isVectorTy() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00229">Type.h:229</a></div></div>
<div class="ttc" id="structllvm_1_1InlineAsm_1_1ConstraintInfo_html_acbf697bfd59727faf13eeb80fdf90d79"><div class="ttname"><a href="structllvm_1_1InlineAsm_1_1ConstraintInfo.html#acbf697bfd59727faf13eeb80fdf90d79">llvm::InlineAsm::ConstraintInfo::isIndirect</a></div><div class="ttdeci">bool isIndirect</div><div class="ttdef"><b>Definition:</b> <a href="InlineAsm_8h_source.html#l00148">InlineAsm.h:148</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a112f87f5844b5d94c07940f3d47f1e99"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a112f87f5844b5d94c07940f3d47f1e99">llvm::IRBuilder::CreateAdd</a></div><div class="ttdeci">Value * CreateAdd(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00615">IRBuilder.h:615</a></div></div>
<div class="ttc" id="classllvm_1_1AttrBuilder_html"><div class="ttname"><a href="classllvm_1_1AttrBuilder.html">llvm::AttrBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00390">Attributes.h:390</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a9299aed1efa0ef459a0f1c7fa11fbe61"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a9299aed1efa0ef459a0f1c7fa11fbe61">llvm::IRBuilder::CreatePtrToInt</a></div><div class="ttdeci">Value * CreatePtrToInt(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01124">IRBuilder.h:1124</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html_ad285a69e32ddeee367fed93b5f392801"><div class="ttname"><a href="classllvm_1_1SelectInst.html#ad285a69e32ddeee367fed93b5f392801">llvm::SelectInst::getCondition</a></div><div class="ttdeci">const Value * getCondition() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01466">Instructions.h:1466</a></div></div>
<div class="ttc" id="Constants_8h_html"><div class="ttname"><a href="Constants_8h.html">Constants.h</a></div></div>
<div class="ttc" id="structllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00286">CommandLine.h:286</a></div></div>
<div class="ttc" id="namespacellvm_html_a7e108932dc3da5294aed99a353aac9c4"><div class="ttname"><a href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">llvm::pred_begin</a></div><div class="ttdeci">Interval::pred_iterator pred_begin(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00117">Interval.h:117</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00037">PassAnalysisSupport.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_afb5e83bf5123ff7c51058eb0ebebcdc6"><div class="ttname"><a href="classllvm_1_1PHINode.html#afb5e83bf5123ff7c51058eb0ebebcdc6">llvm::PHINode::Create</a></div><div class="ttdeci">static PHINode * Create(Type *Ty, unsigned NumReservedValues, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02013">Instructions.h:2013</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a4c25b6c00c4867281779c81ab64d2081"><div class="ttname"><a href="classllvm_1_1PHINode.html#a4c25b6c00c4867281779c81ab64d2081">llvm::PHINode::getIncomingBlock</a></div><div class="ttdeci">BasicBlock * getIncomingBlock(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02074">Instructions.h:2074</a></div></div>
<div class="ttc" id="CodeGenPrepare_8cpp_html_a5879e98ff962702779287b966f4dce4b"><div class="ttname"><a href="CodeGenPrepare_8cpp.html#a5879e98ff962702779287b966f4dce4b">OptimizeNoopCopyExpression</a></div><div class="ttdeci">static bool OptimizeNoopCopyExpression(CastInst *CI, const TargetLowering &amp;TLI)</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenPrepare_8cpp_source.html#l00454">CodeGenPrepare.cpp:454</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_ad4d48171b87ca51ff54c10a436bac4d7a6c61b6125c7901c549f90ee0e443a770"><div class="ttname"><a href="namespacellvm_1_1ISD.html#ad4d48171b87ca51ff54c10a436bac4d7a6c61b6125c7901c549f90ee0e443a770">llvm::ISD::SEXTLOAD</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00700">ISDOpcodes.h:700</a></div></div>
<div class="ttc" id="classllvm_1_1FunctionPass_html"><div class="ttname"><a href="classllvm_1_1FunctionPass.html">llvm::FunctionPass</a></div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00293">Pass.h:293</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00088">User.h:88</a></div></div>
<div class="ttc" id="classllvm_1_1Attribute_html_aab7ee4b8fd1d3e7e4cea87868855e60eabff1744e650ee242de2e5f05c25df983"><div class="ttname"><a href="classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60eabff1744e650ee242de2e5f05c25df983">llvm::Attribute::ZExt</a></div><div class="ttdoc">Zero extended before/after call. </div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00110">Attributes.h:110</a></div></div>
<div class="ttc" id="namespacellvm_html_a5eeaf08e96168c2cac8960f87f0ef360"><div class="ttname"><a href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">llvm::pred_end</a></div><div class="ttdeci">Interval::pred_iterator pred_end(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00120">Interval.h:120</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a8afd4995fae596b2c86eeed85b3d388b"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">llvm::CmpInst::getPredicate</a></div><div class="ttdeci">Predicate getPredicate() const </div><div class="ttdoc">Return the predicate for this instruction. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00714">InstrTypes.h:714</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSetImpl_html_a095445850ef2c64e96b4c05120cecf66"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a095445850ef2c64e96b4c05120cecf66">llvm::SmallPtrSetImpl::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const </div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00074">SmallPtrSet.h:74</a></div></div>
<div class="ttc" id="Writer_8h_html"><div class="ttname"><a href="Writer_8h.html">Writer.h</a></div></div>
<div class="ttc" id="DenseMap_8h_html"><div class="ttname"><a href="DenseMap_8h.html">DenseMap.h</a></div></div>
<div class="ttc" id="structllvm_1_1EVT_html"><div class="ttname"><a href="structllvm_1_1EVT.html">llvm::EVT</a></div><div class="ttdef"><b>Definition:</b> <a href="ValueTypes_8h_source.html#l00576">ValueTypes.h:576</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a2eba483f5cc876e824aa6c085736086b"><div class="ttname"><a href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">llvm::Type::isPointerTy</a></div><div class="ttdeci">bool isPointerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00220">Type.h:220</a></div></div>
<div class="ttc" id="namespacellvm_html_a50f8f41fccbea466816345520e9bfabb"><div class="ttname"><a href="namespacellvm.html#a50f8f41fccbea466816345520e9bfabb">llvm::SimplifyInstruction</a></div><div class="ttdeci">Value * SimplifyInstruction(Instruction *I, const DataLayout *TD=0, const TargetLibraryInfo *TLI=0, const DominatorTree *DT=0)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l03036">InstructionSimplify.cpp:3036</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_af85a4828b6b5a8de7fc0a55cc0e5b52f"><div class="ttname"><a href="classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">All values hold a context through their type. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00517">Value.cpp:517</a></div></div>
<div class="ttc" id="classT_html"><div class="ttname"><a href="classT.html">T</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ae653031669d53ef43398e34c620131a5"><div class="ttname"><a href="classllvm_1_1Value.html#ae653031669d53ef43398e34c620131a5">llvm::Value::isUsedInBasicBlock</a></div><div class="ttdeci">bool isUsedInBasicBlock(const BasicBlock *BB) const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00114">Value.cpp:114</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html_a67bf091383cd61e1225445e78b61d9f9"><div class="ttname"><a href="classllvm_1_1SelectInst.html#a67bf091383cd61e1225445e78b61d9f9">llvm::SelectInst::getTrueValue</a></div><div class="ttdeci">const Value * getTrueValue() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01467">Instructions.h:1467</a></div></div>
<div class="ttc" id="classllvm_1_1iplist_html"><div class="ttname"><a href="classllvm_1_1iplist.html">llvm::iplist&lt; Instruction &gt;</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html">llvm::PatternMatch</a></div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00039">PatternMatch.h:39</a></div></div>
<div class="ttc" id="CodeGenPrepare_8cpp_html_aa7cb7b30ab9793838d6ad4e23f67673d"><div class="ttname"><a href="CodeGenPrepare_8cpp.html#aa7cb7b30ab9793838d6ad4e23f67673d">OptimizeCmpExpression</a></div><div class="ttdeci">static bool OptimizeCmpExpression(CmpInst *CI)</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenPrepare_8cpp_source.html#l00536">CodeGenPrepare.cpp:536</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a237e6bf58bc993ea494bdde7480ca428"><div class="ttname"><a href="classllvm_1_1Instruction.html#a237e6bf58bc993ea494bdde7480ca428">llvm::Instruction::isTerminator</a></div><div class="ttdeci">bool isTerminator() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00086">Instruction.h:86</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a03cc0dff22b31447f43af97acb76b1a2"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a03cc0dff22b31447f43af97acb76b1a2">llvm::BranchInst::isConditional</a></div><div class="ttdeci">bool isConditional() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02392">Instructions.h:2392</a></div></div>
<div class="ttc" id="classllvm_1_1TargetLowering_html_a08a19e975c43ee759d51b879a0f2c75c"><div class="ttname"><a href="classllvm_1_1TargetLowering.html#a08a19e975c43ee759d51b879a0f2c75c">llvm::TargetLowering::AsmOperandInfoVector</a></div><div class="ttdeci">std::vector&lt; AsmOperandInfo &gt; AsmOperandInfoVector</div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l02210">TargetLowering.h:2210</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html"><div class="ttname"><a href="classllvm_1_1GlobalValue.html">llvm::GlobalValue</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00029">GlobalValue.h:29</a></div></div>
<div class="ttc" id="namespacellvm_html_a8f1d94877a9c9ea068af41c5315f5117"><div class="ttname"><a href="namespacellvm.html#a8f1d94877a9c9ea068af41c5315f5117">llvm::initializeCodeGenPreparePass</a></div><div class="ttdeci">void initializeCodeGenPreparePass(PassRegistry &amp;)</div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="CodeGenPrepare_8cpp_html_ad897d4beb50aa8f0d4d2eaa08ac0987d"><div class="ttname"><a href="CodeGenPrepare_8cpp.html#ad897d4beb50aa8f0d4d2eaa08ac0987d">IsNonLocalValue</a></div><div class="ttdeci">static bool IsNonLocalValue(Value *V, BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenPrepare_8cpp_source.html#l01442">CodeGenPrepare.cpp:1442</a></div></div>
<div class="ttc" id="classllvm_1_1ValueMap_html"><div class="ttname"><a href="classllvm_1_1ValueMap.html">llvm::ValueMap</a></div><div class="ttdoc">See the file comment. </div><div class="ttdef"><b>Definition:</b> <a href="ValueMap_8h_source.html#l00075">ValueMap.h:75</a></div></div>
<div class="ttc" id="namespacellvm_1_1ISD_html_ad4d48171b87ca51ff54c10a436bac4d7a8d89c7da4444d9ec11667aa369abc5f7"><div class="ttname"><a href="namespacellvm_1_1ISD.html#ad4d48171b87ca51ff54c10a436bac4d7a8d89c7da4444d9ec11667aa369abc5f7">llvm::ISD::ZEXTLOAD</a></div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00701">ISDOpcodes.h:701</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00236">SmallPtrSet.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html_a2ce650c1d4a48661b501206d04b6ab04"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html#a2ce650c1d4a48661b501206d04b6ab04">llvm::SmallPtrSet::erase</a></div><div class="ttdeci">bool erase(PtrType Ptr)</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00259">SmallPtrSet.h:259</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_aba6a4cc4ed6d6fef3664b8d65ef04820"><div class="ttname"><a href="classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">llvm::PHINode::getIncomingValue</a></div><div class="ttdeci">Value * getIncomingValue(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02059">Instructions.h:2059</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a1d6fcc02e91ba24510aba42660c90e29"><div class="ttname"><a href="classllvm_1_1DataLayout.html#a1d6fcc02e91ba24510aba42660c90e29">llvm::DataLayout::getTypeAllocSize</a></div><div class="ttdeci">uint64_t getTypeAllocSize(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00326">DataLayout.h:326</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0b4e7bee9b8575cc7db73329f1a561bd"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">llvm::BasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00195">BasicBlock.h:195</a></div></div>
<div class="ttc" id="README-Thumb_8txt_html_a5d98a8b5139e56ebf0d2ff4cbaa0dc5e"><div class="ttname"><a href="README-Thumb_8txt.html#a5d98a8b5139e56ebf0d2ff4cbaa0dc5e">code</a></div><div class="ttdeci">*Add support for compiling functions in both ARM and Thumb then taking the smallest *Add support for compiling individual basic blocks in thumb when in a larger ARM function This can be used for presumed cold code</div><div class="ttdef"><b>Definition:</b> <a href="README-Thumb_8txt_source.html#l00005">README-Thumb.txt:5</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a87b363b9dad9f5040ea7e29ea9e60ff5"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a87b363b9dad9f5040ea7e29ea9e60ff5">llvm::IRBuilder::CreateBitCast</a></div><div class="ttdeci">Value * CreateBitCast(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01132">IRBuilder.h:1132</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00880">SmallVector.h:880</a></div></div>
<div class="ttc" id="classllvm_1_1SimplifyFortifiedLibCalls_html"><div class="ttname"><a href="classllvm_1_1SimplifyFortifiedLibCalls.html">llvm::SimplifyFortifiedLibCalls</a></div><div class="ttdef"><b>Definition:</b> <a href="BuildLibCalls_8h_source.html#l00113">BuildLibCalls.h:113</a></div></div>
<div class="ttc" id="classllvm_1_1Attribute_html_aab7ee4b8fd1d3e7e4cea87868855e60ea2ac83e0612ce8f8d69651cd529061feb"><div class="ttname"><a href="classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60ea2ac83e0612ce8f8d69651cd529061feb">llvm::Attribute::OptimizeForSize</a></div><div class="ttdoc">opt_size </div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00091">Attributes.h:91</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00111">Value.h:111</a></div></div>
<div class="ttc" id="classllvm_1_1TargetLibraryInfo_html"><div class="ttname"><a href="classllvm_1_1TargetLibraryInfo.html">llvm::TargetLibraryInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00657">TargetLibraryInfo.h:657</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_ace1ad5ed624dd5df8efb4eb611cb71ff"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ace1ad5ed624dd5df8efb4eb611cb71ff">llvm::BasicBlock::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdoc">Unlink &amp;#39;this&amp;#39; from the containing function and delete it. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00100">BasicBlock.cpp:100</a></div></div>
<div class="ttc" id="CodeGenPrepare_8cpp_html_a18ea06b4e195aedc9dbd091d60d74365"><div class="ttname"><a href="CodeGenPrepare_8cpp.html#a18ea06b4e195aedc9dbd091d60d74365">DisableSelectToBranch</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; DisableSelectToBranch(&quot;disable-cgp-select2branch&quot;, cl::Hidden, cl::init(false), cl::desc(&quot;Disable select to branch conversion.&quot;))</div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a94c18bf85a5105e0a22fba23b0bedafa"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a94c18bf85a5105e0a22fba23b0bedafa">llvm::IRBuilder::CreateMul</a></div><div class="ttdeci">Value * CreateMul(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00659">IRBuilder.h:659</a></div></div>
<div class="ttc" id="classllvm_1_1iplist_html_ab1b660345b57db3d80ad42123d6163ce"><div class="ttname"><a href="classllvm_1_1iplist.html#ab1b660345b57db3d80ad42123d6163ce">llvm::iplist&lt; Instruction &gt;::reverse_iterator</a></div><div class="ttdeci">std::reverse_iterator&lt; iterator &gt; reverse_iterator</div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00349">ilist.h:349</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a9105541412dab869e18b3cceebfff07d"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool isSigned=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00492">Constants.cpp:492</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html_a0bcd4131e1a1d92215f5385b4e16cd2e"><div class="ttname"><a href="classllvm_1_1CallInst.html#a0bcd4131e1a1d92215f5385b4e16cd2e">llvm::CallInst::getCalledFunction</a></div><div class="ttdeci">Function * getCalledFunction() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01357">Instructions.h:1357</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a30f2c362631e3728d2f47a8203071ade"><div class="ttname"><a href="classllvm_1_1Function.html#a30f2c362631e3728d2f47a8203071ade">llvm::Function::getEntryBlock</a></div><div class="ttdeci">const BasicBlock &amp; getEntryBlock() const </div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00380">Function.h:380</a></div></div>
<div class="ttc" id="regutils_8h_html_a1fa2460e32327ade49189c95740bc1b5"><div class="ttname"><a href="regutils_8h.html#a1fa2460e32327ade49189c95740bc1b5">NC</a></div><div class="ttdeci">#define NC</div><div class="ttdef"><b>Definition:</b> <a href="regutils_8h_source.html#l00039">regutils.h:39</a></div></div>
<div class="ttc" id="namespacellvm_html_a78ab69092404fc83d77ccb06b3f7138d"><div class="ttname"><a href="namespacellvm.html#a78ab69092404fc83d77ccb06b3f7138d">llvm::ConstantFoldTerminator</a></div><div class="ttdeci">bool ConstantFoldTerminator(BasicBlock *BB, bool DeleteDeadConditions=false, const TargetLibraryInfo *TLI=0)</div><div class="ttdef"><b>Definition:</b> <a href="Local_8cpp_source.html#l00059">Local.cpp:59</a></div></div>
<div class="ttc" id="classllvm_1_1TargetLoweringBase_html_a575e134a5e8414029a5c4a284858e6cda87a93c29e9b581a0845c5cd878a8d3b7"><div class="ttname"><a href="classllvm_1_1TargetLoweringBase.html#a575e134a5e8414029a5c4a284858e6cda87a93c29e9b581a0845c5cd878a8d3b7">llvm::TargetLoweringBase::ScalarValSelect</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00113">TargetLowering.h:113</a></div></div>
<div class="ttc" id="classllvm_1_1TargetLoweringBase_html_a88a8b01d4dbc2ebd81244d1eb459b193a26f35604723482a1aee6514940c2987d"><div class="ttname"><a href="classllvm_1_1TargetLoweringBase.html#a88a8b01d4dbc2ebd81244d1eb459b193a26f35604723482a1aee6514940c2987d">llvm::TargetLoweringBase::TypePromoteInteger</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00091">TargetLowering.h:91</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00101">Debug.cpp:101</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a72873ed64b7be01507a2248b8e756ec8"><div class="ttname"><a href="classllvm_1_1Function.html#a72873ed64b7be01507a2248b8e756ec8">llvm::Function::getAttributes</a></div><div class="ttdeci">AttributeSet getAttributes() const </div><div class="ttdoc">Return the attribute list for this Function. </div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00170">Function.h:170</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html_a150b33ecedbc8c7803c2db8040fbe3f8"><div class="ttname"><a href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">llvm::CallInst::getArgOperand</a></div><div class="ttdeci">Value * getArgOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01245">Instructions.h:1245</a></div></div>
<div class="ttc" id="CodeGenPrepare_8cpp_html_a3bdfef32b8f739f6dfb8ac8728d4fdd7"><div class="ttname"><a href="CodeGenPrepare_8cpp.html#a3bdfef32b8f739f6dfb8ac8728d4fdd7">STATISTIC</a></div><div class="ttdeci">STATISTIC(NumBlocksElim,&quot;Number of blocks eliminated&quot;)</div></div>
<div class="ttc" id="CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2README_8txt_source.html#l00036">CodeGen/README.txt:36</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a6e328feb83afa5cf1c966d6704e43fc1"><div class="ttname"><a href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">llvm::Type::isIntegerTy</a></div><div class="ttdeci">bool isIntegerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00196">Type.h:196</a></div></div>
<div class="ttc" id="Pass_8h_html"><div class="ttname"><a href="Pass_8h.html">Pass.h</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a5ef55181ae0bb0f5c561b9a29087b1e5"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a5ef55181ae0bb0f5c561b9a29087b1e5">llvm::BasicBlock::getSinglePredecessor</a></div><div class="ttdeci">BasicBlock * getSinglePredecessor()</div><div class="ttdoc">Return this block if it has a single predecessor block. Otherwise return a null pointer. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00183">BasicBlock.cpp:183</a></div></div>
<div class="ttc" id="namespacellvm_1_1ARMII_html_ace99f086a3cd38c7477a8f038dae7ff4"><div class="ttname"><a href="namespacellvm_1_1ARMII.html#ace99f086a3cd38c7477a8f038dae7ff4">llvm::ARMII::AddrMode</a></div><div class="ttdeci">AddrMode</div><div class="ttdoc">ARM Addressing Modes. </div><div class="ttdef"><b>Definition:</b> <a href="ARMBaseInfo_8h_source.html#l00234">ARMBaseInfo.h:234</a></div></div>
<div class="ttc" id="PatternMatch_8h_html"><div class="ttname"><a href="PatternMatch_8h.html">PatternMatch.h</a></div></div>
<div class="ttc" id="Function_8h_html"><div class="ttname"><a href="Function_8h.html">Function.h</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a0fd53f63d349dc8a7c5fc0cdd7a94c8d"><div class="ttname"><a href="classllvm_1_1Instruction.html#a0fd53f63d349dc8a7c5fc0cdd7a94c8d">llvm::Instruction::removeFromParent</a></div><div class="ttdeci">void removeFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00068">Instruction.cpp:68</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a8a045d250952c0867382a9840ee18fdf"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">llvm::SmallVectorTemplateCommon&lt; T &gt;::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00112">SmallVector.h:112</a></div></div>
<div class="ttc" id="ValueHandle_8h_html"><div class="ttname"><a href="ValueHandle_8h.html">ValueHandle.h</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a413abcab8dbc3900fc2fde96a5d8fca6"><div class="ttname"><a href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">llvm::Value::use_begin</a></div><div class="ttdeci">use_iterator use_begin()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00150">Value.h:150</a></div></div>
<div class="ttc" id="GetElementPtrTypeIterator_8h_html"><div class="ttname"><a href="GetElementPtrTypeIterator_8h.html">GetElementPtrTypeIterator.h</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a4cd12603c3c76eb84d050733f6ddc8b7"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a4cd12603c3c76eb84d050733f6ddc8b7">llvm::CmpInst::Create</a></div><div class="ttdeci">static CmpInst * Create(OtherOps Op, unsigned short predicate, Value *S1, Value *S2, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdoc">Create a CmpInst. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l03035">Instructions.cpp:3035</a></div></div>
<div class="ttc" id="Transforms_2Scalar_8h_html"><div class="ttname"><a href="Transforms_2Scalar_8h.html">Scalar.h</a></div></div>
<div class="ttc" id="classllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l01149">CommandLine.h:1149</a></div></div>
<div class="ttc" id="classllvm_1_1TargetLoweringBase_html_a575e134a5e8414029a5c4a284858e6cd"><div class="ttname"><a href="classllvm_1_1TargetLoweringBase.html#a575e134a5e8414029a5c4a284858e6cd">llvm::TargetLoweringBase::SelectSupportKind</a></div><div class="ttdeci">SelectSupportKind</div><div class="ttdoc">Enum that describes what type of support for selects the target has. </div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00112">TargetLowering.h:112</a></div></div>
<div class="ttc" id="classllvm_1_1DbgValueInst_html"><div class="ttname"><a href="classllvm_1_1DbgValueInst.html">llvm::DbgValueInst</a></div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00097">IntrinsicInst.h:97</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a2081b822b121723df82782c24314a37e"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a2081b822b121723df82782c24314a37e">llvm::IRBuilder::CreateSExt</a></div><div class="ttdeci">Value * CreateSExt(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01074">IRBuilder.h:1074</a></div></div>
<div class="ttc" id="classllvm_1_1ImmutableCallSite_html"><div class="ttname"><a href="classllvm_1_1ImmutableCallSite.html">llvm::ImmutableCallSite</a></div><div class="ttdoc">ImmutableCallSite - establish a view to a call site for examination. </div><div class="ttdef"><b>Definition:</b> <a href="CallSite_8h_source.html#l00318">CallSite.h:318</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_af09e4096de244d2fb345891328714a63"><div class="ttname"><a href="classllvm_1_1Instruction.html#af09e4096de244d2fb345891328714a63">llvm::Instruction::insertAfter</a></div><div class="ttdeci">void insertAfter(Instruction *InsertPos)</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00084">Instruction.cpp:84</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a5cb76a65b6524dba1493dd2b9dc3abbe"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">TerminatorInst * getTerminator()</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00120">BasicBlock.cpp:120</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a085b82f074c28030fb8e194377ed2d0c"><div class="ttname"><a href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">llvm::Value::hasOneUse</a></div><div class="ttdeci">bool hasOneUse() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00161">Value.h:161</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90afb99c5b4c79f8419d2018d9499d15a93"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90afb99c5b4c79f8419d2018d9499d15a93">llvm::Intrinsic::objectsize</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02214">Intrinsics.h:2214</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_ae1d53a21892854816885c7288f8b46f1"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ae1d53a21892854816885c7288f8b46f1">llvm::BasicBlock::Create</a></div><div class="ttdeci">static BasicBlock * Create(LLVMContext &amp;Context, const Twine &amp;Name=&quot;&quot;, Function *Parent=0, BasicBlock *InsertBefore=0)</div><div class="ttdoc">Creates a new BasicBlock. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00109">BasicBlock.h:109</a></div></div>
<div class="ttc" id="BasicBlockUtils_8h_html"><div class="ttname"><a href="BasicBlockUtils_8h.html">BasicBlockUtils.h</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_a1f2303df9bbee2233c11d61c2f6f7930"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#a1f2303df9bbee2233c11d61c2f6f7930">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::pop_back</a></div><div class="ttdeci">void pop_back()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00260">SmallVector.h:260</a></div></div>
<div class="ttc" id="namespacellvm_html_a2b8a0d5fd8cacf34a300e31e25eaa77f"><div class="ttname"><a href="namespacellvm.html#a2b8a0d5fd8cacf34a300e31e25eaa77f">llvm::FoldReturnIntoUncondBranch</a></div><div class="ttdeci">ReturnInst * FoldReturnIntoUncondBranch(ReturnInst *RI, BasicBlock *BB, BasicBlock *Pred)</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00594">BasicBlockUtils.cpp:594</a></div></div>
<div class="ttc" id="classllvm_1_1TargetLowering_html_a0b0176781cd4fd9f45cc739f1d007116a420d729d2e7d056ec884c094ccdc4467"><div class="ttname"><a href="classllvm_1_1TargetLowering.html#a0b0176781cd4fd9f45cc739f1d007116a420d729d2e7d056ec884c094ccdc4467">llvm::TargetLowering::C_Memory</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l02145">TargetLowering.h:2145</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a19445f836d9e1ecb32cba27ec4338fff"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a19445f836d9e1ecb32cba27ec4338fff">llvm::BasicBlock::splitBasicBlock</a></div><div class="ttdeci">BasicBlock * splitBasicBlock(iterator I, const Twine &amp;BBName=&quot;&quot;)</div><div class="ttdoc">Split the basic block into two basic blocks at the specified instruction. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00298">BasicBlock.cpp:298</a></div></div>
<div class="ttc" id="namespacellvm_html_a786eacc1517959ee09e2c6b20d454514"><div class="ttname"><a href="namespacellvm.html#a786eacc1517959ee09e2c6b20d454514">llvm::bypassSlowDivision</a></div><div class="ttdeci">bool bypassSlowDivision(Function &amp;F, Function::iterator &amp;I, const DenseMap&lt; unsigned int, unsigned int &gt; &amp;BypassWidth)</div><div class="ttdef"><b>Definition:</b> <a href="BypassSlowDivision_8cpp_source.html#l00222">BypassSlowDivision.cpp:222</a></div></div>
<div class="ttc" id="namespacellvm_html_a6a02d446812b76c3b271d9e3e3c77b49"><div class="ttname"><a href="namespacellvm.html#a6a02d446812b76c3b271d9e3e3c77b49">llvm::operator&lt;&lt;</a></div><div class="ttdeci">raw_ostream &amp; operator&lt;&lt;(raw_ostream &amp;OS, const APInt &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01688">APInt.h:1688</a></div></div>
<div class="ttc" id="IRBuilder_8h_html"><div class="ttname"><a href="IRBuilder_8h.html">IRBuilder.h</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_afb3301fb99a3b118d9fe496faf1b114b"><div class="ttname"><a href="classllvm_1_1CmpInst.html#afb3301fb99a3b118d9fe496faf1b114b">llvm::CmpInst::getOpcode</a></div><div class="ttdeci">OtherOps getOpcode() const </div><div class="ttdoc">Get the opcode casted to the right type. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00709">InstrTypes.h:709</a></div></div>
<div class="ttc" id="classllvm_1_1TargetLowering_html_acf45b67bb53a2c5b9f6ee1d1ecf57eae"><div class="ttname"><a href="classllvm_1_1TargetLowering.html#acf45b67bb53a2c5b9f6ee1d1ecf57eae">llvm::TargetLowering::ParseConstraints</a></div><div class="ttdeci">virtual AsmOperandInfoVector ParseConstraints(ImmutableCallSite CS) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8cpp_source.html#l02128">TargetLowering.cpp:2128</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ac38c53f76ef532f91f1666c8a87370e9"><div class="ttname"><a href="classllvm_1_1Value.html#ac38c53f76ef532f91f1666c8a87370e9">llvm::Value::use_empty</a></div><div class="ttdeci">bool use_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00149">Value.h:149</a></div></div>
<div class="ttc" id="Local_8h_html"><div class="ttname"><a href="Local_8h.html">Local.h</a></div></div>
<div class="ttc" id="classllvm_1_1TargetLoweringBase_html_a76daffc43a9b516f4fe4999c7b680ca0"><div class="ttname"><a href="classllvm_1_1TargetLoweringBase.html#a76daffc43a9b516f4fe4999c7b680ca0">llvm::TargetLoweringBase::getTypeToTransformTo</a></div><div class="ttdeci">EVT getTypeToTransformTo(LLVMContext &amp;Context, EVT VT) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00332">TargetLowering.h:332</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_aa933549689e79685bb67de64dddc9f7c"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#aa933549689e79685bb67de64dddc9f7c">llvm::IRBuilder::CreateTrunc</a></div><div class="ttdeci">Value * CreateTrunc(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01068">IRBuilder.h:1068</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00066">Value.h:66</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a021bb7c9aad6003fe8089f6327356c6c"><div class="ttname"><a href="classllvm_1_1Instruction.html#a021bb7c9aad6003fe8089f6327356c6c">llvm::Instruction::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const </div><div class="ttdoc">getOpcode() returns a member of one of the enums like Instruction::Add. </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00083">Instruction.h:83</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html_a669d599eeacffd29a09050e2af83bf67"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html#a669d599eeacffd29a09050e2af83bf67">llvm::SmallPtrSet::begin</a></div><div class="ttdeci">iterator begin() const </div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00276">SmallPtrSet.h:276</a></div></div>
<div class="ttc" id="CodeGenPrepare_8cpp_html_a90f66db387331ade4548891d8fa6d296"><div class="ttname"><a href="CodeGenPrepare_8cpp.html#a90f66db387331ade4548891d8fa6d296">isFormingBranchFromSelectProfitable</a></div><div class="ttdeci">static bool isFormingBranchFromSelectProfitable(SelectInst *SI)</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenPrepare_8cpp_source.html#l01797">CodeGenPrepare.cpp:1797</a></div></div>
<div class="ttc" id="BasicAliasAnalysis_8cpp_html_a2675de1d8479c7b00387979714da43f7"><div class="ttname"><a href="BasicAliasAnalysis_8cpp.html#a2675de1d8479c7b00387979714da43f7">getParent</a></div><div class="ttdeci">static const Function * getParent(const Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="BasicAliasAnalysis_8cpp_source.html#l00447">BasicAliasAnalysis.cpp:447</a></div></div>
<div class="ttc" id="namespacellvm_1_1A64CC_html_af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442"><div class="ttname"><a href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">llvm::A64CC::MI</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00035">AArch64BaseInfo.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1DbgValueInst_html_a53ed1196551e59f6c7be49a9ae12eba0"><div class="ttname"><a href="classllvm_1_1DbgValueInst.html#a53ed1196551e59f6c7be49a9ae12eba0">llvm::DbgValueInst::getValue</a></div><div class="ttdeci">const Value * getValue() const </div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8cpp_source.html#l00067">IntrinsicInst.cpp:67</a></div></div>
<div class="ttc" id="classllvm_1_1raw__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__ostream.html">llvm::raw_ostream</a></div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00031">raw_ostream.h:31</a></div></div>
<div class="ttc" id="Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00097">Debug.h:97</a></div></div>
<div class="ttc" id="classllvm_1_1TargetMachine_html"><div class="ttname"><a href="classllvm_1_1TargetMachine.html">llvm::TargetMachine</a></div><div class="ttdef"><b>Definition:</b> <a href="Target_2TargetMachine_8h_source.html#l00061">Target/TargetMachine.h:61</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html_a29a16f32075ee4f23cd769701463952c"><div class="ttname"><a href="classllvm_1_1SelectInst.html#a29a16f32075ee4f23cd769701463952c">llvm::SelectInst::getFalseValue</a></div><div class="ttdeci">const Value * getFalseValue() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01468">Instructions.h:1468</a></div></div>
<div class="ttc" id="raw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="namespacellvm_html_a162c90bc179a6359438d060722bee35f"><div class="ttname"><a href="namespacellvm.html#a162c90bc179a6359438d060722bee35f">llvm::operator==</a></div><div class="ttdeci">bool operator==(uint64_t V1, const APInt &amp;V2)</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01684">APInt.h:1684</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_ab1cd5a3713b93a33f89a2086d473cf6e"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ab1cd5a3713b93a33f89a2086d473cf6e">llvm::BasicBlock::getFirstInsertionPt</a></div><div class="ttdeci">iterator getFirstInsertionPt()</div><div class="ttdoc">Returns an iterator to the first instruction in this block that is suitable for inserting a non-PHI i...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00170">BasicBlock.cpp:170</a></div></div>
<div class="ttc" id="classllvm_1_1CallSite_html"><div class="ttname"><a href="classllvm_1_1CallSite.html">llvm::CallSite</a></div><div class="ttdef"><b>Definition:</b> <a href="CallSite_8h_source.html#l00295">CallSite.h:295</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a380559e99b47632a34f74de7c1d03cc0"><div class="ttname"><a href="classllvm_1_1Value.html#a380559e99b47632a34f74de7c1d03cc0">llvm::Value::getNumUses</a></div><div class="ttdeci">unsigned getNumUses() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00139">Value.cpp:139</a></div></div>
<div class="ttc" id="classllvm_1_1TargetLoweringBase_html_a575e134a5e8414029a5c4a284858e6cda14714058f9e9eb27b0a4ec62d23bddd5"><div class="ttname"><a href="classllvm_1_1TargetLoweringBase.html#a575e134a5e8414029a5c4a284858e6cda14714058f9e9eb27b0a4ec62d23bddd5">llvm::TargetLoweringBase::ScalarCondVectorVal</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00114">TargetLowering.h:114</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a097c2d42e4deffabe6d54b007ad83367"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a097c2d42e4deffabe6d54b007ad83367">llvm::ConstantInt::getSExtValue</a></div><div class="ttdeci">int64_t getSExtValue() const </div><div class="ttdoc">Return the sign extended value. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00124">Constants.h:124</a></div></div>
<div class="ttc" id="classllvm_1_1SDValue_html"><div class="ttname"><a href="classllvm_1_1SDValue.html">llvm::SDValue</a></div><div class="ttdef"><b>Definition:</b> <a href="SelectionDAGNodes_8h_source.html#l00094">SelectionDAGNodes.h:94</a></div></div>
<div class="ttc" id="CodeGenPrepare_8cpp_html_aad73fa98571d735a6c438eeafcf23d93"><div class="ttname"><a href="CodeGenPrepare_8cpp.html#aad73fa98571d735a6c438eeafcf23d93">codegenprepare</a></div><div class="ttdeci">codegenprepare</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenPrepare_8cpp_source.html#l00137">CodeGenPrepare.cpp:137</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a41da369a9d31d911c8af724d5630f724"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a41da369a9d31d911c8af724d5630f724">llvm::BasicBlock::moveBefore</a></div><div class="ttdeci">void moveBefore(BasicBlock *MovePos)</div><div class="ttdoc">Unlink this basic block from its current function and insert it into the function that MovePos lives ...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00106">BasicBlock.cpp:106</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00052">Instruction.h:52</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a1445356b70fbb95acc5e0d3d2ac9101c"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a1445356b70fbb95acc5e0d3d2ac9101c">llvm::BasicBlock::iterator</a></div><div class="ttdeci">InstListType::iterator iterator</div><div class="ttdoc">Instruction iterators... </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00099">BasicBlock.h:99</a></div></div>
<div class="ttc" id="classllvm_1_1IntrinsicInst_html"><div class="ttname"><a href="classllvm_1_1IntrinsicInst.html">llvm::IntrinsicInst</a></div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00036">IntrinsicInst.h:36</a></div></div>
<div class="ttc" id="TargetLowering_8h_html"><div class="ttname"><a href="TargetLowering_8h.html">TargetLowering.h</a></div></div>
<div class="ttc" id="classllvm_1_1AllocaInst_html"><div class="ttname"><a href="classllvm_1_1AllocaInst.html">llvm::AllocaInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00058">Instructions.h:58</a></div></div>
<div class="ttc" id="namespacellvm_html_ac828b9b52935f87659a4adf237f820a3"><div class="ttname"><a href="namespacellvm.html#ac828b9b52935f87659a4adf237f820a3">llvm::gep_type_begin</a></div><div class="ttdeci">gep_type_iterator gep_type_begin(const User *GEP)</div><div class="ttdef"><b>Definition:</b> <a href="GetElementPtrTypeIterator_8h_source.html#l00085">GetElementPtrTypeIterator.h:85</a></div></div>
<div class="ttc" id="classllvm_1_1InlineAsm_html_a511f48809ad14f13e50b957a137a9d34a79ca3881430605a6c7da5227cfb115d6"><div class="ttname"><a href="classllvm_1_1InlineAsm.html#a511f48809ad14f13e50b957a137a9d34a79ca3881430605a6c7da5227cfb115d6">llvm::InlineAsm::isInput</a></div><div class="ttdef"><b>Definition:</b> <a href="InlineAsm_8h_source.html#l00097">InlineAsm.h:97</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 22:58:20 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
