<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: HexagonCopyToCombine.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('HexagonCopyToCombine_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">HexagonCopyToCombine.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="HexagonCopyToCombine_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===------- HexagonCopyToCombine.cpp - Hexagon Copy-To-Combine Pass ------===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This pass replaces transfer instructions by combine instructions.</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// We walk along a basic block and look for two combinable instructions and try</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// to move them together. If we can move them next to each other we do so and</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// replace them with a combine instruction.</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00014"></a><span class="lineno"><a class="line" href="HexagonCopyToCombine_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   14</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;hexagon-copy-combine&quot;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PassSupport_8h.html">llvm/PassSupport.h</a>&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseSet_8h.html">llvm/ADT/DenseSet.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseMap_8h.html">llvm/ADT/DenseMap.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CodeGen_2Passes_8h.html">llvm/CodeGen/Passes.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineBasicBlock_8h.html">llvm/CodeGen/MachineBasicBlock.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineFunction_8h.html">llvm/CodeGen/MachineFunction.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineFunctionPass_8h.html">llvm/CodeGen/MachineFunctionPass.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineInstr_8h.html">llvm/CodeGen/MachineInstr.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineInstrBuilder_8h.html">llvm/CodeGen/MachineInstrBuilder.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetRegisterInfo_8h.html">llvm/Target/TargetRegisterInfo.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CodeGen_8h.html">llvm/Support/CodeGen.h</a>&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Hexagon_8h.html">Hexagon.h</a>&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="HexagonInstrInfo_8h.html">HexagonInstrInfo.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="HexagonRegisterInfo_8h.html">HexagonRegisterInfo.h</a>&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="HexagonSubtarget_8h.html">HexagonSubtarget.h</a>&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="HexagonTargetMachine_8h.html">HexagonTargetMachine.h</a>&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="HexagonMachineFunctionInfo_8h.html">HexagonMachineFunctionInfo.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="keyword">static</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="HexagonCopyToCombine_8cpp.html#a3fcb3265c8ccec2bf758d10b61848e6e">IsCombinesDisabled</a>(<span class="stringliteral">&quot;disable-merge-into-combines&quot;</span>,</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;                                 <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a492234b10e0c5918d72a3a15a6f0fa6ea61d3cb794533763159788c493ad266d9">cl::ZeroOrMore</a>,</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;                                 <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>),</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;                                 <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Disable merging into combines&quot;</span>));</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="keyword">static</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<a class="code" href="HexagonCopyToCombine_8cpp.html#aed7913b49eca0bfcfd2bfdf00edc8671">MaxNumOfInstsBetweenNewValueStoreAndTFR</a>(<span class="stringliteral">&quot;max-num-inst-between-tfr-and-nv-store&quot;</span>,</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                   <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(4),</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;                   <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Maximum distance between a tfr feeding a store we &quot;</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;                            <span class="stringliteral">&quot;consider the store still to be newifiable&quot;</span>));</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#ac0d2fcad7ebe5ec9820173109ebb4b69">initializeHexagonCopyToCombinePass</a>(<a class="code" href="classllvm_1_1PassRegistry.html">PassRegistry</a>&amp;);</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;}</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="keyword">class </span>HexagonCopyToCombine : <span class="keyword">public</span> <a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a>  {</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1HexagonInstrInfo.html">HexagonInstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *TRI;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="HexagonCopyToCombine_8cpp.html#a95756fc2847ee79172165e345f645e86">ShouldCombineAggressively</a>;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;MachineInstr *&gt;</a> PotentiallyNewifiableTFR;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  HexagonCopyToCombine() : <a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a>(ID) {</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <a class="code" href="namespacellvm.html#ac0d2fcad7ebe5ec9820173109ebb4b69">initializeHexagonCopyToCombinePass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  }</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const </span>{</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <a class="code" href="classllvm_1_1MachineFunctionPass.html#aa1eece37d175f86a6f4808c0c167f13b">MachineFunctionPass::getAnalysisUsage</a>(AU);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  }</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *getPassName()<span class="keyword"> const </span>{</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;Hexagon Copy-To-Combine Pass&quot;</span>;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  }</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">bool</span> runOnMachineFunction(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;Fn);</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *findPairable(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *I1, <span class="keywordtype">bool</span> &amp;DoInsertAtI1);</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="keywordtype">void</span> findPotentialNewifiableTFRs(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;);</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="keywordtype">void</span> combine(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *I1, <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *I2,</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;               <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> &amp;<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>, <span class="keywordtype">bool</span> DoInsertAtI1);</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="keywordtype">bool</span> isSafeToMoveTogether(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *I1, <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *I2,</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                            <span class="keywordtype">unsigned</span> I1DestReg, <span class="keywordtype">unsigned</span> I2DestReg,</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                            <span class="keywordtype">bool</span> &amp;DoInsertAtI1);</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="keywordtype">void</span> emitCombineRR(<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> &amp;Before, <span class="keywordtype">unsigned</span> DestReg,</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                     <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;HiOperand, <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;LoOperand);</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="keywordtype">void</span> emitCombineRI(<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> &amp;Before, <span class="keywordtype">unsigned</span> DestReg,</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                     <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;HiOperand, <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;LoOperand);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="keywordtype">void</span> emitCombineIR(<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> &amp;Before, <span class="keywordtype">unsigned</span> DestReg,</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                     <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;HiOperand, <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;LoOperand);</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="keywordtype">void</span> emitCombineII(<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> &amp;Before, <span class="keywordtype">unsigned</span> DestReg,</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                     <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;HiOperand, <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;LoOperand);</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;};</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;} <span class="comment">// End anonymous namespace.</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">HexagonCopyToCombine::ID</a> = 0;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<a class="code" href="HexagonCopyToCombine_8cpp.html#ae12d6a69542d91b995f25b3a85f17d04">INITIALIZE_PASS</a>(HexagonCopyToCombine, <span class="stringliteral">&quot;hexagon-copy-combine&quot;</span>,</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                <span class="stringliteral">&quot;Hexagon Copy-To-Combine Pass&quot;</span>, <span class="keyword">false</span>, <span class="keyword">false</span>)</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;static <span class="keywordtype">bool</span> isCombinableInstType(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>,</div><div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">  115</a></span>&#160;                                 const <a class="code" href="classllvm_1_1HexagonInstrInfo.html">HexagonInstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>,</div><div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="HexagonCopyToCombine_8cpp.html#a95756fc2847ee79172165e345f645e86">  116</a></span>&#160;                                 <span class="keywordtype">bool</span> <a class="code" href="HexagonCopyToCombine_8cpp.html#a95756fc2847ee79172165e345f645e86">ShouldCombineAggressively</a>) {</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="keywordflow">switch</span>(MI-&gt;getOpcode()) {</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="keywordflow">case</span> Hexagon::TFR: {</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="comment">// A COPY instruction can be combined if its arguments are IntRegs (32bit).</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    assert(MI-&gt;getOperand(0).isReg() &amp;&amp; MI-&gt;getOperand(1).isReg());</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordtype">unsigned</span> DestReg = MI-&gt;getOperand(0).getReg();</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordtype">unsigned</span> SrcReg = MI-&gt;getOperand(1).getReg();</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordflow">return</span> Hexagon::IntRegsRegClass.contains(DestReg) &amp;&amp;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      Hexagon::IntRegsRegClass.contains(SrcReg);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  }</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="keywordflow">case</span> Hexagon::TFRI: {</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="comment">// A transfer-immediate can be combined if its argument is a signed 8bit</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="comment">// value.</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    assert(MI-&gt;getOperand(0).isReg() &amp;&amp; MI-&gt;getOperand(1).isImm());</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordtype">unsigned</span> DestReg = MI-&gt;getOperand(0).getReg();</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="comment">// Only combine constant extended TFRI if we are in aggressive mode.</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordflow">return</span> Hexagon::IntRegsRegClass.contains(DestReg) &amp;&amp;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      (ShouldCombineAggressively || <a class="code" href="namespacellvm.html#a3e242f3485db990d043f2dcf91106ce7">isInt&lt;8&gt;</a>(MI-&gt;getOperand(1).getImm()));</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  }</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="keywordflow">case</span> Hexagon::TFRI_V4: {</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordflow">if</span> (!ShouldCombineAggressively)</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    assert(MI-&gt;getOperand(0).isReg() &amp;&amp; MI-&gt;getOperand(1).isGlobal());</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="comment">// Ensure that TargetFlags are MO_NO_FLAG for a global. This is a</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="comment">// workaround for an ABI bug that prevents GOT relocations on combine</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="comment">// instructions</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordflow">if</span> (MI-&gt;getOperand(1).getTargetFlags() != <a class="code" href="namespacellvm_1_1HexagonII.html#ae6671c2e6222df7b72d9ff1399eea015a07258c6e441f361bbd59848f916ad445">HexagonII::MO_NO_FLAG</a>)</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordtype">unsigned</span> DestReg = MI-&gt;getOperand(0).getReg();</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordflow">return</span> Hexagon::IntRegsRegClass.contains(DestReg);</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  }</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="keywordflow">default</span>:</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  }</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;}</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div><div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="HexagonCopyToCombine_8cpp.html#a56beda5df95cde2b88959d373e1671c6">  161</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="HexagonCopyToCombine_8cpp.html#a56beda5df95cde2b88959d373e1671c6">isGreaterThan8BitTFRI</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="keywordflow">return</span> I-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>() == Hexagon::TFRI &amp;&amp;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    !<a class="code" href="namespacellvm.html#a3e242f3485db990d043f2dcf91106ce7">isInt&lt;8&gt;</a>(I-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(1).<a class="code" href="classllvm_1_1MachineOperand.html#a7059d68a29d5ecfb37623ab45cdb4e8d">getImm</a>());</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;}</div><div class="line"><a name="l00165"></a><span class="lineno"><a class="line" href="HexagonCopyToCombine_8cpp.html#a95fe48c7663a8afaa185d6e916697318">  165</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="HexagonCopyToCombine_8cpp.html#a95fe48c7663a8afaa185d6e916697318">isGreaterThan6BitTFRI</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="keywordflow">return</span> I-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>() == Hexagon::TFRI &amp;&amp;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    !isUInt&lt;6&gt;(I-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(1).<a class="code" href="classllvm_1_1MachineOperand.html#a7059d68a29d5ecfb37623ab45cdb4e8d">getImm</a>());</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;}</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">/// areCombinableOperations - Returns true if the two instruction can be merge</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">/// into a combine (ignoring register constraints).</span></div><div class="line"><a name="l00172"></a><span class="lineno"><a class="line" href="HexagonCopyToCombine_8cpp.html#a78c275fb9427a1e96516be0dbc847e09">  172</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="HexagonCopyToCombine_8cpp.html#a78c275fb9427a1e96516be0dbc847e09">areCombinableOperations</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *TRI,</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                                    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *HighRegInst,</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                                    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *LowRegInst) {</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  assert((HighRegInst-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>() == Hexagon::TFR ||</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;          HighRegInst-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>() == Hexagon::TFRI ||</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;          HighRegInst-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>() == Hexagon::TFRI_V4) &amp;&amp;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;         (LowRegInst-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>() == Hexagon::TFR ||</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;          LowRegInst-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>() == Hexagon::TFRI ||</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;          LowRegInst-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>() == Hexagon::TFRI_V4) &amp;&amp;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;         <span class="stringliteral">&quot;Assume individual instructions are of a combinable type&quot;</span>);</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="keyword">const</span> <a class="code" href="structllvm_1_1HexagonRegisterInfo.html">HexagonRegisterInfo</a> *QRI =</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="structllvm_1_1HexagonRegisterInfo.html">HexagonRegisterInfo</a> *<span class="keyword">&gt;</span>(TRI);</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="comment">// V4 added some combine variations (mixed immediate and register source</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <span class="comment">// operands), if we are on &lt; V4 we can only combine 2 register-to-register</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <span class="comment">// moves and 2 immediate-to-register moves. We also don&#39;t have</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <span class="comment">// constant-extenders.</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="keywordflow">if</span> (!QRI-&gt;<a class="code" href="structllvm_1_1HexagonRegisterInfo.html#ab3b851da35f5445c3a29adf00a34a7cc">Subtarget</a>.<a class="code" href="classllvm_1_1HexagonSubtarget.html#a936c9929198edec8ce3c080ec43818e8">hasV4TOps</a>())</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordflow">return</span> HighRegInst-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>() == LowRegInst-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>() &amp;&amp;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      !<a class="code" href="HexagonCopyToCombine_8cpp.html#a56beda5df95cde2b88959d373e1671c6">isGreaterThan8BitTFRI</a>(HighRegInst) &amp;&amp;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      !<a class="code" href="HexagonCopyToCombine_8cpp.html#a95fe48c7663a8afaa185d6e916697318">isGreaterThan6BitTFRI</a>(LowRegInst);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="comment">// There is no combine of two constant extended values.</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <span class="keywordflow">if</span> ((HighRegInst-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>() == Hexagon::TFRI_V4 ||</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;       <a class="code" href="HexagonCopyToCombine_8cpp.html#a56beda5df95cde2b88959d373e1671c6">isGreaterThan8BitTFRI</a>(HighRegInst)) &amp;&amp;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      (LowRegInst-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a>() == Hexagon::TFRI_V4 ||</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;       <a class="code" href="HexagonCopyToCombine_8cpp.html#a95fe48c7663a8afaa185d6e916697318">isGreaterThan6BitTFRI</a>(LowRegInst)))</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;}</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno"><a class="line" href="HexagonCopyToCombine_8cpp.html#a661b945147a53ef2ecf91646a481e67c">  205</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="HexagonCopyToCombine_8cpp.html#a661b945147a53ef2ecf91646a481e67c">isEvenReg</a>(<span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>) {</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  assert(<a class="code" href="classllvm_1_1TargetRegisterInfo.html#a055858b14215864ed367a8db6c19d6f6">TargetRegisterInfo::isPhysicalRegister</a>(Reg) &amp;&amp;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;         Hexagon::IntRegsRegClass.contains(Reg));</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="keywordflow">return</span> (Reg - Hexagon::R0) % 2 == 0;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;}</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno"><a class="line" href="HexagonCopyToCombine_8cpp.html#a5df978db14d9312ff239d4a38e6489cb">  211</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="HexagonCopyToCombine_8cpp.html#a5df978db14d9312ff239d4a38e6489cb">removeKillInfo</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>, <span class="keywordtype">unsigned</span> RegNotKilled) {</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, E = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">getNumOperands</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;Op = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">if</span> (!Op.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>() || Op.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>() != RegNotKilled || !Op.<a class="code" href="classllvm_1_1MachineOperand.html#aa21b508be8c212bdb0b28d734ab0ddb8">isKill</a>())</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    Op.<a class="code" href="classllvm_1_1MachineOperand.html#a8a82683fccdef8a5ef772ef03277aee7">setIsKill</a>(<span class="keyword">false</span>);</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  }</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;}</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">/// isUnsafeToMoveAcross - Returns true if it is unsafe to move a copy</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">/// instruction from \p UseReg to \p DestReg over the instruction \p I.</span></div><div class="line"><a name="l00222"></a><span class="lineno"><a class="line" href="HexagonCopyToCombine_8cpp.html#ab49d3d8fb8a492a1210d909bcf69214d">  222</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="HexagonCopyToCombine_8cpp.html#ab49d3d8fb8a492a1210d909bcf69214d">isUnsafeToMoveAcross</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="keywordtype">unsigned</span> UseReg,</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                                  <span class="keywordtype">unsigned</span> DestReg,</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                                  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *TRI) {</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="keywordflow">return</span> (UseReg &amp;&amp; (I-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#abbf52e5d5823c0724fe7b8385d3157d9">modifiesRegister</a>(UseReg, TRI))) ||</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;          I-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#abbf52e5d5823c0724fe7b8385d3157d9">modifiesRegister</a>(DestReg, TRI) ||</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;          I-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a8b64b30189b85c9dd54292b7d1d08a70">readsRegister</a>(DestReg, TRI) ||</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;          I-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ae9a10777fdedf716a21f450a3ceaafe3">hasUnmodeledSideEffects</a>() ||</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;          I-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#acd9af7d3f8a155c4356edccbc0522c8e">isInlineAsm</a>() || I-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a1e1d26226c627cf3dcf3c191b85e7d7d">isDebugValue</a>();</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;}</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment">/// isSafeToMoveTogether - Returns true if it is safe to move I1 next to I2 such</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">/// that the two instructions can be paired in a combine.</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> HexagonCopyToCombine::isSafeToMoveTogether(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *I1,</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                                                <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *I2,</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                                                <span class="keywordtype">unsigned</span> I1DestReg,</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                                                <span class="keywordtype">unsigned</span> I2DestReg,</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                                                <span class="keywordtype">bool</span> &amp;DoInsertAtI1) {</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="keywordtype">bool</span> IsImmUseReg = I2-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(1).<a class="code" href="classllvm_1_1MachineOperand.html#a2ac18ceda9f2857fea2e5cc4e8bf4ff5">isImm</a>() || I2-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(1).<a class="code" href="classllvm_1_1MachineOperand.html#a58048141ed81d581f3fb9a797f3186ee">isGlobal</a>();</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <span class="keywordtype">unsigned</span> I2UseReg = IsImmUseReg ? 0 : I2-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(1).<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="comment">// It is not safe to move I1 and I2 into one combine if I2 has a true</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="comment">// dependence on I1.</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <span class="keywordflow">if</span> (I2UseReg &amp;&amp; I1-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#abbf52e5d5823c0724fe7b8385d3157d9">modifiesRegister</a>(I2UseReg, TRI))</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="keywordtype">bool</span> isSafe = <span class="keyword">true</span>;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="comment">// First try to move I2 towards I1.</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  {</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="comment">// A reverse_iterator instantiated like below starts before I2, and I1</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="comment">// respectively.</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="comment">// Look at instructions I in between I2 and (excluding) I1.</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html#a0848c971395758cf592821550b725853">MachineBasicBlock::reverse_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>(I2),</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      End = --(<a class="code" href="classllvm_1_1MachineBasicBlock.html#a0848c971395758cf592821550b725853">MachineBasicBlock::reverse_iterator</a>(I1));</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="comment">// At 03 we got better results (dhrystone!) by being more conservative.</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="HexagonCopyToCombine_8cpp.html#a95756fc2847ee79172165e345f645e86">ShouldCombineAggressively</a>)</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      End = <a class="code" href="classllvm_1_1MachineBasicBlock.html#a0848c971395758cf592821550b725853">MachineBasicBlock::reverse_iterator</a>(I1);</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="comment">// If I2 kills its operand and we move I2 over an instruction that also</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="comment">// uses I2&#39;s use reg we need to modify that (first) instruction to now kill</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="comment">// this reg.</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordtype">unsigned</span> KilledOperand = 0;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keywordflow">if</span> (I2-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aff83f9aeef903ed06c5098f5172624ed">killsRegister</a>(I2UseReg))</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      KilledOperand = I2UseReg;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *KillingInstr = 0;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordflow">for</span> (; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != End; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      <span class="comment">// If the intervening instruction I:</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      <span class="comment">//   * modifies I2&#39;s use reg</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      <span class="comment">//   * modifies I2&#39;s def reg</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      <span class="comment">//   * reads I2&#39;s def reg</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      <span class="comment">//   * or has unmodelled side effects</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      <span class="comment">// we can&#39;t move I2 across it.</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="HexagonCopyToCombine_8cpp.html#ab49d3d8fb8a492a1210d909bcf69214d">isUnsafeToMoveAcross</a>(&amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, I2UseReg, I2DestReg, TRI)) {</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        isSafe = <span class="keyword">false</span>;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      }</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      <span class="comment">// Update first use of the killed operand.</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      <span class="keywordflow">if</span> (!KillingInstr &amp;&amp; KilledOperand &amp;&amp;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;          <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;readsRegister(KilledOperand, TRI))</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        KillingInstr = &amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    }</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordflow">if</span> (isSafe) {</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      <span class="comment">// Update the intermediate instruction to with the kill flag.</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      <span class="keywordflow">if</span> (KillingInstr) {</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <span class="keywordtype">bool</span> Added = KillingInstr-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ab8fd10f439804d8d7872bc1389653fce">addRegisterKilled</a>(KilledOperand, TRI, <span class="keyword">true</span>);</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        (void)Added; <span class="comment">// supress compiler warning</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        assert(Added &amp;&amp; <span class="stringliteral">&quot;Must successfully update kill flag&quot;</span>);</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <a class="code" href="HexagonCopyToCombine_8cpp.html#a5df978db14d9312ff239d4a38e6489cb">removeKillInfo</a>(I2, KilledOperand);</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      }</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      DoInsertAtI1 = <span class="keyword">true</span>;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    }</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  }</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="comment">// Try to move I1 towards I2.</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  {</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="comment">// Look at instructions I in between I1 and (excluding) I2.</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>(I1), End(I2);</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="comment">// At O3 we got better results (dhrystone) by being more conservative here.</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="HexagonCopyToCombine_8cpp.html#a95756fc2847ee79172165e345f645e86">ShouldCombineAggressively</a>)</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      End = <a class="code" href="namespacellvm.html#aa1704159f75e6eacd595962ea6d93ffe">llvm::next</a>(<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a>(I2));</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    IsImmUseReg = I1-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(1).<a class="code" href="classllvm_1_1MachineOperand.html#a2ac18ceda9f2857fea2e5cc4e8bf4ff5">isImm</a>() || I1-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(1).<a class="code" href="classllvm_1_1MachineOperand.html#a58048141ed81d581f3fb9a797f3186ee">isGlobal</a>();</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordtype">unsigned</span> I1UseReg = IsImmUseReg ? 0 : I1-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(1).<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="comment">// Track killed operands. If we move across an instruction that kills our</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="comment">// operand, we need to update the kill information on the moved I1. It kills</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="comment">// the operand now.</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *KillingInstr = 0;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordtype">unsigned</span> KilledOperand = 0;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">while</span>(++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != End) {</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      <span class="comment">// If the intervening instruction I:</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      <span class="comment">//   * modifies I1&#39;s use reg</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      <span class="comment">//   * modifies I1&#39;s def reg</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      <span class="comment">//   * reads I1&#39;s def reg</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      <span class="comment">//   * or has unmodelled side effects</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      <span class="comment">//   We introduce this special case because llvm has no api to remove a</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      <span class="comment">//   kill flag for a register (a removeRegisterKilled() analogous to</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      <span class="comment">//   addRegisterKilled) that handles aliased register correctly.</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      <span class="comment">//   * or has a killed aliased register use of I1&#39;s use reg</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      <span class="comment">//           %D4&lt;def&gt; = TFRI64 16</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      <span class="comment">//           %R6&lt;def&gt; = TFR %R9</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      <span class="comment">//           %R8&lt;def&gt; = KILL %R8, %D4&lt;imp-use,kill&gt;</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      <span class="comment">//      If we want to move R6 = across the KILL instruction we would have</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      <span class="comment">//      to remove the %D4&lt;imp-use,kill&gt; operand. For now, we are</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      <span class="comment">//      conservative and disallow the move.</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      <span class="comment">// we can&#39;t move I1 across it.</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="HexagonCopyToCombine_8cpp.html#ab49d3d8fb8a492a1210d909bcf69214d">isUnsafeToMoveAcross</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, I1UseReg, I1DestReg, TRI) ||</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;          <span class="comment">// Check for an aliased register kill. Bail out if we see one.</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;          (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;killsRegister(I1UseReg) &amp;&amp; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;killsRegister(I1UseReg, TRI)))</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      <span class="comment">// Check for an exact kill (registers match).</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      <span class="keywordflow">if</span> (I1UseReg &amp;&amp; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;killsRegister(I1UseReg)) {</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        assert(KillingInstr == 0 &amp;&amp; <span class="stringliteral">&quot;Should only see one killing instruction&quot;</span>);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        KilledOperand = I1UseReg;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        KillingInstr = &amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      }</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    }</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordflow">if</span> (KillingInstr) {</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      <a class="code" href="HexagonCopyToCombine_8cpp.html#a5df978db14d9312ff239d4a38e6489cb">removeKillInfo</a>(KillingInstr, KilledOperand);</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      <span class="comment">// Update I1 to set the kill flag. This flag will later be picked up by</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      <span class="comment">// the new COMBINE instruction.</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      <span class="keywordtype">bool</span> Added = I1-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ab8fd10f439804d8d7872bc1389653fce">addRegisterKilled</a>(KilledOperand, TRI);</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      (void)Added; <span class="comment">// supress compiler warning</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      assert(Added &amp;&amp; <span class="stringliteral">&quot;Must successfully update kill flag&quot;</span>);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    }</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    DoInsertAtI1 = <span class="keyword">false</span>;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  }</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;}</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment">/// findPotentialNewifiableTFRs - Finds tranfers that feed stores that could be</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment">/// newified. (A use of a 64 bit register define can not be newified)</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment"></span><span class="keywordtype">void</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;HexagonCopyToCombine::findPotentialNewifiableTFRs(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;unsigned, MachineInstr *&gt;</a> LastDef;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = BB.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>(), E = BB.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="comment">// Mark TFRs that feed a potential new value store as such.</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;<a class="code" href="classllvm_1_1HexagonInstrInfo.html#ac1ac5e627367b7a6b194c11bdc613ae9">mayBeNewStore</a>(MI)) {</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      <span class="comment">// Look for uses of TFR instructions.</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> OpdIdx = 0, OpdE = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">getNumOperands</a>(); OpdIdx != OpdE;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;           ++OpdIdx) {</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;Op = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(OpdIdx);</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <span class="comment">// Skip over anything except register uses.</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <span class="keywordflow">if</span> (!Op.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>() || !Op.<a class="code" href="classllvm_1_1MachineOperand.html#a57bf9ee7219097ff0f98da23a3b3b782">isUse</a>() || !Op.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>())</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        <span class="comment">// Look for the defining instruction.</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = Op.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *DefInst = LastDef[<a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>];</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <span class="keywordflow">if</span> (!DefInst)</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <span class="keywordflow">if</span> (!isCombinableInstType(DefInst, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a95756fc2847ee79172165e345f645e86">ShouldCombineAggressively</a>))</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <span class="comment">// Only close newifiable stores should influence the decision.</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> It(DefInst);</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <span class="keywordtype">unsigned</span> NumInstsToDef = 0;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="keywordflow">while</span> (&amp;*It++ != MI)</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;          ++NumInstsToDef;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        <span class="keywordflow">if</span> (NumInstsToDef &gt; <a class="code" href="HexagonCopyToCombine_8cpp.html#aed7913b49eca0bfcfd2bfdf00edc8671">MaxNumOfInstsBetweenNewValueStoreAndTFR</a>)</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        PotentiallyNewifiableTFR.insert(DefInst);</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;      }</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      <span class="comment">// Skip to next instruction.</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    }</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="comment">// Put instructions that last defined integer or double registers into the</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="comment">// map.</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, E = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">getNumOperands</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;      <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;Op = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      <span class="keywordflow">if</span> (!Op.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>() || !Op.<a class="code" href="classllvm_1_1MachineOperand.html#a8de7d5cf38939044471c6ee60a01a3df">isDef</a>() || !Op.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>())</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = Op.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      <span class="keywordflow">if</span> (Hexagon::DoubleRegsRegClass.contains(Reg)) {</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MCSubRegIterator.html">MCSubRegIterator</a> SubRegs(Reg, TRI); SubRegs.<a class="code" href="classllvm_1_1MCRegisterInfo_1_1DiffListIterator.html#abccd358b92366e5284e7e674e86b241f">isValid</a>(); ++SubRegs) {</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;          LastDef[*SubRegs] = <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        }</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Hexagon::IntRegsRegClass.contains(Reg))</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        LastDef[Reg] = MI;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    }</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  }</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;}</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="keywordtype">bool</span> HexagonCopyToCombine::runOnMachineFunction(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF) {</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="HexagonCopyToCombine_8cpp.html#a3fcb3265c8ccec2bf758d10b61848e6e">IsCombinesDisabled</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="keywordtype">bool</span> HasChanged = <span class="keyword">false</span>;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="comment">// Get target info.</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  TRI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a6745c3bfdfc5b0643b078b96df2db252">getTarget</a>().<a class="code" href="classllvm_1_1TargetMachine.html#a70b47eca6a99c87b81f4c1b1455dc090">getRegisterInfo</a>();</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a> = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classllvm_1_1HexagonInstrInfo.html">HexagonInstrInfo</a> *<span class="keyword">&gt;</span>(MF.<a class="code" href="classllvm_1_1MachineFunction.html#a6745c3bfdfc5b0643b078b96df2db252">getTarget</a>().<a class="code" href="classllvm_1_1TargetMachine.html#ac13d0f6f2c915757013b101ef6e8afbc">getInstrInfo</a>());</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="comment">// Combine aggressively (for code size)</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  <a class="code" href="HexagonCopyToCombine_8cpp.html#a95756fc2847ee79172165e345f645e86">ShouldCombineAggressively</a> =</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    MF.<a class="code" href="classllvm_1_1MachineFunction.html#a6745c3bfdfc5b0643b078b96df2db252">getTarget</a>().<a class="code" href="classllvm_1_1TargetMachine.html#af567540acbc5289da300dcbc3b176c1c">getOptLevel</a>() &lt;= <a class="code" href="namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4a3393aeca011bfa5bdd6a8e64edd7f565">CodeGenOpt::Default</a>;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  <span class="comment">// Traverse basic blocks.</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">MachineFunction::iterator</a> BI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ab0789854909cf47f640a85fa2bac29c7">begin</a>(), BE = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a9d017af749f76484cb9aec9ff6e4330c">end</a>(); BI != BE;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;       ++BI) {</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    PotentiallyNewifiableTFR.clear();</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    findPotentialNewifiableTFRs(*BI);</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="comment">// Traverse instructions in basic block.</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="keywordflow">for</span>(<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a> = BI-&gt;begin(), End = BI-&gt;end();</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a> != End;) {</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;      <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *I1 = <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>++;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      <span class="comment">// Don&#39;t combine a TFR whose user could be newified (instructions that</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      <span class="comment">// define double registers can not be newified - Programmer&#39;s Ref Manual</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      <span class="comment">// 5.4.2 New-value stores).</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="HexagonCopyToCombine_8cpp.html#a95756fc2847ee79172165e345f645e86">ShouldCombineAggressively</a> &amp;&amp; PotentiallyNewifiableTFR.count(I1))</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;      <span class="comment">// Ignore instructions that are not combinable.</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      <span class="keywordflow">if</span> (!isCombinableInstType(I1, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a95756fc2847ee79172165e345f645e86">ShouldCombineAggressively</a>))</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      <span class="comment">// Find a second instruction that can be merged into a combine</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      <span class="comment">// instruction.</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      <span class="keywordtype">bool</span> DoInsertAtI1 = <span class="keyword">false</span>;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *I2 = findPairable(I1, DoInsertAtI1);</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;      <span class="keywordflow">if</span> (I2) {</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        HasChanged = <span class="keyword">true</span>;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        combine(I1, I2, <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>, DoInsertAtI1);</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      }</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    }</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  }</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <span class="keywordflow">return</span> HasChanged;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;}</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment">/// findPairable - Returns an instruction that can be merged with \p I1 into a</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment">/// COMBINE instruction or 0 if no such instruction can be found. Returns true</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment">/// in \p DoInsertAtI1 if the combine must be inserted at instruction \p I1</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment">/// false if the combine must be inserted at the returned instruction.</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *HexagonCopyToCombine::findPairable(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *I1,</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                                                 <span class="keywordtype">bool</span> &amp;DoInsertAtI1) {</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> I2 = <a class="code" href="namespacellvm.html#aa1704159f75e6eacd595962ea6d93ffe">llvm::next</a>(<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a>(I1));</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  <span class="keywordtype">unsigned</span> I1DestReg = I1-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(0).<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> End = I1-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">getParent</a>()-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>(); I2 != End;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;       ++I2) {</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="comment">// Bail out early if we see a second definition of I1DestReg.</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keywordflow">if</span> (I2-&gt;modifiesRegister(I1DestReg, TRI))</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="comment">// Ignore non-combinable instructions.</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="keywordflow">if</span> (!isCombinableInstType(I2, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a95756fc2847ee79172165e345f645e86">ShouldCombineAggressively</a>))</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="comment">// Don&#39;t combine a TFR whose user could be newified.</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="HexagonCopyToCombine_8cpp.html#a95756fc2847ee79172165e345f645e86">ShouldCombineAggressively</a> &amp;&amp; PotentiallyNewifiableTFR.count(I2))</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="keywordtype">unsigned</span> I2DestReg = I2-&gt;getOperand(0).getReg();</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="comment">// Check that registers are adjacent and that the first destination register</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="comment">// is even.</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="keywordtype">bool</span> IsI1LowReg = (I2DestReg - I1DestReg) == 1;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="keywordtype">bool</span> IsI2LowReg = (I1DestReg - I2DestReg) == 1;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keywordtype">unsigned</span> FirstRegIndex = IsI1LowReg ? I1DestReg : I2DestReg;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keywordflow">if</span> ((!IsI1LowReg &amp;&amp; !IsI2LowReg) || !<a class="code" href="HexagonCopyToCombine_8cpp.html#a661b945147a53ef2ecf91646a481e67c">isEvenReg</a>(FirstRegIndex))</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="comment">// Check that the two instructions are combinable. V4 allows more</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="comment">// instructions to be merged into a combine.</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="comment">// The order matters because in a TFRI we might can encode a int8 as the</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="comment">// hi reg operand but only a uint6 as the low reg operand.</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="keywordflow">if</span> ((IsI2LowReg &amp;&amp; !<a class="code" href="HexagonCopyToCombine_8cpp.html#a78c275fb9427a1e96516be0dbc847e09">areCombinableOperations</a>(TRI, I1, I2)) ||</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        (IsI1LowReg &amp;&amp; !<a class="code" href="HexagonCopyToCombine_8cpp.html#a78c275fb9427a1e96516be0dbc847e09">areCombinableOperations</a>(TRI, I2, I1)))</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="keywordflow">if</span> (isSafeToMoveTogether(I1, I2, I1DestReg, I2DestReg,</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                             DoInsertAtI1))</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      <span class="keywordflow">return</span> I2;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="comment">// Not safe. Stop searching.</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  }</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;}</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="keywordtype">void</span> HexagonCopyToCombine::combine(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *I1, <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *I2,</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                                   <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> &amp;<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>,</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                                   <span class="keywordtype">bool</span> DoInsertAtI1) {</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <span class="comment">// We are going to delete I2. If MI points to I2 advance it to the next</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  <span class="comment">// instruction.</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <span class="keywordflow">if</span> ((<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *)MI == I2) ++<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <span class="comment">// Figure out whether I1 or I2 goes into the lowreg part.</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <span class="keywordtype">unsigned</span> I1DestReg = I1-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(0).<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="keywordtype">unsigned</span> I2DestReg = I2-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(0).<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <span class="keywordtype">bool</span> IsI1Loreg = (I2DestReg - I1DestReg) == 1;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <span class="keywordtype">unsigned</span> LoRegDef = IsI1Loreg ? I1DestReg : I2DestReg;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <span class="comment">// Get the double word register.</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  <span class="keywordtype">unsigned</span> DoubleRegDest =</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    TRI-&gt;getMatchingSuperReg(LoRegDef, Hexagon::subreg_loreg,</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                             &amp;Hexagon::DoubleRegsRegClass);</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  assert(DoubleRegDest != 0 &amp;&amp; <span class="stringliteral">&quot;Expect a valid register&quot;</span>);</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  <span class="comment">// Setup source operands.</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;LoOperand = IsI1Loreg ? I1-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(1) :</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    I2-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(1);</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;HiOperand = IsI1Loreg ? I2-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(1) :</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    I1-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(1);</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="comment">// Figure out which source is a register and which a constant.</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  <span class="keywordtype">bool</span> IsHiReg = HiOperand.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>();</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  <span class="keywordtype">bool</span> IsLoReg = LoOperand.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>();</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> InsertPt(DoInsertAtI1 ? I1 : I2);</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  <span class="comment">// Emit combine.</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  <span class="keywordflow">if</span> (IsHiReg &amp;&amp; IsLoReg)</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    emitCombineRR(InsertPt, DoubleRegDest, HiOperand, LoOperand);</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (IsHiReg)</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    emitCombineRI(InsertPt, DoubleRegDest, HiOperand, LoOperand);</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (IsLoReg)</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    emitCombineIR(InsertPt, DoubleRegDest, HiOperand, LoOperand);</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    emitCombineII(InsertPt, DoubleRegDest, HiOperand, LoOperand);</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  I1-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ac2421adbb9996e1b15f03a8abb6c70a8">eraseFromParent</a>();</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  I2-&gt;eraseFromParent();</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;}</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="keywordtype">void</span> HexagonCopyToCombine::emitCombineII(<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> &amp;InsertPt,</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                                         <span class="keywordtype">unsigned</span> DoubleDestReg,</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                                         <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;HiOperand,</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                                         <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;LoOperand) {</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> DL = InsertPt-&gt;getDebugLoc();</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *BB = InsertPt-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#af2e482ff2a9253ec6bc2285491496bd6">getParent</a>();</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <span class="comment">// Handle  globals.</span></div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  <span class="keywordflow">if</span> (HiOperand.<a class="code" href="classllvm_1_1MachineOperand.html#a58048141ed81d581f3fb9a797f3186ee">isGlobal</a>()) {</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <a class="code" href="namespacellvm.html#a980570dc1410d4ef53806f82028ca381">BuildMI</a>(*BB, InsertPt, DL, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(Hexagon::COMBINE_Ii), DoubleDestReg)</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      .addGlobalAddress(HiOperand.<a class="code" href="classllvm_1_1MachineOperand.html#a0c3a2a5a49795f8750ebd02dc0e6e11e">getGlobal</a>(), HiOperand.<a class="code" href="classllvm_1_1MachineOperand.html#ae73de4f077ea9862af9611652396202b">getOffset</a>(),</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                        HiOperand.<a class="code" href="classllvm_1_1MachineOperand.html#a91aa25eac8330cdbab5f7f12fb29359d">getTargetFlags</a>())</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      .addImm(LoOperand.<a class="code" href="classllvm_1_1MachineOperand.html#a7059d68a29d5ecfb37623ab45cdb4e8d">getImm</a>());</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  }</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <span class="keywordflow">if</span> (LoOperand.<a class="code" href="classllvm_1_1MachineOperand.html#a58048141ed81d581f3fb9a797f3186ee">isGlobal</a>()) {</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <a class="code" href="namespacellvm.html#a980570dc1410d4ef53806f82028ca381">BuildMI</a>(*BB, InsertPt, DL, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(Hexagon::COMBINE_iI_V4), DoubleDestReg)</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      .addImm(HiOperand.<a class="code" href="classllvm_1_1MachineOperand.html#a7059d68a29d5ecfb37623ab45cdb4e8d">getImm</a>())</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      .addGlobalAddress(LoOperand.<a class="code" href="classllvm_1_1MachineOperand.html#a0c3a2a5a49795f8750ebd02dc0e6e11e">getGlobal</a>(), LoOperand.<a class="code" href="classllvm_1_1MachineOperand.html#ae73de4f077ea9862af9611652396202b">getOffset</a>(),</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                        LoOperand.<a class="code" href="classllvm_1_1MachineOperand.html#a91aa25eac8330cdbab5f7f12fb29359d">getTargetFlags</a>());</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  }</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <span class="comment">// Handle constant extended immediates.</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#a3e242f3485db990d043f2dcf91106ce7">isInt&lt;8&gt;</a>(HiOperand.<a class="code" href="classllvm_1_1MachineOperand.html#a7059d68a29d5ecfb37623ab45cdb4e8d">getImm</a>())) {</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    assert(<a class="code" href="namespacellvm.html#a3e242f3485db990d043f2dcf91106ce7">isInt&lt;8&gt;</a>(LoOperand.<a class="code" href="classllvm_1_1MachineOperand.html#a7059d68a29d5ecfb37623ab45cdb4e8d">getImm</a>()));</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <a class="code" href="namespacellvm.html#a980570dc1410d4ef53806f82028ca381">BuildMI</a>(*BB, InsertPt, DL, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(Hexagon::COMBINE_Ii), DoubleDestReg)</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      .addImm(HiOperand.<a class="code" href="classllvm_1_1MachineOperand.html#a7059d68a29d5ecfb37623ab45cdb4e8d">getImm</a>())</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      .addImm(LoOperand.<a class="code" href="classllvm_1_1MachineOperand.html#a7059d68a29d5ecfb37623ab45cdb4e8d">getImm</a>());</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  }</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  <span class="keywordflow">if</span> (!isUInt&lt;6&gt;(LoOperand.<a class="code" href="classllvm_1_1MachineOperand.html#a7059d68a29d5ecfb37623ab45cdb4e8d">getImm</a>())) {</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    assert(<a class="code" href="namespacellvm.html#a3e242f3485db990d043f2dcf91106ce7">isInt&lt;8&gt;</a>(HiOperand.<a class="code" href="classllvm_1_1MachineOperand.html#a7059d68a29d5ecfb37623ab45cdb4e8d">getImm</a>()));</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <a class="code" href="namespacellvm.html#a980570dc1410d4ef53806f82028ca381">BuildMI</a>(*BB, InsertPt, DL, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(Hexagon::COMBINE_iI_V4), DoubleDestReg)</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      .addImm(HiOperand.<a class="code" href="classllvm_1_1MachineOperand.html#a7059d68a29d5ecfb37623ab45cdb4e8d">getImm</a>())</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      .addImm(LoOperand.<a class="code" href="classllvm_1_1MachineOperand.html#a7059d68a29d5ecfb37623ab45cdb4e8d">getImm</a>());</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  }</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <span class="comment">// Insert new combine instruction.</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  <span class="comment">//  DoubleRegDest = combine #HiImm, #LoImm</span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <a class="code" href="namespacellvm.html#a980570dc1410d4ef53806f82028ca381">BuildMI</a>(*BB, InsertPt, DL, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(Hexagon::COMBINE_Ii), DoubleDestReg)</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    .addImm(HiOperand.<a class="code" href="classllvm_1_1MachineOperand.html#a7059d68a29d5ecfb37623ab45cdb4e8d">getImm</a>())</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    .addImm(LoOperand.<a class="code" href="classllvm_1_1MachineOperand.html#a7059d68a29d5ecfb37623ab45cdb4e8d">getImm</a>());</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;}</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="keywordtype">void</span> HexagonCopyToCombine::emitCombineIR(<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> &amp;InsertPt,</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                                         <span class="keywordtype">unsigned</span> DoubleDestReg,</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                                         <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;HiOperand,</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                                         <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;LoOperand) {</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <span class="keywordtype">unsigned</span> LoReg = LoOperand.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  <span class="keywordtype">unsigned</span> LoRegKillFlag = <a class="code" href="namespacellvm.html#aac57d4100e9a9d02522fbd724568397d">getKillRegState</a>(LoOperand.<a class="code" href="classllvm_1_1MachineOperand.html#aa21b508be8c212bdb0b28d734ab0ddb8">isKill</a>());</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> DL = InsertPt-&gt;getDebugLoc();</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *BB = InsertPt-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#af2e482ff2a9253ec6bc2285491496bd6">getParent</a>();</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  <span class="comment">// Handle global.</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  <span class="keywordflow">if</span> (HiOperand.<a class="code" href="classllvm_1_1MachineOperand.html#a58048141ed81d581f3fb9a797f3186ee">isGlobal</a>()) {</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <a class="code" href="namespacellvm.html#a980570dc1410d4ef53806f82028ca381">BuildMI</a>(*BB, InsertPt, DL, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(Hexagon::COMBINE_Ir_V4), DoubleDestReg)</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      .addGlobalAddress(HiOperand.<a class="code" href="classllvm_1_1MachineOperand.html#a0c3a2a5a49795f8750ebd02dc0e6e11e">getGlobal</a>(), HiOperand.<a class="code" href="classllvm_1_1MachineOperand.html#ae73de4f077ea9862af9611652396202b">getOffset</a>(),</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                        HiOperand.<a class="code" href="classllvm_1_1MachineOperand.html#a91aa25eac8330cdbab5f7f12fb29359d">getTargetFlags</a>())</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      .addReg(LoReg, LoRegKillFlag);</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  }</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <span class="comment">// Insert new combine instruction.</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <span class="comment">//  DoubleRegDest = combine #HiImm, LoReg</span></div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  <a class="code" href="namespacellvm.html#a980570dc1410d4ef53806f82028ca381">BuildMI</a>(*BB, InsertPt, DL, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(Hexagon::COMBINE_Ir_V4), DoubleDestReg)</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    .addImm(HiOperand.<a class="code" href="classllvm_1_1MachineOperand.html#a7059d68a29d5ecfb37623ab45cdb4e8d">getImm</a>())</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    .addReg(LoReg, LoRegKillFlag);</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;}</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="keywordtype">void</span> HexagonCopyToCombine::emitCombineRI(<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> &amp;InsertPt,</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                                         <span class="keywordtype">unsigned</span> DoubleDestReg,</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                                         <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;HiOperand,</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                                         <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;LoOperand) {</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  <span class="keywordtype">unsigned</span> HiRegKillFlag = <a class="code" href="namespacellvm.html#aac57d4100e9a9d02522fbd724568397d">getKillRegState</a>(HiOperand.<a class="code" href="classllvm_1_1MachineOperand.html#aa21b508be8c212bdb0b28d734ab0ddb8">isKill</a>());</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  <span class="keywordtype">unsigned</span> HiReg = HiOperand.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> DL = InsertPt-&gt;getDebugLoc();</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *BB = InsertPt-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#af2e482ff2a9253ec6bc2285491496bd6">getParent</a>();</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  <span class="comment">// Handle global.</span></div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  <span class="keywordflow">if</span> (LoOperand.<a class="code" href="classllvm_1_1MachineOperand.html#a58048141ed81d581f3fb9a797f3186ee">isGlobal</a>()) {</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <a class="code" href="namespacellvm.html#a980570dc1410d4ef53806f82028ca381">BuildMI</a>(*BB, InsertPt, DL, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(Hexagon::COMBINE_rI_V4), DoubleDestReg)</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;      .addReg(HiReg, HiRegKillFlag)</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#aec72fc7a6cc79a1ef53e5d5dbccb846c">addGlobalAddress</a>(LoOperand.<a class="code" href="classllvm_1_1MachineOperand.html#a0c3a2a5a49795f8750ebd02dc0e6e11e">getGlobal</a>(), LoOperand.<a class="code" href="classllvm_1_1MachineOperand.html#ae73de4f077ea9862af9611652396202b">getOffset</a>(),</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                        LoOperand.<a class="code" href="classllvm_1_1MachineOperand.html#a91aa25eac8330cdbab5f7f12fb29359d">getTargetFlags</a>());</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  }</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  <span class="comment">// Insert new combine instruction.</span></div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  <span class="comment">//  DoubleRegDest = combine HiReg, #LoImm</span></div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  <a class="code" href="namespacellvm.html#a980570dc1410d4ef53806f82028ca381">BuildMI</a>(*BB, InsertPt, DL, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(Hexagon::COMBINE_rI_V4), DoubleDestReg)</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    .addReg(HiReg, HiRegKillFlag)</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a9f1fae6a5dbb6e378ca85df1fded8515">addImm</a>(LoOperand.<a class="code" href="classllvm_1_1MachineOperand.html#a7059d68a29d5ecfb37623ab45cdb4e8d">getImm</a>());</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;}</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="keywordtype">void</span> HexagonCopyToCombine::emitCombineRR(<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> &amp;InsertPt,</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                                         <span class="keywordtype">unsigned</span> DoubleDestReg,</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;                                         <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;HiOperand,</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                                         <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;LoOperand) {</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  <span class="keywordtype">unsigned</span> LoRegKillFlag = <a class="code" href="namespacellvm.html#aac57d4100e9a9d02522fbd724568397d">getKillRegState</a>(LoOperand.<a class="code" href="classllvm_1_1MachineOperand.html#aa21b508be8c212bdb0b28d734ab0ddb8">isKill</a>());</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  <span class="keywordtype">unsigned</span> HiRegKillFlag = <a class="code" href="namespacellvm.html#aac57d4100e9a9d02522fbd724568397d">getKillRegState</a>(HiOperand.<a class="code" href="classllvm_1_1MachineOperand.html#aa21b508be8c212bdb0b28d734ab0ddb8">isKill</a>());</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  <span class="keywordtype">unsigned</span> LoReg = LoOperand.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  <span class="keywordtype">unsigned</span> HiReg = HiOperand.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> DL = InsertPt-&gt;getDebugLoc();</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *BB = InsertPt-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#af2e482ff2a9253ec6bc2285491496bd6">getParent</a>();</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  <span class="comment">// Insert new combine instruction.</span></div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  <span class="comment">//  DoubleRegDest = combine HiReg, LoReg</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  <a class="code" href="namespacellvm.html#a980570dc1410d4ef53806f82028ca381">BuildMI</a>(*BB, InsertPt, DL, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(Hexagon::COMBINE_rr), DoubleDestReg)</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    .addReg(HiReg, HiRegKillFlag)</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a5125cce72b214df09ca8f93dcbbf4c3a">addReg</a>(LoReg, LoRegKillFlag);</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;}</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;</div><div class="line"><a name="l00675"></a><span class="lineno"><a class="line" href="namespacellvm.html#aa72168265a7515011a734173c9eea486">  675</a></span>&#160;<a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a> *<a class="code" href="namespacellvm.html#aa72168265a7515011a734173c9eea486">llvm::createHexagonCopyToCombine</a>() {</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> HexagonCopyToCombine();</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;}</div><div class="ttc" id="namespacellvm_html_aa72168265a7515011a734173c9eea486"><div class="ttname"><a href="namespacellvm.html#aa72168265a7515011a734173c9eea486">llvm::createHexagonCopyToCombine</a></div><div class="ttdeci">FunctionPass * createHexagonCopyToCombine()</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCopyToCombine_8cpp_source.html#l00675">HexagonCopyToCombine.cpp:675</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_af2e482ff2a9253ec6bc2285491496bd6"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#af2e482ff2a9253ec6bc2285491496bd6">llvm::MachineBasicBlock::getParent</a></div><div class="ttdeci">const MachineFunction * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00137">MachineBasicBlock.h:137</a></div></div>
<div class="ttc" id="HexagonCopyToCombine_8cpp_html_ae12d6a69542d91b995f25b3a85f17d04"><div class="ttname"><a href="HexagonCopyToCombine_8cpp.html#ae12d6a69542d91b995f25b3a85f17d04">INITIALIZE_PASS</a></div><div class="ttdeci">INITIALIZE_PASS(HexagonCopyToCombine,&quot;hexagon-copy-combine&quot;,&quot;Hexagon Copy-To-Combine Pass&quot;, false, false) static bool isCombinableInstType(MachineInstr *MI</div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a0c3a2a5a49795f8750ebd02dc0e6e11e"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a0c3a2a5a49795f8750ebd02dc0e6e11e">llvm::MachineOperand::getGlobal</a></div><div class="ttdeci">const GlobalValue * getGlobal() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00428">MachineOperand.h:428</a></div></div>
<div class="ttc" id="classllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00035">PassRegistry.cpp:35</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="classllvm_1_1MCRegisterInfo_1_1DiffListIterator_html_abccd358b92366e5284e7e674e86b241f"><div class="ttname"><a href="classllvm_1_1MCRegisterInfo_1_1DiffListIterator.html#abccd358b92366e5284e7e674e86b241f">llvm::MCRegisterInfo::DiffListIterator::isValid</a></div><div class="ttdeci">bool isValid() const </div><div class="ttdoc">isValid - returns true if this iterator is not yet at the end. </div><div class="ttdef"><b>Definition:</b> <a href="MCRegisterInfo_8h_source.html#l00217">MCRegisterInfo.h:217</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_a9d017af749f76484cb9aec9ff6e4330c"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a9d017af749f76484cb9aec9ff6e4330c">llvm::MachineFunction::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00317">MachineFunction.h:317</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html"><div class="ttname"><a href="classllvm_1_1MachineFunction.html">llvm::MachineFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00075">MachineFunction.h:75</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_ab0789854909cf47f640a85fa2bac29c7"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ab0789854909cf47f640a85fa2bac29c7">llvm::MachineFunction::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00315">MachineFunction.h:315</a></div></div>
<div class="ttc" id="classllvm_1_1DenseSet_html"><div class="ttname"><a href="classllvm_1_1DenseSet.html">llvm::DenseSet</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00026">DenseSet.h:26</a></div></div>
<div class="ttc" id="namespacellvm_1_1HexagonII_html_ae6671c2e6222df7b72d9ff1399eea015a07258c6e441f361bbd59848f916ad445"><div class="ttname"><a href="namespacellvm_1_1HexagonII.html#ae6671c2e6222df7b72d9ff1399eea015a07258c6e441f361bbd59848f916ad445">llvm::HexagonII::MO_NO_FLAG</a></div><div class="ttdef"><b>Definition:</b> <a href="HexagonBaseInfo_8h_source.html#l00162">HexagonBaseInfo.h:162</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00534">DenseMap.h:534</a></div></div>
<div class="ttc" id="classllvm_1_1HexagonInstrInfo_html"><div class="ttname"><a href="classllvm_1_1HexagonInstrInfo.html">llvm::HexagonInstrInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="HexagonInstrInfo_8h_source.html#l00028">HexagonInstrInfo.h:28</a></div></div>
<div class="ttc" id="Debug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="Hexagon_8h_html"><div class="ttname"><a href="Hexagon_8h.html">Hexagon.h</a></div></div>
<div class="ttc" id="classllvm_1_1DebugLoc_html"><div class="ttname"><a href="classllvm_1_1DebugLoc.html">llvm::DebugLoc</a></div><div class="ttdef"><b>Definition:</b> <a href="DebugLoc_8h_source.html#l00028">DebugLoc.h:28</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_acbc921830578e2741be6549db716c0ce"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">llvm::MachineBasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00238">MachineBasicBlock.h:238</a></div></div>
<div class="ttc" id="classllvm_1_1HexagonSubtarget_html_a936c9929198edec8ce3c080ec43818e8"><div class="ttname"><a href="classllvm_1_1HexagonSubtarget.html#a936c9929198edec8ce3c080ec43818e8">llvm::HexagonSubtarget::hasV4TOps</a></div><div class="ttdeci">bool hasV4TOps() const </div><div class="ttdef"><b>Definition:</b> <a href="HexagonSubtarget_8h_source.html#l00059">HexagonSubtarget.h:59</a></div></div>
<div class="ttc" id="HexagonTargetMachine_8h_html"><div class="ttname"><a href="HexagonTargetMachine_8h.html">HexagonTargetMachine.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00109">CommandLine.h:109</a></div></div>
<div class="ttc" id="namespacellvm_1_1CodeGenOpt_html_a411055ea15209051c2370bbf655ec8d4a3393aeca011bfa5bdd6a8e64edd7f565"><div class="ttname"><a href="namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4a3393aeca011bfa5bdd6a8e64edd7f565">llvm::CodeGenOpt::Default</a></div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_8h_source.html#l00048">CodeGen.h:48</a></div></div>
<div class="ttc" id="X86DisassemblerDecoder_8h_html_a546839a5c4bcf9f9450967155f48de41"><div class="ttname"><a href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></div><div class="ttdeci">Reg</div><div class="ttdef"><b>Definition:</b> <a href="X86DisassemblerDecoder_8h_source.html#l00428">X86DisassemblerDecoder.h:428</a></div></div>
<div class="ttc" id="MachineFunction_8h_html"><div class="ttname"><a href="MachineFunction_8h.html">MachineFunction.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunctionPass_html"><div class="ttname"><a href="classllvm_1_1MachineFunctionPass.html">llvm::MachineFunctionPass</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunctionPass_8h_source.html#l00032">MachineFunctionPass.h:32</a></div></div>
<div class="ttc" id="HexagonCopyToCombine_8cpp_html_a1d40004718218dbdf06b496766299101"><div class="ttname"><a href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a></div><div class="ttdeci">const HexagonInstrInfo * TII</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCopyToCombine_8cpp_source.html#l00115">HexagonCopyToCombine.cpp:115</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a2ac18ceda9f2857fea2e5cc4e8bf4ff5"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a2ac18ceda9f2857fea2e5cc4e8bf4ff5">llvm::MachineOperand::isImm</a></div><div class="ttdeci">bool isImm() const </div><div class="ttdoc">isImm - Tests if this is a MO_Immediate operand. </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00226">MachineOperand.h:226</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_ad8198d6d83af9410d867136e33fbf4b2"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">llvm::MachineOperand::isReg</a></div><div class="ttdeci">bool isReg() const </div><div class="ttdoc">isReg - Tests if this is a MO_Register operand. </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00224">MachineOperand.h:224</a></div></div>
<div class="ttc" id="namespacellvm_html_a3e242f3485db990d043f2dcf91106ce7"><div class="ttname"><a href="namespacellvm.html#a3e242f3485db990d043f2dcf91106ce7">llvm::isInt&lt; 8 &gt;</a></div><div class="ttdeci">bool isInt&lt; 8 &gt;(int64_t x)</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00268">MathExtras.h:268</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_ac2421adbb9996e1b15f03a8abb6c70a8"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#ac2421adbb9996e1b15f03a8abb6c70a8">llvm::MachineInstr::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8cpp_source.html#l00846">MachineInstr.cpp:846</a></div></div>
<div class="ttc" id="MachineBasicBlock_8h_html"><div class="ttname"><a href="MachineBasicBlock_8h.html">MachineBasicBlock.h</a></div></div>
<div class="ttc" id="HexagonCopyToCombine_8cpp_html_a78c275fb9427a1e96516be0dbc847e09"><div class="ttname"><a href="HexagonCopyToCombine_8cpp.html#a78c275fb9427a1e96516be0dbc847e09">areCombinableOperations</a></div><div class="ttdeci">static bool areCombinableOperations(const TargetRegisterInfo *TRI, MachineInstr *HighRegInst, MachineInstr *LowRegInst)</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCopyToCombine_8cpp_source.html#l00172">HexagonCopyToCombine.cpp:172</a></div></div>
<div class="ttc" id="namespacellvm_html_ac0d2fcad7ebe5ec9820173109ebb4b69"><div class="ttname"><a href="namespacellvm.html#ac0d2fcad7ebe5ec9820173109ebb4b69">llvm::initializeHexagonCopyToCombinePass</a></div><div class="ttdeci">void initializeHexagonCopyToCombinePass(PassRegistry &amp;)</div></div>
<div class="ttc" id="namespacellvm_1_1CallingConv_html_a4f861731fc6dbfdccc05af5968d98974"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">llvm::CallingConv::ID</a></div><div class="ttdeci">ID</div><div class="ttdoc">LLVM Calling Convention Representation. </div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00026">CallingConv.h:26</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstrBuilder_html_a9f1fae6a5dbb6e378ca85df1fded8515"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#a9f1fae6a5dbb6e378ca85df1fded8515">llvm::MachineInstrBuilder::addImm</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addImm(int64_t Val) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00083">MachineInstrBuilder.h:83</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a7b5fe96d88954efc855e6c466207e535"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">llvm::MachineInstr::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00265">MachineInstr.h:265</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a58048141ed81d581f3fb9a797f3186ee"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a58048141ed81d581f3fb9a797f3186ee">llvm::MachineOperand::isGlobal</a></div><div class="ttdeci">bool isGlobal() const </div><div class="ttdoc">isGlobal - Tests if this is a MO_GlobalAddress operand. </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00242">MachineOperand.h:242</a></div></div>
<div class="ttc" id="CodeGen_8h_html"><div class="ttname"><a href="CodeGen_8h.html">CodeGen.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_aa21b508be8c212bdb0b28d734ab0ddb8"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#aa21b508be8c212bdb0b28d734ab0ddb8">llvm::MachineOperand::isKill</a></div><div class="ttdeci">bool isKill() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00289">MachineOperand.h:289</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a8b64b30189b85c9dd54292b7d1d08a70"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a8b64b30189b85c9dd54292b7d1d08a70">llvm::MachineInstr::readsRegister</a></div><div class="ttdeci">bool readsRegister(unsigned Reg, const TargetRegisterInfo *TRI=NULL) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00724">MachineInstr.h:724</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a242314c0ae0147d1a7ef54c9bc312616"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">llvm::MachineInstr::getOpcode</a></div><div class="ttdeci">int getOpcode() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00261">MachineInstr.h:261</a></div></div>
<div class="ttc" id="MachineInstrBuilder_8h_html"><div class="ttname"><a href="MachineInstrBuilder_8h.html">MachineInstrBuilder.h</a></div></div>
<div class="ttc" id="structllvm_1_1HexagonRegisterInfo_html"><div class="ttname"><a href="structllvm_1_1HexagonRegisterInfo.html">llvm::HexagonRegisterInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="HexagonRegisterInfo_8h_source.html#l00045">HexagonRegisterInfo.h:45</a></div></div>
<div class="ttc" id="HexagonCopyToCombine_8cpp_html_aed7913b49eca0bfcfd2bfdf00edc8671"><div class="ttname"><a href="HexagonCopyToCombine_8cpp.html#aed7913b49eca0bfcfd2bfdf00edc8671">MaxNumOfInstsBetweenNewValueStoreAndTFR</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; MaxNumOfInstsBetweenNewValueStoreAndTFR(&quot;max-num-inst-between-tfr-and-nv-store&quot;, cl::Hidden, cl::init(4), cl::desc(&quot;Maximum distance between a tfr feeding a store we &quot;&quot;consider the store still to be newifiable&quot;))</div></div>
<div class="ttc" id="classllvm_1_1TargetMachine_html_af567540acbc5289da300dcbc3b176c1c"><div class="ttname"><a href="classllvm_1_1TargetMachine.html#af567540acbc5289da300dcbc3b176c1c">llvm::TargetMachine::getOptLevel</a></div><div class="ttdeci">CodeGenOpt::Level getOptLevel() const </div><div class="ttdef"><b>Definition:</b> <a href="TargetMachine_8cpp_source.html#l00161">TargetMachine.cpp:161</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a7059d68a29d5ecfb37623ab45cdb4e8d"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a7059d68a29d5ecfb37623ab45cdb4e8d">llvm::MachineOperand::getImm</a></div><div class="ttdeci">int64_t getImm() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00402">MachineOperand.h:402</a></div></div>
<div class="ttc" id="namespacellvm_html_aac57d4100e9a9d02522fbd724568397d"><div class="ttname"><a href="namespacellvm.html#aac57d4100e9a9d02522fbd724568397d">llvm::getKillRegState</a></div><div class="ttdeci">unsigned getKillRegState(bool B)</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00389">MachineInstrBuilder.h:389</a></div></div>
<div class="ttc" id="MachineInstr_8h_html"><div class="ttname"><a href="MachineInstr_8h.html">MachineInstr.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_aabad9b72f6d20d3462efc34020d39f73"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">llvm::MachineInstr::getParent</a></div><div class="ttdeci">const MachineBasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00119">MachineInstr.h:119</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a1e1d26226c627cf3dcf3c191b85e7d7d"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a1e1d26226c627cf3dcf3c191b85e7d7d">llvm::MachineInstr::isDebugValue</a></div><div class="ttdeci">bool isDebugValue() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00639">MachineInstr.h:639</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ac51be7ff80fe8d6ae5e8c0acb194908a"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">llvm::MachineBasicBlock::iterator</a></div><div class="ttdeci">bundle_iterator&lt; MachineInstr, instr_iterator &gt; iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00212">MachineBasicBlock.h:212</a></div></div>
<div class="ttc" id="CommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00314">CommandLine.h:314</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a91aa25eac8330cdbab5f7f12fb29359d"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a91aa25eac8330cdbab5f7f12fb29359d">llvm::MachineOperand::getTargetFlags</a></div><div class="ttdeci">unsigned getTargetFlags() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00187">MachineOperand.h:187</a></div></div>
<div class="ttc" id="HexagonSubtarget_8h_html"><div class="ttname"><a href="HexagonSubtarget_8h.html">HexagonSubtarget.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a302e45878c6dc1714334c7ce96d56846"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">llvm::MachineInstr::getOperand</a></div><div class="ttdeci">const MachineOperand &amp; getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00267">MachineInstr.h:267</a></div></div>
<div class="ttc" id="structllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00286">CommandLine.h:286</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html">llvm::MachineBasicBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00062">MachineBasicBlock.h:62</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00037">PassAnalysisSupport.h:37</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a492234b10e0c5918d72a3a15a6f0fa6ea61d3cb794533763159788c493ad266d9"><div class="ttname"><a href="namespacellvm_1_1cl.html#a492234b10e0c5918d72a3a15a6f0fa6ea61d3cb794533763159788c493ad266d9">llvm::cl::ZeroOrMore</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00086">CommandLine.h:86</a></div></div>
<div class="ttc" id="namespacellvm_html_aa1704159f75e6eacd595962ea6d93ffe"><div class="ttname"><a href="namespacellvm.html#aa1704159f75e6eacd595962ea6d93ffe">llvm::next</a></div><div class="ttdeci">ItTy next(ItTy it, Dist n)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00154">STLExtras.h:154</a></div></div>
<div class="ttc" id="HexagonCopyToCombine_8cpp_html_ab49d3d8fb8a492a1210d909bcf69214d"><div class="ttname"><a href="HexagonCopyToCombine_8cpp.html#ab49d3d8fb8a492a1210d909bcf69214d">isUnsafeToMoveAcross</a></div><div class="ttdeci">static bool isUnsafeToMoveAcross(MachineInstr *I, unsigned UseReg, unsigned DestReg, const TargetRegisterInfo *TRI)</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCopyToCombine_8cpp_source.html#l00222">HexagonCopyToCombine.cpp:222</a></div></div>
<div class="ttc" id="DenseSet_8h_html"><div class="ttname"><a href="DenseSet_8h.html">DenseSet.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_ae9a10777fdedf716a21f450a3ceaafe3"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#ae9a10777fdedf716a21f450a3ceaafe3">llvm::MachineInstr::hasUnmodeledSideEffects</a></div><div class="ttdeci">bool hasUnmodeledSideEffects() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8cpp_source.html#l01343">MachineInstr.cpp:1343</a></div></div>
<div class="ttc" id="classllvm_1_1FunctionPass_html"><div class="ttname"><a href="classllvm_1_1FunctionPass.html">llvm::FunctionPass</a></div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00293">Pass.h:293</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_ae73de4f077ea9862af9611652396202b"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ae73de4f077ea9862af9611652396202b">llvm::MachineOperand::getOffset</a></div><div class="ttdeci">int64_t getOffset() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00445">MachineOperand.h:445</a></div></div>
<div class="ttc" id="HexagonMachineFunctionInfo_8h_html"><div class="ttname"><a href="HexagonMachineFunctionInfo_8h.html">HexagonMachineFunctionInfo.h</a></div></div>
<div class="ttc" id="DenseMap_8h_html"><div class="ttname"><a href="DenseMap_8h.html">DenseMap.h</a></div></div>
<div class="ttc" id="namespacellvm_html_a980570dc1410d4ef53806f82028ca381"><div class="ttname"><a href="namespacellvm.html#a980570dc1410d4ef53806f82028ca381">llvm::BuildMI</a></div><div class="ttdeci">MachineInstrBuilder BuildMI(MachineFunction &amp;MF, DebugLoc DL, const MCInstrDesc &amp;MCID)</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00223">MachineInstrBuilder.h:223</a></div></div>
<div class="ttc" id="HexagonCopyToCombine_8cpp_html_a5df978db14d9312ff239d4a38e6489cb"><div class="ttname"><a href="HexagonCopyToCombine_8cpp.html#a5df978db14d9312ff239d4a38e6489cb">removeKillInfo</a></div><div class="ttdeci">static void removeKillInfo(MachineInstr *MI, unsigned RegNotKilled)</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCopyToCombine_8cpp_source.html#l00211">HexagonCopyToCombine.cpp:211</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html">llvm::TargetRegisterInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00219">TargetRegisterInfo.h:219</a></div></div>
<div class="ttc" id="classllvm_1_1MCSubRegIterator_html"><div class="ttname"><a href="classllvm_1_1MCSubRegIterator.html">llvm::MCSubRegIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="MCRegisterInfo_8h_source.html#l00441">MCRegisterInfo.h:441</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a8a82683fccdef8a5ef772ef03277aee7"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a8a82683fccdef8a5ef772ef03277aee7">llvm::MachineOperand::setIsKill</a></div><div class="ttdeci">void setIsKill(bool Val=true)</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00367">MachineOperand.h:367</a></div></div>
<div class="ttc" id="classllvm_1_1TargetMachine_html_ac13d0f6f2c915757013b101ef6e8afbc"><div class="ttname"><a href="classllvm_1_1TargetMachine.html#ac13d0f6f2c915757013b101ef6e8afbc">llvm::TargetMachine::getInstrInfo</a></div><div class="ttdeci">virtual const TargetInstrInfo * getInstrInfo() const </div><div class="ttdef"><b>Definition:</b> <a href="Target_2TargetMachine_8h_source.html#l00119">Target/TargetMachine.h:119</a></div></div>
<div class="ttc" id="PassSupport_8h_html"><div class="ttname"><a href="PassSupport_8h.html">PassSupport.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html"><div class="ttname"><a href="classllvm_1_1MachineOperand.html">llvm::MachineOperand</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00043">MachineOperand.h:43</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_acd9af7d3f8a155c4356edccbc0522c8e"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#acd9af7d3f8a155c4356edccbc0522c8e">llvm::MachineInstr::isInlineAsm</a></div><div class="ttdeci">bool isInlineAsm() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00651">MachineInstr.h:651</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a8de7d5cf38939044471c6ee60a01a3df"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a8de7d5cf38939044471c6ee60a01a3df">llvm::MachineOperand::isDef</a></div><div class="ttdeci">bool isDef() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00274">MachineOperand.h:274</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_aff83f9aeef903ed06c5098f5172624ed"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#aff83f9aeef903ed06c5098f5172624ed">llvm::MachineInstr::killsRegister</a></div><div class="ttdeci">bool killsRegister(unsigned Reg, const TargetRegisterInfo *TRI=NULL) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00745">MachineInstr.h:745</a></div></div>
<div class="ttc" id="CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2README_8txt_source.html#l00036">CodeGen/README.txt:36</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstrBuilder_html_aec72fc7a6cc79a1ef53e5d5dbccb846c"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#aec72fc7a6cc79a1ef53e5d5dbccb846c">llvm::MachineInstrBuilder::addGlobalAddress</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addGlobalAddress(const GlobalValue *GV, int64_t Offset=0, unsigned char TargetFlags=0) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00129">MachineInstrBuilder.h:129</a></div></div>
<div class="ttc" id="HexagonCopyToCombine_8cpp_html_a95756fc2847ee79172165e345f645e86"><div class="ttname"><a href="HexagonCopyToCombine_8cpp.html#a95756fc2847ee79172165e345f645e86">ShouldCombineAggressively</a></div><div class="ttdeci">const HexagonInstrInfo bool ShouldCombineAggressively</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCopyToCombine_8cpp_source.html#l00116">HexagonCopyToCombine.cpp:116</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html"><div class="ttname"><a href="classllvm_1_1MachineInstr.html">llvm::MachineInstr</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00050">MachineInstr.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterInfo_html_a055858b14215864ed367a8db6c19d6f6"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#a055858b14215864ed367a8db6c19d6f6">llvm::TargetRegisterInfo::isPhysicalRegister</a></div><div class="ttdeci">static bool isPhysicalRegister(unsigned Reg)</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00280">TargetRegisterInfo.h:280</a></div></div>
<div class="ttc" id="classllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l01149">CommandLine.h:1149</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunctionPass_html_aa1eece37d175f86a6f4808c0c167f13b"><div class="ttname"><a href="classllvm_1_1MachineFunctionPass.html#aa1eece37d175f86a6f4808c0c167f13b">llvm::MachineFunctionPass::getAnalysisUsage</a></div><div class="ttdeci">virtual void getAnalysisUsage(AnalysisUsage &amp;AU) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineFunctionPass_8cpp_source.html#l00036">MachineFunctionPass.cpp:36</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a57bf9ee7219097ff0f98da23a3b3b782"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a57bf9ee7219097ff0f98da23a3b3b782">llvm::MachineOperand::isUse</a></div><div class="ttdeci">bool isUse() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00269">MachineOperand.h:269</a></div></div>
<div class="ttc" id="TargetRegisterInfo_8h_html"><div class="ttname"><a href="TargetRegisterInfo_8h.html">TargetRegisterInfo.h</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_a6745c3bfdfc5b0643b078b96df2db252"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a6745c3bfdfc5b0643b078b96df2db252">llvm::MachineFunction::getTarget</a></div><div class="ttdeci">const TargetMachine &amp; getTarget() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00163">MachineFunction.h:163</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ab2d91e7bec944efcbc39d8e30644f111"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">llvm::MachineBasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00236">MachineBasicBlock.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1TargetMachine_html_a70b47eca6a99c87b81f4c1b1455dc090"><div class="ttname"><a href="classllvm_1_1TargetMachine.html#a70b47eca6a99c87b81f4c1b1455dc090">llvm::TargetMachine::getRegisterInfo</a></div><div class="ttdeci">virtual const TargetRegisterInfo * getRegisterInfo() const </div><div class="ttdef"><b>Definition:</b> <a href="Target_2TargetMachine_8h_source.html#l00140">Target/TargetMachine.h:140</a></div></div>
<div class="ttc" id="HexagonCopyToCombine_8cpp_html_a95fe48c7663a8afaa185d6e916697318"><div class="ttname"><a href="HexagonCopyToCombine_8cpp.html#a95fe48c7663a8afaa185d6e916697318">isGreaterThan6BitTFRI</a></div><div class="ttdeci">static bool isGreaterThan6BitTFRI(MachineInstr *I)</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCopyToCombine_8cpp_source.html#l00165">HexagonCopyToCombine.cpp:165</a></div></div>
<div class="ttc" id="structllvm_1_1HexagonRegisterInfo_html_ab3b851da35f5445c3a29adf00a34a7cc"><div class="ttname"><a href="structllvm_1_1HexagonRegisterInfo.html#ab3b851da35f5445c3a29adf00a34a7cc">llvm::HexagonRegisterInfo::Subtarget</a></div><div class="ttdeci">HexagonSubtarget &amp; Subtarget</div><div class="ttdef"><b>Definition:</b> <a href="HexagonRegisterInfo_8h_source.html#l00046">HexagonRegisterInfo.h:46</a></div></div>
<div class="ttc" id="HexagonCopyToCombine_8cpp_html_a661b945147a53ef2ecf91646a481e67c"><div class="ttname"><a href="HexagonCopyToCombine_8cpp.html#a661b945147a53ef2ecf91646a481e67c">isEvenReg</a></div><div class="ttdeci">static bool isEvenReg(unsigned Reg)</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCopyToCombine_8cpp_source.html#l00205">HexagonCopyToCombine.cpp:205</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_ab75f703d251cc0ce0206fe00a999db86"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">llvm::MachineOperand::getReg</a></div><div class="ttdeci">unsigned getReg() const </div><div class="ttdoc">getReg - Returns the register number. </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00259">MachineOperand.h:259</a></div></div>
<div class="ttc" id="HexagonCopyToCombine_8cpp_html_a56beda5df95cde2b88959d373e1671c6"><div class="ttname"><a href="HexagonCopyToCombine_8cpp.html#a56beda5df95cde2b88959d373e1671c6">isGreaterThan8BitTFRI</a></div><div class="ttdeci">static bool isGreaterThan8BitTFRI(MachineInstr *I)</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCopyToCombine_8cpp_source.html#l00161">HexagonCopyToCombine.cpp:161</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a0848c971395758cf592821550b725853"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a0848c971395758cf592821550b725853">llvm::MachineBasicBlock::reverse_iterator</a></div><div class="ttdeci">std::reverse_iterator&lt; iterator &gt; reverse_iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00216">MachineBasicBlock.h:216</a></div></div>
<div class="ttc" id="MachineFunctionPass_8h_html"><div class="ttname"><a href="MachineFunctionPass_8h.html">MachineFunctionPass.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1A64CC_html_af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442"><div class="ttname"><a href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">llvm::A64CC::MI</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00035">AArch64BaseInfo.h:35</a></div></div>
<div class="ttc" id="HexagonRegisterInfo_8h_html"><div class="ttname"><a href="HexagonRegisterInfo_8h.html">HexagonRegisterInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_a340712de3e78fec11c338735cab17df7"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">llvm::MachineFunction::iterator</a></div><div class="ttdeci">BasicBlockListType::iterator iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00303">MachineFunction.h:303</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_ab8fd10f439804d8d7872bc1389653fce"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#ab8fd10f439804d8d7872bc1389653fce">llvm::MachineInstr::addRegisterKilled</a></div><div class="ttdeci">bool addRegisterKilled(unsigned IncomingReg, const TargetRegisterInfo *RegInfo, bool AddIfNotFound=false)</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8cpp_source.html#l01635">MachineInstr.cpp:1635</a></div></div>
<div class="ttc" id="classllvm_1_1PassRegistry_html"><div class="ttname"><a href="classllvm_1_1PassRegistry.html">llvm::PassRegistry</a></div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8h_source.html#l00035">PassRegistry.h:35</a></div></div>
<div class="ttc" id="raw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="CodeGen_2Passes_8h_html"><div class="ttname"><a href="CodeGen_2Passes_8h.html">Passes.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstrBuilder_html_a5125cce72b214df09ca8f93dcbbf4c3a"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#a5125cce72b214df09ca8f93dcbbf4c3a">llvm::MachineInstrBuilder::addReg</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addReg(unsigned RegNo, unsigned flags=0, unsigned SubReg=0) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00064">MachineInstrBuilder.h:64</a></div></div>
<div class="ttc" id="HexagonInstrInfo_8h_html"><div class="ttname"><a href="HexagonInstrInfo_8h.html">HexagonInstrInfo.h</a></div></div>
<div class="ttc" id="HexagonCopyToCombine_8cpp_html_a3fcb3265c8ccec2bf758d10b61848e6e"><div class="ttname"><a href="HexagonCopyToCombine_8cpp.html#a3fcb3265c8ccec2bf758d10b61848e6e">IsCombinesDisabled</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; IsCombinesDisabled(&quot;disable-merge-into-combines&quot;, cl::Hidden, cl::ZeroOrMore, cl::init(false), cl::desc(&quot;Disable merging into combines&quot;))</div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_abbf52e5d5823c0724fe7b8385d3157d9"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#abbf52e5d5823c0724fe7b8385d3157d9">llvm::MachineInstr::modifiesRegister</a></div><div class="ttdeci">bool modifiesRegister(unsigned Reg, const TargetRegisterInfo *TRI) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00760">MachineInstr.h:760</a></div></div>
<div class="ttc" id="classllvm_1_1HexagonInstrInfo_html_ac1ac5e627367b7a6b194c11bdc613ae9"><div class="ttname"><a href="classllvm_1_1HexagonInstrInfo.html#ac1ac5e627367b7a6b194c11bdc613ae9">llvm::HexagonInstrInfo::mayBeNewStore</a></div><div class="ttdeci">bool mayBeNewStore(const MachineInstr *MI) const </div><div class="ttdef"><b>Definition:</b> <a href="HexagonInstrInfo_8cpp_source.html#l01023">HexagonInstrInfo.cpp:1023</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 22:58:47 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
