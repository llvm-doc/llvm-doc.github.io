<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: BlockFrequencyImpl.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('BlockFrequencyImpl_8h_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">BlockFrequencyImpl.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="BlockFrequencyImpl_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===-- BlockFrequencyImpl.h - Block Frequency Implementation --*- C++ -*--===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// Shared implementation of BlockFrequency for IR and Machine Instructions.</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#ifndef LLVM_ANALYSIS_BLOCKFREQUENCYIMPL_H</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#define LLVM_ANALYSIS_BLOCKFREQUENCYIMPL_H</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseMap_8h.html">llvm/ADT/DenseMap.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PostOrderIterator_8h.html">llvm/ADT/PostOrderIterator.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineBasicBlock_8h.html">llvm/CodeGen/MachineBasicBlock.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineFunction_8h.html">llvm/CodeGen/MachineFunction.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlock_8h.html">llvm/IR/BasicBlock.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BlockFrequency_8h.html">llvm/Support/BlockFrequency.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BranchProbability_8h.html">llvm/Support/BranchProbability.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="keyword">class </span>BlockFrequencyInfo;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="keyword">class </span>MachineBlockFrequencyInfo;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">/// BlockFrequencyImpl implements block frequency algorithm for IR and</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">/// Machine Instructions. Algorithm starts with value ENTRY_FREQ</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">/// for the entry block and then propagates frequencies using branch weights</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">/// from (Machine)BranchProbabilityInfo. LoopInfo is not required because</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">/// algorithm can find &quot;backedges&quot; by itself.</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment"></span><span class="keyword">template</span>&lt;<span class="keyword">class</span> BlockT, <span class="keyword">class</span> FunctionT, <span class="keyword">class</span> BlockProbInfoT&gt;</div><div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="classllvm_1_1BlockFrequencyImpl.html">   41</a></span>&#160;<span class="keyword">class </span><a class="code" href="classllvm_1_1BlockFrequencyImpl.html">BlockFrequencyImpl</a> {</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;const BlockT *, BlockFrequency&gt;</a> Freqs;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  BlockProbInfoT *BPI;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  FunctionT *Fn;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="structllvm_1_1GraphTraits.html">GraphTraits&lt; Inverse&lt;BlockT *&gt;</a> &gt; <a class="code" href="structllvm_1_1GraphTraits.html">GT</a>;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="keyword">const</span> uint32_t EntryFreq;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  std::string getBlockName(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)<span class="keyword"> const </span>{</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keywordflow">return</span> BB-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>().<a class="code" href="classllvm_1_1StringRef.html#ab02cb6f4884b5c788efb97b6741dccaf">str</a>();</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  }</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  std::string getBlockName(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB)<span class="keyword"> const </span>{</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    std::string str;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <a class="code" href="classllvm_1_1raw__string__ostream.html">raw_string_ostream</a> ss(str);</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    ss &lt;&lt; <span class="stringliteral">&quot;BB#&quot;</span> &lt;&lt; MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>();</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB = MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a2961c31b29db17a4f2964899c8569a64">getBasicBlock</a>())</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;      ss &lt;&lt; <span class="stringliteral">&quot; derived from LLVM BB &quot;</span> &lt;&lt; BB-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>();</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordflow">return</span> ss.<a class="code" href="classllvm_1_1raw__string__ostream.html#ae086260f8c216554ff46dcd96e171459">str</a>();</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  }</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <span class="keywordtype">void</span> setBlockFreq(BlockT *BB, <a class="code" href="classllvm_1_1BlockFrequency.html">BlockFrequency</a> Freq) {</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    Freqs[<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>] = Freq;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Frequency(&quot;</span> &lt;&lt; getBlockName(BB) &lt;&lt; <span class="stringliteral">&quot;) = &quot;</span> &lt;&lt; Freq &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  }</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">  /// getEdgeFreq - Return edge frequency based on SRC frequency and Src -&gt; Dst</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">  /// edge probability.</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1BlockFrequency.html">BlockFrequency</a> getEdgeFreq(BlockT *Src, BlockT *Dst)<span class="keyword"> const </span>{</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a> Prob = BPI-&gt;getEdgeProbability(Src, Dst);</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BlockFrequencyImpl.html#ace906837b07e8ac29dab7987c24eb9f5">getBlockFreq</a>(Src) * Prob;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  }</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">  /// incBlockFreq - Increase BB block frequency by FREQ.</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> incBlockFreq(BlockT *BB, <a class="code" href="classllvm_1_1BlockFrequency.html">BlockFrequency</a> Freq) {</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    Freqs[<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>] += Freq;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Frequency(&quot;</span> &lt;&lt; getBlockName(BB) &lt;&lt; <span class="stringliteral">&quot;) += &quot;</span> &lt;&lt; Freq</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot; --&gt; &quot;</span> &lt;&lt; Freqs[BB] &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  }</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="comment">// All blocks in postorder.</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  std::vector&lt;BlockT *&gt; POT;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="comment">// Map Block -&gt; Position in reverse-postorder list.</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;BlockT *, unsigned&gt;</a> RPO;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="comment">// For each loop header, record the per-iteration probability of exiting the</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="comment">// loop. This is the reciprocal of the expected number of loop iterations.</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;BlockT*, BranchProbability&gt;</a> <a class="code" href="classllvm_1_1DenseMap.html">LoopExitProbMap</a>;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  LoopExitProbMap LoopExitProb;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="comment">// (reverse-)postorder traversal iterators.</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> std::vector&lt;BlockT *&gt;::iterator pot_iterator;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="namespacellvm_1_1sys_1_1path.html#a8fb092ecc42706d8901ee791cd6c90a7">std::vector&lt;BlockT *&gt;::reverse_iterator</a> rpot_iterator;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  pot_iterator pot_begin() { <span class="keywordflow">return</span> POT.begin(); }</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  pot_iterator pot_end() { <span class="keywordflow">return</span> POT.end(); }</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  rpot_iterator rpot_begin() { <span class="keywordflow">return</span> POT.rbegin(); }</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  rpot_iterator rpot_end() { <span class="keywordflow">return</span> POT.rend(); }</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  rpot_iterator rpot_at(BlockT *BB) {</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    rpot_iterator <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = rpot_begin();</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordtype">unsigned</span> idx = RPO.<a class="code" href="classllvm_1_1DenseMapBase.html#acfd7cc74125222a81c02b4097ed5166c">lookup</a>(BB);</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    assert(idx);</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <a class="code" href="namespacellvm_1_1object.html#a63a8f680ecd1aa68ae0efdd3b5c4f4a7">std::advance</a>(I, idx - 1);</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    assert(*I == BB);</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  }</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">  /// isBackedge - Return if edge Src -&gt; Dst is a reachable backedge.</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> isBackedge(BlockT *Src, BlockT *Dst)<span class="keyword"> const </span>{</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="Target_2X86_2README_8txt.html#a668d6902e1f37328dfbbb1f75aa82fc9">a</a> = RPO.<a class="code" href="classllvm_1_1DenseMapBase.html#acfd7cc74125222a81c02b4097ed5166c">lookup</a>(Src);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">if</span> (!a)</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="Target_2ARM_2README_8txt.html#acdf5bf3bbc10f9331f56441a4d483bb1">b</a> = RPO.<a class="code" href="classllvm_1_1DenseMapBase.html#acfd7cc74125222a81c02b4097ed5166c">lookup</a>(Dst);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    assert(b &amp;&amp; <span class="stringliteral">&quot;Destination block should be reachable&quot;</span>);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">return</span> a &gt;= <a class="code" href="Target_2ARM_2README_8txt.html#acdf5bf3bbc10f9331f56441a4d483bb1">b</a>;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  }</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">  /// getSingleBlockPred - return single BB block predecessor or NULL if</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">  /// BB has none or more predecessors.</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment"></span>  BlockT *getSingleBlockPred(BlockT *BB) {</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keyword">typename</span> GT::ChildIteratorType</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      PI = <a class="code" href="structllvm_1_1GraphTraits.html">GraphTraits&lt; Inverse&lt;BlockT *&gt;</a> &gt;::child_begin(BB),</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      PE = <a class="code" href="structllvm_1_1GraphTraits.html">GraphTraits&lt; Inverse&lt;BlockT *&gt;</a> &gt;::child_end(BB);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordflow">if</span> (PI == PE)</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    BlockT *Pred = *PI;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    ++PI;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">if</span> (PI != PE)</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">return</span> Pred;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  }</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="keywordtype">void</span> doBlock(BlockT *BB, BlockT *LoopHead,</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;               <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BlockT *, 8&gt;</a> &amp;BlocksInLoop) {</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;doBlock(&quot;</span> &lt;&lt; getBlockName(BB) &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>);</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    setBlockFreq(BB, 0);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordflow">if</span> (BB == LoopHead) {</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      setBlockFreq(BB, EntryFreq);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    }</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keywordflow">if</span>(BlockT *Pred = getSingleBlockPred(BB)) {</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      <span class="keywordflow">if</span> (BlocksInLoop.<a class="code" href="classllvm_1_1SmallPtrSet.html#a2ced6343b8ad006a757059554bbf9f37">count</a>(Pred))</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        setBlockFreq(BB, getEdgeFreq(Pred, BB));</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      <span class="comment">// TODO: else? irreducible, ignore it for now.</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    }</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keywordtype">bool</span> isInLoop = <span class="keyword">false</span>;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordtype">bool</span> isLoopHead = <span class="keyword">false</span>;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">typename</span> GT::ChildIteratorType</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;         PI = <a class="code" href="structllvm_1_1GraphTraits.html">GraphTraits</a>&lt; <a class="code" href="structllvm_1_1Inverse.html">Inverse&lt;BlockT *&gt;</a> &gt;::child_begin(BB),</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;         PE = <a class="code" href="structllvm_1_1GraphTraits.html">GraphTraits&lt; Inverse&lt;BlockT *&gt;</a> &gt;::child_end(BB);</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;         PI != PE; ++PI) {</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      BlockT *Pred = *PI;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      <span class="keywordflow">if</span> (isBackedge(Pred, BB)) {</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        isLoopHead = <span class="keyword">true</span>;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (BlocksInLoop.<a class="code" href="classllvm_1_1SmallPtrSet.html#a2ced6343b8ad006a757059554bbf9f37">count</a>(Pred)) {</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        incBlockFreq(BB, getEdgeFreq(Pred, BB));</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        isInLoop = <span class="keyword">true</span>;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      }</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;      <span class="comment">// TODO: else? irreducible.</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    }</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordflow">if</span> (!isInLoop)</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">if</span> (!isLoopHead)</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="comment">// This block is a loop header, so boost its frequency by the expected</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="comment">// number of loop iterations. The loop blocks will be revisited so they all</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="comment">// get this boost.</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keyword">typename</span> <a class="code" href="classllvm_1_1DenseMapIterator.html">LoopExitProbMap::const_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = LoopExitProb.<a class="code" href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">find</a>(BB);</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    assert(I != LoopExitProb.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>() &amp;&amp; <span class="stringliteral">&quot;Loop header missing from table&quot;</span>);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    Freqs[<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>] /= I-&gt;second;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Loop header scaled to &quot;</span> &lt;&lt; Freqs[BB] &lt;&lt; <span class="stringliteral">&quot;.\n&quot;</span>);</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  }</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">  /// doLoop - Propagate block frequency down through the loop.</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> doLoop(BlockT *Head, BlockT *Tail) {</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;doLoop(&quot;</span> &lt;&lt; getBlockName(Head) &lt;&lt; <span class="stringliteral">&quot;, &quot;</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                 &lt;&lt; getBlockName(Tail) &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>);</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BlockT *, 8&gt;</a> BlocksInLoop;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordflow">for</span> (rpot_iterator <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = rpot_at(Head), E = rpot_at(Tail); ; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      BlockT *BB = *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      doBlock(BB, Head, BlocksInLoop);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      BlocksInLoop.<a class="code" href="classllvm_1_1SmallPtrSet.html#a9b6dd0fc7a648a939e571246045b673e">insert</a>(BB);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> == E)</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    }</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="comment">// Compute loop&#39;s cyclic probability using backedges probabilities.</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <a class="code" href="classllvm_1_1BlockFrequency.html">BlockFrequency</a> BackFreq;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">typename</span> GT::ChildIteratorType</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;         PI = <a class="code" href="structllvm_1_1GraphTraits.html">GraphTraits</a>&lt; <a class="code" href="structllvm_1_1Inverse.html">Inverse&lt;BlockT *&gt;</a> &gt;::child_begin(Head),</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;         PE = <a class="code" href="structllvm_1_1GraphTraits.html">GraphTraits</a>&lt; <a class="code" href="structllvm_1_1Inverse.html">Inverse&lt;BlockT *&gt;</a> &gt;::child_end(Head);</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;         PI != PE; ++PI) {</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      BlockT *Pred = *PI;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;      assert(Pred);</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      <span class="keywordflow">if</span> (isBackedge(Pred, Head))</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        BackFreq += getEdgeFreq(Pred, Head);</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    }</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="comment">// The cyclic probability is freq(BackEdges) / freq(Head), where freq(Head)</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="comment">// only counts edges entering the loop, not the loop backedges.</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="comment">// The probability of leaving the loop on each iteration is:</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="comment">//   ExitProb = 1 - CyclicProb</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="comment">// The Expected number of loop iterations is:</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="comment">//   Iterations = 1 / ExitProb</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    uint64_t D = std::max(<a class="code" href="classllvm_1_1BlockFrequencyImpl.html#ace906837b07e8ac29dab7987c24eb9f5">getBlockFreq</a>(Head).getFrequency(), UINT64_C(1));</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    uint64_t <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> = std::max(BackFreq.<a class="code" href="classllvm_1_1BlockFrequency.html#acd0d5be21046a46d1ffa3646dc8790fc">getFrequency</a>(), UINT64_C(1));</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keywordflow">if</span> (N &lt; D)</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      N = D - <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      <span class="comment">// We&#39;d expect N &lt; D, but rounding and saturation means that can&#39;t be</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      <span class="comment">// guaranteed.</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      N = 1;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="comment">// Now ExitProb = N / D, make sure it fits in an i32/i32 fraction.</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    assert(N &lt;= D);</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keywordflow">if</span> (D &gt; UINT32_MAX) {</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a> = 32 - <a class="code" href="namespacellvm.html#a85acbc71797c5df4b82f6c527ff9ad1a">countLeadingZeros</a>(D);</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      D &gt;&gt;= <a class="code" href="Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      N &gt;&gt;= <a class="code" href="Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      <span class="keywordflow">if</span> (N == 0)</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        N = 1;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    }</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a> LEP = <a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a>(N, D);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    LoopExitProb.<a class="code" href="classllvm_1_1DenseMapBase.html#a699a66e504b48fdeff124e82f6c61917">insert</a>(std::make_pair(Head, LEP));</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LoopExitProb[&quot;</span> &lt;&lt; getBlockName(Head) &lt;&lt; <span class="stringliteral">&quot;] = &quot;</span> &lt;&lt; LEP</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot; from 1 - &quot;</span> &lt;&lt; BackFreq &lt;&lt; <span class="stringliteral">&quot; / &quot;</span> &lt;&lt; <a class="code" href="classllvm_1_1BlockFrequencyImpl.html#ace906837b07e8ac29dab7987c24eb9f5">getBlockFreq</a>(Head)</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot;.\n&quot;</span>);</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  }</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div><div class="line"><a name="l00263"></a><span class="lineno"><a class="line" href="classllvm_1_1BlockFrequencyImpl.html#a894e9285182222a3fa28bbbcf36407ce">  263</a></span>&#160;  <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a>;</div><div class="line"><a name="l00264"></a><span class="lineno"><a class="line" href="classllvm_1_1BlockFrequencyImpl.html#a596ffd7332dc9ba045e1e27f64f10d07">  264</a></span>&#160;  <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classllvm_1_1MachineBlockFrequencyInfo.html">MachineBlockFrequencyInfo</a>;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <a class="code" href="classllvm_1_1BlockFrequencyImpl.html">BlockFrequencyImpl</a>() : EntryFreq(<a class="code" href="classllvm_1_1BlockFrequency.html">BlockFrequency</a>::getEntryFrequency()) { }</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="keywordtype">void</span> doFunction(FunctionT *fn, BlockProbInfoT *bpi) {</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    Fn = fn;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    BPI = bpi;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="comment">// Clear everything.</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    RPO.<a class="code" href="classllvm_1_1DenseMapBase.html#a6467bd6bb128c8b69a478548fc17351c">clear</a>();</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    POT.clear();</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    LoopExitProb.<a class="code" href="classllvm_1_1DenseMapBase.html#a6467bd6bb128c8b69a478548fc17351c">clear</a>();</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    Freqs.<a class="code" href="classllvm_1_1DenseMapBase.html#a6467bd6bb128c8b69a478548fc17351c">clear</a>();</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    BlockT *EntryBlock = fn-&gt;begin();</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    std::copy(<a class="code" href="namespacellvm.html#a8a736f0023b19d73f205d93fec7094a8">po_begin</a>(EntryBlock), <a class="code" href="namespacellvm.html#a31c465b4d456accd132c6dc332316b92">po_end</a>(EntryBlock), std::back_inserter(POT));</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordtype">unsigned</span> RPOidx = 0;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordflow">for</span> (rpot_iterator <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = rpot_begin(), E = rpot_end(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      BlockT *BB = *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      RPO[<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>] = ++RPOidx;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;RPO[&quot;</span> &lt;&lt; <a class="code" href="MachineBlockPlacement_8cpp.html#a420a575a5cc23a356c5cbdbe9f98ca78">getBlockName</a>(BB) &lt;&lt; <span class="stringliteral">&quot;] = &quot;</span> &lt;&lt; RPO[BB] &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    }</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="comment">// Travel over all blocks in postorder.</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordflow">for</span> (pot_iterator <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = pot_begin(), E = pot_end(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      BlockT *BB = *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      BlockT *LastTail = 0;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;POT: &quot;</span> &lt;&lt; <a class="code" href="MachineBlockPlacement_8cpp.html#a420a575a5cc23a356c5cbdbe9f98ca78">getBlockName</a>(BB) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">typename</span> GT::ChildIteratorType</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;           PI = <a class="code" href="structllvm_1_1GraphTraits.html">GraphTraits</a>&lt; <a class="code" href="structllvm_1_1Inverse.html">Inverse&lt;BlockT *&gt;</a> &gt;::child_begin(BB),</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;           PE = <a class="code" href="structllvm_1_1GraphTraits.html">GraphTraits</a>&lt; <a class="code" href="structllvm_1_1Inverse.html">Inverse&lt;BlockT *&gt;</a> &gt;::child_end(BB);</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;           PI != PE; ++PI) {</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        BlockT *Pred = *PI;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <span class="keywordflow">if</span> (isBackedge(Pred, BB) &amp;&amp; (!LastTail || RPO[Pred] &gt; RPO[LastTail]))</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;          LastTail = Pred;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      }</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      <span class="keywordflow">if</span> (LastTail)</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        doLoop(BB, LastTail);</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    }</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="comment">// At the end assume the whole function as a loop, and travel over it once</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="comment">// again.</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    doLoop(*(rpot_begin()), *(pot_begin()));</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  }</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="keyword">public</span>:<span class="comment"></span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment">  /// getBlockFreq - Return block frequency. Return 0 if we don&#39;t have it.</span></div><div class="line"><a name="l00316"></a><span class="lineno"><a class="line" href="classllvm_1_1BlockFrequencyImpl.html#ace906837b07e8ac29dab7987c24eb9f5">  316</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1BlockFrequency.html">BlockFrequency</a> <a class="code" href="classllvm_1_1BlockFrequencyImpl.html#ace906837b07e8ac29dab7987c24eb9f5">getBlockFreq</a>(<span class="keyword">const</span> BlockT *BB)<span class="keyword"> const </span>{</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keyword">typename</span> <a class="code" href="classllvm_1_1DenseMapIterator.html">DenseMap&lt;const BlockT *, BlockFrequency&gt;::const_iterator</a></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Freqs.<a class="code" href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">find</a>(BB);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">if</span> (I != Freqs.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>())</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      <span class="keywordflow">return</span> I-&gt;second;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  }</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div><div class="line"><a name="l00324"></a><span class="lineno"><a class="line" href="classllvm_1_1BlockFrequencyImpl.html#aeed733650289931147228bb88554c610">  324</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BlockFrequencyImpl.html#aeed733650289931147228bb88554c610">print</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;OS)<span class="keyword"> const </span>{</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    OS &lt;&lt; <span class="stringliteral">&quot;\n\n---- Block Freqs ----\n&quot;</span>;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">typename</span> FunctionT::iterator <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Fn-&gt;begin(), E = Fn-&gt;end(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E;) {</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      BlockT *BB = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      OS &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="MachineBlockPlacement_8cpp.html#a420a575a5cc23a356c5cbdbe9f98ca78">getBlockName</a>(BB) &lt;&lt; <span class="stringliteral">&quot; = &quot;</span> &lt;&lt; <a class="code" href="classllvm_1_1BlockFrequencyImpl.html#ace906837b07e8ac29dab7987c24eb9f5">getBlockFreq</a>(BB) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">typename</span> <a class="code" href="structllvm_1_1GraphTraits.html">GraphTraits&lt;BlockT *&gt;::ChildIteratorType</a></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;           SI = <a class="code" href="structllvm_1_1GraphTraits.html">GraphTraits&lt;BlockT *&gt;::child_begin</a>(BB),</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;           SE = <a class="code" href="structllvm_1_1GraphTraits.html">GraphTraits&lt;BlockT *&gt;::child_end</a>(BB); SI != SE; ++SI) {</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        BlockT *Succ = *SI;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        OS &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> &lt;&lt; <a class="code" href="MachineBlockPlacement_8cpp.html#a420a575a5cc23a356c5cbdbe9f98ca78">getBlockName</a>(BB) &lt;&lt; <span class="stringliteral">&quot; -&gt; &quot;</span> &lt;&lt; <a class="code" href="MachineBlockPlacement_8cpp.html#a420a575a5cc23a356c5cbdbe9f98ca78">getBlockName</a>(Succ)</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;           &lt;&lt; <span class="stringliteral">&quot; = &quot;</span> &lt;&lt; getEdgeFreq(BB, Succ) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      }</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    }</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  }</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00340"></a><span class="lineno"><a class="line" href="classllvm_1_1BlockFrequencyImpl.html#a9718b70c87334a36db8a02730107b781">  340</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BlockFrequencyImpl.html#a9718b70c87334a36db8a02730107b781">dump</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <a class="code" href="classllvm_1_1BlockFrequencyImpl.html#aeed733650289931147228bb88554c610">print</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>());</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  }</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;};</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;}</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="preprocessor">#endif</span></div><div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a6acda287e5c19ffb173b0bf8f1dd9c5e"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">llvm::MachineBasicBlock::getNumber</a></div><div class="ttdeci">int getNumber() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00615">MachineBasicBlock.h:615</a></div></div>
<div class="ttc" id="structllvm_1_1GraphTraits_html"><div class="ttname"><a href="structllvm_1_1GraphTraits.html">llvm::GraphTraits</a></div><div class="ttdef"><b>Definition:</b> <a href="GraphTraits_8h_source.html#l00027">GraphTraits.h:27</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00534">DenseMap.h:534</a></div></div>
<div class="ttc" id="Debug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html_a9b6dd0fc7a648a939e571246045b673e"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html#a9b6dd0fc7a648a939e571246045b673e">llvm::SmallPtrSet::insert</a></div><div class="ttdeci">bool insert(PtrType Ptr)</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00253">SmallPtrSet.h:253</a></div></div>
<div class="ttc" id="BasicBlock_8h_html"><div class="ttname"><a href="BasicBlock_8h.html">BasicBlock.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBlockFrequencyInfo_html"><div class="ttname"><a href="classllvm_1_1MachineBlockFrequencyInfo.html">llvm::MachineBlockFrequencyInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineBlockFrequencyInfo_8h_source.html#l00030">MachineBlockFrequencyInfo.h:30</a></div></div>
<div class="ttc" id="classllvm_1_1StringRef_html_ab02cb6f4884b5c788efb97b6741dccaf"><div class="ttname"><a href="classllvm_1_1StringRef.html#ab02cb6f4884b5c788efb97b6741dccaf">llvm::StringRef::str</a></div><div class="ttdeci">std::string str() const </div><div class="ttdoc">str - Get the contents as an std::string. </div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00181">StringRef.h:181</a></div></div>
<div class="ttc" id="classllvm_1_1BlockFrequency_html_acd0d5be21046a46d1ffa3646dc8790fc"><div class="ttname"><a href="classllvm_1_1BlockFrequency.html#acd0d5be21046a46d1ffa3646dc8790fc">llvm::BlockFrequency::getFrequency</a></div><div class="ttdeci">uint64_t getFrequency() const </div><div class="ttdoc">Returns the frequency as a fixpoint number scaled by the entry frequency. </div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequency_8h_source.html#l00046">BlockFrequency.h:46</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_acdf5bf3bbc10f9331f56441a4d483bb1"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#acdf5bf3bbc10f9331f56441a4d483bb1">b</a></div><div class="ttdeci">the resulting code requires compare and branches when and if the revised code is with conditional branches instead of More there is a byte word extend before each where there should be only and the condition codes are not remembered when the same two values are compared twice More LSR enhancements i8 and i32 load store addressing modes are identical int b</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00396">Target/ARM/README.txt:396</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00167">Value.cpp:167</a></div></div>
<div class="ttc" id="namespacellvm_1_1object_html_a63a8f680ecd1aa68ae0efdd3b5c4f4a7"><div class="ttname"><a href="namespacellvm_1_1object.html#a63a8f680ecd1aa68ae0efdd3b5c4f4a7">llvm::object::advance</a></div><div class="ttdeci">static error_code advance(T &amp;it, size_t Val)</div><div class="ttdef"><b>Definition:</b> <a href="MachOObjectFile_8cpp_source.html#l00278">MachOObjectFile.cpp:278</a></div></div>
<div class="ttc" id="MachineFunction_8h_html"><div class="ttname"><a href="MachineFunction_8h.html">MachineFunction.h</a></div></div>
<div class="ttc" id="MachineBasicBlock_8h_html"><div class="ttname"><a href="MachineBasicBlock_8h.html">MachineBasicBlock.h</a></div></div>
<div class="ttc" id="namespacellvm_html_a8a736f0023b19d73f205d93fec7094a8"><div class="ttname"><a href="namespacellvm.html#a8a736f0023b19d73f205d93fec7094a8">llvm::po_begin</a></div><div class="ttdeci">po_iterator&lt; T &gt; po_begin(T G)</div><div class="ttdef"><b>Definition:</b> <a href="PostOrderIterator_8h_source.html#l00175">PostOrderIterator.h:175</a></div></div>
<div class="ttc" id="namespacellvm_html_a85acbc71797c5df4b82f6c527ff9ad1a"><div class="ttname"><a href="namespacellvm.html#a85acbc71797c5df4b82f6c527ff9ad1a">llvm::countLeadingZeros</a></div><div class="ttdeci">enable_if_c&lt; std::numeric_limits&lt; T &gt;::is_integer &amp;&amp;!std::numeric_limits&lt; T &gt;::is_signed, std::size_t &gt;::type countLeadingZeros(T Val, ZeroBehavior ZB=ZB_Width)</div><div class="ttdoc">Count number of 0&amp;#39;s from the most significant bit to the least stopping at the first 1...</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00120">MathExtras.h:120</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html_a2ced6343b8ad006a757059554bbf9f37"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html#a2ced6343b8ad006a757059554bbf9f37">llvm::SmallPtrSet::count</a></div><div class="ttdeci">bool count(PtrType Ptr) const </div><div class="ttdoc">count - Return true if the specified pointer is in the set. </div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00264">SmallPtrSet.h:264</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_a8db36c82f32d6f6a4d35a00e55be03a8"><div class="ttname"><a href="Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a></div><div class="ttdeci">bool Shift</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00506">Target/README.txt:506</a></div></div>
<div class="ttc" id="structllvm_1_1Inverse_html"><div class="ttname"><a href="structllvm_1_1Inverse.html">llvm::Inverse</a></div><div class="ttdef"><b>Definition:</b> <a href="GraphTraits_8h_source.html#l00078">GraphTraits.h:78</a></div></div>
<div class="ttc" id="BranchProbability_8h_html"><div class="ttname"><a href="BranchProbability_8h.html">BranchProbability.h</a></div></div>
<div class="ttc" id="classllvm_1_1BlockFrequencyImpl_html_ace906837b07e8ac29dab7987c24eb9f5"><div class="ttname"><a href="classllvm_1_1BlockFrequencyImpl.html#ace906837b07e8ac29dab7987c24eb9f5">llvm::BlockFrequencyImpl::getBlockFreq</a></div><div class="ttdeci">BlockFrequency getBlockFreq(const BlockT *BB) const </div><div class="ttdoc">getBlockFreq - Return block frequency. Return 0 if we don&amp;#39;t have it. </div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequencyImpl_8h_source.html#l00316">BlockFrequencyImpl.h:316</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a2961c31b29db17a4f2964899c8569a64"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a2961c31b29db17a4f2964899c8569a64">llvm::MachineBasicBlock::getBasicBlock</a></div><div class="ttdeci">const BasicBlock * getBasicBlock() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00117">MachineBasicBlock.h:117</a></div></div>
<div class="ttc" id="classllvm_1_1BranchProbability_html"><div class="ttname"><a href="classllvm_1_1BranchProbability.html">llvm::BranchProbability</a></div><div class="ttdef"><b>Definition:</b> <a href="BranchProbability_8h_source.html#l00025">BranchProbability.h:25</a></div></div>
<div class="ttc" id="classllvm_1_1BlockFrequencyInfo_html"><div class="ttname"><a href="classllvm_1_1BlockFrequencyInfo.html">llvm::BlockFrequencyInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequencyInfo_8h_source.html#l00029">BlockFrequencyInfo.h:29</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1BlockFrequencyImpl_html"><div class="ttname"><a href="classllvm_1_1BlockFrequencyImpl.html">llvm::BlockFrequencyImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequencyImpl_8h_source.html#l00041">BlockFrequencyImpl.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html">llvm::MachineBasicBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00062">MachineBasicBlock.h:62</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a321e37d79af8b4287f8a1dcf9aff9c01"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">llvm::DenseMapBase::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00057">DenseMap.h:57</a></div></div>
<div class="ttc" id="DenseMap_8h_html"><div class="ttname"><a href="DenseMap_8h.html">DenseMap.h</a></div></div>
<div class="ttc" id="classllvm_1_1raw__string__ostream_html_ae086260f8c216554ff46dcd96e171459"><div class="ttname"><a href="classllvm_1_1raw__string__ostream.html#ae086260f8c216554ff46dcd96e171459">llvm::raw_string_ostream::str</a></div><div class="ttdeci">std::string &amp; str()</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00441">raw_ostream.h:441</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a699a66e504b48fdeff124e82f6c61917"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a699a66e504b48fdeff124e82f6c61917">llvm::DenseMapBase::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const std::pair&lt; KeyT, ValueT &gt; &amp;KV)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00153">DenseMap.h:153</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00236">SmallPtrSet.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1BlockFrequencyImpl_html_aeed733650289931147228bb88554c610"><div class="ttname"><a href="classllvm_1_1BlockFrequencyImpl.html#aeed733650289931147228bb88554c610">llvm::BlockFrequencyImpl::print</a></div><div class="ttdeci">void print(raw_ostream &amp;OS) const </div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequencyImpl_8h_source.html#l00324">BlockFrequencyImpl.h:324</a></div></div>
<div class="ttc" id="MachineBlockPlacement_8cpp_html_a420a575a5cc23a356c5cbdbe9f98ca78"><div class="ttname"><a href="MachineBlockPlacement_8cpp.html#a420a575a5cc23a356c5cbdbe9f98ca78">getBlockName</a></div><div class="ttdeci">block Branch Probability Basic Block static false std::string getBlockName(MachineBasicBlock *BB)</div><div class="ttdoc">Helper to print the name of a MBB. </div><div class="ttdef"><b>Definition:</b> <a href="MachineBlockPlacement_8cpp_source.html#l00258">MachineBlockPlacement.cpp:258</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00101">Debug.cpp:101</a></div></div>
<div class="ttc" id="CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2README_8txt_source.html#l00036">CodeGen/README.txt:36</a></div></div>
<div class="ttc" id="namespacellvm_html_a31c465b4d456accd132c6dc332316b92"><div class="ttname"><a href="namespacellvm.html#a31c465b4d456accd132c6dc332316b92">llvm::po_end</a></div><div class="ttdeci">po_iterator&lt; T &gt; po_end(T G)</div><div class="ttdef"><b>Definition:</b> <a href="PostOrderIterator_8h_source.html#l00177">PostOrderIterator.h:177</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1path_html_a8fb092ecc42706d8901ee791cd6c90a7"><div class="ttname"><a href="namespacellvm_1_1sys_1_1path.html#a8fb092ecc42706d8901ee791cd6c90a7">llvm::sys::path::reverse_iterator</a></div><div class="ttdeci">std::reverse_iterator&lt; const_iterator &gt; reverse_iterator</div><div class="ttdef"><b>Definition:</b> <a href="Path_8h_source.html#l00079">Path.h:79</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="regcomp_8c_html_a0240ac851181b84ac374872dc5434ee4"><div class="ttname"><a href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div><div class="ttdeci">#define N</div></div>
<div class="ttc" id="classllvm_1_1DenseMapIterator_html"><div class="ttname"><a href="classllvm_1_1DenseMapIterator.html">llvm::DenseMapIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00037">DenseMap.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1raw__string__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__string__ostream.html">llvm::raw_string_ostream</a></div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00426">raw_ostream.h:426</a></div></div>
<div class="ttc" id="Target_2X86_2README_8txt_html_a668d6902e1f37328dfbbb1f75aa82fc9"><div class="ttname"><a href="Target_2X86_2README_8txt.html#a668d6902e1f37328dfbbb1f75aa82fc9">a</a></div><div class="ttdeci">=0.0?0.0:(a &gt; 0.0?1.0:-1.0) a</div><div class="ttdef"><b>Definition:</b> <a href="Target_2X86_2README_8txt_source.html#l00652">Target/X86/README.txt:652</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_acfd7cc74125222a81c02b4097ed5166c"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#acfd7cc74125222a81c02b4097ed5166c">llvm::DenseMapBase::lookup</a></div><div class="ttdeci">ValueT lookup(const KeyT &amp;Val) const </div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00143">DenseMap.h:143</a></div></div>
<div class="ttc" id="PostOrderIterator_8h_html"><div class="ttname"><a href="PostOrderIterator_8h.html">PostOrderIterator.h</a></div></div>
<div class="ttc" id="classllvm_1_1raw__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__ostream.html">llvm::raw_ostream</a></div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00031">raw_ostream.h:31</a></div></div>
<div class="ttc" id="Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00097">Debug.h:97</a></div></div>
<div class="ttc" id="BlockFrequency_8h_html"><div class="ttname"><a href="BlockFrequency_8h.html">BlockFrequency.h</a></div></div>
<div class="ttc" id="raw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="classllvm_1_1BlockFrequency_html"><div class="ttname"><a href="classllvm_1_1BlockFrequency.html">llvm::BlockFrequency</a></div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequency_8h_source.html#l00025">BlockFrequency.h:25</a></div></div>
<div class="ttc" id="classllvm_1_1BlockFrequencyImpl_html_a9718b70c87334a36db8a02730107b781"><div class="ttname"><a href="classllvm_1_1BlockFrequencyImpl.html#a9718b70c87334a36db8a02730107b781">llvm::BlockFrequencyImpl::dump</a></div><div class="ttdeci">void dump() const </div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequencyImpl_8h_source.html#l00340">BlockFrequencyImpl.h:340</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a21cf94357e53cd1069aba475266fdb63"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">llvm::DenseMapBase::find</a></div><div class="ttdeci">iterator find(const KeyT &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00108">DenseMap.h:108</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a6467bd6bb128c8b69a478548fc17351c"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a6467bd6bb128c8b69a478548fc17351c">llvm::DenseMapBase::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00078">DenseMap.h:78</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 22:58:16 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
