<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: RegisterPressure.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('RegisterPressure_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">RegisterPressure.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="RegisterPressure_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===-- RegisterPressure.cpp - Dynamic Register Pressure ------------------===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// This file implements the RegisterPressure class which can be used to track</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// MachineInstr level register pressure.</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="RegisterPressure_8h.html">llvm/CodeGen/RegisterPressure.h</a>&quot;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LiveInterval_8h.html">llvm/CodeGen/LiveInterval.h</a>&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LiveIntervalAnalysis_8h.html">llvm/CodeGen/LiveIntervalAnalysis.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineRegisterInfo_8h.html">llvm/CodeGen/MachineRegisterInfo.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="RegisterClassInfo_8h.html">llvm/CodeGen/RegisterClassInfo.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Target_2TargetMachine_8h.html">llvm/Target/TargetMachine.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">/// Increase pressure for each pressure set provided by TargetRegisterInfo.</span></div><div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="RegisterPressure_8cpp.html#a3a82c5c45d99293d5daa94045fa60efc">   27</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="RegisterPressure_8cpp.html#a3a82c5c45d99293d5daa94045fa60efc">increaseSetPressure</a>(std::vector&lt;unsigned&gt; &amp;CurrSetPressure,</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;                                <a class="code" href="classllvm_1_1PSetIterator.html">PSetIterator</a> PSetI) {</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  <span class="keywordtype">unsigned</span> Weight = PSetI.<a class="code" href="classllvm_1_1PSetIterator.html#a7ca0404dfc65936e5050e72a95387017">getWeight</a>();</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <span class="keywordflow">for</span> (; PSetI.<a class="code" href="classllvm_1_1PSetIterator.html#ab987130956e71d96d0780a23caa0a438">isValid</a>(); ++PSetI)</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    CurrSetPressure[*PSetI] += Weight;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;}</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">/// Decrease pressure for each pressure set provided by TargetRegisterInfo.</span></div><div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="RegisterPressure_8cpp.html#ab55d2386a636832df128dbe92b4dd2a4">   35</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="RegisterPressure_8cpp.html#ab55d2386a636832df128dbe92b4dd2a4">decreaseSetPressure</a>(std::vector&lt;unsigned&gt; &amp;CurrSetPressure,</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;                                <a class="code" href="classllvm_1_1PSetIterator.html">PSetIterator</a> PSetI) {</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="keywordtype">unsigned</span> Weight = PSetI.<a class="code" href="classllvm_1_1PSetIterator.html#a7ca0404dfc65936e5050e72a95387017">getWeight</a>();</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <span class="keywordflow">for</span> (; PSetI.<a class="code" href="classllvm_1_1PSetIterator.html#ab987130956e71d96d0780a23caa0a438">isValid</a>(); ++PSetI) {</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    assert(CurrSetPressure[*PSetI] &gt;= Weight &amp;&amp; <span class="stringliteral">&quot;register pressure underflow&quot;</span>);</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    CurrSetPressure[*PSetI] -= Weight;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  }</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;}</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#if !defined(NDEBUG) || defined(LLVM_ENABLE_DUMP)</span></div><div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="namespacellvm.html#a2999577391397335deda506011ee500e">   45</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#a2999577391397335deda506011ee500e">llvm::dumpRegSetPressure</a>(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> SetPressure,</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                              <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *TRI) {</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="keywordtype">bool</span> Empty = <span class="keyword">true</span>;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = SetPressure.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keywordflow">if</span> (SetPressure[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] != 0) {</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; TRI-&gt;<a class="code" href="classllvm_1_1TargetRegisterInfo.html#a3c2bb9e82e28af11ea7a7deaef40aea4">getRegPressureSetName</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) &lt;&lt; <span class="stringliteral">&quot;=&quot;</span> &lt;&lt; SetPressure[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;      Empty = <span class="keyword">false</span>;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    }</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  }</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="keywordflow">if</span> (Empty)</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;}</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="structllvm_1_1RegisterPressure.html#a7157aeebef40c142a26ce5db736a9f5f">   58</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structllvm_1_1RegisterPressure.html#a7157aeebef40c142a26ce5db736a9f5f">RegisterPressure::dump</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *TRI)<span class="keyword"> const </span>{</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Max Pressure: &quot;</span>;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <a class="code" href="namespacellvm.html#a2999577391397335deda506011ee500e">dumpRegSetPressure</a>(<a class="code" href="structllvm_1_1RegisterPressure.html#af444f3c79d12bb654d6477d629cbe7c0">MaxSetPressure</a>, TRI);</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Live In: &quot;</span>;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = <a class="code" href="structllvm_1_1RegisterPressure.html#a9db6c0a838bff26d6fce17e68fc86c93">LiveInRegs</a>.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a class="code" href="classllvm_1_1PrintReg.html">PrintReg</a>(<a class="code" href="structllvm_1_1RegisterPressure.html#a9db6c0a838bff26d6fce17e68fc86c93">LiveInRegs</a>[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], TRI) &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Live Out: &quot;</span>;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = <a class="code" href="structllvm_1_1RegisterPressure.html#aff4ec40182e4b7147f436f73678fc3d9">LiveOutRegs</a>.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); i &lt; e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a class="code" href="classllvm_1_1PrintReg.html">PrintReg</a>(<a class="code" href="structllvm_1_1RegisterPressure.html#aff4ec40182e4b7147f436f73678fc3d9">LiveOutRegs</a>[i], TRI) &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;}</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="classllvm_1_1RegPressureTracker.html#a063d69931fd5ca1465c7971ad150a8d2">   71</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1RegPressureTracker.html#a063d69931fd5ca1465c7971ad150a8d2">RegPressureTracker::dump</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="keywordflow">if</span> (!isTopClosed() || !isBottomClosed()) {</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Curr Pressure: &quot;</span>;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <a class="code" href="namespacellvm.html#a2999577391397335deda506011ee500e">dumpRegSetPressure</a>(CurrSetPressure, TRI);</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  }</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.dump(TRI);</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;}</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">/// Increase the current pressure as impacted by these registers and bump</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">/// the high water mark if needed.</span></div><div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="classllvm_1_1RegPressureTracker.html#acbf583030c3b43d625a5ed8146022d86">   82</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1RegPressureTracker.html#acbf583030c3b43d625a5ed8146022d86">RegPressureTracker::increaseRegPressure</a>(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> RegUnits) {</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = RegUnits.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <a class="code" href="classllvm_1_1PSetIterator.html">PSetIterator</a> PSetI = <a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>-&gt;getPressureSets(RegUnits[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordtype">unsigned</span> Weight = PSetI.<a class="code" href="classllvm_1_1PSetIterator.html#a7ca0404dfc65936e5050e72a95387017">getWeight</a>();</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">for</span> (; PSetI.<a class="code" href="classllvm_1_1PSetIterator.html#ab987130956e71d96d0780a23caa0a438">isValid</a>(); ++PSetI) {</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      CurrSetPressure[*PSetI] += Weight;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      <span class="keywordflow">if</span> (CurrSetPressure[*PSetI] &gt; <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.MaxSetPressure[*PSetI]) {</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.MaxSetPressure[*PSetI] = CurrSetPressure[*PSetI];</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      }</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    }</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  }</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;}</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">/// Simply decrease the current pressure as impacted by these registers.</span></div><div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="classllvm_1_1RegPressureTracker.html#a2a9fbda4a98a544bca00f83c211e90bb">   96</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1RegPressureTracker.html#a2a9fbda4a98a544bca00f83c211e90bb">RegPressureTracker::decreaseRegPressure</a>(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> RegUnits) {</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, E = RegUnits.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <a class="code" href="RegisterPressure_8cpp.html#ab55d2386a636832df128dbe92b4dd2a4">decreaseSetPressure</a>(CurrSetPressure, <a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>-&gt;getPressureSets(RegUnits[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]));</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;}</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">/// Clear the result so it can be used for another round of pressure tracking.</span></div><div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="structllvm_1_1IntervalPressure.html#a08225fe2adf56bf962e71483729fd99c">  102</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="structllvm_1_1IntervalPressure.html#a08225fe2adf56bf962e71483729fd99c">IntervalPressure::reset</a>() {</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  TopIdx = BottomIdx = <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a>();</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <a class="code" href="structllvm_1_1RegisterPressure.html#af444f3c79d12bb654d6477d629cbe7c0">MaxSetPressure</a>.clear();</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <a class="code" href="structllvm_1_1RegisterPressure.html#a9db6c0a838bff26d6fce17e68fc86c93">LiveInRegs</a>.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <a class="code" href="structllvm_1_1RegisterPressure.html#aff4ec40182e4b7147f436f73678fc3d9">LiveOutRegs</a>.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;}</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">/// Clear the result so it can be used for another round of pressure tracking.</span></div><div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="structllvm_1_1RegionPressure.html#aa7faa2156e15c1085990ef11a6d19ac5">  110</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="structllvm_1_1RegionPressure.html#aa7faa2156e15c1085990ef11a6d19ac5">RegionPressure::reset</a>() {</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  TopPos = BottomPos = <a class="code" href="classllvm_1_1MachineBasicBlock.html#a654b11787ac7c4344084d98bea7cf626">MachineBasicBlock::const_iterator</a>();</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <a class="code" href="structllvm_1_1RegisterPressure.html#af444f3c79d12bb654d6477d629cbe7c0">MaxSetPressure</a>.clear();</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <a class="code" href="structllvm_1_1RegisterPressure.html#a9db6c0a838bff26d6fce17e68fc86c93">LiveInRegs</a>.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <a class="code" href="structllvm_1_1RegisterPressure.html#aff4ec40182e4b7147f436f73678fc3d9">LiveOutRegs</a>.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;}</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">/// If the current top is not less than or equal to the next index, open it.</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">/// We happen to need the SlotIndex for the next top for pressure update.</span></div><div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="structllvm_1_1IntervalPressure.html#ad388da0eac059da0c6cf642204a6308a">  119</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="structllvm_1_1IntervalPressure.html#ad388da0eac059da0c6cf642204a6308a">IntervalPressure::openTop</a>(<a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> NextTop) {</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="keywordflow">if</span> (TopIdx &lt;= NextTop)</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  TopIdx = <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a>();</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <a class="code" href="structllvm_1_1RegisterPressure.html#a9db6c0a838bff26d6fce17e68fc86c93">LiveInRegs</a>.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;}</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">/// If the current top is the previous instruction (before receding), open it.</span></div><div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="structllvm_1_1RegionPressure.html#a9f41ba24a7e6d9e5a68764096c2e763c">  127</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="structllvm_1_1RegionPressure.html#a9f41ba24a7e6d9e5a68764096c2e763c">RegionPressure::openTop</a>(<a class="code" href="classllvm_1_1MachineBasicBlock.html#a654b11787ac7c4344084d98bea7cf626">MachineBasicBlock::const_iterator</a> PrevTop) {</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="keywordflow">if</span> (TopPos != PrevTop)</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  TopPos = <a class="code" href="classllvm_1_1MachineBasicBlock.html#a654b11787ac7c4344084d98bea7cf626">MachineBasicBlock::const_iterator</a>();</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <a class="code" href="structllvm_1_1RegisterPressure.html#a9db6c0a838bff26d6fce17e68fc86c93">LiveInRegs</a>.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;}</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">/// If the current bottom is not greater than the previous index, open it.</span></div><div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="structllvm_1_1IntervalPressure.html#a0fb4cf12022684a5149e2fba6b65a522">  135</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="structllvm_1_1IntervalPressure.html#a0fb4cf12022684a5149e2fba6b65a522">IntervalPressure::openBottom</a>(<a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> PrevBottom) {</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="keywordflow">if</span> (BottomIdx &gt; PrevBottom)</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  BottomIdx = <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a>();</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <a class="code" href="structllvm_1_1RegisterPressure.html#a9db6c0a838bff26d6fce17e68fc86c93">LiveInRegs</a>.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;}</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">/// If the current bottom is the previous instr (before advancing), open it.</span></div><div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="structllvm_1_1RegionPressure.html#ad620503b286436fe7252602b9451dfca">  143</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="structllvm_1_1RegionPressure.html#ad620503b286436fe7252602b9451dfca">RegionPressure::openBottom</a>(<a class="code" href="classllvm_1_1MachineBasicBlock.html#a654b11787ac7c4344084d98bea7cf626">MachineBasicBlock::const_iterator</a> PrevBottom) {</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="keywordflow">if</span> (BottomPos != PrevBottom)</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  BottomPos = <a class="code" href="classllvm_1_1MachineBasicBlock.html#a654b11787ac7c4344084d98bea7cf626">MachineBasicBlock::const_iterator</a>();</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <a class="code" href="structllvm_1_1RegisterPressure.html#a9db6c0a838bff26d6fce17e68fc86c93">LiveInRegs</a>.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;}</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="classllvm_1_1RegPressureTracker.html#a7d578ea9bef7f7fae08c24e7584abf62">  150</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classllvm_1_1LiveRange.html">LiveRange</a> *<a class="code" href="classllvm_1_1RegPressureTracker.html#a7d578ea9bef7f7fae08c24e7584abf62">RegPressureTracker::getLiveRange</a>(<span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>)<span class="keyword"> const </span>{</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">TargetRegisterInfo::isVirtualRegister</a>(Reg))</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordflow">return</span> &amp;LIS-&gt;getInterval(Reg);</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="keywordflow">return</span> LIS-&gt;getCachedRegUnit(Reg);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;}</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="classllvm_1_1RegPressureTracker.html#ac9e57447ee6550f3ffcb4a432bd3dbab">  156</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1RegPressureTracker.html#ac9e57447ee6550f3ffcb4a432bd3dbab">RegPressureTracker::reset</a>() {</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  MBB = 0;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  LIS = 0;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  CurrSetPressure.clear();</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  LiveThruPressure.clear();</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.MaxSetPressure.clear();</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="keywordflow">if</span> (RequireIntervals)</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keyword">static_cast&lt;</span><a class="code" href="structllvm_1_1IntervalPressure.html">IntervalPressure</a>&amp;<span class="keyword">&gt;</span>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>).reset();</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keyword">static_cast&lt;</span><a class="code" href="structllvm_1_1RegionPressure.html">RegionPressure</a>&amp;<span class="keyword">&gt;</span>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>).reset();</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  LiveRegs.PhysRegs.clear();</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  LiveRegs.VirtRegs.clear();</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  UntiedDefs.clear();</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;}</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">/// Setup the RegPressureTracker.</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">/// TODO: Add support for pressure without LiveIntervals.</span></div><div class="line"><a name="l00177"></a><span class="lineno"><a class="line" href="classllvm_1_1RegPressureTracker.html#a62939b985dcb2734ac69c5375d892cad">  177</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1RegPressureTracker.html#a62939b985dcb2734ac69c5375d892cad">RegPressureTracker::init</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> *mf,</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                              <span class="keyword">const</span> <a class="code" href="classllvm_1_1RegisterClassInfo.html">RegisterClassInfo</a> *rci,</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                              <span class="keyword">const</span> <a class="code" href="classllvm_1_1LiveIntervals.html">LiveIntervals</a> *lis,</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                              <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *mbb,</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                              <a class="code" href="classllvm_1_1MachineBasicBlock.html#a654b11787ac7c4344084d98bea7cf626">MachineBasicBlock::const_iterator</a> pos,</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                              <span class="keywordtype">bool</span> ShouldTrackUntiedDefs)</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;{</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  reset();</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  MF = mf;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  TRI = MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#a6745c3bfdfc5b0643b078b96df2db252">getTarget</a>().<a class="code" href="classllvm_1_1TargetMachine.html#a70b47eca6a99c87b81f4c1b1455dc090">getRegisterInfo</a>();</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  RCI = rci;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a> = &amp;MF-&gt;getRegInfo();</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  MBB = mbb;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  TrackUntiedDefs = ShouldTrackUntiedDefs;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <span class="keywordflow">if</span> (RequireIntervals) {</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    assert(lis &amp;&amp; <span class="stringliteral">&quot;IntervalPressure requires LiveIntervals&quot;</span>);</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    LIS = lis;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  }</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  CurrPos = pos;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  CurrSetPressure.assign(TRI-&gt;getNumRegPressureSets(), 0);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.MaxSetPressure = CurrSetPressure;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  LiveRegs.PhysRegs.setUniverse(TRI-&gt;getNumRegs());</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  LiveRegs.VirtRegs.setUniverse(<a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>-&gt;getNumVirtRegs());</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="keywordflow">if</span> (TrackUntiedDefs)</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    UntiedDefs.setUniverse(<a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>-&gt;getNumVirtRegs());</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;}</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">/// Does this pressure result have a valid top position and live ins.</span></div><div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="classllvm_1_1RegPressureTracker.html#a6ec2ef69d68442bdecaaf428aa5f1de5">  210</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1RegPressureTracker.html#a6ec2ef69d68442bdecaaf428aa5f1de5">RegPressureTracker::isTopClosed</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <span class="keywordflow">if</span> (RequireIntervals)</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="structllvm_1_1IntervalPressure.html">IntervalPressure</a>&amp;<span class="keyword">&gt;</span>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>).TopIdx.isValid();</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="keywordflow">return</span> (static_cast&lt;RegionPressure&amp;&gt;(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>).TopPos ==</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;          <a class="code" href="classllvm_1_1MachineBasicBlock.html#a654b11787ac7c4344084d98bea7cf626">MachineBasicBlock::const_iterator</a>());</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;}</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">/// Does this pressure result have a valid bottom position and live outs.</span></div><div class="line"><a name="l00218"></a><span class="lineno"><a class="line" href="classllvm_1_1RegPressureTracker.html#aa487d0d094830756c16dc887a5fdd59e">  218</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1RegPressureTracker.html#aa487d0d094830756c16dc887a5fdd59e">RegPressureTracker::isBottomClosed</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="keywordflow">if</span> (RequireIntervals)</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="structllvm_1_1IntervalPressure.html">IntervalPressure</a>&amp;<span class="keyword">&gt;</span>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>).BottomIdx.isValid();</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="keywordflow">return</span> (static_cast&lt;RegionPressure&amp;&gt;(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>).BottomPos ==</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;          <a class="code" href="classllvm_1_1MachineBasicBlock.html#a654b11787ac7c4344084d98bea7cf626">MachineBasicBlock::const_iterator</a>());</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;}</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="classllvm_1_1RegPressureTracker.html#a4ff1e8d3966e42b6a8add0ff83aa1982">  226</a></span>&#160;<a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> <a class="code" href="classllvm_1_1RegPressureTracker.html#a4ff1e8d3966e42b6a8add0ff83aa1982">RegPressureTracker::getCurrSlot</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html#a654b11787ac7c4344084d98bea7cf626">MachineBasicBlock::const_iterator</a> IdxPos = CurrPos;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="keywordflow">while</span> (IdxPos != MBB-&gt;end() &amp;&amp; IdxPos-&gt;isDebugValue())</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    ++IdxPos;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="keywordflow">if</span> (IdxPos == MBB-&gt;end())</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">return</span> LIS-&gt;getMBBEndIdx(MBB);</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="keywordflow">return</span> LIS-&gt;getInstructionIndex(IdxPos).<a class="code" href="classllvm_1_1SlotIndex.html#a04196b5e551d63690ede0244f80f2503">getRegSlot</a>();</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;}</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">/// Set the boundary for the top of the region and summarize live ins.</span></div><div class="line"><a name="l00236"></a><span class="lineno"><a class="line" href="classllvm_1_1RegPressureTracker.html#a8759dfc94f9731598942bbbda6280dfe">  236</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1RegPressureTracker.html#a8759dfc94f9731598942bbbda6280dfe">RegPressureTracker::closeTop</a>() {</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="keywordflow">if</span> (RequireIntervals)</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keyword">static_cast&lt;</span><a class="code" href="structllvm_1_1IntervalPressure.html">IntervalPressure</a>&amp;<span class="keyword">&gt;</span>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>).TopIdx = getCurrSlot();</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keyword">static_cast&lt;</span><a class="code" href="structllvm_1_1RegionPressure.html">RegionPressure</a>&amp;<span class="keyword">&gt;</span>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>).TopPos = CurrPos;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  assert(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.LiveInRegs.empty() &amp;&amp; <span class="stringliteral">&quot;inconsistent max pressure result&quot;</span>);</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.LiveInRegs.reserve(LiveRegs.PhysRegs.size() + LiveRegs.VirtRegs.size());</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.LiveInRegs.append(LiveRegs.PhysRegs.begin(), LiveRegs.PhysRegs.end());</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SparseSet.html">SparseSet&lt;unsigned&gt;::const_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> =</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;         LiveRegs.VirtRegs.begin(), E = LiveRegs.VirtRegs.end(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.LiveInRegs.push_back(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  std::sort(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.LiveInRegs.begin(), <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.LiveInRegs.end());</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.LiveInRegs.erase(std::unique(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.LiveInRegs.begin(), <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.LiveInRegs.end()),</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                     <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.LiveInRegs.end());</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;}</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment">/// Set the boundary for the bottom of the region and summarize live outs.</span></div><div class="line"><a name="l00254"></a><span class="lineno"><a class="line" href="classllvm_1_1RegPressureTracker.html#a204b8f2de53bb48cc63b152400c3fdb6">  254</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1RegPressureTracker.html#a204b8f2de53bb48cc63b152400c3fdb6">RegPressureTracker::closeBottom</a>() {</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="keywordflow">if</span> (RequireIntervals)</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keyword">static_cast&lt;</span><a class="code" href="structllvm_1_1IntervalPressure.html">IntervalPressure</a>&amp;<span class="keyword">&gt;</span>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>).BottomIdx = getCurrSlot();</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keyword">static_cast&lt;</span><a class="code" href="structllvm_1_1RegionPressure.html">RegionPressure</a>&amp;<span class="keyword">&gt;</span>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>).BottomPos = CurrPos;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  assert(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.LiveOutRegs.empty() &amp;&amp; <span class="stringliteral">&quot;inconsistent max pressure result&quot;</span>);</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.LiveOutRegs.reserve(LiveRegs.PhysRegs.size() + LiveRegs.VirtRegs.size());</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.LiveOutRegs.append(LiveRegs.PhysRegs.begin(), LiveRegs.PhysRegs.end());</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SparseSet.html">SparseSet&lt;unsigned&gt;::const_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> =</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;         LiveRegs.VirtRegs.begin(), E = LiveRegs.VirtRegs.end(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.LiveOutRegs.push_back(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  std::sort(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.LiveOutRegs.begin(), <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.LiveOutRegs.end());</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.LiveOutRegs.erase(std::unique(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.LiveOutRegs.begin(), <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.LiveOutRegs.end()),</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                      <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.LiveOutRegs.end());</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;}</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">/// Finalize the region boundaries and record live ins and live outs.</span></div><div class="line"><a name="l00272"></a><span class="lineno"><a class="line" href="classllvm_1_1RegPressureTracker.html#a1844e0ed5cc8c90d7afaad0bea1e48d7">  272</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1RegPressureTracker.html#a1844e0ed5cc8c90d7afaad0bea1e48d7">RegPressureTracker::closeRegion</a>() {</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="keywordflow">if</span> (!isTopClosed() &amp;&amp; !isBottomClosed()) {</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    assert(LiveRegs.PhysRegs.empty() &amp;&amp; LiveRegs.VirtRegs.empty() &amp;&amp;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;           <span class="stringliteral">&quot;no region boundary&quot;</span>);</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  }</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="keywordflow">if</span> (!isBottomClosed())</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    closeBottom();</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!isTopClosed())</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    closeTop();</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="comment">// If both top and bottom are closed, do nothing.</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;}</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment">/// The register tracker is unaware of global liveness so ignores normal</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment">/// live-thru ranges. However, two-address or coalesced chains can also lead</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">/// to live ranges with no holes. Count these to inform heuristics that we</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">/// can never drop below this pressure.</span></div><div class="line"><a name="l00289"></a><span class="lineno"><a class="line" href="classllvm_1_1RegPressureTracker.html#a474e65b5df97bf9cf404aa9b85eb6262">  289</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1RegPressureTracker.html#a474e65b5df97bf9cf404aa9b85eb6262">RegPressureTracker::initLiveThru</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1RegPressureTracker.html">RegPressureTracker</a> &amp;RPTracker) {</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  LiveThruPressure.assign(TRI-&gt;getNumRegPressureSets(), 0);</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  assert(isBottomClosed() &amp;&amp; <span class="stringliteral">&quot;need bottom-up tracking to intialize.&quot;</span>);</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.LiveOutRegs.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.LiveOutRegs[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">TargetRegisterInfo::isVirtualRegister</a>(Reg)</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        &amp;&amp; !RPTracker.<a class="code" href="classllvm_1_1RegPressureTracker.html#aaa4d744a40cc60d162fdd53735df18d1">hasUntiedDef</a>(Reg)) {</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      <a class="code" href="RegisterPressure_8cpp.html#a3a82c5c45d99293d5daa94045fa60efc">increaseSetPressure</a>(LiveThruPressure, <a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>-&gt;getPressureSets(Reg));</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    }</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  }</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;}</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">/// \brief Convenient wrapper for checking membership in RegisterOperands.</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">/// (std::count() doesn&#39;t have an early exit).</span></div><div class="line"><a name="l00303"></a><span class="lineno"><a class="line" href="RegisterPressure_8cpp.html#a7fbb2c9c794d8adde8a3448be7f3b557">  303</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="RegisterPressure_8cpp.html#a7fbb2c9c794d8adde8a3448be7f3b557">containsReg</a>(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> RegUnits, <span class="keywordtype">unsigned</span> RegUnit) {</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <span class="keywordflow">return</span> std::find(RegUnits.<a class="code" href="classllvm_1_1ArrayRef.html#a836367b39ed630bf14db99923c22740e">begin</a>(), RegUnits.<a class="code" href="classllvm_1_1ArrayRef.html#a38ed8cc3c342ad6910e8c869d3e2b9cf">end</a>(), RegUnit) != RegUnits.<a class="code" href="classllvm_1_1ArrayRef.html#a38ed8cc3c342ad6910e8c869d3e2b9cf">end</a>();</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;}</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment">/// Collect this instruction&#39;s unique uses and defs into SmallVectors for</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment">/// processing defs and uses in order.</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment">/// FIXME: always ignore tied opers</span></div><div class="line"><a name="l00311"></a><span class="lineno"><a class="line" href="classRegisterOperands.html">  311</a></span>&#160;<span class="comment"></span><span class="keyword">class </span><a class="code" href="classRegisterOperands.html">RegisterOperands</a> {</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *TRI;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> *<a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <span class="keywordtype">bool</span> IgnoreDead;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00317"></a><span class="lineno"><a class="line" href="classRegisterOperands.html#aa8ecd23ea54fdc8ce86641302d5f6392">  317</a></span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 8&gt;</a> <a class="code" href="classRegisterOperands.html#aa8ecd23ea54fdc8ce86641302d5f6392">Uses</a>;</div><div class="line"><a name="l00318"></a><span class="lineno"><a class="line" href="classRegisterOperands.html#adcaaea856fb848e888362cbb3b2811cd">  318</a></span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 8&gt;</a> <a class="code" href="classRegisterOperands.html#adcaaea856fb848e888362cbb3b2811cd">Defs</a>;</div><div class="line"><a name="l00319"></a><span class="lineno"><a class="line" href="classRegisterOperands.html#a3b66cf8b3be1a4b8afd71ac9e1d9609d">  319</a></span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 8&gt;</a> <a class="code" href="classRegisterOperands.html#a3b66cf8b3be1a4b8afd71ac9e1d9609d">DeadDefs</a>;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div><div class="line"><a name="l00321"></a><span class="lineno"><a class="line" href="classRegisterOperands.html#a9e6183e97d2bdc9c304251dcc76b1063">  321</a></span>&#160;  <a class="code" href="classRegisterOperands.html#a9e6183e97d2bdc9c304251dcc76b1063">RegisterOperands</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *tri,</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                   <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> *mri, <span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a> = <span class="keyword">false</span>):</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    TRI(tri), MRI(mri), IgnoreDead(<a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>) {}</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment">  /// Push this operand&#39;s register onto the correct vector.</span></div><div class="line"><a name="l00326"></a><span class="lineno"><a class="line" href="classRegisterOperands.html#ad4142d3f71f178d499e1f76ac3db6a48">  326</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="classRegisterOperands.html#ad4142d3f71f178d499e1f76ac3db6a48">collect</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO) {</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>() || !MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>())</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#a0e4e5eef3cc7c47acbb753b9d3872348">readsReg</a>())</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      pushRegUnits(MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>(), Uses);</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#a8de7d5cf38939044471c6ee60a01a3df">isDef</a>()) {</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#a196420aa839c2b21f42c4bf5c36df437">isDead</a>()) {</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        <span class="keywordflow">if</span> (!IgnoreDead)</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;          pushRegUnits(MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>(), DeadDefs);</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      }</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        pushRegUnits(MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>(), Defs);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    }</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  }</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="keyword">protected</span>:</div><div class="line"><a name="l00342"></a><span class="lineno"><a class="line" href="classRegisterOperands.html#af6cea6ac6c68106d79cc1de86651fcad">  342</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRegisterOperands.html#af6cea6ac6c68106d79cc1de86651fcad">pushRegUnits</a>(<span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>, <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;unsigned&gt;</a> &amp;RegUnits) {</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">TargetRegisterInfo::isVirtualRegister</a>(Reg)) {</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="RegisterPressure_8cpp.html#a7fbb2c9c794d8adde8a3448be7f3b557">containsReg</a>(RegUnits, Reg))</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      RegUnits.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Reg);</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    }</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a017c4ebe5112a2521ee37dfe1e78236c">isAllocatable</a>(Reg)) {</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MCRegUnitIterator.html">MCRegUnitIterator</a> Units(Reg, TRI); Units.<a class="code" href="classllvm_1_1MCRegisterInfo_1_1DiffListIterator.html#abccd358b92366e5284e7e674e86b241f">isValid</a>(); ++Units) {</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="RegisterPressure_8cpp.html#a7fbb2c9c794d8adde8a3448be7f3b557">containsReg</a>(RegUnits, *Units))</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        RegUnits.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(*Units);</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      }</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    }</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  }</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;};</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment">/// Collect physical and virtual register operands.</span></div><div class="line"><a name="l00359"></a><span class="lineno"><a class="line" href="RegisterPressure_8cpp.html#aefaf1f4d0ef6c56e26083e55db7f28f2">  359</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="RegisterPressure_8cpp.html#aefaf1f4d0ef6c56e26083e55db7f28f2">collectOperands</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>,</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                            <a class="code" href="classRegisterOperands.html">RegisterOperands</a> &amp;RegOpers) {</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ConstMIBundleOperands.html">ConstMIBundleOperands</a> OperI(MI); OperI.<a class="code" href="classllvm_1_1MachineOperandIteratorBase.html#af3802cbef7a57e8de316fe13fbed8e67">isValid</a>(); ++OperI)</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    RegOpers.<a class="code" href="classRegisterOperands.html#ad4142d3f71f178d499e1f76ac3db6a48">collect</a>(*OperI);</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <span class="comment">// Remove redundant physreg dead defs.</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;unsigned&gt;::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> =</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    std::remove_if(RegOpers.<a class="code" href="classRegisterOperands.html#a3b66cf8b3be1a4b8afd71ac9e1d9609d">DeadDefs</a>.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), RegOpers.<a class="code" href="classRegisterOperands.html#a3b66cf8b3be1a4b8afd71ac9e1d9609d">DeadDefs</a>.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>(),</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                   std::bind1st(std::ptr_fun(<a class="code" href="RegisterPressure_8cpp.html#a7fbb2c9c794d8adde8a3448be7f3b557">containsReg</a>), RegOpers.<a class="code" href="classRegisterOperands.html#adcaaea856fb848e888362cbb3b2811cd">Defs</a>));</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  RegOpers.<a class="code" href="classRegisterOperands.html#a3b66cf8b3be1a4b8afd71ac9e1d9609d">DeadDefs</a>.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a18c110c35e9133222a37b28d30f8a90f">erase</a>(I, RegOpers.<a class="code" href="classRegisterOperands.html#a3b66cf8b3be1a4b8afd71ac9e1d9609d">DeadDefs</a>.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>());</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;}</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment">/// Initialize an array of N PressureDiffs.</span></div><div class="line"><a name="l00372"></a><span class="lineno"><a class="line" href="classllvm_1_1PressureDiffs.html#adc55f26c1bfbbe17074ded7275f3961c">  372</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1PressureDiffs.html#adc55f26c1bfbbe17074ded7275f3961c">PressureDiffs::init</a>(<span class="keywordtype">unsigned</span> <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) {</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  Size = <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="keywordflow">if</span> (N &lt;= Max) {</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ae857cbc5cf8c5a980f0bd245ad5ec61a">memset</a>(PDiffArray, 0, N * <span class="keyword">sizeof</span>(<a class="code" href="classllvm_1_1PressureDiff.html">PressureDiff</a>));</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  }</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  Max = Size;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa60e05e8cf4600d05ec9251b750544c7c">free</a>(PDiffArray);</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  PDiffArray = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classllvm_1_1PressureDiff.html">PressureDiff</a>*<span class="keyword">&gt;</span>(<a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa3ad9aa19face37d539b9fbe4130e1c6f">calloc</a>(N, <span class="keyword">sizeof</span>(<a class="code" href="classllvm_1_1PressureDiff.html">PressureDiff</a>)));</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;}</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="comment">/// Add a change in pressure to the pressure diff of a given instruction.</span></div><div class="line"><a name="l00384"></a><span class="lineno"><a class="line" href="classllvm_1_1PressureDiff.html#a8169b5ff05a1e7ba40a3d99f0fdf76a2">  384</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1PressureDiff.html#a8169b5ff05a1e7ba40a3d99f0fdf76a2">PressureDiff::addPressureChange</a>(<span class="keywordtype">unsigned</span> RegUnit, <span class="keywordtype">bool</span> IsDec,</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                                     <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> *<a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>) {</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <a class="code" href="classllvm_1_1PSetIterator.html">PSetIterator</a> PSetI = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a0c29744c3bf19d281c32726176892c02">getPressureSets</a>(RegUnit);</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <span class="keywordtype">int</span> Weight = IsDec ? -PSetI.<a class="code" href="classllvm_1_1PSetIterator.html#a7ca0404dfc65936e5050e72a95387017">getWeight</a>() : PSetI.<a class="code" href="classllvm_1_1PSetIterator.html#a7ca0404dfc65936e5050e72a95387017">getWeight</a>();</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="keywordflow">for</span> (; PSetI.<a class="code" href="classllvm_1_1PSetIterator.html#ab987130956e71d96d0780a23caa0a438">isValid</a>(); ++PSetI) {</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="comment">// Find an existing entry in the pressure diff for this PSet.</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <a class="code" href="classllvm_1_1PressureChange.html">PressureDiff::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="namespacellvm_1_1sys_1_1path.html#a33706aab89e700b8f79e1fa6f4f0e3ee">begin</a>(), E = <a class="code" href="namespacellvm_1_1sys_1_1path.html#a214ec2f04ffd92636ed4bd2717607a1d">end</a>();</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keywordflow">for</span> (; I != E &amp;&amp; I-&gt;<a class="code" href="classllvm_1_1PressureChange.html#a1d0b21ec4f6e6eada798a9e71d043e68">isValid</a>(); ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;      <span class="keywordflow">if</span> (I-&gt;<a class="code" href="classllvm_1_1PressureChange.html#ad70cb56db629f087c5f2b0dfb5dc8dc9">getPSet</a>() &gt;= *PSetI)</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    }</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="comment">// If all pressure sets are more constrained, skip the remaining PSets.</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keywordflow">if</span> (I == E)</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="comment">// Insert this PressureChange.</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordflow">if</span> (!I-&gt;<a class="code" href="classllvm_1_1PressureChange.html#a1d0b21ec4f6e6eada798a9e71d043e68">isValid</a>() || I-&gt;<a class="code" href="classllvm_1_1PressureChange.html#ad70cb56db629f087c5f2b0dfb5dc8dc9">getPSet</a>() != *PSetI) {</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;      <a class="code" href="classllvm_1_1PressureChange.html">PressureChange</a> PTmp = <a class="code" href="classllvm_1_1PressureChange.html">PressureChange</a>(*PSetI);</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PressureChange.html">PressureDiff::iterator</a> J = I; J != E &amp;&amp; PTmp.<a class="code" href="classllvm_1_1PressureChange.html#a1d0b21ec4f6e6eada798a9e71d043e68">isValid</a>(); ++J)</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(*J,PTmp);</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    }</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="comment">// Update the units for this pressure set.</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    I-&gt;<a class="code" href="classllvm_1_1PressureChange.html#a4b74a0d0d1bc2e22fa7376eda3fdd85f">setUnitInc</a>(I-&gt;<a class="code" href="classllvm_1_1PressureChange.html#ad9c2dce7dcf3bbfbec05526cfd0cf897">getUnitInc</a>() + Weight);</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  }</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;}</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment">/// Record the pressure difference induced by the given operand list.</span></div><div class="line"><a name="l00410"></a><span class="lineno"><a class="line" href="RegisterPressure_8cpp.html#a2ca1520a7e8bbebd7fd72f34fa36cf3c">  410</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="RegisterPressure_8cpp.html#a2ca1520a7e8bbebd7fd72f34fa36cf3c">collectPDiff</a>(<a class="code" href="classllvm_1_1PressureDiff.html">PressureDiff</a> &amp;PDiff, <a class="code" href="classRegisterOperands.html">RegisterOperands</a> &amp;RegOpers,</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                         <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> *<a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>) {</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  assert(!PDiff.<a class="code" href="classllvm_1_1PressureDiff.html#ad22e63bbd4e84ba7a3ed4462d34270b6">begin</a>()-&gt;<a class="code" href="classllvm_1_1PressureChange.html#a1d0b21ec4f6e6eada798a9e71d043e68">isValid</a>() &amp;&amp; <span class="stringliteral">&quot;stale PDiff&quot;</span>);</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = RegOpers.<a class="code" href="classRegisterOperands.html#adcaaea856fb848e888362cbb3b2811cd">Defs</a>.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    PDiff.<a class="code" href="classllvm_1_1PressureDiff.html#a8169b5ff05a1e7ba40a3d99f0fdf76a2">addPressureChange</a>(RegOpers.<a class="code" href="classRegisterOperands.html#adcaaea856fb848e888362cbb3b2811cd">Defs</a>[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], <span class="keyword">true</span>, MRI);</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = RegOpers.<a class="code" href="classRegisterOperands.html#aa8ecd23ea54fdc8ce86641302d5f6392">Uses</a>.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    PDiff.<a class="code" href="classllvm_1_1PressureDiff.html#a8169b5ff05a1e7ba40a3d99f0fdf76a2">addPressureChange</a>(RegOpers.<a class="code" href="classRegisterOperands.html#aa8ecd23ea54fdc8ce86641302d5f6392">Uses</a>[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], <span class="keyword">false</span>, MRI);</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;}</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment">/// Force liveness of registers.</span></div><div class="line"><a name="l00422"></a><span class="lineno"><a class="line" href="classllvm_1_1RegPressureTracker.html#a10143d61b5ee1702a5c48ace9e03e42e">  422</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1RegPressureTracker.html#a10143d61b5ee1702a5c48ace9e03e42e">RegPressureTracker::addLiveRegs</a>(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> Regs) {</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Regs.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordflow">if</span> (LiveRegs.insert(Regs[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]))</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      increaseRegPressure(Regs[i]);</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  }</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;}</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment">/// Add Reg to the live in set and increase max pressure.</span></div><div class="line"><a name="l00430"></a><span class="lineno"><a class="line" href="classllvm_1_1RegPressureTracker.html#a41b455b006804ed169e6144f9204e314">  430</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1RegPressureTracker.html#a41b455b006804ed169e6144f9204e314">RegPressureTracker::discoverLiveIn</a>(<span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>) {</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  assert(!LiveRegs.contains(Reg) &amp;&amp; <span class="stringliteral">&quot;avoid bumping max pressure twice&quot;</span>);</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="RegisterPressure_8cpp.html#a7fbb2c9c794d8adde8a3448be7f3b557">containsReg</a>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.LiveInRegs, Reg))</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <span class="comment">// At live in discovery, unconditionally increase the high water mark.</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.LiveInRegs.push_back(Reg);</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  <a class="code" href="RegisterPressure_8cpp.html#a3a82c5c45d99293d5daa94045fa60efc">increaseSetPressure</a>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.MaxSetPressure, <a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>-&gt;getPressureSets(Reg));</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;}</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment">/// Add Reg to the live out set and increase max pressure.</span></div><div class="line"><a name="l00441"></a><span class="lineno"><a class="line" href="classllvm_1_1RegPressureTracker.html#ad1f6527c9a8198488c7a57081b533e11">  441</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1RegPressureTracker.html#ad1f6527c9a8198488c7a57081b533e11">RegPressureTracker::discoverLiveOut</a>(<span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>) {</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  assert(!LiveRegs.contains(Reg) &amp;&amp; <span class="stringliteral">&quot;avoid bumping max pressure twice&quot;</span>);</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="RegisterPressure_8cpp.html#a7fbb2c9c794d8adde8a3448be7f3b557">containsReg</a>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.LiveOutRegs, Reg))</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <span class="comment">// At live out discovery, unconditionally increase the high water mark.</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.LiveOutRegs.push_back(Reg);</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <a class="code" href="RegisterPressure_8cpp.html#a3a82c5c45d99293d5daa94045fa60efc">increaseSetPressure</a>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.MaxSetPressure, <a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>-&gt;getPressureSets(Reg));</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;}</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment">/// Recede across the previous instruction. If LiveUses is provided, record any</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment">/// RegUnits that are made live by the current instruction&#39;s uses. This includes</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="comment">/// registers that are both defined and used by the instruction.  If a pressure</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="comment">/// difference pointer is provided record the changes is pressure caused by this</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="comment">/// instruction independent of liveness.</span></div><div class="line"><a name="l00456"></a><span class="lineno"><a class="line" href="classllvm_1_1RegPressureTracker.html#a34c32964f1af1bbabe26231ebdf444b0">  456</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1RegPressureTracker.html#a34c32964f1af1bbabe26231ebdf444b0">RegPressureTracker::recede</a>(<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;unsigned&gt;</a> *LiveUses,</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                                <a class="code" href="classllvm_1_1PressureDiff.html">PressureDiff</a> *PDiff) {</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <span class="comment">// Check for the top of the analyzable region.</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <span class="keywordflow">if</span> (CurrPos == MBB-&gt;begin()) {</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    closeRegion();</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  }</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="keywordflow">if</span> (!isBottomClosed())</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    closeBottom();</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  <span class="comment">// Open the top of the region using block iterators.</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <span class="keywordflow">if</span> (!RequireIntervals &amp;&amp; isTopClosed())</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="keyword">static_cast&lt;</span><a class="code" href="structllvm_1_1RegionPressure.html">RegionPressure</a>&amp;<span class="keyword">&gt;</span>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>).openTop(CurrPos);</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  <span class="comment">// Find the previous instruction.</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  <span class="keywordflow">do</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    --CurrPos;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  <span class="keywordflow">while</span> (CurrPos != MBB-&gt;begin() &amp;&amp; CurrPos-&gt;isDebugValue());</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <span class="keywordflow">if</span> (CurrPos-&gt;isDebugValue()) {</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    closeRegion();</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  }</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> SlotIdx;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  <span class="keywordflow">if</span> (RequireIntervals)</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    SlotIdx = LIS-&gt;getInstructionIndex(CurrPos).<a class="code" href="classllvm_1_1SlotIndex.html#a04196b5e551d63690ede0244f80f2503">getRegSlot</a>();</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  <span class="comment">// Open the top of the region using slot indexes.</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  <span class="keywordflow">if</span> (RequireIntervals &amp;&amp; isTopClosed())</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="keyword">static_cast&lt;</span><a class="code" href="structllvm_1_1IntervalPressure.html">IntervalPressure</a>&amp;<span class="keyword">&gt;</span>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>).openTop(SlotIdx);</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  <a class="code" href="classRegisterOperands.html">RegisterOperands</a> RegOpers(TRI, <a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>);</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  <a class="code" href="RegisterPressure_8cpp.html#aefaf1f4d0ef6c56e26083e55db7f28f2">collectOperands</a>(CurrPos, RegOpers);</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  <span class="keywordflow">if</span> (PDiff)</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <a class="code" href="RegisterPressure_8cpp.html#a2ca1520a7e8bbebd7fd72f34fa36cf3c">collectPDiff</a>(*PDiff, RegOpers, <a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>);</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  <span class="comment">// Boost pressure for all dead defs together.</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  increaseRegPressure(RegOpers.<a class="code" href="classRegisterOperands.html#a3b66cf8b3be1a4b8afd71ac9e1d9609d">DeadDefs</a>);</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  decreaseRegPressure(RegOpers.<a class="code" href="classRegisterOperands.html#a3b66cf8b3be1a4b8afd71ac9e1d9609d">DeadDefs</a>);</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  <span class="comment">// Kill liveness at live defs.</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  <span class="comment">// TODO: consider earlyclobbers?</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = RegOpers.<a class="code" href="classRegisterOperands.html#adcaaea856fb848e888362cbb3b2811cd">Defs</a>.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = RegOpers.<a class="code" href="classRegisterOperands.html#adcaaea856fb848e888362cbb3b2811cd">Defs</a>[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="keywordtype">bool</span> DeadDef = <span class="keyword">false</span>;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="keywordflow">if</span> (RequireIntervals) {</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1LiveRange.html">LiveRange</a> *LR = getLiveRange(Reg);</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      <span class="keywordflow">if</span> (LR) {</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        <a class="code" href="classllvm_1_1LiveQueryResult.html">LiveQueryResult</a> LRQ = LR-&gt;<a class="code" href="classllvm_1_1LiveRange.html#acd0853cbfd87e166b73d3e24502f2346">Query</a>(SlotIdx);</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        DeadDef = LRQ.<a class="code" href="classllvm_1_1LiveQueryResult.html#afb3908139d2386f747d2151f9c97cf54">isDeadDef</a>();</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      }</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    }</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="keywordflow">if</span> (!DeadDef) {</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      <span class="keywordflow">if</span> (LiveRegs.erase(Reg))</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        decreaseRegPressure(Reg);</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        discoverLiveOut(Reg);</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    }</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  }</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  <span class="comment">// Generate liveness for uses.</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = RegOpers.<a class="code" href="classRegisterOperands.html#aa8ecd23ea54fdc8ce86641302d5f6392">Uses</a>.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = RegOpers.<a class="code" href="classRegisterOperands.html#aa8ecd23ea54fdc8ce86641302d5f6392">Uses</a>[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="keywordflow">if</span> (!LiveRegs.contains(Reg)) {</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;      <span class="comment">// Adjust liveouts if LiveIntervals are available.</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;      <span class="keywordflow">if</span> (RequireIntervals) {</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1LiveRange.html">LiveRange</a> *LR = getLiveRange(Reg);</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        <span class="keywordflow">if</span> (LR) {</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;          <a class="code" href="classllvm_1_1LiveQueryResult.html">LiveQueryResult</a> LRQ = LR-&gt;<a class="code" href="classllvm_1_1LiveRange.html#acd0853cbfd87e166b73d3e24502f2346">Query</a>(SlotIdx);</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;          <span class="keywordflow">if</span> (!LRQ.<a class="code" href="classllvm_1_1LiveQueryResult.html#a5c02c56a4b3e6554395d57b0ac08dbf1">isKill</a>() &amp;&amp; !LRQ.<a class="code" href="classllvm_1_1LiveQueryResult.html#a74f8b3ac40a43926688ed03698a6a1d9">valueDefined</a>())</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;            discoverLiveOut(Reg);</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        }</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      }</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;      increaseRegPressure(Reg);</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;      LiveRegs.insert(Reg);</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      <span class="keywordflow">if</span> (LiveUses &amp;&amp; !<a class="code" href="RegisterPressure_8cpp.html#a7fbb2c9c794d8adde8a3448be7f3b557">containsReg</a>(*LiveUses, Reg))</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        LiveUses-&gt;<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Reg);</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    }</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  }</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  <span class="keywordflow">if</span> (TrackUntiedDefs) {</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = RegOpers.<a class="code" href="classRegisterOperands.html#adcaaea856fb848e888362cbb3b2811cd">Defs</a>.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = RegOpers.<a class="code" href="classRegisterOperands.html#adcaaea856fb848e888362cbb3b2811cd">Defs</a>[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">TargetRegisterInfo::isVirtualRegister</a>(Reg) &amp;&amp; !LiveRegs.contains(Reg))</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        UntiedDefs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#af622128e353515efebccad40eae495cb">insert</a>(Reg);</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    }</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  }</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;}</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment">/// Advance across the current instruction.</span></div><div class="line"><a name="l00547"></a><span class="lineno"><a class="line" href="classllvm_1_1RegPressureTracker.html#a404ad912dd07e1ed89f337e2d56d9c59">  547</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1RegPressureTracker.html#a404ad912dd07e1ed89f337e2d56d9c59">RegPressureTracker::advance</a>() {</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  assert(!TrackUntiedDefs &amp;&amp; <span class="stringliteral">&quot;unsupported mode&quot;</span>);</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  <span class="comment">// Check for the bottom of the analyzable region.</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="keywordflow">if</span> (CurrPos == MBB-&gt;end()) {</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    closeRegion();</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  }</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  <span class="keywordflow">if</span> (!isTopClosed())</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    closeTop();</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> SlotIdx;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <span class="keywordflow">if</span> (RequireIntervals)</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    SlotIdx = getCurrSlot();</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <span class="comment">// Open the bottom of the region using slot indexes.</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  <span class="keywordflow">if</span> (isBottomClosed()) {</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keywordflow">if</span> (RequireIntervals)</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      <span class="keyword">static_cast&lt;</span><a class="code" href="structllvm_1_1IntervalPressure.html">IntervalPressure</a>&amp;<span class="keyword">&gt;</span>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>).openBottom(SlotIdx);</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      <span class="keyword">static_cast&lt;</span><a class="code" href="structllvm_1_1RegionPressure.html">RegionPressure</a>&amp;<span class="keyword">&gt;</span>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>).openBottom(CurrPos);</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  }</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <a class="code" href="classRegisterOperands.html">RegisterOperands</a> RegOpers(TRI, <a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>);</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <a class="code" href="RegisterPressure_8cpp.html#aefaf1f4d0ef6c56e26083e55db7f28f2">collectOperands</a>(CurrPos, RegOpers);</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = RegOpers.<a class="code" href="classRegisterOperands.html#aa8ecd23ea54fdc8ce86641302d5f6392">Uses</a>.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = RegOpers.<a class="code" href="classRegisterOperands.html#aa8ecd23ea54fdc8ce86641302d5f6392">Uses</a>[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="comment">// Discover live-ins.</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="keywordtype">bool</span> isLive = LiveRegs.contains(Reg);</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="keywordflow">if</span> (!isLive)</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      discoverLiveIn(Reg);</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="comment">// Kill liveness at last uses.</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="keywordtype">bool</span> lastUse = <span class="keyword">false</span>;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="keywordflow">if</span> (RequireIntervals) {</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1LiveRange.html">LiveRange</a> *LR = getLiveRange(Reg);</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      lastUse = LR &amp;&amp; LR-&gt;<a class="code" href="classllvm_1_1LiveRange.html#acd0853cbfd87e166b73d3e24502f2346">Query</a>(SlotIdx).<a class="code" href="classllvm_1_1LiveQueryResult.html#a5c02c56a4b3e6554395d57b0ac08dbf1">isKill</a>();</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    }</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      <span class="comment">// Allocatable physregs are always single-use before register rewriting.</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      lastUse = !<a class="code" href="classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">TargetRegisterInfo::isVirtualRegister</a>(Reg);</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    }</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="keywordflow">if</span> (lastUse &amp;&amp; isLive) {</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;      LiveRegs.erase(Reg);</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;      decreaseRegPressure(Reg);</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    }</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!lastUse &amp;&amp; !isLive)</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      increaseRegPressure(Reg);</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  }</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  <span class="comment">// Generate liveness for defs.</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = RegOpers.<a class="code" href="classRegisterOperands.html#adcaaea856fb848e888362cbb3b2811cd">Defs</a>.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = RegOpers.<a class="code" href="classRegisterOperands.html#adcaaea856fb848e888362cbb3b2811cd">Defs</a>[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="keywordflow">if</span> (LiveRegs.insert(Reg))</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;      increaseRegPressure(Reg);</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  }</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  <span class="comment">// Boost pressure for all dead defs together.</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  increaseRegPressure(RegOpers.<a class="code" href="classRegisterOperands.html#a3b66cf8b3be1a4b8afd71ac9e1d9609d">DeadDefs</a>);</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  decreaseRegPressure(RegOpers.<a class="code" href="classRegisterOperands.html#a3b66cf8b3be1a4b8afd71ac9e1d9609d">DeadDefs</a>);</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  <span class="comment">// Find the next instruction.</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <span class="keywordflow">do</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    ++CurrPos;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  <span class="keywordflow">while</span> (CurrPos != MBB-&gt;end() &amp;&amp; CurrPos-&gt;isDebugValue());</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;}</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="comment">/// Find the max change in excess pressure across all sets.</span></div><div class="line"><a name="l00616"></a><span class="lineno"><a class="line" href="RegisterPressure_8cpp.html#a013f10c0323064cf28c1aed647c0b478">  616</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="RegisterPressure_8cpp.html#a013f10c0323064cf28c1aed647c0b478">computeExcessPressureDelta</a>(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> OldPressureVec,</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                                       <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> NewPressureVec,</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                                       <a class="code" href="structllvm_1_1RegPressureDelta.html">RegPressureDelta</a> &amp;Delta,</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                                       <span class="keyword">const</span> <a class="code" href="classllvm_1_1RegisterClassInfo.html">RegisterClassInfo</a> *RCI,</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                                       <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> LiveThruPressureVec) {</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  Delta.<a class="code" href="structllvm_1_1RegPressureDelta.html#aff9c3b403c6d4af795dd8be1c9612240">Excess</a> = <a class="code" href="classllvm_1_1PressureChange.html">PressureChange</a>();</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = OldPressureVec.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <span class="keywordtype">unsigned</span> POld = OldPressureVec[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <span class="keywordtype">unsigned</span> PNew = NewPressureVec[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <span class="keywordtype">int</span> PDiff = (<a class="code" href="Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a>)PNew - (<span class="keywordtype">int</span>)POld;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keywordflow">if</span> (!PDiff) <span class="comment">// No change in this set in the common case.</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="comment">// Only consider change beyond the limit.</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="keywordtype">unsigned</span> Limit = RCI-&gt;<a class="code" href="classllvm_1_1RegisterClassInfo.html#a25ac0ae59d10e7b19c2f57fe6ff52d74">getRegPressureSetLimit</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="keywordflow">if</span> (!LiveThruPressureVec.<a class="code" href="classllvm_1_1ArrayRef.html#a3aa55c9d9145cd6b3b21c466b18abd80">empty</a>())</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;      Limit += LiveThruPressureVec[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="keywordflow">if</span> (Limit &gt; POld) {</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;      <span class="keywordflow">if</span> (Limit &gt; PNew)</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        PDiff = 0;            <span class="comment">// Under the limit</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        PDiff = PNew - Limit; <span class="comment">// Just exceeded limit.</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    }</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Limit &gt; PNew)</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;      PDiff = Limit - POld;   <span class="comment">// Just obeyed limit.</span></div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="keywordflow">if</span> (PDiff) {</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;      Delta.<a class="code" href="structllvm_1_1RegPressureDelta.html#aff9c3b403c6d4af795dd8be1c9612240">Excess</a> = <a class="code" href="classllvm_1_1PressureChange.html">PressureChange</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;      Delta.<a class="code" href="structllvm_1_1RegPressureDelta.html#aff9c3b403c6d4af795dd8be1c9612240">Excess</a>.<a class="code" href="classllvm_1_1PressureChange.html#a4b74a0d0d1bc2e22fa7376eda3fdd85f">setUnitInc</a>(PDiff);</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    }</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  }</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;}</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="comment">/// Find the max change in max pressure that either surpasses a critical PSet</span></div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="comment">/// limit or exceeds the current MaxPressureLimit.</span></div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="comment">/// FIXME: comparing each element of the old and new MaxPressure vectors here is</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="comment">/// silly. It&#39;s done now to demonstrate the concept but will go away with a</span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="comment">/// RegPressureTracker API change to work with pressure differences.</span></div><div class="line"><a name="l00656"></a><span class="lineno"><a class="line" href="RegisterPressure_8cpp.html#a822aec28298cd2dc8f346d4753a4154b">  656</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="RegisterPressure_8cpp.html#a822aec28298cd2dc8f346d4753a4154b">computeMaxPressureDelta</a>(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> OldMaxPressureVec,</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                                    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> NewMaxPressureVec,</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;                                    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;PressureChange&gt;</a> CriticalPSets,</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                                    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> MaxPressureLimit,</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                                    <a class="code" href="structllvm_1_1RegPressureDelta.html">RegPressureDelta</a> &amp;Delta) {</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  Delta.<a class="code" href="structllvm_1_1RegPressureDelta.html#a277da5755f2b30ebcebdba51d0de1acf">CriticalMax</a> = <a class="code" href="classllvm_1_1PressureChange.html">PressureChange</a>();</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  Delta.<a class="code" href="structllvm_1_1RegPressureDelta.html#a589e1a7e9a8a095d8d01ff8ba32b3d14">CurrentMax</a> = <a class="code" href="classllvm_1_1PressureChange.html">PressureChange</a>();</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  <span class="keywordtype">unsigned</span> CritIdx = 0, CritEnd = CriticalPSets.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>();</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = OldMaxPressureVec.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="keywordtype">unsigned</span> POld = OldMaxPressureVec[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="keywordtype">unsigned</span> PNew = NewMaxPressureVec[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <span class="keywordflow">if</span> (PNew == POld) <span class="comment">// No change in this set in the common case.</span></div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="keywordflow">if</span> (!Delta.<a class="code" href="structllvm_1_1RegPressureDelta.html#a277da5755f2b30ebcebdba51d0de1acf">CriticalMax</a>.<a class="code" href="classllvm_1_1PressureChange.html#a1d0b21ec4f6e6eada798a9e71d043e68">isValid</a>()) {</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;      <span class="keywordflow">while</span> (CritIdx != CritEnd &amp;&amp; CriticalPSets[CritIdx].getPSet() &lt; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;        ++CritIdx;</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;      <span class="keywordflow">if</span> (CritIdx != CritEnd &amp;&amp; CriticalPSets[CritIdx].getPSet() == <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        <span class="keywordtype">int</span> PDiff = (<a class="code" href="Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a>)PNew - (<span class="keywordtype">int</span>)CriticalPSets[CritIdx].getUnitInc();</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        <span class="keywordflow">if</span> (PDiff &gt; 0) {</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;          Delta.<a class="code" href="structllvm_1_1RegPressureDelta.html#a277da5755f2b30ebcebdba51d0de1acf">CriticalMax</a> = <a class="code" href="classllvm_1_1PressureChange.html">PressureChange</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;          Delta.<a class="code" href="structllvm_1_1RegPressureDelta.html#a277da5755f2b30ebcebdba51d0de1acf">CriticalMax</a>.<a class="code" href="classllvm_1_1PressureChange.html#a4b74a0d0d1bc2e22fa7376eda3fdd85f">setUnitInc</a>(PDiff);</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        }</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;      }</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    }</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <span class="comment">// Find the first increase above MaxPressureLimit.</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <span class="comment">// (Ignores negative MDiff).</span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="keywordflow">if</span> (!Delta.<a class="code" href="structllvm_1_1RegPressureDelta.html#a589e1a7e9a8a095d8d01ff8ba32b3d14">CurrentMax</a>.<a class="code" href="classllvm_1_1PressureChange.html#a1d0b21ec4f6e6eada798a9e71d043e68">isValid</a>() &amp;&amp; PNew &gt; MaxPressureLimit[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]) {</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;      Delta.<a class="code" href="structllvm_1_1RegPressureDelta.html#a589e1a7e9a8a095d8d01ff8ba32b3d14">CurrentMax</a> = <a class="code" href="classllvm_1_1PressureChange.html">PressureChange</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;      Delta.<a class="code" href="structllvm_1_1RegPressureDelta.html#a589e1a7e9a8a095d8d01ff8ba32b3d14">CurrentMax</a>.<a class="code" href="classllvm_1_1PressureChange.html#a4b74a0d0d1bc2e22fa7376eda3fdd85f">setUnitInc</a>(PNew - POld);</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;      <span class="keywordflow">if</span> (CritIdx == CritEnd || Delta.<a class="code" href="structllvm_1_1RegPressureDelta.html#a277da5755f2b30ebcebdba51d0de1acf">CriticalMax</a>.<a class="code" href="classllvm_1_1PressureChange.html#a1d0b21ec4f6e6eada798a9e71d043e68">isValid</a>())</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    }</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  }</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;}</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;<span class="comment">/// Record the upward impact of a single instruction on current register</span></div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;<span class="comment">/// pressure. Unlike the advance/recede pressure tracking interface, this does</span></div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="comment">/// not discover live in/outs.</span></div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="comment">/// This is intended for speculative queries. It leaves pressure inconsistent</span></div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;<span class="comment">/// with the current position, so must be restored by the caller.</span></div><div class="line"><a name="l00700"></a><span class="lineno"><a class="line" href="classllvm_1_1RegPressureTracker.html#ab0885ecf357ddad3594c9a2a5a9527f2">  700</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1RegPressureTracker.html#ab0885ecf357ddad3594c9a2a5a9527f2">RegPressureTracker::bumpUpwardPressure</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>) {</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  assert(!MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a1e1d26226c627cf3dcf3c191b85e7d7d">isDebugValue</a>() &amp;&amp; <span class="stringliteral">&quot;Expect a nondebug instruction.&quot;</span>);</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <span class="comment">// Account for register pressure similar to RegPressureTracker::recede().</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <a class="code" href="classRegisterOperands.html">RegisterOperands</a> RegOpers(TRI, <a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>, <span class="comment">/*IgnoreDead=*/</span><span class="keyword">true</span>);</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;  <a class="code" href="RegisterPressure_8cpp.html#aefaf1f4d0ef6c56e26083e55db7f28f2">collectOperands</a>(MI, RegOpers);</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  <span class="comment">// Boost max pressure for all dead defs together.</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  <span class="comment">// Since CurrSetPressure and MaxSetPressure</span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  increaseRegPressure(RegOpers.DeadDefs);</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  decreaseRegPressure(RegOpers.DeadDefs);</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  <span class="comment">// Kill liveness at live defs.</span></div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = RegOpers.Defs.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = RegOpers.Defs[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <span class="keywordtype">bool</span> DeadDef = <span class="keyword">false</span>;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <span class="keywordflow">if</span> (RequireIntervals) {</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1LiveRange.html">LiveRange</a> *LR = getLiveRange(Reg);</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;      <span class="keywordflow">if</span> (LR) {</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> SlotIdx = LIS-&gt;getInstructionIndex(MI);</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        <a class="code" href="classllvm_1_1LiveQueryResult.html">LiveQueryResult</a> LRQ = LR-&gt;<a class="code" href="classllvm_1_1LiveRange.html#acd0853cbfd87e166b73d3e24502f2346">Query</a>(SlotIdx);</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        DeadDef = LRQ.<a class="code" href="classllvm_1_1LiveQueryResult.html#afb3908139d2386f747d2151f9c97cf54">isDeadDef</a>();</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;      }</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    }</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="keywordflow">if</span> (!DeadDef) {</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="RegisterPressure_8cpp.html#a7fbb2c9c794d8adde8a3448be7f3b557">containsReg</a>(RegOpers.Uses, Reg))</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        decreaseRegPressure(Reg);</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    }</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  }</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  <span class="comment">// Generate liveness for uses.</span></div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = RegOpers.Uses.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = RegOpers.Uses[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <span class="keywordflow">if</span> (!LiveRegs.contains(Reg))</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;      increaseRegPressure(Reg);</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  }</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;}</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;<span class="comment">/// Consider the pressure increase caused by traversing this instruction</span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="comment">/// bottom-up. Find the pressure set with the most change beyond its pressure</span></div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;<span class="comment">/// limit based on the tracker&#39;s current pressure, and return the change in</span></div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;<span class="comment">/// number of register units of that pressure set introduced by this</span></div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;<span class="comment">/// instruction.</span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="comment">/// This assumes that the current LiveOut set is sufficient.</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="comment">/// FIXME: This is expensive for an on-the-fly query. We need to cache the</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="comment">/// result per-SUnit with enough information to adjust for the current</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="comment">/// scheduling position. But this works as a proof of concept.</span></div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1RegPressureTracker.html#a41a3118fb6bd46e397256b3c9794b61c">RegPressureTracker::</a></div><div class="line"><a name="l00749"></a><span class="lineno"><a class="line" href="classllvm_1_1RegPressureTracker.html#a41a3118fb6bd46e397256b3c9794b61c">  749</a></span>&#160;<a class="code" href="classllvm_1_1RegPressureTracker.html#a41a3118fb6bd46e397256b3c9794b61c">getMaxUpwardPressureDelta</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>, <a class="code" href="classllvm_1_1PressureDiff.html">PressureDiff</a> *PDiff,</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;                          <a class="code" href="structllvm_1_1RegPressureDelta.html">RegPressureDelta</a> &amp;Delta,</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;                          <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;PressureChange&gt;</a> CriticalPSets,</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                          <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> MaxPressureLimit) {</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;  <span class="comment">// Snapshot Pressure.</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  <span class="comment">// FIXME: The snapshot heap space should persist. But I&#39;m planning to</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  <span class="comment">// summarize the pressure effect so we don&#39;t need to snapshot at all.</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  std::vector&lt;unsigned&gt; SavedPressure = CurrSetPressure;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  std::vector&lt;unsigned&gt; SavedMaxPressure = <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.MaxSetPressure;</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  bumpUpwardPressure(MI);</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  <a class="code" href="RegisterPressure_8cpp.html#a013f10c0323064cf28c1aed647c0b478">computeExcessPressureDelta</a>(SavedPressure, CurrSetPressure, Delta, RCI,</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                             LiveThruPressure);</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  <a class="code" href="RegisterPressure_8cpp.html#a822aec28298cd2dc8f346d4753a4154b">computeMaxPressureDelta</a>(SavedMaxPressure, <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.MaxSetPressure, CriticalPSets,</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                          MaxPressureLimit, Delta);</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  assert(Delta.<a class="code" href="structllvm_1_1RegPressureDelta.html#a277da5755f2b30ebcebdba51d0de1acf">CriticalMax</a>.<a class="code" href="classllvm_1_1PressureChange.html#ad9c2dce7dcf3bbfbec05526cfd0cf897">getUnitInc</a>() &gt;= 0 &amp;&amp;</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;         Delta.<a class="code" href="structllvm_1_1RegPressureDelta.html#a589e1a7e9a8a095d8d01ff8ba32b3d14">CurrentMax</a>.<a class="code" href="classllvm_1_1PressureChange.html#ad9c2dce7dcf3bbfbec05526cfd0cf897">getUnitInc</a>() &gt;= 0 &amp;&amp; <span class="stringliteral">&quot;cannot decrease max pressure&quot;</span>);</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;  <span class="comment">// Restore the tracker&#39;s state.</span></div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.MaxSetPressure.swap(SavedMaxPressure);</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  CurrSetPressure.swap(SavedPressure);</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  <span class="keywordflow">if</span> (!PDiff)</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  <span class="comment">// Check if the alternate algorithm yields the same result.</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  <a class="code" href="structllvm_1_1RegPressureDelta.html">RegPressureDelta</a> Delta2;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  getUpwardPressureDelta(MI, *PDiff, Delta2, CriticalPSets, MaxPressureLimit);</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  <span class="keywordflow">if</span> (Delta != Delta2) {</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;DELTA: &quot;</span> &lt;&lt; *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <span class="keywordflow">if</span> (Delta.<a class="code" href="structllvm_1_1RegPressureDelta.html#aff9c3b403c6d4af795dd8be1c9612240">Excess</a>.<a class="code" href="classllvm_1_1PressureChange.html#a1d0b21ec4f6e6eada798a9e71d043e68">isValid</a>())</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Excess1 &quot;</span> &lt;&lt; TRI-&gt;getRegPressureSetName(Delta.<a class="code" href="structllvm_1_1RegPressureDelta.html#aff9c3b403c6d4af795dd8be1c9612240">Excess</a>.<a class="code" href="classllvm_1_1PressureChange.html#ad70cb56db629f087c5f2b0dfb5dc8dc9">getPSet</a>())</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;             &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; Delta.<a class="code" href="structllvm_1_1RegPressureDelta.html#aff9c3b403c6d4af795dd8be1c9612240">Excess</a>.<a class="code" href="classllvm_1_1PressureChange.html#ad9c2dce7dcf3bbfbec05526cfd0cf897">getUnitInc</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <span class="keywordflow">if</span> (Delta.<a class="code" href="structllvm_1_1RegPressureDelta.html#a277da5755f2b30ebcebdba51d0de1acf">CriticalMax</a>.<a class="code" href="classllvm_1_1PressureChange.html#a1d0b21ec4f6e6eada798a9e71d043e68">isValid</a>())</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Critic1 &quot;</span> &lt;&lt; TRI-&gt;getRegPressureSetName(Delta.<a class="code" href="structllvm_1_1RegPressureDelta.html#a277da5755f2b30ebcebdba51d0de1acf">CriticalMax</a>.<a class="code" href="classllvm_1_1PressureChange.html#ad70cb56db629f087c5f2b0dfb5dc8dc9">getPSet</a>())</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;             &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; Delta.<a class="code" href="structllvm_1_1RegPressureDelta.html#a277da5755f2b30ebcebdba51d0de1acf">CriticalMax</a>.<a class="code" href="classllvm_1_1PressureChange.html#ad9c2dce7dcf3bbfbec05526cfd0cf897">getUnitInc</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <span class="keywordflow">if</span> (Delta.<a class="code" href="structllvm_1_1RegPressureDelta.html#a589e1a7e9a8a095d8d01ff8ba32b3d14">CurrentMax</a>.<a class="code" href="classllvm_1_1PressureChange.html#a1d0b21ec4f6e6eada798a9e71d043e68">isValid</a>())</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;CurrMx1 &quot;</span> &lt;&lt; TRI-&gt;getRegPressureSetName(Delta.<a class="code" href="structllvm_1_1RegPressureDelta.html#a589e1a7e9a8a095d8d01ff8ba32b3d14">CurrentMax</a>.<a class="code" href="classllvm_1_1PressureChange.html#ad70cb56db629f087c5f2b0dfb5dc8dc9">getPSet</a>())</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;             &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; Delta.<a class="code" href="structllvm_1_1RegPressureDelta.html#a589e1a7e9a8a095d8d01ff8ba32b3d14">CurrentMax</a>.<a class="code" href="classllvm_1_1PressureChange.html#ad9c2dce7dcf3bbfbec05526cfd0cf897">getUnitInc</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <span class="keywordflow">if</span> (Delta2.<a class="code" href="structllvm_1_1RegPressureDelta.html#aff9c3b403c6d4af795dd8be1c9612240">Excess</a>.<a class="code" href="classllvm_1_1PressureChange.html#a1d0b21ec4f6e6eada798a9e71d043e68">isValid</a>())</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Excess2 &quot;</span> &lt;&lt; TRI-&gt;getRegPressureSetName(Delta2.<a class="code" href="structllvm_1_1RegPressureDelta.html#aff9c3b403c6d4af795dd8be1c9612240">Excess</a>.<a class="code" href="classllvm_1_1PressureChange.html#ad70cb56db629f087c5f2b0dfb5dc8dc9">getPSet</a>())</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;             &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; Delta2.<a class="code" href="structllvm_1_1RegPressureDelta.html#aff9c3b403c6d4af795dd8be1c9612240">Excess</a>.<a class="code" href="classllvm_1_1PressureChange.html#ad9c2dce7dcf3bbfbec05526cfd0cf897">getUnitInc</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="keywordflow">if</span> (Delta2.<a class="code" href="structllvm_1_1RegPressureDelta.html#a277da5755f2b30ebcebdba51d0de1acf">CriticalMax</a>.<a class="code" href="classllvm_1_1PressureChange.html#a1d0b21ec4f6e6eada798a9e71d043e68">isValid</a>())</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Critic2 &quot;</span> &lt;&lt; TRI-&gt;getRegPressureSetName(Delta2.<a class="code" href="structllvm_1_1RegPressureDelta.html#a277da5755f2b30ebcebdba51d0de1acf">CriticalMax</a>.<a class="code" href="classllvm_1_1PressureChange.html#ad70cb56db629f087c5f2b0dfb5dc8dc9">getPSet</a>())</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;             &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; Delta2.<a class="code" href="structllvm_1_1RegPressureDelta.html#a277da5755f2b30ebcebdba51d0de1acf">CriticalMax</a>.<a class="code" href="classllvm_1_1PressureChange.html#ad9c2dce7dcf3bbfbec05526cfd0cf897">getUnitInc</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <span class="keywordflow">if</span> (Delta2.<a class="code" href="structllvm_1_1RegPressureDelta.html#a589e1a7e9a8a095d8d01ff8ba32b3d14">CurrentMax</a>.<a class="code" href="classllvm_1_1PressureChange.html#a1d0b21ec4f6e6eada798a9e71d043e68">isValid</a>())</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;CurrMx2 &quot;</span> &lt;&lt; TRI-&gt;getRegPressureSetName(Delta2.<a class="code" href="structllvm_1_1RegPressureDelta.html#a589e1a7e9a8a095d8d01ff8ba32b3d14">CurrentMax</a>.<a class="code" href="classllvm_1_1PressureChange.html#ad70cb56db629f087c5f2b0dfb5dc8dc9">getPSet</a>())</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;             &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; Delta2.<a class="code" href="structllvm_1_1RegPressureDelta.html#a589e1a7e9a8a095d8d01ff8ba32b3d14">CurrentMax</a>.<a class="code" href="classllvm_1_1PressureChange.html#ad9c2dce7dcf3bbfbec05526cfd0cf897">getUnitInc</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;RegP Delta Mismatch&quot;</span>);</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  }</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;}</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="comment">/// This is a prototype of the fast version of querying register pressure that</span></div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="comment">/// does not directly depend on current liveness. It&#39;s still slow because we</span></div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="comment">/// recompute pressure change on-the-fly. This implementation only exists to</span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="comment">/// prove correctness.</span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="comment">/// @param Delta captures information needed for heuristics.</span></div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="comment">/// @param CriticalPSets Are the pressure sets that are known to exceed some</span></div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="comment">/// limit within the region, not necessarily at the current position.</span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;<span class="comment">/// @param MaxPressureLimit Is the max pressure within the region, not</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="comment">/// necessarily at the current position.</span></div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1RegPressureTracker.html#a159b60403d83d421b95876ef26df2d94">RegPressureTracker::</a></div><div class="line"><a name="l00817"></a><span class="lineno"><a class="line" href="classllvm_1_1RegPressureTracker.html#a159b60403d83d421b95876ef26df2d94">  817</a></span>&#160;<a class="code" href="classllvm_1_1RegPressureTracker.html#a159b60403d83d421b95876ef26df2d94">getUpwardPressureDelta</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>, <span class="comment">/*const*/</span> <a class="code" href="classllvm_1_1PressureDiff.html">PressureDiff</a> &amp;PDiff,</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;                       <a class="code" href="structllvm_1_1RegPressureDelta.html">RegPressureDelta</a> &amp;Delta,</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                       <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;PressureChange&gt;</a> CriticalPSets,</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;                       <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> MaxPressureLimit)<span class="keyword"> const </span>{</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  <span class="keywordtype">unsigned</span> CritIdx = 0, CritEnd = CriticalPSets.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>();</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PressureChange.html">PressureDiff::const_iterator</a></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;         PDiffI = PDiff.<a class="code" href="classllvm_1_1PressureDiff.html#ad22e63bbd4e84ba7a3ed4462d34270b6">begin</a>(), PDiffE = PDiff.<a class="code" href="classllvm_1_1PressureDiff.html#a91f8b1b3a2ac9324165199a7189c2ad8">end</a>();</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;       PDiffI != PDiffE &amp;&amp; PDiffI-&gt;<a class="code" href="classllvm_1_1PressureChange.html#a1d0b21ec4f6e6eada798a9e71d043e68">isValid</a>(); ++PDiffI) {</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    <span class="keywordtype">unsigned</span> PSetID = PDiffI-&gt;getPSet();</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <span class="keywordtype">unsigned</span> Limit = RCI-&gt;getRegPressureSetLimit(PSetID);</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <span class="keywordflow">if</span> (!LiveThruPressure.empty())</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;      Limit += LiveThruPressure[PSetID];</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    <span class="keywordtype">unsigned</span> POld = CurrSetPressure[PSetID];</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <span class="keywordtype">unsigned</span> MOld = <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.MaxSetPressure[PSetID];</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <span class="keywordtype">unsigned</span> MNew = MOld;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <span class="comment">// Ignore DeadDefs here because they aren&#39;t captured by PressureChange.</span></div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <span class="keywordtype">unsigned</span> PNew = POld + PDiffI-&gt;getUnitInc();</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    assert((PDiffI-&gt;getUnitInc() &gt;= 0) == (PNew &gt;= POld) &amp;&amp; <span class="stringliteral">&quot;PSet overflow&quot;</span>);</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <span class="keywordflow">if</span> (PNew &gt; MOld)</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;      MNew = PNew;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="comment">// Check if current pressure has exceeded the limit.</span></div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    <span class="keywordflow">if</span> (!Delta.<a class="code" href="structllvm_1_1RegPressureDelta.html#aff9c3b403c6d4af795dd8be1c9612240">Excess</a>.<a class="code" href="classllvm_1_1PressureChange.html#a1d0b21ec4f6e6eada798a9e71d043e68">isValid</a>()) {</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      <span class="keywordtype">unsigned</span> ExcessInc = 0;</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;      <span class="keywordflow">if</span> (PNew &gt; Limit)</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        ExcessInc = POld &gt; Limit ? PNew - POld : PNew - Limit;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (POld &gt; Limit)</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        ExcessInc = Limit - POld;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;      <span class="keywordflow">if</span> (ExcessInc) {</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        Delta.<a class="code" href="structllvm_1_1RegPressureDelta.html#aff9c3b403c6d4af795dd8be1c9612240">Excess</a> = <a class="code" href="classllvm_1_1PressureChange.html">PressureChange</a>(PSetID);</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        Delta.<a class="code" href="structllvm_1_1RegPressureDelta.html#aff9c3b403c6d4af795dd8be1c9612240">Excess</a>.<a class="code" href="classllvm_1_1PressureChange.html#a4b74a0d0d1bc2e22fa7376eda3fdd85f">setUnitInc</a>(ExcessInc);</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;      }</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    }</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    <span class="comment">// Check if max pressure has exceeded a critical pressure set max.</span></div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <span class="keywordflow">if</span> (MNew == MOld)</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    <span class="keywordflow">if</span> (!Delta.<a class="code" href="structllvm_1_1RegPressureDelta.html#a277da5755f2b30ebcebdba51d0de1acf">CriticalMax</a>.<a class="code" href="classllvm_1_1PressureChange.html#a1d0b21ec4f6e6eada798a9e71d043e68">isValid</a>()) {</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;      <span class="keywordflow">while</span> (CritIdx != CritEnd &amp;&amp; CriticalPSets[CritIdx].getPSet() &lt; PSetID)</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        ++CritIdx;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;      <span class="keywordflow">if</span> (CritIdx != CritEnd &amp;&amp; CriticalPSets[CritIdx].getPSet() == PSetID) {</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        <span class="keywordtype">int</span> CritInc = (<a class="code" href="Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a>)MNew - (<span class="keywordtype">int</span>)CriticalPSets[CritIdx].getUnitInc();</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;        <span class="keywordflow">if</span> (CritInc &gt; 0 &amp;&amp; CritInc &lt;= INT16_MAX) {</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;          Delta.<a class="code" href="structllvm_1_1RegPressureDelta.html#a277da5755f2b30ebcebdba51d0de1acf">CriticalMax</a> = <a class="code" href="classllvm_1_1PressureChange.html">PressureChange</a>(PSetID);</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;          Delta.<a class="code" href="structllvm_1_1RegPressureDelta.html#a277da5755f2b30ebcebdba51d0de1acf">CriticalMax</a>.<a class="code" href="classllvm_1_1PressureChange.html#a4b74a0d0d1bc2e22fa7376eda3fdd85f">setUnitInc</a>(CritInc);</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        }</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;      }</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    }</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    <span class="comment">// Check if max pressure has exceeded the current max.</span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    <span class="keywordflow">if</span> (!Delta.<a class="code" href="structllvm_1_1RegPressureDelta.html#a589e1a7e9a8a095d8d01ff8ba32b3d14">CurrentMax</a>.<a class="code" href="classllvm_1_1PressureChange.html#a1d0b21ec4f6e6eada798a9e71d043e68">isValid</a>() &amp;&amp; MNew &gt; MaxPressureLimit[PSetID]) {</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;      Delta.<a class="code" href="structllvm_1_1RegPressureDelta.html#a589e1a7e9a8a095d8d01ff8ba32b3d14">CurrentMax</a> = <a class="code" href="classllvm_1_1PressureChange.html">PressureChange</a>(PSetID);</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;      Delta.<a class="code" href="structllvm_1_1RegPressureDelta.html#a589e1a7e9a8a095d8d01ff8ba32b3d14">CurrentMax</a>.<a class="code" href="classllvm_1_1PressureChange.html#a4b74a0d0d1bc2e22fa7376eda3fdd85f">setUnitInc</a>(MNew - MOld);</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    }</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  }</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;}</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="comment">/// Helper to find a vreg use between two indices [PriorUseIdx, NextUseIdx).</span></div><div class="line"><a name="l00875"></a><span class="lineno"><a class="line" href="RegisterPressure_8cpp.html#a6b96f6462675a81524f07103166ce3a6">  875</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="RegisterPressure_8cpp.html#a6b96f6462675a81524f07103166ce3a6">findUseBetween</a>(<span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a>,</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;                           <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> PriorUseIdx, <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> NextUseIdx,</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;                           <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> *<a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>,</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;                           <span class="keyword">const</span> <a class="code" href="classllvm_1_1LiveIntervals.html">LiveIntervals</a> *LIS) {</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator.html">MachineRegisterInfo::use_nodbg_iterator</a></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;         UI = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#aad684f050965249161650dcdf5a58fa4">use_nodbg_begin</a>(Reg), UE = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a355ba266da19094cc0948311c431768e">use_nodbg_end</a>();</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;         UI != UE; UI.<a class="code" href="classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator.html#ae87727dc0b59afe8bf48fee31a0a2ef3">skipInstruction</a>()) {</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a>* <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a> = &amp;*UI;</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;      <span class="keywordflow">if</span> (MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a1e1d26226c627cf3dcf3c191b85e7d7d">isDebugValue</a>())</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;      <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> InstSlot = LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a6bbcfa1e19c409a905ffc0356c060bd4">getInstructionIndex</a>(MI).<a class="code" href="classllvm_1_1SlotIndex.html#a04196b5e551d63690ede0244f80f2503">getRegSlot</a>();</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;      <span class="keywordflow">if</span> (InstSlot &gt;= PriorUseIdx &amp;&amp; InstSlot &lt; NextUseIdx)</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  }</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;}</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="comment">/// Record the downward impact of a single instruction on current register</span></div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;<span class="comment">/// pressure. Unlike the advance/recede pressure tracking interface, this does</span></div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="comment">/// not discover live in/outs.</span></div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;<span class="comment">/// This is intended for speculative queries. It leaves pressure inconsistent</span></div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;<span class="comment">/// with the current position, so must be restored by the caller.</span></div><div class="line"><a name="l00898"></a><span class="lineno"><a class="line" href="classllvm_1_1RegPressureTracker.html#a2b8b6196a7458b6a84480f03e2f1355d">  898</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1RegPressureTracker.html#a2b8b6196a7458b6a84480f03e2f1355d">RegPressureTracker::bumpDownwardPressure</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>) {</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  assert(!MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a1e1d26226c627cf3dcf3c191b85e7d7d">isDebugValue</a>() &amp;&amp; <span class="stringliteral">&quot;Expect a nondebug instruction.&quot;</span>);</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;  <span class="comment">// Account for register pressure similar to RegPressureTracker::recede().</span></div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  <a class="code" href="classRegisterOperands.html">RegisterOperands</a> RegOpers(TRI, <a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>);</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  <a class="code" href="RegisterPressure_8cpp.html#aefaf1f4d0ef6c56e26083e55db7f28f2">collectOperands</a>(MI, RegOpers);</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  <span class="comment">// Kill liveness at last uses. Assume allocatable physregs are single-use</span></div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  <span class="comment">// rather than checking LiveIntervals.</span></div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;  <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> SlotIdx;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;  <span class="keywordflow">if</span> (RequireIntervals)</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    SlotIdx = LIS-&gt;getInstructionIndex(MI).<a class="code" href="classllvm_1_1SlotIndex.html#a04196b5e551d63690ede0244f80f2503">getRegSlot</a>();</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = RegOpers.Uses.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = RegOpers.Uses[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <span class="keywordflow">if</span> (RequireIntervals) {</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;      <span class="comment">// FIXME: allow the caller to pass in the list of vreg uses that remain</span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;      <span class="comment">// to be bottom-scheduled to avoid searching uses at each query.</span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;      <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> CurrIdx = getCurrSlot();</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1LiveRange.html">LiveRange</a> *LR = getLiveRange(Reg);</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;      <span class="keywordflow">if</span> (LR) {</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;        <a class="code" href="classllvm_1_1LiveQueryResult.html">LiveQueryResult</a> LRQ = LR-&gt;<a class="code" href="classllvm_1_1LiveRange.html#acd0853cbfd87e166b73d3e24502f2346">Query</a>(SlotIdx);</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;        <span class="keywordflow">if</span> (LRQ.<a class="code" href="classllvm_1_1LiveQueryResult.html#a5c02c56a4b3e6554395d57b0ac08dbf1">isKill</a>() &amp;&amp; !<a class="code" href="RegisterPressure_8cpp.html#a6b96f6462675a81524f07103166ce3a6">findUseBetween</a>(Reg, CurrIdx, SlotIdx, <a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>, LIS)) {</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;          decreaseRegPressure(Reg);</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        }</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;      }</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    }</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">TargetRegisterInfo::isVirtualRegister</a>(Reg)) {</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;      <span class="comment">// Allocatable physregs are always single-use before register rewriting.</span></div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;      decreaseRegPressure(Reg);</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    }</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;  }</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  <span class="comment">// Generate liveness for defs.</span></div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  increaseRegPressure(RegOpers.Defs);</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  <span class="comment">// Boost pressure for all dead defs together.</span></div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;  increaseRegPressure(RegOpers.DeadDefs);</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  decreaseRegPressure(RegOpers.DeadDefs);</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;}</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;<span class="comment">/// Consider the pressure increase caused by traversing this instruction</span></div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;<span class="comment">/// top-down. Find the register class with the most change in its pressure limit</span></div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;<span class="comment">/// based on the tracker&#39;s current pressure, and return the number of excess</span></div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;<span class="comment">/// register units of that pressure set introduced by this instruction.</span></div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;<span class="comment">/// This assumes that the current LiveIn set is sufficient.</span></div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1RegPressureTracker.html#a972fa38378a3d49a9bb48ca584621438">RegPressureTracker::</a></div><div class="line"><a name="l00946"></a><span class="lineno"><a class="line" href="classllvm_1_1RegPressureTracker.html#a972fa38378a3d49a9bb48ca584621438">  946</a></span>&#160;<a class="code" href="classllvm_1_1RegPressureTracker.html#a972fa38378a3d49a9bb48ca584621438">getMaxDownwardPressureDelta</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>, <a class="code" href="structllvm_1_1RegPressureDelta.html">RegPressureDelta</a> &amp;Delta,</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;                            <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;PressureChange&gt;</a> CriticalPSets,</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;                            <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> MaxPressureLimit) {</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  <span class="comment">// Snapshot Pressure.</span></div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;  std::vector&lt;unsigned&gt; SavedPressure = CurrSetPressure;</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;  std::vector&lt;unsigned&gt; SavedMaxPressure = <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.MaxSetPressure;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;  bumpDownwardPressure(MI);</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  <a class="code" href="RegisterPressure_8cpp.html#a013f10c0323064cf28c1aed647c0b478">computeExcessPressureDelta</a>(SavedPressure, CurrSetPressure, Delta, RCI,</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;                             LiveThruPressure);</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;  <a class="code" href="RegisterPressure_8cpp.html#a822aec28298cd2dc8f346d4753a4154b">computeMaxPressureDelta</a>(SavedMaxPressure, <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.MaxSetPressure, CriticalPSets,</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;                          MaxPressureLimit, Delta);</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  assert(Delta.<a class="code" href="structllvm_1_1RegPressureDelta.html#a277da5755f2b30ebcebdba51d0de1acf">CriticalMax</a>.<a class="code" href="classllvm_1_1PressureChange.html#ad9c2dce7dcf3bbfbec05526cfd0cf897">getUnitInc</a>() &gt;= 0 &amp;&amp;</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;         Delta.<a class="code" href="structllvm_1_1RegPressureDelta.html#a589e1a7e9a8a095d8d01ff8ba32b3d14">CurrentMax</a>.<a class="code" href="classllvm_1_1PressureChange.html#ad9c2dce7dcf3bbfbec05526cfd0cf897">getUnitInc</a>() &gt;= 0 &amp;&amp; <span class="stringliteral">&quot;cannot decrease max pressure&quot;</span>);</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;  <span class="comment">// Restore the tracker&#39;s state.</span></div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;  <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.MaxSetPressure.swap(SavedMaxPressure);</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;  CurrSetPressure.swap(SavedPressure);</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;}</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;<span class="comment">/// Get the pressure of each PSet after traversing this instruction bottom-up.</span></div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1RegPressureTracker.html#ad552b6e557acce957b3bd5a1960a53dd">RegPressureTracker::</a></div><div class="line"><a name="l00969"></a><span class="lineno"><a class="line" href="classllvm_1_1RegPressureTracker.html#ad552b6e557acce957b3bd5a1960a53dd">  969</a></span>&#160;<a class="code" href="classllvm_1_1RegPressureTracker.html#ad552b6e557acce957b3bd5a1960a53dd">getUpwardPressure</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>,</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;                  std::vector&lt;unsigned&gt; &amp;PressureResult,</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;                  std::vector&lt;unsigned&gt; &amp;MaxPressureResult) {</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;  <span class="comment">// Snapshot pressure.</span></div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  PressureResult = CurrSetPressure;</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;  MaxPressureResult = <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.MaxSetPressure;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;  bumpUpwardPressure(MI);</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;  <span class="comment">// Current pressure becomes the result. Restore current pressure.</span></div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;  <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.MaxSetPressure.swap(MaxPressureResult);</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;  CurrSetPressure.swap(PressureResult);</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;}</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;<span class="comment">/// Get the pressure of each PSet after traversing this instruction top-down.</span></div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1RegPressureTracker.html#ac1bfd03ca8fa96ab674c7f7b620dd8a6">RegPressureTracker::</a></div><div class="line"><a name="l00985"></a><span class="lineno"><a class="line" href="classllvm_1_1RegPressureTracker.html#ac1bfd03ca8fa96ab674c7f7b620dd8a6">  985</a></span>&#160;<a class="code" href="classllvm_1_1RegPressureTracker.html#ac1bfd03ca8fa96ab674c7f7b620dd8a6">getDownwardPressure</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>,</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;                    std::vector&lt;unsigned&gt; &amp;PressureResult,</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;                    std::vector&lt;unsigned&gt; &amp;MaxPressureResult) {</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;  <span class="comment">// Snapshot pressure.</span></div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;  PressureResult = CurrSetPressure;</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;  MaxPressureResult = <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.MaxSetPressure;</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;  bumpDownwardPressure(MI);</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  <span class="comment">// Current pressure becomes the result. Restore current pressure.</span></div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.MaxSetPressure.swap(MaxPressureResult);</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;  CurrSetPressure.swap(PressureResult);</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;}</div><div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a075e34e98605d0e7c289763a104869ac"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">llvm::SmallVectorTemplateCommon::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00114">SmallVector.h:114</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon::size</a></div><div class="ttdeci">size_type size() const </div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00127">SmallVector.h:127</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00236">SmallVector.h:236</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1path_html_a214ec2f04ffd92636ed4bd2717607a1d"><div class="ttname"><a href="namespacellvm_1_1sys_1_1path.html#a214ec2f04ffd92636ed4bd2717607a1d">llvm::sys::path::end</a></div><div class="ttdeci">const_iterator end(StringRef path)</div><div class="ttdoc">Get end iterator over path. </div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00181">Path.cpp:181</a></div></div>
<div class="ttc" id="structllvm_1_1RegisterPressure_html_a7157aeebef40c142a26ce5db736a9f5f"><div class="ttname"><a href="structllvm_1_1RegisterPressure.html#a7157aeebef40c142a26ce5db736a9f5f">llvm::RegisterPressure::dump</a></div><div class="ttdeci">void dump(const TargetRegisterInfo *TRI) const </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00058">RegisterPressure.cpp:58</a></div></div>
<div class="ttc" id="classllvm_1_1RegPressureTracker_html_a404ad912dd07e1ed89f337e2d56d9c59"><div class="ttname"><a href="classllvm_1_1RegPressureTracker.html#a404ad912dd07e1ed89f337e2d56d9c59">llvm::RegPressureTracker::advance</a></div><div class="ttdeci">bool advance()</div><div class="ttdoc">Advance across the current instruction. </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00547">RegisterPressure.cpp:547</a></div></div>
<div class="ttc" id="classllvm_1_1RegPressureTracker_html_acbf583030c3b43d625a5ed8146022d86"><div class="ttname"><a href="classllvm_1_1RegPressureTracker.html#acbf583030c3b43d625a5ed8146022d86">llvm::RegPressureTracker::increaseRegPressure</a></div><div class="ttdeci">void increaseRegPressure(ArrayRef&lt; unsigned &gt; Regs)</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00082">RegisterPressure.cpp:82</a></div></div>
<div class="ttc" id="RegisterPressure_8cpp_html_a3a82c5c45d99293d5daa94045fa60efc"><div class="ttname"><a href="RegisterPressure_8cpp.html#a3a82c5c45d99293d5daa94045fa60efc">increaseSetPressure</a></div><div class="ttdeci">static void increaseSetPressure(std::vector&lt; unsigned &gt; &amp;CurrSetPressure, PSetIterator PSetI)</div><div class="ttdoc">Increase pressure for each pressure set provided by TargetRegisterInfo. </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00027">RegisterPressure.cpp:27</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="classllvm_1_1PressureDiff_html_a8169b5ff05a1e7ba40a3d99f0fdf76a2"><div class="ttname"><a href="classllvm_1_1PressureDiff.html#a8169b5ff05a1e7ba40a3d99f0fdf76a2">llvm::PressureDiff::addPressureChange</a></div><div class="ttdeci">void addPressureChange(unsigned RegUnit, bool IsDec, const MachineRegisterInfo *MRI)</div><div class="ttdoc">Add a change in pressure to the pressure diff of a given instruction. </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00384">RegisterPressure.cpp:384</a></div></div>
<div class="ttc" id="classllvm_1_1MCRegisterInfo_1_1DiffListIterator_html_abccd358b92366e5284e7e674e86b241f"><div class="ttname"><a href="classllvm_1_1MCRegisterInfo_1_1DiffListIterator.html#abccd358b92366e5284e7e674e86b241f">llvm::MCRegisterInfo::DiffListIterator::isValid</a></div><div class="ttdeci">bool isValid() const </div><div class="ttdoc">isValid - returns true if this iterator is not yet at the end. </div><div class="ttdef"><b>Definition:</b> <a href="MCRegisterInfo_8h_source.html#l00217">MCRegisterInfo.h:217</a></div></div>
<div class="ttc" id="classllvm_1_1PressureDiffs_html_adc55f26c1bfbbe17074ded7275f3961c"><div class="ttname"><a href="classllvm_1_1PressureDiffs.html#adc55f26c1bfbbe17074ded7275f3961c">llvm::PressureDiffs::init</a></div><div class="ttdeci">void init(unsigned N)</div><div class="ttdoc">Initialize an array of N PressureDiffs. </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00372">RegisterPressure.cpp:372</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html"><div class="ttname"><a href="classllvm_1_1MachineFunction.html">llvm::MachineFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00075">MachineFunction.h:75</a></div></div>
<div class="ttc" id="classllvm_1_1PressureDiff_html_a91f8b1b3a2ac9324165199a7189c2ad8"><div class="ttname"><a href="classllvm_1_1PressureDiff.html#a91f8b1b3a2ac9324165199a7189c2ad8">llvm::PressureDiff::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8h_source.html#l00147">RegisterPressure.h:147</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayRef_html_a38ed8cc3c342ad6910e8c869d3e2b9cf"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#a38ed8cc3c342ad6910e8c869d3e2b9cf">llvm::ArrayRef::end</a></div><div class="ttdeci">iterator end() const </div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00098">ArrayRef.h:98</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a196420aa839c2b21f42c4bf5c36df437"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a196420aa839c2b21f42c4bf5c36df437">llvm::MachineOperand::isDead</a></div><div class="ttdeci">bool isDead() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00284">MachineOperand.h:284</a></div></div>
<div class="ttc" id="classllvm_1_1LiveIntervals_html_a6bbcfa1e19c409a905ffc0356c060bd4"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#a6bbcfa1e19c409a905ffc0356c060bd4">llvm::LiveIntervals::getInstructionIndex</a></div><div class="ttdeci">SlotIndex getInstructionIndex(const MachineInstr *instr) const </div><div class="ttdoc">Returns the base index of the given instruction. </div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervalAnalysis_8h_source.html#l00190">LiveIntervalAnalysis.h:190</a></div></div>
<div class="ttc" id="classllvm_1_1PressureChange_html_a4b74a0d0d1bc2e22fa7376eda3fdd85f"><div class="ttname"><a href="classllvm_1_1PressureChange.html#a4b74a0d0d1bc2e22fa7376eda3fdd85f">llvm::PressureChange::setUnitInc</a></div><div class="ttdeci">void setUnitInc(int Inc)</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8h_source.html#l00120">RegisterPressure.h:120</a></div></div>
<div class="ttc" id="README-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00427">README-SSE.txt:427</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterInfo_html_ae62c5ea35b71f9020caa94340bc78f37"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">llvm::TargetRegisterInfo::isVirtualRegister</a></div><div class="ttdeci">static bool isVirtualRegister(unsigned Reg)</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00287">TargetRegisterInfo.h:287</a></div></div>
<div class="ttc" id="Debug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="classllvm_1_1RegPressureTracker_html_a7d578ea9bef7f7fae08c24e7584abf62"><div class="ttname"><a href="classllvm_1_1RegPressureTracker.html#a7d578ea9bef7f7fae08c24e7584abf62">llvm::RegPressureTracker::getLiveRange</a></div><div class="ttdeci">const LiveRange * getLiveRange(unsigned Reg) const </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00150">RegisterPressure.cpp:150</a></div></div>
<div class="ttc" id="classllvm_1_1PSetIterator_html_ab987130956e71d96d0780a23caa0a438"><div class="ttname"><a href="classllvm_1_1PSetIterator.html#ab987130956e71d96d0780a23caa0a438">llvm::PSetIterator::isValid</a></div><div class="ttdeci">bool isValid() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00681">MachineRegisterInfo.h:681</a></div></div>
<div class="ttc" id="Target_2TargetMachine_8h_html"><div class="ttname"><a href="Target_2TargetMachine_8h.html">TargetMachine.h</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_af622128e353515efebccad40eae495cb"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#af622128e353515efebccad40eae495cb">llvm::SmallVectorImpl::insert</a></div><div class="ttdeci">iterator insert(iterator I, const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00537">SmallVector.h:537</a></div></div>
<div class="ttc" id="classllvm_1_1MCRegUnitIterator_html"><div class="ttname"><a href="classllvm_1_1MCRegUnitIterator.html">llvm::MCRegUnitIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="MCRegisterInfo_8h_source.html#l00489">MCRegisterInfo.h:489</a></div></div>
<div class="ttc" id="classllvm_1_1LiveQueryResult_html_a5c02c56a4b3e6554395d57b0ac08dbf1"><div class="ttname"><a href="classllvm_1_1LiveQueryResult.html#a5c02c56a4b3e6554395d57b0ac08dbf1">llvm::LiveQueryResult::isKill</a></div><div class="ttdeci">bool isKill() const </div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00107">LiveInterval.h:107</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1path_html_a33706aab89e700b8f79e1fa6f4f0e3ee"><div class="ttname"><a href="namespacellvm_1_1sys_1_1path.html#a33706aab89e700b8f79e1fa6f4f0e3ee">llvm::sys::path::begin</a></div><div class="ttdeci">const_iterator begin(StringRef path)</div><div class="ttdoc">Get begin iterator over path. </div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00173">Path.cpp:173</a></div></div>
<div class="ttc" id="classllvm_1_1RegPressureTracker_html_a1844e0ed5cc8c90d7afaad0bea1e48d7"><div class="ttname"><a href="classllvm_1_1RegPressureTracker.html#a1844e0ed5cc8c90d7afaad0bea1e48d7">llvm::RegPressureTracker::closeRegion</a></div><div class="ttdeci">void closeRegion()</div><div class="ttdoc">Finalize the region boundaries and recored live ins and live outs. </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00272">RegisterPressure.cpp:272</a></div></div>
<div class="ttc" id="classllvm_1_1RegPressureTracker_html_a6ec2ef69d68442bdecaaf428aa5f1de5"><div class="ttname"><a href="classllvm_1_1RegPressureTracker.html#a6ec2ef69d68442bdecaaf428aa5f1de5">llvm::RegPressureTracker::isTopClosed</a></div><div class="ttdeci">bool isTopClosed() const </div><div class="ttdoc">Does this pressure result have a valid top position and live ins. </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00210">RegisterPressure.cpp:210</a></div></div>
<div class="ttc" id="structllvm_1_1RegionPressure_html_ad620503b286436fe7252602b9451dfca"><div class="ttname"><a href="structllvm_1_1RegionPressure.html#ad620503b286436fe7252602b9451dfca">llvm::RegionPressure::openBottom</a></div><div class="ttdeci">void openBottom(MachineBasicBlock::const_iterator PrevBottom)</div><div class="ttdoc">If the current bottom is the previous instr (before advancing), open it. </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00143">RegisterPressure.cpp:143</a></div></div>
<div class="ttc" id="RegisterClassInfo_8h_html"><div class="ttname"><a href="RegisterClassInfo_8h.html">RegisterClassInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_a355ba266da19094cc0948311c431768e"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a355ba266da19094cc0948311c431768e">llvm::MachineRegisterInfo::use_nodbg_end</a></div><div class="ttdeci">static use_nodbg_iterator use_nodbg_end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00281">MachineRegisterInfo.h:281</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRange_html"><div class="ttname"><a href="classllvm_1_1LiveRange.html">llvm::LiveRange</a></div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00146">LiveInterval.h:146</a></div></div>
<div class="ttc" id="X86DisassemblerDecoder_8h_html_a546839a5c4bcf9f9450967155f48de41"><div class="ttname"><a href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></div><div class="ttdeci">Reg</div><div class="ttdef"><b>Definition:</b> <a href="X86DisassemblerDecoder_8h_source.html#l00428">X86DisassemblerDecoder.h:428</a></div></div>
<div class="ttc" id="classllvm_1_1LiveIntervals_html"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html">llvm::LiveIntervals</a></div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervalAnalysis_8h_source.html#l00049">LiveIntervalAnalysis.h:49</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_a3217063f680fa8e35dea3c59b6e52b18"><div class="ttname"><a href="Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a></div><div class="ttdeci">Clang compiles this i1 i64 store i64 i64 store i64 i64 store i64 i64 store i64 align Which gets codegen d xmm0 movaps rbp movaps rbp movaps rbp movaps rbp rbp rbp rbp rbp It would be better to have movq s of instead of the movaps s LLVM produces ret int</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00549">Target/README.txt:549</a></div></div>
<div class="ttc" id="classllvm_1_1RegPressureTracker_html_ac9e57447ee6550f3ffcb4a432bd3dbab"><div class="ttname"><a href="classllvm_1_1RegPressureTracker.html#ac9e57447ee6550f3ffcb4a432bd3dbab">llvm::RegPressureTracker::reset</a></div><div class="ttdeci">void reset()</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00156">RegisterPressure.cpp:156</a></div></div>
<div class="ttc" id="classllvm_1_1RegPressureTracker_html_a204b8f2de53bb48cc63b152400c3fdb6"><div class="ttname"><a href="classllvm_1_1RegPressureTracker.html#a204b8f2de53bb48cc63b152400c3fdb6">llvm::RegPressureTracker::closeBottom</a></div><div class="ttdeci">void closeBottom()</div><div class="ttdoc">Set the boundary for the bottom of the region and summarize live outs. </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00254">RegisterPressure.cpp:254</a></div></div>
<div class="ttc" id="ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdef"><b>Definition:</b> <a href="ErrorHandling_8h_source.html#l00103">ErrorHandling.h:103</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterInfo_html_a3c2bb9e82e28af11ea7a7deaef40aea4"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#a3c2bb9e82e28af11ea7a7deaef40aea4">llvm::TargetRegisterInfo::getRegPressureSetName</a></div><div class="ttdeci">virtual const char * getRegPressureSetName(unsigned Idx) const =0</div><div class="ttdoc">Get the name of this register unit pressure set. </div></div>
<div class="ttc" id="classllvm_1_1PressureChange_html_ad70cb56db629f087c5f2b0dfb5dc8dc9"><div class="ttname"><a href="classllvm_1_1PressureChange.html#ad70cb56db629f087c5f2b0dfb5dc8dc9">llvm::PressureChange::getPSet</a></div><div class="ttdeci">unsigned getPSet() const </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8h_source.html#l00111">RegisterPressure.h:111</a></div></div>
<div class="ttc" id="RegisterPressure_8cpp_html_aefaf1f4d0ef6c56e26083e55db7f28f2"><div class="ttname"><a href="RegisterPressure_8cpp.html#aefaf1f4d0ef6c56e26083e55db7f28f2">collectOperands</a></div><div class="ttdeci">static void collectOperands(const MachineInstr *MI, RegisterOperands &amp;RegOpers)</div><div class="ttdoc">Collect physical and virtual register operands. </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00359">RegisterPressure.cpp:359</a></div></div>
<div class="ttc" id="structllvm_1_1IntervalPressure_html_a0fb4cf12022684a5149e2fba6b65a522"><div class="ttname"><a href="structllvm_1_1IntervalPressure.html#a0fb4cf12022684a5149e2fba6b65a522">llvm::IntervalPressure::openBottom</a></div><div class="ttdeci">void openBottom(SlotIndex PrevBottom)</div><div class="ttdoc">If the current bottom is not greater than the previous index, open it. </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00135">RegisterPressure.cpp:135</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl&lt; unsigned &gt;</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_ad8198d6d83af9410d867136e33fbf4b2"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">llvm::MachineOperand::isReg</a></div><div class="ttdeci">bool isReg() const </div><div class="ttdoc">isReg - Tests if this is a MO_Register operand. </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00224">MachineOperand.h:224</a></div></div>
<div class="ttc" id="classllvm_1_1LiveQueryResult_html"><div class="ttname"><a href="classllvm_1_1LiveQueryResult.html">llvm::LiveQueryResult</a></div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00085">LiveInterval.h:85</a></div></div>
<div class="ttc" id="classllvm_1_1RegPressureTracker_html_ad1f6527c9a8198488c7a57081b533e11"><div class="ttname"><a href="classllvm_1_1RegPressureTracker.html#ad1f6527c9a8198488c7a57081b533e11">llvm::RegPressureTracker::discoverLiveOut</a></div><div class="ttdeci">void discoverLiveOut(unsigned Reg)</div><div class="ttdoc">Add Reg to the live out set and increase max pressure. </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00441">RegisterPressure.cpp:441</a></div></div>
<div class="ttc" id="namespacellvm_1_1CallingConv_html_a4f861731fc6dbfdccc05af5968d98974"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">llvm::CallingConv::ID</a></div><div class="ttdeci">ID</div><div class="ttdoc">LLVM Calling Convention Representation. </div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00026">CallingConv.h:26</a></div></div>
<div class="ttc" id="classllvm_1_1RegPressureTracker_html_a34c32964f1af1bbabe26231ebdf444b0"><div class="ttname"><a href="classllvm_1_1RegPressureTracker.html#a34c32964f1af1bbabe26231ebdf444b0">llvm::RegPressureTracker::recede</a></div><div class="ttdeci">bool recede(SmallVectorImpl&lt; unsigned &gt; *LiveUses=0, PressureDiff *PDiff=0)</div><div class="ttdoc">Recede across the previous instruction. </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00456">RegisterPressure.cpp:456</a></div></div>
<div class="ttc" id="classllvm_1_1PrintReg_html"><div class="ttname"><a href="classllvm_1_1PrintReg.html">llvm::PrintReg</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00878">TargetRegisterInfo.h:878</a></div></div>
<div class="ttc" id="classllvm_1_1RegPressureTracker_html_a4ff1e8d3966e42b6a8add0ff83aa1982"><div class="ttname"><a href="classllvm_1_1RegPressureTracker.html#a4ff1e8d3966e42b6a8add0ff83aa1982">llvm::RegPressureTracker::getCurrSlot</a></div><div class="ttdeci">SlotIndex getCurrSlot() const </div><div class="ttdoc">Get the SlotIndex for the first nondebug instruction including or after the current position...</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00226">RegisterPressure.cpp:226</a></div></div>
<div class="ttc" id="structllvm_1_1IntervalPressure_html_ad388da0eac059da0c6cf642204a6308a"><div class="ttname"><a href="structllvm_1_1IntervalPressure.html#ad388da0eac059da0c6cf642204a6308a">llvm::IntervalPressure::openTop</a></div><div class="ttdeci">void openTop(SlotIndex NextTop)</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00119">RegisterPressure.cpp:119</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90ae857cbc5cf8c5a980f0bd245ad5ec61a"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ae857cbc5cf8c5a980f0bd245ad5ec61a">llvm::Intrinsic::memset</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l01262">Intrinsics.h:1262</a></div></div>
<div class="ttc" id="classRegisterOperands_html_a3b66cf8b3be1a4b8afd71ac9e1d9609d"><div class="ttname"><a href="classRegisterOperands.html#a3b66cf8b3be1a4b8afd71ac9e1d9609d">RegisterOperands::DeadDefs</a></div><div class="ttdeci">SmallVector&lt; unsigned, 8 &gt; DeadDefs</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00319">RegisterPressure.cpp:319</a></div></div>
<div class="ttc" id="classllvm_1_1RegPressureTracker_html_aaa4d744a40cc60d162fdd53735df18d1"><div class="ttname"><a href="classllvm_1_1RegPressureTracker.html#aaa4d744a40cc60d162fdd53735df18d1">llvm::RegPressureTracker::hasUntiedDef</a></div><div class="ttdeci">bool hasUntiedDef(unsigned VirtReg) const </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8h_source.html#l00420">RegisterPressure.h:420</a></div></div>
<div class="ttc" id="classllvm_1_1RegPressureTracker_html_a063d69931fd5ca1465c7971ad150a8d2"><div class="ttname"><a href="classllvm_1_1RegPressureTracker.html#a063d69931fd5ca1465c7971ad150a8d2">llvm::RegPressureTracker::dump</a></div><div class="ttdeci">void dump() const </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00071">RegisterPressure.cpp:71</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a></div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00031">ArrayRef.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayRef_html_a76878250107ee24ef7339870bdda4bcf"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">llvm::ArrayRef::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdoc">size - Get the array size. </div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00109">ArrayRef.h:109</a></div></div>
<div class="ttc" id="RegisterPressure_8cpp_html_a7fbb2c9c794d8adde8a3448be7f3b557"><div class="ttname"><a href="RegisterPressure_8cpp.html#a7fbb2c9c794d8adde8a3448be7f3b557">containsReg</a></div><div class="ttdeci">static bool containsReg(ArrayRef&lt; unsigned &gt; RegUnits, unsigned RegUnit)</div><div class="ttdoc">Convenient wrapper for checking membership in RegisterOperands. (std::count() doesn&amp;#39;t have an early e...</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00303">RegisterPressure.cpp:303</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a1e1d26226c627cf3dcf3c191b85e7d7d"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a1e1d26226c627cf3dcf3c191b85e7d7d">llvm::MachineInstr::isDebugValue</a></div><div class="ttdeci">bool isDebugValue() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00639">MachineInstr.h:639</a></div></div>
<div class="ttc" id="classllvm_1_1LiveQueryResult_html_afb3908139d2386f747d2151f9c97cf54"><div class="ttname"><a href="classllvm_1_1LiveQueryResult.html#afb3908139d2386f747d2151f9c97cf54">llvm::LiveQueryResult::isDeadDef</a></div><div class="ttdeci">bool isDeadDef() const </div><div class="ttdoc">Return true if this instruction has a dead def. </div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00112">LiveInterval.h:112</a></div></div>
<div class="ttc" id="classllvm_1_1RegPressureTracker_html_a2a9fbda4a98a544bca00f83c211e90bb"><div class="ttname"><a href="classllvm_1_1RegPressureTracker.html#a2a9fbda4a98a544bca00f83c211e90bb">llvm::RegPressureTracker::decreaseRegPressure</a></div><div class="ttdeci">void decreaseRegPressure(ArrayRef&lt; unsigned &gt; Regs)</div><div class="ttdoc">Simply decrease the current pressure as impacted by these registers. </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00096">RegisterPressure.cpp:96</a></div></div>
<div class="ttc" id="classllvm_1_1RegPressureTracker_html_a972fa38378a3d49a9bb48ca584621438"><div class="ttname"><a href="classllvm_1_1RegPressureTracker.html#a972fa38378a3d49a9bb48ca584621438">llvm::RegPressureTracker::getMaxDownwardPressureDelta</a></div><div class="ttdeci">void getMaxDownwardPressureDelta(const MachineInstr *MI, RegPressureDelta &amp;Delta, ArrayRef&lt; PressureChange &gt; CriticalPSets, ArrayRef&lt; unsigned &gt; MaxPressureLimit)</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00946">RegisterPressure.cpp:946</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRange_html_acd0853cbfd87e166b73d3e24502f2346"><div class="ttname"><a href="classllvm_1_1LiveRange.html#acd0853cbfd87e166b73d3e24502f2346">llvm::LiveRange::Query</a></div><div class="ttdeci">LiveQueryResult Query(SlotIndex Idx) const </div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00441">LiveInterval.h:441</a></div></div>
<div class="ttc" id="structllvm_1_1RegPressureDelta_html_aff9c3b403c6d4af795dd8be1c9612240"><div class="ttname"><a href="structllvm_1_1RegPressureDelta.html#aff9c3b403c6d4af795dd8be1c9612240">llvm::RegPressureDelta::Excess</a></div><div class="ttdeci">PressureChange Excess</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8h_source.html#l00192">RegisterPressure.h:192</a></div></div>
<div class="ttc" id="structllvm_1_1RegPressureDelta_html_a589e1a7e9a8a095d8d01ff8ba32b3d14"><div class="ttname"><a href="structllvm_1_1RegPressureDelta.html#a589e1a7e9a8a095d8d01ff8ba32b3d14">llvm::RegPressureDelta::CurrentMax</a></div><div class="ttdeci">PressureChange CurrentMax</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8h_source.html#l00194">RegisterPressure.h:194</a></div></div>
<div class="ttc" id="structllvm_1_1IntervalPressure_html"><div class="ttname"><a href="structllvm_1_1IntervalPressure.html">llvm::IntervalPressure</a></div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8h_source.html#l00065">RegisterPressure.h:65</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00396">SmallVector.h:396</a></div></div>
<div class="ttc" id="classllvm_1_1RegPressureTracker_html_a2b8b6196a7458b6a84480f03e2f1355d"><div class="ttname"><a href="classllvm_1_1RegPressureTracker.html#a2b8b6196a7458b6a84480f03e2f1355d">llvm::RegPressureTracker::bumpDownwardPressure</a></div><div class="ttdeci">void bumpDownwardPressure(const MachineInstr *MI)</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00898">RegisterPressure.cpp:898</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6fa60e05e8cf4600d05ec9251b750544c7c"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa60e05e8cf4600d05ec9251b750544c7c">llvm::LibFunc::free</a></div><div class="ttdoc">void free(void *ptr); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00273">TargetLibraryInfo.h:273</a></div></div>
<div class="ttc" id="structllvm_1_1RegionPressure_html"><div class="ttname"><a href="structllvm_1_1RegionPressure.html">llvm::RegionPressure</a></div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8h_source.html#l00080">RegisterPressure.h:80</a></div></div>
<div class="ttc" id="structllvm_1_1RegionPressure_html_a9f41ba24a7e6d9e5a68764096c2e763c"><div class="ttname"><a href="structllvm_1_1RegionPressure.html#a9f41ba24a7e6d9e5a68764096c2e763c">llvm::RegionPressure::openTop</a></div><div class="ttdeci">void openTop(MachineBasicBlock::const_iterator PrevTop)</div><div class="ttdoc">If the current top is the previous instruction (before receding), open it. </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00127">RegisterPressure.cpp:127</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html">llvm::MachineBasicBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00062">MachineBasicBlock.h:62</a></div></div>
<div class="ttc" id="classllvm_1_1RegPressureTracker_html"><div class="ttname"><a href="classllvm_1_1RegPressureTracker.html">llvm::RegPressureTracker</a></div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8h_source.html#l00250">RegisterPressure.h:250</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayRef_html_a836367b39ed630bf14db99923c22740e"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#a836367b39ed630bf14db99923c22740e">llvm::ArrayRef::begin</a></div><div class="ttdeci">iterator begin() const </div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00097">ArrayRef.h:97</a></div></div>
<div class="ttc" id="structllvm_1_1RegisterPressure_html_aff4ec40182e4b7147f436f73678fc3d9"><div class="ttname"><a href="structllvm_1_1RegisterPressure.html#aff4ec40182e4b7147f436f73678fc3d9">llvm::RegisterPressure::LiveOutRegs</a></div><div class="ttdeci">SmallVector&lt; unsigned, 8 &gt; LiveOutRegs</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8h_source.html#l00036">RegisterPressure.h:36</a></div></div>
<div class="ttc" id="classllvm_1_1LiveQueryResult_html_a74f8b3ac40a43926688ed03698a6a1d9"><div class="ttname"><a href="classllvm_1_1LiveQueryResult.html#a74f8b3ac40a43926688ed03698a6a1d9">llvm::LiveQueryResult::valueDefined</a></div><div class="ttdeci">VNInfo * valueDefined() const </div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00124">LiveInterval.h:124</a></div></div>
<div class="ttc" id="classllvm_1_1PressureDiff_html"><div class="ttname"><a href="classllvm_1_1PressureDiff.html">llvm::PressureDiff</a></div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8h_source.html#l00136">RegisterPressure.h:136</a></div></div>
<div class="ttc" id="classllvm_1_1RegisterClassInfo_html_a25ac0ae59d10e7b19c2f57fe6ff52d74"><div class="ttname"><a href="classllvm_1_1RegisterClassInfo.html#a25ac0ae59d10e7b19c2f57fe6ff52d74">llvm::RegisterClassInfo::getRegPressureSetLimit</a></div><div class="ttdeci">unsigned getRegPressureSetLimit(unsigned Idx) const </div><div class="ttdef"><b>Definition:</b> <a href="RegisterClassInfo_8h_source.html#l00135">RegisterClassInfo.h:135</a></div></div>
<div class="ttc" id="namespacellvm_html_a2999577391397335deda506011ee500e"><div class="ttname"><a href="namespacellvm.html#a2999577391397335deda506011ee500e">llvm::dumpRegSetPressure</a></div><div class="ttdeci">void dumpRegSetPressure(ArrayRef&lt; unsigned &gt; SetPressure, const TargetRegisterInfo *TRI)</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00045">RegisterPressure.cpp:45</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayRef_html_a3aa55c9d9145cd6b3b21c466b18abd80"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#a3aa55c9d9145cd6b3b21c466b18abd80">llvm::ArrayRef::empty</a></div><div class="ttdeci">bool empty() const </div><div class="ttdoc">empty - Check if the array is empty. </div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00104">ArrayRef.h:104</a></div></div>
<div class="ttc" id="RegisterPressure_8cpp_html_a2ca1520a7e8bbebd7fd72f34fa36cf3c"><div class="ttname"><a href="RegisterPressure_8cpp.html#a2ca1520a7e8bbebd7fd72f34fa36cf3c">collectPDiff</a></div><div class="ttdeci">static void collectPDiff(PressureDiff &amp;PDiff, RegisterOperands &amp;RegOpers, const MachineRegisterInfo *MRI)</div><div class="ttdoc">Record the pressure difference induced by the given operand list. </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00410">RegisterPressure.cpp:410</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a18c110c35e9133222a37b28d30f8a90f"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a18c110c35e9133222a37b28d30f8a90f">llvm::SmallVectorImpl::erase</a></div><div class="ttdeci">iterator erase(iterator I)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00478">SmallVector.h:478</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html">llvm::TargetRegisterInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00219">TargetRegisterInfo.h:219</a></div></div>
<div class="ttc" id="classllvm_1_1RegisterClassInfo_html"><div class="ttname"><a href="classllvm_1_1RegisterClassInfo.html">llvm::RegisterClassInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="RegisterClassInfo_8h_source.html#l00027">RegisterClassInfo.h:27</a></div></div>
<div class="ttc" id="classllvm_1_1RegPressureTracker_html_a474e65b5df97bf9cf404aa9b85eb6262"><div class="ttname"><a href="classllvm_1_1RegPressureTracker.html#a474e65b5df97bf9cf404aa9b85eb6262">llvm::RegPressureTracker::initLiveThru</a></div><div class="ttdeci">void initLiveThru(const RegPressureTracker &amp;RPTracker)</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00289">RegisterPressure.cpp:289</a></div></div>
<div class="ttc" id="structllvm_1_1RegisterPressure_html_af444f3c79d12bb654d6477d629cbe7c0"><div class="ttname"><a href="structllvm_1_1RegisterPressure.html#af444f3c79d12bb654d6477d629cbe7c0">llvm::RegisterPressure::MaxSetPressure</a></div><div class="ttdeci">std::vector&lt; unsigned &gt; MaxSetPressure</div><div class="ttdoc">Map of max reg pressure indexed by pressure set ID, not class ID. </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8h_source.html#l00032">RegisterPressure.h:32</a></div></div>
<div class="ttc" id="classRegisterOperands_html_ad4142d3f71f178d499e1f76ac3db6a48"><div class="ttname"><a href="classRegisterOperands.html#ad4142d3f71f178d499e1f76ac3db6a48">RegisterOperands::collect</a></div><div class="ttdeci">void collect(const MachineOperand &amp;MO)</div><div class="ttdoc">Push this operand&amp;#39;s register onto the correct vector. </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00326">RegisterPressure.cpp:326</a></div></div>
<div class="ttc" id="classllvm_1_1ConstMIBundleOperands_html"><div class="ttname"><a href="classllvm_1_1ConstMIBundleOperands.html">llvm::ConstMIBundleOperands</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBundle_8h_source.html#l00242">MachineInstrBundle.h:242</a></div></div>
<div class="ttc" id="LiveIntervalAnalysis_8h_html"><div class="ttname"><a href="LiveIntervalAnalysis_8h.html">LiveIntervalAnalysis.h</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="classllvm_1_1RegPressureTracker_html_a41b455b006804ed169e6144f9204e314"><div class="ttname"><a href="classllvm_1_1RegPressureTracker.html#a41b455b006804ed169e6144f9204e314">llvm::RegPressureTracker::discoverLiveIn</a></div><div class="ttdeci">void discoverLiveIn(unsigned Reg)</div><div class="ttdoc">Add Reg to the live in set and increase max pressure. </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00430">RegisterPressure.cpp:430</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html"><div class="ttname"><a href="classllvm_1_1MachineOperand.html">llvm::MachineOperand</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00043">MachineOperand.h:43</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector&lt; unsigned, 8 &gt;</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a8de7d5cf38939044471c6ee60a01a3df"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a8de7d5cf38939044471c6ee60a01a3df">llvm::MachineOperand::isDef</a></div><div class="ttdeci">bool isDef() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00274">MachineOperand.h:274</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_a017c4ebe5112a2521ee37dfe1e78236c"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a017c4ebe5112a2521ee37dfe1e78236c">llvm::MachineRegisterInfo::isAllocatable</a></div><div class="ttdeci">bool isAllocatable(unsigned PhysReg) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00510">MachineRegisterInfo.h:510</a></div></div>
<div class="ttc" id="classllvm_1_1PSetIterator_html_a7ca0404dfc65936e5050e72a95387017"><div class="ttname"><a href="classllvm_1_1PSetIterator.html#a7ca0404dfc65936e5050e72a95387017">llvm::PSetIterator::getWeight</a></div><div class="ttdeci">unsigned getWeight() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00683">MachineRegisterInfo.h:683</a></div></div>
<div class="ttc" id="structllvm_1_1IntervalPressure_html_a08225fe2adf56bf962e71483729fd99c"><div class="ttname"><a href="structllvm_1_1IntervalPressure.html#a08225fe2adf56bf962e71483729fd99c">llvm::IntervalPressure::reset</a></div><div class="ttdeci">void reset()</div><div class="ttdoc">Clear the result so it can be used for another round of pressure tracking. </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00102">RegisterPressure.cpp:102</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00101">Debug.cpp:101</a></div></div>
<div class="ttc" id="namespacestd_html_ab8424022895aee3e366fb9a32f2883cb"><div class="ttname"><a href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a></div><div class="ttdeci">void swap(llvm::BitVector &amp;LHS, llvm::BitVector &amp;RHS)</div><div class="ttdoc">Implement std::swap in terms of BitVector swap. </div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00591">BitVector.h:591</a></div></div>
<div class="ttc" id="classRegisterOperands_html_a9e6183e97d2bdc9c304251dcc76b1063"><div class="ttname"><a href="classRegisterOperands.html#a9e6183e97d2bdc9c304251dcc76b1063">RegisterOperands::RegisterOperands</a></div><div class="ttdeci">RegisterOperands(const TargetRegisterInfo *tri, const MachineRegisterInfo *mri, bool ID=false)</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00321">RegisterPressure.cpp:321</a></div></div>
<div class="ttc" id="structllvm_1_1RegPressureDelta_html_a277da5755f2b30ebcebdba51d0de1acf"><div class="ttname"><a href="structllvm_1_1RegPressureDelta.html#a277da5755f2b30ebcebdba51d0de1acf">llvm::RegPressureDelta::CriticalMax</a></div><div class="ttdeci">PressureChange CriticalMax</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8h_source.html#l00193">RegisterPressure.h:193</a></div></div>
<div class="ttc" id="classllvm_1_1RegPressureTracker_html_a62939b985dcb2734ac69c5375d892cad"><div class="ttname"><a href="classllvm_1_1RegPressureTracker.html#a62939b985dcb2734ac69c5375d892cad">llvm::RegPressureTracker::init</a></div><div class="ttdeci">void init(const MachineFunction *mf, const RegisterClassInfo *rci, const LiveIntervals *lis, const MachineBasicBlock *mbb, MachineBasicBlock::const_iterator pos, bool ShouldTrackUntiedDefs=false)</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00177">RegisterPressure.cpp:177</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html">llvm::MachineRegisterInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00030">MachineRegisterInfo.h:30</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a8a045d250952c0867382a9840ee18fdf"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">llvm::SmallVectorTemplateCommon::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00112">SmallVector.h:112</a></div></div>
<div class="ttc" id="classllvm_1_1RegPressureTracker_html_a8759dfc94f9731598942bbbda6280dfe"><div class="ttname"><a href="classllvm_1_1RegPressureTracker.html#a8759dfc94f9731598942bbbda6280dfe">llvm::RegPressureTracker::closeTop</a></div><div class="ttdeci">void closeTop()</div><div class="ttdoc">Set the boundary for the top of the region and summarize live ins. </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00236">RegisterPressure.cpp:236</a></div></div>
<div class="ttc" id="RegisterPressure_8cpp_html_ab55d2386a636832df128dbe92b4dd2a4"><div class="ttname"><a href="RegisterPressure_8cpp.html#ab55d2386a636832df128dbe92b4dd2a4">decreaseSetPressure</a></div><div class="ttdeci">static void decreaseSetPressure(std::vector&lt; unsigned &gt; &amp;CurrSetPressure, PSetIterator PSetI)</div><div class="ttdoc">Decrease pressure for each pressure set provided by TargetRegisterInfo. </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00035">RegisterPressure.cpp:35</a></div></div>
<div class="ttc" id="MachineRegisterInfo_8h_html"><div class="ttname"><a href="MachineRegisterInfo_8h.html">MachineRegisterInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html"><div class="ttname"><a href="classllvm_1_1MachineInstr.html">llvm::MachineInstr</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00050">MachineInstr.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a654b11787ac7c4344084d98bea7cf626"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a654b11787ac7c4344084d98bea7cf626">llvm::MachineBasicBlock::const_iterator</a></div><div class="ttdeci">bundle_iterator&lt; const MachineInstr, const_instr_iterator &gt; const_iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00214">MachineBasicBlock.h:214</a></div></div>
<div class="ttc" id="classllvm_1_1SparseSet_html"><div class="ttname"><a href="classllvm_1_1SparseSet.html">llvm::SparseSet</a></div><div class="ttdef"><b>Definition:</b> <a href="SparseSet_8h_source.html#l00120">SparseSet.h:120</a></div></div>
<div class="ttc" id="classllvm_1_1PSetIterator_html"><div class="ttname"><a href="classllvm_1_1PSetIterator.html">llvm::PSetIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00662">MachineRegisterInfo.h:662</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_a0c29744c3bf19d281c32726176892c02"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a0c29744c3bf19d281c32726176892c02">llvm::MachineRegisterInfo::getPressureSets</a></div><div class="ttdeci">PSetIterator getPressureSets(unsigned RegUnit) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00696">MachineRegisterInfo.h:696</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="regcomp_8c_html_a0240ac851181b84ac374872dc5434ee4"><div class="ttname"><a href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div><div class="ttdeci">#define N</div></div>
<div class="ttc" id="classllvm_1_1PressureChange_html"><div class="ttname"><a href="classllvm_1_1PressureChange.html">llvm::PressureChange</a></div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8h_source.html#l00100">RegisterPressure.h:100</a></div></div>
<div class="ttc" id="classllvm_1_1PressureChange_html_a1d0b21ec4f6e6eada798a9e71d043e68"><div class="ttname"><a href="classllvm_1_1PressureChange.html#a1d0b21ec4f6e6eada798a9e71d043e68">llvm::PressureChange::isValid</a></div><div class="ttdeci">bool isValid() const </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8h_source.html#l00109">RegisterPressure.h:109</a></div></div>
<div class="ttc" id="classRegisterOperands_html_adcaaea856fb848e888362cbb3b2811cd"><div class="ttname"><a href="classRegisterOperands.html#adcaaea856fb848e888362cbb3b2811cd">RegisterOperands::Defs</a></div><div class="ttdeci">SmallVector&lt; unsigned, 8 &gt; Defs</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00318">RegisterPressure.cpp:318</a></div></div>
<div class="ttc" id="classllvm_1_1RegPressureTracker_html_a41a3118fb6bd46e397256b3c9794b61c"><div class="ttname"><a href="classllvm_1_1RegPressureTracker.html#a41a3118fb6bd46e397256b3c9794b61c">llvm::RegPressureTracker::getMaxUpwardPressureDelta</a></div><div class="ttdeci">void getMaxUpwardPressureDelta(const MachineInstr *MI, PressureDiff *PDiff, RegPressureDelta &amp;Delta, ArrayRef&lt; PressureChange &gt; CriticalPSets, ArrayRef&lt; unsigned &gt; MaxPressureLimit)</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00749">RegisterPressure.cpp:749</a></div></div>
<div class="ttc" id="classllvm_1_1PressureChange_html_ad9c2dce7dcf3bbfbec05526cfd0cf897"><div class="ttname"><a href="classllvm_1_1PressureChange.html#ad9c2dce7dcf3bbfbec05526cfd0cf897">llvm::PressureChange::getUnitInc</a></div><div class="ttdeci">int getUnitInc() const </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8h_source.html#l00118">RegisterPressure.h:118</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_a6745c3bfdfc5b0643b078b96df2db252"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a6745c3bfdfc5b0643b078b96df2db252">llvm::MachineFunction::getTarget</a></div><div class="ttdeci">const TargetMachine &amp; getTarget() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00163">MachineFunction.h:163</a></div></div>
<div class="ttc" id="classllvm_1_1RegPressureTracker_html_ad552b6e557acce957b3bd5a1960a53dd"><div class="ttname"><a href="classllvm_1_1RegPressureTracker.html#ad552b6e557acce957b3bd5a1960a53dd">llvm::RegPressureTracker::getUpwardPressure</a></div><div class="ttdeci">void getUpwardPressure(const MachineInstr *MI, std::vector&lt; unsigned &gt; &amp;PressureResult, std::vector&lt; unsigned &gt; &amp;MaxPressureResult)</div><div class="ttdoc">Get the pressure of each PSet after traversing this instruction bottom-up. </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00969">RegisterPressure.cpp:969</a></div></div>
<div class="ttc" id="classllvm_1_1TargetMachine_html_a70b47eca6a99c87b81f4c1b1455dc090"><div class="ttname"><a href="classllvm_1_1TargetMachine.html#a70b47eca6a99c87b81f4c1b1455dc090">llvm::TargetMachine::getRegisterInfo</a></div><div class="ttdeci">virtual const TargetRegisterInfo * getRegisterInfo() const </div><div class="ttdef"><b>Definition:</b> <a href="Target_2TargetMachine_8h_source.html#l00140">Target/TargetMachine.h:140</a></div></div>
<div class="ttc" id="classllvm_1_1RegPressureTracker_html_aa487d0d094830756c16dc887a5fdd59e"><div class="ttname"><a href="classllvm_1_1RegPressureTracker.html#aa487d0d094830756c16dc887a5fdd59e">llvm::RegPressureTracker::isBottomClosed</a></div><div class="ttdeci">bool isBottomClosed() const </div><div class="ttdoc">Does this pressure result have a valid bottom position and live outs. </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00218">RegisterPressure.cpp:218</a></div></div>
<div class="ttc" id="classllvm_1_1RegPressureTracker_html_ab0885ecf357ddad3594c9a2a5a9527f2"><div class="ttname"><a href="classllvm_1_1RegPressureTracker.html#ab0885ecf357ddad3594c9a2a5a9527f2">llvm::RegPressureTracker::bumpUpwardPressure</a></div><div class="ttdeci">void bumpUpwardPressure(const MachineInstr *MI)</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00700">RegisterPressure.cpp:700</a></div></div>
<div class="ttc" id="classllvm_1_1SlotIndex_html_a04196b5e551d63690ede0244f80f2503"><div class="ttname"><a href="classllvm_1_1SlotIndex.html#a04196b5e551d63690ede0244f80f2503">llvm::SlotIndex::getRegSlot</a></div><div class="ttdeci">SlotIndex getRegSlot(bool EC=false) const </div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00257">SlotIndexes.h:257</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_ab75f703d251cc0ce0206fe00a999db86"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">llvm::MachineOperand::getReg</a></div><div class="ttdeci">unsigned getReg() const </div><div class="ttdoc">getReg - Returns the register number. </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00259">MachineOperand.h:259</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperandIteratorBase_html_af3802cbef7a57e8de316fe13fbed8e67"><div class="ttname"><a href="classllvm_1_1MachineOperandIteratorBase.html#af3802cbef7a57e8de316fe13fbed8e67">llvm::MachineOperandIteratorBase::isValid</a></div><div class="ttdeci">bool isValid() const </div><div class="ttdoc">isValid - Returns true until all the operands have been visited. </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBundle_8h_source.html#l00135">MachineInstrBundle.h:135</a></div></div>
<div class="ttc" id="structllvm_1_1RegPressureDelta_html"><div class="ttname"><a href="structllvm_1_1RegPressureDelta.html">llvm::RegPressureDelta</a></div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8h_source.html#l00191">RegisterPressure.h:191</a></div></div>
<div class="ttc" id="classllvm_1_1RegPressureTracker_html_a10143d61b5ee1702a5c48ace9e03e42e"><div class="ttname"><a href="classllvm_1_1RegPressureTracker.html#a10143d61b5ee1702a5c48ace9e03e42e">llvm::RegPressureTracker::addLiveRegs</a></div><div class="ttdeci">void addLiveRegs(ArrayRef&lt; unsigned &gt; Regs)</div><div class="ttdoc">Force liveness of registers. </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00422">RegisterPressure.cpp:422</a></div></div>
<div class="ttc" id="RegisterPressure_8cpp_html_a6b96f6462675a81524f07103166ce3a6"><div class="ttname"><a href="RegisterPressure_8cpp.html#a6b96f6462675a81524f07103166ce3a6">findUseBetween</a></div><div class="ttdeci">static bool findUseBetween(unsigned Reg, SlotIndex PriorUseIdx, SlotIndex NextUseIdx, const MachineRegisterInfo *MRI, const LiveIntervals *LIS)</div><div class="ttdoc">Helper to find a vreg use between two indices [PriorUseIdx, NextUseIdx). </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00875">RegisterPressure.cpp:875</a></div></div>
<div class="ttc" id="RegisterPressure_8cpp_html_a822aec28298cd2dc8f346d4753a4154b"><div class="ttname"><a href="RegisterPressure_8cpp.html#a822aec28298cd2dc8f346d4753a4154b">computeMaxPressureDelta</a></div><div class="ttdeci">static void computeMaxPressureDelta(ArrayRef&lt; unsigned &gt; OldMaxPressureVec, ArrayRef&lt; unsigned &gt; NewMaxPressureVec, ArrayRef&lt; PressureChange &gt; CriticalPSets, ArrayRef&lt; unsigned &gt; MaxPressureLimit, RegPressureDelta &amp;Delta)</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00656">RegisterPressure.cpp:656</a></div></div>
<div class="ttc" id="structllvm_1_1RegionPressure_html_aa7faa2156e15c1085990ef11a6d19ac5"><div class="ttname"><a href="structllvm_1_1RegionPressure.html#aa7faa2156e15c1085990ef11a6d19ac5">llvm::RegionPressure::reset</a></div><div class="ttdeci">void reset()</div><div class="ttdoc">Clear the result so it can be used for another round of pressure tracking. </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00110">RegisterPressure.cpp:110</a></div></div>
<div class="ttc" id="classRegisterOperands_html_aa8ecd23ea54fdc8ce86641302d5f6392"><div class="ttname"><a href="classRegisterOperands.html#aa8ecd23ea54fdc8ce86641302d5f6392">RegisterOperands::Uses</a></div><div class="ttdeci">SmallVector&lt; unsigned, 8 &gt; Uses</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00317">RegisterPressure.cpp:317</a></div></div>
<div class="ttc" id="structllvm_1_1RegisterPressure_html_a9db6c0a838bff26d6fce17e68fc86c93"><div class="ttname"><a href="structllvm_1_1RegisterPressure.html#a9db6c0a838bff26d6fce17e68fc86c93">llvm::RegisterPressure::LiveInRegs</a></div><div class="ttdeci">SmallVector&lt; unsigned, 8 &gt; LiveInRegs</div><div class="ttdoc">List of live in virtual registers or physical register units. </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8h_source.html#l00035">RegisterPressure.h:35</a></div></div>
<div class="ttc" id="namespacellvm_1_1A64CC_html_af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442"><div class="ttname"><a href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">llvm::A64CC::MI</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00035">AArch64BaseInfo.h:35</a></div></div>
<div class="ttc" id="RegisterPressure_8h_html"><div class="ttname"><a href="RegisterPressure_8h.html">RegisterPressure.h</a></div></div>
<div class="ttc" id="LiveInterval_8h_html"><div class="ttname"><a href="LiveInterval_8h.html">LiveInterval.h</a></div></div>
<div class="ttc" id="classllvm_1_1PressureDiff_html_ad22e63bbd4e84ba7a3ed4462d34270b6"><div class="ttname"><a href="classllvm_1_1PressureDiff.html#ad22e63bbd4e84ba7a3ed4462d34270b6">llvm::PressureDiff::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8h_source.html#l00146">RegisterPressure.h:146</a></div></div>
<div class="ttc" id="classllvm_1_1RegPressureTracker_html_ac1bfd03ca8fa96ab674c7f7b620dd8a6"><div class="ttname"><a href="classllvm_1_1RegPressureTracker.html#ac1bfd03ca8fa96ab674c7f7b620dd8a6">llvm::RegPressureTracker::getDownwardPressure</a></div><div class="ttdeci">void getDownwardPressure(const MachineInstr *MI, std::vector&lt; unsigned &gt; &amp;PressureResult, std::vector&lt; unsigned &gt; &amp;MaxPressureResult)</div><div class="ttdoc">Get the pressure of each PSet after traversing this instruction top-down. </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00985">RegisterPressure.cpp:985</a></div></div>
<div class="ttc" id="MCModuleYAML_8cpp_html_a5e410df3f6875c5af4a7f2be284f235d"><div class="ttname"><a href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a></div><div class="ttdeci">const MCRegisterInfo &amp; MRI</div><div class="ttdef"><b>Definition:</b> <a href="MCModuleYAML_8cpp_source.html#l00056">MCModuleYAML.cpp:56</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a0e4e5eef3cc7c47acbb753b9d3872348"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a0e4e5eef3cc7c47acbb753b9d3872348">llvm::MachineOperand::readsReg</a></div><div class="ttdeci">bool readsReg() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00326">MachineOperand.h:326</a></div></div>
<div class="ttc" id="raw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="classRegisterOperands_html"><div class="ttname"><a href="classRegisterOperands.html">RegisterOperands</a></div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00311">RegisterPressure.cpp:311</a></div></div>
<div class="ttc" id="classllvm_1_1SlotIndex_html"><div class="ttname"><a href="classllvm_1_1SlotIndex.html">llvm::SlotIndex</a></div><div class="ttdoc">SlotIndex - An opaque wrapper around machine indexes. </div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00092">SlotIndexes.h:92</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator_html"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator.html">llvm::MachineRegisterInfo::defusechain_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00204">MachineRegisterInfo.h:204</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6fa3ad9aa19face37d539b9fbe4130e1c6f"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa3ad9aa19face37d539b9fbe4130e1c6f">llvm::LibFunc::calloc</a></div><div class="ttdoc">void *calloc(size_t count, size_t size); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00149">TargetLibraryInfo.h:149</a></div></div>
<div class="ttc" id="classRegisterOperands_html_af6cea6ac6c68106d79cc1de86651fcad"><div class="ttname"><a href="classRegisterOperands.html#af6cea6ac6c68106d79cc1de86651fcad">RegisterOperands::pushRegUnits</a></div><div class="ttdeci">void pushRegUnits(unsigned Reg, SmallVectorImpl&lt; unsigned &gt; &amp;RegUnits)</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00342">RegisterPressure.cpp:342</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_aad684f050965249161650dcdf5a58fa4"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#aad684f050965249161650dcdf5a58fa4">llvm::MachineRegisterInfo::use_nodbg_begin</a></div><div class="ttdeci">use_nodbg_iterator use_nodbg_begin(unsigned RegNo) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00278">MachineRegisterInfo.h:278</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator_html_ae87727dc0b59afe8bf48fee31a0a2ef3"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator.html#ae87727dc0b59afe8bf48fee31a0a2ef3">llvm::MachineRegisterInfo::defusechain_iterator::skipInstruction</a></div><div class="ttdeci">MachineInstr * skipInstruction()</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00618">MachineRegisterInfo.h:618</a></div></div>
<div class="ttc" id="classllvm_1_1RegPressureTracker_html_a159b60403d83d421b95876ef26df2d94"><div class="ttname"><a href="classllvm_1_1RegPressureTracker.html#a159b60403d83d421b95876ef26df2d94">llvm::RegPressureTracker::getUpwardPressureDelta</a></div><div class="ttdeci">void getUpwardPressureDelta(const MachineInstr *MI, PressureDiff &amp;PDiff, RegPressureDelta &amp;Delta, ArrayRef&lt; PressureChange &gt; CriticalPSets, ArrayRef&lt; unsigned &gt; MaxPressureLimit) const </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00817">RegisterPressure.cpp:817</a></div></div>
<div class="ttc" id="RegisterPressure_8cpp_html_a013f10c0323064cf28c1aed647c0b478"><div class="ttname"><a href="RegisterPressure_8cpp.html#a013f10c0323064cf28c1aed647c0b478">computeExcessPressureDelta</a></div><div class="ttdeci">static void computeExcessPressureDelta(ArrayRef&lt; unsigned &gt; OldPressureVec, ArrayRef&lt; unsigned &gt; NewPressureVec, RegPressureDelta &amp;Delta, const RegisterClassInfo *RCI, ArrayRef&lt; unsigned &gt; LiveThruPressureVec)</div><div class="ttdoc">Find the max change in excess pressure across all sets. </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00616">RegisterPressure.cpp:616</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 23:01:10 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
