<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: LoopSimplify.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('LoopSimplify_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">LoopSimplify.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="LoopSimplify_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- LoopSimplify.cpp - Loop Canonicalization Pass ----------------------===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// This pass performs several transformations to transform natural loops into a</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// simpler form, which makes subsequent analyses and transformations simpler and</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// more effective.</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// Loop pre-header insertion guarantees that there is a single, non-critical</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// entry edge from outside of the loop to the loop header.  This simplifies a</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">// number of analyses and transformations, such as LICM.</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">// Loop exit-block insertion guarantees that all exit blocks from the loop</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">// (blocks which are outside of the loop that have predecessors inside of the</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// loop) only have predecessors from inside of the loop (and are thus dominated</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">// by the loop header).  This simplifies transformations such as store-sinking</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">// that are built into LICM.</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">// This pass also guarantees that loops will have exactly one backedge.</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">// Indirectbr instructions introduce several complications. If the loop</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">// contains or is entered by an indirectbr instruction, it may not be possible</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">// to transform the loop and make these guarantees. Client code should check</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">// that these conditions are true before relying on them.</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">// Note that the simplifycfg pass will clean up blocks which are split out but</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">// end up being unnecessary, so usage of this pass should not pessimize</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">// generated code.</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">// This pass obviously modifies the CFG, but updates loop information and</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">// dominator information.</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="LoopSimplify_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   40</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;loop-simplify&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Transforms_2Scalar_8h.html">llvm/Transforms/Scalar.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DepthFirstIterator_8h.html">llvm/ADT/DepthFirstIterator.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SetOperations_8h.html">llvm/ADT/SetOperations.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SetVector_8h.html">llvm/ADT/SetVector.h</a>&quot;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AliasAnalysis_8h.html">llvm/Analysis/AliasAnalysis.h</a>&quot;</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DependenceAnalysis_8h.html">llvm/Analysis/DependenceAnalysis.h</a>&quot;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Dominators_8h.html">llvm/Analysis/Dominators.h</a>&quot;</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstructionSimplify_8h.html">llvm/Analysis/InstructionSimplify.h</a>&quot;</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopPass_8h.html">llvm/Analysis/LoopPass.h</a>&quot;</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ScalarEvolution_8h.html">llvm/Analysis/ScalarEvolution.h</a>&quot;</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constants_8h.html">llvm/IR/Constants.h</a>&quot;</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Function_8h.html">llvm/IR/Function.h</a>&quot;</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instructions_8h.html">llvm/IR/Instructions.h</a>&quot;</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IntrinsicInst_8h.html">llvm/IR/IntrinsicInst.h</a>&quot;</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LLVMContext_8h.html">llvm/IR/LLVMContext.h</a>&quot;</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Type_8h.html">llvm/IR/Type.h</a>&quot;</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Support_2CFG_8h.html">llvm/Support/CFG.h</a>&quot;</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlockUtils_8h.html">llvm/Transforms/Utils/BasicBlockUtils.h</a>&quot;</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Local_8h.html">llvm/Transforms/Utils/Local.h</a>&quot;</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopUtils_8h.html">llvm/Transforms/Utils/LoopUtils.h</a>&quot;</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<a class="code" href="LoopSimplify_8cpp.html#a9d68898674ecfefd0d956207b8c3b04c">STATISTIC</a>(NumInserted, <span class="stringliteral">&quot;Number of pre-header or exit blocks inserted&quot;</span>);</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<a class="code" href="LoopSimplify_8cpp.html#a9d68898674ecfefd0d956207b8c3b04c">STATISTIC</a>(NumNested  , <span class="stringliteral">&quot;Number of nested loops split out&quot;</span>);</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="keyword">struct </span>LoopSimplify : <span class="keyword">public</span> <a class="code" href="classllvm_1_1LoopPass.html">LoopPass</a> {</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>; <span class="comment">// Pass identification, replacement for typeid</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    LoopSimplify() : <a class="code" href="classllvm_1_1LoopPass.html">LoopPass</a>(ID) {</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;      <a class="code" href="namespacellvm.html#a502b3252234db2a5f6e55857b546f514">initializeLoopSimplifyPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    }</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="comment">// AA - If we have an alias analysis object to update, this is it, otherwise</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="comment">// this is null.</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a> *AA;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> *SE;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> runOnLoop(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1LPPassManager.html">LPPassManager</a> &amp;LPM);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const </span>{</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;      <span class="comment">// We need loop information to identify the loops...</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a>&gt;();</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a>&gt;();</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a>&gt;();</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a>&gt;();</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a>&gt;();</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a>&gt;();</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1DependenceAnalysis.html">DependenceAnalysis</a>&gt;();</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a40970e5d42646fb2d9aa5f7a2c879516">addPreservedID</a>(<a class="code" href="namespacellvm.html#ac39b40d3d53e73764f8328bc22eea839">BreakCriticalEdgesID</a>);  <span class="comment">// No critical edges added.</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    }</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">    /// verifyAnalysis() - Verify LoopSimplifyForm&#39;s guarantees.</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> verifyAnalysis() <span class="keyword">const</span>;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="keyword">private</span>:</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordtype">bool</span> ProcessLoop(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1LPPassManager.html">LPPassManager</a> &amp;LPM);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *RewriteLoopExitBlock(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Exit);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <a class="code" href="classllvm_1_1Loop.html">Loop</a> *SeparateNestedLoop(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1LPPassManager.html">LPPassManager</a> &amp;LPM,</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                             <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Preheader);</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InsertUniqueBackedgeBlock(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Preheader);</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  };</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;}</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LoopSimplify_8cpp.html#a926bc934230351d2ccd41f4f44869d3f">PlaceSplitBlockCarefully</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewBB,</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                                     <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;BasicBlock*&gt;</a> &amp;SplitPreds,</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                                     <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L);</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">LoopSimplify::ID</a> = 0;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<a class="code" href="LoopSimplify_8cpp.html#ac4cf41b27d824371f7a1b1e2503e04b4">INITIALIZE_PASS_BEGIN</a>(LoopSimplify, <span class="stringliteral">&quot;loop-simplify&quot;</span>,</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                <span class="stringliteral">&quot;Canonicalize natural loops&quot;</span>, <span class="keyword">true</span>, <span class="keyword">false</span>)</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a>)</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a>)</div><div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="LoopSimplify_8cpp.html#a13f020c6a40eb04f1b4f9ddfbb004ce0">  119</a></span>&#160;<a class="code" href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a>(LoopSimplify, &quot;<a class="code" href="Analysis_2README_8txt.html#a01d2af4eee7c40485a0ce3683a2e907a">loop</a>-<a class="code" href="LoopSimplify_8cpp.html#adbc7fea4f239fd84b6dcdcb33906a9d2">simplify</a>&quot;,</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                &quot;Canonicalize natural <a class="code" href="LoopSimplify_8cpp.html#ac68567aa12ef395f71061eff8f6dd7df">loops</a>&quot;, <a class="code" href="namespacetrue.html">true</a>, <a class="code" href="namespacefalse.html">false</a>)</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">// Publicly exposed interface to pass...</span></div><div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="namespacellvm.html#a472515fc67a5fb572afeb00aa2609cca">  123</a></span>&#160;<span class="keywordtype">char</span> &amp;<a class="code" href="namespacellvm.html">llvm</a>::<a class="code" href="namespacellvm.html#a472515fc67a5fb572afeb00aa2609cca">LoopSimplifyID</a> = LoopSimplify::ID;</div><div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="namespacellvm.html#aeb7682c55116e253e95fcd05564a3c3b">  124</a></span>&#160;<a class="code" href="classllvm_1_1Pass.html">Pass</a> *<a class="code" href="namespacellvm.html">llvm</a>::<a class="code" href="namespacellvm.html#aeb7682c55116e253e95fcd05564a3c3b">createLoopSimplifyPass</a>() { <span class="keywordflow">return</span> <span class="keyword">new</span> LoopSimplify(); }</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">/// runOnLoop - Run down all loops in the CFG (recursively, but we could do</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">/// it in any convenient order) inserting preheaders...</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> LoopSimplify::runOnLoop(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *<a class="code" href="Target_2README_8txt.html#a3b42845ada2673a44442c88221edf65f">l</a>, <a class="code" href="classllvm_1_1LPPassManager.html">LPPassManager</a> &amp;LPM) {</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  L = <a class="code" href="Target_2README_8txt.html#a3b42845ada2673a44442c88221edf65f">l</a>;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  LI = &amp;getAnalysis&lt;LoopInfo&gt;();</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  AA = getAnalysisIfAvailable&lt;AliasAnalysis&gt;();</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  DT = &amp;getAnalysis&lt;DominatorTree&gt;();</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  SE = getAnalysisIfAvailable&lt;ScalarEvolution&gt;();</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  Changed |= ProcessLoop(L, LPM);</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="keywordflow">return</span> Changed;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;}</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">/// ProcessLoop - Walk the loop structure in depth first order, ensuring that</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">/// all loops have preheaders.</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> LoopSimplify::ProcessLoop(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1LPPassManager.html">LPPassManager</a> &amp;LPM) {</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;ReprocessLoop:</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="comment">// Check to see that no blocks (other than the header) in this loop have</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="comment">// predecessors that are not in the loop.  This is not valid for natural</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="comment">// loops, but can occur if the blocks are unreachable.  Since they are</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="comment">// unreachable we can just shamelessly delete those CFG edges!</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LoopBase.html#ab39f9623eaa8cd22213aa716c6fb9994">Loop::block_iterator</a> <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a3df1c508a7b1c89247367cab269076e2">block_begin</a>(), E = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a91e3f5f9bf6ecbd058624a479e150603">block_end</a>();</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;       <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> != E; ++<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordflow">if</span> (*<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> == L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>()) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock*, 4&gt;</a> BadPreds;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PredIterator.html">pred_iterator</a> PI = <a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(*<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>),</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;         PE = <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(*<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>); PI != PE; ++PI) {</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = *PI;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a92a38e2e3412bde7fd2b71db212b61aa">contains</a>(P))</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        BadPreds.<a class="code" href="classllvm_1_1SmallPtrSet.html#a9b6dd0fc7a648a939e571246045b673e">insert</a>(P);</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    }</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="comment">// Delete each unique out-of-loop (and thus dead) predecessor.</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SmallPtrSetIterator.html">SmallPtrSet&lt;BasicBlock*, 4&gt;::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = BadPreds.<a class="code" href="classllvm_1_1SmallPtrSet.html#a669d599eeacffd29a09050e2af83bf67">begin</a>(),</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;         E = BadPreds.<a class="code" href="classllvm_1_1SmallPtrSet.html#a7f055d0b03ebf1d6a5988b178e9b8f4f">end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LoopSimplify: Deleting edge from dead predecessor &quot;</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                   &lt;&lt; (*I)-&gt;getName() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      <span class="comment">// Inform each successor of each dead pred.</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SuccIterator.html">succ_iterator</a> SI = <a class="code" href="namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">succ_begin</a>(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>), SE = <a class="code" href="namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">succ_end</a>(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>); SI != SE; ++SI)</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        (*SI)-&gt;removePredecessor(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      <span class="comment">// Zap the dead pred&#39;s terminator and replace it with unreachable.</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      <a class="code" href="classllvm_1_1TerminatorInst.html">TerminatorInst</a> *TI = (*I)-&gt;getTerminator();</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;       TI-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(<a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(TI-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      (*I)-&gt;getTerminator()-&gt;eraseFromParent();</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      <span class="keyword">new</span> <a class="code" href="classllvm_1_1UnreachableInst.html">UnreachableInst</a>((*I)-&gt;getContext(), *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    }</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  }</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="comment">// If there are exiting blocks with branches on undef, resolve the undef in</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="comment">// the direction which will exit the loop. This will help simplify loop</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="comment">// trip count computations.</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock*, 8&gt;</a> ExitingBlocks;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#aa6bdb226fb3dac1f051547ce01b76fd2">getExitingBlocks</a>(ExitingBlocks);</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classT.html">SmallVectorImpl&lt;BasicBlock *&gt;::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = ExitingBlocks.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(),</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;       E = ExitingBlocks.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = dyn_cast&lt;BranchInst&gt;((*I)-&gt;getTerminator()))</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      <span class="keywordflow">if</span> (BI-&gt;isConditional()) {</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1UndefValue.html">UndefValue</a> *Cond = dyn_cast&lt;UndefValue&gt;(BI-&gt;getCondition())) {</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;          <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LoopSimplify: Resolving \&quot;br i1 undef\&quot; to exit in &quot;</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                       &lt;&lt; (*I)-&gt;getName() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;          BI-&gt;setCondition(<a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(Cond-&gt;getType(),</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                                            !L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a92a38e2e3412bde7fd2b71db212b61aa">contains</a>(BI-&gt;getSuccessor(0))));</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;          <span class="comment">// This may make the loop analyzable, force SCEV recomputation.</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;          <span class="keywordflow">if</span> (SE)</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            SE-&gt;forgetLoop(L);</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;          Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        }</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;      }</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <span class="comment">// Does the loop already have a preheader?  If so, don&#39;t insert one.</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Preheader = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1bc74c76b876ad387293ecde0f21ed45">getLoopPreheader</a>();</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <span class="keywordflow">if</span> (!Preheader) {</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    Preheader = <a class="code" href="namespacellvm.html#a978c3a939268de7f7de507c4037a8d74">InsertPreheaderForLoop</a>(L, <span class="keyword">this</span>);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordflow">if</span> (Preheader) {</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      ++NumInserted;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    }</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  }</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="comment">// Next, check to make sure that all exit nodes of the loop only have</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <span class="comment">// predecessors that are inside of the loop.  This check guarantees that the</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="comment">// loop preheader/header will dominate the exit blocks.  If the exit block has</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="comment">// predecessors from outside of the loop, split the edge now.</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock*, 8&gt;</a> ExitBlocks;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a420d7b5cd4eebceaf8bc16326e07af9c">getExitBlocks</a>(ExitBlocks);</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;BasicBlock *, 8&gt;</a> ExitBlockSet(ExitBlocks.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(),</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                                               ExitBlocks.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>());</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SetVector.html#a9ceb97666ed8de600fb9520a563ff95d">SmallSetVector&lt;BasicBlock *, 8&gt;::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = ExitBlockSet.begin(),</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;         E = ExitBlockSet.end(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitBlock = *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PredIterator.html">pred_iterator</a> PI = <a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(ExitBlock), PE = <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(ExitBlock);</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;         PI != PE; ++PI)</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      <span class="comment">// Must be exactly this loop: no subloops, parent loops, or non-loop preds</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      <span class="comment">// allowed.</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a92a38e2e3412bde7fd2b71db212b61aa">contains</a>(*PI)) {</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="keywordflow">if</span> (RewriteLoopExitBlock(L, ExitBlock)) {</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;          ++NumInserted;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;          Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        }</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      }</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  }</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="comment">// If the header has more than two predecessors at this point (from the</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <span class="comment">// preheader and from multiple backedges), we must adjust the loop.</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *LoopLatch = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a8917d359fc92f25eb0117386588c6f1c">getLoopLatch</a>();</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="keywordflow">if</span> (!LoopLatch) {</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="comment">// If this is really a nested loop, rip it out into a child loop.  Don&#39;t do</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="comment">// this for loops with a giant number of backedges, just factor them into a</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="comment">// common backedge instead.</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordflow">if</span> (L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a3c1bb748ad2d2f04c8bcfbef7e3b5c99">getNumBackEdges</a>() &lt; 8) {</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      <span class="keywordflow">if</span> (SeparateNestedLoop(L, LPM, Preheader)) {</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        ++NumNested;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="comment">// This is a big restructuring change, reprocess the whole loop.</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <span class="comment">// GCC doesn&#39;t tail recursion eliminate this.</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <span class="keywordflow">goto</span> ReprocessLoop;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      }</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    }</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="comment">// If we either couldn&#39;t, or didn&#39;t want to, identify nesting of the loops,</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="comment">// insert a new block that all backedges target, then make it jump to the</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="comment">// loop header.</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    LoopLatch = InsertUniqueBackedgeBlock(L, Preheader);</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">if</span> (LoopLatch) {</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      ++NumInserted;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    }</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  }</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="comment">// Scan over the PHI nodes in the loop header.  Since they now have only two</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="comment">// incoming values (the loop is canonicalized), we may have simplified the PHI</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="comment">// down to &#39;X = phi [X, Y]&#39;, which should be replaced with &#39;Y&#39;.</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;       (PN = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1PHINode.html">PHINode</a>&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++)); )</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#a50f8f41fccbea466816345520e9bfabb">SimplifyInstruction</a>(PN, 0, 0, DT)) {</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      <span class="keywordflow">if</span> (AA) AA-&gt;deleteValue(PN);</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      <span class="keywordflow">if</span> (SE) SE-&gt;forgetValue(PN);</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      PN-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(V);</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      PN-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    }</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <span class="comment">// If this loop has multiple exits and the exits all go to the same</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="comment">// block, attempt to merge the exits. This helps several passes, such</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <span class="comment">// as LoopRotation, which do not support loops with multiple exits.</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <span class="comment">// SimplifyCFG also does this (and this code uses the same utility</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="comment">// function), however this code is loop-aware, where SimplifyCFG is</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <span class="comment">// not. That gives it the advantage of being able to hoist</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <span class="comment">// loop-invariant instructions out of the way to open up more</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <span class="comment">// opportunities, and the disadvantage of having the responsibility</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <span class="comment">// to preserve dominator information.</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <span class="keywordtype">bool</span> UniqueExit = <span class="keyword">true</span>;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <span class="keywordflow">if</span> (!ExitBlocks.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>())</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1, e = ExitBlocks.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      <span class="keywordflow">if</span> (ExitBlocks[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] != ExitBlocks[0]) {</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        UniqueExit = <span class="keyword">false</span>;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      }</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="keywordflow">if</span> (UniqueExit) {</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = ExitingBlocks.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitingBlock = ExitingBlocks[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      <span class="keywordflow">if</span> (!ExitingBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5ef55181ae0bb0f5c561b9a29087b1e5">getSinglePredecessor</a>()) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a>&gt;(ExitingBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>());</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      <span class="keywordflow">if</span> (!BI || !BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a03cc0dff22b31447f43af97acb76b1a2">isConditional</a>()) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      <a class="code" href="classllvm_1_1CmpInst.html">CmpInst</a> *CI = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1CmpInst.html">CmpInst</a>&gt;(BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a84309bb8c34c8bc5694ec5d48dd8668f">getCondition</a>());</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="keywordflow">if</span> (!CI || CI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>() != ExitingBlock) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      <span class="comment">// Attempt to hoist out all instructions except for the</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      <span class="comment">// comparison and the branch.</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      <span class="keywordtype">bool</span> AllInvariant = <span class="keyword">true</span>;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = ExitingBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(); &amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != BI; ) {</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <span class="comment">// Skip debug info intrinsics.</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <span class="keywordflow">if</span> (isa&lt;DbgInfoIntrinsic&gt;(Inst))</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="keywordflow">if</span> (Inst == CI)</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1Loop.html#af3a3f2237fde326c32376a3d64a69452">makeLoopInvariant</a>(Inst, Changed,</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                                  Preheader ? Preheader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>() : 0)) {</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;          AllInvariant = <span class="keyword">false</span>;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        }</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      }</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      <span class="keywordflow">if</span> (!AllInvariant) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      <span class="comment">// The block has now been cleared of all instructions except for</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      <span class="comment">// a comparison and a conditional branch. SimplifyCFG may be able</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      <span class="comment">// to fold it now.</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#ab75560d250028c3c4e54556421109b9d">FoldBranchToCommonDest</a>(BI)) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      <span class="comment">// Success. The block is now dead, so remove it from the loop,</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      <span class="comment">// update the dominator tree and delete it.</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LoopSimplify: Eliminating exiting block &quot;</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                   &lt;&lt; ExitingBlock-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      <span class="comment">// If any reachable control flow within this loop has changed, notify</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      <span class="comment">// ScalarEvolution. Currently assume the parent loop doesn&#39;t change</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      <span class="comment">// (spliting edges doesn&#39;t count). If blocks, CFG edges, or other values</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      <span class="comment">// in the parent loop change, then we need call to forgetLoop() for the</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      <span class="comment">// parent instead.</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      <span class="keywordflow">if</span> (SE)</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        SE-&gt;forgetLoop(L);</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      assert(<a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(ExitingBlock) == <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(ExitingBlock));</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      LI-&gt;removeBlock(ExitingBlock);</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      <a class="code" href="classllvm_1_1DomTreeNodeBase.html">DomTreeNode</a> *Node = DT-&gt;getNode(ExitingBlock);</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      <span class="keyword">const</span> std::vector&lt;DomTreeNodeBase&lt;BasicBlock&gt; *&gt; &amp;Children =</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        Node-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#afada34cd832fdc73959f84d4769ab837">getChildren</a>();</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      <span class="keywordflow">while</span> (!Children.empty()) {</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <a class="code" href="classllvm_1_1DomTreeNodeBase.html">DomTreeNode</a> *Child = Children.front();</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        DT-&gt;changeImmediateDominator(Child, Node-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#a7519f9ffdda3ef1147e2563200587193">getIDom</a>());</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      }</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      DT-&gt;eraseNode(ExitingBlock);</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;      BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(0)-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a6f6763e343549d530a1424f1b24053bb">removePredecessor</a>(ExitingBlock);</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(1)-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a6f6763e343549d530a1424f1b24053bb">removePredecessor</a>(ExitingBlock);</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      ExitingBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ace1ad5ed624dd5df8efb4eb611cb71ff">eraseFromParent</a>();</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    }</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  }</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <span class="keywordflow">return</span> Changed;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;}</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment">/// InsertPreheaderForLoop - Once we discover that a loop doesn&#39;t have a</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment">/// preheader, this method is called to insert one.  This method has two phases:</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="comment">/// preheader insertion and analysis updating.</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00371"></a><span class="lineno"><a class="line" href="namespacellvm.html#a978c3a939268de7f7de507c4037a8d74">  371</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="namespacellvm.html#a978c3a939268de7f7de507c4037a8d74">llvm::InsertPreheaderForLoop</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1Pass.html">Pass</a> *PP) {</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Header = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>();</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="comment">// Compute the set of predecessors of the loop that are not in the loop.</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock*, 8&gt;</a> OutsideBlocks;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PredIterator.html">pred_iterator</a> PI = <a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(Header), PE = <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(Header);</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;       PI != PE; ++PI) {</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = *PI;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a92a38e2e3412bde7fd2b71db212b61aa">contains</a>(P)) {         <span class="comment">// Coming in from outside the loop?</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      <span class="comment">// If the loop is branched to from an indirect branch, we won&#39;t</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      <span class="comment">// be able to fully transform the loop, because it prohibits</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      <span class="comment">// edge splitting.</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;      <span class="keywordflow">if</span> (isa&lt;IndirectBrInst&gt;(P-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>())) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      <span class="comment">// Keep track of it.</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      OutsideBlocks.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(P);</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    }</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  }</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="comment">// Split out the loop pre-header.</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PreheaderBB;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <span class="keywordflow">if</span> (!Header-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a3075a9eef753018bed561df31f38dc23">isLandingPad</a>()) {</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    PreheaderBB = <a class="code" href="namespacellvm.html#a55e3df77bb47f39e077b6a4e7e00bb03">SplitBlockPredecessors</a>(Header, OutsideBlocks, <span class="stringliteral">&quot;.preheader&quot;</span>,</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                                         PP);</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock*, 2&gt;</a> NewBBs;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <a class="code" href="namespacellvm.html#a02c38c380d809959819ff729cc158cee">SplitLandingPadPredecessors</a>(Header, OutsideBlocks, <span class="stringliteral">&quot;.preheader&quot;</span>,</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                                <span class="stringliteral">&quot;.split-lp&quot;</span>, PP, NewBBs);</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    PreheaderBB = NewBBs[0];</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  }</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  PreheaderBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#a7bd545769621a0a9d2cfb074f86f4295">setDebugLoc</a>(</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                                      Header-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0e73f4e09745bb69fdd7b15232c45428">getFirstNonPHI</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">getDebugLoc</a>());</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LoopSimplify: Creating pre-header &quot;</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;               &lt;&lt; PreheaderBB-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="comment">// Make sure that NewBB is put someplace intelligent, which doesn&#39;t mess up</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="comment">// code layout too horribly.</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <a class="code" href="LoopSimplify_8cpp.html#a926bc934230351d2ccd41f4f44869d3f">PlaceSplitBlockCarefully</a>(PreheaderBB, OutsideBlocks, L);</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="keywordflow">return</span> PreheaderBB;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;}</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="comment">/// RewriteLoopExitBlock - Ensure that the loop preheader dominates all exit</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="comment">/// blocks.  This method is used to split exit blocks that have predecessors</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="comment">/// outside of the loop.</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *LoopSimplify::RewriteLoopExitBlock(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Exit) {</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock*, 8&gt;</a> LoopBlocks;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PredIterator.html">pred_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(Exit), E = <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(Exit); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="keywordflow">if</span> (L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a92a38e2e3412bde7fd2b71db212b61aa">contains</a>(P)) {</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      <span class="comment">// Don&#39;t do this if the loop is exited via an indirect branch.</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      <span class="keywordflow">if</span> (isa&lt;IndirectBrInst&gt;(P-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>())) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      LoopBlocks.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(P);</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    }</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  }</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  assert(!LoopBlocks.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>() &amp;&amp; <span class="stringliteral">&quot;No edges coming in from outside the loop?&quot;</span>);</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewExitBB = 0;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <span class="keywordflow">if</span> (Exit-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a3075a9eef753018bed561df31f38dc23">isLandingPad</a>()) {</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock*, 2&gt;</a> NewBBs;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <a class="code" href="namespacellvm.html#a02c38c380d809959819ff729cc158cee">SplitLandingPadPredecessors</a>(Exit, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;BasicBlock*&gt;</a>(&amp;LoopBlocks[0],</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                                                            LoopBlocks.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>()),</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                                <span class="stringliteral">&quot;.loopexit&quot;</span>, <span class="stringliteral">&quot;.nonloopexit&quot;</span>,</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                                <span class="keyword">this</span>, NewBBs);</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    NewExitBB = NewBBs[0];</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    NewExitBB = <a class="code" href="namespacellvm.html#a55e3df77bb47f39e077b6a4e7e00bb03">SplitBlockPredecessors</a>(Exit, LoopBlocks, <span class="stringliteral">&quot;.loopexit&quot;</span>, <span class="keyword">this</span>);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  }</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LoopSimplify: Creating dedicated exit block &quot;</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;               &lt;&lt; NewExitBB-&gt;getName() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <span class="keywordflow">return</span> NewExitBB;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;}</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment">/// AddBlockAndPredsToSet - Add the specified block, and all of its</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="comment">/// predecessors, to the specified set, if it&#39;s not already in there.  Stop</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="comment">/// predecessor traversal when we reach StopBlock.</span></div><div class="line"><a name="l00451"></a><span class="lineno"><a class="line" href="LoopSimplify_8cpp.html#ab038ab073f5e18fdd6d227911490f1a3">  451</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LoopSimplify_8cpp.html#ab038ab073f5e18fdd6d227911490f1a3">AddBlockAndPredsToSet</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InputBB, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *StopBlock,</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                                  std::set&lt;BasicBlock*&gt; &amp;Blocks) {</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  std::vector&lt;BasicBlock *&gt; WorkList;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  WorkList.push_back(InputBB);</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <span class="keywordflow">do</span> {</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = WorkList.back(); WorkList.pop_back();</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keywordflow">if</span> (Blocks.insert(BB).second &amp;&amp; BB != StopBlock)</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      <span class="comment">// If BB is not already processed and it is not a stop block then</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      <span class="comment">// insert its predecessor in the work list</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PredIterator.html">pred_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(BB), E = <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(BB); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *WBB = *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        WorkList.push_back(WBB);</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      }</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  } <span class="keywordflow">while</span>(!WorkList.empty());</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;}</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment">/// FindPHIToPartitionLoops - The first part of loop-nestification is to find a</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment">/// PHI node that tells us how to partition the loops.</span></div><div class="line"><a name="l00469"></a><span class="lineno"><a class="line" href="LoopSimplify_8cpp.html#a413b48e099eb0ecd2eac5689b3c04295">  469</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *<a class="code" href="LoopSimplify_8cpp.html#a413b48e099eb0ecd2eac5689b3c04295">FindPHIToPartitionLoops</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT,</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                                        <a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a> *AA, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI) {</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(); isa&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>); ) {</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = cast&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#a50f8f41fccbea466816345520e9bfabb">SimplifyInstruction</a>(PN, 0, 0, DT)) {</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      <span class="comment">// This is a degenerate PHI already, don&#39;t modify it!</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      PN-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(V);</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;      <span class="keywordflow">if</span> (AA) AA-&gt;<a class="code" href="classllvm_1_1AliasAnalysis.html#a2fc1bfe12fa3756cb293da322a3a0454">deleteValue</a>(PN);</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      PN-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    }</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="comment">// Scan this PHI node looking for a use of the PHI node by itself.</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">getNumIncomingValues</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      <span class="keywordflow">if</span> (PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">getIncomingValue</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) == PN &amp;&amp;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;          L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a92a38e2e3412bde7fd2b71db212b61aa">contains</a>(PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a4c25b6c00c4867281779c81ab64d2081">getIncomingBlock</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)))</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <span class="comment">// We found something tasty to remove.</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        <span class="keywordflow">return</span> PN;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  }</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;}</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment">// PlaceSplitBlockCarefully - If the block isn&#39;t already, move the new block to</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="comment">// right after some &#39;outside block&#39; block.  This prevents the preheader from</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="comment">// being placed inside the loop body, e.g. when the loop hasn&#39;t been rotated.</span></div><div class="line"><a name="l00495"></a><span class="lineno"><a class="line" href="LoopSimplify_8cpp.html#a926bc934230351d2ccd41f4f44869d3f">  495</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="LoopSimplify_8cpp.html#a926bc934230351d2ccd41f4f44869d3f">PlaceSplitBlockCarefully</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewBB,</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                              <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;BasicBlock*&gt;</a> &amp;SplitPreds,</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                              <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L) {</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  <span class="comment">// Check to see if NewBB is already well placed.</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  <a class="code" href="classllvm_1_1ilist__iterator.html">Function::iterator</a> BBI = NewBB; --BBI;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = SplitPreds.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="keywordflow">if</span> (&amp;*BBI == SplitPreds[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>])</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  }</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  <span class="comment">// If it isn&#39;t already after an outside block, move it after one.  This is</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  <span class="comment">// always good as it makes the uncond branch from the outside block into a</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  <span class="comment">// fall-through.</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  <span class="comment">// Figure out *which* outside block to put this after.  Prefer an outside</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  <span class="comment">// block that neighbors a BB actually in the loop.</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *FoundBB = 0;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = SplitPreds.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <a class="code" href="classllvm_1_1ilist__iterator.html">Function::iterator</a> BBI = SplitPreds[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="keywordflow">if</span> (++BBI != NewBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#ae4ca2261b8b901e415fda7feac5051ea">end</a>() &amp;&amp;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a92a38e2e3412bde7fd2b71db212b61aa">contains</a>(BBI)) {</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;      FoundBB = SplitPreds[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    }</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  }</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <span class="comment">// If our heuristic for a *good* bb to place this after doesn&#39;t find</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="comment">// anything, just pick something.  It&#39;s likely better than leaving it within</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <span class="comment">// the loop.</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <span class="keywordflow">if</span> (!FoundBB)</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    FoundBB = SplitPreds[0];</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  NewBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a507bb47fc498540c91fec0bf95c25907">moveAfter</a>(FoundBB);</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;}</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment">/// SeparateNestedLoop - If this loop has multiple backedges, try to pull one of</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment">/// them out into a nested loop.  This is important for code that looks like</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment">/// this:</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment">///  Loop:</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="comment">///     ...</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment">///     br cond, Loop, Next</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment">///     ...</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment">///     br cond2, Loop, Out</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment">/// To identify this common case, we look at the PHI nodes in the header of the</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment">/// loop.  PHI nodes with unchanging values on one backedge correspond to values</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment">/// that change in the &quot;outer&quot; loop, but not in the &quot;inner&quot; loop.</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment">/// If we are able to separate out a loop, return the new outer loop that was</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment">/// created.</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Loop.html">Loop</a> *LoopSimplify::SeparateNestedLoop(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1LPPassManager.html">LPPassManager</a> &amp;LPM,</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                                       <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Preheader) {</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  <span class="comment">// Don&#39;t try to separate loops without a preheader.</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  <span class="keywordflow">if</span> (!Preheader)</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <span class="comment">// The header is not a landing pad; preheader insertion should ensure this.</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  assert(!L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a3075a9eef753018bed561df31f38dc23">isLandingPad</a>() &amp;&amp;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;         <span class="stringliteral">&quot;Can&#39;t insert backedge to landing pad&quot;</span>);</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = <a class="code" href="LoopSimplify_8cpp.html#a413b48e099eb0ecd2eac5689b3c04295">FindPHIToPartitionLoops</a>(L, DT, AA, LI);</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <span class="keywordflow">if</span> (PN == 0) <span class="keywordflow">return</span> 0;  <span class="comment">// No known way to partition.</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  <span class="comment">// Pull out all predecessors that have varying values in the loop.  This</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  <span class="comment">// handles the case when a PHI node has multiple instances of itself as</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <span class="comment">// arguments.</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock*, 8&gt;</a> OuterLoopPreds;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = PN-&gt;getNumIncomingValues(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <span class="keywordflow">if</span> (PN-&gt;getIncomingValue(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) != PN ||</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        !L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a92a38e2e3412bde7fd2b71db212b61aa">contains</a>(PN-&gt;getIncomingBlock(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>))) {</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      <span class="comment">// We can&#39;t split indirectbr edges.</span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      <span class="keywordflow">if</span> (isa&lt;IndirectBrInst&gt;(PN-&gt;getIncomingBlock(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)-&gt;getTerminator()))</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      OuterLoopPreds.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(PN-&gt;getIncomingBlock(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    }</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  }</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LoopSimplify: Splitting out a new outer loop\n&quot;</span>);</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  <span class="comment">// If ScalarEvolution is around and knows anything about values in</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  <span class="comment">// this loop, tell it to forget them, because we&#39;re about to</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  <span class="comment">// substantially change it.</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  <span class="keywordflow">if</span> (SE)</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    SE-&gt;forgetLoop(L);</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Header = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>();</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewBB =</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <a class="code" href="namespacellvm.html#a55e3df77bb47f39e077b6a4e7e00bb03">SplitBlockPredecessors</a>(Header, OuterLoopPreds,  <span class="stringliteral">&quot;.outer&quot;</span>, <span class="keyword">this</span>);</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  <span class="comment">// Make sure that NewBB is put someplace intelligent, which doesn&#39;t mess up</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  <span class="comment">// code layout too horribly.</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  <a class="code" href="LoopSimplify_8cpp.html#a926bc934230351d2ccd41f4f44869d3f">PlaceSplitBlockCarefully</a>(NewBB, OuterLoopPreds, L);</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  <span class="comment">// Create the new outer loop.</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  <a class="code" href="classllvm_1_1Loop.html">Loop</a> *NewOuter = <span class="keyword">new</span> <a class="code" href="namespacellvm_1_1GC.html#a5f606a2b04c809f789a574660cd25213a960eba6a93af558b44d3d14e8393d324">Loop</a>();</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="comment">// Change the parent loop to use the outer loop as its child now.</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Loop.html">Loop</a> *Parent = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1431766de798501f107d9031821f311e">getParentLoop</a>())</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    Parent-&gt;replaceChildLoopWith(L, NewOuter);</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    LI-&gt;changeTopLevelLoop(L, NewOuter);</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <span class="comment">// L is now a subloop of our outer loop.</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  NewOuter-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a990a86b0de7a84a9f489d2034878e330">addChildLoop</a>(L);</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <span class="comment">// Add the new loop to the pass manager queue.</span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  LPM.<a class="code" href="classllvm_1_1LPPassManager.html#a56863aac05c9289b335556b7c5e7a0d0">insertLoopIntoQueue</a>(NewOuter);</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LoopBase.html#ab39f9623eaa8cd22213aa716c6fb9994">Loop::block_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a3df1c508a7b1c89247367cab269076e2">block_begin</a>(), E = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a91e3f5f9bf6ecbd058624a479e150603">block_end</a>();</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    NewOuter-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ab0a5e875687fec396caa916b3950e0a3">addBlockEntry</a>(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  <span class="comment">// Now reset the header in L, which had been moved by</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <span class="comment">// SplitBlockPredecessors for the outer loop.</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#afb94ad465ab2bc46ff40bec6263f7355">moveToHeader</a>(Header);</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <span class="comment">// Determine which blocks should stay in L and which should be moved out to</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  <span class="comment">// the Outer loop now.</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  std::set&lt;BasicBlock*&gt; BlocksInL;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PredIterator.html">pred_iterator</a> PI=<a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(Header), E = <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(Header); PI!=E; ++PI) {</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = *PI;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="keywordflow">if</span> (DT-&gt;dominates(Header, P))</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      <a class="code" href="LoopSimplify_8cpp.html#ab038ab073f5e18fdd6d227911490f1a3">AddBlockAndPredsToSet</a>(P, Header, BlocksInL);</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  }</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  <span class="comment">// Scan all of the loop children of L, moving them to OuterLoop if they are</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  <span class="comment">// not part of the inner loop.</span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <span class="keyword">const</span> std::vector&lt;Loop*&gt; &amp;SubLoops = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a25a56244c6585e934556cad000a81e18">getSubLoops</a>();</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != SubLoops.size(); )</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <span class="keywordflow">if</span> (BlocksInL.count(SubLoops[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]-&gt;getHeader()))</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;      ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;   <span class="comment">// Loop remains in L</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;      NewOuter-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a990a86b0de7a84a9f489d2034878e330">addChildLoop</a>(L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a03756cfd4ce082eda8c52cc7666edfcf">removeChildLoop</a>(SubLoops.begin() + <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <span class="comment">// Now that we know which blocks are in L and which need to be moved to</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  <span class="comment">// OuterLoop, move any blocks that need it.</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1939dbb59960462878c408efb21a2c75">getBlocks</a>().size(); ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1939dbb59960462878c408efb21a2c75">getBlocks</a>()[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <span class="keywordflow">if</span> (!BlocksInL.count(BB)) {</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;      <span class="comment">// Move this block to the parent, updating the exit blocks sets</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;      L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1b9dddb31a33eea763f49038e9cf7d63">removeBlockFromLoop</a>(BB);</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;      <span class="keywordflow">if</span> ((*LI)[BB] == L)</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        LI-&gt;changeLoopFor(BB, NewOuter);</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;      --<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    }</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  }</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <span class="keywordflow">return</span> NewOuter;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;}</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="comment">/// InsertUniqueBackedgeBlock - This method is called when the specified loop</span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="comment">/// has more than one backedge in it.  If this occurs, revector all of these</span></div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="comment">/// backedges to target a new basic block and have that block branch to the loop</span></div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="comment">/// header.  This ensures that loops have exactly one backedge.</span></div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;LoopSimplify::InsertUniqueBackedgeBlock(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Preheader) {</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  assert(L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a3c1bb748ad2d2f04c8bcfbef7e3b5c99">getNumBackEdges</a>() &gt; 1 &amp;&amp; <span class="stringliteral">&quot;Must have &gt; 1 backedge!&quot;</span>);</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  <span class="comment">// Get information about the loop</span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Header = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>();</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a> = Header-&gt;getParent();</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  <span class="comment">// Unique backedge insertion currently depends on having a preheader.</span></div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  <span class="keywordflow">if</span> (!Preheader)</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  <span class="comment">// The header is not a landing pad; preheader insertion should ensure this.</span></div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  assert(!Header-&gt;isLandingPad() &amp;&amp; <span class="stringliteral">&quot;Can&#39;t insert backedge to landing pad&quot;</span>);</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  <span class="comment">// Figure out which basic blocks contain back-edges to the loop header.</span></div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  std::vector&lt;BasicBlock*&gt; BackedgeBlocks;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PredIterator.html">pred_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(Header), E = <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(Header); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>){</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <span class="comment">// Indirectbr edges cannot be split, so we must fail if we find one.</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <span class="keywordflow">if</span> (isa&lt;IndirectBrInst&gt;(P-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>()))</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <span class="keywordflow">if</span> (P != Preheader) BackedgeBlocks.push_back(P);</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  }</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <span class="comment">// Create and insert the new backedge block...</span></div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BEBlock = <a class="code" href="classllvm_1_1BasicBlock.html#ae1d53a21892854816885c7288f8b46f1">BasicBlock::Create</a>(Header-&gt;getContext(),</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                                           Header-&gt;getName()+<span class="stringliteral">&quot;.backedge&quot;</span>, <a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>);</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BETerminator = <a class="code" href="classllvm_1_1BranchInst.html#ae9cbc599309fd2da33ec1c61df01ce1f">BranchInst::Create</a>(Header, BEBlock);</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LoopSimplify: Inserting unique backedge block &quot;</span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;               &lt;&lt; BEBlock-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  <span class="comment">// Move the new backedge block to right after the last backedge block.</span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  <a class="code" href="classllvm_1_1ilist__iterator.html">Function::iterator</a> InsertPos = BackedgeBlocks.back(); ++InsertPos;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  F-&gt;<a class="code" href="classllvm_1_1Function.html#a4d34a40b2667246539b80589adf2028e">getBasicBlockList</a>().<a class="code" href="classllvm_1_1iplist.html#afe55b235779222b867c16d3321c1cd16">splice</a>(InsertPos, F-&gt;<a class="code" href="classllvm_1_1Function.html#a4d34a40b2667246539b80589adf2028e">getBasicBlockList</a>(), BEBlock);</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <span class="comment">// Now that the block has been inserted into the function, create PHI nodes in</span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  <span class="comment">// the backedge block which correspond to any PHI nodes in the header block.</span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Header-&gt;begin(); isa&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>); ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = cast&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *NewPN = <a class="code" href="classllvm_1_1PHINode.html#afb5e83bf5123ff7c51058eb0ebebcdc6">PHINode::Create</a>(PN-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), BackedgeBlocks.size(),</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                                     PN-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.be&quot;</span>, BETerminator);</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    <span class="keywordflow">if</span> (AA) AA-&gt;copyValue(PN, NewPN);</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <span class="comment">// Loop over the PHI node, moving all entries except the one for the</span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <span class="comment">// preheader over to the new PHI node.</span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="keywordtype">unsigned</span> PreheaderIdx = ~0U;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="keywordtype">bool</span> HasUniqueIncomingValue = <span class="keyword">true</span>;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *UniqueValue = 0;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">getNumIncomingValues</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *IBB = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a4c25b6c00c4867281779c81ab64d2081">getIncomingBlock</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *IV = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">getIncomingValue</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      <span class="keywordflow">if</span> (IBB == Preheader) {</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        PreheaderIdx = <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        NewPN-&gt;addIncoming(IV, IBB);</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        <span class="keywordflow">if</span> (HasUniqueIncomingValue) {</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;          <span class="keywordflow">if</span> (UniqueValue == 0)</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;            UniqueValue = IV;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (UniqueValue != IV)</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;            HasUniqueIncomingValue = <span class="keyword">false</span>;</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        }</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;      }</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    }</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <span class="comment">// Delete all of the incoming values from the old PN except the preheader&#39;s</span></div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    assert(PreheaderIdx != ~0U &amp;&amp; <span class="stringliteral">&quot;PHI has no preheader entry??&quot;</span>);</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <span class="keywordflow">if</span> (PreheaderIdx != 0) {</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;      PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a88cdefb709309eddc6e5daca0be6a7b4">setIncomingValue</a>(0, PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">getIncomingValue</a>(PreheaderIdx));</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a5ba57877c55dfdbe6e3bbfdacd9ef8c1">setIncomingBlock</a>(0, PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a4c25b6c00c4867281779c81ab64d2081">getIncomingBlock</a>(PreheaderIdx));</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    }</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="comment">// Nuke all entries except the zero&#39;th.</span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">getNumIncomingValues</a>()-1; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;      PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a6f01dbe965b38186b1a78378689d4105">removeIncomingValue</a>(e-<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, <span class="keyword">false</span>);</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <span class="comment">// Finally, add the newly constructed PHI node as the entry for the BEBlock.</span></div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(NewPN, BEBlock);</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="comment">// As an optimization, if all incoming values in the new PhiNode (which is a</span></div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <span class="comment">// subset of the incoming values of the old PHI node) have the same value,</span></div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <span class="comment">// eliminate the PHI Node.</span></div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <span class="keywordflow">if</span> (HasUniqueIncomingValue) {</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;      NewPN-&gt;replaceAllUsesWith(UniqueValue);</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;      <span class="keywordflow">if</span> (AA) AA-&gt;deleteValue(NewPN);</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;      BEBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a531d11ba36ed48d86057d507cc8d5567">getInstList</a>().<a class="code" href="classllvm_1_1iplist.html#a5c2aa38108db7a66ac5e8da547f64ad7">erase</a>(NewPN);</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    }</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  }</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  <span class="comment">// Now that all of the PHI nodes have been inserted and adjusted, modify the</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  <span class="comment">// backedge blocks to just to the BEBlock instead of the header.</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = BackedgeBlocks.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <a class="code" href="classllvm_1_1TerminatorInst.html">TerminatorInst</a> *TI = BackedgeBlocks[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;getTerminator();</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Op = 0, e = TI-&gt;<a class="code" href="classllvm_1_1TerminatorInst.html#a4c26d3b92af99a6c8defd89a2d39ca32">getNumSuccessors</a>(); Op != e; ++Op)</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;      <span class="keywordflow">if</span> (TI-&gt;<a class="code" href="classllvm_1_1TerminatorInst.html#a3aac3b6c36415a2b08f65ead9e3e51e7">getSuccessor</a>(Op) == Header)</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;        TI-&gt;<a class="code" href="classllvm_1_1TerminatorInst.html#a79fb3df941bcb2ba32ba6438409d0c0b">setSuccessor</a>(Op, BEBlock);</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  }</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;  <span class="comment">//===--- Update all analyses which we must preserve now -----------------===//</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  <span class="comment">// Update Loop Information - we know that this block is now in the current</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  <span class="comment">// loop and all parent loops.</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a63f099d3bf7cf97eb3ae2d630e3d1afc">addBasicBlockToLoop</a>(BEBlock, LI-&gt;getBase());</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  <span class="comment">// Update dominator information</span></div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  DT-&gt;splitBlock(BEBlock);</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;  <span class="keywordflow">return</span> BEBlock;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;}</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<span class="keywordtype">void</span> LoopSimplify::verifyAnalysis()<span class="keyword"> const </span>{</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  <span class="comment">// It used to be possible to just assert L-&gt;isLoopSimplifyForm(), however</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  <span class="comment">// with the introduction of indirectbr, there are now cases where it&#39;s</span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;  <span class="comment">// not possible to transform a loop as necessary. We can at least check</span></div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  <span class="comment">// that there is an indirectbr near any time there&#39;s trouble.</span></div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;  <span class="comment">// Indirectbr can interfere with preheader and unique backedge insertion.</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;  <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1bc74c76b876ad387293ecde0f21ed45">getLoopPreheader</a>() || !L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a8917d359fc92f25eb0117386588c6f1c">getLoopLatch</a>()) {</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <span class="keywordtype">bool</span> HasIndBrPred = <span class="keyword">false</span>;</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PredIterator.html">pred_iterator</a> PI = <a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>()),</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;         PE = <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>()); PI != PE; ++PI)</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;      <span class="keywordflow">if</span> (isa&lt;IndirectBrInst&gt;((*PI)-&gt;getTerminator())) {</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        HasIndBrPred = <span class="keyword">true</span>;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;      }</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    assert(HasIndBrPred &amp;&amp;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;           <span class="stringliteral">&quot;LoopSimplify has no excuse for missing loop header info!&quot;</span>);</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    (void)HasIndBrPred;</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  }</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  <span class="comment">// Indirectbr can interfere with exit block canonicalization.</span></div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;  <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1Loop.html#a969c0fff5d11b71d80a08589a5cc2437">hasDedicatedExits</a>()) {</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <span class="keywordtype">bool</span> HasIndBrExiting = <span class="keyword">false</span>;</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock*, 8&gt;</a> ExitingBlocks;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#aa6bdb226fb3dac1f051547ce01b76fd2">getExitingBlocks</a>(ExitingBlocks);</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = ExitingBlocks.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;      <span class="keywordflow">if</span> (isa&lt;IndirectBrInst&gt;((ExitingBlocks[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>])-&gt;getTerminator())) {</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;        HasIndBrExiting = <span class="keyword">true</span>;</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;      }</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    }</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    assert(HasIndBrExiting &amp;&amp;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;           <span class="stringliteral">&quot;LoopSimplify has no excuse for missing exit block info!&quot;</span>);</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    (void)HasIndBrExiting;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  }</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;}</div><div class="ttc" id="classllvm_1_1Pass_html"><div class="ttname"><a href="classllvm_1_1Pass.html">llvm::Pass</a></div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00082">Pass.h:82</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a075e34e98605d0e7c289763a104869ac"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">llvm::SmallVectorTemplateCommon&lt; T &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00114">SmallVector.h:114</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00127">SmallVector.h:127</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00236">SmallVector.h:236</a></div></div>
<div class="ttc" id="LoopSimplify_8cpp_html_ac68567aa12ef395f71061eff8f6dd7df"><div class="ttname"><a href="LoopSimplify_8cpp.html#ac68567aa12ef395f71061eff8f6dd7df">loops</a></div><div class="ttdeci">loop Canonicalize natural loops</div><div class="ttdef"><b>Definition:</b> <a href="LoopSimplify_8cpp_source.html#l00119">LoopSimplify.cpp:119</a></div></div>
<div class="ttc" id="namespacellvm_html_aeb7682c55116e253e95fcd05564a3c3b"><div class="ttname"><a href="namespacellvm.html#aeb7682c55116e253e95fcd05564a3c3b">llvm::createLoopSimplifyPass</a></div><div class="ttdeci">Pass * createLoopSimplifyPass()</div><div class="ttdef"><b>Definition:</b> <a href="LoopSimplify_8cpp_source.html#l00124">LoopSimplify.cpp:124</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html"><div class="ttname"><a href="classllvm_1_1CmpInst.html">llvm::CmpInst</a></div><div class="ttdoc">Abstract base class of comparison instructions. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00633">InstrTypes.h:633</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_a884f90190bca4bd354f2d5c91c264028"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">llvm::AnalysisUsage::addPreserved</a></div><div class="ttdeci">AnalysisUsage &amp; addPreserved()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00081">PassAnalysisSupport.h:81</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a6f6763e343549d530a1424f1b24053bb"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a6f6763e343549d530a1424f1b24053bb">llvm::BasicBlock::removePredecessor</a></div><div class="ttdeci">void removePredecessor(BasicBlock *Pred, bool DontDeleteUselessPHIs=false)</div><div class="ttdoc">Notify the BasicBlock that the predecessor Pred is no longer able to reach it. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00216">BasicBlock.cpp:216</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a089cccb6f231efee72abc76d0f9c695f"><div class="ttname"><a href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">llvm::PHINode::addIncoming</a></div><div class="ttdeci">void addIncoming(Value *V, BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02100">Instructions.h:2100</a></div></div>
<div class="ttc" id="classllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00035">PassRegistry.cpp:35</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a6fe2f06b8a4b2c3d6308afb223a0238a"><div class="ttname"><a href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00072">Instruction.cpp:72</a></div></div>
<div class="ttc" id="Instructions_8h_html"><div class="ttname"><a href="Instructions_8h.html">Instructions.h</a></div></div>
<div class="ttc" id="classllvm_1_1DependenceAnalysis_html"><div class="ttname"><a href="classllvm_1_1DependenceAnalysis.html">llvm::DependenceAnalysis</a></div><div class="ttdef"><b>Definition:</b> <a href="DependenceAnalysis_8h_source.html#l00280">DependenceAnalysis.h:280</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="Type_8h_html"><div class="ttname"><a href="Type_8h.html">Type.h</a></div></div>
<div class="ttc" id="LoopSimplify_8cpp_html_a926bc934230351d2ccd41f4f44869d3f"><div class="ttname"><a href="LoopSimplify_8cpp.html#a926bc934230351d2ccd41f4f44869d3f">PlaceSplitBlockCarefully</a></div><div class="ttdeci">static void PlaceSplitBlockCarefully(BasicBlock *NewBB, SmallVectorImpl&lt; BasicBlock * &gt; &amp;SplitPreds, Loop *L)</div><div class="ttdef"><b>Definition:</b> <a href="LoopSimplify_8cpp_source.html#l00495">LoopSimplify.cpp:495</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_ae4ca2261b8b901e415fda7feac5051ea"><div class="ttname"><a href="classllvm_1_1Function.html#ae4ca2261b8b901e415fda7feac5051ea">llvm::Function::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00397">Function.h:397</a></div></div>
<div class="ttc" id="LoopUtils_8h_html"><div class="ttname"><a href="LoopUtils_8h.html">LoopUtils.h</a></div></div>
<div class="ttc" id="IntrinsicInst_8h_html"><div class="ttname"><a href="IntrinsicInst_8h.html">IntrinsicInst.h</a></div></div>
<div class="ttc" id="namespacellvm_html_a3f2f98c2a67c9e79f58aad9150a62e42"><div class="ttname"><a href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">llvm::dyn_cast</a></div><div class="ttdeci">enable_if_c&lt;!is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="Casting_8h_source.html#l00266">Casting.h:266</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_afb94ad465ab2bc46ff40bec6263f7355"><div class="ttname"><a href="classllvm_1_1LoopBase.html#afb94ad465ab2bc46ff40bec6263f7355">llvm::LoopBase::moveToHeader</a></div><div class="ttdeci">void moveToHeader(BlockT *BB)</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00291">LoopInfo.h:291</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a03756cfd4ce082eda8c52cc7666edfcf"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a03756cfd4ce082eda8c52cc7666edfcf">llvm::LoopBase::removeChildLoop</a></div><div class="ttdeci">LoopT * removeChildLoop(iterator I)</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00261">LoopInfo.h:261</a></div></div>
<div class="ttc" id="classllvm_1_1ScalarEvolution_html"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html">llvm::ScalarEvolution</a></div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l00172">ScalarEvolution.h:172</a></div></div>
<div class="ttc" id="README-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00427">README-SSE.txt:427</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01978">Instructions.h:1978</a></div></div>
<div class="ttc" id="Debug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html_a9b6dd0fc7a648a939e571246045b673e"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html#a9b6dd0fc7a648a939e571246045b673e">llvm::SmallPtrSet::insert</a></div><div class="ttdeci">bool insert(PtrType Ptr)</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00253">SmallPtrSet.h:253</a></div></div>
<div class="ttc" id="LoopSimplify_8cpp_html_a413b48e099eb0ecd2eac5689b3c04295"><div class="ttname"><a href="LoopSimplify_8cpp.html#a413b48e099eb0ecd2eac5689b3c04295">FindPHIToPartitionLoops</a></div><div class="ttdeci">static PHINode * FindPHIToPartitionLoops(Loop *L, DominatorTree *DT, AliasAnalysis *AA, LoopInfo *LI)</div><div class="ttdef"><b>Definition:</b> <a href="LoopSimplify_8cpp_source.html#l00469">LoopSimplify.cpp:469</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_aca229503e4f5c83a187a6a921c625fa8"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">llvm::BasicBlock::getParent</a></div><div class="ttdeci">const Function * getParent() const </div><div class="ttdoc">Return the enclosing method, or null if none. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00116">BasicBlock.h:116</a></div></div>
<div class="ttc" id="classllvm_1_1PredIterator_html"><div class="ttname"><a href="classllvm_1_1PredIterator.html">llvm::PredIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="Support_2CFG_8h_source.html#l00029">Support/CFG.h:29</a></div></div>
<div class="ttc" id="LLParser_8cpp_html_a33ece1ef8074506a15d7f86eb76dbae6"><div class="ttname"><a href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a></div><div class="ttdeci">F(f)</div></div>
<div class="ttc" id="classllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00070">Function.h:70</a></div></div>
<div class="ttc" id="InstructionSimplify_8h_html"><div class="ttname"><a href="InstructionSimplify_8h.html">InstructionSimplify.h</a></div></div>
<div class="ttc" id="Statistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a7bd545769621a0a9d2cfb074f86f4295"><div class="ttname"><a href="classllvm_1_1Instruction.html#a7bd545769621a0a9d2cfb074f86f4295">llvm::Instruction::setDebugLoc</a></div><div class="ttdeci">void setDebugLoc(const DebugLoc &amp;Loc)</div><div class="ttdoc">setDebugLoc - Set the debug location information for this instruction. </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00175">Instruction.h:175</a></div></div>
<div class="ttc" id="SetOperations_8h_html"><div class="ttname"><a href="SetOperations_8h.html">SetOperations.h</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00167">Value.cpp:167</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a8917d359fc92f25eb0117386588c6f1c"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a8917d359fc92f25eb0117386588c6f1c">llvm::LoopBase::getLoopLatch</a></div><div class="ttdeci">BlockT * getLoopLatch() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00154">LoopInfoImpl.h:154</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00193">BasicBlock.h:193</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_ab39f9623eaa8cd22213aa716c6fb9994"><div class="ttname"><a href="classllvm_1_1LoopBase.html#ab39f9623eaa8cd22213aa716c6fb9994">llvm::LoopBase&lt; BasicBlock, Loop &gt;::block_iterator</a></div><div class="ttdeci">std::vector&lt; BasicBlock * &gt;::const_iterator block_iterator</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00139">LoopInfo.h:139</a></div></div>
<div class="ttc" id="classllvm_1_1DomTreeNodeBase_html_a7519f9ffdda3ef1147e2563200587193"><div class="ttname"><a href="classllvm_1_1DomTreeNodeBase.html#a7519f9ffdda3ef1147e2563200587193">llvm::DomTreeNodeBase::getIDom</a></div><div class="ttdeci">DomTreeNodeBase&lt; NodeT &gt; * getIDom() const </div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00083">Dominators.h:83</a></div></div>
<div class="ttc" id="LoopSimplify_8cpp_html_ab038ab073f5e18fdd6d227911490f1a3"><div class="ttname"><a href="LoopSimplify_8cpp.html#ab038ab073f5e18fdd6d227911490f1a3">AddBlockAndPredsToSet</a></div><div class="ttdeci">static void AddBlockAndPredsToSet(BasicBlock *InputBB, BasicBlock *StopBlock, std::set&lt; BasicBlock * &gt; &amp;Blocks)</div><div class="ttdef"><b>Definition:</b> <a href="LoopSimplify_8cpp_source.html#l00451">LoopSimplify.cpp:451</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_ae5c60fd282ee894c87ea02c3f0fcb6d0"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">llvm::AnalysisUsage::addRequired</a></div><div class="ttdeci">AnalysisUsage &amp; addRequired()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00055">PassAnalysisSupport.h:55</a></div></div>
<div class="ttc" id="PassSupport_8h_html_a14724f1ccf528e73bb29bc9230737967"><div class="ttname"><a href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a></div><div class="ttdeci">#define INITIALIZE_PASS_DEPENDENCY(depName)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00167">PassSupport.h:167</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a6f01dbe965b38186b1a78378689d4105"><div class="ttname"><a href="classllvm_1_1PHINode.html#a6f01dbe965b38186b1a78378689d4105">llvm::PHINode::removeIncomingValue</a></div><div class="ttdeci">Value * removeIncomingValue(unsigned Idx, bool DeletePHIIfEmpty=true)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l00114">Instructions.cpp:114</a></div></div>
<div class="ttc" id="namespacellvm_html_a978c3a939268de7f7de507c4037a8d74"><div class="ttname"><a href="namespacellvm.html#a978c3a939268de7f7de507c4037a8d74">llvm::InsertPreheaderForLoop</a></div><div class="ttdeci">BasicBlock * InsertPreheaderForLoop(Loop *L, Pass *P)</div><div class="ttdef"><b>Definition:</b> <a href="LoopSimplify_8cpp_source.html#l00371">LoopSimplify.cpp:371</a></div></div>
<div class="ttc" id="classllvm_1_1UndefValue_html"><div class="ttname"><a href="classllvm_1_1UndefValue.html">llvm::UndefValue</a></div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l01129">Constants.h:1129</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_ab0a5e875687fec396caa916b3950e0a3"><div class="ttname"><a href="classllvm_1_1LoopBase.html#ab0a5e875687fec396caa916b3950e0a3">llvm::LoopBase::addBlockEntry</a></div><div class="ttdeci">void addBlockEntry(BlockT *BB)</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00273">LoopInfo.h:273</a></div></div>
<div class="ttc" id="LoopSimplify_8cpp_html_ac4cf41b27d824371f7a1b1e2503e04b4"><div class="ttname"><a href="LoopSimplify_8cpp.html#ac4cf41b27d824371f7a1b1e2503e04b4">INITIALIZE_PASS_BEGIN</a></div><div class="ttdeci">INITIALIZE_PASS_BEGIN(LoopSimplify,&quot;loop-simplify&quot;,&quot;Canonicalize natural loops&quot;, true, false) INITIALIZE_PASS_END(LoopSimplify</div></div>
<div class="ttc" id="PassSupport_8h_html_a74ce8276b89067e806f67c45a6d92575"><div class="ttname"><a href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a></div><div class="ttdeci">#define INITIALIZE_PASS_END(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00172">PassSupport.h:172</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00035">APInt.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0e73f4e09745bb69fdd7b15232c45428"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0e73f4e09745bb69fdd7b15232c45428">llvm::BasicBlock::getFirstNonPHI</a></div><div class="ttdeci">Instruction * getFirstNonPHI()</div><div class="ttdoc">Returns a pointer to the first instruction in this block that is not a PHINode instruction. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00130">BasicBlock.cpp:130</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_ae9cbc599309fd2da33ec1c61df01ce1f"><div class="ttname"><a href="classllvm_1_1BranchInst.html#ae9cbc599309fd2da33ec1c61df01ce1f">llvm::BranchInst::Create</a></div><div class="ttdeci">static BranchInst * Create(BasicBlock *IfTrue, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02373">Instructions.h:2373</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_aa6bdb226fb3dac1f051547ce01b76fd2"><div class="ttname"><a href="classllvm_1_1LoopBase.html#aa6bdb226fb3dac1f051547ce01b76fd2">llvm::LoopBase::getExitingBlocks</a></div><div class="ttdeci">void getExitingBlocks(SmallVectorImpl&lt; BlockT * &gt; &amp;ExitingBlocks) const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00033">LoopInfoImpl.h:33</a></div></div>
<div class="ttc" id="classllvm_1_1AliasAnalysis_html"><div class="ttname"><a href="classllvm_1_1AliasAnalysis.html">llvm::AliasAnalysis</a></div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00056">AliasAnalysis.h:56</a></div></div>
<div class="ttc" id="namespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00126">StackSlotColoring.cpp:126</a></div></div>
<div class="ttc" id="namespacellvm_1_1CallingConv_html_a4f861731fc6dbfdccc05af5968d98974"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">llvm::CallingConv::ID</a></div><div class="ttdeci">ID</div><div class="ttdoc">LLVM Calling Convention Representation. </div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00026">CallingConv.h:26</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00031">Instruction.h:31</a></div></div>
<div class="ttc" id="Dominators_8h_html"><div class="ttname"><a href="Dominators_8h.html">Dominators.h</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a420d7b5cd4eebceaf8bc16326e07af9c"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a420d7b5cd4eebceaf8bc16326e07af9c">llvm::LoopBase::getExitBlocks</a></div><div class="ttdeci">void getExitBlocks(SmallVectorImpl&lt; BlockT * &gt; &amp;ExitBlocks) const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00062">LoopInfoImpl.h:62</a></div></div>
<div class="ttc" id="namespacellvm_html_a3720211f6e6389ab53734b989bfb6fce"><div class="ttname"><a href="namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">llvm::succ_begin</a></div><div class="ttdeci">Interval::succ_iterator succ_begin(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00107">Interval.h:107</a></div></div>
<div class="ttc" id="namespacellvm_html_a55e3df77bb47f39e077b6a4e7e00bb03"><div class="ttname"><a href="namespacellvm.html#a55e3df77bb47f39e077b6a4e7e00bb03">llvm::SplitBlockPredecessors</a></div><div class="ttdeci">BasicBlock * SplitBlockPredecessors(BasicBlock *BB, ArrayRef&lt; BasicBlock * &gt; Preds, const char *Suffix, Pass *P=0)</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00442">BasicBlockUtils.cpp:442</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a63f099d3bf7cf97eb3ae2d630e3d1afc"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a63f099d3bf7cf97eb3ae2d630e3d1afc">llvm::LoopBase::addBasicBlockToLoop</a></div><div class="ttdeci">void addBasicBlockToLoop(BlockT *NewBB, LoopInfoBase&lt; BlockT, LoopT &gt; &amp;LI)</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00185">LoopInfoImpl.h:185</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorBase_html_a8a8df4d85555c7954a95f86080cd3b64"><div class="ttname"><a href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">llvm::SmallVectorBase::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const </div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00056">SmallVector.h:56</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a74e70ecbb79defbbfa6f6c87f76155bf"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">llvm::BranchInst::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02406">Instructions.h:2406</a></div></div>
<div class="ttc" id="Analysis_2README_8txt_html_a01d2af4eee7c40485a0ce3683a2e907a"><div class="ttname"><a href="Analysis_2README_8txt.html#a01d2af4eee7c40485a0ce3683a2e907a">loop</a></div><div class="ttdeci">Analysis the ScalarEvolution expression for r is&lt; loop &gt; Outside the loop</div><div class="ttdef"><b>Definition:</b> <a href="Analysis_2README_8txt_source.html#l00005">Analysis/README.txt:5</a></div></div>
<div class="ttc" id="classllvm_1_1DomTreeNodeBase_html"><div class="ttname"><a href="classllvm_1_1DomTreeNodeBase.html">llvm::DomTreeNodeBase</a></div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00064">Dominators.h:64</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a></div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00031">ArrayRef.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1LPPassManager_html_a56863aac05c9289b335556b7c5e7a0d0"><div class="ttname"><a href="classllvm_1_1LPPassManager.html#a56863aac05c9289b335556b7c5e7a0d0">llvm::LPPassManager::insertLoopIntoQueue</a></div><div class="ttdeci">void insertLoopIntoQueue(Loop *L)</div><div class="ttdef"><b>Definition:</b> <a href="LoopPass_8cpp_source.html#l00107">LoopPass.cpp:107</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_a40970e5d42646fb2d9aa5f7a2c879516"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#a40970e5d42646fb2d9aa5f7a2c879516">llvm::AnalysisUsage::addPreservedID</a></div><div class="ttdeci">AnalysisUsage &amp; addPreservedID(const void *ID)</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00068">PassAnalysisSupport.h:68</a></div></div>
<div class="ttc" id="classllvm_1_1TerminatorInst_html_a79fb3df941bcb2ba32ba6438409d0c0b"><div class="ttname"><a href="classllvm_1_1TerminatorInst.html#a79fb3df941bcb2ba32ba6438409d0c0b">llvm::TerminatorInst::setSuccessor</a></div><div class="ttdeci">void setSuccessor(unsigned idx, BasicBlock *B)</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00071">InstrTypes.h:71</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00303">Value.cpp:303</a></div></div>
<div class="ttc" id="classllvm_1_1DominatorTree_html"><div class="ttname"><a href="classllvm_1_1DominatorTree.html">llvm::DominatorTree</a></div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00740">Dominators.h:740</a></div></div>
<div class="ttc" id="DepthFirstIterator_8h_html"><div class="ttname"><a href="DepthFirstIterator_8h.html">DepthFirstIterator.h</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_aa45f6c0433576e3858a6209a43750ad4"><div class="ttname"><a href="classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">llvm::PHINode::getNumIncomingValues</a></div><div class="ttdeci">unsigned getNumIncomingValues() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02055">Instructions.h:2055</a></div></div>
<div class="ttc" id="namespacellvm_html_a069c4ae2290101bde0f8d6a5074dc72b"><div class="ttname"><a href="namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">llvm::succ_end</a></div><div class="ttdeci">Interval::succ_iterator succ_end(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00110">Interval.h:110</a></div></div>
<div class="ttc" id="classllvm_1_1TerminatorInst_html_a4c26d3b92af99a6c8defd89a2d39ca32"><div class="ttname"><a href="classllvm_1_1TerminatorInst.html#a4c26d3b92af99a6c8defd89a2d39ca32">llvm::TerminatorInst::getNumSuccessors</a></div><div class="ttdeci">unsigned getNumSuccessors() const </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00059">InstrTypes.h:59</a></div></div>
<div class="ttc" id="LoopPass_8h_html"><div class="ttname"><a href="LoopPass_8h.html">LoopPass.h</a></div></div>
<div class="ttc" id="classllvm_1_1TerminatorInst_html"><div class="ttname"><a href="classllvm_1_1TerminatorInst.html">llvm::TerminatorInst</a></div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00035">InstrTypes.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a1bc74c76b876ad387293ecde0f21ed45"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a1bc74c76b876ad387293ecde0f21ed45">llvm::LoopBase::getLoopPreheader</a></div><div class="ttdeci">BlockT * getLoopPreheader() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00106">LoopInfoImpl.h:106</a></div></div>
<div class="ttc" id="classllvm_1_1SuccIterator_html"><div class="ttname"><a href="classllvm_1_1SuccIterator.html">llvm::SuccIterator&lt; TerminatorInst *, BasicBlock &gt;</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1TerminatorInst_html_a3aac3b6c36415a2b08f65ead9e3e51e7"><div class="ttname"><a href="classllvm_1_1TerminatorInst.html#a3aac3b6c36415a2b08f65ead9e3e51e7">llvm::TerminatorInst::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned idx) const </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00065">InstrTypes.h:65</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html"><div class="ttname"><a href="classllvm_1_1BranchInst.html">llvm::BranchInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02350">Instructions.h:2350</a></div></div>
<div class="ttc" id="namespacellvm_html_ac39b40d3d53e73764f8328bc22eea839"><div class="ttname"><a href="namespacellvm.html#ac39b40d3d53e73764f8328bc22eea839">llvm::BreakCriticalEdgesID</a></div><div class="ttdeci">char &amp; BreakCriticalEdgesID</div></div>
<div class="ttc" id="classllvm_1_1UnreachableInst_html"><div class="ttname"><a href="classllvm_1_1UnreachableInst.html">llvm::UnreachableInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03142">Instructions.h:3142</a></div></div>
<div class="ttc" id="Support_2CFG_8h_html"><div class="ttname"><a href="Support_2CFG_8h.html">CFG.h</a></div></div>
<div class="ttc" id="Constants_8h_html"><div class="ttname"><a href="Constants_8h.html">Constants.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1GC_html_a5f606a2b04c809f789a574660cd25213a960eba6a93af558b44d3d14e8393d324"><div class="ttname"><a href="namespacellvm_1_1GC.html#a5f606a2b04c809f789a574660cd25213a960eba6a93af558b44d3d14e8393d324">llvm::GC::Loop</a></div><div class="ttdoc">Instr is a loop (backwards branch). </div><div class="ttdef"><b>Definition:</b> <a href="GCMetadata_8h_source.html#l00051">GCMetadata.h:51</a></div></div>
<div class="ttc" id="namespacellvm_html_a7e108932dc3da5294aed99a353aac9c4"><div class="ttname"><a href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">llvm::pred_begin</a></div><div class="ttdeci">Interval::pred_iterator pred_begin(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00117">Interval.h:117</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_aab8e16a35183ce39aad394714087bcff"><div class="ttname"><a href="classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">llvm::Instruction::getDebugLoc</a></div><div class="ttdeci">const DebugLoc &amp; getDebugLoc() const </div><div class="ttdoc">getDebugLoc - Return the debug location for this node as a DebugLoc. </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00178">Instruction.h:178</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00037">PassAnalysisSupport.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_afb5e83bf5123ff7c51058eb0ebebcdc6"><div class="ttname"><a href="classllvm_1_1PHINode.html#afb5e83bf5123ff7c51058eb0ebebcdc6">llvm::PHINode::Create</a></div><div class="ttdeci">static PHINode * Create(Type *Ty, unsigned NumReservedValues, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02013">Instructions.h:2013</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a4c25b6c00c4867281779c81ab64d2081"><div class="ttname"><a href="classllvm_1_1PHINode.html#a4c25b6c00c4867281779c81ab64d2081">llvm::PHINode::getIncomingBlock</a></div><div class="ttdeci">BasicBlock * getIncomingBlock(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02074">Instructions.h:2074</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_ac4f141a355e5898255f2cbc57c5b54c3"><div class="ttname"><a href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">llvm::LoopBase::getHeader</a></div><div class="ttdeci">BlockT * getHeader() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00095">LoopInfo.h:95</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a531d11ba36ed48d86057d507cc8d5567"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a531d11ba36ed48d86057d507cc8d5567">llvm::BasicBlock::getInstList</a></div><div class="ttdeci">const InstListType &amp; getInstList() const </div><div class="ttdoc">Return the underlying instruction list container. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00214">BasicBlock.h:214</a></div></div>
<div class="ttc" id="classllvm_1_1Loop_html_af3a3f2237fde326c32376a3d64a69452"><div class="ttname"><a href="classllvm_1_1Loop.html#af3a3f2237fde326c32376a3d64a69452">llvm::Loop::makeLoopInvariant</a></div><div class="ttdeci">bool makeLoopInvariant(Value *V, bool &amp;Changed, Instruction *InsertPt=0) const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00087">LoopInfo.cpp:87</a></div></div>
<div class="ttc" id="namespacellvm_html_a5eeaf08e96168c2cac8960f87f0ef360"><div class="ttname"><a href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">llvm::pred_end</a></div><div class="ttdeci">Interval::pred_iterator pred_end(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00120">Interval.h:120</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a92a38e2e3412bde7fd2b71db212b61aa"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a92a38e2e3412bde7fd2b71db212b61aa">llvm::LoopBase::contains</a></div><div class="ttdeci">bool contains(const LoopT *L) const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00104">LoopInfo.h:104</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a25a56244c6585e934556cad000a81e18"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a25a56244c6585e934556cad000a81e18">llvm::LoopBase::getSubLoops</a></div><div class="ttdeci">const std::vector&lt; LoopT * &gt; &amp; getSubLoops() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00125">LoopInfo.h:125</a></div></div>
<div class="ttc" id="classllvm_1_1Loop_html_a969c0fff5d11b71d80a08589a5cc2437"><div class="ttname"><a href="classllvm_1_1Loop.html#a969c0fff5d11b71d80a08589a5cc2437">llvm::Loop::hasDedicatedExits</a></div><div class="ttdeci">bool hasDedicatedExits() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00335">LoopInfo.cpp:335</a></div></div>
<div class="ttc" id="classllvm_1_1UndefValue_html_a4ae5ff22b700a42bcc5d889233721335"><div class="ttname"><a href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">llvm::UndefValue::get</a></div><div class="ttdeci">static UndefValue * get(Type *T)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01334">Constants.cpp:1334</a></div></div>
<div class="ttc" id="classllvm_1_1AliasAnalysis_html_a2fc1bfe12fa3756cb293da322a3a0454"><div class="ttname"><a href="classllvm_1_1AliasAnalysis.html#a2fc1bfe12fa3756cb293da322a3a0454">llvm::AliasAnalysis::deleteValue</a></div><div class="ttdeci">virtual void deleteValue(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8cpp_source.html#l00063">AliasAnalysis.cpp:63</a></div></div>
<div class="ttc" id="namespacellvm_html_a50f8f41fccbea466816345520e9bfabb"><div class="ttname"><a href="namespacellvm.html#a50f8f41fccbea466816345520e9bfabb">llvm::SimplifyInstruction</a></div><div class="ttdeci">Value * SimplifyInstruction(Instruction *I, const DataLayout *TD=0, const TargetLibraryInfo *TLI=0, const DominatorTree *DT=0)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l03036">InstructionSimplify.cpp:3036</a></div></div>
<div class="ttc" id="classT_html"><div class="ttname"><a href="classT.html">T</a></div></div>
<div class="ttc" id="classllvm_1_1iplist_html_a5c2aa38108db7a66ac5e8da547f64ad7"><div class="ttname"><a href="classllvm_1_1iplist.html#a5c2aa38108db7a66ac5e8da547f64ad7">llvm::iplist::erase</a></div><div class="ttdeci">iterator erase(iterator where)</div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00465">ilist.h:465</a></div></div>
<div class="ttc" id="namespacellvm_html_a472515fc67a5fb572afeb00aa2609cca"><div class="ttname"><a href="namespacellvm.html#a472515fc67a5fb572afeb00aa2609cca">llvm::LoopSimplifyID</a></div><div class="ttdeci">char &amp; LoopSimplifyID</div><div class="ttdef"><b>Definition:</b> <a href="LoopSimplify_8cpp_source.html#l00123">LoopSimplify.cpp:123</a></div></div>
<div class="ttc" id="namespacellvm_html_ab75560d250028c3c4e54556421109b9d"><div class="ttname"><a href="namespacellvm.html#ab75560d250028c3c4e54556421109b9d">llvm::FoldBranchToCommonDest</a></div><div class="ttdeci">bool FoldBranchToCommonDest(BranchInst *BI)</div><div class="ttdef"><b>Definition:</b> <a href="SimplifyCFG_8cpp_source.html#l01967">SimplifyCFG.cpp:1967</a></div></div>
<div class="ttc" id="classllvm_1_1DomTreeNodeBase_html_afada34cd832fdc73959f84d4769ab837"><div class="ttname"><a href="classllvm_1_1DomTreeNodeBase.html#afada34cd832fdc73959f84d4769ab837">llvm::DomTreeNodeBase::getChildren</a></div><div class="ttdeci">const std::vector&lt; DomTreeNodeBase&lt; NodeT &gt; * &gt; &amp; getChildren() const </div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00084">Dominators.h:84</a></div></div>
<div class="ttc" id="DependenceAnalysis_8h_html"><div class="ttname"><a href="DependenceAnalysis_8h.html">DependenceAnalysis.h</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a03cc0dff22b31447f43af97acb76b1a2"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a03cc0dff22b31447f43af97acb76b1a2">llvm::BranchInst::isConditional</a></div><div class="ttdeci">bool isConditional() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02392">Instructions.h:2392</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSetIterator_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSetIterator.html">llvm::SmallPtrSetIterator</a></div><div class="ttdoc">SmallPtrSetIterator - This implements a const_iterator for SmallPtrSet. </div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00174">SmallPtrSet.h:174</a></div></div>
<div class="ttc" id="classllvm_1_1SmallSetVector_html"><div class="ttname"><a href="classllvm_1_1SmallSetVector.html">llvm::SmallSetVector</a></div><div class="ttdoc">A SetVector that performs no allocations if smaller than a certain size. </div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00218">SetVector.h:218</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a507bb47fc498540c91fec0bf95c25907"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a507bb47fc498540c91fec0bf95c25907">llvm::BasicBlock::moveAfter</a></div><div class="ttdeci">void moveAfter(BasicBlock *MovePos)</div><div class="ttdoc">Unlink this basic block from its current function and insert it right after MovePos in the function M...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00113">BasicBlock.cpp:113</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a4d34a40b2667246539b80589adf2028e"><div class="ttname"><a href="classllvm_1_1Function.html#a4d34a40b2667246539b80589adf2028e">llvm::Function::getBasicBlockList</a></div><div class="ttdeci">const BasicBlockListType &amp; getBasicBlockList() const </div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00374">Function.h:374</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00236">SmallPtrSet.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a5ba57877c55dfdbe6e3bbfdacd9ef8c1"><div class="ttname"><a href="classllvm_1_1PHINode.html#a5ba57877c55dfdbe6e3bbfdacd9ef8c1">llvm::PHINode::setIncomingBlock</a></div><div class="ttdeci">void setIncomingBlock(unsigned i, BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02094">Instructions.h:2094</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_aba6a4cc4ed6d6fef3664b8d65ef04820"><div class="ttname"><a href="classllvm_1_1PHINode.html#aba6a4cc4ed6d6fef3664b8d65ef04820">llvm::PHINode::getIncomingValue</a></div><div class="ttdeci">Value * getIncomingValue(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02059">Instructions.h:2059</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00880">SmallVector.h:880</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00111">Value.h:111</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_ace1ad5ed624dd5df8efb4eb611cb71ff"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ace1ad5ed624dd5df8efb4eb611cb71ff">llvm::BasicBlock::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdoc">Unlink &amp;#39;this&amp;#39; from the containing function and delete it. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00100">BasicBlock.cpp:100</a></div></div>
<div class="ttc" id="classllvm_1_1LoopInfo_html"><div class="ttname"><a href="classllvm_1_1LoopInfo.html">llvm::LoopInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00589">LoopInfo.h:589</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a1431766de798501f107d9031821f311e"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a1431766de798501f107d9031821f311e">llvm::LoopBase::getParentLoop</a></div><div class="ttdeci">LoopT * getParentLoop() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00096">LoopInfo.h:96</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a3c1bb748ad2d2f04c8bcfbef7e3b5c99"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a3c1bb748ad2d2f04c8bcfbef7e3b5c99">llvm::LoopBase::getNumBackEdges</a></div><div class="ttdeci">unsigned getNumBackEdges() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00164">LoopInfo.h:164</a></div></div>
<div class="ttc" id="classllvm_1_1LoopPass_html"><div class="ttname"><a href="classllvm_1_1LoopPass.html">llvm::LoopPass</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopPass_8h_source.html#l00029">LoopPass.h:29</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a9105541412dab869e18b3cceebfff07d"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool isSigned=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00492">Constants.cpp:492</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a3df1c508a7b1c89247367cab269076e2"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a3df1c508a7b1c89247367cab269076e2">llvm::LoopBase::block_begin</a></div><div class="ttdeci">block_iterator block_begin() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00140">LoopInfo.h:140</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a91e3f5f9bf6ecbd058624a479e150603"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a91e3f5f9bf6ecbd058624a479e150603">llvm::LoopBase::block_end</a></div><div class="ttdeci">block_iterator block_end() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00141">LoopInfo.h:141</a></div></div>
<div class="ttc" id="classllvm_1_1iplist_html_afe55b235779222b867c16d3321c1cd16"><div class="ttname"><a href="classllvm_1_1iplist.html#afe55b235779222b867c16d3321c1cd16">llvm::iplist::splice</a></div><div class="ttdeci">void splice(iterator where, iplist &amp;L2)</div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00570">ilist.h:570</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00101">Debug.cpp:101</a></div></div>
<div class="ttc" id="LoopSimplify_8cpp_html_a9d68898674ecfefd0d956207b8c3b04c"><div class="ttname"><a href="LoopSimplify_8cpp.html#a9d68898674ecfefd0d956207b8c3b04c">STATISTIC</a></div><div class="ttdeci">STATISTIC(NumInserted,&quot;Number of pre-header or exit blocks inserted&quot;)</div></div>
<div class="ttc" id="ScalarEvolution_8h_html"><div class="ttname"><a href="ScalarEvolution_8h.html">ScalarEvolution.h</a></div></div>
<div class="ttc" id="CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2README_8txt_source.html#l00036">CodeGen/README.txt:36</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a5ef55181ae0bb0f5c561b9a29087b1e5"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a5ef55181ae0bb0f5c561b9a29087b1e5">llvm::BasicBlock::getSinglePredecessor</a></div><div class="ttdeci">BasicBlock * getSinglePredecessor()</div><div class="ttdoc">Return this block if it has a single predecessor block. Otherwise return a null pointer. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00183">BasicBlock.cpp:183</a></div></div>
<div class="ttc" id="Function_8h_html"><div class="ttname"><a href="Function_8h.html">Function.h</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a8a045d250952c0867382a9840ee18fdf"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">llvm::SmallVectorTemplateCommon&lt; T &gt;::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00112">SmallVector.h:112</a></div></div>
<div class="ttc" id="AliasAnalysis_8h_html"><div class="ttname"><a href="AliasAnalysis_8h.html">AliasAnalysis.h</a></div></div>
<div class="ttc" id="Transforms_2Scalar_8h_html"><div class="ttname"><a href="Transforms_2Scalar_8h.html">Scalar.h</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a84309bb8c34c8bc5694ec5d48dd8668f"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a84309bb8c34c8bc5694ec5d48dd8668f">llvm::BranchInst::getCondition</a></div><div class="ttdeci">Value * getCondition() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02394">Instructions.h:2394</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a1939dbb59960462878c408efb21a2c75"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a1939dbb59960462878c408efb21a2c75">llvm::LoopBase::getBlocks</a></div><div class="ttdeci">const std::vector&lt; BlockT * &gt; &amp; getBlocks() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00138">LoopInfo.h:138</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a990a86b0de7a84a9f489d2034878e330"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a990a86b0de7a84a9f489d2034878e330">llvm::LoopBase::addChildLoop</a></div><div class="ttdeci">void addChildLoop(LoopT *NewChild)</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00252">LoopInfo.h:252</a></div></div>
<div class="ttc" id="classllvm_1_1Loop_html"><div class="ttname"><a href="classllvm_1_1Loop.html">llvm::Loop</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00338">LoopInfo.h:338</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a5cb76a65b6524dba1493dd2b9dc3abbe"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">TerminatorInst * getTerminator()</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00120">BasicBlock.cpp:120</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a3075a9eef753018bed561df31f38dc23"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a3075a9eef753018bed561df31f38dc23">llvm::BasicBlock::isLandingPad</a></div><div class="ttdeci">bool isLandingPad() const </div><div class="ttdoc">Return true if this basic block is a landing pad. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00360">BasicBlock.cpp:360</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html_a7f055d0b03ebf1d6a5988b178e9b8f4f"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html#a7f055d0b03ebf1d6a5988b178e9b8f4f">llvm::SmallPtrSet::end</a></div><div class="ttdeci">iterator end() const </div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00279">SmallPtrSet.h:279</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_ae1d53a21892854816885c7288f8b46f1"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ae1d53a21892854816885c7288f8b46f1">llvm::BasicBlock::Create</a></div><div class="ttdeci">static BasicBlock * Create(LLVMContext &amp;Context, const Twine &amp;Name=&quot;&quot;, Function *Parent=0, BasicBlock *InsertBefore=0)</div><div class="ttdoc">Creates a new BasicBlock. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00109">BasicBlock.h:109</a></div></div>
<div class="ttc" id="BasicBlockUtils_8h_html"><div class="ttname"><a href="BasicBlockUtils_8h.html">BasicBlockUtils.h</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a1b9dddb31a33eea763f49038e9cf7d63"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a1b9dddb31a33eea763f49038e9cf7d63">llvm::LoopBase::removeBlockFromLoop</a></div><div class="ttdeci">void removeBlockFromLoop(BlockT *BB)</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00306">LoopInfo.h:306</a></div></div>
<div class="ttc" id="namespacellvm_html_a502b3252234db2a5f6e55857b546f514"><div class="ttname"><a href="namespacellvm.html#a502b3252234db2a5f6e55857b546f514">llvm::initializeLoopSimplifyPass</a></div><div class="ttdeci">void initializeLoopSimplifyPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="LLVMContext_8h_html"><div class="ttname"><a href="LLVMContext_8h.html">LLVMContext.h</a></div></div>
<div class="ttc" id="SetVector_8h_html"><div class="ttname"><a href="SetVector_8h.html">SetVector.h</a></div></div>
<div class="ttc" id="Local_8h_html"><div class="ttname"><a href="Local_8h.html">Local.h</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_a3b42845ada2673a44442c88221edf65f"><div class="ttname"><a href="Target_2README_8txt.html#a3b42845ada2673a44442c88221edf65f">l</a></div><div class="ttdeci">Which allows the multiply by constant to be CSE xmm1 movapd xmm2 addsd xmm2 subsd xmm0 mulsd xmm0 ret This doesn t need ffast math support at all This is particularly bad because the llvm gcc frontend is canonicalizing the later into the but clang doesn t have this problem These two functions should generate the same code on big endian int * l</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00138">Target/README.txt:138</a></div></div>
<div class="ttc" id="namespacetrue_html"><div class="ttname"><a href="namespacetrue.html">true</a></div><div class="ttdef"><b>Definition:</b> <a href="DominanceFrontier_8cpp_source.html#l00024">DominanceFrontier.cpp:24</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00066">Value.h:66</a></div></div>
<div class="ttc" id="classllvm_1_1SetVector_html_a9ceb97666ed8de600fb9520a563ff95d"><div class="ttname"><a href="classllvm_1_1SetVector.html#a9ceb97666ed8de600fb9520a563ff95d">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallSet&lt; T, N &gt; &gt;::iterator</a></div><div class="ttdeci">vector_type::const_iterator iterator</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00045">SetVector.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html_a669d599eeacffd29a09050e2af83bf67"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html#a669d599eeacffd29a09050e2af83bf67">llvm::SmallPtrSet::begin</a></div><div class="ttdeci">iterator begin() const </div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00276">SmallPtrSet.h:276</a></div></div>
<div class="ttc" id="Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00097">Debug.h:97</a></div></div>
<div class="ttc" id="namespacellvm_html_a02c38c380d809959819ff729cc158cee"><div class="ttname"><a href="namespacellvm.html#a02c38c380d809959819ff729cc158cee">llvm::SplitLandingPadPredecessors</a></div><div class="ttdeci">void SplitLandingPadPredecessors(BasicBlock *OrigBB, ArrayRef&lt; BasicBlock * &gt; Preds, const char *Suffix, const char *Suffix2, Pass *P, SmallVectorImpl&lt; BasicBlock * &gt; &amp;NewBBs)</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00495">BasicBlockUtils.cpp:495</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a88cdefb709309eddc6e5daca0be6a7b4"><div class="ttname"><a href="classllvm_1_1PHINode.html#a88cdefb709309eddc6e5daca0be6a7b4">llvm::PHINode::setIncomingValue</a></div><div class="ttdeci">void setIncomingValue(unsigned i, Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02062">Instructions.h:2062</a></div></div>
<div class="ttc" id="LoopSimplify_8cpp_html_adbc7fea4f239fd84b6dcdcb33906a9d2"><div class="ttname"><a href="LoopSimplify_8cpp.html#adbc7fea4f239fd84b6dcdcb33906a9d2">simplify</a></div><div class="ttdeci">loop simplify</div><div class="ttdef"><b>Definition:</b> <a href="LoopSimplify_8cpp_source.html#l00119">LoopSimplify.cpp:119</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00052">Instruction.h:52</a></div></div>
<div class="ttc" id="classllvm_1_1LPPassManager_html"><div class="ttname"><a href="classllvm_1_1LPPassManager.html">llvm::LPPassManager</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopPass_8h_source.html#l00086">LoopPass.h:86</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 22:59:31 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
