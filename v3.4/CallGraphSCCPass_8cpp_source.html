<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: CallGraphSCCPass.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('CallGraphSCCPass_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">CallGraphSCCPass.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="CallGraphSCCPass_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- CallGraphSCCPass.cpp - Pass that operates BU on call graph ---------===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// This file implements the CallGraphSCCPass class, which is used for passes</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// which are implemented as bottom-up traversals on the call graph.  Because</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// there may be cycles in the call graph, passes of this type operate on the</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// call-graph in SCC order: that is, they process function bottom-up, except for</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// recursive functions, which they process all at once.</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div><div class="line"><a name="l00018"></a><span class="lineno"><a class="line" href="CallGraphSCCPass_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   18</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;cgscc-passmgr&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CallGraphSCCPass_8h.html">llvm/Analysis/CallGraphSCCPass.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SCCIterator_8h.html">llvm/ADT/SCCIterator.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CallGraph_8h.html">llvm/Analysis/CallGraph.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Function_8h.html">llvm/IR/Function.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IntrinsicInst_8h.html">llvm/IR/IntrinsicInst.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LegacyPassManagers_8h.html">llvm/IR/LegacyPassManagers.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Timer_8h.html">llvm/Support/Timer.h</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> </div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<a class="code" href="CallGraphSCCPass_8cpp.html#a787c97cc3fe8c5f2ea1a5a09abaab710">MaxIterations</a>(<span class="stringliteral">&quot;max-cg-scc-iterations&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40ab81f279502bb9ca74e6629cfb62844be">cl::ReallyHidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(4));</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<a class="code" href="CallGraphSCCPass_8cpp.html#a964d491dbca073be5312eb493cb8d9da">STATISTIC</a>(MaxSCCIterations, <span class="stringliteral">&quot;Maximum CGSCCPassMgr iterations on one SCC&quot;</span>);</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">// CGPassManager</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">//</span><span class="comment"></span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">/// CGPassManager manages FPPassManagers and CallGraphSCCPasses.</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="keyword">class </span>CGPassManager : <span class="keyword">public</span> <a class="code" href="classllvm_1_1ModulePass.html">ModulePass</a>, <span class="keyword">public</span> <a class="code" href="classllvm_1_1PMDataManager.html">PMDataManager</a> {</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="keyword">explicit</span> CGPassManager() </div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    : <a class="code" href="classllvm_1_1ModulePass.html">ModulePass</a>(ID), <a class="code" href="classllvm_1_1PMDataManager.html">PMDataManager</a>() { }</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">  /// run - Execute all of the passes scheduled for execution.  Keep track of</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">  /// whether any of the passes modifies the module, and if so, return true.</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> runOnModule(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;<a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>);</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="keyword">using</span> <a class="code" href="classllvm_1_1Pass.html#ab007d6c51634eb65e4f4f9dab4eb6a8c">ModulePass::doInitialization</a>;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <span class="keyword">using</span> <a class="code" href="classllvm_1_1Pass.html#ac7811985250c75d7e2a244292d615fff">ModulePass::doFinalization</a>;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="keywordtype">bool</span> doInitialization(<a class="code" href="classllvm_1_1CallGraph.html">CallGraph</a> &amp;CG);</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="keywordtype">bool</span> doFinalization(<a class="code" href="classllvm_1_1CallGraph.html">CallGraph</a> &amp;CG);</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">  /// Pass Manager itself does not invalidate any analysis info.</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;Info)<span class="keyword"> const </span>{</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="comment">// CGPassManager walks SCC and it needs CallGraph.</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    Info.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1CallGraph.html">CallGraph</a>&gt;();</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    Info.<a class="code" href="classllvm_1_1AnalysisUsage.html#af22b06a6a4f9df80454071685a0d6a02">setPreservesAll</a>();</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  }</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *getPassName()<span class="keyword"> const </span>{</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;CallGraph Pass Manager&quot;</span>;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  }</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="keyword">virtual</span> <a class="code" href="classllvm_1_1PMDataManager.html">PMDataManager</a> *getAsPMDataManager() { <span class="keywordflow">return</span> <span class="keyword">this</span>; }</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="keyword">virtual</span> <a class="code" href="classllvm_1_1Pass.html">Pass</a> *getAsPass() { <span class="keywordflow">return</span> <span class="keyword">this</span>; }</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="comment">// Print passes managed by this manager</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="keywordtype">void</span> dumpPassStructure(<span class="keywordtype">unsigned</span> Offset) {</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <a class="code" href="namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">errs</a>().<a class="code" href="classllvm_1_1raw__ostream.html#a8fdf5cdf041c8aded7e3308c1c3efacc">indent</a>(Offset*2) &lt;&lt; <span class="stringliteral">&quot;Call Graph SCC Pass Manager\n&quot;</span>;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Index = 0; Index &lt; getNumContainedPasses(); ++Index) {</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;      <a class="code" href="classllvm_1_1Pass.html">Pass</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = getContainedPass(Index);</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;      P-&gt;<a class="code" href="classllvm_1_1Pass.html#ad2f0576ef7c9c4af40e35001c81f4922">dumpPassStructure</a>(Offset + 1);</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;      dumpLastUses(P, Offset+1);</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    }</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  }</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <a class="code" href="classllvm_1_1Pass.html">Pass</a> *getContainedPass(<span class="keywordtype">unsigned</span> <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) {</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    assert(N &lt; PassVector.size() &amp;&amp; <span class="stringliteral">&quot;Pass number out of range!&quot;</span>);</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="classllvm_1_1Pass.html">Pass</a> *<span class="keyword">&gt;</span>(PassVector[<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>]);</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  }</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="keyword">virtual</span> <a class="code" href="namespacellvm.html#a3948b4d0759f9852502b466d6cfb4ebb">PassManagerType</a> getPassManagerType()<span class="keyword"> const </span>{ </div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a3948b4d0759f9852502b466d6cfb4ebbacfbf7d6825e58faf3673dc5e5a7a2465">PMT_CallGraphPassManager</a>; </div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  }</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  </div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="keywordtype">bool</span> RunAllPassesOnSCC(<a class="code" href="classllvm_1_1CallGraphSCC.html">CallGraphSCC</a> &amp;CurSCC, <a class="code" href="classllvm_1_1CallGraph.html">CallGraph</a> &amp;CG,</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                         <span class="keywordtype">bool</span> &amp;DevirtualizedCall);</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  </div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="keywordtype">bool</span> RunPassOnSCC(<a class="code" href="classllvm_1_1Pass.html">Pass</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>, <a class="code" href="classllvm_1_1CallGraphSCC.html">CallGraphSCC</a> &amp;CurSCC,</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                    <a class="code" href="classllvm_1_1CallGraph.html">CallGraph</a> &amp;CG, <span class="keywordtype">bool</span> &amp;CallGraphUpToDate,</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                    <span class="keywordtype">bool</span> &amp;DevirtualizedCall);</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="keywordtype">bool</span> RefreshCallGraph(<a class="code" href="classllvm_1_1CallGraphSCC.html">CallGraphSCC</a> &amp;CurSCC, <a class="code" href="classllvm_1_1CallGraph.html">CallGraph</a> &amp;CG,</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                        <span class="keywordtype">bool</span> IsCheckingMode);</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;};</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;} <span class="comment">// end anonymous namespace.</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">CGPassManager::ID</a> = 0;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="keywordtype">bool</span> CGPassManager::RunPassOnSCC(<a class="code" href="classllvm_1_1Pass.html">Pass</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>, <a class="code" href="classllvm_1_1CallGraphSCC.html">CallGraphSCC</a> &amp;CurSCC,</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                                 <a class="code" href="classllvm_1_1CallGraph.html">CallGraph</a> &amp;CG, <span class="keywordtype">bool</span> &amp;CallGraphUpToDate,</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                                 <span class="keywordtype">bool</span> &amp;DevirtualizedCall) {</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <a class="code" href="classllvm_1_1PMDataManager.html">PMDataManager</a> *PM = P-&gt;<a class="code" href="classllvm_1_1Pass.html#a626b77ef8abdfa9f53c697ad129a6e5a">getAsPMDataManager</a>();</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="keywordflow">if</span> (PM == 0) {</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <a class="code" href="classllvm_1_1CallGraphSCCPass.html">CallGraphSCCPass</a> *CGSP = (<a class="code" href="classllvm_1_1CallGraphSCCPass.html">CallGraphSCCPass</a>*)P;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordflow">if</span> (!CallGraphUpToDate) {</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;      DevirtualizedCall |= RefreshCallGraph(CurSCC, CG, <span class="keyword">false</span>);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;      CallGraphUpToDate = <span class="keyword">true</span>;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    }</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    {</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      <a class="code" href="classllvm_1_1TimeRegion.html">TimeRegion</a> PassTimer(<a class="code" href="namespacellvm.html#a67d0285e03a80731db23ba77d291942d">getPassTimer</a>(CGSP));</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      Changed = CGSP-&gt;<a class="code" href="classllvm_1_1CallGraphSCCPass.html#a5ab09f122afda68d4c0d86e8e5877465">runOnSCC</a>(CurSCC);</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    }</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    </div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="comment">// After the CGSCCPass is done, when assertions are enabled, use</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="comment">// RefreshCallGraph to verify that the callgraph was correctly updated.</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordflow">if</span> (Changed)</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      RefreshCallGraph(CurSCC, CG, <span class="keyword">true</span>);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    </div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordflow">return</span> Changed;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  }</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  </div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  </div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  assert(PM-&gt;<a class="code" href="classllvm_1_1PMDataManager.html#ac118337a439a0601243488da4e48c65d">getPassManagerType</a>() == <a class="code" href="namespacellvm.html#a3948b4d0759f9852502b466d6cfb4ebbaf92a84a9aa3cca1378d1a12fc3664396">PMT_FunctionPassManager</a> &amp;&amp;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;         <span class="stringliteral">&quot;Invalid CGPassManager member&quot;</span>);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <a class="code" href="classllvm_1_1FPPassManager.html">FPPassManager</a> *FPP = (<a class="code" href="classllvm_1_1FPPassManager.html">FPPassManager</a>*)P;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  </div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="comment">// Run pass P on all functions in the current SCC.</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1CallGraphSCC.html#a5dc6f41d85a83e036bf7f9a25797e2ec">CallGraphSCC::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = CurSCC.<a class="code" href="classllvm_1_1CallGraphSCC.html#aa262134562bc5f5df6c3f536162469b6">begin</a>(), E = CurSCC.<a class="code" href="classllvm_1_1CallGraphSCC.html#a6699d964429a39e8f78b348cb2535bf2">end</a>();</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a> = (*I)-&gt;getFunction()) {</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      dumpPassInfo(P, <a class="code" href="namespacellvm.html#a7e7283c48f393f907c761d39cb7f0b51a3f3116bde1268f9e1cd78d9010e4ff26">EXECUTION_MSG</a>, <a class="code" href="namespacellvm.html#a7e7283c48f393f907c761d39cb7f0b51a4772c843cba89638b5f424e728acadee">ON_FUNCTION_MSG</a>, <a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>-&gt;getName());</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      <a class="code" href="classllvm_1_1TimeRegion.html">TimeRegion</a> PassTimer(<a class="code" href="namespacellvm.html#a67d0285e03a80731db23ba77d291942d">getPassTimer</a>(FPP));</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      Changed |= FPP-&gt;runOnFunction(*<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    }</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  }</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  </div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="comment">// The function pass(es) modified the IR, they may have clobbered the</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="comment">// callgraph.</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="keywordflow">if</span> (Changed &amp;&amp; CallGraphUpToDate) {</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;CGSCCPASSMGR: Pass Dirtied SCC: &quot;</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                 &lt;&lt; P-&gt;<a class="code" href="classllvm_1_1Pass.html#a6cc9e0287b99155d16b45d73bfbc156b">getPassName</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    CallGraphUpToDate = <span class="keyword">false</span>;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  }</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="keywordflow">return</span> Changed;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;}</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">/// RefreshCallGraph - Scan the functions in the specified CFG and resync the</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">/// callgraph with the call sites found in it.  This is used after</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">/// FunctionPasses have potentially munged the callgraph, and can be used after</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">/// CallGraphSCC passes to verify that they correctly updated the callgraph.</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">/// This function returns true if it devirtualized an existing function call,</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment">/// meaning it turned an indirect call into a direct call.  This happens when</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">/// a function pass like GVN optimizes away stuff feeding the indirect call.</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">/// This never happens in checking mode.</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> CGPassManager::RefreshCallGraph(<a class="code" href="classllvm_1_1CallGraphSCC.html">CallGraphSCC</a> &amp;CurSCC,</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                                     <a class="code" href="classllvm_1_1CallGraph.html">CallGraph</a> &amp;CG, <span class="keywordtype">bool</span> CheckingMode) {</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value*, CallGraphNode*&gt;</a> CallSites;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  </div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;CGSCCPASSMGR: Refreshing SCC with &quot;</span> &lt;&lt; CurSCC.<a class="code" href="classllvm_1_1CallGraphSCC.html#a7b08cebb8589f9420b7882534a236a0a">size</a>()</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;               &lt;&lt; <span class="stringliteral">&quot; nodes:\n&quot;</span>;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1CallGraphSCC.html#a5dc6f41d85a83e036bf7f9a25797e2ec">CallGraphSCC::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = CurSCC.<a class="code" href="classllvm_1_1CallGraphSCC.html#aa262134562bc5f5df6c3f536162469b6">begin</a>(), E = CurSCC.<a class="code" href="classllvm_1_1CallGraphSCC.html#a6699d964429a39e8f78b348cb2535bf2">end</a>();</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;             <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;          (*I)-&gt;dump();</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        );</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="keywordtype">bool</span> MadeChange = <span class="keyword">false</span>;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="keywordtype">bool</span> DevirtualizedCall = <span class="keyword">false</span>;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  </div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <span class="comment">// Scan all functions in the SCC.</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <span class="keywordtype">unsigned</span> FunctionNo = 0;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1CallGraphSCC.html#a5dc6f41d85a83e036bf7f9a25797e2ec">CallGraphSCC::iterator</a> SCCIdx = CurSCC.<a class="code" href="classllvm_1_1CallGraphSCC.html#aa262134562bc5f5df6c3f536162469b6">begin</a>(), E = CurSCC.<a class="code" href="classllvm_1_1CallGraphSCC.html#a6699d964429a39e8f78b348cb2535bf2">end</a>();</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;       SCCIdx != E; ++SCCIdx, ++FunctionNo) {</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <a class="code" href="classllvm_1_1CallGraphNode.html">CallGraphNode</a> *CGN = *SCCIdx;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a> = CGN-&gt;<a class="code" href="classllvm_1_1CallGraphNode.html#ab40c70f303f70e989a10efced4036a57">getFunction</a>();</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">if</span> (F == 0 || F-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a4640d98233102674ddb6d6efaf2b7f97">isDeclaration</a>()) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    </div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="comment">// Walk the function body looking for call sites.  Sync up the call sites in</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="comment">// CGN with those actually in the function.</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="comment">// Keep track of the number of direct and indirect calls that were</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="comment">// invalidated and removed.</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordtype">unsigned</span> NumDirectRemoved = 0, NumIndirectRemoved = 0;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    </div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="comment">// Get the set of call sites currently in the function.</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1CallGraphNode.html#aa09f788dd735e872f745a5490faced2f">CallGraphNode::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = CGN-&gt;<a class="code" href="classllvm_1_1CallGraphNode.html#a4f29edc585030005e8215897bb1e792f">begin</a>(), E = CGN-&gt;<a class="code" href="classllvm_1_1CallGraphNode.html#a72b2e4575a6de8f1550d057ff1c23ea1">end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ) {</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      <span class="comment">// If this call site is null, then the function pass deleted the call</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      <span class="comment">// entirely and the WeakVH nulled it out.  </span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;first == 0 ||</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;          <span class="comment">// If we&#39;ve already seen this call site, then the FunctionPass RAUW&#39;d</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;          <span class="comment">// one call with another, which resulted in two &quot;uses&quot; in the edge</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;          <span class="comment">// list of the same call.</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;          CallSites.<a class="code" href="classllvm_1_1DenseMapBase.html#a4efb46d4834f6f750ae0649ed89ce44c">count</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;first) ||</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;          <span class="comment">// If the call edge is not from a call or invoke, then the function</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;          <span class="comment">// pass RAUW&#39;d a call with another value.  This can happen when</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;          <span class="comment">// constant folding happens of well known functions etc.</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;          !<a class="code" href="classllvm_1_1CallSite.html">CallSite</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;first)) {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        assert(!CheckingMode &amp;&amp;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;               <span class="stringliteral">&quot;CallGraphSCCPass did not update the CallGraph correctly!&quot;</span>);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        </div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <span class="comment">// If this was an indirect call site, count it.</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;second-&gt;getFunction() == 0)</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;          ++NumIndirectRemoved;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <span class="keywordflow">else</span> </div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;          ++NumDirectRemoved;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        </div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <span class="comment">// Just remove the edge from the set of callees, keep track of whether</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <span class="comment">// I points to the last element of the vector.</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <span class="keywordtype">bool</span> WasLast = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> + 1 == E;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        CGN-&gt;<a class="code" href="classllvm_1_1CallGraphNode.html#ae4b8c37522c8e190c125cfd9b578bff0">removeCallEdge</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        </div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <span class="comment">// If I pointed to the last element of the vector, we have to bail out:</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <span class="comment">// iterator checking rejects comparisons of the resultant pointer with</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <span class="comment">// end.</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="keywordflow">if</span> (WasLast)</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        E = CGN-&gt;<a class="code" href="classllvm_1_1CallGraphNode.html#a72b2e4575a6de8f1550d057ff1c23ea1">end</a>();</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      }</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      </div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      assert(!CallSites.<a class="code" href="classllvm_1_1DenseMapBase.html#a4efb46d4834f6f750ae0649ed89ce44c">count</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;first) &amp;&amp;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;             <span class="stringliteral">&quot;Call site occurs in node multiple times&quot;</span>);</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      CallSites.<a class="code" href="classllvm_1_1DenseMapBase.html#a699a66e504b48fdeff124e82f6c61917">insert</a>(std::make_pair(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;first, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;second));</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    }</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    </div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="comment">// Loop over all of the instructions in the function, getting the callsites.</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="comment">// Keep track of the number of direct/indirect calls added.</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordtype">unsigned</span> NumDirectAdded = 0, NumIndirectAdded = 0;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    </div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">Function::iterator</a> <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = F-&gt;<a class="code" href="classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">begin</a>(), E = F-&gt;<a class="code" href="classllvm_1_1Function.html#ae4ca2261b8b901e415fda7feac5051ea">end</a>(); <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> != E; ++<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;begin(), E = <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;end(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <a class="code" href="classllvm_1_1CallSite.html">CallSite</a> CS(cast&lt;Value&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="keywordflow">if</span> (!CS) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <a class="code" href="classllvm_1_1Function.html">Function</a> *Callee = CS.getCalledFunction();</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="keywordflow">if</span> (Callee &amp;&amp; Callee-&gt;<a class="code" href="classllvm_1_1Function.html#a4b37898a6d26b0d5fcee66548f2621d3">isIntrinsic</a>()) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        </div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <span class="comment">// If this call site already existed in the callgraph, just verify it</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <span class="comment">// matches up to expectations and remove it from CallSites.</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value*, CallGraphNode*&gt;::iterator</a> ExistingIt =</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;          CallSites.<a class="code" href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">find</a>(CS.getInstruction());</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="keywordflow">if</span> (ExistingIt != CallSites.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>()) {</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;          <a class="code" href="classllvm_1_1CallGraphNode.html">CallGraphNode</a> *ExistingNode = ExistingIt-&gt;second;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;          <span class="comment">// Remove from CallSites since we have now seen it.</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;          CallSites.<a class="code" href="classllvm_1_1DenseMapBase.html#a269c7b8adcd29645a4f901196fc08806">erase</a>(ExistingIt);</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;          </div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;          <span class="comment">// Verify that the callee is right.</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;          <span class="keywordflow">if</span> (ExistingNode-&gt;<a class="code" href="classllvm_1_1CallGraphNode.html#ab40c70f303f70e989a10efced4036a57">getFunction</a>() == CS.getCalledFunction())</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;          </div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;          <span class="comment">// If we are in checking mode, we are not allowed to actually mutate</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;          <span class="comment">// the callgraph.  If this is a case where we can infer that the</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;          <span class="comment">// callgraph is less precise than it could be (e.g. an indirect call</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;          <span class="comment">// site could be turned direct), don&#39;t reject it in checking mode, and</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;          <span class="comment">// don&#39;t tweak it to be more precise.</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;          <span class="keywordflow">if</span> (CheckingMode &amp;&amp; CS.getCalledFunction() &amp;&amp;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;              ExistingNode-&gt;<a class="code" href="classllvm_1_1CallGraphNode.html#ab40c70f303f70e989a10efced4036a57">getFunction</a>() == 0)</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;          </div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;          assert(!CheckingMode &amp;&amp;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                 <span class="stringliteral">&quot;CallGraphSCCPass did not update the CallGraph correctly!&quot;</span>);</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;          </div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;          <span class="comment">// If not, we either went from a direct call to indirect, indirect to</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;          <span class="comment">// direct, or direct to different direct.</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;          <a class="code" href="classllvm_1_1CallGraphNode.html">CallGraphNode</a> *CalleeNode;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> *Callee = CS.getCalledFunction()) {</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            CalleeNode = CG.<a class="code" href="classllvm_1_1CallGraph.html#a91eed9199c5b0e56a1fc1f3487431c9c">getOrInsertFunction</a>(Callee);</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            <span class="comment">// Keep track of whether we turned an indirect call into a direct</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            <span class="comment">// one.</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            <span class="keywordflow">if</span> (ExistingNode-&gt;<a class="code" href="classllvm_1_1CallGraphNode.html#ab40c70f303f70e989a10efced4036a57">getFunction</a>() == 0) {</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;              DevirtualizedCall = <span class="keyword">true</span>;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;              <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  CGSCCPASSMGR: Devirtualized call to &#39;&quot;</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                           &lt;&lt; Callee-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt; <span class="stringliteral">&quot;&#39;\n&quot;</span>);</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            }</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;          } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            CalleeNode = CG.<a class="code" href="classllvm_1_1CallGraph.html#a5e6e9ef062dbff6d7a2914121159225e">getCallsExternalNode</a>();</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;          }</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;          <span class="comment">// Update the edge target in CGN.</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;          CGN-&gt;<a class="code" href="classllvm_1_1CallGraphNode.html#ae691d3aeb7e8719ce17477fa0cb42c30">replaceCallEdge</a>(CS, CS, CalleeNode);</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;          MadeChange = <span class="keyword">true</span>;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        }</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        </div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        assert(!CheckingMode &amp;&amp;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;               <span class="stringliteral">&quot;CallGraphSCCPass did not update the CallGraph correctly!&quot;</span>);</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="comment">// If the call site didn&#39;t exist in the CGN yet, add it.</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <a class="code" href="classllvm_1_1CallGraphNode.html">CallGraphNode</a> *CalleeNode;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> *Callee = CS.getCalledFunction()) {</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;          CalleeNode = CG.<a class="code" href="classllvm_1_1CallGraph.html#a91eed9199c5b0e56a1fc1f3487431c9c">getOrInsertFunction</a>(Callee);</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;          ++NumDirectAdded;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;          CalleeNode = CG.<a class="code" href="classllvm_1_1CallGraph.html#a5e6e9ef062dbff6d7a2914121159225e">getCallsExternalNode</a>();</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;          ++NumIndirectAdded;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        }</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        </div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        CGN-&gt;<a class="code" href="classllvm_1_1CallGraphNode.html#a9fbce2784beecb38d29db7902c1018bc">addCalledFunction</a>(CS, CalleeNode);</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        MadeChange = <span class="keyword">true</span>;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      }</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    </div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="comment">// We scanned the old callgraph node, removing invalidated call sites and</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="comment">// then added back newly found call sites.  One thing that can happen is</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="comment">// that an old indirect call site was deleted and replaced with a new direct</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="comment">// call.  In this case, we have devirtualized a call, and CGSCCPM would like</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="comment">// to iteratively optimize the new code.  Unfortunately, we don&#39;t really</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="comment">// have a great way to detect when this happens.  As an approximation, we</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="comment">// just look at whether the number of indirect calls is reduced and the</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="comment">// number of direct calls is increased.  There are tons of ways to fool this</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="comment">// (e.g. DCE&#39;ing an indirect call and duplicating an unrelated block with a</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="comment">// direct call) but this is close enough.</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="keywordflow">if</span> (NumIndirectRemoved &gt; NumIndirectAdded &amp;&amp;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        NumDirectRemoved &lt; NumDirectAdded)</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      DevirtualizedCall = <span class="keyword">true</span>;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    </div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="comment">// After scanning this function, if we still have entries in callsites, then</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="comment">// they are dangling pointers.  WeakVH should save us for this, so abort if</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="comment">// this happens.</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    assert(CallSites.<a class="code" href="classllvm_1_1DenseMapBase.html#acdd674781be3766718b3a0b38540a4bc">empty</a>() &amp;&amp; <span class="stringliteral">&quot;Dangling pointers found in call sites map&quot;</span>);</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    </div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="comment">// Periodically do an explicit clear to remove tombstones when processing</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="comment">// large scc&#39;s.</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordflow">if</span> ((FunctionNo &amp; 15) == 15)</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      CallSites.<a class="code" href="classllvm_1_1DenseMapBase.html#a6467bd6bb128c8b69a478548fc17351c">clear</a>();</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  }</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<span class="keywordflow">if</span> (MadeChange) {</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;CGSCCPASSMGR: Refreshed SCC is now:\n&quot;</span>;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;          <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1CallGraphSCC.html#a5dc6f41d85a83e036bf7f9a25797e2ec">CallGraphSCC::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = CurSCC.<a class="code" href="classllvm_1_1CallGraphSCC.html#aa262134562bc5f5df6c3f536162469b6">begin</a>(), E = CurSCC.<a class="code" href="classllvm_1_1CallGraphSCC.html#a6699d964429a39e8f78b348cb2535bf2">end</a>();</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;              (*I)-&gt;dump();</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;          <span class="keywordflow">if</span> (DevirtualizedCall)</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;CGSCCPASSMGR: Refresh devirtualized a call!\n&quot;</span>;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;           <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;CGSCCPASSMGR: SCC Refresh didn&#39;t change call graph.\n&quot;</span>;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;         }</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        );</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  (void)MadeChange;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="keywordflow">return</span> DevirtualizedCall;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;}</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment">/// RunAllPassesOnSCC -  Execute the body of the entire pass manager on the</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment">/// specified SCC.  This keeps track of whether a function pass devirtualizes</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment">/// any calls and returns it in DevirtualizedCall.</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> CGPassManager::RunAllPassesOnSCC(<a class="code" href="classllvm_1_1CallGraphSCC.html">CallGraphSCC</a> &amp;CurSCC, <a class="code" href="classllvm_1_1CallGraph.html">CallGraph</a> &amp;CG,</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                                      <span class="keywordtype">bool</span> &amp;DevirtualizedCall) {</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  </div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <span class="comment">// CallGraphUpToDate - Keep track of whether the callgraph is known to be</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="comment">// up-to-date or not.  The CGSSC pass manager runs two types of passes:</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <span class="comment">// CallGraphSCC Passes and other random function passes.  Because other</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <span class="comment">// random function passes are not CallGraph aware, they may clobber the</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="comment">// call graph by introducing new calls or deleting other ones.  This flag</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <span class="comment">// is set to false when we run a function pass so that we know to clean up</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <span class="comment">// the callgraph when we need to run a CGSCCPass again.</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <span class="keywordtype">bool</span> CallGraphUpToDate = <span class="keyword">true</span>;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <span class="comment">// Run all passes on current SCC.</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> PassNo = 0, e = getNumContainedPasses();</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;       PassNo != e; ++PassNo) {</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <a class="code" href="classllvm_1_1Pass.html">Pass</a> *P = getContainedPass(PassNo);</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    </div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="comment">// If we&#39;re in -debug-pass=Executions mode, construct the SCC node list,</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="comment">// otherwise avoid constructing this string as it is expensive.</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="keywordflow">if</span> (isPassDebuggingExecutionsOrMore()) {</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      std::string Functions;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="preprocessor">  #ifndef NDEBUG</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      <a class="code" href="classllvm_1_1raw__string__ostream.html">raw_string_ostream</a> OS(Functions);</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1CallGraphSCC.html#a5dc6f41d85a83e036bf7f9a25797e2ec">CallGraphSCC::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = CurSCC.<a class="code" href="classllvm_1_1CallGraphSCC.html#aa262134562bc5f5df6c3f536162469b6">begin</a>(), E = CurSCC.<a class="code" href="classllvm_1_1CallGraphSCC.html#a6699d964429a39e8f78b348cb2535bf2">end</a>();</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;           <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != CurSCC.<a class="code" href="classllvm_1_1CallGraphSCC.html#aa262134562bc5f5df6c3f536162469b6">begin</a>()) OS &lt;&lt; <span class="stringliteral">&quot;, &quot;</span>;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        (*I)-&gt;print(OS);</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      }</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      OS.flush();</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="preprocessor">  #endif</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      dumpPassInfo(P, <a class="code" href="namespacellvm.html#a7e7283c48f393f907c761d39cb7f0b51a3f3116bde1268f9e1cd78d9010e4ff26">EXECUTION_MSG</a>, <a class="code" href="namespacellvm.html#a7e7283c48f393f907c761d39cb7f0b51a95cb7399d5b41b1ddd09c72c0ab53d1c">ON_CG_MSG</a>, Functions);</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    }</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    dumpRequiredSet(P);</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    </div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    initializeAnalysisImpl(P);</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    </div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="comment">// Actually run this pass on the current SCC.</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    Changed |= RunPassOnSCC(P, CurSCC, CG,</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                            CallGraphUpToDate, DevirtualizedCall);</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    </div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordflow">if</span> (Changed)</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;      dumpPassInfo(P, <a class="code" href="namespacellvm.html#a7e7283c48f393f907c761d39cb7f0b51a72e482d46273910cd5a3a02b0f65647f">MODIFICATION_MSG</a>, <a class="code" href="namespacellvm.html#a7e7283c48f393f907c761d39cb7f0b51a95cb7399d5b41b1ddd09c72c0ab53d1c">ON_CG_MSG</a>, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    dumpPreservedSet(P);</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    </div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    verifyPreservedAnalysis(P);      </div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    removeNotPreservedAnalysis(P);</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    recordAvailableAnalysis(P);</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    removeDeadPasses(P, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="namespacellvm.html#a7e7283c48f393f907c761d39cb7f0b51a95cb7399d5b41b1ddd09c72c0ab53d1c">ON_CG_MSG</a>);</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  }</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  </div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="comment">// If the callgraph was left out of date (because the last pass run was a</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="comment">// functionpass), refresh it before we move on to the next SCC.</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="keywordflow">if</span> (!CallGraphUpToDate)</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    DevirtualizedCall |= RefreshCallGraph(CurSCC, CG, <span class="keyword">false</span>);</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="keywordflow">return</span> Changed;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;}</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment">/// run - Execute all of the passes scheduled for execution.  Keep track of</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment">/// whether any of the passes modifies the module, and if so, return true.</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> CGPassManager::runOnModule(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;<a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>) {</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <a class="code" href="classllvm_1_1CallGraph.html">CallGraph</a> &amp;CG = getAnalysis&lt;CallGraph&gt;();</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  <span class="keywordtype">bool</span> Changed = doInitialization(CG);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  </div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="comment">// Walk the callgraph in bottom-up SCC order.</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <a class="code" href="classllvm_1_1scc__iterator.html">scc_iterator&lt;CallGraph*&gt;</a> CGI = <a class="code" href="namespacellvm.html#a71882a8257c58a4d9401db39622871a6">scc_begin</a>(&amp;CG);</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <a class="code" href="classllvm_1_1CallGraphSCC.html">CallGraphSCC</a> CurSCC(&amp;CGI);</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <span class="keywordflow">while</span> (!CGI.<a class="code" href="classllvm_1_1scc__iterator.html#acae92cf3467ac18993dee605abc10f7d">isAtEnd</a>()) {</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="comment">// Copy the current SCC and increment past it so that the pass can hack</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="comment">// on the SCC if it wants to without invalidating our iterator.</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    std::vector&lt;CallGraphNode*&gt; &amp;NodeVec = *CGI;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    CurSCC.<a class="code" href="classllvm_1_1CallGraphSCC.html#ad1e30f6cf97158567b964cf6f8e4041a">initialize</a>(&amp;NodeVec[0], &amp;NodeVec[0]+NodeVec.size());</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    ++CGI;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    </div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="comment">// At the top level, we run all the passes in this pass manager on the</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="comment">// functions in this SCC.  However, we support iterative compilation in the</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="comment">// case where a function pass devirtualizes a call to a function.  For</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="comment">// example, it is very common for a function pass (often GVN or instcombine)</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="comment">// to eliminate the addressing that feeds into a call.  With that improved</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="comment">// information, we would like the call to be an inline candidate, infer</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="comment">// mod-ref information etc.</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="comment">// Because of this, we allow iteration up to a specified iteration count.</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="comment">// This only happens in the case of a devirtualized call, so we only burn</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="comment">// compile time in the case that we&#39;re making progress.  We also have a hard</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="comment">// iteration count limit in case there is crazy code.</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="keywordtype">unsigned</span> Iteration = 0;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="keywordtype">bool</span> DevirtualizedCall = <span class="keyword">false</span>;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="keywordflow">do</span> {</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<span class="keywordflow">if</span> (Iteration)</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;              <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  SCCPASSMGR: Re-visiting SCC, iteration #&quot;</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                     &lt;&lt; Iteration &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      DevirtualizedCall = <span class="keyword">false</span>;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;      Changed |= RunAllPassesOnSCC(CurSCC, CG, DevirtualizedCall);</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    } <span class="keywordflow">while</span> (Iteration++ &lt; <a class="code" href="CallGraphSCCPass_8cpp.html#a787c97cc3fe8c5f2ea1a5a09abaab710">MaxIterations</a> &amp;&amp; DevirtualizedCall);</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    </div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordflow">if</span> (DevirtualizedCall)</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  CGSCCPASSMGR: Stopped iteration after &quot;</span> &lt;&lt; Iteration</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot; times, due to -max-cg-scc-iterations\n&quot;</span>);</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    </div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="keywordflow">if</span> (Iteration &gt; MaxSCCIterations)</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      MaxSCCIterations = Iteration;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    </div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  }</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  Changed |= doFinalization(CG);</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  <span class="keywordflow">return</span> Changed;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;}</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment">/// Initialize CG</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> CGPassManager::doInitialization(<a class="code" href="classllvm_1_1CallGraph.html">CallGraph</a> &amp;CG) {</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = getNumContainedPasses(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {  </div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1PMDataManager.html">PMDataManager</a> *PM = getContainedPass(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)-&gt;getAsPMDataManager()) {</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      assert(PM-&gt;<a class="code" href="classllvm_1_1PMDataManager.html#ac118337a439a0601243488da4e48c65d">getPassManagerType</a>() == <a class="code" href="namespacellvm.html#a3948b4d0759f9852502b466d6cfb4ebbaf92a84a9aa3cca1378d1a12fc3664396">PMT_FunctionPassManager</a> &amp;&amp;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;             <span class="stringliteral">&quot;Invalid CGPassManager member&quot;</span>);</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      Changed |= ((<a class="code" href="classllvm_1_1FPPassManager.html">FPPassManager</a>*)PM)-&gt;doInitialization(CG.<a class="code" href="classllvm_1_1CallGraph.html#af0a86454517c5862c3acea0106ed3db3">getModule</a>());</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      Changed |= ((<a class="code" href="classllvm_1_1CallGraphSCCPass.html">CallGraphSCCPass</a>*)getContainedPass(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>))-&gt;doInitialization(CG);</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    }</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  }</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  <span class="keywordflow">return</span> Changed;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;}</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="comment">/// Finalize CG</span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> CGPassManager::doFinalization(<a class="code" href="classllvm_1_1CallGraph.html">CallGraph</a> &amp;CG) {</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = getNumContainedPasses(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {  </div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1PMDataManager.html">PMDataManager</a> *PM = getContainedPass(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)-&gt;getAsPMDataManager()) {</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;      assert(PM-&gt;<a class="code" href="classllvm_1_1PMDataManager.html#ac118337a439a0601243488da4e48c65d">getPassManagerType</a>() == <a class="code" href="namespacellvm.html#a3948b4d0759f9852502b466d6cfb4ebbaf92a84a9aa3cca1378d1a12fc3664396">PMT_FunctionPassManager</a> &amp;&amp;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;             <span class="stringliteral">&quot;Invalid CGPassManager member&quot;</span>);</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      Changed |= ((<a class="code" href="classllvm_1_1FPPassManager.html">FPPassManager</a>*)PM)-&gt;doFinalization(CG.<a class="code" href="classllvm_1_1CallGraph.html#af0a86454517c5862c3acea0106ed3db3">getModule</a>());</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      Changed |= ((<a class="code" href="classllvm_1_1CallGraphSCCPass.html">CallGraphSCCPass</a>*)getContainedPass(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>))-&gt;doFinalization(CG);</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    }</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  }</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  <span class="keywordflow">return</span> Changed;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;}</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment">// CallGraphSCC Implementation</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment">/// ReplaceNode - This informs the SCC and the pass manager that the specified</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment">/// Old node has been deleted, and New is to be used in its place.</span></div><div class="line"><a name="l00512"></a><span class="lineno"><a class="line" href="classllvm_1_1CallGraphSCC.html#a78d3ea30abf1bae03b398ec1b266eeeb">  512</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1CallGraphSCC.html#a78d3ea30abf1bae03b398ec1b266eeeb">CallGraphSCC::ReplaceNode</a>(<a class="code" href="classllvm_1_1CallGraphNode.html">CallGraphNode</a> *Old, <a class="code" href="classllvm_1_1CallGraphNode.html">CallGraphNode</a> *New) {</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  assert(Old != New &amp;&amp; <span class="stringliteral">&quot;Should not replace node with self&quot;</span>);</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; ; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    assert(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != Nodes.size() &amp;&amp; <span class="stringliteral">&quot;Node not in SCC&quot;</span>);</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="keywordflow">if</span> (Nodes[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] != Old) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    Nodes[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = New;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  }</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  </div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <span class="comment">// Update the active scc_iterator so that it doesn&#39;t contain dangling</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="comment">// pointers to the old CallGraphNode.</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <a class="code" href="classllvm_1_1scc__iterator.html">scc_iterator&lt;CallGraph*&gt;</a> *CGI = (<a class="code" href="classllvm_1_1scc__iterator.html">scc_iterator&lt;CallGraph*&gt;</a>*)Context;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  CGI-&gt;<a class="code" href="classllvm_1_1scc__iterator.html#a4a50fc17821010df15d0d8cd278d37d1">ReplaceNode</a>(Old, New);</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;}</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment">// CallGraphSCCPass Implementation</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment">/// Assign pass manager to manage this pass.</span></div><div class="line"><a name="l00533"></a><span class="lineno"><a class="line" href="classllvm_1_1CallGraphSCCPass.html#a91c2a0c0f709759969dcd62134872a4d">  533</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1CallGraphSCCPass.html#a91c2a0c0f709759969dcd62134872a4d">CallGraphSCCPass::assignPassManager</a>(<a class="code" href="classllvm_1_1PMStack.html">PMStack</a> &amp;PMS,</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                                         <a class="code" href="namespacellvm.html#a3948b4d0759f9852502b466d6cfb4ebb">PassManagerType</a> PreferredType) {</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <span class="comment">// Find CGPassManager </span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  <span class="keywordflow">while</span> (!PMS.<a class="code" href="classllvm_1_1PMStack.html#a36bc91be695c8c464d459b1d56091a78">empty</a>() &amp;&amp;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;         PMS.<a class="code" href="classllvm_1_1PMStack.html#a03480da192e893f6def50af0e5164ef8">top</a>()-&gt;<a class="code" href="classllvm_1_1PMDataManager.html#ac118337a439a0601243488da4e48c65d">getPassManagerType</a>() &gt; <a class="code" href="namespacellvm.html#a3948b4d0759f9852502b466d6cfb4ebbacfbf7d6825e58faf3673dc5e5a7a2465">PMT_CallGraphPassManager</a>)</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    PMS.<a class="code" href="classllvm_1_1PMStack.html#a4953e532d6f86ceb1f38ee2503be46a0">pop</a>();</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  assert(!PMS.<a class="code" href="classllvm_1_1PMStack.html#a36bc91be695c8c464d459b1d56091a78">empty</a>() &amp;&amp; <span class="stringliteral">&quot;Unable to handle Call Graph Pass&quot;</span>);</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  CGPassManager *CGP;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  </div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <span class="keywordflow">if</span> (PMS.<a class="code" href="classllvm_1_1PMStack.html#a03480da192e893f6def50af0e5164ef8">top</a>()-&gt;<a class="code" href="classllvm_1_1PMDataManager.html#ac118337a439a0601243488da4e48c65d">getPassManagerType</a>() == <a class="code" href="namespacellvm.html#a3948b4d0759f9852502b466d6cfb4ebbacfbf7d6825e58faf3673dc5e5a7a2465">PMT_CallGraphPassManager</a>)</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    CGP = (CGPassManager*)PMS.<a class="code" href="classllvm_1_1PMStack.html#a03480da192e893f6def50af0e5164ef8">top</a>();</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  <span class="keywordflow">else</span> {</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="comment">// Create new Call Graph SCC Pass Manager if it does not exist. </span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    assert(!PMS.<a class="code" href="classllvm_1_1PMStack.html#a36bc91be695c8c464d459b1d56091a78">empty</a>() &amp;&amp; <span class="stringliteral">&quot;Unable to create Call Graph Pass Manager&quot;</span>);</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <a class="code" href="classllvm_1_1PMDataManager.html">PMDataManager</a> *PMD = PMS.<a class="code" href="classllvm_1_1PMStack.html#a03480da192e893f6def50af0e5164ef8">top</a>();</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="comment">// [1] Create new Call Graph Pass Manager</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    CGP = <span class="keyword">new</span> CGPassManager();</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="comment">// [2] Set up new manager&#39;s top level manager</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <a class="code" href="classllvm_1_1PMTopLevelManager.html">PMTopLevelManager</a> *TPM = PMD-&gt;getTopLevelManager();</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    TPM-&gt;<a class="code" href="classllvm_1_1PMTopLevelManager.html#a022d0f8afbecd48458168e3a419d2048">addIndirectPassManager</a>(CGP);</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="comment">// [3] Assign manager to manage this new manager. This may create</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <span class="comment">// and push new managers into PMS</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <a class="code" href="classllvm_1_1Pass.html">Pass</a> *P = CGP;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    TPM-&gt;<a class="code" href="classllvm_1_1PMTopLevelManager.html#a5fb719fc8062d116b93091d9c9addd43">schedulePass</a>(P);</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="comment">// [4] Push new manager into PMS</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    PMS.<a class="code" href="classllvm_1_1PMStack.html#a9579e452cf1995463c7e29dfeae5cc2a">push</a>(CGP);</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  }</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  CGP-&gt;add(<span class="keyword">this</span>);</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;}</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="comment">/// getAnalysisUsage - For this class, we declare that we require and preserve</span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="comment">/// the call graph.  If the derived class implements this method, it should</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="comment">/// always explicitly call the implementation here.</span></div><div class="line"><a name="l00572"></a><span class="lineno"><a class="line" href="classllvm_1_1CallGraphSCCPass.html#aafcbee837fed187a54b74f201a748160">  572</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1CallGraphSCCPass.html#aafcbee837fed187a54b74f201a748160">CallGraphSCCPass::getAnalysisUsage</a>(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const </span>{</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1CallGraph.html">CallGraph</a>&gt;();</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1CallGraph.html">CallGraph</a>&gt;();</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;}</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment">// PrintCallGraphPass Implementation</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="keyword">namespace </span>{<span class="comment"></span></div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="comment">  /// PrintCallGraphPass - Print a Module corresponding to a call graph.</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="comment"></span>  <span class="keyword">class </span>PrintCallGraphPass : <span class="keyword">public</span> <a class="code" href="classllvm_1_1CallGraphSCCPass.html">CallGraphSCCPass</a> {</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    std::string Banner;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;Out;       <span class="comment">// raw_ostream to print on.</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    </div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  <span class="keyword">public</span>:</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    PrintCallGraphPass(<span class="keyword">const</span> std::string &amp;<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>, <a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;o)</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;      : <a class="code" href="classllvm_1_1CallGraphSCCPass.html">CallGraphSCCPass</a>(ID), Banner(B), Out(o) {}</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    </div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const </span>{</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#af22b06a6a4f9df80454071685a0d6a02">setPreservesAll</a>();</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    }</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    </div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="keywordtype">bool</span> runOnSCC(<a class="code" href="classllvm_1_1CallGraphSCC.html">CallGraphSCC</a> &amp;SCC) {</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;      Out &lt;&lt; Banner;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1CallGraphSCC.html#a5dc6f41d85a83e036bf7f9a25797e2ec">CallGraphSCC::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = SCC.<a class="code" href="classllvm_1_1CallGraphSCC.html#aa262134562bc5f5df6c3f536162469b6">begin</a>(), E = SCC.<a class="code" href="classllvm_1_1CallGraphSCC.html#a6699d964429a39e8f78b348cb2535bf2">end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        (*I)-&gt;getFunction()-&gt;print(Out);</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    }</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  };</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  </div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;} <span class="comment">// end anonymous namespace.</span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">PrintCallGraphPass::ID</a> = 0;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;</div><div class="line"><a name="l00610"></a><span class="lineno"><a class="line" href="classllvm_1_1CallGraphSCCPass.html#a4aaadbe2a927a517283eb9e465d6409d">  610</a></span>&#160;<a class="code" href="classllvm_1_1Pass.html">Pass</a> *<a class="code" href="classllvm_1_1CallGraphSCCPass.html#a4aaadbe2a927a517283eb9e465d6409d">CallGraphSCCPass::createPrinterPass</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;O,</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                                          <span class="keyword">const</span> std::string &amp;Banner)<span class="keyword"> const </span>{</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> PrintCallGraphPass(Banner, O);</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;}</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div><div class="ttc" id="classllvm_1_1Pass_html"><div class="ttname"><a href="classllvm_1_1Pass.html">llvm::Pass</a></div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00082">Pass.h:82</a></div></div>
<div class="ttc" id="SCCIterator_8h_html"><div class="ttname"><a href="SCCIterator_8h.html">SCCIterator.h</a></div></div>
<div class="ttc" id="namespacellvm_html_a3948b4d0759f9852502b466d6cfb4ebb"><div class="ttname"><a href="namespacellvm.html#a3948b4d0759f9852502b466d6cfb4ebb">llvm::PassManagerType</a></div><div class="ttdeci">PassManagerType</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00055">Pass.h:55</a></div></div>
<div class="ttc" id="namespacellvm_html_a3948b4d0759f9852502b466d6cfb4ebbacfbf7d6825e58faf3673dc5e5a7a2465"><div class="ttname"><a href="namespacellvm.html#a3948b4d0759f9852502b466d6cfb4ebbacfbf7d6825e58faf3673dc5e5a7a2465">llvm::PMT_CallGraphPassManager</a></div><div class="ttdoc">CGPassManager. </div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00058">Pass.h:58</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_a884f90190bca4bd354f2d5c91c264028"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">llvm::AnalysisUsage::addPreserved</a></div><div class="ttdeci">AnalysisUsage &amp; addPreserved()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00081">PassAnalysisSupport.h:81</a></div></div>
<div class="ttc" id="namespacellvm_html_ab8e34eca3b0817ef7a127913fbf6d9e4"><div class="ttname"><a href="namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">llvm::errs</a></div><div class="ttdeci">raw_ostream &amp; errs()</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8cpp_source.html#l00664">raw_ostream.cpp:664</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="classllvm_1_1Pass_html_a626b77ef8abdfa9f53c697ad129a6e5a"><div class="ttname"><a href="classllvm_1_1Pass.html#a626b77ef8abdfa9f53c697ad129a6e5a">llvm::Pass::getAsPMDataManager</a></div><div class="ttdeci">virtual PMDataManager * getAsPMDataManager()</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8cpp_source.html#l00095">Pass.cpp:95</a></div></div>
<div class="ttc" id="classllvm_1_1Pass_html_ad2f0576ef7c9c4af40e35001c81f4922"><div class="ttname"><a href="classllvm_1_1Pass.html#ad2f0576ef7c9c4af40e35001c81f4922">llvm::Pass::dumpPassStructure</a></div><div class="ttdeci">virtual void dumpPassStructure(unsigned Offset=0)</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8cpp_source.html#l00050">Pass.cpp:50</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html"><div class="ttname"><a href="classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">The main container class for the LLVM Intermediate Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00112">Module.h:112</a></div></div>
<div class="ttc" id="classllvm_1_1CallGraphSCC_html_a5dc6f41d85a83e036bf7f9a25797e2ec"><div class="ttname"><a href="classllvm_1_1CallGraphSCC.html#a5dc6f41d85a83e036bf7f9a25797e2ec">llvm::CallGraphSCC::iterator</a></div><div class="ttdeci">std::vector&lt; CallGraphNode * &gt;::const_iterator iterator</div><div class="ttdef"><b>Definition:</b> <a href="CallGraphSCCPass_8h_source.html#l00100">CallGraphSCCPass.h:100</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_ae4ca2261b8b901e415fda7feac5051ea"><div class="ttname"><a href="classllvm_1_1Function.html#ae4ca2261b8b901e415fda7feac5051ea">llvm::Function::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00397">Function.h:397</a></div></div>
<div class="ttc" id="IntrinsicInst_8h_html"><div class="ttname"><a href="IntrinsicInst_8h.html">IntrinsicInst.h</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00534">DenseMap.h:534</a></div></div>
<div class="ttc" id="README-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00427">README-SSE.txt:427</a></div></div>
<div class="ttc" id="classllvm_1_1CallGraphSCC_html_a7b08cebb8589f9420b7882534a236a0a"><div class="ttname"><a href="classllvm_1_1CallGraphSCC.html#a7b08cebb8589f9420b7882534a236a0a">llvm::CallGraphSCC::size</a></div><div class="ttdeci">unsigned size() const </div><div class="ttdef"><b>Definition:</b> <a href="CallGraphSCCPass_8h_source.html#l00094">CallGraphSCCPass.h:94</a></div></div>
<div class="ttc" id="CallGraphSCCPass_8cpp_html_a964d491dbca073be5312eb493cb8d9da"><div class="ttname"><a href="CallGraphSCCPass_8cpp.html#a964d491dbca073be5312eb493cb8d9da">STATISTIC</a></div><div class="ttdeci">STATISTIC(MaxSCCIterations,&quot;Maximum CGSCCPassMgr iterations on one SCC&quot;)</div></div>
<div class="ttc" id="Debug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a4b37898a6d26b0d5fcee66548f2621d3"><div class="ttname"><a href="classllvm_1_1Function.html#a4b37898a6d26b0d5fcee66548f2621d3">llvm::Function::isIntrinsic</a></div><div class="ttdeci">bool isIntrinsic() const </div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00156">Function.h:156</a></div></div>
<div class="ttc" id="classllvm_1_1CallGraphSCCPass_html_a91c2a0c0f709759969dcd62134872a4d"><div class="ttname"><a href="classllvm_1_1CallGraphSCCPass.html#a91c2a0c0f709759969dcd62134872a4d">llvm::CallGraphSCCPass::assignPassManager</a></div><div class="ttdeci">virtual void assignPassManager(PMStack &amp;PMS, PassManagerType PMT)</div><div class="ttdoc">Assign pass manager to manager this pass. </div><div class="ttdef"><b>Definition:</b> <a href="CallGraphSCCPass_8cpp_source.html#l00533">CallGraphSCCPass.cpp:533</a></div></div>
<div class="ttc" id="classllvm_1_1raw__ostream_html_a8fdf5cdf041c8aded7e3308c1c3efacc"><div class="ttname"><a href="classllvm_1_1raw__ostream.html#a8fdf5cdf041c8aded7e3308c1c3efacc">llvm::raw_ostream::indent</a></div><div class="ttdeci">raw_ostream &amp; indent(unsigned NumSpaces)</div><div class="ttdoc">indent - Insert &amp;#39;NumSpaces&amp;#39; spaces. </div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8cpp_source.html#l00392">raw_ostream.cpp:392</a></div></div>
<div class="ttc" id="CallGraphSCCPass_8h_html"><div class="ttname"><a href="CallGraphSCCPass_8h.html">CallGraphSCCPass.h</a></div></div>
<div class="ttc" id="classllvm_1_1Pass_html_a6cc9e0287b99155d16b45d73bfbc156b"><div class="ttname"><a href="classllvm_1_1Pass.html#a6cc9e0287b99155d16b45d73bfbc156b">llvm::Pass::getPassName</a></div><div class="ttdeci">virtual const char * getPassName() const </div><div class="ttdef"><b>Definition:</b> <a href="Pass_8cpp_source.html#l00058">Pass.cpp:58</a></div></div>
<div class="ttc" id="classllvm_1_1scc__iterator_html_acae92cf3467ac18993dee605abc10f7d"><div class="ttname"><a href="classllvm_1_1scc__iterator.html#acae92cf3467ac18993dee605abc10f7d">llvm::scc_iterator::isAtEnd</a></div><div class="ttdeci">bool isAtEnd() const </div><div class="ttdef"><b>Definition:</b> <a href="SCCIterator_8h_source.html#l00145">SCCIterator.h:145</a></div></div>
<div class="ttc" id="LLParser_8cpp_html_a33ece1ef8074506a15d7f86eb76dbae6"><div class="ttname"><a href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a></div><div class="ttdeci">F(f)</div></div>
<div class="ttc" id="classllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00070">Function.h:70</a></div></div>
<div class="ttc" id="Statistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="classllvm_1_1CallGraphNode_html"><div class="ttname"><a href="classllvm_1_1CallGraphNode.html">llvm::CallGraphNode</a></div><div class="ttdef"><b>Definition:</b> <a href="CallGraph_8h_source.html#l00173">CallGraph.h:173</a></div></div>
<div class="ttc" id="classllvm_1_1PMDataManager_html_ac118337a439a0601243488da4e48c65d"><div class="ttname"><a href="classllvm_1_1PMDataManager.html#ac118337a439a0601243488da4e48c65d">llvm::PMDataManager::getPassManagerType</a></div><div class="ttdeci">virtual PassManagerType getPassManagerType() const </div><div class="ttdef"><b>Definition:</b> <a href="LegacyPassManagers_8h_source.html#l00350">LegacyPassManagers.h:350</a></div></div>
<div class="ttc" id="classllvm_1_1CallGraph_html_af0a86454517c5862c3acea0106ed3db3"><div class="ttname"><a href="classllvm_1_1CallGraph.html#af0a86454517c5862c3acea0106ed3db3">llvm::CallGraph::getModule</a></div><div class="ttdeci">Module &amp; getModule() const </div><div class="ttdef"><b>Definition:</b> <a href="CallGraph_8h_source.html#l00112">CallGraph.h:112</a></div></div>
<div class="ttc" id="classllvm_1_1CallGraphSCCPass_html_aafcbee837fed187a54b74f201a748160"><div class="ttname"><a href="classllvm_1_1CallGraphSCCPass.html#aafcbee837fed187a54b74f201a748160">llvm::CallGraphSCCPass::getAnalysisUsage</a></div><div class="ttdeci">virtual void getAnalysisUsage(AnalysisUsage &amp;Info) const </div><div class="ttdef"><b>Definition:</b> <a href="CallGraphSCCPass_8cpp_source.html#l00572">CallGraphSCCPass.cpp:572</a></div></div>
<div class="ttc" id="classllvm_1_1PMTopLevelManager_html"><div class="ttname"><a href="classllvm_1_1PMTopLevelManager.html">llvm::PMTopLevelManager</a></div><div class="ttdef"><b>Definition:</b> <a href="LegacyPassManagers_8h_source.html#l00167">LegacyPassManagers.h:167</a></div></div>
<div class="ttc" id="namespacellvm_html_a67d0285e03a80731db23ba77d291942d"><div class="ttname"><a href="namespacellvm.html#a67d0285e03a80731db23ba77d291942d">llvm::getPassTimer</a></div><div class="ttdeci">Timer * getPassTimer(Pass *)</div><div class="ttdoc">If TimingInfo is enabled then start pass timer. </div><div class="ttdef"><b>Definition:</b> <a href="LegacyPassManager_8cpp_source.html#l01771">LegacyPassManager.cpp:1771</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00167">Value.cpp:167</a></div></div>
<div class="ttc" id="classllvm_1_1CallGraphNode_html_ab40c70f303f70e989a10efced4036a57"><div class="ttname"><a href="classllvm_1_1CallGraphNode.html#ab40c70f303f70e989a10efced4036a57">llvm::CallGraphNode::getFunction</a></div><div class="ttdeci">Function * getFunction() const </div><div class="ttdef"><b>Definition:</b> <a href="CallGraph_8h_source.html#l00212">CallGraph.h:212</a></div></div>
<div class="ttc" id="classllvm_1_1TimeRegion_html"><div class="ttname"><a href="classllvm_1_1TimeRegion.html">llvm::TimeRegion</a></div><div class="ttdef"><b>Definition:</b> <a href="Timer_8h_source.html#l00127">Timer.h:127</a></div></div>
<div class="ttc" id="classllvm_1_1CallGraphNode_html_a9fbce2784beecb38d29db7902c1018bc"><div class="ttname"><a href="classllvm_1_1CallGraphNode.html#a9fbce2784beecb38d29db7902c1018bc">llvm::CallGraphNode::addCalledFunction</a></div><div class="ttdeci">void addCalledFunction(CallSite CS, CallGraphNode *M)</div><div class="ttdef"><b>Definition:</b> <a href="CallGraph_8h_source.html#l00262">CallGraph.h:262</a></div></div>
<div class="ttc" id="classllvm_1_1CallGraphNode_html_aa09f788dd735e872f745a5490faced2f"><div class="ttname"><a href="classllvm_1_1CallGraphNode.html#aa09f788dd735e872f745a5490faced2f">llvm::CallGraphNode::iterator</a></div><div class="ttdeci">std::vector&lt; CallRecord &gt;::iterator iterator</div><div class="ttdef"><b>Definition:</b> <a href="CallGraph_8h_source.html#l00208">CallGraph.h:208</a></div></div>
<div class="ttc" id="classllvm_1_1PMTopLevelManager_html_a5fb719fc8062d116b93091d9c9addd43"><div class="ttname"><a href="classllvm_1_1PMTopLevelManager.html#a5fb719fc8062d116b93091d9c9addd43">llvm::PMTopLevelManager::schedulePass</a></div><div class="ttdeci">void schedulePass(Pass *P)</div><div class="ttdef"><b>Definition:</b> <a href="LegacyPassManager_8cpp_source.html#l00595">LegacyPassManager.cpp:595</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_ae5c60fd282ee894c87ea02c3f0fcb6d0"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">llvm::AnalysisUsage::addRequired</a></div><div class="ttdeci">AnalysisUsage &amp; addRequired()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00055">PassAnalysisSupport.h:55</a></div></div>
<div class="ttc" id="classllvm_1_1CallGraphSCC_html_a6699d964429a39e8f78b348cb2535bf2"><div class="ttname"><a href="classllvm_1_1CallGraphSCC.html#a6699d964429a39e8f78b348cb2535bf2">llvm::CallGraphSCC::end</a></div><div class="ttdeci">iterator end() const </div><div class="ttdef"><b>Definition:</b> <a href="CallGraphSCCPass_8h_source.html#l00102">CallGraphSCCPass.h:102</a></div></div>
<div class="ttc" id="classllvm_1_1CallGraphNode_html_a72b2e4575a6de8f1550d057ff1c23ea1"><div class="ttname"><a href="classllvm_1_1CallGraphNode.html#a72b2e4575a6de8f1550d057ff1c23ea1">llvm::CallGraphNode::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="CallGraph_8h_source.html#l00215">CallGraph.h:215</a></div></div>
<div class="ttc" id="classllvm_1_1CallGraphNode_html_ae691d3aeb7e8719ce17477fa0cb42c30"><div class="ttname"><a href="classllvm_1_1CallGraphNode.html#ae691d3aeb7e8719ce17477fa0cb42c30">llvm::CallGraphNode::replaceCallEdge</a></div><div class="ttdeci">void replaceCallEdge(CallSite CS, CallSite NewCS, CallGraphNode *NewNode)</div><div class="ttdef"><b>Definition:</b> <a href="CallGraph_8cpp_source.html#l00249">CallGraph.cpp:249</a></div></div>
<div class="ttc" id="classllvm_1_1CallGraphSCCPass_html"><div class="ttname"><a href="classllvm_1_1CallGraphSCCPass.html">llvm::CallGraphSCCPass</a></div><div class="ttdef"><b>Definition:</b> <a href="CallGraphSCCPass_8h_source.html#l00034">CallGraphSCCPass.h:34</a></div></div>
<div class="ttc" id="classllvm_1_1Pass_html_ac7811985250c75d7e2a244292d615fff"><div class="ttname"><a href="classllvm_1_1Pass.html#ac7811985250c75d7e2a244292d615fff">llvm::Pass::doFinalization</a></div><div class="ttdeci">virtual bool doFinalization(Module &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00115">Pass.h:115</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40ab81f279502bb9ca74e6629cfb62844be"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40ab81f279502bb9ca74e6629cfb62844be">llvm::cl::ReallyHidden</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00110">CommandLine.h:110</a></div></div>
<div class="ttc" id="classllvm_1_1FPPassManager_html"><div class="ttname"><a href="classllvm_1_1FPPassManager.html">llvm::FPPassManager</a></div><div class="ttdef"><b>Definition:</b> <a href="LegacyPassManagers_8h_source.html#l00408">LegacyPassManagers.h:408</a></div></div>
<div class="ttc" id="classllvm_1_1PMStack_html"><div class="ttname"><a href="classllvm_1_1PMStack.html">llvm::PMStack</a></div><div class="ttdef"><b>Definition:</b> <a href="LegacyPassManagers_8h_source.html#l00144">LegacyPassManagers.h:144</a></div></div>
<div class="ttc" id="namespacellvm_1_1CallingConv_html_a4f861731fc6dbfdccc05af5968d98974"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">llvm::CallingConv::ID</a></div><div class="ttdeci">ID</div><div class="ttdoc">LLVM Calling Convention Representation. </div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00026">CallingConv.h:26</a></div></div>
<div class="ttc" id="namespacellvm_html_a71882a8257c58a4d9401db39622871a6"><div class="ttname"><a href="namespacellvm.html#a71882a8257c58a4d9401db39622871a6">llvm::scc_begin</a></div><div class="ttdeci">scc_iterator&lt; T &gt; scc_begin(const T &amp;G)</div><div class="ttdef"><b>Definition:</b> <a href="SCCIterator_8h_source.html#l00199">SCCIterator.h:199</a></div></div>
<div class="ttc" id="Timer_8h_html"><div class="ttname"><a href="Timer_8h.html">Timer.h</a></div></div>
<div class="ttc" id="CallGraph_8h_html"><div class="ttname"><a href="CallGraph_8h.html">CallGraph.h</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a88a5e60837674780a9d812d661897ac5"><div class="ttname"><a href="classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">llvm::Function::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00395">Function.h:395</a></div></div>
<div class="ttc" id="classllvm_1_1Pass_html_ab007d6c51634eb65e4f4f9dab4eb6a8c"><div class="ttname"><a href="classllvm_1_1Pass.html#ab007d6c51634eb65e4f4f9dab4eb6a8c">llvm::Pass::doInitialization</a></div><div class="ttdeci">virtual bool doInitialization(Module &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00110">Pass.h:110</a></div></div>
<div class="ttc" id="CallGraphSCCPass_8cpp_html_a787c97cc3fe8c5f2ea1a5a09abaab710"><div class="ttname"><a href="CallGraphSCCPass_8cpp.html#a787c97cc3fe8c5f2ea1a5a09abaab710">MaxIterations</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; MaxIterations(&quot;max-cg-scc-iterations&quot;, cl::ReallyHidden, cl::init(4))</div></div>
<div class="ttc" id="namespacellvm_html_a7e7283c48f393f907c761d39cb7f0b51a72e482d46273910cd5a3a02b0f65647f"><div class="ttname"><a href="namespacellvm.html#a7e7283c48f393f907c761d39cb7f0b51a72e482d46273910cd5a3a02b0f65647f">llvm::MODIFICATION_MSG</a></div><div class="ttdef"><b>Definition:</b> <a href="LegacyPassManagers_8h_source.html#l00105">LegacyPassManagers.h:105</a></div></div>
<div class="ttc" id="CommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00314">CommandLine.h:314</a></div></div>
<div class="ttc" id="namespacellvm_html_a7e7283c48f393f907c761d39cb7f0b51a95cb7399d5b41b1ddd09c72c0ab53d1c"><div class="ttname"><a href="namespacellvm.html#a7e7283c48f393f907c761d39cb7f0b51a95cb7399d5b41b1ddd09c72c0ab53d1c">llvm::ON_CG_MSG</a></div><div class="ttdef"><b>Definition:</b> <a href="LegacyPassManagers_8h_source.html#l00112">LegacyPassManagers.h:112</a></div></div>
<div class="ttc" id="classllvm_1_1PMStack_html_a4953e532d6f86ceb1f38ee2503be46a0"><div class="ttname"><a href="classllvm_1_1PMStack.html#a4953e532d6f86ceb1f38ee2503be46a0">llvm::PMStack::pop</a></div><div class="ttdeci">void pop()</div><div class="ttdef"><b>Definition:</b> <a href="LegacyPassManager_8cpp_source.html#l01782">LegacyPassManager.cpp:1782</a></div></div>
<div class="ttc" id="classllvm_1_1PMTopLevelManager_html_a022d0f8afbecd48458168e3a419d2048"><div class="ttname"><a href="classllvm_1_1PMTopLevelManager.html#a022d0f8afbecd48458168e3a419d2048">llvm::PMTopLevelManager::addIndirectPassManager</a></div><div class="ttdeci">void addIndirectPassManager(PMDataManager *Manager)</div><div class="ttdef"><b>Definition:</b> <a href="LegacyPassManagers_8h_source.html#l00219">LegacyPassManagers.h:219</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00037">PassAnalysisSupport.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a321e37d79af8b4287f8a1dcf9aff9c01"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00057">DenseMap.h:57</a></div></div>
<div class="ttc" id="namespacellvm_html_a7e7283c48f393f907c761d39cb7f0b51a4772c843cba89638b5f424e728acadee"><div class="ttname"><a href="namespacellvm.html#a7e7283c48f393f907c761d39cb7f0b51a4772c843cba89638b5f424e728acadee">llvm::ON_FUNCTION_MSG</a></div><div class="ttdef"><b>Definition:</b> <a href="LegacyPassManagers_8h_source.html#l00108">LegacyPassManagers.h:108</a></div></div>
<div class="ttc" id="classllvm_1_1scc__iterator_html_a4a50fc17821010df15d0d8cd278d37d1"><div class="ttname"><a href="classllvm_1_1scc__iterator.html#a4a50fc17821010df15d0d8cd278d37d1">llvm::scc_iterator::ReplaceNode</a></div><div class="ttdeci">void ReplaceNode(NodeType *Old, NodeType *New)</div><div class="ttdef"><b>Definition:</b> <a href="SCCIterator_8h_source.html#l00189">SCCIterator.h:189</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a4efb46d4834f6f750ae0649ed89ce44c"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a4efb46d4834f6f750ae0649ed89ce44c">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::count</a></div><div class="ttdeci">bool count(const KeyT &amp;Val) const</div><div class="ttdoc">count - Return true if the specified key is in the map. </div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00103">DenseMap.h:103</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a699a66e504b48fdeff124e82f6c61917"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a699a66e504b48fdeff124e82f6c61917">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const std::pair&lt; KeyT, ValueT &gt; &amp;KV)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00153">DenseMap.h:153</a></div></div>
<div class="ttc" id="LegacyPassManagers_8h_html"><div class="ttname"><a href="LegacyPassManagers_8h.html">LegacyPassManagers.h</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1PMStack_html_a36bc91be695c8c464d459b1d56091a78"><div class="ttname"><a href="classllvm_1_1PMStack.html#a36bc91be695c8c464d459b1d56091a78">llvm::PMStack::empty</a></div><div class="ttdeci">bool empty() const </div><div class="ttdef"><b>Definition:</b> <a href="LegacyPassManagers_8h_source.html#l00153">LegacyPassManagers.h:153</a></div></div>
<div class="ttc" id="namespacellvm_html_a3948b4d0759f9852502b466d6cfb4ebbaf92a84a9aa3cca1378d1a12fc3664396"><div class="ttname"><a href="namespacellvm.html#a3948b4d0759f9852502b466d6cfb4ebbaf92a84a9aa3cca1378d1a12fc3664396">llvm::PMT_FunctionPassManager</a></div><div class="ttdoc">FPPassManager. </div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00059">Pass.h:59</a></div></div>
<div class="ttc" id="classllvm_1_1CallGraphSCCPass_html_a4aaadbe2a927a517283eb9e465d6409d"><div class="ttname"><a href="classllvm_1_1CallGraphSCCPass.html#a4aaadbe2a927a517283eb9e465d6409d">llvm::CallGraphSCCPass::createPrinterPass</a></div><div class="ttdeci">Pass * createPrinterPass(raw_ostream &amp;O, const std::string &amp;Banner) const </div><div class="ttdef"><b>Definition:</b> <a href="CallGraphSCCPass_8cpp_source.html#l00610">CallGraphSCCPass.cpp:610</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="namespacellvm_html_a7e7283c48f393f907c761d39cb7f0b51a3f3116bde1268f9e1cd78d9010e4ff26"><div class="ttname"><a href="namespacellvm.html#a7e7283c48f393f907c761d39cb7f0b51a3f3116bde1268f9e1cd78d9010e4ff26">llvm::EXECUTION_MSG</a></div><div class="ttdef"><b>Definition:</b> <a href="LegacyPassManagers_8h_source.html#l00104">LegacyPassManagers.h:104</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a269c7b8adcd29645a4f901196fc08806"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a269c7b8adcd29645a4f901196fc08806">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::erase</a></div><div class="ttdeci">bool erase(const KeyT &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00190">DenseMap.h:190</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00101">Debug.cpp:101</a></div></div>
<div class="ttc" id="classllvm_1_1PMStack_html_a03480da192e893f6def50af0e5164ef8"><div class="ttname"><a href="classllvm_1_1PMStack.html#a03480da192e893f6def50af0e5164ef8">llvm::PMStack::top</a></div><div class="ttdeci">PMDataManager * top() const </div><div class="ttdef"><b>Definition:</b> <a href="LegacyPassManagers_8h_source.html#l00151">LegacyPassManagers.h:151</a></div></div>
<div class="ttc" id="CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2README_8txt_source.html#l00036">CodeGen/README.txt:36</a></div></div>
<div class="ttc" id="classllvm_1_1CallGraphSCC_html_aa262134562bc5f5df6c3f536162469b6"><div class="ttname"><a href="classllvm_1_1CallGraphSCC.html#aa262134562bc5f5df6c3f536162469b6">llvm::CallGraphSCC::begin</a></div><div class="ttdeci">iterator begin() const </div><div class="ttdef"><b>Definition:</b> <a href="CallGraphSCCPass_8h_source.html#l00101">CallGraphSCCPass.h:101</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_af22b06a6a4f9df80454071685a0d6a02"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#af22b06a6a4f9df80454071685a0d6a02">llvm::AnalysisUsage::setPreservesAll</a></div><div class="ttdeci">void setPreservesAll()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00094">PassAnalysisSupport.h:94</a></div></div>
<div class="ttc" id="Function_8h_html"><div class="ttname"><a href="Function_8h.html">Function.h</a></div></div>
<div class="ttc" id="classllvm_1_1CallGraphNode_html_ae4b8c37522c8e190c125cfd9b578bff0"><div class="ttname"><a href="classllvm_1_1CallGraphNode.html#ae4b8c37522c8e190c125cfd9b578bff0">llvm::CallGraphNode::removeCallEdge</a></div><div class="ttdeci">void removeCallEdge(iterator I)</div><div class="ttdef"><b>Definition:</b> <a href="CallGraph_8h_source.html#l00270">CallGraph.h:270</a></div></div>
<div class="ttc" id="classllvm_1_1CallGraph_html"><div class="ttname"><a href="classllvm_1_1CallGraph.html">llvm::CallGraph</a></div><div class="ttdef"><b>Definition:</b> <a href="CallGraph_8h_source.html#l00072">CallGraph.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l01149">CommandLine.h:1149</a></div></div>
<div class="ttc" id="classllvm_1_1CallGraphSCC_html_a78d3ea30abf1bae03b398ec1b266eeeb"><div class="ttname"><a href="classllvm_1_1CallGraphSCC.html#a78d3ea30abf1bae03b398ec1b266eeeb">llvm::CallGraphSCC::ReplaceNode</a></div><div class="ttdeci">void ReplaceNode(CallGraphNode *Old, CallGraphNode *New)</div><div class="ttdef"><b>Definition:</b> <a href="CallGraphSCCPass_8cpp_source.html#l00512">CallGraphSCCPass.cpp:512</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_a4640d98233102674ddb6d6efaf2b7f97"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a4640d98233102674ddb6d6efaf2b7f97">llvm::GlobalValue::isDeclaration</a></div><div class="ttdeci">bool isDeclaration() const </div><div class="ttdef"><b>Definition:</b> <a href="Globals_8cpp_source.html#l00066">Globals.cpp:66</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="regcomp_8c_html_a0240ac851181b84ac374872dc5434ee4"><div class="ttname"><a href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div><div class="ttdeci">#define N</div></div>
<div class="ttc" id="classllvm_1_1ModulePass_html"><div class="ttname"><a href="classllvm_1_1ModulePass.html">llvm::ModulePass</a></div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00235">Pass.h:235</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_acdd674781be3766718b3a0b38540a4bc"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#acdd674781be3766718b3a0b38540a4bc">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00067">DenseMap.h:67</a></div></div>
<div class="ttc" id="classllvm_1_1PMStack_html_a9579e452cf1995463c7e29dfeae5cc2a"><div class="ttname"><a href="classllvm_1_1PMStack.html#a9579e452cf1995463c7e29dfeae5cc2a">llvm::PMStack::push</a></div><div class="ttdeci">void push(PMDataManager *PM)</div><div class="ttdef"><b>Definition:</b> <a href="LegacyPassManager_8cpp_source.html#l01791">LegacyPassManager.cpp:1791</a></div></div>
<div class="ttc" id="classllvm_1_1PMDataManager_html"><div class="ttname"><a href="classllvm_1_1PMDataManager.html">llvm::PMDataManager</a></div><div class="ttdef"><b>Definition:</b> <a href="LegacyPassManagers_8h_source.html#l00263">LegacyPassManagers.h:263</a></div></div>
<div class="ttc" id="classllvm_1_1CallGraphSCCPass_html_a5ab09f122afda68d4c0d86e8e5877465"><div class="ttname"><a href="classllvm_1_1CallGraphSCCPass.html#a5ab09f122afda68d4c0d86e8e5877465">llvm::CallGraphSCCPass::runOnSCC</a></div><div class="ttdeci">virtual bool runOnSCC(CallGraphSCC &amp;SCC)=0</div></div>
<div class="ttc" id="classllvm_1_1raw__string__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__string__ostream.html">llvm::raw_string_ostream</a></div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00426">raw_ostream.h:426</a></div></div>
<div class="ttc" id="classllvm_1_1CallGraphSCC_html"><div class="ttname"><a href="classllvm_1_1CallGraphSCC.html">llvm::CallGraphSCC</a></div><div class="ttdoc">CallGraphSCC - This is a single SCC that a CallGraphSCCPass is run on. </div><div class="ttdef"><b>Definition:</b> <a href="CallGraphSCCPass_8h_source.html#l00083">CallGraphSCCPass.h:83</a></div></div>
<div class="ttc" id="classllvm_1_1CallGraph_html_a91eed9199c5b0e56a1fc1f3487431c9c"><div class="ttname"><a href="classllvm_1_1CallGraph.html#a91eed9199c5b0e56a1fc1f3487431c9c">llvm::CallGraph::getOrInsertFunction</a></div><div class="ttdeci">CallGraphNode * getOrInsertFunction(const Function *F)</div><div class="ttdef"><b>Definition:</b> <a href="CallGraph_8cpp_source.html#l00173">CallGraph.cpp:173</a></div></div>
<div class="ttc" id="Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="Target_2X86_2README_8txt_source.html#l00297">Target/X86/README.txt:297</a></div></div>
<div class="ttc" id="classllvm_1_1raw__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__ostream.html">llvm::raw_ostream</a></div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00031">raw_ostream.h:31</a></div></div>
<div class="ttc" id="Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00097">Debug.h:97</a></div></div>
<div class="ttc" id="classllvm_1_1CallGraphNode_html_a4f29edc585030005e8215897bb1e792f"><div class="ttname"><a href="classllvm_1_1CallGraphNode.html#a4f29edc585030005e8215897bb1e792f">llvm::CallGraphNode::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="CallGraph_8h_source.html#l00214">CallGraph.h:214</a></div></div>
<div class="ttc" id="raw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="classllvm_1_1CallSite_html"><div class="ttname"><a href="classllvm_1_1CallSite.html">llvm::CallSite</a></div><div class="ttdef"><b>Definition:</b> <a href="CallSite_8h_source.html#l00295">CallSite.h:295</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a21cf94357e53cd1069aba475266fdb63"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::find</a></div><div class="ttdeci">iterator find(const KeyT &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00108">DenseMap.h:108</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a90cca76dd78688687e0d697679dbc799"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional ldr LCPI1_0 ldr ldr tst movne lsr ldr LCPI1_1 and r0 bx lr it saves an instruction and a register It might be profitable to cse MOVi16 if there are lots of bit immediates with the same bottom half Robert Muth started working on an alternate jump table implementation that does not put the tables in line in the text This is more like the llvm default jump table implementation This might be useful sometime Several revisions of patches are on the mailing beginning while CMP sets them like a subtract Therefore to be able to use CMN for comparisons other than the Z we ll need additional logic to reverse the conditionals associated with the comparison Perhaps a pseudo instruction for the with a post codegen pass to clean up and handle the condition codes See PR5694 for testcase Given the following on int B</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00592">Target/ARM/README.txt:592</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a6467bd6bb128c8b69a478548fc17351c"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a6467bd6bb128c8b69a478548fc17351c">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00078">DenseMap.h:78</a></div></div>
<div class="ttc" id="classllvm_1_1CallGraphSCC_html_ad1e30f6cf97158567b964cf6f8e4041a"><div class="ttname"><a href="classllvm_1_1CallGraphSCC.html#ad1e30f6cf97158567b964cf6f8e4041a">llvm::CallGraphSCC::initialize</a></div><div class="ttdeci">void initialize(CallGraphNode *const *I, CallGraphNode *const *E)</div><div class="ttdef"><b>Definition:</b> <a href="CallGraphSCCPass_8h_source.html#l00089">CallGraphSCCPass.h:89</a></div></div>
<div class="ttc" id="classllvm_1_1scc__iterator_html"><div class="ttname"><a href="classllvm_1_1scc__iterator.html">llvm::scc_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="SCCIterator_8h_source.html#l00036">SCCIterator.h:36</a></div></div>
<div class="ttc" id="classllvm_1_1CallGraph_html_a5e6e9ef062dbff6d7a2914121159225e"><div class="ttname"><a href="classllvm_1_1CallGraph.html#a5e6e9ef062dbff6d7a2914121159225e">llvm::CallGraph::getCallsExternalNode</a></div><div class="ttdeci">CallGraphNode * getCallsExternalNode() const </div><div class="ttdef"><b>Definition:</b> <a href="CallGraph_8h_source.html#l00135">CallGraph.h:135</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 22:58:17 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
