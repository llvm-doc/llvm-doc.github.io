<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: InstCombineLoadStoreAlloca.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('InstCombineLoadStoreAlloca_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">InstCombineLoadStoreAlloca.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="InstCombineLoadStoreAlloca_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- InstCombineLoadStoreAlloca.cpp -------------------------------------===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// This file implements the visit functions for load, store and alloca.</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstCombine_8h.html">InstCombine.h</a>&quot;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Loads_8h.html">llvm/Analysis/Loads.h</a>&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DataLayout_8h.html">llvm/IR/DataLayout.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IntrinsicInst_8h.html">llvm/IR/IntrinsicInst.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlockUtils_8h.html">llvm/Transforms/Utils/BasicBlockUtils.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Local_8h.html">llvm/Transforms/Utils/Local.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a625d5d622944254b7dbb70dd891e93c2">STATISTIC</a>(NumDeadStore,    <span class="stringliteral">&quot;Number of dead stores eliminated&quot;</span>);</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a625d5d622944254b7dbb70dd891e93c2">STATISTIC</a>(NumGlobalCopies, <span class="stringliteral">&quot;Number of allocas copied from constant global&quot;</span>);</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">/// pointsToConstantGlobal - Return true if V (possibly indirectly) points to</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">/// some part of a constant global variable.  This intentionally only accepts</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">/// constant expressions because we can&#39;t rewrite arbitrary instructions.</span></div><div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="InstCombineLoadStoreAlloca_8cpp.html#a4d6752ff1d6270eefda9482e7694527c">   29</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a4d6752ff1d6270eefda9482e7694527c">pointsToConstantGlobal</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV = dyn_cast&lt;GlobalVariable&gt;(V))</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <span class="keywordflow">return</span> GV-&gt;isConstant();</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE = dyn_cast&lt;ConstantExpr&gt;(V))</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <span class="keywordflow">if</span> (CE-&gt;getOpcode() == Instruction::BitCast ||</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;        CE-&gt;getOpcode() == Instruction::GetElementPtr)</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a4d6752ff1d6270eefda9482e7694527c">pointsToConstantGlobal</a>(CE-&gt;getOperand(0));</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;}</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">/// isOnlyCopiedFromConstantGlobal - Recursively walk the uses of a (derived)</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">/// pointer to an alloca.  Ignore any reads of the pointer, return false if we</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">/// see any stores or other unknown uses.  If we see pointer arithmetic, keep</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">/// track of whether it moves the pointer (with IsOffset) but otherwise traverse</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">/// the uses.  If we see a memcpy/memmove that targets an unoffseted pointer to</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">/// the alloca, and if the source pointer is a pointer to a constant global, we</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">/// can optimize this.</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span></div><div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="InstCombineLoadStoreAlloca_8cpp.html#a4f9d43ded556369337141920c09f2294">   47</a></span>&#160;<a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a4f9d43ded556369337141920c09f2294">isOnlyCopiedFromConstantGlobal</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <a class="code" href="classllvm_1_1MemTransferInst.html">MemTransferInst</a> *&amp;TheCopy,</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                               <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Instruction *&gt;</a> &amp;ToDelete,</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;                               <span class="keywordtype">bool</span> IsOffset = <span class="keyword">false</span>) {</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <span class="comment">// We track lifetime intrinsics as we encounter them.  If we decide to go</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="comment">// ahead and replace the value with the global, this lets the caller quickly</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="comment">// eliminate the markers.</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::use_iterator</a> UI = V-&gt;<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>(), E = V-&gt;<a class="code" href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">use_end</a>(); UI!=E; ++UI) {</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <a class="code" href="classllvm_1_1User.html">User</a> *U = cast&lt;Instruction&gt;(*UI);</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI = dyn_cast&lt;LoadInst&gt;(U)) {</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;      <span class="comment">// Ignore non-volatile loads, they are always ok.</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;      <span class="keywordflow">if</span> (!LI-&gt;isSimple()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    }</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a> *BCI = dyn_cast&lt;BitCastInst&gt;(U)) {</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;      <span class="comment">// If uses of the bitcast are ok, we are ok.</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a4f9d43ded556369337141920c09f2294">isOnlyCopiedFromConstantGlobal</a>(BCI, TheCopy, ToDelete, IsOffset))</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    }</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *GEP = dyn_cast&lt;GetElementPtrInst&gt;(U)) {</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;      <span class="comment">// If the GEP has all zero indices, it doesn&#39;t offset the pointer.  If it</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;      <span class="comment">// doesn&#39;t, it does.</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a4f9d43ded556369337141920c09f2294">isOnlyCopiedFromConstantGlobal</a>(</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;              GEP, TheCopy, ToDelete, IsOffset || !GEP-&gt;hasAllZeroIndices()))</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    }</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CallSite.html">CallSite</a> CS = U) {</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;      <span class="comment">// If this is the function being called then we treat it like a load and</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;      <span class="comment">// ignore it.</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      <span class="keywordflow">if</span> (CS.isCallee(UI))</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;      <span class="comment">// If this is a readonly/readnone call site, then we know it is just a</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;      <span class="comment">// load (but one that potentially returns the value itself), so we can</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;      <span class="comment">// ignore it if we know that the value isn&#39;t captured.</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      <span class="keywordtype">unsigned</span> ArgNo = CS.getArgumentNo(UI);</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      <span class="keywordflow">if</span> (CS.onlyReadsMemory() &amp;&amp;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;          (CS.getInstruction()-&gt;use_empty() || CS.doesNotCapture(ArgNo)))</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      <span class="comment">// If this is being passed as a byval argument, the caller is making a</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      <span class="comment">// copy, so it is only a read of the alloca.</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      <span class="keywordflow">if</span> (CS.isByValArgument(ArgNo))</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    }</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="comment">// Lifetime intrinsics can be handled by the caller.</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *II = dyn_cast&lt;IntrinsicInst&gt;(U)) {</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      <span class="keywordflow">if</span> (II-&gt;getIntrinsicID() == <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ae365354e47542c51f9bd46e329e3323e">Intrinsic::lifetime_start</a> ||</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;          II-&gt;getIntrinsicID() == <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aa332b90dd5e4ebf4bbbcc0964220d373">Intrinsic::lifetime_end</a>) {</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        assert(II-&gt;use_empty() &amp;&amp; <span class="stringliteral">&quot;Lifetime markers have no result to use!&quot;</span>);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        ToDelete.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(II);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      }</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    }</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="comment">// If this is isn&#39;t our memcpy/memmove, reject it as something we can&#39;t</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="comment">// handle.</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="classllvm_1_1MemTransferInst.html">MemTransferInst</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a> = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1MemTransferInst.html">MemTransferInst</a>&gt;(U);</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordflow">if</span> (MI == 0)</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="comment">// If the transfer is using the alloca as a source of the transfer, then</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="comment">// ignore it since it is a load (unless the transfer is volatile).</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordflow">if</span> (UI.getOperandNo() == 1) {</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;      <span class="keywordflow">if</span> (MI-&gt;<a class="code" href="classllvm_1_1MemIntrinsic.html#a9558faebdbb62c072aed98e33604889d">isVolatile</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    }</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="comment">// If we already have seen a copy, reject the second one.</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordflow">if</span> (TheCopy) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="comment">// If the pointer has been offset from the start of the alloca, we can&#39;t</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="comment">// safely handle this.</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordflow">if</span> (IsOffset) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="comment">// If the memintrinsic isn&#39;t using the alloca as the dest, reject it.</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordflow">if</span> (UI.getOperandNo() != 0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="comment">// If the source of the memcpy/move is not a constant global, reject it.</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a4d6752ff1d6270eefda9482e7694527c">pointsToConstantGlobal</a>(MI-&gt;<a class="code" href="classllvm_1_1MemTransferInst.html#a1d23e59237a8e4a61f4af0deb7320104">getSource</a>()))</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="comment">// Otherwise, the transform is safe.  Remember the copy instruction.</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    TheCopy = <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  }</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;}</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">/// isOnlyCopiedFromConstantGlobal - Return true if the specified alloca is only</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">/// modified by a copy from a constant global.  If we can prove this, we can</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">/// replace any uses of the alloca with uses of the global directly.</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1MemTransferInst.html">MemTransferInst</a> *</div><div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="InstCombineLoadStoreAlloca_8cpp.html#a2a19298a0f0e2e2d887daf95114fee50">  145</a></span>&#160;<a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a4f9d43ded556369337141920c09f2294">isOnlyCopiedFromConstantGlobal</a>(<a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *AI,</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                               <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Instruction *&gt;</a> &amp;ToDelete) {</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <a class="code" href="classllvm_1_1MemTransferInst.html">MemTransferInst</a> *TheCopy = 0;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a4f9d43ded556369337141920c09f2294">isOnlyCopiedFromConstantGlobal</a>(AI, TheCopy, ToDelete))</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">return</span> TheCopy;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;}</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#a7ce7bd9b2ab04aed2abf9be5b8c74d15">  153</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombiner.html#a7ce7bd9b2ab04aed2abf9be5b8c74d15">InstCombiner::visitAllocaInst</a>(<a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> &amp;AI) {</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="comment">// Ensure that the alloca array size argument has type intptr_t, so that</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="comment">// any casting is exposed early.</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <span class="keywordflow">if</span> (TD) {</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *IntPtrTy = TD-&gt;<a class="code" href="classllvm_1_1DataLayout.html#ae84bb2408dfffa4e8b5fe2ce0714a3bd">getIntPtrType</a>(AI.<a class="code" href="classllvm_1_1AllocaInst.html#a597c918a615f26a0cea7adb84f06fc3f">getType</a>());</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">if</span> (AI.<a class="code" href="classllvm_1_1AllocaInst.html#a642f52c0f081ad0de10258c1d8d67b23">getArraySize</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() != IntPtrTy) {</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">Builder</a>-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#afdd8a08bfcbd94f60d166a71a3e79ff3">CreateIntCast</a>(AI.<a class="code" href="classllvm_1_1AllocaInst.html#a642f52c0f081ad0de10258c1d8d67b23">getArraySize</a>(),</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                                        IntPtrTy, <span class="keyword">false</span>);</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      AI.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(0, V);</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      <span class="keywordflow">return</span> &amp;AI;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    }</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  }</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="comment">// Convert: alloca Ty, C - where C is a constant != 1 into: alloca [C x Ty], 1</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="keywordflow">if</span> (AI.<a class="code" href="classllvm_1_1AllocaInst.html#a066eba0d0eb9d9655c9b580a2a279b0a">isArrayAllocation</a>()) {  <span class="comment">// Check C != 1</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;ConstantInt&gt;(AI.<a class="code" href="classllvm_1_1AllocaInst.html#a642f52c0f081ad0de10258c1d8d67b23">getArraySize</a>())) {</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *NewTy =</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <a class="code" href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">ArrayType::get</a>(AI.<a class="code" href="classllvm_1_1AllocaInst.html#a214c60dbb4f1ed467e5a3420db6eefd6">getAllocatedType</a>(), <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getZExtValue());</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *New = <a class="code" href="classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">Builder</a>-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#a2877bfb208e8e523e5d0eda3488c9ade">CreateAlloca</a>(NewTy, 0, AI.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>());</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      New-&gt;<a class="code" href="classllvm_1_1AllocaInst.html#a42defc71631bc55fcb48421784b276c9">setAlignment</a>(AI.<a class="code" href="classllvm_1_1AllocaInst.html#ad441932c20e5b9ba36c8c72a6c7f5ec3">getAlignment</a>());</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      <span class="comment">// Scan to the end of the allocation instructions, to skip over a block of</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      <span class="comment">// allocas if possible...also skip interleaved debug info</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      <span class="comment">//</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> It = New;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      <span class="keywordflow">while</span> (isa&lt;AllocaInst&gt;(*It) || isa&lt;DbgInfoIntrinsic&gt;(*It)) ++It;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      <span class="comment">// Now that I is pointing to the first non-allocation-inst in the block,</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      <span class="comment">// insert our getelementptr instruction...</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;      <span class="comment">//</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *IdxTy = TD</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                  ? TD-&gt;<a class="code" href="classllvm_1_1DataLayout.html#ae84bb2408dfffa4e8b5fe2ce0714a3bd">getIntPtrType</a>(AI.<a class="code" href="classllvm_1_1AllocaInst.html#a597c918a615f26a0cea7adb84f06fc3f">getType</a>())</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                  : <a class="code" href="classllvm_1_1Type.html#a05186fa23e4d11b9855a9599ba87a4b7">Type::getInt64Ty</a>(AI.<a class="code" href="classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>());</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NullIdx = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(IdxTy);</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Idx[2] = { NullIdx, NullIdx };</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *GEP =</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <a class="code" href="classllvm_1_1GetElementPtrInst.html#a3e10b4db1ded36654416d3aed2bc56ba">GetElementPtrInst::CreateInBounds</a>(New, Idx, New-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() + <span class="stringliteral">&quot;.sub&quot;</span>);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      <a class="code" href="classllvm_1_1InstCombiner.html#af1dcd6c00214bd9c8c8b3c9f9aedcc04">InsertNewInstBefore</a>(GEP, *It);</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      <span class="comment">// Now make everything use the getelementptr instead of the original</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      <span class="comment">// allocation.</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InstCombiner.html#af7c1b579548e5b90a8db22d2f26a4afc">ReplaceInstUsesWith</a>(AI, GEP);</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(AI.<a class="code" href="classllvm_1_1AllocaInst.html#a642f52c0f081ad0de10258c1d8d67b23">getArraySize</a>())) {</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InstCombiner.html#af7c1b579548e5b90a8db22d2f26a4afc">ReplaceInstUsesWith</a>(AI, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(AI.<a class="code" href="classllvm_1_1AllocaInst.html#a597c918a615f26a0cea7adb84f06fc3f">getType</a>()));</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    }</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  }</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="keywordflow">if</span> (TD &amp;&amp; AI.<a class="code" href="classllvm_1_1AllocaInst.html#a214c60dbb4f1ed467e5a3420db6eefd6">getAllocatedType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9dc5111b1a9b1d5c4652d50f74fe850b">isSized</a>()) {</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="comment">// If the alignment is 0 (unspecified), assign it the preferred alignment.</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">if</span> (AI.<a class="code" href="classllvm_1_1AllocaInst.html#ad441932c20e5b9ba36c8c72a6c7f5ec3">getAlignment</a>() == 0)</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      AI.<a class="code" href="classllvm_1_1AllocaInst.html#a42defc71631bc55fcb48421784b276c9">setAlignment</a>(TD-&gt;<a class="code" href="classllvm_1_1DataLayout.html#adfb7610cbc23430a7d4077a3cf9c22d3">getPrefTypeAlignment</a>(AI.<a class="code" href="classllvm_1_1AllocaInst.html#a214c60dbb4f1ed467e5a3420db6eefd6">getAllocatedType</a>()));</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="comment">// Move all alloca&#39;s of zero byte objects to the entry block and merge them</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="comment">// together.  Note that we only do this for alloca&#39;s, because malloc should</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="comment">// allocate and return a unique pointer, even for a zero byte allocation.</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">if</span> (TD-&gt;<a class="code" href="classllvm_1_1DataLayout.html#a1d6fcc02e91ba24510aba42660c90e29">getTypeAllocSize</a>(AI.<a class="code" href="classllvm_1_1AllocaInst.html#a214c60dbb4f1ed467e5a3420db6eefd6">getAllocatedType</a>()) == 0) {</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      <span class="comment">// For a zero sized alloca there is no point in doing an array allocation.</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      <span class="comment">// This is helpful if the array size is a complicated expression not used</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      <span class="comment">// elsewhere.</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      <span class="keywordflow">if</span> (AI.<a class="code" href="classllvm_1_1AllocaInst.html#a066eba0d0eb9d9655c9b580a2a279b0a">isArrayAllocation</a>()) {</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        AI.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(0, <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(AI.<a class="code" href="classllvm_1_1AllocaInst.html#a642f52c0f081ad0de10258c1d8d67b23">getArraySize</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), 1));</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <span class="keywordflow">return</span> &amp;AI;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      }</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      <span class="comment">// Get the first instruction in the entry block.</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;EntryBlock = AI.<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#a30f2c362631e3728d2f47a8203071ade">getEntryBlock</a>();</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *FirstInst = EntryBlock.<a class="code" href="classllvm_1_1BasicBlock.html#a225cbda41f4c27fbb522833e31cb18f9">getFirstNonPHIOrDbg</a>();</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      <span class="keywordflow">if</span> (FirstInst != &amp;AI) {</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <span class="comment">// If the entry block doesn&#39;t start with a zero-size alloca then move</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <span class="comment">// this one to the start of the entry block.  There is no problem with</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <span class="comment">// dominance as the array size was forced to a constant earlier already.</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *EntryAI = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a>&gt;(FirstInst);</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <span class="keywordflow">if</span> (!EntryAI || !EntryAI-&gt;<a class="code" href="classllvm_1_1AllocaInst.html#a214c60dbb4f1ed467e5a3420db6eefd6">getAllocatedType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9dc5111b1a9b1d5c4652d50f74fe850b">isSized</a>() ||</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            TD-&gt;<a class="code" href="classllvm_1_1DataLayout.html#a1d6fcc02e91ba24510aba42660c90e29">getTypeAllocSize</a>(EntryAI-&gt;<a class="code" href="classllvm_1_1AllocaInst.html#a214c60dbb4f1ed467e5a3420db6eefd6">getAllocatedType</a>()) != 0) {</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;          AI.<a class="code" href="classllvm_1_1Instruction.html#af67d1f3a518964d80a109bb3d9d5cf1e">moveBefore</a>(FirstInst);</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;          <span class="keywordflow">return</span> &amp;AI;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        }</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <span class="comment">// If the alignment of the entry block alloca is 0 (unspecified),</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <span class="comment">// assign it the preferred alignment.</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="keywordflow">if</span> (EntryAI-&gt;<a class="code" href="classllvm_1_1AllocaInst.html#ad441932c20e5b9ba36c8c72a6c7f5ec3">getAlignment</a>() == 0)</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;          EntryAI-&gt;<a class="code" href="classllvm_1_1AllocaInst.html#a42defc71631bc55fcb48421784b276c9">setAlignment</a>(</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            TD-&gt;<a class="code" href="classllvm_1_1DataLayout.html#adfb7610cbc23430a7d4077a3cf9c22d3">getPrefTypeAlignment</a>(EntryAI-&gt;<a class="code" href="classllvm_1_1AllocaInst.html#a214c60dbb4f1ed467e5a3420db6eefd6">getAllocatedType</a>()));</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="comment">// Replace this zero-sized alloca with the one at the start of the entry</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <span class="comment">// block after ensuring that the address will be aligned enough for both</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <span class="comment">// types.</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <span class="keywordtype">unsigned</span> MaxAlign = std::max(EntryAI-&gt;<a class="code" href="classllvm_1_1AllocaInst.html#ad441932c20e5b9ba36c8c72a6c7f5ec3">getAlignment</a>(),</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                                     AI.<a class="code" href="classllvm_1_1AllocaInst.html#ad441932c20e5b9ba36c8c72a6c7f5ec3">getAlignment</a>());</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        EntryAI-&gt;<a class="code" href="classllvm_1_1AllocaInst.html#a42defc71631bc55fcb48421784b276c9">setAlignment</a>(MaxAlign);</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <span class="keywordflow">if</span> (AI.<a class="code" href="classllvm_1_1AllocaInst.html#a597c918a615f26a0cea7adb84f06fc3f">getType</a>() != EntryAI-&gt;<a class="code" href="classllvm_1_1AllocaInst.html#a597c918a615f26a0cea7adb84f06fc3f">getType</a>())</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a>(EntryAI, AI.<a class="code" href="classllvm_1_1AllocaInst.html#a597c918a615f26a0cea7adb84f06fc3f">getType</a>());</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InstCombiner.html#af7c1b579548e5b90a8db22d2f26a4afc">ReplaceInstUsesWith</a>(AI, EntryAI);</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      }</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    }</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  }</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="keywordflow">if</span> (AI.<a class="code" href="classllvm_1_1AllocaInst.html#ad441932c20e5b9ba36c8c72a6c7f5ec3">getAlignment</a>()) {</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="comment">// Check to see if this allocation is only modified by a memcpy/memmove from</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="comment">// a constant global whose alignment is equal to or exceeds that of the</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="comment">// allocation.  If this is the case, we can change all users to use</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="comment">// the constant global instead.  This is commonly produced by the CFE by</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="comment">// constructs like &quot;void foo() { int A[] = {1,2,3,4,5,6,7,8,9...}; }&quot; if &#39;A&#39;</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="comment">// is only subsequently read.</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 4&gt;</a> ToDelete;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemTransferInst.html">MemTransferInst</a> *Copy = <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a4f9d43ded556369337141920c09f2294">isOnlyCopiedFromConstantGlobal</a>(&amp;AI, ToDelete)) {</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      <span class="keywordtype">unsigned</span> SourceAlign = <a class="code" href="namespacellvm.html#a3dd948f1535b4b28f2a7d45a5c11a34a">getOrEnforceKnownAlignment</a>(Copy-&gt;getSource(),</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                                                        AI.<a class="code" href="classllvm_1_1AllocaInst.html#ad441932c20e5b9ba36c8c72a6c7f5ec3">getAlignment</a>(), TD);</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      <span class="keywordflow">if</span> (AI.<a class="code" href="classllvm_1_1AllocaInst.html#ad441932c20e5b9ba36c8c72a6c7f5ec3">getAlignment</a>() &lt;= SourceAlign) {</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Found alloca equal to global: &quot;</span> &lt;&lt; AI &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  memcpy = &quot;</span> &lt;&lt; *Copy &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = ToDelete.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;          <a class="code" href="classllvm_1_1InstCombiner.html#a0adb2c1eb77982ea83e5645c9d8bf3d1">EraseInstFromFunction</a>(*ToDelete[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *TheSrc = cast&lt;Constant&gt;(Copy-&gt;getSource());</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Cast</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;          = <a class="code" href="classllvm_1_1ConstantExpr.html#a28bf8984fbfb08fd27df435e631e6832">ConstantExpr::getPointerBitCastOrAddrSpaceCast</a>(TheSrc, AI.<a class="code" href="classllvm_1_1AllocaInst.html#a597c918a615f26a0cea7adb84f06fc3f">getType</a>());</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewI = <a class="code" href="classllvm_1_1InstCombiner.html#af7c1b579548e5b90a8db22d2f26a4afc">ReplaceInstUsesWith</a>(AI, Cast);</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <a class="code" href="classllvm_1_1InstCombiner.html#a0adb2c1eb77982ea83e5645c9d8bf3d1">EraseInstFromFunction</a>(*Copy);</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        ++NumGlobalCopies;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <span class="keywordflow">return</span> NewI;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      }</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    }</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  }</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <span class="comment">// At last, use the generic allocation site handler to aggressively remove</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="comment">// unused allocas.</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InstCombiner.html#ad9114d86dbeaa0f40b79579f3836c5c6">visitAllocSite</a>(AI);</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;}</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">/// InstCombineLoadCast - Fold &#39;load (cast P)&#39; -&gt; cast (load P)&#39; when possible.</span></div><div class="line"><a name="l00283"></a><span class="lineno"><a class="line" href="InstCombineLoadStoreAlloca_8cpp.html#a2814225e292f1a13143e4af3086a33d6">  283</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a2814225e292f1a13143e4af3086a33d6">InstCombineLoadCast</a>(<a class="code" href="classllvm_1_1InstCombiner.html">InstCombiner</a> &amp;IC, <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> &amp;LI,</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                                        <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> *TD) {</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <a class="code" href="classllvm_1_1User.html">User</a> *CI = cast&lt;User&gt;(LI.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0));</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CastOp = CI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <a class="code" href="classllvm_1_1PointerType.html">PointerType</a> *DestTy = cast&lt;PointerType&gt;(CI-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *DestPTy = DestTy-&gt;<a class="code" href="classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">getElementType</a>();</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1PointerType.html">PointerType</a> *SrcTy = dyn_cast&lt;PointerType&gt;(CastOp-&gt;getType())) {</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="comment">// If the address spaces don&#39;t match, don&#39;t eliminate the cast.</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keywordflow">if</span> (DestTy-&gt;<a class="code" href="classllvm_1_1PointerType.html#a921061a57ec3cfbaf6422f09f7d79fc3">getAddressSpace</a>() != SrcTy-&gt;getAddressSpace())</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *SrcPTy = SrcTy-&gt;getElementType();</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordflow">if</span> (DestPTy-&gt;isIntegerTy() || DestPTy-&gt;isPointerTy() ||</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;         DestPTy-&gt;isVectorTy()) {</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      <span class="comment">// If the source is an array, the code below will not succeed.  Check to</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      <span class="comment">// see if a trivial &#39;gep P, 0, 0&#39; will help matters.  Only do this for</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      <span class="comment">// constants.</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ArrayType.html">ArrayType</a> *ASrcTy = dyn_cast&lt;ArrayType&gt;(SrcPTy))</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *CSrc = dyn_cast&lt;Constant&gt;(CastOp))</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;          <span class="keywordflow">if</span> (ASrcTy-&gt;getNumElements() != 0) {</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            <a class="code" href="classllvm_1_1Type.html">Type</a> *IdxTy = TD</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                        ? TD-&gt;<a class="code" href="classllvm_1_1DataLayout.html#ae84bb2408dfffa4e8b5fe2ce0714a3bd">getIntPtrType</a>(SrcTy)</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                        : <a class="code" href="classllvm_1_1Type.html#a05186fa23e4d11b9855a9599ba87a4b7">Type::getInt64Ty</a>(SrcTy-&gt;getContext());</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            <a class="code" href="classllvm_1_1Value.html">Value</a> *Idx = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(IdxTy);</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            <a class="code" href="classllvm_1_1Value.html">Value</a> *Idxs[2] = { Idx, Idx };</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            CastOp = <a class="code" href="classllvm_1_1ConstantExpr.html#a51940249c228e46f1f97932e5f4b8450">ConstantExpr::getGetElementPtr</a>(CSrc, Idxs);</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            SrcTy = cast&lt;PointerType&gt;(CastOp-&gt;getType());</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            SrcPTy = SrcTy-&gt;getElementType();</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;          }</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      <span class="keywordflow">if</span> (IC.<a class="code" href="classllvm_1_1InstCombiner.html#a5acf2a841db50684c87133f36bdd00a1">getDataLayout</a>() &amp;&amp;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;          (SrcPTy-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>() || SrcPTy-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>() ||</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            SrcPTy-&gt;<a class="code" href="classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">isVectorTy</a>()) &amp;&amp;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;          <span class="comment">// Do not allow turning this into a load of an integer, which is then</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;          <span class="comment">// casted to a pointer, this pessimizes pointer analysis a lot.</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;          (SrcPTy-&gt;<a class="code" href="classllvm_1_1Type.html#ac830a02a025d9d5a5dc53c444cf625ee">isPtrOrPtrVectorTy</a>() ==</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;           LI.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#ac830a02a025d9d5a5dc53c444cf625ee">isPtrOrPtrVectorTy</a>()) &amp;&amp;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;          IC.<a class="code" href="classllvm_1_1InstCombiner.html#a5acf2a841db50684c87133f36bdd00a1">getDataLayout</a>()-&gt;<a class="code" href="classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">getTypeSizeInBits</a>(SrcPTy) ==</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;               IC.<a class="code" href="classllvm_1_1InstCombiner.html#a5acf2a841db50684c87133f36bdd00a1">getDataLayout</a>()-&gt;<a class="code" href="classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">getTypeSizeInBits</a>(DestPTy)) {</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="comment">// Okay, we are casting from one integer or pointer type to another of</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <span class="comment">// the same size.  Instead of casting the pointer before the load, cast</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <span class="comment">// the result of the loaded value.</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *NewLoad =</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;          IC.<a class="code" href="classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">Builder</a>-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#af440b535b3b4e8d0d089dd0ed2283a0f">CreateLoad</a>(CastOp, LI.<a class="code" href="classllvm_1_1LoadInst.html#aeb96f1a88b4e58c34a988eebd843f688">isVolatile</a>(), CI-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>());</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        NewLoad-&gt;<a class="code" href="classllvm_1_1LoadInst.html#a218ef27c964707a907f12db0f9b002ba">setAlignment</a>(LI.<a class="code" href="classllvm_1_1LoadInst.html#ad1168fc42bcba1b71217a4969483671a">getAlignment</a>());</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        NewLoad-&gt;<a class="code" href="classllvm_1_1LoadInst.html#a06e392f502bff86e8f85092c135d2baf">setAtomic</a>(LI.<a class="code" href="classllvm_1_1LoadInst.html#a8c0a29ecc14dc5afe7573bf616da2361">getOrdering</a>(), LI.<a class="code" href="classllvm_1_1LoadInst.html#a4df7359cb36b166c0878e16291cbe183">getSynchScope</a>());</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        <span class="comment">// Now cast the result of the load.</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a>(NewLoad, LI.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      }</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    }</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  }</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;}</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div><div class="line"><a name="l00341"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#a9f5d14332db3ce442883889831474db6">  341</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombiner.html#a9f5d14332db3ce442883889831474db6">InstCombiner::visitLoadInst</a>(<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> &amp;LI) {</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op = LI.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <span class="comment">// Attempt to improve the alignment.</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <span class="keywordflow">if</span> (TD) {</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordtype">unsigned</span> KnownAlign =</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      <a class="code" href="namespacellvm.html#a3dd948f1535b4b28f2a7d45a5c11a34a">getOrEnforceKnownAlignment</a>(Op, TD-&gt;<a class="code" href="classllvm_1_1DataLayout.html#adfb7610cbc23430a7d4077a3cf9c22d3">getPrefTypeAlignment</a>(LI.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()),TD);</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordtype">unsigned</span> LoadAlign = LI.<a class="code" href="classllvm_1_1LoadInst.html#ad1168fc42bcba1b71217a4969483671a">getAlignment</a>();</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keywordtype">unsigned</span> EffectiveLoadAlign = LoadAlign != 0 ? LoadAlign :</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      TD-&gt;<a class="code" href="classllvm_1_1DataLayout.html#abb381519d34dcb9ccf673bf7689d0721">getABITypeAlignment</a>(LI.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordflow">if</span> (KnownAlign &gt; EffectiveLoadAlign)</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      LI.<a class="code" href="classllvm_1_1LoadInst.html#a218ef27c964707a907f12db0f9b002ba">setAlignment</a>(KnownAlign);</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (LoadAlign == 0)</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      LI.<a class="code" href="classllvm_1_1LoadInst.html#a218ef27c964707a907f12db0f9b002ba">setAlignment</a>(EffectiveLoadAlign);</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  }</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <span class="comment">// load (cast X) --&gt; cast (load X) iff safe.</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="keywordflow">if</span> (isa&lt;CastInst&gt;(Op))</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res = <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a2814225e292f1a13143e4af3086a33d6">InstCombineLoadCast</a>(*<span class="keyword">this</span>, LI, TD))</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;      <span class="keywordflow">return</span> Res;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <span class="comment">// None of the following transforms are legal for volatile/atomic loads.</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <span class="comment">// FIXME: Some of it is okay for atomic loads; needs refactoring.</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <span class="keywordflow">if</span> (!LI.<a class="code" href="classllvm_1_1LoadInst.html#a156c478ee8e7d1602143cdbad4bd5385">isSimple</a>()) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="comment">// Do really simple store-to-load forwarding and load CSE, to catch cases</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <span class="comment">// where there are several consecutive memory accesses to the same location,</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="comment">// separated by a few arithmetic operations.</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> BBI = &amp;LI;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *AvailableVal = <a class="code" href="namespacellvm.html#a17aa92f2452d8c00efec55c96aa23a66">FindAvailableLoadedValue</a>(Op, LI.<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>(), BBI,6))</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InstCombiner.html#af7c1b579548e5b90a8db22d2f26a4afc">ReplaceInstUsesWith</a>(LI, AvailableVal);</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="comment">// load(gep null, ...) -&gt; unreachable</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *GEPI = dyn_cast&lt;GetElementPtrInst&gt;(Op)) {</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *GEPI0 = GEPI-&gt;getOperand(0);</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="comment">// TODO: Consider a target hook for valid address spaces for this xform.</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordflow">if</span> (isa&lt;ConstantPointerNull&gt;(GEPI0) &amp;&amp; GEPI-&gt;getPointerAddressSpace() == 0){</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      <span class="comment">// Insert a new store to null instruction before the load to indicate</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      <span class="comment">// that this code is not reachable.  We do this instead of inserting</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      <span class="comment">// an unreachable instruction directly because we cannot modify the</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      <span class="comment">// CFG.</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;      <span class="keyword">new</span> <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a>(<a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(LI.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()),</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                    <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Op-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()), &amp;LI);</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InstCombiner.html#af7c1b579548e5b90a8db22d2f26a4afc">ReplaceInstUsesWith</a>(LI, <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(LI.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    }</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  }</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <span class="comment">// load null/undef -&gt; unreachable</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="comment">// TODO: Consider a target hook for valid address spaces for this xform.</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(Op) ||</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;      (isa&lt;ConstantPointerNull&gt;(Op) &amp;&amp; LI.<a class="code" href="classllvm_1_1LoadInst.html#a2efd55778217d045b121de696c4f6452">getPointerAddressSpace</a>() == 0)) {</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="comment">// Insert a new store to null instruction before the load to indicate that</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="comment">// this code is not reachable.  We do this instead of inserting an</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="comment">// unreachable instruction directly because we cannot modify the CFG.</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keyword">new</span> <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a>(<a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(LI.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()),</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                  <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Op-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()), &amp;LI);</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InstCombiner.html#af7c1b579548e5b90a8db22d2f26a4afc">ReplaceInstUsesWith</a>(LI, <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(LI.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  }</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <span class="comment">// Instcombine load (constantexpr_cast global) -&gt; cast (load global)</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE = dyn_cast&lt;ConstantExpr&gt;(Op))</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keywordflow">if</span> (CE-&gt;isCast())</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res = <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a2814225e292f1a13143e4af3086a33d6">InstCombineLoadCast</a>(*<span class="keyword">this</span>, LI, TD))</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        <span class="keywordflow">return</span> Res;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="keywordflow">if</span> (Op-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()) {</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="comment">// Change select and PHI nodes to select values instead of addresses: this</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="comment">// helps alias analysis out a lot, allows many others simplifications, and</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="comment">// exposes redundancy in the code.</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="comment">// Note that we cannot do the transformation unless we know that the</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="comment">// introduced loads cannot trap!  Something like this is valid as long as</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="comment">// the condition is always false: load (select bool %C, int* null, int* %G),</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="comment">// but it would not be valid if we transformed it to load from null</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="comment">// unconditionally.</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *SI = dyn_cast&lt;SelectInst&gt;(Op)) {</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      <span class="comment">// load (select (Cond, &amp;V1, &amp;V2))  --&gt; select(Cond, load &amp;V1, load &amp;V2).</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="ARMSubtarget_8cpp.html#a4bd80d4e433d9f72af26b364036900dc">Align</a> = LI.<a class="code" href="classllvm_1_1LoadInst.html#ad1168fc42bcba1b71217a4969483671a">getAlignment</a>();</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a2bb15e529c55b5356aabfb006d1e98aa">isSafeToLoadUnconditionally</a>(SI-&gt;getOperand(1), SI, <a class="code" href="ARMSubtarget_8cpp.html#a4bd80d4e433d9f72af26b364036900dc">Align</a>, TD) &amp;&amp;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;          <a class="code" href="namespacellvm.html#a2bb15e529c55b5356aabfb006d1e98aa">isSafeToLoadUnconditionally</a>(SI-&gt;getOperand(2), SI, <a class="code" href="ARMSubtarget_8cpp.html#a4bd80d4e433d9f72af26b364036900dc">Align</a>, TD)) {</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *V1 = <a class="code" href="classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">Builder</a>-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#af440b535b3b4e8d0d089dd0ed2283a0f">CreateLoad</a>(SI-&gt;getOperand(1),</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                                           SI-&gt;getOperand(1)-&gt;getName()+<span class="stringliteral">&quot;.val&quot;</span>);</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a> = <a class="code" href="classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">Builder</a>-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#af440b535b3b4e8d0d089dd0ed2283a0f">CreateLoad</a>(SI-&gt;getOperand(2),</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                                           SI-&gt;getOperand(2)-&gt;getName()+<span class="stringliteral">&quot;.val&quot;</span>);</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        V1-&gt;<a class="code" href="classllvm_1_1LoadInst.html#a218ef27c964707a907f12db0f9b002ba">setAlignment</a>(Align);</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        V2-&gt;<a class="code" href="classllvm_1_1LoadInst.html#a218ef27c964707a907f12db0f9b002ba">setAlignment</a>(Align);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#a8bce457e977f23507c48c9dfd7052990">SelectInst::Create</a>(SI-&gt;getCondition(), V1, <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>);</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      }</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      <span class="comment">// load (select (cond, null, P)) -&gt; load P</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;Constant&gt;(SI-&gt;getOperand(1)))</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isNullValue()) {</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;          LI.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(0, SI-&gt;getOperand(2));</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;          <span class="keywordflow">return</span> &amp;LI;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        }</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      <span class="comment">// load (select (cond, P, null)) -&gt; load P</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;Constant&gt;(SI-&gt;getOperand(2)))</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isNullValue()) {</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;          LI.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(0, SI-&gt;getOperand(1));</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;          <span class="keywordflow">return</span> &amp;LI;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        }</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    }</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  }</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;}</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="comment">/// InstCombineStoreToCast - Fold store V, (cast P) -&gt; store (cast V), P</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment">/// when possible.  This makes it generally easy to do alias analysis and/or</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment">/// SROA/mem2reg of the memory object.</span></div><div class="line"><a name="l00453"></a><span class="lineno"><a class="line" href="InstCombineLoadStoreAlloca_8cpp.html#ac61e162a34ba20be2024264e6d8d9a53">  453</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#ac61e162a34ba20be2024264e6d8d9a53">InstCombineStoreToCast</a>(<a class="code" href="classllvm_1_1InstCombiner.html">InstCombiner</a> &amp;IC, <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> &amp;SI) {</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <a class="code" href="classllvm_1_1User.html">User</a> *CI = cast&lt;User&gt;(SI.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CastOp = CI-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *DestPTy = cast&lt;PointerType&gt;(CI-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())-&gt;getElementType();</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <a class="code" href="classllvm_1_1PointerType.html">PointerType</a> *SrcTy = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1PointerType.html">PointerType</a>&gt;(CastOp-&gt;getType());</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <span class="keywordflow">if</span> (SrcTy == 0) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *SrcPTy = SrcTy-&gt;<a class="code" href="classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">getElementType</a>();</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="keywordflow">if</span> (!DestPTy-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>() &amp;&amp; !DestPTy-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>())</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment">  /// NewGEPIndices - If SrcPTy is an aggregate type, we can emit a &quot;noop gep&quot;</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment">  /// to its first element.  This allows us to handle things like:</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment">  ///   store i32 xxx, (bitcast {foo*, float}* %P to i32*)</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment">  /// on 32-bit hosts.</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value*, 4&gt;</a> NewGEPIndices;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  <span class="comment">// If the source is an array, the code below will not succeed.  Check to</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  <span class="comment">// see if a trivial &#39;gep P, 0, 0&#39; will help matters.  Only do this for</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <span class="comment">// constants.</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <span class="keywordflow">if</span> (SrcPTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9aae7c60b468bcf6db982dc76e6c703a">isArrayTy</a>() || SrcPTy-&gt;<a class="code" href="classllvm_1_1Type.html#aed87738661d539150b3fc4bb46e36aa3">isStructTy</a>()) {</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="comment">// Index through pointer.</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Zero = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(SI.<a class="code" href="classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>()));</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    NewGEPIndices.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Zero);</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="keywordflow">while</span> (1) {</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StructType.html">StructType</a> *STy = dyn_cast&lt;StructType&gt;(SrcPTy)) {</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <span class="keywordflow">if</span> (!STy-&gt;getNumElements()) <span class="comment">/* Struct can be empty {} */</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        NewGEPIndices.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Zero);</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        SrcPTy = STy-&gt;getElementType(0);</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ArrayType.html">ArrayType</a> *ATy = dyn_cast&lt;ArrayType&gt;(SrcPTy)) {</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        NewGEPIndices.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Zero);</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        SrcPTy = ATy-&gt;getElementType();</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      }</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    }</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    SrcTy = <a class="code" href="classllvm_1_1PointerType.html#a050a395d1656e546679d8b144d951bb2">PointerType::get</a>(SrcPTy, SrcTy-&gt;<a class="code" href="classllvm_1_1PointerType.html#a921061a57ec3cfbaf6422f09f7d79fc3">getAddressSpace</a>());</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  }</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  <span class="keywordflow">if</span> (!SrcPTy-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>() &amp;&amp; !SrcPTy-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>())</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <span class="comment">// If the pointers point into different address spaces or if they point to</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <span class="comment">// values with different sizes, we can&#39;t do the transformation.</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  <span class="keywordflow">if</span> (!IC.<a class="code" href="classllvm_1_1InstCombiner.html#a5acf2a841db50684c87133f36bdd00a1">getDataLayout</a>() ||</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      SrcTy-&gt;<a class="code" href="classllvm_1_1PointerType.html#a921061a57ec3cfbaf6422f09f7d79fc3">getAddressSpace</a>() !=</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        cast&lt;PointerType&gt;(CI-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())-&gt;getAddressSpace() ||</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      IC.<a class="code" href="classllvm_1_1InstCombiner.html#a5acf2a841db50684c87133f36bdd00a1">getDataLayout</a>()-&gt;<a class="code" href="classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">getTypeSizeInBits</a>(SrcPTy) !=</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      IC.<a class="code" href="classllvm_1_1InstCombiner.html#a5acf2a841db50684c87133f36bdd00a1">getDataLayout</a>()-&gt;<a class="code" href="classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">getTypeSizeInBits</a>(DestPTy))</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  <span class="comment">// Okay, we are casting from one integer or pointer type to another of</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  <span class="comment">// the same size.  Instead of casting the pointer before</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  <span class="comment">// the store, cast the value to be stored.</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NewCast;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *SIOp0 = SI.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">Instruction::CastOps</a> opcode = Instruction::BitCast;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a>* CastSrcTy = SIOp0-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a>* CastDstTy = SrcPTy;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  <span class="keywordflow">if</span> (CastDstTy-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>()) {</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="keywordflow">if</span> (CastSrcTy-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>())</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      opcode = Instruction::IntToPtr;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CastDstTy-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>()) {</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="keywordflow">if</span> (SIOp0-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>())</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;      opcode = Instruction::PtrToInt;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  }</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <span class="comment">// SIOp0 is a pointer to aggregate and this is a store to the first field,</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <span class="comment">// emit a GEP to index into its first field.</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  <span class="keywordflow">if</span> (!NewGEPIndices.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>())</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    CastOp = IC.<a class="code" href="classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">Builder</a>-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#a1f5e8b8d535e593299355288aa0cbd67">CreateInBoundsGEP</a>(CastOp, NewGEPIndices);</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  NewCast = IC.<a class="code" href="classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">Builder</a>-&gt;<a class="code" href="classllvm_1_1IRBuilder.html#a8aca9237e5fbd3b1028d8fe92b5a74ee">CreateCast</a>(opcode, SIOp0, CastDstTy,</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                                   SIOp0-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()+<span class="stringliteral">&quot;.c&quot;</span>);</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  SI.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(0, NewCast);</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  SI.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(1, CastOp);</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <span class="keywordflow">return</span> &amp;SI;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;}</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment">/// equivalentAddressValues - Test if A and B will obviously have the same</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment">/// value. This includes recognizing that %t0 and %t1 will have the same</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment">/// value in code like this:</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment">///   %t0 = getelementptr \@a, 0, 3</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment">///   store i32 0, i32* %t0</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment">///   %t1 = getelementptr \@a, 0, 3</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment">///   %t2 = load i32* %t1</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00545"></a><span class="lineno"><a class="line" href="InstCombineLoadStoreAlloca_8cpp.html#a3265ae31efc424def9bd2a560a8a4c5a">  545</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a3265ae31efc424def9bd2a560a8a4c5a">equivalentAddressValues</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>) {</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  <span class="comment">// Test if the values are trivially equivalent.</span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <span class="keywordflow">if</span> (A == B) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  <span class="comment">// Test if the values come form identical arithmetic instructions.</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  <span class="comment">// This uses isIdenticalToWhenDefined instead of isIdenticalTo because</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="comment">// its only used to compare two uses within the same basic block, which</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  <span class="comment">// means that they&#39;ll always either have the same value or one of them</span></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <span class="comment">// will have an undefined value.</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <span class="keywordflow">if</span> (isa&lt;BinaryOperator&gt;(A) ||</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      isa&lt;CastInst&gt;(A) ||</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      isa&lt;PHINode&gt;(A) ||</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      isa&lt;GetElementPtrInst&gt;(A))</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *BI = dyn_cast&lt;Instruction&gt;(B))</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      <span class="keywordflow">if</span> (cast&lt;Instruction&gt;(A)-&gt;isIdenticalToWhenDefined(BI))</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <span class="comment">// Otherwise they may not be equivalent.</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;}</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div><div class="line"><a name="l00566"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombiner.html#a5c4ef93d3d451f4515d5d4a333e19a5d">  566</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombiner.html#a5c4ef93d3d451f4515d5d4a333e19a5d">InstCombiner::visitStoreInst</a>(<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> &amp;SI) {</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Val = SI.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Ptr = SI.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <span class="comment">// Attempt to improve the alignment.</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <span class="keywordflow">if</span> (TD) {</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="keywordtype">unsigned</span> KnownAlign =</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;      <a class="code" href="namespacellvm.html#a3dd948f1535b4b28f2a7d45a5c11a34a">getOrEnforceKnownAlignment</a>(Ptr, TD-&gt;<a class="code" href="classllvm_1_1DataLayout.html#adfb7610cbc23430a7d4077a3cf9c22d3">getPrefTypeAlignment</a>(Val-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()),</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                                 TD);</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="keywordtype">unsigned</span> StoreAlign = SI.<a class="code" href="classllvm_1_1StoreInst.html#a3084f1dd69d67e1965fd1fe721a69f2e">getAlignment</a>();</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="keywordtype">unsigned</span> EffectiveStoreAlign = StoreAlign != 0 ? StoreAlign :</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      TD-&gt;<a class="code" href="classllvm_1_1DataLayout.html#abb381519d34dcb9ccf673bf7689d0721">getABITypeAlignment</a>(Val-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="keywordflow">if</span> (KnownAlign &gt; EffectiveStoreAlign)</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;      SI.<a class="code" href="classllvm_1_1StoreInst.html#a50d3891cd26db1308e81540f468de8c8">setAlignment</a>(KnownAlign);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (StoreAlign == 0)</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      SI.<a class="code" href="classllvm_1_1StoreInst.html#a50d3891cd26db1308e81540f468de8c8">setAlignment</a>(EffectiveStoreAlign);</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  }</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  <span class="comment">// Don&#39;t hack volatile/atomic stores.</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  <span class="comment">// FIXME: Some bits are legal for atomic stores; needs refactoring.</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  <span class="keywordflow">if</span> (!SI.<a class="code" href="classllvm_1_1StoreInst.html#a1149c7eeefca671ac2685bca13843568">isSimple</a>()) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  <span class="comment">// If the RHS is an alloca with a single use, zapify the store, making the</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  <span class="comment">// alloca dead.</span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  <span class="keywordflow">if</span> (Ptr-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()) {</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="keywordflow">if</span> (isa&lt;AllocaInst&gt;(Ptr))</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InstCombiner.html#a0adb2c1eb77982ea83e5645c9d8bf3d1">EraseInstFromFunction</a>(SI);</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *GEP = dyn_cast&lt;GetElementPtrInst&gt;(Ptr)) {</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      <span class="keywordflow">if</span> (isa&lt;AllocaInst&gt;(GEP-&gt;getOperand(0))) {</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        <span class="keywordflow">if</span> (GEP-&gt;getOperand(0)-&gt;hasOneUse())</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InstCombiner.html#a0adb2c1eb77982ea83e5645c9d8bf3d1">EraseInstFromFunction</a>(SI);</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;      }</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    }</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  }</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  <span class="comment">// Do really simple DSE, to catch cases where there are several consecutive</span></div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <span class="comment">// stores to the same location, separated by a few arithmetic operations. This</span></div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  <span class="comment">// situation often occurs with bitfield accesses.</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> BBI = &amp;SI;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> ScanInsts = 6; BBI != SI.<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>() &amp;&amp; ScanInsts;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;       --ScanInsts) {</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    --BBI;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <span class="comment">// Don&#39;t count debug info directives, lest they affect codegen,</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="comment">// and we skip pointer-to-pointer bitcasts, which are NOPs.</span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="keywordflow">if</span> (isa&lt;DbgInfoIntrinsic&gt;(BBI) ||</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        (isa&lt;BitCastInst&gt;(BBI) &amp;&amp; BBI-&gt;getType()-&gt;isPointerTy())) {</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      ScanInsts++;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    }</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *PrevSI = dyn_cast&lt;StoreInst&gt;(BBI)) {</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      <span class="comment">// Prev store isn&#39;t volatile, and stores to the same location?</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;      <span class="keywordflow">if</span> (PrevSI-&gt;isSimple() &amp;&amp; <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a3265ae31efc424def9bd2a560a8a4c5a">equivalentAddressValues</a>(PrevSI-&gt;getOperand(1),</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                                                        SI.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1))) {</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        ++NumDeadStore;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        ++BBI;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        <a class="code" href="classllvm_1_1InstCombiner.html#a0adb2c1eb77982ea83e5645c9d8bf3d1">EraseInstFromFunction</a>(*PrevSI);</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;      }</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    }</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="comment">// If this is a load, we have to stop.  However, if the loaded value is from</span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="comment">// the pointer we&#39;re loading and is producing the pointer we&#39;re storing,</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="comment">// then *this* store is dead (X = load P; store X -&gt; P).</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI = dyn_cast&lt;LoadInst&gt;(BBI)) {</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      <span class="keywordflow">if</span> (LI == Val &amp;&amp; <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#a3265ae31efc424def9bd2a560a8a4c5a">equivalentAddressValues</a>(LI-&gt;getOperand(0), Ptr) &amp;&amp;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;          LI-&gt;isSimple())</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InstCombiner.html#a0adb2c1eb77982ea83e5645c9d8bf3d1">EraseInstFromFunction</a>(SI);</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;      <span class="comment">// Otherwise, this is a load from some other location.  Stores before it</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;      <span class="comment">// may not be dead.</span></div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    }</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="comment">// Don&#39;t skip over loads or things that can modify memory.</span></div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <span class="keywordflow">if</span> (BBI-&gt;mayWriteToMemory() || BBI-&gt;mayReadFromMemory())</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  }</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  <span class="comment">// store X, null    -&gt; turns into &#39;unreachable&#39; in SimplifyCFG</span></div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  <span class="keywordflow">if</span> (isa&lt;ConstantPointerNull&gt;(Ptr) &amp;&amp; SI.<a class="code" href="classllvm_1_1StoreInst.html#a6cac341b1b354174d0e0a81a2e7a9109">getPointerAddressSpace</a>() == 0) {</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="keywordflow">if</span> (!isa&lt;UndefValue&gt;(Val)) {</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      SI.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(0, <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(Val-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *U = dyn_cast&lt;Instruction&gt;(Val))</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        <a class="code" href="classllvm_1_1InstCombiner.html#aaca490f77b8a0ca6b013db8c0de18972">Worklist</a>.<a class="code" href="classllvm_1_1InstCombineWorklist.html#a371049452a97755a1b39dea46017439a">Add</a>(U);  <span class="comment">// Dropped a use.</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    }</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="keywordflow">return</span> 0;  <span class="comment">// Do not modify these!</span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  }</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  <span class="comment">// store undef, Ptr -&gt; noop</span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(Val))</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InstCombiner.html#a0adb2c1eb77982ea83e5645c9d8bf3d1">EraseInstFromFunction</a>(SI);</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  <span class="comment">// If the pointer destination is a cast, see if we can fold the cast into the</span></div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  <span class="comment">// source instead.</span></div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  <span class="keywordflow">if</span> (isa&lt;CastInst&gt;(Ptr))</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res = <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#ac61e162a34ba20be2024264e6d8d9a53">InstCombineStoreToCast</a>(*<span class="keyword">this</span>, SI))</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;      <span class="keywordflow">return</span> Res;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE = dyn_cast&lt;ConstantExpr&gt;(Ptr))</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="keywordflow">if</span> (CE-&gt;isCast())</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res = <a class="code" href="InstCombineLoadStoreAlloca_8cpp.html#ac61e162a34ba20be2024264e6d8d9a53">InstCombineStoreToCast</a>(*<span class="keyword">this</span>, SI))</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        <span class="keywordflow">return</span> Res;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <span class="comment">// If this store is the last instruction in the basic block (possibly</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <span class="comment">// excepting debug info instructions), and if the block ends with an</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  <span class="comment">// unconditional branch, try to move it to the successor block.</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  BBI = &amp;SI;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  <span class="keywordflow">do</span> {</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    ++BBI;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  } <span class="keywordflow">while</span> (isa&lt;DbgInfoIntrinsic&gt;(BBI) ||</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;           (isa&lt;BitCastInst&gt;(BBI) &amp;&amp; BBI-&gt;getType()-&gt;isPointerTy()));</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = dyn_cast&lt;BranchInst&gt;(BBI))</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <span class="keywordflow">if</span> (BI-&gt;isUnconditional())</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;      <span class="keywordflow">if</span> (SimplifyStoreAtEndOfBlock(SI))</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        <span class="keywordflow">return</span> 0;  <span class="comment">// xform done!</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;}</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="comment">/// SimplifyStoreAtEndOfBlock - Turn things like:</span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="comment">///   if () { *P = v1; } else { *P = v2 }</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="comment">/// into a phi node with a store in the successor.</span></div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;<span class="comment">/// Simplify things like:</span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="comment">///   *P = v1; if () { *P = v2; }</span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;<span class="comment">/// into a phi node with a store in the successor.</span></div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> InstCombiner::SimplifyStoreAtEndOfBlock(<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> &amp;SI) {</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *StoreBB = SI.<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  <span class="comment">// Check to see if the successor block has exactly two incoming edges.  If</span></div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  <span class="comment">// so, see if the other predecessor contains a store to the same location.</span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <span class="comment">// if so, insert a PHI node (if needed) and move the stores down.</span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *DestBB = StoreBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1TerminatorInst.html#a3aac3b6c36415a2b08f65ead9e3e51e7">getSuccessor</a>(0);</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <span class="comment">// Determine whether Dest has exactly two predecessors and, if so, compute</span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;  <span class="comment">// the other predecessor.</span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  <a class="code" href="classllvm_1_1PredIterator.html">pred_iterator</a> PI = <a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(DestBB);</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = *PI;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OtherBB = 0;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  <span class="keywordflow">if</span> (P != StoreBB)</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    OtherBB = <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  <span class="keywordflow">if</span> (++PI == <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(DestBB))</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  P = *PI;</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  <span class="keywordflow">if</span> (P != StoreBB) {</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="keywordflow">if</span> (OtherBB)</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    OtherBB = <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  }</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  <span class="keywordflow">if</span> (++PI != <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(DestBB))</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <span class="comment">// Bail out if all the relevant blocks aren&#39;t distinct (this can happen,</span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  <span class="comment">// for example, if SI is in an infinite loop)</span></div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  <span class="keywordflow">if</span> (StoreBB == DestBB || OtherBB == DestBB)</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  <span class="comment">// Verify that the other block ends in a branch and is not otherwise empty.</span></div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> BBI = OtherBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>();</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *OtherBr = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a>&gt;(BBI);</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  <span class="keywordflow">if</span> (!OtherBr || BBI == OtherBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>())</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  <span class="comment">// If the other block ends in an unconditional branch, check for the &#39;if then</span></div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  <span class="comment">// else&#39; case.  there is an instruction before the branch.</span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *OtherStore = 0;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  <span class="keywordflow">if</span> (OtherBr-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a382131e712e55e8324fbd5068de17b78">isUnconditional</a>()) {</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    --BBI;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="comment">// Skip over debugging info.</span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="keywordflow">while</span> (isa&lt;DbgInfoIntrinsic&gt;(BBI) ||</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;           (isa&lt;BitCastInst&gt;(BBI) &amp;&amp; BBI-&gt;getType()-&gt;isPointerTy())) {</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;      <span class="keywordflow">if</span> (BBI==OtherBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>())</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;      --BBI;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    }</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="comment">// If this isn&#39;t a store, isn&#39;t a store to the same location, or is not the</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <span class="comment">// right kind of store, bail out.</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    OtherStore = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a>&gt;(BBI);</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keywordflow">if</span> (!OtherStore || OtherStore-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1) != SI.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1) ||</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        !SI.<a class="code" href="classllvm_1_1Instruction.html#a9f729c6c3e0de4a55dc5a3693fd4a9eb">isSameOperationAs</a>(OtherStore))</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <span class="comment">// Otherwise, the other block ended with a conditional branch. If one of the</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="comment">// destinations is StoreBB, then we have the if/then case.</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <span class="keywordflow">if</span> (OtherBr-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(0) != StoreBB &amp;&amp;</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        OtherBr-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(1) != StoreBB)</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <span class="comment">// Okay, we know that OtherBr now goes to Dest and StoreBB, so this is an</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <span class="comment">// if/then triangle.  See if there is a store to the same ptr as SI that</span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    <span class="comment">// lives in OtherBB.</span></div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <span class="keywordflow">for</span> (;; --BBI) {</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;      <span class="comment">// Check to see if we find the matching store.</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;      <span class="keywordflow">if</span> ((OtherStore = dyn_cast&lt;StoreInst&gt;(BBI))) {</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        <span class="keywordflow">if</span> (OtherStore-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1) != SI.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1) ||</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;            !SI.<a class="code" href="classllvm_1_1Instruction.html#a9f729c6c3e0de4a55dc5a3693fd4a9eb">isSameOperationAs</a>(OtherStore))</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;      }</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;      <span class="comment">// If we find something that may be using or overwriting the stored</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;      <span class="comment">// value, or if we run out of instructions, we can&#39;t do the xform.</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      <span class="keywordflow">if</span> (BBI-&gt;mayReadFromMemory() || BBI-&gt;mayWriteToMemory() ||</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;          BBI == OtherBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>())</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    }</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <span class="comment">// In order to eliminate the store in OtherBr, we have to</span></div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <span class="comment">// make sure nothing reads or overwrites the stored value in</span></div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <span class="comment">// StoreBB.</span></div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = StoreBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(); &amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != &amp;SI; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;      <span class="comment">// FIXME: This should really be AA driven.</span></div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;mayReadFromMemory() || <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;mayWriteToMemory())</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    }</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  }</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  <span class="comment">// Insert a PHI node now if we need it.</span></div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *MergedVal = OtherStore-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  <span class="keywordflow">if</span> (MergedVal != SI.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)) {</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = <a class="code" href="classllvm_1_1PHINode.html#afb5e83bf5123ff7c51058eb0ebebcdc6">PHINode::Create</a>(MergedVal-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), 2, <span class="stringliteral">&quot;storemerge&quot;</span>);</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(SI.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), SI.<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>());</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(OtherStore-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0), OtherBB);</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    MergedVal = <a class="code" href="classllvm_1_1InstCombiner.html#af1dcd6c00214bd9c8c8b3c9f9aedcc04">InsertNewInstBefore</a>(PN, DestBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a33603355becfb1a050b62aa015c1cc57">front</a>());</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  }</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  <span class="comment">// Advance to a place where it is safe to insert the new store and</span></div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  <span class="comment">// insert it.</span></div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  BBI = DestBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ab1cd5a3713b93a33f89a2086d473cf6e">getFirstInsertionPt</a>();</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *NewSI = <span class="keyword">new</span> <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a>(MergedVal, SI.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1),</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;                                   SI.<a class="code" href="classllvm_1_1StoreInst.html#a89471513a05fad4bbef69ec411b2586d">isVolatile</a>(),</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;                                   SI.<a class="code" href="classllvm_1_1StoreInst.html#a3084f1dd69d67e1965fd1fe721a69f2e">getAlignment</a>(),</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;                                   SI.<a class="code" href="classllvm_1_1StoreInst.html#aba6b1ee9f629801928eb72258021fb72">getOrdering</a>(),</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;                                   SI.<a class="code" href="classllvm_1_1StoreInst.html#a991dfc39c8e15eff06200a5c27be38ab">getSynchScope</a>());</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  <a class="code" href="classllvm_1_1InstCombiner.html#af1dcd6c00214bd9c8c8b3c9f9aedcc04">InsertNewInstBefore</a>(NewSI, *BBI);</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  NewSI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a7bd545769621a0a9d2cfb074f86f4295">setDebugLoc</a>(OtherStore-&gt;<a class="code" href="classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">getDebugLoc</a>());</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  <span class="comment">// If the two stores had the same TBAA tag, preserve it.</span></div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *TBAATag = SI.<a class="code" href="classllvm_1_1Instruction.html#aafa29112cbe02e4adc9b36752c771991">getMetadata</a>(<a class="code" href="classllvm_1_1LLVMContext.html#a0869c4dfee48696ce863fcd367eba52da66682b7e33233c8e51196bbf274726a2">LLVMContext::MD_tbaa</a>))</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <span class="keywordflow">if</span> ((TBAATag = <a class="code" href="classllvm_1_1MDNode.html#a3c210e8905029a012df3384a7eeb63ad">MDNode::getMostGenericTBAA</a>(TBAATag,</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;                               OtherStore-&gt;<a class="code" href="classllvm_1_1Instruction.html#aafa29112cbe02e4adc9b36752c771991">getMetadata</a>(<a class="code" href="classllvm_1_1LLVMContext.html#a0869c4dfee48696ce863fcd367eba52da66682b7e33233c8e51196bbf274726a2">LLVMContext::MD_tbaa</a>))))</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;      NewSI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">setMetadata</a>(<a class="code" href="classllvm_1_1LLVMContext.html#a0869c4dfee48696ce863fcd367eba52da66682b7e33233c8e51196bbf274726a2">LLVMContext::MD_tbaa</a>, TBAATag);</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  <span class="comment">// Nuke the old stores.</span></div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  <a class="code" href="classllvm_1_1InstCombiner.html#a0adb2c1eb77982ea83e5645c9d8bf3d1">EraseInstFromFunction</a>(SI);</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  <a class="code" href="classllvm_1_1InstCombiner.html#a0adb2c1eb77982ea83e5645c9d8bf3d1">EraseInstFromFunction</a>(*OtherStore);</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;}</div><div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00127">SmallVector.h:127</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00236">SmallVector.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad86469939d2a8bdd4169be9403b89f5a"><div class="ttname"><a href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">llvm::Value::use_end</a></div><div class="ttdeci">use_iterator use_end()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00152">Value.h:152</a></div></div>
<div class="ttc" id="InstCombineLoadStoreAlloca_8cpp_html_a625d5d622944254b7dbb70dd891e93c2"><div class="ttname"><a href="InstCombineLoadStoreAlloca_8cpp.html#a625d5d622944254b7dbb70dd891e93c2">STATISTIC</a></div><div class="ttdeci">STATISTIC(NumDeadStore,&quot;Number of dead stores eliminated&quot;)</div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90aa332b90dd5e4ebf4bbbcc0964220d373"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aa332b90dd5e4ebf4bbbcc0964220d373">llvm::Intrinsic::lifetime_end</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l01254">Intrinsics.h:1254</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html"><div class="ttname"><a href="classllvm_1_1DataLayout.html">llvm::DataLayout</a></div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00098">DataLayout.h:98</a></div></div>
<div class="ttc" id="Loads_8h_html"><div class="ttname"><a href="Loads_8h.html">Loads.h</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a8aca9237e5fbd3b1028d8fe92b5a74ee"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a8aca9237e5fbd3b1028d8fe92b5a74ee">llvm::IRBuilder::CreateCast</a></div><div class="ttdeci">Value * CreateCast(Instruction::CastOps Op, Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01164">IRBuilder.h:1164</a></div></div>
<div class="ttc" id="namespacellvm_1_1ARM__PROC_html_aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5"><div class="ttname"><a href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">llvm::ARM_PROC::A</a></div><div class="ttdef"><b>Definition:</b> <a href="ARMBaseInfo_8h_source.html#l00098">ARMBaseInfo.h:98</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_af440b535b3b4e8d0d089dd0ed2283a0f"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#af440b535b3b4e8d0d089dd0ed2283a0f">llvm::IRBuilder::CreateLoad</a></div><div class="ttdeci">LoadInst * CreateLoad(Value *Ptr, const char *Name)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00879">IRBuilder.h:879</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a089cccb6f231efee72abc76d0f9c695f"><div class="ttname"><a href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">llvm::PHINode::addIncoming</a></div><div class="ttdeci">void addIncoming(Value *V, BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02100">Instructions.h:2100</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_a28bf8984fbfb08fd27df435e631e6832"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a28bf8984fbfb08fd27df435e631e6832">llvm::ConstantExpr::getPointerBitCastOrAddrSpaceCast</a></div><div class="ttdeci">static Constant * getPointerBitCastOrAddrSpaceCast(Constant *C, Type *Ty)</div><div class="ttdoc">Create a BitCast or AddrSpaceCast for a pointer type depending on the address space. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01502">Constants.cpp:1502</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html_a89471513a05fad4bbef69ec411b2586d"><div class="ttname"><a href="classllvm_1_1StoreInst.html#a89471513a05fad4bbef69ec411b2586d">llvm::StoreInst::isVolatile</a></div><div class="ttdeci">bool isVolatile() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00287">Instructions.h:287</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html_a991dfc39c8e15eff06200a5c27be38ab"><div class="ttname"><a href="classllvm_1_1StoreInst.html#a991dfc39c8e15eff06200a5c27be38ab">llvm::StoreInst::getSynchScope</a></div><div class="ttdeci">SynchronizationScope getSynchScope() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00319">Instructions.h:319</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_afdd8a08bfcbd94f60d166a71a3e79ff3"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#afdd8a08bfcbd94f60d166a71a3e79ff3">llvm::IRBuilder::CreateIntCast</a></div><div class="ttdeci">Value * CreateIntCast(Value *V, Type *DestTy, bool isSigned, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01180">IRBuilder.h:1180</a></div></div>
<div class="ttc" id="classllvm_1_1MemIntrinsic_html_a9558faebdbb62c072aed98e33604889d"><div class="ttname"><a href="classllvm_1_1MemIntrinsic.html#a9558faebdbb62c072aed98e33604889d">llvm::MemIntrinsic::isVolatile</a></div><div class="ttdeci">bool isVolatile() const </div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00134">IntrinsicInst.h:134</a></div></div>
<div class="ttc" id="classllvm_1_1AllocaInst_html_a42defc71631bc55fcb48421784b276c9"><div class="ttname"><a href="classllvm_1_1AllocaInst.html#a42defc71631bc55fcb48421784b276c9">llvm::AllocaInst::setAlignment</a></div><div class="ttdeci">void setAlignment(unsigned Align)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l00892">Instructions.cpp:892</a></div></div>
<div class="ttc" id="InstCombine_8h_html"><div class="ttname"><a href="InstCombine_8h.html">InstCombine.h</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html_a8bce457e977f23507c48c9dfd7052990"><div class="ttname"><a href="classllvm_1_1SelectInst.html#a8bce457e977f23507c48c9dfd7052990">llvm::SelectInst::Create</a></div><div class="ttdeci">static SelectInst * Create(Value *C, Value *S1, Value *S2, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01455">Instructions.h:1455</a></div></div>
<div class="ttc" id="IntrinsicInst_8h_html"><div class="ttname"><a href="IntrinsicInst_8h.html">IntrinsicInst.h</a></div></div>
<div class="ttc" id="namespacellvm_html_a3f2f98c2a67c9e79f58aad9150a62e42"><div class="ttname"><a href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">llvm::dyn_cast</a></div><div class="ttdeci">enable_if_c&lt;!is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="Casting_8h_source.html#l00266">Casting.h:266</a></div></div>
<div class="ttc" id="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode_html_a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4"><div class="ttname"><a href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">llvm::NVPTX::PTXLdStInstCode::V2</a></div><div class="ttdef"><b>Definition:</b> <a href="NVPTX_8h_source.html#l00127">NVPTX.h:127</a></div></div>
<div class="ttc" id="DataLayout_8h_html"><div class="ttname"><a href="DataLayout_8h.html">DataLayout.h</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_adfb7610cbc23430a7d4077a3cf9c22d3"><div class="ttname"><a href="classllvm_1_1DataLayout.html#adfb7610cbc23430a7d4077a3cf9c22d3">llvm::DataLayout::getPrefTypeAlignment</a></div><div class="ttdeci">unsigned getPrefTypeAlignment(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8cpp_source.html#l00600">DataLayout.cpp:600</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_a51940249c228e46f1f97932e5f4b8450"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a51940249c228e46f1f97932e5f4b8450">llvm::ConstantExpr::getGetElementPtr</a></div><div class="ttdeci">static Constant * getGetElementPtr(Constant *C, ArrayRef&lt; Constant * &gt; IdxList, bool InBounds=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l01012">Constants.h:1012</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html_a1149c7eeefca671ac2685bca13843568"><div class="ttname"><a href="classllvm_1_1StoreInst.html#a1149c7eeefca671ac2685bca13843568">llvm::StoreInst::isSimple</a></div><div class="ttdeci">bool isSimple() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00338">Instructions.h:338</a></div></div>
<div class="ttc" id="README-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00427">README-SSE.txt:427</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01978">Instructions.h:1978</a></div></div>
<div class="ttc" id="classllvm_1_1PointerType_html_a050a395d1656e546679d8b144d951bb2"><div class="ttname"><a href="classllvm_1_1PointerType.html#a050a395d1656e546679d8b144d951bb2">llvm::PointerType::get</a></div><div class="ttdeci">static PointerType * get(Type *ElementType, unsigned AddressSpace)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00730">Type.cpp:730</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombineWorklist_html_a371049452a97755a1b39dea46017439a"><div class="ttname"><a href="classllvm_1_1InstCombineWorklist.html#a371049452a97755a1b39dea46017439a">llvm::InstCombineWorklist::Add</a></div><div class="ttdeci">void Add(Instruction *I)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineWorklist_8h_source.html#l00038">InstCombineWorklist.h:38</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_ac830a02a025d9d5a5dc53c444cf625ee"><div class="ttname"><a href="classllvm_1_1Type.html#ac830a02a025d9d5a5dc53c444cf625ee">llvm::Type::isPtrOrPtrVectorTy</a></div><div class="ttdeci">bool isPtrOrPtrVectorTy() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00225">Type.h:225</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_aca229503e4f5c83a187a6a921c625fa8"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">llvm::BasicBlock::getParent</a></div><div class="ttdeci">const Function * getParent() const </div><div class="ttdoc">Return the enclosing method, or null if none. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00116">BasicBlock.h:116</a></div></div>
<div class="ttc" id="classllvm_1_1PredIterator_html"><div class="ttname"><a href="classllvm_1_1PredIterator.html">llvm::PredIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="Support_2CFG_8h_source.html#l00029">Support/CFG.h:29</a></div></div>
<div class="ttc" id="classllvm_1_1MDNode_html"><div class="ttname"><a href="classllvm_1_1MDNode.html">llvm::MDNode</a></div><div class="ttdoc">MDNode - a tuple of other values. </div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00073">Metadata.h:73</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a33603355becfb1a050b62aa015c1cc57"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a33603355becfb1a050b62aa015c1cc57">llvm::BasicBlock::front</a></div><div class="ttdeci">const Instruction &amp; front() const </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00205">BasicBlock.h:205</a></div></div>
<div class="ttc" id="namespacellvm_html_a2bb15e529c55b5356aabfb006d1e98aa"><div class="ttname"><a href="namespacellvm.html#a2bb15e529c55b5356aabfb006d1e98aa">llvm::isSafeToLoadUnconditionally</a></div><div class="ttdeci">bool isSafeToLoadUnconditionally(Value *V, Instruction *ScanFrom, unsigned Align, const DataLayout *TD=0)</div><div class="ttdef"><b>Definition:</b> <a href="Loads_8cpp_source.html#l00056">Loads.cpp:56</a></div></div>
<div class="ttc" id="classllvm_1_1PointerType_html_a921061a57ec3cfbaf6422f09f7d79fc3"><div class="ttname"><a href="classllvm_1_1PointerType.html#a921061a57ec3cfbaf6422f09f7d79fc3">llvm::PointerType::getAddressSpace</a></div><div class="ttdeci">unsigned getAddressSpace() const </div><div class="ttdoc">Return the address space of the Pointer type. </div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00445">DerivedTypes.h:445</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html"><div class="ttname"><a href="classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00136">Instructions.h:136</a></div></div>
<div class="ttc" id="InstCombineLoadStoreAlloca_8cpp_html_a4d6752ff1d6270eefda9482e7694527c"><div class="ttname"><a href="InstCombineLoadStoreAlloca_8cpp.html#a4d6752ff1d6270eefda9482e7694527c">pointsToConstantGlobal</a></div><div class="ttdeci">static bool pointsToConstantGlobal(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineLoadStoreAlloca_8cpp_source.html#l00029">InstCombineLoadStoreAlloca.cpp:29</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a05186fa23e4d11b9855a9599ba87a4b7"><div class="ttname"><a href="classllvm_1_1Type.html#a05186fa23e4d11b9855a9599ba87a4b7">llvm::Type::getInt64Ty</a></div><div class="ttdeci">static IntegerType * getInt64Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00242">Type.cpp:242</a></div></div>
<div class="ttc" id="classllvm_1_1User_html"><div class="ttname"><a href="classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00033">User.h:33</a></div></div>
<div class="ttc" id="Statistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_a156c478ee8e7d1602143cdbad4bd5385"><div class="ttname"><a href="classllvm_1_1LoadInst.html#a156c478ee8e7d1602143cdbad4bd5385">llvm::LoadInst::isSimple</a></div><div class="ttdeci">bool isSimple() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00218">Instructions.h:218</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a7bd545769621a0a9d2cfb074f86f4295"><div class="ttname"><a href="classllvm_1_1Instruction.html#a7bd545769621a0a9d2cfb074f86f4295">llvm::Instruction::setDebugLoc</a></div><div class="ttdeci">void setDebugLoc(const DebugLoc &amp;Loc)</div><div class="ttdoc">setDebugLoc - Set the debug location information for this instruction. </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00175">Instruction.h:175</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_aa6574d526b3e38a28f688a7bb4325c2c"><div class="ttname"><a href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">llvm::Constant::getNullValue</a></div><div class="ttdeci">static Constant * getNullValue(Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00111">Constants.cpp:111</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00167">Value.cpp:167</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00193">BasicBlock.h:193</a></div></div>
<div class="ttc" id="classllvm_1_1AllocaInst_html_a066eba0d0eb9d9655c9b580a2a279b0a"><div class="ttname"><a href="classllvm_1_1AllocaInst.html#a066eba0d0eb9d9655c9b580a2a279b0a">llvm::AllocaInst::isArrayAllocation</a></div><div class="ttdeci">bool isArrayAllocation() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l00900">Instructions.cpp:900</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a225cbda41f4c27fbb522833e31cb18f9"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a225cbda41f4c27fbb522833e31cb18f9">llvm::BasicBlock::getFirstNonPHIOrDbg</a></div><div class="ttdeci">Instruction * getFirstNonPHIOrDbg()</div><div class="ttdoc">Returns a pointer to the first instruction in this block that is not a PHINode or a debug intrinsic...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00140">BasicBlock.cpp:140</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a382131e712e55e8324fbd5068de17b78"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a382131e712e55e8324fbd5068de17b78">llvm::BranchInst::isUnconditional</a></div><div class="ttdeci">bool isUnconditional() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02391">Instructions.h:2391</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a5acf2a841db50684c87133f36bdd00a1"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a5acf2a841db50684c87133f36bdd00a1">llvm::InstCombiner::getDataLayout</a></div><div class="ttdeci">DataLayout * getDataLayout() const </div><div class="ttdef"><b>Definition:</b> <a href="InstCombine_8h_source.html#l00102">InstCombine.h:102</a></div></div>
<div class="ttc" id="classllvm_1_1value__use__iterator_html"><div class="ttname"><a href="classllvm_1_1value__use__iterator.html">llvm::value_use_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00168">Use.h:168</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html"><div class="ttname"><a href="classllvm_1_1SelectInst.html">llvm::SelectInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01430">Instructions.h:1430</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html"><div class="ttname"><a href="classllvm_1_1StructType.html">llvm::StructType</a></div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00187">DerivedTypes.h:187</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00035">APInt.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html"><div class="ttname"><a href="classllvm_1_1InstCombiner.html">llvm::InstCombiner</a></div><div class="ttdoc">InstCombiner - The -instcombine pass. </div><div class="ttdef"><b>Definition:</b> <a href="InstCombine_8h_source.html#l00072">InstCombine.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1AllocaInst_html_a214c60dbb4f1ed467e5a3420db6eefd6"><div class="ttname"><a href="classllvm_1_1AllocaInst.html#a214c60dbb4f1ed467e5a3420db6eefd6">llvm::AllocaInst::getAllocatedType</a></div><div class="ttdeci">Type * getAllocatedType() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l00906">Instructions.cpp:906</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_afa0b2fa29ba074f2b6ec9ac11163f2d9"><div class="ttname"><a href="classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">llvm::Instruction::CastOps</a></div><div class="ttdeci">CastOps</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00401">Instruction.h:401</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00031">Instruction.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a2877bfb208e8e523e5d0eda3488c9ade"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a2877bfb208e8e523e5d0eda3488c9ade">llvm::IRBuilder::CreateAlloca</a></div><div class="ttdeci">AllocaInst * CreateAlloca(Type *Ty, Value *ArraySize=0, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00873">IRBuilder.h:873</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_a4df7359cb36b166c0878e16291cbe183"><div class="ttname"><a href="classllvm_1_1LoadInst.html#a4df7359cb36b166c0878e16291cbe183">llvm::LoadInst::getSynchScope</a></div><div class="ttdeci">SynchronizationScope getSynchScope() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00199">Instructions.h:199</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html_a6cac341b1b354174d0e0a81a2e7a9109"><div class="ttname"><a href="classllvm_1_1StoreInst.html#a6cac341b1b354174d0e0a81a2e7a9109">llvm::StoreInst::getPointerAddressSpace</a></div><div class="ttdeci">unsigned getPointerAddressSpace() const </div><div class="ttdoc">Returns the address space of the pointer operand. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00351">Instructions.h:351</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_a06e392f502bff86e8f85092c135d2baf"><div class="ttname"><a href="classllvm_1_1LoadInst.html#a06e392f502bff86e8f85092c135d2baf">llvm::LoadInst::setAtomic</a></div><div class="ttdeci">void setAtomic(AtomicOrdering Ordering, SynchronizationScope SynchScope=CrossThread)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00212">Instructions.h:212</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html">llvm::ConstantExpr</a></div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00790">Constants.h:790</a></div></div>
<div class="ttc" id="InstCombineLoadStoreAlloca_8cpp_html_ac61e162a34ba20be2024264e6d8d9a53"><div class="ttname"><a href="InstCombineLoadStoreAlloca_8cpp.html#ac61e162a34ba20be2024264e6d8d9a53">InstCombineStoreToCast</a></div><div class="ttdeci">static Instruction * InstCombineStoreToCast(InstCombiner &amp;IC, StoreInst &amp;SI)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineLoadStoreAlloca_8cpp_source.html#l00453">InstCombineLoadStoreAlloca.cpp:453</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorBase_html_a8a8df4d85555c7954a95f86080cd3b64"><div class="ttname"><a href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">llvm::SmallVectorBase::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const </div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00056">SmallVector.h:56</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayType_html"><div class="ttname"><a href="classllvm_1_1ArrayType.html">llvm::ArrayType</a></div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00332">DerivedTypes.h:332</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a74e70ecbb79defbbfa6f6c87f76155bf"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">llvm::BranchInst::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02406">Instructions.h:2406</a></div></div>
<div class="ttc" id="classllvm_1_1BitCastInst_html"><div class="ttname"><a href="classllvm_1_1BitCastInst.html">llvm::BitCastInst</a></div><div class="ttdoc">This class represents a no-op cast from one type to another. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03587">Instructions.h:3587</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html"><div class="ttname"><a href="classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00255">Instructions.h:255</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a9aae7c60b468bcf6db982dc76e6c703a"><div class="ttname"><a href="classllvm_1_1Type.html#a9aae7c60b468bcf6db982dc76e6c703a">llvm::Type::isArrayTy</a></div><div class="ttdeci">bool isArrayTy() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00216">Type.h:216</a></div></div>
<div class="ttc" id="classllvm_1_1SequentialType_html_a39f2c3a62f293faf11ac28b15bc53359"><div class="ttname"><a href="classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">llvm::SequentialType::getElementType</a></div><div class="ttdeci">Type * getElementType() const </div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00319">DerivedTypes.h:319</a></div></div>
<div class="ttc" id="classllvm_1_1PointerType_html"><div class="ttname"><a href="classllvm_1_1PointerType.html">llvm::PointerType</a></div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00425">DerivedTypes.h:425</a></div></div>
<div class="ttc" id="classllvm_1_1GetElementPtrInst_html"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html">llvm::GetElementPtrInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00709">Instructions.h:709</a></div></div>
<div class="ttc" id="README__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A,*B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00091">README_ALTIVEC.txt:91</a></div></div>
<div class="ttc" id="InstCombineLoadStoreAlloca_8cpp_html_a3265ae31efc424def9bd2a560a8a4c5a"><div class="ttname"><a href="InstCombineLoadStoreAlloca_8cpp.html#a3265ae31efc424def9bd2a560a8a4c5a">equivalentAddressValues</a></div><div class="ttdeci">static bool equivalentAddressValues(Value *A, Value *B)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineLoadStoreAlloca_8cpp_source.html#l00545">InstCombineLoadStoreAlloca.cpp:545</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html_a3084f1dd69d67e1965fd1fe721a69f2e"><div class="ttname"><a href="classllvm_1_1StoreInst.html#a3084f1dd69d67e1965fd1fe721a69f2e">llvm::StoreInst::getAlignment</a></div><div class="ttdeci">unsigned getAlignment() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00301">Instructions.h:301</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00044">Type.h:44</a></div></div>
<div class="ttc" id="classllvm_1_1TerminatorInst_html_a3aac3b6c36415a2b08f65ead9e3e51e7"><div class="ttname"><a href="classllvm_1_1TerminatorInst.html#a3aac3b6c36415a2b08f65ead9e3e51e7">llvm::TerminatorInst::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned idx) const </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00065">InstrTypes.h:65</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html"><div class="ttname"><a href="classllvm_1_1BranchInst.html">llvm::BranchInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02350">Instructions.h:2350</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a6f725580f7834e2ca90762965866dad4"><div class="ttname"><a href="classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">llvm::Type::isVectorTy</a></div><div class="ttdeci">bool isVectorTy() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00229">Type.h:229</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1AllocaInst_html_a597c918a615f26a0cea7adb84f06fc3f"><div class="ttname"><a href="classllvm_1_1AllocaInst.html#a597c918a615f26a0cea7adb84f06fc3f">llvm::AllocaInst::getType</a></div><div class="ttdeci">PointerType * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00091">Instructions.h:91</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_af7c1b579548e5b90a8db22d2f26a4afc"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#af7c1b579548e5b90a8db22d2f26a4afc">llvm::InstCombiner::ReplaceInstUsesWith</a></div><div class="ttdeci">Instruction * ReplaceInstUsesWith(Instruction &amp;I, Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombine_8h_source.html#l00267">InstCombine.h:267</a></div></div>
<div class="ttc" id="classllvm_1_1AllocaInst_html_ad441932c20e5b9ba36c8c72a6c7f5ec3"><div class="ttname"><a href="classllvm_1_1AllocaInst.html#ad441932c20e5b9ba36c8c72a6c7f5ec3">llvm::AllocaInst::getAlignment</a></div><div class="ttdeci">unsigned getAlignment() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00103">Instructions.h:103</a></div></div>
<div class="ttc" id="namespacellvm_html_a7e108932dc3da5294aed99a353aac9c4"><div class="ttname"><a href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">llvm::pred_begin</a></div><div class="ttdeci">Interval::pred_iterator pred_begin(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00117">Interval.h:117</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_aab8e16a35183ce39aad394714087bcff"><div class="ttname"><a href="classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">llvm::Instruction::getDebugLoc</a></div><div class="ttdeci">const DebugLoc &amp; getDebugLoc() const </div><div class="ttdoc">getDebugLoc - Return the debug location for this node as a DebugLoc. </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00178">Instruction.h:178</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_afb5e83bf5123ff7c51058eb0ebebcdc6"><div class="ttname"><a href="classllvm_1_1PHINode.html#afb5e83bf5123ff7c51058eb0ebebcdc6">llvm::PHINode::Create</a></div><div class="ttdeci">static PHINode * Create(Type *Ty, unsigned NumReservedValues, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02013">Instructions.h:2013</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a7ce7bd9b2ab04aed2abf9be5b8c74d15"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a7ce7bd9b2ab04aed2abf9be5b8c74d15">llvm::InstCombiner::visitAllocaInst</a></div><div class="ttdeci">Instruction * visitAllocaInst(AllocaInst &amp;AI)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineLoadStoreAlloca_8cpp_source.html#l00153">InstCombineLoadStoreAlloca.cpp:153</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00088">User.h:88</a></div></div>
<div class="ttc" id="namespacellvm_html_a5eeaf08e96168c2cac8960f87f0ef360"><div class="ttname"><a href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">llvm::pred_end</a></div><div class="ttdeci">Interval::pred_iterator pred_end(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00120">Interval.h:120</a></div></div>
<div class="ttc" id="classllvm_1_1LLVMContext_html_a0869c4dfee48696ce863fcd367eba52da66682b7e33233c8e51196bbf274726a2"><div class="ttname"><a href="classllvm_1_1LLVMContext.html#a0869c4dfee48696ce863fcd367eba52da66682b7e33233c8e51196bbf274726a2">llvm::LLVMContext::MD_tbaa</a></div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00047">LLVMContext.h:47</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_aaca490f77b8a0ca6b013db8c0de18972"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#aaca490f77b8a0ca6b013db8c0de18972">llvm::InstCombiner::Worklist</a></div><div class="ttdeci">InstCombineWorklist Worklist</div><div class="ttdoc">Worklist - All of the instructions that need to be simplified. </div><div class="ttdef"><b>Definition:</b> <a href="InstCombine_8h_source.html#l00082">InstCombine.h:82</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_a218ef27c964707a907f12db0f9b002ba"><div class="ttname"><a href="classllvm_1_1LoadInst.html#a218ef27c964707a907f12db0f9b002ba">llvm::LoadInst::setAlignment</a></div><div class="ttdeci">void setAlignment(unsigned Align)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l01065">Instructions.cpp:1065</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a6e33228c0d5bb3b72f357677fa105185"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a6e33228c0d5bb3b72f357677fa105185">llvm::InstCombiner::Builder</a></div><div class="ttdeci">BuilderTy * Builder</div><div class="ttdef"><b>Definition:</b> <a href="InstCombine_8h_source.html#l00087">InstCombine.h:87</a></div></div>
<div class="ttc" id="classllvm_1_1MDNode_html_a3c210e8905029a012df3384a7eeb63ad"><div class="ttname"><a href="classllvm_1_1MDNode.html#a3c210e8905029a012df3384a7eeb63ad">llvm::MDNode::getMostGenericTBAA</a></div><div class="ttdeci">static MDNode * getMostGenericTBAA(MDNode *A, MDNode *B)</div><div class="ttdoc">Methods for metadata merging. </div><div class="ttdef"><b>Definition:</b> <a href="TypeBasedAliasAnalysis_8cpp_source.html#l00556">TypeBasedAliasAnalysis.cpp:556</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html">llvm::GlobalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalVariable_8h_source.html#l00035">GlobalVariable.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a2eba483f5cc876e824aa6c085736086b"><div class="ttname"><a href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">llvm::Type::isPointerTy</a></div><div class="ttdeci">bool isPointerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00220">Type.h:220</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a1f5e8b8d535e593299355288aa0cbd67"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a1f5e8b8d535e593299355288aa0cbd67">llvm::IRBuilder::CreateInBoundsGEP</a></div><div class="ttdeci">Value * CreateInBoundsGEP(Value *Ptr, ArrayRef&lt; Value * &gt; IdxList, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00944">IRBuilder.h:944</a></div></div>
<div class="ttc" id="classllvm_1_1UndefValue_html_a4ae5ff22b700a42bcc5d889233721335"><div class="ttname"><a href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">llvm::UndefValue::get</a></div><div class="ttdeci">static UndefValue * get(Type *T)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01334">Constants.cpp:1334</a></div></div>
<div class="ttc" id="InstCombineLoadStoreAlloca_8cpp_html_a2814225e292f1a13143e4af3086a33d6"><div class="ttname"><a href="InstCombineLoadStoreAlloca_8cpp.html#a2814225e292f1a13143e4af3086a33d6">InstCombineLoadCast</a></div><div class="ttdeci">static Instruction * InstCombineLoadCast(InstCombiner &amp;IC, LoadInst &amp;LI, const DataLayout *TD)</div><div class="ttdoc">InstCombineLoadCast - Fold &amp;#39;load (cast P)&amp;#39; -&gt; cast (load P)&amp;#39; when possible. </div><div class="ttdef"><b>Definition:</b> <a href="InstCombineLoadStoreAlloca_8cpp_source.html#l00283">InstCombineLoadStoreAlloca.cpp:283</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_af85a4828b6b5a8de7fc0a55cc0e5b52f"><div class="ttname"><a href="classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">All values hold a context through their type. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00517">Value.cpp:517</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9247a212ea89acc9573fa7e7f557eaba"><div class="ttname"><a href="classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">llvm::Instruction::setMetadata</a></div><div class="ttdeci">void setMetadata(unsigned KindID, MDNode *Node)</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l00589">Metadata.cpp:589</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_ae84bb2408dfffa4e8b5fe2ce0714a3bd"><div class="ttname"><a href="classllvm_1_1DataLayout.html#ae84bb2408dfffa4e8b5fe2ce0714a3bd">llvm::DataLayout::getIntPtrType</a></div><div class="ttdeci">IntegerType * getIntPtrType(LLVMContext &amp;C, unsigned AddressSpace=0) const </div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8cpp_source.html#l00610">DataLayout.cpp:610</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_abb381519d34dcb9ccf673bf7689d0721"><div class="ttname"><a href="classllvm_1_1DataLayout.html#abb381519d34dcb9ccf673bf7689d0721">llvm::DataLayout::getABITypeAlignment</a></div><div class="ttdeci">unsigned getABITypeAlignment(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8cpp_source.html#l00582">DataLayout.cpp:582</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html_aba6b1ee9f629801928eb72258021fb72"><div class="ttname"><a href="classllvm_1_1StoreInst.html#aba6b1ee9f629801928eb72258021fb72">llvm::StoreInst::getOrdering</a></div><div class="ttdeci">AtomicOrdering getOrdering() const </div><div class="ttdoc">Returns the ordering effect of this store. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00308">Instructions.h:308</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="namespacellvm_html_a17aa92f2452d8c00efec55c96aa23a66"><div class="ttname"><a href="namespacellvm.html#a17aa92f2452d8c00efec55c96aa23a66">llvm::FindAvailableLoadedValue</a></div><div class="ttdeci">Value * FindAvailableLoadedValue(Value *Ptr, BasicBlock *ScanBB, BasicBlock::iterator &amp;ScanFrom, unsigned MaxInstsToScan=6, AliasAnalysis *AA=0, MDNode **TBAATag=0)</div><div class="ttdef"><b>Definition:</b> <a href="Loads_8cpp_source.html#l00139">Loads.cpp:139</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a1d6fcc02e91ba24510aba42660c90e29"><div class="ttname"><a href="classllvm_1_1DataLayout.html#a1d6fcc02e91ba24510aba42660c90e29">llvm::DataLayout::getTypeAllocSize</a></div><div class="ttdeci">uint64_t getTypeAllocSize(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00326">DataLayout.h:326</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00880">SmallVector.h:880</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00111">Value.h:111</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_aafa29112cbe02e4adc9b36752c771991"><div class="ttname"><a href="classllvm_1_1Instruction.html#aafa29112cbe02e4adc9b36752c771991">llvm::Instruction::getMetadata</a></div><div class="ttdeci">MDNode * getMetadata(unsigned KindID) const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00140">Instruction.h:140</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_aeb96f1a88b4e58c34a988eebd843f688"><div class="ttname"><a href="classllvm_1_1LoadInst.html#aeb96f1a88b4e58c34a988eebd843f688">llvm::LoadInst::isVolatile</a></div><div class="ttdeci">bool isVolatile() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00170">Instructions.h:170</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a9105541412dab869e18b3cceebfff07d"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool isSigned=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00492">Constants.cpp:492</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_a8c0a29ecc14dc5afe7573bf616da2361"><div class="ttname"><a href="classllvm_1_1LoadInst.html#a8c0a29ecc14dc5afe7573bf616da2361">llvm::LoadInst::getOrdering</a></div><div class="ttdeci">AtomicOrdering getOrdering() const </div><div class="ttdoc">Returns the ordering effect of this fence. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00188">Instructions.h:188</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a30f2c362631e3728d2f47a8203071ade"><div class="ttname"><a href="classllvm_1_1Function.html#a30f2c362631e3728d2f47a8203071ade">llvm::Function::getEntryBlock</a></div><div class="ttdeci">const BasicBlock &amp; getEntryBlock() const </div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00380">Function.h:380</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_a2efd55778217d045b121de696c4f6452"><div class="ttname"><a href="classllvm_1_1LoadInst.html#a2efd55778217d045b121de696c4f6452">llvm::LoadInst::getPointerAddressSpace</a></div><div class="ttdeci">unsigned getPointerAddressSpace() const </div><div class="ttdoc">Returns the address space of the pointer operand. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00228">Instructions.h:228</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a5fa9b8e1842b354f64c1ba6be0a4a17f"><div class="ttname"><a href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">llvm::User::setOperand</a></div><div class="ttdeci">void setOperand(unsigned i, Value *Val)</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00092">User.h:92</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00101">Debug.cpp:101</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a6e328feb83afa5cf1c966d6704e43fc1"><div class="ttname"><a href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">llvm::Type::isIntegerTy</a></div><div class="ttdeci">bool isIntegerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00196">Type.h:196</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_aed87738661d539150b3fc4bb46e36aa3"><div class="ttname"><a href="classllvm_1_1Type.html#aed87738661d539150b3fc4bb46e36aa3">llvm::Type::isStructTy</a></div><div class="ttdeci">bool isStructTy() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00212">Type.h:212</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a413abcab8dbc3900fc2fde96a5d8fca6"><div class="ttname"><a href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">llvm::Value::use_begin</a></div><div class="ttdeci">use_iterator use_begin()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00150">Value.h:150</a></div></div>
<div class="ttc" id="classllvm_1_1MemTransferInst_html_a1d23e59237a8e4a61f4af0deb7320104"><div class="ttname"><a href="classllvm_1_1MemTransferInst.html#a1d23e59237a8e4a61f4af0deb7320104">llvm::MemTransferInst::getSource</a></div><div class="ttdeci">Value * getSource() const </div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00222">IntrinsicInst.h:222</a></div></div>
<div class="ttc" id="namespacellvm_html_a3dd948f1535b4b28f2a7d45a5c11a34a"><div class="ttname"><a href="namespacellvm.html#a3dd948f1535b4b28f2a7d45a5c11a34a">llvm::getOrEnforceKnownAlignment</a></div><div class="ttdeci">unsigned getOrEnforceKnownAlignment(Value *V, unsigned PrefAlign, const DataLayout *TD=0)</div><div class="ttdef"><b>Definition:</b> <a href="Local_8cpp_source.html#l00922">Local.cpp:922</a></div></div>
<div class="ttc" id="classllvm_1_1MemTransferInst_html"><div class="ttname"><a href="classllvm_1_1MemTransferInst.html">llvm::MemTransferInst</a></div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00213">IntrinsicInst.h:213</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a30dd396c5b40cd86c1591872e574ccdf"><div class="ttname"><a href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">llvm::Type::getInt32Ty</a></div><div class="ttdeci">static IntegerType * getInt32Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00241">Type.cpp:241</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_ad1168fc42bcba1b71217a4969483671a"><div class="ttname"><a href="classllvm_1_1LoadInst.html#ad1168fc42bcba1b71217a4969483671a">llvm::LoadInst::getAlignment</a></div><div class="ttdeci">unsigned getAlignment() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00181">Instructions.h:181</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a5cb76a65b6524dba1493dd2b9dc3abbe"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">TerminatorInst * getTerminator()</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00120">BasicBlock.cpp:120</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a085b82f074c28030fb8e194377ed2d0c"><div class="ttname"><a href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">llvm::Value::hasOneUse</a></div><div class="ttdeci">bool hasOneUse() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00161">Value.h:161</a></div></div>
<div class="ttc" id="InstCombineLoadStoreAlloca_8cpp_html_a4f9d43ded556369337141920c09f2294"><div class="ttname"><a href="InstCombineLoadStoreAlloca_8cpp.html#a4f9d43ded556369337141920c09f2294">isOnlyCopiedFromConstantGlobal</a></div><div class="ttdeci">static bool isOnlyCopiedFromConstantGlobal(Value *V, MemTransferInst *&amp;TheCopy, SmallVectorImpl&lt; Instruction * &gt; &amp;ToDelete, bool IsOffset=false)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineLoadStoreAlloca_8cpp_source.html#l00047">InstCombineLoadStoreAlloca.cpp:47</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayType_html_adf411edc4f135b570ab218079474ce77"><div class="ttname"><a href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">llvm::ArrayType::get</a></div><div class="ttdeci">static ArrayType * get(Type *ElementType, uint64_t NumElements)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00679">Type.cpp:679</a></div></div>
<div class="ttc" id="BasicBlockUtils_8h_html"><div class="ttname"><a href="BasicBlockUtils_8h.html">BasicBlockUtils.h</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_af1dcd6c00214bd9c8c8b3c9f9aedcc04"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#af1dcd6c00214bd9c8c8b3c9f9aedcc04">llvm::InstCombiner::InsertNewInstBefore</a></div><div class="ttdeci">Instruction * InsertNewInstBefore(Instruction *New, Instruction &amp;Old)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombine_8h_source.html#l00244">InstCombine.h:244</a></div></div>
<div class="ttc" id="ARMSubtarget_8cpp_html_a4bd80d4e433d9f72af26b364036900dc"><div class="ttname"><a href="ARMSubtarget_8cpp.html#a4bd80d4e433d9f72af26b364036900dc">Align</a></div><div class="ttdeci">static cl::opt&lt; AlignMode &gt; Align(cl::desc(&quot;Load/store alignment support&quot;), cl::Hidden, cl::init(DefaultAlign), cl::values(clEnumValN(DefaultAlign,&quot;arm-default-align&quot;,&quot;Generate unaligned accesses only on hardware/OS &quot;&quot;combinations that are known to support them&quot;), clEnumValN(StrictAlign,&quot;arm-strict-align&quot;,&quot;Disallow all unaligned memory accesses&quot;), clEnumValN(NoStrictAlign,&quot;arm-no-strict-align&quot;,&quot;Allow unaligned memory accesses&quot;), clEnumValEnd))</div></div>
<div class="ttc" id="Local_8h_html"><div class="ttname"><a href="Local_8h.html">Local.h</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a9f5d14332db3ce442883889831474db6"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a9f5d14332db3ce442883889831474db6">llvm::InstCombiner::visitLoadInst</a></div><div class="ttdeci">Instruction * visitLoadInst(LoadInst &amp;LI)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineLoadStoreAlloca_8cpp_source.html#l00341">InstCombineLoadStoreAlloca.cpp:341</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00066">Value.h:66</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html_a50d3891cd26db1308e81540f468de8c8"><div class="ttname"><a href="classllvm_1_1StoreInst.html#a50d3891cd26db1308e81540f468de8c8">llvm::StoreInst::setAlignment</a></div><div class="ttdeci">void setAlignment(unsigned Align)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l01204">Instructions.cpp:1204</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a5c4ef93d3d451f4515d5d4a333e19a5d"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a5c4ef93d3d451f4515d5d4a333e19a5d">llvm::InstCombiner::visitStoreInst</a></div><div class="ttdeci">Instruction * visitStoreInst(StoreInst &amp;SI)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineLoadStoreAlloca_8cpp_source.html#l00566">InstCombineLoadStoreAlloca.cpp:566</a></div></div>
<div class="ttc" id="classllvm_1_1AllocaInst_html_a642f52c0f081ad0de10258c1d8d67b23"><div class="ttname"><a href="classllvm_1_1AllocaInst.html#a642f52c0f081ad0de10258c1d8d67b23">llvm::AllocaInst::getArraySize</a></div><div class="ttdeci">const Value * getArraySize() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00086">Instructions.h:86</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_a0adb2c1eb77982ea83e5645c9d8bf3d1"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a0adb2c1eb77982ea83e5645c9d8bf3d1">llvm::InstCombiner::EraseInstFromFunction</a></div><div class="ttdeci">Instruction * EraseInstFromFunction(Instruction &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombine_8h_source.html#l00286">InstCombine.h:286</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_af67d1f3a518964d80a109bb3d9d5cf1e"><div class="ttname"><a href="classllvm_1_1Instruction.html#af67d1f3a518964d80a109bb3d9d5cf1e">llvm::Instruction::moveBefore</a></div><div class="ttdeci">void moveBefore(Instruction *MovePos)</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00091">Instruction.cpp:91</a></div></div>
<div class="ttc" id="namespacellvm_1_1A64CC_html_af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442"><div class="ttname"><a href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">llvm::A64CC::MI</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00035">AArch64BaseInfo.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a9dc5111b1a9b1d5c4652d50f74fe850b"><div class="ttname"><a href="classllvm_1_1Type.html#a9dc5111b1a9b1d5c4652d50f74fe850b">llvm::Type::isSized</a></div><div class="ttdeci">bool isSized() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00278">Type.h:278</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_add914112e0b2935dda06ad5dfd3a31db"><div class="ttname"><a href="classllvm_1_1DataLayout.html#add914112e0b2935dda06ad5dfd3a31db">llvm::DataLayout::getTypeSizeInBits</a></div><div class="ttdeci">uint64_t getTypeSizeInBits(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00459">DataLayout.h:459</a></div></div>
<div class="ttc" id="Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00097">Debug.h:97</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9f729c6c3e0de4a55dc5a3693fd4a9eb"><div class="ttname"><a href="classllvm_1_1Instruction.html#a9f729c6c3e0de4a55dc5a3693fd4a9eb">llvm::Instruction::isSameOperationAs</a></div><div class="ttdeci">bool isSameOperationAs(const Instruction *I, unsigned flags=0) const </div><div class="ttdoc">Determine if one instruction is the same operation as another. </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00334">Instruction.cpp:334</a></div></div>
<div class="ttc" id="classllvm_1_1GetElementPtrInst_html_a3e10b4db1ded36654416d3aed2bc56ba"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html#a3e10b4db1ded36654416d3aed2bc56ba">llvm::GetElementPtrInst::CreateInBounds</a></div><div class="ttdeci">static GetElementPtrInst * CreateInBounds(Value *Ptr, ArrayRef&lt; Value * &gt; IdxList, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00743">Instructions.h:743</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_ab1cd5a3713b93a33f89a2086d473cf6e"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ab1cd5a3713b93a33f89a2086d473cf6e">llvm::BasicBlock::getFirstInsertionPt</a></div><div class="ttdeci">iterator getFirstInsertionPt()</div><div class="ttdoc">Returns an iterator to the first instruction in this block that is suitable for inserting a non-PHI i...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00170">BasicBlock.cpp:170</a></div></div>
<div class="ttc" id="classllvm_1_1CallSite_html"><div class="ttname"><a href="classllvm_1_1CallSite.html">llvm::CallSite</a></div><div class="ttdef"><b>Definition:</b> <a href="CallSite_8h_source.html#l00295">CallSite.h:295</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a90cca76dd78688687e0d697679dbc799"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional ldr LCPI1_0 ldr ldr tst movne lsr ldr LCPI1_1 and r0 bx lr it saves an instruction and a register It might be profitable to cse MOVi16 if there are lots of bit immediates with the same bottom half Robert Muth started working on an alternate jump table implementation that does not put the tables in line in the text This is more like the llvm default jump table implementation This might be useful sometime Several revisions of patches are on the mailing beginning while CMP sets them like a subtract Therefore to be able to use CMN for comparisons other than the Z we ll need additional logic to reverse the conditionals associated with the comparison Perhaps a pseudo instruction for the with a post codegen pass to clean up and handle the condition codes See PR5694 for testcase Given the following on int B</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00592">Target/ARM/README.txt:592</a></div></div>
<div class="ttc" id="classllvm_1_1InstCombiner_html_ad9114d86dbeaa0f40b79579f3836c5c6"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#ad9114d86dbeaa0f40b79579f3836c5c6">llvm::InstCombiner::visitAllocSite</a></div><div class="ttdeci">Instruction * visitAllocSite(Instruction &amp;FI)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCombining_8cpp_source.html#l01481">InstructionCombining.cpp:1481</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00052">Instruction.h:52</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90ae365354e47542c51f9bd46e329e3323e"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ae365354e47542c51f9bd46e329e3323e">llvm::Intrinsic::lifetime_start</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l01255">Intrinsics.h:1255</a></div></div>
<div class="ttc" id="classllvm_1_1IntrinsicInst_html"><div class="ttname"><a href="classllvm_1_1IntrinsicInst.html">llvm::IntrinsicInst</a></div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00036">IntrinsicInst.h:36</a></div></div>
<div class="ttc" id="classllvm_1_1AllocaInst_html"><div class="ttname"><a href="classllvm_1_1AllocaInst.html">llvm::AllocaInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00058">Instructions.h:58</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 22:59:01 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
