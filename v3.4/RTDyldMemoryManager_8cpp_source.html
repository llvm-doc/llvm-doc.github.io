<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: RTDyldMemoryManager.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('RTDyldMemoryManager_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">RTDyldMemoryManager.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="RTDyldMemoryManager_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===-- RTDyldMemoryManager.cpp - Memory manager for MC-JIT -----*- C++ -*-===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// Implementation of the runtime dynamic memory manager base class.</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;llvm/Config/config.h&quot;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="RTDyldMemoryManager_8h.html">llvm/ExecutionEngine/RTDyldMemoryManager.h</a>&quot;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DynamicLibrary_8h.html">llvm/Support/DynamicLibrary.h</a>&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ErrorHandling_8h.html">llvm/Support/ErrorHandling.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;cstdlib&gt;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#ifdef __linux__</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;  <span class="comment">// These includes used by RTDyldMemoryManager::getPointerToNamedFunction()</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;  <span class="comment">// for Glibc trickery. See comments in this function for more information.</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">  #ifdef HAVE_SYS_STAT_H</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">    #include &lt;sys/stat.h&gt;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">  #endif</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">  #include &lt;fcntl.h&gt;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">  #include &lt;unistd.h&gt;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="classllvm_1_1RTDyldMemoryManager.html#aecae7f61cef6583e1cb2c06e0d7c6e03">   33</a></span>&#160;<a class="code" href="classllvm_1_1RTDyldMemoryManager.html#aecae7f61cef6583e1cb2c06e0d7c6e03">RTDyldMemoryManager::~RTDyldMemoryManager</a>() {}</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">// Determine whether we can register EH tables.</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#if (defined(__GNUC__) &amp;&amp; !defined(__ARM_EABI__) &amp;&amp; !defined(__ia64__) &amp;&amp; \</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">     !defined(__SEH__) &amp;&amp; !defined(__USING_SJLJ_EXCEPTIONS__))</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#define HAVE_EHTABLE_SUPPORT 1</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="RTDyldMemoryManager_8cpp.html#aea0347f4a1f95008ac7211e5fd0e90c1">   40</a></span>&#160;<span class="preprocessor">#define HAVE_EHTABLE_SUPPORT 0</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#if HAVE_EHTABLE_SUPPORT</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> <span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#ad1062d1f26151c8aa1f389c08bcecfbf">__register_frame</a>(<span class="keywordtype">void</span>*);</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> <span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#a4d02dac813aec75cc89ee38752096d4f">__deregister_frame</a>(<span class="keywordtype">void</span>*);</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">// The building compiler does not have __(de)register_frame but</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">// it may be found at runtime in a dynamically-loaded library.</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">// For example, this happens when building LLVM with Visual C++</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">// but using the MingW runtime.</span></div><div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="namespacellvm.html#ad1062d1f26151c8aa1f389c08bcecfbf">   51</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#ad1062d1f26151c8aa1f389c08bcecfbf">__register_frame</a>(<span class="keywordtype">void</span> *<a class="code" href="Target_2ARM_2README_8txt.html#a38e79c83dad9b9a5f38c9693371a8709">p</a>) {</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> Searched = <span class="keyword">false</span>;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> *rf = 0;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <span class="keywordflow">if</span> (!Searched) {</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    Searched = <span class="keyword">true</span>;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    rf = <a class="code" href="classllvm_1_1sys_1_1DynamicLibrary.html#ae003d16a33e81b88943d3e3aa179fcc4">llvm::sys::DynamicLibrary::SearchForAddressOfSymbol</a>(</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;                                                      <span class="stringliteral">&quot;__register_frame&quot;</span>);</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  }</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <span class="keywordflow">if</span> (rf)</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    ((void (*)(<span class="keywordtype">void</span> *))rf)(p);</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;}</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="namespacellvm.html#a4d02dac813aec75cc89ee38752096d4f">   64</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#a4d02dac813aec75cc89ee38752096d4f">__deregister_frame</a>(<span class="keywordtype">void</span> *<a class="code" href="Target_2ARM_2README_8txt.html#a38e79c83dad9b9a5f38c9693371a8709">p</a>) {</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> Searched = <span class="keyword">false</span>;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> *df = 0;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <span class="keywordflow">if</span> (!Searched) {</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    Searched = <span class="keyword">true</span>;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    df = <a class="code" href="classllvm_1_1sys_1_1DynamicLibrary.html#ae003d16a33e81b88943d3e3aa179fcc4">llvm::sys::DynamicLibrary::SearchForAddressOfSymbol</a>(</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                                                      <span class="stringliteral">&quot;__deregister_frame&quot;</span>);</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  }</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="keywordflow">if</span> (df)</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    ((void (*)(<span class="keywordtype">void</span> *))df)(p);</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;}</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="preprocessor">#ifdef __APPLE__</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="namespacellvm.html#ac426c1d76097103bd2527974207c656f">processFDE</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *Entry, <span class="keywordtype">bool</span> isDeregister) {</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = Entry;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  uint32_t Length = *((<span class="keyword">const</span> uint32_t *)P);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  P += 4;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  uint32_t Offset = *((<span class="keyword">const</span> uint32_t *)P);</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="keywordflow">if</span> (Offset != 0) {</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">if</span> (isDeregister)</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      <a class="code" href="namespacellvm.html#a4d02dac813aec75cc89ee38752096d4f">__deregister_frame</a>(const_cast&lt;char *&gt;(Entry));</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      <a class="code" href="namespacellvm.html#ad1062d1f26151c8aa1f389c08bcecfbf">__register_frame</a>(const_cast&lt;char *&gt;(Entry));</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  }</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keywordflow">return</span> P + Length;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;}</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">// This implementation handles frame registration for local targets.</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">// Memory managers for remote targets should re-implement this function</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">// and use the LoadAddr parameter.</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1RTDyldMemoryManager.html#ad161c028a0b1b7db9c11409ba29d140c">RTDyldMemoryManager::registerEHFrames</a>(uint8_t *Addr,</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                                           uint64_t LoadAddr,</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                                           <span class="keywordtype">size_t</span> Size) {</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="comment">// On OS X OS X __register_frame takes a single FDE as an argument.</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="comment">// See http://lists.cs.uiuc.edu/pipermail/llvmdev/2013-April/061768.html</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = (<span class="keyword">const</span> <span class="keywordtype">char</span> *)Addr;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *End = P + Size;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="keywordflow">do</span>  {</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    P = <a class="code" href="namespacellvm.html#ac426c1d76097103bd2527974207c656f">processFDE</a>(P, <span class="keyword">false</span>);</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  } <span class="keywordflow">while</span>(P != End);</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;}</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1RTDyldMemoryManager.html#a9de9001632d31fb29670ece17f411f09">RTDyldMemoryManager::deregisterEHFrames</a>(uint8_t *Addr,</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                                           uint64_t LoadAddr,</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                                           <span class="keywordtype">size_t</span> Size) {</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = (<span class="keyword">const</span> <span class="keywordtype">char</span> *)Addr;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *End = P + Size;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="keywordflow">do</span>  {</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    P = <a class="code" href="namespacellvm.html#ac426c1d76097103bd2527974207c656f">processFDE</a>(P, <span class="keyword">true</span>);</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  } <span class="keywordflow">while</span>(P != End);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;}</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="classllvm_1_1RTDyldMemoryManager.html#ad161c028a0b1b7db9c11409ba29d140c">  121</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1RTDyldMemoryManager.html#ad161c028a0b1b7db9c11409ba29d140c">RTDyldMemoryManager::registerEHFrames</a>(uint8_t *Addr,</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                                           uint64_t LoadAddr,</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                                           <span class="keywordtype">size_t</span> Size) {</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="comment">// On Linux __register_frame takes a single argument: </span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="comment">// a pointer to the start of the .eh_frame section.</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="comment">// How can it find the end? Because crtendS.o is linked </span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="comment">// in and it has an .eh_frame section with four zero chars.</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <a class="code" href="namespacellvm.html#ad1062d1f26151c8aa1f389c08bcecfbf">__register_frame</a>(Addr);</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;}</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="classllvm_1_1RTDyldMemoryManager.html#a9de9001632d31fb29670ece17f411f09">  132</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1RTDyldMemoryManager.html#a9de9001632d31fb29670ece17f411f09">RTDyldMemoryManager::deregisterEHFrames</a>(uint8_t *Addr,</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                                           uint64_t LoadAddr,</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                                           <span class="keywordtype">size_t</span> Size) {</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <a class="code" href="namespacellvm.html#a4d02dac813aec75cc89ee38752096d4f">__deregister_frame</a>(Addr);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;}</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="namespacellvm.html#a24b4a0b3fd7a9932de5e733fe042c753">  140</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="namespacellvm.html#a24b4a0b3fd7a9932de5e733fe042c753">jit_noop</a>() {</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;}</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">// ARM math functions are statically linked on Android from libgcc.a, but not</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">// available at runtime for dynamic linking. On Linux these are usually placed</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">// in libgcc_s.so so can be found by normal dynamic lookup.</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="preprocessor">#if defined(__BIONIC__) &amp;&amp; defined(__arm__)</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">// List of functions which are statically linked on Android and can be generated</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">// by LLVM. This is done as a nested macro which is used once to declare the</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">// imported functions with ARM_MATH_DECL and once to compare them to the</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">// user-requested symbol in getSymbolAddress with ARM_MATH_CHECK. The test</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">// assumes that all functions start with __aeabi_ and getSymbolAddress must be</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">// modified if that changes.</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="preprocessor">#define ARM_MATH_IMPORTS(PP) \</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="preprocessor">  PP(__aeabi_d2f) \</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="preprocessor">  PP(__aeabi_d2iz) \</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="preprocessor">  PP(__aeabi_d2lz) \</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="preprocessor">  PP(__aeabi_d2uiz) \</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="preprocessor">  PP(__aeabi_d2ulz) \</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="preprocessor">  PP(__aeabi_dadd) \</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="preprocessor">  PP(__aeabi_dcmpeq) \</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="preprocessor">  PP(__aeabi_dcmpge) \</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="preprocessor">  PP(__aeabi_dcmpgt) \</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="preprocessor">  PP(__aeabi_dcmple) \</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="preprocessor">  PP(__aeabi_dcmplt) \</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="preprocessor">  PP(__aeabi_dcmpun) \</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="preprocessor">  PP(__aeabi_ddiv) \</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="preprocessor">  PP(__aeabi_dmul) \</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="preprocessor">  PP(__aeabi_dsub) \</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="preprocessor">  PP(__aeabi_f2d) \</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="preprocessor">  PP(__aeabi_f2iz) \</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="preprocessor">  PP(__aeabi_f2lz) \</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="preprocessor">  PP(__aeabi_f2uiz) \</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="preprocessor">  PP(__aeabi_f2ulz) \</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="preprocessor">  PP(__aeabi_fadd) \</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="preprocessor">  PP(__aeabi_fcmpeq) \</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="preprocessor">  PP(__aeabi_fcmpge) \</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="preprocessor">  PP(__aeabi_fcmpgt) \</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="preprocessor">  PP(__aeabi_fcmple) \</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="preprocessor">  PP(__aeabi_fcmplt) \</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="preprocessor">  PP(__aeabi_fcmpun) \</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="preprocessor">  PP(__aeabi_fdiv) \</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="preprocessor">  PP(__aeabi_fmul) \</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="preprocessor">  PP(__aeabi_fsub) \</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="preprocessor">  PP(__aeabi_i2d) \</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="preprocessor">  PP(__aeabi_i2f) \</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="preprocessor">  PP(__aeabi_idiv) \</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="preprocessor">  PP(__aeabi_idivmod) \</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="preprocessor">  PP(__aeabi_l2d) \</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="preprocessor">  PP(__aeabi_l2f) \</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="preprocessor">  PP(__aeabi_lasr) \</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="preprocessor">  PP(__aeabi_ldivmod) \</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="preprocessor">  PP(__aeabi_llsl) \</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="preprocessor">  PP(__aeabi_llsr) \</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="preprocessor">  PP(__aeabi_lmul) \</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="preprocessor">  PP(__aeabi_ui2d) \</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="preprocessor">  PP(__aeabi_ui2f) \</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="preprocessor">  PP(__aeabi_uidiv) \</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="preprocessor">  PP(__aeabi_uidivmod) \</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="preprocessor">  PP(__aeabi_ul2d) \</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="preprocessor">  PP(__aeabi_ul2f) \</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="preprocessor">  PP(__aeabi_uldivmod)</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment">// Declare statically linked math functions on ARM. The function declarations</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">// here do not have the correct prototypes for each function in</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">// ARM_MATH_IMPORTS, but it doesn&#39;t matter because only the symbol addresses are</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">// needed. In particular the __aeabi_*divmod functions do not have calling</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">// conventions which match any C prototype.</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="preprocessor">#define ARM_MATH_DECL(name) extern &quot;C&quot; void name();</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;ARM_MATH_IMPORTS(ARM_MATH_DECL)</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="preprocessor">#undef ARM_MATH_DECL</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div><div class="line"><a name="l00214"></a><span class="lineno"><a class="line" href="classllvm_1_1RTDyldMemoryManager.html#aff26fb92a4a5048b4cf5b434c5893cfc">  214</a></span>&#160;uint64_t <a class="code" href="classllvm_1_1RTDyldMemoryManager.html#aff26fb92a4a5048b4cf5b434c5893cfc">RTDyldMemoryManager::getSymbolAddress</a>(<span class="keyword">const</span> std::string &amp;<a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>) {</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <span class="comment">// This implementation assumes that the host program is the target.</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <span class="comment">// Clients generating code for a remote target should implement their own</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <span class="comment">// memory manager.</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="preprocessor">#if defined(__linux__) &amp;&amp; defined(__GLIBC__)</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="comment">//===--------------------------------------------------------------------===//</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <span class="comment">// Function stubs that are invoked instead of certain library calls</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="comment">// Force the following functions to be linked in to anything that uses the</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="comment">// JIT. This is a hack designed to work around the all-too-clever Glibc</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="comment">// strategy of making these functions work differently when inlined vs. when</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="comment">// not inlined, and hiding their real definitions in a separate archive file</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="comment">// that the dynamic linker can&#39;t see. For more info, search for</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="comment">// &#39;libc_nonshared.a&#39; on Google, or read http://llvm.org/PR274.</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="keywordflow">if</span> (Name == <span class="stringliteral">&quot;stat&quot;</span>) <span class="keywordflow">return</span> (uint64_t)&amp;<a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6faff518838aa199dc9140e90252480ed0c">stat</a>;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <span class="keywordflow">if</span> (Name == <span class="stringliteral">&quot;fstat&quot;</span>) <span class="keywordflow">return</span> (uint64_t)&amp;<a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa8fb88969436ad743b0f5eb7a75f5db78">fstat</a>;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="keywordflow">if</span> (Name == <span class="stringliteral">&quot;lstat&quot;</span>) <span class="keywordflow">return</span> (uint64_t)&amp;<a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6faee6a673971ee7cda9dcd77a633c2f0ce">lstat</a>;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="keywordflow">if</span> (Name == <span class="stringliteral">&quot;stat64&quot;</span>) <span class="keywordflow">return</span> (uint64_t)&amp;<a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa333cc84eaa08c88ec337e3ecea2a6b71">stat64</a>;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="keywordflow">if</span> (Name == <span class="stringliteral">&quot;fstat64&quot;</span>) <span class="keywordflow">return</span> (uint64_t)&amp;<a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa87a4917b0b5fd590cede41607a9c33c9">fstat64</a>;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="keywordflow">if</span> (Name == <span class="stringliteral">&quot;lstat64&quot;</span>) <span class="keywordflow">return</span> (uint64_t)&amp;<a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa7e6c227370d9b8f0f9cf48b9a998ab0b">lstat64</a>;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="keywordflow">if</span> (Name == <span class="stringliteral">&quot;atexit&quot;</span>) <span class="keywordflow">return</span> (uint64_t)&amp;atexit;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keywordflow">if</span> (Name == <span class="stringliteral">&quot;mknod&quot;</span>) <span class="keywordflow">return</span> (uint64_t)&amp;mknod;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="preprocessor">#endif // __linux__ &amp;&amp; __GLIBC__</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  </div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <span class="comment">// See ARM_MATH_IMPORTS definition for explanation</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="preprocessor">#if defined(__BIONIC__) &amp;&amp; defined(__arm__)</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="keywordflow">if</span> (Name.compare(0, 8, <span class="stringliteral">&quot;__aeabi_&quot;</span>) == 0) {</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="comment">// Check if the user has requested any of the functions listed in</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="comment">// ARM_MATH_IMPORTS, and if so redirect to the statically linked symbol.</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="preprocessor">#define ARM_MATH_CHECK(fn) if (Name == #fn) return (uint64_t)&amp;fn;</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    ARM_MATH_IMPORTS(ARM_MATH_CHECK)</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="preprocessor">#undef ARM_MATH_CHECK</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  }</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="comment">// We should not invoke parent&#39;s ctors/dtors from generated main()!</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="comment">// On Mingw and Cygwin, the symbol __main is resolved to</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="comment">// callee&#39;s(eg. tools/lli) one, to invoke wrong duplicated ctors</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="comment">// (and register wrong callee&#39;s dtors with atexit(3)).</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="comment">// We expect ExecutionEngine::runStaticConstructorsDestructors()</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="comment">// is called before ExecutionEngine::runFunctionAsMain() is called.</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="keywordflow">if</span> (Name == <span class="stringliteral">&quot;__main&quot;</span>) <span class="keywordflow">return</span> (uint64_t)&amp;<a class="code" href="namespacellvm.html#a24b4a0b3fd7a9932de5e733fe042c753">jit_noop</a>;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *NameStr = Name.c_str();</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="keywordtype">void</span> *Ptr = <a class="code" href="classllvm_1_1sys_1_1DynamicLibrary.html#ae003d16a33e81b88943d3e3aa179fcc4">sys::DynamicLibrary::SearchForAddressOfSymbol</a>(NameStr);</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="keywordflow">if</span> (Ptr)</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">return</span> (uint64_t)Ptr;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <span class="comment">// If it wasn&#39;t found and if it starts with an underscore (&#39;_&#39;) character,</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="comment">// try again without the underscore.</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="keywordflow">if</span> (NameStr[0] == <span class="charliteral">&#39;_&#39;</span>) {</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    Ptr = <a class="code" href="classllvm_1_1sys_1_1DynamicLibrary.html#ae003d16a33e81b88943d3e3aa179fcc4">sys::DynamicLibrary::SearchForAddressOfSymbol</a>(NameStr+1);</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keywordflow">if</span> (Ptr)</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      <span class="keywordflow">return</span> (uint64_t)Ptr;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  }</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;}</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div><div class="line"><a name="l00272"></a><span class="lineno"><a class="line" href="classllvm_1_1RTDyldMemoryManager.html#a4e5d745e695dc62ebaec15f537af9fed">  272</a></span>&#160;<span class="keywordtype">void</span> *<a class="code" href="classllvm_1_1RTDyldMemoryManager.html#a4e5d745e695dc62ebaec15f537af9fed">RTDyldMemoryManager::getPointerToNamedFunction</a>(<span class="keyword">const</span> std::string &amp;<a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>,</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                                                     <span class="keywordtype">bool</span> AbortOnFailure) {</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  uint64_t Addr = <a class="code" href="classllvm_1_1RTDyldMemoryManager.html#aff26fb92a4a5048b4cf5b434c5893cfc">getSymbolAddress</a>(Name);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <span class="keywordflow">if</span> (!Addr &amp;&amp; AbortOnFailure)</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <a class="code" href="namespacellvm.html#a1f6978055dbb761b380de39070e34bd3">report_fatal_error</a>(<span class="stringliteral">&quot;Program used external function &#39;&quot;</span> + Name +</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                       <span class="stringliteral">&quot;&#39; which could not be resolved!&quot;</span>);</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="keywordflow">return</span> (<span class="keywordtype">void</span>*)Addr;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;}</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;} <span class="comment">// namespace llvm</span></div><div class="ttc" id="classllvm_1_1sys_1_1DynamicLibrary_html_ae003d16a33e81b88943d3e3aa179fcc4"><div class="ttname"><a href="classllvm_1_1sys_1_1DynamicLibrary.html#ae003d16a33e81b88943d3e3aa179fcc4">llvm::sys::DynamicLibrary::SearchForAddressOfSymbol</a></div><div class="ttdeci">static void * SearchForAddressOfSymbol(const char *symbolName)</div><div class="ttdoc">Search through libraries for address of a symbol. </div><div class="ttdef"><b>Definition:</b> <a href="DynamicLibrary_8cpp_source.html#l00111">DynamicLibrary.cpp:111</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6fa8fb88969436ad743b0f5eb7a75f5db78"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa8fb88969436ad743b0f5eb7a75f5db78">llvm::LibFunc::fstat</a></div><div class="ttdoc">int fstat(int fildes, struct stat *buf); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00291">TargetLibraryInfo.h:291</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6fa87a4917b0b5fd590cede41607a9c33c9"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa87a4917b0b5fd590cede41607a9c33c9">llvm::LibFunc::fstat64</a></div><div class="ttdoc">int fstat64(int filedes, struct stat64 *buf) </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00293">TargetLibraryInfo.h:293</a></div></div>
<div class="ttc" id="README-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00427">README-SSE.txt:427</a></div></div>
<div class="ttc" id="classllvm_1_1RTDyldMemoryManager_html_a9de9001632d31fb29670ece17f411f09"><div class="ttname"><a href="classllvm_1_1RTDyldMemoryManager.html#a9de9001632d31fb29670ece17f411f09">llvm::RTDyldMemoryManager::deregisterEHFrames</a></div><div class="ttdeci">virtual void deregisterEHFrames(uint8_t *Addr, uint64_t LoadAddr, size_t Size)</div><div class="ttdef"><b>Definition:</b> <a href="RTDyldMemoryManager_8cpp_source.html#l00132">RTDyldMemoryManager.cpp:132</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6fa7e6c227370d9b8f0f9cf48b9a998ab0b"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa7e6c227370d9b8f0f9cf48b9a998ab0b">llvm::LibFunc::lstat64</a></div><div class="ttdoc">int lstat64(const char *path, struct stat64 *buf); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00378">TargetLibraryInfo.h:378</a></div></div>
<div class="ttc" id="namespacellvm_html_ad1062d1f26151c8aa1f389c08bcecfbf"><div class="ttname"><a href="namespacellvm.html#ad1062d1f26151c8aa1f389c08bcecfbf">llvm::__register_frame</a></div><div class="ttdeci">void __register_frame(void *p)</div><div class="ttdef"><b>Definition:</b> <a href="RTDyldMemoryManager_8cpp_source.html#l00051">RTDyldMemoryManager.cpp:51</a></div></div>
<div class="ttc" id="namespacellvm_html_a4d02dac813aec75cc89ee38752096d4f"><div class="ttname"><a href="namespacellvm.html#a4d02dac813aec75cc89ee38752096d4f">llvm::__deregister_frame</a></div><div class="ttdeci">void __deregister_frame(void *p)</div><div class="ttdef"><b>Definition:</b> <a href="RTDyldMemoryManager_8cpp_source.html#l00064">RTDyldMemoryManager.cpp:64</a></div></div>
<div class="ttc" id="namespacellvm_html_a1f6978055dbb761b380de39070e34bd3"><div class="ttname"><a href="namespacellvm.html#a1f6978055dbb761b380de39070e34bd3">llvm::report_fatal_error</a></div><div class="ttdeci">LLVM_ATTRIBUTE_NORETURN void report_fatal_error(const char *reason, bool gen_crash_diag=true)</div><div class="ttdef"><b>Definition:</b> <a href="ErrorHandling_8cpp_source.html#l00053">ErrorHandling.cpp:53</a></div></div>
<div class="ttc" id="namespacellvm_1_1GraphProgram_html_a0ad4685976f8c4d4a697a53fbe05d10b"><div class="ttname"><a href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">llvm::GraphProgram::Name</a></div><div class="ttdeci">Name</div><div class="ttdef"><b>Definition:</b> <a href="GraphWriter_8h_source.html#l00044">GraphWriter.h:44</a></div></div>
<div class="ttc" id="ErrorHandling_8h_html"><div class="ttname"><a href="ErrorHandling_8h.html">ErrorHandling.h</a></div></div>
<div class="ttc" id="DynamicLibrary_8h_html"><div class="ttname"><a href="DynamicLibrary_8h.html">DynamicLibrary.h</a></div></div>
<div class="ttc" id="classllvm_1_1RTDyldMemoryManager_html_aff26fb92a4a5048b4cf5b434c5893cfc"><div class="ttname"><a href="classllvm_1_1RTDyldMemoryManager.html#aff26fb92a4a5048b4cf5b434c5893cfc">llvm::RTDyldMemoryManager::getSymbolAddress</a></div><div class="ttdeci">virtual uint64_t getSymbolAddress(const std::string &amp;Name)</div><div class="ttdef"><b>Definition:</b> <a href="RTDyldMemoryManager_8cpp_source.html#l00214">RTDyldMemoryManager.cpp:214</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6faee6a673971ee7cda9dcd77a633c2f0ce"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6faee6a673971ee7cda9dcd77a633c2f0ce">llvm::LibFunc::lstat</a></div><div class="ttdoc">int lstat(const char *path, struct stat *buf); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00376">TargetLibraryInfo.h:376</a></div></div>
<div class="ttc" id="RTDyldMemoryManager_8h_html"><div class="ttname"><a href="RTDyldMemoryManager_8h.html">RTDyldMemoryManager.h</a></div></div>
<div class="ttc" id="classllvm_1_1RTDyldMemoryManager_html_ad161c028a0b1b7db9c11409ba29d140c"><div class="ttname"><a href="classllvm_1_1RTDyldMemoryManager.html#ad161c028a0b1b7db9c11409ba29d140c">llvm::RTDyldMemoryManager::registerEHFrames</a></div><div class="ttdeci">virtual void registerEHFrames(uint8_t *Addr, uint64_t LoadAddr, size_t Size)</div><div class="ttdef"><b>Definition:</b> <a href="RTDyldMemoryManager_8cpp_source.html#l00121">RTDyldMemoryManager.cpp:121</a></div></div>
<div class="ttc" id="namespacellvm_html_ac426c1d76097103bd2527974207c656f"><div class="ttname"><a href="namespacellvm.html#ac426c1d76097103bd2527974207c656f">llvm::processFDE</a></div><div class="ttdeci">static unsigned char * processFDE(unsigned char *P, intptr_t DeltaForText, intptr_t DeltaForEH)</div><div class="ttdef"><b>Definition:</b> <a href="RuntimeDyldMachO_8cpp_source.html#l00024">RuntimeDyldMachO.cpp:24</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6faff518838aa199dc9140e90252480ed0c"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6faff518838aa199dc9140e90252480ed0c">llvm::LibFunc::stat</a></div><div class="ttdoc">int stat(const char *path, struct stat *buf); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00521">TargetLibraryInfo.h:521</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6fa333cc84eaa08c88ec337e3ecea2a6b71"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fa333cc84eaa08c88ec337e3ecea2a6b71">llvm::LibFunc::stat64</a></div><div class="ttdoc">int stat64(const char *path, struct stat64 *buf); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00523">TargetLibraryInfo.h:523</a></div></div>
<div class="ttc" id="classllvm_1_1RTDyldMemoryManager_html_aecae7f61cef6583e1cb2c06e0d7c6e03"><div class="ttname"><a href="classllvm_1_1RTDyldMemoryManager.html#aecae7f61cef6583e1cb2c06e0d7c6e03">llvm::RTDyldMemoryManager::~RTDyldMemoryManager</a></div><div class="ttdeci">virtual ~RTDyldMemoryManager()</div><div class="ttdef"><b>Definition:</b> <a href="RTDyldMemoryManager_8cpp_source.html#l00033">RTDyldMemoryManager.cpp:33</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a38e79c83dad9b9a5f38c9693371a8709"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a38e79c83dad9b9a5f38c9693371a8709">p</a></div><div class="ttdeci">the resulting code requires compare and branches when and if * p</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00396">Target/ARM/README.txt:396</a></div></div>
<div class="ttc" id="classllvm_1_1RTDyldMemoryManager_html_a4e5d745e695dc62ebaec15f537af9fed"><div class="ttname"><a href="classllvm_1_1RTDyldMemoryManager.html#a4e5d745e695dc62ebaec15f537af9fed">llvm::RTDyldMemoryManager::getPointerToNamedFunction</a></div><div class="ttdeci">virtual void * getPointerToNamedFunction(const std::string &amp;Name, bool AbortOnFailure=true)</div><div class="ttdef"><b>Definition:</b> <a href="RTDyldMemoryManager_8cpp_source.html#l00272">RTDyldMemoryManager.cpp:272</a></div></div>
<div class="ttc" id="namespacellvm_html_a24b4a0b3fd7a9932de5e733fe042c753"><div class="ttname"><a href="namespacellvm.html#a24b4a0b3fd7a9932de5e733fe042c753">llvm::jit_noop</a></div><div class="ttdeci">static int jit_noop()</div><div class="ttdef"><b>Definition:</b> <a href="RTDyldMemoryManager_8cpp_source.html#l00140">RTDyldMemoryManager.cpp:140</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 23:01:10 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
