<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: LoopUnswitch.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('LoopUnswitch_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">LoopUnswitch.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="LoopUnswitch_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===-- LoopUnswitch.cpp - Hoist loop-invariant conditionals in loop ------===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// This pass transforms loops that contain branches on loop-invariant conditions</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// to have multiple loops.  For example, it turns the left into the right code:</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//  for (...)                  if (lic)</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//    A                          for (...)</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">//    if (lic)                     A; B; C</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">//      B                      else</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">//    C                          for (...)</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">//                                 A; C</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// This can increase the size of the code exponentially (doubling it every time</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">// a loop is unswitched) so we only unswitch if the resultant code will be</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">// smaller than a threshold.</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">// This pass expects LICM to be run before it to hoist invariant conditions out</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">// of the loop, to make the unswitching opportunity obvious.</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div><div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="LoopUnswitch_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   29</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;loop-unswitch&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Transforms_2Scalar_8h.html">llvm/Transforms/Scalar.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="STLExtras_8h.html">llvm/ADT/STLExtras.h</a>&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallPtrSet_8h.html">llvm/ADT/SmallPtrSet.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CodeMetrics_8h.html">llvm/Analysis/CodeMetrics.h</a>&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Dominators_8h.html">llvm/Analysis/Dominators.h</a>&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstructionSimplify_8h.html">llvm/Analysis/InstructionSimplify.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopInfo_8h.html">llvm/Analysis/LoopInfo.h</a>&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopPass_8h.html">llvm/Analysis/LoopPass.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ScalarEvolution_8h.html">llvm/Analysis/ScalarEvolution.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetTransformInfo_8h.html">llvm/Analysis/TargetTransformInfo.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constants_8h.html">llvm/IR/Constants.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DerivedTypes_8h.html">llvm/IR/DerivedTypes.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Function_8h.html">llvm/IR/Function.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instructions_8h.html">llvm/IR/Instructions.h</a>&quot;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlockUtils_8h.html">llvm/Transforms/Utils/BasicBlockUtils.h</a>&quot;</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Cloning_8h.html">llvm/Transforms/Utils/Cloning.h</a>&quot;</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Local_8h.html">llvm/Transforms/Utils/Local.h</a>&quot;</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &lt;map&gt;</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &lt;set&gt;</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<a class="code" href="LoopUnswitch_8cpp.html#a3aed101a9ea263925c45c6a39a8a0125">STATISTIC</a>(NumBranches, <span class="stringliteral">&quot;Number of branches unswitched&quot;</span>);</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<a class="code" href="LoopUnswitch_8cpp.html#a3aed101a9ea263925c45c6a39a8a0125">STATISTIC</a>(NumSwitches, <span class="stringliteral">&quot;Number of switches unswitched&quot;</span>);</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<a class="code" href="LoopUnswitch_8cpp.html#a3aed101a9ea263925c45c6a39a8a0125">STATISTIC</a>(NumSelects , <span class="stringliteral">&quot;Number of selects unswitched&quot;</span>);</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<a class="code" href="LoopUnswitch_8cpp.html#a3aed101a9ea263925c45c6a39a8a0125">STATISTIC</a>(NumTrivial , <span class="stringliteral">&quot;Number of unswitches that are trivial&quot;</span>);</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<a class="code" href="LoopUnswitch_8cpp.html#a3aed101a9ea263925c45c6a39a8a0125">STATISTIC</a>(NumSimplify, <span class="stringliteral">&quot;Number of simplifications of unswitched code&quot;</span>);</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<a class="code" href="LoopUnswitch_8cpp.html#a3aed101a9ea263925c45c6a39a8a0125">STATISTIC</a>(TotalInsts,  <span class="stringliteral">&quot;Total number of instructions analyzed&quot;</span>);</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">// The specific value of 100 here was chosen based only on intuition and a</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">// few specific examples.</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<a class="code" href="LoopUnswitch_8cpp.html#a815e638c738b221b797674c5c63524bb">Threshold</a>(<span class="stringliteral">&quot;loop-unswitch-threshold&quot;</span>, <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Max loop size to unswitch&quot;</span>),</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;          <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(100), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="keyword">class </span>LUAnalysisCache {</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keyword">typedef</span> <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;const SwitchInst*, SmallPtrSet&lt;const Value *, 8&gt;</a> &gt;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;      UnswitchedValsMap;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="keyword">typedef</span> UnswitchedValsMap::iterator UnswitchedValsIt;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keyword">struct </span>LoopProperties {</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;      <span class="keywordtype">unsigned</span> CanBeUnswitchedCount;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;      <span class="keywordtype">unsigned</span> SizeEstimation;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      UnswitchedValsMap UnswitchedVals;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    };</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="comment">// Here we use std::map instead of DenseMap, since we need to keep valid</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="comment">// LoopProperties pointer for current loop for better performance.</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keyword">typedef</span> std::map&lt;const Loop*, LoopProperties&gt; LoopPropsMap;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keyword">typedef</span> LoopPropsMap::iterator LoopPropsMapIt;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    LoopPropsMap LoopsProperties;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    UnswitchedValsMap *CurLoopInstructions;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    LoopProperties *CurrentLoopProperties;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="comment">// Max size of code we can produce on remained iterations.</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordtype">unsigned</span> MaxSize;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keyword">public</span>:</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      LUAnalysisCache() :</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        CurLoopInstructions(0), CurrentLoopProperties(0),</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        MaxSize(<a class="code" href="LoopUnswitch_8cpp.html#a815e638c738b221b797674c5c63524bb">Threshold</a>)</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;      {}</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;      <span class="comment">// Analyze loop. Check its size, calculate is it possible to unswitch</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;      <span class="comment">// it. Returns true if we can unswitch this loop.</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      <span class="keywordtype">bool</span> countLoop(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;TTI);</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      <span class="comment">// Clean all data related to given loop.</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      <span class="keywordtype">void</span> forgetLoop(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      <span class="comment">// Mark case value as unswitched.</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      <span class="comment">// Since SI instruction can be partly unswitched, in order to avoid</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      <span class="comment">// extra unswitching in cloned loops keep track all unswitched values.</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;      <span class="keywordtype">void</span> setUnswitched(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SwitchInst.html">SwitchInst</a> *SI, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *V);</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      <span class="comment">// Check was this case value unswitched before or not.</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      <span class="keywordtype">bool</span> isUnswitched(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SwitchInst.html">SwitchInst</a> *SI, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *V);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;      <span class="comment">// Clone all loop-unswitch related loop properties.</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;      <span class="comment">// Redistribute unswitching quotas.</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      <span class="comment">// Note, that new loop data is stored inside the VMap.</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      <span class="keywordtype">void</span> cloneData(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *NewLoop, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *OldLoop,</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                     <span class="keyword">const</span> <a class="code" href="classllvm_1_1ValueMap.html">ValueToValueMapTy</a> &amp;VMap);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  };</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="keyword">class </span>LoopUnswitch : <span class="keyword">public</span> <a class="code" href="classllvm_1_1LoopPass.html">LoopPass</a> {</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI;  <span class="comment">// Loop information</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <a class="code" href="classllvm_1_1LPPassManager.html">LPPassManager</a> *LPM;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="comment">// LoopProcessWorklist - Used to check if second loop needs processing</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="comment">// after RewriteLoopBodyWithConditionConstant rewrites first loop.</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    std::vector&lt;Loop*&gt; LoopProcessWorklist;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    LUAnalysisCache BranchesInfo;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordtype">bool</span> OptimizeForSize;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordtype">bool</span> redoLoop;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <a class="code" href="classllvm_1_1Loop.html">Loop</a> *currentLoop;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *loopHeader;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *loopPreheader;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="comment">// LoopBlocks contains all of the basic blocks of the loop, including the</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="comment">// preheader of the loop, the body of the loop, and the exit blocks of the</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="comment">// loop, in that order.</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    std::vector&lt;BasicBlock*&gt; LoopBlocks;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="comment">// NewBlocks contained cloned copy of basic blocks from LoopBlocks.</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    std::vector&lt;BasicBlock*&gt; NewBlocks;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="keyword">public</span>:</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>; <span class="comment">// Pass ID, replacement for typeid</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keyword">explicit</span> LoopUnswitch(<span class="keywordtype">bool</span> Os = <span class="keyword">false</span>) :</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      <a class="code" href="classllvm_1_1LoopPass.html">LoopPass</a>(ID), OptimizeForSize(Os), redoLoop(<a class="code" href="namespacefalse.html">false</a>),</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      currentLoop(0), DT(0), loopHeader(0),</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      loopPreheader(0) {</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <a class="code" href="namespacellvm.html#a2a32b2fa5923a14be683607b50e6bf2b">initializeLoopUnswitchPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      }</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordtype">bool</span> runOnLoop(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1LPPassManager.html">LPPassManager</a> &amp;LPM);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keywordtype">bool</span> processCurrentLoop();</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">    /// This transformation requires natural loop information &amp; requires that</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">    /// loop preheaders be inserted into the CFG.</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">    ///</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment"></span>    <span class="keyword">virtual</span> <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const </span>{</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a053677ebc731b47a534f841b11b5cf0c">addRequiredID</a>(<a class="code" href="namespacellvm.html#a472515fc67a5fb572afeb00aa2609cca">LoopSimplifyID</a>);</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a40970e5d42646fb2d9aa5f7a2c879516">addPreservedID</a>(<a class="code" href="namespacellvm.html#a472515fc67a5fb572afeb00aa2609cca">LoopSimplifyID</a>);</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a>&gt;();</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a>&gt;();</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a053677ebc731b47a534f841b11b5cf0c">addRequiredID</a>(<a class="code" href="namespacellvm.html#a3e3d3c6d4e33a4f5ca579ee7939f0349">LCSSAID</a>);</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a40970e5d42646fb2d9aa5f7a2c879516">addPreservedID</a>(<a class="code" href="namespacellvm.html#a3e3d3c6d4e33a4f5ca579ee7939f0349">LCSSAID</a>);</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a>&gt;();</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a>&gt;();</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a>&gt;();</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    }</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="keyword">private</span>:</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> releaseMemory() {</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      BranchesInfo.forgetLoop(currentLoop);</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    }</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment">    /// RemoveLoopFromWorklist - If the specified loop is on the loop worklist,</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">    /// remove it.</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> RemoveLoopFromWorklist(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L) {</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      std::vector&lt;Loop*&gt;::iterator <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = std::find(LoopProcessWorklist.begin(),</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                                                 LoopProcessWorklist.end(), L);</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      <span class="keywordflow">if</span> (I != LoopProcessWorklist.end())</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        LoopProcessWorklist.erase(I);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    }</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordtype">void</span> initLoopData() {</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      loopHeader = currentLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>();</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      loopPreheader = currentLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1bc74c76b876ad387293ecde0f21ed45">getLoopPreheader</a>();</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    }</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">    /// Split all of the edges from inside the loop to their exit blocks.</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">    /// Update the appropriate Phi nodes as we do so.</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> SplitExitEdges(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;BasicBlock *&gt;</a> &amp;ExitBlocks);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordtype">bool</span> UnswitchIfProfitable(<a class="code" href="classllvm_1_1Value.html">Value</a> *LoopCond, <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Val);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordtype">void</span> UnswitchTrivialCondition(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1Value.html">Value</a> *Cond, <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Val,</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                                  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitBlock);</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keywordtype">void</span> UnswitchNontrivialCondition(<a class="code" href="classllvm_1_1Value.html">Value</a> *LIC, <a class="code" href="classllvm_1_1Constant.html">Constant</a> *OnVal, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L);</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordtype">void</span> RewriteLoopBodyWithConditionConstant(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1Value.html">Value</a> *LIC,</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                                              <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Val, <span class="keywordtype">bool</span> isEqual);</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordtype">void</span> EmitPreheaderBranchOnCondition(<a class="code" href="classllvm_1_1Value.html">Value</a> *LIC, <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Val,</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                                        <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *TrueDest,</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                                        <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *FalseDest,</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                                        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InsertPt);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordtype">void</span> SimplifyCode(std::vector&lt;Instruction*&gt; &amp;Worklist, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordtype">void</span> RemoveLoopFromHierarchy(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordtype">bool</span> IsTrivialUnswitchCondition(<a class="code" href="classllvm_1_1Value.html">Value</a> *Cond, <a class="code" href="classllvm_1_1Constant.html">Constant</a> **Val = 0,</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                                    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> **LoopExit = 0);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  };</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;}</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">// Analyze loop. Check its size, calculate is it possible to unswitch</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">// it. Returns true if we can unswitch this loop.</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="keywordtype">bool</span> LUAnalysisCache::countLoop(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;TTI) {</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  LoopPropsMapIt PropsIt;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="keywordtype">bool</span> Inserted;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <a class="code" href="namespacellvm.html#a7dc3e2c002713fec56bdbf16aa704576">llvm::tie</a>(PropsIt, Inserted) =</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      LoopsProperties.insert(std::make_pair(L, LoopProperties()));</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  LoopProperties &amp;Props = PropsIt-&gt;second;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="keywordflow">if</span> (Inserted) {</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="comment">// New loop.</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="comment">// Limit the number of instructions to avoid causing significant code</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="comment">// expansion, and the number of basic blocks, to avoid loops with</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="comment">// large numbers of branches which cause loop unswitching to go crazy.</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="comment">// This is a very ad-hoc heuristic.</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="comment">// FIXME: This is overly conservative because it does not take into</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="comment">// consideration code simplification opportunities and code that can</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="comment">// be shared by the resultant unswitched loops.</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <a class="code" href="structllvm_1_1CodeMetrics.html">CodeMetrics</a> <a class="code" href="MachineTraceMetrics_8cpp.html#a7f20cb0e3fe764b7b8a63003e0265508">Metrics</a>;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LoopBase.html#ab39f9623eaa8cd22213aa716c6fb9994">Loop::block_iterator</a> I = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a3df1c508a7b1c89247367cab269076e2">block_begin</a>(), E = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a91e3f5f9bf6ecbd058624a479e150603">block_end</a>();</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;         I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      Metrics.<a class="code" href="structllvm_1_1CodeMetrics.html#a56a86230d5565ab47c72e6bf19212c84">analyzeBasicBlock</a>(*I, TTI);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    Props.SizeEstimation = std::min(Metrics.<a class="code" href="structllvm_1_1CodeMetrics.html#a6c48330c94e82ab4a621c6a192c14249">NumInsts</a>, Metrics.<a class="code" href="structllvm_1_1CodeMetrics.html#a3187063809f27321f9126b0aa0086ce7">NumBlocks</a> * 5);</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    Props.CanBeUnswitchedCount = MaxSize / (Props.SizeEstimation);</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    MaxSize -= Props.SizeEstimation * Props.CanBeUnswitchedCount;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordflow">if</span> (Metrics.<a class="code" href="structllvm_1_1CodeMetrics.html#a61cad01cfbfee0f1ac885df62557c708">notDuplicatable</a>) {</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;NOT unswitching loop %&quot;</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                   &lt;&lt; L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt; <span class="stringliteral">&quot;, contents cannot be &quot;</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;duplicated!\n&quot;</span>);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    }</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  }</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="keywordflow">if</span> (!Props.CanBeUnswitchedCount) {</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;NOT unswitching loop %&quot;</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                 &lt;&lt; L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt; <span class="stringliteral">&quot;, cost too high: &quot;</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                 &lt;&lt; L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1939dbb59960462878c408efb21a2c75">getBlocks</a>().size() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  }</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="comment">// Be careful. This links are good only before new loop addition.</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  CurrentLoopProperties = &amp;Props;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  CurLoopInstructions = &amp;Props.UnswitchedVals;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;}</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">// Clean all data related to given loop.</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="keywordtype">void</span> LUAnalysisCache::forgetLoop(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L) {</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  LoopPropsMapIt LIt = LoopsProperties.find(L);</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="keywordflow">if</span> (LIt != LoopsProperties.end()) {</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    LoopProperties &amp;Props = LIt-&gt;second;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    MaxSize += Props.CanBeUnswitchedCount * Props.SizeEstimation;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    LoopsProperties.erase(LIt);</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  }</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  CurrentLoopProperties = 0;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  CurLoopInstructions = 0;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;}</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment">// Mark case value as unswitched.</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">// Since SI instruction can be partly unswitched, in order to avoid</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment">// extra unswitching in cloned loops keep track all unswitched values.</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="keywordtype">void</span> LUAnalysisCache::setUnswitched(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SwitchInst.html">SwitchInst</a> *SI, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  (*CurLoopInstructions)[SI].insert(V);</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;}</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment">// Check was this case value unswitched before or not.</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="keywordtype">bool</span> LUAnalysisCache::isUnswitched(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SwitchInst.html">SwitchInst</a> *SI, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="keywordflow">return</span> (*CurLoopInstructions)[SI].count(V);</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;}</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">// Clone all loop-unswitch related loop properties.</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">// Redistribute unswitching quotas.</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment">// Note, that new loop data is stored inside the VMap.</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="keywordtype">void</span> LUAnalysisCache::cloneData(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *NewLoop, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *OldLoop,</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                                <span class="keyword">const</span> <a class="code" href="classllvm_1_1ValueMap.html">ValueToValueMapTy</a> &amp;VMap) {</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  LoopProperties &amp;NewLoopProps = LoopsProperties[NewLoop];</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  LoopProperties &amp;OldLoopProps = *CurrentLoopProperties;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  UnswitchedValsMap &amp;Insts = OldLoopProps.UnswitchedVals;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <span class="comment">// Reallocate &quot;can-be-unswitched quota&quot;</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  --OldLoopProps.CanBeUnswitchedCount;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <span class="keywordtype">unsigned</span> Quota = OldLoopProps.CanBeUnswitchedCount;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  NewLoopProps.CanBeUnswitchedCount = Quota / 2;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  OldLoopProps.CanBeUnswitchedCount = Quota - Quota / 2;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  NewLoopProps.SizeEstimation = OldLoopProps.SizeEstimation;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <span class="comment">// Clone unswitched values info:</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="comment">// for new loop switches we clone info about values that was</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="comment">// already unswitched and has redundant successors.</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <span class="keywordflow">for</span> (UnswitchedValsIt I = Insts.begin(); I != Insts.end(); ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SwitchInst.html">SwitchInst</a> *OldInst = I-&gt;first;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewI = VMap.<a class="code" href="classllvm_1_1ValueMap.html#ab93f9e5a72aec99f3cdf542cd7d27e05">lookup</a>(OldInst);</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SwitchInst.html">SwitchInst</a> *NewInst = cast_or_null&lt;SwitchInst&gt;(NewI);</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    assert(NewInst &amp;&amp; <span class="stringliteral">&quot;All instructions that are in SrcBB must be in VMap.&quot;</span>);</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    NewLoopProps.UnswitchedVals[NewInst] = OldLoopProps.UnswitchedVals[OldInst];</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  }</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;}</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">LoopUnswitch::ID</a> = 0;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<a class="code" href="LoopUnswitch_8cpp.html#a5356887d8033d7575d68a3b582da71eb">INITIALIZE_PASS_BEGIN</a>(LoopUnswitch, <span class="stringliteral">&quot;loop-unswitch&quot;</span>, <span class="stringliteral">&quot;Unswitch loops&quot;</span>,</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                      <span class="keyword">false</span>, <span class="keyword">false</span>)</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<a class="code" href="PassSupport_8h.html#af0564bcdde2dd4400c670ca278c6035f">INITIALIZE_AG_DEPENDENCY</a>(<a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a>)</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(LoopSimplify)</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a>)</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(LCSSA)</div><div class="line"><a name="l00341"></a><span class="lineno"><a class="line" href="LoopUnswitch_8cpp.html#a2dabdd15f3a22a346eb20585b4c5bf31">  341</a></span>&#160;<a class="code" href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a>(LoopUnswitch, &quot;<a class="code" href="Analysis_2README_8txt.html#a01d2af4eee7c40485a0ce3683a2e907a">loop</a>-<a class="code" href="LoopUnswitch_8cpp.html#a2dabdd15f3a22a346eb20585b4c5bf31">unswitch</a>&quot;, &quot;Unswitch <a class="code" href="LoopUnswitch_8cpp.html#a0aa18bdfdde7435ee8015bcfb6c80849">loops</a>&quot;,</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                      <a class="code" href="namespacefalse.html">false</a>, false)</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div><div class="line"><a name="l00344"></a><span class="lineno"><a class="line" href="namespacellvm.html#a295cc866ecaadd6c849119cfa9b22110">  344</a></span>&#160;<a class="code" href="classllvm_1_1Pass.html">Pass</a> *<a class="code" href="namespacellvm.html">llvm</a>::<a class="code" href="namespacellvm.html#a295cc866ecaadd6c849119cfa9b22110">createLoopUnswitchPass</a>(<span class="keywordtype">bool</span> Os) {</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> LoopUnswitch(Os);</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;}</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment">/// FindLIVLoopCondition - Cond is a condition that occurs in L.  If it is</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment">/// invariant in the loop, or has an invariant piece, return the invariant.</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="comment">/// Otherwise, return null.</span></div><div class="line"><a name="l00351"></a><span class="lineno"><a class="line" href="LoopUnswitch_8cpp.html#a75e3478f1ffb79f86c7361cf902df335">  351</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="LoopUnswitch_8cpp.html#a75e3478f1ffb79f86c7361cf902df335">FindLIVLoopCondition</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *Cond, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <span class="keywordtype">bool</span> &amp;Changed) {</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="comment">// We started analyze new instruction, increment scanned instructions counter.</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  ++TotalInsts;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="comment">// We can never unswitch on vector conditions.</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="keywordflow">if</span> (Cond-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">isVectorTy</a>())</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="comment">// Constants should be folded, not unswitched on!</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <span class="keywordflow">if</span> (isa&lt;Constant&gt;(Cond)) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <span class="comment">// TODO: Handle: br (VARIANT|INVARIANT).</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <span class="comment">// Hoist simple values out.</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <span class="keywordflow">if</span> (L-&gt;<a class="code" href="classllvm_1_1Loop.html#af3a3f2237fde326c32376a3d64a69452">makeLoopInvariant</a>(Cond, Changed))</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordflow">return</span> Cond;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *BO = dyn_cast&lt;BinaryOperator&gt;(Cond))</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keywordflow">if</span> (BO-&gt;getOpcode() == <a class="code" href="namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">Instruction::And</a> ||</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        BO-&gt;getOpcode() == <a class="code" href="namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">Instruction::Or</a>) {</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      <span class="comment">// If either the left or right side is invariant, we can unswitch on this,</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      <span class="comment">// which will cause the branch to go away in one loop and the condition to</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      <span class="comment">// simplify in the other one.</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *LHS = <a class="code" href="LoopUnswitch_8cpp.html#a75e3478f1ffb79f86c7361cf902df335">FindLIVLoopCondition</a>(BO-&gt;getOperand(0), L, Changed))</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        <span class="keywordflow">return</span> LHS;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *RHS = <a class="code" href="LoopUnswitch_8cpp.html#a75e3478f1ffb79f86c7361cf902df335">FindLIVLoopCondition</a>(BO-&gt;getOperand(1), L, Changed))</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="keywordflow">return</span> RHS;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    }</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;}</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="keywordtype">bool</span> LoopUnswitch::runOnLoop(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1LPPassManager.html">LPPassManager</a> &amp;LPM_Ref) {</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  LI = &amp;getAnalysis&lt;LoopInfo&gt;();</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  LPM = &amp;LPM_Ref;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  DT = getAnalysisIfAvailable&lt;DominatorTree&gt;();</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  currentLoop = L;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a> = currentLoop-&gt;getHeader()-&gt;getParent();</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <span class="keywordflow">do</span> {</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    assert(currentLoop-&gt;isLCSSAForm(*DT));</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    redoLoop = <span class="keyword">false</span>;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    Changed |= processCurrentLoop();</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  } <span class="keywordflow">while</span>(redoLoop);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <span class="keywordflow">if</span> (Changed) {</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="comment">// FIXME: Reconstruct dom info, because it is not preserved properly.</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordflow">if</span> (DT)</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;      DT-&gt;<a class="code" href="classllvm_1_1DominatorTree.html#ad32eadf1d1863a8feb03a6933ab29615">runOnFunction</a>(*F);</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  }</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="keywordflow">return</span> Changed;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;}</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment">/// processCurrentLoop - Do actual work and unswitch loop if possible</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment">/// and profitable.</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> LoopUnswitch::processCurrentLoop() {</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  initLoopData();</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="comment">// If LoopSimplify was unable to form a preheader, don&#39;t do any unswitching.</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <span class="keywordflow">if</span> (!loopPreheader)</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <span class="comment">// Loops with indirectbr cannot be cloned.</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="keywordflow">if</span> (!currentLoop-&gt;<a class="code" href="classllvm_1_1Loop.html#ab08dbc2560e28c86dd3a38800751ad87">isSafeToClone</a>())</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="comment">// Without dedicated exits, splitting the exit edge may fail.</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="keywordflow">if</span> (!currentLoop-&gt;<a class="code" href="classllvm_1_1Loop.html#a969c0fff5d11b71d80a08589a5cc2437">hasDedicatedExits</a>())</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;Context = loopHeader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ad652423d9d91271ba153eb86482b2f55">getContext</a>();</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  <span class="comment">// Probably we reach the quota of branches for this loop. If so</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <span class="comment">// stop unswitching.</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  <span class="keywordflow">if</span> (!BranchesInfo.countLoop(currentLoop, getAnalysis&lt;TargetTransformInfo&gt;()))</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="comment">// Loop over all of the basic blocks in the loop.  If we find an interior</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <span class="comment">// block that is branching on a loop-invariant condition, we can unswitch this</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <span class="comment">// loop.</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LoopBase.html#ab39f9623eaa8cd22213aa716c6fb9994">Loop::block_iterator</a> I = currentLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a3df1c508a7b1c89247367cab269076e2">block_begin</a>(),</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;         E = currentLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a91e3f5f9bf6ecbd058624a479e150603">block_end</a>(); I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <a class="code" href="classllvm_1_1TerminatorInst.html">TerminatorInst</a> *TI = (*I)-&gt;getTerminator();</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = dyn_cast&lt;BranchInst&gt;(TI)) {</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      <span class="comment">// If this isn&#39;t branching on an invariant condition, we can&#39;t unswitch</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      <span class="comment">// it.</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      <span class="keywordflow">if</span> (BI-&gt;isConditional()) {</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        <span class="comment">// See if this, or some part of it, is loop invariant.  If so, we can</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        <span class="comment">// unswitch on it if we desire.</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *LoopCond = <a class="code" href="LoopUnswitch_8cpp.html#a75e3478f1ffb79f86c7361cf902df335">FindLIVLoopCondition</a>(BI-&gt;getCondition(),</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                                               currentLoop, Changed);</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="keywordflow">if</span> (LoopCond &amp;&amp; UnswitchIfProfitable(LoopCond,</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                                             <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(Context))) {</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;          ++NumBranches;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        }</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      }</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SwitchInst.html">SwitchInst</a> *SI = dyn_cast&lt;SwitchInst&gt;(TI)) {</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *LoopCond = <a class="code" href="LoopUnswitch_8cpp.html#a75e3478f1ffb79f86c7361cf902df335">FindLIVLoopCondition</a>(SI-&gt;<a class="code" href="classllvm_1_1SwitchInst.html#add5ee99852e9927d0777e74572c91708">getCondition</a>(),</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                                             currentLoop, Changed);</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      <span class="keywordtype">unsigned</span> NumCases = SI-&gt;<a class="code" href="classllvm_1_1SwitchInst.html#a4901d4ad48420014059e9393f75442ae">getNumCases</a>();</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      <span class="keywordflow">if</span> (LoopCond &amp;&amp; NumCases) {</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <span class="comment">// Find a value to unswitch on:</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <span class="comment">// FIXME: this should chose the most expensive case!</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <span class="comment">// FIXME: scan for a case with a non-critical edge?</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *UnswitchVal = 0;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <span class="comment">// Do not process same value again and again.</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <span class="comment">// At this point we have some cases already unswitched and</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        <span class="comment">// some not yet unswitched. Let&#39;s find the first not yet unswitched one.</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SwitchInst_1_1CaseIt.html">SwitchInst::CaseIt</a> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = SI-&gt;<a class="code" href="classllvm_1_1SwitchInst.html#ae69c15ce940c41719cb96209e113a26e">case_begin</a>(), e = SI-&gt;<a class="code" href="classllvm_1_1SwitchInst.html#a219f2a3514d904d05dc8003a4ee5d291">case_end</a>();</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;             <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;          <a class="code" href="classllvm_1_1Constant.html">Constant</a> *UnswitchValCandidate = <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>.getCaseValue();</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;          <span class="keywordflow">if</span> (!BranchesInfo.isUnswitched(SI, UnswitchValCandidate)) {</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            UnswitchVal = UnswitchValCandidate;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;          }</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        }</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        <span class="keywordflow">if</span> (!UnswitchVal)</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        <span class="keywordflow">if</span> (UnswitchIfProfitable(LoopCond, UnswitchVal)) {</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;          ++NumSwitches;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        }</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      }</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    }</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="comment">// Scan the instructions to check for unswitchable values.</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> BBI = (*I)-&gt;begin(), E = (*I)-&gt;end();</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;         BBI != E; ++BBI)</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *SI = dyn_cast&lt;SelectInst&gt;(BBI)) {</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *LoopCond = <a class="code" href="LoopUnswitch_8cpp.html#a75e3478f1ffb79f86c7361cf902df335">FindLIVLoopCondition</a>(SI-&gt;<a class="code" href="classllvm_1_1SwitchInst.html#add5ee99852e9927d0777e74572c91708">getCondition</a>(),</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                                               currentLoop, Changed);</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <span class="keywordflow">if</span> (LoopCond &amp;&amp; UnswitchIfProfitable(LoopCond,</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                                             <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(Context))) {</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;          ++NumSelects;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        }</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;      }</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  }</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  <span class="keywordflow">return</span> Changed;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;}</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="comment">/// isTrivialLoopExitBlock - Check to see if all paths from BB exit the</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="comment">/// loop with no side effects (including infinite loops).</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="comment">/// If true, we return true and set ExitBB to the block we</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment">/// exit through.</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00505"></a><span class="lineno"><a class="line" href="LoopUnswitch_8cpp.html#a8d46c5e008b296b0924284d8fa6dfa00">  505</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LoopUnswitch_8cpp.html#a8d46c5e008b296b0924284d8fa6dfa00">isTrivialLoopExitBlockHelper</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                                         <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *&amp;ExitBB,</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                                         std::set&lt;BasicBlock*&gt; &amp;Visited) {</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <span class="keywordflow">if</span> (!Visited.insert(BB).second) {</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="comment">// Already visited. Without more analysis, this could indicate an infinite</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="comment">// loop.</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  }</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a92a38e2e3412bde7fd2b71db212b61aa">contains</a>(BB)) {</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="comment">// Otherwise, this is a loop exit, this is fine so long as this is the</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="comment">// first exit.</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="keywordflow">if</span> (ExitBB != 0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    ExitBB = <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  }</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <span class="comment">// Otherwise, this is an unvisited intra-loop node.  Check all successors.</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SuccIterator.html">succ_iterator</a> SI = <a class="code" href="namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">succ_begin</a>(BB), E = <a class="code" href="namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">succ_end</a>(BB); SI != E; ++SI) {</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="comment">// Check to see if the successor is a trivial loop exit.</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="LoopUnswitch_8cpp.html#a8d46c5e008b296b0924284d8fa6dfa00">isTrivialLoopExitBlockHelper</a>(L, *SI, ExitBB, Visited))</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  }</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  <span class="comment">// Okay, everything after this looks good, check to make sure that this block</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  <span class="comment">// doesn&#39;t include any side effects.</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> I = BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(), E = BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>(); I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="keywordflow">if</span> (I-&gt;mayHaveSideEffects())</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;}</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment">/// isTrivialLoopExitBlock - Return true if the specified block unconditionally</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment">/// leads to an exit from the specified loop, and has no side-effects in the</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment">/// process.  If so, return the block that is exited to, otherwise return null.</span></div><div class="line"><a name="l00540"></a><span class="lineno"><a class="line" href="LoopUnswitch_8cpp.html#a9ab6a0cab40eae4e54ed18308f8826ff">  540</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="LoopUnswitch_8cpp.html#a9ab6a0cab40eae4e54ed18308f8826ff">isTrivialLoopExitBlock</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  std::set&lt;BasicBlock*&gt; Visited;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  Visited.insert(L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>());  <span class="comment">// Branches to header make infinite loops.</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitBB = 0;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="LoopUnswitch_8cpp.html#a8d46c5e008b296b0924284d8fa6dfa00">isTrivialLoopExitBlockHelper</a>(L, BB, ExitBB, Visited))</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="keywordflow">return</span> ExitBB;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;}</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="comment">/// IsTrivialUnswitchCondition - Check to see if this unswitch condition is</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="comment">/// trivial: that is, that the condition controls whether or not the loop does</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="comment">/// anything at all.  If this is a trivial condition, unswitching produces no</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="comment">/// code duplications (equivalently, it produces a simpler loop and a new empty</span></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="comment">/// loop, which gets deleted).</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="comment">/// If this is a trivial condition, return true, otherwise return false.  When</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment">/// returning true, this sets Cond and Val to the condition that controls the</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment">/// trivial condition: when Cond dynamically equals Val, the loop is known to</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="comment">/// exit.  Finally, this sets LoopExit to the BB that the loop exits to when</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="comment">/// Cond == Val.</span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> LoopUnswitch::IsTrivialUnswitchCondition(<a class="code" href="classllvm_1_1Value.html">Value</a> *Cond, <a class="code" href="classllvm_1_1Constant.html">Constant</a> **Val,</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                                       <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> **LoopExit) {</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Header = currentLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>();</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <a class="code" href="classllvm_1_1TerminatorInst.html">TerminatorInst</a> *HeaderTerm = Header-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>();</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;Context = Header-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ad652423d9d91271ba153eb86482b2f55">getContext</a>();</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *LoopExitBB = 0;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = dyn_cast&lt;BranchInst&gt;(HeaderTerm)) {</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <span class="comment">// If the header block doesn&#39;t end with a conditional branch on Cond, we</span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="comment">// can&#39;t handle it.</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="keywordflow">if</span> (!BI-&gt;isConditional() || BI-&gt;getCondition() != Cond)</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="comment">// Check to see if a successor of the branch is guaranteed to</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="comment">// exit through a unique exit block without having any</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="comment">// side-effects.  If so, determine the value of Cond that causes it to do</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="comment">// this.</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="keywordflow">if</span> ((LoopExitBB = <a class="code" href="LoopUnswitch_8cpp.html#a9ab6a0cab40eae4e54ed18308f8826ff">isTrivialLoopExitBlock</a>(currentLoop,</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                                             BI-&gt;getSuccessor(0)))) {</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;      <span class="keywordflow">if</span> (Val) *Val = <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(Context);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((LoopExitBB = <a class="code" href="LoopUnswitch_8cpp.html#a9ab6a0cab40eae4e54ed18308f8826ff">isTrivialLoopExitBlock</a>(currentLoop,</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                                                    BI-&gt;getSuccessor(1)))) {</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      <span class="keywordflow">if</span> (Val) *Val = <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(Context);</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    }</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SwitchInst.html">SwitchInst</a> *SI = dyn_cast&lt;SwitchInst&gt;(HeaderTerm)) {</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="comment">// If this isn&#39;t a switch on Cond, we can&#39;t handle it.</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordflow">if</span> (SI-&gt;<a class="code" href="classllvm_1_1SwitchInst.html#add5ee99852e9927d0777e74572c91708">getCondition</a>() != Cond) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="comment">// Check to see if a successor of the switch is guaranteed to go to the</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="comment">// latch block or exit through a one exit block without having any</span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <span class="comment">// side-effects.  If so, determine the value of Cond that causes it to do</span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="comment">// this.</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="comment">// Note that we can&#39;t trivially unswitch on the default case or</span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="comment">// on already unswitched cases.</span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SwitchInst_1_1CaseIt.html">SwitchInst::CaseIt</a> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = SI-&gt;<a class="code" href="classllvm_1_1SwitchInst.html#ae69c15ce940c41719cb96209e113a26e">case_begin</a>(), e = SI-&gt;<a class="code" href="classllvm_1_1SwitchInst.html#a219f2a3514d904d05dc8003a4ee5d291">case_end</a>();</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;         <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *LoopExitCandidate;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;      <span class="keywordflow">if</span> ((LoopExitCandidate = <a class="code" href="LoopUnswitch_8cpp.html#a9ab6a0cab40eae4e54ed18308f8826ff">isTrivialLoopExitBlock</a>(currentLoop,</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                                               <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>.getCaseSuccessor()))) {</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        <span class="comment">// Okay, we found a trivial case, remember the value that is trivial.</span></div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CaseVal = <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>.getCaseValue();</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        <span class="comment">// Check that it was not unswitched before, since already unswitched</span></div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        <span class="comment">// trivial vals are looks trivial too.</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        <span class="keywordflow">if</span> (BranchesInfo.isUnswitched(SI, CaseVal))</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        LoopExitBB = LoopExitCandidate;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        <span class="keywordflow">if</span> (Val) *Val = CaseVal;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      }</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    }</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  }</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <span class="comment">// If we didn&#39;t find a single unique LoopExit block, or if the loop exit block</span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  <span class="comment">// contains phi nodes, this isn&#39;t trivial.</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  <span class="keywordflow">if</span> (!LoopExitBB || isa&lt;PHINode&gt;(LoopExitBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>()))</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;   <span class="comment">// Can&#39;t handle this.</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <span class="keywordflow">if</span> (LoopExit) *LoopExit = LoopExitBB;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  <span class="comment">// We already know that nothing uses any scalar values defined inside of this</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  <span class="comment">// loop.  As such, we just have to check to see if this loop will execute any</span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <span class="comment">// side-effecting instructions (e.g. stores, calls, volatile loads) in the</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <span class="comment">// part of the loop that the code *would* execute.  We already checked the</span></div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  <span class="comment">// tail, check the header now.</span></div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> I = Header-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(), E = Header-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>(); I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="keywordflow">if</span> (I-&gt;mayHaveSideEffects())</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;}</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="comment">/// UnswitchIfProfitable - We have found that we can unswitch currentLoop when</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="comment">/// LoopCond == Val to simplify the loop.  If we decide that this is profitable,</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="comment">/// unswitch the loop, reprocess the pieces, then return true.</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> LoopUnswitch::UnswitchIfProfitable(<a class="code" href="classllvm_1_1Value.html">Value</a> *LoopCond, <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Val) {</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a> = loopHeader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>();</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *CondVal = 0;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitBlock = 0;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  <span class="keywordflow">if</span> (IsTrivialUnswitchCondition(LoopCond, &amp;CondVal, &amp;ExitBlock)) {</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="comment">// If the condition is trivial, always unswitch. There is no code growth</span></div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="comment">// for this case.</span></div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    UnswitchTrivialCondition(currentLoop, LoopCond, CondVal, ExitBlock);</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  }</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  <span class="comment">// Check to see if it would be profitable to unswitch current loop.</span></div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  <span class="comment">// Do not do non-trivial unswitch while optimizing for size.</span></div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  <span class="keywordflow">if</span> (OptimizeForSize ||</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;      F-&gt;<a class="code" href="classllvm_1_1Function.html#a72873ed64b7be01507a2248b8e756ec8">getAttributes</a>().<a class="code" href="classllvm_1_1AttributeSet.html#a54abbe67d4a53c92652f1666dc19281f">hasAttribute</a>(AttributeSet::FunctionIndex,</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                                      <a class="code" href="classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60ea2ac83e0612ce8f8d69651cd529061feb">Attribute::OptimizeForSize</a>))</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  UnswitchNontrivialCondition(LoopCond, Val, currentLoop);</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;}</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="comment">/// CloneLoop - Recursively clone the specified loop and all of its children,</span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="comment">/// mapping the blocks with the specified map.</span></div><div class="line"><a name="l00661"></a><span class="lineno"><a class="line" href="LoopUnswitch_8cpp.html#a3878d97cf729cce40da2480526d6e9e3">  661</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *<a class="code" href="LoopUnswitch_8cpp.html#a3878d97cf729cce40da2480526d6e9e3">CloneLoop</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46aeebf3cf6cced994d25bca18ea275ab8b">PL</a>, <a class="code" href="classllvm_1_1ValueMap.html">ValueToValueMapTy</a> &amp;VM,</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                       <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI, <a class="code" href="classllvm_1_1LPPassManager.html">LPPassManager</a> *LPM) {</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  <a class="code" href="classllvm_1_1Loop.html">Loop</a> *New = <span class="keyword">new</span> <a class="code" href="namespacellvm_1_1GC.html#a5f606a2b04c809f789a574660cd25213a960eba6a93af558b44d3d14e8393d324">Loop</a>();</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  LPM-&gt;<a class="code" href="classllvm_1_1LPPassManager.html#aab79e29d76e70fe855a34beff78eea06">insertLoop</a>(New, PL);</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  <span class="comment">// Add all of the blocks in L to the new loop.</span></div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LoopBase.html#ab39f9623eaa8cd22213aa716c6fb9994">Loop::block_iterator</a> I = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a3df1c508a7b1c89247367cab269076e2">block_begin</a>(), E = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a91e3f5f9bf6ecbd058624a479e150603">block_end</a>();</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;       I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="keywordflow">if</span> (LI-&gt;<a class="code" href="classllvm_1_1LoopInfo.html#a4abca289c73cd09487e05d11d9f7d877">getLoopFor</a>(*I) == L)</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;      New-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a63f099d3bf7cf97eb3ae2d630e3d1afc">addBasicBlockToLoop</a>(cast&lt;BasicBlock&gt;(VM[*I]), LI-&gt;<a class="code" href="classllvm_1_1LoopInfo.html#ad3c837c02164da836d309afebfc9c943">getBase</a>());</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <span class="comment">// Add all of the subloops to the new loop.</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LoopBase.html#a4b2d2c2ddd3ccf5630c18731a162977d">Loop::iterator</a> I = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a22b3e904c08bd922efd707282aed89d9">begin</a>(), E = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a5a3b8a8269ba0c61102f71a2a3bd42cd">end</a>(); I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <a class="code" href="LoopUnswitch_8cpp.html#a3878d97cf729cce40da2480526d6e9e3">CloneLoop</a>(*I, New, VM, LI, LPM);</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  <span class="keywordflow">return</span> New;</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;}</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;<span class="comment">/// EmitPreheaderBranchOnCondition - Emit a conditional branch on two values</span></div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;<span class="comment">/// if LIC == Val, branch to TrueDst, otherwise branch to FalseDest.  Insert the</span></div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;<span class="comment">/// code immediately before InsertPt.</span></div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> LoopUnswitch::EmitPreheaderBranchOnCondition(<a class="code" href="classllvm_1_1Value.html">Value</a> *LIC, <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Val,</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                                                  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *TrueDest,</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                                                  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *FalseDest,</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                                                  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InsertPt) {</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  <span class="comment">// Insert a conditional branch on LIC to the two preheaders.  The original</span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  <span class="comment">// code is the true version and the new code is the false version.</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *BranchVal = LIC;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;ConstantInt&gt;(Val) ||</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;      Val-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() != <a class="code" href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">Type::getInt1Ty</a>(LIC-&gt;<a class="code" href="classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>()))</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    BranchVal = <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(InsertPt, <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>, LIC, Val);</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Val != <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(Val-&gt;<a class="code" href="classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>()))</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="comment">// We want to enter the new loop when the condition is true.</span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(TrueDest, FalseDest);</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  <span class="comment">// Insert the new branch.</span></div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = <a class="code" href="classllvm_1_1BranchInst.html#ae9cbc599309fd2da33ec1c61df01ce1f">BranchInst::Create</a>(TrueDest, FalseDest, BranchVal, InsertPt);</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  <span class="comment">// If either edge is critical, split it. This helps preserve LoopSimplify</span></div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  <span class="comment">// form for enclosing loops.</span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <a class="code" href="namespacellvm.html#afa6abaa0eea3b2083902cf651a9653b1">SplitCriticalEdge</a>(BI, 0, <span class="keyword">this</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">true</span>);</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  <a class="code" href="namespacellvm.html#afa6abaa0eea3b2083902cf651a9653b1">SplitCriticalEdge</a>(BI, 1, <span class="keyword">this</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">true</span>);</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;}</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="comment">/// UnswitchTrivialCondition - Given a loop that has a trivial unswitchable</span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="comment">/// condition in it (a cond branch from its header block to its latch block,</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="comment">/// where the path through the loop that doesn&#39;t execute its body has no</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;<span class="comment">/// side-effects), unswitch it.  This doesn&#39;t involve any code duplication, just</span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="comment">/// moving the conditional branch outside of the loop and updating loop info.</span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> LoopUnswitch::UnswitchTrivialCondition(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1Value.html">Value</a> *Cond,</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;                                            <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Val,</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;                                            <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitBlock) {</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;loop-unswitch: Trivial-Unswitch loop %&quot;</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        &lt;&lt; loopHeader-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt; <span class="stringliteral">&quot; [&quot;</span> &lt;&lt; L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1939dbb59960462878c408efb21a2c75">getBlocks</a>().size()</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        &lt;&lt; <span class="stringliteral">&quot; blocks] in Function &quot;</span> &lt;&lt; L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        &lt;&lt; <span class="stringliteral">&quot; on cond: &quot;</span> &lt;&lt; *Val &lt;&lt; <span class="stringliteral">&quot; == &quot;</span> &lt;&lt; *Cond &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  <span class="comment">// First step, split the preheader, so that we know that there is a safe place</span></div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  <span class="comment">// to insert the conditional branch.  We will change loopPreheader to have a</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  <span class="comment">// conditional branch on Cond.</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewPH = <a class="code" href="namespacellvm.html#a0a7e7f31f3da37dc95109dd1164a30b6">SplitEdge</a>(loopPreheader, loopHeader, <span class="keyword">this</span>);</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  <span class="comment">// Now that we have a place to insert the conditional branch, create a place</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <span class="comment">// to branch to: this is the exit block out of the loop that we should</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <span class="comment">// short-circuit to.</span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  <span class="comment">// Split this block now, so that the loop maintains its exit block, and so</span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  <span class="comment">// that the jump from the preheader can execute the contents of the exit block</span></div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  <span class="comment">// without actually branching to it (the exit block should be dominated by the</span></div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  <span class="comment">// loop header, not the preheader).</span></div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  assert(!L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a92a38e2e3412bde7fd2b71db212b61aa">contains</a>(ExitBlock) &amp;&amp; <span class="stringliteral">&quot;Exit block is in the loop?&quot;</span>);</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewExit = <a class="code" href="namespacellvm.html#ad8209e4dff0e2440ea41cefb1cfb146e">SplitBlock</a>(ExitBlock, ExitBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(), <span class="keyword">this</span>);</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  <span class="comment">// Okay, now we have a position to branch from and a position to branch to,</span></div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  <span class="comment">// insert the new conditional branch.</span></div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  EmitPreheaderBranchOnCondition(Cond, Val, NewExit, NewPH,</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                                 loopPreheader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>());</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  LPM-&gt;<a class="code" href="classllvm_1_1LPPassManager.html#a38a30148fc051115d1d72e60a8b65506">deleteSimpleAnalysisValue</a>(loopPreheader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>(), L);</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  loopPreheader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  <span class="comment">// We need to reprocess this loop, it could be unswitched again.</span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  redoLoop = <span class="keyword">true</span>;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  <span class="comment">// Now that we know that the loop is never entered when this condition is a</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  <span class="comment">// particular value, rewrite the loop with this info.  We know that this will</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  <span class="comment">// at least eliminate the old branch.</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  RewriteLoopBodyWithConditionConstant(L, Cond, Val, <span class="keyword">false</span>);</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;  ++NumTrivial;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;}</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment">/// SplitExitEdges - Split all of the edges from inside the loop to their exit</span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment">/// blocks.  Update the appropriate Phi nodes as we do so.</span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> LoopUnswitch::SplitExitEdges(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L,</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;                               <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;BasicBlock *&gt;</a> &amp;ExitBlocks){</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = ExitBlocks.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitBlock = ExitBlocks[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 4&gt;</a> Preds(<a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(ExitBlock),</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;                                       <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(ExitBlock));</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <span class="comment">// Although SplitBlockPredecessors doesn&#39;t preserve loop-simplify in</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <span class="comment">// general, if we call it on all predecessors of all exits then it does.</span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    <span class="keywordflow">if</span> (!ExitBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a3075a9eef753018bed561df31f38dc23">isLandingPad</a>()) {</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      <a class="code" href="namespacellvm.html#a55e3df77bb47f39e077b6a4e7e00bb03">SplitBlockPredecessors</a>(ExitBlock, Preds, <span class="stringliteral">&quot;.us-lcssa&quot;</span>, <span class="keyword">this</span>);</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock*, 2&gt;</a> NewBBs;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      <a class="code" href="namespacellvm.html#a02c38c380d809959819ff729cc158cee">SplitLandingPadPredecessors</a>(ExitBlock, Preds, <span class="stringliteral">&quot;.us-lcssa&quot;</span>, <span class="stringliteral">&quot;.us-lcssa&quot;</span>,</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                                  <span class="keyword">this</span>, NewBBs);</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    }</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  }</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;}</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="comment">/// UnswitchNontrivialCondition - We determined that the loop is profitable</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="comment">/// to unswitch when LIC equal Val.  Split it into loop versions and test the</span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="comment">/// condition outside of either loop.  Return the loops created as Out1/Out2.</span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> LoopUnswitch::UnswitchNontrivialCondition(<a class="code" href="classllvm_1_1Value.html">Value</a> *LIC, <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Val,</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                                               <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L) {</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a> = loopHeader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>();</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;loop-unswitch: Unswitching loop %&quot;</span></div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;        &lt;&lt; loopHeader-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt; <span class="stringliteral">&quot; [&quot;</span> &lt;&lt; L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1939dbb59960462878c408efb21a2c75">getBlocks</a>().size()</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        &lt;&lt; <span class="stringliteral">&quot; blocks] in Function &quot;</span> &lt;&lt; F-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>()</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        &lt;&lt; <span class="stringliteral">&quot; when &#39;&quot;</span> &lt;&lt; *Val &lt;&lt; <span class="stringliteral">&quot;&#39; == &quot;</span> &lt;&lt; *LIC &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> *SE = getAnalysisIfAvailable&lt;ScalarEvolution&gt;())</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    SE-&gt;forgetLoop(L);</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  LoopBlocks.clear();</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  NewBlocks.clear();</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  <span class="comment">// First step, split the preheader and exit blocks, and add these blocks to</span></div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  <span class="comment">// the LoopBlocks list.</span></div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewPreheader = <a class="code" href="namespacellvm.html#a0a7e7f31f3da37dc95109dd1164a30b6">SplitEdge</a>(loopPreheader, loopHeader, <span class="keyword">this</span>);</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;  LoopBlocks.push_back(NewPreheader);</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;  <span class="comment">// We want the loop to come after the preheader, but before the exit blocks.</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  LoopBlocks.insert(LoopBlocks.end(), L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a3df1c508a7b1c89247367cab269076e2">block_begin</a>(), L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a91e3f5f9bf6ecbd058624a479e150603">block_end</a>());</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock*, 8&gt;</a> ExitBlocks;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  L-&gt;<a class="code" href="classllvm_1_1Loop.html#a147b421eaf58e18b10664a6f3c5c7f5b">getUniqueExitBlocks</a>(ExitBlocks);</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  <span class="comment">// Split all of the edges from inside the loop to their exit blocks.  Update</span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  <span class="comment">// the appropriate Phi nodes as we do so.</span></div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;  SplitExitEdges(L, ExitBlocks);</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;  <span class="comment">// The exit blocks may have been changed due to edge splitting, recompute.</span></div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  ExitBlocks.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  L-&gt;<a class="code" href="classllvm_1_1Loop.html#a147b421eaf58e18b10664a6f3c5c7f5b">getUniqueExitBlocks</a>(ExitBlocks);</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  <span class="comment">// Add exit blocks to the loop blocks.</span></div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;  LoopBlocks.insert(LoopBlocks.end(), ExitBlocks.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), ExitBlocks.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>());</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  <span class="comment">// Next step, clone all of the basic blocks that make up the loop (including</span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;  <span class="comment">// the loop preheader and exit blocks), keeping track of the mapping between</span></div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  <span class="comment">// the instructions and blocks.</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  NewBlocks.reserve(LoopBlocks.size());</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  <a class="code" href="classllvm_1_1ValueMap.html">ValueToValueMapTy</a> VMap;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = LoopBlocks.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewBB = <a class="code" href="namespacellvm.html#af140c7ebb85d2f55e90535f5e0cc5028">CloneBasicBlock</a>(LoopBlocks[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], VMap, <span class="stringliteral">&quot;.us&quot;</span>, F);</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    NewBlocks.push_back(NewBB);</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    VMap[LoopBlocks[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]] = NewBB;  <span class="comment">// Keep the BB mapping.</span></div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    LPM-&gt;<a class="code" href="classllvm_1_1LPPassManager.html#aabfec94c2ec8e035930f869a3a3597be">cloneBasicBlockSimpleAnalysis</a>(LoopBlocks[i], NewBB, L);</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  }</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  <span class="comment">// Splice the newly inserted blocks into the function right before the</span></div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  <span class="comment">// original preheader.</span></div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  F-&gt;<a class="code" href="classllvm_1_1Function.html#a4d34a40b2667246539b80589adf2028e">getBasicBlockList</a>().<a class="code" href="classllvm_1_1iplist.html#afe55b235779222b867c16d3321c1cd16">splice</a>(NewPreheader, F-&gt;<a class="code" href="classllvm_1_1Function.html#a4d34a40b2667246539b80589adf2028e">getBasicBlockList</a>(),</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;                                NewBlocks[0], F-&gt;<a class="code" href="classllvm_1_1Function.html#ae4ca2261b8b901e415fda7feac5051ea">end</a>());</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  <span class="comment">// Now we create the new Loop object for the versioned loop.</span></div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;  <a class="code" href="classllvm_1_1Loop.html">Loop</a> *NewLoop = <a class="code" href="LoopUnswitch_8cpp.html#a3878d97cf729cce40da2480526d6e9e3">CloneLoop</a>(L, L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1431766de798501f107d9031821f311e">getParentLoop</a>(), VMap, LI, LPM);</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  <span class="comment">// Recalculate unswitching quota, inherit simplified switches info for NewBB,</span></div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;  <span class="comment">// Probably clone more loop-unswitch related loop properties.</span></div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  BranchesInfo.cloneData(NewLoop, L, VMap);</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  <a class="code" href="classllvm_1_1Loop.html">Loop</a> *ParentLoop = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1431766de798501f107d9031821f311e">getParentLoop</a>();</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  <span class="keywordflow">if</span> (ParentLoop) {</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="comment">// Make sure to add the cloned preheader and exit blocks to the parent loop</span></div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    <span class="comment">// as well.</span></div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    ParentLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a63f099d3bf7cf97eb3ae2d630e3d1afc">addBasicBlockToLoop</a>(NewBlocks[0], LI-&gt;getBase());</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  }</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = ExitBlocks.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewExit = cast&lt;BasicBlock&gt;(VMap[ExitBlocks[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]]);</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    <span class="comment">// The new exit block should be in the same loop as the old one.</span></div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Loop.html">Loop</a> *ExitBBLoop = LI-&gt;getLoopFor(ExitBlocks[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]))</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;      ExitBBLoop-&gt;addBasicBlockToLoop(NewExit, LI-&gt;getBase());</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    assert(NewExit-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1TerminatorInst.html#a4c26d3b92af99a6c8defd89a2d39ca32">getNumSuccessors</a>() == 1 &amp;&amp;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;           <span class="stringliteral">&quot;Exit block should have been split to have one successor!&quot;</span>);</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitSucc = NewExit-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1TerminatorInst.html#a3aac3b6c36415a2b08f65ead9e3e51e7">getSuccessor</a>(0);</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    <span class="comment">// If the successor of the exit block had PHI nodes, add an entry for</span></div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <span class="comment">// NewExit.</span></div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> I = ExitSucc-&gt;begin();</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;         <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1PHINode.html">PHINode</a>&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>); ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *V = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a21960167f529265a1cb02ac1e8ad10f6">getIncomingValueForBlock</a>(ExitBlocks[i]);</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;      <a class="code" href="classllvm_1_1ValueMapIterator.html">ValueToValueMapTy::iterator</a> It = VMap.<a class="code" href="classllvm_1_1ValueMap.html#a7629b8c5f6a6802ee0fdc5c290769692">find</a>(V);</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;      <span class="keywordflow">if</span> (It != VMap.<a class="code" href="classllvm_1_1ValueMap.html#ab871e2d0ebded563edfebd6766fc1a04">end</a>()) V = It-&gt;<a class="code" href="structllvm_1_1ValueMapIterator_1_1ValueTypeProxy.html#a5bcf5b029fa9492c00d2329def9b5137">second</a>;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;      PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(V, NewExit);</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    }</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LandingPadInst.html">LandingPadInst</a> *LPad = NewExit-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#adf2126190885b10019398655f5e6b256">getLandingPadInst</a>()) {</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;      <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = <a class="code" href="classllvm_1_1PHINode.html#afb5e83bf5123ff7c51058eb0ebebcdc6">PHINode::Create</a>(LPad-&gt;getType(), 0, <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;                                    ExitSucc-&gt;getFirstInsertionPt());</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PredIterator.html">pred_iterator</a> I = <a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(ExitSucc), E = <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(ExitSucc);</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;           I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;        <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;        <a class="code" href="classllvm_1_1LandingPadInst.html">LandingPadInst</a> *LPI = BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#adf2126190885b10019398655f5e6b256">getLandingPadInst</a>();</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;        LPI-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(PN);</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(LPI, BB);</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;      }</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    }</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;  }</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;  <span class="comment">// Rewrite the code to refer to itself.</span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = NewBlocks.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> I = NewBlocks[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="namespacellvm_1_1sys_1_1path.html#a33706aab89e700b8f79e1fa6f4f0e3ee">begin</a>(),</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;           E = NewBlocks[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="classllvm_1_1StringRef.html#a9e277b660236bb0318b61ab9cdf60dc7">end</a>(); I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;      <a class="code" href="namespacellvm.html#a2a508739577bd4d545a2318f23b98b2f">RemapInstruction</a>(I, VMap,<a class="code" href="namespacellvm.html#a77724415203930efd07d7098cb1e437da9a24bd8dba1bef2753bc3f087435ae7f">RF_NoModuleLevelChanges</a>|<a class="code" href="namespacellvm.html#a77724415203930efd07d7098cb1e437daefa3cdbac7d37f388b9dfe0fd7c88de0">RF_IgnoreMissingEntries</a>);</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  <span class="comment">// Rewrite the original preheader to select between versions of the loop.</span></div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *OldBR = cast&lt;BranchInst&gt;(loopPreheader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>());</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  assert(OldBR-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a382131e712e55e8324fbd5068de17b78">isUnconditional</a>() &amp;&amp; OldBR-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(0) == LoopBlocks[0] &amp;&amp;</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;         <span class="stringliteral">&quot;Preheader splitting did not work correctly!&quot;</span>);</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <span class="comment">// Emit the new branch that selects between the two versions of this loop.</span></div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  EmitPreheaderBranchOnCondition(LIC, Val, NewBlocks[0], LoopBlocks[0], OldBR);</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  LPM-&gt;<a class="code" href="classllvm_1_1LPPassManager.html#a38a30148fc051115d1d72e60a8b65506">deleteSimpleAnalysisValue</a>(OldBR, L);</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  OldBR-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;  LoopProcessWorklist.push_back(NewLoop);</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  redoLoop = <span class="keyword">true</span>;</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;  <span class="comment">// Keep a WeakVH holding onto LIC.  If the first call to RewriteLoopBody</span></div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  <span class="comment">// deletes the instruction (for example by simplifying a PHI that feeds into</span></div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  <span class="comment">// the condition that we&#39;re unswitching on), we don&#39;t rewrite the second</span></div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  <span class="comment">// iteration.</span></div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;  <a class="code" href="classllvm_1_1WeakVH.html">WeakVH</a> LICHandle(LIC);</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  <span class="comment">// Now we rewrite the original code to know that the condition is true and the</span></div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  <span class="comment">// new code to know that the condition is false.</span></div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  RewriteLoopBodyWithConditionConstant(L, LIC, Val, <span class="keyword">false</span>);</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;  <span class="comment">// It&#39;s possible that simplifying one loop could cause the other to be</span></div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;  <span class="comment">// changed to another value or a constant.  If its a constant, don&#39;t simplify</span></div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;  <span class="comment">// it.</span></div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  <span class="keywordflow">if</span> (!LoopProcessWorklist.empty() &amp;&amp; LoopProcessWorklist.back() == NewLoop &amp;&amp;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;      LICHandle &amp;&amp; !isa&lt;Constant&gt;(LICHandle))</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    RewriteLoopBodyWithConditionConstant(NewLoop, LICHandle, Val, <span class="keyword">true</span>);</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;}</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="comment">/// RemoveFromWorklist - Remove all instances of I from the worklist vector</span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;<span class="comment">/// specified.</span></div><div class="line"><a name="l00917"></a><span class="lineno"><a class="line" href="LoopUnswitch_8cpp.html#a7bf7967864c46da001cdd9977201b2d9">  917</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LoopUnswitch_8cpp.html#a7bf7967864c46da001cdd9977201b2d9">RemoveFromWorklist</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I,</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;                               std::vector&lt;Instruction*&gt; &amp;Worklist) {</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  Worklist.erase(<a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fae3540eb995a7957962c47300280f2e73">std::remove</a>(Worklist.begin(), Worklist.end(), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>),</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;                 Worklist.end());</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;}</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;<span class="comment">/// ReplaceUsesOfWith - When we find that I really equals V, remove I from the</span></div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;<span class="comment">/// program, replacing all uses with V and update the worklist.</span></div><div class="line"><a name="l00926"></a><span class="lineno"><a class="line" href="LoopUnswitch_8cpp.html#a90d2f4cf564ae744b0f8bcb8b6967090">  926</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LoopUnswitch_8cpp.html#a90d2f4cf564ae744b0f8bcb8b6967090">ReplaceUsesOfWith</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I, <a class="code" href="classllvm_1_1Value.html">Value</a> *V,</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;                              std::vector&lt;Instruction*&gt; &amp;Worklist,</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;                              <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1LPPassManager.html">LPPassManager</a> *LPM) {</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Replace with &#39;&quot;</span> &lt;&lt; *V &lt;&lt; <span class="stringliteral">&quot;&#39;: &quot;</span> &lt;&lt; *I);</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  <span class="comment">// Add uses to the worklist, which may be dead now.</span></div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = I-&gt;<a class="code" href="classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1Use.html">Use</a> = dyn_cast&lt;Instruction&gt;(I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)))</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;      Worklist.push_back(<a class="code" href="classllvm_1_1Use.html">Use</a>);</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  <span class="comment">// Add users to the worklist which may be simplified now.</span></div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::use_iterator</a> UI = I-&gt;<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>(), E = I-&gt;<a class="code" href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">use_end</a>();</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;       UI != E; ++UI)</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    Worklist.push_back(cast&lt;Instruction&gt;(*UI));</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;  LPM-&gt;<a class="code" href="classllvm_1_1LPPassManager.html#a38a30148fc051115d1d72e60a8b65506">deleteSimpleAnalysisValue</a>(I, L);</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;  <a class="code" href="LoopUnswitch_8cpp.html#a7bf7967864c46da001cdd9977201b2d9">RemoveFromWorklist</a>(I, Worklist);</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;  I-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(V);</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;  I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;  ++NumSimplify;</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;}</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;<span class="comment">/// RemoveLoopFromHierarchy - We have discovered that the specified loop has</span></div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;<span class="comment">/// become unwrapped, either because the backedge was deleted, or because the</span></div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;<span class="comment">/// edge into the header was removed.  If the edge into the header from the</span></div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;<span class="comment">/// latch block was removed, the loop is unwrapped but subloops are still alive,</span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;<span class="comment">/// so they just reparent loops.  If the loops are actually dead, they will be</span></div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;<span class="comment">/// removed later.</span></div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> LoopUnswitch::RemoveLoopFromHierarchy(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L) {</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;  LPM-&gt;<a class="code" href="classllvm_1_1LPPassManager.html#a6eaffd08c6bba495330624a07b42a470">deleteLoopFromQueue</a>(L);</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  RemoveLoopFromWorklist(L);</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;}</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="comment">// RewriteLoopBodyWithConditionConstant - We know either that the value LIC has</span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="comment">// the value specified by Val in the specified loop, or we know it does NOT have</span></div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="comment">// that value.  Rewrite any uses of LIC or of properties correlated to it.</span></div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;<span class="keywordtype">void</span> LoopUnswitch::RewriteLoopBodyWithConditionConstant(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1Value.html">Value</a> *LIC,</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;                                                        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Val,</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;                                                        <span class="keywordtype">bool</span> IsEqual) {</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;  assert(!isa&lt;Constant&gt;(LIC) &amp;&amp; <span class="stringliteral">&quot;Why are we unswitching on a constant?&quot;</span>);</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;  <span class="comment">// FIXME: Support correlated properties, like:</span></div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;  <span class="comment">//  for (...)</span></div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;  <span class="comment">//    if (li1 &lt; li2)</span></div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;  <span class="comment">//      ...</span></div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;  <span class="comment">//    if (li1 &gt; li2)</span></div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;  <span class="comment">//      ...</span></div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  <span class="comment">// FOLD boolean conditions (X|LIC), (X&amp;LIC).  Fold conditional branches,</span></div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;  <span class="comment">// selects, switches.</span></div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;  std::vector&lt;Instruction*&gt; Worklist;</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;Context = Val-&gt;<a class="code" href="classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>();</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;  <span class="comment">// If we know that LIC == Val, or that LIC == NotVal, just replace uses of LIC</span></div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;  <span class="comment">// in the loop with the appropriate one directly.</span></div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;  <span class="keywordflow">if</span> (IsEqual || (isa&lt;ConstantInt&gt;(Val) &amp;&amp;</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;      Val-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>(1))) {</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Replacement;</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    <span class="keywordflow">if</span> (IsEqual)</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;      Replacement = Val;</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;      Replacement = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">Type::getInt1Ty</a>(Val-&gt;<a class="code" href="classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">getContext</a>()),</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;                                     !cast&lt;ConstantInt&gt;(Val)-&gt;getZExtValue());</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::use_iterator</a> UI = LIC-&gt;<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>(), E = LIC-&gt;<a class="code" href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">use_end</a>();</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;         UI != E; ++UI) {</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *U = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a>&gt;(*UI);</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;      <span class="keywordflow">if</span> (!U || !L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a92a38e2e3412bde7fd2b71db212b61aa">contains</a>(U))</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;      Worklist.push_back(U);</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    }</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    <span class="keywordflow">for</span> (std::vector&lt;Instruction*&gt;::iterator UI = Worklist.begin(),</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;         UE = Worklist.end(); UI != UE; ++UI)</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;      (*UI)-&gt;<a class="code" href="classllvm_1_1User.html#a1f0b9358936e3e00c42a460abbfb2868">replaceUsesOfWith</a>(LIC, Replacement);</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    SimplifyCode(Worklist, L);</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;  }</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  <span class="comment">// Otherwise, we don&#39;t know the precise value of LIC, but we do know that it</span></div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;  <span class="comment">// is certainly NOT &quot;Val&quot;.  As such, simplify any uses in the loop that we</span></div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;  <span class="comment">// can.  This case occurs when we unswitch switch statements.</span></div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::use_iterator</a> UI = LIC-&gt;<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>(), E = LIC-&gt;<a class="code" href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">use_end</a>();</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;       UI != E; ++UI) {</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *U = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a>&gt;(*UI);</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    <span class="keywordflow">if</span> (!U || !L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a92a38e2e3412bde7fd2b71db212b61aa">contains</a>(U))</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    Worklist.push_back(U);</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    <span class="comment">// TODO: We could do other simplifications, for example, turning</span></div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    <span class="comment">// &#39;icmp eq LIC, Val&#39; -&gt; false.</span></div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    <span class="comment">// If we know that LIC is not Val, use this info to simplify code.</span></div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    <a class="code" href="classllvm_1_1SwitchInst.html">SwitchInst</a> *SI = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1SwitchInst.html">SwitchInst</a>&gt;(U);</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    <span class="keywordflow">if</span> (SI == 0 || !isa&lt;ConstantInt&gt;(Val)) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    <a class="code" href="classllvm_1_1SwitchInst_1_1CaseIt.html">SwitchInst::CaseIt</a> DeadCase = SI-&gt;<a class="code" href="classllvm_1_1SwitchInst.html#ad3a1537c850f63ce48bcf45694cde73f">findCaseValue</a>(cast&lt;ConstantInt&gt;(Val));</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    <span class="comment">// Default case is live for multiple values.</span></div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    <span class="keywordflow">if</span> (DeadCase == SI-&gt;<a class="code" href="classllvm_1_1SwitchInst.html#a96a201f56500af4dd70b4169f140cb4c">case_default</a>()) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    <span class="comment">// Found a dead case value.  Don&#39;t remove PHI nodes in the</span></div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    <span class="comment">// successor if they become single-entry, those PHI nodes may</span></div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <span class="comment">// be in the Users list.</span></div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Switch = SI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SISucc = DeadCase.<a class="code" href="classllvm_1_1SwitchInst_1_1CaseIteratorT.html#a143819a808ec85e9997566fdf42e9372">getCaseSuccessor</a>();</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Latch = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a8917d359fc92f25eb0117386588c6f1c">getLoopLatch</a>();</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    BranchesInfo.setUnswitched(SI, Val);</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <span class="keywordflow">if</span> (!SI-&gt;<a class="code" href="classllvm_1_1SwitchInst.html#a2d6855f76c156c05cc76ec4dfb94cf57">findCaseDest</a>(SISucc)) <span class="keywordflow">continue</span>;  <span class="comment">// Edge is critical.</span></div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <span class="comment">// If the DeadCase successor dominates the loop latch, then the</span></div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    <span class="comment">// transformation isn&#39;t safe since it will delete the sole predecessor edge</span></div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <span class="comment">// to the latch.</span></div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    <span class="keywordflow">if</span> (Latch &amp;&amp; DT-&gt;<a class="code" href="classllvm_1_1DominatorTree.html#a6fe9272dc67fe2ff4cafc33b895c4a6c">dominates</a>(SISucc, Latch))</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <span class="comment">// FIXME: This is a hack.  We need to keep the successor around</span></div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    <span class="comment">// and hooked up so as to preserve the loop structure, because</span></div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    <span class="comment">// trying to update it is complicated.  So instead we preserve the</span></div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <span class="comment">// loop structure and put the block on a dead code path.</span></div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <a class="code" href="namespacellvm.html#a0a7e7f31f3da37dc95109dd1164a30b6">SplitEdge</a>(Switch, SISucc, <span class="keyword">this</span>);</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    <span class="comment">// Compute the successors instead of relying on the return value</span></div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    <span class="comment">// of SplitEdge, since it may have split the switch successor</span></div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    <span class="comment">// after PHI nodes.</span></div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewSISucc = DeadCase.<a class="code" href="classllvm_1_1SwitchInst_1_1CaseIteratorT.html#a143819a808ec85e9997566fdf42e9372">getCaseSuccessor</a>();</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OldSISucc = *<a class="code" href="namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">succ_begin</a>(NewSISucc);</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    <span class="comment">// Create an &quot;unreachable&quot; destination.</span></div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Abort = <a class="code" href="classllvm_1_1BasicBlock.html#ae1d53a21892854816885c7288f8b46f1">BasicBlock::Create</a>(Context, <span class="stringliteral">&quot;us-unreachable&quot;</span>,</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;                                           Switch-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>(),</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;                                           OldSISucc);</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    <span class="keyword">new</span> <a class="code" href="classllvm_1_1UnreachableInst.html">UnreachableInst</a>(Context, Abort);</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    <span class="comment">// Force the new case destination to branch to the &quot;unreachable&quot;</span></div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    <span class="comment">// block while maintaining a (dead) CFG edge to the old block.</span></div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    NewSISucc-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    <a class="code" href="classllvm_1_1BranchInst.html#ae9cbc599309fd2da33ec1c61df01ce1f">BranchInst::Create</a>(Abort, OldSISucc,</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;                       <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(Context), NewSISucc);</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <span class="comment">// Release the PHI operands for this edge.</span></div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> II = NewSISucc-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;         <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1PHINode.html">PHINode</a>&gt;(II); ++II)</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;      PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a88cdefb709309eddc6e5daca0be6a7b4">setIncomingValue</a>(PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a5c2b7d7f19aac93b27b845858a7eb73e">getBasicBlockIndex</a>(Switch),</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;                           <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(PN-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    <span class="comment">// Tell the domtree about the new block. We don&#39;t fully update the</span></div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    <span class="comment">// domtree here -- instead we force it to do a full recomputation</span></div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    <span class="comment">// after the pass is complete -- but we do need to inform it of</span></div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <span class="comment">// new blocks.</span></div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    <span class="keywordflow">if</span> (DT)</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;      DT-&gt;<a class="code" href="classllvm_1_1DominatorTree.html#a707b4485d4e0a3d99444479868fde883">addNewBlock</a>(Abort, NewSISucc);</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;  }</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  SimplifyCode(Worklist, L);</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;}</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;<span class="comment">/// SimplifyCode - Okay, now that we have simplified some instructions in the</span></div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;<span class="comment">/// loop, walk over it and constant prop, dce, and fold control flow where</span></div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;<span class="comment">/// possible.  Note that this is effectively a very simple loop-structure-aware</span></div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;<span class="comment">/// optimizer.  During processing of this loop, L could very well be deleted, so</span></div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;<span class="comment">/// it must not be used.</span></div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;<span class="comment">/// FIXME: When the loop optimizer is more mature, separate this out to a new</span></div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;<span class="comment">/// pass.</span></div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> LoopUnswitch::SimplifyCode(std::vector&lt;Instruction*&gt; &amp;Worklist, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L) {</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;  <span class="keywordflow">while</span> (!Worklist.empty()) {</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I = Worklist.back();</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    Worklist.pop_back();</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    <span class="comment">// Simple DCE.</span></div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#abe283966f269761ee387642061c4451e">isInstructionTriviallyDead</a>(I)) {</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Remove dead instruction &#39;&quot;</span> &lt;&lt; *I);</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;      <span class="comment">// Add uses to the worklist, which may be dead now.</span></div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = I-&gt;<a class="code" href="classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1Use.html">Use</a> = dyn_cast&lt;Instruction&gt;(I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)))</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;          Worklist.push_back(<a class="code" href="classllvm_1_1Use.html">Use</a>);</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;      LPM-&gt;<a class="code" href="classllvm_1_1LPPassManager.html#a38a30148fc051115d1d72e60a8b65506">deleteSimpleAnalysisValue</a>(I, L);</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;      <a class="code" href="LoopUnswitch_8cpp.html#a7bf7967864c46da001cdd9977201b2d9">RemoveFromWorklist</a>(I, Worklist);</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;      I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;      ++NumSimplify;</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    }</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    <span class="comment">// See if instruction simplification can hack this up.  This is common for</span></div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    <span class="comment">// things like &quot;select false, X, Y&quot; after unswitching made the condition be</span></div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    <span class="comment">// &#39;false&#39;.  TODO: update the domtree properly so we can pass it here.</span></div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#a50f8f41fccbea466816345520e9bfabb">SimplifyInstruction</a>(I))</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;      <span class="keywordflow">if</span> (LI-&gt;<a class="code" href="classllvm_1_1LoopInfo.html#ab12b535502b86394c84bfd24d58e4657">replacementPreservesLCSSAForm</a>(I, V)) {</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;        <a class="code" href="LoopUnswitch_8cpp.html#a90d2f4cf564ae744b0f8bcb8b6967090">ReplaceUsesOfWith</a>(I, V, Worklist, L, LPM);</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;      }</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    <span class="comment">// Special case hacks that appear commonly in unswitched code.</span></div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = dyn_cast&lt;BranchInst&gt;(I)) {</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;      <span class="keywordflow">if</span> (BI-&gt;isUnconditional()) {</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;        <span class="comment">// If BI&#39;s parent is the only pred of the successor, fold the two blocks</span></div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;        <span class="comment">// together.</span></div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;        <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred = BI-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>();</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;        <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Succ = BI-&gt;getSuccessor(0);</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;        <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SinglePred = Succ-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5ef55181ae0bb0f5c561b9a29087b1e5">getSinglePredecessor</a>();</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;        <span class="keywordflow">if</span> (!SinglePred) <span class="keywordflow">continue</span>;  <span class="comment">// Nothing to do.</span></div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;        assert(SinglePred == Pred &amp;&amp; <span class="stringliteral">&quot;CFG broken&quot;</span>);</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Merging blocks: &quot;</span> &lt;&lt; Pred-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt; <span class="stringliteral">&quot; &lt;- &quot;</span></div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;              &lt;&lt; Succ-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;        <span class="comment">// Resolve any single entry PHI nodes in Succ.</span></div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(Succ-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>()))</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;          <a class="code" href="LoopUnswitch_8cpp.html#a90d2f4cf564ae744b0f8bcb8b6967090">ReplaceUsesOfWith</a>(PN, PN-&gt;getIncomingValue(0), Worklist, L, LPM);</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;        <span class="comment">// If Succ has any successors with PHI nodes, update them to have</span></div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;        <span class="comment">// entries coming from Pred instead of Succ.</span></div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;        Succ-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(Pred);</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;        <span class="comment">// Move all of the successor contents from Succ to Pred.</span></div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;        Pred-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a531d11ba36ed48d86057d507cc8d5567">getInstList</a>().<a class="code" href="classllvm_1_1iplist.html#afe55b235779222b867c16d3321c1cd16">splice</a>(BI, Succ-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a531d11ba36ed48d86057d507cc8d5567">getInstList</a>(), Succ-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(),</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;                                   Succ-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>());</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;        LPM-&gt;<a class="code" href="classllvm_1_1LPPassManager.html#a38a30148fc051115d1d72e60a8b65506">deleteSimpleAnalysisValue</a>(BI, L);</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;        BI-&gt;eraseFromParent();</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;        <a class="code" href="LoopUnswitch_8cpp.html#a7bf7967864c46da001cdd9977201b2d9">RemoveFromWorklist</a>(BI, Worklist);</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;        <span class="comment">// Remove Succ from the loop tree.</span></div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;        LI-&gt;<a class="code" href="classllvm_1_1LoopInfo.html#ab71f206dfbe29bc480d3e2f1b4c80824">removeBlock</a>(Succ);</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;        LPM-&gt;<a class="code" href="classllvm_1_1LPPassManager.html#a38a30148fc051115d1d72e60a8b65506">deleteSimpleAnalysisValue</a>(Succ, L);</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;        Succ-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ace1ad5ed624dd5df8efb4eb611cb71ff">eraseFromParent</a>();</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;        ++NumSimplify;</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;      }</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    }</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  }</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;}</div><div class="ttc" id="classllvm_1_1Pass_html"><div class="ttname"><a href="classllvm_1_1Pass.html">llvm::Pass</a></div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00082">Pass.h:82</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a075e34e98605d0e7c289763a104869ac"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">llvm::SmallVectorTemplateCommon&lt; T &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00114">SmallVector.h:114</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00127">SmallVector.h:127</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad86469939d2a8bdd4169be9403b89f5a"><div class="ttname"><a href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">llvm::Value::use_end</a></div><div class="ttdeci">use_iterator use_end()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00152">Value.h:152</a></div></div>
<div class="ttc" id="namespacellvm_html_a2a32b2fa5923a14be683607b50e6bf2b"><div class="ttname"><a href="namespacellvm.html#a2a32b2fa5923a14be683607b50e6bf2b">llvm::initializeLoopUnswitchPass</a></div><div class="ttdeci">void initializeLoopUnswitchPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_aa7cce62ac5cc6df09cce0535874336b7"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">llvm::ConstantInt::getFalse</a></div><div class="ttdeci">static ConstantInt * getFalse(LLVMContext &amp;Context)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00445">Constants.cpp:445</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_a219f2a3514d904d05dc8003a4ee5d291"><div class="ttname"><a href="classllvm_1_1SwitchInst.html#a219f2a3514d904d05dc8003a4ee5d291">llvm::SwitchInst::case_end</a></div><div class="ttdeci">CaseIt case_end()</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02640">Instructions.h:2640</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a5a3b8a8269ba0c61102f71a2a3bd42cd"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a5a3b8a8269ba0c61102f71a2a3bd42cd">llvm::LoopBase::end</a></div><div class="ttdeci">iterator end() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00131">LoopInfo.h:131</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_a884f90190bca4bd354f2d5c91c264028"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">llvm::AnalysisUsage::addPreserved</a></div><div class="ttdeci">AnalysisUsage &amp; addPreserved()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00081">PassAnalysisSupport.h:81</a></div></div>
<div class="ttc" id="namespacellvm_html_a0a7e7f31f3da37dc95109dd1164a30b6"><div class="ttname"><a href="namespacellvm.html#a0a7e7f31f3da37dc95109dd1164a30b6">llvm::SplitEdge</a></div><div class="ttdeci">BasicBlock * SplitEdge(BasicBlock *From, BasicBlock *To, Pass *P)</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00241">BasicBlockUtils.cpp:241</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_aa75984a442f2379de0c66018201fa628"><div class="ttname"><a href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">llvm::Type::getInt1Ty</a></div><div class="ttdeci">static IntegerType * getInt1Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00238">Type.cpp:238</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a089cccb6f231efee72abc76d0f9c695f"><div class="ttname"><a href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">llvm::PHINode::addIncoming</a></div><div class="ttdeci">void addIncoming(Value *V, BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02100">Instructions.h:2100</a></div></div>
<div class="ttc" id="classllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00035">PassRegistry.cpp:35</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6fae3540eb995a7957962c47300280f2e73"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6fae3540eb995a7957962c47300280f2e73">llvm::LibFunc::remove</a></div><div class="ttdoc">int remove(const char *path); </div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00466">TargetLibraryInfo.h:466</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a6fe2f06b8a4b2c3d6308afb223a0238a"><div class="ttname"><a href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00072">Instruction.cpp:72</a></div></div>
<div class="ttc" id="Instructions_8h_html"><div class="ttname"><a href="Instructions_8h.html">Instructions.h</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="LoopUnswitch_8cpp_html_a5356887d8033d7575d68a3b582da71eb"><div class="ttname"><a href="LoopUnswitch_8cpp.html#a5356887d8033d7575d68a3b582da71eb">INITIALIZE_PASS_BEGIN</a></div><div class="ttdeci">INITIALIZE_PASS_BEGIN(LoopUnswitch,&quot;loop-unswitch&quot;,&quot;Unswitch loops&quot;, false, false) INITIALIZE_PASS_END(LoopUnswitch</div></div>
<div class="ttc" id="DerivedTypes_8h_html"><div class="ttname"><a href="DerivedTypes_8h.html">DerivedTypes.h</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_ae4ca2261b8b901e415fda7feac5051ea"><div class="ttname"><a href="classllvm_1_1Function.html#ae4ca2261b8b901e415fda7feac5051ea">llvm::Function::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00397">Function.h:397</a></div></div>
<div class="ttc" id="classllvm_1_1ValueMap_html_ab93f9e5a72aec99f3cdf542cd7d27e05"><div class="ttname"><a href="classllvm_1_1ValueMap.html#ab93f9e5a72aec99f3cdf542cd7d27e05">llvm::ValueMap::lookup</a></div><div class="ttdeci">ValueT lookup(const KeyT &amp;Val) const </div><div class="ttdef"><b>Definition:</b> <a href="ValueMap_8h_source.html#l00125">ValueMap.h:125</a></div></div>
<div class="ttc" id="namespacellvm_html_afa6abaa0eea3b2083902cf651a9653b1"><div class="ttname"><a href="namespacellvm.html#afa6abaa0eea3b2083902cf651a9653b1">llvm::SplitCriticalEdge</a></div><div class="ttdeci">BasicBlock * SplitCriticalEdge(TerminatorInst *TI, unsigned SuccNum, Pass *P=0, bool MergeIdenticalEdges=false, bool DontDeleteUselessPHIs=false, bool SplitLandingPads=false)</div><div class="ttdef"><b>Definition:</b> <a href="BreakCriticalEdges_8cpp_source.html#l00140">BreakCriticalEdges.cpp:140</a></div></div>
<div class="ttc" id="namespacellvm_html_a3f2f98c2a67c9e79f58aad9150a62e42"><div class="ttname"><a href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">llvm::dyn_cast</a></div><div class="ttdeci">enable_if_c&lt;!is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="Casting_8h_source.html#l00266">Casting.h:266</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a2f81e0c1fc6554df7ad2eafabf5fc5a5"><div class="ttname"><a href="classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">llvm::User::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00108">User.h:108</a></div></div>
<div class="ttc" id="classllvm_1_1ScalarEvolution_html"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html">llvm::ScalarEvolution</a></div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l00172">ScalarEvolution.h:172</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00534">DenseMap.h:534</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01978">Instructions.h:1978</a></div></div>
<div class="ttc" id="Debug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="LoopUnswitch_8cpp_html_a0aa18bdfdde7435ee8015bcfb6c80849"><div class="ttname"><a href="LoopUnswitch_8cpp.html#a0aa18bdfdde7435ee8015bcfb6c80849">loops</a></div><div class="ttdeci">loop Unswitch loops</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnswitch_8cpp_source.html#l00341">LoopUnswitch.cpp:341</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_ae69c15ce940c41719cb96209e113a26e"><div class="ttname"><a href="classllvm_1_1SwitchInst.html#ae69c15ce940c41719cb96209e113a26e">llvm::SwitchInst::case_begin</a></div><div class="ttdeci">CaseIt case_begin()</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02629">Instructions.h:2629</a></div></div>
<div class="ttc" id="namespacellvm_1_1A64CC_html_af5804bc0518be9568f73db566e4d6f46aeebf3cf6cced994d25bca18ea275ab8b"><div class="ttname"><a href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46aeebf3cf6cced994d25bca18ea275ab8b">llvm::A64CC::PL</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00036">AArch64BaseInfo.h:36</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1path_html_a33706aab89e700b8f79e1fa6f4f0e3ee"><div class="ttname"><a href="namespacellvm_1_1sys_1_1path.html#a33706aab89e700b8f79e1fa6f4f0e3ee">llvm::sys::path::begin</a></div><div class="ttdeci">const_iterator begin(StringRef path)</div><div class="ttdoc">Get begin iterator over path. </div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00173">Path.cpp:173</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_aca229503e4f5c83a187a6a921c625fa8"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">llvm::BasicBlock::getParent</a></div><div class="ttdeci">const Function * getParent() const </div><div class="ttdoc">Return the enclosing method, or null if none. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00116">BasicBlock.h:116</a></div></div>
<div class="ttc" id="classllvm_1_1PredIterator_html"><div class="ttname"><a href="classllvm_1_1PredIterator.html">llvm::PredIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="Support_2CFG_8h_source.html#l00029">Support/CFG.h:29</a></div></div>
<div class="ttc" id="LLParser_8cpp_html_a33ece1ef8074506a15d7f86eb76dbae6"><div class="ttname"><a href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a></div><div class="ttdeci">F(f)</div></div>
<div class="ttc" id="classllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00070">Function.h:70</a></div></div>
<div class="ttc" id="InstructionSimplify_8h_html"><div class="ttname"><a href="InstructionSimplify_8h.html">InstructionSimplify.h</a></div></div>
<div class="ttc" id="structllvm_1_1CodeMetrics_html_a61cad01cfbfee0f1ac885df62557c708"><div class="ttname"><a href="structllvm_1_1CodeMetrics.html#a61cad01cfbfee0f1ac885df62557c708">llvm::CodeMetrics::notDuplicatable</a></div><div class="ttdeci">bool notDuplicatable</div><div class="ttdoc">True if this function cannot be duplicated. </div><div class="ttdef"><b>Definition:</b> <a href="CodeMetrics_8h_source.html#l00051">CodeMetrics.h:51</a></div></div>
<div class="ttc" id="classllvm_1_1AttributeSet_html_a54abbe67d4a53c92652f1666dc19281f"><div class="ttname"><a href="classllvm_1_1AttributeSet.html#a54abbe67d4a53c92652f1666dc19281f">llvm::AttributeSet::hasAttribute</a></div><div class="ttdeci">bool hasAttribute(unsigned Index, Attribute::AttrKind Kind) const </div><div class="ttdoc">Return true if the attribute exists at the given index. </div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l00818">Attributes.cpp:818</a></div></div>
<div class="ttc" id="Statistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="namespacellvm_html_a2a508739577bd4d545a2318f23b98b2f"><div class="ttname"><a href="namespacellvm.html#a2a508739577bd4d545a2318f23b98b2f">llvm::RemapInstruction</a></div><div class="ttdeci">void RemapInstruction(Instruction *I, ValueToValueMapTy &amp;VM, RemapFlags Flags=RF_None, ValueMapTypeRemapper *TypeMapper=0, ValueMaterializer *Materializer=0)</div><div class="ttdef"><b>Definition:</b> <a href="ValueMapper_8cpp_source.html#l00183">ValueMapper.cpp:183</a></div></div>
<div class="ttc" id="structllvm_1_1ValueMapIterator_1_1ValueTypeProxy_html_a5bcf5b029fa9492c00d2329def9b5137"><div class="ttname"><a href="structllvm_1_1ValueMapIterator_1_1ValueTypeProxy.html#a5bcf5b029fa9492c00d2329def9b5137">llvm::ValueMapIterator::ValueTypeProxy::second</a></div><div class="ttdeci">ValueT &amp; second</div><div class="ttdef"><b>Definition:</b> <a href="ValueMap_8h_source.html#l00293">ValueMap.h:293</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_a2d6855f76c156c05cc76ec4dfb94cf57"><div class="ttname"><a href="classllvm_1_1SwitchInst.html#a2d6855f76c156c05cc76ec4dfb94cf57">llvm::SwitchInst::findCaseDest</a></div><div class="ttdeci">ConstantInt * findCaseDest(BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02679">Instructions.h:2679</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00109">CommandLine.h:109</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00167">Value.cpp:167</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a8917d359fc92f25eb0117386588c6f1c"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a8917d359fc92f25eb0117386588c6f1c">llvm::LoopBase::getLoopLatch</a></div><div class="ttdeci">BlockT * getLoopLatch() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00154">LoopInfoImpl.h:154</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00193">BasicBlock.h:193</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_ab39f9623eaa8cd22213aa716c6fb9994"><div class="ttname"><a href="classllvm_1_1LoopBase.html#ab39f9623eaa8cd22213aa716c6fb9994">llvm::LoopBase&lt; BasicBlock, Loop &gt;::block_iterator</a></div><div class="ttdeci">std::vector&lt; BasicBlock * &gt;::const_iterator block_iterator</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00139">LoopInfo.h:139</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_ae5c60fd282ee894c87ea02c3f0fcb6d0"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">llvm::AnalysisUsage::addRequired</a></div><div class="ttdeci">AnalysisUsage &amp; addRequired()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00055">PassAnalysisSupport.h:55</a></div></div>
<div class="ttc" id="PassSupport_8h_html_a14724f1ccf528e73bb29bc9230737967"><div class="ttname"><a href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a></div><div class="ttdeci">#define INITIALIZE_PASS_DEPENDENCY(depName)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00167">PassSupport.h:167</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a382131e712e55e8324fbd5068de17b78"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a382131e712e55e8324fbd5068de17b78">llvm::BranchInst::isUnconditional</a></div><div class="ttdeci">bool isUnconditional() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02391">Instructions.h:2391</a></div></div>
<div class="ttc" id="classllvm_1_1value__use__iterator_html"><div class="ttname"><a href="classllvm_1_1value__use__iterator.html">llvm::value_use_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00168">Use.h:168</a></div></div>
<div class="ttc" id="LoopUnswitch_8cpp_html_a3878d97cf729cce40da2480526d6e9e3"><div class="ttname"><a href="LoopUnswitch_8cpp.html#a3878d97cf729cce40da2480526d6e9e3">CloneLoop</a></div><div class="ttdeci">static Loop * CloneLoop(Loop *L, Loop *PL, ValueToValueMapTy &amp;VM, LoopInfo *LI, LPPassManager *LPM)</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnswitch_8cpp_source.html#l00661">LoopUnswitch.cpp:661</a></div></div>
<div class="ttc" id="structllvm_1_1CodeMetrics_html_a3187063809f27321f9126b0aa0086ce7"><div class="ttname"><a href="structllvm_1_1CodeMetrics.html#a3187063809f27321f9126b0aa0086ce7">llvm::CodeMetrics::NumBlocks</a></div><div class="ttdeci">unsigned NumBlocks</div><div class="ttdoc">Number of analyzed blocks. </div><div class="ttdef"><b>Definition:</b> <a href="CodeMetrics_8h_source.html#l00060">CodeMetrics.h:60</a></div></div>
<div class="ttc" id="structllvm_1_1CodeMetrics_html_a56a86230d5565ab47c72e6bf19212c84"><div class="ttname"><a href="structllvm_1_1CodeMetrics.html#a56a86230d5565ab47c72e6bf19212c84">llvm::CodeMetrics::analyzeBasicBlock</a></div><div class="ttdeci">void analyzeBasicBlock(const BasicBlock *BB, const TargetTransformInfo &amp;TTI)</div><div class="ttdoc">Add information about a block to the current state. </div><div class="ttdef"><b>Definition:</b> <a href="CodeMetrics_8cpp_source.html#l00025">CodeMetrics.cpp:25</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html"><div class="ttname"><a href="classllvm_1_1SelectInst.html">llvm::SelectInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01430">Instructions.h:1430</a></div></div>
<div class="ttc" id="LoopInfo_8h_html"><div class="ttname"><a href="LoopInfo_8h.html">LoopInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1Use_html"><div class="ttname"><a href="classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00060">Use.h:60</a></div></div>
<div class="ttc" id="PassSupport_8h_html_a74ce8276b89067e806f67c45a6d92575"><div class="ttname"><a href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a></div><div class="ttdeci">#define INITIALIZE_PASS_END(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00172">PassSupport.h:172</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00035">APInt.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_ae9cbc599309fd2da33ec1c61df01ce1f"><div class="ttname"><a href="classllvm_1_1BranchInst.html#ae9cbc599309fd2da33ec1c61df01ce1f">llvm::BranchInst::Create</a></div><div class="ttdeci">static BranchInst * Create(BasicBlock *IfTrue, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02373">Instructions.h:2373</a></div></div>
<div class="ttc" id="STLExtras_8h_html"><div class="ttname"><a href="STLExtras_8h.html">STLExtras.h</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a22b3e904c08bd922efd707282aed89d9"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a22b3e904c08bd922efd707282aed89d9">llvm::LoopBase::begin</a></div><div class="ttdeci">iterator begin() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00130">LoopInfo.h:130</a></div></div>
<div class="ttc" id="namespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00126">StackSlotColoring.cpp:126</a></div></div>
<div class="ttc" id="namespacellvm_1_1CallingConv_html_a4f861731fc6dbfdccc05af5968d98974"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">llvm::CallingConv::ID</a></div><div class="ttdeci">ID</div><div class="ttdoc">LLVM Calling Convention Representation. </div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00026">CallingConv.h:26</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00031">Instruction.h:31</a></div></div>
<div class="ttc" id="Dominators_8h_html"><div class="ttname"><a href="Dominators_8h.html">Dominators.h</a></div></div>
<div class="ttc" id="namespacellvm_html_a3720211f6e6389ab53734b989bfb6fce"><div class="ttname"><a href="namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">llvm::succ_begin</a></div><div class="ttdeci">Interval::succ_iterator succ_begin(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00107">Interval.h:107</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a4b2d2c2ddd3ccf5630c18731a162977d"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a4b2d2c2ddd3ccf5630c18731a162977d">llvm::LoopBase&lt; BasicBlock, Loop &gt;::iterator</a></div><div class="ttdeci">std::vector&lt; Loop * &gt;::const_iterator iterator</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00127">LoopInfo.h:127</a></div></div>
<div class="ttc" id="namespacellvm_html_a55e3df77bb47f39e077b6a4e7e00bb03"><div class="ttname"><a href="namespacellvm.html#a55e3df77bb47f39e077b6a4e7e00bb03">llvm::SplitBlockPredecessors</a></div><div class="ttdeci">BasicBlock * SplitBlockPredecessors(BasicBlock *BB, ArrayRef&lt; BasicBlock * &gt; Preds, const char *Suffix, Pass *P=0)</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00442">BasicBlockUtils.cpp:442</a></div></div>
<div class="ttc" id="CodeMetrics_8h_html"><div class="ttname"><a href="CodeMetrics_8h.html">CodeMetrics.h</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a63f099d3bf7cf97eb3ae2d630e3d1afc"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a63f099d3bf7cf97eb3ae2d630e3d1afc">llvm::LoopBase::addBasicBlockToLoop</a></div><div class="ttdeci">void addBasicBlockToLoop(BlockT *NewBB, LoopInfoBase&lt; BlockT, LoopT &gt; &amp;LI)</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00185">LoopInfoImpl.h:185</a></div></div>
<div class="ttc" id="LoopUnswitch_8cpp_html_a75e3478f1ffb79f86c7361cf902df335"><div class="ttname"><a href="LoopUnswitch_8cpp.html#a75e3478f1ffb79f86c7361cf902df335">FindLIVLoopCondition</a></div><div class="ttdeci">static Value * FindLIVLoopCondition(Value *Cond, Loop *L, bool &amp;Changed)</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnswitch_8cpp_source.html#l00351">LoopUnswitch.cpp:351</a></div></div>
<div class="ttc" id="classllvm_1_1WeakVH_html"><div class="ttname"><a href="classllvm_1_1WeakVH.html">llvm::WeakVH</a></div><div class="ttdef"><b>Definition:</b> <a href="ValueHandle_8h_source.html#l00145">ValueHandle.h:145</a></div></div>
<div class="ttc" id="namespacellvm_html_a295cc866ecaadd6c849119cfa9b22110"><div class="ttname"><a href="namespacellvm.html#a295cc866ecaadd6c849119cfa9b22110">llvm::createLoopUnswitchPass</a></div><div class="ttdeci">Pass * createLoopUnswitchPass(bool OptimizeForSize=false)</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnswitch_8cpp_source.html#l00344">LoopUnswitch.cpp:344</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a74e70ecbb79defbbfa6f6c87f76155bf"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">llvm::BranchInst::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02406">Instructions.h:2406</a></div></div>
<div class="ttc" id="classllvm_1_1ValueMap_html_a7629b8c5f6a6802ee0fdc5c290769692"><div class="ttname"><a href="classllvm_1_1ValueMap.html#a7629b8c5f6a6802ee0fdc5c290769692">llvm::ValueMap::find</a></div><div class="ttdeci">iterator find(const KeyT &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="ValueMap_8h_source.html#l00116">ValueMap.h:116</a></div></div>
<div class="ttc" id="Analysis_2README_8txt_html_a01d2af4eee7c40485a0ce3683a2e907a"><div class="ttname"><a href="Analysis_2README_8txt.html#a01d2af4eee7c40485a0ce3683a2e907a">loop</a></div><div class="ttdeci">Analysis the ScalarEvolution expression for r is&lt; loop &gt; Outside the loop</div><div class="ttdef"><b>Definition:</b> <a href="Analysis_2README_8txt_source.html#l00005">Analysis/README.txt:5</a></div></div>
<div class="ttc" id="SmallPtrSet_8h_html"><div class="ttname"><a href="SmallPtrSet_8h.html">SmallPtrSet.h</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_a40970e5d42646fb2d9aa5f7a2c879516"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#a40970e5d42646fb2d9aa5f7a2c879516">llvm::AnalysisUsage::addPreservedID</a></div><div class="ttdeci">AnalysisUsage &amp; addPreservedID(const void *ID)</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00068">PassAnalysisSupport.h:68</a></div></div>
<div class="ttc" id="classllvm_1_1LoopInfo_html_a4abca289c73cd09487e05d11d9f7d877"><div class="ttname"><a href="classllvm_1_1LoopInfo.html#a4abca289c73cd09487e05d11d9f7d877">llvm::LoopInfo::getLoopFor</a></div><div class="ttdeci">Loop * getLoopFor(const BasicBlock *BB) const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00618">LoopInfo.h:618</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00303">Value.cpp:303</a></div></div>
<div class="ttc" id="classllvm_1_1DominatorTree_html"><div class="ttname"><a href="classllvm_1_1DominatorTree.html">llvm::DominatorTree</a></div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00740">Dominators.h:740</a></div></div>
<div class="ttc" id="namespacellvm_html_a77724415203930efd07d7098cb1e437da9a24bd8dba1bef2753bc3f087435ae7f"><div class="ttname"><a href="namespacellvm.html#a77724415203930efd07d7098cb1e437da9a24bd8dba1bef2753bc3f087435ae7f">llvm::RF_NoModuleLevelChanges</a></div><div class="ttdef"><b>Definition:</b> <a href="ValueMapper_8h_source.html#l00057">ValueMapper.h:57</a></div></div>
<div class="ttc" id="namespacellvm_html_a77724415203930efd07d7098cb1e437daefa3cdbac7d37f388b9dfe0fd7c88de0"><div class="ttname"><a href="namespacellvm.html#a77724415203930efd07d7098cb1e437daefa3cdbac7d37f388b9dfe0fd7c88de0">llvm::RF_IgnoreMissingEntries</a></div><div class="ttdef"><b>Definition:</b> <a href="ValueMapper_8h_source.html#l00062">ValueMapper.h:62</a></div></div>
<div class="ttc" id="namespacellvm_html_a069c4ae2290101bde0f8d6a5074dc72b"><div class="ttname"><a href="namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">llvm::succ_end</a></div><div class="ttdeci">Interval::succ_iterator succ_end(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00110">Interval.h:110</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a1f0b9358936e3e00c42a460abbfb2868"><div class="ttname"><a href="classllvm_1_1User.html#a1f0b9358936e3e00c42a460abbfb2868">llvm::User::replaceUsesOfWith</a></div><div class="ttdeci">void replaceUsesOfWith(Value *From, Value *To)</div><div class="ttdef"><b>Definition:</b> <a href="User_8cpp_source.html#l00026">User.cpp:26</a></div></div>
<div class="ttc" id="classllvm_1_1TerminatorInst_html_a4c26d3b92af99a6c8defd89a2d39ca32"><div class="ttname"><a href="classllvm_1_1TerminatorInst.html#a4c26d3b92af99a6c8defd89a2d39ca32">llvm::TerminatorInst::getNumSuccessors</a></div><div class="ttdeci">unsigned getNumSuccessors() const </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00059">InstrTypes.h:59</a></div></div>
<div class="ttc" id="LoopUnswitch_8cpp_html_a7bf7967864c46da001cdd9977201b2d9"><div class="ttname"><a href="LoopUnswitch_8cpp.html#a7bf7967864c46da001cdd9977201b2d9">RemoveFromWorklist</a></div><div class="ttdeci">static void RemoveFromWorklist(Instruction *I, std::vector&lt; Instruction * &gt; &amp;Worklist)</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnswitch_8cpp_source.html#l00917">LoopUnswitch.cpp:917</a></div></div>
<div class="ttc" id="CommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00314">CommandLine.h:314</a></div></div>
<div class="ttc" id="classllvm_1_1LandingPadInst_html"><div class="ttname"><a href="classllvm_1_1LandingPadInst.html">llvm::LandingPadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02178">Instructions.h:2178</a></div></div>
<div class="ttc" id="LoopPass_8h_html"><div class="ttname"><a href="LoopPass_8h.html">LoopPass.h</a></div></div>
<div class="ttc" id="classllvm_1_1TerminatorInst_html"><div class="ttname"><a href="classllvm_1_1TerminatorInst.html">llvm::TerminatorInst</a></div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00035">InstrTypes.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1LPPassManager_html_aab79e29d76e70fe855a34beff78eea06"><div class="ttname"><a href="classllvm_1_1LPPassManager.html#aab79e29d76e70fe855a34beff78eea06">llvm::LPPassManager::insertLoop</a></div><div class="ttdeci">void insertLoop(Loop *L, Loop *ParentLoop)</div><div class="ttdef"><b>Definition:</b> <a href="LoopPass_8cpp_source.html#l00094">LoopPass.cpp:94</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a1bc74c76b876ad387293ecde0f21ed45"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a1bc74c76b876ad387293ecde0f21ed45">llvm::LoopBase::getLoopPreheader</a></div><div class="ttdeci">BlockT * getLoopPreheader() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00106">LoopInfoImpl.h:106</a></div></div>
<div class="ttc" id="classllvm_1_1SuccIterator_html"><div class="ttname"><a href="classllvm_1_1SuccIterator.html">llvm::SuccIterator&lt; TerminatorInst *, BasicBlock &gt;</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00396">SmallVector.h:396</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1TerminatorInst_html_a3aac3b6c36415a2b08f65ead9e3e51e7"><div class="ttname"><a href="classllvm_1_1TerminatorInst.html#a3aac3b6c36415a2b08f65ead9e3e51e7">llvm::TerminatorInst::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned idx) const </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00065">InstrTypes.h:65</a></div></div>
<div class="ttc" id="classllvm_1_1LLVMContext_html"><div class="ttname"><a href="classllvm_1_1LLVMContext.html">llvm::LLVMContext</a></div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00037">LLVMContext.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html"><div class="ttname"><a href="classllvm_1_1BranchInst.html">llvm::BranchInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02350">Instructions.h:2350</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a6f725580f7834e2ca90762965866dad4"><div class="ttname"><a href="classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">llvm::Type::isVectorTy</a></div><div class="ttdeci">bool isVectorTy() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00229">Type.h:229</a></div></div>
<div class="ttc" id="classllvm_1_1UnreachableInst_html"><div class="ttname"><a href="classllvm_1_1UnreachableInst.html">llvm::UnreachableInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03142">Instructions.h:3142</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="Constants_8h_html"><div class="ttname"><a href="Constants_8h.html">Constants.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1GC_html_a5f606a2b04c809f789a574660cd25213a960eba6a93af558b44d3d14e8393d324"><div class="ttname"><a href="namespacellvm_1_1GC.html#a5f606a2b04c809f789a574660cd25213a960eba6a93af558b44d3d14e8393d324">llvm::GC::Loop</a></div><div class="ttdoc">Instr is a loop (backwards branch). </div><div class="ttdef"><b>Definition:</b> <a href="GCMetadata_8h_source.html#l00051">GCMetadata.h:51</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_a22f056804d2b9882f74adc905872bc39"><div class="ttname"><a href="namespacellvm_1_1APIntOps.html#a22f056804d2b9882f74adc905872bc39">llvm::APIntOps::Or</a></div><div class="ttdeci">APInt Or(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise OR function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01845">APInt.h:1845</a></div></div>
<div class="ttc" id="namespacellvm_html_abe283966f269761ee387642061c4451e"><div class="ttname"><a href="namespacellvm.html#abe283966f269761ee387642061c4451e">llvm::isInstructionTriviallyDead</a></div><div class="ttdeci">bool isInstructionTriviallyDead(Instruction *I, const TargetLibraryInfo *TLI=0)</div><div class="ttdef"><b>Definition:</b> <a href="Local_8cpp_source.html#l00266">Local.cpp:266</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_adf2126190885b10019398655f5e6b256"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#adf2126190885b10019398655f5e6b256">llvm::BasicBlock::getLandingPadInst</a></div><div class="ttdeci">LandingPadInst * getLandingPadInst()</div><div class="ttdoc">Return the landingpad instruction associated with the landing pad. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00366">BasicBlock.cpp:366</a></div></div>
<div class="ttc" id="namespacellvm_html_a3e3d3c6d4e33a4f5ca579ee7939f0349"><div class="ttname"><a href="namespacellvm.html#a3e3d3c6d4e33a4f5ca579ee7939f0349">llvm::LCSSAID</a></div><div class="ttdeci">char &amp; LCSSAID</div><div class="ttdef"><b>Definition:</b> <a href="LCSSA_8cpp_source.html#l00094">LCSSA.cpp:94</a></div></div>
<div class="ttc" id="structllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00286">CommandLine.h:286</a></div></div>
<div class="ttc" id="namespacellvm_html_a7e108932dc3da5294aed99a353aac9c4"><div class="ttname"><a href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">llvm::pred_begin</a></div><div class="ttdeci">Interval::pred_iterator pred_begin(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00117">Interval.h:117</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00037">PassAnalysisSupport.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_afb5e83bf5123ff7c51058eb0ebebcdc6"><div class="ttname"><a href="classllvm_1_1PHINode.html#afb5e83bf5123ff7c51058eb0ebebcdc6">llvm::PHINode::Create</a></div><div class="ttdeci">static PHINode * Create(Type *Ty, unsigned NumReservedValues, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02013">Instructions.h:2013</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_ac4f141a355e5898255f2cbc57c5b54c3"><div class="ttname"><a href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">llvm::LoopBase::getHeader</a></div><div class="ttdeci">BlockT * getHeader() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00095">LoopInfo.h:95</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a531d11ba36ed48d86057d507cc8d5567"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a531d11ba36ed48d86057d507cc8d5567">llvm::BasicBlock::getInstList</a></div><div class="ttdeci">const InstListType &amp; getInstList() const </div><div class="ttdoc">Return the underlying instruction list container. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00214">BasicBlock.h:214</a></div></div>
<div class="ttc" id="classllvm_1_1ICmpInst_html"><div class="ttname"><a href="classllvm_1_1ICmpInst.html">llvm::ICmpInst</a></div><div class="ttdoc">Represent an integer comparison operator. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00911">Instructions.h:911</a></div></div>
<div class="ttc" id="classllvm_1_1Loop_html_af3a3f2237fde326c32376a3d64a69452"><div class="ttname"><a href="classllvm_1_1Loop.html#af3a3f2237fde326c32376a3d64a69452">llvm::Loop::makeLoopInvariant</a></div><div class="ttdeci">bool makeLoopInvariant(Value *V, bool &amp;Changed, Instruction *InsertPt=0) const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00087">LoopInfo.cpp:87</a></div></div>
<div class="ttc" id="classllvm_1_1Loop_html_ab08dbc2560e28c86dd3a38800751ad87"><div class="ttname"><a href="classllvm_1_1Loop.html#ab08dbc2560e28c86dd3a38800751ad87">llvm::Loop::isSafeToClone</a></div><div class="ttdeci">bool isSafeToClone() const </div><div class="ttdoc">isSafeToClone - Return true if the loop body is safe to clone in practice. </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00215">LoopInfo.cpp:215</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00088">User.h:88</a></div></div>
<div class="ttc" id="namespacellvm_html_a5eeaf08e96168c2cac8960f87f0ef360"><div class="ttname"><a href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">llvm::pred_end</a></div><div class="ttdeci">Interval::pred_iterator pred_end(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00120">Interval.h:120</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a92a38e2e3412bde7fd2b71db212b61aa"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a92a38e2e3412bde7fd2b71db212b61aa">llvm::LoopBase::contains</a></div><div class="ttdeci">bool contains(const LoopT *L) const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00104">LoopInfo.h:104</a></div></div>
<div class="ttc" id="classllvm_1_1DominatorTree_html_a6fe9272dc67fe2ff4cafc33b895c4a6c"><div class="ttname"><a href="classllvm_1_1DominatorTree.html#a6fe9272dc67fe2ff4cafc33b895c4a6c">llvm::DominatorTree::dominates</a></div><div class="ttdeci">bool dominates(const DomTreeNode *A, const DomTreeNode *B) const </div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00801">Dominators.h:801</a></div></div>
<div class="ttc" id="PassSupport_8h_html_af0564bcdde2dd4400c670ca278c6035f"><div class="ttname"><a href="PassSupport_8h.html#af0564bcdde2dd4400c670ca278c6035f">INITIALIZE_AG_DEPENDENCY</a></div><div class="ttdeci">#define INITIALIZE_AG_DEPENDENCY(depName)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00169">PassSupport.h:169</a></div></div>
<div class="ttc" id="classllvm_1_1Loop_html_a969c0fff5d11b71d80a08589a5cc2437"><div class="ttname"><a href="classllvm_1_1Loop.html#a969c0fff5d11b71d80a08589a5cc2437">llvm::Loop::hasDedicatedExits</a></div><div class="ttdeci">bool hasDedicatedExits() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00335">LoopInfo.cpp:335</a></div></div>
<div class="ttc" id="classllvm_1_1UndefValue_html_a4ae5ff22b700a42bcc5d889233721335"><div class="ttname"><a href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">llvm::UndefValue::get</a></div><div class="ttdeci">static UndefValue * get(Type *T)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01334">Constants.cpp:1334</a></div></div>
<div class="ttc" id="namespacellvm_html_a50f8f41fccbea466816345520e9bfabb"><div class="ttname"><a href="namespacellvm.html#a50f8f41fccbea466816345520e9bfabb">llvm::SimplifyInstruction</a></div><div class="ttdeci">Value * SimplifyInstruction(Instruction *I, const DataLayout *TD=0, const TargetLibraryInfo *TLI=0, const DominatorTree *DT=0)</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l03036">InstructionSimplify.cpp:3036</a></div></div>
<div class="ttc" id="classllvm_1_1Loop_html_a147b421eaf58e18b10664a6f3c5c7f5b"><div class="ttname"><a href="classllvm_1_1Loop.html#a147b421eaf58e18b10664a6f3c5c7f5b">llvm::Loop::getUniqueExitBlocks</a></div><div class="ttdeci">void getUniqueExitBlocks(SmallVectorImpl&lt; BasicBlock * &gt; &amp;ExitBlocks) const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00354">LoopInfo.cpp:354</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_af85a4828b6b5a8de7fc0a55cc0e5b52f"><div class="ttname"><a href="classllvm_1_1Value.html#af85a4828b6b5a8de7fc0a55cc0e5b52f">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">All values hold a context through their type. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00517">Value.cpp:517</a></div></div>
<div class="ttc" id="LoopUnswitch_8cpp_html_a2dabdd15f3a22a346eb20585b4c5bf31"><div class="ttname"><a href="LoopUnswitch_8cpp.html#a2dabdd15f3a22a346eb20585b4c5bf31">unswitch</a></div><div class="ttdeci">loop unswitch</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnswitch_8cpp_source.html#l00341">LoopUnswitch.cpp:341</a></div></div>
<div class="ttc" id="classllvm_1_1ValueMapIterator_html"><div class="ttname"><a href="classllvm_1_1ValueMapIterator.html">llvm::ValueMapIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="ValueMap_8h_source.html#l00041">ValueMap.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1DominatorTree_html_ad32eadf1d1863a8feb03a6933ab29615"><div class="ttname"><a href="classllvm_1_1DominatorTree.html#ad32eadf1d1863a8feb03a6933ab29615">llvm::DominatorTree::runOnFunction</a></div><div class="ttdeci">virtual bool runOnFunction(Function &amp;F)</div></div>
<div class="ttc" id="namespacellvm_html_a472515fc67a5fb572afeb00aa2609cca"><div class="ttname"><a href="namespacellvm.html#a472515fc67a5fb572afeb00aa2609cca">llvm::LoopSimplifyID</a></div><div class="ttdeci">char &amp; LoopSimplifyID</div><div class="ttdef"><b>Definition:</b> <a href="LoopSimplify_8cpp_source.html#l00123">LoopSimplify.cpp:123</a></div></div>
<div class="ttc" id="classllvm_1_1ValueMap_html_ab871e2d0ebded563edfebd6766fc1a04"><div class="ttname"><a href="classllvm_1_1ValueMap.html#ab871e2d0ebded563edfebd6766fc1a04">llvm::ValueMap::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="ValueMap_8h_source.html#l00099">ValueMap.h:99</a></div></div>
<div class="ttc" id="classllvm_1_1LPPassManager_html_a38a30148fc051115d1d72e60a8b65506"><div class="ttname"><a href="classllvm_1_1LPPassManager.html#a38a30148fc051115d1d72e60a8b65506">llvm::LPPassManager::deleteSimpleAnalysisValue</a></div><div class="ttdeci">void deleteSimpleAnalysisValue(Value *V, Loop *L)</div><div class="ttdoc">deleteSimpleAnalysisValue - Invoke deleteAnalysisValue hook for all passes. </div><div class="ttdef"><b>Definition:</b> <a href="LoopPass_8cpp_source.html#l00147">LoopPass.cpp:147</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="MachineTraceMetrics_8cpp_html_a7f20cb0e3fe764b7b8a63003e0265508"><div class="ttname"><a href="MachineTraceMetrics_8cpp.html#a7f20cb0e3fe764b7b8a63003e0265508">Metrics</a></div><div class="ttdeci">machine trace Machine Trace Metrics</div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l00037">MachineTraceMetrics.cpp:37</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a4d34a40b2667246539b80589adf2028e"><div class="ttname"><a href="classllvm_1_1Function.html#a4d34a40b2667246539b80589adf2028e">llvm::Function::getBasicBlockList</a></div><div class="ttdeci">const BasicBlockListType &amp; getBasicBlockList() const </div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00374">Function.h:374</a></div></div>
<div class="ttc" id="classllvm_1_1ValueMap_html"><div class="ttname"><a href="classllvm_1_1ValueMap.html">llvm::ValueMap</a></div><div class="ttdoc">See the file comment. </div><div class="ttdef"><b>Definition:</b> <a href="ValueMap_8h_source.html#l00075">ValueMap.h:75</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="classllvm_1_1TargetTransformInfo_html"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html">llvm::TargetTransformInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00039">TargetTransformInfo.h:39</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0b4e7bee9b8575cc7db73329f1a561bd"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">llvm::BasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00195">BasicBlock.h:195</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_a053677ebc731b47a534f841b11b5cf0c"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#a053677ebc731b47a534f841b11b5cf0c">llvm::AnalysisUsage::addRequiredID</a></div><div class="ttdeci">AnalysisUsage &amp; addRequiredID(const void *ID)</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8cpp_source.html#l00262">Pass.cpp:262</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00880">SmallVector.h:880</a></div></div>
<div class="ttc" id="classllvm_1_1Attribute_html_aab7ee4b8fd1d3e7e4cea87868855e60ea2ac83e0612ce8f8d69651cd529061feb"><div class="ttname"><a href="classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60ea2ac83e0612ce8f8d69651cd529061feb">llvm::Attribute::OptimizeForSize</a></div><div class="ttdoc">opt_size </div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00091">Attributes.h:91</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00111">Value.h:111</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_ace1ad5ed624dd5df8efb4eb611cb71ff"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ace1ad5ed624dd5df8efb4eb611cb71ff">llvm::BasicBlock::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdoc">Unlink &amp;#39;this&amp;#39; from the containing function and delete it. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00100">BasicBlock.cpp:100</a></div></div>
<div class="ttc" id="LoopUnswitch_8cpp_html_a3aed101a9ea263925c45c6a39a8a0125"><div class="ttname"><a href="LoopUnswitch_8cpp.html#a3aed101a9ea263925c45c6a39a8a0125">STATISTIC</a></div><div class="ttdeci">STATISTIC(NumBranches,&quot;Number of branches unswitched&quot;)</div></div>
<div class="ttc" id="classllvm_1_1LoopInfo_html"><div class="ttname"><a href="classllvm_1_1LoopInfo.html">llvm::LoopInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00589">LoopInfo.h:589</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a1431766de798501f107d9031821f311e"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a1431766de798501f107d9031821f311e">llvm::LoopBase::getParentLoop</a></div><div class="ttdeci">LoopT * getParentLoop() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00096">LoopInfo.h:96</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html">llvm::BinaryOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00138">InstrTypes.h:138</a></div></div>
<div class="ttc" id="structllvm_1_1CodeMetrics_html"><div class="ttname"><a href="structllvm_1_1CodeMetrics.html">llvm::CodeMetrics</a></div><div class="ttdoc">Utility to calculate the size and a few similar metrics for a set of basic blocks. </div><div class="ttdef"><b>Definition:</b> <a href="CodeMetrics_8h_source.html#l00039">CodeMetrics.h:39</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_1_1CaseIteratorT_html_a143819a808ec85e9997566fdf42e9372"><div class="ttname"><a href="classllvm_1_1SwitchInst_1_1CaseIteratorT.html#a143819a808ec85e9997566fdf42e9372">llvm::SwitchInst::CaseIteratorT::getCaseSuccessor</a></div><div class="ttdeci">BasicBlockTy * getCaseSuccessor()</div><div class="ttdoc">Resolves successor for current case. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02518">Instructions.h:2518</a></div></div>
<div class="ttc" id="classllvm_1_1LPPassManager_html_a6eaffd08c6bba495330624a07b42a470"><div class="ttname"><a href="classllvm_1_1LPPassManager.html#a6eaffd08c6bba495330624a07b42a470">llvm::LPPassManager::deleteLoopFromQueue</a></div><div class="ttdeci">void deleteLoopFromQueue(Loop *L)</div><div class="ttdoc">Delete loop from the loop queue and loop hierarchy (LoopInfo). </div><div class="ttdef"><b>Definition:</b> <a href="LoopPass_8cpp_source.html#l00069">LoopPass.cpp:69</a></div></div>
<div class="ttc" id="classllvm_1_1LoopPass_html"><div class="ttname"><a href="classllvm_1_1LoopPass.html">llvm::LoopPass</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopPass_8h_source.html#l00029">LoopPass.h:29</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a9105541412dab869e18b3cceebfff07d"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool isSigned=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00492">Constants.cpp:492</a></div></div>
<div class="ttc" id="Cloning_8h_html"><div class="ttname"><a href="Cloning_8h.html">Cloning.h</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a3df1c508a7b1c89247367cab269076e2"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a3df1c508a7b1c89247367cab269076e2">llvm::LoopBase::block_begin</a></div><div class="ttdeci">block_iterator block_begin() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00140">LoopInfo.h:140</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a91e3f5f9bf6ecbd058624a479e150603"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a91e3f5f9bf6ecbd058624a479e150603">llvm::LoopBase::block_end</a></div><div class="ttdeci">block_iterator block_end() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00141">LoopInfo.h:141</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_ad3a1537c850f63ce48bcf45694cde73f"><div class="ttname"><a href="classllvm_1_1SwitchInst.html#ad3a1537c850f63ce48bcf45694cde73f">llvm::SwitchInst::findCaseValue</a></div><div class="ttdeci">CaseIt findCaseValue(const ConstantInt *C)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02664">Instructions.h:2664</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a82dbbd8e3688b0bc1eedb338864d0d0c"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">llvm::ConstantInt::getTrue</a></div><div class="ttdeci">static ConstantInt * getTrue(LLVMContext &amp;Context)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00438">Constants.cpp:438</a></div></div>
<div class="ttc" id="classllvm_1_1iplist_html_afe55b235779222b867c16d3321c1cd16"><div class="ttname"><a href="classllvm_1_1iplist.html#afe55b235779222b867c16d3321c1cd16">llvm::iplist::splice</a></div><div class="ttdeci">void splice(iterator where, iplist &amp;L2)</div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00570">ilist.h:570</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00101">Debug.cpp:101</a></div></div>
<div class="ttc" id="namespacestd_html_ab8424022895aee3e366fb9a32f2883cb"><div class="ttname"><a href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a></div><div class="ttdeci">void swap(llvm::BitVector &amp;LHS, llvm::BitVector &amp;RHS)</div><div class="ttdoc">Implement std::swap in terms of BitVector swap. </div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00591">BitVector.h:591</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a72873ed64b7be01507a2248b8e756ec8"><div class="ttname"><a href="classllvm_1_1Function.html#a72873ed64b7be01507a2248b8e756ec8">llvm::Function::getAttributes</a></div><div class="ttdeci">AttributeSet getAttributes() const </div><div class="ttdoc">Return the attribute list for this Function. </div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00170">Function.h:170</a></div></div>
<div class="ttc" id="namespacellvm_html_ad8209e4dff0e2440ea41cefb1cfb146e"><div class="ttname"><a href="namespacellvm.html#ad8209e4dff0e2440ea41cefb1cfb146e">llvm::SplitBlock</a></div><div class="ttdeci">BasicBlock * SplitBlock(BasicBlock *Old, Instruction *SplitPt, Pass *P)</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00271">BasicBlockUtils.cpp:271</a></div></div>
<div class="ttc" id="ScalarEvolution_8h_html"><div class="ttname"><a href="ScalarEvolution_8h.html">ScalarEvolution.h</a></div></div>
<div class="ttc" id="CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2README_8txt_source.html#l00036">CodeGen/README.txt:36</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a21960167f529265a1cb02ac1e8ad10f6"><div class="ttname"><a href="classllvm_1_1PHINode.html#a21960167f529265a1cb02ac1e8ad10f6">llvm::PHINode::getIncomingValueForBlock</a></div><div class="ttdeci">Value * getIncomingValueForBlock(const BasicBlock *BB) const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02139">Instructions.h:2139</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a6e328feb83afa5cf1c966d6704e43fc1"><div class="ttname"><a href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">llvm::Type::isIntegerTy</a></div><div class="ttdeci">bool isIntegerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00196">Type.h:196</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a5ef55181ae0bb0f5c561b9a29087b1e5"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a5ef55181ae0bb0f5c561b9a29087b1e5">llvm::BasicBlock::getSinglePredecessor</a></div><div class="ttdeci">BasicBlock * getSinglePredecessor()</div><div class="ttdoc">Return this block if it has a single predecessor block. Otherwise return a null pointer. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00183">BasicBlock.cpp:183</a></div></div>
<div class="ttc" id="LoopUnswitch_8cpp_html_a815e638c738b221b797674c5c63524bb"><div class="ttname"><a href="LoopUnswitch_8cpp.html#a815e638c738b221b797674c5c63524bb">Threshold</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; Threshold(&quot;loop-unswitch-threshold&quot;, cl::desc(&quot;Max loop size to unswitch&quot;), cl::init(100), cl::Hidden)</div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_add5ee99852e9927d0777e74572c91708"><div class="ttname"><a href="classllvm_1_1SwitchInst.html#add5ee99852e9927d0777e74572c91708">llvm::SwitchInst::getCondition</a></div><div class="ttdeci">Value * getCondition() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02610">Instructions.h:2610</a></div></div>
<div class="ttc" id="Function_8h_html"><div class="ttname"><a href="Function_8h.html">Function.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1APIntOps_html_a684cfe02c582e8d75cd6d457e63e6c25"><div class="ttname"><a href="namespacellvm_1_1APIntOps.html#a684cfe02c582e8d75cd6d457e63e6c25">llvm::APIntOps::And</a></div><div class="ttdeci">APInt And(const APInt &amp;LHS, const APInt &amp;RHS)</div><div class="ttdoc">Bitwise AND function for APInt. </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01840">APInt.h:1840</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a8a045d250952c0867382a9840ee18fdf"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">llvm::SmallVectorTemplateCommon&lt; T &gt;::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00112">SmallVector.h:112</a></div></div>
<div class="ttc" id="LoopUnswitch_8cpp_html_a8d46c5e008b296b0924284d8fa6dfa00"><div class="ttname"><a href="LoopUnswitch_8cpp.html#a8d46c5e008b296b0924284d8fa6dfa00">isTrivialLoopExitBlockHelper</a></div><div class="ttdeci">static bool isTrivialLoopExitBlockHelper(Loop *L, BasicBlock *BB, BasicBlock *&amp;ExitBB, std::set&lt; BasicBlock * &gt; &amp;Visited)</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnswitch_8cpp_source.html#l00505">LoopUnswitch.cpp:505</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a413abcab8dbc3900fc2fde96a5d8fca6"><div class="ttname"><a href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">llvm::Value::use_begin</a></div><div class="ttdeci">use_iterator use_begin()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00150">Value.h:150</a></div></div>
<div class="ttc" id="Transforms_2Scalar_8h_html"><div class="ttname"><a href="Transforms_2Scalar_8h.html">Scalar.h</a></div></div>
<div class="ttc" id="classllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l01149">CommandLine.h:1149</a></div></div>
<div class="ttc" id="namespacellvm_html_af140c7ebb85d2f55e90535f5e0cc5028"><div class="ttname"><a href="namespacellvm.html#af140c7ebb85d2f55e90535f5e0cc5028">llvm::CloneBasicBlock</a></div><div class="ttdeci">BasicBlock * CloneBasicBlock(const BasicBlock *BB, ValueToValueMapTy &amp;VMap, const Twine &amp;NameSuffix=&quot;&quot;, Function *F=0, ClonedCodeInfo *CodeInfo=0)</div><div class="ttdef"><b>Definition:</b> <a href="CloneFunction_8cpp_source.html#l00037">CloneFunction.cpp:37</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a1939dbb59960462878c408efb21a2c75"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a1939dbb59960462878c408efb21a2c75">llvm::LoopBase::getBlocks</a></div><div class="ttdeci">const std::vector&lt; BlockT * &gt; &amp; getBlocks() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00138">LoopInfo.h:138</a></div></div>
<div class="ttc" id="classllvm_1_1LPPassManager_html_aabfec94c2ec8e035930f869a3a3597be"><div class="ttname"><a href="classllvm_1_1LPPassManager.html#aabfec94c2ec8e035930f869a3a3597be">llvm::LPPassManager::cloneBasicBlockSimpleAnalysis</a></div><div class="ttdeci">void cloneBasicBlockSimpleAnalysis(BasicBlock *From, BasicBlock *To, Loop *L)</div><div class="ttdef"><b>Definition:</b> <a href="LoopPass_8cpp_source.html#l00138">LoopPass.cpp:138</a></div></div>
<div class="ttc" id="classllvm_1_1Loop_html"><div class="ttname"><a href="classllvm_1_1Loop.html">llvm::Loop</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00338">LoopInfo.h:338</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a5cb76a65b6524dba1493dd2b9dc3abbe"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">TerminatorInst * getTerminator()</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00120">BasicBlock.cpp:120</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a3075a9eef753018bed561df31f38dc23"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a3075a9eef753018bed561df31f38dc23">llvm::BasicBlock::isLandingPad</a></div><div class="ttdeci">bool isLandingPad() const </div><div class="ttdoc">Return true if this basic block is a landing pad. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00360">BasicBlock.cpp:360</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_ae1d53a21892854816885c7288f8b46f1"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ae1d53a21892854816885c7288f8b46f1">llvm::BasicBlock::Create</a></div><div class="ttdeci">static BasicBlock * Create(LLVMContext &amp;Context, const Twine &amp;Name=&quot;&quot;, Function *Parent=0, BasicBlock *InsertBefore=0)</div><div class="ttdoc">Creates a new BasicBlock. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00109">BasicBlock.h:109</a></div></div>
<div class="ttc" id="BasicBlockUtils_8h_html"><div class="ttname"><a href="BasicBlockUtils_8h.html">BasicBlockUtils.h</a></div></div>
<div class="ttc" id="classllvm_1_1DominatorTree_html_a707b4485d4e0a3d99444479868fde883"><div class="ttname"><a href="classllvm_1_1DominatorTree.html#a707b4485d4e0a3d99444479868fde883">llvm::DominatorTree::addNewBlock</a></div><div class="ttdeci">DomTreeNode * addNewBlock(BasicBlock *BB, BasicBlock *DomBB)</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00851">Dominators.h:851</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_a96a201f56500af4dd70b4169f140cb4c"><div class="ttname"><a href="classllvm_1_1SwitchInst.html#a96a201f56500af4dd70b4169f140cb4c">llvm::SwitchInst::case_default</a></div><div class="ttdeci">CaseIt case_default()</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02653">Instructions.h:2653</a></div></div>
<div class="ttc" id="classllvm_1_1LoopInfo_html_ab71f206dfbe29bc480d3e2f1b4c80824"><div class="ttname"><a href="classllvm_1_1LoopInfo.html#ab71f206dfbe29bc480d3e2f1b4c80824">llvm::LoopInfo::removeBlock</a></div><div class="ttdeci">void removeBlock(BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00679">LoopInfo.h:679</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html_a4901d4ad48420014059e9393f75442ae"><div class="ttname"><a href="classllvm_1_1SwitchInst.html#a4901d4ad48420014059e9393f75442ae">llvm::SwitchInst::getNumCases</a></div><div class="ttdeci">unsigned getNumCases() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02623">Instructions.h:2623</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">llvm::CmpInst::ICMP_EQ</a></div><div class="ttdoc">equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00672">InstrTypes.h:672</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_html"><div class="ttname"><a href="classllvm_1_1SwitchInst.html">llvm::SwitchInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02449">Instructions.h:2449</a></div></div>
<div class="ttc" id="Local_8h_html"><div class="ttname"><a href="Local_8h.html">Local.h</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_ad652423d9d91271ba153eb86482b2f55"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ad652423d9d91271ba153eb86482b2f55">llvm::BasicBlock::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">Get the context in which this basic block lives. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00033">BasicBlock.cpp:33</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00066">Value.h:66</a></div></div>
<div class="ttc" id="classllvm_1_1StringRef_html_a9e277b660236bb0318b61ab9cdf60dc7"><div class="ttname"><a href="classllvm_1_1StringRef.html#a9e277b660236bb0318b61ab9cdf60dc7">llvm::StringRef::end</a></div><div class="ttdeci">iterator end() const </div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00099">StringRef.h:99</a></div></div>
<div class="ttc" id="LoopUnswitch_8cpp_html_a90d2f4cf564ae744b0f8bcb8b6967090"><div class="ttname"><a href="LoopUnswitch_8cpp.html#a90d2f4cf564ae744b0f8bcb8b6967090">ReplaceUsesOfWith</a></div><div class="ttdeci">static void ReplaceUsesOfWith(Instruction *I, Value *V, std::vector&lt; Instruction * &gt; &amp;Worklist, Loop *L, LPPassManager *LPM)</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnswitch_8cpp_source.html#l00926">LoopUnswitch.cpp:926</a></div></div>
<div class="ttc" id="Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00097">Debug.h:97</a></div></div>
<div class="ttc" id="raw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="classllvm_1_1LoopInfo_html_ab12b535502b86394c84bfd24d58e4657"><div class="ttname"><a href="classllvm_1_1LoopInfo.html#ab12b535502b86394c84bfd24d58e4657">llvm::LoopInfo::replacementPreservesLCSSAForm</a></div><div class="ttdeci">bool replacementPreservesLCSSAForm(Instruction *From, Value *To)</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00691">LoopInfo.h:691</a></div></div>
<div class="ttc" id="TargetTransformInfo_8h_html"><div class="ttname"><a href="TargetTransformInfo_8h.html">TargetTransformInfo.h</a></div></div>
<div class="ttc" id="namespacellvm_html_a02c38c380d809959819ff729cc158cee"><div class="ttname"><a href="namespacellvm.html#a02c38c380d809959819ff729cc158cee">llvm::SplitLandingPadPredecessors</a></div><div class="ttdeci">void SplitLandingPadPredecessors(BasicBlock *OrigBB, ArrayRef&lt; BasicBlock * &gt; Preds, const char *Suffix, const char *Suffix2, Pass *P, SmallVectorImpl&lt; BasicBlock * &gt; &amp;NewBBs)</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00495">BasicBlockUtils.cpp:495</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a88cdefb709309eddc6e5daca0be6a7b4"><div class="ttname"><a href="classllvm_1_1PHINode.html#a88cdefb709309eddc6e5daca0be6a7b4">llvm::PHINode::setIncomingValue</a></div><div class="ttdeci">void setIncomingValue(unsigned i, Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02062">Instructions.h:2062</a></div></div>
<div class="ttc" id="structllvm_1_1CodeMetrics_html_a6c48330c94e82ab4a621c6a192c14249"><div class="ttname"><a href="structllvm_1_1CodeMetrics.html#a6c48330c94e82ab4a621c6a192c14249">llvm::CodeMetrics::NumInsts</a></div><div class="ttdeci">unsigned NumInsts</div><div class="ttdoc">Number of instructions in the analyzed blocks. </div><div class="ttdef"><b>Definition:</b> <a href="CodeMetrics_8h_source.html#l00057">CodeMetrics.h:57</a></div></div>
<div class="ttc" id="LoopUnswitch_8cpp_html_a9ab6a0cab40eae4e54ed18308f8826ff"><div class="ttname"><a href="LoopUnswitch_8cpp.html#a9ab6a0cab40eae4e54ed18308f8826ff">isTrivialLoopExitBlock</a></div><div class="ttdeci">static BasicBlock * isTrivialLoopExitBlock(Loop *L, BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnswitch_8cpp_source.html#l00540">LoopUnswitch.cpp:540</a></div></div>
<div class="ttc" id="namespacellvm_html_a7dc3e2c002713fec56bdbf16aa704576"><div class="ttname"><a href="namespacellvm.html#a7dc3e2c002713fec56bdbf16aa704576">llvm::tie</a></div><div class="ttdeci">tier&lt; T1, T2 &gt; tie(T1 &amp;f, T2 &amp;s)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00216">STLExtras.h:216</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a5c2b7d7f19aac93b27b845858a7eb73e"><div class="ttname"><a href="classllvm_1_1PHINode.html#a5c2b7d7f19aac93b27b845858a7eb73e">llvm::PHINode::getBasicBlockIndex</a></div><div class="ttdeci">int getBasicBlockIndex(const BasicBlock *BB) const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02132">Instructions.h:2132</a></div></div>
<div class="ttc" id="classllvm_1_1LoopInfo_html_ad3c837c02164da836d309afebfc9c943"><div class="ttname"><a href="classllvm_1_1LoopInfo.html#ad3c837c02164da836d309afebfc9c943">llvm::LoopInfo::getBase</a></div><div class="ttdeci">LoopInfoBase&lt; BasicBlock, Loop &gt; &amp; getBase()</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00602">LoopInfo.h:602</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00052">Instruction.h:52</a></div></div>
<div class="ttc" id="classllvm_1_1LPPassManager_html"><div class="ttname"><a href="classllvm_1_1LPPassManager.html">llvm::LPPassManager</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopPass_8h_source.html#l00086">LoopPass.h:86</a></div></div>
<div class="ttc" id="classllvm_1_1SwitchInst_1_1CaseIt_html"><div class="ttname"><a href="classllvm_1_1SwitchInst_1_1CaseIt.html">llvm::SwitchInst::CaseIt</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02574">Instructions.h:2574</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 22:59:40 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
