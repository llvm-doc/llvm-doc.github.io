<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: BranchProbabilityInfo.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('BranchProbabilityInfo_8h_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">BranchProbabilityInfo.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="BranchProbabilityInfo_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===--- BranchProbabilityInfo.h - Branch Probability Analysis --*- C++ -*-===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// This pass is used to evaluate branch probabilties.</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#ifndef LLVM_ANALYSIS_BRANCHPROBABILITYINFO_H</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#define LLVM_ANALYSIS_BRANCHPROBABILITYINFO_H</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseMap_8h.html">llvm/ADT/DenseMap.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallPtrSet_8h.html">llvm/ADT/SmallPtrSet.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InitializePasses_8h.html">llvm/InitializePasses.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Pass_8h.html">llvm/Pass.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BranchProbability_8h.html">llvm/Support/BranchProbability.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="keyword">class </span>LoopInfo;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="keyword">class </span>raw_ostream;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">/// \brief Analysis pass providing branch probability information.</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">/// This is a function analysis pass which provides information on the relative</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">/// probabilities of each &quot;edge&quot; in the function&#39;s CFG where such an edge is</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">/// defined by a pair (PredBlock and an index in the successors). The</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">/// probability of an edge from one block is always relative to the</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">/// probabilities of other edges from the block. The probabilites of all edges</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">/// from a block sum to exactly one (100%).</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">/// We use a pair (PredBlock and an index in the successors) to uniquely</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">/// identify an edge, since we can have multiple edges from Src to Dst.</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">/// As an example, we can have a switch which jumps to Dst with value 0 and</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">/// value 10.</span></div><div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityInfo.html">   39</a></span>&#160;<span class="comment"></span><span class="keyword">class </span><a class="code" href="classllvm_1_1BranchProbabilityInfo.html">BranchProbabilityInfo</a> : <span class="keyword">public</span> <a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a> {</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityInfo.html#a108d48989cdabea6229b56e23d49677b">   41</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a108d48989cdabea6229b56e23d49677b">ID</a>;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="classllvm_1_1BranchProbabilityInfo.html#a14302961abf2fd33568efb78adcd7771">   43</a></span>&#160;  <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a14302961abf2fd33568efb78adcd7771">BranchProbabilityInfo</a>() : <a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a>(ID) {</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <a class="code" href="namespacellvm.html#a97af1e658073d9ee97afd0fbeffe1518">initializeBranchProbabilityInfoPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  }</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a555e3480af3e78c3246964601b57e668">getAnalysisUsage</a>(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU) <span class="keyword">const</span>;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a8a4540e8fc7130303ab7ac2e7551033e">runOnFunction</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>);</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a6ac935b6a46f1cd94bbaec361e28163b">print</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;OS, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Module.html">Module</a> *<a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = 0) <span class="keyword">const</span>;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">  /// \brief Get an edge&#39;s probability, relative to other out-edges of the Src.</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">  /// This routine provides access to the fractional probability between zero</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">  /// (0%) and one (100%) of this edge executing, relative to other edges</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">  /// leaving the &#39;Src&#39; block. The returned probability is never zero, and can</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">  /// only be one if the source block has only one successor.</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a> <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a959eede6fb70e84a754fa1e72009c14b">getEdgeProbability</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Src,</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;                                       <span class="keywordtype">unsigned</span> IndexInSuccessors) <span class="keyword">const</span>;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">  /// \brief Get the probability of going from Src to Dst.</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">  /// It returns the sum of all probabilities for edges from Src to Dst.</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a> <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a959eede6fb70e84a754fa1e72009c14b">getEdgeProbability</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Src,</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;                                       <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Dst) <span class="keyword">const</span>;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">  /// \brief Test if an edge is hot relative to other out-edges of the Src.</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">  /// Check whether this edge out of the source block is &#39;hot&#39;. We define hot</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">  /// as having a relative probability &gt;= 80%.</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#acaeb48ae389a047073f1715669376c73">isEdgeHot</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Src, <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Dst) <span class="keyword">const</span>;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">  /// \brief Retrieve the hot successor of a block if one exists.</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">  /// Given a basic block, look through its successors and if one exists for</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">  /// which \see isEdgeHot would return true, return that successor block.</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a4ac5de563c5186c4a0ff5a80c1124b5e">getHotSucc</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) <span class="keyword">const</span>;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">  /// \brief Print an edge&#39;s probability.</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">  /// Retrieves an edge&#39;s probability similarly to \see getEdgeProbability, but</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">  /// then prints that probability to the provided stream. That stream is then</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">  /// returned.</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a53d680148cac5345b788323ba052c89a">printEdgeProbability</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;OS, <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Src,</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                                    <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Dst) <span class="keyword">const</span>;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">  /// \brief Get the raw edge weight calculated for the edge.</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">  /// This returns the raw edge weight. It is guaranteed to fall between 1 and</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">  /// UINT32_MAX. Note that the raw edge weight is not meaningful in isolation.</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">  /// This interface should be very carefully, and primarily by routines that</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">  /// are updating the analysis by later calling setEdgeWeight.</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment"></span>  uint32_t <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#ae9594821eccfb447e93c03ceff8a579e">getEdgeWeight</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Src,</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                         <span class="keywordtype">unsigned</span> IndexInSuccessors) <span class="keyword">const</span>;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">  /// \brief Get the raw edge weight calculated for the block pair.</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">  /// This returns the sum of all raw edge weights from Src to Dst.</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">  /// It is guaranteed to fall between 1 and UINT32_MAX.</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment"></span>  uint32_t <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#ae9594821eccfb447e93c03ceff8a579e">getEdgeWeight</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Src, <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Dst) <span class="keyword">const</span>;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">  /// \brief Set the raw edge weight for a given edge.</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">  /// This allows a pass to explicitly set the edge weight for an edge. It can</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">  /// be used when updating the CFG to update and preserve the branch</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">  /// probability information. Read the implementation of how these edge</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">  /// weights are calculated carefully before using!</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BranchProbabilityInfo.html#ac263f2f66a95a7f27ac6303fc9d9c252">setEdgeWeight</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Src, <span class="keywordtype">unsigned</span> IndexInSuccessors,</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                     uint32_t Weight);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="comment">// Since we allow duplicate edges from one basic block to another, we use</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="comment">// a pair (PredBlock and an index in the successors) to specify an edge.</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="keyword">typedef</span> std::pair&lt;const BasicBlock *, unsigned&gt; Edge;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="comment">// Default weight value. Used when we don&#39;t have information about the edge.</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="comment">// TODO: DEFAULT_WEIGHT makes sense during static predication, when none of</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="comment">// the successors have a weight yet. But it doesn&#39;t make sense when providing</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="comment">// weight to an edge that may have siblings with non-zero weights. This can</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="comment">// be handled various ways, but it&#39;s probably fine for an edge with unknown</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="comment">// weight to just &quot;inherit&quot; the non-zero weight of an adjacent successor.</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> uint32_t DEFAULT_WEIGHT = 16;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Edge, uint32_t&gt;</a> Weights;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">  /// \brief Handle to the LoopInfo analysis.</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">  /// \brief Track the last function we run over for printing.</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Function.html">Function</a> *LastF;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">  /// \brief Track the set of blocks directly succeeded by a returning block.</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 16&gt;</a> PostDominatedByUnreachable;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">  /// \brief Track the set of blocks that always lead to a cold call.</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 16&gt;</a> PostDominatedByColdCall;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">  /// \brief Get sum of the block successors&#39; weights.</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment"></span>  uint32_t getSumForBlock(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB) <span class="keyword">const</span>;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="keywordtype">bool</span> calcUnreachableHeuristics(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB);</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="keywordtype">bool</span> calcMetadataWeights(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB);</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keywordtype">bool</span> calcColdCallHeuristics(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="keywordtype">bool</span> calcPointerHeuristics(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB);</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="keywordtype">bool</span> calcLoopBranchHeuristics(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB);</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <span class="keywordtype">bool</span> calcZeroHeuristics(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="keywordtype">bool</span> calcFloatingPointHeuristics(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB);</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="keywordtype">bool</span> calcInvokeHeuristics(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;};</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;}</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="preprocessor">#endif</span></div><div class="ttc" id="classllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00035">PassRegistry.cpp:35</a></div></div>
<div class="ttc" id="classllvm_1_1BranchProbabilityInfo_html_a53d680148cac5345b788323ba052c89a"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#a53d680148cac5345b788323ba052c89a">llvm::BranchProbabilityInfo::printEdgeProbability</a></div><div class="ttdeci">raw_ostream &amp; printEdgeProbability(raw_ostream &amp;OS, const BasicBlock *Src, const BasicBlock *Dst) const </div><div class="ttdoc">Print an edge&amp;#39;s probability. </div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00641">BranchProbabilityInfo.cpp:641</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html"><div class="ttname"><a href="classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">The main container class for the LLVM Intermediate Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00112">Module.h:112</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap&lt; Edge, uint32_t &gt;</a></div></div>
<div class="ttc" id="LLParser_8cpp_html_a33ece1ef8074506a15d7f86eb76dbae6"><div class="ttname"><a href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a></div><div class="ttdeci">F(f)</div></div>
<div class="ttc" id="classllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00070">Function.h:70</a></div></div>
<div class="ttc" id="classllvm_1_1BranchProbabilityInfo_html_a4ac5de563c5186c4a0ff5a80c1124b5e"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#a4ac5de563c5186c4a0ff5a80c1124b5e">llvm::BranchProbabilityInfo::getHotSucc</a></div><div class="ttdeci">BasicBlock * getHotSucc(BasicBlock *BB) const </div><div class="ttdoc">Retrieve the hot successor of a block if one exists. </div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00554">BranchProbabilityInfo.cpp:554</a></div></div>
<div class="ttc" id="namespacellvm_html_a97af1e658073d9ee97afd0fbeffe1518"><div class="ttname"><a href="namespacellvm.html#a97af1e658073d9ee97afd0fbeffe1518">llvm::initializeBranchProbabilityInfoPass</a></div><div class="ttdeci">void initializeBranchProbabilityInfoPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="classllvm_1_1BranchProbabilityInfo_html_a14302961abf2fd33568efb78adcd7771"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#a14302961abf2fd33568efb78adcd7771">llvm::BranchProbabilityInfo::BranchProbabilityInfo</a></div><div class="ttdeci">BranchProbabilityInfo()</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8h_source.html#l00043">BranchProbabilityInfo.h:43</a></div></div>
<div class="ttc" id="classllvm_1_1BranchProbabilityInfo_html_a6ac935b6a46f1cd94bbaec361e28163b"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#a6ac935b6a46f1cd94bbaec361e28163b">llvm::BranchProbabilityInfo::print</a></div><div class="ttdeci">void print(raw_ostream &amp;OS, const Module *M=0) const </div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00519">BranchProbabilityInfo.cpp:519</a></div></div>
<div class="ttc" id="SmallPtrSet_8h_html"><div class="ttname"><a href="SmallPtrSet_8h.html">SmallPtrSet.h</a></div></div>
<div class="ttc" id="BranchProbability_8h_html"><div class="ttname"><a href="BranchProbability_8h.html">BranchProbability.h</a></div></div>
<div class="ttc" id="classllvm_1_1BranchProbability_html"><div class="ttname"><a href="classllvm_1_1BranchProbability.html">llvm::BranchProbability</a></div><div class="ttdef"><b>Definition:</b> <a href="BranchProbability_8h_source.html#l00025">BranchProbability.h:25</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1BranchProbabilityInfo_html_ac263f2f66a95a7f27ac6303fc9d9c252"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#ac263f2f66a95a7f27ac6303fc9d9c252">llvm::BranchProbabilityInfo::setEdgeWeight</a></div><div class="ttdeci">void setEdgeWeight(const BasicBlock *Src, unsigned IndexInSuccessors, uint32_t Weight)</div><div class="ttdoc">Set the raw edge weight for a given edge. </div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00612">BranchProbabilityInfo.cpp:612</a></div></div>
<div class="ttc" id="InitializePasses_8h_html"><div class="ttname"><a href="InitializePasses_8h.html">InitializePasses.h</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00037">PassAnalysisSupport.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1FunctionPass_html"><div class="ttname"><a href="classllvm_1_1FunctionPass.html">llvm::FunctionPass</a></div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00293">Pass.h:293</a></div></div>
<div class="ttc" id="DenseMap_8h_html"><div class="ttname"><a href="DenseMap_8h.html">DenseMap.h</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00236">SmallPtrSet.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1LoopInfo_html"><div class="ttname"><a href="classllvm_1_1LoopInfo.html">llvm::LoopInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00589">LoopInfo.h:589</a></div></div>
<div class="ttc" id="classllvm_1_1BranchProbabilityInfo_html_acaeb48ae389a047073f1715669376c73"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#acaeb48ae389a047073f1715669376c73">llvm::BranchProbabilityInfo::isEdgeHot</a></div><div class="ttdeci">bool isEdgeHot(const BasicBlock *Src, const BasicBlock *Dst) const </div><div class="ttdoc">Test if an edge is hot relative to other out-edges of the Src. </div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00548">BranchProbabilityInfo.cpp:548</a></div></div>
<div class="ttc" id="classllvm_1_1BranchProbabilityInfo_html_a555e3480af3e78c3246964601b57e668"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#a555e3480af3e78c3246964601b57e668">llvm::BranchProbabilityInfo::getAnalysisUsage</a></div><div class="ttdeci">void getAnalysisUsage(AnalysisUsage &amp;AU) const </div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00480">BranchProbabilityInfo.cpp:480</a></div></div>
<div class="ttc" id="classllvm_1_1BranchProbabilityInfo_html_a108d48989cdabea6229b56e23d49677b"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#a108d48989cdabea6229b56e23d49677b">llvm::BranchProbabilityInfo::ID</a></div><div class="ttdeci">static char ID</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8h_source.html#l00041">BranchProbabilityInfo.h:41</a></div></div>
<div class="ttc" id="CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2README_8txt_source.html#l00036">CodeGen/README.txt:36</a></div></div>
<div class="ttc" id="Pass_8h_html"><div class="ttname"><a href="Pass_8h.html">Pass.h</a></div></div>
<div class="ttc" id="classllvm_1_1BranchProbabilityInfo_html"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html">llvm::BranchProbabilityInfo</a></div><div class="ttdoc">Analysis pass providing branch probability information. </div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8h_source.html#l00039">BranchProbabilityInfo.h:39</a></div></div>
<div class="ttc" id="classllvm_1_1BranchProbabilityInfo_html_a8a4540e8fc7130303ab7ac2e7551033e"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#a8a4540e8fc7130303ab7ac2e7551033e">llvm::BranchProbabilityInfo::runOnFunction</a></div><div class="ttdeci">bool runOnFunction(Function &amp;F)</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00485">BranchProbabilityInfo.cpp:485</a></div></div>
<div class="ttc" id="Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="Target_2X86_2README_8txt_source.html#l00297">Target/X86/README.txt:297</a></div></div>
<div class="ttc" id="classllvm_1_1raw__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__ostream.html">llvm::raw_ostream</a></div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00031">raw_ostream.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1BranchProbabilityInfo_html_a959eede6fb70e84a754fa1e72009c14b"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#a959eede6fb70e84a754fa1e72009c14b">llvm::BranchProbabilityInfo::getEdgeProbability</a></div><div class="ttdeci">BranchProbability getEdgeProbability(const BasicBlock *Src, unsigned IndexInSuccessors) const </div><div class="ttdoc">Get an edge&amp;#39;s probability, relative to other out-edges of the Src. </div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00622">BranchProbabilityInfo.cpp:622</a></div></div>
<div class="ttc" id="classllvm_1_1BranchProbabilityInfo_html_ae9594821eccfb447e93c03ceff8a579e"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#ae9594821eccfb447e93c03ceff8a579e">llvm::BranchProbabilityInfo::getEdgeWeight</a></div><div class="ttdeci">uint32_t getEdgeWeight(const BasicBlock *Src, unsigned IndexInSuccessors) const </div><div class="ttdoc">Get the raw edge weight calculated for the edge. </div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l00584">BranchProbabilityInfo.cpp:584</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 22:58:16 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
