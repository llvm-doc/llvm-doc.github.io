<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: BitstreamWriter.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('BitstreamWriter_8h_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">BitstreamWriter.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="BitstreamWriter_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- BitstreamWriter.h - Low-level bitstream writer interface -*- C++ -*-===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// This header defines the BitstreamWriter class.  This class can be used to</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// write an arbitrary bitstream, regardless of its contents.</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#ifndef LLVM_BITCODE_BITSTREAMWRITER_H</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#define LLVM_BITCODE_BITSTREAMWRITER_H</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallVector_8h.html">llvm/ADT/SmallVector.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="StringRef_8h.html">llvm/ADT/StringRef.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BitCodes_8h.html">llvm/Bitcode/BitCodes.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div><div class="line"><a name="l00025"></a><span class="lineno"><a class="line" href="classllvm_1_1BitstreamWriter.html">   25</a></span>&#160;<span class="keyword">class </span><a class="code" href="classllvm_1_1BitstreamWriter.html">BitstreamWriter</a> {</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;  <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;char&gt;</a> &amp;Out;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">  /// CurBit - Always between 0 and 31 inclusive, specifies the next bit to use.</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"></span>  <span class="keywordtype">unsigned</span> CurBit;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">  /// CurValue - The current value.  Only bits &lt; CurBit are valid.</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment"></span>  uint32_t CurValue;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">  /// CurCodeSize - This is the declared size of code values used for the</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">  /// current block, in bits.</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment"></span>  <span class="keywordtype">unsigned</span> CurCodeSize;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">  /// BlockInfoCurBID - When emitting a BLOCKINFO_BLOCK, this is the currently</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">  /// selected BLOCK ID.</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment"></span>  <span class="keywordtype">unsigned</span> BlockInfoCurBID;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">  /// CurAbbrevs - Abbrevs installed at in this block.</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment"></span>  std::vector&lt;BitCodeAbbrev*&gt; CurAbbrevs;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <span class="keyword">struct </span>Block {</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keywordtype">unsigned</span> PrevCodeSize;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keywordtype">unsigned</span> StartSizeWord;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    std::vector&lt;BitCodeAbbrev*&gt; PrevAbbrevs;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    Block(<span class="keywordtype">unsigned</span> PCS, <span class="keywordtype">unsigned</span> SSW) : PrevCodeSize(PCS), StartSizeWord(SSW) {}</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  };</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">  /// BlockScope - This tracks the current blocks that we have entered.</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment"></span>  std::vector&lt;Block&gt; BlockScope;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">  /// BlockInfo - This contains information emitted to BLOCKINFO_BLOCK blocks.</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">  /// These describe abbreviations that all blocks of the specified ID inherit.</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment"></span>  <span class="keyword">struct </span>BlockInfo {</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keywordtype">unsigned</span> BlockID;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    std::vector&lt;BitCodeAbbrev*&gt; Abbrevs;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  };</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  std::vector&lt;BlockInfo&gt; BlockInfoRecords;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="comment">// BackpatchWord - Backpatch a 32-bit word in the output with the specified</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="comment">// value.</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <span class="keywordtype">void</span> BackpatchWord(<span class="keywordtype">unsigned</span> ByteNo, <span class="keywordtype">unsigned</span> NewWord) {</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    Out[ByteNo++] = (<span class="keywordtype">unsigned</span> char)(NewWord &gt;&gt;  0);</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    Out[ByteNo++] = (<span class="keywordtype">unsigned</span> char)(NewWord &gt;&gt;  8);</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    Out[ByteNo++] = (<span class="keywordtype">unsigned</span> char)(NewWord &gt;&gt; 16);</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    Out[ByteNo  ] = (<span class="keywordtype">unsigned</span> char)(NewWord &gt;&gt; 24);</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  }</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="keywordtype">void</span> WriteByte(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="classllvm_1_1Value.html">Value</a>) {</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    Out.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Value);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  }</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="keywordtype">void</span> WriteWord(<span class="keywordtype">unsigned</span> Value) {</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> Bytes[4] = {</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;      (<span class="keywordtype">unsigned</span> char)(Value &gt;&gt;  0),</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;      (<span class="keywordtype">unsigned</span> char)(Value &gt;&gt;  8),</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;      (<span class="keywordtype">unsigned</span> char)(Value &gt;&gt; 16),</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      (<span class="keywordtype">unsigned</span> char)(Value &gt;&gt; 24) };</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    Out.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a669d55980a7d4b6307b94596deeb0b1f">append</a>(&amp;Bytes[0], &amp;Bytes[4]);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  }</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="keywordtype">unsigned</span> GetBufferOffset()<span class="keyword"> const </span>{</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">return</span> Out.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>();</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  }</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="keywordtype">unsigned</span> GetWordIndex()<span class="keyword"> const </span>{</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordtype">unsigned</span> Offset = GetBufferOffset();</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    assert((Offset &amp; 3) == 0 &amp;&amp; <span class="stringliteral">&quot;Not 32-bit aligned&quot;</span>);</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">return</span> Offset / 4;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  }</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="classllvm_1_1BitstreamWriter.html#a89c2112f53738259e695c7e61899d5ff">   96</a></span>&#160;  <span class="keyword">explicit</span> <a class="code" href="classllvm_1_1BitstreamWriter.html#a89c2112f53738259e695c7e61899d5ff">BitstreamWriter</a>(<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;char&gt;</a> &amp;O)</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    : Out(O), CurBit(0), CurValue(0), CurCodeSize(2) {}</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="classllvm_1_1BitstreamWriter.html#abf7d55f3e39ce028c1594f34967d06b3">   99</a></span>&#160;  <a class="code" href="classllvm_1_1BitstreamWriter.html#abf7d55f3e39ce028c1594f34967d06b3">~BitstreamWriter</a>() {</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    assert(CurBit == 0 &amp;&amp; <span class="stringliteral">&quot;Unflused data remaining&quot;</span>);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    assert(BlockScope.empty() &amp;&amp; CurAbbrevs.empty() &amp;&amp; <span class="stringliteral">&quot;Block imbalance&quot;</span>);</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="comment">// Free the BlockInfoRecords.</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordflow">while</span> (!BlockInfoRecords.empty()) {</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      BlockInfo &amp;Info = BlockInfoRecords.back();</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      <span class="comment">// Free blockinfo abbrev info.</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = static_cast&lt;unsigned&gt;(Info.Abbrevs.size());</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;           <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        Info.Abbrevs[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;dropRef();</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      BlockInfoRecords.pop_back();</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    }</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  }</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">  /// \brief Retrieve the current position in the stream, in bits.</span></div><div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="classllvm_1_1BitstreamWriter.html#aa07c00a7962ca91ebe291fe108905dd9">  115</a></span>&#160;<span class="comment"></span>  uint64_t <a class="code" href="classllvm_1_1BitstreamWriter.html#aa07c00a7962ca91ebe291fe108905dd9">GetCurrentBitNo</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> GetBufferOffset() * 8 + CurBit; }</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="comment">//===--------------------------------------------------------------------===//</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="comment">// Basic Primitives for emitting bits to the stream.</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="comment">//===--------------------------------------------------------------------===//</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="classllvm_1_1BitstreamWriter.html#a40de93ba2d72dc6bccd7a1fdde996718">  121</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BitstreamWriter.html#a40de93ba2d72dc6bccd7a1fdde996718">Emit</a>(uint32_t Val, <span class="keywordtype">unsigned</span> NumBits) {</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    assert(NumBits &amp;&amp; NumBits &lt;= 32 &amp;&amp; <span class="stringliteral">&quot;Invalid value size!&quot;</span>);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    assert((Val &amp; ~(~0U &gt;&gt; (32-NumBits))) == 0 &amp;&amp; <span class="stringliteral">&quot;High bits set!&quot;</span>);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    CurValue |= Val &lt;&lt; CurBit;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">if</span> (CurBit + NumBits &lt; 32) {</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      CurBit += NumBits;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    }</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="comment">// Add the current word.</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    WriteWord(CurValue);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordflow">if</span> (CurBit)</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      CurValue = Val &gt;&gt; (32-CurBit);</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      CurValue = 0;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    CurBit = (CurBit+NumBits) &amp; 31;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  }</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="classllvm_1_1BitstreamWriter.html#a9d3764262ce45f4b4ceeb2d2fe794d3f">  140</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BitstreamWriter.html#a9d3764262ce45f4b4ceeb2d2fe794d3f">Emit64</a>(uint64_t Val, <span class="keywordtype">unsigned</span> NumBits) {</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">if</span> (NumBits &lt;= 32)</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      <a class="code" href="classllvm_1_1BitstreamWriter.html#a40de93ba2d72dc6bccd7a1fdde996718">Emit</a>((uint32_t)Val, NumBits);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      <a class="code" href="classllvm_1_1BitstreamWriter.html#a40de93ba2d72dc6bccd7a1fdde996718">Emit</a>((uint32_t)Val, 32);</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      <a class="code" href="classllvm_1_1BitstreamWriter.html#a40de93ba2d72dc6bccd7a1fdde996718">Emit</a>((uint32_t)(Val &gt;&gt; 32), NumBits-32);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    }</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  }</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div><div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="classllvm_1_1BitstreamWriter.html#a87d4d8efe6bca7b041b0837d30add275">  149</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BitstreamWriter.html#a87d4d8efe6bca7b041b0837d30add275">FlushToWord</a>() {</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordflow">if</span> (CurBit) {</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      WriteWord(CurValue);</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      CurBit = 0;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      CurValue = 0;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    }</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  }</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="classllvm_1_1BitstreamWriter.html#a9d3d121556c01aab6e6ebfc830e17dbb">  157</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BitstreamWriter.html#a9d3d121556c01aab6e6ebfc830e17dbb">EmitVBR</a>(uint32_t Val, <span class="keywordtype">unsigned</span> NumBits) {</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    assert(NumBits &lt;= 32 &amp;&amp; <span class="stringliteral">&quot;Too many bits to emit!&quot;</span>);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    uint32_t <a class="code" href="CaptureTracking_8cpp.html#ac30708db2a991631cbf3d95c6324d929">Threshold</a> = 1U &lt;&lt; (NumBits-1);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="comment">// Emit the bits with VBR encoding, NumBits-1 bits at a time.</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">while</span> (Val &gt;= Threshold) {</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      <a class="code" href="classllvm_1_1BitstreamWriter.html#a40de93ba2d72dc6bccd7a1fdde996718">Emit</a>((Val &amp; ((1 &lt;&lt; (NumBits-1))-1)) | (1 &lt;&lt; (NumBits-1)), NumBits);</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      Val &gt;&gt;= NumBits-1;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    }</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <a class="code" href="classllvm_1_1BitstreamWriter.html#a40de93ba2d72dc6bccd7a1fdde996718">Emit</a>(Val, NumBits);</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  }</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div><div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="classllvm_1_1BitstreamWriter.html#a765ce2a472e2eedad6b7ed02b6674a00">  170</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BitstreamWriter.html#a765ce2a472e2eedad6b7ed02b6674a00">EmitVBR64</a>(uint64_t Val, <span class="keywordtype">unsigned</span> NumBits) {</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    assert(NumBits &lt;= 32 &amp;&amp; <span class="stringliteral">&quot;Too many bits to emit!&quot;</span>);</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">if</span> ((uint32_t)Val == Val)</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BitstreamWriter.html#a9d3d121556c01aab6e6ebfc830e17dbb">EmitVBR</a>((uint32_t)Val, NumBits);</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    uint32_t <a class="code" href="CaptureTracking_8cpp.html#ac30708db2a991631cbf3d95c6324d929">Threshold</a> = 1U &lt;&lt; (NumBits-1);</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="comment">// Emit the bits with VBR encoding, NumBits-1 bits at a time.</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keywordflow">while</span> (Val &gt;= Threshold) {</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      <a class="code" href="classllvm_1_1BitstreamWriter.html#a40de93ba2d72dc6bccd7a1fdde996718">Emit</a>(((uint32_t)Val &amp; ((1 &lt;&lt; (NumBits-1))-1)) |</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;           (1 &lt;&lt; (NumBits-1)), NumBits);</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      Val &gt;&gt;= NumBits-1;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    }</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <a class="code" href="classllvm_1_1BitstreamWriter.html#a40de93ba2d72dc6bccd7a1fdde996718">Emit</a>((uint32_t)Val, NumBits);</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  }</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">  /// EmitCode - Emit the specified code.</span></div><div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="classllvm_1_1BitstreamWriter.html#a47cd6c37f5dc6cee1e2337f909452c85">  188</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BitstreamWriter.html#a47cd6c37f5dc6cee1e2337f909452c85">EmitCode</a>(<span class="keywordtype">unsigned</span> Val) {</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <a class="code" href="classllvm_1_1BitstreamWriter.html#a40de93ba2d72dc6bccd7a1fdde996718">Emit</a>(Val, CurCodeSize);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  }</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <span class="comment">//===--------------------------------------------------------------------===//</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <span class="comment">// Block Manipulation</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="comment">//===--------------------------------------------------------------------===//</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">  /// getBlockInfo - If there is block info for the specified ID, return it,</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">  /// otherwise return null.</span></div><div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="classllvm_1_1BitstreamWriter.html#a3ce3e61089382052f2ae86064c18cd47">  198</a></span>&#160;<span class="comment"></span>  BlockInfo *<a class="code" href="classllvm_1_1BitstreamWriter.html#a3ce3e61089382052f2ae86064c18cd47">getBlockInfo</a>(<span class="keywordtype">unsigned</span> BlockID) {</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="comment">// Common case, the most recent entry matches BlockID.</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">if</span> (!BlockInfoRecords.empty() &amp;&amp; BlockInfoRecords.back().BlockID == BlockID)</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      <span class="keywordflow">return</span> &amp;BlockInfoRecords.back();</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = static_cast&lt;unsigned&gt;(BlockInfoRecords.size());</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;         <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      <span class="keywordflow">if</span> (BlockInfoRecords[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].BlockID == BlockID)</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <span class="keywordflow">return</span> &amp;BlockInfoRecords[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  }</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="classllvm_1_1BitstreamWriter.html#ae6a40b4a5ea89bb8b5076c26e0d0b638">  210</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BitstreamWriter.html#ae6a40b4a5ea89bb8b5076c26e0d0b638">EnterSubblock</a>(<span class="keywordtype">unsigned</span> BlockID, <span class="keywordtype">unsigned</span> CodeLen) {</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="comment">// Block header:</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="comment">//    [ENTER_SUBBLOCK, blockid, newcodelen, &lt;align4bytes&gt;, blocklen]</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <a class="code" href="classllvm_1_1BitstreamWriter.html#a47cd6c37f5dc6cee1e2337f909452c85">EmitCode</a>(<a class="code" href="namespacellvm_1_1bitc.html#ab7a76f80792b96a4291e2d1dd1403887a8ade579114e64f6e93e5c2335d9790b3">bitc::ENTER_SUBBLOCK</a>);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <a class="code" href="classllvm_1_1BitstreamWriter.html#a9d3d121556c01aab6e6ebfc830e17dbb">EmitVBR</a>(BlockID, <a class="code" href="namespacellvm_1_1bitc.html#a9bbccfa3e710e59b93cc5a5bf8908cf9a4ae63f558586ca60ba786b672433ed5b">bitc::BlockIDWidth</a>);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <a class="code" href="classllvm_1_1BitstreamWriter.html#a9d3d121556c01aab6e6ebfc830e17dbb">EmitVBR</a>(CodeLen, <a class="code" href="namespacellvm_1_1bitc.html#a9bbccfa3e710e59b93cc5a5bf8908cf9a81e88c5ec4ef96d2e57203df2ca9c7f8">bitc::CodeLenWidth</a>);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <a class="code" href="classllvm_1_1BitstreamWriter.html#a87d4d8efe6bca7b041b0837d30add275">FlushToWord</a>();</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordtype">unsigned</span> BlockSizeWordIndex = GetWordIndex();</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordtype">unsigned</span> OldCodeSize = CurCodeSize;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="comment">// Emit a placeholder, which will be replaced when the block is popped.</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <a class="code" href="classllvm_1_1BitstreamWriter.html#a40de93ba2d72dc6bccd7a1fdde996718">Emit</a>(0, <a class="code" href="namespacellvm_1_1bitc.html#a9bbccfa3e710e59b93cc5a5bf8908cf9aa1212eb73e20141e515bcf2f6cba192b">bitc::BlockSizeWidth</a>);</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    CurCodeSize = CodeLen;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="comment">// Push the outer block&#39;s abbrev set onto the stack, start out with an</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="comment">// empty abbrev set.</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    BlockScope.push_back(Block(OldCodeSize, BlockSizeWordIndex));</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    BlockScope.back().PrevAbbrevs.swap(CurAbbrevs);</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="comment">// If there is a blockinfo for this BlockID, add all the predefined abbrevs</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="comment">// to the abbrev list.</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordflow">if</span> (BlockInfo *Info = <a class="code" href="classllvm_1_1BitstreamWriter.html#a3ce3e61089382052f2ae86064c18cd47">getBlockInfo</a>(BlockID)) {</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = static_cast&lt;unsigned&gt;(Info-&gt;Abbrevs.size());</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;           <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        CurAbbrevs.push_back(Info-&gt;Abbrevs[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        Info-&gt;Abbrevs[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;addRef();</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      }</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    }</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  }</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno"><a class="line" href="classllvm_1_1BitstreamWriter.html#a5e8488041d80c56389002659004c6af7">  242</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BitstreamWriter.html#a5e8488041d80c56389002659004c6af7">ExitBlock</a>() {</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    assert(!BlockScope.empty() &amp;&amp; <span class="stringliteral">&quot;Block scope imbalance!&quot;</span>);</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="comment">// Delete all abbrevs.</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = static_cast&lt;unsigned&gt;(CurAbbrevs.size());</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;         <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      CurAbbrevs[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;dropRef();</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keyword">const</span> Block &amp;<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> = BlockScope.back();</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="comment">// Block tail:</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="comment">//    [END_BLOCK, &lt;align4bytes&gt;]</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <a class="code" href="classllvm_1_1BitstreamWriter.html#a47cd6c37f5dc6cee1e2337f909452c85">EmitCode</a>(<a class="code" href="namespacellvm_1_1bitc.html#ab7a76f80792b96a4291e2d1dd1403887aee620990aa08180f9ede6fd5c8440620">bitc::END_BLOCK</a>);</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <a class="code" href="classllvm_1_1BitstreamWriter.html#a87d4d8efe6bca7b041b0837d30add275">FlushToWord</a>();</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="comment">// Compute the size of the block, in words, not counting the size field.</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordtype">unsigned</span> SizeInWords = GetWordIndex() - B.StartSizeWord - 1;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordtype">unsigned</span> ByteNo = B.StartSizeWord*4;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="comment">// Update the block size field in the header of this sub-block.</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    BackpatchWord(ByteNo, SizeInWords);</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="comment">// Restore the inner block&#39;s code size and abbrev table.</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    CurCodeSize = B.PrevCodeSize;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    BlockScope.back().PrevAbbrevs.swap(CurAbbrevs);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    BlockScope.pop_back();</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  }</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <span class="comment">//===--------------------------------------------------------------------===//</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="comment">// Record Emission</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="comment">//===--------------------------------------------------------------------===//</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="keyword">private</span>:<span class="comment"></span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">  /// EmitAbbreviatedLiteral - Emit a literal value according to its abbrev</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">  /// record.  This is a no-op, since the abbrev specifies the literal to use.</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment"></span>  <span class="keyword">template</span>&lt;<span class="keyword">typename</span> u<span class="keywordtype">int</span>ty&gt;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="keywordtype">void</span> EmitAbbreviatedLiteral(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BitCodeAbbrevOp.html">BitCodeAbbrevOp</a> &amp;Op, uintty V) {</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    assert(Op.<a class="code" href="classllvm_1_1BitCodeAbbrevOp.html#a5d5c28564432694dab22fa465091b75e">isLiteral</a>() &amp;&amp; <span class="stringliteral">&quot;Not a literal&quot;</span>);</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="comment">// If the abbrev specifies the literal value to use, don&#39;t emit</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="comment">// anything.</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    assert(V == Op.<a class="code" href="classllvm_1_1BitCodeAbbrevOp.html#a2a58fd349d33124e02bbee7388ffb6c7">getLiteralValue</a>() &amp;&amp;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;           <span class="stringliteral">&quot;Invalid abbrev for record!&quot;</span>);</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  }</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment">  /// EmitAbbreviatedField - Emit a single scalar field value with the specified</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">  /// encoding.</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment"></span>  <span class="keyword">template</span>&lt;<span class="keyword">typename</span> u<span class="keywordtype">int</span>ty&gt;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <span class="keywordtype">void</span> EmitAbbreviatedField(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BitCodeAbbrevOp.html">BitCodeAbbrevOp</a> &amp;Op, uintty V) {</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    assert(!Op.<a class="code" href="classllvm_1_1BitCodeAbbrevOp.html#a5d5c28564432694dab22fa465091b75e">isLiteral</a>() &amp;&amp; <span class="stringliteral">&quot;Literals should use EmitAbbreviatedLiteral!&quot;</span>);</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="comment">// Encode the value as we are commanded.</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keywordflow">switch</span> (Op.<a class="code" href="classllvm_1_1BitCodeAbbrevOp.html#a920f0c4bbbb7bc1637d56510c30e7e49">getEncoding</a>()) {</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unknown encoding!&quot;</span>);</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1BitCodeAbbrevOp.html#a8694ae7ca83441b2764d71711b17e672abfdef4054ace82e3ddb8794bc5ca471c">BitCodeAbbrevOp::Fixed</a>:</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      <span class="keywordflow">if</span> (Op.<a class="code" href="classllvm_1_1BitCodeAbbrevOp.html#a053f90fdcb25f8bf88c3c20f69ccc0f4">getEncodingData</a>())</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <a class="code" href="classllvm_1_1BitstreamWriter.html#a40de93ba2d72dc6bccd7a1fdde996718">Emit</a>((<span class="keywordtype">unsigned</span>)V, (unsigned)Op.<a class="code" href="classllvm_1_1BitCodeAbbrevOp.html#a053f90fdcb25f8bf88c3c20f69ccc0f4">getEncodingData</a>());</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1BitCodeAbbrevOp.html#a8694ae7ca83441b2764d71711b17e672ade2457e8051855ad2911d62202458e20">BitCodeAbbrevOp::VBR</a>:</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      <span class="keywordflow">if</span> (Op.<a class="code" href="classllvm_1_1BitCodeAbbrevOp.html#a053f90fdcb25f8bf88c3c20f69ccc0f4">getEncodingData</a>())</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <a class="code" href="classllvm_1_1BitstreamWriter.html#a765ce2a472e2eedad6b7ed02b6674a00">EmitVBR64</a>(V, (<span class="keywordtype">unsigned</span>)Op.<a class="code" href="classllvm_1_1BitCodeAbbrevOp.html#a053f90fdcb25f8bf88c3c20f69ccc0f4">getEncodingData</a>());</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1BitCodeAbbrevOp.html#a8694ae7ca83441b2764d71711b17e672a5a7811cd25e6ed838a03c49776237b4a">BitCodeAbbrevOp::Char6</a>:</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      <a class="code" href="classllvm_1_1BitstreamWriter.html#a40de93ba2d72dc6bccd7a1fdde996718">Emit</a>(<a class="code" href="classllvm_1_1BitCodeAbbrevOp.html#a237f73b4bae0fb3a40d99a65a77c3f27">BitCodeAbbrevOp::EncodeChar6</a>((<span class="keywordtype">char</span>)V), 6);</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    }</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  }</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment">  /// EmitRecordWithAbbrevImpl - This is the core implementation of the record</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment">  /// emission code.  If BlobData is non-null, then it specifies an array of</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="comment">  /// data that should be emitted as part of the Blob or Array operand that is</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment">  /// known to exist at the end of the record.</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment"></span>  <span class="keyword">template</span>&lt;<span class="keyword">typename</span> u<span class="keywordtype">int</span>ty&gt;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <span class="keywordtype">void</span> EmitRecordWithAbbrevImpl(<span class="keywordtype">unsigned</span> Abbrev, <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;uintty&gt;</a> &amp;Vals,</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                                <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> Blob) {</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *BlobData = Blob.<a class="code" href="classllvm_1_1StringRef.html#a7d9b88d042ae1da8afd5509875c90a04">data</a>();</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordtype">unsigned</span> BlobLen = (unsigned) Blob.<a class="code" href="classllvm_1_1StringRef.html#af68d5ebdb576d7481ea2766151b875d4">size</a>();</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keywordtype">unsigned</span> AbbrevNo = Abbrev-<a class="code" href="namespacellvm_1_1bitc.html#ab7a76f80792b96a4291e2d1dd1403887a81e1f263b022b7989aa71fb623b62be8">bitc::FIRST_APPLICATION_ABBREV</a>;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    assert(AbbrevNo &lt; CurAbbrevs.size() &amp;&amp; <span class="stringliteral">&quot;Invalid abbrev #!&quot;</span>);</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <a class="code" href="classllvm_1_1BitCodeAbbrev.html">BitCodeAbbrev</a> *Abbv = CurAbbrevs[AbbrevNo];</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <a class="code" href="classllvm_1_1BitstreamWriter.html#a47cd6c37f5dc6cee1e2337f909452c85">EmitCode</a>(Abbrev);</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordtype">unsigned</span> RecordIdx = 0;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = static_cast&lt;unsigned&gt;(Abbv-&gt;getNumOperandInfos());</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;         <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1BitCodeAbbrevOp.html">BitCodeAbbrevOp</a> &amp;Op = Abbv-&gt;getOperandInfo(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      <span class="keywordflow">if</span> (Op.<a class="code" href="classllvm_1_1BitCodeAbbrevOp.html#a5d5c28564432694dab22fa465091b75e">isLiteral</a>()) {</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        assert(RecordIdx &lt; Vals.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>() &amp;&amp; <span class="stringliteral">&quot;Invalid abbrev/record&quot;</span>);</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        EmitAbbreviatedLiteral(Op, Vals[RecordIdx]);</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        ++RecordIdx;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Op.<a class="code" href="classllvm_1_1BitCodeAbbrevOp.html#a920f0c4bbbb7bc1637d56510c30e7e49">getEncoding</a>() == <a class="code" href="classllvm_1_1BitCodeAbbrevOp.html#a8694ae7ca83441b2764d71711b17e672ac45cef5b964b589fb0741ccc577eaf2c">BitCodeAbbrevOp::Array</a>) {</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        <span class="comment">// Array case.</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        assert(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>+2 == e &amp;&amp; <span class="stringliteral">&quot;array op not second to last?&quot;</span>);</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1BitCodeAbbrevOp.html">BitCodeAbbrevOp</a> &amp;EltEnc = Abbv-&gt;getOperandInfo(++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <span class="comment">// If this record has blob data, emit it, otherwise we must have record</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <span class="comment">// entries to encode this way.</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <span class="keywordflow">if</span> (BlobData) {</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;          assert(RecordIdx == Vals.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>() &amp;&amp;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                 <span class="stringliteral">&quot;Blob data and record entries specified for array!&quot;</span>);</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;          <span class="comment">// Emit a vbr6 to indicate the number of elements present.</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;          <a class="code" href="classllvm_1_1BitstreamWriter.html#a9d3d121556c01aab6e6ebfc830e17dbb">EmitVBR</a>(static_cast&lt;uint32_t&gt;(BlobLen), 6);</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;          <span class="comment">// Emit each field.</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != BlobLen; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            EmitAbbreviatedField(EltEnc, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)BlobData[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;          <span class="comment">// Know that blob data is consumed for assertion below.</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;          BlobData = 0;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;          <span class="comment">// Emit a vbr6 to indicate the number of elements present.</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;          <a class="code" href="classllvm_1_1BitstreamWriter.html#a9d3d121556c01aab6e6ebfc830e17dbb">EmitVBR</a>(static_cast&lt;uint32_t&gt;(Vals.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>()-RecordIdx), 6);</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;          <span class="comment">// Emit each field.</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> e = Vals.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); RecordIdx != e; ++RecordIdx)</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            EmitAbbreviatedField(EltEnc, Vals[RecordIdx]);</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        }</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Op.<a class="code" href="classllvm_1_1BitCodeAbbrevOp.html#a920f0c4bbbb7bc1637d56510c30e7e49">getEncoding</a>() == <a class="code" href="classllvm_1_1BitCodeAbbrevOp.html#a8694ae7ca83441b2764d71711b17e672a35cc66c7fc730d5572ae851efc3f3f47">BitCodeAbbrevOp::Blob</a>) {</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="comment">// If this record has blob data, emit it, otherwise we must have record</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="comment">// entries to encode this way.</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="comment">// Emit a vbr6 to indicate the number of elements present.</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <span class="keywordflow">if</span> (BlobData) {</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;          <a class="code" href="classllvm_1_1BitstreamWriter.html#a9d3d121556c01aab6e6ebfc830e17dbb">EmitVBR</a>(static_cast&lt;uint32_t&gt;(BlobLen), 6);</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;          assert(RecordIdx == Vals.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>() &amp;&amp;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                 <span class="stringliteral">&quot;Blob data and record entries specified for blob operand!&quot;</span>);</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;          <a class="code" href="classllvm_1_1BitstreamWriter.html#a9d3d121556c01aab6e6ebfc830e17dbb">EmitVBR</a>(static_cast&lt;uint32_t&gt;(Vals.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>()-RecordIdx), 6);</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        }</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <span class="comment">// Flush to a 32-bit alignment boundary.</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <a class="code" href="classllvm_1_1BitstreamWriter.html#a87d4d8efe6bca7b041b0837d30add275">FlushToWord</a>();</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <span class="comment">// Emit each field as a literal byte.</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        <span class="keywordflow">if</span> (BlobData) {</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != BlobLen; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;            WriteByte((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)BlobData[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;          <span class="comment">// Know that blob data is consumed for assertion below.</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;          BlobData = 0;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> e = Vals.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); RecordIdx != e; ++RecordIdx) {</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            assert(<a class="code" href="namespacellvm.html#ab3ea036c15f549e54d0013ea3e3f3424">isUInt&lt;8&gt;</a>(Vals[RecordIdx]) &amp;&amp;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                   <span class="stringliteral">&quot;Value too large to emit as blob&quot;</span>);</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            WriteByte((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)Vals[RecordIdx]);</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;          }</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        }</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <span class="comment">// Align end to 32-bits.</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        <span class="keywordflow">while</span> (GetBufferOffset() &amp; 3)</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;          WriteByte(0);</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      } <span class="keywordflow">else</span> {  <span class="comment">// Single scalar field.</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        assert(RecordIdx &lt; Vals.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>() &amp;&amp; <span class="stringliteral">&quot;Invalid abbrev/record&quot;</span>);</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        EmitAbbreviatedField(Op, Vals[RecordIdx]);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        ++RecordIdx;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      }</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    }</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    assert(RecordIdx == Vals.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>() &amp;&amp; <span class="stringliteral">&quot;Not all record operands emitted!&quot;</span>);</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    assert(BlobData == 0 &amp;&amp;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;           <span class="stringliteral">&quot;Blob data specified for record that doesn&#39;t use it!&quot;</span>);</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  }</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment">  /// EmitRecord - Emit the specified record to the stream, using an abbrev if</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment">  /// we have one to compress the output.</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment"></span>  <span class="keyword">template</span>&lt;<span class="keyword">typename</span> u<span class="keywordtype">int</span>ty&gt;</div><div class="line"><a name="l00409"></a><span class="lineno"><a class="line" href="classllvm_1_1BitstreamWriter.html#ac126e2b5603a11145477eba958d4b2ea">  409</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BitstreamWriter.html#ac126e2b5603a11145477eba958d4b2ea">EmitRecord</a>(<span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a4a6621856674f376740a1ba6efd809e3">Code</a>, <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;uintty&gt;</a> &amp;Vals,</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                  <span class="keywordtype">unsigned</span> Abbrev = 0) {</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="keywordflow">if</span> (!Abbrev) {</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      <span class="comment">// If we don&#39;t have an abbrev to use, emit this in its fully unabbreviated</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;      <span class="comment">// form.</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      <a class="code" href="classllvm_1_1BitstreamWriter.html#a47cd6c37f5dc6cee1e2337f909452c85">EmitCode</a>(<a class="code" href="namespacellvm_1_1bitc.html#ab7a76f80792b96a4291e2d1dd1403887a5436567dadf1048914764efde6bcc891">bitc::UNABBREV_RECORD</a>);</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      <a class="code" href="classllvm_1_1BitstreamWriter.html#a9d3d121556c01aab6e6ebfc830e17dbb">EmitVBR</a>(Code, 6);</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      <a class="code" href="classllvm_1_1BitstreamWriter.html#a9d3d121556c01aab6e6ebfc830e17dbb">EmitVBR</a>(static_cast&lt;uint32_t&gt;(Vals.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>()), 6);</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = static_cast&lt;unsigned&gt;(Vals.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>()); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <a class="code" href="classllvm_1_1BitstreamWriter.html#a765ce2a472e2eedad6b7ed02b6674a00">EmitVBR64</a>(Vals[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], 6);</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    }</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="comment">// Insert the code into Vals to treat it uniformly.</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    Vals.<a class="code" href="classllvm_1_1SmallVectorImpl.html#af622128e353515efebccad40eae495cb">insert</a>(Vals.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a4a6621856674f376740a1ba6efd809e3">Code</a>);</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <a class="code" href="classllvm_1_1BitstreamWriter.html#a797aeff9500ed5150f5c70779b9699f6">EmitRecordWithAbbrev</a>(Abbrev, Vals);</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  }</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment">  /// EmitRecordWithAbbrev - Emit a record with the specified abbreviation.</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment">  /// Unlike EmitRecord, the code for the record should be included in Vals as</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment">  /// the first entry.</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment"></span>  <span class="keyword">template</span>&lt;<span class="keyword">typename</span> u<span class="keywordtype">int</span>ty&gt;</div><div class="line"><a name="l00432"></a><span class="lineno"><a class="line" href="classllvm_1_1BitstreamWriter.html#a797aeff9500ed5150f5c70779b9699f6">  432</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BitstreamWriter.html#a797aeff9500ed5150f5c70779b9699f6">EmitRecordWithAbbrev</a>(<span class="keywordtype">unsigned</span> Abbrev, <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;uintty&gt;</a> &amp;Vals) {</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    EmitRecordWithAbbrevImpl(Abbrev, Vals, <a class="code" href="classllvm_1_1StringRef.html">StringRef</a>());</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  }</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment">  /// EmitRecordWithBlob - Emit the specified record to the stream, using an</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment">  /// abbrev that includes a blob at the end.  The blob data to emit is</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment">  /// specified by the pointer and length specified at the end.  In contrast to</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="comment">  /// EmitRecord, this routine expects that the first entry in Vals is the code</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment">  /// of the record.</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="comment"></span>  <span class="keyword">template</span>&lt;<span class="keyword">typename</span> u<span class="keywordtype">int</span>ty&gt;</div><div class="line"><a name="l00442"></a><span class="lineno"><a class="line" href="classllvm_1_1BitstreamWriter.html#ab61bd421a8f911229a616a4bd5a7c9b9">  442</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BitstreamWriter.html#ab61bd421a8f911229a616a4bd5a7c9b9">EmitRecordWithBlob</a>(<span class="keywordtype">unsigned</span> Abbrev, <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;uintty&gt;</a> &amp;Vals,</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                          <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> Blob) {</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    EmitRecordWithAbbrevImpl(Abbrev, Vals, Blob);</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  }</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <span class="keyword">template</span>&lt;<span class="keyword">typename</span> u<span class="keywordtype">int</span>ty&gt;</div><div class="line"><a name="l00447"></a><span class="lineno"><a class="line" href="classllvm_1_1BitstreamWriter.html#a679c8ef07f474d8b145e88fbc1a42ec7">  447</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BitstreamWriter.html#a679c8ef07f474d8b145e88fbc1a42ec7">EmitRecordWithBlob</a>(<span class="keywordtype">unsigned</span> Abbrev, <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;uintty&gt;</a> &amp;Vals,</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                          <span class="keyword">const</span> <span class="keywordtype">char</span> *BlobData, <span class="keywordtype">unsigned</span> BlobLen) {</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="keywordflow">return</span> EmitRecordWithAbbrevImpl(Abbrev, Vals, <a class="code" href="classllvm_1_1StringRef.html">StringRef</a>(BlobData, BlobLen));</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  }</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment">  /// EmitRecordWithArray - Just like EmitRecordWithBlob, works with records</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="comment">  /// that end with an array.</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="comment"></span>  <span class="keyword">template</span>&lt;<span class="keyword">typename</span> u<span class="keywordtype">int</span>ty&gt;</div><div class="line"><a name="l00455"></a><span class="lineno"><a class="line" href="classllvm_1_1BitstreamWriter.html#a267d0c404c31d82ee63debd5548cee16">  455</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BitstreamWriter.html#a267d0c404c31d82ee63debd5548cee16">EmitRecordWithArray</a>(<span class="keywordtype">unsigned</span> Abbrev, <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;uintty&gt;</a> &amp;Vals,</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                          <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> Array) {</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    EmitRecordWithAbbrevImpl(Abbrev, Vals, Array);</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  }</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <span class="keyword">template</span>&lt;<span class="keyword">typename</span> u<span class="keywordtype">int</span>ty&gt;</div><div class="line"><a name="l00460"></a><span class="lineno"><a class="line" href="classllvm_1_1BitstreamWriter.html#ae9a93909b6b2add55ade8a3de2628415">  460</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BitstreamWriter.html#ae9a93909b6b2add55ade8a3de2628415">EmitRecordWithArray</a>(<span class="keywordtype">unsigned</span> Abbrev, <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;uintty&gt;</a> &amp;Vals,</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                          <span class="keyword">const</span> <span class="keywordtype">char</span> *ArrayData, <span class="keywordtype">unsigned</span> ArrayLen) {</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keywordflow">return</span> EmitRecordWithAbbrevImpl(Abbrev, Vals, <a class="code" href="classllvm_1_1StringRef.html">StringRef</a>(ArrayData,</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                                                            ArrayLen));</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  }</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  <span class="comment">//===--------------------------------------------------------------------===//</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <span class="comment">// Abbrev Emission</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  <span class="comment">//===--------------------------------------------------------------------===//</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  <span class="comment">// Emit the abbreviation as a DEFINE_ABBREV record.</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  <span class="keywordtype">void</span> EncodeAbbrev(<a class="code" href="classllvm_1_1BitCodeAbbrev.html">BitCodeAbbrev</a> *Abbv) {</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <a class="code" href="classllvm_1_1BitstreamWriter.html#a47cd6c37f5dc6cee1e2337f909452c85">EmitCode</a>(<a class="code" href="namespacellvm_1_1bitc.html#ab7a76f80792b96a4291e2d1dd1403887a0353c03d98b211f15e10bad35397bf8d">bitc::DEFINE_ABBREV</a>);</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <a class="code" href="classllvm_1_1BitstreamWriter.html#a9d3d121556c01aab6e6ebfc830e17dbb">EmitVBR</a>(Abbv-&gt;<a class="code" href="classllvm_1_1BitCodeAbbrev.html#abf3fecb0c9c194f1e92fe9cb547d3000">getNumOperandInfos</a>(), 5);</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = static_cast&lt;unsigned&gt;(Abbv-&gt;<a class="code" href="classllvm_1_1BitCodeAbbrev.html#abf3fecb0c9c194f1e92fe9cb547d3000">getNumOperandInfos</a>());</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;         <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1BitCodeAbbrevOp.html">BitCodeAbbrevOp</a> &amp;Op = Abbv-&gt;<a class="code" href="classllvm_1_1BitCodeAbbrev.html#a6fd784573b5f32bc6fb77d6655ecca70">getOperandInfo</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      <a class="code" href="classllvm_1_1BitstreamWriter.html#a40de93ba2d72dc6bccd7a1fdde996718">Emit</a>(Op.<a class="code" href="classllvm_1_1BitCodeAbbrevOp.html#a5d5c28564432694dab22fa465091b75e">isLiteral</a>(), 1);</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      <span class="keywordflow">if</span> (Op.<a class="code" href="classllvm_1_1BitCodeAbbrevOp.html#a5d5c28564432694dab22fa465091b75e">isLiteral</a>()) {</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <a class="code" href="classllvm_1_1BitstreamWriter.html#a765ce2a472e2eedad6b7ed02b6674a00">EmitVBR64</a>(Op.<a class="code" href="classllvm_1_1BitCodeAbbrevOp.html#a2a58fd349d33124e02bbee7388ffb6c7">getLiteralValue</a>(), 8);</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <a class="code" href="classllvm_1_1BitstreamWriter.html#a40de93ba2d72dc6bccd7a1fdde996718">Emit</a>(Op.<a class="code" href="classllvm_1_1BitCodeAbbrevOp.html#a920f0c4bbbb7bc1637d56510c30e7e49">getEncoding</a>(), 3);</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        <span class="keywordflow">if</span> (Op.<a class="code" href="classllvm_1_1BitCodeAbbrevOp.html#ac60d64eeb8126d4e28a35b8e6f06073b">hasEncodingData</a>())</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;          <a class="code" href="classllvm_1_1BitstreamWriter.html#a765ce2a472e2eedad6b7ed02b6674a00">EmitVBR64</a>(Op.<a class="code" href="classllvm_1_1BitCodeAbbrevOp.html#a053f90fdcb25f8bf88c3c20f69ccc0f4">getEncodingData</a>(), 5);</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      }</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    }</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  }</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment">  /// EmitAbbrev - This emits an abbreviation to the stream.  Note that this</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="comment">  /// method takes ownership of the specified abbrev.</span></div><div class="line"><a name="l00492"></a><span class="lineno"><a class="line" href="classllvm_1_1BitstreamWriter.html#ab455eb75b8b1bfa7990f9a7d0e5ff419">  492</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">unsigned</span> <a class="code" href="classllvm_1_1BitstreamWriter.html#ab455eb75b8b1bfa7990f9a7d0e5ff419">EmitAbbrev</a>(<a class="code" href="classllvm_1_1BitCodeAbbrev.html">BitCodeAbbrev</a> *Abbv) {</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="comment">// Emit the abbreviation as a record.</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    EncodeAbbrev(Abbv);</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    CurAbbrevs.push_back(Abbv);</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span><span class="keyword">&gt;</span>(CurAbbrevs.size())-1 +</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;      <a class="code" href="namespacellvm_1_1bitc.html#ab7a76f80792b96a4291e2d1dd1403887a81e1f263b022b7989aa71fb623b62be8">bitc::FIRST_APPLICATION_ABBREV</a>;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  }</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <span class="comment">//===--------------------------------------------------------------------===//</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <span class="comment">// BlockInfo Block Emission</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  <span class="comment">//===--------------------------------------------------------------------===//</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="comment">  /// EnterBlockInfoBlock - Start emitting the BLOCKINFO_BLOCK.</span></div><div class="line"><a name="l00505"></a><span class="lineno"><a class="line" href="classllvm_1_1BitstreamWriter.html#a084e8d7d50c3c6c0f00c995f2ac02967">  505</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1BitstreamWriter.html#a084e8d7d50c3c6c0f00c995f2ac02967">EnterBlockInfoBlock</a>(<span class="keywordtype">unsigned</span> CodeWidth) {</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <a class="code" href="classllvm_1_1BitstreamWriter.html#ae6a40b4a5ea89bb8b5076c26e0d0b638">EnterSubblock</a>(<a class="code" href="namespacellvm_1_1bitc.html#a8cd4dd534ba6c31e93a88ca286c4f0e5a9c269366c4dc4af235c9bb24fa46f915">bitc::BLOCKINFO_BLOCK_ID</a>, CodeWidth);</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    BlockInfoCurBID = ~0U;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  }</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="keyword">private</span>:<span class="comment"></span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment">  /// SwitchToBlockID - If we aren&#39;t already talking about the specified block</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment">  /// ID, emit a BLOCKINFO_CODE_SETBID record.</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> SwitchToBlockID(<span class="keywordtype">unsigned</span> BlockID) {</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="keywordflow">if</span> (BlockInfoCurBID == BlockID) <span class="keywordflow">return</span>;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 2&gt;</a> V;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    V.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(BlockID);</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <a class="code" href="classllvm_1_1BitstreamWriter.html#ac126e2b5603a11145477eba958d4b2ea">EmitRecord</a>(<a class="code" href="namespacellvm_1_1bitc.html#a6860684558cab9835254eba26b2f7963acf72b4b5b2c1c5b1310721a6715ab010">bitc::BLOCKINFO_CODE_SETBID</a>, V);</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    BlockInfoCurBID = BlockID;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  }</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  BlockInfo &amp;getOrCreateBlockInfo(<span class="keywordtype">unsigned</span> BlockID) {</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="keywordflow">if</span> (BlockInfo *BI = <a class="code" href="classllvm_1_1BitstreamWriter.html#a3ce3e61089382052f2ae86064c18cd47">getBlockInfo</a>(BlockID))</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;      <span class="keywordflow">return</span> *BI;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="comment">// Otherwise, add a new record.</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    BlockInfoRecords.push_back(BlockInfo());</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    BlockInfoRecords.back().BlockID = BlockID;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="keywordflow">return</span> BlockInfoRecords.back();</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  }</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment">  /// EmitBlockInfoAbbrev - Emit a DEFINE_ABBREV record for the specified</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment">  /// BlockID.</span></div><div class="line"><a name="l00534"></a><span class="lineno"><a class="line" href="classllvm_1_1BitstreamWriter.html#a69309a15f7cbd470e7680328af5a2f78">  534</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">unsigned</span> <a class="code" href="classllvm_1_1BitstreamWriter.html#a69309a15f7cbd470e7680328af5a2f78">EmitBlockInfoAbbrev</a>(<span class="keywordtype">unsigned</span> BlockID, <a class="code" href="classllvm_1_1BitCodeAbbrev.html">BitCodeAbbrev</a> *Abbv) {</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    SwitchToBlockID(BlockID);</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    EncodeAbbrev(Abbv);</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="comment">// Add the abbrev to the specified block record.</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    BlockInfo &amp;Info = getOrCreateBlockInfo(BlockID);</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    Info.Abbrevs.push_back(Abbv);</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keywordflow">return</span> Info.Abbrevs.size()-1+<a class="code" href="namespacellvm_1_1bitc.html#ab7a76f80792b96a4291e2d1dd1403887a81e1f263b022b7989aa71fb623b62be8">bitc::FIRST_APPLICATION_ABBREV</a>;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  }</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;};</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;} <span class="comment">// End llvm namespace</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="preprocessor">#endif</span></div><div class="ttc" id="namespacellvm_html_ab3ea036c15f549e54d0013ea3e3f3424"><div class="ttname"><a href="namespacellvm.html#ab3ea036c15f549e54d0013ea3e3f3424">llvm::isUInt&lt; 8 &gt;</a></div><div class="ttdeci">bool isUInt&lt; 8 &gt;(uint64_t x)</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00294">MathExtras.h:294</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon::size</a></div><div class="ttdeci">size_type size() const </div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00127">SmallVector.h:127</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00236">SmallVector.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1BitstreamWriter_html_ae9a93909b6b2add55ade8a3de2628415"><div class="ttname"><a href="classllvm_1_1BitstreamWriter.html#ae9a93909b6b2add55ade8a3de2628415">llvm::BitstreamWriter::EmitRecordWithArray</a></div><div class="ttdeci">void EmitRecordWithArray(unsigned Abbrev, SmallVectorImpl&lt; uintty &gt; &amp;Vals, const char *ArrayData, unsigned ArrayLen)</div><div class="ttdef"><b>Definition:</b> <a href="BitstreamWriter_8h_source.html#l00460">BitstreamWriter.h:460</a></div></div>
<div class="ttc" id="namespacellvm_1_1bitc_html_a8cd4dd534ba6c31e93a88ca286c4f0e5a9c269366c4dc4af235c9bb24fa46f915"><div class="ttname"><a href="namespacellvm_1_1bitc.html#a8cd4dd534ba6c31e93a88ca286c4f0e5a9c269366c4dc4af235c9bb24fa46f915">llvm::bitc::BLOCKINFO_BLOCK_ID</a></div><div class="ttdef"><b>Definition:</b> <a href="BitCodes_8h_source.html#l00061">BitCodes.h:61</a></div></div>
<div class="ttc" id="namespacellvm_1_1bitc_html_ab7a76f80792b96a4291e2d1dd1403887a8ade579114e64f6e93e5c2335d9790b3"><div class="ttname"><a href="namespacellvm_1_1bitc.html#ab7a76f80792b96a4291e2d1dd1403887a8ade579114e64f6e93e5c2335d9790b3">llvm::bitc::ENTER_SUBBLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="BitCodes_8h_source.html#l00038">BitCodes.h:38</a></div></div>
<div class="ttc" id="classllvm_1_1StringRef_html_af68d5ebdb576d7481ea2766151b875d4"><div class="ttname"><a href="classllvm_1_1StringRef.html#af68d5ebdb576d7481ea2766151b875d4">llvm::StringRef::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdoc">size - Get the string size. </div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00113">StringRef.h:113</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="classllvm_1_1BitCodeAbbrev_html"><div class="ttname"><a href="classllvm_1_1BitCodeAbbrev.html">llvm::BitCodeAbbrev</a></div><div class="ttdef"><b>Definition:</b> <a href="BitCodes_8h_source.html#l00164">BitCodes.h:164</a></div></div>
<div class="ttc" id="classllvm_1_1BitstreamWriter_html"><div class="ttname"><a href="classllvm_1_1BitstreamWriter.html">llvm::BitstreamWriter</a></div><div class="ttdef"><b>Definition:</b> <a href="BitstreamWriter_8h_source.html#l00025">BitstreamWriter.h:25</a></div></div>
<div class="ttc" id="classllvm_1_1BitCodeAbbrev_html_a6fd784573b5f32bc6fb77d6655ecca70"><div class="ttname"><a href="classllvm_1_1BitCodeAbbrev.html#a6fd784573b5f32bc6fb77d6655ecca70">llvm::BitCodeAbbrev::getOperandInfo</a></div><div class="ttdeci">const BitCodeAbbrevOp &amp; getOperandInfo(unsigned N) const </div><div class="ttdef"><b>Definition:</b> <a href="BitCodes_8h_source.html#l00177">BitCodes.h:177</a></div></div>
<div class="ttc" id="classllvm_1_1BitstreamWriter_html_a87d4d8efe6bca7b041b0837d30add275"><div class="ttname"><a href="classllvm_1_1BitstreamWriter.html#a87d4d8efe6bca7b041b0837d30add275">llvm::BitstreamWriter::FlushToWord</a></div><div class="ttdeci">void FlushToWord()</div><div class="ttdef"><b>Definition:</b> <a href="BitstreamWriter_8h_source.html#l00149">BitstreamWriter.h:149</a></div></div>
<div class="ttc" id="classllvm_1_1BitCodeAbbrevOp_html_a8694ae7ca83441b2764d71711b17e672a35cc66c7fc730d5572ae851efc3f3f47"><div class="ttname"><a href="classllvm_1_1BitCodeAbbrevOp.html#a8694ae7ca83441b2764d71711b17e672a35cc66c7fc730d5572ae851efc3f3f47">llvm::BitCodeAbbrevOp::Blob</a></div><div class="ttdef"><b>Definition:</b> <a href="BitCodes_8h_source.html#l00096">BitCodes.h:96</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_af622128e353515efebccad40eae495cb"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#af622128e353515efebccad40eae495cb">llvm::SmallVectorImpl::insert</a></div><div class="ttdeci">iterator insert(iterator I, const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00537">SmallVector.h:537</a></div></div>
<div class="ttc" id="namespacellvm_1_1bitc_html_ab7a76f80792b96a4291e2d1dd1403887a5436567dadf1048914764efde6bcc891"><div class="ttname"><a href="namespacellvm_1_1bitc.html#ab7a76f80792b96a4291e2d1dd1403887a5436567dadf1048914764efde6bcc891">llvm::bitc::UNABBREV_RECORD</a></div><div class="ttdef"><b>Definition:</b> <a href="BitCodes_8h_source.html#l00049">BitCodes.h:49</a></div></div>
<div class="ttc" id="classllvm_1_1BitstreamWriter_html_ac126e2b5603a11145477eba958d4b2ea"><div class="ttname"><a href="classllvm_1_1BitstreamWriter.html#ac126e2b5603a11145477eba958d4b2ea">llvm::BitstreamWriter::EmitRecord</a></div><div class="ttdeci">void EmitRecord(unsigned Code, SmallVectorImpl&lt; uintty &gt; &amp;Vals, unsigned Abbrev=0)</div><div class="ttdef"><b>Definition:</b> <a href="BitstreamWriter_8h_source.html#l00409">BitstreamWriter.h:409</a></div></div>
<div class="ttc" id="classllvm_1_1BitCodeAbbrevOp_html_a237f73b4bae0fb3a40d99a65a77c3f27"><div class="ttname"><a href="classllvm_1_1BitCodeAbbrevOp.html#a237f73b4bae0fb3a40d99a65a77c3f27">llvm::BitCodeAbbrevOp::EncodeChar6</a></div><div class="ttdeci">static unsigned EncodeChar6(char C)</div><div class="ttdef"><b>Definition:</b> <a href="BitCodes_8h_source.html#l00138">BitCodes.h:138</a></div></div>
<div class="ttc" id="classllvm_1_1BitstreamWriter_html_aa07c00a7962ca91ebe291fe108905dd9"><div class="ttname"><a href="classllvm_1_1BitstreamWriter.html#aa07c00a7962ca91ebe291fe108905dd9">llvm::BitstreamWriter::GetCurrentBitNo</a></div><div class="ttdeci">uint64_t GetCurrentBitNo() const </div><div class="ttdoc">Retrieve the current position in the stream, in bits. </div><div class="ttdef"><b>Definition:</b> <a href="BitstreamWriter_8h_source.html#l00115">BitstreamWriter.h:115</a></div></div>
<div class="ttc" id="classllvm_1_1BitstreamWriter_html_a084e8d7d50c3c6c0f00c995f2ac02967"><div class="ttname"><a href="classllvm_1_1BitstreamWriter.html#a084e8d7d50c3c6c0f00c995f2ac02967">llvm::BitstreamWriter::EnterBlockInfoBlock</a></div><div class="ttdeci">void EnterBlockInfoBlock(unsigned CodeWidth)</div><div class="ttdoc">EnterBlockInfoBlock - Start emitting the BLOCKINFO_BLOCK. </div><div class="ttdef"><b>Definition:</b> <a href="BitstreamWriter_8h_source.html#l00505">BitstreamWriter.h:505</a></div></div>
<div class="ttc" id="ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdef"><b>Definition:</b> <a href="ErrorHandling_8h_source.html#l00103">ErrorHandling.h:103</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl&lt; char &gt;</a></div></div>
<div class="ttc" id="classllvm_1_1BitstreamWriter_html_a40de93ba2d72dc6bccd7a1fdde996718"><div class="ttname"><a href="classllvm_1_1BitstreamWriter.html#a40de93ba2d72dc6bccd7a1fdde996718">llvm::BitstreamWriter::Emit</a></div><div class="ttdeci">void Emit(uint32_t Val, unsigned NumBits)</div><div class="ttdef"><b>Definition:</b> <a href="BitstreamWriter_8h_source.html#l00121">BitstreamWriter.h:121</a></div></div>
<div class="ttc" id="namespacellvm_1_1bitc_html_a9bbccfa3e710e59b93cc5a5bf8908cf9aa1212eb73e20141e515bcf2f6cba192b"><div class="ttname"><a href="namespacellvm_1_1bitc.html#a9bbccfa3e710e59b93cc5a5bf8908cf9aa1212eb73e20141e515bcf2f6cba192b">llvm::bitc::BlockSizeWidth</a></div><div class="ttdef"><b>Definition:</b> <a href="BitCodes_8h_source.html#l00031">BitCodes.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1BitCodeAbbrevOp_html_a053f90fdcb25f8bf88c3c20f69ccc0f4"><div class="ttname"><a href="classllvm_1_1BitCodeAbbrevOp.html#a053f90fdcb25f8bf88c3c20f69ccc0f4">llvm::BitCodeAbbrevOp::getEncodingData</a></div><div class="ttdeci">uint64_t getEncodingData() const </div><div class="ttdef"><b>Definition:</b> <a href="BitCodes_8h_source.html#l00111">BitCodes.h:111</a></div></div>
<div class="ttc" id="namespacellvm_1_1bitc_html_a9bbccfa3e710e59b93cc5a5bf8908cf9a81e88c5ec4ef96d2e57203df2ca9c7f8"><div class="ttname"><a href="namespacellvm_1_1bitc.html#a9bbccfa3e710e59b93cc5a5bf8908cf9a81e88c5ec4ef96d2e57203df2ca9c7f8">llvm::bitc::CodeLenWidth</a></div><div class="ttdef"><b>Definition:</b> <a href="BitCodes_8h_source.html#l00030">BitCodes.h:30</a></div></div>
<div class="ttc" id="classllvm_1_1StringRef_html_a7d9b88d042ae1da8afd5509875c90a04"><div class="ttname"><a href="classllvm_1_1StringRef.html#a7d9b88d042ae1da8afd5509875c90a04">llvm::StringRef::data</a></div><div class="ttdeci">const char * data() const </div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00107">StringRef.h:107</a></div></div>
<div class="ttc" id="classllvm_1_1BitCodeAbbrevOp_html_a8694ae7ca83441b2764d71711b17e672a5a7811cd25e6ed838a03c49776237b4a"><div class="ttname"><a href="classllvm_1_1BitCodeAbbrevOp.html#a8694ae7ca83441b2764d71711b17e672a5a7811cd25e6ed838a03c49776237b4a">llvm::BitCodeAbbrevOp::Char6</a></div><div class="ttdef"><b>Definition:</b> <a href="BitCodes_8h_source.html#l00095">BitCodes.h:95</a></div></div>
<div class="ttc" id="classllvm_1_1BitstreamWriter_html_a267d0c404c31d82ee63debd5548cee16"><div class="ttname"><a href="classllvm_1_1BitstreamWriter.html#a267d0c404c31d82ee63debd5548cee16">llvm::BitstreamWriter::EmitRecordWithArray</a></div><div class="ttdeci">void EmitRecordWithArray(unsigned Abbrev, SmallVectorImpl&lt; uintty &gt; &amp;Vals, StringRef Array)</div><div class="ttdef"><b>Definition:</b> <a href="BitstreamWriter_8h_source.html#l00455">BitstreamWriter.h:455</a></div></div>
<div class="ttc" id="classllvm_1_1BitCodeAbbrevOp_html_a5d5c28564432694dab22fa465091b75e"><div class="ttname"><a href="classllvm_1_1BitCodeAbbrevOp.html#a5d5c28564432694dab22fa465091b75e">llvm::BitCodeAbbrevOp::isLiteral</a></div><div class="ttdeci">bool isLiteral() const </div><div class="ttdef"><b>Definition:</b> <a href="BitCodes_8h_source.html#l00103">BitCodes.h:103</a></div></div>
<div class="ttc" id="classllvm_1_1BitstreamWriter_html_ae6a40b4a5ea89bb8b5076c26e0d0b638"><div class="ttname"><a href="classllvm_1_1BitstreamWriter.html#ae6a40b4a5ea89bb8b5076c26e0d0b638">llvm::BitstreamWriter::EnterSubblock</a></div><div class="ttdeci">void EnterSubblock(unsigned BlockID, unsigned CodeLen)</div><div class="ttdef"><b>Definition:</b> <a href="BitstreamWriter_8h_source.html#l00210">BitstreamWriter.h:210</a></div></div>
<div class="ttc" id="classllvm_1_1BitCodeAbbrevOp_html_ac60d64eeb8126d4e28a35b8e6f06073b"><div class="ttname"><a href="classllvm_1_1BitCodeAbbrevOp.html#ac60d64eeb8126d4e28a35b8e6f06073b">llvm::BitCodeAbbrevOp::hasEncodingData</a></div><div class="ttdeci">bool hasEncodingData() const </div><div class="ttdef"><b>Definition:</b> <a href="BitCodes_8h_source.html#l00116">BitCodes.h:116</a></div></div>
<div class="ttc" id="classllvm_1_1BitstreamWriter_html_a47cd6c37f5dc6cee1e2337f909452c85"><div class="ttname"><a href="classllvm_1_1BitstreamWriter.html#a47cd6c37f5dc6cee1e2337f909452c85">llvm::BitstreamWriter::EmitCode</a></div><div class="ttdeci">void EmitCode(unsigned Val)</div><div class="ttdoc">EmitCode - Emit the specified code. </div><div class="ttdef"><b>Definition:</b> <a href="BitstreamWriter_8h_source.html#l00188">BitstreamWriter.h:188</a></div></div>
<div class="ttc" id="classllvm_1_1BitstreamWriter_html_ab455eb75b8b1bfa7990f9a7d0e5ff419"><div class="ttname"><a href="classllvm_1_1BitstreamWriter.html#ab455eb75b8b1bfa7990f9a7d0e5ff419">llvm::BitstreamWriter::EmitAbbrev</a></div><div class="ttdeci">unsigned EmitAbbrev(BitCodeAbbrev *Abbv)</div><div class="ttdef"><b>Definition:</b> <a href="BitstreamWriter_8h_source.html#l00492">BitstreamWriter.h:492</a></div></div>
<div class="ttc" id="classllvm_1_1BitCodeAbbrevOp_html"><div class="ttname"><a href="classllvm_1_1BitCodeAbbrevOp.html">llvm::BitCodeAbbrevOp</a></div><div class="ttdef"><b>Definition:</b> <a href="BitCodes_8h_source.html#l00086">BitCodes.h:86</a></div></div>
<div class="ttc" id="BitCodes_8h_html"><div class="ttname"><a href="BitCodes_8h.html">BitCodes.h</a></div></div>
<div class="ttc" id="classllvm_1_1BitstreamWriter_html_a69309a15f7cbd470e7680328af5a2f78"><div class="ttname"><a href="classllvm_1_1BitstreamWriter.html#a69309a15f7cbd470e7680328af5a2f78">llvm::BitstreamWriter::EmitBlockInfoAbbrev</a></div><div class="ttdeci">unsigned EmitBlockInfoAbbrev(unsigned BlockID, BitCodeAbbrev *Abbv)</div><div class="ttdef"><b>Definition:</b> <a href="BitstreamWriter_8h_source.html#l00534">BitstreamWriter.h:534</a></div></div>
<div class="ttc" id="classllvm_1_1BitstreamWriter_html_a9d3d121556c01aab6e6ebfc830e17dbb"><div class="ttname"><a href="classllvm_1_1BitstreamWriter.html#a9d3d121556c01aab6e6ebfc830e17dbb">llvm::BitstreamWriter::EmitVBR</a></div><div class="ttdeci">void EmitVBR(uint32_t Val, unsigned NumBits)</div><div class="ttdef"><b>Definition:</b> <a href="BitstreamWriter_8h_source.html#l00157">BitstreamWriter.h:157</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a669d55980a7d4b6307b94596deeb0b1f"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a669d55980a7d4b6307b94596deeb0b1f">llvm::SmallVectorImpl::append</a></div><div class="ttdeci">void append(in_iter in_start, in_iter in_end)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00445">SmallVector.h:445</a></div></div>
<div class="ttc" id="classllvm_1_1BitCodeAbbrevOp_html_a2a58fd349d33124e02bbee7388ffb6c7"><div class="ttname"><a href="classllvm_1_1BitCodeAbbrevOp.html#a2a58fd349d33124e02bbee7388ffb6c7">llvm::BitCodeAbbrevOp::getLiteralValue</a></div><div class="ttdeci">uint64_t getLiteralValue() const </div><div class="ttdef"><b>Definition:</b> <a href="BitCodes_8h_source.html#l00107">BitCodes.h:107</a></div></div>
<div class="ttc" id="namespacellvm_1_1bitc_html_ab7a76f80792b96a4291e2d1dd1403887aee620990aa08180f9ede6fd5c8440620"><div class="ttname"><a href="namespacellvm_1_1bitc.html#ab7a76f80792b96a4291e2d1dd1403887aee620990aa08180f9ede6fd5c8440620">llvm::bitc::END_BLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="BitCodes_8h_source.html#l00037">BitCodes.h:37</a></div></div>
<div class="ttc" id="namespacellvm_1_1bitc_html_a9bbccfa3e710e59b93cc5a5bf8908cf9a4ae63f558586ca60ba786b672433ed5b"><div class="ttname"><a href="namespacellvm_1_1bitc.html#a9bbccfa3e710e59b93cc5a5bf8908cf9a4ae63f558586ca60ba786b672433ed5b">llvm::bitc::BlockIDWidth</a></div><div class="ttdef"><b>Definition:</b> <a href="BitCodes_8h_source.html#l00029">BitCodes.h:29</a></div></div>
<div class="ttc" id="StringRef_8h_html"><div class="ttname"><a href="StringRef_8h.html">StringRef.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1tgtok_html_abbc5259d649363016626e2529fabe0c5a4a6621856674f376740a1ba6efd809e3"><div class="ttname"><a href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a4a6621856674f376740a1ba6efd809e3">llvm::tgtok::Code</a></div><div class="ttdef"><b>Definition:</b> <a href="TGLexer_8h_source.html#l00046">TGLexer.h:46</a></div></div>
<div class="ttc" id="classllvm_1_1BitstreamWriter_html_a3ce3e61089382052f2ae86064c18cd47"><div class="ttname"><a href="classllvm_1_1BitstreamWriter.html#a3ce3e61089382052f2ae86064c18cd47">llvm::BitstreamWriter::getBlockInfo</a></div><div class="ttdeci">BlockInfo * getBlockInfo(unsigned BlockID)</div><div class="ttdef"><b>Definition:</b> <a href="BitstreamWriter_8h_source.html#l00198">BitstreamWriter.h:198</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="namespacellvm_1_1bitc_html_a6860684558cab9835254eba26b2f7963acf72b4b5b2c1c5b1310721a6715ab010"><div class="ttname"><a href="namespacellvm_1_1bitc.html#a6860684558cab9835254eba26b2f7963acf72b4b5b2c1c5b1310721a6715ab010">llvm::bitc::BLOCKINFO_CODE_SETBID</a></div><div class="ttdef"><b>Definition:</b> <a href="BitCodes_8h_source.html#l00073">BitCodes.h:73</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00880">SmallVector.h:880</a></div></div>
<div class="ttc" id="classllvm_1_1BitstreamWriter_html_ab61bd421a8f911229a616a4bd5a7c9b9"><div class="ttname"><a href="classllvm_1_1BitstreamWriter.html#ab61bd421a8f911229a616a4bd5a7c9b9">llvm::BitstreamWriter::EmitRecordWithBlob</a></div><div class="ttdeci">void EmitRecordWithBlob(unsigned Abbrev, SmallVectorImpl&lt; uintty &gt; &amp;Vals, StringRef Blob)</div><div class="ttdef"><b>Definition:</b> <a href="BitstreamWriter_8h_source.html#l00442">BitstreamWriter.h:442</a></div></div>
<div class="ttc" id="classllvm_1_1BitstreamWriter_html_a797aeff9500ed5150f5c70779b9699f6"><div class="ttname"><a href="classllvm_1_1BitstreamWriter.html#a797aeff9500ed5150f5c70779b9699f6">llvm::BitstreamWriter::EmitRecordWithAbbrev</a></div><div class="ttdeci">void EmitRecordWithAbbrev(unsigned Abbrev, SmallVectorImpl&lt; uintty &gt; &amp;Vals)</div><div class="ttdef"><b>Definition:</b> <a href="BitstreamWriter_8h_source.html#l00432">BitstreamWriter.h:432</a></div></div>
<div class="ttc" id="classllvm_1_1BitstreamWriter_html_a9d3764262ce45f4b4ceeb2d2fe794d3f"><div class="ttname"><a href="classllvm_1_1BitstreamWriter.html#a9d3764262ce45f4b4ceeb2d2fe794d3f">llvm::BitstreamWriter::Emit64</a></div><div class="ttdeci">void Emit64(uint64_t Val, unsigned NumBits)</div><div class="ttdef"><b>Definition:</b> <a href="BitstreamWriter_8h_source.html#l00140">BitstreamWriter.h:140</a></div></div>
<div class="ttc" id="namespacellvm_1_1bitc_html_ab7a76f80792b96a4291e2d1dd1403887a0353c03d98b211f15e10bad35397bf8d"><div class="ttname"><a href="namespacellvm_1_1bitc.html#ab7a76f80792b96a4291e2d1dd1403887a0353c03d98b211f15e10bad35397bf8d">llvm::bitc::DEFINE_ABBREV</a></div><div class="ttdef"><b>Definition:</b> <a href="BitCodes_8h_source.html#l00045">BitCodes.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1BitCodeAbbrevOp_html_a8694ae7ca83441b2764d71711b17e672ac45cef5b964b589fb0741ccc577eaf2c"><div class="ttname"><a href="classllvm_1_1BitCodeAbbrevOp.html#a8694ae7ca83441b2764d71711b17e672ac45cef5b964b589fb0741ccc577eaf2c">llvm::BitCodeAbbrevOp::Array</a></div><div class="ttdef"><b>Definition:</b> <a href="BitCodes_8h_source.html#l00094">BitCodes.h:94</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a8a045d250952c0867382a9840ee18fdf"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">llvm::SmallVectorTemplateCommon&lt; T &gt;::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00112">SmallVector.h:112</a></div></div>
<div class="ttc" id="classllvm_1_1BitCodeAbbrevOp_html_a8694ae7ca83441b2764d71711b17e672ade2457e8051855ad2911d62202458e20"><div class="ttname"><a href="classllvm_1_1BitCodeAbbrevOp.html#a8694ae7ca83441b2764d71711b17e672ade2457e8051855ad2911d62202458e20">llvm::BitCodeAbbrevOp::VBR</a></div><div class="ttdef"><b>Definition:</b> <a href="BitCodes_8h_source.html#l00093">BitCodes.h:93</a></div></div>
<div class="ttc" id="namespacellvm_1_1bitc_html_ab7a76f80792b96a4291e2d1dd1403887a81e1f263b022b7989aa71fb623b62be8"><div class="ttname"><a href="namespacellvm_1_1bitc.html#ab7a76f80792b96a4291e2d1dd1403887a81e1f263b022b7989aa71fb623b62be8">llvm::bitc::FIRST_APPLICATION_ABBREV</a></div><div class="ttdef"><b>Definition:</b> <a href="BitCodes_8h_source.html#l00052">BitCodes.h:52</a></div></div>
<div class="ttc" id="classllvm_1_1BitstreamWriter_html_a89c2112f53738259e695c7e61899d5ff"><div class="ttname"><a href="classllvm_1_1BitstreamWriter.html#a89c2112f53738259e695c7e61899d5ff">llvm::BitstreamWriter::BitstreamWriter</a></div><div class="ttdeci">BitstreamWriter(SmallVectorImpl&lt; char &gt; &amp;O)</div><div class="ttdef"><b>Definition:</b> <a href="BitstreamWriter_8h_source.html#l00096">BitstreamWriter.h:96</a></div></div>
<div class="ttc" id="CaptureTracking_8cpp_html_ac30708db2a991631cbf3d95c6324d929"><div class="ttname"><a href="CaptureTracking_8cpp.html#ac30708db2a991631cbf3d95c6324d929">Threshold</a></div><div class="ttdeci">static int const Threshold</div><div class="ttdef"><b>Definition:</b> <a href="CaptureTracking_8cpp_source.html#l00080">CaptureTracking.cpp:80</a></div></div>
<div class="ttc" id="classllvm_1_1BitCodeAbbrev_html_abf3fecb0c9c194f1e92fe9cb547d3000"><div class="ttname"><a href="classllvm_1_1BitCodeAbbrev.html#abf3fecb0c9c194f1e92fe9cb547d3000">llvm::BitCodeAbbrev::getNumOperandInfos</a></div><div class="ttdeci">unsigned getNumOperandInfos() const </div><div class="ttdef"><b>Definition:</b> <a href="BitCodes_8h_source.html#l00174">BitCodes.h:174</a></div></div>
<div class="ttc" id="classllvm_1_1BitstreamWriter_html_a765ce2a472e2eedad6b7ed02b6674a00"><div class="ttname"><a href="classllvm_1_1BitstreamWriter.html#a765ce2a472e2eedad6b7ed02b6674a00">llvm::BitstreamWriter::EmitVBR64</a></div><div class="ttdeci">void EmitVBR64(uint64_t Val, unsigned NumBits)</div><div class="ttdef"><b>Definition:</b> <a href="BitstreamWriter_8h_source.html#l00170">BitstreamWriter.h:170</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00066">Value.h:66</a></div></div>
<div class="ttc" id="classllvm_1_1BitstreamWriter_html_a679c8ef07f474d8b145e88fbc1a42ec7"><div class="ttname"><a href="classllvm_1_1BitstreamWriter.html#a679c8ef07f474d8b145e88fbc1a42ec7">llvm::BitstreamWriter::EmitRecordWithBlob</a></div><div class="ttdeci">void EmitRecordWithBlob(unsigned Abbrev, SmallVectorImpl&lt; uintty &gt; &amp;Vals, const char *BlobData, unsigned BlobLen)</div><div class="ttdef"><b>Definition:</b> <a href="BitstreamWriter_8h_source.html#l00447">BitstreamWriter.h:447</a></div></div>
<div class="ttc" id="SmallVector_8h_html"><div class="ttname"><a href="SmallVector_8h.html">SmallVector.h</a></div></div>
<div class="ttc" id="classllvm_1_1BitCodeAbbrevOp_html_a8694ae7ca83441b2764d71711b17e672abfdef4054ace82e3ddb8794bc5ca471c"><div class="ttname"><a href="classllvm_1_1BitCodeAbbrevOp.html#a8694ae7ca83441b2764d71711b17e672abfdef4054ace82e3ddb8794bc5ca471c">llvm::BitCodeAbbrevOp::Fixed</a></div><div class="ttdef"><b>Definition:</b> <a href="BitCodes_8h_source.html#l00092">BitCodes.h:92</a></div></div>
<div class="ttc" id="classllvm_1_1StringRef_html"><div class="ttname"><a href="classllvm_1_1StringRef.html">llvm::StringRef</a></div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00041">StringRef.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1BitstreamWriter_html_a5e8488041d80c56389002659004c6af7"><div class="ttname"><a href="classllvm_1_1BitstreamWriter.html#a5e8488041d80c56389002659004c6af7">llvm::BitstreamWriter::ExitBlock</a></div><div class="ttdeci">void ExitBlock()</div><div class="ttdef"><b>Definition:</b> <a href="BitstreamWriter_8h_source.html#l00242">BitstreamWriter.h:242</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a90cca76dd78688687e0d697679dbc799"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional ldr LCPI1_0 ldr ldr tst movne lsr ldr LCPI1_1 and r0 bx lr it saves an instruction and a register It might be profitable to cse MOVi16 if there are lots of bit immediates with the same bottom half Robert Muth started working on an alternate jump table implementation that does not put the tables in line in the text This is more like the llvm default jump table implementation This might be useful sometime Several revisions of patches are on the mailing beginning while CMP sets them like a subtract Therefore to be able to use CMN for comparisons other than the Z we ll need additional logic to reverse the conditionals associated with the comparison Perhaps a pseudo instruction for the with a post codegen pass to clean up and handle the condition codes See PR5694 for testcase Given the following on int B</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00592">Target/ARM/README.txt:592</a></div></div>
<div class="ttc" id="classllvm_1_1BitstreamWriter_html_abf7d55f3e39ce028c1594f34967d06b3"><div class="ttname"><a href="classllvm_1_1BitstreamWriter.html#abf7d55f3e39ce028c1594f34967d06b3">llvm::BitstreamWriter::~BitstreamWriter</a></div><div class="ttdeci">~BitstreamWriter()</div><div class="ttdef"><b>Definition:</b> <a href="BitstreamWriter_8h_source.html#l00099">BitstreamWriter.h:99</a></div></div>
<div class="ttc" id="classllvm_1_1BitCodeAbbrevOp_html_a920f0c4bbbb7bc1637d56510c30e7e49"><div class="ttname"><a href="classllvm_1_1BitCodeAbbrevOp.html#a920f0c4bbbb7bc1637d56510c30e7e49">llvm::BitCodeAbbrevOp::getEncoding</a></div><div class="ttdeci">Encoding getEncoding() const </div><div class="ttdef"><b>Definition:</b> <a href="BitCodes_8h_source.html#l00110">BitCodes.h:110</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 22:58:16 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
