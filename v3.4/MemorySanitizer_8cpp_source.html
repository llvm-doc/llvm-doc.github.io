<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: MemorySanitizer.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('MemorySanitizer_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">MemorySanitizer.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="MemorySanitizer_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===-- MemorySanitizer.cpp - detector of uninitialized reads -------------===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span><span class="comment"></span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">/// \file</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">/// This file is a part of MemorySanitizer, a detector of uninitialized</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">/// reads.</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">/// Status: early prototype.</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">/// The algorithm of the tool is similar to Memcheck</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">/// (http://goo.gl/QKbem). We associate a few shadow bits with every</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">/// byte of the application memory, poison the shadow of the malloc-ed</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">/// or alloca-ed memory, load the shadow bits on every memory read,</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">/// propagate the shadow bits through some of the arithmetic</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">/// instruction (including MOV), store the shadow bits on every memory</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">/// write, report a bug on some other instructions (e.g. JMP) if the</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">/// associated shadow is poisoned.</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">/// But there are differences too. The first and the major one:</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">/// compiler instrumentation instead of binary instrumentation. This</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">/// gives us much better register allocation, possible compiler</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">/// optimizations and a fast start-up. But this brings the major issue</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">/// as well: msan needs to see all program events, including system</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">/// calls and reads/writes in system libraries, so we either need to</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">/// compile *everything* with msan or use a binary translation</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">/// component (e.g. DynamoRIO) to instrument pre-built libraries.</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">/// Another difference from Memcheck is that we use 8 shadow bits per</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">/// byte of application memory and use a direct shadow mapping. This</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">/// greatly simplifies the instrumentation code and avoids races on</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">/// shadow updates (Memcheck is single-threaded so races are not a</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">/// concern there. Memcheck uses 2 shadow bits per byte with a slow</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">/// path storage that uses 8 bits per byte).</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">/// The default value of shadow is 0, which means &quot;clean&quot; (not poisoned).</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">/// Every module initializer should call __msan_init to ensure that the</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">/// shadow memory is ready. On error, __msan_warning is called. Since</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">/// parameters and return values may be passed via registers, we have a</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">/// specialized thread-local shadow for return values</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">/// (__msan_retval_tls) and parameters (__msan_param_tls).</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">///                           Origin tracking.</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">/// MemorySanitizer can track origins (allocation points) of all uninitialized</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">/// values. This behavior is controlled with a flag (msan-track-origins) and is</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">/// disabled by default.</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">/// Origins are 4-byte values created and interpreted by the runtime library.</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">/// They are stored in a second shadow mapping, one 4-byte value for 4 bytes</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">/// of application memory. Propagation of origins is basically a bunch of</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">/// &quot;select&quot; instructions that pick the origin of a dirty argument, if an</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">/// instruction has one.</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">/// Every 4 aligned, consecutive bytes of application memory have one origin</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">/// value associated with them. If these bytes contain uninitialized data</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">/// coming from 2 different allocations, the last store wins. Because of this,</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">/// MemorySanitizer reports can show unrelated origins, but this is unlikely in</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">/// practice.</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">/// Origins are meaningless for fully initialized values, so MemorySanitizer</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">/// avoids storing origin to memory when a fully initialized value is stored.</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">/// This way it avoids needless overwritting origin of the 4-byte region on</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">/// a short (i.e. 1 byte) clean store, and it is also good for performance.</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">///                            Atomic handling.</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">/// Ideally, every atomic store of application value should update the</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">/// corresponding shadow location in an atomic way. Unfortunately, atomic store</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">/// of two disjoint locations can not be done without severe slowdown.</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">/// Therefore, we implement an approximation that may err on the safe side.</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">/// In this implementation, every atomically accessed location in the program</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">/// may only change from (partially) uninitialized to fully initialized, but</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">/// not the other way around. We load the shadow _after_ the application load,</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">/// and we store the shadow _before_ the app store. Also, we always store clean</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">/// shadow (if the application store is atomic). This way, if the store-load</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">/// pair constitutes a happens-before arc, shadow store and load are correctly</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">/// ordered such that the load will get either the value that was stored, or</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">/// some later value (which is always clean).</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">/// This does not work very well with Compare-And-Swap (CAS) and</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">/// Read-Modify-Write (RMW) operations. To follow the above logic, CAS and RMW</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">/// must store the new shadow before the app operation, and load the shadow</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">/// after the app operation. Computers don&#39;t work this way. Current</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">/// implementation ignores the load aspect of CAS/RMW, always returning a clean</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">/// value. It implements the store part as a simple atomic store by storing a</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">/// clean shadow.</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="MemorySanitizer_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   96</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;msan&quot;</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instrumentation_8h.html">llvm/Transforms/Instrumentation.h</a>&quot;</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DepthFirstIterator_8h.html">llvm/ADT/DepthFirstIterator.h</a>&quot;</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallString_8h.html">llvm/ADT/SmallString.h</a>&quot;</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallVector_8h.html">llvm/ADT/SmallVector.h</a>&quot;</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Triple_8h.html">llvm/ADT/Triple.h</a>&quot;</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueMap_8h.html">llvm/ADT/ValueMap.h</a>&quot;</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DataLayout_8h.html">llvm/IR/DataLayout.h</a>&quot;</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Function_8h.html">llvm/IR/Function.h</a>&quot;</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IRBuilder_8h.html">llvm/IR/IRBuilder.h</a>&quot;</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InlineAsm_8h.html">llvm/IR/InlineAsm.h</a>&quot;</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IntrinsicInst_8h.html">llvm/IR/IntrinsicInst.h</a>&quot;</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LLVMContext_8h.html">llvm/IR/LLVMContext.h</a>&quot;</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MDBuilder_8h.html">llvm/IR/MDBuilder.h</a>&quot;</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Module_8h.html">llvm/IR/Module.h</a>&quot;</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Type_8h.html">llvm/IR/Type.h</a>&quot;</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstVisitor_8h.html">llvm/InstVisitor.h</a>&quot;</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Compiler_8h.html">llvm/Support/Compiler.h</a>&quot;</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlockUtils_8h.html">llvm/Transforms/Utils/BasicBlockUtils.h</a>&quot;</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Local_8h.html">llvm/Transforms/Utils/Local.h</a>&quot;</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ModuleUtils_8h.html">llvm/Transforms/Utils/ModuleUtils.h</a>&quot;</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SpecialCaseList_8h.html">llvm/Transforms/Utils/SpecialCaseList.h</a>&quot;</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="MemorySanitizer_8cpp.html#a20e043ae97a3f82b3318bcd56f5b38f1">  125</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> uint64_t <a class="code" href="MemorySanitizer_8cpp.html#a20e043ae97a3f82b3318bcd56f5b38f1">kShadowMask32</a> = 1ULL &lt;&lt; 31;</div><div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="MemorySanitizer_8cpp.html#ac3caf762dffb7813be6e548f5b34679c">  126</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> uint64_t <a class="code" href="MemorySanitizer_8cpp.html#ac3caf762dffb7813be6e548f5b34679c">kShadowMask64</a> = 1ULL &lt;&lt; 46;</div><div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="MemorySanitizer_8cpp.html#a34dc6bcc5675764c8085c5916908201e">  127</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> uint64_t <a class="code" href="MemorySanitizer_8cpp.html#a34dc6bcc5675764c8085c5916908201e">kOriginOffset32</a> = 1ULL &lt;&lt; 30;</div><div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="MemorySanitizer_8cpp.html#a448181f18ba0f12950842170ef02dc7d">  128</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> uint64_t <a class="code" href="MemorySanitizer_8cpp.html#a448181f18ba0f12950842170ef02dc7d">kOriginOffset64</a> = 1ULL &lt;&lt; 45;</div><div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="MemorySanitizer_8cpp.html#a216e26e0083fff01b947d564a26b2222">  129</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code" href="MemorySanitizer_8cpp.html#a216e26e0083fff01b947d564a26b2222">kMinOriginAlignment</a> = 4;</div><div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="MemorySanitizer_8cpp.html#a18599dcc3be2ad58c3ed01ea18609782">  130</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code" href="MemorySanitizer_8cpp.html#a18599dcc3be2ad58c3ed01ea18609782">kShadowTLSAlignment</a> = 8;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">/// \brief Track origins of uninitialized values.</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">/// Adds a section to MemorySanitizer report that points to the allocation</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">/// (stack or heap) the uninitialized bits came from originally.</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="MemorySanitizer_8cpp.html#acfdcbff37769d5fce008cf36d8037e23">ClTrackOrigins</a>(<span class="stringliteral">&quot;msan-track-origins&quot;</span>,</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Track origins (allocation sites) of poisoned memory&quot;</span>),</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;       <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>));</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="MemorySanitizer_8cpp.html#ac0f9397797d9aa0abd56ae58920145aa">ClKeepGoing</a>(<span class="stringliteral">&quot;msan-keep-going&quot;</span>,</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;keep going after reporting a UMR&quot;</span>),</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;       <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>));</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="MemorySanitizer_8cpp.html#a2ff1dc2e13146df957d703f55795141c">ClPoisonStack</a>(<span class="stringliteral">&quot;msan-poison-stack&quot;</span>,</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;poison uninitialized stack variables&quot;</span>),</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;       <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>));</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="MemorySanitizer_8cpp.html#abc1a7718688c7255771a10479097c55a">ClPoisonStackWithCall</a>(<span class="stringliteral">&quot;msan-poison-stack-with-call&quot;</span>,</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;poison uninitialized stack variables with a call&quot;</span>),</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;       <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>));</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;int&gt;</a> <a class="code" href="MemorySanitizer_8cpp.html#af68b3e004c234c70ebf1f4ffd042c0b5">ClPoisonStackPattern</a>(<span class="stringliteral">&quot;msan-poison-stack-pattern&quot;</span>,</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;poison uninitialized stack variables with the given patter&quot;</span>),</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;       <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(0xff));</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="MemorySanitizer_8cpp.html#a6934dd55a499eb5d1406fe26e1ec800f">ClPoisonUndef</a>(<span class="stringliteral">&quot;msan-poison-undef&quot;</span>,</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;poison undef temps&quot;</span>),</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;       <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>));</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="MemorySanitizer_8cpp.html#a9d4432de44f3dd0885f20ee61a73cedf">ClHandleICmp</a>(<span class="stringliteral">&quot;msan-handle-icmp&quot;</span>,</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;propagate shadow through ICmpEQ and ICmpNE&quot;</span>),</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;       <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>));</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="MemorySanitizer_8cpp.html#a0cf5d5e1b87d7a9391913ce2de847a2c">ClHandleICmpExact</a>(<span class="stringliteral">&quot;msan-handle-icmp-exact&quot;</span>,</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;exact handling of relational integer ICmp&quot;</span>),</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;       <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>));</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="MemorySanitizer_8cpp.html#ad0af59fa6adfa874cbfa374c4e0f8468">ClStoreCleanOrigin</a>(<span class="stringliteral">&quot;msan-store-clean-origin&quot;</span>,</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;store origin for clean (fully initialized) values&quot;</span>),</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;       <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>));</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">// This flag controls whether we check the shadow of the address</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">// operand of load or store. Such bugs are very rare, since load from</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment">// a garbage address typically results in SEGV, but still happen</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">// (e.g. only lower bits of address are garbage, or the access happens</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">// early at program startup where malloc-ed memory is more likely to</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">// be zeroed. As of 2012-08-28 this flag adds 20% slowdown.</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="MemorySanitizer_8cpp.html#a69b37c814b922ad8dc3c9d9a766760c3">ClCheckAccessAddress</a>(<span class="stringliteral">&quot;msan-check-access-address&quot;</span>,</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;report accesses through a pointer which has poisoned shadow&quot;</span>),</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;       <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>));</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="MemorySanitizer_8cpp.html#af4383ad0a5878a085ea98b050a615604">ClDumpStrictInstructions</a>(<span class="stringliteral">&quot;msan-dump-strict-instructions&quot;</span>,</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;print out instructions with default strict semantics&quot;</span>),</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;       <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>));</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;std::string&gt;</a>  <a class="code" href="MemorySanitizer_8cpp.html#ac4648cb71d95d1775cca6ce3f32d114b">ClBlacklistFile</a>(<span class="stringliteral">&quot;msan-blacklist&quot;</span>,</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;File containing the list of functions where MemorySanitizer &quot;</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                <span class="stringliteral">&quot;should not report bugs&quot;</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">// Experimental. Wraps all indirect calls in the instrumented code with</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment">// a call to the given function. This is needed to assist the dynamic</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">// helper tool (MSanDR) to regain control on transition between instrumented and</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">// non-instrumented code.</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;std::string&gt;</a> <a class="code" href="MemorySanitizer_8cpp.html#a5a6a6967ce058549768ae3938b48f162">ClWrapIndirectCalls</a>(<span class="stringliteral">&quot;msan-wrap-indirect-calls&quot;</span>,</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Wrap indirect calls with a given function&quot;</span>),</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;       <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="MemorySanitizer_8cpp.html#acb80a2d10dece8e1e5c07a6ff3f18e76">ClWrapIndirectCallsFast</a>(<span class="stringliteral">&quot;msan-wrap-indirect-calls-fast&quot;</span>,</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Do not wrap indirect calls with target in the same module&quot;</span>),</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;       <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>));</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">/// \brief An instrumentation pass implementing detection of uninitialized</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">/// reads.</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment">/// MemorySanitizer: instrument the code in module to find</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">/// uninitialized reads.</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment"></span><span class="keyword">class </span>MemorySanitizer : <span class="keyword">public</span> <a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a> {</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  MemorySanitizer(<span class="keywordtype">bool</span> TrackOrigins = <span class="keyword">false</span>,</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> BlacklistFile = <a class="code" href="classllvm_1_1StringRef.html">StringRef</a>())</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      : <a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a>(<a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>),</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        TrackOrigins(TrackOrigins || <a class="code" href="MemorySanitizer_8cpp.html#acfdcbff37769d5fce008cf36d8037e23">ClTrackOrigins</a>),</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        TD(0),</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        WarningFn(0),</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        BlacklistFile(BlacklistFile.empty() ? <a class="code" href="MemorySanitizer_8cpp.html#ac4648cb71d95d1775cca6ce3f32d114b">ClBlacklistFile</a> : BlacklistFile),</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        WrapIndirectCalls(!<a class="code" href="MemorySanitizer_8cpp.html#a5a6a6967ce058549768ae3938b48f162">ClWrapIndirectCalls</a>.empty()) {}</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *getPassName()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="stringliteral">&quot;MemorySanitizer&quot;</span>; }</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <span class="keywordtype">bool</span> runOnFunction(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <span class="keywordtype">bool</span> doInitialization(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;<a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>);</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>;  <span class="comment">// Pass identification, replacement for typeid.</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160; <span class="keyword">private</span>:</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <span class="keywordtype">void</span> initializeCallbacks(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;<a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>);</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">  /// \brief Track origins (allocation points) of uninitialized values.</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> TrackOrigins;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> *TD;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *IntptrTy;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *OriginTy;<span class="comment"></span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">  /// \brief Thread-local shadow storage for function parameters.</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *ParamTLS;<span class="comment"></span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">  /// \brief Thread-local origin storage for function parameters.</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *ParamOriginTLS;<span class="comment"></span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">  /// \brief Thread-local shadow storage for function return value.</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *RetvalTLS;<span class="comment"></span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">  /// \brief Thread-local origin storage for function return value.</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *RetvalOriginTLS;<span class="comment"></span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">  /// \brief Thread-local shadow storage for in-register va_arg function</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">  /// parameters (x86_64-specific).</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *VAArgTLS;<span class="comment"></span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">  /// \brief Thread-local shadow storage for va_arg overflow area</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment">  /// (x86_64-specific).</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *VAArgOverflowSizeTLS;<span class="comment"></span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">  /// \brief Thread-local space used to pass origin value to the UMR reporting</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">  /// function.</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *OriginTLS;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *MsandrModuleStart;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *MsandrModuleEnd;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment">  /// \brief The run-time callback to print a warning.</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Value.html">Value</a> *WarningFn;<span class="comment"></span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment">  /// \brief Run-time helper that copies origin info for a memory range.</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Value.html">Value</a> *MsanCopyOriginFn;<span class="comment"></span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment">  /// \brief Run-time helper that generates a new origin value for a stack</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">  /// allocation.</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Value.html">Value</a> *MsanSetAllocaOrigin4Fn;<span class="comment"></span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">  /// \brief Run-time helper that poisons stack on function entry.</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Value.html">Value</a> *MsanPoisonStackFn;<span class="comment"></span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">  /// \brief MSan runtime replacements for memmove, memcpy and memset.</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Value.html">Value</a> *MemmoveFn, *MemcpyFn, *MemsetFn;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">  /// \brief Address mask used in application-to-shadow address calculation.</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">  /// ShadowAddr is computed as ApplicationAddr &amp; ~ShadowMask.</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment"></span>  uint64_t ShadowMask;<span class="comment"></span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">  /// \brief Offset of the origin shadow from the &quot;normal&quot; shadow.</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">  /// OriginAddr is computed as (ShadowAddr + OriginOffset) &amp; ~3ULL</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment"></span>  uint64_t OriginOffset;<span class="comment"></span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">  /// \brief Branch weights for error reporting.</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *ColdCallWeights;<span class="comment"></span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">  /// \brief Branch weights for origin store.</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *OriginStoreWeights;<span class="comment"></span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">  /// \brief Path to blacklist file.</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;64&gt;</a> BlacklistFile;<span class="comment"></span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment">  /// \brief The blacklist.</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1OwningPtr.html">OwningPtr&lt;SpecialCaseList&gt;</a> <a class="code" href="namespacellvm_1_1XCoreISD.html#aef28e79e1ebefed9020708b2350b1f10adba71479b3d85460f040da54d76bd319">BL</a>;<span class="comment"></span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">  /// \brief An empty volatile inline asm that prevents callback merge.</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1InlineAsm.html">InlineAsm</a> *EmptyAsm;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="keywordtype">bool</span> WrapIndirectCalls;<span class="comment"></span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">  /// \brief Run-time wrapper for indirect calls.</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Value.html">Value</a> *IndirectCallWrapperFn;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="comment">// Argument and return type of IndirectCallWrapperFn: void (*f)(void).</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *AnyFunctionPtrTy;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="keyword">friend</span> <span class="keyword">struct </span>MemorySanitizerVisitor;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <span class="keyword">friend</span> <span class="keyword">struct </span>VarArgAMD64Helper;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;};</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;}  <span class="comment">// namespace</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">MemorySanitizer::ID</a> = 0;</div><div class="line"><a name="l00291"></a><span class="lineno"><a class="line" href="MemorySanitizer_8cpp.html#a38680ec82ce1634055f971cecb753495">  291</a></span>&#160;<a class="code" href="MemorySanitizer_8cpp.html#a38680ec82ce1634055f971cecb753495">INITIALIZE_PASS</a>(MemorySanitizer, <span class="stringliteral">&quot;msan&quot;</span>,</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                <span class="stringliteral">&quot;MemorySanitizer: detects uninitialized reads.&quot;</span>,</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                <span class="keyword">false</span>, <span class="keyword">false</span>)</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a> *<a class="code" href="namespacellvm.html">llvm</a>::<a class="code" href="namespacellvm.html#aba874fadc4c9e51be8fd4e7099212b3b">createMemorySanitizerPass</a>(<span class="keywordtype">bool</span> TrackOrigins,</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                                              <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> BlacklistFile) {</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> MemorySanitizer(TrackOrigins, BlacklistFile);</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;}</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment">/// \brief Create a non-const global initialized with the given string.</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">/// Creates a writable global for Str so that we can pass it to the</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">/// run-time lib. Runtime uses first 4 bytes of the string to store the</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment">/// frame ID, so the string needs to be mutable.</span></div><div class="line"><a name="l00305"></a><span class="lineno"><a class="line" href="MemorySanitizer_8cpp.html#a2638c0c0f82157f94a2040d1e76b5fa5">  305</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *<a class="code" href="MemorySanitizer_8cpp.html#a2638c0c0f82157f94a2040d1e76b5fa5">createPrivateNonConstGlobalForString</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;<a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>,</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                                                            <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> Str) {</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *StrConst = <a class="code" href="classllvm_1_1ConstantDataArray.html#a3edef3fa47c611d3d10606591213e57b">ConstantDataArray::getString</a>(M.<a class="code" href="classllvm_1_1Module.html#a0e74af4b7c739f3a14e737c3042b6617">getContext</a>(), Str);</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(M, StrConst-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), <span class="comment">/*isConstant=*/</span><span class="keyword">false</span>,</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                            <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca04ed141708c0fd16723d212502b046ae">GlobalValue::PrivateLinkage</a>, StrConst, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;}</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment">/// \brief Insert extern declaration of runtime-provided functions and globals.</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> MemorySanitizer::initializeCallbacks(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;<a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>) {</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <span class="comment">// Only do this once.</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="keywordflow">if</span> (WarningFn)</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="comment">// Create the callback.</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <span class="comment">// FIXME: this function should have &quot;Cold&quot; calling conv,</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="comment">// which is not yet implemented.</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> WarningFnName = <a class="code" href="MemorySanitizer_8cpp.html#ac0f9397797d9aa0abd56ae58920145aa">ClKeepGoing</a> ? <span class="stringliteral">&quot;__msan_warning&quot;</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                                        : <span class="stringliteral">&quot;__msan_warning_noreturn&quot;</span>;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  WarningFn = M.<a class="code" href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(WarningFnName, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a518df7907ab8f1d61c6f47381055eb53">getVoidTy</a>(), NULL);</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  MsanCopyOriginFn = M.<a class="code" href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="stringliteral">&quot;__msan_copy_origin&quot;</span>, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a518df7907ab8f1d61c6f47381055eb53">getVoidTy</a>(), IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7badbb741cd23e73ad063428c9cd5fea">getInt8PtrTy</a>(),</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7badbb741cd23e73ad063428c9cd5fea">getInt8PtrTy</a>(), IntptrTy, NULL);</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  MsanSetAllocaOrigin4Fn = M.<a class="code" href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="stringliteral">&quot;__msan_set_alloca_origin4&quot;</span>, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a518df7907ab8f1d61c6f47381055eb53">getVoidTy</a>(), IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7badbb741cd23e73ad063428c9cd5fea">getInt8PtrTy</a>(), IntptrTy,</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7badbb741cd23e73ad063428c9cd5fea">getInt8PtrTy</a>(), IntptrTy, NULL);</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  MsanPoisonStackFn = M.<a class="code" href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="stringliteral">&quot;__msan_poison_stack&quot;</span>, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a518df7907ab8f1d61c6f47381055eb53">getVoidTy</a>(), IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7badbb741cd23e73ad063428c9cd5fea">getInt8PtrTy</a>(), IntptrTy, NULL);</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  MemmoveFn = M.<a class="code" href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="stringliteral">&quot;__msan_memmove&quot;</span>, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7badbb741cd23e73ad063428c9cd5fea">getInt8PtrTy</a>(), IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7badbb741cd23e73ad063428c9cd5fea">getInt8PtrTy</a>(),</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7badbb741cd23e73ad063428c9cd5fea">getInt8PtrTy</a>(), IntptrTy, NULL);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  MemcpyFn = M.<a class="code" href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="stringliteral">&quot;__msan_memcpy&quot;</span>, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7badbb741cd23e73ad063428c9cd5fea">getInt8PtrTy</a>(), IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7badbb741cd23e73ad063428c9cd5fea">getInt8PtrTy</a>(), IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7badbb741cd23e73ad063428c9cd5fea">getInt8PtrTy</a>(),</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    IntptrTy, NULL);</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  MemsetFn = M.<a class="code" href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="stringliteral">&quot;__msan_memset&quot;</span>, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7badbb741cd23e73ad063428c9cd5fea">getInt8PtrTy</a>(), IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7badbb741cd23e73ad063428c9cd5fea">getInt8PtrTy</a>(), IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6ee1d1e7a13072ef579558d64b208d3c">getInt32Ty</a>(),</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    IntptrTy, NULL);</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <span class="comment">// Create globals.</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  RetvalTLS = <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    M, <a class="code" href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">ArrayType::get</a>(IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a2e32c414382ed5fd53a770026361ed19">getInt64Ty</a>(), 8), <span class="keyword">false</span>,</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e">GlobalVariable::ExternalLinkage</a>, 0, <span class="stringliteral">&quot;__msan_retval_tls&quot;</span>, 0,</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <a class="code" href="classllvm_1_1GlobalVariable.html#a8258421dcc5f4b3beb309a25a4bcb643a49cef61df7187c5d2d1fcb90809557fe">GlobalVariable::InitialExecTLSModel</a>);</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  RetvalOriginTLS = <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    M, OriginTy, <span class="keyword">false</span>, <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e">GlobalVariable::ExternalLinkage</a>, 0,</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="stringliteral">&quot;__msan_retval_origin_tls&quot;</span>, 0, <a class="code" href="classllvm_1_1GlobalVariable.html#a8258421dcc5f4b3beb309a25a4bcb643a49cef61df7187c5d2d1fcb90809557fe">GlobalVariable::InitialExecTLSModel</a>);</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  ParamTLS = <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    M, <a class="code" href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">ArrayType::get</a>(IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a2e32c414382ed5fd53a770026361ed19">getInt64Ty</a>(), 1000), <span class="keyword">false</span>,</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e">GlobalVariable::ExternalLinkage</a>, 0, <span class="stringliteral">&quot;__msan_param_tls&quot;</span>, 0,</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <a class="code" href="classllvm_1_1GlobalVariable.html#a8258421dcc5f4b3beb309a25a4bcb643a49cef61df7187c5d2d1fcb90809557fe">GlobalVariable::InitialExecTLSModel</a>);</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  ParamOriginTLS = <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    M, <a class="code" href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">ArrayType::get</a>(OriginTy, 1000), <span class="keyword">false</span>, <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e">GlobalVariable::ExternalLinkage</a>,</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    0, <span class="stringliteral">&quot;__msan_param_origin_tls&quot;</span>, 0, <a class="code" href="classllvm_1_1GlobalVariable.html#a8258421dcc5f4b3beb309a25a4bcb643a49cef61df7187c5d2d1fcb90809557fe">GlobalVariable::InitialExecTLSModel</a>);</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  VAArgTLS = <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    M, <a class="code" href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">ArrayType::get</a>(IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a2e32c414382ed5fd53a770026361ed19">getInt64Ty</a>(), 1000), <span class="keyword">false</span>,</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e">GlobalVariable::ExternalLinkage</a>, 0, <span class="stringliteral">&quot;__msan_va_arg_tls&quot;</span>, 0,</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <a class="code" href="classllvm_1_1GlobalVariable.html#a8258421dcc5f4b3beb309a25a4bcb643a49cef61df7187c5d2d1fcb90809557fe">GlobalVariable::InitialExecTLSModel</a>);</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  VAArgOverflowSizeTLS = <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    M, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a2e32c414382ed5fd53a770026361ed19">getInt64Ty</a>(), <span class="keyword">false</span>, <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e">GlobalVariable::ExternalLinkage</a>, 0,</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="stringliteral">&quot;__msan_va_arg_overflow_size_tls&quot;</span>, 0,</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <a class="code" href="classllvm_1_1GlobalVariable.html#a8258421dcc5f4b3beb309a25a4bcb643a49cef61df7187c5d2d1fcb90809557fe">GlobalVariable::InitialExecTLSModel</a>);</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  OriginTLS = <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    M, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6ee1d1e7a13072ef579558d64b208d3c">getInt32Ty</a>(), <span class="keyword">false</span>, <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e">GlobalVariable::ExternalLinkage</a>, 0,</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="stringliteral">&quot;__msan_origin_tls&quot;</span>, 0, <a class="code" href="classllvm_1_1GlobalVariable.html#a8258421dcc5f4b3beb309a25a4bcb643a49cef61df7187c5d2d1fcb90809557fe">GlobalVariable::InitialExecTLSModel</a>);</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="comment">// We insert an empty inline asm after __msan_report* to avoid callback merge.</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  EmptyAsm = <a class="code" href="classllvm_1_1InlineAsm.html#aaae042532c03bc95734e689525a6b88b">InlineAsm::get</a>(<a class="code" href="classllvm_1_1FunctionType.html#a7e89b55242c964ae61b7850e99cacef0">FunctionType::get</a>(IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a518df7907ab8f1d61c6f47381055eb53">getVoidTy</a>(), <span class="keyword">false</span>),</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                            <a class="code" href="classllvm_1_1StringRef.html">StringRef</a>(<span class="stringliteral">&quot;&quot;</span>), <a class="code" href="classllvm_1_1StringRef.html">StringRef</a>(<span class="stringliteral">&quot;&quot;</span>),</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                            <span class="comment">/*hasSideEffects=*/</span><span class="keyword">true</span>);</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <span class="keywordflow">if</span> (WrapIndirectCalls) {</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    AnyFunctionPtrTy =</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        <a class="code" href="classllvm_1_1PointerType.html#a8db49fd5069f21d514e7bb0fd11f0902">PointerType::getUnqual</a>(<a class="code" href="classllvm_1_1FunctionType.html#a7e89b55242c964ae61b7850e99cacef0">FunctionType::get</a>(IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a518df7907ab8f1d61c6f47381055eb53">getVoidTy</a>(), <span class="keyword">false</span>));</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    IndirectCallWrapperFn = M.<a class="code" href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <a class="code" href="MemorySanitizer_8cpp.html#a5a6a6967ce058549768ae3938b48f162">ClWrapIndirectCalls</a>, AnyFunctionPtrTy, AnyFunctionPtrTy, NULL);</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  }</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MemorySanitizer_8cpp.html#acb80a2d10dece8e1e5c07a6ff3f18e76">ClWrapIndirectCallsFast</a>) {</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    MsandrModuleStart = <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        M, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6ee1d1e7a13072ef579558d64b208d3c">getInt32Ty</a>(), <span class="keyword">false</span>, <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e">GlobalValue::ExternalLinkage</a>,</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        0, <span class="stringliteral">&quot;__executable_start&quot;</span>);</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    MsandrModuleStart-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#aa242d8ab89216c14beab812e07009b2a">setVisibility</a>(<a class="code" href="classllvm_1_1GlobalValue.html#a9141f967188383108a69cc1b8ed3c195a7eade123587a08e674f2ca72e2443771">GlobalVariable::HiddenVisibility</a>);</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    MsandrModuleEnd = <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        M, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6ee1d1e7a13072ef579558d64b208d3c">getInt32Ty</a>(), <span class="keyword">false</span>, <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e">GlobalValue::ExternalLinkage</a>,</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        0, <span class="stringliteral">&quot;_end&quot;</span>);</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    MsandrModuleEnd-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#aa242d8ab89216c14beab812e07009b2a">setVisibility</a>(<a class="code" href="classllvm_1_1GlobalValue.html#a9141f967188383108a69cc1b8ed3c195a7eade123587a08e674f2ca72e2443771">GlobalVariable::HiddenVisibility</a>);</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  }</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;}</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment">/// \brief Module-level initialization.</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment">/// inserts a call to __msan_init to the module&#39;s constructor list.</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> MemorySanitizer::doInitialization(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M) {</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  TD = getAnalysisIfAvailable&lt;DataLayout&gt;();</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="keywordflow">if</span> (!TD)</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <a class="code" href="namespacellvm_1_1XCoreISD.html#aef28e79e1ebefed9020708b2350b1f10adba71479b3d85460f040da54d76bd319">BL</a>.reset(<a class="code" href="classllvm_1_1SpecialCaseList.html#a764fef55eb958b69088c065dc47e31cc">SpecialCaseList::createOrDie</a>(BlacklistFile));</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = &amp;(M.<a class="code" href="classllvm_1_1Module.html#a0e74af4b7c739f3a14e737c3042b6617">getContext</a>());</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="keywordtype">unsigned</span> PtrSize = TD-&gt;getPointerSizeInBits(<span class="comment">/* AddressSpace */</span>0);</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="keywordflow">switch</span> (PtrSize) {</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordflow">case</span> 64:</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;      ShadowMask = <a class="code" href="MemorySanitizer_8cpp.html#ac3caf762dffb7813be6e548f5b34679c">kShadowMask64</a>;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      OriginOffset = <a class="code" href="MemorySanitizer_8cpp.html#a448181f18ba0f12950842170ef02dc7d">kOriginOffset64</a>;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">case</span> 32:</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      ShadowMask = <a class="code" href="MemorySanitizer_8cpp.html#a20e043ae97a3f82b3318bcd56f5b38f1">kShadowMask32</a>;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      OriginOffset = <a class="code" href="MemorySanitizer_8cpp.html#a34dc6bcc5675764c8085c5916908201e">kOriginOffset32</a>;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      <a class="code" href="namespacellvm.html#a1f6978055dbb761b380de39070e34bd3">report_fatal_error</a>(<span class="stringliteral">&quot;unsupported pointer size&quot;</span>);</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  }</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  IntptrTy = IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a9e003820a7f92a76b0cd56a6cb1bcbc6">getIntPtrTy</a>(TD);</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  OriginTy = IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6ee1d1e7a13072ef579558d64b208d3c">getInt32Ty</a>();</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  ColdCallWeights = <a class="code" href="classllvm_1_1MDBuilder.html">MDBuilder</a>(*C).<a class="code" href="classllvm_1_1MDBuilder.html#ae1af5fc6c4f28376d13aad54edaa0ede">createBranchWeights</a>(1, 1000);</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  OriginStoreWeights = <a class="code" href="classllvm_1_1MDBuilder.html">MDBuilder</a>(*C).<a class="code" href="classllvm_1_1MDBuilder.html#ae1af5fc6c4f28376d13aad54edaa0ede">createBranchWeights</a>(1, 1000);</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <span class="comment">// Insert a call to __msan_init/__msan_track_origins into the module&#39;s CTORs.</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <a class="code" href="namespacellvm.html#ae85c8b3bbab3831fdbb0a4eddebddcdf">appendToGlobalCtors</a>(M, cast&lt;Function&gt;(M.<a class="code" href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                      <span class="stringliteral">&quot;__msan_init&quot;</span>, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a518df7907ab8f1d61c6f47381055eb53">getVoidTy</a>(), NULL)), 0);</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <span class="keywordflow">if</span> (TrackOrigins)</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(M, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6ee1d1e7a13072ef579558d64b208d3c">getInt32Ty</a>(), <span class="keyword">true</span>, <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca696bb1c9b0b0e76bb70c61f68866452a">GlobalValue::WeakODRLinkage</a>,</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                       IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#ac0e8c554bf1c1e117a74d51df89c137d">getInt32</a>(TrackOrigins), <span class="stringliteral">&quot;__msan_track_origins&quot;</span>);</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MemorySanitizer_8cpp.html#ac0f9397797d9aa0abd56ae58920145aa">ClKeepGoing</a>)</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(M, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6ee1d1e7a13072ef579558d64b208d3c">getInt32Ty</a>(), <span class="keyword">true</span>, <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca696bb1c9b0b0e76bb70c61f68866452a">GlobalValue::WeakODRLinkage</a>,</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                       IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#ac0e8c554bf1c1e117a74d51df89c137d">getInt32</a>(<a class="code" href="MemorySanitizer_8cpp.html#ac0f9397797d9aa0abd56ae58920145aa">ClKeepGoing</a>), <span class="stringliteral">&quot;__msan_keep_going&quot;</span>);</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;}</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment">/// \brief A helper class that handles instrumentation of VarArg</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment">/// functions on a particular platform.</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="comment">/// Implementations are expected to insert the instrumentation</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="comment">/// necessary to propagate argument shadow through VarArg function</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment">/// calls. Visit* methods are called during an InstVisitor pass over</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment">/// the function, and should avoid creating new basic blocks. A new</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="comment">/// instance of this class is created for each instrumented function.</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="comment"></span><span class="keyword">struct </span>VarArgHelper {<span class="comment"></span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="comment">  /// \brief Visit a CallSite.</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment"></span>  <span class="keyword">virtual</span> <span class="keywordtype">void</span> visitCallSite(<a class="code" href="classllvm_1_1CallSite.html">CallSite</a> &amp;CS, <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;IRB) = 0;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="comment">  /// \brief Visit a va_start call.</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="comment"></span>  <span class="keyword">virtual</span> <span class="keywordtype">void</span> visitVAStartInst(<a class="code" href="classllvm_1_1VAStartInst.html">VAStartInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) = 0;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="comment">  /// \brief Visit a va_copy call.</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment"></span>  <span class="keyword">virtual</span> <span class="keywordtype">void</span> visitVACopyInst(<a class="code" href="classllvm_1_1VACopyInst.html">VACopyInst</a> &amp;I) = 0;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment">  /// \brief Finalize function instrumentation.</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment">  /// This method is called after visiting all interesting (see above)</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment">  /// instructions in a function.</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment"></span>  <span class="keyword">virtual</span> <span class="keywordtype">void</span> finalizeInstrumentation() = 0;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  <span class="keyword">virtual</span> ~VarArgHelper() {}</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;};</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="keyword">struct </span>MemorySanitizerVisitor;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;VarArgHelper*</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;CreateVarArgHelper(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6f">Func</a>, MemorySanitizer &amp;Msan,</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                   MemorySanitizerVisitor &amp;Visitor);</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment">/// This class does all the work for a given function. Store and Load</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment">/// instructions store and load corresponding shadow and origin</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="comment">/// values. Most instructions propagate shadow from arguments to their</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment">/// return values. Certain instructions (most importantly, BranchInst)</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment">/// test their argument shadow and print reports (with a runtime call) if it&#39;s</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment">/// non-zero.</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment"></span><span class="keyword">struct </span>MemorySanitizerVisitor : <span class="keyword">public</span> <a class="code" href="classllvm_1_1InstVisitor.html">InstVisitor</a>&lt;MemorySanitizerVisitor&gt; {</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  MemorySanitizer &amp;MS;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;PHINode *, 16&gt;</a> ShadowPHINodes, OriginPHINodes;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  <a class="code" href="classllvm_1_1ValueMap.html">ValueMap&lt;Value*, Value*&gt;</a> ShadowMap, OriginMap;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  <a class="code" href="classllvm_1_1OwningPtr.html">OwningPtr&lt;VarArgHelper&gt;</a> VAHelper;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <span class="comment">// The following flags disable parts of MSan instrumentation based on</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  <span class="comment">// blacklist contents and command-line options.</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  <span class="keywordtype">bool</span> InsertChecks;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <span class="keywordtype">bool</span> LoadShadow;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  <span class="keywordtype">bool</span> PoisonStack;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  <span class="keywordtype">bool</span> PoisonUndef;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  <span class="keywordtype">bool</span> CheckReturnValue;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <span class="keyword">struct </span>ShadowOriginAndInsertPoint {</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Shadow;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Origin;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *OrigIns;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    ShadowOriginAndInsertPoint(<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *O, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      : Shadow(S), Origin(O), OrigIns(I) { }</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    ShadowOriginAndInsertPoint() : Shadow(0), Origin(0), OrigIns(0) { }</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  };</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;ShadowOriginAndInsertPoint, 16&gt;</a> InstrumentationList;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction*, 16&gt;</a> StoreList;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;CallSite, 16&gt;</a> IndirectCallList;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  MemorySanitizerVisitor(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;F, MemorySanitizer &amp;MS)</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;      : <a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>(F), MS(MS), VAHelper(CreateVarArgHelper(F, MS, *<span class="keyword">this</span>)) {</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="keywordtype">bool</span> SanitizeFunction = !MS.BL-&gt;isIn(F) &amp;&amp; F.<a class="code" href="classllvm_1_1Function.html#a72873ed64b7be01507a2248b8e756ec8">getAttributes</a>().<a class="code" href="classllvm_1_1AttributeSet.html#a54abbe67d4a53c92652f1666dc19281f">hasAttribute</a>(</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                                                   AttributeSet::FunctionIndex,</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                                                   <a class="code" href="classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60eada8a2c5e520306d4b7cf64e8056fbd83">Attribute::SanitizeMemory</a>);</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    InsertChecks = SanitizeFunction;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    LoadShadow = SanitizeFunction;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    PoisonStack = SanitizeFunction &amp;&amp; <a class="code" href="MemorySanitizer_8cpp.html#a2ff1dc2e13146df957d703f55795141c">ClPoisonStack</a>;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    PoisonUndef = SanitizeFunction &amp;&amp; <a class="code" href="MemorySanitizer_8cpp.html#a6934dd55a499eb5d1406fe26e1ec800f">ClPoisonUndef</a>;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="comment">// FIXME: Consider using SpecialCaseList to specify a list of functions that</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <span class="comment">// must always return fully initialized values. For now, we hardcode &quot;main&quot;.</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    CheckReturnValue = SanitizeFunction &amp;&amp; (F.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() == <span class="stringliteral">&quot;main&quot;</span>);</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<span class="keywordflow">if</span> (!InsertChecks)</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;MemorySanitizer is not inserting checks into &#39;&quot;</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                 &lt;&lt; F.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt; <span class="stringliteral">&quot;&#39;\n&quot;</span>);</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  }</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  <span class="keywordtype">void</span> materializeStores() {</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a> = StoreList.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a>&amp; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = *<a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a>&gt;(StoreList[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;      <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(&amp;I);</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Val = I.<a class="code" href="classllvm_1_1StoreInst.html#a14298313bdf734e2db5a921cc6e861a0">getValueOperand</a>();</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Addr = I.<a class="code" href="classllvm_1_1StoreInst.html#ac03c1c093059ea000216af8dd6f2dbf4">getPointerOperand</a>();</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Shadow = I.<a class="code" href="classllvm_1_1StoreInst.html#a6db4d11981474f069a29e1172da2e7fa">isAtomic</a>() ? getCleanShadow(Val) : getShadow(Val);</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *ShadowPtr = getShadowPtr(Addr, Shadow-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), IRB);</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;      <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *NewSI =</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        IRB.CreateAlignedStore(Shadow, ShadowPtr, I.<a class="code" href="classllvm_1_1StoreInst.html#a3084f1dd69d67e1965fd1fe721a69f2e">getAlignment</a>());</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  STORE: &quot;</span> &lt;&lt; *NewSI &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;      (void)NewSI;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MemorySanitizer_8cpp.html#a69b37c814b922ad8dc3c9d9a766760c3">ClCheckAccessAddress</a>)</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        insertShadowCheck(Addr, &amp;I);</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;      <span class="keywordflow">if</span> (I.<a class="code" href="classllvm_1_1StoreInst.html#a6db4d11981474f069a29e1172da2e7fa">isAtomic</a>())</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        I.<a class="code" href="classllvm_1_1StoreInst.html#a731befae7b8a9a1a2efda559c5420a7f">setOrdering</a>(addReleaseOrdering(I.<a class="code" href="classllvm_1_1StoreInst.html#aba6b1ee9f629801928eb72258021fb72">getOrdering</a>()));</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      <span class="keywordflow">if</span> (MS.TrackOrigins) {</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        <span class="keywordtype">unsigned</span> Alignment = std::max(<a class="code" href="MemorySanitizer_8cpp.html#a216e26e0083fff01b947d564a26b2222">kMinOriginAlignment</a>, I.<a class="code" href="classllvm_1_1StoreInst.html#a3084f1dd69d67e1965fd1fe721a69f2e">getAlignment</a>());</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="MemorySanitizer_8cpp.html#ad0af59fa6adfa874cbfa374c4e0f8468">ClStoreCleanOrigin</a> || isa&lt;StructType&gt;(Shadow-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())) {</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;          IRB.CreateAlignedStore(getOrigin(Val), getOriginPtr(Addr, IRB),</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                                 Alignment);</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *ConvertedShadow = convertToShadowTyNoVec(Shadow, IRB);</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;          <span class="comment">// TODO(eugenis): handle non-zero constant shadow by inserting an</span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;          <span class="comment">// unconditional check (can not simply fail compilation as this could</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;          <span class="comment">// be in the dead code).</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;          <span class="keywordflow">if</span> (isa&lt;Constant&gt;(ConvertedShadow))</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *Cmp = IRB.CreateICmpNE(ConvertedShadow,</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;              getCleanShadow(ConvertedShadow), <span class="stringliteral">&quot;_mscmp&quot;</span>);</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;          <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *CheckTerm =</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;            <a class="code" href="namespacellvm.html#aec3efa15a67284b231fe0b5e6886af4e">SplitBlockAndInsertIfThen</a>(cast&lt;Instruction&gt;(Cmp), <span class="keyword">false</span>,</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                                      MS.OriginStoreWeights);</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;          <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRBNew(CheckTerm);</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;          IRBNew.<a class="code" href="classllvm_1_1IRBuilder.html#a674095e41573ea310d48ba480dca34a9">CreateAlignedStore</a>(getOrigin(Val), getOriginPtr(Addr, IRBNew),</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                                    Alignment);</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        }</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;      }</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    }</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  }</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  <span class="keywordtype">void</span> materializeChecks() {</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a> = InstrumentationList.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Shadow = InstrumentationList[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].Shadow;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *OrigIns = InstrumentationList[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].OrigIns;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(OrigIns);</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  SHAD0 : &quot;</span> &lt;&lt; *Shadow &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *ConvertedShadow = convertToShadowTyNoVec(Shadow, IRB);</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  SHAD1 : &quot;</span> &lt;&lt; *ConvertedShadow &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      <span class="comment">// See the comment in materializeStores().</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      <span class="keywordflow">if</span> (isa&lt;Constant&gt;(ConvertedShadow))</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Cmp = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a609c7b4d7eb90f7c4627da58dc00fa42">CreateICmpNE</a>(ConvertedShadow,</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                                    getCleanShadow(ConvertedShadow), <span class="stringliteral">&quot;_mscmp&quot;</span>);</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *CheckTerm =</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        <a class="code" href="namespacellvm.html#aec3efa15a67284b231fe0b5e6886af4e">SplitBlockAndInsertIfThen</a>(cast&lt;Instruction&gt;(Cmp),</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                                  <span class="comment">/* Unreachable */</span> !<a class="code" href="MemorySanitizer_8cpp.html#ac0f9397797d9aa0abd56ae58920145aa">ClKeepGoing</a>,</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                                  MS.ColdCallWeights);</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(CheckTerm);</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;      <span class="keywordflow">if</span> (MS.TrackOrigins) {</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Origin = InstrumentationList[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].Origin;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a43f7fa52a3fbe01e44c40d9db278ab3e">CreateStore</a>(Origin ? (<a class="code" href="classllvm_1_1Value.html">Value</a>*)Origin : (<a class="code" href="classllvm_1_1Value.html">Value</a>*)IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#ac0e8c554bf1c1e117a74d51df89c137d">getInt32</a>(0),</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                        MS.OriginTLS);</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;      }</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="namespacellvm.html#af6d6a791770bad2303c4399986979e3eae411369b2f0d8f484fec62c3291b1b51">Call</a> = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a7e31b0c02df2aeed261b103b790cc01e">CreateCall</a>(MS.WarningFn);</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;      Call-&gt;<a class="code" href="classllvm_1_1Instruction.html#a7bd545769621a0a9d2cfb074f86f4295">setDebugLoc</a>(OrigIns-&gt;<a class="code" href="classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">getDebugLoc</a>());</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;      IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a7e31b0c02df2aeed261b103b790cc01e">CreateCall</a>(MS.EmptyAsm);</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  CHECK: &quot;</span> &lt;&lt; *Cmp &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    }</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;DONE:\n&quot;</span> &lt;&lt; F);</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  }</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  <span class="keywordtype">void</span> materializeIndirectCalls() {</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a> = IndirectCallList.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;      <a class="code" href="classllvm_1_1CallSite.html">CallSite</a> CS = IndirectCallList[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = CS.<a class="code" href="classllvm_1_1CallSiteBase.html#ae4c67f835911559821939fb23a2e7aff">getInstruction</a>();</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> = I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(I);</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Fn0 = CS.<a class="code" href="classllvm_1_1CallSiteBase.html#a1abce20a9eff3d23ce05331962b1997c">getCalledValue</a>();</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Fn = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a87b363b9dad9f5040ea7e29ea9e60ff5">CreateBitCast</a>(Fn0, MS.AnyFunctionPtrTy);</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MemorySanitizer_8cpp.html#acb80a2d10dece8e1e5c07a6ff3f18e76">ClWrapIndirectCallsFast</a>) {</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        <span class="comment">// Check that call target is inside this module limits.</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Start =</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;            IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a87b363b9dad9f5040ea7e29ea9e60ff5">CreateBitCast</a>(MS.MsandrModuleStart, MS.AnyFunctionPtrTy);</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *End = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a87b363b9dad9f5040ea7e29ea9e60ff5">CreateBitCast</a>(MS.MsandrModuleEnd, MS.AnyFunctionPtrTy);</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NotInThisModule = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a8f55dd4237be6778517ddd752ca8b76a">CreateOr</a>(IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a9c30c87af01068ceae02cd371748d175">CreateICmpULT</a>(Fn, Start),</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                                              IRB.<a class="code" href="classllvm_1_1IRBuilder.html#ae4e36d266be4a2a83a62926162f6f144">CreateICmpUGE</a>(Fn, End));</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *NewFnPhi =</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a2c0d745d9907486632823c56c5a23e86">CreatePHI</a>(Fn0-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), 2, <span class="stringliteral">&quot;msandr.indirect_target&quot;</span>);</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *CheckTerm = <a class="code" href="namespacellvm.html#aec3efa15a67284b231fe0b5e6886af4e">SplitBlockAndInsertIfThen</a>(</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;            cast&lt;Instruction&gt;(NotInThisModule),</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;            <span class="comment">/* Unreachable */</span> <span class="keyword">false</span>, MS.ColdCallWeights);</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(CheckTerm);</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        <span class="comment">// Slow path: call wrapper function to possibly transform the call</span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        <span class="comment">// target.</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewFn = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a87b363b9dad9f5040ea7e29ea9e60ff5">CreateBitCast</a>(</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;            IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a7e31b0c02df2aeed261b103b790cc01e">CreateCall</a>(MS.IndirectCallWrapperFn, Fn), Fn0-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        NewFnPhi-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(Fn0, B);</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        NewFnPhi-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(NewFn, dyn_cast&lt;Instruction&gt;(NewFn)-&gt;<a class="code" href="BasicAliasAnalysis_8cpp.html#a2675de1d8479c7b00387979714da43f7">getParent</a>());</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        CS.<a class="code" href="classllvm_1_1CallSiteBase.html#ae8db0b64d91fa18dfcc01a684708c00b">setCalledFunction</a>(NewFnPhi);</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewFn = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a87b363b9dad9f5040ea7e29ea9e60ff5">CreateBitCast</a>(</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;            IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a7e31b0c02df2aeed261b103b790cc01e">CreateCall</a>(MS.IndirectCallWrapperFn, Fn), Fn0-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        CS.<a class="code" href="classllvm_1_1CallSiteBase.html#ae8db0b64d91fa18dfcc01a684708c00b">setCalledFunction</a>(NewFn);</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;      }</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    }</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  }</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="comment">  /// \brief Add MemorySanitizer instrumentation to a function.</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> runOnFunction() {</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    MS.initializeCallbacks(*F.<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>());</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <span class="keywordflow">if</span> (!MS.TD) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="comment">// In the presence of unreachable blocks, we may see Phi nodes with</span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <span class="comment">// incoming nodes from such blocks. Since InstVisitor skips unreachable</span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <span class="comment">// blocks, such nodes will not have any shadow value associated with them.</span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <span class="comment">// It&#39;s easier to remove unreachable blocks than deal with missing shadow.</span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <a class="code" href="namespacellvm.html#a93b95c8527f4f744ec4ac5d30150f7c5">removeUnreachableBlocks</a>(F);</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="comment">// Iterate all BBs in depth-first order and create shadow instructions</span></div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="comment">// for all instructions (where applicable).</span></div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="comment">// For PHI nodes we create dummy shadow PHIs which will be finalized later.</span></div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1df__iterator.html">df_iterator&lt;BasicBlock*&gt;</a> DI = <a class="code" href="namespacellvm.html#afb9c37d2aea316c81a0b2b63c6b480e7">df_begin</a>(&amp;F.<a class="code" href="classllvm_1_1Function.html#a30f2c362631e3728d2f47a8203071ade">getEntryBlock</a>()),</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;         <a class="code" href="namespacellvm_1_1X86II.html#a97dc14052814702ba0e2b14fb14dd02da2c6497f6ed5314c6fcd9ab88c9528543">DE</a> = <a class="code" href="namespacellvm.html#a849b445fe6bce862c395ea6b97c1f658">df_end</a>(&amp;F.<a class="code" href="classllvm_1_1Function.html#a30f2c362631e3728d2f47a8203071ade">getEntryBlock</a>()); DI != <a class="code" href="namespacellvm_1_1X86II.html#a97dc14052814702ba0e2b14fb14dd02da2c6497f6ed5314c6fcd9ab88c9528543">DE</a>; ++DI) {</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = *DI;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;      visit(*BB);</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    }</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <span class="comment">// Finalize PHI nodes.</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a> = ShadowPHINodes.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;      <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = ShadowPHINodes[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;      <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PNS = cast&lt;PHINode&gt;(getShadow(PN));</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;      <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PNO = MS.TrackOrigins ? cast&lt;PHINode&gt;(getOrigin(PN)) : 0;</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;      <span class="keywordtype">size_t</span> NumValues = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">getNumIncomingValues</a>();</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> v = 0; v &lt; NumValues; v++) {</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        PNS-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(getShadow(PN, v), PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a4c25b6c00c4867281779c81ab64d2081">getIncomingBlock</a>(v));</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        <span class="keywordflow">if</span> (PNO)</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;          PNO-&gt;addIncoming(getOrigin(PN, v), PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a4c25b6c00c4867281779c81ab64d2081">getIncomingBlock</a>(v));</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;      }</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    }</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    VAHelper-&gt;finalizeInstrumentation();</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    <span class="comment">// Delayed instrumentation of StoreInst.</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <span class="comment">// This may add new checks to be inserted later.</span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    materializeStores();</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <span class="comment">// Insert shadow value checks.</span></div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    materializeChecks();</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="comment">// Wrap indirect calls.</span></div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    materializeIndirectCalls();</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  }</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="comment">  /// \brief Compute the shadow type that corresponds to a given Value.</span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Type.html">Type</a> *getShadowTy(<a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="keywordflow">return</span> getShadowTy(V-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  }</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="comment">  /// \brief Compute the shadow type that corresponds to a given Type.</span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Type.html">Type</a> *getShadowTy(<a class="code" href="classllvm_1_1Type.html">Type</a> *OrigTy) {</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <span class="keywordflow">if</span> (!OrigTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9dc5111b1a9b1d5c4652d50f74fe850b">isSized</a>()) {</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    }</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <span class="comment">// For integer type, shadow is the same as the original type.</span></div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <span class="comment">// This may return weird-sized types like i1.</span></div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1IntegerType.html">IntegerType</a> *<a class="code" href="ARMSubtarget_8cpp.html#aae20c66ad7139c9837b1d07d3a8b12c8">IT</a> = dyn_cast&lt;IntegerType&gt;(OrigTy))</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="ARMSubtarget_8cpp.html#aae20c66ad7139c9837b1d07d3a8b12c8">IT</a>;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1VectorType.html">VectorType</a> *VT = dyn_cast&lt;VectorType&gt;(OrigTy)) {</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;      uint32_t EltSize = MS.TD-&gt;getTypeSizeInBits(VT-&gt;getElementType());</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1VectorType.html#ab43657ed1abe2e2ed3a6a394f233ebd0">VectorType::get</a>(<a class="code" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(*MS.C, EltSize),</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                             VT-&gt;getNumElements());</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    }</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StructType.html">StructType</a> *<a class="code" href="namespacellvm_1_1A64DB.html#a6fce8157775f3ec93f326b52b0f1e0f5a4916e736d6b7cc68359b39d5eb50f6db">ST</a> = dyn_cast&lt;StructType&gt;(OrigTy)) {</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Type*, 4&gt;</a> Elements;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a> = <a class="code" href="namespacellvm_1_1A64DB.html#a6fce8157775f3ec93f326b52b0f1e0f5a4916e736d6b7cc68359b39d5eb50f6db">ST</a>-&gt;getNumElements(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        Elements.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(getShadowTy(<a class="code" href="namespacellvm_1_1A64DB.html#a6fce8157775f3ec93f326b52b0f1e0f5a4916e736d6b7cc68359b39d5eb50f6db">ST</a>-&gt;getElementType(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)));</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;      <a class="code" href="classllvm_1_1StructType.html">StructType</a> *Res = <a class="code" href="classllvm_1_1StructType.html#a18fc4545474c6ebb6f7c547f64f4fb31">StructType::get</a>(*MS.C, Elements, <a class="code" href="namespacellvm_1_1A64DB.html#a6fce8157775f3ec93f326b52b0f1e0f5a4916e736d6b7cc68359b39d5eb50f6db">ST</a>-&gt;isPacked());</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;getShadowTy: &quot;</span> &lt;&lt; *<a class="code" href="namespacellvm_1_1A64DB.html#a6fce8157775f3ec93f326b52b0f1e0f5a4916e736d6b7cc68359b39d5eb50f6db">ST</a> &lt;&lt; <span class="stringliteral">&quot; ===&gt; &quot;</span> &lt;&lt; *Res &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      <span class="keywordflow">return</span> Res;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    }</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    uint32_t TypeSize = MS.TD-&gt;getTypeSizeInBits(OrigTy);</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(*MS.C, TypeSize);</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  }</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="comment">  /// \brief Flatten a vector type.</span></div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Type.html">Type</a> *getShadowTyNoVec(<a class="code" href="classllvm_1_1Type.html">Type</a> *ty) {</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1VectorType.html">VectorType</a> *vt = dyn_cast&lt;VectorType&gt;(ty))</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(*MS.C, vt-&gt;getBitWidth());</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <span class="keywordflow">return</span> ty;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  }</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="comment">  /// \brief Convert a shadow value to it&#39;s flattened variant.</span></div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Value.html">Value</a> *convertToShadowTyNoVec(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;IRB) {</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = V-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *NoVecTy = getShadowTyNoVec(Ty);</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="keywordflow">if</span> (Ty == NoVecTy) <span class="keywordflow">return</span> V;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="keywordflow">return</span> IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a87b363b9dad9f5040ea7e29ea9e60ff5">CreateBitCast</a>(V, NoVecTy);</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  }</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="comment">  /// \brief Compute the shadow address that corresponds to a given application</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="comment">  /// address.</span></div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="comment">  /// Shadow = Addr &amp; ~ShadowMask.</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Value.html">Value</a> *getShadowPtr(<a class="code" href="classllvm_1_1Value.html">Value</a> *Addr, <a class="code" href="classllvm_1_1Type.html">Type</a> *ShadowTy,</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;                      <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;IRB) {</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *ShadowLong =</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a197d5dd77cad4560a082900962a830aa">CreateAnd</a>(IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(Addr, MS.IntptrTy),</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;                    <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(MS.IntptrTy, ~MS.ShadowMask));</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <span class="keywordflow">return</span> IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a11d3f8bbc5a14f60879a87175db6695c">CreateIntToPtr</a>(ShadowLong, <a class="code" href="classllvm_1_1PointerType.html#a050a395d1656e546679d8b144d951bb2">PointerType::get</a>(ShadowTy, 0));</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  }</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="comment">  /// \brief Compute the origin address that corresponds to a given application</span></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="comment">  /// address.</span></div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="comment">  /// OriginAddr = (ShadowAddr + OriginOffset) &amp; ~3ULL</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Value.html">Value</a> *getOriginPtr(<a class="code" href="classllvm_1_1Value.html">Value</a> *Addr, <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;IRB) {</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *ShadowLong =</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a197d5dd77cad4560a082900962a830aa">CreateAnd</a>(IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(Addr, MS.IntptrTy),</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                    <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(MS.IntptrTy, ~MS.ShadowMask));</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Add =</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a112f87f5844b5d94c07940f3d47f1e99">CreateAdd</a>(ShadowLong,</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                    <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(MS.IntptrTy, MS.OriginOffset));</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *SecondAnd =</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;      IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a197d5dd77cad4560a082900962a830aa">CreateAnd</a>(Add, <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(MS.IntptrTy, ~3ULL));</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="keywordflow">return</span> IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a11d3f8bbc5a14f60879a87175db6695c">CreateIntToPtr</a>(SecondAnd, <a class="code" href="classllvm_1_1PointerType.html#a050a395d1656e546679d8b144d951bb2">PointerType::get</a>(IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6ee1d1e7a13072ef579558d64b208d3c">getInt32Ty</a>(), 0));</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;  }</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="comment">  /// \brief Compute the shadow address for a given function argument.</span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="comment">  /// Shadow = ParamTLS+ArgOffset.</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Value.html">Value</a> *getShadowPtrForArgument(<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>, <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;IRB,</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                                 <span class="keywordtype">int</span> ArgOffset) {</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Base = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(MS.ParamTLS, MS.IntptrTy);</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    Base = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a112f87f5844b5d94c07940f3d47f1e99">CreateAdd</a>(Base, <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(MS.IntptrTy, ArgOffset));</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <span class="keywordflow">return</span> IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a11d3f8bbc5a14f60879a87175db6695c">CreateIntToPtr</a>(Base, <a class="code" href="classllvm_1_1PointerType.html#a050a395d1656e546679d8b144d951bb2">PointerType::get</a>(getShadowTy(A), 0),</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;                              <span class="stringliteral">&quot;_msarg&quot;</span>);</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  }</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;<span class="comment">  /// \brief Compute the origin address for a given function argument.</span></div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Value.html">Value</a> *getOriginPtrForArgument(<a class="code" href="classllvm_1_1Value.html">Value</a> *A, <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;IRB,</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;                                 <span class="keywordtype">int</span> ArgOffset) {</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <span class="keywordflow">if</span> (!MS.TrackOrigins) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Base = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(MS.ParamOriginTLS, MS.IntptrTy);</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    Base = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a112f87f5844b5d94c07940f3d47f1e99">CreateAdd</a>(Base, <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(MS.IntptrTy, ArgOffset));</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <span class="keywordflow">return</span> IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a11d3f8bbc5a14f60879a87175db6695c">CreateIntToPtr</a>(Base, <a class="code" href="classllvm_1_1PointerType.html#a050a395d1656e546679d8b144d951bb2">PointerType::get</a>(MS.OriginTy, 0),</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                              <span class="stringliteral">&quot;_msarg_o&quot;</span>);</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;  }</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="comment">  /// \brief Compute the shadow address for a retval.</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Value.html">Value</a> *getShadowPtrForRetval(<a class="code" href="classllvm_1_1Value.html">Value</a> *A, <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;IRB) {</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Base = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(MS.RetvalTLS, MS.IntptrTy);</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    <span class="keywordflow">return</span> IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a11d3f8bbc5a14f60879a87175db6695c">CreateIntToPtr</a>(Base, <a class="code" href="classllvm_1_1PointerType.html#a050a395d1656e546679d8b144d951bb2">PointerType::get</a>(getShadowTy(A), 0),</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;                              <span class="stringliteral">&quot;_msret&quot;</span>);</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  }</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="comment">  /// \brief Compute the origin address for a retval.</span></div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Value.html">Value</a> *getOriginPtrForRetval(<a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;IRB) {</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    <span class="comment">// We keep a single origin for the entire retval. Might be too optimistic.</span></div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    <span class="keywordflow">return</span> MS.RetvalOriginTLS;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  }</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="comment">  /// \brief Set SV to be the shadow value for V.</span></div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> setShadow(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <a class="code" href="classllvm_1_1Value.html">Value</a> *SV) {</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    assert(!ShadowMap.<a class="code" href="classllvm_1_1ValueMap.html#a786c962deec79715db211967c2c66573">count</a>(V) &amp;&amp; <span class="stringliteral">&quot;Values may only have one shadow&quot;</span>);</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    ShadowMap[V] = SV;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  }</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;<span class="comment">  /// \brief Set Origin to be the origin value for V.</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> setOrigin(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <a class="code" href="classllvm_1_1Value.html">Value</a> *Origin) {</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    <span class="keywordflow">if</span> (!MS.TrackOrigins) <span class="keywordflow">return</span>;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    assert(!OriginMap.<a class="code" href="classllvm_1_1ValueMap.html#a786c962deec79715db211967c2c66573">count</a>(V) &amp;&amp; <span class="stringliteral">&quot;Values may only have one origin&quot;</span>);</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ORIGIN: &quot;</span> &lt;&lt; *V &lt;&lt; <span class="stringliteral">&quot;  ==&gt; &quot;</span> &lt;&lt; *Origin &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    OriginMap[V] = Origin;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  }</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;<span class="comment">  /// \brief Create a clean shadow value for a given value.</span></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;<span class="comment">  /// Clean shadow (all zeroes) means all bits of the value are defined</span></div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;<span class="comment">  /// (initialized).</span></div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *getCleanShadow(<a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *ShadowTy = getShadowTy(V);</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <span class="keywordflow">if</span> (!ShadowTy)</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(ShadowTy);</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;  }</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;<span class="comment">  /// \brief Create a dirty shadow of a given shadow type.</span></div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *getPoisonedShadow(<a class="code" href="classllvm_1_1Type.html">Type</a> *ShadowTy) {</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    assert(ShadowTy);</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    <span class="keywordflow">if</span> (isa&lt;IntegerType&gt;(ShadowTy) || isa&lt;VectorType&gt;(ShadowTy))</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">Constant::getAllOnesValue</a>(ShadowTy);</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <a class="code" href="classllvm_1_1StructType.html">StructType</a> *<a class="code" href="namespacellvm_1_1A64DB.html#a6fce8157775f3ec93f326b52b0f1e0f5a4916e736d6b7cc68359b39d5eb50f6db">ST</a> = cast&lt;StructType&gt;(ShadowTy);</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Constant *, 4&gt;</a> Vals;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a> = ST-&gt;<a class="code" href="classllvm_1_1StructType.html#aa2113dcf8c96c19c9a2abf786b9ad3b7">getNumElements</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      Vals.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(getPoisonedShadow(ST-&gt;<a class="code" href="classllvm_1_1StructType.html#a2f54639fcb5162f6f51192eb1697d2ad">getElementType</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)));</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantStruct.html#a54fcfa620deb80373f489ba2fdad7643">ConstantStruct::get</a>(ST, Vals);</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  }</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;<span class="comment">  /// \brief Create a dirty shadow for a given value.</span></div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *getPoisonedShadow(<a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *ShadowTy = getShadowTy(V);</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    <span class="keywordflow">if</span> (!ShadowTy)</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <span class="keywordflow">return</span> getPoisonedShadow(ShadowTy);</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  }</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;<span class="comment">  /// \brief Create a clean (zero) origin.</span></div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Value.html">Value</a> *getCleanOrigin() {</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(MS.OriginTy);</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  }</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;<span class="comment">  /// \brief Get the shadow value for a given Value.</span></div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;<span class="comment">  /// This function either returns the value set earlier with setShadow,</span></div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;<span class="comment">  /// or extracts if from ParamTLS (for function arguments).</span></div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Value.html">Value</a> *getShadow(<a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(V)) {</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;      <span class="comment">// For instructions the shadow is already stored in the map.</span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Shadow = ShadowMap[V];</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;      <span class="keywordflow">if</span> (!Shadow) {</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;No shadow: &quot;</span> &lt;&lt; *V &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; *(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent()));</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;        (void)<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;        assert(Shadow &amp;&amp; <span class="stringliteral">&quot;No shadow for a value&quot;</span>);</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;      }</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;      <span class="keywordflow">return</span> Shadow;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    }</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1UndefValue.html">UndefValue</a> *U = dyn_cast&lt;UndefValue&gt;(V)) {</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *AllOnes = PoisonUndef ? getPoisonedShadow(V) : getCleanShadow(V);</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Undef: &quot;</span> &lt;&lt; *U &lt;&lt; <span class="stringliteral">&quot; ==&gt; &quot;</span> &lt;&lt; *AllOnes &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;      (void)U;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;      <span class="keywordflow">return</span> AllOnes;</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    }</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Argument.html">Argument</a> *A = dyn_cast&lt;Argument&gt;(V)) {</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;      <span class="comment">// For arguments we compute the shadow on demand and store it in the map.</span></div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> **ShadowPtr = &amp;ShadowMap[V];</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;      <span class="keywordflow">if</span> (*ShadowPtr)</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        <span class="keywordflow">return</span> *ShadowPtr;</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;      <a class="code" href="classllvm_1_1Function.html">Function</a> *F = A-&gt;getParent();</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;      <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> EntryIRB(F-&gt;<a class="code" href="classllvm_1_1Function.html#a30f2c362631e3728d2f47a8203071ade">getEntryBlock</a>().<a class="code" href="classllvm_1_1BasicBlock.html#a0e73f4e09745bb69fdd7b15232c45428">getFirstNonPHI</a>());</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;      <span class="keywordtype">unsigned</span> ArgOffset = 0;</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">Function::arg_iterator</a> AI = F-&gt;<a class="code" href="classllvm_1_1Function.html#a8bf193a781a92cae52d7f9216d0824f8">arg_begin</a>(), AE = F-&gt;<a class="code" href="classllvm_1_1Function.html#a8300ac1ef141b8a7c63c13fa9369d976">arg_end</a>();</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;           AI != AE; ++AI) {</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        <span class="keywordflow">if</span> (!AI-&gt;getType()-&gt;isSized()) {</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;          <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Arg is not sized\n&quot;</span>);</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;        }</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;        <span class="keywordtype">unsigned</span> Size = AI-&gt;hasByValAttr()</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;          ? MS.TD-&gt;getTypeAllocSize(AI-&gt;getType()-&gt;getPointerElementType())</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;          : MS.TD-&gt;getTypeAllocSize(AI-&gt;getType());</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;        <span class="keywordflow">if</span> (A == AI) {</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *Base = getShadowPtrForArgument(AI, EntryIRB, ArgOffset);</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;          <span class="keywordflow">if</span> (AI-&gt;hasByValAttr()) {</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;            <span class="comment">// ByVal pointer itself has clean shadow. We copy the actual</span></div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;            <span class="comment">// argument shadow to the underlying memory.</span></div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;            <span class="comment">// Figure out maximal valid memcpy alignment.</span></div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;            <span class="keywordtype">unsigned</span> ArgAlign = AI-&gt;getParamAlignment();</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;            <span class="keywordflow">if</span> (ArgAlign == 0) {</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;              <a class="code" href="classllvm_1_1Type.html">Type</a> *EltType = A-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a5c09d927a0079ad16e8367271efe9bc2">getPointerElementType</a>();</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;              ArgAlign = MS.TD-&gt;getABITypeAlignment(EltType);</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;            }</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;            <span class="keywordtype">unsigned</span> CopyAlign = std::min(ArgAlign, <a class="code" href="MemorySanitizer_8cpp.html#a18599dcc3be2ad58c3ed01ea18609782">kShadowTLSAlignment</a>);</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;            <a class="code" href="classllvm_1_1Value.html">Value</a> *Cpy = EntryIRB.CreateMemCpy(</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                getShadowPtr(V, EntryIRB.getInt8Ty(), EntryIRB), Base, Size,</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;                CopyAlign);</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;            <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  ByValCpy: &quot;</span> &lt;&lt; *Cpy &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;            (void)Cpy;</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;            *ShadowPtr = getCleanShadow(V);</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;          } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;            *ShadowPtr = EntryIRB.CreateAlignedLoad(Base, <a class="code" href="MemorySanitizer_8cpp.html#a18599dcc3be2ad58c3ed01ea18609782">kShadowTLSAlignment</a>);</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;          }</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;          <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  ARG:    &quot;</span>  &lt;&lt; *AI &lt;&lt; <span class="stringliteral">&quot; ==&gt; &quot;</span> &lt;&lt;</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;                **ShadowPtr &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;          <span class="keywordflow">if</span> (MS.TrackOrigins) {</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;            <a class="code" href="classllvm_1_1Value.html">Value</a>* OriginPtr = getOriginPtrForArgument(AI, EntryIRB, ArgOffset);</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;            setOrigin(A, EntryIRB.CreateLoad(OriginPtr));</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;          }</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        }</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        ArgOffset += <a class="code" href="classllvm_1_1DataLayout.html#a23bc21c600966b6ec9f9a5e588dba349">DataLayout::RoundUpAlignment</a>(Size, <a class="code" href="MemorySanitizer_8cpp.html#a18599dcc3be2ad58c3ed01ea18609782">kShadowTLSAlignment</a>);</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;      }</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;      assert(*ShadowPtr &amp;&amp; <span class="stringliteral">&quot;Could not find shadow for an argument&quot;</span>);</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;      <span class="keywordflow">return</span> *ShadowPtr;</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    }</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    <span class="comment">// For everything else the shadow is zero.</span></div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    <span class="keywordflow">return</span> getCleanShadow(V);</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  }</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;<span class="comment">  /// \brief Get the shadow for i-th argument of the instruction I.</span></div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Value.html">Value</a> *getShadow(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="keywordtype">int</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    <span class="keywordflow">return</span> getShadow(I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(i));</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  }</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;<span class="comment">  /// \brief Get the origin for a value.</span></div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Value.html">Value</a> *getOrigin(<a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    <span class="keywordflow">if</span> (!MS.TrackOrigins) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    <span class="keywordflow">if</span> (isa&lt;Instruction&gt;(V) || isa&lt;Argument&gt;(V)) {</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Origin = OriginMap[V];</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;      <span class="keywordflow">if</span> (!Origin) {</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;NO ORIGIN: &quot;</span> &lt;&lt; *V &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;        Origin = getCleanOrigin();</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      }</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;      <span class="keywordflow">return</span> Origin;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    }</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    <span class="keywordflow">return</span> getCleanOrigin();</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;  }</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;<span class="comment">  /// \brief Get the origin for i-th argument of the instruction I.</span></div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Value.html">Value</a> *getOrigin(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I, <span class="keywordtype">int</span> i) {</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    <span class="keywordflow">return</span> getOrigin(I-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(i));</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  }</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;<span class="comment">  /// \brief Remember the place where a shadow check should be inserted.</span></div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="comment">  /// This location will be later instrumented with a check that will print a</span></div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="comment">  /// UMR warning in runtime if the shadow value is not 0.</span></div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> insertShadowCheck(<a class="code" href="classllvm_1_1Value.html">Value</a> *Shadow, <a class="code" href="classllvm_1_1Value.html">Value</a> *Origin, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *OrigIns) {</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    assert(Shadow);</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <span class="keywordflow">if</span> (!InsertChecks) <span class="keywordflow">return</span>;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *ShadowTy = Shadow-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    assert((isa&lt;IntegerType&gt;(ShadowTy) || isa&lt;VectorType&gt;(ShadowTy)) &amp;&amp;</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;           <span class="stringliteral">&quot;Can only insert checks for integer and vector shadow types&quot;</span>);</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    InstrumentationList.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;        ShadowOriginAndInsertPoint(Shadow, Origin, OrigIns));</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;  }</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;<span class="comment">  /// \brief Remember the place where a shadow check should be inserted.</span></div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;<span class="comment">  /// This location will be later instrumented with a check that will print a</span></div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;<span class="comment">  /// UMR warning in runtime if the value is not fully defined.</span></div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> insertShadowCheck(<a class="code" href="classllvm_1_1Value.html">Value</a> *Val, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *OrigIns) {</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    assert(Val);</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Shadow = dyn_cast_or_null&lt;Instruction&gt;(getShadow(Val));</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <span class="keywordflow">if</span> (!Shadow) <span class="keywordflow">return</span>;</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Origin = dyn_cast_or_null&lt;Instruction&gt;(getOrigin(Val));</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    insertShadowCheck(Shadow, Origin, OrigIns);</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  }</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02">AtomicOrdering</a> addReleaseOrdering(<a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02">AtomicOrdering</a> <a class="code" href="Target_2X86_2README_8txt.html#a668d6902e1f37328dfbbb1f75aa82fc9">a</a>) {</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    <span class="keywordflow">switch</span> (a) {</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02ad1fbbfdf093cdd213b0df02550ac94d0">NotAtomic</a>:</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02ad1fbbfdf093cdd213b0df02550ac94d0">NotAtomic</a>;</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02a531de0ce6ad557d61b2a1c737e767d07">Unordered</a>:</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02a7754cbc42d54bad3979ed1789b780b28">Monotonic</a>:</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02a489aa5052a55520044e1e82b2da7a336">Release</a>:</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02a489aa5052a55520044e1e82b2da7a336">Release</a>;</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02a53e60dc61e8ffd260c7e21f04054265a">Acquire</a>:</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02a0fb0d2c15b4a7654025d4db4d2953e93">AcquireRelease</a>:</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02a0fb0d2c15b4a7654025d4db4d2953e93">AcquireRelease</a>;</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02ad642db52d1fbfed4f42253c64f23018f">SequentiallyConsistent</a>:</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02ad642db52d1fbfed4f42253c64f23018f">SequentiallyConsistent</a>;</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    }</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unknown ordering&quot;</span>);</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;  }</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02">AtomicOrdering</a> addAcquireOrdering(<a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02">AtomicOrdering</a> a) {</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    <span class="keywordflow">switch</span> (a) {</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02ad1fbbfdf093cdd213b0df02550ac94d0">NotAtomic</a>:</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02ad1fbbfdf093cdd213b0df02550ac94d0">NotAtomic</a>;</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02a531de0ce6ad557d61b2a1c737e767d07">Unordered</a>:</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02a7754cbc42d54bad3979ed1789b780b28">Monotonic</a>:</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02a53e60dc61e8ffd260c7e21f04054265a">Acquire</a>:</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02a53e60dc61e8ffd260c7e21f04054265a">Acquire</a>;</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02a489aa5052a55520044e1e82b2da7a336">Release</a>:</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02a0fb0d2c15b4a7654025d4db4d2953e93">AcquireRelease</a>:</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02a0fb0d2c15b4a7654025d4db4d2953e93">AcquireRelease</a>;</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02ad642db52d1fbfed4f42253c64f23018f">SequentiallyConsistent</a>:</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02ad642db52d1fbfed4f42253c64f23018f">SequentiallyConsistent</a>;</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    }</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unknown ordering&quot;</span>);</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;  }</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;  <span class="comment">// ------------------- Visitors.</span></div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;<span class="comment">  /// \brief Instrument LoadInst</span></div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;<span class="comment">  /// Loads the corresponding shadow and (optionally) origin.</span></div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;<span class="comment">  /// Optionally, checks that the load address is fully defined.</span></div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> visitLoadInst(<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> &amp;I) {</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    assert(I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9dc5111b1a9b1d5c4652d50f74fe850b">isSized</a>() &amp;&amp; <span class="stringliteral">&quot;Load type must have size&quot;</span>);</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(I.<a class="code" href="classllvm_1_1ilist__node.html#a6ac308903849239f2f308aa180dda61b">getNextNode</a>());</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *ShadowTy = getShadowTy(&amp;I);</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Addr = I.<a class="code" href="classllvm_1_1LoadInst.html#ad47eefa1d094f60494b6b927061ca001">getPointerOperand</a>();</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    <span class="keywordflow">if</span> (LoadShadow) {</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *ShadowPtr = getShadowPtr(Addr, ShadowTy, IRB);</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;      setShadow(&amp;I,</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;                IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a6afa862daad32dd85807c27ce804b139">CreateAlignedLoad</a>(ShadowPtr, I.<a class="code" href="classllvm_1_1LoadInst.html#ad1168fc42bcba1b71217a4969483671a">getAlignment</a>(), <span class="stringliteral">&quot;_msld&quot;</span>));</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;      setShadow(&amp;I, getCleanShadow(&amp;I));</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    }</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MemorySanitizer_8cpp.html#a69b37c814b922ad8dc3c9d9a766760c3">ClCheckAccessAddress</a>)</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;      insertShadowCheck(I.<a class="code" href="classllvm_1_1LoadInst.html#ad47eefa1d094f60494b6b927061ca001">getPointerOperand</a>(), &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    <span class="keywordflow">if</span> (I.<a class="code" href="classllvm_1_1LoadInst.html#a8275b4d0939145c7adad690a7ed68ee2">isAtomic</a>())</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;      I.<a class="code" href="classllvm_1_1LoadInst.html#a46adba111f7580ebfbb869a008de1818">setOrdering</a>(addAcquireOrdering(I.<a class="code" href="classllvm_1_1LoadInst.html#a8c0a29ecc14dc5afe7573bf616da2361">getOrdering</a>()));</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <span class="keywordflow">if</span> (MS.TrackOrigins) {</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;      <span class="keywordflow">if</span> (LoadShadow) {</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;        <span class="keywordtype">unsigned</span> Alignment = std::max(<a class="code" href="MemorySanitizer_8cpp.html#a216e26e0083fff01b947d564a26b2222">kMinOriginAlignment</a>, I.<a class="code" href="classllvm_1_1LoadInst.html#ad1168fc42bcba1b71217a4969483671a">getAlignment</a>());</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;        setOrigin(&amp;I,</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;                  IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a6afa862daad32dd85807c27ce804b139">CreateAlignedLoad</a>(getOriginPtr(Addr, IRB), Alignment));</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        setOrigin(&amp;I, getCleanOrigin());</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;      }</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    }</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;  }</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;<span class="comment">  /// \brief Instrument StoreInst</span></div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;<span class="comment">  /// Stores the corresponding shadow and (optionally) origin.</span></div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;<span class="comment">  /// Optionally, checks that the store address is fully defined.</span></div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> visitStoreInst(<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> &amp;I) {</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    StoreList.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(&amp;I);</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;  }</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;  <span class="keywordtype">void</span> handleCASOrRMW(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;I) {</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    assert(isa&lt;AtomicRMWInst&gt;(I) || isa&lt;AtomicCmpXchgInst&gt;(I));</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(&amp;I);</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Addr = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *ShadowPtr = getShadowPtr(Addr, I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), IRB);</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MemorySanitizer_8cpp.html#a69b37c814b922ad8dc3c9d9a766760c3">ClCheckAccessAddress</a>)</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;      insertShadowCheck(Addr, &amp;I);</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    <span class="comment">// Only test the conditional argument of cmpxchg instruction.</span></div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    <span class="comment">// The other argument can potentially be uninitialized, but we can not</span></div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <span class="comment">// detect this situation reliably without possible false positives.</span></div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    <span class="keywordflow">if</span> (isa&lt;AtomicCmpXchgInst&gt;(I))</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;      insertShadowCheck(I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1), &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a43f7fa52a3fbe01e44c40d9db278ab3e">CreateStore</a>(getCleanShadow(&amp;I), ShadowPtr);</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    setShadow(&amp;I, getCleanShadow(&amp;I));</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  }</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;  <span class="keywordtype">void</span> visitAtomicRMWInst(<a class="code" href="classllvm_1_1AtomicRMWInst.html">AtomicRMWInst</a> &amp;I) {</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    handleCASOrRMW(I);</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    I.<a class="code" href="classllvm_1_1AtomicRMWInst.html#a5d1f392e4e23933104dbc6f0a5e78497">setOrdering</a>(addReleaseOrdering(I.<a class="code" href="classllvm_1_1AtomicRMWInst.html#a97b357327005620f94c587e4d7a19d71">getOrdering</a>()));</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;  }</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;  <span class="keywordtype">void</span> visitAtomicCmpXchgInst(<a class="code" href="classllvm_1_1AtomicCmpXchgInst.html">AtomicCmpXchgInst</a> &amp;I) {</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    handleCASOrRMW(I);</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    I.<a class="code" href="classllvm_1_1AtomicCmpXchgInst.html#abee8a2e303df959dfd3cf384f58a30d3">setOrdering</a>(addReleaseOrdering(I.<a class="code" href="classllvm_1_1AtomicCmpXchgInst.html#a51fec3c85c85fd5119a9eb57a89f3160">getOrdering</a>()));</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;  }</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;  <span class="comment">// Vector manipulation.</span></div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;  <span class="keywordtype">void</span> visitExtractElementInst(<a class="code" href="classllvm_1_1ExtractElementInst.html">ExtractElementInst</a> &amp;I) {</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    insertShadowCheck(I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1), &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(&amp;I);</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    setShadow(&amp;I, IRB.CreateExtractElement(getShadow(&amp;I, 0), I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1),</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;              <span class="stringliteral">&quot;_msprop&quot;</span>));</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    setOrigin(&amp;I, getOrigin(&amp;I, 0));</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;  }</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;  <span class="keywordtype">void</span> visitInsertElementInst(<a class="code" href="classllvm_1_1InsertElementInst.html">InsertElementInst</a> &amp;I) {</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    insertShadowCheck(I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(2), &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(&amp;I);</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    setShadow(&amp;I, IRB.CreateInsertElement(getShadow(&amp;I, 0), getShadow(&amp;I, 1),</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;              I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(2), <span class="stringliteral">&quot;_msprop&quot;</span>));</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    setOriginForNaryOp(I);</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;  }</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  <span class="keywordtype">void</span> visitShuffleVectorInst(<a class="code" href="classllvm_1_1ShuffleVectorInst.html">ShuffleVectorInst</a> &amp;I) {</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    insertShadowCheck(I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(2), &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(&amp;I);</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    setShadow(&amp;I, IRB.CreateShuffleVector(getShadow(&amp;I, 0), getShadow(&amp;I, 1),</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;              I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(2), <span class="stringliteral">&quot;_msprop&quot;</span>));</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    setOriginForNaryOp(I);</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  }</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;  <span class="comment">// Casts.</span></div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;  <span class="keywordtype">void</span> visitSExtInst(<a class="code" href="classllvm_1_1SExtInst.html">SExtInst</a> &amp;I) {</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(&amp;I);</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    setShadow(&amp;I, IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a2081b822b121723df82782c24314a37e">CreateSExt</a>(getShadow(&amp;I, 0), I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), <span class="stringliteral">&quot;_msprop&quot;</span>));</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    setOrigin(&amp;I, getOrigin(&amp;I, 0));</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;  }</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  <span class="keywordtype">void</span> visitZExtInst(<a class="code" href="classllvm_1_1ZExtInst.html">ZExtInst</a> &amp;I) {</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(&amp;I);</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    setShadow(&amp;I, IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a277dfeaad2a2ada72a6024b0eedc5301">CreateZExt</a>(getShadow(&amp;I, 0), I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), <span class="stringliteral">&quot;_msprop&quot;</span>));</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    setOrigin(&amp;I, getOrigin(&amp;I, 0));</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;  }</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;  <span class="keywordtype">void</span> visitTruncInst(<a class="code" href="classllvm_1_1TruncInst.html">TruncInst</a> &amp;I) {</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(&amp;I);</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    setShadow(&amp;I, IRB.<a class="code" href="classllvm_1_1IRBuilder.html#aa933549689e79685bb67de64dddc9f7c">CreateTrunc</a>(getShadow(&amp;I, 0), I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), <span class="stringliteral">&quot;_msprop&quot;</span>));</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    setOrigin(&amp;I, getOrigin(&amp;I, 0));</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;  }</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;  <span class="keywordtype">void</span> visitBitCastInst(<a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a> &amp;I) {</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(&amp;I);</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    setShadow(&amp;I, IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a87b363b9dad9f5040ea7e29ea9e60ff5">CreateBitCast</a>(getShadow(&amp;I, 0), getShadowTy(&amp;I)));</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    setOrigin(&amp;I, getOrigin(&amp;I, 0));</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;  }</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;  <span class="keywordtype">void</span> visitPtrToIntInst(<a class="code" href="classllvm_1_1PtrToIntInst.html">PtrToIntInst</a> &amp;I) {</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(&amp;I);</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    setShadow(&amp;I, IRB.<a class="code" href="classllvm_1_1IRBuilder.html#afdd8a08bfcbd94f60d166a71a3e79ff3">CreateIntCast</a>(getShadow(&amp;I, 0), getShadowTy(&amp;I), <span class="keyword">false</span>,</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;             <span class="stringliteral">&quot;_msprop_ptrtoint&quot;</span>));</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;    setOrigin(&amp;I, getOrigin(&amp;I, 0));</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;  }</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;  <span class="keywordtype">void</span> visitIntToPtrInst(<a class="code" href="classllvm_1_1IntToPtrInst.html">IntToPtrInst</a> &amp;I) {</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(&amp;I);</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    setShadow(&amp;I, IRB.<a class="code" href="classllvm_1_1IRBuilder.html#afdd8a08bfcbd94f60d166a71a3e79ff3">CreateIntCast</a>(getShadow(&amp;I, 0), getShadowTy(&amp;I), <span class="keyword">false</span>,</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;             <span class="stringliteral">&quot;_msprop_inttoptr&quot;</span>));</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    setOrigin(&amp;I, getOrigin(&amp;I, 0));</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;  }</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  <span class="keywordtype">void</span> visitFPToSIInst(<a class="code" href="classllvm_1_1CastInst.html">CastInst</a>&amp; I) { handleShadowOr(I); }</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;  <span class="keywordtype">void</span> visitFPToUIInst(<a class="code" href="classllvm_1_1CastInst.html">CastInst</a>&amp; I) { handleShadowOr(I); }</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;  <span class="keywordtype">void</span> visitSIToFPInst(<a class="code" href="classllvm_1_1CastInst.html">CastInst</a>&amp; I) { handleShadowOr(I); }</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;  <span class="keywordtype">void</span> visitUIToFPInst(<a class="code" href="classllvm_1_1CastInst.html">CastInst</a>&amp; I) { handleShadowOr(I); }</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;  <span class="keywordtype">void</span> visitFPExtInst(<a class="code" href="classllvm_1_1CastInst.html">CastInst</a>&amp; I) { handleShadowOr(I); }</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;  <span class="keywordtype">void</span> visitFPTruncInst(<a class="code" href="classllvm_1_1CastInst.html">CastInst</a>&amp; I) { handleShadowOr(I); }</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;<span class="comment">  /// \brief Propagate shadow for bitwise AND.</span></div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;<span class="comment">  /// This code is exact, i.e. if, for example, a bit in the left argument</span></div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;<span class="comment">  /// is defined and 0, then neither the value not definedness of the</span></div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;<span class="comment">  /// corresponding bit in B don&#39;t affect the resulting shadow.</span></div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> visitAnd(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;I) {</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(&amp;I);</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    <span class="comment">//  &quot;And&quot; of 0 and a poisoned value results in unpoisoned value.</span></div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    <span class="comment">//  1&amp;1 =&gt; 1;     0&amp;1 =&gt; 0;     p&amp;1 =&gt; p;</span></div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    <span class="comment">//  1&amp;0 =&gt; 0;     0&amp;0 =&gt; 0;     p&amp;0 =&gt; 0;</span></div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    <span class="comment">//  1&amp;p =&gt; p;     0&amp;p =&gt; 0;     p&amp;p =&gt; p;</span></div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    <span class="comment">//  S = (S1 &amp; S2) | (V1 &amp; S2) | (S1 &amp; V2)</span></div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *S1 = getShadow(&amp;I, 0);</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *S2 = getShadow(&amp;I, 1);</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *V1 = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a> = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    <span class="keywordflow">if</span> (V1-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() != S1-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()) {</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;      V1 = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#afdd8a08bfcbd94f60d166a71a3e79ff3">CreateIntCast</a>(V1, S1-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), <span class="keyword">false</span>);</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;      V2 = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#afdd8a08bfcbd94f60d166a71a3e79ff3">CreateIntCast</a>(V2, S2-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), <span class="keyword">false</span>);</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    }</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *S1S2 = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a197d5dd77cad4560a082900962a830aa">CreateAnd</a>(S1, S2);</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *V1S2 = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a197d5dd77cad4560a082900962a830aa">CreateAnd</a>(V1, S2);</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *S1V2 = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a197d5dd77cad4560a082900962a830aa">CreateAnd</a>(S1, V2);</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    setShadow(&amp;I, IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a8f55dd4237be6778517ddd752ca8b76a">CreateOr</a>(S1S2, IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a8f55dd4237be6778517ddd752ca8b76a">CreateOr</a>(V1S2, S1V2)));</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    setOriginForNaryOp(I);</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  }</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  <span class="keywordtype">void</span> visitOr(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;I) {</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(&amp;I);</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    <span class="comment">//  &quot;Or&quot; of 1 and a poisoned value results in unpoisoned value.</span></div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    <span class="comment">//  1|1 =&gt; 1;     0|1 =&gt; 1;     p|1 =&gt; 1;</span></div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    <span class="comment">//  1|0 =&gt; 1;     0|0 =&gt; 0;     p|0 =&gt; p;</span></div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    <span class="comment">//  1|p =&gt; 1;     0|p =&gt; p;     p|p =&gt; p;</span></div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    <span class="comment">//  S = (S1 &amp; S2) | (~V1 &amp; S2) | (S1 &amp; ~V2)</span></div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *S1 = getShadow(&amp;I, 0);</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *S2 = getShadow(&amp;I, 1);</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *V1 = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a9f4834f0678648c5ac86c9ab37210be3">CreateNot</a>(I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0));</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a> = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a9f4834f0678648c5ac86c9ab37210be3">CreateNot</a>(I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    <span class="keywordflow">if</span> (V1-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() != S1-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()) {</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;      V1 = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#afdd8a08bfcbd94f60d166a71a3e79ff3">CreateIntCast</a>(V1, S1-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), <span class="keyword">false</span>);</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;      V2 = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#afdd8a08bfcbd94f60d166a71a3e79ff3">CreateIntCast</a>(V2, S2-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), <span class="keyword">false</span>);</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    }</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *S1S2 = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a197d5dd77cad4560a082900962a830aa">CreateAnd</a>(S1, S2);</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *V1S2 = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a197d5dd77cad4560a082900962a830aa">CreateAnd</a>(V1, S2);</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *S1V2 = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a197d5dd77cad4560a082900962a830aa">CreateAnd</a>(S1, V2);</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    setShadow(&amp;I, IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a8f55dd4237be6778517ddd752ca8b76a">CreateOr</a>(S1S2, IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a8f55dd4237be6778517ddd752ca8b76a">CreateOr</a>(V1S2, S1V2)));</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    setOriginForNaryOp(I);</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;  }</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;<span class="comment">  /// \brief Default propagation of shadow and/or origin.</span></div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;<span class="comment">  /// This class implements the general case of shadow propagation, used in all</span></div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;<span class="comment">  /// cases where we don&#39;t know and/or don&#39;t care about what the operation</span></div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;<span class="comment">  /// actually does. It converts all input shadow values to a common type</span></div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;<span class="comment">  /// (extending or truncating as necessary), and bitwise OR&#39;s them.</span></div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;<span class="comment">  /// This is much cheaper than inserting checks (i.e. requiring inputs to be</span></div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;<span class="comment">  /// fully initialized), and less prone to false positives.</span></div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;<span class="comment">  /// This class also implements the general case of origin propagation. For a</span></div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;<span class="comment">  /// Nary operation, result origin is set to the origin of an argument that is</span></div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;<span class="comment">  /// not entirely initialized. If there is more than one such arguments, the</span></div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;<span class="comment">  /// rightmost of them is picked. It does not matter which one is picked if all</span></div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;<span class="comment">  /// arguments are initialized.</span></div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;<span class="comment"></span>  <span class="keyword">template</span> &lt;<span class="keywordtype">bool</span> CombineShadow&gt;</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;  <span class="keyword">class </span>Combiner {</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Shadow;</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Origin;</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;IRB;</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    MemorySanitizerVisitor *MSV;</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;  <span class="keyword">public</span>:</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    Combiner(MemorySanitizerVisitor *MSV, <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;IRB) :</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;      Shadow(0), Origin(0), IRB(IRB), MSV(MSV) {}</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;<span class="comment">    /// \brief Add a pair of shadow and origin values to the mix.</span></div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;<span class="comment"></span>    Combiner &amp;Add(<a class="code" href="classllvm_1_1Value.html">Value</a> *OpShadow, <a class="code" href="classllvm_1_1Value.html">Value</a> *OpOrigin) {</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;      <span class="keywordflow">if</span> (CombineShadow) {</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;        assert(OpShadow);</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;        <span class="keywordflow">if</span> (!Shadow)</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;          Shadow = OpShadow;</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;        <span class="keywordflow">else</span> {</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;          OpShadow = MSV-&gt;CreateShadowCast(IRB, OpShadow, Shadow-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;          Shadow = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a8f55dd4237be6778517ddd752ca8b76a">CreateOr</a>(Shadow, OpShadow, <span class="stringliteral">&quot;_msprop&quot;</span>);</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;        }</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;      }</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;      <span class="keywordflow">if</span> (MSV-&gt;MS.TrackOrigins) {</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;        assert(OpOrigin);</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;        <span class="keywordflow">if</span> (!Origin) {</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;          Origin = OpOrigin;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *FlatShadow = MSV-&gt;convertToShadowTyNoVec(OpShadow, IRB);</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *Cond = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a609c7b4d7eb90f7c4627da58dc00fa42">CreateICmpNE</a>(FlatShadow,</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;                                         MSV-&gt;getCleanShadow(FlatShadow));</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;          Origin = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#ae19d9d49f39d404703b42161ce788954">CreateSelect</a>(Cond, OpOrigin, Origin);</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;        }</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;      }</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;      <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    }</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;<span class="comment">    /// \brief Add an application value to the mix.</span></div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;<span class="comment"></span>    Combiner &amp;Add(<a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *OpShadow = MSV-&gt;getShadow(V);</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *OpOrigin = MSV-&gt;MS.TrackOrigins ? MSV-&gt;getOrigin(V) : 0;</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;      <span class="keywordflow">return</span> Add(OpShadow, OpOrigin);</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    }</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;<span class="comment">    /// \brief Set the current combined values as the given instruction&#39;s shadow</span></div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;<span class="comment">    /// and origin.</span></div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> Done(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I) {</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;      <span class="keywordflow">if</span> (CombineShadow) {</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;        assert(Shadow);</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;        Shadow = MSV-&gt;CreateShadowCast(IRB, Shadow, MSV-&gt;getShadowTy(I));</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;        MSV-&gt;setShadow(I, Shadow);</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;      }</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;      <span class="keywordflow">if</span> (MSV-&gt;MS.TrackOrigins) {</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;        assert(Origin);</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;        MSV-&gt;setOrigin(I, Origin);</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;      }</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    }</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;  };</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;  <span class="keyword">typedef</span> Combiner&lt;true&gt; ShadowAndOriginCombiner;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;  <span class="keyword">typedef</span> Combiner&lt;false&gt; OriginCombiner;</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;<span class="comment">  /// \brief Propagate origin for arbitrary operation.</span></div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> setOriginForNaryOp(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;I) {</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    <span class="keywordflow">if</span> (!MS.TrackOrigins) <span class="keywordflow">return</span>;</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(&amp;I);</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;    OriginCombiner <a class="code" href="namespacellvm_1_1SystemZISD.html#a9a3c050e4bfe8d0d09d74c979f5bb121a6908fddc602ce5a12ea10c07af44a9ef">OC</a>(<span class="keyword">this</span>, IRB);</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html#a40df11649fb4c41a4de49f793c2d231f">Instruction::op_iterator</a> OI = I.<a class="code" href="classllvm_1_1User.html#a2eeb1c7ed1cfe403f2ae0470e36c07e2">op_begin</a>(); OI != I.<a class="code" href="classllvm_1_1User.html#af41f58e730804d10b91fcff39b035f74">op_end</a>(); ++OI)</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;      OC.Add(OI-&gt;get());</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;    OC.Done(&amp;I);</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;  }</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;  <span class="keywordtype">size_t</span> VectorOrPrimitiveTypeSizeInBits(<a class="code" href="classllvm_1_1Type.html">Type</a> *Ty) {</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    assert(!(Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">isVectorTy</a>() &amp;&amp; Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a8eafa71cf399da8f21b2af5549f3f9e7">getScalarType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>()) &amp;&amp;</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;           <span class="stringliteral">&quot;Vector of pointers is not a valid shadow type&quot;</span>);</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    <span class="keywordflow">return</span> Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">isVectorTy</a>() ?</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;      Ty-&gt;<a class="code" href="classllvm_1_1Type.html#ad8f27f0b94a56abcd296b8461737a3af">getVectorNumElements</a>() * Ty-&gt;<a class="code" href="classllvm_1_1Type.html#ad979b3c1bc975ee23810e3018ffe951b">getScalarSizeInBits</a>() :</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;      Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a5a7cfa245af120b44ac8a86143bb9e57">getPrimitiveSizeInBits</a>();</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;  }</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;<span class="comment">  /// \brief Cast between two shadow types, extending or truncating as</span></div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;<span class="comment">  /// necessary.</span></div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Value.html">Value</a> *CreateShadowCast(<a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;IRB, <a class="code" href="classllvm_1_1Value.html">Value</a> *V, <a class="code" href="classllvm_1_1Type.html">Type</a> *dstTy,</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;                          <span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a0c4e2aa2235abdd10d2beffa32cd9b14a1d25947b1e05ec73aa88243522dd01ff">Signed</a> = <span class="keyword">false</span>) {</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *srcTy = V-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;    <span class="keywordflow">if</span> (dstTy-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>() &amp;&amp; srcTy-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>())</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;      <span class="keywordflow">return</span> IRB.<a class="code" href="classllvm_1_1IRBuilder.html#afdd8a08bfcbd94f60d166a71a3e79ff3">CreateIntCast</a>(V, dstTy, <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a0c4e2aa2235abdd10d2beffa32cd9b14a1d25947b1e05ec73aa88243522dd01ff">Signed</a>);</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    <span class="keywordflow">if</span> (dstTy-&gt;<a class="code" href="classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">isVectorTy</a>() &amp;&amp; srcTy-&gt;<a class="code" href="classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">isVectorTy</a>() &amp;&amp;</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;        dstTy-&gt;<a class="code" href="classllvm_1_1Type.html#ad8f27f0b94a56abcd296b8461737a3af">getVectorNumElements</a>() == srcTy-&gt;<a class="code" href="classllvm_1_1Type.html#ad8f27f0b94a56abcd296b8461737a3af">getVectorNumElements</a>())</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;      <span class="keywordflow">return</span> IRB.<a class="code" href="classllvm_1_1IRBuilder.html#afdd8a08bfcbd94f60d166a71a3e79ff3">CreateIntCast</a>(V, dstTy, <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a0c4e2aa2235abdd10d2beffa32cd9b14a1d25947b1e05ec73aa88243522dd01ff">Signed</a>);</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;    <span class="keywordtype">size_t</span> srcSizeInBits = VectorOrPrimitiveTypeSizeInBits(srcTy);</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    <span class="keywordtype">size_t</span> dstSizeInBits = VectorOrPrimitiveTypeSizeInBits(dstTy);</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *V1 = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a87b363b9dad9f5040ea7e29ea9e60ff5">CreateBitCast</a>(V, <a class="code" href="classllvm_1_1Type.html#acaf8e4c3e40e01e848c1fad5f05b81cd">Type::getIntNTy</a>(*MS.C, srcSizeInBits));</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a> =</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;      IRB.<a class="code" href="classllvm_1_1IRBuilder.html#afdd8a08bfcbd94f60d166a71a3e79ff3">CreateIntCast</a>(V1, <a class="code" href="classllvm_1_1Type.html#acaf8e4c3e40e01e848c1fad5f05b81cd">Type::getIntNTy</a>(*MS.C, dstSizeInBits), <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a0c4e2aa2235abdd10d2beffa32cd9b14a1d25947b1e05ec73aa88243522dd01ff">Signed</a>);</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    <span class="keywordflow">return</span> IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a87b363b9dad9f5040ea7e29ea9e60ff5">CreateBitCast</a>(V2, dstTy);</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    <span class="comment">// TODO: handle struct types.</span></div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;  }</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;<span class="comment">  /// \brief Propagate shadow for arbitrary operation.</span></div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> handleShadowOr(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;I) {</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(&amp;I);</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;    ShadowAndOriginCombiner <a class="code" href="namespacellvm_1_1PPCISD.html#a69ad64696d1df3be05f01dfb67f5bc66a2ae057e4de45c51c89b7e5dc5053df62">SC</a>(<span class="keyword">this</span>, IRB);</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html#a40df11649fb4c41a4de49f793c2d231f">Instruction::op_iterator</a> OI = I.<a class="code" href="classllvm_1_1User.html#a2eeb1c7ed1cfe403f2ae0470e36c07e2">op_begin</a>(); OI != I.<a class="code" href="classllvm_1_1User.html#af41f58e730804d10b91fcff39b035f74">op_end</a>(); ++OI)</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;      SC.Add(OI-&gt;get());</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    SC.Done(&amp;I);</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;  }</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;  <span class="keywordtype">void</span> visitFAdd(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;I) { handleShadowOr(I); }</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;  <span class="keywordtype">void</span> visitFSub(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;I) { handleShadowOr(I); }</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;  <span class="keywordtype">void</span> visitFMul(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;I) { handleShadowOr(I); }</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;  <span class="keywordtype">void</span> visitAdd(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;I) { handleShadowOr(I); }</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;  <span class="keywordtype">void</span> visitSub(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;I) { handleShadowOr(I); }</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;  <span class="keywordtype">void</span> visitXor(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;I) { handleShadowOr(I); }</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;  <span class="keywordtype">void</span> visitMul(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;I) { handleShadowOr(I); }</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;  <span class="keywordtype">void</span> handleDiv(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;I) {</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(&amp;I);</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;    <span class="comment">// Strict on the second argument.</span></div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    insertShadowCheck(I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1), &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;    setShadow(&amp;I, getShadow(&amp;I, 0));</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;    setOrigin(&amp;I, getOrigin(&amp;I, 0));</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;  }</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;  <span class="keywordtype">void</span> visitUDiv(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;I) { handleDiv(I); }</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;  <span class="keywordtype">void</span> visitSDiv(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;I) { handleDiv(I); }</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;  <span class="keywordtype">void</span> visitFDiv(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;I) { handleDiv(I); }</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;  <span class="keywordtype">void</span> visitURem(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;I) { handleDiv(I); }</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;  <span class="keywordtype">void</span> visitSRem(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;I) { handleDiv(I); }</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;  <span class="keywordtype">void</span> visitFRem(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;I) { handleDiv(I); }</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;<span class="comment">  /// \brief Instrument == and != comparisons.</span></div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;<span class="comment">  /// Sometimes the comparison result is known even if some of the bits of the</span></div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;<span class="comment">  /// arguments are not.</span></div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> handleEqualityComparison(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;I) {</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(&amp;I);</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *A = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Sa = getShadow(A);</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Sb = getShadow(B);</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    <span class="comment">// Get rid of pointers and vectors of pointers.</span></div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    <span class="comment">// For ints (and vectors of ints), types of A and Sa match,</span></div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;    <span class="comment">// and this is a no-op.</span></div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    A = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(A, Sa-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;    B = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(B, Sb-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    <span class="comment">// A == B  &lt;==&gt;  (C = A^B) == 0</span></div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    <span class="comment">// A != B  &lt;==&gt;  (C = A^B) != 0</span></div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    <span class="comment">// Sc = Sa | Sb</span></div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a9b057429c5a047d0ee274074b6885acf">CreateXor</a>(A, B);</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Sc = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a8f55dd4237be6778517ddd752ca8b76a">CreateOr</a>(Sa, Sb);</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;    <span class="comment">// Now dealing with i = (C == 0) comparison (or C != 0, does not matter now)</span></div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    <span class="comment">// Result is defined if one of the following is true</span></div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;    <span class="comment">// * there is a defined 1 bit in C</span></div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;    <span class="comment">// * C is fully defined</span></div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    <span class="comment">// Si = !(C &amp; ~Sc) &amp;&amp; Sc</span></div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Zero = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Sc-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *MinusOne = <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">Constant::getAllOnesValue</a>(Sc-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Si =</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;      IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a197d5dd77cad4560a082900962a830aa">CreateAnd</a>(IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a609c7b4d7eb90f7c4627da58dc00fa42">CreateICmpNE</a>(Sc, Zero),</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;                    IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a9a80bae197dc1294e3a0dbfd920b97b0">CreateICmpEQ</a>(</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;                      IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a197d5dd77cad4560a082900962a830aa">CreateAnd</a>(IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a9b057429c5a047d0ee274074b6885acf">CreateXor</a>(Sc, MinusOne), <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), Zero));</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    Si-&gt;<a class="code" href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">setName</a>(<span class="stringliteral">&quot;_msprop_icmp&quot;</span>);</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    setShadow(&amp;I, Si);</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;    setOriginForNaryOp(I);</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;  }</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;<span class="comment">  /// \brief Build the lowest possible value of V, taking into account V&#39;s</span></div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;<span class="comment">  ///        uninitialized bits.</span></div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Value.html">Value</a> *getLowestPossibleValue(<a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;IRB, <a class="code" href="classllvm_1_1Value.html">Value</a> *A, <a class="code" href="classllvm_1_1Value.html">Value</a> *Sa,</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;                                <span class="keywordtype">bool</span> isSigned) {</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    <span class="keywordflow">if</span> (isSigned) {</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;      <span class="comment">// Split shadow into sign bit and other bits.</span></div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *SaOtherBits = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a3f8c45ea10c393433221a508b750dcd5">CreateLShr</a>(IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a4d49fd9a4cc4f2a74d4555bd08b13910">CreateShl</a>(Sa, 1), 1);</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *SaSignBit = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a9b057429c5a047d0ee274074b6885acf">CreateXor</a>(Sa, SaOtherBits);</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;      <span class="comment">// Maximise the undefined shadow bit, minimize other undefined bits.</span></div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;      <span class="keywordflow">return</span></div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;        IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a8f55dd4237be6778517ddd752ca8b76a">CreateOr</a>(IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a197d5dd77cad4560a082900962a830aa">CreateAnd</a>(A, IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a9f4834f0678648c5ac86c9ab37210be3">CreateNot</a>(SaOtherBits)), SaSignBit);</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;      <span class="comment">// Minimize undefined bits.</span></div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;      <span class="keywordflow">return</span> IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a197d5dd77cad4560a082900962a830aa">CreateAnd</a>(A, IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a9f4834f0678648c5ac86c9ab37210be3">CreateNot</a>(Sa));</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    }</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;  }</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;<span class="comment">  /// \brief Build the highest possible value of V, taking into account V&#39;s</span></div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;<span class="comment">  ///        uninitialized bits.</span></div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Value.html">Value</a> *getHighestPossibleValue(<a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;IRB, <a class="code" href="classllvm_1_1Value.html">Value</a> *A, <a class="code" href="classllvm_1_1Value.html">Value</a> *Sa,</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;                                <span class="keywordtype">bool</span> isSigned) {</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    <span class="keywordflow">if</span> (isSigned) {</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;      <span class="comment">// Split shadow into sign bit and other bits.</span></div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *SaOtherBits = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a3f8c45ea10c393433221a508b750dcd5">CreateLShr</a>(IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a4d49fd9a4cc4f2a74d4555bd08b13910">CreateShl</a>(Sa, 1), 1);</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *SaSignBit = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a9b057429c5a047d0ee274074b6885acf">CreateXor</a>(Sa, SaOtherBits);</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;      <span class="comment">// Minimise the undefined shadow bit, maximise other undefined bits.</span></div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;      <span class="keywordflow">return</span></div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;        IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a8f55dd4237be6778517ddd752ca8b76a">CreateOr</a>(IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a197d5dd77cad4560a082900962a830aa">CreateAnd</a>(A, IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a9f4834f0678648c5ac86c9ab37210be3">CreateNot</a>(SaSignBit)), SaOtherBits);</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;      <span class="comment">// Maximize undefined bits.</span></div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;      <span class="keywordflow">return</span> IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a8f55dd4237be6778517ddd752ca8b76a">CreateOr</a>(A, Sa);</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    }</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;  }</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;<span class="comment">  /// \brief Instrument relational comparisons.</span></div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;<span class="comment">  /// This function does exact shadow propagation for all relational</span></div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;<span class="comment">  /// comparisons of integers, pointers and vectors of those.</span></div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;<span class="comment">  /// FIXME: output seems suboptimal when one of the operands is a constant</span></div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> handleRelationalComparisonExact(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;I) {</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(&amp;I);</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *A = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Sa = getShadow(A);</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Sb = getShadow(B);</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;    <span class="comment">// Get rid of pointers and vectors of pointers.</span></div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;    <span class="comment">// For ints (and vectors of ints), types of A and Sa match,</span></div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;    <span class="comment">// and this is a no-op.</span></div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;    A = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(A, Sa-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;    B = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(B, Sb-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;    <span class="comment">// Let [a0, a1] be the interval of possible values of A, taking into account</span></div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;    <span class="comment">// its undefined bits. Let [b0, b1] be the interval of possible values of B.</span></div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;    <span class="comment">// Then (A cmp B) is defined iff (a0 cmp b1) == (a1 cmp b0).</span></div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;    <span class="keywordtype">bool</span> IsSigned = I.<a class="code" href="classllvm_1_1CmpInst.html#a13f7eef27b0ecfe146cbac49b3054c91">isSigned</a>();</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *S1 = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a495d91fb3d2662acbffd0162c56153ed">CreateICmp</a>(I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(),</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;                               getLowestPossibleValue(IRB, A, Sa, IsSigned),</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;                               getHighestPossibleValue(IRB, B, Sb, IsSigned));</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *S2 = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a495d91fb3d2662acbffd0162c56153ed">CreateICmp</a>(I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>(),</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;                               getHighestPossibleValue(IRB, A, Sa, IsSigned),</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;                               getLowestPossibleValue(IRB, B, Sb, IsSigned));</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Si = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a9b057429c5a047d0ee274074b6885acf">CreateXor</a>(S1, S2);</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;    setShadow(&amp;I, Si);</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    setOriginForNaryOp(I);</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;  }</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;<span class="comment">  /// \brief Instrument signed relational comparisons.</span></div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;<span class="comment">  /// Handle (x&lt;0) and (x&gt;=0) comparisons (essentially, sign bit tests) by</span></div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;<span class="comment">  /// propagating the highest bit of the shadow. Everything else is delegated</span></div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;<span class="comment">  /// to handleShadowOr().</span></div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> handleSignedRelationalComparison(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;I) {</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *constOp0 = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1Constant.html">Constant</a>&gt;(I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0));</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *constOp1 = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1Constant.html">Constant</a>&gt;(I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1));</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a>* op = NULL;</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;    <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">CmpInst::Predicate</a> pre = I.<a class="code" href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">getPredicate</a>();</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;    <span class="keywordflow">if</span> (constOp0 &amp;&amp; constOp0-&gt;<a class="code" href="classllvm_1_1Constant.html#ad7ec8482f19e8e86e3de573b060a17e5">isNullValue</a>() &amp;&amp;</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;        (pre == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">CmpInst::ICMP_SGT</a> || pre == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a2751d6136a2819749dcef65dc19a4246">CmpInst::ICMP_SLE</a>)) {</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;      op = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (constOp1 &amp;&amp; constOp1-&gt;isNullValue() &amp;&amp;</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;               (pre == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">CmpInst::ICMP_SLT</a> || pre == <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac1aa7b798ba11d2e497d5cce6ce6d3dc">CmpInst::ICMP_SGE</a>)) {</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;      op = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0);</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;    }</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    <span class="keywordflow">if</span> (op) {</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;      <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(&amp;I);</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a>* Shadow =</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;        IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5a6342f2e2886342995cb58498cd1aa7">CreateICmpSLT</a>(getShadow(op), getCleanShadow(op), <span class="stringliteral">&quot;_msprop_icmpslt&quot;</span>);</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;      setShadow(&amp;I, Shadow);</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;      setOrigin(&amp;I, getOrigin(op));</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;      handleShadowOr(I);</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    }</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;  }</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;  <span class="keywordtype">void</span> visitICmpInst(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;I) {</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="MemorySanitizer_8cpp.html#a9d4432de44f3dd0885f20ee61a73cedf">ClHandleICmp</a>) {</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;      handleShadowOr(I);</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    }</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    <span class="keywordflow">if</span> (I.<a class="code" href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">isEquality</a>()) {</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;      handleEqualityComparison(I);</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;    }</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;    assert(I.<a class="code" href="classllvm_1_1ICmpInst.html#ab8d326a634f66801a402f872f6ea4949">isRelational</a>());</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MemorySanitizer_8cpp.html#a0cf5d5e1b87d7a9391913ce2de847a2c">ClHandleICmpExact</a>) {</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;      handleRelationalComparisonExact(I);</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    }</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;    <span class="keywordflow">if</span> (I.<a class="code" href="classllvm_1_1CmpInst.html#a13f7eef27b0ecfe146cbac49b3054c91">isSigned</a>()) {</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;      handleSignedRelationalComparison(I);</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;    }</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;    assert(I.<a class="code" href="classllvm_1_1CmpInst.html#acc4aad24e3e9f04088c9b7802a7a5718">isUnsigned</a>());</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    <span class="keywordflow">if</span> ((isa&lt;Constant&gt;(I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0)) || isa&lt;Constant&gt;(I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1)))) {</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;      handleRelationalComparisonExact(I);</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;    }</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    handleShadowOr(I);</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;  }</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;  <span class="keywordtype">void</span> visitFCmpInst(<a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a> &amp;I) {</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;    handleShadowOr(I);</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;  }</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;  <span class="keywordtype">void</span> handleShift(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;I) {</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(&amp;I);</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    <span class="comment">// If any of the S2 bits are poisoned, the whole thing is poisoned.</span></div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;    <span class="comment">// Otherwise perform the same shift on S1.</span></div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *S1 = getShadow(&amp;I, 0);</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *S2 = getShadow(&amp;I, 1);</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *S2Conv = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a2081b822b121723df82782c24314a37e">CreateSExt</a>(IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a609c7b4d7eb90f7c4627da58dc00fa42">CreateICmpNE</a>(S2, getCleanShadow(S2)),</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;                                   S2-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a> = I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1);</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a> = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a2bd8d3ea479e99434bac72362a59f078">CreateBinOp</a>(I.<a class="code" href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">getOpcode</a>(), S1, <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>);</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;    setShadow(&amp;I, IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a8f55dd4237be6778517ddd752ca8b76a">CreateOr</a>(Shift, S2Conv));</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    setOriginForNaryOp(I);</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;  }</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;  <span class="keywordtype">void</span> visitShl(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;I) { handleShift(I); }</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;  <span class="keywordtype">void</span> visitAShr(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;I) { handleShift(I); }</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;  <span class="keywordtype">void</span> visitLShr(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;I) { handleShift(I); }</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;<span class="comment">  /// \brief Instrument llvm.memmove</span></div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;<span class="comment">  /// At this point we don&#39;t know if llvm.memmove will be inlined or not.</span></div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;<span class="comment">  /// If we don&#39;t instrument it and it gets inlined,</span></div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;<span class="comment">  /// our interceptor will not kick in and we will lose the memmove.</span></div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;<span class="comment">  /// If we instrument the call here, but it does not get inlined,</span></div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;<span class="comment">  /// we will memove the shadow twice: which is bad in case</span></div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;<span class="comment">  /// of overlapping regions. So, we simply lower the intrinsic to a call.</span></div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;<span class="comment">  /// Similar situation exists for memcpy and memset.</span></div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> visitMemMoveInst(<a class="code" href="classllvm_1_1MemMoveInst.html">MemMoveInst</a> &amp;I) {</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(&amp;I);</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;    IRB.<a class="code" href="classllvm_1_1IRBuilder.html#aec1340aa456977785b902da5d5203948">CreateCall3</a>(</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;      MS.MemmoveFn,</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;      IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(I.<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(0), IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7badbb741cd23e73ad063428c9cd5fea">getInt8PtrTy</a>()),</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;      IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(I.<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(1), IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7badbb741cd23e73ad063428c9cd5fea">getInt8PtrTy</a>()),</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;      IRB.<a class="code" href="classllvm_1_1IRBuilder.html#afdd8a08bfcbd94f60d166a71a3e79ff3">CreateIntCast</a>(I.<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(2), MS.IntptrTy, <span class="keyword">false</span>));</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;    I.<a class="code" href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;  }</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;  <span class="comment">// Similar to memmove: avoid copying shadow twice.</span></div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;  <span class="comment">// This is somewhat unfortunate as it may slowdown small constant memcpys.</span></div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;  <span class="comment">// FIXME: consider doing manual inline for small constant sizes and proper</span></div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;  <span class="comment">// alignment.</span></div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;  <span class="keywordtype">void</span> visitMemCpyInst(<a class="code" href="classllvm_1_1MemCpyInst.html">MemCpyInst</a> &amp;I) {</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(&amp;I);</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;    IRB.<a class="code" href="classllvm_1_1IRBuilder.html#aec1340aa456977785b902da5d5203948">CreateCall3</a>(</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;      MS.MemcpyFn,</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;      IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(I.<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(0), IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7badbb741cd23e73ad063428c9cd5fea">getInt8PtrTy</a>()),</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;      IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(I.<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(1), IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7badbb741cd23e73ad063428c9cd5fea">getInt8PtrTy</a>()),</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;      IRB.<a class="code" href="classllvm_1_1IRBuilder.html#afdd8a08bfcbd94f60d166a71a3e79ff3">CreateIntCast</a>(I.<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(2), MS.IntptrTy, <span class="keyword">false</span>));</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    I.<a class="code" href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;  }</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;  <span class="comment">// Same as memcpy.</span></div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;  <span class="keywordtype">void</span> visitMemSetInst(<a class="code" href="classllvm_1_1MemSetInst.html">MemSetInst</a> &amp;I) {</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(&amp;I);</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;    IRB.<a class="code" href="classllvm_1_1IRBuilder.html#aec1340aa456977785b902da5d5203948">CreateCall3</a>(</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;      MS.MemsetFn,</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;      IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(I.<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(0), IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7badbb741cd23e73ad063428c9cd5fea">getInt8PtrTy</a>()),</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;      IRB.<a class="code" href="classllvm_1_1IRBuilder.html#afdd8a08bfcbd94f60d166a71a3e79ff3">CreateIntCast</a>(I.<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(1), IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6ee1d1e7a13072ef579558d64b208d3c">getInt32Ty</a>(), <span class="keyword">false</span>),</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;      IRB.<a class="code" href="classllvm_1_1IRBuilder.html#afdd8a08bfcbd94f60d166a71a3e79ff3">CreateIntCast</a>(I.<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(2), MS.IntptrTy, <span class="keyword">false</span>));</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;    I.<a class="code" href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;  }</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;  <span class="keywordtype">void</span> visitVAStartInst(<a class="code" href="classllvm_1_1VAStartInst.html">VAStartInst</a> &amp;I) {</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;    VAHelper-&gt;visitVAStartInst(I);</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;  }</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;  <span class="keywordtype">void</span> visitVACopyInst(<a class="code" href="classllvm_1_1VACopyInst.html">VACopyInst</a> &amp;I) {</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;    VAHelper-&gt;visitVACopyInst(I);</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;  }</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;  <span class="keyword">enum</span> IntrinsicKind {</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;    IK_DoesNotAccessMemory,</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    IK_OnlyReadsMemory,</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    IK_WritesMemory</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;  };</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;  <span class="keyword">static</span> IntrinsicKind getIntrinsicKind(<a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90">Intrinsic::ID</a> iid) {</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> DoesNotAccessMemory = IK_DoesNotAccessMemory;</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> OnlyReadsArgumentPointees = IK_OnlyReadsMemory;</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> OnlyReadsMemory = IK_OnlyReadsMemory;</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> OnlyAccessesArgumentPointees = IK_WritesMemory;</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> UnknownModRefBehavior = IK_WritesMemory;</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;<span class="preprocessor">#define GET_INTRINSIC_MODREF_BEHAVIOR</span></div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;<span class="preprocessor">#define ModRefBehavior IntrinsicKind</span></div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;<span class="preprocessor">#include &quot;llvm/IR/Intrinsics.gen&quot;</span></div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;<span class="preprocessor">#undef ModRefBehavior</span></div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;<span class="preprocessor">#undef GET_INTRINSIC_MODREF_BEHAVIOR</span></div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;  }</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;<span class="comment">  /// \brief Handle vector store-like intrinsics.</span></div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;<span class="comment">  /// Instrument intrinsics that look like a simple SIMD store: writes memory,</span></div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;<span class="comment">  /// has 1 pointer argument and 1 vector argument, returns void.</span></div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> handleVectorStoreIntrinsic(<a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> &amp;I) {</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(&amp;I);</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a>* Addr = I.<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(0);</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Shadow = getShadow(&amp;I, 1);</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *ShadowPtr = getShadowPtr(Addr, Shadow-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), IRB);</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    <span class="comment">// We don&#39;t know the pointer alignment (could be unaligned SSE store!).</span></div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    <span class="comment">// Have to assume to worst case.</span></div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a674095e41573ea310d48ba480dca34a9">CreateAlignedStore</a>(Shadow, ShadowPtr, 1);</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MemorySanitizer_8cpp.html#a69b37c814b922ad8dc3c9d9a766760c3">ClCheckAccessAddress</a>)</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;      insertShadowCheck(Addr, &amp;I);</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    <span class="comment">// FIXME: use ClStoreCleanOrigin</span></div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    <span class="comment">// FIXME: factor out common code from materializeStores</span></div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    <span class="keywordflow">if</span> (MS.TrackOrigins)</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;      IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a43f7fa52a3fbe01e44c40d9db278ab3e">CreateStore</a>(getOrigin(&amp;I, 1), getOriginPtr(Addr, IRB));</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;  }</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;<span class="comment">  /// \brief Handle vector load-like intrinsics.</span></div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;<span class="comment">  /// Instrument intrinsics that look like a simple SIMD load: reads memory,</span></div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;<span class="comment">  /// has 1 pointer argument, returns a vector.</span></div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> handleVectorLoadIntrinsic(<a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> &amp;I) {</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(&amp;I);</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Addr = I.<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(0);</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *ShadowTy = getShadowTy(&amp;I);</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;    <span class="keywordflow">if</span> (LoadShadow) {</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *ShadowPtr = getShadowPtr(Addr, ShadowTy, IRB);</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;      <span class="comment">// We don&#39;t know the pointer alignment (could be unaligned SSE load!).</span></div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;      <span class="comment">// Have to assume to worst case.</span></div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;      setShadow(&amp;I, IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a6afa862daad32dd85807c27ce804b139">CreateAlignedLoad</a>(ShadowPtr, 1, <span class="stringliteral">&quot;_msld&quot;</span>));</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;      setShadow(&amp;I, getCleanShadow(&amp;I));</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;    }</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MemorySanitizer_8cpp.html#a69b37c814b922ad8dc3c9d9a766760c3">ClCheckAccessAddress</a>)</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;      insertShadowCheck(Addr, &amp;I);</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;    <span class="keywordflow">if</span> (MS.TrackOrigins) {</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;      <span class="keywordflow">if</span> (LoadShadow)</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;        setOrigin(&amp;I, IRB.<a class="code" href="classllvm_1_1IRBuilder.html#af440b535b3b4e8d0d089dd0ed2283a0f">CreateLoad</a>(getOriginPtr(Addr, IRB)));</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;        setOrigin(&amp;I, getCleanOrigin());</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    }</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;  }</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;<span class="comment">  /// \brief Handle (SIMD arithmetic)-like intrinsics.</span></div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;<span class="comment">  /// Instrument intrinsics with any number of arguments of the same type,</span></div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;<span class="comment">  /// equal to the return type. The type should be simple (no aggregates or</span></div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;<span class="comment">  /// pointers; vectors are fine).</span></div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;<span class="comment">  /// Caller guarantees that this intrinsic does not access memory.</span></div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> maybeHandleSimpleNomemIntrinsic(<a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> &amp;I) {</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *RetTy = I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;    <span class="keywordflow">if</span> (!(RetTy-&gt;<a class="code" href="classllvm_1_1Type.html#a3bd5e6108cd2c28c267d70e631a7b11a">isIntOrIntVectorTy</a>() ||</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;          RetTy-&gt;<a class="code" href="classllvm_1_1Type.html#a35a540d6e55bff813e9b195ebdb3da9f">isFPOrFPVectorTy</a>() ||</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;          RetTy-&gt;<a class="code" href="classllvm_1_1Type.html#af47064c2a364c1b3542f545c9f4b6f8d">isX86_MMXTy</a>()))</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;    <span class="keywordtype">unsigned</span> NumArgOperands = I.<a class="code" href="classllvm_1_1CallInst.html#ac88b95273e6c753188f6a54d65548579">getNumArgOperands</a>();</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; NumArgOperands; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = I.<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(i)-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;      <span class="keywordflow">if</span> (Ty != RetTy)</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;    }</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(&amp;I);</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;    ShadowAndOriginCombiner <a class="code" href="namespacellvm_1_1PPCISD.html#a69ad64696d1df3be05f01dfb67f5bc66a2ae057e4de45c51c89b7e5dc5053df62">SC</a>(<span class="keyword">this</span>, IRB);</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; NumArgOperands; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;      SC.Add(I.<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(i));</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;    SC.Done(&amp;I);</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;  }</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;<span class="comment">  /// \brief Heuristically instrument unknown intrinsics.</span></div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;<span class="comment">  /// The main purpose of this code is to do something reasonable with all</span></div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;<span class="comment">  /// random intrinsics we might encounter, most importantly - SIMD intrinsics.</span></div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;<span class="comment">  /// We recognize several classes of intrinsics by their argument types and</span></div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;<span class="comment">  /// ModRefBehaviour and apply special intrumentation when we are reasonably</span></div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;<span class="comment">  /// sure that we know what the intrinsic does.</span></div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;<span class="comment">  /// We special-case intrinsics where this approach fails. See llvm.bswap</span></div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;<span class="comment">  /// handling as an example of that.</span></div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> handleUnknownIntrinsic(<a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> &amp;I) {</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;    <span class="keywordtype">unsigned</span> NumArgOperands = I.<a class="code" href="classllvm_1_1CallInst.html#ac88b95273e6c753188f6a54d65548579">getNumArgOperands</a>();</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;    <span class="keywordflow">if</span> (NumArgOperands == 0)</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90">Intrinsic::ID</a> iid = I.<a class="code" href="classllvm_1_1IntrinsicInst.html#a6cbb4809b81f3994ee0c79b38556bd66">getIntrinsicID</a>();</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;    IntrinsicKind IK = getIntrinsicKind(iid);</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    <span class="keywordtype">bool</span> OnlyReadsMemory = IK == IK_OnlyReadsMemory;</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    <span class="keywordtype">bool</span> WritesMemory = IK == IK_WritesMemory;</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    assert(!(OnlyReadsMemory &amp;&amp; WritesMemory));</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;    <span class="keywordflow">if</span> (NumArgOperands == 2 &amp;&amp;</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;        I.<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>() &amp;&amp;</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;        I.<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(1)-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">isVectorTy</a>() &amp;&amp;</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;        I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#af5c7041df3ad5edffe5da17b5264c1fc">isVoidTy</a>() &amp;&amp;</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;        WritesMemory) {</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;      <span class="comment">// This looks like a vector store.</span></div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;      <span class="keywordflow">return</span> handleVectorStoreIntrinsic(I);</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;    }</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;    <span class="keywordflow">if</span> (NumArgOperands == 1 &amp;&amp;</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;        I.<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>() &amp;&amp;</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;        I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">isVectorTy</a>() &amp;&amp;</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;        OnlyReadsMemory) {</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;      <span class="comment">// This looks like a vector load.</span></div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;      <span class="keywordflow">return</span> handleVectorLoadIntrinsic(I);</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;    }</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;    <span class="keywordflow">if</span> (!OnlyReadsMemory &amp;&amp; !WritesMemory)</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;      <span class="keywordflow">if</span> (maybeHandleSimpleNomemIntrinsic(I))</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;    <span class="comment">// FIXME: detect and handle SSE maskstore/maskload</span></div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;  }</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;  <span class="keywordtype">void</span> handleBswap(<a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> &amp;I) {</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(&amp;I);</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Op = I.<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(0);</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *OpType = Op-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *BswapFunc = <a class="code" href="namespacellvm_1_1Intrinsic.html#a842176a2c8c60a94bc788454b0828ea2">Intrinsic::getDeclaration</a>(</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;      F.<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>(), <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90afb28523b72573e3468cd1ce52453f221">Intrinsic::bswap</a>, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Type*&gt;</a>(&amp;OpType, 1));</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;    setShadow(&amp;I, IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a7e31b0c02df2aeed261b103b790cc01e">CreateCall</a>(BswapFunc, getShadow(Op)));</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;    setOrigin(&amp;I, getOrigin(Op));</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;  }</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;  <span class="comment">// \brief Instrument vector convert instrinsic.</span></div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;  <span class="comment">// This function instruments intrinsics like cvtsi2ss:</span></div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;  <span class="comment">// %Out = int_xxx_cvtyyy(%ConvertOp)</span></div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;  <span class="comment">// or</span></div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;  <span class="comment">// %Out = int_xxx_cvtyyy(%CopyOp, %ConvertOp)</span></div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;  <span class="comment">// Intrinsic converts \p NumUsedElements elements of \p ConvertOp to the same</span></div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;  <span class="comment">// number \p Out elements, and (if has 2 arguments) copies the rest of the</span></div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;  <span class="comment">// elements from \p CopyOp.</span></div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;  <span class="comment">// In most cases conversion involves floating-point value which may trigger a</span></div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;  <span class="comment">// hardware exception when not fully initialized. For this reason we require</span></div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;  <span class="comment">// \p ConvertOp[0:NumUsedElements] to be fully initialized and trap otherwise.</span></div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;  <span class="comment">// We copy the shadow of \p CopyOp[NumUsedElements:] to \p</span></div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;  <span class="comment">// Out[NumUsedElements:]. This means that intrinsics without \p CopyOp always</span></div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;  <span class="comment">// return a fully initialized value.</span></div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;  <span class="keywordtype">void</span> handleVectorConvertIntrinsic(<a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> &amp;I, <span class="keywordtype">int</span> NumUsedElements) {</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(&amp;I);</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *CopyOp, *ConvertOp;</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;    <span class="keywordflow">switch</span> (I.<a class="code" href="classllvm_1_1CallInst.html#ac88b95273e6c753188f6a54d65548579">getNumArgOperands</a>()) {</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;    <span class="keywordflow">case</span> 2:</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;      CopyOp = I.<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(0);</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;      ConvertOp = I.<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(1);</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;    <span class="keywordflow">case</span> 1:</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;      ConvertOp = I.<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(0);</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;      CopyOp = NULL;</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;      <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Cvt intrinsic with unsupported number of arguments.&quot;</span>);</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;    }</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;    <span class="comment">// The first *NumUsedElements* elements of ConvertOp are converted to the</span></div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;    <span class="comment">// same number of output elements. The rest of the output is copied from</span></div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;    <span class="comment">// CopyOp, or (if not available) filled with zeroes.</span></div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;    <span class="comment">// Combine shadow for elements of ConvertOp that are used in this operation,</span></div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;    <span class="comment">// and insert a check.</span></div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;    <span class="comment">// FIXME: consider propagating shadow of ConvertOp, at least in the case of</span></div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;    <span class="comment">// int-&gt;any conversion.</span></div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *ConvertShadow = getShadow(ConvertOp);</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *AggShadow = 0;</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;    <span class="keywordflow">if</span> (ConvertOp-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">isVectorTy</a>()) {</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;      AggShadow = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#ad0affa936bea7c530da1597e9bb60bbd">CreateExtractElement</a>(</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;          ConvertShadow, <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6ee1d1e7a13072ef579558d64b208d3c">getInt32Ty</a>(), 0));</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt; NumUsedElements; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *MoreShadow = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#ad0affa936bea7c530da1597e9bb60bbd">CreateExtractElement</a>(</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;            ConvertShadow, <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6ee1d1e7a13072ef579558d64b208d3c">getInt32Ty</a>(), <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;        AggShadow = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a8f55dd4237be6778517ddd752ca8b76a">CreateOr</a>(AggShadow, MoreShadow);</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;      }</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;      AggShadow = ConvertShadow;</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    }</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;    assert(AggShadow-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>());</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;    insertShadowCheck(AggShadow, getOrigin(ConvertOp), &amp;I);</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;    <span class="comment">// Build result shadow by zero-filling parts of CopyOp shadow that come from</span></div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    <span class="comment">// ConvertOp.</span></div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;    <span class="keywordflow">if</span> (CopyOp) {</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;      assert(CopyOp-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() == I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;      assert(CopyOp-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">isVectorTy</a>());</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *ResultShadow = getShadow(CopyOp);</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *EltTy = ResultShadow-&gt;getType()-&gt;<a class="code" href="classllvm_1_1Type.html#a796aad3f26c8038305aed21e677fce58">getVectorElementType</a>();</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; NumUsedElements; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;        ResultShadow = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a40e48df9196b3c092096138cd9af8465">CreateInsertElement</a>(</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;            ResultShadow, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(EltTy),</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;            <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6ee1d1e7a13072ef579558d64b208d3c">getInt32Ty</a>(), <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;      }</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;      setShadow(&amp;I, ResultShadow);</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;      setOrigin(&amp;I, getOrigin(CopyOp));</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;      setShadow(&amp;I, getCleanShadow(&amp;I));</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;    }</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;  }</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;  <span class="keywordtype">void</span> visitIntrinsicInst(<a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> &amp;I) {</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;    <span class="keywordflow">switch</span> (I.<a class="code" href="classllvm_1_1IntrinsicInst.html#a6cbb4809b81f3994ee0c79b38556bd66">getIntrinsicID</a>()) {</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90afb28523b72573e3468cd1ce52453f221">llvm::Intrinsic::bswap</a>:</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;      handleBswap(I);</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a2acdb88b3e1e74add180774559d197e8">llvm::Intrinsic::x86_avx512_cvtsd2usi64</a>:</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a93becf583a71862cec776ea202aaa9ae">llvm::Intrinsic::x86_avx512_cvtsd2usi</a>:</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ae95b4ba9e585aee7e8981c48f373366d">llvm::Intrinsic::x86_avx512_cvtss2usi64</a>:</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a36833c3bb54d2c296992ea3b3aa4a502">llvm::Intrinsic::x86_avx512_cvtss2usi</a>:</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aa1b4cc335a1d57873ccea7585f7b0787">llvm::Intrinsic::x86_avx512_cvttss2usi64</a>:</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a5bcdbf6fc5f5cdcfab94df1055d1bc87">llvm::Intrinsic::x86_avx512_cvttss2usi</a>:</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a186e52e077426117d21cfdc50c5e07ce">llvm::Intrinsic::x86_avx512_cvttsd2usi64</a>:</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ad5de39599e2514e063063a0bb96e7cf0">llvm::Intrinsic::x86_avx512_cvttsd2usi</a>:</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a4563f4ea6d5fa1fc9d24309f62fb0774">llvm::Intrinsic::x86_avx512_cvtusi2sd</a>:</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a08f50ff6aa94866b0fc30b5d71d65b5e">llvm::Intrinsic::x86_avx512_cvtusi2ss</a>:</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90af4e1f69bb4d6fa215a7f6ebad691a531">llvm::Intrinsic::x86_avx512_cvtusi642sd</a>:</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aa55679a4ef6acd135f5a510ebe96b278">llvm::Intrinsic::x86_avx512_cvtusi642ss</a>:</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aefbc09e32717c90f14b5416029971a2a">llvm::Intrinsic::x86_sse2_cvtsd2si64</a>:</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ac4ca051d1a888aac4bcbd7a341a72cab">llvm::Intrinsic::x86_sse2_cvtsd2si</a>:</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a5b403e07ea210ceb117a33adb880ab15">llvm::Intrinsic::x86_sse2_cvtsd2ss</a>:</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90abd0dfc9ad112d9140a2e0725d24b284c">llvm::Intrinsic::x86_sse2_cvtsi2sd</a>:</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a99cd0e781c4ec0f9a11be5e0163cbbe7">llvm::Intrinsic::x86_sse2_cvtsi642sd</a>:</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a9c4a989c182e2908905a05526862f42e">llvm::Intrinsic::x86_sse2_cvtss2sd</a>:</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a455c23dfd277edd10992b37094e08758">llvm::Intrinsic::x86_sse2_cvttsd2si64</a>:</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90acf39c1fa7d41dab3d79be4bf3c5f0d43">llvm::Intrinsic::x86_sse2_cvttsd2si</a>:</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90acb2ae32d08e65afefeb80f7f0e79fc1c">llvm::Intrinsic::x86_sse_cvtsi2ss</a>:</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ae43042d6fa7c108f02ad3131f7bc972f">llvm::Intrinsic::x86_sse_cvtsi642ss</a>:</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a1e2311346209856a82758c2a3ed55c0b">llvm::Intrinsic::x86_sse_cvtss2si64</a>:</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90af486031309929bc579734a96c3a3b16f">llvm::Intrinsic::x86_sse_cvtss2si</a>:</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aef360411e3e420e8d379f42adadd4115">llvm::Intrinsic::x86_sse_cvttss2si64</a>:</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ab626e256ebb2225a137f51e94cd18d5c">llvm::Intrinsic::x86_sse_cvttss2si</a>:</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;      handleVectorConvertIntrinsic(I, 1);</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90acd92660993cd257d8b431e9587c2243e">llvm::Intrinsic::x86_sse2_cvtdq2pd</a>:</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a76b5b4146b690c6fd4d75ef169387748">llvm::Intrinsic::x86_sse2_cvtps2pd</a>:</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a191cdd300d75937cef4856e41dba1925">llvm::Intrinsic::x86_sse_cvtps2pi</a>:</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a28f8055f6d48ff1de73a7b683a781f5d">llvm::Intrinsic::x86_sse_cvttps2pi</a>:</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;      handleVectorConvertIntrinsic(I, 2);</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;      <span class="keywordflow">if</span> (!handleUnknownIntrinsic(I))</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;        visitInstruction(I);</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;    }</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;  }</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;  <span class="keywordtype">void</span> visitCallSite(<a class="code" href="classllvm_1_1CallSite.html">CallSite</a> CS) {</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;I = *CS.<a class="code" href="classllvm_1_1CallSiteBase.html#ae4c67f835911559821939fb23a2e7aff">getInstruction</a>();</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;    assert((CS.<a class="code" href="classllvm_1_1CallSiteBase.html#a5770c10251145ce2b6a2dc99906cba64">isCall</a>() || CS.<a class="code" href="classllvm_1_1CallSiteBase.html#a700dc01bb858b95430714597ed50b5ab">isInvoke</a>()) &amp;&amp; <span class="stringliteral">&quot;Unknown type of CallSite&quot;</span>);</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;    <span class="keywordflow">if</span> (CS.<a class="code" href="classllvm_1_1CallSiteBase.html#a5770c10251145ce2b6a2dc99906cba64">isCall</a>()) {</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;      <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="namespacellvm.html#af6d6a791770bad2303c4399986979e3eae411369b2f0d8f484fec62c3291b1b51">Call</a> = cast&lt;CallInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;      <span class="comment">// For inline asm, do the usual thing: check argument shadow and mark all</span></div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;      <span class="comment">// outputs as clean. Note that any side effects of the inline asm that are</span></div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;      <span class="comment">// not immediately visible in its constraints are not handled.</span></div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;      <span class="keywordflow">if</span> (Call-&gt;<a class="code" href="classllvm_1_1CallInst.html#af9f7e3d81c606a8ee1b3fc7ab9d793dc">isInlineAsm</a>()) {</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;        visitInstruction(I);</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;      }</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;      <span class="comment">// Allow only tail calls with the same types, otherwise</span></div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;      <span class="comment">// we may have a false positive: shadow for a non-void RetVal</span></div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;      <span class="comment">// will get propagated to a void RetVal.</span></div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;      <span class="keywordflow">if</span> (Call-&gt;<a class="code" href="classllvm_1_1CallInst.html#a5e07dea70b41ad610edbfc21bd54154a">isTailCall</a>() &amp;&amp; Call-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() != Call-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;        Call-&gt;<a class="code" href="classllvm_1_1CallInst.html#ad54481e3c992b555aeaba34a83daf7e6">setTailCall</a>(<span class="keyword">false</span>);</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;      assert(!isa&lt;IntrinsicInst&gt;(&amp;I) &amp;&amp; <span class="stringliteral">&quot;intrinsics are handled elsewhere&quot;</span>);</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;      <span class="comment">// We are going to insert code that relies on the fact that the callee</span></div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;      <span class="comment">// will become a non-readonly function after it is instrumented by us. To</span></div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;      <span class="comment">// prevent this code from being optimized out, mark that function</span></div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;      <span class="comment">// non-readonly in advance.</span></div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> *Func = Call-&gt;<a class="code" href="classllvm_1_1CallInst.html#a0bcd4131e1a1d92215f5385b4e16cd2e">getCalledFunction</a>()) {</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;        <span class="comment">// Clear out readonly/readnone attributes.</span></div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;        <a class="code" href="classllvm_1_1AttrBuilder.html">AttrBuilder</a> <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>;</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;        B.<a class="code" href="classllvm_1_1AttrBuilder.html#a59d23ba2e7eac46cbc6cd3086e013b49">addAttribute</a>(<a class="code" href="classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60ea72f3f4379fdf9acf18ec492b98d31deb">Attribute::ReadOnly</a>)</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;          .<a class="code" href="classllvm_1_1AttrBuilder.html#a59d23ba2e7eac46cbc6cd3086e013b49">addAttribute</a>(<a class="code" href="classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60eaa94162b0564176cc56e5688691877074">Attribute::ReadNone</a>);</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;        Func-&gt;<a class="code" href="classllvm_1_1Function.html#a12df9495b95331ab7ed614624e5268d2">removeAttributes</a>(AttributeSet::FunctionIndex,</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;                               AttributeSet::get(Func-&gt;<a class="code" href="classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">getContext</a>(),</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;                                                 AttributeSet::FunctionIndex,</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;                                                 <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>));</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;      }</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;    }</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(&amp;I);</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;    <span class="keywordflow">if</span> (MS.WrapIndirectCalls &amp;&amp; !CS.<a class="code" href="classllvm_1_1CallSiteBase.html#a7966cd72245302e38c19138b4ad408b4">getCalledFunction</a>())</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;      IndirectCallList.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(CS);</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;    <span class="keywordtype">unsigned</span> ArgOffset = 0;</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  CallSite: &quot;</span> &lt;&lt; I &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1CallSiteBase.html#a9c293af587813d72fdc976697dd07f23">CallSite::arg_iterator</a> ArgIt = CS.<a class="code" href="classllvm_1_1CallSiteBase.html#affa0f3ae92ab8696fccd107c0addf5a2">arg_begin</a>(), End = CS.<a class="code" href="classllvm_1_1CallSiteBase.html#acc2eeccdf71d83b3c08d6218317a1430">arg_end</a>();</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;         ArgIt != End; ++ArgIt) {</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *A = *ArgIt;</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;      <span class="keywordtype">unsigned</span> i = ArgIt - CS.<a class="code" href="classllvm_1_1CallSiteBase.html#affa0f3ae92ab8696fccd107c0addf5a2">arg_begin</a>();</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;      <span class="keywordflow">if</span> (!A-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9dc5111b1a9b1d5c4652d50f74fe850b">isSized</a>()) {</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Arg &quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot; is not sized: &quot;</span> &lt;&lt; I &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;      }</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;      <span class="keywordtype">unsigned</span> Size = 0;</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1SPII.html#a11e9b8fca4a074643a6a21f444e51406a36b3dd3b84fde3f8494a9b18af131856">Store</a> = 0;</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;      <span class="comment">// Compute the Shadow for arg even if it is ByVal, because</span></div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;      <span class="comment">// in that case getShadow() will copy the actual arg shadow to</span></div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;      <span class="comment">// __msan_param_tls.</span></div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *ArgShadow = getShadow(A);</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *ArgShadowBase = getShadowPtrForArgument(A, IRB, ArgOffset);</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Arg#&quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; *A &lt;&lt;</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;            <span class="stringliteral">&quot; Shadow: &quot;</span> &lt;&lt; *ArgShadow &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;      <span class="keywordflow">if</span> (CS.<a class="code" href="classllvm_1_1CallSiteBase.html#a3a207eed0331b875c6a9b6dbaf5c4af3">paramHasAttr</a>(i + 1, <a class="code" href="classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60eab3c7dc42b72fed5fbed71591604203a9">Attribute::ByVal</a>)) {</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;        assert(A-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>() &amp;&amp;</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;               <span class="stringliteral">&quot;ByVal argument is not a pointer!&quot;</span>);</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;        Size = MS.TD-&gt;getTypeAllocSize(A-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a5c09d927a0079ad16e8367271efe9bc2">getPointerElementType</a>());</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;        <span class="keywordtype">unsigned</span> Alignment = CS.<a class="code" href="classllvm_1_1CallSiteBase.html#af23ecc474bd52056428ee09ebe9f044f">getParamAlignment</a>(i + 1);</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;        Store = IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a849b50da820a274b4d001fbeadaf5cd7">CreateMemCpy</a>(ArgShadowBase,</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;                                 getShadowPtr(A, <a class="code" href="classllvm_1_1Type.html#a7ba5de75f50bb4a4ba920698edf39b28">Type::getInt8Ty</a>(*MS.C), IRB),</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;                                 Size, Alignment);</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;        Size = MS.TD-&gt;getTypeAllocSize(A-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;        Store = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a674095e41573ea310d48ba480dca34a9">CreateAlignedStore</a>(ArgShadow, ArgShadowBase,</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;                                       <a class="code" href="MemorySanitizer_8cpp.html#a18599dcc3be2ad58c3ed01ea18609782">kShadowTLSAlignment</a>);</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;      }</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;      <span class="keywordflow">if</span> (MS.TrackOrigins)</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;        IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a43f7fa52a3fbe01e44c40d9db278ab3e">CreateStore</a>(getOrigin(A),</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;                        getOriginPtrForArgument(A, IRB, ArgOffset));</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;      (void)Store;</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;      assert(Size != 0 &amp;&amp; Store != 0);</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Param:&quot;</span> &lt;&lt; *Store &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;      ArgOffset += <a class="code" href="classllvm_1_1DataLayout.html#a23bc21c600966b6ec9f9a5e588dba349">DataLayout::RoundUpAlignment</a>(Size, 8);</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;    }</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  done with call args\n&quot;</span>);</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;    <a class="code" href="classllvm_1_1FunctionType.html">FunctionType</a> *FT =</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;      cast&lt;FunctionType&gt;(CS.<a class="code" href="classllvm_1_1CallSiteBase.html#a1abce20a9eff3d23ce05331962b1997c">getCalledValue</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a1e2a8dc174c34596e7e8efc7ab7e08a0">getContainedType</a>(0));</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;    <span class="keywordflow">if</span> (FT-&gt;<a class="code" href="classllvm_1_1FunctionType.html#ab9b67f93a2231970abb3d95636660ffc">isVarArg</a>()) {</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;      VAHelper-&gt;visitCallSite(CS, IRB);</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;    }</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;    <span class="comment">// Now, get the shadow for the RetVal.</span></div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;    <span class="keywordflow">if</span> (!I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9dc5111b1a9b1d5c4652d50f74fe850b">isSized</a>()) <span class="keywordflow">return</span>;</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRBBefore(&amp;I);</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;    <span class="comment">// Untill we have full dynamic coverage, make sure the retval shadow is 0.</span></div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Base = getShadowPtrForRetval(&amp;I, IRBBefore);</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;    IRBBefore.<a class="code" href="classllvm_1_1IRBuilder.html#a674095e41573ea310d48ba480dca34a9">CreateAlignedStore</a>(getCleanShadow(&amp;I), Base, <a class="code" href="MemorySanitizer_8cpp.html#a18599dcc3be2ad58c3ed01ea18609782">kShadowTLSAlignment</a>);</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NextInsn = 0;</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;    <span class="keywordflow">if</span> (CS.<a class="code" href="classllvm_1_1CallSiteBase.html#a5770c10251145ce2b6a2dc99906cba64">isCall</a>()) {</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;      NextInsn = I.<a class="code" href="classllvm_1_1ilist__node.html#a6ac308903849239f2f308aa180dda61b">getNextNode</a>();</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NormalDest = cast&lt;InvokeInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)-&gt;getNormalDest();</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;      <span class="keywordflow">if</span> (!NormalDest-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5ef55181ae0bb0f5c561b9a29087b1e5">getSinglePredecessor</a>()) {</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;        <span class="comment">// FIXME: this case is tricky, so we are just conservative here.</span></div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;        <span class="comment">// Perhaps we need to split the edge between this BB and NormalDest,</span></div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;        <span class="comment">// but a naive attempt to use SplitEdge leads to a crash.</span></div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;        setShadow(&amp;I, getCleanShadow(&amp;I));</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;        setOrigin(&amp;I, getCleanOrigin());</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;      }</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;      NextInsn = NormalDest-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ab1cd5a3713b93a33f89a2086d473cf6e">getFirstInsertionPt</a>();</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;      assert(NextInsn &amp;&amp;</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;             <span class="stringliteral">&quot;Could not find insertion point for retval shadow load&quot;</span>);</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;    }</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRBAfter(NextInsn);</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *RetvalShadow =</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;      IRBAfter.<a class="code" href="classllvm_1_1IRBuilder.html#a6afa862daad32dd85807c27ce804b139">CreateAlignedLoad</a>(getShadowPtrForRetval(&amp;I, IRBAfter),</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;                                 <a class="code" href="MemorySanitizer_8cpp.html#a18599dcc3be2ad58c3ed01ea18609782">kShadowTLSAlignment</a>, <span class="stringliteral">&quot;_msret&quot;</span>);</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;    setShadow(&amp;I, RetvalShadow);</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;    <span class="keywordflow">if</span> (MS.TrackOrigins)</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;      setOrigin(&amp;I, IRBAfter.<a class="code" href="classllvm_1_1IRBuilder.html#af440b535b3b4e8d0d089dd0ed2283a0f">CreateLoad</a>(getOriginPtrForRetval(IRBAfter)));</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;  }</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;  <span class="keywordtype">void</span> visitReturnInst(<a class="code" href="classllvm_1_1ReturnInst.html">ReturnInst</a> &amp;I) {</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(&amp;I);</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *RetVal = I.<a class="code" href="classllvm_1_1ReturnInst.html#a7f6ab6ba1947d832a651e3589614a10d">getReturnValue</a>();</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;    <span class="keywordflow">if</span> (!RetVal) <span class="keywordflow">return</span>;</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *ShadowPtr = getShadowPtrForRetval(RetVal, IRB);</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;    <span class="keywordflow">if</span> (CheckReturnValue) {</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;      insertShadowCheck(RetVal, &amp;I);</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Shadow = getCleanShadow(RetVal);</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;      IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a674095e41573ea310d48ba480dca34a9">CreateAlignedStore</a>(Shadow, ShadowPtr, <a class="code" href="MemorySanitizer_8cpp.html#a18599dcc3be2ad58c3ed01ea18609782">kShadowTLSAlignment</a>);</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Shadow = getShadow(RetVal);</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;      IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a674095e41573ea310d48ba480dca34a9">CreateAlignedStore</a>(Shadow, ShadowPtr, <a class="code" href="MemorySanitizer_8cpp.html#a18599dcc3be2ad58c3ed01ea18609782">kShadowTLSAlignment</a>);</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;      <span class="comment">// FIXME: make it conditional if ClStoreCleanOrigin==0</span></div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;      <span class="keywordflow">if</span> (MS.TrackOrigins)</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;        IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a43f7fa52a3fbe01e44c40d9db278ab3e">CreateStore</a>(getOrigin(RetVal), getOriginPtrForRetval(IRB));</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;    }</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;  }</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;  <span class="keywordtype">void</span> visitPHINode(<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> &amp;I) {</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(&amp;I);</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;    ShadowPHINodes.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(&amp;I);</div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;    setShadow(&amp;I, IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a2c0d745d9907486632823c56c5a23e86">CreatePHI</a>(getShadowTy(&amp;I), I.<a class="code" href="classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">getNumIncomingValues</a>(),</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;                                <span class="stringliteral">&quot;_msphi_s&quot;</span>));</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;    <span class="keywordflow">if</span> (MS.TrackOrigins)</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;      setOrigin(&amp;I, IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a2c0d745d9907486632823c56c5a23e86">CreatePHI</a>(MS.OriginTy, I.<a class="code" href="classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">getNumIncomingValues</a>(),</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;                                  <span class="stringliteral">&quot;_msphi_o&quot;</span>));</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;  }</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;  <span class="keywordtype">void</span> visitAllocaInst(<a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> &amp;I) {</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;    setShadow(&amp;I, getCleanShadow(&amp;I));</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(I.<a class="code" href="classllvm_1_1ilist__node.html#a6ac308903849239f2f308aa180dda61b">getNextNode</a>());</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;    uint64_t Size = MS.TD-&gt;getTypeAllocSize(I.<a class="code" href="classllvm_1_1AllocaInst.html#a214c60dbb4f1ed467e5a3420db6eefd6">getAllocatedType</a>());</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;    <span class="keywordflow">if</span> (PoisonStack &amp;&amp; <a class="code" href="MemorySanitizer_8cpp.html#abc1a7718688c7255771a10479097c55a">ClPoisonStackWithCall</a>) {</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;      IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a902af4d6cb3a421a7f5723d0fc81efd1">CreateCall2</a>(MS.MsanPoisonStackFn,</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;                      IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(&amp;I, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7badbb741cd23e73ad063428c9cd5fea">getInt8PtrTy</a>()),</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;                      <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(MS.IntptrTy, Size));</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *ShadowBase = getShadowPtr(&amp;I, <a class="code" href="classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">Type::getInt8PtrTy</a>(*MS.C), IRB);</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *PoisonValue = IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a52caf9c563fee52b23e0ee4875c6248f">getInt8</a>(PoisonStack ? <a class="code" href="MemorySanitizer_8cpp.html#af68b3e004c234c70ebf1f4ffd042c0b5">ClPoisonStackPattern</a> : 0);</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;      IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a58f62481bd3a4bfc5d07102fe857741a">CreateMemSet</a>(ShadowBase, PoisonValue, Size, I.<a class="code" href="classllvm_1_1AllocaInst.html#ad441932c20e5b9ba36c8c72a6c7f5ec3">getAlignment</a>());</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;    }</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;    <span class="keywordflow">if</span> (PoisonStack &amp;&amp; MS.TrackOrigins) {</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;      setOrigin(&amp;I, getCleanOrigin());</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;      <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;2048&gt;</a> StackDescriptionStorage;</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;      <a class="code" href="classllvm_1_1raw__svector__ostream.html">raw_svector_ostream</a> StackDescription(StackDescriptionStorage);</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;      <span class="comment">// We create a string with a description of the stack allocation and</span></div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;      <span class="comment">// pass it into __msan_set_alloca_origin.</span></div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;      <span class="comment">// It will be printed by the run-time if stack-originated UMR is found.</span></div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;      <span class="comment">// The first 4 bytes of the string are set to &#39;----&#39; and will be replaced</span></div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;      <span class="comment">// by __msan_va_arg_overflow_size_tls at the first call.</span></div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;      StackDescription &lt;&lt; <span class="stringliteral">&quot;----&quot;</span> &lt;&lt; I.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() &lt;&lt; <span class="stringliteral">&quot;@&quot;</span> &lt;&lt; F.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>();</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Descr =</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;          <a class="code" href="MemorySanitizer_8cpp.html#a2638c0c0f82157f94a2040d1e76b5fa5">createPrivateNonConstGlobalForString</a>(*F.<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>(),</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;                                               StackDescription.<a class="code" href="classllvm_1_1raw__svector__ostream.html#a941652907e3c1b132f86e1870bb5b291">str</a>());</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;      IRB.<a class="code" href="classllvm_1_1IRBuilder.html#acfc391b16e99fd8660071b3725f0286c">CreateCall4</a>(MS.MsanSetAllocaOrigin4Fn,</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;                      IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(&amp;I, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7badbb741cd23e73ad063428c9cd5fea">getInt8PtrTy</a>()),</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;                      <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(MS.IntptrTy, Size),</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;                      IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(Descr, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7badbb741cd23e73ad063428c9cd5fea">getInt8PtrTy</a>()),</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;                      IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(&amp;F, MS.IntptrTy));</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;    }</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;  }</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;  <span class="keywordtype">void</span> visitSelectInst(<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a>&amp; I) {</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(&amp;I);</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;    <span class="comment">// a = select b, c, d</span></div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#ae19d9d49f39d404703b42161ce788954">CreateSelect</a>(I.<a class="code" href="classllvm_1_1SelectInst.html#ad285a69e32ddeee367fed93b5f392801">getCondition</a>(), getShadow(I.<a class="code" href="classllvm_1_1SelectInst.html#a67bf091383cd61e1225445e78b61d9f9">getTrueValue</a>()),</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;                                getShadow(I.<a class="code" href="classllvm_1_1SelectInst.html#a29a16f32075ee4f23cd769701463952c">getFalseValue</a>()));</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;    <span class="keywordflow">if</span> (I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a0a32c2cb0342323dc78f6aa31d7e581e">isAggregateType</a>()) {</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;      <span class="comment">// To avoid &quot;sign extending&quot; i1 to an arbitrary aggregate type, we just do</span></div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;      <span class="comment">// an extra &quot;select&quot;. This results in much more compact IR.</span></div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;      <span class="comment">// Sa = select Sb, poisoned, (select b, Sc, Sd)</span></div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;      S = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#ae19d9d49f39d404703b42161ce788954">CreateSelect</a>(getShadow(I.<a class="code" href="classllvm_1_1SelectInst.html#ad285a69e32ddeee367fed93b5f392801">getCondition</a>()),</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;                           getPoisonedShadow(getShadowTy(I.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())), <a class="code" href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>,</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;                           <span class="stringliteral">&quot;_msprop_select_agg&quot;</span>);</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;      <span class="comment">// Sa = (sext Sb) | (select b, Sc, Sd)</span></div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;      S = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a8f55dd4237be6778517ddd752ca8b76a">CreateOr</a>(S, CreateShadowCast(IRB, getShadow(I.<a class="code" href="classllvm_1_1SelectInst.html#ad285a69e32ddeee367fed93b5f392801">getCondition</a>()),</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;                                           S-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), <span class="keyword">true</span>),</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;                       <span class="stringliteral">&quot;_msprop_select&quot;</span>);</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;    }</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;    setShadow(&amp;I, S);</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;    <span class="keywordflow">if</span> (MS.TrackOrigins) {</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;      <span class="comment">// Origins are always i32, so any vector conditions must be flattened.</span></div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;      <span class="comment">// FIXME: consider tracking vector origins for app vectors?</span></div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Cond = I.<a class="code" href="classllvm_1_1SelectInst.html#ad285a69e32ddeee367fed93b5f392801">getCondition</a>();</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;      <span class="keywordflow">if</span> (Cond-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">isVectorTy</a>()) {</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *ConvertedShadow = convertToShadowTyNoVec(Cond, IRB);</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;        Cond = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a609c7b4d7eb90f7c4627da58dc00fa42">CreateICmpNE</a>(ConvertedShadow,</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;                                getCleanShadow(ConvertedShadow), <span class="stringliteral">&quot;_mso_select&quot;</span>);</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;      }</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;      setOrigin(&amp;I, IRB.<a class="code" href="classllvm_1_1IRBuilder.html#ae19d9d49f39d404703b42161ce788954">CreateSelect</a>(Cond,</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;                getOrigin(I.<a class="code" href="classllvm_1_1SelectInst.html#a67bf091383cd61e1225445e78b61d9f9">getTrueValue</a>()), getOrigin(I.<a class="code" href="classllvm_1_1SelectInst.html#a29a16f32075ee4f23cd769701463952c">getFalseValue</a>())));</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;    }</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;  }</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;  <span class="keywordtype">void</span> visitLandingPadInst(<a class="code" href="classllvm_1_1LandingPadInst.html">LandingPadInst</a> &amp;I) {</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;    <span class="comment">// Do nothing.</span></div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;    <span class="comment">// See http://code.google.com/p/memory-sanitizer/issues/detail?id=1</span></div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;    setShadow(&amp;I, getCleanShadow(&amp;I));</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;    setOrigin(&amp;I, getCleanOrigin());</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;  }</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;  <span class="keywordtype">void</span> visitGetElementPtrInst(<a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> &amp;I) {</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;    handleShadowOr(I);</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;  }</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;  <span class="keywordtype">void</span> visitExtractValueInst(<a class="code" href="classllvm_1_1ExtractValueInst.html">ExtractValueInst</a> &amp;I) {</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(&amp;I);</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Agg = I.<a class="code" href="classllvm_1_1ExtractValueInst.html#ab87e7c5a729885396b3b045ad375e4b8">getAggregateOperand</a>();</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ExtractValue:  &quot;</span> &lt;&lt; I &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *AggShadow = getShadow(Agg);</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;   AggShadow:  &quot;</span> &lt;&lt; *AggShadow &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *ResShadow = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a478d9db5034ad1bef340198c3aaf861a">CreateExtractValue</a>(AggShadow, I.<a class="code" href="classllvm_1_1ExtractValueInst.html#aabcc9d0c7c5b68bf66032d1c1c1aa4dd">getIndices</a>());</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;   ResShadow:  &quot;</span> &lt;&lt; *ResShadow &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;    setShadow(&amp;I, ResShadow);</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;    setOriginForNaryOp(I);</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;  }</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;  <span class="keywordtype">void</span> visitInsertValueInst(<a class="code" href="classllvm_1_1InsertValueInst.html">InsertValueInst</a> &amp;I) {</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(&amp;I);</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;InsertValue:  &quot;</span> &lt;&lt; I &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *AggShadow = getShadow(I.<a class="code" href="classllvm_1_1InsertValueInst.html#a082d322376f368b751695d3687954471">getAggregateOperand</a>());</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *InsShadow = getShadow(I.<a class="code" href="classllvm_1_1InsertValueInst.html#a9a004adbac8f42baab2ae52ae879a34b">getInsertedValueOperand</a>());</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;   AggShadow:  &quot;</span> &lt;&lt; *AggShadow &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;   InsShadow:  &quot;</span> &lt;&lt; *InsShadow &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Res = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a8bbeae6f9dd03923c7cf63a6ff9f4036">CreateInsertValue</a>(AggShadow, InsShadow, I.<a class="code" href="classllvm_1_1InsertValueInst.html#a1fb1cc7adc35b5742dc6760eb93630a7">getIndices</a>());</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;   Res:        &quot;</span> &lt;&lt; *Res &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;    setShadow(&amp;I, Res);</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;    setOriginForNaryOp(I);</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;  }</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;</div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#a7328d663d7d772819aec028183e73729">dumpInst</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;I) {</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI = dyn_cast&lt;CallInst&gt;(&amp;I)) {</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;      <a class="code" href="namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">errs</a>() &lt;&lt; <span class="stringliteral">&quot;ZZZ call &quot;</span> &lt;&lt; CI-&gt;getCalledFunction()-&gt;getName() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;      <a class="code" href="namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">errs</a>() &lt;&lt; <span class="stringliteral">&quot;ZZZ &quot;</span> &lt;&lt; I.<a class="code" href="classllvm_1_1Instruction.html#a3d95172e192ecd22f18b0b76da6d2320">getOpcodeName</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;    }</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;    <a class="code" href="namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">errs</a>() &lt;&lt; <span class="stringliteral">&quot;QQQ &quot;</span> &lt;&lt; I &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;  }</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;  <span class="keywordtype">void</span> visitResumeInst(<a class="code" href="classllvm_1_1ResumeInst.html">ResumeInst</a> &amp;I) {</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Resume: &quot;</span> &lt;&lt; I &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;    <span class="comment">// Nothing to do here.</span></div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;  }</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;  <span class="keywordtype">void</span> visitInstruction(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;I) {</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;    <span class="comment">// Everything else: stop propagating and check for poisoned shadow.</span></div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MemorySanitizer_8cpp.html#af4383ad0a5878a085ea98b050a615604">ClDumpStrictInstructions</a>)</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;      <a class="code" href="namespacellvm.html#a7328d663d7d772819aec028183e73729">dumpInst</a>(I);</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;DEFAULT: &quot;</span> &lt;&lt; I &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0, <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a> = I.<a class="code" href="classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>(); i &lt; <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>; i++)</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;      insertShadowCheck(I.<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(i), &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;    setShadow(&amp;I, getCleanShadow(&amp;I));</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;    setOrigin(&amp;I, getCleanOrigin());</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;  }</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;};</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;<span class="comment">/// \brief AMD64-specific implementation of VarArgHelper.</span></div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;<span class="comment"></span><span class="keyword">struct </span>VarArgAMD64Helper : <span class="keyword">public</span> VarArgHelper {</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;  <span class="comment">// An unfortunate workaround for asymmetric lowering of va_arg stuff.</span></div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;  <span class="comment">// See a comment in visitCallSite for more details.</span></div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> AMD64GpEndOffset = 48;  <span class="comment">// AMD64 ABI Draft 0.99.6 p3.5.7</span></div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> AMD64FpEndOffset = 176;</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>;</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;  MemorySanitizer &amp;MS;</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;  MemorySanitizerVisitor &amp;MSV;</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *VAArgTLSCopy;</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *VAArgOverflowSize;</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;CallInst*, 16&gt;</a> VAStartInstrumentationList;</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;  VarArgAMD64Helper(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;F, MemorySanitizer &amp;MS,</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;                    MemorySanitizerVisitor &amp;MSV)</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;    : <a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>(F), MS(MS), MSV(MSV), VAArgTLSCopy(0), VAArgOverflowSize(0) { }</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;  <span class="keyword">enum</span> ArgKind { AK_GeneralPurpose, AK_FloatingPoint, AK_Memory };</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;  ArgKind classifyArgument(<a class="code" href="classllvm_1_1Value.html">Value</a>* arg) {</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;    <span class="comment">// A very rough approximation of X86_64 argument classification rules.</span></div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *<a class="code" href="classT.html">T</a> = arg-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;    <span class="keywordflow">if</span> (T-&gt;<a class="code" href="classllvm_1_1Type.html#a35a540d6e55bff813e9b195ebdb3da9f">isFPOrFPVectorTy</a>() || T-&gt;<a class="code" href="classllvm_1_1Type.html#af47064c2a364c1b3542f545c9f4b6f8d">isX86_MMXTy</a>())</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;      <span class="keywordflow">return</span> AK_FloatingPoint;</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;    <span class="keywordflow">if</span> (T-&gt;<a class="code" href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">isIntegerTy</a>() &amp;&amp; T-&gt;<a class="code" href="classllvm_1_1Type.html#a5a7cfa245af120b44ac8a86143bb9e57">getPrimitiveSizeInBits</a>() &lt;= 64)</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;      <span class="keywordflow">return</span> AK_GeneralPurpose;</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;    <span class="keywordflow">if</span> (T-&gt;<a class="code" href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">isPointerTy</a>())</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;      <span class="keywordflow">return</span> AK_GeneralPurpose;</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;    <span class="keywordflow">return</span> AK_Memory;</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;  }</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;  <span class="comment">// For VarArg functions, store the argument shadow in an ABI-specific format</span></div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;  <span class="comment">// that corresponds to va_list layout.</span></div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;  <span class="comment">// We do this because Clang lowers va_arg in the frontend, and this pass</span></div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;  <span class="comment">// only sees the low level code that deals with va_list internals.</span></div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;  <span class="comment">// A much easier alternative (provided that Clang emits va_arg instructions)</span></div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;  <span class="comment">// would have been to associate each live instance of va_list with a copy of</span></div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;  <span class="comment">// MSanParamTLS, and extract shadow on va_arg() call in the argument list</span></div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;  <span class="comment">// order.</span></div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;  <span class="keywordtype">void</span> visitCallSite(<a class="code" href="classllvm_1_1CallSite.html">CallSite</a> &amp;CS, <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;IRB) {</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;    <span class="keywordtype">unsigned</span> GpOffset = 0;</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;    <span class="keywordtype">unsigned</span> FpOffset = AMD64GpEndOffset;</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;    <span class="keywordtype">unsigned</span> OverflowOffset = AMD64FpEndOffset;</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1CallSiteBase.html#a9c293af587813d72fdc976697dd07f23">CallSite::arg_iterator</a> ArgIt = CS.<a class="code" href="classllvm_1_1CallSiteBase.html#affa0f3ae92ab8696fccd107c0addf5a2">arg_begin</a>(), End = CS.<a class="code" href="classllvm_1_1CallSiteBase.html#acc2eeccdf71d83b3c08d6218317a1430">arg_end</a>();</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;         ArgIt != End; ++ArgIt) {</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a> = *ArgIt;</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;      ArgKind AK = classifyArgument(A);</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;      <span class="keywordflow">if</span> (AK == AK_GeneralPurpose &amp;&amp; GpOffset &gt;= AMD64GpEndOffset)</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;        AK = AK_Memory;</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;      <span class="keywordflow">if</span> (AK == AK_FloatingPoint &amp;&amp; FpOffset &gt;= AMD64FpEndOffset)</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;        AK = AK_Memory;</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Base;</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;      <span class="keywordflow">switch</span> (AK) {</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;      <span class="keywordflow">case</span> AK_GeneralPurpose:</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;        Base = getShadowPtrForVAArgument(A, IRB, GpOffset);</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;        GpOffset += 8;</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;      <span class="keywordflow">case</span> AK_FloatingPoint:</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;        Base = getShadowPtrForVAArgument(A, IRB, FpOffset);</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;        FpOffset += 16;</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;      <span class="keywordflow">case</span> AK_Memory:</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;        uint64_t ArgSize = MS.TD-&gt;getTypeAllocSize(A-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;        Base = getShadowPtrForVAArgument(A, IRB, OverflowOffset);</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;        OverflowOffset += <a class="code" href="classllvm_1_1DataLayout.html#a23bc21c600966b6ec9f9a5e588dba349">DataLayout::RoundUpAlignment</a>(ArgSize, 8);</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;      }</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;      IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a674095e41573ea310d48ba480dca34a9">CreateAlignedStore</a>(MSV.getShadow(A), Base, <a class="code" href="MemorySanitizer_8cpp.html#a18599dcc3be2ad58c3ed01ea18609782">kShadowTLSAlignment</a>);</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;    }</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *OverflowSize =</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;      <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a2e32c414382ed5fd53a770026361ed19">getInt64Ty</a>(), OverflowOffset - AMD64FpEndOffset);</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;    IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a43f7fa52a3fbe01e44c40d9db278ab3e">CreateStore</a>(OverflowSize, MS.VAArgOverflowSizeTLS);</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;  }</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;<span class="comment">  /// \brief Compute the shadow address for a given va_arg.</span></div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Value.html">Value</a> *getShadowPtrForVAArgument(<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>, <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;IRB,</div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;                                   <span class="keywordtype">int</span> ArgOffset) {</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Base = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(MS.VAArgTLS, MS.IntptrTy);</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;    Base = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a112f87f5844b5d94c07940f3d47f1e99">CreateAdd</a>(Base, <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(MS.IntptrTy, ArgOffset));</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;    <span class="keywordflow">return</span> IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a11d3f8bbc5a14f60879a87175db6695c">CreateIntToPtr</a>(Base, <a class="code" href="classllvm_1_1PointerType.html#a050a395d1656e546679d8b144d951bb2">PointerType::get</a>(MSV.getShadowTy(A), 0),</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;                              <span class="stringliteral">&quot;_msarg&quot;</span>);</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;  }</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;  <span class="keywordtype">void</span> visitVAStartInst(<a class="code" href="classllvm_1_1VAStartInst.html">VAStartInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(&amp;I);</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;    VAStartInstrumentationList.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(&amp;I);</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *VAListTag = I.<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(0);</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *ShadowPtr = MSV.getShadowPtr(VAListTag, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7a71da01c646618b7f43d303d563b41b">getInt8Ty</a>(), IRB);</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;    <span class="comment">// Unpoison the whole __va_list_tag.</span></div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;    <span class="comment">// FIXME: magic ABI constants.</span></div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;    IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a58f62481bd3a4bfc5d07102fe857741a">CreateMemSet</a>(ShadowPtr, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7a71da01c646618b7f43d303d563b41b">getInt8Ty</a>()),</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;                     <span class="comment">/* size */</span>24, <span class="comment">/* alignment */</span>8, <span class="keyword">false</span>);</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;  }</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;  <span class="keywordtype">void</span> visitVACopyInst(<a class="code" href="classllvm_1_1VACopyInst.html">VACopyInst</a> &amp;I) {</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(&amp;I);</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *VAListTag = I.<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(0);</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *ShadowPtr = MSV.getShadowPtr(VAListTag, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7a71da01c646618b7f43d303d563b41b">getInt8Ty</a>(), IRB);</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;    <span class="comment">// Unpoison the whole __va_list_tag.</span></div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;    <span class="comment">// FIXME: magic ABI constants.</span></div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;    IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a58f62481bd3a4bfc5d07102fe857741a">CreateMemSet</a>(ShadowPtr, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7a71da01c646618b7f43d303d563b41b">getInt8Ty</a>()),</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;                     <span class="comment">/* size */</span>24, <span class="comment">/* alignment */</span>8, <span class="keyword">false</span>);</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;  }</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;  <span class="keywordtype">void</span> finalizeInstrumentation() {</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;    assert(!VAArgOverflowSize &amp;&amp; !VAArgTLSCopy &amp;&amp;</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;           <span class="stringliteral">&quot;finalizeInstrumentation called twice&quot;</span>);</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;    <span class="keywordflow">if</span> (!VAStartInstrumentationList.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>()) {</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;      <span class="comment">// If there is a va_start in this function, make a backup copy of</span></div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;      <span class="comment">// va_arg_tls somewhere in the function entry block.</span></div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;      <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(F.<a class="code" href="classllvm_1_1Function.html#a30f2c362631e3728d2f47a8203071ade">getEntryBlock</a>().<a class="code" href="classllvm_1_1BasicBlock.html#a0e73f4e09745bb69fdd7b15232c45428">getFirstNonPHI</a>());</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;      VAArgOverflowSize = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#af440b535b3b4e8d0d089dd0ed2283a0f">CreateLoad</a>(MS.VAArgOverflowSizeTLS);</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *CopySize =</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;        IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a112f87f5844b5d94c07940f3d47f1e99">CreateAdd</a>(<a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(MS.IntptrTy, AMD64FpEndOffset),</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;                      VAArgOverflowSize);</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;      VAArgTLSCopy = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a2877bfb208e8e523e5d0eda3488c9ade">CreateAlloca</a>(<a class="code" href="classllvm_1_1Type.html#a7ba5de75f50bb4a4ba920698edf39b28">Type::getInt8Ty</a>(*MS.C), CopySize);</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;      IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a849b50da820a274b4d001fbeadaf5cd7">CreateMemCpy</a>(VAArgTLSCopy, MS.VAArgTLS, CopySize, 8);</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;    }</div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;    <span class="comment">// Instrument va_start.</span></div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;    <span class="comment">// Copy va_list shadow from the backup copy of the TLS contents.</span></div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a> = VAStartInstrumentationList.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;      <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *OrigInst = VAStartInstrumentationList[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;      <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(OrigInst-&gt;<a class="code" href="classllvm_1_1ilist__node.html#a6ac308903849239f2f308aa180dda61b">getNextNode</a>());</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *VAListTag = OrigInst-&gt;<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(0);</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *RegSaveAreaPtrPtr =</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;        IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a11d3f8bbc5a14f60879a87175db6695c">CreateIntToPtr</a>(</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;          IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a112f87f5844b5d94c07940f3d47f1e99">CreateAdd</a>(IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a9299aed1efa0ef459a0f1c7fa11fbe61">CreatePtrToInt</a>(VAListTag, MS.IntptrTy),</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;                        <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(MS.IntptrTy, 16)),</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;          <a class="code" href="classllvm_1_1Type.html#a9739fda41ce7be4d43bb5b45bbd0e460">Type::getInt64PtrTy</a>(*MS.C));</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *RegSaveAreaPtr = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#af440b535b3b4e8d0d089dd0ed2283a0f">CreateLoad</a>(RegSaveAreaPtrPtr);</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *RegSaveAreaShadowPtr =</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;        MSV.getShadowPtr(RegSaveAreaPtr, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7a71da01c646618b7f43d303d563b41b">getInt8Ty</a>(), IRB);</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;      IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a849b50da820a274b4d001fbeadaf5cd7">CreateMemCpy</a>(RegSaveAreaShadowPtr, VAArgTLSCopy,</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;                       AMD64FpEndOffset, 16);</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *OverflowArgAreaPtrPtr =</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;        IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a11d3f8bbc5a14f60879a87175db6695c">CreateIntToPtr</a>(</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;          IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a112f87f5844b5d94c07940f3d47f1e99">CreateAdd</a>(IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a9299aed1efa0ef459a0f1c7fa11fbe61">CreatePtrToInt</a>(VAListTag, MS.IntptrTy),</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;                        <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(MS.IntptrTy, 8)),</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;          <a class="code" href="classllvm_1_1Type.html#a9739fda41ce7be4d43bb5b45bbd0e460">Type::getInt64PtrTy</a>(*MS.C));</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *OverflowArgAreaPtr = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#af440b535b3b4e8d0d089dd0ed2283a0f">CreateLoad</a>(OverflowArgAreaPtrPtr);</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *OverflowArgAreaShadowPtr =</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;        MSV.getShadowPtr(OverflowArgAreaPtr, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7a71da01c646618b7f43d303d563b41b">getInt8Ty</a>(), IRB);</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *SrcPtr = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a9d00127f263561d6f401c59a9f2626ef">CreateConstGEP1_32</a>(VAArgTLSCopy, AMD64FpEndOffset);</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;      IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a849b50da820a274b4d001fbeadaf5cd7">CreateMemCpy</a>(OverflowArgAreaShadowPtr, SrcPtr, VAArgOverflowSize, 16);</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;    }</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;  }</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;};</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;<span class="comment">/// \brief A no-op implementation of VarArgHelper.</span></div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;<span class="comment"></span><span class="keyword">struct </span>VarArgNoOpHelper : <span class="keyword">public</span> VarArgHelper {</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;  VarArgNoOpHelper(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>, MemorySanitizer &amp;MS,</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;                   MemorySanitizerVisitor &amp;MSV) {}</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;  <span class="keywordtype">void</span> visitCallSite(<a class="code" href="classllvm_1_1CallSite.html">CallSite</a> &amp;CS, <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;IRB) {}</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;  <span class="keywordtype">void</span> visitVAStartInst(<a class="code" href="classllvm_1_1VAStartInst.html">VAStartInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {}</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;  <span class="keywordtype">void</span> visitVACopyInst(<a class="code" href="classllvm_1_1VACopyInst.html">VACopyInst</a> &amp;I) {}</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;  <span class="keywordtype">void</span> finalizeInstrumentation() {}</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;};</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;VarArgHelper *CreateVarArgHelper(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;Func, MemorySanitizer &amp;Msan,</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;                                 MemorySanitizerVisitor &amp;Visitor) {</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;  <span class="comment">// VarArg handling is only implemented on AMD64. False positives are possible</span></div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;  <span class="comment">// on other platforms.</span></div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;  <a class="code" href="classllvm_1_1Triple.html">llvm::Triple</a> TargetTriple(Func.<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Module.html#a40da6cb8652ba35211cdc58b07399754">getTargetTriple</a>());</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;  <span class="keywordflow">if</span> (TargetTriple.getArch() == <a class="code" href="classllvm_1_1Triple.html#a547abd13f7a3c063aa72c8192a868154a13d8ce5e71051718a537277c6a594062">llvm::Triple::x86_64</a>)</div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> VarArgAMD64Helper(Func, Msan, Visitor);</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> VarArgNoOpHelper(Func, Msan, Visitor);</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;}</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;}  <span class="comment">// namespace</span></div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;<span class="keywordtype">bool</span> MemorySanitizer::runOnFunction(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>) {</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;  MemorySanitizerVisitor Visitor(F, *<span class="keyword">this</span>);</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;  <span class="comment">// Clear out readonly/readnone attributes.</span></div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;  <a class="code" href="classllvm_1_1AttrBuilder.html">AttrBuilder</a> <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>;</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;  B.<a class="code" href="classllvm_1_1AttrBuilder.html#a59d23ba2e7eac46cbc6cd3086e013b49">addAttribute</a>(<a class="code" href="classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60ea72f3f4379fdf9acf18ec492b98d31deb">Attribute::ReadOnly</a>)</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;    .<a class="code" href="classllvm_1_1AttrBuilder.html#a59d23ba2e7eac46cbc6cd3086e013b49">addAttribute</a>(<a class="code" href="classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60eaa94162b0564176cc56e5688691877074">Attribute::ReadNone</a>);</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;  F.<a class="code" href="classllvm_1_1Function.html#a12df9495b95331ab7ed614624e5268d2">removeAttributes</a>(AttributeSet::FunctionIndex,</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;                     AttributeSet::get(F.<a class="code" href="classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">getContext</a>(),</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;                                       AttributeSet::FunctionIndex, <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>));</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;  <span class="keywordflow">return</span> Visitor.runOnFunction();</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;}</div><div class="ttc" id="classllvm_1_1GlobalValue_html_aa242d8ab89216c14beab812e07009b2a"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aa242d8ab89216c14beab812e07009b2a">llvm::GlobalValue::setVisibility</a></div><div class="ttdeci">void setVisibility(VisibilityTypes V)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00093">GlobalValue.h:93</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a3f8c45ea10c393433221a508b750dcd5"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a3f8c45ea10c393433221a508b750dcd5">llvm::IRBuilder::CreateLShr</a></div><div class="ttdeci">Value * CreateLShr(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;, bool isExact=false)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00753">IRBuilder.h:753</a></div></div>
<div class="ttc" id="MemorySanitizer_8cpp_html_ac3caf762dffb7813be6e548f5b34679c"><div class="ttname"><a href="MemorySanitizer_8cpp.html#ac3caf762dffb7813be6e548f5b34679c">kShadowMask64</a></div><div class="ttdeci">static const uint64_t kShadowMask64</div><div class="ttdef"><b>Definition:</b> <a href="MemorySanitizer_8cpp_source.html#l00126">MemorySanitizer.cpp:126</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00127">SmallVector.h:127</a></div></div>
<div class="ttc" id="classllvm_1_1ReturnInst_html"><div class="ttname"><a href="classllvm_1_1ReturnInst.html">llvm::ReturnInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02279">Instructions.h:2279</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html_a14298313bdf734e2db5a921cc6e861a0"><div class="ttname"><a href="classllvm_1_1StoreInst.html#a14298313bdf734e2db5a921cc6e861a0">llvm::StoreInst::getValueOperand</a></div><div class="ttdeci">Value * getValueOperand()</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00343">Instructions.h:343</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00236">SmallVector.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html"><div class="ttname"><a href="classllvm_1_1DataLayout.html">llvm::DataLayout</a></div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00098">DataLayout.h:98</a></div></div>
<div class="ttc" id="namespacellvm_1_1ARM__PROC_html_aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5"><div class="ttname"><a href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">llvm::ARM_PROC::A</a></div><div class="ttdef"><b>Definition:</b> <a href="ARMBaseInfo_8h_source.html#l00098">ARMBaseInfo.h:98</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantDataArray_html_a3edef3fa47c611d3d10606591213e57b"><div class="ttname"><a href="classllvm_1_1ConstantDataArray.html#a3edef3fa47c611d3d10606591213e57b">llvm::ConstantDataArray::getString</a></div><div class="ttdeci">static Constant * getString(LLVMContext &amp;Context, StringRef Initializer, bool AddNull=true)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02368">Constants.cpp:2368</a></div></div>
<div class="ttc" id="namespacellvm_html_ab8e34eca3b0817ef7a127913fbf6d9e4"><div class="ttname"><a href="namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">llvm::errs</a></div><div class="ttdeci">raw_ostream &amp; errs()</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8cpp_source.html#l00664">raw_ostream.cpp:664</a></div></div>
<div class="ttc" id="classllvm_1_1AtomicCmpXchgInst_html_a51fec3c85c85fd5119a9eb57a89f3160"><div class="ttname"><a href="classllvm_1_1AtomicCmpXchgInst.html#a51fec3c85c85fd5119a9eb57a89f3160">llvm::AtomicCmpXchgInst::getOrdering</a></div><div class="ttdeci">AtomicOrdering getOrdering() const </div><div class="ttdoc">Returns the ordering constraint on this cmpxchg. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00501">Instructions.h:501</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_af440b535b3b4e8d0d089dd0ed2283a0f"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#af440b535b3b4e8d0d089dd0ed2283a0f">llvm::IRBuilder::CreateLoad</a></div><div class="ttdeci">LoadInst * CreateLoad(Value *Ptr, const char *Name)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00879">IRBuilder.h:879</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a089cccb6f231efee72abc76d0f9c695f"><div class="ttname"><a href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">llvm::PHINode::addIncoming</a></div><div class="ttdeci">void addIncoming(Value *V, BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02100">Instructions.h:2100</a></div></div>
<div class="ttc" id="classllvm_1_1ExtractValueInst_html"><div class="ttname"><a href="classllvm_1_1ExtractValueInst.html">llvm::ExtractValueInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01740">Instructions.h:1740</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a2da53ac53516a3f16191f4c8a8eaa3e5"><div class="ttname"><a href="classllvm_1_1Function.html#a2da53ac53516a3f16191f4c8a8eaa3e5">llvm::Function::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00167">Function.cpp:167</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a6fe2f06b8a4b2c3d6308afb223a0238a"><div class="ttname"><a href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00072">Instruction.cpp:72</a></div></div>
<div class="ttc" id="classllvm_1_1Argument_html"><div class="ttname"><a href="classllvm_1_1Argument.html">llvm::Argument</a></div><div class="ttdoc">LLVM Argument representation. </div><div class="ttdef"><b>Definition:</b> <a href="Argument_8h_source.html#l00035">Argument.h:35</a></div></div>
<div class="ttc" id="MemorySanitizer_8cpp_html_a34dc6bcc5675764c8085c5916908201e"><div class="ttname"><a href="MemorySanitizer_8cpp.html#a34dc6bcc5675764c8085c5916908201e">kOriginOffset32</a></div><div class="ttdeci">static const uint64_t kOriginOffset32</div><div class="ttdef"><b>Definition:</b> <a href="MemorySanitizer_8cpp_source.html#l00127">MemorySanitizer.cpp:127</a></div></div>
<div class="ttc" id="namespacellvm_html_abf74b2f0dbae96f4708d3e407b36df02ad642db52d1fbfed4f42253c64f23018f"><div class="ttname"><a href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02ad642db52d1fbfed4f42253c64f23018f">llvm::SequentiallyConsistent</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00044">Instructions.h:44</a></div></div>
<div class="ttc" id="classllvm_1_1InstVisitor_html"><div class="ttname"><a href="classllvm_1_1InstVisitor.html">llvm::InstVisitor</a></div><div class="ttdoc">Base class for instruction visitors. </div><div class="ttdef"><b>Definition:</b> <a href="InstVisitor_8h_source.html#l00081">InstVisitor.h:81</a></div></div>
<div class="ttc" id="classllvm_1_1InsertValueInst_html_a082d322376f368b751695d3687954471"><div class="ttname"><a href="classllvm_1_1InsertValueInst.html#a082d322376f368b751695d3687954471">llvm::InsertValueInst::getAggregateOperand</a></div><div class="ttdeci">Value * getAggregateOperand()</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01901">Instructions.h:1901</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90aa55679a4ef6acd135f5a510ebe96b278"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aa55679a4ef6acd135f5a510ebe96b278">llvm::Intrinsic::x86_avx512_cvtusi642ss</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02640">Intrinsics.h:2640</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a495d91fb3d2662acbffd0162c56153ed"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a495d91fb3d2662acbffd0162c56153ed">llvm::IRBuilder::CreateICmp</a></div><div class="ttdeci">Value * CreateICmp(CmpInst::Predicate P, Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01280">IRBuilder.h:1280</a></div></div>
<div class="ttc" id="namespacellvm_1_1XCoreISD_html_aef28e79e1ebefed9020708b2350b1f10adba71479b3d85460f040da54d76bd319"><div class="ttname"><a href="namespacellvm_1_1XCoreISD.html#aef28e79e1ebefed9020708b2350b1f10adba71479b3d85460f040da54d76bd319">llvm::XCoreISD::BL</a></div><div class="ttdef"><b>Definition:</b> <a href="XCoreISelLowering_8h_source.html#l00034">XCoreISelLowering.h:34</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="classllvm_1_1InsertValueInst_html_a1fb1cc7adc35b5742dc6760eb93630a7"><div class="ttname"><a href="classllvm_1_1InsertValueInst.html#a1fb1cc7adc35b5742dc6760eb93630a7">llvm::InsertValueInst::getIndices</a></div><div class="ttdeci">ArrayRef&lt; unsigned &gt; getIndices() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01921">Instructions.h:1921</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_afdd8a08bfcbd94f60d166a71a3e79ff3"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#afdd8a08bfcbd94f60d166a71a3e79ff3">llvm::IRBuilder::CreateIntCast</a></div><div class="ttdeci">Value * CreateIntCast(Value *V, Type *DestTy, bool isSigned, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01180">IRBuilder.h:1180</a></div></div>
<div class="ttc" id="ARMSubtarget_8cpp_html_aae20c66ad7139c9837b1d07d3a8b12c8"><div class="ttname"><a href="ARMSubtarget_8cpp.html#aae20c66ad7139c9837b1d07d3a8b12c8">IT</a></div><div class="ttdeci">static cl::opt&lt; ITMode &gt; IT(cl::desc(&quot;IT block support&quot;), cl::Hidden, cl::init(DefaultIT), cl::ZeroOrMore, cl::values(clEnumValN(DefaultIT,&quot;arm-default-it&quot;,&quot;Generate IT block based on arch&quot;), clEnumValN(RestrictedIT,&quot;arm-restrict-it&quot;,&quot;Disallow deprecated IT based on ARMv8&quot;), clEnumValN(NoRestrictedIT,&quot;arm-no-restrict-it&quot;,&quot;Allow IT blocks based on ARMv7&quot;), clEnumValEnd))</div></div>
<div class="ttc" id="classllvm_1_1Type_html_ad979b3c1bc975ee23810e3018ffe951b"><div class="ttname"><a href="classllvm_1_1Type.html#ad979b3c1bc975ee23810e3018ffe951b">llvm::Type::getScalarSizeInBits</a></div><div class="ttdeci">unsigned getScalarSizeInBits()</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00135">Type.cpp:135</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90aefbc09e32717c90f14b5416029971a2a"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aefbc09e32717c90f14b5416029971a2a">llvm::Intrinsic::x86_sse2_cvtsd2si64</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02983">Intrinsics.h:2983</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html"><div class="ttname"><a href="classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">The main container class for the LLVM Intermediate Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00112">Module.h:112</a></div></div>
<div class="ttc" id="Type_8h_html"><div class="ttname"><a href="Type_8h.html">Type.h</a></div></div>
<div class="ttc" id="classllvm_1_1CallSiteBase_html_acc2eeccdf71d83b3c08d6218317a1430"><div class="ttname"><a href="classllvm_1_1CallSiteBase.html#acc2eeccdf71d83b3c08d6218317a1430">llvm::CallSiteBase::arg_end</a></div><div class="ttdeci">IterTy arg_end() const </div><div class="ttdef"><b>Definition:</b> <a href="CallSite_8h_source.html#l00143">CallSite.h:143</a></div></div>
<div class="ttc" id="classllvm_1_1AtomicRMWInst_html_a5d1f392e4e23933104dbc6f0a5e78497"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a5d1f392e4e23933104dbc6f0a5e78497">llvm::AtomicRMWInst::setOrdering</a></div><div class="ttdeci">void setOrdering(AtomicOrdering Ordering)</div><div class="ttdoc">Set the ordering constraint on this RMW. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00632">Instructions.h:632</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57ca696bb1c9b0b0e76bb70c61f68866452a"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca696bb1c9b0b0e76bb70c61f68866452a">llvm::GlobalValue::WeakODRLinkage</a></div><div class="ttdoc">Same, but only replaced by something equivalent. </div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00039">GlobalValue.h:39</a></div></div>
<div class="ttc" id="classllvm_1_1IntrinsicInst_html_a6cbb4809b81f3994ee0c79b38556bd66"><div class="ttname"><a href="classllvm_1_1IntrinsicInst.html#a6cbb4809b81f3994ee0c79b38556bd66">llvm::IntrinsicInst::getIntrinsicID</a></div><div class="ttdeci">Intrinsic::ID getIntrinsicID() const </div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00043">IntrinsicInst.h:43</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a5a6342f2e2886342995cb58498cd1aa7"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a5a6342f2e2886342995cb58498cd1aa7">llvm::IRBuilder::CreateICmpSLT</a></div><div class="ttdeci">Value * CreateICmpSLT(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01230">IRBuilder.h:1230</a></div></div>
<div class="ttc" id="classllvm_1_1AtomicCmpXchgInst_html"><div class="ttname"><a href="classllvm_1_1AtomicCmpXchgInst.html">llvm::AtomicCmpXchgInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00449">Instructions.h:449</a></div></div>
<div class="ttc" id="MemorySanitizer_8cpp_html_af68b3e004c234c70ebf1f4ffd042c0b5"><div class="ttname"><a href="MemorySanitizer_8cpp.html#af68b3e004c234c70ebf1f4ffd042c0b5">ClPoisonStackPattern</a></div><div class="ttdeci">static cl::opt&lt; int &gt; ClPoisonStackPattern(&quot;msan-poison-stack-pattern&quot;, cl::desc(&quot;poison uninitialized stack variables with the given patter&quot;), cl::Hidden, cl::init(0xff))</div></div>
<div class="ttc" id="IntrinsicInst_8h_html"><div class="ttname"><a href="IntrinsicInst_8h.html">IntrinsicInst.h</a></div></div>
<div class="ttc" id="namespacellvm_html_a3f2f98c2a67c9e79f58aad9150a62e42"><div class="ttname"><a href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">llvm::dyn_cast</a></div><div class="ttdeci">enable_if_c&lt;!is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="Casting_8h_source.html#l00266">Casting.h:266</a></div></div>
<div class="ttc" id="MemorySanitizer_8cpp_html_abc1a7718688c7255771a10479097c55a"><div class="ttname"><a href="MemorySanitizer_8cpp.html#abc1a7718688c7255771a10479097c55a">ClPoisonStackWithCall</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClPoisonStackWithCall(&quot;msan-poison-stack-with-call&quot;, cl::desc(&quot;poison uninitialized stack variables with a call&quot;), cl::Hidden, cl::init(false))</div></div>
<div class="ttc" id="classllvm_1_1ZExtInst_html"><div class="ttname"><a href="classllvm_1_1ZExtInst.html">llvm::ZExtInst</a></div><div class="ttdoc">This class represents zero extension of integer types. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03211">Instructions.h:3211</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a2f81e0c1fc6554df7ad2eafabf5fc5a5"><div class="ttname"><a href="classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">llvm::User::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00108">User.h:108</a></div></div>
<div class="ttc" id="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode_html_a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4"><div class="ttname"><a href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">llvm::NVPTX::PTXLdStInstCode::V2</a></div><div class="ttdef"><b>Definition:</b> <a href="NVPTX_8h_source.html#l00127">NVPTX.h:127</a></div></div>
<div class="ttc" id="namespacellvm_html_ae85c8b3bbab3831fdbb0a4eddebddcdf"><div class="ttname"><a href="namespacellvm.html#ae85c8b3bbab3831fdbb0a4eddebddcdf">llvm::appendToGlobalCtors</a></div><div class="ttdeci">void appendToGlobalCtors(Module &amp;M, Function *F, int Priority)</div><div class="ttdef"><b>Definition:</b> <a href="ModuleUtils_8cpp_source.html#l00059">ModuleUtils.cpp:59</a></div></div>
<div class="ttc" id="DataLayout_8h_html"><div class="ttname"><a href="DataLayout_8h.html">DataLayout.h</a></div></div>
<div class="ttc" id="namespacellvm_html_abf74b2f0dbae96f4708d3e407b36df02a489aa5052a55520044e1e82b2da7a336"><div class="ttname"><a href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02a489aa5052a55520044e1e82b2da7a336">llvm::Release</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00042">Instructions.h:42</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01978">Instructions.h:1978</a></div></div>
<div class="ttc" id="Debug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html"><div class="ttname"><a href="classllvm_1_1CallInst.html">llvm::CallInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01161">Instructions.h:1161</a></div></div>
<div class="ttc" id="Triple_8h_html"><div class="ttname"><a href="Triple_8h.html">Triple.h</a></div></div>
<div class="ttc" id="classllvm_1_1CallSiteBase_html_ae8db0b64d91fa18dfcc01a684708c00b"><div class="ttname"><a href="classllvm_1_1CallSiteBase.html#ae8db0b64d91fa18dfcc01a684708c00b">llvm::CallSiteBase::setCalledFunction</a></div><div class="ttdeci">void setCalledFunction(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="CallSite_8h_source.html#l00099">CallSite.h:99</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_a46adba111f7580ebfbb869a008de1818"><div class="ttname"><a href="classllvm_1_1LoadInst.html#a46adba111f7580ebfbb869a008de1818">llvm::LoadInst::setOrdering</a></div><div class="ttdeci">void setOrdering(AtomicOrdering Ordering)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00194">Instructions.h:194</a></div></div>
<div class="ttc" id="classllvm_1_1PointerType_html_a050a395d1656e546679d8b144d951bb2"><div class="ttname"><a href="classllvm_1_1PointerType.html#a050a395d1656e546679d8b144d951bb2">llvm::PointerType::get</a></div><div class="ttdeci">static PointerType * get(Type *ElementType, unsigned AddressSpace)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00730">Type.cpp:730</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a5ccd8260c37f3ac075e782b7df2229e5"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">llvm::IRBuilder::CreatePointerCast</a></div><div class="ttdeci">Value * CreatePointerCast(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01172">IRBuilder.h:1172</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a13f7eef27b0ecfe146cbac49b3054c91"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a13f7eef27b0ecfe146cbac49b3054c91">llvm::CmpInst::isSigned</a></div><div class="ttdeci">bool isSigned() const </div><div class="ttdoc">Determine if this instruction is using a signed comparison. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00780">InstrTypes.h:780</a></div></div>
<div class="ttc" id="classllvm_1_1Triple_html_a547abd13f7a3c063aa72c8192a868154a13d8ce5e71051718a537277c6a594062"><div class="ttname"><a href="classllvm_1_1Triple.html#a547abd13f7a3c063aa72c8192a868154a13d8ce5e71051718a537277c6a594062">llvm::Triple::x86_64</a></div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00067">Triple.h:67</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57ca04ed141708c0fd16723d212502b046ae"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca04ed141708c0fd16723d212502b046ae">llvm::GlobalValue::PrivateLinkage</a></div><div class="ttdoc">Like Internal, but omit from symbol table. </div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00042">GlobalValue.h:42</a></div></div>
<div class="ttc" id="classllvm_1_1AtomicCmpXchgInst_html_abee8a2e303df959dfd3cf384f58a30d3"><div class="ttname"><a href="classllvm_1_1AtomicCmpXchgInst.html#abee8a2e303df959dfd3cf384f58a30d3">llvm::AtomicCmpXchgInst::setOrdering</a></div><div class="ttdeci">void setOrdering(AtomicOrdering Ordering)</div><div class="ttdoc">Set the ordering constraint on this cmpxchg. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00485">Instructions.h:485</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90abd0dfc9ad112d9140a2e0725d24b284c"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90abd0dfc9ad112d9140a2e0725d24b284c">llvm::Intrinsic::x86_sse2_cvtsi2sd</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02985">Intrinsics.h:2985</a></div></div>
<div class="ttc" id="classllvm_1_1ShuffleVectorInst_html"><div class="ttname"><a href="classllvm_1_1ShuffleVectorInst.html">llvm::ShuffleVectorInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01660">Instructions.h:1660</a></div></div>
<div class="ttc" id="classllvm_1_1SpecialCaseList_html_a764fef55eb958b69088c065dc47e31cc"><div class="ttname"><a href="classllvm_1_1SpecialCaseList.html#a764fef55eb958b69088c065dc47e31cc">llvm::SpecialCaseList::createOrDie</a></div><div class="ttdeci">static SpecialCaseList * createOrDie(const StringRef Path)</div><div class="ttdef"><b>Definition:</b> <a href="SpecialCaseList_8cpp_source.html#l00074">SpecialCaseList.cpp:74</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e">llvm::GlobalValue::ExternalLinkage</a></div><div class="ttdoc">Externally visible function. </div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00034">GlobalValue.h:34</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a9c30c87af01068ceae02cd371748d175"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a9c30c87af01068ceae02cd371748d175">llvm::IRBuilder::CreateICmpULT</a></div><div class="ttdeci">Value * CreateICmpULT(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01218">IRBuilder.h:1218</a></div></div>
<div class="ttc" id="classllvm_1_1df__iterator_html"><div class="ttname"><a href="classllvm_1_1df__iterator.html">llvm::df_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="DepthFirstIterator_8h_source.html#l00065">DepthFirstIterator.h:65</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90ab626e256ebb2225a137f51e94cd18d5c"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ab626e256ebb2225a137f51e94cd18d5c">llvm::Intrinsic::x86_sse_cvttss2si</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l03154">Intrinsics.h:3154</a></div></div>
<div class="ttc" id="classllvm_1_1raw__svector__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__svector__ostream.html">llvm::raw_svector_ostream</a></div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00450">raw_ostream.h:450</a></div></div>
<div class="ttc" id="classllvm_1_1MemSetInst_html"><div class="ttname"><a href="classllvm_1_1MemSetInst.html">llvm::MemSetInst</a></div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00190">IntrinsicInst.h:190</a></div></div>
<div class="ttc" id="classllvm_1_1ICmpInst_html_abe8988eef2e6fc2baba032cb22afedd7"><div class="ttname"><a href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">llvm::ICmpInst::isEquality</a></div><div class="ttdeci">static bool isEquality(Predicate P)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00997">Instructions.h:997</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a8300ac1ef141b8a7c63c13fa9369d976"><div class="ttname"><a href="classllvm_1_1Function.html#a8300ac1ef141b8a7c63c13fa9369d976">llvm::Function::arg_end</a></div><div class="ttdeci">arg_iterator arg_end()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00418">Function.h:418</a></div></div>
<div class="ttc" id="classllvm_1_1MDNode_html"><div class="ttname"><a href="classllvm_1_1MDNode.html">llvm::MDNode</a></div><div class="ttdoc">MDNode - a tuple of other values. </div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00073">Metadata.h:73</a></div></div>
<div class="ttc" id="LLParser_8cpp_html_a33ece1ef8074506a15d7f86eb76dbae6"><div class="ttname"><a href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a></div><div class="ttdeci">F(f)</div></div>
<div class="ttc" id="classllvm_1_1SExtInst_html"><div class="ttname"><a href="classllvm_1_1SExtInst.html">llvm::SExtInst</a></div><div class="ttdoc">This class represents a sign extension of integer types. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03247">Instructions.h:3247</a></div></div>
<div class="ttc" id="classllvm_1_1InlineAsm_html"><div class="ttname"><a href="classllvm_1_1InlineAsm.html">llvm::InlineAsm</a></div><div class="ttdef"><b>Definition:</b> <a href="InlineAsm_8h_source.html#l00035">InlineAsm.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00070">Function.h:70</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html"><div class="ttname"><a href="classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00136">Instructions.h:136</a></div></div>
<div class="ttc" id="MemorySanitizer_8cpp_html_a5a6a6967ce058549768ae3938b48f162"><div class="ttname"><a href="MemorySanitizer_8cpp.html#a5a6a6967ce058549768ae3938b48f162">ClWrapIndirectCalls</a></div><div class="ttdeci">static cl::opt&lt; std::string &gt; ClWrapIndirectCalls(&quot;msan-wrap-indirect-calls&quot;, cl::desc(&quot;Wrap indirect calls with a given function&quot;), cl::Hidden)</div></div>
<div class="ttc" id="classllvm_1_1AttrBuilder_html_a59d23ba2e7eac46cbc6cd3086e013b49"><div class="ttname"><a href="classllvm_1_1AttrBuilder.html#a59d23ba2e7eac46cbc6cd3086e013b49">llvm::AttrBuilder::addAttribute</a></div><div class="ttdeci">AttrBuilder &amp; addAttribute(Attribute::AttrKind Val)</div><div class="ttdoc">Add an attribute to the builder. </div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l00968">Attributes.cpp:968</a></div></div>
<div class="ttc" id="classllvm_1_1AtomicRMWInst_html"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html">llvm::AtomicRMWInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00556">Instructions.h:556</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a9a80bae197dc1294e3a0dbfd920b97b0"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a9a80bae197dc1294e3a0dbfd920b97b0">llvm::IRBuilder::CreateICmpEQ</a></div><div class="ttdeci">Value * CreateICmpEQ(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01206">IRBuilder.h:1206</a></div></div>
<div class="ttc" id="classllvm_1_1AttributeSet_html_a54abbe67d4a53c92652f1666dc19281f"><div class="ttname"><a href="classllvm_1_1AttributeSet.html#a54abbe67d4a53c92652f1666dc19281f">llvm::AttributeSet::hasAttribute</a></div><div class="ttdeci">bool hasAttribute(unsigned Index, Attribute::AttrKind Kind) const </div><div class="ttdoc">Return true if the attribute exists at the given index. </div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l00818">Attributes.cpp:818</a></div></div>
<div class="ttc" id="classllvm_1_1MDBuilder_html_ae1af5fc6c4f28376d13aad54edaa0ede"><div class="ttname"><a href="classllvm_1_1MDBuilder.html#ae1af5fc6c4f28376d13aad54edaa0ede">llvm::MDBuilder::createBranchWeights</a></div><div class="ttdeci">MDNode * createBranchWeights(uint32_t TrueWeight, uint32_t FalseWeight)</div><div class="ttdoc">Return metadata containing two branch weights. </div><div class="ttdef"><b>Definition:</b> <a href="MDBuilder_8h_source.html#l00058">MDBuilder.h:58</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html_a40da6cb8652ba35211cdc58b07399754"><div class="ttname"><a href="classllvm_1_1Module.html#a40da6cb8652ba35211cdc58b07399754">llvm::Module::getTargetTriple</a></div><div class="ttdeci">const std::string &amp; getTargetTriple() const </div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00237">Module.h:237</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a7bd545769621a0a9d2cfb074f86f4295"><div class="ttname"><a href="classllvm_1_1Instruction.html#a7bd545769621a0a9d2cfb074f86f4295">llvm::Instruction::setDebugLoc</a></div><div class="ttdeci">void setDebugLoc(const DebugLoc &amp;Loc)</div><div class="ttdoc">setDebugLoc - Set the debug location information for this instruction. </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00175">Instruction.h:175</a></div></div>
<div class="ttc" id="MemorySanitizer_8cpp_html_a9d4432de44f3dd0885f20ee61a73cedf"><div class="ttname"><a href="MemorySanitizer_8cpp.html#a9d4432de44f3dd0885f20ee61a73cedf">ClHandleICmp</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClHandleICmp(&quot;msan-handle-icmp&quot;, cl::desc(&quot;propagate shadow through ICmpEQ and ICmpNE&quot;), cl::Hidden, cl::init(true))</div></div>
<div class="ttc" id="classllvm_1_1User_html_a2eeb1c7ed1cfe403f2ae0470e36c07e2"><div class="ttname"><a href="classllvm_1_1User.html#a2eeb1c7ed1cfe403f2ae0470e36c07e2">llvm::User::op_begin</a></div><div class="ttdeci">op_iterator op_begin()</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00116">User.h:116</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a9739fda41ce7be4d43bb5b45bbd0e460"><div class="ttname"><a href="classllvm_1_1Type.html#a9739fda41ce7be4d43bb5b45bbd0e460">llvm::Type::getInt64PtrTy</a></div><div class="ttdeci">static PointerType * getInt64PtrTy(LLVMContext &amp;C, unsigned AS=0)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00296">Type.cpp:296</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00109">CommandLine.h:109</a></div></div>
<div class="ttc" id="namespacellvm_html_a1f6978055dbb761b380de39070e34bd3"><div class="ttname"><a href="namespacellvm.html#a1f6978055dbb761b380de39070e34bd3">llvm::report_fatal_error</a></div><div class="ttdeci">LLVM_ATTRIBUTE_NORETURN void report_fatal_error(const char *reason, bool gen_crash_diag=true)</div><div class="ttdef"><b>Definition:</b> <a href="ErrorHandling_8cpp_source.html#l00053">ErrorHandling.cpp:53</a></div></div>
<div class="ttc" id="MemorySanitizer_8cpp_html_a20e043ae97a3f82b3318bcd56f5b38f1"><div class="ttname"><a href="MemorySanitizer_8cpp.html#a20e043ae97a3f82b3318bcd56f5b38f1">kShadowMask32</a></div><div class="ttdeci">static const uint64_t kShadowMask32</div><div class="ttdef"><b>Definition:</b> <a href="MemorySanitizer_8cpp_source.html#l00125">MemorySanitizer.cpp:125</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a5c09d927a0079ad16e8367271efe9bc2"><div class="ttname"><a href="classllvm_1_1Type.html#a5c09d927a0079ad16e8367271efe9bc2">llvm::Type::getPointerElementType</a></div><div class="ttdeci">Type * getPointerElementType() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00373">Type.h:373</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a1e2311346209856a82758c2a3ed55c0b"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a1e2311346209856a82758c2a3ed55c0b">llvm::Intrinsic::x86_sse_cvtss2si64</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l03151">Intrinsics.h:3151</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a40e48df9196b3c092096138cd9af8465"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a40e48df9196b3c092096138cd9af8465">llvm::IRBuilder::CreateInsertElement</a></div><div class="ttdeci">Value * CreateInsertElement(Value *Vec, Value *NewElt, Value *Idx, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01357">IRBuilder.h:1357</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_aa6574d526b3e38a28f688a7bb4325c2c"><div class="ttname"><a href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">llvm::Constant::getNullValue</a></div><div class="ttdeci">static Constant * getNullValue(Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00111">Constants.cpp:111</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00167">Value.cpp:167</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90ae43042d6fa7c108f02ad3131f7bc972f"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ae43042d6fa7c108f02ad3131f7bc972f">llvm::Intrinsic::x86_sse_cvtsi642ss</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l03149">Intrinsics.h:3149</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_a6ee1d1e7a13072ef579558d64b208d3c"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a6ee1d1e7a13072ef579558d64b208d3c">llvm::IRBuilderBase::getInt32Ty</a></div><div class="ttdeci">IntegerType * getInt32Ty()</div><div class="ttdoc">Fetch the type representing a 32-bit integer. </div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00310">IRBuilder.h:310</a></div></div>
<div class="ttc" id="classllvm_1_1ExtractValueInst_html_aabcc9d0c7c5b68bf66032d1c1c1aa4dd"><div class="ttname"><a href="classllvm_1_1ExtractValueInst.html#aabcc9d0c7c5b68bf66032d1c1c1aa4dd">llvm::ExtractValueInst::getIndices</a></div><div class="ttdeci">ArrayRef&lt; unsigned &gt; getIndices() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01800">Instructions.h:1800</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a478d9db5034ad1bef340198c3aaf861a"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a478d9db5034ad1bef340198c3aaf861a">llvm::IRBuilder::CreateExtractValue</a></div><div class="ttdeci">Value * CreateExtractValue(Value *Agg, ArrayRef&lt; unsigned &gt; Idxs, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01375">IRBuilder.h:1375</a></div></div>
<div class="ttc" id="InlineAsm_8h_html"><div class="ttname"><a href="InlineAsm_8h.html">InlineAsm.h</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a2c0d745d9907486632823c56c5a23e86"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a2c0d745d9907486632823c56c5a23e86">llvm::IRBuilder::CreatePHI</a></div><div class="ttdeci">PHINode * CreatePHI(Type *Ty, unsigned NumReservedValues, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01299">IRBuilder.h:1299</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a9b057429c5a047d0ee274074b6885acf"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a9b057429c5a047d0ee274074b6885acf">llvm::IRBuilder::CreateXor</a></div><div class="ttdeci">Value * CreateXor(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00821">IRBuilder.h:821</a></div></div>
<div class="ttc" id="MemorySanitizer_8cpp_html_af4383ad0a5878a085ea98b050a615604"><div class="ttname"><a href="MemorySanitizer_8cpp.html#af4383ad0a5878a085ea98b050a615604">ClDumpStrictInstructions</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClDumpStrictInstructions(&quot;msan-dump-strict-instructions&quot;, cl::desc(&quot;print out instructions with default strict semantics&quot;), cl::Hidden, cl::init(false))</div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html"><div class="ttname"><a href="classllvm_1_1SelectInst.html">llvm::SelectInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01430">Instructions.h:1430</a></div></div>
<div class="ttc" id="classllvm_1_1ReturnInst_html_a7f6ab6ba1947d832a651e3589614a10d"><div class="ttname"><a href="classllvm_1_1ReturnInst.html#a7f6ab6ba1947d832a651e3589614a10d">llvm::ReturnInst::getReturnValue</a></div><div class="ttdeci">Value * getReturnValue() const </div><div class="ttdoc">Convenience accessor. Returns null if there is no return value. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02318">Instructions.h:2318</a></div></div>
<div class="ttc" id="MemorySanitizer_8cpp_html_ad0af59fa6adfa874cbfa374c4e0f8468"><div class="ttname"><a href="MemorySanitizer_8cpp.html#ad0af59fa6adfa874cbfa374c4e0f8468">ClStoreCleanOrigin</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClStoreCleanOrigin(&quot;msan-store-clean-origin&quot;, cl::desc(&quot;store origin for clean (fully initialized) values&quot;), cl::Hidden, cl::init(false))</div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_a2e32c414382ed5fd53a770026361ed19"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a2e32c414382ed5fd53a770026361ed19">llvm::IRBuilderBase::getInt64Ty</a></div><div class="ttdeci">IntegerType * getInt64Ty()</div><div class="ttdoc">Fetch the type representing a 64-bit integer. </div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00315">IRBuilder.h:315</a></div></div>
<div class="ttc" id="classllvm_1_1CastInst_html"><div class="ttname"><a href="classllvm_1_1CastInst.html">llvm::CastInst</a></div><div class="ttdoc">Base class of casting instructions. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00387">InstrTypes.h:387</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__node_html_a6ac308903849239f2f308aa180dda61b"><div class="ttname"><a href="classllvm_1_1ilist__node.html#a6ac308903849239f2f308aa180dda61b">llvm::ilist_node::getNextNode</a></div><div class="ttdeci">NodeTy * getNextNode()</div><div class="ttdoc">Get the next node, or 0 for the list tail. </div><div class="ttdef"><b>Definition:</b> <a href="ilist__node_8h_source.html#l00080">ilist_node.h:80</a></div></div>
<div class="ttc" id="classllvm_1_1UndefValue_html"><div class="ttname"><a href="classllvm_1_1UndefValue.html">llvm::UndefValue</a></div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l01129">Constants.h:1129</a></div></div>
<div class="ttc" id="classllvm_1_1MemMoveInst_html"><div class="ttname"><a href="classllvm_1_1MemMoveInst.html">llvm::MemMoveInst</a></div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00260">IntrinsicInst.h:260</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html"><div class="ttname"><a href="classllvm_1_1StructType.html">llvm::StructType</a></div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00187">DerivedTypes.h:187</a></div></div>
<div class="ttc" id="ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdef"><b>Definition:</b> <a href="ErrorHandling_8h_source.html#l00103">ErrorHandling.h:103</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a11d3f8bbc5a14f60879a87175db6695c"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a11d3f8bbc5a14f60879a87175db6695c">llvm::IRBuilder::CreateIntToPtr</a></div><div class="ttdeci">Value * CreateIntToPtr(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01128">IRBuilder.h:1128</a></div></div>
<div class="ttc" id="MemorySanitizer_8cpp_html_a69b37c814b922ad8dc3c9d9a766760c3"><div class="ttname"><a href="MemorySanitizer_8cpp.html#a69b37c814b922ad8dc3c9d9a766760c3">ClCheckAccessAddress</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClCheckAccessAddress(&quot;msan-check-access-address&quot;, cl::desc(&quot;report accesses through a pointer which has poisoned shadow&quot;), cl::Hidden, cl::init(true))</div></div>
<div class="ttc" id="SmallString_8h_html"><div class="ttname"><a href="SmallString_8h.html">SmallString.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a186e52e077426117d21cfdc50c5e07ce"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a186e52e077426117d21cfdc50c5e07ce">llvm::Intrinsic::x86_avx512_cvttsd2usi64</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02634">Intrinsics.h:2634</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html_ac88b95273e6c753188f6a54d65548579"><div class="ttname"><a href="classllvm_1_1CallInst.html#ac88b95273e6c753188f6a54d65548579">llvm::CallInst::getNumArgOperands</a></div><div class="ttdeci">unsigned getNumArgOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01241">Instructions.h:1241</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0e73f4e09745bb69fdd7b15232c45428"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0e73f4e09745bb69fdd7b15232c45428">llvm::BasicBlock::getFirstNonPHI</a></div><div class="ttdeci">Instruction * getFirstNonPHI()</div><div class="ttdoc">Returns a pointer to the first instruction in this block that is not a PHINode instruction. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00130">BasicBlock.cpp:130</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html"><div class="ttname"><a href="classllvm_1_1IRBuilder.html">llvm::IRBuilder</a></div><div class="ttdoc">This provides a uniform API for creating instructions and inserting them into a basic block: either a...</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00421">IRBuilder.h:421</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90ae95b4ba9e585aee7e8981c48f373366d"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ae95b4ba9e585aee7e8981c48f373366d">llvm::Intrinsic::x86_avx512_cvtss2usi64</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02632">Intrinsics.h:2632</a></div></div>
<div class="ttc" id="ValueMap_8h_html"><div class="ttname"><a href="ValueMap_8h.html">ValueMap.h</a></div></div>
<div class="ttc" id="classllvm_1_1AllocaInst_html_a214c60dbb4f1ed467e5a3420db6eefd6"><div class="ttname"><a href="classllvm_1_1AllocaInst.html#a214c60dbb4f1ed467e5a3420db6eefd6">llvm::AllocaInst::getAllocatedType</a></div><div class="ttdeci">Type * getAllocatedType() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l00906">Instructions.cpp:906</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a35ee267850af7c235474a8c46c7ac5af"><div class="ttname"><a href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">llvm::Value::setName</a></div><div class="ttdeci">void setName(const Twine &amp;Name)</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00175">Value.cpp:175</a></div></div>
<div class="ttc" id="namespacellvm_1_1CallingConv_html_a4f861731fc6dbfdccc05af5968d98974"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">llvm::CallingConv::ID</a></div><div class="ttdeci">ID</div><div class="ttdoc">LLVM Calling Convention Representation. </div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00026">CallingConv.h:26</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a796aad3f26c8038305aed21e677fce58"><div class="ttname"><a href="classllvm_1_1Type.html#a796aad3f26c8038305aed21e677fce58">llvm::Type::getVectorElementType</a></div><div class="ttdeci">Type * getVectorElementType() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00371">Type.h:371</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a2acdb88b3e1e74add180774559d197e8"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a2acdb88b3e1e74add180774559d197e8">llvm::Intrinsic::x86_avx512_cvtsd2usi64</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02630">Intrinsics.h:2630</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90af4e1f69bb4d6fa215a7f6ebad691a531"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90af4e1f69bb4d6fa215a7f6ebad691a531">llvm::Intrinsic::x86_avx512_cvtusi642sd</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02639">Intrinsics.h:2639</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00031">Instruction.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1Attribute_html_aab7ee4b8fd1d3e7e4cea87868855e60eaa94162b0564176cc56e5688691877074"><div class="ttname"><a href="classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60eaa94162b0564176cc56e5688691877074">llvm::Attribute::ReadNone</a></div><div class="ttdoc">Function does not access memory. </div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00093">Attributes.h:93</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a2877bfb208e8e523e5d0eda3488c9ade"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a2877bfb208e8e523e5d0eda3488c9ade">llvm::IRBuilder::CreateAlloca</a></div><div class="ttdeci">AllocaInst * CreateAlloca(Type *Ty, Value *ArraySize=0, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00873">IRBuilder.h:873</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90">llvm::Intrinsic::ID</a></div><div class="ttdeci">ID</div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l00036">Intrinsics.h:36</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_a518df7907ab8f1d61c6f47381055eb53"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a518df7907ab8f1d61c6f47381055eb53">llvm::IRBuilderBase::getVoidTy</a></div><div class="ttdeci">Type * getVoidTy()</div><div class="ttdoc">Fetch the type representing void. </div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00330">IRBuilder.h:330</a></div></div>
<div class="ttc" id="classllvm_1_1PtrToIntInst_html"><div class="ttname"><a href="classllvm_1_1PtrToIntInst.html">llvm::PtrToIntInst</a></div><div class="ttdoc">This class represents a cast from a pointer to an integer. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03539">Instructions.h:3539</a></div></div>
<div class="ttc" id="namespacellvm_html_abf74b2f0dbae96f4708d3e407b36df02"><div class="ttname"><a href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02">llvm::AtomicOrdering</a></div><div class="ttdeci">AtomicOrdering</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00036">Instructions.h:36</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90aa1b4cc335a1d57873ccea7585f7b0787"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aa1b4cc335a1d57873ccea7585f7b0787">llvm::Intrinsic::x86_avx512_cvttss2usi64</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02636">Intrinsics.h:2636</a></div></div>
<div class="ttc" id="classllvm_1_1FunctionType_html"><div class="ttname"><a href="classllvm_1_1FunctionType.html">llvm::FunctionType</a></div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00096">DerivedTypes.h:96</a></div></div>
<div class="ttc" id="namespacellvm_html_a7328d663d7d772819aec028183e73729"><div class="ttname"><a href="namespacellvm.html#a7328d663d7d772819aec028183e73729">llvm::dumpInst</a></div><div class="ttdeci">void dumpInst(Value *base, char *instName)</div><div class="ttdef"><b>Definition:</b> <a href="NVPTXUtilities_8cpp_source.html#l00457">NVPTXUtilities.cpp:457</a></div></div>
<div class="ttc" id="classllvm_1_1AtomicRMWInst_html_a97b357327005620f94c587e4d7a19d71"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a97b357327005620f94c587e4d7a19d71">llvm::AtomicRMWInst::getOrdering</a></div><div class="ttdeci">AtomicOrdering getOrdering() const </div><div class="ttdoc">Returns the ordering constraint on this RMW. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00648">Instructions.h:648</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a197d5dd77cad4560a082900962a830aa"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a197d5dd77cad4560a082900962a830aa">llvm::IRBuilder::CreateAnd</a></div><div class="ttdeci">Value * CreateAnd(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00789">IRBuilder.h:789</a></div></div>
<div class="ttc" id="classllvm_1_1ValueMap_html_a786c962deec79715db211967c2c66573"><div class="ttname"><a href="classllvm_1_1ValueMap.html#a786c962deec79715db211967c2c66573">llvm::ValueMap::count</a></div><div class="ttdeci">bool count(const KeyT &amp;Val) const </div><div class="ttdoc">count - Return true if the specified key is in the map. </div><div class="ttdef"><b>Definition:</b> <a href="ValueMap_8h_source.html#l00112">ValueMap.h:112</a></div></div>
<div class="ttc" id="classllvm_1_1VAStartInst_html"><div class="ttname"><a href="classllvm_1_1VAStartInst.html">llvm::VAStartInst</a></div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00273">IntrinsicInst.h:273</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a8f55dd4237be6778517ddd752ca8b76a"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a8f55dd4237be6778517ddd752ca8b76a">llvm::IRBuilder::CreateOr</a></div><div class="ttdeci">Value * CreateOr(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00805">IRBuilder.h:805</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_a8db36c82f32d6f6a4d35a00e55be03a8"><div class="ttname"><a href="Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a></div><div class="ttdeci">bool Shift</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00506">Target/README.txt:506</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorBase_html_a8a8df4d85555c7954a95f86080cd3b64"><div class="ttname"><a href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">llvm::SmallVectorBase::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const </div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00056">SmallVector.h:56</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html_a23bc21c600966b6ec9f9a5e588dba349"><div class="ttname"><a href="classllvm_1_1DataLayout.html#a23bc21c600966b6ec9f9a5e588dba349">llvm::DataLayout::RoundUpAlignment</a></div><div class="ttdeci">static UIntTy RoundUpAlignment(UIntTy Val, unsigned Alignment)</div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00407">DataLayout.h:407</a></div></div>
<div class="ttc" id="classllvm_1_1FCmpInst_html"><div class="ttname"><a href="classllvm_1_1FCmpInst.html">llvm::FCmpInst</a></div><div class="ttdoc">Represents a floating point comparison operator. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01055">Instructions.h:1055</a></div></div>
<div class="ttc" id="classllvm_1_1BitCastInst_html"><div class="ttname"><a href="classllvm_1_1BitCastInst.html">llvm::BitCastInst</a></div><div class="ttdoc">This class represents a no-op cast from one type to another. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03587">Instructions.h:3587</a></div></div>
<div class="ttc" id="classllvm_1_1FunctionType_html_a7e89b55242c964ae61b7850e99cacef0"><div class="ttname"><a href="classllvm_1_1FunctionType.html#a7e89b55242c964ae61b7850e99cacef0">llvm::FunctionType::get</a></div><div class="ttdeci">static FunctionType * get(Type *Result, ArrayRef&lt; Type * &gt; Params, bool isVarArg)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00361">Type.cpp:361</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a></div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00031">ArrayRef.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1InsertValueInst_html_a9a004adbac8f42baab2ae52ae879a34b"><div class="ttname"><a href="classllvm_1_1InsertValueInst.html#a9a004adbac8f42baab2ae52ae879a34b">llvm::InsertValueInst::getInsertedValueOperand</a></div><div class="ttdeci">Value * getInsertedValueOperand()</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01911">Instructions.h:1911</a></div></div>
<div class="ttc" id="namespacellvm_html_af6d6a791770bad2303c4399986979e3eae411369b2f0d8f484fec62c3291b1b51"><div class="ttname"><a href="namespacellvm.html#af6d6a791770bad2303c4399986979e3eae411369b2f0d8f484fec62c3291b1b51">llvm::Call</a></div><div class="ttdef"><b>Definition:</b> <a href="CallingConvLower_8h_source.html#l00149">CallingConvLower.h:149</a></div></div>
<div class="ttc" id="classllvm_1_1SmallString_html"><div class="ttname"><a href="classllvm_1_1SmallString.html">llvm::SmallString</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallString_8h_source.html#l00025">SmallString.h:25</a></div></div>
<div class="ttc" id="classllvm_1_1Attribute_html_aab7ee4b8fd1d3e7e4cea87868855e60eab3c7dc42b72fed5fbed71591604203a9"><div class="ttname"><a href="classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60eab3c7dc42b72fed5fbed71591604203a9">llvm::Attribute::ByVal</a></div><div class="ttdoc">Pass structure by value. </div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00073">Attributes.h:73</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a842176a2c8c60a94bc788454b0828ea2"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a842176a2c8c60a94bc788454b0828ea2">llvm::Intrinsic::getDeclaration</a></div><div class="ttdeci">Function * getDeclaration(Module *M, ID id, ArrayRef&lt; Type * &gt; Tys=None)</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00683">Function.cpp:683</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html_a8258421dcc5f4b3beb309a25a4bcb643a49cef61df7187c5d2d1fcb90809557fe"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html#a8258421dcc5f4b3beb309a25a4bcb643a49cef61df7187c5d2d1fcb90809557fe">llvm::GlobalVariable::InitialExecTLSModel</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalVariable_8h_source.html#l00062">GlobalVariable.h:62</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html"><div class="ttname"><a href="classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00255">Instructions.h:255</a></div></div>
<div class="ttc" id="classllvm_1_1CallSiteBase_html_a1abce20a9eff3d23ce05331962b1997c"><div class="ttname"><a href="classllvm_1_1CallSiteBase.html#a1abce20a9eff3d23ce05331962b1997c">llvm::CallSiteBase::getCalledValue</a></div><div class="ttdeci">ValTy * getCalledValue() const </div><div class="ttdef"><b>Definition:</b> <a href="CallSite_8h_source.html#l00085">CallSite.h:85</a></div></div>
<div class="ttc" id="classllvm_1_1CallSiteBase_html_af23ecc474bd52056428ee09ebe9f044f"><div class="ttname"><a href="classllvm_1_1CallSiteBase.html#af23ecc474bd52056428ee09ebe9f044f">llvm::CallSiteBase::getParamAlignment</a></div><div class="ttdeci">uint16_t getParamAlignment(uint16_t i) const </div><div class="ttdoc">Extract the alignment for a call or parameter (0=unknown). </div><div class="ttdef"><b>Definition:</b> <a href="CallSite_8h_source.html#l00197">CallSite.h:197</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_acfc391b16e99fd8660071b3725f0286c"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#acfc391b16e99fd8660071b3725f0286c">llvm::IRBuilder::CreateCall4</a></div><div class="ttdeci">CallInst * CreateCall4(Value *Callee, Value *Arg1, Value *Arg2, Value *Arg3, Value *Arg4, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01320">IRBuilder.h:1320</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a9d00127f263561d6f401c59a9f2626ef"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a9d00127f263561d6f401c59a9f2626ef">llvm::IRBuilder::CreateConstGEP1_32</a></div><div class="ttdeci">Value * CreateConstGEP1_32(Value *Ptr, unsigned Idx0, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00969">IRBuilder.h:969</a></div></div>
<div class="ttc" id="MemorySanitizer_8cpp_html_a2ff1dc2e13146df957d703f55795141c"><div class="ttname"><a href="MemorySanitizer_8cpp.html#a2ff1dc2e13146df957d703f55795141c">ClPoisonStack</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClPoisonStack(&quot;msan-poison-stack&quot;, cl::desc(&quot;poison uninitialized stack variables&quot;), cl::Hidden, cl::init(true))</div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90afb28523b72573e3468cd1ce52453f221"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90afb28523b72573e3468cd1ce52453f221">llvm::Intrinsic::bswap</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l00350">Intrinsics.h:350</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a12df9495b95331ab7ed614624e5268d2"><div class="ttname"><a href="classllvm_1_1Function.html#a12df9495b95331ab7ed614624e5268d2">llvm::Function::removeAttributes</a></div><div class="ttdeci">void removeAttributes(unsigned i, AttributeSet attr)</div><div class="ttdoc">removes the attributes from the list of attributes. </div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00296">Function.cpp:296</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a43f7fa52a3fbe01e44c40d9db278ab3e"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a43f7fa52a3fbe01e44c40d9db278ab3e">llvm::IRBuilder::CreateStore</a></div><div class="ttdeci">StoreInst * CreateStore(Value *Val, Value *Ptr, bool isVolatile=false)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00888">IRBuilder.h:888</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a99cd0e781c4ec0f9a11be5e0163cbbe7"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a99cd0e781c4ec0f9a11be5e0163cbbe7">llvm::Intrinsic::x86_sse2_cvtsi642sd</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02986">Intrinsics.h:2986</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a3d95172e192ecd22f18b0b76da6d2320"><div class="ttname"><a href="classllvm_1_1Instruction.html#a3d95172e192ecd22f18b0b76da6d2320">llvm::Instruction::getOpcodeName</a></div><div class="ttdeci">const char * getOpcodeName() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00085">Instruction.h:85</a></div></div>
<div class="ttc" id="classllvm_1_1TruncInst_html"><div class="ttname"><a href="classllvm_1_1TruncInst.html">llvm::TruncInst</a></div><div class="ttdoc">This class represents a truncation of integer types. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03175">Instructions.h:3175</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90acb2ae32d08e65afefeb80f7f0e79fc1c"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90acb2ae32d08e65afefeb80f7f0e79fc1c">llvm::Intrinsic::x86_sse_cvtsi2ss</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l03148">Intrinsics.h:3148</a></div></div>
<div class="ttc" id="DepthFirstIterator_8h_html"><div class="ttname"><a href="DepthFirstIterator_8h.html">DepthFirstIterator.h</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_ace45cae6925c65e9d6916e09dd5b17cc"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">llvm::IRBuilderBase::SetInsertPoint</a></div><div class="ttdeci">void SetInsertPoint(BasicBlock *TheBB)</div><div class="ttdoc">This specifies that created instructions should be appended to the end of the specified block...</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00083">IRBuilder.h:83</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_aa45f6c0433576e3858a6209a43750ad4"><div class="ttname"><a href="classllvm_1_1PHINode.html#aa45f6c0433576e3858a6209a43750ad4">llvm::PHINode::getNumIncomingValues</a></div><div class="ttdeci">unsigned getNumIncomingValues() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02055">Instructions.h:2055</a></div></div>
<div class="ttc" id="MemorySanitizer_8cpp_html_a216e26e0083fff01b947d564a26b2222"><div class="ttname"><a href="MemorySanitizer_8cpp.html#a216e26e0083fff01b947d564a26b2222">kMinOriginAlignment</a></div><div class="ttdeci">static const unsigned kMinOriginAlignment</div><div class="ttdef"><b>Definition:</b> <a href="MemorySanitizer_8cpp_source.html#l00129">MemorySanitizer.cpp:129</a></div></div>
<div class="ttc" id="classllvm_1_1CallSiteBase_html_a9c293af587813d72fdc976697dd07f23"><div class="ttname"><a href="classllvm_1_1CallSiteBase.html#a9c293af587813d72fdc976697dd07f23">llvm::CallSiteBase&lt; Function, Value, User, Instruction, CallInst, InvokeInst, User::op_iterator &gt;::arg_iterator</a></div><div class="ttdeci">User::op_iterator arg_iterator</div><div class="ttdef"><b>Definition:</b> <a href="CallSite_8h_source.html#l00133">CallSite.h:133</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90ac4ca051d1a888aac4bcbd7a341a72cab"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ac4ca051d1a888aac4bcbd7a341a72cab">llvm::Intrinsic::x86_sse2_cvtsd2si</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02982">Intrinsics.h:2982</a></div></div>
<div class="ttc" id="classllvm_1_1GetElementPtrInst_html"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html">llvm::GetElementPtrInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00709">Instructions.h:709</a></div></div>
<div class="ttc" id="namespacellvm_1_1A64DB_html_a6fce8157775f3ec93f326b52b0f1e0f5a4916e736d6b7cc68359b39d5eb50f6db"><div class="ttname"><a href="namespacellvm_1_1A64DB.html#a6fce8157775f3ec93f326b52b0f1e0f5a4916e736d6b7cc68359b39d5eb50f6db">llvm::A64DB::ST</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00178">AArch64BaseInfo.h:178</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_af47064c2a364c1b3542f545c9f4b6f8d"><div class="ttname"><a href="classllvm_1_1Type.html#af47064c2a364c1b3542f545c9f4b6f8d">llvm::Type::isX86_MMXTy</a></div><div class="ttdeci">bool isX86_MMXTy() const </div><div class="ttdoc">isX86_MMXTy - Return true if this is X86 MMX. </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00182">Type.h:182</a></div></div>
<div class="ttc" id="README__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A,*B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00091">README_ALTIVEC.txt:91</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a3bd5e6108cd2c28c267d70e631a7b11a"><div class="ttname"><a href="classllvm_1_1Type.html#a3bd5e6108cd2c28c267d70e631a7b11a">llvm::Type::isIntOrIntVectorTy</a></div><div class="ttdeci">bool isIntOrIntVectorTy() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00204">Type.h:204</a></div></div>
<div class="ttc" id="CommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00314">CommandLine.h:314</a></div></div>
<div class="ttc" id="classllvm_1_1InsertElementInst_html"><div class="ttname"><a href="classllvm_1_1InsertElementInst.html">llvm::InsertElementInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01602">Instructions.h:1602</a></div></div>
<div class="ttc" id="classllvm_1_1CallSiteBase_html_a700dc01bb858b95430714597ed50b5ab"><div class="ttname"><a href="classllvm_1_1CallSiteBase.html#a700dc01bb858b95430714597ed50b5ab">llvm::CallSiteBase::isInvoke</a></div><div class="ttdeci">bool isInvoke() const </div><div class="ttdef"><b>Definition:</b> <a href="CallSite_8h_source.html#l00077">CallSite.h:77</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a2bd8d3ea479e99434bac72362a59f078"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a2bd8d3ea479e99434bac72362a59f078">llvm::IRBuilder::CreateBinOp</a></div><div class="ttdeci">Value * CreateBinOp(Instruction::BinaryOps Opc, Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00834">IRBuilder.h:834</a></div></div>
<div class="ttc" id="classllvm_1_1LandingPadInst_html"><div class="ttname"><a href="classllvm_1_1LandingPadInst.html">llvm::LandingPadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02178">Instructions.h:2178</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html_a3084f1dd69d67e1965fd1fe721a69f2e"><div class="ttname"><a href="classllvm_1_1StoreInst.html#a3084f1dd69d67e1965fd1fe721a69f2e">llvm::StoreInst::getAlignment</a></div><div class="ttdeci">unsigned getAlignment() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00301">Instructions.h:301</a></div></div>
<div class="ttc" id="namespacellvm_html_abf74b2f0dbae96f4708d3e407b36df02a7754cbc42d54bad3979ed1789b780b28"><div class="ttname"><a href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02a7754cbc42d54bad3979ed1789b780b28">llvm::Monotonic</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00039">Instructions.h:39</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html_a96581205e1149f5d70b56f9a83bc841a"><div class="ttname"><a href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">llvm::Module::getOrInsertFunction</a></div><div class="ttdeci">Constant * getOrInsertFunction(StringRef Name, FunctionType *T, AttributeSet AttributeList)</div><div class="ttdef"><b>Definition:</b> <a href="Module_8cpp_source.html#l00138">Module.cpp:138</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="namespacellvm_html_aec3efa15a67284b231fe0b5e6886af4e"><div class="ttname"><a href="namespacellvm.html#aec3efa15a67284b231fe0b5e6886af4e">llvm::SplitBlockAndInsertIfThen</a></div><div class="ttdeci">TerminatorInst * SplitBlockAndInsertIfThen(Instruction *Cmp, bool Unreachable, MDNode *BranchWeights=0)</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00652">BasicBlockUtils.cpp:652</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00044">Type.h:44</a></div></div>
<div class="ttc" id="classllvm_1_1CallSiteBase_html_ae4c67f835911559821939fb23a2e7aff"><div class="ttname"><a href="classllvm_1_1CallSiteBase.html#ae4c67f835911559821939fb23a2e7aff">llvm::CallSiteBase::getInstruction</a></div><div class="ttdeci">InstrTy * getInstruction() const </div><div class="ttdef"><b>Definition:</b> <a href="CallSite_8h_source.html#l00079">CallSite.h:79</a></div></div>
<div class="ttc" id="classllvm_1_1LLVMContext_html"><div class="ttname"><a href="classllvm_1_1LLVMContext.html">llvm::LLVMContext</a></div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00037">LLVMContext.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a6f725580f7834e2ca90762965866dad4"><div class="ttname"><a href="classllvm_1_1Type.html#a6f725580f7834e2ca90762965866dad4">llvm::Type::isVectorTy</a></div><div class="ttdeci">bool isVectorTy() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00229">Type.h:229</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a9f4834f0678648c5ac86c9ab37210be3"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a9f4834f0678648c5ac86c9ab37210be3">llvm::IRBuilder::CreateNot</a></div><div class="ttdeci">Value * CreateNot(Value *V, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00863">IRBuilder.h:863</a></div></div>
<div class="ttc" id="namespacellvm_html_a849b445fe6bce862c395ea6b97c1f658"><div class="ttname"><a href="namespacellvm.html#a849b445fe6bce862c395ea6b97c1f658">llvm::df_end</a></div><div class="ttdeci">df_iterator&lt; T &gt; df_end(const T &amp;G)</div><div class="ttdef"><b>Definition:</b> <a href="DepthFirstIterator_8h_source.html#l00206">DepthFirstIterator.h:206</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a112f87f5844b5d94c07940f3d47f1e99"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a112f87f5844b5d94c07940f3d47f1e99">llvm::IRBuilder::CreateAdd</a></div><div class="ttdeci">Value * CreateAdd(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00615">IRBuilder.h:615</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a1e2a8dc174c34596e7e8efc7ab7e08a0"><div class="ttname"><a href="classllvm_1_1Type.html#a1e2a8dc174c34596e7e8efc7ab7e08a0">llvm::Type::getContainedType</a></div><div class="ttdeci">Type * getContainedType(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00339">Type.h:339</a></div></div>
<div class="ttc" id="classllvm_1_1AttrBuilder_html"><div class="ttname"><a href="classllvm_1_1AttrBuilder.html">llvm::AttrBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00390">Attributes.h:390</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html_a2f54639fcb5162f6f51192eb1697d2ad"><div class="ttname"><a href="classllvm_1_1StructType.html#a2f54639fcb5162f6f51192eb1697d2ad">llvm::StructType::getElementType</a></div><div class="ttdeci">Type * getElementType(unsigned N) const </div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00287">DerivedTypes.h:287</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a9299aed1efa0ef459a0f1c7fa11fbe61"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a9299aed1efa0ef459a0f1c7fa11fbe61">llvm::IRBuilder::CreatePtrToInt</a></div><div class="ttdeci">Value * CreatePtrToInt(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01124">IRBuilder.h:1124</a></div></div>
<div class="ttc" id="Compiler_8h_html"><div class="ttname"><a href="Compiler_8h.html">Compiler.h</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html_ad285a69e32ddeee367fed93b5f392801"><div class="ttname"><a href="classllvm_1_1SelectInst.html#ad285a69e32ddeee367fed93b5f392801">llvm::SelectInst::getCondition</a></div><div class="ttdeci">const Value * getCondition() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01466">Instructions.h:1466</a></div></div>
<div class="ttc" id="classllvm_1_1ResumeInst_html"><div class="ttname"><a href="classllvm_1_1ResumeInst.html">llvm::ResumeInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03090">Instructions.h:3090</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a76b5b4146b690c6fd4d75ef169387748"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a76b5b4146b690c6fd4d75ef169387748">llvm::Intrinsic::x86_sse2_cvtps2pd</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02981">Intrinsics.h:2981</a></div></div>
<div class="ttc" id="classllvm_1_1AllocaInst_html_ad441932c20e5b9ba36c8c72a6c7f5ec3"><div class="ttname"><a href="classllvm_1_1AllocaInst.html#ad441932c20e5b9ba36c8c72a6c7f5ec3">llvm::AllocaInst::getAlignment</a></div><div class="ttdeci">unsigned getAlignment() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00103">Instructions.h:103</a></div></div>
<div class="ttc" id="structllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00286">CommandLine.h:286</a></div></div>
<div class="ttc" id="InstVisitor_8h_html"><div class="ttname"><a href="InstVisitor_8h.html">InstVisitor.h</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_aab8e16a35183ce39aad394714087bcff"><div class="ttname"><a href="classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">llvm::Instruction::getDebugLoc</a></div><div class="ttdeci">const DebugLoc &amp; getDebugLoc() const </div><div class="ttdoc">getDebugLoc - Return the debug location for this node as a DebugLoc. </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00178">Instruction.h:178</a></div></div>
<div class="ttc" id="Instrumentation_8h_html"><div class="ttname"><a href="Instrumentation_8h.html">Instrumentation.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a9c4a989c182e2908905a05526862f42e"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a9c4a989c182e2908905a05526862f42e">llvm::Intrinsic::x86_sse2_cvtss2sd</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02987">Intrinsics.h:2987</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_af41f58e730804d10b91fcff39b035f74"><div class="ttname"><a href="classllvm_1_1User.html#af41f58e730804d10b91fcff39b035f74">llvm::User::op_end</a></div><div class="ttdeci">op_iterator op_end()</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00118">User.h:118</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a4c25b6c00c4867281779c81ab64d2081"><div class="ttname"><a href="classllvm_1_1PHINode.html#a4c25b6c00c4867281779c81ab64d2081">llvm::PHINode::getIncomingBlock</a></div><div class="ttdeci">BasicBlock * getIncomingBlock(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02074">Instructions.h:2074</a></div></div>
<div class="ttc" id="classllvm_1_1OwningPtr_html"><div class="ttname"><a href="classllvm_1_1OwningPtr.html">llvm::OwningPtr</a></div><div class="ttdef"><b>Definition:</b> <a href="OwningPtr_8h_source.html#l00028">OwningPtr.h:28</a></div></div>
<div class="ttc" id="classllvm_1_1ICmpInst_html"><div class="ttname"><a href="classllvm_1_1ICmpInst.html">llvm::ICmpInst</a></div><div class="ttdoc">Represent an integer comparison operator. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00911">Instructions.h:911</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">llvm::CmpInst::Predicate</a></div><div class="ttdeci">Predicate</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00651">InstrTypes.h:651</a></div></div>
<div class="ttc" id="classllvm_1_1FunctionPass_html"><div class="ttname"><a href="classllvm_1_1FunctionPass.html">llvm::FunctionPass</a></div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00293">Pass.h:293</a></div></div>
<div class="ttc" id="MemorySanitizer_8cpp_html_a18599dcc3be2ad58c3ed01ea18609782"><div class="ttname"><a href="MemorySanitizer_8cpp.html#a18599dcc3be2ad58c3ed01ea18609782">kShadowTLSAlignment</a></div><div class="ttdeci">static const unsigned kShadowTLSAlignment</div><div class="ttdef"><b>Definition:</b> <a href="MemorySanitizer_8cpp_source.html#l00130">MemorySanitizer.cpp:130</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00088">User.h:88</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_ad47eefa1d094f60494b6b927061ca001"><div class="ttname"><a href="classllvm_1_1LoadInst.html#ad47eefa1d094f60494b6b927061ca001">llvm::LoadInst::getPointerOperand</a></div><div class="ttdeci">Value * getPointerOperand()</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00223">Instructions.h:223</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a8bf193a781a92cae52d7f9216d0824f8"><div class="ttname"><a href="classllvm_1_1Function.html#a8bf193a781a92cae52d7f9216d0824f8">llvm::Function::arg_begin</a></div><div class="ttdeci">arg_iterator arg_begin()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00410">Function.h:410</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90ad5de39599e2514e063063a0bb96e7cf0"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ad5de39599e2514e063063a0bb96e7cf0">llvm::Intrinsic::x86_avx512_cvttsd2usi</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02633">Intrinsics.h:2633</a></div></div>
<div class="ttc" id="classllvm_1_1IntegerType_html"><div class="ttname"><a href="classllvm_1_1IntegerType.html">llvm::IntegerType</a></div><div class="ttdoc">Integer representation type. </div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00037">DerivedTypes.h:37</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a4563f4ea6d5fa1fc9d24309f62fb0774"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a4563f4ea6d5fa1fc9d24309f62fb0774">llvm::Intrinsic::x86_avx512_cvtusi2sd</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02637">Intrinsics.h:2637</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a8afd4995fae596b2c86eeed85b3d388b"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a8afd4995fae596b2c86eeed85b3d388b">llvm::CmpInst::getPredicate</a></div><div class="ttdeci">Predicate getPredicate() const </div><div class="ttdoc">Return the predicate for this instruction. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00714">InstrTypes.h:714</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantStruct_html_a54fcfa620deb80373f489ba2fdad7643"><div class="ttname"><a href="classllvm_1_1ConstantStruct.html#a54fcfa620deb80373f489ba2fdad7643">llvm::ConstantStruct::get</a></div><div class="ttdeci">static Constant * get(StructType *T, ArrayRef&lt; Constant * &gt; V)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00874">Constants.cpp:874</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a5bcdbf6fc5f5cdcfab94df1055d1bc87"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a5bcdbf6fc5f5cdcfab94df1055d1bc87">llvm::Intrinsic::x86_avx512_cvttss2usi</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02635">Intrinsics.h:2635</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6f"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6f">llvm::LibFunc::Func</a></div><div class="ttdeci">Func</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00020">TargetLibraryInfo.h:20</a></div></div>
<div class="ttc" id="classllvm_1_1IntToPtrInst_html"><div class="ttname"><a href="classllvm_1_1IntToPtrInst.html">llvm::IntToPtrInst</a></div><div class="ttdoc">This class represents a cast from an integer to a pointer. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03499">Instructions.h:3499</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_a4d51384de6e1798bb6aa875aebeea9f0"><div class="ttname"><a href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">llvm::Constant::getAllOnesValue</a></div><div class="ttdeci">static Constant * getAllOnesValue(Type *Ty)</div><div class="ttdoc">Get the all ones value. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00163">Constants.cpp:163</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html">llvm::GlobalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalVariable_8h_source.html#l00035">GlobalVariable.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html_ad54481e3c992b555aeaba34a83daf7e6"><div class="ttname"><a href="classllvm_1_1CallInst.html#ad54481e3c992b555aeaba34a83daf7e6">llvm::CallInst::setTailCall</a></div><div class="ttdeci">void setTailCall(bool isTC=true)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01231">Instructions.h:1231</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a2eba483f5cc876e824aa6c085736086b"><div class="ttname"><a href="classllvm_1_1Type.html#a2eba483f5cc876e824aa6c085736086b">llvm::Type::isPointerTy</a></div><div class="ttdeci">bool isPointerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00220">Type.h:220</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a191cdd300d75937cef4856e41dba1925"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a191cdd300d75937cef4856e41dba1925">llvm::Intrinsic::x86_sse_cvtps2pi</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l03147">Intrinsics.h:3147</a></div></div>
<div class="ttc" id="classT_html"><div class="ttname"><a href="classT.html">T</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a35a540d6e55bff813e9b195ebdb3da9f"><div class="ttname"><a href="classllvm_1_1Type.html#a35a540d6e55bff813e9b195ebdb3da9f">llvm::Type::isFPOrFPVectorTy</a></div><div class="ttdeci">bool isFPOrFPVectorTy() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00186">Type.h:186</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a7fe9ccd4893f4e2caa826126c09545ea"><div class="ttname"><a href="classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">llvm::Type::getInt8PtrTy</a></div><div class="ttdeci">static PointerType * getInt8PtrTy(LLVMContext &amp;C, unsigned AS=0)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00284">Type.cpp:284</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_a7badbb741cd23e73ad063428c9cd5fea"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a7badbb741cd23e73ad063428c9cd5fea">llvm::IRBuilderBase::getInt8PtrTy</a></div><div class="ttdeci">PointerType * getInt8PtrTy(unsigned AddrSpace=0)</div><div class="ttdoc">Fetch the type representing a pointer to an 8-bit integer value. </div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00335">IRBuilder.h:335</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a674095e41573ea310d48ba480dca34a9"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a674095e41573ea310d48ba480dca34a9">llvm::IRBuilder::CreateAlignedStore</a></div><div class="ttdeci">StoreInst * CreateAlignedStore(Value *Val, Value *Ptr, unsigned Align, bool isVolatile=false)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00911">IRBuilder.h:911</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a6afa862daad32dd85807c27ce804b139"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a6afa862daad32dd85807c27ce804b139">llvm::IRBuilder::CreateAlignedLoad</a></div><div class="ttdeci">LoadInst * CreateAlignedLoad(Value *Ptr, unsigned Align, const char *Name)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00894">IRBuilder.h:894</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html_a67bf091383cd61e1225445e78b61d9f9"><div class="ttname"><a href="classllvm_1_1SelectInst.html#a67bf091383cd61e1225445e78b61d9f9">llvm::SelectInst::getTrueValue</a></div><div class="ttdeci">const Value * getTrueValue() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01467">Instructions.h:1467</a></div></div>
<div class="ttc" id="MemorySanitizer_8cpp_html_acfdcbff37769d5fce008cf36d8037e23"><div class="ttname"><a href="MemorySanitizer_8cpp.html#acfdcbff37769d5fce008cf36d8037e23">ClTrackOrigins</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClTrackOrigins(&quot;msan-track-origins&quot;, cl::desc(&quot;Track origins (allocation sites) of poisoned memory&quot;), cl::Hidden, cl::init(false))</div><div class="ttdoc">Track origins of uninitialized values. </div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_a8275b4d0939145c7adad690a7ed68ee2"><div class="ttname"><a href="classllvm_1_1LoadInst.html#a8275b4d0939145c7adad690a7ed68ee2">llvm::LoadInst::isAtomic</a></div><div class="ttdeci">bool isAtomic() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00211">Instructions.h:211</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_ab335e668fd33542ea14a2c7b527e64d3"><div class="ttname"><a href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a></div><div class="ttdeci">The same transformation can work with an even modulo with the addition of a and shrink the compare RHS by the same amount Unless the target supports that transformation probably isn t worthwhile The transformation can also easily be made to work with non zero equality for n</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00723">Target/README.txt:723</a></div></div>
<div class="ttc" id="classllvm_1_1Triple_html"><div class="ttname"><a href="classllvm_1_1Triple.html">llvm::Triple</a></div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00044">Triple.h:44</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a720a42e85f7e981afd61e28473b0000a">llvm::CmpInst::ICMP_SGT</a></div><div class="ttdoc">signed greater than </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00678">InstrTypes.h:678</a></div></div>
<div class="ttc" id="classllvm_1_1ICmpInst_html_ab8d326a634f66801a402f872f6ea4949"><div class="ttname"><a href="classllvm_1_1ICmpInst.html#ab8d326a634f66801a402f872f6ea4949">llvm::ICmpInst::isRelational</a></div><div class="ttdeci">bool isRelational() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01013">Instructions.h:1013</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_a9e003820a7f92a76b0cd56a6cb1bcbc6"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a9e003820a7f92a76b0cd56a6cb1bcbc6">llvm::IRBuilderBase::getIntPtrTy</a></div><div class="ttdeci">IntegerType * getIntPtrTy(const DataLayout *DL, unsigned AddrSpace=0)</div><div class="ttdoc">Fetch the type representing a pointer to an integer value. </div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00340">IRBuilder.h:340</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a93becf583a71862cec776ea202aaa9ae"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a93becf583a71862cec776ea202aaa9ae">llvm::Intrinsic::x86_avx512_cvtsd2usi</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02629">Intrinsics.h:2629</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html_a88505baf41407782678a5df1702d2d31"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a88505baf41407782678a5df1702d2d31">llvm::BinaryOperator::getOpcode</a></div><div class="ttdeci">BinaryOps getOpcode() const </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00326">InstrTypes.h:326</a></div></div>
<div class="ttc" id="classllvm_1_1IntegerType_html_a14f7b4f1aed38192fb6b7772eb506bdb"><div class="ttname"><a href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">llvm::IntegerType::get</a></div><div class="ttdeci">static IntegerType * get(LLVMContext &amp;C, unsigned NumBits)</div><div class="ttdoc">Get or create an IntegerType instance. </div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00305">Type.cpp:305</a></div></div>
<div class="ttc" id="namespacellvm_1_1PPCISD_html_a69ad64696d1df3be05f01dfb67f5bc66a2ae057e4de45c51c89b7e5dc5053df62"><div class="ttname"><a href="namespacellvm_1_1PPCISD.html#a69ad64696d1df3be05f01dfb67f5bc66a2ae057e4de45c51c89b7e5dc5053df62">llvm::PPCISD::SC</a></div><div class="ttdef"><b>Definition:</b> <a href="PPCISelLowering_8h_source.html#l00247">PPCISelLowering.h:247</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1ValueMap_html"><div class="ttname"><a href="classllvm_1_1ValueMap.html">llvm::ValueMap</a></div><div class="ttdoc">See the file comment. </div><div class="ttdef"><b>Definition:</b> <a href="ValueMap_8h_source.html#l00075">ValueMap.h:75</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html_aba6b1ee9f629801928eb72258021fb72"><div class="ttname"><a href="classllvm_1_1StoreInst.html#aba6b1ee9f629801928eb72258021fb72">llvm::StoreInst::getOrdering</a></div><div class="ttdeci">AtomicOrdering getOrdering() const </div><div class="ttdoc">Returns the ordering effect of this store. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00308">Instructions.h:308</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a1b45f45820a60c09244a87eb59824aec"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a></div><div class="ttdeci">add sub stmia L5 ldr r0 bl L_printf $stub Instead of a and a wouldn t it be better to do three moves *Return an aggregate type is even return S</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00197">Target/ARM/README.txt:197</a></div></div>
<div class="ttc" id="classllvm_1_1PointerType_html_a8db49fd5069f21d514e7bb0fd11f0902"><div class="ttname"><a href="classllvm_1_1PointerType.html#a8db49fd5069f21d514e7bb0fd11f0902">llvm::PointerType::getUnqual</a></div><div class="ttdeci">static PointerType * getUnqual(Type *ElementType)</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00436">DerivedTypes.h:436</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a5b403e07ea210ceb117a33adb880ab15"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a5b403e07ea210ceb117a33adb880ab15">llvm::Intrinsic::x86_sse2_cvtsd2ss</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02984">Intrinsics.h:2984</a></div></div>
<div class="ttc" id="namespacellvm_html_abf74b2f0dbae96f4708d3e407b36df02ad1fbbfdf093cdd213b0df02550ac94d0"><div class="ttname"><a href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02ad1fbbfdf093cdd213b0df02550ac94d0">llvm::NotAtomic</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00037">Instructions.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_ad0affa936bea7c530da1597e9bb60bbd"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#ad0affa936bea7c530da1597e9bb60bbd">llvm::IRBuilder::CreateExtractElement</a></div><div class="ttdeci">Value * CreateExtractElement(Value *Vec, Value *Idx, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01349">IRBuilder.h:1349</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a277dfeaad2a2ada72a6024b0eedc5301"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a277dfeaad2a2ada72a6024b0eedc5301">llvm::IRBuilder::CreateZExt</a></div><div class="ttdeci">Value * CreateZExt(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01071">IRBuilder.h:1071</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90af486031309929bc579734a96c3a3b16f"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90af486031309929bc579734a96c3a3b16f">llvm::Intrinsic::x86_sse_cvtss2si</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l03150">Intrinsics.h:3150</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_ad8f27f0b94a56abcd296b8461737a3af"><div class="ttname"><a href="classllvm_1_1Type.html#ad8f27f0b94a56abcd296b8461737a3af">llvm::Type::getVectorNumElements</a></div><div class="ttdeci">unsigned getVectorNumElements() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00214">Type.cpp:214</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html_a18fc4545474c6ebb6f7c547f64f4fb31"><div class="ttname"><a href="classllvm_1_1StructType.html#a18fc4545474c6ebb6f7c547f64f4fb31">llvm::StructType::get</a></div><div class="ttdeci">static StructType * get(LLVMContext &amp;Context, ArrayRef&lt; Type * &gt; Elements, bool isPacked=false)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00405">Type.cpp:405</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a08f50ff6aa94866b0fc30b5d71d65b5e"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a08f50ff6aa94866b0fc30b5d71d65b5e">llvm::Intrinsic::x86_avx512_cvtusi2ss</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02638">Intrinsics.h:2638</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a87b363b9dad9f5040ea7e29ea9e60ff5"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a87b363b9dad9f5040ea7e29ea9e60ff5">llvm::IRBuilder::CreateBitCast</a></div><div class="ttdeci">Value * CreateBitCast(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01132">IRBuilder.h:1132</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00880">SmallVector.h:880</a></div></div>
<div class="ttc" id="Module_8h_html"><div class="ttname"><a href="Module_8h.html">Module.h</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00111">Value.h:111</a></div></div>
<div class="ttc" id="MDBuilder_8h_html"><div class="ttname"><a href="MDBuilder_8h.html">MDBuilder.h</a></div></div>
<div class="ttc" id="MemorySanitizer_8cpp_html_ac4648cb71d95d1775cca6ce3f32d114b"><div class="ttname"><a href="MemorySanitizer_8cpp.html#ac4648cb71d95d1775cca6ce3f32d114b">ClBlacklistFile</a></div><div class="ttdeci">static cl::opt&lt; std::string &gt; ClBlacklistFile(&quot;msan-blacklist&quot;, cl::desc(&quot;File containing the list of functions where MemorySanitizer &quot;&quot;should not report bugs&quot;), cl::Hidden)</div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html">llvm::BinaryOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00138">InstrTypes.h:138</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_a9141f967188383108a69cc1b8ed3c195a7eade123587a08e674f2ca72e2443771"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a9141f967188383108a69cc1b8ed3c195a7eade123587a08e674f2ca72e2443771">llvm::GlobalValue::HiddenVisibility</a></div><div class="ttdoc">The GV is hidden. </div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00054">GlobalValue.h:54</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90acd92660993cd257d8b431e9587c2243e"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90acd92660993cd257d8b431e9587c2243e">llvm::Intrinsic::x86_sse2_cvtdq2pd</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02976">Intrinsics.h:2976</a></div></div>
<div class="ttc" id="MemorySanitizer_8cpp_html_a448181f18ba0f12950842170ef02dc7d"><div class="ttname"><a href="MemorySanitizer_8cpp.html#a448181f18ba0f12950842170ef02dc7d">kOriginOffset64</a></div><div class="ttdeci">static const uint64_t kOriginOffset64</div><div class="ttdef"><b>Definition:</b> <a href="MemorySanitizer_8cpp_source.html#l00128">MemorySanitizer.cpp:128</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a15ae464950ac676919c2f0c7aafc706c">llvm::CmpInst::ICMP_SLT</a></div><div class="ttdoc">signed less than </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00680">InstrTypes.h:680</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_ae4e36d266be4a2a83a62926162f6f144"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#ae4e36d266be4a2a83a62926162f6f144">llvm::IRBuilder::CreateICmpUGE</a></div><div class="ttdeci">Value * CreateICmpUGE(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01215">IRBuilder.h:1215</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_ac0e8c554bf1c1e117a74d51df89c137d"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#ac0e8c554bf1c1e117a74d51df89c137d">llvm::IRBuilderBase::getInt32</a></div><div class="ttdeci">ConstantInt * getInt32(uint32_t C)</div><div class="ttdoc">Get a constant 32-bit value. </div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00276">IRBuilder.h:276</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_acaf8e4c3e40e01e848c1fad5f05b81cd"><div class="ttname"><a href="classllvm_1_1Type.html#acaf8e4c3e40e01e848c1fad5f05b81cd">llvm::Type::getIntNTy</a></div><div class="ttdeci">static IntegerType * getIntNTy(LLVMContext &amp;C, unsigned N)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00244">Type.cpp:244</a></div></div>
<div class="ttc" id="classllvm_1_1MemCpyInst_html"><div class="ttname"><a href="classllvm_1_1MemCpyInst.html">llvm::MemCpyInst</a></div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00247">IntrinsicInst.h:247</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a9105541412dab869e18b3cceebfff07d"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool isSigned=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00492">Constants.cpp:492</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html_a0bcd4131e1a1d92215f5385b4e16cd2e"><div class="ttname"><a href="classllvm_1_1CallInst.html#a0bcd4131e1a1d92215f5385b4e16cd2e">llvm::CallInst::getCalledFunction</a></div><div class="ttdeci">Function * getCalledFunction() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01357">Instructions.h:1357</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_a8c0a29ecc14dc5afe7573bf616da2361"><div class="ttname"><a href="classllvm_1_1LoadInst.html#a8c0a29ecc14dc5afe7573bf616da2361">llvm::LoadInst::getOrdering</a></div><div class="ttdeci">AtomicOrdering getOrdering() const </div><div class="ttdoc">Returns the ordering effect of this fence. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00188">Instructions.h:188</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a30f2c362631e3728d2f47a8203071ade"><div class="ttname"><a href="classllvm_1_1Function.html#a30f2c362631e3728d2f47a8203071ade">llvm::Function::getEntryBlock</a></div><div class="ttdeci">const BasicBlock &amp; getEntryBlock() const </div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00380">Function.h:380</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_ad7ec8482f19e8e86e3de573b060a17e5"><div class="ttname"><a href="classllvm_1_1Constant.html#ad7ec8482f19e8e86e3de573b060a17e5">llvm::Constant::isNullValue</a></div><div class="ttdeci">bool isNullValue() const </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00075">Constants.cpp:75</a></div></div>
<div class="ttc" id="MemorySanitizer_8cpp_html_a2638c0c0f82157f94a2040d1e76b5fa5"><div class="ttname"><a href="MemorySanitizer_8cpp.html#a2638c0c0f82157f94a2040d1e76b5fa5">createPrivateNonConstGlobalForString</a></div><div class="ttdeci">static GlobalVariable * createPrivateNonConstGlobalForString(Module &amp;M, StringRef Str)</div><div class="ttdoc">Create a non-const global initialized with the given string. </div><div class="ttdef"><b>Definition:</b> <a href="MemorySanitizer_8cpp_source.html#l00305">MemorySanitizer.cpp:305</a></div></div>
<div class="ttc" id="MemorySanitizer_8cpp_html_ac0f9397797d9aa0abd56ae58920145aa"><div class="ttname"><a href="MemorySanitizer_8cpp.html#ac0f9397797d9aa0abd56ae58920145aa">ClKeepGoing</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClKeepGoing(&quot;msan-keep-going&quot;, cl::desc(&quot;keep going after reporting a UMR&quot;), cl::Hidden, cl::init(false))</div></div>
<div class="ttc" id="classllvm_1_1ExtractValueInst_html_ab87e7c5a729885396b3b045ad375e4b8"><div class="ttname"><a href="classllvm_1_1ExtractValueInst.html#ab87e7c5a729885396b3b045ad375e4b8">llvm::ExtractValueInst::getAggregateOperand</a></div><div class="ttdeci">Value * getAggregateOperand()</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01790">Instructions.h:1790</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00101">Debug.cpp:101</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a72873ed64b7be01507a2248b8e756ec8"><div class="ttname"><a href="classllvm_1_1Function.html#a72873ed64b7be01507a2248b8e756ec8">llvm::Function::getAttributes</a></div><div class="ttdeci">AttributeSet getAttributes() const </div><div class="ttdoc">Return the attribute list for this Function. </div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00170">Function.h:170</a></div></div>
<div class="ttc" id="namespacellvm_html_afb9c37d2aea316c81a0b2b63c6b480e7"><div class="ttname"><a href="namespacellvm.html#afb9c37d2aea316c81a0b2b63c6b480e7">llvm::df_begin</a></div><div class="ttdeci">df_iterator&lt; T &gt; df_begin(const T &amp;G)</div><div class="ttdef"><b>Definition:</b> <a href="DepthFirstIterator_8h_source.html#l00201">DepthFirstIterator.h:201</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html_a150b33ecedbc8c7803c2db8040fbe3f8"><div class="ttname"><a href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">llvm::CallInst::getArgOperand</a></div><div class="ttdeci">Value * getArgOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01245">Instructions.h:1245</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05a2751d6136a2819749dcef65dc19a4246"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05a2751d6136a2819749dcef65dc19a4246">llvm::CmpInst::ICMP_SLE</a></div><div class="ttdoc">signed less or equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00681">InstrTypes.h:681</a></div></div>
<div class="ttc" id="classllvm_1_1VectorType_html"><div class="ttname"><a href="classllvm_1_1VectorType.html">llvm::VectorType</a></div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00358">DerivedTypes.h:358</a></div></div>
<div class="ttc" id="ModuleUtils_8h_html"><div class="ttname"><a href="ModuleUtils_8h.html">ModuleUtils.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a455c23dfd277edd10992b37094e08758"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a455c23dfd277edd10992b37094e08758">llvm::Intrinsic::x86_sse2_cvttsd2si64</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02991">Intrinsics.h:2991</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html_a6db4d11981474f069a29e1172da2e7fa"><div class="ttname"><a href="classllvm_1_1StoreInst.html#a6db4d11981474f069a29e1172da2e7fa">llvm::StoreInst::isAtomic</a></div><div class="ttdeci">bool isAtomic() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00331">Instructions.h:331</a></div></div>
<div class="ttc" id="CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2README_8txt_source.html#l00036">CodeGen/README.txt:36</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90acf39c1fa7d41dab3d79be4bf3c5f0d43"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90acf39c1fa7d41dab3d79be4bf3c5f0d43">llvm::Intrinsic::x86_sse2_cvttsd2si</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02990">Intrinsics.h:2990</a></div></div>
<div class="ttc" id="MemorySanitizer_8cpp_html_acb80a2d10dece8e1e5c07a6ff3f18e76"><div class="ttname"><a href="MemorySanitizer_8cpp.html#acb80a2d10dece8e1e5c07a6ff3f18e76">ClWrapIndirectCallsFast</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClWrapIndirectCallsFast(&quot;msan-wrap-indirect-calls-fast&quot;, cl::desc(&quot;Do not wrap indirect calls with target in the same module&quot;), cl::Hidden, cl::init(true))</div></div>
<div class="ttc" id="classllvm_1_1Type_html_a6e328feb83afa5cf1c966d6704e43fc1"><div class="ttname"><a href="classllvm_1_1Type.html#a6e328feb83afa5cf1c966d6704e43fc1">llvm::Type::isIntegerTy</a></div><div class="ttdeci">bool isIntegerTy() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00196">Type.h:196</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_ae19d9d49f39d404703b42161ce788954"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#ae19d9d49f39d404703b42161ce788954">llvm::IRBuilder::CreateSelect</a></div><div class="ttdeci">Value * CreateSelect(Value *C, Value *True, Value *False, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01336">IRBuilder.h:1336</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a5ef55181ae0bb0f5c561b9a29087b1e5"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a5ef55181ae0bb0f5c561b9a29087b1e5">llvm::BasicBlock::getSinglePredecessor</a></div><div class="ttdeci">BasicBlock * getSinglePredecessor()</div><div class="ttdoc">Return this block if it has a single predecessor block. Otherwise return a null pointer. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00183">BasicBlock.cpp:183</a></div></div>
<div class="ttc" id="classllvm_1_1Attribute_html_aab7ee4b8fd1d3e7e4cea87868855e60ea72f3f4379fdf9acf18ec492b98d31deb"><div class="ttname"><a href="classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60ea72f3f4379fdf9acf18ec492b98d31deb">llvm::Attribute::ReadOnly</a></div><div class="ttdoc">Function only reads from memory. </div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00094">Attributes.h:94</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_a7a71da01c646618b7f43d303d563b41b"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a7a71da01c646618b7f43d303d563b41b">llvm::IRBuilderBase::getInt8Ty</a></div><div class="ttdeci">IntegerType * getInt8Ty()</div><div class="ttdoc">Fetch the type representing an 8-bit integer. </div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00300">IRBuilder.h:300</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html_af9f7e3d81c606a8ee1b3fc7ab9d793dc"><div class="ttname"><a href="classllvm_1_1CallInst.html#af9f7e3d81c606a8ee1b3fc7ab9d793dc">llvm::CallInst::isInlineAsm</a></div><div class="ttdeci">bool isInlineAsm() const </div><div class="ttdoc">isInlineAsm - Check if this call is an inline asm statement. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01372">Instructions.h:1372</a></div></div>
<div class="ttc" id="Function_8h_html"><div class="ttname"><a href="Function_8h.html">Function.h</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a8bbeae6f9dd03923c7cf63a6ff9f4036"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a8bbeae6f9dd03923c7cf63a6ff9f4036">llvm::IRBuilder::CreateInsertValue</a></div><div class="ttdeci">Value * CreateInsertValue(Value *Agg, Value *Val, ArrayRef&lt; unsigned &gt; Idxs, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01383">IRBuilder.h:1383</a></div></div>
<div class="ttc" id="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode_html_a0c4e2aa2235abdd10d2beffa32cd9b14a1d25947b1e05ec73aa88243522dd01ff"><div class="ttname"><a href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a0c4e2aa2235abdd10d2beffa32cd9b14a1d25947b1e05ec73aa88243522dd01ff">llvm::NVPTX::PTXLdStInstCode::Signed</a></div><div class="ttdef"><b>Definition:</b> <a href="NVPTX_8h_source.html#l00122">NVPTX.h:122</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a4d49fd9a4cc4f2a74d4555bd08b13910"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a4d49fd9a4cc4f2a74d4555bd08b13910">llvm::IRBuilder::CreateShl</a></div><div class="ttdeci">Value * CreateShl(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00734">IRBuilder.h:734</a></div></div>
<div class="ttc" id="classllvm_1_1raw__svector__ostream_html_a941652907e3c1b132f86e1870bb5b291"><div class="ttname"><a href="classllvm_1_1raw__svector__ostream.html#a941652907e3c1b132f86e1870bb5b291">llvm::raw_svector_ostream::str</a></div><div class="ttdeci">StringRef str()</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8cpp_source.html#l00750">raw_ostream.cpp:750</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html_a731befae7b8a9a1a2efda559c5420a7f"><div class="ttname"><a href="classllvm_1_1StoreInst.html#a731befae7b8a9a1a2efda559c5420a7f">llvm::StoreInst::setOrdering</a></div><div class="ttdeci">void setOrdering(AtomicOrdering Ordering)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00314">Instructions.h:314</a></div></div>
<div class="ttc" id="classllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l01149">CommandLine.h:1149</a></div></div>
<div class="ttc" id="MemorySanitizer_8cpp_html_a0cf5d5e1b87d7a9391913ce2de847a2c"><div class="ttname"><a href="MemorySanitizer_8cpp.html#a0cf5d5e1b87d7a9391913ce2de847a2c">ClHandleICmpExact</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClHandleICmpExact(&quot;msan-handle-icmp-exact&quot;, cl::desc(&quot;exact handling of relational integer ICmp&quot;), cl::Hidden, cl::init(false))</div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90aef360411e3e420e8d379f42adadd4115"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aef360411e3e420e8d379f42adadd4115">llvm::Intrinsic::x86_sse_cvttss2si64</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l03155">Intrinsics.h:3155</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a0a32c2cb0342323dc78f6aa31d7e581e"><div class="ttname"><a href="classllvm_1_1Type.html#a0a32c2cb0342323dc78f6aa31d7e581e">llvm::Type::isAggregateType</a></div><div class="ttdeci">bool isAggregateType() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00270">Type.h:270</a></div></div>
<div class="ttc" id="classllvm_1_1CallSiteBase_html_a5770c10251145ce2b6a2dc99906cba64"><div class="ttname"><a href="classllvm_1_1CallSiteBase.html#a5770c10251145ce2b6a2dc99906cba64">llvm::CallSiteBase::isCall</a></div><div class="ttdeci">bool isCall() const </div><div class="ttdef"><b>Definition:</b> <a href="CallSite_8h_source.html#l00073">CallSite.h:73</a></div></div>
<div class="ttc" id="MemorySanitizer_8cpp_html_a38680ec82ce1634055f971cecb753495"><div class="ttname"><a href="MemorySanitizer_8cpp.html#a38680ec82ce1634055f971cecb753495">INITIALIZE_PASS</a></div><div class="ttdeci">INITIALIZE_PASS(MemorySanitizer,&quot;msan&quot;,&quot;MemorySanitizer: detects uninitialized reads.&quot;, false, false) FunctionPass *llvm</div><div class="ttdef"><b>Definition:</b> <a href="MemorySanitizer_8cpp_source.html#l00291">MemorySanitizer.cpp:291</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_ad1168fc42bcba1b71217a4969483671a"><div class="ttname"><a href="classllvm_1_1LoadInst.html#ad1168fc42bcba1b71217a4969483671a">llvm::LoadInst::getAlignment</a></div><div class="ttdeci">unsigned getAlignment() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00181">Instructions.h:181</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a2081b822b121723df82782c24314a37e"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a2081b822b121723df82782c24314a37e">llvm::IRBuilder::CreateSExt</a></div><div class="ttdeci">Value * CreateSExt(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01074">IRBuilder.h:1074</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a28f8055f6d48ff1de73a7b683a781f5d"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a28f8055f6d48ff1de73a7b683a781f5d">llvm::Intrinsic::x86_sse_cvttps2pi</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l03153">Intrinsics.h:3153</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86II_html_a97dc14052814702ba0e2b14fb14dd02da2c6497f6ed5314c6fcd9ab88c9528543"><div class="ttname"><a href="namespacellvm_1_1X86II.html#a97dc14052814702ba0e2b14fb14dd02da2c6497f6ed5314c6fcd9ab88c9528543">llvm::X86II::DE</a></div><div class="ttdef"><b>Definition:</b> <a href="X86BaseInfo_8h_source.html#l00332">X86BaseInfo.h:332</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html_a5e07dea70b41ad610edbfc21bd54154a"><div class="ttname"><a href="classllvm_1_1CallInst.html#a5e07dea70b41ad610edbfc21bd54154a">llvm::CallInst::isTailCall</a></div><div class="ttdeci">bool isTailCall() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01230">Instructions.h:1230</a></div></div>
<div class="ttc" id="classllvm_1_1CallSiteBase_html_a3a207eed0331b875c6a9b6dbaf5c4af3"><div class="ttname"><a href="classllvm_1_1CallSiteBase.html#a3a207eed0331b875c6a9b6dbaf5c4af3">llvm::CallSiteBase::paramHasAttr</a></div><div class="ttdeci">bool paramHasAttr(unsigned i, Attribute::AttrKind A) const </div><div class="ttdoc">Return true if the call or the callee has the given attribute. </div><div class="ttdef"><b>Definition:</b> <a href="CallSite_8h_source.html#l00192">CallSite.h:192</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayType_html_adf411edc4f135b570ab218079474ce77"><div class="ttname"><a href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">llvm::ArrayType::get</a></div><div class="ttdeci">static ArrayType * get(Type *ElementType, uint64_t NumElements)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00679">Type.cpp:679</a></div></div>
<div class="ttc" id="BasicBlockUtils_8h_html"><div class="ttname"><a href="BasicBlockUtils_8h.html">BasicBlockUtils.h</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_a58f62481bd3a4bfc5d07102fe857741a"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a58f62481bd3a4bfc5d07102fe857741a">llvm::IRBuilderBase::CreateMemSet</a></div><div class="ttdeci">CallInst * CreateMemSet(Value *Ptr, Value *Val, uint64_t Size, unsigned Align, bool isVolatile=false, MDNode *TBAATag=0)</div><div class="ttdoc">Create and insert a memset to the specified pointer and the specified value. </div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00353">IRBuilder.h:353</a></div></div>
<div class="ttc" id="classllvm_1_1ExtractElementInst_html"><div class="ttname"><a href="classllvm_1_1ExtractElementInst.html">llvm::ExtractElementInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01542">Instructions.h:1542</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a8eafa71cf399da8f21b2af5549f3f9e7"><div class="ttname"><a href="classllvm_1_1Type.html#a8eafa71cf399da8f21b2af5549f3f9e7">llvm::Type::getScalarType</a></div><div class="ttdeci">const Type * getScalarType() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00051">Type.cpp:51</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a609c7b4d7eb90f7c4627da58dc00fa42"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a609c7b4d7eb90f7c4627da58dc00fa42">llvm::IRBuilder::CreateICmpNE</a></div><div class="ttdeci">Value * CreateICmpNE(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01209">IRBuilder.h:1209</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a5a7cfa245af120b44ac8a86143bb9e57"><div class="ttname"><a href="classllvm_1_1Type.html#a5a7cfa245af120b44ac8a86143bb9e57">llvm::Type::getPrimitiveSizeInBits</a></div><div class="ttdeci">unsigned getPrimitiveSizeInBits() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00117">Type.cpp:117</a></div></div>
<div class="ttc" id="classllvm_1_1InlineAsm_html_aaae042532c03bc95734e689525a6b88b"><div class="ttname"><a href="classllvm_1_1InlineAsm.html#aaae042532c03bc95734e689525a6b88b">llvm::InlineAsm::get</a></div><div class="ttdeci">static InlineAsm * get(FunctionType *Ty, StringRef AsmString, StringRef Constraints, bool hasSideEffects, bool isAlignStack=false, AsmDialect asmDialect=AD_ATT)</div><div class="ttdef"><b>Definition:</b> <a href="InlineAsm_8cpp_source.html#l00028">InlineAsm.cpp:28</a></div></div>
<div class="ttc" id="classllvm_1_1CallSiteBase_html_affa0f3ae92ab8696fccd107c0addf5a2"><div class="ttname"><a href="classllvm_1_1CallSiteBase.html#affa0f3ae92ab8696fccd107c0addf5a2">llvm::CallSiteBase::arg_begin</a></div><div class="ttdeci">IterTy arg_begin() const </div><div class="ttdef"><b>Definition:</b> <a href="CallSite_8h_source.html#l00137">CallSite.h:137</a></div></div>
<div class="ttc" id="IRBuilder_8h_html"><div class="ttname"><a href="IRBuilder_8h.html">IRBuilder.h</a></div></div>
<div class="ttc" id="classllvm_1_1FunctionType_html_ab9b67f93a2231970abb3d95636660ffc"><div class="ttname"><a href="classllvm_1_1FunctionType.html#ab9b67f93a2231970abb3d95636660ffc">llvm::FunctionType::isVarArg</a></div><div class="ttdeci">bool isVarArg() const </div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00120">DerivedTypes.h:120</a></div></div>
<div class="ttc" id="LLVMContext_8h_html"><div class="ttname"><a href="LLVMContext_8h.html">LLVMContext.h</a></div></div>
<div class="ttc" id="SpecialCaseList_8h_html"><div class="ttname"><a href="SpecialCaseList_8h.html">SpecialCaseList.h</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_acc4aad24e3e9f04088c9b7802a7a5718"><div class="ttname"><a href="classllvm_1_1CmpInst.html#acc4aad24e3e9f04088c9b7802a7a5718">llvm::CmpInst::isUnsigned</a></div><div class="ttdeci">bool isUnsigned() const </div><div class="ttdoc">Determine if this instruction is using an unsigned comparison. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00786">InstrTypes.h:786</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a902af4d6cb3a421a7f5723d0fc81efd1"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a902af4d6cb3a421a7f5723d0fc81efd1">llvm::IRBuilder::CreateCall2</a></div><div class="ttdeci">CallInst * CreateCall2(Value *Callee, Value *Arg1, Value *Arg2, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01310">IRBuilder.h:1310</a></div></div>
<div class="ttc" id="classllvm_1_1VACopyInst_html"><div class="ttname"><a href="classllvm_1_1VACopyInst.html">llvm::VACopyInst</a></div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00301">IntrinsicInst.h:301</a></div></div>
<div class="ttc" id="Local_8h_html"><div class="ttname"><a href="Local_8h.html">Local.h</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a40df11649fb4c41a4de49f793c2d231f"><div class="ttname"><a href="classllvm_1_1User.html#a40df11649fb4c41a4de49f793c2d231f">llvm::User::op_iterator</a></div><div class="ttdeci">Use * op_iterator</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00113">User.h:113</a></div></div>
<div class="ttc" id="namespacellvm_html_abf74b2f0dbae96f4708d3e407b36df02a531de0ce6ad557d61b2a1c737e767d07"><div class="ttname"><a href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02a531de0ce6ad557d61b2a1c737e767d07">llvm::Unordered</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00038">Instructions.h:38</a></div></div>
<div class="ttc" id="Target_2X86_2README_8txt_html_a668d6902e1f37328dfbbb1f75aa82fc9"><div class="ttname"><a href="Target_2X86_2README_8txt.html#a668d6902e1f37328dfbbb1f75aa82fc9">a</a></div><div class="ttdeci">=0.0?0.0:(a &gt; 0.0?1.0:-1.0) a</div><div class="ttdef"><b>Definition:</b> <a href="Target_2X86_2README_8txt_source.html#l00652">Target/X86/README.txt:652</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_a9e1fc23a17e97d2d1732e753ae9251ac"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">llvm::GlobalValue::getParent</a></div><div class="ttdeci">Module * getParent()</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00286">GlobalValue.h:286</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_aa933549689e79685bb67de64dddc9f7c"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#aa933549689e79685bb67de64dddc9f7c">llvm::IRBuilder::CreateTrunc</a></div><div class="ttdeci">Value * CreateTrunc(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01068">IRBuilder.h:1068</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00066">Value.h:66</a></div></div>
<div class="ttc" id="Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="Target_2X86_2README_8txt_source.html#l00297">Target/X86/README.txt:297</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a7e31b0c02df2aeed261b103b790cc01e"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a7e31b0c02df2aeed261b103b790cc01e">llvm::IRBuilder::CreateCall</a></div><div class="ttdeci">CallInst * CreateCall(Value *Callee, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01304">IRBuilder.h:1304</a></div></div>
<div class="ttc" id="classllvm_1_1VectorType_html_ab43657ed1abe2e2ed3a6a394f233ebd0"><div class="ttname"><a href="classllvm_1_1VectorType.html#ab43657ed1abe2e2ed3a6a394f233ebd0">llvm::VectorType::get</a></div><div class="ttdeci">static VectorType * get(Type *ElementType, unsigned NumElements)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00706">Type.cpp:706</a></div></div>
<div class="ttc" id="SmallVector_8h_html"><div class="ttname"><a href="SmallVector_8h.html">SmallVector.h</a></div></div>
<div class="ttc" id="BasicAliasAnalysis_8cpp_html_a2675de1d8479c7b00387979714da43f7"><div class="ttname"><a href="BasicAliasAnalysis_8cpp.html#a2675de1d8479c7b00387979714da43f7">getParent</a></div><div class="ttdeci">static const Function * getParent(const Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="BasicAliasAnalysis_8cpp_source.html#l00447">BasicAliasAnalysis.cpp:447</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a9dc5111b1a9b1d5c4652d50f74fe850b"><div class="ttname"><a href="classllvm_1_1Type.html#a9dc5111b1a9b1d5c4652d50f74fe850b">llvm::Type::isSized</a></div><div class="ttdeci">bool isSized() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00278">Type.h:278</a></div></div>
<div class="ttc" id="namespacellvm_html_aba874fadc4c9e51be8fd4e7099212b3b"><div class="ttname"><a href="namespacellvm.html#aba874fadc4c9e51be8fd4e7099212b3b">llvm::createMemorySanitizerPass</a></div><div class="ttdeci">FunctionPass * createMemorySanitizerPass(bool TrackOrigins=false, StringRef BlacklistFile=StringRef())</div></div>
<div class="ttc" id="MemorySanitizer_8cpp_html_a6934dd55a499eb5d1406fe26e1ec800f"><div class="ttname"><a href="MemorySanitizer_8cpp.html#a6934dd55a499eb5d1406fe26e1ec800f">ClPoisonUndef</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClPoisonUndef(&quot;msan-poison-undef&quot;, cl::desc(&quot;poison undef temps&quot;), cl::Hidden, cl::init(true))</div></div>
<div class="ttc" id="Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00097">Debug.h:97</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_a52caf9c563fee52b23e0ee4875c6248f"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a52caf9c563fee52b23e0ee4875c6248f">llvm::IRBuilderBase::getInt8</a></div><div class="ttdeci">ConstantInt * getInt8(uint8_t C)</div><div class="ttdoc">Get a constant 8-bit value. </div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00266">IRBuilder.h:266</a></div></div>
<div class="ttc" id="classllvm_1_1SelectInst_html_a29a16f32075ee4f23cd769701463952c"><div class="ttname"><a href="classllvm_1_1SelectInst.html#a29a16f32075ee4f23cd769701463952c">llvm::SelectInst::getFalseValue</a></div><div class="ttdeci">const Value * getFalseValue() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01468">Instructions.h:1468</a></div></div>
<div class="ttc" id="classllvm_1_1StringRef_html"><div class="ttname"><a href="classllvm_1_1StringRef.html">llvm::StringRef</a></div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00041">StringRef.h:41</a></div></div>
<div class="ttc" id="namespacellvm_html_a93b95c8527f4f744ec4ac5d30150f7c5"><div class="ttname"><a href="namespacellvm.html#a93b95c8527f4f744ec4ac5d30150f7c5">llvm::removeUnreachableBlocks</a></div><div class="ttdeci">bool removeUnreachableBlocks(Function &amp;F)</div><div class="ttdoc">Remove all blocks that can not be reached from the function&amp;#39;s entry. </div><div class="ttdef"><b>Definition:</b> <a href="Local_8cpp_source.html#l01243">Local.cpp:1243</a></div></div>
<div class="ttc" id="raw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1SPII_html_a11e9b8fca4a074643a6a21f444e51406a36b3dd3b84fde3f8494a9b18af131856"><div class="ttname"><a href="namespacellvm_1_1SPII.html#a11e9b8fca4a074643a6a21f444e51406a36b3dd3b84fde3f8494a9b18af131856">llvm::SPII::Store</a></div><div class="ttdef"><b>Definition:</b> <a href="SparcInstrInfo_8h_source.html#l00032">SparcInstrInfo.h:32</a></div></div>
<div class="ttc" id="namespacellvm_1_1SystemZISD_html_a9a3c050e4bfe8d0d09d74c979f5bb121a6908fddc602ce5a12ea10c07af44a9ef"><div class="ttname"><a href="namespacellvm_1_1SystemZISD.html#a9a3c050e4bfe8d0d09d74c979f5bb121a6908fddc602ce5a12ea10c07af44a9ef">llvm::SystemZISD::OC</a></div><div class="ttdef"><b>Definition:</b> <a href="SystemZISelLowering_8h_source.html#l00109">SystemZISelLowering.h:109</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_ab1cd5a3713b93a33f89a2086d473cf6e"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ab1cd5a3713b93a33f89a2086d473cf6e">llvm::BasicBlock::getFirstInsertionPt</a></div><div class="ttdeci">iterator getFirstInsertionPt()</div><div class="ttdoc">Returns an iterator to the first instruction in this block that is suitable for inserting a non-PHI i...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00170">BasicBlock.cpp:170</a></div></div>
<div class="ttc" id="namespacellvm_html_abf74b2f0dbae96f4708d3e407b36df02a53e60dc61e8ffd260c7e21f04054265a"><div class="ttname"><a href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02a53e60dc61e8ffd260c7e21f04054265a">llvm::Acquire</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00041">Instructions.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1CallSite_html"><div class="ttname"><a href="classllvm_1_1CallSite.html">llvm::CallSite</a></div><div class="ttdef"><b>Definition:</b> <a href="CallSite_8h_source.html#l00295">CallSite.h:295</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html_aa2113dcf8c96c19c9a2abf786b9ad3b7"><div class="ttname"><a href="classllvm_1_1StructType.html#aa2113dcf8c96c19c9a2abf786b9ad3b7">llvm::StructType::getNumElements</a></div><div class="ttdeci">unsigned getNumElements() const </div><div class="ttdoc">Random access to the elements. </div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00286">DerivedTypes.h:286</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90a36833c3bb54d2c296992ea3b3aa4a502"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90a36833c3bb54d2c296992ea3b3aa4a502">llvm::Intrinsic::x86_avx512_cvtss2usi</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l02631">Intrinsics.h:2631</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a90cca76dd78688687e0d697679dbc799"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional ldr LCPI1_0 ldr ldr tst movne lsr ldr LCPI1_1 and r0 bx lr it saves an instruction and a register It might be profitable to cse MOVi16 if there are lots of bit immediates with the same bottom half Robert Muth started working on an alternate jump table implementation that does not put the tables in line in the text This is more like the llvm default jump table implementation This might be useful sometime Several revisions of patches are on the mailing beginning while CMP sets them like a subtract Therefore to be able to use CMN for comparisons other than the Z we ll need additional logic to reverse the conditionals associated with the comparison Perhaps a pseudo instruction for the with a post codegen pass to clean up and handle the condition codes See PR5694 for testcase Given the following on int B</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00592">Target/ARM/README.txt:592</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html_ac03c1c093059ea000216af8dd6f2dbf4"><div class="ttname"><a href="classllvm_1_1StoreInst.html#ac03c1c093059ea000216af8dd6f2dbf4">llvm::StoreInst::getPointerOperand</a></div><div class="ttdeci">Value * getPointerOperand()</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00346">Instructions.h:346</a></div></div>
<div class="ttc" id="classllvm_1_1Attribute_html_aab7ee4b8fd1d3e7e4cea87868855e60eada8a2c5e520306d4b7cf64e8056fbd83"><div class="ttname"><a href="classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60eada8a2c5e520306d4b7cf64e8056fbd83">llvm::Attribute::SanitizeMemory</a></div><div class="ttdoc">MemorySanitizer is on. </div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00108">Attributes.h:108</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a7ba5de75f50bb4a4ba920698edf39b28"><div class="ttname"><a href="classllvm_1_1Type.html#a7ba5de75f50bb4a4ba920698edf39b28">llvm::Type::getInt8Ty</a></div><div class="ttdeci">static IntegerType * getInt8Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00239">Type.cpp:239</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00052">Instruction.h:52</a></div></div>
<div class="ttc" id="classllvm_1_1MDBuilder_html"><div class="ttname"><a href="classllvm_1_1MDBuilder.html">llvm::MDBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="MDBuilder_8h_source.html#l00027">MDBuilder.h:27</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_a849b50da820a274b4d001fbeadaf5cd7"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a849b50da820a274b4d001fbeadaf5cd7">llvm::IRBuilderBase::CreateMemCpy</a></div><div class="ttdeci">CallInst * CreateMemCpy(Value *Dst, Value *Src, uint64_t Size, unsigned Align, bool isVolatile=false, MDNode *TBAATag=0, MDNode *TBAAStructTag=0)</div><div class="ttdoc">Create and insert a memcpy between the specified pointers. </div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00365">IRBuilder.h:365</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05ac1aa7b798ba11d2e497d5cce6ce6d3dc"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05ac1aa7b798ba11d2e497d5cce6ce6d3dc">llvm::CmpInst::ICMP_SGE</a></div><div class="ttdoc">signed greater or equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00679">InstrTypes.h:679</a></div></div>
<div class="ttc" id="classllvm_1_1IntrinsicInst_html"><div class="ttname"><a href="classllvm_1_1IntrinsicInst.html">llvm::IntrinsicInst</a></div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00036">IntrinsicInst.h:36</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html_a0e74af4b7c739f3a14e737c3042b6617"><div class="ttname"><a href="classllvm_1_1Module.html#a0e74af4b7c739f3a14e737c3042b6617">llvm::Module::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00249">Module.h:249</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_af5c7041df3ad5edffe5da17b5264c1fc"><div class="ttname"><a href="classllvm_1_1Type.html#af5c7041df3ad5edffe5da17b5264c1fc">llvm::Type::isVoidTy</a></div><div class="ttdeci">bool isVoidTy() const </div><div class="ttdoc">isVoidTy - Return true if this is &amp;#39;void&amp;#39;. </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00140">Type.h:140</a></div></div>
<div class="ttc" id="classllvm_1_1AllocaInst_html"><div class="ttname"><a href="classllvm_1_1AllocaInst.html">llvm::AllocaInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00058">Instructions.h:58</a></div></div>
<div class="ttc" id="classllvm_1_1CallSiteBase_html_a7966cd72245302e38c19138b4ad408b4"><div class="ttname"><a href="classllvm_1_1CallSiteBase.html#a7966cd72245302e38c19138b4ad408b4">llvm::CallSiteBase::getCalledFunction</a></div><div class="ttdeci">FunTy * getCalledFunction() const </div><div class="ttdef"><b>Definition:</b> <a href="CallSite_8h_source.html#l00093">CallSite.h:93</a></div></div>
<div class="ttc" id="classllvm_1_1InsertValueInst_html"><div class="ttname"><a href="classllvm_1_1InsertValueInst.html">llvm::InsertValueInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01846">Instructions.h:1846</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_aec1340aa456977785b902da5d5203948"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#aec1340aa456977785b902da5d5203948">llvm::IRBuilder::CreateCall3</a></div><div class="ttdeci">CallInst * CreateCall3(Value *Callee, Value *Arg1, Value *Arg2, Value *Arg3, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01315">IRBuilder.h:1315</a></div></div>
<div class="ttc" id="namespacellvm_html_abf74b2f0dbae96f4708d3e407b36df02a0fb0d2c15b4a7654025d4db4d2953e93"><div class="ttname"><a href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02a0fb0d2c15b4a7654025d4db4d2953e93">llvm::AcquireRelease</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00043">Instructions.h:43</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 23:00:08 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
