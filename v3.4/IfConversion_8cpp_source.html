<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: IfConversion.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('IfConversion_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">IfConversion.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="IfConversion_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===-- IfConversion.cpp - Machine code if conversion pass. ---------------===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// This file implements the machine instruction level if-conversion pass.</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno"><a class="line" href="IfConversion_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   14</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;ifcvt&quot;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CodeGen_2Passes_8h.html">llvm/CodeGen/Passes.h</a>&quot;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BranchFolding_8h.html">BranchFolding.h</a>&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="STLExtras_8h.html">llvm/ADT/STLExtras.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallSet_8h.html">llvm/ADT/SmallSet.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineBranchProbabilityInfo_8h.html">llvm/CodeGen/MachineBranchProbabilityInfo.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineFunctionPass_8h.html">llvm/CodeGen/MachineFunctionPass.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineInstrBuilder_8h.html">llvm/CodeGen/MachineInstrBuilder.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineModuleInfo_8h.html">llvm/CodeGen/MachineModuleInfo.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineRegisterInfo_8h.html">llvm/CodeGen/MachineRegisterInfo.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetSchedule_8h.html">llvm/CodeGen/TargetSchedule.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LiveRegUnits_8h.html">llvm/CodeGen/LiveRegUnits.h</a>&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MCInstrItineraries_8h.html">llvm/MC/MCInstrItineraries.h</a>&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ErrorHandling_8h.html">llvm/Support/ErrorHandling.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetInstrInfo_8h.html">llvm/Target/TargetInstrInfo.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetLowering_8h.html">llvm/Target/TargetLowering.h</a>&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Target_2TargetMachine_8h.html">llvm/Target/TargetMachine.h</a>&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetRegisterInfo_8h.html">llvm/Target/TargetRegisterInfo.h</a>&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetSubtargetInfo_8h.html">llvm/Target/TargetSubtargetInfo.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">// Hidden options for help debugging.</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;int&gt;</a> <a class="code" href="IfConversion_8cpp.html#a458a8cd09eba3314ad5af0bd4ba14cf6">IfCvtFnStart</a>(<span class="stringliteral">&quot;ifcvt-fn-start&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(-1), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;int&gt;</a> <a class="code" href="IfConversion_8cpp.html#a85b257e1f8f8604483b140e269b6a702">IfCvtFnStop</a>(<span class="stringliteral">&quot;ifcvt-fn-stop&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(-1), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;int&gt;</a> <a class="code" href="IfConversion_8cpp.html#ab7b1a6b123d9d2cb4e2d23ad9a3aaa98">IfCvtLimit</a>(<span class="stringliteral">&quot;ifcvt-limit&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(-1), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="IfConversion_8cpp.html#ab0605726c8a45b165a2a365d801851b9">DisableSimple</a>(<span class="stringliteral">&quot;disable-ifcvt-simple&quot;</span>,</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;                                   <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="IfConversion_8cpp.html#a216ab4a5aced8feffb4c9fa452616f78">DisableSimpleF</a>(<span class="stringliteral">&quot;disable-ifcvt-simple-false&quot;</span>,</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;                                    <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="IfConversion_8cpp.html#a879b1e24c706cfbdf2ef1fb0b8bc2aaa">DisableTriangle</a>(<span class="stringliteral">&quot;disable-ifcvt-triangle&quot;</span>,</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;                                     <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="IfConversion_8cpp.html#af926e9c6c3e282daa413734db9c79884">DisableTriangleR</a>(<span class="stringliteral">&quot;disable-ifcvt-triangle-rev&quot;</span>,</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;                                      <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="IfConversion_8cpp.html#acc027d308f8cc078b60fa32d4ae5b53a">DisableTriangleF</a>(<span class="stringliteral">&quot;disable-ifcvt-triangle-false&quot;</span>,</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;                                      <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="IfConversion_8cpp.html#a78b5545131b2bb12db4122d7850a93be">DisableTriangleFR</a>(<span class="stringliteral">&quot;disable-ifcvt-triangle-false-rev&quot;</span>,</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;                                       <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="IfConversion_8cpp.html#a9f604b103ffab0010c68dc73d03c44cf">DisableDiamond</a>(<span class="stringliteral">&quot;disable-ifcvt-diamond&quot;</span>,</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;                                    <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="IfConversion_8cpp.html#a4fb323a363a997ef526aa5404afd1823">IfCvtBranchFold</a>(<span class="stringliteral">&quot;ifcvt-branch-fold&quot;</span>,</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;                                     <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<a class="code" href="IfConversion_8cpp.html#a34a236c308d2fd6fbe05dbb242b87205">STATISTIC</a>(NumSimple,       <span class="stringliteral">&quot;Number of simple if-conversions performed&quot;</span>);</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<a class="code" href="IfConversion_8cpp.html#a34a236c308d2fd6fbe05dbb242b87205">STATISTIC</a>(NumSimpleFalse,  <span class="stringliteral">&quot;Number of simple (F) if-conversions performed&quot;</span>);</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<a class="code" href="IfConversion_8cpp.html#a34a236c308d2fd6fbe05dbb242b87205">STATISTIC</a>(NumTriangle,     <span class="stringliteral">&quot;Number of triangle if-conversions performed&quot;</span>);</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<a class="code" href="IfConversion_8cpp.html#a34a236c308d2fd6fbe05dbb242b87205">STATISTIC</a>(NumTriangleRev,  <span class="stringliteral">&quot;Number of triangle (R) if-conversions performed&quot;</span>);</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<a class="code" href="IfConversion_8cpp.html#a34a236c308d2fd6fbe05dbb242b87205">STATISTIC</a>(NumTriangleFalse,<span class="stringliteral">&quot;Number of triangle (F) if-conversions performed&quot;</span>);</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<a class="code" href="IfConversion_8cpp.html#a34a236c308d2fd6fbe05dbb242b87205">STATISTIC</a>(NumTriangleFRev, <span class="stringliteral">&quot;Number of triangle (F/R) if-conversions performed&quot;</span>);</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<a class="code" href="IfConversion_8cpp.html#a34a236c308d2fd6fbe05dbb242b87205">STATISTIC</a>(NumDiamonds,     <span class="stringliteral">&quot;Number of diamond if-conversions performed&quot;</span>);</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<a class="code" href="IfConversion_8cpp.html#a34a236c308d2fd6fbe05dbb242b87205">STATISTIC</a>(NumIfConvBBs,    <span class="stringliteral">&quot;Number of if-converted blocks&quot;</span>);</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<a class="code" href="IfConversion_8cpp.html#a34a236c308d2fd6fbe05dbb242b87205">STATISTIC</a>(NumDupBBs,       <span class="stringliteral">&quot;Number of duplicated blocks&quot;</span>);</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<a class="code" href="IfConversion_8cpp.html#a34a236c308d2fd6fbe05dbb242b87205">STATISTIC</a>(NumUnpred,       <span class="stringliteral">&quot;Number of true blocks of diamonds unpredicated&quot;</span>);</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="keyword">class </span>IfConverter : <span class="keyword">public</span> <a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a> {</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keyword">enum</span> IfcvtKind {</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;      ICNotClassfied,  <span class="comment">// BB data valid, but not classified.</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;      ICSimpleFalse,   <span class="comment">// Same as ICSimple, but on the false path.</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;      ICSimple,        <span class="comment">// BB is entry of an one split, no rejoin sub-CFG.</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;      ICTriangleFRev,  <span class="comment">// Same as ICTriangleFalse, but false path rev condition.</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;      ICTriangleRev,   <span class="comment">// Same as ICTriangle, but true path rev condition.</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;      ICTriangleFalse, <span class="comment">// Same as ICTriangle, but on the false path.</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      ICTriangle,      <span class="comment">// BB is entry of a triangle sub-CFG.</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;      ICDiamond        <span class="comment">// BB is entry of a diamond sub-CFG.</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    };</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">    /// BBInfo - One per MachineBasicBlock, this is used to cache the result</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">    /// if-conversion feasibility analysis. This includes results from</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">    /// TargetInstrInfo::AnalyzeBranch() (i.e. TBB, FBB, and Cond), and its</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">    /// classification, and common tail block of its successors (if it&#39;s a</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">    /// diamond shape), its size, whether it&#39;s predicable, and whether any</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">    /// instruction can clobber the &#39;would-be&#39; predicate.</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">    ///</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">    /// IsDone          - True if BB is not to be considered for ifcvt.</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">    /// IsBeingAnalyzed - True if BB is currently being analyzed.</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">    /// IsAnalyzed      - True if BB has been analyzed (info is still valid).</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">    /// IsEnqueued      - True if BB has been enqueued to be ifcvt&#39;ed.</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">    /// IsBrAnalyzable  - True if AnalyzeBranch() returns false.</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">    /// HasFallThrough  - True if BB may fallthrough to the following BB.</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">    /// IsUnpredicable  - True if BB is known to be unpredicable.</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">    /// ClobbersPred    - True if BB could modify predicates (e.g. has</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">    ///                   cmp, call, etc.)</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">    /// NonPredSize     - Number of non-predicated instructions.</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">    /// ExtraCost       - Extra cost for multi-cycle instructions.</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">    /// ExtraCost2      - Some instructions are slower when predicated</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">    /// BB              - Corresponding MachineBasicBlock.</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">    /// TrueBB / FalseBB- See AnalyzeBranch().</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">    /// BrCond          - Conditions for end of block conditional branches.</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">    /// Predicate       - Predicate used in the BB.</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment"></span>    <span class="keyword">struct </span>BBInfo {</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      <span class="keywordtype">bool</span> IsDone          : 1;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      <span class="keywordtype">bool</span> IsBeingAnalyzed : 1;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      <span class="keywordtype">bool</span> IsAnalyzed      : 1;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      <span class="keywordtype">bool</span> IsEnqueued      : 1;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;      <span class="keywordtype">bool</span> IsBrAnalyzable  : 1;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      <span class="keywordtype">bool</span> HasFallThrough  : 1;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      <span class="keywordtype">bool</span> IsUnpredicable  : 1;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      <span class="keywordtype">bool</span> CannotBeCopied  : 1;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;      <span class="keywordtype">bool</span> ClobbersPred    : 1;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;      <span class="keywordtype">unsigned</span> NonPredSize;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;      <span class="keywordtype">unsigned</span> ExtraCost;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      <span class="keywordtype">unsigned</span> ExtraCost2;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *TrueBB;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *FalseBB;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand, 4&gt;</a> BrCond;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand, 4&gt;</a> <a class="code" href="namespacellvm_1_1PPC.html#a14028f7fe73a11dabc6583510cc0a355">Predicate</a>;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      BBInfo() : IsDone(<a class="code" href="namespacefalse.html">false</a>), IsBeingAnalyzed(<a class="code" href="namespacefalse.html">false</a>),</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                 IsAnalyzed(<a class="code" href="namespacefalse.html">false</a>), IsEnqueued(<a class="code" href="namespacefalse.html">false</a>), IsBrAnalyzable(<a class="code" href="namespacefalse.html">false</a>),</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                 HasFallThrough(<a class="code" href="namespacefalse.html">false</a>), IsUnpredicable(<a class="code" href="namespacefalse.html">false</a>),</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                 CannotBeCopied(<a class="code" href="namespacefalse.html">false</a>), ClobbersPred(<a class="code" href="namespacefalse.html">false</a>), NonPredSize(0),</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                 ExtraCost(0), ExtraCost2(0), BB(0), TrueBB(0), FalseBB(0) {}</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    };</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">    /// IfcvtToken - Record information about pending if-conversions to attempt:</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">    /// BBI             - Corresponding BBInfo.</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">    /// Kind            - Type of block. See IfcvtKind.</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">    /// NeedSubsumption - True if the to-be-predicated BB has already been</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">    ///                   predicated.</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">    /// NumDups      - Number of instructions that would be duplicated due</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">    ///                   to this if-conversion. (For diamonds, the number of</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">    ///                   identical instructions at the beginnings of both</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">    ///                   paths).</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">    /// NumDups2     - For diamonds, the number of identical instructions</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">    ///                   at the ends of both paths.</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment"></span>    <span class="keyword">struct </span>IfcvtToken {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      BBInfo &amp;BBI;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      IfcvtKind <a class="code" href="namespacellvm_1_1EngineKind.html#a9df47239a42cd9621ac26d9ecbd57441">Kind</a>;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      <span class="keywordtype">bool</span> NeedSubsumption;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      <span class="keywordtype">unsigned</span> NumDups;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      <span class="keywordtype">unsigned</span> NumDups2;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      IfcvtToken(BBInfo &amp;<a class="code" href="Target_2ARM_2README_8txt.html#acdf5bf3bbc10f9331f56441a4d483bb1">b</a>, IfcvtKind k, <span class="keywordtype">bool</span> <a class="code" href="Target_2README_8txt.html#a5a6a05b7d9e9efb3f7b098c20fa0088a">s</a>, <span class="keywordtype">unsigned</span> <a class="code" href="Target_2ARM_2README_8txt.html#a901ce7389ca67dd79b8ab5b53c4a7da8">d</a>, <span class="keywordtype">unsigned</span> d2 = 0)</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        : BBI(b), Kind(k), NeedSubsumption(s), NumDups(d), NumDups2(d2) {}</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    };</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">    /// BBAnalysis - Results of if-conversion feasibility analysis indexed by</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">    /// basic block number.</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment"></span>    std::vector&lt;BBInfo&gt; BBAnalysis;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="classllvm_1_1TargetSchedModel.html">TargetSchedModel</a> SchedModel;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLoweringBase.html">TargetLoweringBase</a> *TLI;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *TRI;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBranchProbabilityInfo.html">MachineBranchProbabilityInfo</a> *MBPI;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> *<a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <a class="code" href="classllvm_1_1LiveRegUnits.html">LiveRegUnits</a> Redefs;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <a class="code" href="classllvm_1_1LiveRegUnits.html">LiveRegUnits</a> DontKill;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordtype">bool</span> PreRegAlloc;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordtype">bool</span> MadeChange;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordtype">int</span> FnNum;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="keyword">public</span>:</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    IfConverter() : <a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a>(ID), FnNum(-1) {</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      <a class="code" href="namespacellvm.html#a26c4d47f02e65dcf05f2018373f310d3">initializeIfConverterPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    }</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const </span>{</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1MachineBranchProbabilityInfo.html">MachineBranchProbabilityInfo</a>&gt;();</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      <a class="code" href="classllvm_1_1MachineFunctionPass.html#aa1eece37d175f86a6f4808c0c167f13b">MachineFunctionPass::getAnalysisUsage</a>(AU);</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    }</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> runOnMachineFunction(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF);</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="keyword">private</span>:</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordtype">bool</span> ReverseBranchCondition(BBInfo &amp;BBI);</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordtype">bool</span> ValidSimple(BBInfo &amp;TrueBBI, <span class="keywordtype">unsigned</span> &amp;Dups,</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                     <span class="keyword">const</span> <a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a> &amp;Prediction) <span class="keyword">const</span>;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordtype">bool</span> ValidTriangle(BBInfo &amp;TrueBBI, BBInfo &amp;FalseBBI,</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                       <span class="keywordtype">bool</span> FalseBranch, <span class="keywordtype">unsigned</span> &amp;Dups,</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                       <span class="keyword">const</span> <a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a> &amp;Prediction) <span class="keyword">const</span>;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordtype">bool</span> ValidDiamond(BBInfo &amp;TrueBBI, BBInfo &amp;FalseBBI,</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                      <span class="keywordtype">unsigned</span> &amp;Dups1, <span class="keywordtype">unsigned</span> &amp;Dups2) <span class="keyword">const</span>;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordtype">void</span> ScanInstructions(BBInfo &amp;BBI);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    BBInfo &amp;AnalyzeBlock(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                         std::vector&lt;IfcvtToken*&gt; &amp;Tokens);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordtype">bool</span> FeasibilityAnalysis(BBInfo &amp;BBI, <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineOperand&gt;</a> &amp;Cond,</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                             <span class="keywordtype">bool</span> isTriangle = <span class="keyword">false</span>, <span class="keywordtype">bool</span> RevBranch = <span class="keyword">false</span>);</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordtype">void</span> AnalyzeBlocks(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, std::vector&lt;IfcvtToken*&gt; &amp;Tokens);</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordtype">void</span> InvalidatePreds(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordtype">void</span> RemoveExtraEdges(BBInfo &amp;BBI);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordtype">bool</span> IfConvertSimple(BBInfo &amp;BBI, IfcvtKind <a class="code" href="namespacellvm_1_1EngineKind.html#a9df47239a42cd9621ac26d9ecbd57441">Kind</a>);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordtype">bool</span> IfConvertTriangle(BBInfo &amp;BBI, IfcvtKind <a class="code" href="namespacellvm_1_1EngineKind.html#a9df47239a42cd9621ac26d9ecbd57441">Kind</a>);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordtype">bool</span> IfConvertDiamond(BBInfo &amp;BBI, IfcvtKind <a class="code" href="namespacellvm_1_1EngineKind.html#a9df47239a42cd9621ac26d9ecbd57441">Kind</a>,</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                          <span class="keywordtype">unsigned</span> NumDups1, <span class="keywordtype">unsigned</span> NumDups2);</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordtype">void</span> PredicateBlock(BBInfo &amp;BBI,</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                        <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> E,</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                        <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineOperand&gt;</a> &amp;Cond,</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                        <a class="code" href="classllvm_1_1SmallSet.html">SmallSet&lt;unsigned, 4&gt;</a> *LaterRedefs = 0);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordtype">void</span> CopyAndPredicateBlock(BBInfo &amp;ToBBI, BBInfo &amp;FromBBI,</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                               <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineOperand&gt;</a> &amp;Cond,</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                               <span class="keywordtype">bool</span> IgnoreBr = <span class="keyword">false</span>);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keywordtype">void</span> MergeBlocks(BBInfo &amp;ToBBI, BBInfo &amp;FromBBI, <span class="keywordtype">bool</span> AddEdges = <span class="keyword">true</span>);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordtype">bool</span> MeetIfcvtSizeLimit(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                            <span class="keywordtype">unsigned</span> Cycle, <span class="keywordtype">unsigned</span> Extra,</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                            <span class="keyword">const</span> <a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a> &amp;Prediction)<span class="keyword"> const </span>{</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      <span class="keywordflow">return</span> Cycle &gt; 0 &amp;&amp; TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a0a6fbb065b05fae5d31013246c4ea8d9">isProfitableToIfCvt</a>(BB, Cycle, Extra,</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                                                   Prediction);</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    }</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordtype">bool</span> MeetIfcvtSizeLimit(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;TBB,</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                            <span class="keywordtype">unsigned</span> TCycle, <span class="keywordtype">unsigned</span> TExtra,</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                            <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;FBB,</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                            <span class="keywordtype">unsigned</span> FCycle, <span class="keywordtype">unsigned</span> FExtra,</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                            <span class="keyword">const</span> <a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a> &amp;Prediction)<span class="keyword"> const </span>{</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      <span class="keywordflow">return</span> TCycle &gt; 0 &amp;&amp; FCycle &gt; 0 &amp;&amp;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a0a6fbb065b05fae5d31013246c4ea8d9">isProfitableToIfCvt</a>(TBB, TCycle, TExtra, FBB, FCycle, FExtra,</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                                 Prediction);</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    }</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="comment">// blockAlwaysFallThrough - Block ends without a terminator.</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordtype">bool</span> blockAlwaysFallThrough(BBInfo &amp;BBI)<span class="keyword"> const </span>{</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      <span class="keywordflow">return</span> BBI.IsBrAnalyzable &amp;&amp; BBI.TrueBB == NULL;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    }</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="comment">// IfcvtTokenCmp - Used to sort if-conversion candidates.</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> IfcvtTokenCmp(IfcvtToken *<a class="code" href="Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, IfcvtToken *C2) {</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      <span class="keywordtype">int</span> Incr1 = (C1-&gt;Kind == ICDiamond)</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        ? -(<span class="keywordtype">int</span>)(C1-&gt;NumDups + C1-&gt;NumDups2) : (<span class="keywordtype">int</span>)C1-&gt;NumDups;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      <span class="keywordtype">int</span> Incr2 = (C2-&gt;Kind == ICDiamond)</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        ? -(<span class="keywordtype">int</span>)(C2-&gt;NumDups + C2-&gt;NumDups2) : (<span class="keywordtype">int</span>)C2-&gt;NumDups;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      <span class="keywordflow">if</span> (Incr1 &gt; Incr2)</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Incr1 == Incr2) {</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="comment">// Favors subsumption.</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="keywordflow">if</span> (C1-&gt;NeedSubsumption == <span class="keyword">false</span> &amp;&amp; C2-&gt;NeedSubsumption == <span class="keyword">true</span>)</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (C1-&gt;NeedSubsumption == C2-&gt;NeedSubsumption) {</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;          <span class="comment">// Favors diamond over triangle, etc.</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;          <span class="keywordflow">if</span> ((<span class="keywordtype">unsigned</span>)C1-&gt;Kind &lt; (unsigned)C2-&gt;Kind)</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (C1-&gt;Kind == C2-&gt;Kind)</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            <span class="keywordflow">return</span> C1-&gt;BBI.BB-&gt;getNumber() &lt; C2-&gt;BBI.BB-&gt;getNumber();</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        }</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      }</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    }</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  };</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">IfConverter::ID</a> = 0;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;}</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div><div class="line"><a name="l00263"></a><span class="lineno"><a class="line" href="namespacellvm.html#ad6820b1346e9140b1b40af95c5ec190a">  263</a></span>&#160;<span class="keywordtype">char</span> &amp;<a class="code" href="namespacellvm.html#ad6820b1346e9140b1b40af95c5ec190a">llvm::IfConverterID</a> = <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">IfConverter::ID</a>;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<a class="code" href="PassSupport_8h.html#aaa970fc931c1c63037a8182e028d04b1">INITIALIZE_PASS_BEGIN</a>(IfConverter, <span class="stringliteral">&quot;if-converter&quot;</span>, <span class="stringliteral">&quot;If Converter&quot;</span>, <span class="keyword">false</span>, <span class="keyword">false</span>)</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1MachineBranchProbabilityInfo.html">MachineBranchProbabilityInfo</a>)</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<a class="code" href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a>(IfConverter, &quot;<a class="code" href="LLParser_8cpp.html#aae58e3df0180401e8f3ab75c18fbc07a">if</a>-converter&quot;, &quot;If <a class="code" href="EarlyIfConversion_8cpp.html#a282d30f7304cc0c9ad4cd81b2ae3e53d">Converter</a>&quot;, <a class="code" href="namespacefalse.html">false</a>, false)</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="keywordtype">bool</span> IfConverter::runOnMachineFunction(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF) {</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  TLI = MF.getTarget().getTargetLowering();</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  TII = MF.getTarget().getInstrInfo();</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  TRI = MF.getTarget().getRegisterInfo();</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  MBPI = &amp;getAnalysis&lt;MachineBranchProbabilityInfo&gt;();</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  MRI = &amp;MF.getRegInfo();</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetSubtargetInfo.html">TargetSubtargetInfo</a> &amp;<a class="code" href="namespacellvm_1_1A64DB.html#a6fce8157775f3ec93f326b52b0f1e0f5a4916e736d6b7cc68359b39d5eb50f6db">ST</a> =</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    MF.getTarget().getSubtarget&lt;<a class="code" href="classllvm_1_1TargetSubtargetInfo.html">TargetSubtargetInfo</a>&gt;();</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  SchedModel.<a class="code" href="classllvm_1_1TargetSchedModel.html#a5419fb52cab4895e3fc6fc9fc5c73f91">init</a>(*ST.<a class="code" href="classllvm_1_1MCSubtargetInfo.html#ab5f9e7f3d7e48089a9132de131d9c151">getSchedModel</a>(), &amp;<a class="code" href="namespacellvm_1_1A64DB.html#a6fce8157775f3ec93f326b52b0f1e0f5a4916e736d6b7cc68359b39d5eb50f6db">ST</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>);</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="keywordflow">if</span> (!TII) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  PreRegAlloc = MRI-&gt;isSSA();</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <span class="keywordtype">bool</span> BFChange = <span class="keyword">false</span>;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="keywordflow">if</span> (!PreRegAlloc) {</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="comment">// Tail merge tend to expose more if-conversion opportunities.</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <a class="code" href="classllvm_1_1BranchFolder.html">BranchFolder</a> BF(<span class="keyword">true</span>, <span class="keyword">false</span>);</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    BFChange = BF.<a class="code" href="classllvm_1_1BranchFolder.html#a79c0c5340d25122d14d264f3281bdfe4">OptimizeFunction</a>(MF, TII,</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                                   MF.getTarget().getRegisterInfo(),</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                                   getAnalysisIfAvailable&lt;MachineModuleInfo&gt;());</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  }</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\nIfcvt: function (&quot;</span> &lt;&lt; ++FnNum &lt;&lt;  <span class="stringliteral">&quot;) \&#39;&quot;</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;               &lt;&lt; MF.getName() &lt;&lt; <span class="stringliteral">&quot;\&#39;&quot;</span>);</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="keywordflow">if</span> (FnNum &lt; <a class="code" href="IfConversion_8cpp.html#a458a8cd09eba3314ad5af0bd4ba14cf6">IfCvtFnStart</a> || (<a class="code" href="IfConversion_8cpp.html#a85b257e1f8f8604483b140e269b6a702">IfCvtFnStop</a> != -1 &amp;&amp; FnNum &gt; <a class="code" href="IfConversion_8cpp.html#a85b257e1f8f8604483b140e269b6a702">IfCvtFnStop</a>)) {</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; skipped\n&quot;</span>);</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  }</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  MF.RenumberBlocks();</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  BBAnalysis.resize(MF.getNumBlockIDs());</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  std::vector&lt;IfcvtToken*&gt; Tokens;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  MadeChange = <span class="keyword">false</span>;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <span class="keywordtype">unsigned</span> NumIfCvts = NumSimple + NumSimpleFalse + NumTriangle +</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    NumTriangleRev + NumTriangleFalse + NumTriangleFRev + NumDiamonds;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="IfConversion_8cpp.html#ab7b1a6b123d9d2cb4e2d23ad9a3aaa98">IfCvtLimit</a> == -1 || (<span class="keywordtype">int</span>)NumIfCvts &lt; <a class="code" href="IfConversion_8cpp.html#ab7b1a6b123d9d2cb4e2d23ad9a3aaa98">IfCvtLimit</a>) {</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="comment">// Do an initial analysis for each basic block and find all the potential</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="comment">// candidates to perform if-conversion.</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordtype">bool</span> Change = <span class="keyword">false</span>;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    AnalyzeBlocks(MF, Tokens);</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordflow">while</span> (!Tokens.empty()) {</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      IfcvtToken *Token = Tokens.back();</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      Tokens.pop_back();</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      BBInfo &amp;BBI = Token-&gt;BBI;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      IfcvtKind <a class="code" href="namespacellvm_1_1EngineKind.html#a9df47239a42cd9621ac26d9ecbd57441">Kind</a> = Token-&gt;Kind;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      <span class="keywordtype">unsigned</span> NumDups = Token-&gt;NumDups;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      <span class="keywordtype">unsigned</span> NumDups2 = Token-&gt;NumDups2;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      <span class="keyword">delete</span> Token;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      <span class="comment">// If the block has been evicted out of the queue or it has already been</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      <span class="comment">// marked dead (due to it being predicated), then skip it.</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      <span class="keywordflow">if</span> (BBI.IsDone)</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        BBI.IsEnqueued = <span class="keyword">false</span>;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      <span class="keywordflow">if</span> (!BBI.IsEnqueued)</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      BBI.IsEnqueued = <span class="keyword">false</span>;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      <span class="keywordtype">bool</span> RetVal = <span class="keyword">false</span>;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      <span class="keywordflow">switch</span> (Kind) {</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      <span class="keywordflow">default</span>: <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unexpected!&quot;</span>);</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      <span class="keywordflow">case</span> ICSimple:</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      <span class="keywordflow">case</span> ICSimpleFalse: {</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <span class="keywordtype">bool</span> isFalse = Kind == ICSimpleFalse;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <span class="keywordflow">if</span> ((isFalse &amp;&amp; <a class="code" href="IfConversion_8cpp.html#a216ab4a5aced8feffb4c9fa452616f78">DisableSimpleF</a>) || (!isFalse &amp;&amp; <a class="code" href="IfConversion_8cpp.html#ab0605726c8a45b165a2a365d801851b9">DisableSimple</a>)) <span class="keywordflow">break</span>;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Ifcvt (Simple&quot;</span> &lt;&lt; (Kind == ICSimpleFalse ?</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                                            <span class="stringliteral">&quot; false&quot;</span> : <span class="stringliteral">&quot;&quot;</span>)</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                     &lt;&lt; <span class="stringliteral">&quot;): BB#&quot;</span> &lt;&lt; BBI.BB-&gt;getNumber() &lt;&lt; <span class="stringliteral">&quot; (&quot;</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                     &lt;&lt; ((Kind == ICSimpleFalse)</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                         ? BBI.FalseBB-&gt;getNumber()</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                         : BBI.TrueBB-&gt;getNumber()) &lt;&lt; <span class="stringliteral">&quot;) &quot;</span>);</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        RetVal = IfConvertSimple(BBI, Kind);</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; (RetVal ? <span class="stringliteral">&quot;succeeded!&quot;</span> : <span class="stringliteral">&quot;failed!&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        <span class="keywordflow">if</span> (RetVal) {</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;          <span class="keywordflow">if</span> (isFalse) ++NumSimpleFalse;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;          <span class="keywordflow">else</span>         ++NumSimple;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        }</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;       <span class="keywordflow">break</span>;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      }</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      <span class="keywordflow">case</span> ICTriangle:</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      <span class="keywordflow">case</span> ICTriangleRev:</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      <span class="keywordflow">case</span> ICTriangleFalse:</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      <span class="keywordflow">case</span> ICTriangleFRev: {</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        <span class="keywordtype">bool</span> isFalse = Kind == ICTriangleFalse;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        <span class="keywordtype">bool</span> isRev   = (Kind == ICTriangleRev || Kind == ICTriangleFRev);</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="IfConversion_8cpp.html#a879b1e24c706cfbdf2ef1fb0b8bc2aaa">DisableTriangle</a> &amp;&amp; !isFalse &amp;&amp; !isRev) <span class="keywordflow">break</span>;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="IfConversion_8cpp.html#af926e9c6c3e282daa413734db9c79884">DisableTriangleR</a> &amp;&amp; !isFalse &amp;&amp; isRev) <span class="keywordflow">break</span>;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="IfConversion_8cpp.html#acc027d308f8cc078b60fa32d4ae5b53a">DisableTriangleF</a> &amp;&amp; isFalse &amp;&amp; !isRev) <span class="keywordflow">break</span>;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="IfConversion_8cpp.html#a78b5545131b2bb12db4122d7850a93be">DisableTriangleFR</a> &amp;&amp; isFalse &amp;&amp; isRev) <span class="keywordflow">break</span>;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Ifcvt (Triangle&quot;</span>);</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <span class="keywordflow">if</span> (isFalse)</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;          <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; false&quot;</span>);</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <span class="keywordflow">if</span> (isRev)</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;          <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; rev&quot;</span>);</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;): BB#&quot;</span> &lt;&lt; BBI.BB-&gt;getNumber() &lt;&lt; <span class="stringliteral">&quot; (T:&quot;</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                     &lt;&lt; BBI.TrueBB-&gt;getNumber() &lt;&lt; <span class="stringliteral">&quot;,F:&quot;</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                     &lt;&lt; BBI.FalseBB-&gt;getNumber() &lt;&lt; <span class="stringliteral">&quot;) &quot;</span>);</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        RetVal = IfConvertTriangle(BBI, Kind);</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; (RetVal ? <span class="stringliteral">&quot;succeeded!&quot;</span> : <span class="stringliteral">&quot;failed!&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        <span class="keywordflow">if</span> (RetVal) {</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;          <span class="keywordflow">if</span> (isFalse) {</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            <span class="keywordflow">if</span> (isRev) ++NumTriangleFRev;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            <span class="keywordflow">else</span>       ++NumTriangleFalse;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;          } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            <span class="keywordflow">if</span> (isRev) ++NumTriangleRev;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            <span class="keywordflow">else</span>       ++NumTriangle;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;          }</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        }</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      }</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      <span class="keywordflow">case</span> ICDiamond: {</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="IfConversion_8cpp.html#a9f604b103ffab0010c68dc73d03c44cf">DisableDiamond</a>) <span class="keywordflow">break</span>;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Ifcvt (Diamond): BB#&quot;</span> &lt;&lt; BBI.BB-&gt;getNumber() &lt;&lt; <span class="stringliteral">&quot; (T:&quot;</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                     &lt;&lt; BBI.TrueBB-&gt;getNumber() &lt;&lt; <span class="stringliteral">&quot;,F:&quot;</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                     &lt;&lt; BBI.FalseBB-&gt;getNumber() &lt;&lt; <span class="stringliteral">&quot;) &quot;</span>);</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        RetVal = IfConvertDiamond(BBI, Kind, NumDups, NumDups2);</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; (RetVal ? <span class="stringliteral">&quot;succeeded!&quot;</span> : <span class="stringliteral">&quot;failed!&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        <span class="keywordflow">if</span> (RetVal) ++NumDiamonds;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      }</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      }</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      Change |= RetVal;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      NumIfCvts = NumSimple + NumSimpleFalse + NumTriangle + NumTriangleRev +</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        NumTriangleFalse + NumTriangleFRev + NumDiamonds;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="IfConversion_8cpp.html#ab7b1a6b123d9d2cb4e2d23ad9a3aaa98">IfCvtLimit</a> != -1 &amp;&amp; (<span class="keywordtype">int</span>)NumIfCvts &gt;= <a class="code" href="IfConversion_8cpp.html#ab7b1a6b123d9d2cb4e2d23ad9a3aaa98">IfCvtLimit</a>)</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    }</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordflow">if</span> (!Change)</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    MadeChange |= Change;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  }</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <span class="comment">// Delete tokens in case of early exit.</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="keywordflow">while</span> (!Tokens.empty()) {</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    IfcvtToken *Token = Tokens.back();</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    Tokens.pop_back();</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keyword">delete</span> Token;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  }</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  Tokens.clear();</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  BBAnalysis.clear();</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="keywordflow">if</span> (MadeChange &amp;&amp; <a class="code" href="IfConversion_8cpp.html#a4fb323a363a997ef526aa5404afd1823">IfCvtBranchFold</a>) {</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <a class="code" href="classllvm_1_1BranchFolder.html">BranchFolder</a> BF(<span class="keyword">false</span>, <span class="keyword">false</span>);</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    BF.<a class="code" href="classllvm_1_1BranchFolder.html#a79c0c5340d25122d14d264f3281bdfe4">OptimizeFunction</a>(MF, TII,</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                        MF.getTarget().getRegisterInfo(),</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                        getAnalysisIfAvailable&lt;MachineModuleInfo&gt;());</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  }</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  MadeChange |= BFChange;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  <span class="keywordflow">return</span> MadeChange;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;}</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment">/// findFalseBlock - BB has a fallthrough. Find its &#39;false&#39; successor given</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment">/// its &#39;true&#39; successor.</span></div><div class="line"><a name="l00433"></a><span class="lineno"><a class="line" href="IfConversion_8cpp.html#ac3ecfd2e4efef37daed6d6fdea800a28">  433</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="IfConversion_8cpp.html#ac3ecfd2e4efef37daed6d6fdea800a28">findFalseBlock</a>(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *BB,</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                                         <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *TrueBB) {</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#aefba5f2af370add1bc8aaceedf7878ef">MachineBasicBlock::succ_iterator</a> SI = BB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6321b189ea8fd5058663f8a87d6c23e9">succ_begin</a>(),</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;         E = BB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3ddd708642d60c1661992ff8ba1b215d">succ_end</a>(); SI != E; ++SI) {</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *SuccBB = *SI;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="keywordflow">if</span> (SuccBB != TrueBB)</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      <span class="keywordflow">return</span> SuccBB;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  }</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;}</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment">/// ReverseBranchCondition - Reverse the condition of the end of the block</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment">/// branch. Swap block&#39;s &#39;true&#39; and &#39;false&#39; successors.</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> IfConverter::ReverseBranchCondition(BBInfo &amp;BBI) {</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> dl;  <span class="comment">// FIXME: this is nowhere</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <span class="keywordflow">if</span> (!TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a051d866f5c8c28d14ebe529a33f5f7b1">ReverseBranchCondition</a>(BBI.BrCond)) {</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#abce62a681f245fc78059890e4ca83210">RemoveBranch</a>(*BBI.BB);</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a8afe41bda071ea77c815f7bd436fdd82">InsertBranch</a>(*BBI.BB, BBI.FalseBB, BBI.TrueBB, BBI.BrCond, dl);</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(BBI.TrueBB, BBI.FalseBB);</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  }</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;}</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="comment">/// getNextBlock - Returns the next block in the function blocks ordering. If</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="comment">/// it is the end, returns NULL.</span></div><div class="line"><a name="l00459"></a><span class="lineno"><a class="line" href="IfConversion_8cpp.html#a21bc73621009f76516081c8b82f16d66">  459</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="IfConversion_8cpp.html#a21bc73621009f76516081c8b82f16d66">getNextBlock</a>(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *BB) {</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">MachineFunction::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">MachineFunction::iterator</a> E = BB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#af2e482ff2a9253ec6bc2285491496bd6">getParent</a>()-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#a9d017af749f76484cb9aec9ff6e4330c">end</a>();</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  <span class="keywordflow">if</span> (++I == E)</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;}</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment">/// ValidSimple - Returns true if the &#39;true&#39; block (along with its</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment">/// predecessor) forms a valid simple shape for ifcvt. It also returns the</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment">/// number of instructions that the ifcvt would need to duplicate if performed</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="comment">/// in Dups.</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> IfConverter::ValidSimple(BBInfo &amp;TrueBBI, <span class="keywordtype">unsigned</span> &amp;Dups,</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                              <span class="keyword">const</span> <a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a> &amp;Prediction)<span class="keyword"> const </span>{</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  Dups = 0;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <span class="keywordflow">if</span> (TrueBBI.IsBeingAnalyzed || TrueBBI.IsDone)</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <span class="keywordflow">if</span> (TrueBBI.IsBrAnalyzable)</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  <span class="keywordflow">if</span> (TrueBBI.BB-&gt;pred_size() &gt; 1) {</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="keywordflow">if</span> (TrueBBI.CannotBeCopied ||</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        !TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a73d7770e810be0d9a7dc9566fbb50a4e">isProfitableToDupForIfCvt</a>(*TrueBBI.BB, TrueBBI.NonPredSize,</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                                        Prediction))</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    Dups = TrueBBI.NonPredSize;</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  }</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;}</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="comment">/// ValidTriangle - Returns true if the &#39;true&#39; and &#39;false&#39; blocks (along</span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment">/// with their common predecessor) forms a valid triangle shape for ifcvt.</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="comment">/// If &#39;FalseBranch&#39; is true, it checks if &#39;true&#39; block&#39;s false branch</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="comment">/// branches to the &#39;false&#39; block rather than the other way around. It also</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="comment">/// returns the number of instructions that the ifcvt would need to duplicate</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment">/// if performed in &#39;Dups&#39;.</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> IfConverter::ValidTriangle(BBInfo &amp;TrueBBI, BBInfo &amp;FalseBBI,</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                                <span class="keywordtype">bool</span> FalseBranch, <span class="keywordtype">unsigned</span> &amp;Dups,</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                                <span class="keyword">const</span> <a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a> &amp;Prediction)<span class="keyword"> const </span>{</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  Dups = 0;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <span class="keywordflow">if</span> (TrueBBI.IsBeingAnalyzed || TrueBBI.IsDone)</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <span class="keywordflow">if</span> (TrueBBI.BB-&gt;pred_size() &gt; 1) {</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="keywordflow">if</span> (TrueBBI.CannotBeCopied)</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keywordtype">unsigned</span> Size = TrueBBI.NonPredSize;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="keywordflow">if</span> (TrueBBI.IsBrAnalyzable) {</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      <span class="keywordflow">if</span> (TrueBBI.TrueBB &amp;&amp; TrueBBI.BrCond.empty())</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        <span class="comment">// Ends with an unconditional branch. It will be removed.</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        --Size;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *FExit = FalseBranch</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;          ? TrueBBI.TrueBB : TrueBBI.FalseBB;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <span class="keywordflow">if</span> (FExit)</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;          <span class="comment">// Require a conditional branch</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;          ++Size;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      }</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    }</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="keywordflow">if</span> (!TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a73d7770e810be0d9a7dc9566fbb50a4e">isProfitableToDupForIfCvt</a>(*TrueBBI.BB, Size, Prediction))</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    Dups = Size;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  }</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *TExit = FalseBranch ? TrueBBI.FalseBB : TrueBBI.TrueBB;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  <span class="keywordflow">if</span> (!TExit &amp;&amp; blockAlwaysFallThrough(TrueBBI)) {</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <a class="code" href="classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">MachineFunction::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = TrueBBI.BB;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="keywordflow">if</span> (++I == TrueBBI.BB-&gt;getParent()-&gt;end())</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    TExit = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  }</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  <span class="keywordflow">return</span> TExit &amp;&amp; TExit == FalseBBI.BB;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;}</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment">/// ValidDiamond - Returns true if the &#39;true&#39; and &#39;false&#39; blocks (along</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment">/// with their common predecessor) forms a valid diamond shape for ifcvt.</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> IfConverter::ValidDiamond(BBInfo &amp;TrueBBI, BBInfo &amp;FalseBBI,</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                               <span class="keywordtype">unsigned</span> &amp;Dups1, <span class="keywordtype">unsigned</span> &amp;Dups2)<span class="keyword"> const </span>{</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  Dups1 = Dups2 = 0;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  <span class="keywordflow">if</span> (TrueBBI.IsBeingAnalyzed || TrueBBI.IsDone ||</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;      FalseBBI.IsBeingAnalyzed || FalseBBI.IsDone)</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *TT = TrueBBI.TrueBB;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *FT = FalseBBI.TrueBB;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <span class="keywordflow">if</span> (!TT &amp;&amp; blockAlwaysFallThrough(TrueBBI))</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    TT = <a class="code" href="IfConversion_8cpp.html#a21bc73621009f76516081c8b82f16d66">getNextBlock</a>(TrueBBI.BB);</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  <span class="keywordflow">if</span> (!FT &amp;&amp; blockAlwaysFallThrough(FalseBBI))</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    FT = <a class="code" href="IfConversion_8cpp.html#a21bc73621009f76516081c8b82f16d66">getNextBlock</a>(FalseBBI.BB);</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  <span class="keywordflow">if</span> (TT != FT)</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <span class="keywordflow">if</span> (TT == NULL &amp;&amp; (TrueBBI.IsBrAnalyzable || FalseBBI.IsBrAnalyzable))</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  <span class="keywordflow">if</span>  (TrueBBI.BB-&gt;pred_size() &gt; 1 || FalseBBI.BB-&gt;pred_size() &gt; 1)</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <span class="comment">// FIXME: Allow true block to have an early exit?</span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  <span class="keywordflow">if</span> (TrueBBI.FalseBB || FalseBBI.FalseBB ||</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      (TrueBBI.ClobbersPred &amp;&amp; FalseBBI.ClobbersPred))</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <span class="comment">// Count duplicate instructions at the beginning of the true and false blocks.</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> TIB = TrueBBI.BB-&gt;begin();</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> FIB = FalseBBI.BB-&gt;begin();</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> TIE = TrueBBI.BB-&gt;end();</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> FIE = FalseBBI.BB-&gt;end();</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  <span class="keywordflow">while</span> (TIB != TIE &amp;&amp; FIB != FIE) {</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="comment">// Skip dbg_value instructions. These do not count.</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="keywordflow">if</span> (TIB-&gt;isDebugValue()) {</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      <span class="keywordflow">while</span> (TIB != TIE &amp;&amp; TIB-&gt;isDebugValue())</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        ++TIB;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;      <span class="keywordflow">if</span> (TIB == TIE)</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    }</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="keywordflow">if</span> (FIB-&gt;isDebugValue()) {</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      <span class="keywordflow">while</span> (FIB != FIE &amp;&amp; FIB-&gt;isDebugValue())</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        ++FIB;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;      <span class="keywordflow">if</span> (FIB == FIE)</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    }</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="keywordflow">if</span> (!TIB-&gt;isIdenticalTo(FIB))</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    ++Dups1;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    ++TIB;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    ++FIB;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  }</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  <span class="comment">// Now, in preparation for counting duplicate instructions at the ends of the</span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  <span class="comment">// blocks, move the end iterators up past any branch instructions.</span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="keywordflow">while</span> (TIE != TIB) {</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    --TIE;</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="keywordflow">if</span> (!TIE-&gt;isBranch())</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  }</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  <span class="keywordflow">while</span> (FIE != FIB) {</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    --FIE;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="keywordflow">if</span> (!FIE-&gt;isBranch())</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  }</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <span class="comment">// If Dups1 includes all of a block, then don&#39;t count duplicate</span></div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  <span class="comment">// instructions at the end of the blocks.</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <span class="keywordflow">if</span> (TIB == TIE || FIB == FIE)</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  <span class="comment">// Count duplicate instructions at the ends of the blocks.</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <span class="keywordflow">while</span> (TIE != TIB &amp;&amp; FIE != FIB) {</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="comment">// Skip dbg_value instructions. These do not count.</span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="keywordflow">if</span> (TIE-&gt;isDebugValue()) {</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;      <span class="keywordflow">while</span> (TIE != TIB &amp;&amp; TIE-&gt;isDebugValue())</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        --TIE;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;      <span class="keywordflow">if</span> (TIE == TIB)</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    }</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="keywordflow">if</span> (FIE-&gt;isDebugValue()) {</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      <span class="keywordflow">while</span> (FIE != FIB &amp;&amp; FIE-&gt;isDebugValue())</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        --FIE;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      <span class="keywordflow">if</span> (FIE == FIB)</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    }</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <span class="keywordflow">if</span> (!TIE-&gt;isIdenticalTo(FIE))</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    ++Dups2;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    --TIE;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    --FIE;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  }</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;}</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="comment">/// ScanInstructions - Scan all the instructions in the block to determine if</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="comment">/// the block is predicable. In most cases, that means all the instructions</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="comment">/// in the block are isPredicable(). Also checks if the block contains any</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="comment">/// instruction which can clobber a predicate (e.g. condition code register).</span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="comment">/// If so, the block is not predicable unless it&#39;s the last instruction.</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> IfConverter::ScanInstructions(BBInfo &amp;BBI) {</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  <span class="keywordflow">if</span> (BBI.IsDone)</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  <span class="keywordtype">bool</span> AlreadyPredicated = !BBI.Predicate.empty();</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <span class="comment">// First analyze the end of BB branches.</span></div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  BBI.TrueBB = BBI.FalseBB = NULL;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  BBI.BrCond.clear();</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  BBI.IsBrAnalyzable =</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    !TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a641441a84a88e01223f3c091dfb50694">AnalyzeBranch</a>(*BBI.BB, BBI.TrueBB, BBI.FalseBB, BBI.BrCond);</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  BBI.HasFallThrough = BBI.IsBrAnalyzable &amp;&amp; BBI.FalseBB == NULL;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  <span class="keywordflow">if</span> (BBI.BrCond.size()) {</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <span class="comment">// No false branch. This BB must end with a conditional branch and a</span></div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="comment">// fallthrough.</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <span class="keywordflow">if</span> (!BBI.FalseBB)</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;      BBI.FalseBB = <a class="code" href="IfConversion_8cpp.html#ac3ecfd2e4efef37daed6d6fdea800a28">findFalseBlock</a>(BBI.BB, BBI.TrueBB);</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <span class="keywordflow">if</span> (!BBI.FalseBB) {</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;      <span class="comment">// Malformed bcc? True and false blocks are the same?</span></div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;      BBI.IsUnpredicable = <span class="keyword">true</span>;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    }</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  }</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  <span class="comment">// Then scan all the instructions.</span></div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  BBI.NonPredSize = 0;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  BBI.ExtraCost = 0;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  BBI.ExtraCost2 = 0;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  BBI.ClobbersPred = <span class="keyword">false</span>;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = BBI.BB-&gt;begin(), E = BBI.BB-&gt;end();</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isDebugValue())</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isNotDuplicable())</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;      BBI.CannotBeCopied = <span class="keyword">true</span>;</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <span class="keywordtype">bool</span> isPredicated = TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a2a69dd402cbc7f6282c93c32161395bc">isPredicated</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <span class="keywordtype">bool</span> isCondBr = BBI.IsBrAnalyzable &amp;&amp; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isConditionalBranch();</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="comment">// A conditional branch is not predicable, but it may be eliminated.</span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="keywordflow">if</span> (isCondBr)</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <span class="keywordflow">if</span> (!isPredicated) {</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;      BBI.NonPredSize++;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;      <span class="keywordtype">unsigned</span> ExtraPredCost = TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a51787750432fe6e9d30e82fc16f81980">getPredicationCost</a>(&amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;      <span class="keywordtype">unsigned</span> NumCycles = SchedModel.<a class="code" href="classllvm_1_1TargetSchedModel.html#a16d6c2f29862a9d10dc7dc4540e9d04f">computeInstrLatency</a>(&amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="keyword">false</span>);</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;      <span class="keywordflow">if</span> (NumCycles &gt; 1)</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        BBI.ExtraCost += NumCycles-1;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;      BBI.ExtraCost2 += ExtraPredCost;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!AlreadyPredicated) {</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;      <span class="comment">// FIXME: This instruction is already predicated before the</span></div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;      <span class="comment">// if-conversion pass. It&#39;s probably something like a conditional move.</span></div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;      <span class="comment">// Mark this block unpredicable for now.</span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;      BBI.IsUnpredicable = <span class="keyword">true</span>;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    }</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="keywordflow">if</span> (BBI.ClobbersPred &amp;&amp; !isPredicated) {</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;      <span class="comment">// Predicate modification instruction should end the block (except for</span></div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;      <span class="comment">// already predicated instructions and end of block branches).</span></div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;      <span class="comment">// Predicate may have been modified, the subsequent (currently)</span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;      <span class="comment">// unpredicated instructions cannot be correctly predicated.</span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;      BBI.IsUnpredicable = <span class="keyword">true</span>;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    }</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <span class="comment">// FIXME: Make use of PredDefs? e.g. ADDC, SUBC sets predicates but are</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <span class="comment">// still potentially predicable.</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    std::vector&lt;MachineOperand&gt; PredDefs;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <span class="keywordflow">if</span> (TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a6d3a9496095a2fe0350c9b5009857166">DefinesPredicate</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, PredDefs))</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;      BBI.ClobbersPred = <span class="keyword">true</span>;</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <a class="code" href="LLParser_8cpp.html#aae58e3df0180401e8f3ab75c18fbc07a">if</a> (!TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a19bb501f3f8e5b43549b3aa668ee0780">isPredicable</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      BBI.IsUnpredicable = <span class="keyword">true</span>;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    }</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  }</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;}</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;<span class="comment">/// FeasibilityAnalysis - Determine if the block is a suitable candidate to be</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="comment">/// predicated by the specified predicate.</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> IfConverter::FeasibilityAnalysis(BBInfo &amp;BBI,</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;                                      <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineOperand&gt;</a> &amp;Pred,</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;                                      <span class="keywordtype">bool</span> isTriangle, <span class="keywordtype">bool</span> RevBranch) {</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <span class="comment">// If the block is dead or unpredicable, then it cannot be predicated.</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <span class="keywordflow">if</span> (BBI.IsDone || BBI.IsUnpredicable)</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  <span class="comment">// If it is already predicated, check if the new predicate subsumes</span></div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  <span class="comment">// its predicate.</span></div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  <span class="keywordflow">if</span> (BBI.Predicate.size() &amp;&amp; !TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#aa8ff81157d66b82bc2c7bf15e647015f">SubsumesPredicate</a>(Pred, BBI.Predicate))</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  <span class="keywordflow">if</span> (BBI.BrCond.size()) {</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="keywordflow">if</span> (!isTriangle)</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <span class="comment">// Test predicate subsumption.</span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand, 4&gt;</a> RevPred(Pred.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), Pred.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>());</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand, 4&gt;</a> Cond(BBI.BrCond.begin(), BBI.BrCond.end());</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="keywordflow">if</span> (RevBranch) {</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;      <span class="keywordflow">if</span> (TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a051d866f5c8c28d14ebe529a33f5f7b1">ReverseBranchCondition</a>(Cond))</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    }</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="keywordflow">if</span> (TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a051d866f5c8c28d14ebe529a33f5f7b1">ReverseBranchCondition</a>(RevPred) ||</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        !TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#aa8ff81157d66b82bc2c7bf15e647015f">SubsumesPredicate</a>(Cond, RevPred))</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  }</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;}</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment">/// AnalyzeBlock - Analyze the structure of the sub-CFG starting from</span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment">/// the specified block. Record its successors and whether it looks like an</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="comment">/// if-conversion candidate.</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="comment"></span>IfConverter::BBInfo &amp;IfConverter::AnalyzeBlock(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *BB,</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                                             std::vector&lt;IfcvtToken*&gt; &amp;Tokens) {</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  BBInfo &amp;BBI = BBAnalysis[BB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>()];</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  <span class="keywordflow">if</span> (BBI.IsAnalyzed || BBI.IsBeingAnalyzed)</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    <span class="keywordflow">return</span> BBI;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;  BBI.BB = <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  BBI.IsBeingAnalyzed = <span class="keyword">true</span>;</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  ScanInstructions(BBI);</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  <span class="comment">// Unanalyzable or ends with fallthrough or unconditional branch, or if is not</span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;  <span class="comment">// considered for ifcvt anymore.</span></div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  <span class="keywordflow">if</span> (!BBI.IsBrAnalyzable || BBI.BrCond.empty() || BBI.IsDone) {</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    BBI.IsBeingAnalyzed = <span class="keyword">false</span>;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    BBI.IsAnalyzed = <span class="keyword">true</span>;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <span class="keywordflow">return</span> BBI;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  }</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;  <span class="comment">// Do not ifcvt if either path is a back edge to the entry block.</span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  <span class="keywordflow">if</span> (BBI.TrueBB == BB || BBI.FalseBB == BB) {</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    BBI.IsBeingAnalyzed = <span class="keyword">false</span>;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    BBI.IsAnalyzed = <span class="keyword">true</span>;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <span class="keywordflow">return</span> BBI;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  }</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  <span class="comment">// Do not ifcvt if true and false fallthrough blocks are the same.</span></div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  <span class="keywordflow">if</span> (!BBI.FalseBB) {</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    BBI.IsBeingAnalyzed = <span class="keyword">false</span>;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    BBI.IsAnalyzed = <span class="keyword">true</span>;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <span class="keywordflow">return</span> BBI;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  }</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  BBInfo &amp;TrueBBI  = AnalyzeBlock(BBI.TrueBB, Tokens);</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  BBInfo &amp;FalseBBI = AnalyzeBlock(BBI.FalseBB, Tokens);</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  <span class="keywordflow">if</span> (TrueBBI.IsDone &amp;&amp; FalseBBI.IsDone) {</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    BBI.IsBeingAnalyzed = <span class="keyword">false</span>;</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    BBI.IsAnalyzed = <span class="keyword">true</span>;</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <span class="keywordflow">return</span> BBI;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  }</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand, 4&gt;</a> RevCond(BBI.BrCond.begin(), BBI.BrCond.end());</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  <span class="keywordtype">bool</span> CanRevCond = !TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a051d866f5c8c28d14ebe529a33f5f7b1">ReverseBranchCondition</a>(RevCond);</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  <span class="keywordtype">unsigned</span> Dups = 0;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  <span class="keywordtype">unsigned</span> Dups2 = 0;</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;  <span class="keywordtype">bool</span> TNeedSub = !TrueBBI.Predicate.empty();</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  <span class="keywordtype">bool</span> FNeedSub = !FalseBBI.Predicate.empty();</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;  <span class="keywordtype">bool</span> Enqueued = <span class="keyword">false</span>;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  <a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a> Prediction = MBPI-&gt;<a class="code" href="classllvm_1_1MachineBranchProbabilityInfo.html#a71021014177975263135fe6016076345">getEdgeProbability</a>(BB, TrueBBI.BB);</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  <span class="keywordflow">if</span> (CanRevCond &amp;&amp; ValidDiamond(TrueBBI, FalseBBI, Dups, Dups2) &amp;&amp;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;      MeetIfcvtSizeLimit(*TrueBBI.BB, (TrueBBI.NonPredSize - (Dups + Dups2) +</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;                                       TrueBBI.ExtraCost), TrueBBI.ExtraCost2,</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;                         *FalseBBI.BB, (FalseBBI.NonPredSize - (Dups + Dups2) +</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;                                        FalseBBI.ExtraCost),FalseBBI.ExtraCost2,</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;                         Prediction) &amp;&amp;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;      FeasibilityAnalysis(TrueBBI, BBI.BrCond) &amp;&amp;</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;      FeasibilityAnalysis(FalseBBI, RevCond)) {</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <span class="comment">// Diamond:</span></div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <span class="comment">//   EBB</span></div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    <span class="comment">//   / \_</span></div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <span class="comment">//  |   |</span></div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <span class="comment">// TBB FBB</span></div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <span class="comment">//   \ /</span></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <span class="comment">//  TailBB</span></div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <span class="comment">// Note TailBB can be empty.</span></div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    Tokens.push_back(<span class="keyword">new</span> IfcvtToken(BBI, ICDiamond, TNeedSub|FNeedSub, Dups,</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;                                    Dups2));</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    Enqueued = <span class="keyword">true</span>;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  }</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  <span class="keywordflow">if</span> (ValidTriangle(TrueBBI, FalseBBI, <span class="keyword">false</span>, Dups, Prediction) &amp;&amp;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;      MeetIfcvtSizeLimit(*TrueBBI.BB, TrueBBI.NonPredSize + TrueBBI.ExtraCost,</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;                         TrueBBI.ExtraCost2, Prediction) &amp;&amp;</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;      FeasibilityAnalysis(TrueBBI, BBI.BrCond, <span class="keyword">true</span>)) {</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <span class="comment">// Triangle:</span></div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <span class="comment">//   EBB</span></div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    <span class="comment">//   | \_</span></div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <span class="comment">//   |  |</span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <span class="comment">//   | TBB</span></div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="comment">//   |  /</span></div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    <span class="comment">//   FBB</span></div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    Tokens.push_back(<span class="keyword">new</span> IfcvtToken(BBI, ICTriangle, TNeedSub, Dups));</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    Enqueued = <span class="keyword">true</span>;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  }</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  <span class="keywordflow">if</span> (ValidTriangle(TrueBBI, FalseBBI, <span class="keyword">true</span>, Dups, Prediction) &amp;&amp;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;      MeetIfcvtSizeLimit(*TrueBBI.BB, TrueBBI.NonPredSize + TrueBBI.ExtraCost,</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;                         TrueBBI.ExtraCost2, Prediction) &amp;&amp;</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;      FeasibilityAnalysis(TrueBBI, BBI.BrCond, <span class="keyword">true</span>, <span class="keyword">true</span>)) {</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    Tokens.push_back(<span class="keyword">new</span> IfcvtToken(BBI, ICTriangleRev, TNeedSub, Dups));</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    Enqueued = <span class="keyword">true</span>;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  }</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  <span class="keywordflow">if</span> (ValidSimple(TrueBBI, Dups, Prediction) &amp;&amp;</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;      MeetIfcvtSizeLimit(*TrueBBI.BB, TrueBBI.NonPredSize + TrueBBI.ExtraCost,</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;                         TrueBBI.ExtraCost2, Prediction) &amp;&amp;</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;      FeasibilityAnalysis(TrueBBI, BBI.BrCond)) {</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <span class="comment">// Simple (split, no rejoin):</span></div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <span class="comment">//   EBB</span></div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <span class="comment">//   | \_</span></div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <span class="comment">//   |  |</span></div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    <span class="comment">//   | TBB---&gt; exit</span></div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    <span class="comment">//   |</span></div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    <span class="comment">//   FBB</span></div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    Tokens.push_back(<span class="keyword">new</span> IfcvtToken(BBI, ICSimple, TNeedSub, Dups));</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    Enqueued = <span class="keyword">true</span>;</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  }</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  <span class="keywordflow">if</span> (CanRevCond) {</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    <span class="comment">// Try the other path...</span></div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    <span class="keywordflow">if</span> (ValidTriangle(FalseBBI, TrueBBI, <span class="keyword">false</span>, Dups,</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;                      Prediction.<a class="code" href="classllvm_1_1BranchProbability.html#abdacde00feddf9907be65c48669c98e6">getCompl</a>()) &amp;&amp;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;        MeetIfcvtSizeLimit(*FalseBBI.BB,</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;                           FalseBBI.NonPredSize + FalseBBI.ExtraCost,</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;                           FalseBBI.ExtraCost2, Prediction.<a class="code" href="classllvm_1_1BranchProbability.html#abdacde00feddf9907be65c48669c98e6">getCompl</a>()) &amp;&amp;</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;        FeasibilityAnalysis(FalseBBI, RevCond, <span class="keyword">true</span>)) {</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;      Tokens.push_back(<span class="keyword">new</span> IfcvtToken(BBI, ICTriangleFalse, FNeedSub, Dups));</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;      Enqueued = <span class="keyword">true</span>;</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    }</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    <span class="keywordflow">if</span> (ValidTriangle(FalseBBI, TrueBBI, <span class="keyword">true</span>, Dups,</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;                      Prediction.<a class="code" href="classllvm_1_1BranchProbability.html#abdacde00feddf9907be65c48669c98e6">getCompl</a>()) &amp;&amp;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        MeetIfcvtSizeLimit(*FalseBBI.BB,</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;                           FalseBBI.NonPredSize + FalseBBI.ExtraCost,</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;                           FalseBBI.ExtraCost2, Prediction.<a class="code" href="classllvm_1_1BranchProbability.html#abdacde00feddf9907be65c48669c98e6">getCompl</a>()) &amp;&amp;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        FeasibilityAnalysis(FalseBBI, RevCond, <span class="keyword">true</span>, <span class="keyword">true</span>)) {</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;      Tokens.push_back(<span class="keyword">new</span> IfcvtToken(BBI, ICTriangleFRev, FNeedSub, Dups));</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;      Enqueued = <span class="keyword">true</span>;</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    }</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <span class="keywordflow">if</span> (ValidSimple(FalseBBI, Dups, Prediction.<a class="code" href="classllvm_1_1BranchProbability.html#abdacde00feddf9907be65c48669c98e6">getCompl</a>()) &amp;&amp;</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;        MeetIfcvtSizeLimit(*FalseBBI.BB,</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;                           FalseBBI.NonPredSize + FalseBBI.ExtraCost,</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;                           FalseBBI.ExtraCost2, Prediction.<a class="code" href="classllvm_1_1BranchProbability.html#abdacde00feddf9907be65c48669c98e6">getCompl</a>()) &amp;&amp;</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        FeasibilityAnalysis(FalseBBI, RevCond)) {</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;      Tokens.push_back(<span class="keyword">new</span> IfcvtToken(BBI, ICSimpleFalse, FNeedSub, Dups));</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      Enqueued = <span class="keyword">true</span>;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    }</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  }</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  BBI.IsEnqueued = Enqueued;</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;  BBI.IsBeingAnalyzed = <span class="keyword">false</span>;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  BBI.IsAnalyzed = <span class="keyword">true</span>;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  <span class="keywordflow">return</span> BBI;</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;}</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;<span class="comment">/// AnalyzeBlocks - Analyze all blocks and find entries for all if-conversion</span></div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;<span class="comment">/// candidates.</span></div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> IfConverter::AnalyzeBlocks(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF,</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                                std::vector&lt;IfcvtToken*&gt; &amp;Tokens) {</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">MachineFunction::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ab0789854909cf47f640a85fa2bac29c7">begin</a>(), E = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a9d017af749f76484cb9aec9ff6e4330c">end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *BB = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    AnalyzeBlock(BB, Tokens);</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  }</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;  <span class="comment">// Sort to favor more complex ifcvt scheme.</span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;  std::stable_sort(Tokens.begin(), Tokens.end(), IfcvtTokenCmp);</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;}</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;<span class="comment">/// canFallThroughTo - Returns true either if ToBB is the next block after BB or</span></div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;<span class="comment">/// that all the intervening blocks are empty (given BB can fall through to its</span></div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;<span class="comment">/// next block).</span></div><div class="line"><a name="l00922"></a><span class="lineno"><a class="line" href="IfConversion_8cpp.html#a16f61dfadfaed6ae1a56320217096bd2">  922</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="IfConversion_8cpp.html#a16f61dfadfaed6ae1a56320217096bd2">canFallThroughTo</a>(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *BB, <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *ToBB) {</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">MachineFunction::iterator</a> PI = <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>;</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">MachineFunction::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="namespacellvm.html#aa1704159f75e6eacd595962ea6d93ffe">llvm::next</a>(PI);</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">MachineFunction::iterator</a> TI = ToBB;</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">MachineFunction::iterator</a> E = BB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#af2e482ff2a9253ec6bc2285491496bd6">getParent</a>()-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#a9d017af749f76484cb9aec9ff6e4330c">end</a>();</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  <span class="keywordflow">while</span> (I != TI) {</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    <span class="comment">// Check isSuccessor to avoid case where the next block is empty, but</span></div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    <span class="comment">// it&#39;s not a successor.</span></div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    <span class="keywordflow">if</span> (I == E || !I-&gt;empty() || !PI-&gt;isSuccessor(I))</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    PI = I++;</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;  }</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;}</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;<span class="comment">/// InvalidatePreds - Invalidate predecessor BB info so it would be re-analyzed</span></div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;<span class="comment">/// to determine if it can be if-converted. If predecessor is already enqueued,</span></div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;<span class="comment">/// dequeue it!</span></div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> IfConverter::InvalidatePreds(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *BB) {</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7e7a1a247b7725a24fe19a91f90782cc">MachineBasicBlock::pred_iterator</a> PI = BB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab644fcf07a4c2708333cf66276282357">pred_begin</a>(),</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;         E = BB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a0359a738e0412c5a7ea55d61175e0661">pred_end</a>(); PI != E; ++PI) {</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    BBInfo &amp;PBBI = BBAnalysis[(*PI)-&gt;getNumber()];</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    <span class="keywordflow">if</span> (PBBI.IsDone || PBBI.BB == BB)</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    PBBI.IsAnalyzed = <span class="keyword">false</span>;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    PBBI.IsEnqueued = <span class="keyword">false</span>;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;  }</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;}</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;<span class="comment">/// InsertUncondBranch - Inserts an unconditional branch from BB to ToBB.</span></div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00953"></a><span class="lineno"><a class="line" href="IfConversion_8cpp.html#aa638e3e05e566d44b8ea38db5ea7535c">  953</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="IfConversion_8cpp.html#aa638e3e05e566d44b8ea38db5ea7535c">InsertUncondBranch</a>(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *BB, <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *ToBB,</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;                               <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> *TII) {</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> dl;  <span class="comment">// FIXME: this is nowhere</span></div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand, 0&gt;</a> NoCond;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;  TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a8afe41bda071ea77c815f7bd436fdd82">InsertBranch</a>(*BB, ToBB, NULL, NoCond, dl);</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;}</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="comment">/// RemoveExtraEdges - Remove true / false edges if either / both are no longer</span></div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;<span class="comment">/// successors.</span></div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> IfConverter::RemoveExtraEdges(BBInfo &amp;BBI) {</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *TBB = NULL, *FBB = NULL;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand, 4&gt;</a> Cond;</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;  <span class="keywordflow">if</span> (!TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a641441a84a88e01223f3c091dfb50694">AnalyzeBranch</a>(*BBI.BB, TBB, FBB, Cond))</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    BBI.BB-&gt;CorrectExtraCFGEdges(TBB, FBB, !Cond.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>());</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;}</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;<span class="comment">/// Behaves like LiveRegUnits::StepForward() but also adds implicit uses to all</span></div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;<span class="comment">/// values defined in MI which are not live/used by MI.</span></div><div class="line"><a name="l00971"></a><span class="lineno"><a class="line" href="IfConversion_8cpp.html#a4f907acc755e76ff7d23b5ac5a45ea0f">  971</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="IfConversion_8cpp.html#a4f907acc755e76ff7d23b5ac5a45ea0f">UpdatePredRedefs</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>, <a class="code" href="classllvm_1_1LiveRegUnits.html">LiveRegUnits</a> &amp;Redefs,</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;                             <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *TRI) {</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ConstMIBundleOperands.html">ConstMIBundleOperands</a> Ops(MI); Ops.<a class="code" href="classllvm_1_1MachineOperandIteratorBase.html#af3802cbef7a57e8de316fe13fbed8e67">isValid</a>(); ++Ops) {</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    <span class="keywordflow">if</span> (!Ops-&gt;isReg() || !Ops-&gt;isKill())</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = Ops-&gt;getReg();</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <span class="keywordflow">if</span> (Reg == 0)</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    Redefs.<a class="code" href="classllvm_1_1LiveRegUnits.html#a1419cff2c2e4f3249f5d6b659225588a">removeReg</a>(Reg, *TRI);</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;  }</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MIBundleOperands.html">MIBundleOperands</a> Ops(MI); Ops.<a class="code" href="classllvm_1_1MachineOperandIteratorBase.html#af3802cbef7a57e8de316fe13fbed8e67">isValid</a>(); ++Ops) {</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <span class="keywordflow">if</span> (!Ops-&gt;isReg() || !Ops-&gt;isDef())</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = Ops-&gt;getReg();</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    <span class="keywordflow">if</span> (Reg == 0 || Redefs.<a class="code" href="classllvm_1_1LiveRegUnits.html#afb6ffd3b8c57fa64784233fc7a348690">contains</a>(Reg, *TRI))</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    Redefs.<a class="code" href="classllvm_1_1LiveRegUnits.html#a6ef6f73a18b55985181e4b81897633de">addReg</a>(Reg, *TRI);</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;Op = *Ops;</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *MI = Op.<a class="code" href="classllvm_1_1MachineOperand.html#acad8fe90886f92eabced0c2f9bd0e6f5">getParent</a>();</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> MIB(*MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">getParent</a>()-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#af2e482ff2a9253ec6bc2285491496bd6">getParent</a>(), <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>);</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a5125cce72b214df09ca8f93dcbbf4c3a">addReg</a>(Reg, <a class="code" href="namespacellvm_1_1RegState.html#a079b254e749130fbe5d740f314ca92daa0fec8ba6f4a4dc758b725205985eee99">RegState::Implicit</a> | <a class="code" href="namespacellvm_1_1RegState.html#a079b254e749130fbe5d740f314ca92daab502f975742e9bff6d6dd7b49439b806">RegState::Undef</a>);</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;  }</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;}</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;<span class="comment"> * Remove kill flags from operands with a registers in the @p DontKill set.</span></div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00999"></a><span class="lineno"><a class="line" href="IfConversion_8cpp.html#a77ebeaa378cbf131c8fad61d81be6e96">  999</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="IfConversion_8cpp.html#a77ebeaa378cbf131c8fad61d81be6e96">RemoveKills</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1LiveRegUnits.html">LiveRegUnits</a> &amp;DontKill,</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classllvm_1_1MCRegisterInfo.html">MCRegisterInfo</a> &amp;MCRI) {</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MIBundleOperands.html">MIBundleOperands</a> O(&amp;MI); O.<a class="code" href="classllvm_1_1MachineOperandIteratorBase.html#af3802cbef7a57e8de316fe13fbed8e67">isValid</a>(); ++O) {</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    <span class="keywordflow">if</span> (!O-&gt;isReg() || !O-&gt;isKill())</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    <span class="keywordflow">if</span> (DontKill.<a class="code" href="classllvm_1_1LiveRegUnits.html#afb6ffd3b8c57fa64784233fc7a348690">contains</a>(O-&gt;getReg(), MCRI))</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;      O-&gt;setIsKill(<span class="keyword">false</span>);</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;  }</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;}</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;<span class="comment"> * Walks a range of machine instructions and removes kill flags for registers</span></div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;<span class="comment"> * in the @p DontKill set.</span></div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01013"></a><span class="lineno"><a class="line" href="IfConversion_8cpp.html#a1cf20b226726be3a2bfd469302828931"> 1013</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="IfConversion_8cpp.html#a77ebeaa378cbf131c8fad61d81be6e96">RemoveKills</a>(<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;                        <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> E,</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classllvm_1_1LiveRegUnits.html">LiveRegUnits</a> &amp;DontKill,</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classllvm_1_1MCRegisterInfo.html">MCRegisterInfo</a> &amp;MCRI) {</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;  <span class="keywordflow">for</span> ( ; I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <a class="code" href="IfConversion_8cpp.html#a77ebeaa378cbf131c8fad61d81be6e96">RemoveKills</a>(*I, DontKill, MCRI);</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;}</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;<span class="comment">/// IfConvertSimple - If convert a simple (split, no rejoin) sub-CFG.</span></div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> IfConverter::IfConvertSimple(BBInfo &amp;BBI, IfcvtKind <a class="code" href="namespacellvm_1_1EngineKind.html#a9df47239a42cd9621ac26d9ecbd57441">Kind</a>) {</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;  BBInfo &amp;TrueBBI  = BBAnalysis[BBI.TrueBB-&gt;getNumber()];</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;  BBInfo &amp;FalseBBI = BBAnalysis[BBI.FalseBB-&gt;getNumber()];</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  BBInfo *CvtBBI = &amp;TrueBBI;</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;  BBInfo *NextBBI = &amp;FalseBBI;</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand, 4&gt;</a> Cond(BBI.BrCond.begin(), BBI.BrCond.end());</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;  <span class="keywordflow">if</span> (Kind == ICSimpleFalse)</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(CvtBBI, NextBBI);</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;  <span class="keywordflow">if</span> (CvtBBI-&gt;IsDone ||</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;      (CvtBBI-&gt;CannotBeCopied &amp;&amp; CvtBBI-&gt;BB-&gt;pred_size() &gt; 1)) {</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <span class="comment">// Something has changed. It&#39;s no longer safe to predicate this block.</span></div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    BBI.IsAnalyzed = <span class="keyword">false</span>;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    CvtBBI-&gt;IsAnalyzed = <span class="keyword">false</span>;</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;  }</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;  <span class="keywordflow">if</span> (CvtBBI-&gt;BB-&gt;hasAddressTaken())</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    <span class="comment">// Conservatively abort if-conversion if BB&#39;s address is taken.</span></div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;  <span class="keywordflow">if</span> (Kind == ICSimpleFalse)</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    <span class="keywordflow">if</span> (TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a051d866f5c8c28d14ebe529a33f5f7b1">ReverseBranchCondition</a>(Cond))</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;      <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unable to reverse branch condition!&quot;</span>);</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;  <span class="comment">// Initialize liveins to the first BB. These are potentiall redefined by</span></div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;  <span class="comment">// predicated instructions.</span></div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;  Redefs.<a class="code" href="classllvm_1_1LiveRegUnits.html#aecc1788de77cc6f24dd6ff383fd3c5de">init</a>(TRI);</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;  Redefs.<a class="code" href="classllvm_1_1LiveRegUnits.html#a31209f88fd8eacaa8ef67a36063fbf39">addLiveIns</a>(CvtBBI-&gt;BB, *TRI);</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;  Redefs.<a class="code" href="classllvm_1_1LiveRegUnits.html#a31209f88fd8eacaa8ef67a36063fbf39">addLiveIns</a>(NextBBI-&gt;BB, *TRI);</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;  <span class="comment">// Compute a set of registers which must not be killed by instructions in</span></div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;  <span class="comment">// BB1: This is everything live-in to BB2.</span></div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;  DontKill.<a class="code" href="classllvm_1_1LiveRegUnits.html#aecc1788de77cc6f24dd6ff383fd3c5de">init</a>(TRI);</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;  DontKill.<a class="code" href="classllvm_1_1LiveRegUnits.html#a31209f88fd8eacaa8ef67a36063fbf39">addLiveIns</a>(NextBBI-&gt;BB, *TRI);</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;  <span class="keywordflow">if</span> (CvtBBI-&gt;BB-&gt;pred_size() &gt; 1) {</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    BBI.NonPredSize -= TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#abce62a681f245fc78059890e4ca83210">RemoveBranch</a>(*BBI.BB);</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    <span class="comment">// Copy instructions in the true block, predicate them, and add them to</span></div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    <span class="comment">// the entry block.</span></div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    CopyAndPredicateBlock(BBI, *CvtBBI, Cond);</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    <span class="comment">// RemoveExtraEdges won&#39;t work if the block has an unanalyzable branch, so</span></div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <span class="comment">// explicitly remove CvtBBI as a successor.</span></div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    BBI.BB-&gt;removeSuccessor(CvtBBI-&gt;BB);</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    <a class="code" href="IfConversion_8cpp.html#a77ebeaa378cbf131c8fad61d81be6e96">RemoveKills</a>(CvtBBI-&gt;BB-&gt;begin(), CvtBBI-&gt;BB-&gt;end(), DontKill, *TRI);</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    PredicateBlock(*CvtBBI, CvtBBI-&gt;BB-&gt;end(), Cond);</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    <span class="comment">// Merge converted block into entry block.</span></div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    BBI.NonPredSize -= TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#abce62a681f245fc78059890e4ca83210">RemoveBranch</a>(*BBI.BB);</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    MergeBlocks(BBI, *CvtBBI);</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;  }</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;  <span class="keywordtype">bool</span> IterIfcvt = <span class="keyword">true</span>;</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="IfConversion_8cpp.html#a16f61dfadfaed6ae1a56320217096bd2">canFallThroughTo</a>(BBI.BB, NextBBI-&gt;BB)) {</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    <a class="code" href="IfConversion_8cpp.html#aa638e3e05e566d44b8ea38db5ea7535c">InsertUncondBranch</a>(BBI.BB, NextBBI-&gt;BB, TII);</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    BBI.HasFallThrough = <span class="keyword">false</span>;</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    <span class="comment">// Now ifcvt&#39;d block will look like this:</span></div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    <span class="comment">// BB:</span></div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    <span class="comment">// ...</span></div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    <span class="comment">// t, f = cmp</span></div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    <span class="comment">// if t op</span></div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    <span class="comment">// b BBf</span></div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    <span class="comment">// We cannot further ifcvt this block because the unconditional branch</span></div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <span class="comment">// will have to be predicated on the new condition, that will not be</span></div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    <span class="comment">// available if cmp executes.</span></div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    IterIfcvt = <span class="keyword">false</span>;</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;  }</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;  RemoveExtraEdges(BBI);</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;  <span class="comment">// Update block info. BB can be iteratively if-converted.</span></div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  <span class="keywordflow">if</span> (!IterIfcvt)</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    BBI.IsDone = <span class="keyword">true</span>;</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  InvalidatePreds(BBI.BB);</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;  CvtBBI-&gt;IsDone = <span class="keyword">true</span>;</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;  <span class="comment">// FIXME: Must maintain LiveIns.</span></div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;}</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;<span class="comment">/// IfConvertTriangle - If convert a triangle sub-CFG.</span></div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> IfConverter::IfConvertTriangle(BBInfo &amp;BBI, IfcvtKind Kind) {</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  BBInfo &amp;TrueBBI = BBAnalysis[BBI.TrueBB-&gt;getNumber()];</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  BBInfo &amp;FalseBBI = BBAnalysis[BBI.FalseBB-&gt;getNumber()];</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;  BBInfo *CvtBBI = &amp;TrueBBI;</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;  BBInfo *NextBBI = &amp;FalseBBI;</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> dl;  <span class="comment">// FIXME: this is nowhere</span></div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand, 4&gt;</a> Cond(BBI.BrCond.begin(), BBI.BrCond.end());</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  <span class="keywordflow">if</span> (Kind == ICTriangleFalse || Kind == ICTriangleFRev)</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(CvtBBI, NextBBI);</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;  <span class="keywordflow">if</span> (CvtBBI-&gt;IsDone ||</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;      (CvtBBI-&gt;CannotBeCopied &amp;&amp; CvtBBI-&gt;BB-&gt;pred_size() &gt; 1)) {</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    <span class="comment">// Something has changed. It&#39;s no longer safe to predicate this block.</span></div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    BBI.IsAnalyzed = <span class="keyword">false</span>;</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    CvtBBI-&gt;IsAnalyzed = <span class="keyword">false</span>;</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  }</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;  <span class="keywordflow">if</span> (CvtBBI-&gt;BB-&gt;hasAddressTaken())</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    <span class="comment">// Conservatively abort if-conversion if BB&#39;s address is taken.</span></div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;  <span class="keywordflow">if</span> (Kind == ICTriangleFalse || Kind == ICTriangleFRev)</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    <span class="keywordflow">if</span> (TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a051d866f5c8c28d14ebe529a33f5f7b1">ReverseBranchCondition</a>(Cond))</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;      <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unable to reverse branch condition!&quot;</span>);</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;  <span class="keywordflow">if</span> (Kind == ICTriangleRev || Kind == ICTriangleFRev) {</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <span class="keywordflow">if</span> (ReverseBranchCondition(*CvtBBI)) {</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;      <span class="comment">// BB has been changed, modify its predecessors (except for this</span></div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;      <span class="comment">// one) so they don&#39;t get ifcvt&#39;ed based on bad intel.</span></div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7e7a1a247b7725a24fe19a91f90782cc">MachineBasicBlock::pred_iterator</a> PI = CvtBBI-&gt;BB-&gt;pred_begin(),</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;             E = CvtBBI-&gt;BB-&gt;pred_end(); PI != E; ++PI) {</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;        <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *PBB = *PI;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;        <span class="keywordflow">if</span> (PBB == BBI.BB)</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;        BBInfo &amp;PBBI = BBAnalysis[PBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>()];</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;        <span class="keywordflow">if</span> (PBBI.IsEnqueued) {</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;          PBBI.IsAnalyzed = <span class="keyword">false</span>;</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;          PBBI.IsEnqueued = <span class="keyword">false</span>;</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;        }</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;      }</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    }</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;  }</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;  <span class="comment">// Initialize liveins to the first BB. These are potentially redefined by</span></div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  <span class="comment">// predicated instructions.</span></div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;  Redefs.<a class="code" href="classllvm_1_1LiveRegUnits.html#aecc1788de77cc6f24dd6ff383fd3c5de">init</a>(TRI);</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  Redefs.<a class="code" href="classllvm_1_1LiveRegUnits.html#a31209f88fd8eacaa8ef67a36063fbf39">addLiveIns</a>(CvtBBI-&gt;BB, *TRI);</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  Redefs.<a class="code" href="classllvm_1_1LiveRegUnits.html#a31209f88fd8eacaa8ef67a36063fbf39">addLiveIns</a>(NextBBI-&gt;BB, *TRI);</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;  DontKill.<a class="code" href="classllvm_1_1LiveRegUnits.html#af7e9f52f2a85f51a9c8e8d5f54238343">clear</a>();</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;  <span class="keywordtype">bool</span> HasEarlyExit = CvtBBI-&gt;FalseBB != NULL;</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;  <span class="keywordflow">if</span> (CvtBBI-&gt;BB-&gt;pred_size() &gt; 1) {</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    BBI.NonPredSize -= TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#abce62a681f245fc78059890e4ca83210">RemoveBranch</a>(*BBI.BB);</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    <span class="comment">// Copy instructions in the true block, predicate them, and add them to</span></div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    <span class="comment">// the entry block.</span></div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    CopyAndPredicateBlock(BBI, *CvtBBI, Cond, <span class="keyword">true</span>);</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    <span class="comment">// RemoveExtraEdges won&#39;t work if the block has an unanalyzable branch, so</span></div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    <span class="comment">// explicitly remove CvtBBI as a successor.</span></div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    BBI.BB-&gt;removeSuccessor(CvtBBI-&gt;BB);</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    <span class="comment">// Predicate the &#39;true&#39; block after removing its branch.</span></div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    CvtBBI-&gt;NonPredSize -= TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#abce62a681f245fc78059890e4ca83210">RemoveBranch</a>(*CvtBBI-&gt;BB);</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    PredicateBlock(*CvtBBI, CvtBBI-&gt;BB-&gt;end(), Cond);</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    <span class="comment">// Now merge the entry of the triangle with the true block.</span></div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    BBI.NonPredSize -= TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#abce62a681f245fc78059890e4ca83210">RemoveBranch</a>(*BBI.BB);</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    MergeBlocks(BBI, *CvtBBI, <span class="keyword">false</span>);</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;  }</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;  <span class="comment">// If &#39;true&#39; block has a &#39;false&#39; successor, add an exit branch to it.</span></div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;  <span class="keywordflow">if</span> (HasEarlyExit) {</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand, 4&gt;</a> RevCond(CvtBBI-&gt;BrCond.begin(),</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;                                           CvtBBI-&gt;BrCond.end());</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    <span class="keywordflow">if</span> (TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a051d866f5c8c28d14ebe529a33f5f7b1">ReverseBranchCondition</a>(RevCond))</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;      <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unable to reverse branch condition!&quot;</span>);</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a8afe41bda071ea77c815f7bd436fdd82">InsertBranch</a>(*BBI.BB, CvtBBI-&gt;FalseBB, NULL, RevCond, dl);</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    BBI.BB-&gt;addSuccessor(CvtBBI-&gt;FalseBB);</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  }</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  <span class="comment">// Merge in the &#39;false&#39; block if the &#39;false&#39; block has no other</span></div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;  <span class="comment">// predecessors. Otherwise, add an unconditional branch to &#39;false&#39;.</span></div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;  <span class="keywordtype">bool</span> FalseBBDead = <span class="keyword">false</span>;</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;  <span class="keywordtype">bool</span> IterIfcvt = <span class="keyword">true</span>;</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  <span class="keywordtype">bool</span> isFallThrough = <a class="code" href="IfConversion_8cpp.html#a16f61dfadfaed6ae1a56320217096bd2">canFallThroughTo</a>(BBI.BB, NextBBI-&gt;BB);</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;  <span class="keywordflow">if</span> (!isFallThrough) {</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    <span class="comment">// Only merge them if the true block does not fallthrough to the false</span></div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    <span class="comment">// block. By not merging them, we make it possible to iteratively</span></div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    <span class="comment">// ifcvt the blocks.</span></div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    <span class="keywordflow">if</span> (!HasEarlyExit &amp;&amp;</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;        NextBBI-&gt;BB-&gt;pred_size() == 1 &amp;&amp; !NextBBI-&gt;HasFallThrough &amp;&amp;</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;        !NextBBI-&gt;BB-&gt;hasAddressTaken()) {</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;      MergeBlocks(BBI, *NextBBI);</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;      FalseBBDead = <span class="keyword">true</span>;</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;      <a class="code" href="IfConversion_8cpp.html#aa638e3e05e566d44b8ea38db5ea7535c">InsertUncondBranch</a>(BBI.BB, NextBBI-&gt;BB, TII);</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;      BBI.HasFallThrough = <span class="keyword">false</span>;</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    }</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    <span class="comment">// Mixed predicated and unpredicated code. This cannot be iteratively</span></div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    <span class="comment">// predicated.</span></div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    IterIfcvt = <span class="keyword">false</span>;</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  }</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;  RemoveExtraEdges(BBI);</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;  <span class="comment">// Update block info. BB can be iteratively if-converted.</span></div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;  <span class="keywordflow">if</span> (!IterIfcvt)</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    BBI.IsDone = <span class="keyword">true</span>;</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;  InvalidatePreds(BBI.BB);</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  CvtBBI-&gt;IsDone = <span class="keyword">true</span>;</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;  <span class="keywordflow">if</span> (FalseBBDead)</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    NextBBI-&gt;IsDone = <span class="keyword">true</span>;</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;  <span class="comment">// FIXME: Must maintain LiveIns.</span></div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;}</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;<span class="comment">/// IfConvertDiamond - If convert a diamond sub-CFG.</span></div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> IfConverter::IfConvertDiamond(BBInfo &amp;BBI, IfcvtKind Kind,</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;                                   <span class="keywordtype">unsigned</span> NumDups1, <span class="keywordtype">unsigned</span> NumDups2) {</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;  BBInfo &amp;TrueBBI  = BBAnalysis[BBI.TrueBB-&gt;getNumber()];</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;  BBInfo &amp;FalseBBI = BBAnalysis[BBI.FalseBB-&gt;getNumber()];</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *TailBB = TrueBBI.TrueBB;</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;  <span class="comment">// True block must fall through or end with an unanalyzable terminator.</span></div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;  <span class="keywordflow">if</span> (!TailBB) {</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    <span class="keywordflow">if</span> (blockAlwaysFallThrough(TrueBBI))</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;      TailBB = FalseBBI.TrueBB;</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    assert((TailBB || !TrueBBI.IsBrAnalyzable) &amp;&amp; <span class="stringliteral">&quot;Unexpected!&quot;</span>);</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;  }</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;  <span class="keywordflow">if</span> (TrueBBI.IsDone || FalseBBI.IsDone ||</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;      TrueBBI.BB-&gt;pred_size() &gt; 1 ||</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;      FalseBBI.BB-&gt;pred_size() &gt; 1) {</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    <span class="comment">// Something has changed. It&#39;s no longer safe to predicate these blocks.</span></div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;    BBI.IsAnalyzed = <span class="keyword">false</span>;</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    TrueBBI.IsAnalyzed = <span class="keyword">false</span>;</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;    FalseBBI.IsAnalyzed = <span class="keyword">false</span>;</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;  }</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;  <span class="keywordflow">if</span> (TrueBBI.BB-&gt;hasAddressTaken() || FalseBBI.BB-&gt;hasAddressTaken())</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    <span class="comment">// Conservatively abort if-conversion if either BB has its address taken.</span></div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;  <span class="comment">// Put the predicated instructions from the &#39;true&#39; block before the</span></div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;  <span class="comment">// instructions from the &#39;false&#39; block, unless the true block would clobber</span></div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;  <span class="comment">// the predicate, in which case, do the opposite.</span></div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;  BBInfo *BBI1 = &amp;TrueBBI;</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  BBInfo *BBI2 = &amp;FalseBBI;</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand, 4&gt;</a> RevCond(BBI.BrCond.begin(), BBI.BrCond.end());</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;  <span class="keywordflow">if</span> (TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a051d866f5c8c28d14ebe529a33f5f7b1">ReverseBranchCondition</a>(RevCond))</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unable to reverse branch condition!&quot;</span>);</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand, 4&gt;</a> *Cond1 = &amp;BBI.BrCond;</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand, 4&gt;</a> *Cond2 = &amp;RevCond;</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;  <span class="comment">// Figure out the more profitable ordering.</span></div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;  <span class="keywordtype">bool</span> DoSwap = <span class="keyword">false</span>;</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;  <span class="keywordflow">if</span> (TrueBBI.ClobbersPred &amp;&amp; !FalseBBI.ClobbersPred)</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    DoSwap = <span class="keyword">true</span>;</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (TrueBBI.ClobbersPred == FalseBBI.ClobbersPred) {</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    <span class="keywordflow">if</span> (TrueBBI.NonPredSize &gt; FalseBBI.NonPredSize)</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;      DoSwap = <span class="keyword">true</span>;</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;  }</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;  <span class="keywordflow">if</span> (DoSwap) {</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(BBI1, BBI2);</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Cond1, Cond2);</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;  }</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;  <span class="comment">// Remove the conditional branch from entry to the blocks.</span></div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;  BBI.NonPredSize -= TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#abce62a681f245fc78059890e4ca83210">RemoveBranch</a>(*BBI.BB);</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;  <span class="comment">// Initialize liveins to the first BB. These are potentially redefined by</span></div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;  <span class="comment">// predicated instructions.</span></div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;  Redefs.<a class="code" href="classllvm_1_1LiveRegUnits.html#aecc1788de77cc6f24dd6ff383fd3c5de">init</a>(TRI);</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;  Redefs.<a class="code" href="classllvm_1_1LiveRegUnits.html#a31209f88fd8eacaa8ef67a36063fbf39">addLiveIns</a>(BBI1-&gt;BB, *TRI);</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;  <span class="comment">// Remove the duplicated instructions at the beginnings of both paths.</span></div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> DI1 = BBI1-&gt;BB-&gt;begin();</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> DI2 = BBI2-&gt;BB-&gt;begin();</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> DIE1 = BBI1-&gt;BB-&gt;end();</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> DIE2 = BBI2-&gt;BB-&gt;end();</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;  <span class="comment">// Skip dbg_value instructions</span></div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;  <span class="keywordflow">while</span> (DI1 != DIE1 &amp;&amp; DI1-&gt;isDebugValue())</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    ++DI1;</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;  <span class="keywordflow">while</span> (DI2 != DIE2 &amp;&amp; DI2-&gt;isDebugValue())</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;    ++DI2;</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;  BBI1-&gt;NonPredSize -= NumDups1;</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;  BBI2-&gt;NonPredSize -= NumDups1;</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;  <span class="comment">// Skip past the dups on each side separately since there may be</span></div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;  <span class="comment">// differing dbg_value entries.</span></div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumDups1; ++DI1) {</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    <span class="keywordflow">if</span> (!DI1-&gt;isDebugValue())</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;      ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;  }</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;  <span class="keywordflow">while</span> (NumDups1 != 0) {</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;    ++DI2;</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    <span class="keywordflow">if</span> (!DI2-&gt;isDebugValue())</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;      --NumDups1;</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;  }</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;  <span class="comment">// Compute a set of registers which must not be killed by instructions in BB1:</span></div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;  <span class="comment">// This is everything used+live in BB2 after the duplicated instructions. We</span></div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;  <span class="comment">// can compute this set by simulating liveness backwards from the end of BB2.</span></div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;  DontKill.<a class="code" href="classllvm_1_1LiveRegUnits.html#aecc1788de77cc6f24dd6ff383fd3c5de">init</a>(TRI);</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#a0848c971395758cf592821550b725853">MachineBasicBlock::reverse_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = BBI2-&gt;BB-&gt;rbegin(),</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;       E = <a class="code" href="classllvm_1_1MachineBasicBlock.html#a0848c971395758cf592821550b725853">MachineBasicBlock::reverse_iterator</a>(DI2); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    DontKill.<a class="code" href="classllvm_1_1LiveRegUnits.html#ac1ef7af6d10e09576161728fe5ad92a4">stepBackward</a>(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, *TRI);</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;  }</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#a654b11787ac7c4344084d98bea7cf626">MachineBasicBlock::const_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = BBI1-&gt;BB-&gt;begin(), E = DI1; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E;</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;       ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    Redefs.<a class="code" href="classllvm_1_1LiveRegUnits.html#ae79ff9da206b508b1651198493455b37">stepForward</a>(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, *TRI);</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;  }</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;  BBI.BB-&gt;splice(BBI.BB-&gt;end(), BBI1-&gt;BB, BBI1-&gt;BB-&gt;begin(), DI1);</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;  BBI2-&gt;BB-&gt;erase(BBI2-&gt;BB-&gt;begin(), DI2);</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;  <span class="comment">// Remove branch from &#39;true&#39; block and remove duplicated instructions.</span></div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;  BBI1-&gt;NonPredSize -= TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#abce62a681f245fc78059890e4ca83210">RemoveBranch</a>(*BBI1-&gt;BB);</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;  DI1 = BBI1-&gt;BB-&gt;end();</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != NumDups2; ) {</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    <span class="comment">// NumDups2 only counted non-dbg_value instructions, so this won&#39;t</span></div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;    <span class="comment">// run off the head of the list.</span></div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;    assert (DI1 != BBI1-&gt;BB-&gt;begin());</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    --DI1;</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    <span class="comment">// skip dbg_value instructions</span></div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    <span class="keywordflow">if</span> (!DI1-&gt;isDebugValue())</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;      ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;  }</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;  BBI1-&gt;BB-&gt;erase(DI1, BBI1-&gt;BB-&gt;end());</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;  <span class="comment">// Kill flags in the true block for registers living into the false block</span></div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;  <span class="comment">// must be removed.</span></div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;  <a class="code" href="IfConversion_8cpp.html#a77ebeaa378cbf131c8fad61d81be6e96">RemoveKills</a>(BBI1-&gt;BB-&gt;begin(), BBI1-&gt;BB-&gt;end(), DontKill, *TRI);</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;  <span class="comment">// Remove &#39;false&#39; block branch and find the last instruction to predicate.</span></div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;  BBI2-&gt;NonPredSize -= TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#abce62a681f245fc78059890e4ca83210">RemoveBranch</a>(*BBI2-&gt;BB);</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;  DI2 = BBI2-&gt;BB-&gt;end();</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;  <span class="keywordflow">while</span> (NumDups2 != 0) {</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;    <span class="comment">// NumDups2 only counted non-dbg_value instructions, so this won&#39;t</span></div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    <span class="comment">// run off the head of the list.</span></div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    assert (DI2 != BBI2-&gt;BB-&gt;begin());</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;    --DI2;</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    <span class="comment">// skip dbg_value instructions</span></div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    <span class="keywordflow">if</span> (!DI2-&gt;isDebugValue())</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;      --NumDups2;</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;  }</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;  <span class="comment">// Remember which registers would later be defined by the false block.</span></div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;  <span class="comment">// This allows us not to predicate instructions in the true block that would</span></div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;  <span class="comment">// later be re-defined. That is, rather than</span></div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;  <span class="comment">//   subeq  r0, r1, #1</span></div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;  <span class="comment">//   addne  r0, r1, #1</span></div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;  <span class="comment">// generate:</span></div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;  <span class="comment">//   sub    r0, r1, #1</span></div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;  <span class="comment">//   addne  r0, r1, #1</span></div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;  <a class="code" href="classllvm_1_1SmallSet.html">SmallSet&lt;unsigned, 4&gt;</a> RedefsByFalse;</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;  <a class="code" href="classllvm_1_1SmallSet.html">SmallSet&lt;unsigned, 4&gt;</a> ExtUses;</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;  <span class="keywordflow">if</span> (TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a9838b8c2c1e3d71ad10ee23d112f8196">isProfitableToUnpredicate</a>(*BBI1-&gt;BB, *BBI2-&gt;BB)) {</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> FI = BBI2-&gt;BB-&gt;begin(); FI != DI2; ++FI) {</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;      <span class="keywordflow">if</span> (FI-&gt;isDebugValue())</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 4&gt;</a> Defs;</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = FI-&gt;getNumOperands(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = FI-&gt;getOperand(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;        <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>())</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;        <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;        <span class="keywordflow">if</span> (!Reg)</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;        <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#a8de7d5cf38939044471c6ee60a01a3df">isDef</a>()) {</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;          Defs.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Reg);</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!RedefsByFalse.<a class="code" href="classllvm_1_1SmallSet.html#ab28aa342862f6d16361be514fd98c22e">count</a>(Reg)) {</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;          <span class="comment">// These are defined before ctrl flow reach the &#39;false&#39; instructions.</span></div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;          <span class="comment">// They cannot be modified by the &#39;true&#39; instructions.</span></div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;          <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MCSubRegIterator.html">MCSubRegIterator</a> SubRegs(Reg, TRI, <span class="comment">/*IncludeSelf=*/</span><span class="keyword">true</span>);</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;               SubRegs.<a class="code" href="classllvm_1_1MCRegisterInfo_1_1DiffListIterator.html#abccd358b92366e5284e7e674e86b241f">isValid</a>(); ++SubRegs)</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;            ExtUses.<a class="code" href="classllvm_1_1SmallSet.html#a8d8348060ccdeeba13fb8bc651dfbf82">insert</a>(*SubRegs);</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;        }</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;      }</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Defs.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;        <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = Defs[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;        <span class="keywordflow">if</span> (!ExtUses.<a class="code" href="classllvm_1_1SmallSet.html#ab28aa342862f6d16361be514fd98c22e">count</a>(Reg)) {</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;          <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MCSubRegIterator.html">MCSubRegIterator</a> SubRegs(Reg, TRI, <span class="comment">/*IncludeSelf=*/</span><span class="keyword">true</span>);</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;               SubRegs.<a class="code" href="classllvm_1_1MCRegisterInfo_1_1DiffListIterator.html#abccd358b92366e5284e7e674e86b241f">isValid</a>(); ++SubRegs)</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;            RedefsByFalse.<a class="code" href="classllvm_1_1SmallSet.html#a8d8348060ccdeeba13fb8bc651dfbf82">insert</a>(*SubRegs);</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;        }</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;      }</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    }</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;  }</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;  <span class="comment">// Predicate the &#39;true&#39; block.</span></div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;  PredicateBlock(*BBI1, BBI1-&gt;BB-&gt;end(), *Cond1, &amp;RedefsByFalse);</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;  <span class="comment">// Predicate the &#39;false&#39; block.</span></div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;  PredicateBlock(*BBI2, DI2, *Cond2);</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;  <span class="comment">// Merge the true block into the entry of the diamond.</span></div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;  MergeBlocks(BBI, *BBI1, TailBB == 0);</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;  MergeBlocks(BBI, *BBI2, TailBB == 0);</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;  <span class="comment">// If the if-converted block falls through or unconditionally branches into</span></div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;  <span class="comment">// the tail block, and the tail block does not have other predecessors, then</span></div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;  <span class="comment">// fold the tail block in as well. Otherwise, unless it falls through to the</span></div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;  <span class="comment">// tail, add a unconditional branch to it.</span></div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;  <span class="keywordflow">if</span> (TailBB) {</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;    BBInfo &amp;TailBBI = BBAnalysis[TailBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>()];</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;    <span class="keywordtype">bool</span> CanMergeTail = !TailBBI.HasFallThrough &amp;&amp;</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;      !TailBBI.BB-&gt;hasAddressTaken();</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;    <span class="comment">// There may still be a fall-through edge from BBI1 or BBI2 to TailBB;</span></div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    <span class="comment">// check if there are any other predecessors besides those.</span></div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;    <span class="keywordtype">unsigned</span> NumPreds = TailBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac9786455bc217ebd35377bb5d5ec8f20">pred_size</a>();</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    <span class="keywordflow">if</span> (NumPreds &gt; 1)</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;      CanMergeTail = <span class="keyword">false</span>;</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (NumPreds == 1 &amp;&amp; CanMergeTail) {</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;      <a class="code" href="classllvm_1_1MachineBasicBlock.html#a7e7a1a247b7725a24fe19a91f90782cc">MachineBasicBlock::pred_iterator</a> PI = TailBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab644fcf07a4c2708333cf66276282357">pred_begin</a>();</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;      <span class="keywordflow">if</span> (*PI != BBI1-&gt;BB &amp;&amp; *PI != BBI2-&gt;BB)</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;        CanMergeTail = <span class="keyword">false</span>;</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    }</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;    <span class="keywordflow">if</span> (CanMergeTail) {</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;      MergeBlocks(BBI, TailBBI);</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;      TailBBI.IsDone = <span class="keyword">true</span>;</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;      BBI.BB-&gt;addSuccessor(TailBB);</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;      <a class="code" href="IfConversion_8cpp.html#aa638e3e05e566d44b8ea38db5ea7535c">InsertUncondBranch</a>(BBI.BB, TailBB, TII);</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;      BBI.HasFallThrough = <span class="keyword">false</span>;</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    }</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;  }</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;  <span class="comment">// RemoveExtraEdges won&#39;t work if the block has an unanalyzable branch,</span></div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;  <span class="comment">// which can happen here if TailBB is unanalyzable and is merged, so</span></div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;  <span class="comment">// explicitly remove BBI1 and BBI2 as successors.</span></div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;  BBI.BB-&gt;removeSuccessor(BBI1-&gt;BB);</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;  BBI.BB-&gt;removeSuccessor(BBI2-&gt;BB);</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;  RemoveExtraEdges(BBI);</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;  <span class="comment">// Update block info.</span></div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;  BBI.IsDone = TrueBBI.IsDone = FalseBBI.IsDone = <span class="keyword">true</span>;</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;  InvalidatePreds(BBI.BB);</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;  <span class="comment">// FIXME: Must maintain LiveIns.</span></div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;}</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;</div><div class="line"><a name="l01458"></a><span class="lineno"><a class="line" href="IfConversion_8cpp.html#a92ccd0b2fc8a05d21d5dfca4ec0083b0"> 1458</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="IfConversion_8cpp.html#a92ccd0b2fc8a05d21d5dfca4ec0083b0">MaySpeculate</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>,</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;                         <a class="code" href="classllvm_1_1SmallSet.html">SmallSet&lt;unsigned, 4&gt;</a> &amp;LaterRedefs,</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;                         <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> *TII) {</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;  <span class="keywordtype">bool</span> SawStore = <span class="keyword">true</span>;</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;  <span class="keywordflow">if</span> (!MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a55f1c19ebb9fce7a442816eeb154174f">isSafeToMove</a>(TII, 0, SawStore))</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;    <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a>())</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    <span class="keywordflow">if</span> (!Reg)</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#a8de7d5cf38939044471c6ee60a01a3df">isDef</a>() &amp;&amp; !LaterRedefs.<a class="code" href="classllvm_1_1SmallSet.html#ab28aa342862f6d16361be514fd98c22e">count</a>(Reg))</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;  }</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;}</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;<span class="comment">/// PredicateBlock - Predicate instructions from the start of the block to the</span></div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;<span class="comment">/// specified end with the specified condition.</span></div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> IfConverter::PredicateBlock(BBInfo &amp;BBI,</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;                                 <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> E,</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;                                 <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineOperand&gt;</a> &amp;Cond,</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;                                 <a class="code" href="classllvm_1_1SmallSet.html">SmallSet&lt;unsigned, 4&gt;</a> *LaterRedefs) {</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;  <span class="keywordtype">bool</span> AnyUnpred = <span class="keyword">false</span>;</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;  <span class="keywordtype">bool</span> MaySpec = LaterRedefs != 0;</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = BBI.BB-&gt;begin(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isDebugValue() || TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a2a69dd402cbc7f6282c93c32161395bc">isPredicated</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    <span class="comment">// It may be possible not to predicate an instruction if it&#39;s the &#39;true&#39;</span></div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    <span class="comment">// side of a diamond and the &#39;false&#39; side may re-define the instruction&#39;s</span></div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    <span class="comment">// defs.</span></div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;    <span class="keywordflow">if</span> (MaySpec &amp;&amp; <a class="code" href="IfConversion_8cpp.html#a92ccd0b2fc8a05d21d5dfca4ec0083b0">MaySpeculate</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, *LaterRedefs, TII)) {</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;      AnyUnpred = <span class="keyword">true</span>;</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    }</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    <span class="comment">// If any instruction is predicated, then every instruction after it must</span></div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    <span class="comment">// be predicated.</span></div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    MaySpec = <span class="keyword">false</span>;</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    <span class="keywordflow">if</span> (!TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#aca9723bc8d8b4a98a676f811db525732">PredicateInstruction</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Cond)) {</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Unable to predicate &quot;</span> &lt;&lt; *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; <span class="stringliteral">&quot;!\n&quot;</span>;</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;      <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(0);</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    }</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    <span class="comment">// If the predicated instruction now redefines a register as the result of</span></div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;    <span class="comment">// if-conversion, add an implicit kill.</span></div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;    <a class="code" href="IfConversion_8cpp.html#a4f907acc755e76ff7d23b5ac5a45ea0f">UpdatePredRedefs</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Redefs, TRI);</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;  }</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;  std::copy(Cond.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), Cond.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>(), std::back_inserter(BBI.Predicate));</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;  BBI.IsAnalyzed = <span class="keyword">false</span>;</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;  BBI.NonPredSize = 0;</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;  ++NumIfConvBBs;</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;  <span class="keywordflow">if</span> (AnyUnpred)</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    ++NumUnpred;</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;}</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;<span class="comment">/// CopyAndPredicateBlock - Copy and predicate instructions from source BB to</span></div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;<span class="comment">/// the destination block. Skip end of block branches if IgnoreBr is true.</span></div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> IfConverter::CopyAndPredicateBlock(BBInfo &amp;ToBBI, BBInfo &amp;FromBBI,</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;                                        <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineOperand&gt;</a> &amp;Cond,</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;                                        <span class="keywordtype">bool</span> IgnoreBr) {</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = *ToBBI.BB-&gt;getParent();</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = FromBBI.BB-&gt;begin(),</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;         E = FromBBI.BB-&gt;end(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;    <span class="comment">// Do not copy the end of the block branches.</span></div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;    <span class="keywordflow">if</span> (IgnoreBr &amp;&amp; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isBranch())</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a> = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac485421b5fcb9454ea64e74f6396a810">CloneMachineInstr</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;    ToBBI.BB-&gt;insert(ToBBI.BB-&gt;end(), <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>);</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    ToBBI.NonPredSize++;</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;    <span class="keywordtype">unsigned</span> ExtraPredCost = TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a51787750432fe6e9d30e82fc16f81980">getPredicationCost</a>(&amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    <span class="keywordtype">unsigned</span> NumCycles = SchedModel.<a class="code" href="classllvm_1_1TargetSchedModel.html#a16d6c2f29862a9d10dc7dc4540e9d04f">computeInstrLatency</a>(&amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="keyword">false</span>);</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;    <span class="keywordflow">if</span> (NumCycles &gt; 1)</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;      ToBBI.ExtraCost += NumCycles-1;</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    ToBBI.ExtraCost2 += ExtraPredCost;</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;    <span class="keywordflow">if</span> (!TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a2a69dd402cbc7f6282c93c32161395bc">isPredicated</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp; !MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a1e1d26226c627cf3dcf3c191b85e7d7d">isDebugValue</a>()) {</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;      <span class="keywordflow">if</span> (!TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#aca9723bc8d8b4a98a676f811db525732">PredicateInstruction</a>(MI, Cond)) {</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Unable to predicate &quot;</span> &lt;&lt; *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; <span class="stringliteral">&quot;!\n&quot;</span>;</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;        <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(0);</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;      }</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;    }</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;    <span class="comment">// If the predicated instruction now redefines a register as the result of</span></div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    <span class="comment">// if-conversion, add an implicit kill.</span></div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    <a class="code" href="IfConversion_8cpp.html#a4f907acc755e76ff7d23b5ac5a45ea0f">UpdatePredRedefs</a>(MI, Redefs, TRI);</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    <span class="comment">// Some kill flags may not be correct anymore.</span></div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;    <span class="keywordflow">if</span> (!DontKill.<a class="code" href="classllvm_1_1LiveRegUnits.html#afe0403964d5e64236d0659738fc0b0c9">empty</a>())</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;      <a class="code" href="IfConversion_8cpp.html#a77ebeaa378cbf131c8fad61d81be6e96">RemoveKills</a>(*MI, DontKill, *TRI);</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;  }</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;  <span class="keywordflow">if</span> (!IgnoreBr) {</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;    std::vector&lt;MachineBasicBlock *&gt; Succs(FromBBI.BB-&gt;succ_begin(),</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;                                           FromBBI.BB-&gt;succ_end());</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *NBB = <a class="code" href="IfConversion_8cpp.html#a21bc73621009f76516081c8b82f16d66">getNextBlock</a>(FromBBI.BB);</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *FallThrough = FromBBI.HasFallThrough ? NBB : NULL;</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Succs.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;      <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Succ = Succs[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;      <span class="comment">// Fallthrough edge can&#39;t be transferred.</span></div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;      <span class="keywordflow">if</span> (Succ == FallThrough)</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;      ToBBI.BB-&gt;addSuccessor(Succ);</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;    }</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;  }</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;  std::copy(FromBBI.Predicate.begin(), FromBBI.Predicate.end(),</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;            std::back_inserter(ToBBI.Predicate));</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;  std::copy(Cond.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), Cond.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>(), std::back_inserter(ToBBI.Predicate));</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;  ToBBI.ClobbersPred |= FromBBI.ClobbersPred;</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;  ToBBI.IsAnalyzed = <span class="keyword">false</span>;</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;  ++NumDupBBs;</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;}</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;<span class="comment">/// MergeBlocks - Move all instructions from FromBB to the end of ToBB.</span></div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;<span class="comment">/// This will leave FromBB as an empty block, so remove all of its</span></div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;<span class="comment">/// successor edges except for the fall-through edge.  If AddEdges is true,</span></div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;<span class="comment">/// i.e., when FromBBI&#39;s branch is being moved, add those successor edges to</span></div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;<span class="comment">/// ToBBI.</span></div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> IfConverter::MergeBlocks(BBInfo &amp;ToBBI, BBInfo &amp;FromBBI, <span class="keywordtype">bool</span> AddEdges) {</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;  assert(!FromBBI.BB-&gt;hasAddressTaken() &amp;&amp;</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;         <span class="stringliteral">&quot;Removing a BB whose address is taken!&quot;</span>);</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;  ToBBI.BB-&gt;splice(ToBBI.BB-&gt;end(),</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;                   FromBBI.BB, FromBBI.BB-&gt;begin(), FromBBI.BB-&gt;end());</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;  std::vector&lt;MachineBasicBlock *&gt; Succs(FromBBI.BB-&gt;succ_begin(),</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;                                         FromBBI.BB-&gt;succ_end());</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *NBB = <a class="code" href="IfConversion_8cpp.html#a21bc73621009f76516081c8b82f16d66">getNextBlock</a>(FromBBI.BB);</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *FallThrough = FromBBI.HasFallThrough ? NBB : NULL;</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Succs.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Succ = Succs[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;    <span class="comment">// Fallthrough edge can&#39;t be transferred.</span></div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;    <span class="keywordflow">if</span> (Succ == FallThrough)</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    FromBBI.BB-&gt;removeSuccessor(Succ);</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;    <span class="keywordflow">if</span> (AddEdges &amp;&amp; !ToBBI.BB-&gt;isSuccessor(Succ))</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;      ToBBI.BB-&gt;addSuccessor(Succ);</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;  }</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;  <span class="comment">// Now FromBBI always falls through to the next block!</span></div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;  <span class="keywordflow">if</span> (NBB &amp;&amp; !FromBBI.BB-&gt;isSuccessor(NBB))</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;    FromBBI.BB-&gt;addSuccessor(NBB);</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;  std::copy(FromBBI.Predicate.begin(), FromBBI.Predicate.end(),</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;            std::back_inserter(ToBBI.Predicate));</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;  FromBBI.Predicate.clear();</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;  ToBBI.NonPredSize += FromBBI.NonPredSize;</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;  ToBBI.ExtraCost += FromBBI.ExtraCost;</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;  ToBBI.ExtraCost2 += FromBBI.ExtraCost2;</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;  FromBBI.NonPredSize = 0;</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;  FromBBI.ExtraCost = 0;</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;  FromBBI.ExtraCost2 = 0;</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;  ToBBI.ClobbersPred |= FromBBI.ClobbersPred;</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;  ToBBI.HasFallThrough = FromBBI.HasFallThrough;</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;  ToBBI.IsAnalyzed = <span class="keyword">false</span>;</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;  FromBBI.IsAnalyzed = <span class="keyword">false</span>;</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;}</div><div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a075e34e98605d0e7c289763a104869ac"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">llvm::SmallVectorTemplateCommon&lt; T &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00114">SmallVector.h:114</a></div></div>
<div class="ttc" id="TargetSubtargetInfo_8h_html"><div class="ttname"><a href="TargetSubtargetInfo_8h.html">TargetSubtargetInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon::size</a></div><div class="ttdeci">size_type size() const </div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00127">SmallVector.h:127</a></div></div>
<div class="ttc" id="SmallSet_8h_html"><div class="ttname"><a href="SmallSet_8h.html">SmallSet.h</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00236">SmallVector.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_af2e482ff2a9253ec6bc2285491496bd6"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#af2e482ff2a9253ec6bc2285491496bd6">llvm::MachineBasicBlock::getParent</a></div><div class="ttdeci">const MachineFunction * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00137">MachineBasicBlock.h:137</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_acad8fe90886f92eabced0c2f9bd0e6f5"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#acad8fe90886f92eabced0c2f9bd0e6f5">llvm::MachineOperand::getParent</a></div><div class="ttdeci">MachineInstr * getParent()</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00204">MachineOperand.h:204</a></div></div>
<div class="ttc" id="classllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00035">PassRegistry.cpp:35</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_a73d7770e810be0d9a7dc9566fbb50a4e"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#a73d7770e810be0d9a7dc9566fbb50a4e">llvm::TargetInstrInfo::isProfitableToDupForIfCvt</a></div><div class="ttdeci">virtual bool isProfitableToDupForIfCvt(MachineBasicBlock &amp;MBB, unsigned NumCycles, const BranchProbability &amp;Probability) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00366">TargetInstrInfo.h:366</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_a5a6a05b7d9e9efb3f7b098c20fa0088a"><div class="ttname"><a href="Target_2README_8txt.html#a5a6a05b7d9e9efb3f7b098c20fa0088a">s</a></div><div class="ttdeci">multiplies can be turned into SHL s</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00408">Target/README.txt:408</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="classllvm_1_1MCRegisterInfo_1_1DiffListIterator_html_abccd358b92366e5284e7e674e86b241f"><div class="ttname"><a href="classllvm_1_1MCRegisterInfo_1_1DiffListIterator.html#abccd358b92366e5284e7e674e86b241f">llvm::MCRegisterInfo::DiffListIterator::isValid</a></div><div class="ttdeci">bool isValid() const </div><div class="ttdoc">isValid - returns true if this iterator is not yet at the end. </div><div class="ttdef"><b>Definition:</b> <a href="MCRegisterInfo_8h_source.html#l00217">MCRegisterInfo.h:217</a></div></div>
<div class="ttc" id="TargetSchedule_8h_html"><div class="ttname"><a href="TargetSchedule_8h.html">TargetSchedule.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_a9d017af749f76484cb9aec9ff6e4330c"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a9d017af749f76484cb9aec9ff6e4330c">llvm::MachineFunction::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00317">MachineFunction.h:317</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html"><div class="ttname"><a href="classllvm_1_1MachineFunction.html">llvm::MachineFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00075">MachineFunction.h:75</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a6acda287e5c19ffb173b0bf8f1dd9c5e"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">llvm::MachineBasicBlock::getNumber</a></div><div class="ttdeci">int getNumber() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00615">MachineBasicBlock.h:615</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_ab0789854909cf47f640a85fa2bac29c7"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ab0789854909cf47f640a85fa2bac29c7">llvm::MachineFunction::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00315">MachineFunction.h:315</a></div></div>
<div class="ttc" id="IfConversion_8cpp_html_a9f604b103ffab0010c68dc73d03c44cf"><div class="ttname"><a href="IfConversion_8cpp.html#a9f604b103ffab0010c68dc73d03c44cf">DisableDiamond</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; DisableDiamond(&quot;disable-ifcvt-diamond&quot;, cl::init(false), cl::Hidden)</div></div>
<div class="ttc" id="IfConversion_8cpp_html_a78b5545131b2bb12db4122d7850a93be"><div class="ttname"><a href="IfConversion_8cpp.html#a78b5545131b2bb12db4122d7850a93be">DisableTriangleFR</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; DisableTriangleFR(&quot;disable-ifcvt-triangle-false-rev&quot;, cl::init(false), cl::Hidden)</div></div>
<div class="ttc" id="classllvm_1_1MIBundleOperands_html"><div class="ttname"><a href="classllvm_1_1MIBundleOperands.html">llvm::MIBundleOperands</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBundle_8h_source.html#l00232">MachineInstrBundle.h:232</a></div></div>
<div class="ttc" id="Debug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="classllvm_1_1TargetSchedModel_html_a5419fb52cab4895e3fc6fc9fc5c73f91"><div class="ttname"><a href="classllvm_1_1TargetSchedModel.html#a5419fb52cab4895e3fc6fc9fc5c73f91">llvm::TargetSchedModel::init</a></div><div class="ttdeci">void init(const MCSchedModel &amp;sm, const TargetSubtargetInfo *sti, const TargetInstrInfo *tii)</div><div class="ttdoc">Initialize the machine model for instruction scheduling. </div><div class="ttdef"><b>Definition:</b> <a href="TargetSchedule_8cpp_source.html#l00054">TargetSchedule.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_a641441a84a88e01223f3c091dfb50694"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#a641441a84a88e01223f3c091dfb50694">llvm::TargetInstrInfo::AnalyzeBranch</a></div><div class="ttdeci">virtual bool AnalyzeBranch(MachineBasicBlock &amp;MBB, MachineBasicBlock *&amp;TBB, MachineBasicBlock *&amp;FBB, SmallVectorImpl&lt; MachineOperand &gt; &amp;Cond, bool AllowModify=false) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00287">TargetInstrInfo.h:287</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a3ddd708642d60c1661992ff8ba1b215d"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a3ddd708642d60c1661992ff8ba1b215d">llvm::MachineBasicBlock::succ_end</a></div><div class="ttdeci">succ_iterator succ_end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00278">MachineBasicBlock.h:278</a></div></div>
<div class="ttc" id="namespacellvm_1_1RegState_html_a079b254e749130fbe5d740f314ca92daa0fec8ba6f4a4dc758b725205985eee99"><div class="ttname"><a href="namespacellvm_1_1RegState.html#a079b254e749130fbe5d740f314ca92daa0fec8ba6f4a4dc758b725205985eee99">llvm::RegState::Implicit</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00032">MachineInstrBuilder.h:32</a></div></div>
<div class="ttc" id="Target_2TargetMachine_8h_html"><div class="ttname"><a href="Target_2TargetMachine_8h.html">TargetMachine.h</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRegUnits_html_ae79ff9da206b508b1651198493455b37"><div class="ttname"><a href="classllvm_1_1LiveRegUnits.html#ae79ff9da206b508b1651198493455b37">llvm::LiveRegUnits::stepForward</a></div><div class="ttdeci">void stepForward(const MachineInstr &amp;MI, const MCRegisterInfo &amp;MCRI)</div><div class="ttdoc">Simulates liveness when stepping forward over an instruction(bundle): Remove killed-uses, add defs. </div><div class="ttdef"><b>Definition:</b> <a href="LiveRegUnits_8cpp_source.html#l00076">LiveRegUnits.cpp:76</a></div></div>
<div class="ttc" id="MCInstrItineraries_8h_html"><div class="ttname"><a href="MCInstrItineraries_8h.html">MCInstrItineraries.h</a></div></div>
<div class="ttc" id="classllvm_1_1MCSubtargetInfo_html_ab5f9e7f3d7e48089a9132de131d9c151"><div class="ttname"><a href="classllvm_1_1MCSubtargetInfo.html#ab5f9e7f3d7e48089a9132de131d9c151">llvm::MCSubtargetInfo::getSchedModel</a></div><div class="ttdeci">const MCSchedModel * getSchedModel() const </div><div class="ttdef"><b>Definition:</b> <a href="MCSubtargetInfo_8h_source.html#l00092">MCSubtargetInfo.h:92</a></div></div>
<div class="ttc" id="classllvm_1_1DebugLoc_html"><div class="ttname"><a href="classllvm_1_1DebugLoc.html">llvm::DebugLoc</a></div><div class="ttdef"><b>Definition:</b> <a href="DebugLoc_8h_source.html#l00028">DebugLoc.h:28</a></div></div>
<div class="ttc" id="IfConversion_8cpp_html_ab0605726c8a45b165a2a365d801851b9"><div class="ttname"><a href="IfConversion_8cpp.html#ab0605726c8a45b165a2a365d801851b9">DisableSimple</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; DisableSimple(&quot;disable-ifcvt-simple&quot;, cl::init(false), cl::Hidden)</div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_abce62a681f245fc78059890e4ca83210"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#abce62a681f245fc78059890e4ca83210">llvm::TargetInstrInfo::RemoveBranch</a></div><div class="ttdeci">virtual unsigned RemoveBranch(MachineBasicBlock &amp;MBB) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00297">TargetInstrInfo.h:297</a></div></div>
<div class="ttc" id="Statistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_a6d3a9496095a2fe0350c9b5009857166"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#a6d3a9496095a2fe0350c9b5009857166">llvm::TargetInstrInfo::DefinesPredicate</a></div><div class="ttdeci">virtual bool DefinesPredicate(MachineInstr *MI, std::vector&lt; MachineOperand &gt; &amp;Pred) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00697">TargetInstrInfo.h:697</a></div></div>
<div class="ttc" id="IfConversion_8cpp_html_a34a236c308d2fd6fbe05dbb242b87205"><div class="ttname"><a href="IfConversion_8cpp.html#a34a236c308d2fd6fbe05dbb242b87205">STATISTIC</a></div><div class="ttdeci">STATISTIC(NumSimple,&quot;Number of simple if-conversions performed&quot;)</div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a901ce7389ca67dd79b8ab5b53c4a7da8"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a901ce7389ca67dd79b8ab5b53c4a7da8">d</a></div><div class="ttdeci">the resulting code requires compare and branches when and if the revised code is with conditional branches instead of More there is a byte word extend before each where there should be only and the condition codes are not remembered when the same two values are compared twice More LSR enhancements i8 and i32 load store addressing modes are identical int int int d</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00418">Target/ARM/README.txt:418</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00109">CommandLine.h:109</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_acdf5bf3bbc10f9331f56441a4d483bb1"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#acdf5bf3bbc10f9331f56441a4d483bb1">b</a></div><div class="ttdeci">the resulting code requires compare and branches when and if the revised code is with conditional branches instead of More there is a byte word extend before each where there should be only and the condition codes are not remembered when the same two values are compared twice More LSR enhancements i8 and i32 load store addressing modes are identical int b</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00396">Target/ARM/README.txt:396</a></div></div>
<div class="ttc" id="X86DisassemblerDecoder_8h_html_a546839a5c4bcf9f9450967155f48de41"><div class="ttname"><a href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></div><div class="ttdeci">Reg</div><div class="ttdef"><b>Definition:</b> <a href="X86DisassemblerDecoder_8h_source.html#l00428">X86DisassemblerDecoder.h:428</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_a51787750432fe6e9d30e82fc16f81980"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#a51787750432fe6e9d30e82fc16f81980">llvm::TargetInstrInfo::getPredicationCost</a></div><div class="ttdeci">virtual unsigned getPredicationCost(const MachineInstr *MI) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8cpp_source.html#l00675">TargetInstrInfo.cpp:675</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_ae5c60fd282ee894c87ea02c3f0fcb6d0"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">llvm::AnalysisUsage::addRequired</a></div><div class="ttdeci">AnalysisUsage &amp; addRequired()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00055">PassAnalysisSupport.h:55</a></div></div>
<div class="ttc" id="PassSupport_8h_html_a14724f1ccf528e73bb29bc9230737967"><div class="ttname"><a href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a></div><div class="ttdeci">#define INITIALIZE_PASS_DEPENDENCY(depName)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00167">PassSupport.h:167</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRegUnits_html_afb6ffd3b8c57fa64784233fc7a348690"><div class="ttname"><a href="classllvm_1_1LiveRegUnits.html#afb6ffd3b8c57fa64784233fc7a348690">llvm::LiveRegUnits::contains</a></div><div class="ttdeci">bool contains(unsigned Reg, const MCRegisterInfo &amp;MCRI) const </div><div class="ttdoc">Returns true if register Reg (or one of its super register) is contained in the set. </div><div class="ttdef"><b>Definition:</b> <a href="LiveRegUnits_8h_source.html#l00066">LiveRegUnits.h:66</a></div></div>
<div class="ttc" id="namespacellvm_1_1RegState_html_a079b254e749130fbe5d740f314ca92daab502f975742e9bff6d6dd7b49439b806"><div class="ttname"><a href="namespacellvm_1_1RegState.html#a079b254e749130fbe5d740f314ca92daab502f975742e9bff6d6dd7b49439b806">llvm::RegState::Undef</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00035">MachineInstrBuilder.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunctionPass_html"><div class="ttname"><a href="classllvm_1_1MachineFunctionPass.html">llvm::MachineFunctionPass</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunctionPass_8h_source.html#l00032">MachineFunctionPass.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1TargetSchedModel_html"><div class="ttname"><a href="classllvm_1_1TargetSchedModel.html">llvm::TargetSchedModel</a></div><div class="ttdoc">Provide an instruction scheduling machine model to CodeGen passes. </div><div class="ttdef"><b>Definition:</b> <a href="TargetSchedule_8h_source.html#l00032">TargetSchedule.h:32</a></div></div>
<div class="ttc" id="HexagonCopyToCombine_8cpp_html_a1d40004718218dbdf06b496766299101"><div class="ttname"><a href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a></div><div class="ttdeci">const HexagonInstrInfo * TII</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCopyToCombine_8cpp_source.html#l00115">HexagonCopyToCombine.cpp:115</a></div></div>
<div class="ttc" id="ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdef"><b>Definition:</b> <a href="ErrorHandling_8h_source.html#l00103">ErrorHandling.h:103</a></div></div>
<div class="ttc" id="PassSupport_8h_html_a74ce8276b89067e806f67c45a6d92575"><div class="ttname"><a href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a></div><div class="ttdeci">#define INITIALIZE_PASS_END(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00172">PassSupport.h:172</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00035">APInt.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_ad8198d6d83af9410d867136e33fbf4b2"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">llvm::MachineOperand::isReg</a></div><div class="ttdeci">bool isReg() const </div><div class="ttdoc">isReg - Tests if this is a MO_Register operand. </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00224">MachineOperand.h:224</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_aa8ff81157d66b82bc2c7bf15e647015f"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#aa8ff81157d66b82bc2c7bf15e647015f">llvm::TargetInstrInfo::SubsumesPredicate</a></div><div class="ttdeci">virtual bool SubsumesPredicate(const SmallVectorImpl&lt; MachineOperand &gt; &amp;Pred1, const SmallVectorImpl&lt; MachineOperand &gt; &amp;Pred2) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00689">TargetInstrInfo.h:689</a></div></div>
<div class="ttc" id="IfConversion_8cpp_html_a21bc73621009f76516081c8b82f16d66"><div class="ttname"><a href="IfConversion_8cpp.html#a21bc73621009f76516081c8b82f16d66">getNextBlock</a></div><div class="ttdeci">static MachineBasicBlock * getNextBlock(MachineBasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="IfConversion_8cpp_source.html#l00459">IfConversion.cpp:459</a></div></div>
<div class="ttc" id="STLExtras_8h_html"><div class="ttname"><a href="STLExtras_8h.html">STLExtras.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_aefba5f2af370add1bc8aaceedf7878ef"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#aefba5f2af370add1bc8aaceedf7878ef">llvm::MachineBasicBlock::succ_iterator</a></div><div class="ttdeci">std::vector&lt; MachineBasicBlock * &gt;::iterator succ_iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00249">MachineBasicBlock.h:249</a></div></div>
<div class="ttc" id="namespacellvm_html_a26c4d47f02e65dcf05f2018373f310d3"><div class="ttname"><a href="namespacellvm.html#a26c4d47f02e65dcf05f2018373f310d3">llvm::initializeIfConverterPass</a></div><div class="ttdeci">void initializeIfConverterPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="ErrorHandling_8h_html"><div class="ttname"><a href="ErrorHandling_8h.html">ErrorHandling.h</a></div></div>
<div class="ttc" id="namespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00126">StackSlotColoring.cpp:126</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBranchProbabilityInfo_html_a71021014177975263135fe6016076345"><div class="ttname"><a href="classllvm_1_1MachineBranchProbabilityInfo.html#a71021014177975263135fe6016076345">llvm::MachineBranchProbabilityInfo::getEdgeProbability</a></div><div class="ttdeci">BranchProbability getEdgeProbability(MachineBasicBlock *Src, MachineBasicBlock *Dst) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBranchProbabilityInfo_8cpp_source.html#l00107">MachineBranchProbabilityInfo.cpp:107</a></div></div>
<div class="ttc" id="namespacellvm_1_1CallingConv_html_a4f861731fc6dbfdccc05af5968d98974"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">llvm::CallingConv::ID</a></div><div class="ttdeci">ID</div><div class="ttdoc">LLVM Calling Convention Representation. </div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00026">CallingConv.h:26</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a7b5fe96d88954efc855e6c466207e535"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">llvm::MachineInstr::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00265">MachineInstr.h:265</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorBase_html_a8a8df4d85555c7954a95f86080cd3b64"><div class="ttname"><a href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">llvm::SmallVectorBase::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const </div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00056">SmallVector.h:56</a></div></div>
<div class="ttc" id="MachineInstrBuilder_8h_html"><div class="ttname"><a href="MachineInstrBuilder_8h.html">MachineInstrBuilder.h</a></div></div>
<div class="ttc" id="classllvm_1_1SmallSet_html_a8d8348060ccdeeba13fb8bc651dfbf82"><div class="ttname"><a href="classllvm_1_1SmallSet.html#a8d8348060ccdeeba13fb8bc651dfbf82">llvm::SmallSet::insert</a></div><div class="ttdeci">bool insert(const T &amp;V)</div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00059">SmallSet.h:59</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_a051d866f5c8c28d14ebe529a33f5f7b1"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#a051d866f5c8c28d14ebe529a33f5f7b1">llvm::TargetInstrInfo::ReverseBranchCondition</a></div><div class="ttdeci">virtual bool ReverseBranchCondition(SmallVectorImpl&lt; MachineOperand &gt; &amp;Cond) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00654">TargetInstrInfo.h:654</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a7e7a1a247b7725a24fe19a91f90782cc"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a7e7a1a247b7725a24fe19a91f90782cc">llvm::MachineBasicBlock::pred_iterator</a></div><div class="ttdeci">std::vector&lt; MachineBasicBlock * &gt;::iterator pred_iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00247">MachineBasicBlock.h:247</a></div></div>
<div class="ttc" id="classllvm_1_1MCRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1MCRegisterInfo.html">llvm::MCRegisterInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="MCRegisterInfo_8h_source.html#l00135">MCRegisterInfo.h:135</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_aabad9b72f6d20d3462efc34020d39f73"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">llvm::MachineInstr::getParent</a></div><div class="ttdeci">const MachineBasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00119">MachineInstr.h:119</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html">llvm::TargetInstrInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00047">TargetInstrInfo.h:47</a></div></div>
<div class="ttc" id="classllvm_1_1BranchProbability_html"><div class="ttname"><a href="classllvm_1_1BranchProbability.html">llvm::BranchProbability</a></div><div class="ttdef"><b>Definition:</b> <a href="BranchProbability_8h_source.html#l00025">BranchProbability.h:25</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a1e1d26226c627cf3dcf3c191b85e7d7d"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a1e1d26226c627cf3dcf3c191b85e7d7d">llvm::MachineInstr::isDebugValue</a></div><div class="ttdeci">bool isDebugValue() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00639">MachineInstr.h:639</a></div></div>
<div class="ttc" id="IfConversion_8cpp_html_af926e9c6c3e282daa413734db9c79884"><div class="ttname"><a href="IfConversion_8cpp.html#af926e9c6c3e282daa413734db9c79884">DisableTriangleR</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; DisableTriangleR(&quot;disable-ifcvt-triangle-rev&quot;, cl::init(false), cl::Hidden)</div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ac51be7ff80fe8d6ae5e8c0acb194908a"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">llvm::MachineBasicBlock::iterator</a></div><div class="ttdeci">bundle_iterator&lt; MachineInstr, instr_iterator &gt; iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00212">MachineBasicBlock.h:212</a></div></div>
<div class="ttc" id="namespacellvm_1_1A64DB_html_a6fce8157775f3ec93f326b52b0f1e0f5a4916e736d6b7cc68359b39d5eb50f6db"><div class="ttname"><a href="namespacellvm_1_1A64DB.html#a6fce8157775f3ec93f326b52b0f1e0f5a4916e736d6b7cc68359b39d5eb50f6db">llvm::A64DB::ST</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00178">AArch64BaseInfo.h:178</a></div></div>
<div class="ttc" id="CommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRegUnits_html_a31209f88fd8eacaa8ef67a36063fbf39"><div class="ttname"><a href="classllvm_1_1LiveRegUnits.html#a31209f88fd8eacaa8ef67a36063fbf39">llvm::LiveRegUnits::addLiveIns</a></div><div class="ttdeci">void addLiveIns(const MachineBasicBlock *MBB, const MCRegisterInfo &amp;MCRI)</div><div class="ttdoc">Adds all registers in the live-in list of block BB. </div><div class="ttdef"><b>Definition:</b> <a href="LiveRegUnits_8cpp_source.html#l00105">LiveRegUnits.cpp:105</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00314">CommandLine.h:314</a></div></div>
<div class="ttc" id="IfConversion_8cpp_html_ac3ecfd2e4efef37daed6d6fdea800a28"><div class="ttname"><a href="IfConversion_8cpp.html#ac3ecfd2e4efef37daed6d6fdea800a28">findFalseBlock</a></div><div class="ttdeci">static MachineBasicBlock * findFalseBlock(MachineBasicBlock *BB, MachineBasicBlock *TrueBB)</div><div class="ttdef"><b>Definition:</b> <a href="IfConversion_8cpp_source.html#l00433">IfConversion.cpp:433</a></div></div>
<div class="ttc" id="LLParser_8cpp_html_aae58e3df0180401e8f3ab75c18fbc07a"><div class="ttname"><a href="LLParser_8cpp.html#aae58e3df0180401e8f3ab75c18fbc07a">if</a></div><div class="ttdeci">* if(!EatIfPresent(lltok::kw_thread_local)) return false</div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a0359a738e0412c5a7ea55d61175e0661"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a0359a738e0412c5a7ea55d61175e0661">llvm::MachineBasicBlock::pred_end</a></div><div class="ttdeci">pred_iterator pred_end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00262">MachineBasicBlock.h:262</a></div></div>
<div class="ttc" id="classllvm_1_1SmallSet_html"><div class="ttname"><a href="classllvm_1_1SmallSet.html">llvm::SmallSet</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00031">SmallSet.h:31</a></div></div>
<div class="ttc" id="TargetInstrInfo_8h_html"><div class="ttname"><a href="TargetInstrInfo_8h.html">TargetInstrInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a302e45878c6dc1714334c7ce96d56846"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">llvm::MachineInstr::getOperand</a></div><div class="ttdeci">const MachineOperand &amp; getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00267">MachineInstr.h:267</a></div></div>
<div class="ttc" id="IfConversion_8cpp_html_acc027d308f8cc078b60fa32d4ae5b53a"><div class="ttname"><a href="IfConversion_8cpp.html#acc027d308f8cc078b60fa32d4ae5b53a">DisableTriangleF</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; DisableTriangleF(&quot;disable-ifcvt-triangle-false&quot;, cl::init(false), cl::Hidden)</div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html">llvm::MachineBasicBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00062">MachineBasicBlock.h:62</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00037">PassAnalysisSupport.h:37</a></div></div>
<div class="ttc" id="namespacellvm_html_aa1704159f75e6eacd595962ea6d93ffe"><div class="ttname"><a href="namespacellvm.html#aa1704159f75e6eacd595962ea6d93ffe">llvm::next</a></div><div class="ttdeci">ItTy next(ItTy it, Dist n)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00154">STLExtras.h:154</a></div></div>
<div class="ttc" id="IfConversion_8cpp_html_aa638e3e05e566d44b8ea38db5ea7535c"><div class="ttname"><a href="IfConversion_8cpp.html#aa638e3e05e566d44b8ea38db5ea7535c">InsertUncondBranch</a></div><div class="ttdeci">static void InsertUncondBranch(MachineBasicBlock *BB, MachineBasicBlock *ToBB, const TargetInstrInfo *TII)</div><div class="ttdef"><b>Definition:</b> <a href="IfConversion_8cpp_source.html#l00953">IfConversion.cpp:953</a></div></div>
<div class="ttc" id="LiveRegUnits_8h_html"><div class="ttname"><a href="LiveRegUnits_8h.html">LiveRegUnits.h</a></div></div>
<div class="ttc" id="IfConversion_8cpp_html_a77ebeaa378cbf131c8fad61d81be6e96"><div class="ttname"><a href="IfConversion_8cpp.html#a77ebeaa378cbf131c8fad61d81be6e96">RemoveKills</a></div><div class="ttdeci">static void RemoveKills(MachineInstr &amp;MI, const LiveRegUnits &amp;DontKill, const MCRegisterInfo &amp;MCRI)</div><div class="ttdef"><b>Definition:</b> <a href="IfConversion_8cpp_source.html#l00999">IfConversion.cpp:999</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBranchProbabilityInfo_html"><div class="ttname"><a href="classllvm_1_1MachineBranchProbabilityInfo.html">llvm::MachineBranchProbabilityInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineBranchProbabilityInfo_8h_source.html#l00024">MachineBranchProbabilityInfo.h:24</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a6321b189ea8fd5058663f8a87d6c23e9"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a6321b189ea8fd5058663f8a87d6c23e9">llvm::MachineBasicBlock::succ_begin</a></div><div class="ttdeci">succ_iterator succ_begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00276">MachineBasicBlock.h:276</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html">llvm::TargetRegisterInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00219">TargetRegisterInfo.h:219</a></div></div>
<div class="ttc" id="classllvm_1_1MCSubRegIterator_html"><div class="ttname"><a href="classllvm_1_1MCSubRegIterator.html">llvm::MCSubRegIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="MCRegisterInfo_8h_source.html#l00441">MCRegisterInfo.h:441</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ab644fcf07a4c2708333cf66276282357"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ab644fcf07a4c2708333cf66276282357">llvm::MachineBasicBlock::pred_begin</a></div><div class="ttdeci">pred_iterator pred_begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00260">MachineBasicBlock.h:260</a></div></div>
<div class="ttc" id="classllvm_1_1TargetLoweringBase_html"><div class="ttname"><a href="classllvm_1_1TargetLoweringBase.html">llvm::TargetLoweringBase</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00073">TargetLowering.h:73</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html"><div class="ttname"><a href="classllvm_1_1BranchFolder.html">llvm::BranchFolder</a></div><div class="ttdef"><b>Definition:</b> <a href="BranchFolding_8h_source.html#l00024">BranchFolding.h:24</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_aca9723bc8d8b4a98a676f811db525732"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#aca9723bc8d8b4a98a676f811db525732">llvm::TargetInstrInfo::PredicateInstruction</a></div><div class="ttdeci">virtual bool PredicateInstruction(MachineInstr *MI, const SmallVectorImpl&lt; MachineOperand &gt; &amp;Pred) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8cpp_source.html#l00214">TargetInstrInfo.cpp:214</a></div></div>
<div class="ttc" id="classllvm_1_1ConstMIBundleOperands_html"><div class="ttname"><a href="classllvm_1_1ConstMIBundleOperands.html">llvm::ConstMIBundleOperands</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBundle_8h_source.html#l00242">MachineInstrBundle.h:242</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_a2a2df5a25b9c703e74e82b48a75d0c3d"><div class="ttname"><a href="Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a></div><div class="ttdeci">instcombine should handle this C2 when C1</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00300">Target/README.txt:300</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_ac485421b5fcb9454ea64e74f6396a810"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ac485421b5fcb9454ea64e74f6396a810">llvm::MachineFunction::CloneMachineInstr</a></div><div class="ttdeci">MachineInstr * CloneMachineInstr(const MachineInstr *Orig)</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8cpp_source.html#l00184">MachineFunction.cpp:184</a></div></div>
<div class="ttc" id="namespacellvm_1_1EngineKind_html_a9df47239a42cd9621ac26d9ecbd57441"><div class="ttname"><a href="namespacellvm_1_1EngineKind.html#a9df47239a42cd9621ac26d9ecbd57441">llvm::EngineKind::Kind</a></div><div class="ttdeci">Kind</div><div class="ttdef"><b>Definition:</b> <a href="ExecutionEngine_2ExecutionEngine_8h_source.html#l00499">ExecutionEngine/ExecutionEngine.h:499</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html"><div class="ttname"><a href="classllvm_1_1MachineOperand.html">llvm::MachineOperand</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00043">MachineOperand.h:43</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00880">SmallVector.h:880</a></div></div>
<div class="ttc" id="IfConversion_8cpp_html_a879b1e24c706cfbdf2ef1fb0b8bc2aaa"><div class="ttname"><a href="IfConversion_8cpp.html#a879b1e24c706cfbdf2ef1fb0b8bc2aaa">DisableTriangle</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; DisableTriangle(&quot;disable-ifcvt-triangle&quot;, cl::init(false), cl::Hidden)</div></div>
<div class="ttc" id="namespacellvm_1_1PPC_html_a14028f7fe73a11dabc6583510cc0a355"><div class="ttname"><a href="namespacellvm_1_1PPC.html#a14028f7fe73a11dabc6583510cc0a355">llvm::PPC::Predicate</a></div><div class="ttdeci">Predicate</div><div class="ttdoc">Predicate - These are &quot;(BI &lt;&lt; 5) | BO&quot; for various predicates. </div><div class="ttdef"><b>Definition:</b> <a href="PPCPredicates_8h_source.html#l00027">PPCPredicates.h:27</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_a8de7d5cf38939044471c6ee60a01a3df"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a8de7d5cf38939044471c6ee60a01a3df">llvm::MachineOperand::isDef</a></div><div class="ttdeci">bool isDef() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00274">MachineOperand.h:274</a></div></div>
<div class="ttc" id="PassSupport_8h_html_aaa970fc931c1c63037a8182e028d04b1"><div class="ttname"><a href="PassSupport_8h.html#aaa970fc931c1c63037a8182e028d04b1">INITIALIZE_PASS_BEGIN</a></div><div class="ttdeci">#define INITIALIZE_PASS_BEGIN(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00164">PassSupport.h:164</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_a19bb501f3f8e5b43549b3aa668ee0780"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#a19bb501f3f8e5b43549b3aa668ee0780">llvm::TargetInstrInfo::isPredicable</a></div><div class="ttdeci">virtual bool isPredicable(MachineInstr *MI) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00705">TargetInstrInfo.h:705</a></div></div>
<div class="ttc" id="IfConversion_8cpp_html_ab7b1a6b123d9d2cb4e2d23ad9a3aaa98"><div class="ttname"><a href="IfConversion_8cpp.html#ab7b1a6b123d9d2cb4e2d23ad9a3aaa98">IfCvtLimit</a></div><div class="ttdeci">static cl::opt&lt; int &gt; IfCvtLimit(&quot;ifcvt-limit&quot;, cl::init(-1), cl::Hidden)</div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_a8afe41bda071ea77c815f7bd436fdd82"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#a8afe41bda071ea77c815f7bd436fdd82">llvm::TargetInstrInfo::InsertBranch</a></div><div class="ttdeci">virtual unsigned InsertBranch(MachineBasicBlock &amp;MBB, MachineBasicBlock *TBB, MachineBasicBlock *FBB, const SmallVectorImpl&lt; MachineOperand &gt; &amp;Cond, DebugLoc DL) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00311">TargetInstrInfo.h:311</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00101">Debug.cpp:101</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRegUnits_html_a6ef6f73a18b55985181e4b81897633de"><div class="ttname"><a href="classllvm_1_1LiveRegUnits.html#a6ef6f73a18b55985181e4b81897633de">llvm::LiveRegUnits::addReg</a></div><div class="ttdeci">void addReg(unsigned Reg, const MCRegisterInfo &amp;MCRI)</div><div class="ttdoc">Adds a register to the set. </div><div class="ttdef"><b>Definition:</b> <a href="LiveRegUnits_8h_source.html#l00050">LiveRegUnits.h:50</a></div></div>
<div class="ttc" id="namespacestd_html_ab8424022895aee3e366fb9a32f2883cb"><div class="ttname"><a href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a></div><div class="ttdeci">void swap(llvm::BitVector &amp;LHS, llvm::BitVector &amp;RHS)</div><div class="ttdoc">Implement std::swap in terms of BitVector swap. </div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00591">BitVector.h:591</a></div></div>
<div class="ttc" id="CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2README_8txt_source.html#l00036">CodeGen/README.txt:36</a></div></div>
<div class="ttc" id="BranchFolding_8h_html"><div class="ttname"><a href="BranchFolding_8h.html">BranchFolding.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a55f1c19ebb9fce7a442816eeb154174f"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a55f1c19ebb9fce7a442816eeb154174f">llvm::MachineInstr::isSafeToMove</a></div><div class="ttdeci">bool isSafeToMove(const TargetInstrInfo *TII, AliasAnalysis *AA, bool &amp;SawStore) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8cpp_source.html#l01228">MachineInstr.cpp:1228</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRegUnits_html_ac1ef7af6d10e09576161728fe5ad92a4"><div class="ttname"><a href="classllvm_1_1LiveRegUnits.html#ac1ef7af6d10e09576161728fe5ad92a4">llvm::LiveRegUnits::stepBackward</a></div><div class="ttdeci">void stepBackward(const MachineInstr &amp;MI, const MCRegisterInfo &amp;MCRI)</div><div class="ttdoc">Simulates liveness when stepping backwards over an instruction(bundle): Remove Defs, add uses. </div><div class="ttdef"><b>Definition:</b> <a href="LiveRegUnits_8cpp_source.html#l00047">LiveRegUnits.cpp:47</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html">llvm::MachineRegisterInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00030">MachineRegisterInfo.h:30</a></div></div>
<div class="ttc" id="classllvm_1_1TargetSubtargetInfo_html"><div class="ttname"><a href="classllvm_1_1TargetSubtargetInfo.html">llvm::TargetSubtargetInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetSubtargetInfo_8h_source.html#l00037">TargetSubtargetInfo.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a8a045d250952c0867382a9840ee18fdf"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">llvm::SmallVectorTemplateCommon&lt; T &gt;::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00112">SmallVector.h:112</a></div></div>
<div class="ttc" id="classllvm_1_1SmallSet_html_ab28aa342862f6d16361be514fd98c22e"><div class="ttname"><a href="classllvm_1_1SmallSet.html#ab28aa342862f6d16361be514fd98c22e">llvm::SmallSet::count</a></div><div class="ttdeci">bool count(const T &amp;V) const </div><div class="ttdoc">count - Return true if the element is in the set. </div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00048">SmallSet.h:48</a></div></div>
<div class="ttc" id="IfConversion_8cpp_html_a92ccd0b2fc8a05d21d5dfca4ec0083b0"><div class="ttname"><a href="IfConversion_8cpp.html#a92ccd0b2fc8a05d21d5dfca4ec0083b0">MaySpeculate</a></div><div class="ttdeci">static bool MaySpeculate(const MachineInstr *MI, SmallSet&lt; unsigned, 4 &gt; &amp;LaterRedefs, const TargetInstrInfo *TII)</div><div class="ttdef"><b>Definition:</b> <a href="IfConversion_8cpp_source.html#l01458">IfConversion.cpp:1458</a></div></div>
<div class="ttc" id="MachineRegisterInfo_8h_html"><div class="ttname"><a href="MachineRegisterInfo_8h.html">MachineRegisterInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html"><div class="ttname"><a href="classllvm_1_1MachineInstr.html">llvm::MachineInstr</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00050">MachineInstr.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a654b11787ac7c4344084d98bea7cf626"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a654b11787ac7c4344084d98bea7cf626">llvm::MachineBasicBlock::const_iterator</a></div><div class="ttdeci">bundle_iterator&lt; const MachineInstr, const_instr_iterator &gt; const_iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00214">MachineBasicBlock.h:214</a></div></div>
<div class="ttc" id="MachineModuleInfo_8h_html"><div class="ttname"><a href="MachineModuleInfo_8h.html">MachineModuleInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l01149">CommandLine.h:1149</a></div></div>
<div class="ttc" id="IfConversion_8cpp_html_a16f61dfadfaed6ae1a56320217096bd2"><div class="ttname"><a href="IfConversion_8cpp.html#a16f61dfadfaed6ae1a56320217096bd2">canFallThroughTo</a></div><div class="ttdeci">static bool canFallThroughTo(MachineBasicBlock *BB, MachineBasicBlock *ToBB)</div><div class="ttdef"><b>Definition:</b> <a href="IfConversion_8cpp_source.html#l00922">IfConversion.cpp:922</a></div></div>
<div class="ttc" id="IfConversion_8cpp_html_a458a8cd09eba3314ad5af0bd4ba14cf6"><div class="ttname"><a href="IfConversion_8cpp.html#a458a8cd09eba3314ad5af0bd4ba14cf6">IfCvtFnStart</a></div><div class="ttdeci">static cl::opt&lt; int &gt; IfCvtFnStart(&quot;ifcvt-fn-start&quot;, cl::init(-1), cl::Hidden)</div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_a0a6fbb065b05fae5d31013246c4ea8d9"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#a0a6fbb065b05fae5d31013246c4ea8d9">llvm::TargetInstrInfo::isProfitableToIfCvt</a></div><div class="ttdeci">virtual bool isProfitableToIfCvt(MachineBasicBlock &amp;MBB, unsigned NumCycles, unsigned ExtraPredCycles, const BranchProbability &amp;Probability) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00338">TargetInstrInfo.h:338</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunctionPass_html_aa1eece37d175f86a6f4808c0c167f13b"><div class="ttname"><a href="classllvm_1_1MachineFunctionPass.html#aa1eece37d175f86a6f4808c0c167f13b">llvm::MachineFunctionPass::getAnalysisUsage</a></div><div class="ttdeci">virtual void getAnalysisUsage(AnalysisUsage &amp;AU) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineFunctionPass_8cpp_source.html#l00036">MachineFunctionPass.cpp:36</a></div></div>
<div class="ttc" id="IfConversion_8cpp_html_a4fb323a363a997ef526aa5404afd1823"><div class="ttname"><a href="IfConversion_8cpp.html#a4fb323a363a997ef526aa5404afd1823">IfCvtBranchFold</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; IfCvtBranchFold(&quot;ifcvt-branch-fold&quot;, cl::init(true), cl::Hidden)</div></div>
<div class="ttc" id="classllvm_1_1LiveRegUnits_html_af7e9f52f2a85f51a9c8e8d5f54238343"><div class="ttname"><a href="classllvm_1_1LiveRegUnits.html#af7e9f52f2a85f51a9c8e8d5f54238343">llvm::LiveRegUnits::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="LiveRegUnits_8h_source.html#l00045">LiveRegUnits.h:45</a></div></div>
<div class="ttc" id="namespacellvm_html_ad6820b1346e9140b1b40af95c5ec190a"><div class="ttname"><a href="namespacellvm.html#ad6820b1346e9140b1b40af95c5ec190a">llvm::IfConverterID</a></div><div class="ttdeci">char &amp; IfConverterID</div><div class="ttdoc">IfConverter - This pass performs machine code if conversion. </div><div class="ttdef"><b>Definition:</b> <a href="IfConversion_8cpp_source.html#l00263">IfConversion.cpp:263</a></div></div>
<div class="ttc" id="TargetRegisterInfo_8h_html"><div class="ttname"><a href="TargetRegisterInfo_8h.html">TargetRegisterInfo.h</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="IfConversion_8cpp_html_a216ab4a5aced8feffb4c9fa452616f78"><div class="ttname"><a href="IfConversion_8cpp.html#a216ab4a5aced8feffb4c9fa452616f78">DisableSimpleF</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; DisableSimpleF(&quot;disable-ifcvt-simple-false&quot;, cl::init(false), cl::Hidden)</div></div>
<div class="ttc" id="classllvm_1_1MachineInstrBuilder_html"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html">llvm::MachineInstrBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00045">MachineInstrBuilder.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRegUnits_html"><div class="ttname"><a href="classllvm_1_1LiveRegUnits.html">llvm::LiveRegUnits</a></div><div class="ttdef"><b>Definition:</b> <a href="LiveRegUnits_8h_source.html#l00031">LiveRegUnits.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1TargetSchedModel_html_a16d6c2f29862a9d10dc7dc4540e9d04f"><div class="ttname"><a href="classllvm_1_1TargetSchedModel.html#a16d6c2f29862a9d10dc7dc4540e9d04f">llvm::TargetSchedModel::computeInstrLatency</a></div><div class="ttdeci">unsigned computeInstrLatency(const MachineInstr *MI, bool UseDefaultDefLatency=true) const </div><div class="ttdoc">Compute the instruction latency based on the available machine model. </div><div class="ttdef"><b>Definition:</b> <a href="TargetSchedule_8cpp_source.html#l00229">TargetSchedule.cpp:229</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRegUnits_html_afe0403964d5e64236d0659738fc0b0c9"><div class="ttname"><a href="classllvm_1_1LiveRegUnits.html#afe0403964d5e64236d0659738fc0b0c9">llvm::LiveRegUnits::empty</a></div><div class="ttdeci">bool empty() const </div><div class="ttdef"><b>Definition:</b> <a href="LiveRegUnits_8h_source.html#l00047">LiveRegUnits.h:47</a></div></div>
<div class="ttc" id="MachineBranchProbabilityInfo_8h_html"><div class="ttname"><a href="MachineBranchProbabilityInfo_8h.html">MachineBranchProbabilityInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_ab75f703d251cc0ce0206fe00a999db86"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">llvm::MachineOperand::getReg</a></div><div class="ttdeci">unsigned getReg() const </div><div class="ttdoc">getReg - Returns the register number. </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00259">MachineOperand.h:259</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperandIteratorBase_html_af3802cbef7a57e8de316fe13fbed8e67"><div class="ttname"><a href="classllvm_1_1MachineOperandIteratorBase.html#af3802cbef7a57e8de316fe13fbed8e67">llvm::MachineOperandIteratorBase::isValid</a></div><div class="ttdeci">bool isValid() const </div><div class="ttdoc">isValid - Returns true until all the operands have been visited. </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBundle_8h_source.html#l00135">MachineInstrBundle.h:135</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a0848c971395758cf592821550b725853"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a0848c971395758cf592821550b725853">llvm::MachineBasicBlock::reverse_iterator</a></div><div class="ttdeci">std::reverse_iterator&lt; iterator &gt; reverse_iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00216">MachineBasicBlock.h:216</a></div></div>
<div class="ttc" id="MachineFunctionPass_8h_html"><div class="ttname"><a href="MachineFunctionPass_8h.html">MachineFunctionPass.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1A64CC_html_af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442"><div class="ttname"><a href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">llvm::A64CC::MI</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00035">AArch64BaseInfo.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_a340712de3e78fec11c338735cab17df7"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">llvm::MachineFunction::iterator</a></div><div class="ttdeci">BasicBlockListType::iterator iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00303">MachineFunction.h:303</a></div></div>
<div class="ttc" id="Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00097">Debug.h:97</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_a2a69dd402cbc7f6282c93c32161395bc"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#a2a69dd402cbc7f6282c93c32161395bc">llvm::TargetInstrInfo::isPredicated</a></div><div class="ttdeci">virtual bool isPredicated(const MachineInstr *MI) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00672">TargetInstrInfo.h:672</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRegUnits_html_aecc1788de77cc6f24dd6ff383fd3c5de"><div class="ttname"><a href="classllvm_1_1LiveRegUnits.html#aecc1788de77cc6f24dd6ff383fd3c5de">llvm::LiveRegUnits::init</a></div><div class="ttdeci">void init(const TargetRegisterInfo *TRI)</div><div class="ttdef"><b>Definition:</b> <a href="LiveRegUnits_8h_source.html#l00040">LiveRegUnits.h:40</a></div></div>
<div class="ttc" id="MCModuleYAML_8cpp_html_a5e410df3f6875c5af4a7f2be284f235d"><div class="ttname"><a href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a></div><div class="ttdeci">const MCRegisterInfo &amp; MRI</div><div class="ttdef"><b>Definition:</b> <a href="MCModuleYAML_8cpp_source.html#l00056">MCModuleYAML.cpp:56</a></div></div>
<div class="ttc" id="raw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="classllvm_1_1BranchFolder_html_a79c0c5340d25122d14d264f3281bdfe4"><div class="ttname"><a href="classllvm_1_1BranchFolder.html#a79c0c5340d25122d14d264f3281bdfe4">llvm::BranchFolder::OptimizeFunction</a></div><div class="ttdeci">bool OptimizeFunction(MachineFunction &amp;MF, const TargetInstrInfo *tii, const TargetRegisterInfo *tri, MachineModuleInfo *mmi)</div><div class="ttdef"><b>Definition:</b> <a href="BranchFolding_8cpp_source.html#l00174">BranchFolding.cpp:174</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRegUnits_html_a1419cff2c2e4f3249f5d6b659225588a"><div class="ttname"><a href="classllvm_1_1LiveRegUnits.html#a1419cff2c2e4f3249f5d6b659225588a">llvm::LiveRegUnits::removeReg</a></div><div class="ttdeci">void removeReg(unsigned Reg, const MCRegisterInfo &amp;MCRI)</div><div class="ttdoc">Removes a register from the set. </div><div class="ttdef"><b>Definition:</b> <a href="LiveRegUnits_8h_source.html#l00056">LiveRegUnits.h:56</a></div></div>
<div class="ttc" id="IfConversion_8cpp_html_a4f907acc755e76ff7d23b5ac5a45ea0f"><div class="ttname"><a href="IfConversion_8cpp.html#a4f907acc755e76ff7d23b5ac5a45ea0f">UpdatePredRedefs</a></div><div class="ttdeci">static void UpdatePredRedefs(MachineInstr *MI, LiveRegUnits &amp;Redefs, const TargetRegisterInfo *TRI)</div><div class="ttdef"><b>Definition:</b> <a href="IfConversion_8cpp_source.html#l00971">IfConversion.cpp:971</a></div></div>
<div class="ttc" id="CodeGen_2Passes_8h_html"><div class="ttname"><a href="CodeGen_2Passes_8h.html">Passes.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstrBuilder_html_a5125cce72b214df09ca8f93dcbbf4c3a"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#a5125cce72b214df09ca8f93dcbbf4c3a">llvm::MachineInstrBuilder::addReg</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addReg(unsigned RegNo, unsigned flags=0, unsigned SubReg=0) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00064">MachineInstrBuilder.h:64</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_a9838b8c2c1e3d71ad10ee23d112f8196"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#a9838b8c2c1e3d71ad10ee23d112f8196">llvm::TargetInstrInfo::isProfitableToUnpredicate</a></div><div class="ttdeci">virtual bool isProfitableToUnpredicate(MachineBasicBlock &amp;TMBB, MachineBasicBlock &amp;FMBB) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00382">TargetInstrInfo.h:382</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ac9786455bc217ebd35377bb5d5ec8f20"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ac9786455bc217ebd35377bb5d5ec8f20">llvm::MachineBasicBlock::pred_size</a></div><div class="ttdeci">unsigned pred_size() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00272">MachineBasicBlock.h:272</a></div></div>
<div class="ttc" id="TargetLowering_8h_html"><div class="ttname"><a href="TargetLowering_8h.html">TargetLowering.h</a></div></div>
<div class="ttc" id="EarlyIfConversion_8cpp_html_a282d30f7304cc0c9ad4cd81b2ae3e53d"><div class="ttname"><a href="EarlyIfConversion_8cpp.html#a282d30f7304cc0c9ad4cd81b2ae3e53d">Converter</a></div><div class="ttdeci">early Early If Converter</div><div class="ttdef"><b>Definition:</b> <a href="EarlyIfConversion_8cpp_source.html#l00615">EarlyIfConversion.cpp:615</a></div></div>
<div class="ttc" id="IfConversion_8cpp_html_a85b257e1f8f8604483b140e269b6a702"><div class="ttname"><a href="IfConversion_8cpp.html#a85b257e1f8f8604483b140e269b6a702">IfCvtFnStop</a></div><div class="ttdeci">static cl::opt&lt; int &gt; IfCvtFnStop(&quot;ifcvt-fn-stop&quot;, cl::init(-1), cl::Hidden)</div></div>
<div class="ttc" id="classllvm_1_1BranchProbability_html_abdacde00feddf9907be65c48669c98e6"><div class="ttname"><a href="classllvm_1_1BranchProbability.html#abdacde00feddf9907be65c48669c98e6">llvm::BranchProbability::getCompl</a></div><div class="ttdeci">BranchProbability getCompl() const </div><div class="ttdef"><b>Definition:</b> <a href="BranchProbability_8h_source.html#l00045">BranchProbability.h:45</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 22:58:50 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
