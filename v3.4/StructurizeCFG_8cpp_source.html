<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: StructurizeCFG.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('StructurizeCFG_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">StructurizeCFG.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="StructurizeCFG_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===-- StructurizeCFG.cpp ------------------------------------------------===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div><div class="line"><a name="l00010"></a><span class="lineno"><a class="line" href="StructurizeCFG_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   10</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;structurizecfg&quot;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Transforms_2Scalar_8h.html">llvm/Transforms/Scalar.h</a>&quot;</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MapVector_8h.html">llvm/ADT/MapVector.h</a>&quot;</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SCCIterator_8h.html">llvm/ADT/SCCIterator.h</a>&quot;</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="RegionInfo_8h.html">llvm/Analysis/RegionInfo.h</a>&quot;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="RegionIterator_8h.html">llvm/Analysis/RegionIterator.h</a>&quot;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="RegionPass_8h.html">llvm/Analysis/RegionPass.h</a>&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Module_8h.html">llvm/IR/Module.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PatternMatch_8h.html">llvm/Support/PatternMatch.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SSAUpdater_8h.html">llvm/Transforms/Utils/SSAUpdater.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm_1_1PatternMatch.html">llvm::PatternMatch</a>;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">// Definition of the complex types used in this pass.</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="keyword">typedef</span> std::pair&lt;BasicBlock *, Value *&gt; BBValuePair;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keyword">typedef</span> <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;RegionNode*, 8&gt;</a> RNVector;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="keyword">typedef</span> <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock*, 8&gt;</a> BBVector;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="keyword">typedef</span> <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BranchInst*, 8&gt;</a> BranchVector;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="keyword">typedef</span> <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BBValuePair, 2&gt;</a> BBValueVector;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="keyword">typedef</span> <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 8&gt;</a> BBSet;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="keyword">typedef</span> <a class="code" href="classllvm_1_1MapVector.html">MapVector&lt;PHINode *, BBValueVector&gt;</a> PhiMap;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="keyword">typedef</span> <a class="code" href="classllvm_1_1MapVector.html">MapVector&lt;BasicBlock *, BBVector&gt;</a> BB2BBVecMap;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="keyword">typedef</span> <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;DomTreeNode *, unsigned&gt;</a> DTN2UnsignedMap;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="keyword">typedef</span> <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;BasicBlock *, PhiMap&gt;</a> BBPhiMap;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="keyword">typedef</span> <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;BasicBlock *, Value *&gt;</a> BBPredicates;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="keyword">typedef</span> <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;BasicBlock *, BBPredicates&gt;</a> PredMap;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="keyword">typedef</span> <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;BasicBlock *, BasicBlock*&gt;</a> BB2BBMap;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">// The name for newly created blocks.</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> FlowBlockName = <span class="stringliteral">&quot;Flow&quot;</span>;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">/// @brief Find the nearest common dominator for multiple BasicBlocks</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">/// Helper class for StructurizeCFG</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">/// TODO: Maybe move into common code</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment"></span><span class="keyword">class </span>NearestCommonDominator {</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  DTN2UnsignedMap IndexMap;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Result;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <span class="keywordtype">unsigned</span> ResultIndex;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="keywordtype">bool</span> ExplicitMentioned;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="keyword">public</span>:<span class="comment"></span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">  /// \brief Start a new query</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment"></span>  NearestCommonDominator(<a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DomTree) {</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    DT = DomTree;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    Result = 0;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  }</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">  /// \brief Add BB to the resulting dominator</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> addBlock(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <span class="keywordtype">bool</span> Remember = <span class="keyword">true</span>) {</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <a class="code" href="classllvm_1_1DomTreeNodeBase.html">DomTreeNode</a> *Node = DT-&gt;<a class="code" href="classllvm_1_1DominatorTree.html#a307665a69dff132a967d4f0d2acd3791">getNode</a>(BB);</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordflow">if</span> (Result == 0) {</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;      <span class="keywordtype">unsigned</span> Numbering = 0;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;      <span class="keywordflow">for</span> (;Node;Node = Node-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#a7519f9ffdda3ef1147e2563200587193">getIDom</a>())</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        IndexMap[Node] = ++Numbering;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;      Result = <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;      ResultIndex = 1;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;      ExplicitMentioned = Remember;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    }</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordflow">for</span> (;Node;Node = Node-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#a7519f9ffdda3ef1147e2563200587193">getIDom</a>())</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;      <span class="keywordflow">if</span> (IndexMap.count(Node))</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        IndexMap[Node] = 0;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    assert(Node &amp;&amp; <span class="stringliteral">&quot;Dominator tree invalid!&quot;</span>);</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordtype">unsigned</span> Numbering = IndexMap[Node];</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordflow">if</span> (Numbering &gt; ResultIndex) {</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      Result = Node-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#a96fd2f0087c41942dd2618ff6e1b8640">getBlock</a>();</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      ResultIndex = Numbering;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      ExplicitMentioned = Remember &amp;&amp; (Result == <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Numbering == ResultIndex) {</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      ExplicitMentioned |= Remember;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    }</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  }</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">  /// \brief Is &quot;Result&quot; one of the BBs added with &quot;Remember&quot; = True?</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> wasResultExplicitMentioned() {</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordflow">return</span> ExplicitMentioned;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  }</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">  /// \brief Get the query result</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *getResult() {</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordflow">return</span> Result;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  }</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;};</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">/// @brief Transforms the control flow graph on one single entry/exit region</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">/// at a time.</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">/// After the transform all &quot;If&quot;/&quot;Then&quot;/&quot;Else&quot; style control flow looks like</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">/// this:</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">/// \verbatim</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">/// 1</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">/// ||</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">/// | |</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">/// 2 |</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">/// | /</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">/// |/</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">/// 3</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">/// ||   Where:</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">/// | |  1 = &quot;If&quot; block, calculates the condition</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">/// 4 |  2 = &quot;Then&quot; subregion, runs if the condition is true</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">/// | /  3 = &quot;Flow&quot; blocks, newly inserted flow blocks, rejoins the flow</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">/// |/   4 = &quot;Else&quot; optional subregion, runs if the condition is false</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">/// 5    5 = &quot;End&quot; block, also rejoins the control flow</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">/// \endverbatim</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">/// Control flow is expressed as a branch where the true exit goes into the</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">/// &quot;Then&quot;/&quot;Else&quot; region, while the false exit skips the region</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">/// The condition for the optional &quot;Else&quot; region is expressed as a PHI node.</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">/// The incomming values of the PHI node are true for the &quot;If&quot; edge and false</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">/// for the &quot;Then&quot; edge.</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">/// Additionally to that even complicated loops look like this:</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">/// \verbatim</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">/// 1</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">/// ||</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">/// | |</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">/// 2 ^  Where:</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">/// | /  1 = &quot;Entry&quot; block</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">/// |/   2 = &quot;Loop&quot; optional subregion, with all exits at &quot;Flow&quot; block</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">/// 3    3 = &quot;Flow&quot; block, with back edge to entry block</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">/// |</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">/// \endverbatim</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">/// The back edge of the &quot;Flow&quot; block is always on the false side of the branch</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">/// while the true side continues the general flow. So the loop condition</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">/// consist of a network of PHI nodes where the true incoming values expresses</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">/// breaks and the false values expresses continue states.</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment"></span><span class="keyword">class </span>StructurizeCFG : <span class="keyword">public</span> <a class="code" href="classllvm_1_1RegionPass.html">RegionPass</a> {</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *<a class="code" href="ConvertUTF_8h.html#adaac7155d04f98cee33773208b61f3f8">Boolean</a>;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *BoolTrue;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *BoolFalse;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <a class="code" href="classllvm_1_1UndefValue.html">UndefValue</a> *BoolUndef;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6f">Func</a>;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <a class="code" href="classllvm_1_1Region.html">Region</a> *ParentRegion;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  RNVector Order;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  BBSet Visited;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  BBPhiMap DeletedPhis;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  BB2BBVecMap AddedPhis;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  PredMap Predicates;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  BranchVector Conditions;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  BB2BBMap <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  PredMap LoopPreds;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  BranchVector LoopConds;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <a class="code" href="classllvm_1_1RegionNode.html">RegionNode</a> *PrevNode;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="keywordtype">void</span> orderNodes();</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="keywordtype">void</span> analyzeLoops(<a class="code" href="classllvm_1_1RegionNode.html">RegionNode</a> *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *invert(<a class="code" href="classllvm_1_1Value.html">Value</a> *Condition);</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *buildCondition(<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *Term, <span class="keywordtype">unsigned</span> Idx, <span class="keywordtype">bool</span> Invert);</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <span class="keywordtype">void</span> gatherPredicates(<a class="code" href="classllvm_1_1RegionNode.html">RegionNode</a> *N);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="keywordtype">void</span> collectInfos();</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <span class="keywordtype">void</span> insertConditions(<span class="keywordtype">bool</span> Loops);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="keywordtype">void</span> delPhiValues(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *From, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *To);</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="keywordtype">void</span> addPhiValues(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *From, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *To);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="keywordtype">void</span> setPhiValues();</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="keywordtype">void</span> killTerminator(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="keywordtype">void</span> changeExit(<a class="code" href="classllvm_1_1RegionNode.html">RegionNode</a> *Node, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewExit,</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                  <span class="keywordtype">bool</span> IncludeDominator);</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *getNextFlow(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Dominator);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *needPrefix(<span class="keywordtype">bool</span> NeedEmpty);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *needPostfix(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Flow, <span class="keywordtype">bool</span> ExitUseAllowed);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <span class="keywordtype">void</span> setPrevNode(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <span class="keywordtype">bool</span> dominatesPredicates(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB, <a class="code" href="classllvm_1_1RegionNode.html">RegionNode</a> *Node);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="keywordtype">bool</span> isPredictableTrue(<a class="code" href="classllvm_1_1RegionNode.html">RegionNode</a> *Node);</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="keywordtype">void</span> wireFlow(<span class="keywordtype">bool</span> ExitUseAllowed, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *LoopEnd);</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="keywordtype">void</span> handleLoops(<span class="keywordtype">bool</span> ExitUseAllowed, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *LoopEnd);</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="keywordtype">void</span> createFlow();</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="keywordtype">void</span> rebuildSSA();</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  StructurizeCFG() :</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <a class="code" href="classllvm_1_1RegionPass.html">RegionPass</a>(ID) {</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <a class="code" href="namespacellvm.html#ae729b81a30ad6a8b0028e025d74ff155">initializeStructurizeCFGPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  }</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="keyword">using</span> <a class="code" href="classllvm_1_1Pass.html#ab007d6c51634eb65e4f4f9dab4eb6a8c">Pass::doInitialization</a>;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">bool</span> doInitialization(<a class="code" href="classllvm_1_1Region.html">Region</a> *R, <a class="code" href="classllvm_1_1RGPassManager.html">RGPassManager</a> &amp;RGM);</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">bool</span> runOnRegion(<a class="code" href="classllvm_1_1Region.html">Region</a> *R, <a class="code" href="classllvm_1_1RGPassManager.html">RGPassManager</a> &amp;RGM);</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *getPassName()<span class="keyword"> const </span>{</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;Structurize control flow&quot;</span>;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  }</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const </span>{</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a053677ebc731b47a534f841b11b5cf0c">addRequiredID</a>(<a class="code" href="namespacellvm.html#a84b419f26a692a58d8ed99124c68f89c">LowerSwitchID</a>);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a>&gt;();</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a>&gt;();</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <a class="code" href="classllvm_1_1Pass.html#a048082a5be9ae0d8901ea64de59e5c8f">RegionPass::getAnalysisUsage</a>(AU);</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  }</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;};</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;} <span class="comment">// end anonymous namespace</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">StructurizeCFG::ID</a> = 0;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<a class="code" href="StructurizeCFG_8cpp.html#a06074f1b419ca1b6bd48879adf3a7bbe">INITIALIZE_PASS_BEGIN</a>(StructurizeCFG, <span class="stringliteral">&quot;structurizecfg&quot;</span>, <span class="stringliteral">&quot;Structurize the CFG&quot;</span>,</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                      <span class="keyword">false</span>, <span class="keyword">false</span>)</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(LowerSwitch)</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a>)</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1RegionInfo.html">RegionInfo</a>)</div><div class="line"><a name="l00263"></a><span class="lineno"><a class="line" href="StructurizeCFG_8cpp.html#a53b11141046597311361c18a5b718d1b">  263</a></span>&#160;<a class="code" href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a>(StructurizeCFG, &quot;<a class="code" href="StructurizeCFG_8cpp.html#a53b11141046597311361c18a5b718d1b">structurizecfg</a>&quot;, &quot;Structurize the <a class="code" href="StructurizeCFG_8cpp.html#a80eb276f1afe1f81669f43ab330fe521">CFG</a>&quot;,</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                    <a class="code" href="namespacefalse.html">false</a>, <a class="code" href="namespacefalse.html">false</a>)</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">/// \brief Initialize the types and constants used in the pass</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> StructurizeCFG::doInitialization(<a class="code" href="classllvm_1_1Region.html">Region</a> *R, <a class="code" href="classllvm_1_1RGPassManager.html">RGPassManager</a> &amp;RGM) {</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;Context = R-&gt;getEntry()-&gt;getContext();</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <a class="code" href="ConvertUTF_8h.html#adaac7155d04f98cee33773208b61f3f8">Boolean</a> = <a class="code" href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">Type::getInt1Ty</a>(Context);</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  BoolTrue = <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(Context);</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  BoolFalse = <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(Context);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  BoolUndef = <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(<a class="code" href="ConvertUTF_8h.html#adaac7155d04f98cee33773208b61f3f8">Boolean</a>);</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;}</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">/// \brief Build up the general order of nodes</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> StructurizeCFG::orderNodes() {</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <a class="code" href="classllvm_1_1scc__iterator.html">scc_iterator&lt;Region *&gt;</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="namespacellvm.html#a71882a8257c58a4d9401db39622871a6">scc_begin</a>(ParentRegion),</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                         E = <a class="code" href="namespacellvm.html#a221dd975c8835e667ee59a36d4d6cc92">scc_end</a>(ParentRegion);</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="keywordflow">for</span> (Order.clear(); I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    std::vector&lt;RegionNode *&gt; &amp;Nodes = *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    Order.append(Nodes.begin(), Nodes.end());</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  }</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;}</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">/// \brief Determine the end of the loops</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> StructurizeCFG::analyzeLoops(<a class="code" href="classllvm_1_1RegionNode.html">RegionNode</a> *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) {</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <span class="keywordflow">if</span> (N-&gt;<a class="code" href="classllvm_1_1RegionNode.html#a97c5099e3930b14c7b639417918e35f5">isSubRegion</a>()) {</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="comment">// Test for exit as back edge</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Exit = N-&gt;<a class="code" href="classllvm_1_1RegionNode.html#a6ea5924b7a3b8104f88438522e158e3f">getNodeAs</a>&lt;<a class="code" href="classllvm_1_1Region.html">Region</a>&gt;()-&gt;getExit();</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keywordflow">if</span> (Visited.count(Exit))</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>[Exit] = N-&gt;<a class="code" href="classllvm_1_1RegionNode.html#ae03a8933eabd0024b3b2a9eacb71a9c7">getEntry</a>();</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="comment">// Test for sucessors as back edge</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = N-&gt;<a class="code" href="classllvm_1_1RegionNode.html#a6ea5924b7a3b8104f88438522e158e3f">getNodeAs</a>&lt;<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a>&gt;();</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *Term = cast&lt;BranchInst&gt;(BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>());</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Term-&gt;getNumSuccessors(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Succ = Term-&gt;getSuccessor(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      <span class="keywordflow">if</span> (Visited.count(Succ))</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>[Succ] = BB;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    }</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  }</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;}</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment">/// \brief Invert the given condition</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Value.html">Value</a> *StructurizeCFG::invert(<a class="code" href="classllvm_1_1Value.html">Value</a> *Condition) {</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <span class="comment">// First: Check if it&#39;s a constant</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="keywordflow">if</span> (Condition == BoolTrue)</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordflow">return</span> BoolFalse;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="keywordflow">if</span> (Condition == BoolFalse)</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">return</span> BoolTrue;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="keywordflow">if</span> (Condition == BoolUndef)</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">return</span> BoolUndef;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="comment">// Second: If the condition is already inverted, return the original value</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Condition, <a class="code" href="namespacellvm_1_1PatternMatch.html#a4cfd328368353696e64a4d1b15a7cbfa">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Condition))))</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordflow">return</span> Condition;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst = dyn_cast&lt;Instruction&gt;(Condition)) {</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="comment">// Third: Check all the users for an invert</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Parent = Inst-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>();</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::use_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Condition-&gt;<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>(),</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;           E = Condition-&gt;<a class="code" href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">use_end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1User.html">User</a> = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a>&gt;(*I);</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      <span class="keywordflow">if</span> (!User || User-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>() != Parent)</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(*I, <a class="code" href="namespacellvm_1_1PatternMatch.html#a4cfd328368353696e64a4d1b15a7cbfa">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Condition))))</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <span class="keywordflow">return</span> *I;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    }</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="comment">// Last option: Create a new instruction</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a0ad1d1442a12b21931b730201f58ab5e">BinaryOperator::CreateNot</a>(Condition, <span class="stringliteral">&quot;&quot;</span>, Parent-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>());</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  }</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Argument.html">Argument</a> *Arg = dyn_cast&lt;Argument&gt;(Condition)) {</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;EntryBlock = Arg-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#a30f2c362631e3728d2f47a8203071ade">getEntryBlock</a>();</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a0ad1d1442a12b21931b730201f58ab5e">BinaryOperator::CreateNot</a>(Condition,</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                                     Arg-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>() + <span class="stringliteral">&quot;.inv&quot;</span>,</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                                     EntryBlock.<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>());</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  }</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unhandled condition to invert&quot;</span>);</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;}</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="comment">/// \brief Build the condition for one edge</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Value.html">Value</a> *StructurizeCFG::buildCondition(<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *Term, <span class="keywordtype">unsigned</span> Idx,</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                                      <span class="keywordtype">bool</span> Invert) {</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Cond = Invert ? BoolFalse : BoolTrue;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <span class="keywordflow">if</span> (Term-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a03cc0dff22b31447f43af97acb76b1a2">isConditional</a>()) {</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    Cond = Term-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a84309bb8c34c8bc5694ec5d48dd8668f">getCondition</a>();</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keywordflow">if</span> (Idx != (<span class="keywordtype">unsigned</span>)Invert)</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;      Cond = invert(Cond);</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  }</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <span class="keywordflow">return</span> Cond;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;}</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment">/// \brief Analyze the predecessors of each block and build up predicates</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> StructurizeCFG::gatherPredicates(<a class="code" href="classllvm_1_1RegionNode.html">RegionNode</a> *N) {</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <a class="code" href="classllvm_1_1RegionInfo.html">RegionInfo</a> *RI = ParentRegion-&gt;getRegionInfo();</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = N-&gt;<a class="code" href="classllvm_1_1RegionNode.html#ae03a8933eabd0024b3b2a9eacb71a9c7">getEntry</a>();</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  BBPredicates &amp;Pred = Predicates[<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>];</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  BBPredicates &amp;LPred = LoopPreds[<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>];</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PredIterator.html">pred_iterator</a> PI = <a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(BB), PE = <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(BB);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;       PI != PE; ++PI) {</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="comment">// Ignore it if it&#39;s a branch from outside into our region entry</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordflow">if</span> (!ParentRegion-&gt;contains(*PI))</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <a class="code" href="classllvm_1_1Region.html">Region</a> *R = RI-&gt;<a class="code" href="classllvm_1_1RegionInfo.html#a1d1bd509d95354d7bfd8a4aaf01997a1">getRegionFor</a>(*PI);</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keywordflow">if</span> (R == ParentRegion) {</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      <span class="comment">// It&#39;s a top level block in our region</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *Term = cast&lt;BranchInst&gt;((*PI)-&gt;getTerminator());</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Term-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ac8ebb74c3e3a7813d8433c017c95fc66">getNumSuccessors</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Succ = Term-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        <span class="keywordflow">if</span> (Succ != BB)</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        <span class="keywordflow">if</span> (Visited.count(*PI)) {</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;          <span class="comment">// Normal forward edge</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;          <span class="keywordflow">if</span> (Term-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a03cc0dff22b31447f43af97acb76b1a2">isConditional</a>()) {</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            <span class="comment">// Try to treat it like an ELSE block</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Other = Term-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(!<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            <span class="keywordflow">if</span> (Visited.count(Other) &amp;&amp; !<a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>.count(Other) &amp;&amp;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                !Pred.count(Other) &amp;&amp; !Pred.count(*PI)) {</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;              Pred[Other] = BoolFalse;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;              Pred[*PI] = BoolTrue;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;              <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            }</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;          }</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;          Pred[*PI] = buildCondition(Term, <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, <span class="keyword">false</span>);</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;          <span class="comment">// Back edge</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;          LPred[*PI] = buildCondition(Term, <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, <span class="keyword">true</span>);</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        }</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;      }</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      <span class="comment">// It&#39;s an exit from a sub region</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      <span class="keywordflow">while</span>(R-&gt;<a class="code" href="classllvm_1_1Region.html#a27237a34547a8d7e7c41fe515c5d376f">getParent</a>() != ParentRegion)</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        R = R-&gt;<a class="code" href="classllvm_1_1Region.html#a27237a34547a8d7e7c41fe515c5d376f">getParent</a>();</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      <span class="comment">// Edge from inside a subregion to its entry, ignore it</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      <span class="keywordflow">if</span> (R == N)</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Entry = R-&gt;<a class="code" href="classllvm_1_1Region.html#a546c42b63837e254592d040fcb0a0978">getEntry</a>();</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      <span class="keywordflow">if</span> (Visited.count(Entry))</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        Pred[Entry] = BoolTrue;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        LPred[Entry] = BoolFalse;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    }</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  }</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;}</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment">/// \brief Collect various loop and predicate infos</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> StructurizeCFG::collectInfos() {</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <span class="comment">// Reset predicate</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  Predicates.clear();</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <span class="comment">// and loop infos</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>.clear();</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  LoopPreds.clear();</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  <span class="comment">// Reset the visited nodes</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  Visited.clear();</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="namespacellvm_1_1sys_1_1path.html#a8fb092ecc42706d8901ee791cd6c90a7">RNVector::reverse_iterator</a> OI = Order.rbegin(), OE = Order.rend();</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;       OI != OE; ++OI) {</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="comment">// Analyze all the conditions leading to a node</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    gatherPredicates(*OI);</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="comment">// Remember that we&#39;ve seen this node</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    Visited.insert((*OI)-&gt;getEntry());</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="comment">// Find the last back edges</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    analyzeLoops(*OI);</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  }</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;}</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="comment">/// \brief Insert the missing branch conditions</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> StructurizeCFG::insertConditions(<span class="keywordtype">bool</span> <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>) {</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  BranchVector &amp;Conds = Loops ? LoopConds : Conditions;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1Reloc.html#af59f6dc86e80aaf56f1afd155eebf568a6f9fa4f118519f6df6435bd13317466e">Default</a> = Loops ? BoolTrue : BoolFalse;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <a class="code" href="classllvm_1_1SSAUpdater.html">SSAUpdater</a> PhiInserter;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="keywordflow">for</span> (BranchVector::iterator <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Conds.begin(),</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;       E = Conds.end(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *Term = *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    assert(Term-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a03cc0dff22b31447f43af97acb76b1a2">isConditional</a>());</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Parent = Term-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>();</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SuccTrue = Term-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(0);</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SuccFalse = Term-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">getSuccessor</a>(1);</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    PhiInserter.<a class="code" href="classllvm_1_1SSAUpdater.html#a4fe3279aae4f726813a672d4a9b26cb1">Initialize</a>(<a class="code" href="ConvertUTF_8h.html#adaac7155d04f98cee33773208b61f3f8">Boolean</a>, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    PhiInserter.<a class="code" href="classllvm_1_1SSAUpdater.html#af0d1a82b4e629e834c2ed53e5cbe22ef">AddAvailableValue</a>(&amp;<a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6f">Func</a>-&gt;getEntryBlock(), <a class="code" href="namespacellvm_1_1Reloc.html#af59f6dc86e80aaf56f1afd155eebf568a6f9fa4f118519f6df6435bd13317466e">Default</a>);</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    PhiInserter.<a class="code" href="classllvm_1_1SSAUpdater.html#af0d1a82b4e629e834c2ed53e5cbe22ef">AddAvailableValue</a>(Loops ? SuccFalse : Parent, Default);</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    BBPredicates &amp;Preds = Loops ? LoopPreds[SuccFalse] : Predicates[SuccTrue];</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    NearestCommonDominator Dominator(DT);</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    Dominator.addBlock(Parent, <span class="keyword">false</span>);</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *ParentValue = 0;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keywordflow">for</span> (BBPredicates::iterator PI = Preds.begin(), PE = Preds.end();</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;         PI != PE; ++PI) {</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      <span class="keywordflow">if</span> (PI-&gt;first == Parent) {</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        ParentValue = PI-&gt;second;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      }</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      PhiInserter.<a class="code" href="classllvm_1_1SSAUpdater.html#af0d1a82b4e629e834c2ed53e5cbe22ef">AddAvailableValue</a>(PI-&gt;first, PI-&gt;second);</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      Dominator.addBlock(PI-&gt;first);</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    }</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keywordflow">if</span> (ParentValue) {</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      Term-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a3505dab06f59c36142a234321cdc3411">setCondition</a>(ParentValue);</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;      <span class="keywordflow">if</span> (!Dominator.wasResultExplicitMentioned())</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        PhiInserter.<a class="code" href="classllvm_1_1SSAUpdater.html#af0d1a82b4e629e834c2ed53e5cbe22ef">AddAvailableValue</a>(Dominator.getResult(), <a class="code" href="namespacellvm_1_1Reloc.html#af59f6dc86e80aaf56f1afd155eebf568a6f9fa4f118519f6df6435bd13317466e">Default</a>);</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      Term-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a3505dab06f59c36142a234321cdc3411">setCondition</a>(PhiInserter.<a class="code" href="classllvm_1_1SSAUpdater.html#a5b0e45dbba53e985f1b9c532fb5f200b">GetValueInMiddleOfBlock</a>(Parent));</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    }</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  }</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;}</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="comment">/// \brief Remove all PHI values coming from &quot;From&quot; into &quot;To&quot; and remember</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment">/// them in DeletedPhis</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> StructurizeCFG::delPhiValues(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *From, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *To) {</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  PhiMap &amp;Map = DeletedPhis[To];</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = To-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(), E = To-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>();</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E &amp;&amp; isa&lt;PHINode&gt;(*I);) {</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> &amp;Phi = cast&lt;PHINode&gt;(*I++);</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="keywordflow">while</span> (Phi.<a class="code" href="classllvm_1_1PHINode.html#a5c2b7d7f19aac93b27b845858a7eb73e">getBasicBlockIndex</a>(From) != -1) {</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Deleted = Phi.<a class="code" href="classllvm_1_1PHINode.html#a6f01dbe965b38186b1a78378689d4105">removeIncomingValue</a>(From, <span class="keyword">false</span>);</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;      Map[&amp;Phi].push_back(std::make_pair(From, Deleted));</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    }</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  }</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;}</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment">/// \brief Add a dummy PHI value as soon as we knew the new predecessor</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> StructurizeCFG::addPhiValues(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *From, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *To) {</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = To-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(), E = To-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>();</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E &amp;&amp; isa&lt;PHINode&gt;(*I);) {</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> &amp;Phi = cast&lt;PHINode&gt;(*I++);</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1RegState.html#a079b254e749130fbe5d740f314ca92daab502f975742e9bff6d6dd7b49439b806">Undef</a> = <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(Phi.<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    Phi.<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(Undef, From);</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  }</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  AddedPhis[To].push_back(From);</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;}</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment">/// \brief Add the real PHI value as soon as everything is set up</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> StructurizeCFG::setPhiValues() {</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <a class="code" href="classllvm_1_1SSAUpdater.html">SSAUpdater</a> Updater;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <span class="keywordflow">for</span> (BB2BBVecMap::iterator AI = AddedPhis.begin(), AE = AddedPhis.end();</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;       AI != AE; ++AI) {</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *To = AI-&gt;first;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    BBVector &amp;From = AI-&gt;second;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="keywordflow">if</span> (!DeletedPhis.count(To))</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    PhiMap &amp;Map = DeletedPhis[To];</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="keywordflow">for</span> (PhiMap::iterator PI = Map.begin(), PE = Map.end();</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;         PI != PE; ++PI) {</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;      <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *Phi = PI-&gt;first;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1RegState.html#a079b254e749130fbe5d740f314ca92daab502f975742e9bff6d6dd7b49439b806">Undef</a> = <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(Phi-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>());</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      Updater.<a class="code" href="classllvm_1_1SSAUpdater.html#a4fe3279aae4f726813a672d4a9b26cb1">Initialize</a>(Phi-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      Updater.<a class="code" href="classllvm_1_1SSAUpdater.html#af0d1a82b4e629e834c2ed53e5cbe22ef">AddAvailableValue</a>(&amp;<a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6f">Func</a>-&gt;getEntryBlock(), <a class="code" href="namespacellvm_1_1RegState.html#a079b254e749130fbe5d740f314ca92daab502f975742e9bff6d6dd7b49439b806">Undef</a>);</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      Updater.<a class="code" href="classllvm_1_1SSAUpdater.html#af0d1a82b4e629e834c2ed53e5cbe22ef">AddAvailableValue</a>(To, Undef);</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      NearestCommonDominator Dominator(DT);</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      Dominator.addBlock(To, <span class="keyword">false</span>);</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      <span class="keywordflow">for</span> (BBValueVector::iterator VI = PI-&gt;second.begin(),</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;           VE = PI-&gt;second.end(); VI != VE; ++VI) {</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        Updater.<a class="code" href="classllvm_1_1SSAUpdater.html#af0d1a82b4e629e834c2ed53e5cbe22ef">AddAvailableValue</a>(VI-&gt;first, VI-&gt;second);</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        Dominator.addBlock(VI-&gt;first);</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      }</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      <span class="keywordflow">if</span> (!Dominator.wasResultExplicitMentioned())</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        Updater.<a class="code" href="classllvm_1_1SSAUpdater.html#af0d1a82b4e629e834c2ed53e5cbe22ef">AddAvailableValue</a>(Dominator.getResult(), <a class="code" href="namespacellvm_1_1RegState.html#a079b254e749130fbe5d740f314ca92daab502f975742e9bff6d6dd7b49439b806">Undef</a>);</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      <span class="keywordflow">for</span> (BBVector::iterator FI = From.begin(), FE = From.end();</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;           FI != FE; ++FI) {</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        <span class="keywordtype">int</span> Idx = Phi-&gt;<a class="code" href="classllvm_1_1PHINode.html#a5c2b7d7f19aac93b27b845858a7eb73e">getBasicBlockIndex</a>(*FI);</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        assert(Idx != -1);</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        Phi-&gt;<a class="code" href="classllvm_1_1PHINode.html#a88cdefb709309eddc6e5daca0be6a7b4">setIncomingValue</a>(Idx, Updater.<a class="code" href="classllvm_1_1SSAUpdater.html#acecfb9d97da9885264b3bde6bd6a64e8">GetValueAtEndOfBlock</a>(*FI));</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      }</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    }</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    DeletedPhis.erase(To);</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  }</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  assert(DeletedPhis.empty());</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;}</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="comment">/// \brief Remove phi values from all successors and then remove the terminator.</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> StructurizeCFG::killTerminator(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  <a class="code" href="classllvm_1_1TerminatorInst.html">TerminatorInst</a> *Term = BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>();</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  <span class="keywordflow">if</span> (!Term)</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SuccIterator.html">succ_iterator</a> SI = <a class="code" href="namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">succ_begin</a>(BB), SE = <a class="code" href="namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">succ_end</a>(BB);</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;       SI != SE; ++SI) {</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    delPhiValues(BB, *SI);</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  }</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  Term-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;}</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<span class="comment">/// \brief Let node exit(s) point to NewExit</span></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> StructurizeCFG::changeExit(<a class="code" href="classllvm_1_1RegionNode.html">RegionNode</a> *Node, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewExit,</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                                <span class="keywordtype">bool</span> IncludeDominator) {</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <span class="keywordflow">if</span> (Node-&gt;<a class="code" href="classllvm_1_1RegionNode.html#a97c5099e3930b14c7b639417918e35f5">isSubRegion</a>()) {</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <a class="code" href="classllvm_1_1Region.html">Region</a> *SubRegion = Node-&gt;<a class="code" href="classllvm_1_1RegionNode.html#a6ea5924b7a3b8104f88438522e158e3f">getNodeAs</a>&lt;<a class="code" href="classllvm_1_1Region.html">Region</a>&gt;();</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OldExit = SubRegion-&gt;<a class="code" href="classllvm_1_1Region.html#aa44e67a2a364164d42da8c827208284f">getExit</a>();</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Dominator = 0;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="comment">// Find all the edges from the sub region to the exit</span></div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PredIterator.html">pred_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(OldExit), E = <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(OldExit);</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;         <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E;) {</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB = *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;      <span class="keywordflow">if</span> (!SubRegion-&gt;<a class="code" href="classllvm_1_1Region.html#a9e82ea9f530a4c86bdb57133caed6de4">contains</a>(BB))</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;      <span class="comment">// Modify the edges to point to the new exit</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;      delPhiValues(BB, OldExit);</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1User.html#a1f0b9358936e3e00c42a460abbfb2868">replaceUsesOfWith</a>(OldExit, NewExit);</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;      addPhiValues(BB, NewExit);</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;      <span class="comment">// Find the new dominator (if requested)</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;      <span class="keywordflow">if</span> (IncludeDominator) {</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        <span class="keywordflow">if</span> (!Dominator)</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;          Dominator = <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;          Dominator = DT-&gt;findNearestCommonDominator(Dominator, BB);</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      }</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    }</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <span class="comment">// Change the dominator (if requested)</span></div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keywordflow">if</span> (Dominator)</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      DT-&gt;changeImmediateDominator(NewExit, Dominator);</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="comment">// Update the region info</span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    SubRegion-&gt;<a class="code" href="classllvm_1_1Region.html#af52348bf3d7992c66be0cdf97ceda70b">replaceExit</a>(NewExit);</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB = Node-&gt;<a class="code" href="classllvm_1_1RegionNode.html#a6ea5924b7a3b8104f88438522e158e3f">getNodeAs</a>&lt;<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a>&gt;();</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    killTerminator(BB);</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <a class="code" href="classllvm_1_1BranchInst.html#ae9cbc599309fd2da33ec1c61df01ce1f">BranchInst::Create</a>(NewExit, BB);</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    addPhiValues(BB, NewExit);</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keywordflow">if</span> (IncludeDominator)</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;      DT-&gt;changeImmediateDominator(NewExit, BB);</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  }</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;}</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="comment">/// \brief Create a new flow node and update dominator tree and region info</span></div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *StructurizeCFG::getNextFlow(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Dominator) {</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;Context = <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6f">Func</a>-&gt;getContext();</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Insert = Order.<a class="code" href="classllvm_1_1BasicBlock.html#a1fee8126b6c3a0c7b06575afcc5db913">empty</a>() ? ParentRegion-&gt;getExit() :</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                       Order.back()-&gt;getEntry();</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Flow = <a class="code" href="classllvm_1_1BasicBlock.html#ae1d53a21892854816885c7288f8b46f1">BasicBlock::Create</a>(Context, FlowBlockName,</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                                        <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6f">Func</a>, Insert);</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  DT-&gt;addNewBlock(Flow, Dominator);</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  ParentRegion-&gt;getRegionInfo()-&gt;setRegionFor(Flow, ParentRegion);</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  <span class="keywordflow">return</span> Flow;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;}</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="comment">/// \brief Create a new or reuse the previous node as flow node</span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *StructurizeCFG::needPrefix(<span class="keywordtype">bool</span> NeedEmpty) {</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Entry = PrevNode-&gt;getEntry();</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <span class="keywordflow">if</span> (!PrevNode-&gt;isSubRegion()) {</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    killTerminator(Entry);</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <span class="keywordflow">if</span> (!NeedEmpty || Entry-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ab1cd5a3713b93a33f89a2086d473cf6e">getFirstInsertionPt</a>() == Entry-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>())</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      <span class="keywordflow">return</span> Entry;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  }</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  <span class="comment">// create a new flow node</span></div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Flow = getNextFlow(Entry);</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  <span class="comment">// and wire it up</span></div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  changeExit(PrevNode, Flow, <span class="keyword">true</span>);</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  PrevNode = ParentRegion-&gt;getBBNode(Flow);</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <span class="keywordflow">return</span> Flow;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;}</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="comment">/// \brief Returns the region exit if possible, otherwise just a new flow node</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *StructurizeCFG::needPostfix(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Flow,</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                                        <span class="keywordtype">bool</span> ExitUseAllowed) {</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  <span class="keywordflow">if</span> (Order.empty() &amp;&amp; ExitUseAllowed) {</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Exit = ParentRegion-&gt;getExit();</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    DT-&gt;changeImmediateDominator(Exit, Flow);</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    addPhiValues(Flow, Exit);</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <span class="keywordflow">return</span> Exit;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  }</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <span class="keywordflow">return</span> getNextFlow(Flow);</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;}</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="comment">/// \brief Set the previous node</span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> StructurizeCFG::setPrevNode(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB) {</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  PrevNode =  ParentRegion-&gt;contains(BB) ? ParentRegion-&gt;getBBNode(BB) : 0;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;}</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;<span class="comment">/// \brief Does BB dominate all the predicates of Node ?</span></div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> StructurizeCFG::dominatesPredicates(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB, <a class="code" href="classllvm_1_1RegionNode.html">RegionNode</a> *Node) {</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  BBPredicates &amp;Preds = Predicates[Node-&gt;<a class="code" href="classllvm_1_1RegionNode.html#ae03a8933eabd0024b3b2a9eacb71a9c7">getEntry</a>()];</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  <span class="keywordflow">for</span> (BBPredicates::iterator PI = Preds.begin(), PE = Preds.end();</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;       PI != PE; ++PI) {</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="keywordflow">if</span> (!DT-&gt;dominates(BB, PI-&gt;first))</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  }</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;}</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;<span class="comment">/// \brief Can we predict that this node will always be called?</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> StructurizeCFG::isPredictableTrue(<a class="code" href="classllvm_1_1RegionNode.html">RegionNode</a> *Node) {</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;  BBPredicates &amp;Preds = Predicates[Node-&gt;<a class="code" href="classllvm_1_1RegionNode.html#ae03a8933eabd0024b3b2a9eacb71a9c7">getEntry</a>()];</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  <span class="keywordtype">bool</span> Dominated = <span class="keyword">false</span>;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  <span class="comment">// Regionentry is always true</span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  <span class="keywordflow">if</span> (PrevNode == 0)</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  <span class="keywordflow">for</span> (BBPredicates::iterator <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Preds.begin(), E = Preds.end();</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;second != BoolTrue)</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="keywordflow">if</span> (!Dominated &amp;&amp; DT-&gt;dominates(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;first, PrevNode-&gt;getEntry()))</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;      Dominated = <span class="keyword">true</span>;</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  }</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  <span class="comment">// TODO: The dominator check is too strict</span></div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  <span class="keywordflow">return</span> Dominated;</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;}</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="comment">/// Take one node from the order vector and wire it up</span></div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> StructurizeCFG::wireFlow(<span class="keywordtype">bool</span> ExitUseAllowed,</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                              <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *LoopEnd) {</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  <a class="code" href="classllvm_1_1RegionNode.html">RegionNode</a> *Node = Order.pop_back_val();</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  Visited.insert(Node-&gt;<a class="code" href="classllvm_1_1RegionNode.html#ae03a8933eabd0024b3b2a9eacb71a9c7">getEntry</a>());</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  <span class="keywordflow">if</span> (isPredictableTrue(Node)) {</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="comment">// Just a linear flow</span></div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="keywordflow">if</span> (PrevNode) {</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;      changeExit(PrevNode, Node-&gt;<a class="code" href="classllvm_1_1RegionNode.html#ae03a8933eabd0024b3b2a9eacb71a9c7">getEntry</a>(), <span class="keyword">true</span>);</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    }</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    PrevNode = Node;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="comment">// Insert extra prefix node (or reuse last one)</span></div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Flow = needPrefix(<span class="keyword">false</span>);</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="comment">// Insert extra postfix node (or use exit instead)</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Entry = Node-&gt;<a class="code" href="classllvm_1_1RegionNode.html#ae03a8933eabd0024b3b2a9eacb71a9c7">getEntry</a>();</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Next = needPostfix(Flow, ExitUseAllowed);</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="comment">// let it point to entry and next block</span></div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    Conditions.push_back(<a class="code" href="classllvm_1_1BranchInst.html#ae9cbc599309fd2da33ec1c61df01ce1f">BranchInst::Create</a>(Entry, Next, BoolUndef, Flow));</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    addPhiValues(Flow, Entry);</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    DT-&gt;changeImmediateDominator(Entry, Flow);</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    PrevNode = Node;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <span class="keywordflow">while</span> (!Order.empty() &amp;&amp; !Visited.count(LoopEnd) &amp;&amp;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;           dominatesPredicates(Entry, Order.<a class="code" href="classllvm_1_1BasicBlock.html#a6bce6440331683570a283df762902a09">back</a>())) {</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;      handleLoops(<span class="keyword">false</span>, LoopEnd);</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    }</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    changeExit(PrevNode, Next, <span class="keyword">false</span>);</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    setPrevNode(Next);</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  }</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;}</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="keywordtype">void</span> StructurizeCFG::handleLoops(<span class="keywordtype">bool</span> ExitUseAllowed,</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                                 <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *LoopEnd) {</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  <a class="code" href="classllvm_1_1RegionNode.html">RegionNode</a> *Node = Order.back();</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *LoopStart = Node-&gt;<a class="code" href="classllvm_1_1RegionNode.html#ae03a8933eabd0024b3b2a9eacb71a9c7">getEntry</a>();</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>.count(LoopStart)) {</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    wireFlow(ExitUseAllowed, LoopEnd);</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;  }</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  <span class="keywordflow">if</span> (!isPredictableTrue(Node))</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    LoopStart = needPrefix(<span class="keyword">true</span>);</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  LoopEnd = <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>[Node-&gt;<a class="code" href="classllvm_1_1RegionNode.html#ae03a8933eabd0024b3b2a9eacb71a9c7">getEntry</a>()];</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  wireFlow(<span class="keyword">false</span>, LoopEnd);</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  <span class="keywordflow">while</span> (!Visited.count(LoopEnd)) {</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    handleLoops(<span class="keyword">false</span>, LoopEnd);</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  }</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  <span class="comment">// If the start of the loop is the entry block, we can&#39;t branch to it so</span></div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  <span class="comment">// insert a new dummy entry block.</span></div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *LoopFunc = LoopStart-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>();</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  <span class="keywordflow">if</span> (LoopStart == &amp;LoopFunc-&gt;<a class="code" href="classllvm_1_1Function.html#a30f2c362631e3728d2f47a8203071ade">getEntryBlock</a>()) {</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    LoopStart-&gt;<a class="code" href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">setName</a>(<span class="stringliteral">&quot;entry.orig&quot;</span>);</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewEntry =</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html#ae1d53a21892854816885c7288f8b46f1">BasicBlock::Create</a>(LoopStart-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ad652423d9d91271ba153eb86482b2f55">getContext</a>(),</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;                         <span class="stringliteral">&quot;entry&quot;</span>,</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;                         LoopFunc,</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                         LoopStart);</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <a class="code" href="classllvm_1_1BranchInst.html#ae9cbc599309fd2da33ec1c61df01ce1f">BranchInst::Create</a>(LoopStart, NewEntry);</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  }</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  <span class="comment">// Create an extra loop end node</span></div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  LoopEnd = needPrefix(<span class="keyword">false</span>);</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Next = needPostfix(LoopEnd, ExitUseAllowed);</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  LoopConds.push_back(<a class="code" href="classllvm_1_1BranchInst.html#ae9cbc599309fd2da33ec1c61df01ce1f">BranchInst::Create</a>(Next, LoopStart,</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;                                         BoolUndef, LoopEnd));</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  addPhiValues(LoopEnd, LoopStart);</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  setPrevNode(Next);</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;}</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="comment">/// After this function control flow looks like it should be, but</span></div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="comment">/// branches and PHI nodes only have undefined conditions.</span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> StructurizeCFG::createFlow() {</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Exit = ParentRegion-&gt;getExit();</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  <span class="keywordtype">bool</span> EntryDominatesExit = DT-&gt;dominates(ParentRegion-&gt;getEntry(), Exit);</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  DeletedPhis.clear();</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  AddedPhis.clear();</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;  Conditions.clear();</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  LoopConds.clear();</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  PrevNode = 0;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  Visited.clear();</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  <span class="keywordflow">while</span> (!Order.empty()) {</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    handleLoops(EntryDominatesExit, 0);</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  }</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  <span class="keywordflow">if</span> (PrevNode)</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    changeExit(PrevNode, Exit, EntryDominatesExit);</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    assert(EntryDominatesExit);</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;}</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;<span class="comment">/// Handle a rare case where the disintegrated nodes instructions</span></div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;<span class="comment">/// no longer dominate all their uses. Not sure if this is really nessasary</span></div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> StructurizeCFG::rebuildSSA() {</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  <a class="code" href="classllvm_1_1SSAUpdater.html">SSAUpdater</a> Updater;</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Region_1_1block__iterator__wrapper.html">Region::block_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = ParentRegion-&gt;block_begin(),</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;                              E = ParentRegion-&gt;block_end();</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB = *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> II = BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(), <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a> = BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>();</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;         II != <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a>; ++II) {</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      <span class="keywordtype">bool</span> Initialized = <span class="keyword">false</span>;</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">Use</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = &amp;II-&gt;use_begin().getUse(), *Next; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Next) {</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;        Next = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getNext();</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1User.html">User</a> = cast&lt;Instruction&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getUser());</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        <span class="keywordflow">if</span> (User-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a>() == <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *UserPN = dyn_cast&lt;PHINode&gt;(User)) {</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;          <span class="keywordflow">if</span> (UserPN-&gt;getIncomingBlock(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) == <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        }</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        <span class="keywordflow">if</span> (DT-&gt;dominates(II, User))</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        <span class="keywordflow">if</span> (!Initialized) {</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1RegState.html#a079b254e749130fbe5d740f314ca92daab502f975742e9bff6d6dd7b49439b806">Undef</a> = <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(II-&gt;getType());</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;          Updater.<a class="code" href="classllvm_1_1SSAUpdater.html#a4fe3279aae4f726813a672d4a9b26cb1">Initialize</a>(II-&gt;getType(), <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;          Updater.<a class="code" href="classllvm_1_1SSAUpdater.html#af0d1a82b4e629e834c2ed53e5cbe22ef">AddAvailableValue</a>(&amp;<a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6f">Func</a>-&gt;getEntryBlock(), <a class="code" href="namespacellvm_1_1RegState.html#a079b254e749130fbe5d740f314ca92daab502f975742e9bff6d6dd7b49439b806">Undef</a>);</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;          Updater.<a class="code" href="classllvm_1_1SSAUpdater.html#af0d1a82b4e629e834c2ed53e5cbe22ef">AddAvailableValue</a>(BB, II);</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;          Initialized = <span class="keyword">true</span>;</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;        }</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;        Updater.<a class="code" href="classllvm_1_1SSAUpdater.html#a248544705875de8ef1c533827ec73a2e">RewriteUseAfterInsertions</a>(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;      }</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    }</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  }</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;}</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="comment">/// \brief Run the transformation for each region found</span></div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> StructurizeCFG::runOnRegion(<a class="code" href="classllvm_1_1Region.html">Region</a> *R, <a class="code" href="classllvm_1_1RGPassManager.html">RGPassManager</a> &amp;RGM) {</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  <span class="keywordflow">if</span> (R-&gt;<a class="code" href="classllvm_1_1Region.html#a80fc67f2e6ee313154f5a1c8222f64ab">isTopLevelRegion</a>())</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;  <a class="code" href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6f">Func</a> = R-&gt;<a class="code" href="classllvm_1_1Region.html#a546c42b63837e254592d040fcb0a0978">getEntry</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>();</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;  ParentRegion = R;</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;  DT = &amp;getAnalysis&lt;DominatorTree&gt;();</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;  orderNodes();</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;  collectInfos();</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  createFlow();</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  insertConditions(<span class="keyword">false</span>);</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  insertConditions(<span class="keyword">true</span>);</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  setPhiValues();</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  rebuildSSA();</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <span class="comment">// Cleanup</span></div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  Order.clear();</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  Visited.clear();</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  DeletedPhis.clear();</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  AddedPhis.clear();</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;  Predicates.clear();</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  Conditions.clear();</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>.clear();</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;  LoopPreds.clear();</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  LoopConds.clear();</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;}</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;<span class="comment">/// \brief Create the pass</span></div><div class="line"><a name="l00904"></a><span class="lineno"><a class="line" href="namespacellvm.html#aca09e32254cfdc0f94a5da7e6851c285">  904</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Pass.html">Pass</a> *<a class="code" href="namespacellvm.html#aca09e32254cfdc0f94a5da7e6851c285">llvm::createStructurizeCFGPass</a>() {</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> StructurizeCFG();</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;}</div><div class="ttc" id="classllvm_1_1Region_html_a9e82ea9f530a4c86bdb57133caed6de4"><div class="ttname"><a href="classllvm_1_1Region.html#a9e82ea9f530a4c86bdb57133caed6de4">llvm::Region::contains</a></div><div class="ttdeci">bool contains(const BasicBlock *BB) const </div><div class="ttdoc">Check if the region contains a BasicBlock. </div><div class="ttdef"><b>Definition:</b> <a href="RegionInfo_8cpp_source.html#l00112">RegionInfo.cpp:112</a></div></div>
<div class="ttc" id="classllvm_1_1Pass_html"><div class="ttname"><a href="classllvm_1_1Pass.html">llvm::Pass</a></div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00082">Pass.h:82</a></div></div>
<div class="ttc" id="MapVector_8h_html"><div class="ttname"><a href="MapVector_8h.html">MapVector.h</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad86469939d2a8bdd4169be9403b89f5a"><div class="ttname"><a href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">llvm::Value::use_end</a></div><div class="ttdeci">use_iterator use_end()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00152">Value.h:152</a></div></div>
<div class="ttc" id="classllvm_1_1DominatorTree_html_a307665a69dff132a967d4f0d2acd3791"><div class="ttname"><a href="classllvm_1_1DominatorTree.html#a307665a69dff132a967d4f0d2acd3791">llvm::DominatorTree::getNode</a></div><div class="ttdeci">DomTreeNode * getNode(BasicBlock *BB) const </div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00844">Dominators.h:844</a></div></div>
<div class="ttc" id="SCCIterator_8h_html"><div class="ttname"><a href="SCCIterator_8h.html">SCCIterator.h</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_aa7cce62ac5cc6df09cce0535874336b7"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">llvm::ConstantInt::getFalse</a></div><div class="ttdeci">static ConstantInt * getFalse(LLVMContext &amp;Context)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00445">Constants.cpp:445</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a24bca8838396aa81b87de8e7ac774b19"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">llvm::PatternMatch::m_Value</a></div><div class="ttdeci">class_match&lt; Value &gt; m_Value()</div><div class="ttdoc">m_Value() - Match an arbitrary value and ignore it. </div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00070">PatternMatch.h:70</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_a884f90190bca4bd354f2d5c91c264028"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">llvm::AnalysisUsage::addPreserved</a></div><div class="ttdeci">AnalysisUsage &amp; addPreserved()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00081">PassAnalysisSupport.h:81</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_aa75984a442f2379de0c66018201fa628"><div class="ttname"><a href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">llvm::Type::getInt1Ty</a></div><div class="ttdeci">static IntegerType * getInt1Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00238">Type.cpp:238</a></div></div>
<div class="ttc" id="classllvm_1_1SSAUpdater_html"><div class="ttname"><a href="classllvm_1_1SSAUpdater.html">llvm::SSAUpdater</a></div><div class="ttdoc">Helper class for SSA formation on a set of values defined in multiple blocks. </div><div class="ttdef"><b>Definition:</b> <a href="SSAUpdater_8h_source.html#l00037">SSAUpdater.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a089cccb6f231efee72abc76d0f9c695f"><div class="ttname"><a href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">llvm::PHINode::addIncoming</a></div><div class="ttdeci">void addIncoming(Value *V, BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02100">Instructions.h:2100</a></div></div>
<div class="ttc" id="classllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00035">PassRegistry.cpp:35</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a6fe2f06b8a4b2c3d6308afb223a0238a"><div class="ttname"><a href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00072">Instruction.cpp:72</a></div></div>
<div class="ttc" id="classllvm_1_1Argument_html"><div class="ttname"><a href="classllvm_1_1Argument.html">llvm::Argument</a></div><div class="ttdoc">LLVM Argument representation. </div><div class="ttdef"><b>Definition:</b> <a href="Argument_8h_source.html#l00035">Argument.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a6bce6440331683570a283df762902a09"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a6bce6440331683570a283df762902a09">llvm::BasicBlock::back</a></div><div class="ttdeci">const Instruction &amp; back() const </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00207">BasicBlock.h:207</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="classllvm_1_1SSAUpdater_html_a4fe3279aae4f726813a672d4a9b26cb1"><div class="ttname"><a href="classllvm_1_1SSAUpdater.html#a4fe3279aae4f726813a672d4a9b26cb1">llvm::SSAUpdater::Initialize</a></div><div class="ttdeci">void Initialize(Type *Ty, StringRef Name)</div><div class="ttdoc">Reset this object to get ready for a new set of SSA updates with type &amp;#39;Ty&amp;#39;. </div><div class="ttdef"><b>Definition:</b> <a href="SSAUpdater_8cpp_source.html#l00045">SSAUpdater.cpp:45</a></div></div>
<div class="ttc" id="StructurizeCFG_8cpp_html_a53b11141046597311361c18a5b718d1b"><div class="ttname"><a href="StructurizeCFG_8cpp.html#a53b11141046597311361c18a5b718d1b">structurizecfg</a></div><div class="ttdeci">structurizecfg</div><div class="ttdef"><b>Definition:</b> <a href="StructurizeCFG_8cpp_source.html#l00263">StructurizeCFG.cpp:263</a></div></div>
<div class="ttc" id="namespacellvm_html_a3f2f98c2a67c9e79f58aad9150a62e42"><div class="ttname"><a href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">llvm::dyn_cast</a></div><div class="ttdeci">enable_if_c&lt;!is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="Casting_8h_source.html#l00266">Casting.h:266</a></div></div>
<div class="ttc" id="classllvm_1_1SSAUpdater_html_af0d1a82b4e629e834c2ed53e5cbe22ef"><div class="ttname"><a href="classllvm_1_1SSAUpdater.html#af0d1a82b4e629e834c2ed53e5cbe22ef">llvm::SSAUpdater::AddAvailableValue</a></div><div class="ttdeci">void AddAvailableValue(BasicBlock *BB, Value *V)</div><div class="ttdoc">Indicate that a rewritten value is available in the specified block with the specified value...</div><div class="ttdef"><b>Definition:</b> <a href="SSAUpdater_8cpp_source.html#l00058">SSAUpdater.cpp:58</a></div></div>
<div class="ttc" id="classllvm_1_1RegionInfo_html_a1d1bd509d95354d7bfd8a4aaf01997a1"><div class="ttname"><a href="classllvm_1_1RegionInfo.html#a1d1bd509d95354d7bfd8a4aaf01997a1">llvm::RegionInfo::getRegionFor</a></div><div class="ttdeci">Region * getRegionFor(BasicBlock *BB) const </div><div class="ttdoc">Get the smallest region that contains a BasicBlock. </div><div class="ttdef"><b>Definition:</b> <a href="RegionInfo_8cpp_source.html#l00745">RegionInfo.cpp:745</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00534">DenseMap.h:534</a></div></div>
<div class="ttc" id="classllvm_1_1Pass_html_a048082a5be9ae0d8901ea64de59e5c8f"><div class="ttname"><a href="classllvm_1_1Pass.html#a048082a5be9ae0d8901ea64de59e5c8f">llvm::Pass::getAnalysisUsage</a></div><div class="ttdeci">virtual void getAnalysisUsage(AnalysisUsage &amp;) const </div><div class="ttdef"><b>Definition:</b> <a href="Pass_8cpp_source.html#l00075">Pass.cpp:75</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01978">Instructions.h:1978</a></div></div>
<div class="ttc" id="classllvm_1_1Region_html_a546c42b63837e254592d040fcb0a0978"><div class="ttname"><a href="classllvm_1_1Region.html#a546c42b63837e254592d040fcb0a0978">llvm::Region::getEntry</a></div><div class="ttdeci">BasicBlock * getEntry() const </div><div class="ttdoc">Get the entry BasicBlock of the Region. </div><div class="ttdef"><b>Definition:</b> <a href="RegionInfo_8h_source.html#l00255">RegionInfo.h:255</a></div></div>
<div class="ttc" id="classllvm_1_1MapVector_html"><div class="ttname"><a href="classllvm_1_1MapVector.html">llvm::MapVector</a></div><div class="ttdef"><b>Definition:</b> <a href="MapVector_8h_source.html#l00033">MapVector.h:33</a></div></div>
<div class="ttc" id="SSAUpdater_8h_html"><div class="ttname"><a href="SSAUpdater_8h.html">SSAUpdater.h</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_aca229503e4f5c83a187a6a921c625fa8"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">llvm::BasicBlock::getParent</a></div><div class="ttdeci">const Function * getParent() const </div><div class="ttdoc">Return the enclosing method, or null if none. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00116">BasicBlock.h:116</a></div></div>
<div class="ttc" id="classllvm_1_1RegionNode_html"><div class="ttname"><a href="classllvm_1_1RegionNode.html">llvm::RegionNode</a></div><div class="ttdoc">A RegionNode represents a subregion or a BasicBlock that is part of a Region. </div><div class="ttdef"><b>Definition:</b> <a href="RegionInfo_8h_source.html#l00056">RegionInfo.h:56</a></div></div>
<div class="ttc" id="classllvm_1_1PredIterator_html"><div class="ttname"><a href="classllvm_1_1PredIterator.html">llvm::PredIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="Support_2CFG_8h_source.html#l00029">Support/CFG.h:29</a></div></div>
<div class="ttc" id="namespacellvm_html_a84b419f26a692a58d8ed99124c68f89c"><div class="ttname"><a href="namespacellvm.html#a84b419f26a692a58d8ed99124c68f89c">llvm::LowerSwitchID</a></div><div class="ttdeci">char &amp; LowerSwitchID</div></div>
<div class="ttc" id="classllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00070">Function.h:70</a></div></div>
<div class="ttc" id="classllvm_1_1User_html"><div class="ttname"><a href="classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00033">User.h:33</a></div></div>
<div class="ttc" id="classllvm_1_1Region_html_a80fc67f2e6ee313154f5a1c8222f64ab"><div class="ttname"><a href="classllvm_1_1Region.html#a80fc67f2e6ee313154f5a1c8222f64ab">llvm::Region::isTopLevelRegion</a></div><div class="ttdeci">bool isTopLevelRegion() const </div><div class="ttdoc">Check if a Region is the TopLevel region. </div><div class="ttdef"><b>Definition:</b> <a href="RegionInfo_8h_source.html#l00313">RegionInfo.h:313</a></div></div>
<div class="ttc" id="classllvm_1_1RGPassManager_html"><div class="ttname"><a href="classllvm_1_1RGPassManager.html">llvm::RGPassManager</a></div><div class="ttdoc">The pass manager to schedule RegionPasses. </div><div class="ttdef"><b>Definition:</b> <a href="RegionPass_8h_source.html#l00083">RegionPass.h:83</a></div></div>
<div class="ttc" id="namespacellvm_1_1ARM__PROC_html_a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e"><div class="ttname"><a href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">llvm::ARM_PROC::IE</a></div><div class="ttdef"><b>Definition:</b> <a href="ARMBaseInfo_8h_source.html#l00091">ARMBaseInfo.h:91</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00167">Value.cpp:167</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00193">BasicBlock.h:193</a></div></div>
<div class="ttc" id="classllvm_1_1DomTreeNodeBase_html_a7519f9ffdda3ef1147e2563200587193"><div class="ttname"><a href="classllvm_1_1DomTreeNodeBase.html#a7519f9ffdda3ef1147e2563200587193">llvm::DomTreeNodeBase::getIDom</a></div><div class="ttdeci">DomTreeNodeBase&lt; NodeT &gt; * getIDom() const </div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00083">Dominators.h:83</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a25d956d9e0beadd47ce4bc255dfa811d"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">llvm::PatternMatch::match</a></div><div class="ttdeci">bool match(Val *V, const Pattern &amp;P)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00042">PatternMatch.h:42</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_ae5c60fd282ee894c87ea02c3f0fcb6d0"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">llvm::AnalysisUsage::addRequired</a></div><div class="ttdeci">AnalysisUsage &amp; addRequired()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00055">PassAnalysisSupport.h:55</a></div></div>
<div class="ttc" id="PassSupport_8h_html_a14724f1ccf528e73bb29bc9230737967"><div class="ttname"><a href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a></div><div class="ttdeci">#define INITIALIZE_PASS_DEPENDENCY(depName)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00167">PassSupport.h:167</a></div></div>
<div class="ttc" id="HexagonHardwareLoops_8cpp_html_ada7c1594a393ede3ce32602d64d7ddb2"><div class="ttname"><a href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a></div><div class="ttdeci">Hexagon Hardware Loops</div><div class="ttdef"><b>Definition:</b> <a href="HexagonHardwareLoops_8cpp_source.html#l00281">HexagonHardwareLoops.cpp:281</a></div></div>
<div class="ttc" id="namespacellvm_1_1RegState_html_a079b254e749130fbe5d740f314ca92daab502f975742e9bff6d6dd7b49439b806"><div class="ttname"><a href="namespacellvm_1_1RegState.html#a079b254e749130fbe5d740f314ca92daab502f975742e9bff6d6dd7b49439b806">llvm::RegState::Undef</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00035">MachineInstrBuilder.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a6f01dbe965b38186b1a78378689d4105"><div class="ttname"><a href="classllvm_1_1PHINode.html#a6f01dbe965b38186b1a78378689d4105">llvm::PHINode::removeIncomingValue</a></div><div class="ttdeci">Value * removeIncomingValue(unsigned Idx, bool DeletePHIIfEmpty=true)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l00114">Instructions.cpp:114</a></div></div>
<div class="ttc" id="classllvm_1_1value__use__iterator_html"><div class="ttname"><a href="classllvm_1_1value__use__iterator.html">llvm::value_use_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00168">Use.h:168</a></div></div>
<div class="ttc" id="classllvm_1_1Region_html_af52348bf3d7992c66be0cdf97ceda70b"><div class="ttname"><a href="classllvm_1_1Region.html#af52348bf3d7992c66be0cdf97ceda70b">llvm::Region::replaceExit</a></div><div class="ttdeci">void replaceExit(BasicBlock *BB)</div><div class="ttdoc">Replace the exit basic block of the region with the new basic block. </div><div class="ttdef"><b>Definition:</b> <a href="RegionInfo_8cpp_source.html#l00075">RegionInfo.cpp:75</a></div></div>
<div class="ttc" id="classllvm_1_1UndefValue_html"><div class="ttname"><a href="classllvm_1_1UndefValue.html">llvm::UndefValue</a></div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l01129">Constants.h:1129</a></div></div>
<div class="ttc" id="ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdef"><b>Definition:</b> <a href="ErrorHandling_8h_source.html#l00103">ErrorHandling.h:103</a></div></div>
<div class="ttc" id="classllvm_1_1Use_html"><div class="ttname"><a href="classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00060">Use.h:60</a></div></div>
<div class="ttc" id="PassSupport_8h_html_a74ce8276b89067e806f67c45a6d92575"><div class="ttname"><a href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a></div><div class="ttdeci">#define INITIALIZE_PASS_END(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00172">PassSupport.h:172</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_ae9cbc599309fd2da33ec1c61df01ce1f"><div class="ttname"><a href="classllvm_1_1BranchInst.html#ae9cbc599309fd2da33ec1c61df01ce1f">llvm::BranchInst::Create</a></div><div class="ttdeci">static BranchInst * Create(BasicBlock *IfTrue, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02373">Instructions.h:2373</a></div></div>
<div class="ttc" id="namespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00126">StackSlotColoring.cpp:126</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a35ee267850af7c235474a8c46c7ac5af"><div class="ttname"><a href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">llvm::Value::setName</a></div><div class="ttdeci">void setName(const Twine &amp;Name)</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00175">Value.cpp:175</a></div></div>
<div class="ttc" id="StructurizeCFG_8cpp_html_a06074f1b419ca1b6bd48879adf3a7bbe"><div class="ttname"><a href="StructurizeCFG_8cpp.html#a06074f1b419ca1b6bd48879adf3a7bbe">INITIALIZE_PASS_BEGIN</a></div><div class="ttdeci">INITIALIZE_PASS_BEGIN(StructurizeCFG,&quot;structurizecfg&quot;,&quot;Structurize the CFG&quot;, false, false) INITIALIZE_PASS_END(StructurizeCFG</div></div>
<div class="ttc" id="namespacellvm_1_1CallingConv_html_a4f861731fc6dbfdccc05af5968d98974"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">llvm::CallingConv::ID</a></div><div class="ttdeci">ID</div><div class="ttdoc">LLVM Calling Convention Representation. </div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00026">CallingConv.h:26</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00031">Instruction.h:31</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a4cfd328368353696e64a4d1b15a7cbfa"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a4cfd328368353696e64a4d1b15a7cbfa">llvm::PatternMatch::m_Not</a></div><div class="ttdeci">not_match&lt; LHS &gt; m_Not(const LHS &amp;L)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00738">PatternMatch.h:738</a></div></div>
<div class="ttc" id="namespacellvm_html_a3720211f6e6389ab53734b989bfb6fce"><div class="ttname"><a href="namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">llvm::succ_begin</a></div><div class="ttdeci">Interval::succ_iterator succ_begin(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00107">Interval.h:107</a></div></div>
<div class="ttc" id="namespacellvm_html_a71882a8257c58a4d9401db39622871a6"><div class="ttname"><a href="namespacellvm.html#a71882a8257c58a4d9401db39622871a6">llvm::scc_begin</a></div><div class="ttdeci">scc_iterator&lt; T &gt; scc_begin(const T &amp;G)</div><div class="ttdef"><b>Definition:</b> <a href="SCCIterator_8h_source.html#l00199">SCCIterator.h:199</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a1fee8126b6c3a0c7b06575afcc5db913"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a1fee8126b6c3a0c7b06575afcc5db913">llvm::BasicBlock::empty</a></div><div class="ttdeci">bool empty() const </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00204">BasicBlock.h:204</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a74e70ecbb79defbbfa6f6c87f76155bf"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a74e70ecbb79defbbfa6f6c87f76155bf">llvm::BranchInst::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02406">Instructions.h:2406</a></div></div>
<div class="ttc" id="classllvm_1_1DomTreeNodeBase_html"><div class="ttname"><a href="classllvm_1_1DomTreeNodeBase.html">llvm::DomTreeNodeBase</a></div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00064">Dominators.h:64</a></div></div>
<div class="ttc" id="classllvm_1_1Region_html_a27237a34547a8d7e7c41fe515c5d376f"><div class="ttname"><a href="classllvm_1_1Region.html#a27237a34547a8d7e7c41fe515c5d376f">llvm::Region::getParent</a></div><div class="ttdeci">Region * getParent() const </div><div class="ttdoc">Get the parent of the Region. </div><div class="ttdef"><b>Definition:</b> <a href="RegionInfo_8h_source.html#l00295">RegionInfo.h:295</a></div></div>
<div class="ttc" id="classllvm_1_1DominatorTree_html"><div class="ttname"><a href="classllvm_1_1DominatorTree.html">llvm::DominatorTree</a></div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00740">Dominators.h:740</a></div></div>
<div class="ttc" id="classllvm_1_1DomTreeNodeBase_html_a96fd2f0087c41942dd2618ff6e1b8640"><div class="ttname"><a href="classllvm_1_1DomTreeNodeBase.html#a96fd2f0087c41942dd2618ff6e1b8640">llvm::DomTreeNodeBase::getBlock</a></div><div class="ttdeci">NodeT * getBlock() const </div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00082">Dominators.h:82</a></div></div>
<div class="ttc" id="classllvm_1_1Pass_html_ab007d6c51634eb65e4f4f9dab4eb6a8c"><div class="ttname"><a href="classllvm_1_1Pass.html#ab007d6c51634eb65e4f4f9dab4eb6a8c">llvm::Pass::doInitialization</a></div><div class="ttdeci">virtual bool doInitialization(Module &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00110">Pass.h:110</a></div></div>
<div class="ttc" id="namespacellvm_html_a069c4ae2290101bde0f8d6a5074dc72b"><div class="ttname"><a href="namespacellvm.html#a069c4ae2290101bde0f8d6a5074dc72b">llvm::succ_end</a></div><div class="ttdeci">Interval::succ_iterator succ_end(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00110">Interval.h:110</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a1f0b9358936e3e00c42a460abbfb2868"><div class="ttname"><a href="classllvm_1_1User.html#a1f0b9358936e3e00c42a460abbfb2868">llvm::User::replaceUsesOfWith</a></div><div class="ttdeci">void replaceUsesOfWith(Value *From, Value *To)</div><div class="ttdef"><b>Definition:</b> <a href="User_8cpp_source.html#l00026">User.cpp:26</a></div></div>
<div class="ttc" id="RegionPass_8h_html"><div class="ttname"><a href="RegionPass_8h.html">RegionPass.h</a></div></div>
<div class="ttc" id="classllvm_1_1RegionNode_html_ae03a8933eabd0024b3b2a9eacb71a9c7"><div class="ttname"><a href="classllvm_1_1RegionNode.html#ae03a8933eabd0024b3b2a9eacb71a9c7">llvm::RegionNode::getEntry</a></div><div class="ttdeci">BasicBlock * getEntry() const </div><div class="ttdoc">Get the entry BasicBlock of this RegionNode. </div><div class="ttdef"><b>Definition:</b> <a href="RegionInfo_8h_source.html#l00105">RegionInfo.h:105</a></div></div>
<div class="ttc" id="classllvm_1_1SSAUpdater_html_a5b0e45dbba53e985f1b9c532fb5f200b"><div class="ttname"><a href="classllvm_1_1SSAUpdater.html#a5b0e45dbba53e985f1b9c532fb5f200b">llvm::SSAUpdater::GetValueInMiddleOfBlock</a></div><div class="ttdeci">Value * GetValueInMiddleOfBlock(BasicBlock *BB)</div><div class="ttdoc">Construct SSA form, materializing a value that is live in the middle of the specified block...</div><div class="ttdef"><b>Definition:</b> <a href="SSAUpdater_8cpp_source.html#l00086">SSAUpdater.cpp:86</a></div></div>
<div class="ttc" id="classllvm_1_1TerminatorInst_html"><div class="ttname"><a href="classllvm_1_1TerminatorInst.html">llvm::TerminatorInst</a></div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00035">InstrTypes.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1SuccIterator_html"><div class="ttname"><a href="classllvm_1_1SuccIterator.html">llvm::SuccIterator&lt; TerminatorInst *, BasicBlock &gt;</a></div></div>
<div class="ttc" id="RegionInfo_8h_html"><div class="ttname"><a href="RegionInfo_8h.html">RegionInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00044">Type.h:44</a></div></div>
<div class="ttc" id="classllvm_1_1LLVMContext_html"><div class="ttname"><a href="classllvm_1_1LLVMContext.html">llvm::LLVMContext</a></div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00037">LLVMContext.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1SSAUpdater_html_a248544705875de8ef1c533827ec73a2e"><div class="ttname"><a href="classllvm_1_1SSAUpdater.html#a248544705875de8ef1c533827ec73a2e">llvm::SSAUpdater::RewriteUseAfterInsertions</a></div><div class="ttdeci">void RewriteUseAfterInsertions(Use &amp;U)</div><div class="ttdoc">Rewrite a use like RewriteUse but handling in-block definitions. </div><div class="ttdef"><b>Definition:</b> <a href="SSAUpdater_8cpp_source.html#l00194">SSAUpdater.cpp:194</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html"><div class="ttname"><a href="classllvm_1_1BranchInst.html">llvm::BranchInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02350">Instructions.h:2350</a></div></div>
<div class="ttc" id="namespacellvm_html_a221dd975c8835e667ee59a36d4d6cc92"><div class="ttname"><a href="namespacellvm.html#a221dd975c8835e667ee59a36d4d6cc92">llvm::scc_end</a></div><div class="ttdeci">scc_iterator&lt; T &gt; scc_end(const T &amp;G)</div><div class="ttdef"><b>Definition:</b> <a href="SCCIterator_8h_source.html#l00204">SCCIterator.h:204</a></div></div>
<div class="ttc" id="classllvm_1_1RegionPass_html"><div class="ttname"><a href="classllvm_1_1RegionPass.html">llvm::RegionPass</a></div><div class="ttdoc">A pass that runs on each Region in a function. </div><div class="ttdef"><b>Definition:</b> <a href="RegionPass_8h_source.html#l00034">RegionPass.h:34</a></div></div>
<div class="ttc" id="classllvm_1_1Region_html"><div class="ttname"><a href="classllvm_1_1Region.html">llvm::Region</a></div><div class="ttdoc">A single entry single exit Region. </div><div class="ttdef"><b>Definition:</b> <a href="RegionInfo_8h_source.html#l00202">RegionInfo.h:202</a></div></div>
<div class="ttc" id="RegionIterator_8h_html"><div class="ttname"><a href="RegionIterator_8h.html">RegionIterator.h</a></div></div>
<div class="ttc" id="namespacellvm_html_a7e108932dc3da5294aed99a353aac9c4"><div class="ttname"><a href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">llvm::pred_begin</a></div><div class="ttdeci">Interval::pred_iterator pred_begin(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00117">Interval.h:117</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html_a2d9861feadd3a09792967a012559e7b2"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">llvm::PatternMatch::m_Specific</a></div><div class="ttdeci">specificval_ty m_Specific(const Value *V)</div><div class="ttdoc">m_Specific - Match if we have a specific specified value. </div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00323">PatternMatch.h:323</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00037">PassAnalysisSupport.h:37</a></div></div>
<div class="ttc" id="ConvertUTF_8h_html_adaac7155d04f98cee33773208b61f3f8"><div class="ttname"><a href="ConvertUTF_8h.html#adaac7155d04f98cee33773208b61f3f8">Boolean</a></div><div class="ttdeci">unsigned char Boolean</div><div class="ttdef"><b>Definition:</b> <a href="ConvertUTF_8h_source.html#l00104">ConvertUTF.h:104</a></div></div>
<div class="ttc" id="namespacellvm_html_a5eeaf08e96168c2cac8960f87f0ef360"><div class="ttname"><a href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">llvm::pred_end</a></div><div class="ttdeci">Interval::pred_iterator pred_end(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00120">Interval.h:120</a></div></div>
<div class="ttc" id="namespacellvm_1_1LibFunc_html_abf8f6830387f338fed0bce2e65108c6f"><div class="ttname"><a href="namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6f">llvm::LibFunc::Func</a></div><div class="ttdeci">Func</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00020">TargetLibraryInfo.h:20</a></div></div>
<div class="ttc" id="namespacellvm_1_1Reloc_html_af59f6dc86e80aaf56f1afd155eebf568a6f9fa4f118519f6df6435bd13317466e"><div class="ttname"><a href="namespacellvm_1_1Reloc.html#af59f6dc86e80aaf56f1afd155eebf568a6f9fa4f118519f6df6435bd13317466e">llvm::Reloc::Default</a></div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_8h_source.html#l00025">CodeGen.h:25</a></div></div>
<div class="ttc" id="classllvm_1_1UndefValue_html_a4ae5ff22b700a42bcc5d889233721335"><div class="ttname"><a href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">llvm::UndefValue::get</a></div><div class="ttdeci">static UndefValue * get(Type *T)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01334">Constants.cpp:1334</a></div></div>
<div class="ttc" id="namespacellvm_html_ae729b81a30ad6a8b0028e025d74ff155"><div class="ttname"><a href="namespacellvm.html#ae729b81a30ad6a8b0028e025d74ff155">llvm::initializeStructurizeCFGPass</a></div><div class="ttdeci">void initializeStructurizeCFGPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="classllvm_1_1Region_html_aa44e67a2a364164d42da8c827208284f"><div class="ttname"><a href="classllvm_1_1Region.html#aa44e67a2a364164d42da8c827208284f">llvm::Region::getExit</a></div><div class="ttdeci">BasicBlock * getExit() const </div><div class="ttdoc">Get the exit BasicBlock of the Region. </div><div class="ttdef"><b>Definition:</b> <a href="RegionInfo_8h_source.html#l00290">RegionInfo.h:290</a></div></div>
<div class="ttc" id="namespacellvm_1_1PatternMatch_html"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html">llvm::PatternMatch</a></div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00039">PatternMatch.h:39</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a03cc0dff22b31447f43af97acb76b1a2"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a03cc0dff22b31447f43af97acb76b1a2">llvm::BranchInst::isConditional</a></div><div class="ttdeci">bool isConditional() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02392">Instructions.h:2392</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00236">SmallPtrSet.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0b4e7bee9b8575cc7db73329f1a561bd"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">llvm::BasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00195">BasicBlock.h:195</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_a053677ebc731b47a534f841b11b5cf0c"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#a053677ebc731b47a534f841b11b5cf0c">llvm::AnalysisUsage::addRequiredID</a></div><div class="ttdeci">AnalysisUsage &amp; addRequiredID(const void *ID)</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8cpp_source.html#l00262">Pass.cpp:262</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00880">SmallVector.h:880</a></div></div>
<div class="ttc" id="Module_8h_html"><div class="ttname"><a href="Module_8h.html">Module.h</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00111">Value.h:111</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a30f2c362631e3728d2f47a8203071ade"><div class="ttname"><a href="classllvm_1_1Function.html#a30f2c362631e3728d2f47a8203071ade">llvm::Function::getEntryBlock</a></div><div class="ttdeci">const BasicBlock &amp; getEntryBlock() const </div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00380">Function.h:380</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a82dbbd8e3688b0bc1eedb338864d0d0c"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">llvm::ConstantInt::getTrue</a></div><div class="ttdeci">static ConstantInt * getTrue(LLVMContext &amp;Context)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00438">Constants.cpp:438</a></div></div>
<div class="ttc" id="CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2README_8txt_source.html#l00036">CodeGen/README.txt:36</a></div></div>
<div class="ttc" id="PatternMatch_8h_html"><div class="ttname"><a href="PatternMatch_8h.html">PatternMatch.h</a></div></div>
<div class="ttc" id="classllvm_1_1Region_1_1block__iterator__wrapper_html"><div class="ttname"><a href="classllvm_1_1Region_1_1block__iterator__wrapper.html">llvm::Region::block_iterator_wrapper</a></div><div class="ttdef"><b>Definition:</b> <a href="RegionInfo_8h_source.html#l00497">RegionInfo.h:497</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a413abcab8dbc3900fc2fde96a5d8fca6"><div class="ttname"><a href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">llvm::Value::use_begin</a></div><div class="ttdeci">use_iterator use_begin()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00150">Value.h:150</a></div></div>
<div class="ttc" id="Transforms_2Scalar_8h_html"><div class="ttname"><a href="Transforms_2Scalar_8h.html">Scalar.h</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a84309bb8c34c8bc5694ec5d48dd8668f"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a84309bb8c34c8bc5694ec5d48dd8668f">llvm::BranchInst::getCondition</a></div><div class="ttdeci">Value * getCondition() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02394">Instructions.h:2394</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_ac8ebb74c3e3a7813d8433c017c95fc66"><div class="ttname"><a href="classllvm_1_1BranchInst.html#ac8ebb74c3e3a7813d8433c017c95fc66">llvm::BranchInst::getNumSuccessors</a></div><div class="ttdeci">unsigned getNumSuccessors() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02404">Instructions.h:2404</a></div></div>
<div class="ttc" id="StructurizeCFG_8cpp_html_a80eb276f1afe1f81669f43ab330fe521"><div class="ttname"><a href="StructurizeCFG_8cpp.html#a80eb276f1afe1f81669f43ab330fe521">CFG</a></div><div class="ttdeci">Structurize the CFG</div><div class="ttdef"><b>Definition:</b> <a href="StructurizeCFG_8cpp_source.html#l00263">StructurizeCFG.cpp:263</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1path_html_a8fb092ecc42706d8901ee791cd6c90a7"><div class="ttname"><a href="namespacellvm_1_1sys_1_1path.html#a8fb092ecc42706d8901ee791cd6c90a7">llvm::sys::path::reverse_iterator</a></div><div class="ttdeci">std::reverse_iterator&lt; const_iterator &gt; reverse_iterator</div><div class="ttdef"><b>Definition:</b> <a href="Path_8h_source.html#l00079">Path.h:79</a></div></div>
<div class="ttc" id="classllvm_1_1RegionNode_html_a97c5099e3930b14c7b639417918e35f5"><div class="ttname"><a href="classllvm_1_1RegionNode.html#a97c5099e3930b14c7b639417918e35f5">llvm::RegionNode::isSubRegion</a></div><div class="ttdeci">bool isSubRegion() const </div><div class="ttdoc">Is this RegionNode a subregion? </div><div class="ttdef"><b>Definition:</b> <a href="RegionInfo_8h_source.html#l00120">RegionInfo.h:120</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="regcomp_8c_html_a0240ac851181b84ac374872dc5434ee4"><div class="ttname"><a href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div><div class="ttdeci">#define N</div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a5cb76a65b6524dba1493dd2b9dc3abbe"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">TerminatorInst * getTerminator()</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00120">BasicBlock.cpp:120</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_ae1d53a21892854816885c7288f8b46f1"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ae1d53a21892854816885c7288f8b46f1">llvm::BasicBlock::Create</a></div><div class="ttdeci">static BasicBlock * Create(LLVMContext &amp;Context, const Twine &amp;Name=&quot;&quot;, Function *Parent=0, BasicBlock *InsertBefore=0)</div><div class="ttdoc">Creates a new BasicBlock. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00109">BasicBlock.h:109</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_a3505dab06f59c36142a234321cdc3411"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a3505dab06f59c36142a234321cdc3411">llvm::BranchInst::setCondition</a></div><div class="ttdeci">void setCondition(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02399">Instructions.h:2399</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_ad652423d9d91271ba153eb86482b2f55"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ad652423d9d91271ba153eb86482b2f55">llvm::BasicBlock::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdoc">Get the context in which this basic block lives. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00033">BasicBlock.cpp:33</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00066">Value.h:66</a></div></div>
<div class="ttc" id="classllvm_1_1RegionNode_html_a6ea5924b7a3b8104f88438522e158e3f"><div class="ttname"><a href="classllvm_1_1RegionNode.html#a6ea5924b7a3b8104f88438522e158e3f">llvm::RegionNode::getNodeAs</a></div><div class="ttdeci">T * getNodeAs() const </div><div class="ttdoc">Get the content of this RegionNode. </div></div>
<div class="ttc" id="namespacellvm_html_aca09e32254cfdc0f94a5da7e6851c285"><div class="ttname"><a href="namespacellvm.html#aca09e32254cfdc0f94a5da7e6851c285">llvm::createStructurizeCFGPass</a></div><div class="ttdeci">Pass * createStructurizeCFGPass()</div><div class="ttdoc">Create the pass. </div><div class="ttdef"><b>Definition:</b> <a href="StructurizeCFG_8cpp_source.html#l00904">StructurizeCFG.cpp:904</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_ab1cd5a3713b93a33f89a2086d473cf6e"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ab1cd5a3713b93a33f89a2086d473cf6e">llvm::BasicBlock::getFirstInsertionPt</a></div><div class="ttdeci">iterator getFirstInsertionPt()</div><div class="ttdoc">Returns an iterator to the first instruction in this block that is suitable for inserting a non-PHI i...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00170">BasicBlock.cpp:170</a></div></div>
<div class="ttc" id="classllvm_1_1SSAUpdater_html_acecfb9d97da9885264b3bde6bd6a64e8"><div class="ttname"><a href="classllvm_1_1SSAUpdater.html#acecfb9d97da9885264b3bde6bd6a64e8">llvm::SSAUpdater::GetValueAtEndOfBlock</a></div><div class="ttdeci">Value * GetValueAtEndOfBlock(BasicBlock *BB)</div><div class="ttdoc">Construct SSA form, materializing a value that is live at the end of the specified block...</div><div class="ttdef"><b>Definition:</b> <a href="SSAUpdater_8cpp_source.html#l00081">SSAUpdater.cpp:81</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a88cdefb709309eddc6e5daca0be6a7b4"><div class="ttname"><a href="classllvm_1_1PHINode.html#a88cdefb709309eddc6e5daca0be6a7b4">llvm::PHINode::setIncomingValue</a></div><div class="ttdeci">void setIncomingValue(unsigned i, Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02062">Instructions.h:2062</a></div></div>
<div class="ttc" id="classllvm_1_1BinaryOperator_html_a0ad1d1442a12b21931b730201f58ab5e"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a0ad1d1442a12b21931b730201f58ab5e">llvm::BinaryOperator::CreateNot</a></div><div class="ttdeci">static BinaryOperator * CreateNot(Value *Op, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l01904">Instructions.cpp:1904</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a5c2b7d7f19aac93b27b845858a7eb73e"><div class="ttname"><a href="classllvm_1_1PHINode.html#a5c2b7d7f19aac93b27b845858a7eb73e">llvm::PHINode::getBasicBlockIndex</a></div><div class="ttdeci">int getBasicBlockIndex(const BasicBlock *BB) const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02132">Instructions.h:2132</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9cd49851904f15060edb782ef4dd1b2d"><div class="ttname"><a href="classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00052">Instruction.h:52</a></div></div>
<div class="ttc" id="classllvm_1_1RegionInfo_html"><div class="ttname"><a href="classllvm_1_1RegionInfo.html">llvm::RegionInfo</a></div><div class="ttdoc">Analysis that detects all canonical Regions. </div><div class="ttdef"><b>Definition:</b> <a href="RegionInfo_8h_source.html#l00577">RegionInfo.h:577</a></div></div>
<div class="ttc" id="classllvm_1_1scc__iterator_html"><div class="ttname"><a href="classllvm_1_1scc__iterator.html">llvm::scc_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="SCCIterator_8h_source.html#l00036">SCCIterator.h:36</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 23:02:42 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
