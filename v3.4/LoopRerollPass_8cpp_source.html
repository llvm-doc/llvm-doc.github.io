<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: LoopRerollPass.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('LoopRerollPass_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">LoopRerollPass.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="LoopRerollPass_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===-- LoopReroll.cpp - Loop rerolling pass ------------------------------===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// This pass implements a simple loop reroller.</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno"><a class="line" href="LoopRerollPass_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   14</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;loop-reroll&quot;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Transforms_2Scalar_8h.html">llvm/Transforms/Scalar.h</a>&quot;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallSet_8h.html">llvm/ADT/SmallSet.h</a>&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="STLExtras_8h.html">llvm/ADT/STLExtras.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AliasAnalysis_8h.html">llvm/Analysis/AliasAnalysis.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AliasSetTracker_8h.html">llvm/Analysis/AliasSetTracker.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopPass_8h.html">llvm/Analysis/LoopPass.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ScalarEvolution_8h.html">llvm/Analysis/ScalarEvolution.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ScalarEvolutionExpander_8h.html">llvm/Analysis/ScalarEvolutionExpander.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ScalarEvolutionExpressions_8h.html">llvm/Analysis/ScalarEvolutionExpressions.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueTracking_8h.html">llvm/Analysis/ValueTracking.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DataLayout_8h.html">llvm/IR/DataLayout.h</a>&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IntrinsicInst_8h.html">llvm/IR/IntrinsicInst.h</a>&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetLibraryInfo_8h.html">llvm/Target/TargetLibraryInfo.h</a>&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlockUtils_8h.html">llvm/Transforms/Utils/BasicBlockUtils.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Local_8h.html">llvm/Transforms/Utils/Local.h</a>&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopUtils_8h.html">llvm/Transforms/Utils/LoopUtils.h</a>&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<a class="code" href="LoopRerollPass_8cpp.html#afc711227919ff9a49ede1aa2cf033cc5">STATISTIC</a>(NumRerolledLoops, <span class="stringliteral">&quot;Number of rerolled loops&quot;</span>);</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<a class="code" href="LoopRerollPass_8cpp.html#a912e33de9fe69e47bf8688a719713907">MaxInc</a>(<span class="stringliteral">&quot;max-reroll-increment&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(2048), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;The maximum increment for loop rerolling&quot;</span>));</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">// This loop re-rolling transformation aims to transform loops like this:</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">// int foo(int a);</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">// void bar(int *x) {</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">//   for (int i = 0; i &lt; 500; i += 3) {</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">//     foo(i);</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">//     foo(i+1);</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">//     foo(i+2);</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">//   }</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">// }</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">// into a loop like this:</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">// void bar(int *x) {</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">//   for (int i = 0; i &lt; 500; ++i)</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">//     foo(i);</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">// }</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">// It does this by looking for loops that, besides the latch code, are composed</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">// of isomorphic DAGs of instructions, with each DAG rooted at some increment</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">// to the induction variable, and where each DAG is isomorphic to the DAG</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">// rooted at the induction variable (excepting the sub-DAGs which root the</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">// other induction-variable increments). In other words, we&#39;re looking for loop</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">// bodies of the form:</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">// %iv = phi [ (preheader, ...), (body, %iv.next) ]</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">// f(%iv)</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">// %iv.1 = add %iv, 1                &lt;-- a root increment</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">// f(%iv.1)</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">// %iv.2 = add %iv, 2                &lt;-- a root increment</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">// f(%iv.2)</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">// %iv.scale_m_1 = add %iv, scale-1  &lt;-- a root increment</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">// f(%iv.scale_m_1)</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">// ...</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">// %iv.next = add %iv, scale</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">// %cmp = icmp(%iv, ...)</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">// br %cmp, header, exit</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">// where each f(i) is a set of instructions that, collectively, are a function</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">// only of i (and other loop-invariant values).</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">// As a special case, we can also reroll loops like this:</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">// int foo(int);</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">// void bar(int *x) {</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">//   for (int i = 0; i &lt; 500; ++i) {</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">//     x[3*i] = foo(0);</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">//     x[3*i+1] = foo(0);</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">//     x[3*i+2] = foo(0);</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">//   }</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">// }</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">// into this:</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">// void bar(int *x) {</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">//   for (int i = 0; i &lt; 1500; ++i)</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">//     x[i] = foo(0);</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">// }</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">// in which case, we&#39;re looking for inputs like this:</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">// %iv = phi [ (preheader, ...), (body, %iv.next) ]</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">// %scaled.iv = mul %iv, scale</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">// f(%scaled.iv)</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">// %scaled.iv.1 = add %scaled.iv, 1</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">// f(%scaled.iv.1)</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">// %scaled.iv.2 = add %scaled.iv, 2</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">// f(%scaled.iv.2)</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">// %scaled.iv.scale_m_1 = add %scaled.iv, scale-1</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">// f(%scaled.iv.scale_m_1)</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">// ...</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">// %iv.next = add %iv, 1</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">// %cmp = icmp(%iv, ...)</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">// br %cmp, header, exit</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="keyword">class </span>LoopReroll : <span class="keyword">public</span> <a class="code" href="classllvm_1_1LoopPass.html">LoopPass</a> {</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="keyword">public</span>:</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>; <span class="comment">// Pass ID, replacement for typeid</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    LoopReroll() : <a class="code" href="classllvm_1_1LoopPass.html">LoopPass</a>(ID) {</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      <a class="code" href="namespacellvm.html#ae383fe174f8746c48625776addff9a7f">initializeLoopRerollPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    }</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordtype">bool</span> runOnLoop(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1LPPassManager.html">LPPassManager</a> &amp;LPM);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const </span>{</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a>&gt;();</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a>&gt;();</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a>&gt;();</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a>&gt;();</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a>&gt;();</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a>&gt;();</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a>&gt;();</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    }</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="keyword">protected</span>:</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a> *AA;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> *SE;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> *DL;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keyword">typedef</span> <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 16&gt;</a> SmallInstructionVector;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keyword">typedef</span> <a class="code" href="classllvm_1_1SmallSet.html">SmallSet&lt;Instruction *, 16&gt;</a>   SmallInstructionSet;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="comment">// A chain of isomorphic instructions, indentified by a single-use PHI,</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="comment">// representing a reduction. Only the last value may be used outside the</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="comment">// loop.</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keyword">struct </span>SimpleLoopReduction {</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      SimpleLoopReduction(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L)</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        : Valid(<a class="code" href="namespacefalse.html">false</a>), <a class="code" href="MSA_8txt.html#ab49a28dbe60da0a607449e5308b1ec3f">Instructions</a>(1, P) {</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        assert(isa&lt;PHINode&gt;(P) &amp;&amp; <span class="stringliteral">&quot;First reduction instruction must be a PHI&quot;</span>);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <a class="code" href="namespacellvm_1_1ARM__AM.html#a5d0557608eaebed12bc00812724ba2cdae6bcee28992dab735eaa43f5dfa48a09">add</a>(L);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      }</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      <span class="keywordtype">bool</span> valid()<span class="keyword"> const </span>{</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <span class="keywordflow">return</span> Valid;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      }</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *getPHI()<span class="keyword"> const </span>{</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        assert(Valid &amp;&amp; <span class="stringliteral">&quot;Using invalid reduction&quot;</span>);</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="MSA_8txt.html#ab49a28dbe60da0a607449e5308b1ec3f">Instructions</a>.front();</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      }</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *getReducedValue()<span class="keyword"> const </span>{</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        assert(Valid &amp;&amp; <span class="stringliteral">&quot;Using invalid reduction&quot;</span>);</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="MSA_8txt.html#ab49a28dbe60da0a607449e5308b1ec3f">Instructions</a>.back();</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      }</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<span class="keyword">get</span>(<span class="keywordtype">size_t</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) <span class="keyword">const</span> {</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        assert(Valid &amp;&amp; <span class="stringliteral">&quot;Using invalid reduction&quot;</span>);</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="MSA_8txt.html#ab49a28dbe60da0a607449e5308b1ec3f">Instructions</a>[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>+1];</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      }</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *operator [] (<span class="keywordtype">size_t</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">get</span>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>); }</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      <span class="comment">// The size, ignoring the initial PHI.</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;      <span class="keywordtype">size_t</span> <a class="code" href="Target_2README_8txt.html#a02def7c594e9f19ff247ed0bf33d1c30">size</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        assert(Valid &amp;&amp; <span class="stringliteral">&quot;Using invalid reduction&quot;</span>);</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="MSA_8txt.html#ab49a28dbe60da0a607449e5308b1ec3f">Instructions</a>.size()-1;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      }</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      <span class="keyword">typedef</span> SmallInstructionVector::iterator iterator;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      <span class="keyword">typedef</span> SmallInstructionVector::const_iterator const_iterator;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      iterator <a class="code" href="namespacellvm_1_1sys_1_1path.html#a33706aab89e700b8f79e1fa6f4f0e3ee">begin</a>() {</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        assert(Valid &amp;&amp; <span class="stringliteral">&quot;Using invalid reduction&quot;</span>);</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#aa1704159f75e6eacd595962ea6d93ffe">llvm::next</a>(<a class="code" href="MSA_8txt.html#ab49a28dbe60da0a607449e5308b1ec3f">Instructions</a>.begin());</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      }</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      const_iterator <a class="code" href="namespacellvm_1_1sys_1_1path.html#a33706aab89e700b8f79e1fa6f4f0e3ee">begin</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        assert(Valid &amp;&amp; <span class="stringliteral">&quot;Using invalid reduction&quot;</span>);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#aa1704159f75e6eacd595962ea6d93ffe">llvm::next</a>(<a class="code" href="MSA_8txt.html#ab49a28dbe60da0a607449e5308b1ec3f">Instructions</a>.begin());</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      }</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      iterator <a class="code" href="namespacellvm_1_1sys_1_1path.html#a214ec2f04ffd92636ed4bd2717607a1d">end</a>() { <span class="keywordflow">return</span> <a class="code" href="MSA_8txt.html#ab49a28dbe60da0a607449e5308b1ec3f">Instructions</a>.end(); }</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      const_iterator <a class="code" href="namespacellvm_1_1sys_1_1path.html#a214ec2f04ffd92636ed4bd2717607a1d">end</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="MSA_8txt.html#ab49a28dbe60da0a607449e5308b1ec3f">Instructions</a>.end(); }</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keyword">protected</span>:</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      <span class="keywordtype">bool</span> Valid;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      SmallInstructionVector <a class="code" href="MSA_8txt.html#ab49a28dbe60da0a607449e5308b1ec3f">Instructions</a>;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;      <span class="keywordtype">void</span> <a class="code" href="namespacellvm_1_1ARM__AM.html#a5d0557608eaebed12bc00812724ba2cdae6bcee28992dab735eaa43f5dfa48a09">add</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L);</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    };</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="comment">// The set of all reductions, and state tracking of possible reductions</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="comment">// during loop instruction processing.</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keyword">struct </span>ReductionTracker {</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      <span class="keyword">typedef</span> <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;SimpleLoopReduction, 16&gt;</a> SmallReductionVector;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      <span class="comment">// Add a new possible reduction.</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      <span class="keywordtype">void</span> addSLR(SimpleLoopReduction &amp;SLR) {</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        PossibleReds.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(SLR);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      }</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      <span class="comment">// Setup to track possible reductions corresponding to the provided</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      <span class="comment">// rerolling scale. Only reductions with a number of non-PHI instructions</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <span class="comment">// that is divisible by the scale are considered. Three instructions sets</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;      <span class="comment">// are filled in:</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      <span class="comment">//   - A set of all possible instructions in eligible reductions.</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      <span class="comment">//   - A set of all PHIs in eligible reductions</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      <span class="comment">//   - A set of all reduced values (last instructions) in eligible reductions.</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      <span class="keywordtype">void</span> restrictToScale(uint64_t Scale,</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                           SmallInstructionSet &amp;PossibleRedSet,</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                           SmallInstructionSet &amp;PossibleRedPHISet,</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                           SmallInstructionSet &amp;PossibleRedLastSet) {</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        PossibleRedIdx.clear();</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        PossibleRedIter.clear();</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        Reds.clear();</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = PossibleReds.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;          <span class="keywordflow">if</span> (PossibleReds[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="Target_2README_8txt.html#a02def7c594e9f19ff247ed0bf33d1c30">size</a>() % Scale == 0) {</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            PossibleRedLastSet.insert(PossibleReds[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].getReducedValue());</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            PossibleRedPHISet.insert(PossibleReds[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].getPHI());</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      </div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            PossibleRedSet.insert(PossibleReds[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].getPHI());</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            PossibleRedIdx[PossibleReds[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].getPHI()] = <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            <span class="keywordflow">for</span> (SimpleLoopReduction::iterator J = PossibleReds[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="namespacellvm_1_1sys_1_1path.html#a33706aab89e700b8f79e1fa6f4f0e3ee">begin</a>(),</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                 JE = PossibleReds[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="namespacellvm_1_1sys_1_1path.html#a214ec2f04ffd92636ed4bd2717607a1d">end</a>(); J != JE; ++J) {</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;              PossibleRedSet.insert(*J);</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;              PossibleRedIdx[*J] = <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            }</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;          }</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      }</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      <span class="comment">// The functions below are used while processing the loop instructions.</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      <span class="comment">// Are the two instructions both from reductions, and furthermore, from</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      <span class="comment">// the same reduction?</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      <span class="keywordtype">bool</span> isPairInSame(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *J1, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *J2) {</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Instruction *, int&gt;::iterator</a> J1I = PossibleRedIdx.<a class="code" href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">find</a>(J1);</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <span class="keywordflow">if</span> (J1I != PossibleRedIdx.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>()) {</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;          <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Instruction *, int&gt;::iterator</a> J2I = PossibleRedIdx.<a class="code" href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">find</a>(J2);</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;          <span class="keywordflow">if</span> (J2I != PossibleRedIdx.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>() &amp;&amp; J1I-&gt;second == J2I-&gt;second)</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        }</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      }</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      <span class="comment">// The two provided instructions, the first from the base iteration, and</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      <span class="comment">// the second from iteration i, form a matched pair. If these are part of</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      <span class="comment">// a reduction, record that fact.</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      <span class="keywordtype">void</span> recordPair(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *J1, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *J2, <span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <span class="keywordflow">if</span> (PossibleRedIdx.count(J1)) {</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;          assert(PossibleRedIdx.count(J2) &amp;&amp;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                 <span class="stringliteral">&quot;Recording reduction vs. non-reduction instruction?&quot;</span>);</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;          PossibleRedIter[J1] = 0;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;          PossibleRedIter[J2] = <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;          <span class="keywordtype">int</span> Idx = PossibleRedIdx[J1];</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;          assert(Idx == PossibleRedIdx[J2] &amp;&amp;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                 <span class="stringliteral">&quot;Recording pair from different reductions?&quot;</span>);</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;          Reds.insert(Idx);</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        }</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      }</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      <span class="comment">// The functions below can be called after we&#39;ve finished processing all</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      <span class="comment">// instructions in the loop, and we know which reductions were selected.</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      <span class="comment">// Is the provided instruction the PHI of a reduction selected for</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      <span class="comment">// rerolling?</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      <span class="keywordtype">bool</span> isSelectedPHI(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *J) {</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <span class="keywordflow">if</span> (!isa&lt;PHINode&gt;(J))</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DenseSet_1_1Iterator.html">DenseSet&lt;int&gt;::iterator</a> RI = Reds.begin(), RIE = Reds.end();</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;             RI != RIE; ++RI) {</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;          <span class="keywordtype">int</span> i = *RI;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;          <span class="keywordflow">if</span> (cast&lt;Instruction&gt;(J) == PossibleReds[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].getPHI())</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        }</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      }</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      <span class="keywordtype">bool</span> validateSelected();</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      <span class="keywordtype">void</span> replaceSelected();</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keyword">protected</span>:</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      <span class="comment">// The vector of all possible reductions (for any scale).</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      SmallReductionVector PossibleReds;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Instruction *, int&gt;</a> PossibleRedIdx;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Instruction *, int&gt;</a> PossibleRedIter;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;int&gt;</a> Reds;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    };</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordtype">void</span> collectPossibleIVs(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, SmallInstructionVector &amp;PossibleIVs);</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordtype">void</span> collectPossibleReductions(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L,</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;           ReductionTracker &amp;Reductions);</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordtype">void</span> collectInLoopUserSet(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L,</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;           <span class="keyword">const</span> SmallInstructionVector &amp;Roots,</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;           <span class="keyword">const</span> SmallInstructionSet &amp;Exclude,</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;           <span class="keyword">const</span> SmallInstructionSet &amp;Final,</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;           <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;Instruction *&gt;</a> &amp;<a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>);</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keywordtype">void</span> collectInLoopUserSet(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L,</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;           <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> * Root,</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;           <span class="keyword">const</span> SmallInstructionSet &amp;Exclude,</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;           <span class="keyword">const</span> SmallInstructionSet &amp;Final,</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;           <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;Instruction *&gt;</a> &amp;<a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>);</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keywordtype">bool</span> findScaleFromMul(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *RealIV, uint64_t &amp;Scale,</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                          <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *&amp;IV,</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                          SmallInstructionVector &amp;LoopIncs);</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="keywordtype">bool</span> collectAllRoots(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, uint64_t Inc, uint64_t Scale, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *IV,</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                         <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;SmallInstructionVector, 32&gt;</a> &amp;Roots,</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                         SmallInstructionSet &amp;AllRoots,</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                         SmallInstructionVector &amp;LoopIncs);</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="keywordtype">bool</span> reroll(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *IV, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Header, <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *IterCount,</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                ReductionTracker &amp;Reductions);</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  };</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;}</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">LoopReroll::ID</a> = 0;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<a class="code" href="PassSupport_8h.html#aaa970fc931c1c63037a8182e028d04b1">INITIALIZE_PASS_BEGIN</a>(LoopReroll, <span class="stringliteral">&quot;loop-reroll&quot;</span>, <span class="stringliteral">&quot;Reroll loops&quot;</span>, <span class="keyword">false</span>, <span class="keyword">false</span>)</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<a class="code" href="PassSupport_8h.html#af0564bcdde2dd4400c670ca278c6035f">INITIALIZE_AG_DEPENDENCY</a>(<a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a>)</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a>)</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a>)</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a>)</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a>)</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<a class="code" href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a>(LoopReroll, &quot;<a class="code" href="Analysis_2README_8txt.html#a01d2af4eee7c40485a0ce3683a2e907a">loop</a>-reroll&quot;, &quot;Reroll <a class="code" href="MachineLoopInfo_8cpp.html#a59aa69fa39ee55438427bfc39852b9e6">loops</a>&quot;, <a class="code" href="namespacefalse.html">false</a>, false)</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div><div class="line"><a name="l00348"></a><span class="lineno"><a class="line" href="namespacellvm.html#a41d1b9b3d6fdfdb4fcf4b552986be64b">  348</a></span>&#160;<a class="code" href="classllvm_1_1Pass.html">Pass</a> *<a class="code" href="namespacellvm.html">llvm</a>::<a class="code" href="namespacellvm.html#a41d1b9b3d6fdfdb4fcf4b552986be64b">createLoopRerollPass</a>() {</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> LoopReroll;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;}</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment">// Returns true if the provided instruction is used outside the given loop.</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment">// This operates like Instruction::isUsedOutsideOfBlock, but considers PHIs in</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="comment">// non-loop blocks to be outside the loop.</span></div><div class="line"><a name="l00355"></a><span class="lineno"><a class="line" href="LoopRerollPass_8cpp.html#afdd1c308d66ba7af258967fc57dbdbae">  355</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LoopRerollPass_8cpp.html#afdd1c308d66ba7af258967fc57dbdbae">hasUsesOutsideLoop</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L) {</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::use_iterator</a> UI = I-&gt;<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>(),</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;       UIE = I-&gt;<a class="code" href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">use_end</a>(); UI != UIE; ++UI) {</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1User.html">User</a> = cast&lt;Instruction&gt;(*UI);</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a92a38e2e3412bde7fd2b71db212b61aa">contains</a>(User))</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  }</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;}</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="comment">// Collect the list of loop induction variables with respect to which it might</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment">// be possible to reroll the loop.</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="keywordtype">void</span> LoopReroll::collectPossibleIVs(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L,</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                                    SmallInstructionVector &amp;PossibleIVs) {</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Header = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>();</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Header-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(),</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;       <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a> = Header-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ab1cd5a3713b93a33f89a2086d473cf6e">getFirstInsertionPt</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keywordflow">if</span> (!isa&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getType()-&gt;isIntegerTy())</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVAddRecExpr.html">SCEVAddRecExpr</a> *PHISCEV =</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        dyn_cast&lt;SCEVAddRecExpr&gt;(SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a30bd18ac905eacf3601bc6a553a9ff49">getSCEV</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))) {</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      <span class="keywordflow">if</span> (PHISCEV-&gt;getLoop() != L)</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      <span class="keywordflow">if</span> (!PHISCEV-&gt;isAffine())</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVConstant.html">SCEVConstant</a> *IncSCEV =</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;          dyn_cast&lt;SCEVConstant&gt;(PHISCEV-&gt;getStepRecurrence(*SE))) {</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <span class="keywordflow">if</span> (!IncSCEV-&gt;getValue()-&gt;getValue().isStrictlyPositive())</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        <span class="keywordflow">if</span> (IncSCEV-&gt;getValue()-&gt;uge(<a class="code" href="LoopRerollPass_8cpp.html#a912e33de9fe69e47bf8688a719713907">MaxInc</a>))</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LRR: Possible IV: &quot;</span> &lt;&lt; *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; <span class="stringliteral">&quot; = &quot;</span> &lt;&lt;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;              *PHISCEV &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        PossibleIVs.push_back(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      }</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    }</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  }</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;}</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment">// Add the remainder of the reduction-variable chain to the instruction vector</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment">// (the initial PHINode has already been added). If successful, the object is</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment">// marked as valid.</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm_1_1ARM__AM.html#a5d0557608eaebed12bc00812724ba2cdae6bcee28992dab735eaa43f5dfa48a09">LoopReroll::SimpleLoopReduction::add</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L) {</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  assert(!Valid &amp;&amp; <span class="stringliteral">&quot;Cannot add to an already-valid chain&quot;</span>);</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <span class="comment">// The reduction variable must be a chain of single-use instructions</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="comment">// (including the PHI), except for the last value (which is used by the PHI</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="comment">// and also outside the loop).</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="MSA_8txt.html#ab49a28dbe60da0a607449e5308b1ec3f">Instructions</a>.front();</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <span class="keywordflow">do</span> {</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    C = cast&lt;Instruction&gt;(*C-&gt;<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>());</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="keywordflow">if</span> (C-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>()) {</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;      <span class="keywordflow">if</span> (!C-&gt;<a class="code" href="classllvm_1_1Instruction.html#ac93ffdc3731dab52d2f92fb62609b718">isBinaryOp</a>())</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      <span class="keywordflow">if</span> (!(isa&lt;PHINode&gt;(<a class="code" href="MSA_8txt.html#ab49a28dbe60da0a607449e5308b1ec3f">Instructions</a>.back()) ||</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            C-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9f729c6c3e0de4a55dc5a3693fd4a9eb">isSameOperationAs</a>(<a class="code" href="MSA_8txt.html#ab49a28dbe60da0a607449e5308b1ec3f">Instructions</a>.back())))</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      <a class="code" href="MSA_8txt.html#ab49a28dbe60da0a607449e5308b1ec3f">Instructions</a>.push_back(C);</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    }</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  } <span class="keywordflow">while</span> (C-&gt;<a class="code" href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">hasOneUse</a>());</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MSA_8txt.html#ab49a28dbe60da0a607449e5308b1ec3f">Instructions</a>.size() &lt; 2 ||</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      !C-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9f729c6c3e0de4a55dc5a3693fd4a9eb">isSameOperationAs</a>(<a class="code" href="MSA_8txt.html#ab49a28dbe60da0a607449e5308b1ec3f">Instructions</a>.back()) ||</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;      C-&gt;<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>() == C-&gt;<a class="code" href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">use_end</a>())</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <span class="comment">// C is now the (potential) last instruction in the reduction chain.</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::use_iterator</a> UI = C-&gt;<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>(), UIE = C-&gt;<a class="code" href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">use_end</a>();</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;       UI != UIE; ++UI) {</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="comment">// The only in-loop user can be the initial PHI.</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordflow">if</span> (L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a92a38e2e3412bde7fd2b71db212b61aa">contains</a>(cast&lt;Instruction&gt;(*UI)))</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      <span class="keywordflow">if</span> (cast&lt;Instruction&gt;(*UI ) != <a class="code" href="MSA_8txt.html#ab49a28dbe60da0a607449e5308b1ec3f">Instructions</a>.front())</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  }</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <a class="code" href="MSA_8txt.html#ab49a28dbe60da0a607449e5308b1ec3f">Instructions</a>.push_back(C);</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  Valid = <span class="keyword">true</span>;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;}</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="comment">// Collect the vector of possible reduction variables.</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="keywordtype">void</span> LoopReroll::collectPossibleReductions(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L,</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  ReductionTracker &amp;Reductions) {</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Header = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>();</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Header-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(),</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;       <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a> = Header-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ab1cd5a3713b93a33f89a2086d473cf6e">getFirstInsertionPt</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="keywordflow">if</span> (!isa&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getType()-&gt;isSingleValueType())</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    SimpleLoopReduction SLR(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, L);</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="keywordflow">if</span> (!SLR.valid())</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LRR: Possible reduction: &quot;</span> &lt;&lt; *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; <span class="stringliteral">&quot; (with &quot;</span> &lt;&lt;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;          SLR.size() &lt;&lt; <span class="stringliteral">&quot; chained instructions)\n&quot;</span>);</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    Reductions.addSLR(SLR);</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  }</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;}</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment">// Collect the set of all users of the provided root instruction. This set of</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment">// users contains not only the direct users of the root instruction, but also</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment">// all users of those users, and so on. There are two exceptions:</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment">//   1. Instructions in the set of excluded instructions are never added to the</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment">//   use set (even if they are users). This is used, for example, to exclude</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment">//   including root increments in the use set of the primary IV.</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment">//   2. Instructions in the set of final instructions are added to the use set</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment">//   if they are users, but their users are not added. This is used, for</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment">//   example, to prevent a reduction update from forcing all later reduction</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment">//   updates into the use set.</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="keywordtype">void</span> LoopReroll::collectInLoopUserSet(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L,</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Root, <span class="keyword">const</span> SmallInstructionSet &amp;Exclude,</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <span class="keyword">const</span> SmallInstructionSet &amp;Final,</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;Instruction *&gt;</a> &amp;<a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>) {</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  SmallInstructionVector Queue(1, Root);</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  <span class="keywordflow">while</span> (!Queue.empty()) {</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Queue.pop_back_val();</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="keywordflow">if</span> (!Users.<a class="code" href="classllvm_1_1DenseSet.html#ab658e5485796a5ff90bd2dc3fca7d6d2">insert</a>(I).second)</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="keywordflow">if</span> (!Final.count(I))</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::use_iterator</a> UI = I-&gt;<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>(),</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;           UIE = I-&gt;<a class="code" href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">use_end</a>(); UI != UIE; ++UI) {</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1User.html">User</a> = cast&lt;Instruction&gt;(*UI);</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(User)) {</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;          <span class="comment">// Ignore &quot;wrap-around&quot; uses to PHIs of this loop&#39;s header.</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;          <span class="keywordflow">if</span> (PN-&gt;getIncomingBlock(UI) == L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>())</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        }</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  </div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        <span class="keywordflow">if</span> (L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a92a38e2e3412bde7fd2b71db212b61aa">contains</a>(User) &amp;&amp; !Exclude.count(User)) {</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;          Queue.push_back(User);</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        }</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      }</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="comment">// We also want to collect single-user &quot;feeder&quot; values.</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">User::op_iterator</a> OI = I-&gt;<a class="code" href="classllvm_1_1User.html#a2eeb1c7ed1cfe403f2ae0470e36c07e2">op_begin</a>(),</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;         OIE = I-&gt;<a class="code" href="classllvm_1_1User.html#af41f58e730804d10b91fcff39b035f74">op_end</a>(); OI != OIE; ++OI) {</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Op = dyn_cast&lt;Instruction&gt;(*OI))</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        <span class="keywordflow">if</span> (Op-&gt;hasOneUse() &amp;&amp; L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a92a38e2e3412bde7fd2b71db212b61aa">contains</a>(Op) &amp;&amp; !Exclude.count(Op) &amp;&amp;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            !Final.count(Op))</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;          Queue.push_back(Op);</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    }</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  }</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;}</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment">// Collect all of the users of all of the provided root instructions (combined</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment">// into a single set).</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="keywordtype">void</span> LoopReroll::collectInLoopUserSet(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L,</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <span class="keyword">const</span> SmallInstructionVector &amp;Roots,</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <span class="keyword">const</span> SmallInstructionSet &amp;Exclude,</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <span class="keyword">const</span> SmallInstructionSet &amp;Final,</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;Instruction *&gt;</a> &amp;Users) {</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <span class="keywordflow">for</span> (SmallInstructionVector::const_iterator <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Roots.begin(),</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;       <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a> = Roots.end(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    collectInLoopUserSet(L, *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Exclude, Final, Users);</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;}</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div><div class="line"><a name="l00523"></a><span class="lineno"><a class="line" href="LoopRerollPass_8cpp.html#a35563732e8c72d1a802bda5cb7e7a41f">  523</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LoopRerollPass_8cpp.html#a35563732e8c72d1a802bda5cb7e7a41f">isSimpleLoadStore</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI = dyn_cast&lt;LoadInst&gt;(I))</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keywordflow">return</span> LI-&gt;isSimple();</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *SI = dyn_cast&lt;StoreInst&gt;(I))</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="keywordflow">return</span> SI-&gt;isSimple();</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemIntrinsic.html">MemIntrinsic</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a> = dyn_cast&lt;MemIntrinsic&gt;(I))</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>-&gt;isVolatile();</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;}</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment">// Recognize loops that are setup like this:</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="comment">// %iv = phi [ (preheader, ...), (body, %iv.next) ]</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment">// %scaled.iv = mul %iv, scale</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment">// f(%scaled.iv)</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment">// %scaled.iv.1 = add %scaled.iv, 1</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment">// f(%scaled.iv.1)</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment">// %scaled.iv.2 = add %scaled.iv, 2</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment">// f(%scaled.iv.2)</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment">// %scaled.iv.scale_m_1 = add %scaled.iv, scale-1</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment">// f(%scaled.iv.scale_m_1)</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment">// ...</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment">// %iv.next = add %iv, 1</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment">// %cmp = icmp(%iv, ...)</span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment">// br %cmp, header, exit</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="comment">// and, if found, set IV = %scaled.iv, and add %iv.next to LoopIncs.</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="keywordtype">bool</span> LoopReroll::findScaleFromMul(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *RealIV, uint64_t &amp;Scale,</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                                  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *&amp;IV,</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                                  SmallInstructionVector &amp;LoopIncs) {</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <span class="comment">// This is a special case: here we&#39;re looking for all uses (except for</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <span class="comment">// the increment) to be multiplied by a common factor. The increment must</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  <span class="comment">// be by one. This is to capture loops like:</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  <span class="comment">//   for (int i = 0; i &lt; 500; ++i) {</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  <span class="comment">//     foo(3*i); foo(3*i+1); foo(3*i+2);</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <span class="comment">//   }</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <span class="keywordflow">if</span> (RealIV-&gt;<a class="code" href="classllvm_1_1Value.html#a380559e99b47632a34f74de7c1d03cc0">getNumUses</a>() != 2)</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVAddRecExpr.html">SCEVAddRecExpr</a> *RealIVSCEV = cast&lt;SCEVAddRecExpr&gt;(SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a30bd18ac905eacf3601bc6a553a9ff49">getSCEV</a>(RealIV));</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *User1 = cast&lt;Instruction&gt;(*RealIV-&gt;<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>()),</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;              *User2 = cast&lt;Instruction&gt;(*<a class="code" href="namespacellvm.html#aa1704159f75e6eacd595962ea6d93ffe">llvm::next</a>(RealIV-&gt;<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>()));</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <span class="keywordflow">if</span> (!SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#ae9623974341419bfd1d185cfdc65bedd">isSCEVable</a>(User1-&gt;getType()) || !SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#ae9623974341419bfd1d185cfdc65bedd">isSCEVable</a>(User2-&gt;getType()))</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVAddRecExpr.html">SCEVAddRecExpr</a> *User1SCEV =</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                         <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1SCEVAddRecExpr.html">SCEVAddRecExpr</a>&gt;(SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a30bd18ac905eacf3601bc6a553a9ff49">getSCEV</a>(User1)),</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                       *User2SCEV =</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                         dyn_cast&lt;SCEVAddRecExpr&gt;(SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a30bd18ac905eacf3601bc6a553a9ff49">getSCEV</a>(User2));</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <span class="keywordflow">if</span> (!User1SCEV || !User1SCEV-&gt;<a class="code" href="classllvm_1_1SCEVAddRecExpr.html#a88f514461ddb0af0fc59ac4639f644bc">isAffine</a>() ||</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      !User2SCEV || !User2SCEV-&gt;isAffine())</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  <span class="comment">// We assume below that User1 is the scale multiply and User2 is the</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  <span class="comment">// increment. If this can&#39;t be true, then swap them.</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  <span class="keywordflow">if</span> (User1SCEV == RealIVSCEV-&gt;<a class="code" href="classllvm_1_1SCEVAddRecExpr.html#ada9969a271c8bab660bfb2aa01f22e76">getPostIncExpr</a>(*SE)) {</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(User1, User2);</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(User1SCEV, User2SCEV);</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  }</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <span class="keywordflow">if</span> (User2SCEV != RealIVSCEV-&gt;<a class="code" href="classllvm_1_1SCEVAddRecExpr.html#ada9969a271c8bab660bfb2aa01f22e76">getPostIncExpr</a>(*SE))</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  assert(User2SCEV-&gt;getStepRecurrence(*SE)-&gt;isOne() &amp;&amp;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;         <span class="stringliteral">&quot;Invalid non-unit step for multiplicative scaling&quot;</span>);</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  LoopIncs.push_back(User2);</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVConstant.html">SCEVConstant</a> *MulScale =</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;      dyn_cast&lt;SCEVConstant&gt;(User1SCEV-&gt;<a class="code" href="classllvm_1_1SCEVAddRecExpr.html#a443e9130cd9f3e3baaa1b566e6aa5060">getStepRecurrence</a>(*SE))) {</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="comment">// Make sure that both the start and step have the same multiplier.</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordflow">if</span> (RealIVSCEV-&gt;<a class="code" href="classllvm_1_1SCEVAddRecExpr.html#a0d53a749bd858b270d322b34b8d7e1e5">getStart</a>()-&gt;<a class="code" href="classllvm_1_1SCEV.html#a9a16f1241255a605fc8debc1e26eaa4c">getType</a>() != MulScale-&gt;getType())</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="keywordflow">if</span> (SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#ad5829d76e14852080c205f8b94d830f1">getMulExpr</a>(RealIVSCEV-&gt;<a class="code" href="classllvm_1_1SCEVAddRecExpr.html#a0d53a749bd858b270d322b34b8d7e1e5">getStart</a>(), MulScale) !=</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        User1SCEV-&gt;<a class="code" href="classllvm_1_1SCEVAddRecExpr.html#a0d53a749bd858b270d322b34b8d7e1e5">getStart</a>())</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *MulScaleCI = MulScale-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>();</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="keywordflow">if</span> (!MulScaleCI-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a90982bca61da940a80629040c075e33e">uge</a>(2) || MulScaleCI-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a90982bca61da940a80629040c075e33e">uge</a>(<a class="code" href="LoopRerollPass_8cpp.html#a912e33de9fe69e47bf8688a719713907">MaxInc</a>))</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    Scale = MulScaleCI-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a6edd823ba5e4e1effc8280ca8a1194ef">getZExtValue</a>();</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    IV = User1;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  } <span class="keywordflow">else</span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LRR: Found possible scaling &quot;</span> &lt;&lt; *User1 &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;}</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="comment">// Collect all root increments with respect to the provided induction variable</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="comment">// (normally the PHI, but sometimes a multiply). A root increment is an</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="comment">// instruction, normally an add, with a positive constant less than Scale. In a</span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="comment">// rerollable loop, each of these increments is the root of an instruction</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="comment">// graph isomorphic to the others. Also, we collect the final induction</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="comment">// increment (the increment equal to the Scale), and its users in LoopIncs.</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="keywordtype">bool</span> LoopReroll::collectAllRoots(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, uint64_t Inc, uint64_t Scale,</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                                 <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *IV,</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                                 <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;SmallInstructionVector, 32&gt;</a> &amp;Roots,</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                                 SmallInstructionSet &amp;AllRoots,</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                                 SmallInstructionVector &amp;LoopIncs) {</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::use_iterator</a> UI = IV-&gt;<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>(),</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;       UIE = IV-&gt;<a class="code" href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">use_end</a>(); UI != UIE; ++UI) {</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1User.html">User</a> = cast&lt;Instruction&gt;(*UI);</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <span class="keywordflow">if</span> (!SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#ae9623974341419bfd1d185cfdc65bedd">isSCEVable</a>(User-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()))</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <span class="keywordflow">if</span> (User-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() != IV-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>())</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a92a38e2e3412bde7fd2b71db212b61aa">contains</a>(User))</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="LoopRerollPass_8cpp.html#afdd1c308d66ba7af258967fc57dbdbae">hasUsesOutsideLoop</a>(User, L))</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVConstant.html">SCEVConstant</a> *Diff = dyn_cast&lt;SCEVConstant&gt;(SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#aa888e3661c809163273aca85ded4d846">getMinusSCEV</a>(</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;          SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a30bd18ac905eacf3601bc6a553a9ff49">getSCEV</a>(User), SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a30bd18ac905eacf3601bc6a553a9ff49">getSCEV</a>(IV)))) {</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      uint64_t Idx = Diff-&gt;getValue()-&gt;getValue().getZExtValue();</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;      <span class="keywordflow">if</span> (Idx &gt; 0 &amp;&amp; Idx &lt; Scale) {</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        Roots[Idx-1].<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(User);</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        AllRoots.insert(User);</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Idx == Scale &amp;&amp; Inc &gt; 1) {</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        LoopIncs.push_back(User);</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;      }</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    }</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  }</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <span class="keywordflow">if</span> (Roots[0].empty())</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <span class="keywordtype">bool</span> AllSame = <span class="keyword">true</span>;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 1; i &lt; Scale-1; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <span class="keywordflow">if</span> (Roots[i].<a class="code" href="Target_2README_8txt.html#a02def7c594e9f19ff247ed0bf33d1c30">size</a>() != Roots[0].<a class="code" href="Target_2README_8txt.html#a02def7c594e9f19ff247ed0bf33d1c30">size</a>()) {</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;      AllSame = <span class="keyword">false</span>;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    }</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  <span class="keywordflow">if</span> (!AllSame)</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;}</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;<span class="comment">// Validate the selected reductions. All iterations must have an isomorphic</span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="comment">// part of the reduction chain and, for non-associative reductions, the chain</span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="comment">// entries must appear in order.</span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="keywordtype">bool</span> LoopReroll::ReductionTracker::validateSelected() {</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  <span class="comment">// For a non-associative reduction, the chain entries must appear in order.</span></div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DenseSet_1_1Iterator.html">DenseSet&lt;int&gt;::iterator</a> RI = Reds.begin(), RIE = Reds.end();</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;       RI != RIE; ++RI) {</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="keywordtype">int</span> i = *RI;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="keywordtype">int</span> PrevIter = 0, BaseCount = 0, Count = 0;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="keywordflow">for</span> (SimpleLoopReduction::iterator J = PossibleReds[i].<a class="code" href="namespacellvm_1_1sys_1_1path.html#a33706aab89e700b8f79e1fa6f4f0e3ee">begin</a>(),</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;         JE = PossibleReds[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="classllvm_1_1sys_1_1path_1_1const__iterator.html#a8a503d1cbee10d1b8c8f5ac2a03b90df">end</a>(); J != JE; ++J) {</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  <span class="comment">// Note that all instructions in the chain must have been found because</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  <span class="comment">// all instructions in the function must have been assigned to some</span></div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <span class="comment">// iteration.</span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;      <span class="keywordtype">int</span> Iter = PossibleRedIter[*J];</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;      <span class="keywordflow">if</span> (Iter != PrevIter &amp;&amp; Iter != PrevIter + 1 &amp;&amp;</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;          !PossibleReds[i].getReducedValue()-&gt;isAssociative()) {</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LRR: Out-of-order non-associative reduction: &quot;</span> &lt;&lt;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                        *J &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;      }</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;      <span class="keywordflow">if</span> (Iter != PrevIter) {</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        <span class="keywordflow">if</span> (Count != BaseCount) {</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;          <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LRR: Iteration &quot;</span> &lt;&lt; PrevIter &lt;&lt;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                <span class="stringliteral">&quot; reduction use count &quot;</span> &lt;&lt; Count &lt;&lt;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                <span class="stringliteral">&quot; is not equal to the base use count &quot;</span> &lt;&lt;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                BaseCount &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        }</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        Count = 0;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;      }</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;      ++Count;</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;      <span class="keywordflow">if</span> (Iter == 0)</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        ++BaseCount;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;      PrevIter = Iter;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    }</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  }</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;}</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;<span class="comment">// For all selected reductions, remove all parts except those in the first</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="comment">// iteration (and the PHI). Replace outside uses of the reduced value with uses</span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="comment">// of the first-iteration reduced value (in other words, reroll the selected</span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="comment">// reductions).</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="keywordtype">void</span> LoopReroll::ReductionTracker::replaceSelected() {</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  <span class="comment">// Fixup reductions to refer to the last instruction associated with the</span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  <span class="comment">// first iteration (not the last).</span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DenseSet_1_1Iterator.html">DenseSet&lt;int&gt;::iterator</a> RI = Reds.begin(), RIE = Reds.end();</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;       RI != RIE; ++RI) {</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <span class="keywordtype">int</span> i = *RI;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> = 0;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> e = PossibleReds[i].<a class="code" href="Target_2README_8txt.html#a02def7c594e9f19ff247ed0bf33d1c30">size</a>(); j != e; ++<a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>)</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;      <span class="keywordflow">if</span> (PossibleRedIter[PossibleReds[i][j]] != 0) {</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        --<a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>;</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;      }</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <span class="comment">// Replace users with the new end-of-chain value.</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    SmallInstructionVector <a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1value__use__iterator.html">Value::use_iterator</a> UI =</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;           PossibleReds[i].getReducedValue()-&gt;use_begin(),</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;         UIE = PossibleReds[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].getReducedValue()-&gt;use_end(); UI != UIE; ++UI)</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      Users.push_back(cast&lt;Instruction&gt;(*UI));</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="keywordflow">for</span> (SmallInstructionVector::iterator J = Users.begin(),</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;         JE = Users.end(); J != JE; ++J)</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;      (*J)-&gt;replaceUsesOfWith(PossibleReds[i].getReducedValue(),</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                              PossibleReds[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>][<a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>]);</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  }</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;}</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;<span class="comment">// Reroll the provided loop with respect to the provided induction variable.</span></div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;<span class="comment">// Generally, we&#39;re looking for a loop like this:</span></div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;<span class="comment">// %iv = phi [ (preheader, ...), (body, %iv.next) ]</span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="comment">// f(%iv)</span></div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;<span class="comment">// %iv.1 = add %iv, 1                &lt;-- a root increment</span></div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;<span class="comment">// f(%iv.1)</span></div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;<span class="comment">// %iv.2 = add %iv, 2                &lt;-- a root increment</span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="comment">// f(%iv.2)</span></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="comment">// %iv.scale_m_1 = add %iv, scale-1  &lt;-- a root increment</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="comment">// f(%iv.scale_m_1)</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="comment">// ...</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="comment">// %iv.next = add %iv, scale</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="comment">// %cmp = icmp(%iv, ...)</span></div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="comment">// br %cmp, header, exit</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="comment">// Notably, we do not require that f(%iv), f(%iv.1), etc. be isolated groups of</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment">// instructions. In other words, the instructions in f(%iv), f(%iv.1), etc. can</span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment">// be intermixed with eachother. The restriction imposed by this algorithm is</span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment">// that the relative order of the isomorphic instructions in f(%iv), f(%iv.1),</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="comment">// etc. be the same.</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="comment">// First, we collect the use set of %iv, excluding the other increment roots.</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="comment">// This gives us f(%iv). Then we iterate over the loop instructions (scale-1)</span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="comment">// times, having collected the use set of f(%iv.(i+1)), during which we:</span></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="comment">//   - Ensure that the next unmatched instruction in f(%iv) is isomorphic to</span></div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="comment">//     the next unmatched instruction in f(%iv.(i+1)).</span></div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="comment">//   - Ensure that both matched instructions don&#39;t have any external users</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="comment">//     (with the exception of last-in-chain reduction instructions).</span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="comment">//   - Track the (aliasing) write set, and other side effects, of all</span></div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="comment">//     instructions that belong to future iterations that come before the matched</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<span class="comment">//     instructions. If the matched instructions read from that write set, then</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="comment">//     f(%iv) or f(%iv.(i+1)) has some dependency on instructions in</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;<span class="comment">//     f(%iv.(j+1)) for some j &gt; i, and we cannot reroll the loop. Similarly,</span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="comment">//     if any of these future instructions had side effects (could not be</span></div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="comment">//     speculatively executed), and so do the matched instructions, when we</span></div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="comment">//     cannot reorder those side-effect-producing instructions, and rerolling</span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="comment">//     fails.</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="comment">// Finally, we make sure that all loop instructions are either loop increment</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="comment">// roots, belong to simple latch code, parts of validated reductions, part of</span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="comment">// f(%iv) or part of some f(%iv.i). If all of that is true (and all reductions</span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="comment">// have been validated), then we reroll the loop.</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;<span class="keywordtype">bool</span> LoopReroll::reroll(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *IV, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Header,</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *IterCount,</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                        ReductionTracker &amp;Reductions) {</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVAddRecExpr.html">SCEVAddRecExpr</a> *RealIVSCEV = cast&lt;SCEVAddRecExpr&gt;(SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a30bd18ac905eacf3601bc6a553a9ff49">getSCEV</a>(IV));</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  uint64_t Inc = cast&lt;SCEVConstant&gt;(RealIVSCEV-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#a8d1a2d2a4d2f935841d226bbcbf54a48">getOperand</a>(1))-&gt;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;                   getValue()-&gt;getZExtValue();</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  <span class="comment">// The collection of loop increment instructions.</span></div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  SmallInstructionVector LoopIncs;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  uint64_t Scale = Inc;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  <span class="comment">// The effective induction variable, IV, is normally also the real induction</span></div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  <span class="comment">// variable. When we&#39;re dealing with a loop like:</span></div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  <span class="comment">//   for (int i = 0; i &lt; 500; ++i)</span></div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  <span class="comment">//     x[3*i] = ...;</span></div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  <span class="comment">//     x[3*i+1] = ...;</span></div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  <span class="comment">//     x[3*i+2] = ...;</span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;  <span class="comment">// then the real IV is still i, but the effective IV is (3*i).</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *RealIV = IV;</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;  <span class="keywordflow">if</span> (Inc == 1 &amp;&amp; !findScaleFromMul(RealIV, Scale, IV, LoopIncs))</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  assert(Scale &lt;= <a class="code" href="LoopRerollPass_8cpp.html#a912e33de9fe69e47bf8688a719713907">MaxInc</a> &amp;&amp; <span class="stringliteral">&quot;Scale is too large&quot;</span>);</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  assert(Scale &gt; 1 &amp;&amp; <span class="stringliteral">&quot;Scale must be at least 2&quot;</span>);</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  <span class="comment">// The set of increment instructions for each increment value.</span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;SmallInstructionVector, 32&gt;</a> Roots(Scale-1);</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;  SmallInstructionSet AllRoots;</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  <span class="keywordflow">if</span> (!collectAllRoots(L, Inc, Scale, IV, Roots, AllRoots, LoopIncs))</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LRR: Found all root induction increments for: &quot;</span> &lt;&lt;</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;                  *RealIV &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;  <span class="comment">// An array of just the possible reductions for this scale factor. When we</span></div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  <span class="comment">// collect the set of all users of some root instructions, these reduction</span></div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  <span class="comment">// instructions are treated as &#39;final&#39; (their uses are not considered).</span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;  <span class="comment">// This is important because we don&#39;t want the root use set to search down</span></div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  <span class="comment">// the reduction chain.</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  SmallInstructionSet PossibleRedSet;</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  SmallInstructionSet PossibleRedLastSet, PossibleRedPHISet;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  Reductions.restrictToScale(Scale, PossibleRedSet, PossibleRedPHISet,</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;                             PossibleRedLastSet);</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  <span class="comment">// We now need to check for equivalence of the use graph of each root with</span></div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  <span class="comment">// that of the primary induction variable (excluding the roots). Our goal</span></div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  <span class="comment">// here is not to solve the full graph isomorphism problem, but rather to</span></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  <span class="comment">// catch common cases without a lot of work. As a result, we will assume</span></div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  <span class="comment">// that the relative order of the instructions in each unrolled iteration</span></div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  <span class="comment">// is the same (although we will not make an assumption about how the</span></div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  <span class="comment">// different iterations are intermixed). Note that while the order must be</span></div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  <span class="comment">// the same, the instructions may not be in the same basic block.</span></div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  SmallInstructionSet Exclude(AllRoots);</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;  Exclude.insert(LoopIncs.begin(), LoopIncs.end());</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;  <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;Instruction *&gt;</a> BaseUseSet;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  collectInLoopUserSet(L, IV, Exclude, PossibleRedSet, BaseUseSet);</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;  <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;Instruction *&gt;</a> AllRootUses;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  std::vector&lt;DenseSet&lt;Instruction *&gt; &gt; RootUseSets(Scale-1);</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  <span class="keywordtype">bool</span> MatchFailed = <span class="keyword">false</span>;</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; Scale-1 &amp;&amp; !MatchFailed; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;Instruction *&gt;</a> &amp;RootUseSet = RootUseSets[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    collectInLoopUserSet(L, Roots[i], SmallInstructionSet(),</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;                         PossibleRedSet, RootUseSet);</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LRR: base use set size: &quot;</span> &lt;&lt; BaseUseSet.<a class="code" href="classllvm_1_1DenseSet.html#a24882fb4943904e5f1c390f36a974b85">size</a>() &lt;&lt;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;                    <span class="stringliteral">&quot; vs. iteration increment &quot;</span> &lt;&lt; (i+1) &lt;&lt;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;                    <span class="stringliteral">&quot; use set size: &quot;</span> &lt;&lt; RootUseSet.<a class="code" href="classllvm_1_1DenseSet.html#a24882fb4943904e5f1c390f36a974b85">size</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    <span class="keywordflow">if</span> (BaseUseSet.<a class="code" href="classllvm_1_1DenseSet.html#a24882fb4943904e5f1c390f36a974b85">size</a>() != RootUseSet.<a class="code" href="classllvm_1_1DenseSet.html#a24882fb4943904e5f1c390f36a974b85">size</a>()) {</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;      MatchFailed = <span class="keyword">true</span>;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    }</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <span class="comment">// In addition to regular aliasing information, we need to look for</span></div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    <span class="comment">// instructions from later (future) iterations that have side effects</span></div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    <span class="comment">// preventing us from reordering them past other instructions with side</span></div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <span class="comment">// effects.</span></div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <span class="keywordtype">bool</span> FutureSideEffects = <span class="keyword">false</span>;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <a class="code" href="classllvm_1_1AliasSetTracker.html">AliasSetTracker</a> AST(*AA);</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <span class="comment">// The map between instructions in f(%iv.(i+1)) and f(%iv).</span></div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, Value *&gt;</a> BaseMap;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    assert(L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a9a89d64fefa63ff782d8f29e53a01873">getNumBlocks</a>() == 1 &amp;&amp; <span class="stringliteral">&quot;Cannot handle multi-block loops&quot;</span>);</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> J1 = Header-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(), J2 = Header-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(),</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;         JE = Header-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>(); J1 != JE &amp;&amp; !MatchFailed; ++J1) {</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;      <span class="keywordflow">if</span> (cast&lt;Instruction&gt;(J1) == RealIV)</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;      <span class="keywordflow">if</span> (cast&lt;Instruction&gt;(J1) == IV)</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;      <span class="keywordflow">if</span> (!BaseUseSet.<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(J1))</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;      <span class="keywordflow">if</span> (PossibleRedPHISet.count(J1)) <span class="comment">// Skip reduction PHIs.</span></div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;      <span class="keywordflow">while</span> (J2 != JE &amp;&amp; (!RootUseSet.<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(J2) ||</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;             std::find(Roots[i].<a class="code" href="namespacellvm_1_1sys_1_1path.html#a33706aab89e700b8f79e1fa6f4f0e3ee">begin</a>(), Roots[i].<a class="code" href="namespacellvm_1_1sys_1_1path.html#a214ec2f04ffd92636ed4bd2717607a1d">end</a>(), J2) !=</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;               Roots[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>())) {</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        <span class="comment">// As we iterate through the instructions, instructions that don&#39;t</span></div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;        <span class="comment">// belong to previous iterations (or the base case), must belong to</span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        <span class="comment">// future iterations. We want to track the alias set of writes from</span></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        <span class="comment">// previous iterations.</span></div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;        <span class="keywordflow">if</span> (!isa&lt;PHINode&gt;(J2) &amp;&amp; !BaseUseSet.<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(J2) &amp;&amp;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;            !AllRootUses.<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(J2)) {</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;          <span class="keywordflow">if</span> (J2-&gt;<a class="code" href="classllvm_1_1Instruction.html#aa26de3d6e38997b9041e824ea558c770">mayWriteToMemory</a>())</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;            AST.<a class="code" href="classllvm_1_1AliasSetTracker.html#ada3491a53a1c7005127769ae90eefcbf">add</a>(J2);</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;          <span class="comment">// Note: This is specifically guarded by a check on isa&lt;PHINode&gt;,</span></div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;          <span class="comment">// which while a valid (somewhat arbitrary) micro-optimization, is</span></div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;          <span class="comment">// needed because otherwise isSafeToSpeculativelyExecute returns</span></div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;          <span class="comment">// false on PHI nodes.</span></div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;          <span class="keywordflow">if</span> (!<a class="code" href="LoopRerollPass_8cpp.html#a35563732e8c72d1a802bda5cb7e7a41f">isSimpleLoadStore</a>(J2) &amp;&amp; !<a class="code" href="namespacellvm.html#acb7a7f0df849c2c44503352493524895">isSafeToSpeculativelyExecute</a>(J2, DL))</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;            FutureSideEffects = <span class="keyword">true</span>; </div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;        }</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        ++J2;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;      }</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;      <span class="keywordflow">if</span> (!J1-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9f729c6c3e0de4a55dc5a3693fd4a9eb">isSameOperationAs</a>(J2)) {</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LRR: iteration root match failed at &quot;</span> &lt;&lt; *J1 &lt;&lt;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;                        <span class="stringliteral">&quot; vs. &quot;</span> &lt;&lt; *J2 &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;        MatchFailed = <span class="keyword">true</span>;</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;      }</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;      <span class="comment">// Make sure that this instruction, which is in the use set of this</span></div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;      <span class="comment">// root instruction, does not also belong to the base set or the set of</span></div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;      <span class="comment">// some previous root instruction.</span></div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;      <span class="keywordflow">if</span> (BaseUseSet.<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(J2) || AllRootUses.<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(J2)) {</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LRR: iteration root match failed at &quot;</span> &lt;&lt; *J1 &lt;&lt;</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                        <span class="stringliteral">&quot; vs. &quot;</span> &lt;&lt; *J2 &lt;&lt; <span class="stringliteral">&quot; (prev. case overlap)\n&quot;</span>);</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        MatchFailed = <span class="keyword">true</span>;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;      }</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;      <span class="comment">// Make sure that we don&#39;t alias with any instruction in the alias set</span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;      <span class="comment">// tracker. If we do, then we depend on a future iteration, and we</span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;      <span class="comment">// can&#39;t reroll.</span></div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;      <span class="keywordflow">if</span> (J2-&gt;<a class="code" href="classllvm_1_1Instruction.html#a0fd8d3c26bf5cd614b0e6a9b8886a5d0">mayReadFromMemory</a>()) {</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">AliasSetTracker::iterator</a> K = AST.<a class="code" href="classllvm_1_1AliasSetTracker.html#ac170f23b2c24a4b1c0d81c3e290959ae">begin</a>(), KE = AST.<a class="code" href="classllvm_1_1AliasSetTracker.html#af18839e3170da6f597222b8e5af15e5e">end</a>();</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;             K != KE &amp;&amp; !MatchFailed; ++K) {</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;          <span class="keywordflow">if</span> (K-&gt;aliasesUnknownInst(J2, *AA)) {</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;            <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LRR: iteration root match failed at &quot;</span> &lt;&lt; *J1 &lt;&lt;</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;                            <span class="stringliteral">&quot; vs. &quot;</span> &lt;&lt; *J2 &lt;&lt; <span class="stringliteral">&quot; (depends on future store)\n&quot;</span>);</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;            MatchFailed = <span class="keyword">true</span>;</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;          }</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;        }</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;      }</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;      <span class="comment">// If we&#39;ve past an instruction from a future iteration that may have</span></div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;      <span class="comment">// side effects, and this instruction might also, then we can&#39;t reorder</span></div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;      <span class="comment">// them, and this matching fails. As an exception, we allow the alias</span></div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;      <span class="comment">// set tracker to handle regular (simple) load/store dependencies.</span></div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;      <span class="keywordflow">if</span> (FutureSideEffects &amp;&amp;</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;            ((!<a class="code" href="LoopRerollPass_8cpp.html#a35563732e8c72d1a802bda5cb7e7a41f">isSimpleLoadStore</a>(J1) &amp;&amp; !<a class="code" href="namespacellvm.html#acb7a7f0df849c2c44503352493524895">isSafeToSpeculativelyExecute</a>(J1)) ||</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;             (!<a class="code" href="LoopRerollPass_8cpp.html#a35563732e8c72d1a802bda5cb7e7a41f">isSimpleLoadStore</a>(J2) &amp;&amp; !<a class="code" href="namespacellvm.html#acb7a7f0df849c2c44503352493524895">isSafeToSpeculativelyExecute</a>(J2)))) {</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LRR: iteration root match failed at &quot;</span> &lt;&lt; *J1 &lt;&lt;</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;                        <span class="stringliteral">&quot; vs. &quot;</span> &lt;&lt; *J2 &lt;&lt;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;                        <span class="stringliteral">&quot; (side effects prevent reordering)\n&quot;</span>);</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        MatchFailed = <span class="keyword">true</span>;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;      }</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;      <span class="comment">// For instructions that are part of a reduction, if the operation is</span></div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;      <span class="comment">// associative, then don&#39;t bother matching the operands (because we</span></div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;      <span class="comment">// already know that the instructions are isomorphic, and the order</span></div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      <span class="comment">// within the iteration does not matter). For non-associative reductions,</span></div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;      <span class="comment">// we do need to match the operands, because we need to reject</span></div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;      <span class="comment">// out-of-order instructions within an iteration!</span></div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;      <span class="comment">// For example (assume floating-point addition), we need to reject this:</span></div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;      <span class="comment">//   x += a[i]; x += b[i];</span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;      <span class="comment">//   x += a[i+1]; x += b[i+1];</span></div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;      <span class="comment">//   x += b[i+2]; x += a[i+2];</span></div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;      <span class="keywordtype">bool</span> InReduction = Reductions.isPairInSame(J1, J2);</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;      <span class="keywordflow">if</span> (!(InReduction &amp;&amp; J1-&gt;<a class="code" href="classllvm_1_1Instruction.html#aa113b8a9ef3de9c2f075a046ad658717">isAssociative</a>())) {</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;        <span class="keywordtype">bool</span> Swapped = <span class="keyword">false</span>, SomeOpMatched = <span class="keyword">false</span>;;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> = 0; <a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> &lt; J1-&gt;<a class="code" href="classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">getNumOperands</a>() &amp;&amp; !MatchFailed; ++<a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>) {</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *Op2 = J2-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(<a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>);</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    <span class="comment">// If this is part of a reduction (and the operation is not</span></div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    <span class="comment">// associatve), then we match all operands, but not those that are</span></div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    <span class="comment">// part of the reduction.</span></div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;          <span class="keywordflow">if</span> (InReduction)</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Op2I = dyn_cast&lt;Instruction&gt;(Op2))</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;              <span class="keywordflow">if</span> (Reductions.isPairInSame(J2, Op2I))</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;          <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, Value *&gt;::iterator</a> BMI = BaseMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">find</a>(Op2);</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;          <span class="keywordflow">if</span> (BMI != BaseMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">end</a>())</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;            Op2 = BMI-&gt;second;</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;          <span class="keywordflow">else</span> <a class="code" href="LLParser_8cpp.html#aae58e3df0180401e8f3ab75c18fbc07a">if</a> (std::find(Roots[i].<a class="code" href="namespacellvm_1_1sys_1_1path.html#a33706aab89e700b8f79e1fa6f4f0e3ee">begin</a>(), Roots[i].<a class="code" href="namespacellvm_1_1sys_1_1path.html#a214ec2f04ffd92636ed4bd2717607a1d">end</a>(),</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;                             (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a>*) Op2) != Roots[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>())</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;            Op2 = IV;</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;          <span class="keywordflow">if</span> (J1-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(Swapped ? <span class="keywordtype">unsigned</span>(!<a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>) : <a class="code" href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>) != Op2) {</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;      <span class="comment">// If we&#39;ve not already decided to swap the matched operands, and</span></div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;      <span class="comment">// we&#39;ve not already matched our first operand (note that we could</span></div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;      <span class="comment">// have skipped matching the first operand because it is part of a</span></div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;      <span class="comment">// reduction above), and the instruction is commutative, then try</span></div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;      <span class="comment">// the swapped match.</span></div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;            <span class="keywordflow">if</span> (!Swapped &amp;&amp; J1-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1c2048f254df730c4de1643ec791ddf9">isCommutative</a>() &amp;&amp; !SomeOpMatched &amp;&amp;</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;                J1-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(!j) == Op2) {</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;              Swapped = <span class="keyword">true</span>;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;              <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LRR: iteration root match failed at &quot;</span> &lt;&lt; *J1 &lt;&lt;</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;                              <span class="stringliteral">&quot; vs. &quot;</span> &lt;&lt; *J2 &lt;&lt; <span class="stringliteral">&quot; (operand &quot;</span> &lt;&lt; j &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>);</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;              MatchFailed = <span class="keyword">true</span>;</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;              <span class="keywordflow">break</span>;</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;            }</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;          }</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;          SomeOpMatched = <span class="keyword">true</span>;</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;        }</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;      }</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;      <span class="keywordflow">if</span> ((!PossibleRedLastSet.count(J1) &amp;&amp; <a class="code" href="LoopRerollPass_8cpp.html#afdd1c308d66ba7af258967fc57dbdbae">hasUsesOutsideLoop</a>(J1, L)) ||</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;          (!PossibleRedLastSet.count(J2) &amp;&amp; <a class="code" href="LoopRerollPass_8cpp.html#afdd1c308d66ba7af258967fc57dbdbae">hasUsesOutsideLoop</a>(J2, L))) {</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LRR: iteration root match failed at &quot;</span> &lt;&lt; *J1 &lt;&lt;</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;                        <span class="stringliteral">&quot; vs. &quot;</span> &lt;&lt; *J2 &lt;&lt; <span class="stringliteral">&quot; (uses outside loop)\n&quot;</span>);</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;        MatchFailed = <span class="keyword">true</span>;</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;      }</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;      <span class="keywordflow">if</span> (!MatchFailed)</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;        BaseMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a699a66e504b48fdeff124e82f6c61917">insert</a>(std::pair&lt;Value *, Value *&gt;(J2, J1));</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;      AllRootUses.<a class="code" href="classllvm_1_1DenseSet.html#ab658e5485796a5ff90bd2dc3fca7d6d2">insert</a>(J2);</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;      Reductions.recordPair(J1, J2, i+1);</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;      ++J2;</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    }</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;  }</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;  <span class="keywordflow">if</span> (MatchFailed)</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LRR: Matched all iteration increments for &quot;</span> &lt;&lt;</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;                  *RealIV &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;  <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;Instruction *&gt;</a> LoopIncUseSet;</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;  collectInLoopUserSet(L, LoopIncs, SmallInstructionSet(),</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;                       SmallInstructionSet(), LoopIncUseSet);</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LRR: Loop increment set size: &quot;</span> &lt;&lt;</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;                  LoopIncUseSet.<a class="code" href="classllvm_1_1DenseSet.html#a24882fb4943904e5f1c390f36a974b85">size</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  <span class="comment">// Make sure that all instructions in the loop have been included in some</span></div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;  <span class="comment">// use set.</span></div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> J = Header-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(), JE = Header-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>();</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;       J != JE; ++J) {</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    <span class="keywordflow">if</span> (isa&lt;DbgInfoIntrinsic&gt;(J))</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    <span class="keywordflow">if</span> (cast&lt;Instruction&gt;(J) == RealIV)</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    <span class="keywordflow">if</span> (cast&lt;Instruction&gt;(J) == IV)</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <span class="keywordflow">if</span> (BaseUseSet.<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(J) || AllRootUses.<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(J) ||</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;        (LoopIncUseSet.<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(J) &amp;&amp; (J-&gt;<a class="code" href="classllvm_1_1Instruction.html#a237e6bf58bc993ea494bdde7480ca428">isTerminator</a>() ||</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;                                    <a class="code" href="namespacellvm.html#acb7a7f0df849c2c44503352493524895">isSafeToSpeculativelyExecute</a>(J, DL))))</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    <span class="keywordflow">if</span> (AllRoots.count(J))</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <span class="keywordflow">if</span> (Reductions.isSelectedPHI(J))</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LRR: aborting reroll based on &quot;</span> &lt;&lt; *RealIV &lt;&lt;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;                    <span class="stringliteral">&quot; unprocessed instruction found: &quot;</span> &lt;&lt; *J &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    MatchFailed = <span class="keyword">true</span>;</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;  }</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;  <span class="keywordflow">if</span> (MatchFailed)</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LRR: all instructions processed from &quot;</span> &lt;&lt;</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;                  *RealIV &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;  <span class="keywordflow">if</span> (!Reductions.validateSelected())</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;  <span class="comment">// At this point, we&#39;ve validated the rerolling, and we&#39;re committed to</span></div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;  <span class="comment">// making changes!</span></div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;  Reductions.replaceSelected();</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  <span class="comment">// Remove instructions associated with non-base iterations.</span></div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html#ad403e5f1b62843ac7584a2c51c63bfa3">BasicBlock::reverse_iterator</a> J = Header-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a1c2af7a9e501d399f06ca7e10eef46e4">rbegin</a>();</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;       J != Header-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a9237251072bf6816163abc2d053212ee">rend</a>();) {</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    <span class="keywordflow">if</span> (AllRootUses.<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(&amp;*J)) {</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *D = &amp;*J;</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LRR: removing: &quot;</span> &lt;&lt; *D &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;      D-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">eraseFromParent</a>();</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    }</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    ++J; </div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;  }</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  <span class="comment">// Insert the new induction variable.</span></div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *Start = RealIVSCEV-&gt;<a class="code" href="classllvm_1_1SCEVAddRecExpr.html#a0d53a749bd858b270d322b34b8d7e1e5">getStart</a>();</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  <span class="keywordflow">if</span> (Inc == 1)</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    Start = SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#ad5829d76e14852080c205f8b94d830f1">getMulExpr</a>(Start,</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;                           SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a2eb94d079d8416118f4aaed865ab05d7">getConstant</a>(Start-&gt;<a class="code" href="classllvm_1_1SCEV.html#a9a16f1241255a605fc8debc1e26eaa4c">getType</a>(), Scale));</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVAddRecExpr.html">SCEVAddRecExpr</a> *<a class="code" href="MD5_8cpp.html#ae42219072d798876e6b08e6b78614ff6">H</a> =</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    cast&lt;SCEVAddRecExpr&gt;(SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a659b27f6737fcb7eaf333b0279da1154">getAddRecExpr</a>(Start,</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                           SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a2eb94d079d8416118f4aaed865ab05d7">getConstant</a>(RealIVSCEV-&gt;<a class="code" href="classllvm_1_1SCEVNAryExpr.html#aed1b1d3b764c76210c67dd1b4a6be2f2">getType</a>(), 1),</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;                           L, <a class="code" href="classllvm_1_1SCEV.html#af43000d4dcb7d6d63cb6e36933ed3f6fa23e74052c4d79cfdaa23460a3c946656">SCEV::FlagAnyWrap</a>));</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;  { <span class="comment">// Limit the lifetime of SCEVExpander.</span></div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <a class="code" href="classllvm_1_1SCEVExpander.html">SCEVExpander</a> Expander(*SE, <span class="stringliteral">&quot;reroll&quot;</span>);</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *NewIV =</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;      cast&lt;PHINode&gt;(Expander.<a class="code" href="classllvm_1_1SCEVExpander.html#a583d3ca95f83216d632a4d1ae0330dd0">expandCodeFor</a>(H, IV-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(),</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;                                           Header-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>()));</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1DenseSet_1_1Iterator.html">DenseSet&lt;Instruction *&gt;::iterator</a> J = BaseUseSet.<a class="code" href="classllvm_1_1DenseSet.html#aee8f4c3fefab2a8e9c62622527c8b60c">begin</a>(),</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;         JE = BaseUseSet.<a class="code" href="classllvm_1_1DenseSet.html#a33bf9e8d62adbf5e2d52c5d7c1c1094b">end</a>(); J != JE; ++J)</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;      (*J)-&gt;replaceUsesOfWith(IV, NewIV);</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = dyn_cast&lt;BranchInst&gt;(Header-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>())) {</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;      <span class="keywordflow">if</span> (LoopIncUseSet.<a class="code" href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">count</a>(BI)) {</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *ICSCEV = RealIVSCEV-&gt;<a class="code" href="classllvm_1_1SCEVAddRecExpr.html#a11bb31f99854303d2a934765469c5c2c">evaluateAtIteration</a>(IterCount, *SE);</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        <span class="keywordflow">if</span> (Inc == 1)</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;          ICSCEV =</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;            SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#ad5829d76e14852080c205f8b94d830f1">getMulExpr</a>(ICSCEV, SE-&gt;<a class="code" href="classllvm_1_1ScalarEvolution.html#a2eb94d079d8416118f4aaed865ab05d7">getConstant</a>(ICSCEV-&gt;<a class="code" href="classllvm_1_1SCEV.html#a9a16f1241255a605fc8debc1e26eaa4c">getType</a>(), Scale));</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *IC;</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;        <span class="keywordflow">if</span> (isa&lt;SCEVConstant&gt;(ICSCEV)) {</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;          IC = Expander.<a class="code" href="classllvm_1_1SCEVExpander.html#a583d3ca95f83216d632a4d1ae0330dd0">expandCodeFor</a>(ICSCEV, NewIV-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), BI);</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;          <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Preheader = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1bc74c76b876ad387293ecde0f21ed45">getLoopPreheader</a>();</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;          <span class="keywordflow">if</span> (!Preheader)</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;            Preheader = <a class="code" href="namespacellvm.html#a978c3a939268de7f7de507c4037a8d74">InsertPreheaderForLoop</a>(L, <span class="keyword">this</span>);</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;          IC = Expander.<a class="code" href="classllvm_1_1SCEVExpander.html#a583d3ca95f83216d632a4d1ae0330dd0">expandCodeFor</a>(ICSCEV, NewIV-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(),</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;                                      Preheader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>());</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;        }</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160; </div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewIVNext = NewIV-&gt;<a class="code" href="classllvm_1_1PHINode.html#a21960167f529265a1cb02ac1e8ad10f6">getIncomingValueForBlock</a>(Header); </div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Cond = <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(BI, <a class="code" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP_EQ</a>, NewIVNext, IC,</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;                                   <span class="stringliteral">&quot;exitcond&quot;</span>);</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;        BI-&gt;setCondition(Cond);</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;        <span class="keywordflow">if</span> (BI-&gt;getSuccessor(1) != Header)</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;          BI-&gt;swapSuccessors();</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;      }</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    }</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;  }</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;  <a class="code" href="namespacellvm.html#ad5b5ed1a0de8792e2ebf2eba3ba712fd">SimplifyInstructionsInBlock</a>(Header, DL, TLI);</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;  <a class="code" href="namespacellvm.html#af44ceebb0726227cf82bd54a0bc286fa">DeleteDeadPHIs</a>(Header, TLI);</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;  ++NumRerolledLoops;</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;}</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;<span class="keywordtype">bool</span> LoopReroll::runOnLoop(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1LPPassManager.html">LPPassManager</a> &amp;LPM) {</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;  AA = &amp;getAnalysis&lt;AliasAnalysis&gt;();</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;  LI = &amp;getAnalysis&lt;LoopInfo&gt;();</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;  SE = &amp;getAnalysis&lt;ScalarEvolution&gt;();</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;  TLI = &amp;getAnalysis&lt;TargetLibraryInfo&gt;();</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;  DL = getAnalysisIfAvailable&lt;DataLayout&gt;();</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  DT = &amp;getAnalysis&lt;DominatorTree&gt;();</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Header = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">getHeader</a>();</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LRR: F[&quot;</span> &lt;&lt; Header-&gt;getParent()-&gt;getName() &lt;&lt;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;        <span class="stringliteral">&quot;] Loop %&quot;</span> &lt;&lt; Header-&gt;getName() &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt;</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;        L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a9a89d64fefa63ff782d8f29e53a01873">getNumBlocks</a>() &lt;&lt; <span class="stringliteral">&quot; block(s))\n&quot;</span>);</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  <span class="comment">// For now, we&#39;ll handle only single BB loops.</span></div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;  <span class="keywordflow">if</span> (L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a9a89d64fefa63ff782d8f29e53a01873">getNumBlocks</a>() &gt; 1)</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    <span class="keywordflow">return</span> Changed;</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;  <span class="keywordflow">if</span> (!SE-&gt;hasLoopInvariantBackedgeTakenCount(L))</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    <span class="keywordflow">return</span> Changed;</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *LIBETC = SE-&gt;getBackedgeTakenCount(L);</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEV.html">SCEV</a> *IterCount =</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    SE-&gt;getAddExpr(LIBETC, SE-&gt;getConstant(LIBETC-&gt;<a class="code" href="classllvm_1_1SCEV.html#a9a16f1241255a605fc8debc1e26eaa4c">getType</a>(), 1));</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LRR: iteration count = &quot;</span> &lt;&lt; *IterCount &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;  <span class="comment">// First, we need to find the induction variable with respect to which we can</span></div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;  <span class="comment">// reroll (there may be several possible options).</span></div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;  SmallInstructionVector PossibleIVs;</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;  collectPossibleIVs(L, PossibleIVs);</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  <span class="keywordflow">if</span> (PossibleIVs.empty()) {</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LRR: No possible IVs found\n&quot;</span>);</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    <span class="keywordflow">return</span> Changed;</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;  }</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;  ReductionTracker Reductions;</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;  collectPossibleReductions(L, Reductions);</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;  <span class="comment">// For each possible IV, collect the associated possible set of &#39;root&#39; nodes</span></div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;  <span class="comment">// (i+1, i+2, etc.).</span></div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;  <span class="keywordflow">for</span> (SmallInstructionVector::iterator <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = PossibleIVs.begin(),</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;       <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a> = PossibleIVs.end(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">IE</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    <span class="keywordflow">if</span> (reroll(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, L, Header, IterCount, Reductions)) {</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;      Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    }</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;  <span class="keywordflow">return</span> Changed;</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;}</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;</div><div class="ttc" id="classllvm_1_1Pass_html"><div class="ttname"><a href="classllvm_1_1Pass.html">llvm::Pass</a></div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00082">Pass.h:82</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a075e34e98605d0e7c289763a104869ac"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">llvm::SmallVectorTemplateCommon&lt; T &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00114">SmallVector.h:114</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVAddRecExpr_html_a11bb31f99854303d2a934765469c5c2c"><div class="ttname"><a href="classllvm_1_1SCEVAddRecExpr.html#a11bb31f99854303d2a934765469c5c2c">llvm::SCEVAddRecExpr::evaluateAtIteration</a></div><div class="ttdeci">const SCEV * evaluateAtIteration(const SCEV *It, ScalarEvolution &amp;SE) const </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l00802">ScalarEvolution.cpp:802</a></div></div>
<div class="ttc" id="SmallSet_8h_html"><div class="ttname"><a href="SmallSet_8h.html">SmallSet.h</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00236">SmallVector.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad86469939d2a8bdd4169be9403b89f5a"><div class="ttname"><a href="classllvm_1_1Value.html#ad86469939d2a8bdd4169be9403b89f5a">llvm::Value::use_end</a></div><div class="ttdeci">use_iterator use_end()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00152">Value.h:152</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html"><div class="ttname"><a href="classllvm_1_1DataLayout.html">llvm::DataLayout</a></div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00098">DataLayout.h:98</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1path_html_a214ec2f04ffd92636ed4bd2717607a1d"><div class="ttname"><a href="namespacellvm_1_1sys_1_1path.html#a214ec2f04ffd92636ed4bd2717607a1d">llvm::sys::path::end</a></div><div class="ttdeci">const_iterator end(StringRef path)</div><div class="ttdoc">Get end iterator over path. </div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00181">Path.cpp:181</a></div></div>
<div class="ttc" id="namespacellvm_html_a41d1b9b3d6fdfdb4fcf4b552986be64b"><div class="ttname"><a href="namespacellvm.html#a41d1b9b3d6fdfdb4fcf4b552986be64b">llvm::createLoopRerollPass</a></div><div class="ttdeci">Pass * createLoopRerollPass()</div><div class="ttdef"><b>Definition:</b> <a href="LoopRerollPass_8cpp_source.html#l00348">LoopRerollPass.cpp:348</a></div></div>
<div class="ttc" id="LoopRerollPass_8cpp_html_a35563732e8c72d1a802bda5cb7e7a41f"><div class="ttname"><a href="LoopRerollPass_8cpp.html#a35563732e8c72d1a802bda5cb7e7a41f">isSimpleLoadStore</a></div><div class="ttdeci">static bool isSimpleLoadStore(Instruction *I)</div><div class="ttdef"><b>Definition:</b> <a href="LoopRerollPass_8cpp_source.html#l00523">LoopRerollPass.cpp:523</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_a884f90190bca4bd354f2d5c91c264028"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">llvm::AnalysisUsage::addPreserved</a></div><div class="ttdeci">AnalysisUsage &amp; addPreserved()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00081">PassAnalysisSupport.h:81</a></div></div>
<div class="ttc" id="classllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00035">PassRegistry.cpp:35</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a6fe2f06b8a4b2c3d6308afb223a0238a"><div class="ttname"><a href="classllvm_1_1Instruction.html#a6fe2f06b8a4b2c3d6308afb223a0238a">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00072">Instruction.cpp:72</a></div></div>
<div class="ttc" id="MSA_8txt_html_ab49a28dbe60da0a607449e5308b1ec3f"><div class="ttname"><a href="MSA_8txt.html#ab49a28dbe60da0a607449e5308b1ec3f">Instructions</a></div><div class="ttdeci">Code Generation Notes for reduce the size of the ISel and reduce repetition in the implementation In a small number of this can cause even when no optimisation has taken place Instructions</div><div class="ttdef"><b>Definition:</b> <a href="MSA_8txt_source.html#l00011">MSA.txt:11</a></div></div>
<div class="ttc" id="classllvm_1_1ScalarEvolution_html_a2eb94d079d8416118f4aaed865ab05d7"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a2eb94d079d8416118f4aaed865ab05d7">llvm::ScalarEvolution::getConstant</a></div><div class="ttdeci">const SCEV * getConstant(ConstantInt *V)</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l00314">ScalarEvolution.cpp:314</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_a02def7c594e9f19ff247ed0bf33d1c30"><div class="ttname"><a href="Target_2README_8txt.html#a02def7c594e9f19ff247ed0bf33d1c30">size</a></div><div class="ttdeci">i&lt; reg-&gt; size</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00204">Target/README.txt:204</a></div></div>
<div class="ttc" id="LoopUtils_8h_html"><div class="ttname"><a href="LoopUtils_8h.html">LoopUtils.h</a></div></div>
<div class="ttc" id="IntrinsicInst_8h_html"><div class="ttname"><a href="IntrinsicInst_8h.html">IntrinsicInst.h</a></div></div>
<div class="ttc" id="namespacellvm_html_a3f2f98c2a67c9e79f58aad9150a62e42"><div class="ttname"><a href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">llvm::dyn_cast</a></div><div class="ttdeci">enable_if_c&lt;!is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="Casting_8h_source.html#l00266">Casting.h:266</a></div></div>
<div class="ttc" id="classllvm_1_1DenseSet_html"><div class="ttname"><a href="classllvm_1_1DenseSet.html">llvm::DenseSet</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00026">DenseSet.h:26</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a2f81e0c1fc6554df7ad2eafabf5fc5a5"><div class="ttname"><a href="classllvm_1_1User.html#a2f81e0c1fc6554df7ad2eafabf5fc5a5">llvm::User::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00108">User.h:108</a></div></div>
<div class="ttc" id="DataLayout_8h_html"><div class="ttname"><a href="DataLayout_8h.html">DataLayout.h</a></div></div>
<div class="ttc" id="classllvm_1_1ScalarEvolution_html"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html">llvm::ScalarEvolution</a></div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l00172">ScalarEvolution.h:172</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00534">DenseMap.h:534</a></div></div>
<div class="ttc" id="namespacellvm_1_1ARM__AM_html_a5d0557608eaebed12bc00812724ba2cdae6bcee28992dab735eaa43f5dfa48a09"><div class="ttname"><a href="namespacellvm_1_1ARM__AM.html#a5d0557608eaebed12bc00812724ba2cdae6bcee28992dab735eaa43f5dfa48a09">llvm::ARM_AM::add</a></div><div class="ttdef"><b>Definition:</b> <a href="ARMAddressingModes_8h_source.html#l00038">ARMAddressingModes.h:38</a></div></div>
<div class="ttc" id="README-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00427">README-SSE.txt:427</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01978">Instructions.h:1978</a></div></div>
<div class="ttc" id="Debug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_a3a76669632041022e6976766a22bd2b0"><div class="ttname"><a href="Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a></div><div class="ttdeci">return j(j&lt;&lt; 16)</div></div>
<div class="ttc" id="classllvm_1_1SCEVAddRecExpr_html_a443e9130cd9f3e3baaa1b566e6aa5060"><div class="ttname"><a href="classllvm_1_1SCEVAddRecExpr.html#a443e9130cd9f3e3baaa1b566e6aa5060">llvm::SCEVAddRecExpr::getStepRecurrence</a></div><div class="ttdeci">const SCEV * getStepRecurrence(ScalarEvolution &amp;SE) const </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00300">ScalarEvolutionExpressions.h:300</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1path_html_a33706aab89e700b8f79e1fa6f4f0e3ee"><div class="ttname"><a href="namespacellvm_1_1sys_1_1path.html#a33706aab89e700b8f79e1fa6f4f0e3ee">llvm::sys::path::begin</a></div><div class="ttdeci">const_iterator begin(StringRef path)</div><div class="ttdoc">Get begin iterator over path. </div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00173">Path.cpp:173</a></div></div>
<div class="ttc" id="namespacellvm_html_ae383fe174f8746c48625776addff9a7f"><div class="ttname"><a href="namespacellvm.html#ae383fe174f8746c48625776addff9a7f">llvm::initializeLoopRerollPass</a></div><div class="ttdeci">void initializeLoopRerollPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a9237251072bf6816163abc2d053212ee"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a9237251072bf6816163abc2d053212ee">llvm::BasicBlock::rend</a></div><div class="ttdeci">reverse_iterator rend()</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00200">BasicBlock.h:200</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html"><div class="ttname"><a href="classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00136">Instructions.h:136</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a1c2af7a9e501d399f06ca7e10eef46e4"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a1c2af7a9e501d399f06ca7e10eef46e4">llvm::BasicBlock::rbegin</a></div><div class="ttdeci">reverse_iterator rbegin()</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00198">BasicBlock.h:198</a></div></div>
<div class="ttc" id="classllvm_1_1User_html"><div class="ttname"><a href="classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00033">User.h:33</a></div></div>
<div class="ttc" id="IVUsers_8cpp_html_a4e5b9edb51eec9dbca592075eb64dfcb"><div class="ttname"><a href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a></div><div class="ttdeci">iv Induction Variable Users</div><div class="ttdef"><b>Definition:</b> <a href="IVUsers_8cpp_source.html#l00039">IVUsers.cpp:39</a></div></div>
<div class="ttc" id="Statistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a2eeb1c7ed1cfe403f2ae0470e36c07e2"><div class="ttname"><a href="classllvm_1_1User.html#a2eeb1c7ed1cfe403f2ae0470e36c07e2">llvm::User::op_begin</a></div><div class="ttdeci">op_iterator op_begin()</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00116">User.h:116</a></div></div>
<div class="ttc" id="namespacellvm_1_1ARM__PROC_html_a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e"><div class="ttname"><a href="namespacellvm_1_1ARM__PROC.html#a1add7850fad3f66c140ecee871460ea4ae9d798593a4a6b5cc48486a453a59e5e">llvm::ARM_PROC::IE</a></div><div class="ttdef"><b>Definition:</b> <a href="ARMBaseInfo_8h_source.html#l00091">ARMBaseInfo.h:91</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00109">CommandLine.h:109</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVAddRecExpr_html_a0d53a749bd858b270d322b34b8d7e1e5"><div class="ttname"><a href="classllvm_1_1SCEVAddRecExpr.html#a0d53a749bd858b270d322b34b8d7e1e5">llvm::SCEVAddRecExpr::getStart</a></div><div class="ttdeci">const SCEV * getStart() const </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00293">ScalarEvolutionExpressions.h:293</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00193">BasicBlock.h:193</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a90982bca61da940a80629040c075e33e"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a90982bca61da940a80629040c075e33e">llvm::ConstantInt::uge</a></div><div class="ttdeci">bool uge(uint64_t Num) const </div><div class="ttdoc">Determine if the value is greater or equal to the given number. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00209">Constants.h:209</a></div></div>
<div class="ttc" id="ScalarEvolutionExpander_8h_html"><div class="ttname"><a href="ScalarEvolutionExpander_8h.html">ScalarEvolutionExpander.h</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_ae5c60fd282ee894c87ea02c3f0fcb6d0"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">llvm::AnalysisUsage::addRequired</a></div><div class="ttdeci">AnalysisUsage &amp; addRequired()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00055">PassAnalysisSupport.h:55</a></div></div>
<div class="ttc" id="PassSupport_8h_html_a14724f1ccf528e73bb29bc9230737967"><div class="ttname"><a href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a></div><div class="ttdeci">#define INITIALIZE_PASS_DEPENDENCY(depName)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00167">PassSupport.h:167</a></div></div>
<div class="ttc" id="LoopRerollPass_8cpp_html_a912e33de9fe69e47bf8688a719713907"><div class="ttname"><a href="LoopRerollPass_8cpp.html#a912e33de9fe69e47bf8688a719713907">MaxInc</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; MaxInc(&quot;max-reroll-increment&quot;, cl::init(2048), cl::Hidden, cl::desc(&quot;The maximum increment for loop rerolling&quot;))</div></div>
<div class="ttc" id="classllvm_1_1value__use__iterator_html"><div class="ttname"><a href="classllvm_1_1value__use__iterator.html">llvm::value_use_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00168">Use.h:168</a></div></div>
<div class="ttc" id="namespacellvm_html_a978c3a939268de7f7de507c4037a8d74"><div class="ttname"><a href="namespacellvm.html#a978c3a939268de7f7de507c4037a8d74">llvm::InsertPreheaderForLoop</a></div><div class="ttdeci">BasicBlock * InsertPreheaderForLoop(Loop *L, Pass *P)</div><div class="ttdef"><b>Definition:</b> <a href="LoopSimplify_8cpp_source.html#l00371">LoopSimplify.cpp:371</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_af8dde13a97efce293a7b04daf1e208fb"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">llvm::ConstantInt::getValue</a></div><div class="ttdeci">const APInt &amp; getValue() const </div><div class="ttdoc">Return the constant&amp;#39;s value. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00105">Constants.h:105</a></div></div>
<div class="ttc" id="classllvm_1_1AliasSetTracker_html_af18839e3170da6f597222b8e5af15e5e"><div class="ttname"><a href="classllvm_1_1AliasSetTracker.html#af18839e3170da6f597222b8e5af15e5e">llvm::AliasSetTracker::end</a></div><div class="ttdeci">const_iterator end() const </div><div class="ttdef"><b>Definition:</b> <a href="AliasSetTracker_8h_source.html#l00395">AliasSetTracker.h:395</a></div></div>
<div class="ttc" id="AliasSetTracker_8h_html"><div class="ttname"><a href="AliasSetTracker_8h.html">AliasSetTracker.h</a></div></div>
<div class="ttc" id="classllvm_1_1Use_html"><div class="ttname"><a href="classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00060">Use.h:60</a></div></div>
<div class="ttc" id="PassSupport_8h_html_a74ce8276b89067e806f67c45a6d92575"><div class="ttname"><a href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a></div><div class="ttdeci">#define INITIALIZE_PASS_END(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00172">PassSupport.h:172</a></div></div>
<div class="ttc" id="STLExtras_8h_html"><div class="ttname"><a href="STLExtras_8h.html">STLExtras.h</a></div></div>
<div class="ttc" id="classllvm_1_1AliasAnalysis_html"><div class="ttname"><a href="classllvm_1_1AliasAnalysis.html">llvm::AliasAnalysis</a></div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00056">AliasAnalysis.h:56</a></div></div>
<div class="ttc" id="LoopRerollPass_8cpp_html_afdd1c308d66ba7af258967fc57dbdbae"><div class="ttname"><a href="LoopRerollPass_8cpp.html#afdd1c308d66ba7af258967fc57dbdbae">hasUsesOutsideLoop</a></div><div class="ttdeci">static bool hasUsesOutsideLoop(Instruction *I, Loop *L)</div><div class="ttdef"><b>Definition:</b> <a href="LoopRerollPass_8cpp_source.html#l00355">LoopRerollPass.cpp:355</a></div></div>
<div class="ttc" id="namespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00126">StackSlotColoring.cpp:126</a></div></div>
<div class="ttc" id="namespacellvm_1_1CallingConv_html_a4f861731fc6dbfdccc05af5968d98974"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">llvm::CallingConv::ID</a></div><div class="ttdeci">ID</div><div class="ttdoc">LLVM Calling Convention Representation. </div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00026">CallingConv.h:26</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00031">Instruction.h:31</a></div></div>
<div class="ttc" id="TargetLibraryInfo_8h_html"><div class="ttname"><a href="TargetLibraryInfo_8h.html">TargetLibraryInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a6edd823ba5e4e1effc8280ca8a1194ef"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a6edd823ba5e4e1effc8280ca8a1194ef">llvm::ConstantInt::getZExtValue</a></div><div class="ttdeci">uint64_t getZExtValue() const </div><div class="ttdoc">Return the zero extended value. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00116">Constants.h:116</a></div></div>
<div class="ttc" id="classllvm_1_1AliasSetTracker_html_ac170f23b2c24a4b1c0d81c3e290959ae"><div class="ttname"><a href="classllvm_1_1AliasSetTracker.html#ac170f23b2c24a4b1c0d81c3e290959ae">llvm::AliasSetTracker::begin</a></div><div class="ttdeci">const_iterator begin() const </div><div class="ttdef"><b>Definition:</b> <a href="AliasSetTracker_8h_source.html#l00394">AliasSetTracker.h:394</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a0fd8d3c26bf5cd614b0e6a9b8886a5d0"><div class="ttname"><a href="classllvm_1_1Instruction.html#a0fd8d3c26bf5cd614b0e6a9b8886a5d0">llvm::Instruction::mayReadFromMemory</a></div><div class="ttdeci">bool mayReadFromMemory() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00421">Instruction.cpp:421</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVAddRecExpr_html"><div class="ttname"><a href="classllvm_1_1SCEVAddRecExpr.html">llvm::SCEVAddRecExpr</a></div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00283">ScalarEvolutionExpressions.h:283</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_aa113b8a9ef3de9c2f075a046ad658717"><div class="ttname"><a href="classllvm_1_1Instruction.html#aa113b8a9ef3de9c2f075a046ad658717">llvm::Instruction::isAssociative</a></div><div class="ttdeci">bool isAssociative() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00482">Instruction.cpp:482</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVNAryExpr_html_aed1b1d3b764c76210c67dd1b4a6be2f2"><div class="ttname"><a href="classllvm_1_1SCEVNAryExpr.html#aed1b1d3b764c76210c67dd1b4a6be2f2">llvm::SCEVNAryExpr::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00157">ScalarEvolutionExpressions.h:157</a></div></div>
<div class="ttc" id="Analysis_2README_8txt_html_a01d2af4eee7c40485a0ce3683a2e907a"><div class="ttname"><a href="Analysis_2README_8txt.html#a01d2af4eee7c40485a0ce3683a2e907a">loop</a></div><div class="ttdeci">Analysis the ScalarEvolution expression for r is&lt; loop &gt; Outside the loop</div><div class="ttdef"><b>Definition:</b> <a href="Analysis_2README_8txt_source.html#l00005">Analysis/README.txt:5</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html"><div class="ttname"><a href="classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00255">Instructions.h:255</a></div></div>
<div class="ttc" id="classllvm_1_1DominatorTree_html"><div class="ttname"><a href="classllvm_1_1DominatorTree.html">llvm::DominatorTree</a></div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00740">Dominators.h:740</a></div></div>
<div class="ttc" id="classllvm_1_1ScalarEvolution_html_a659b27f6737fcb7eaf333b0279da1154"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a659b27f6737fcb7eaf333b0279da1154">llvm::ScalarEvolution::getAddRecExpr</a></div><div class="ttdeci">const SCEV * getAddRecExpr(const SCEV *Start, const SCEV *Step, const Loop *L, SCEV::NoWrapFlags Flags)</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l02246">ScalarEvolution.cpp:2246</a></div></div>
<div class="ttc" id="classllvm_1_1SCEV_html_af43000d4dcb7d6d63cb6e36933ed3f6fa23e74052c4d79cfdaa23460a3c946656"><div class="ttname"><a href="classllvm_1_1SCEV.html#af43000d4dcb7d6d63cb6e36933ed3f6fa23e74052c4d79cfdaa23460a3c946656">llvm::SCEV::FlagAnyWrap</a></div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l00094">ScalarEvolution.h:94</a></div></div>
<div class="ttc" id="namespacellvm_html_ad5b5ed1a0de8792e2ebf2eba3ba712fd"><div class="ttname"><a href="namespacellvm.html#ad5b5ed1a0de8792e2ebf2eba3ba712fd">llvm::SimplifyInstructionsInBlock</a></div><div class="ttdeci">bool SimplifyInstructionsInBlock(BasicBlock *BB, const DataLayout *TD=0, const TargetLibraryInfo *TLI=0)</div><div class="ttdef"><b>Definition:</b> <a href="Local_8cpp_source.html#l00398">Local.cpp:398</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_ad403e5f1b62843ac7584a2c51c63bfa3"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ad403e5f1b62843ac7584a2c51c63bfa3">llvm::BasicBlock::reverse_iterator</a></div><div class="ttdeci">InstListType::reverse_iterator reverse_iterator</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00101">BasicBlock.h:101</a></div></div>
<div class="ttc" id="README__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A,*B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00091">README_ALTIVEC.txt:91</a></div></div>
<div class="ttc" id="CommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00314">CommandLine.h:314</a></div></div>
<div class="ttc" id="classllvm_1_1sys_1_1path_1_1const__iterator_html_a8a503d1cbee10d1b8c8f5ac2a03b90df"><div class="ttname"><a href="classllvm_1_1sys_1_1path_1_1const__iterator.html#a8a503d1cbee10d1b8c8f5ac2a03b90df">llvm::sys::path::const_iterator::end</a></div><div class="ttdeci">friend const_iterator end(StringRef path)</div><div class="ttdoc">Get end iterator over path. </div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00181">Path.cpp:181</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVAddRecExpr_html_a88f514461ddb0af0fc59ac4639f644bc"><div class="ttname"><a href="classllvm_1_1SCEVAddRecExpr.html#a88f514461ddb0af0fc59ac4639f644bc">llvm::SCEVAddRecExpr::isAffine</a></div><div class="ttdeci">bool isAffine() const </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00309">ScalarEvolutionExpressions.h:309</a></div></div>
<div class="ttc" id="classllvm_1_1ScalarEvolution_html_ae9623974341419bfd1d185cfdc65bedd"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#ae9623974341419bfd1d185cfdc65bedd">llvm::ScalarEvolution::isSCEVable</a></div><div class="ttdeci">bool isSCEVable(Type *Ty) const </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l02659">ScalarEvolution.cpp:2659</a></div></div>
<div class="ttc" id="LoopPass_8h_html"><div class="ttname"><a href="LoopPass_8h.html">LoopPass.h</a></div></div>
<div class="ttc" id="LLParser_8cpp_html_aae58e3df0180401e8f3ab75c18fbc07a"><div class="ttname"><a href="LLParser_8cpp.html#aae58e3df0180401e8f3ab75c18fbc07a">if</a></div><div class="ttdeci">* if(!EatIfPresent(lltok::kw_thread_local)) return false</div></div>
<div class="ttc" id="classllvm_1_1DenseSet_1_1Iterator_html"><div class="ttname"><a href="classllvm_1_1DenseSet_1_1Iterator.html">llvm::DenseSet::Iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00064">DenseSet.h:64</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a1bc74c76b876ad387293ecde0f21ed45"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a1bc74c76b876ad387293ecde0f21ed45">llvm::LoopBase::getLoopPreheader</a></div><div class="ttdeci">BlockT * getLoopPreheader() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00106">LoopInfoImpl.h:106</a></div></div>
<div class="ttc" id="classllvm_1_1AliasSetTracker_html"><div class="ttname"><a href="classllvm_1_1AliasSetTracker.html">llvm::AliasSetTracker</a></div><div class="ttdef"><b>Definition:</b> <a href="AliasSetTracker_8h_source.html#l00280">AliasSetTracker.h:280</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1SCEV_html_a9a16f1241255a605fc8debc1e26eaa4c"><div class="ttname"><a href="classllvm_1_1SCEV.html#a9a16f1241255a605fc8debc1e26eaa4c">llvm::SCEV::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l00249">ScalarEvolution.cpp:249</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html"><div class="ttname"><a href="classllvm_1_1BranchInst.html">llvm::BranchInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02350">Instructions.h:2350</a></div></div>
<div class="ttc" id="ScalarEvolutionExpressions_8h_html"><div class="ttname"><a href="ScalarEvolutionExpressions_8h.html">ScalarEvolutionExpressions.h</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVNAryExpr_html_a8d1a2d2a4d2f935841d226bbcbf54a48"><div class="ttname"><a href="classllvm_1_1SCEVNAryExpr.html#a8d1a2d2a4d2f935841d226bbcbf54a48">llvm::SCEVNAryExpr::getOperand</a></div><div class="ttdeci">const SCEV * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00148">ScalarEvolutionExpressions.h:148</a></div></div>
<div class="ttc" id="classllvm_1_1SmallSet_html"><div class="ttname"><a href="classllvm_1_1SmallSet.html">llvm::SmallSet</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00031">SmallSet.h:31</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ae42219072d798876e6b08e6b78614ff6"><div class="ttname"><a href="MD5_8cpp.html#ae42219072d798876e6b08e6b78614ff6">H</a></div><div class="ttdeci">#define H(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00053">MD5.cpp:53</a></div></div>
<div class="ttc" id="structllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00286">CommandLine.h:286</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00037">PassAnalysisSupport.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_af41f58e730804d10b91fcff39b035f74"><div class="ttname"><a href="classllvm_1_1User.html#af41f58e730804d10b91fcff39b035f74">llvm::User::op_end</a></div><div class="ttdeci">op_iterator op_end()</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00118">User.h:118</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_ac4f141a355e5898255f2cbc57c5b54c3"><div class="ttname"><a href="classllvm_1_1LoopBase.html#ac4f141a355e5898255f2cbc57c5b54c3">llvm::LoopBase::getHeader</a></div><div class="ttdeci">BlockT * getHeader() const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00095">LoopInfo.h:95</a></div></div>
<div class="ttc" id="namespacellvm_html_aa1704159f75e6eacd595962ea6d93ffe"><div class="ttname"><a href="namespacellvm.html#aa1704159f75e6eacd595962ea6d93ffe">llvm::next</a></div><div class="ttdeci">ItTy next(ItTy it, Dist n)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00154">STLExtras.h:154</a></div></div>
<div class="ttc" id="classllvm_1_1ICmpInst_html"><div class="ttname"><a href="classllvm_1_1ICmpInst.html">llvm::ICmpInst</a></div><div class="ttdoc">Represent an integer comparison operator. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00911">Instructions.h:911</a></div></div>
<div class="ttc" id="classllvm_1_1ScalarEvolution_html_aa888e3661c809163273aca85ded4d846"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#aa888e3661c809163273aca85ded4d846">llvm::ScalarEvolution::getMinusSCEV</a></div><div class="ttdeci">const SCEV * getMinusSCEV(const SCEV *LHS, const SCEV *RHS, SCEV::NoWrapFlags Flags=SCEV::FlagAnyWrap)</div><div class="ttdoc">getMinusSCEV - Return LHS-RHS. Minus is represented in SCEV as A+B*-1. </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l02790">ScalarEvolution.cpp:2790</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVExpander_html_a583d3ca95f83216d632a4d1ae0330dd0"><div class="ttname"><a href="classllvm_1_1SCEVExpander.html#a583d3ca95f83216d632a4d1ae0330dd0">llvm::SCEVExpander::expandCodeFor</a></div><div class="ttdeci">Value * expandCodeFor(const SCEV *SH, Type *Ty, Instruction *I)</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpander_8cpp_source.html#l01468">ScalarEvolutionExpander.cpp:1468</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVAddRecExpr_html_ada9969a271c8bab660bfb2aa01f22e76"><div class="ttname"><a href="classllvm_1_1SCEVAddRecExpr.html#ada9969a271c8bab660bfb2aa01f22e76">llvm::SCEVAddRecExpr::getPostIncExpr</a></div><div class="ttdeci">const SCEVAddRecExpr * getPostIncExpr(ScalarEvolution &amp;SE) const </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00346">ScalarEvolutionExpressions.h:346</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a321e37d79af8b4287f8a1dcf9aff9c01"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a321e37d79af8b4287f8a1dcf9aff9c01">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00057">DenseMap.h:57</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00088">User.h:88</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a1c2048f254df730c4de1643ec791ddf9"><div class="ttname"><a href="classllvm_1_1Instruction.html#a1c2048f254df730c4de1643ec791ddf9">llvm::Instruction::isCommutative</a></div><div class="ttdeci">bool isCommutative() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00269">Instruction.h:269</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a92a38e2e3412bde7fd2b71db212b61aa"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a92a38e2e3412bde7fd2b71db212b61aa">llvm::LoopBase::contains</a></div><div class="ttdeci">bool contains(const LoopT *L) const </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00104">LoopInfo.h:104</a></div></div>
<div class="ttc" id="PassSupport_8h_html_af0564bcdde2dd4400c670ca278c6035f"><div class="ttname"><a href="PassSupport_8h.html#af0564bcdde2dd4400c670ca278c6035f">INITIALIZE_AG_DEPENDENCY</a></div><div class="ttdeci">#define INITIALIZE_AG_DEPENDENCY(depName)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00169">PassSupport.h:169</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_aa26de3d6e38997b9041e824ea558c770"><div class="ttname"><a href="classllvm_1_1Instruction.html#aa26de3d6e38997b9041e824ea558c770">llvm::Instruction::mayWriteToMemory</a></div><div class="ttdeci">bool mayWriteToMemory() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00441">Instruction.cpp:441</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a237e6bf58bc993ea494bdde7480ca428"><div class="ttname"><a href="classllvm_1_1Instruction.html#a237e6bf58bc993ea494bdde7480ca428">llvm::Instruction::isTerminator</a></div><div class="ttdeci">bool isTerminator() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00086">Instruction.h:86</a></div></div>
<div class="ttc" id="classllvm_1_1LoopBase_html_a9a89d64fefa63ff782d8f29e53a01873"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a9a89d64fefa63ff782d8f29e53a01873">llvm::LoopBase::getNumBlocks</a></div><div class="ttdeci">unsigned getNumBlocks() const </div><div class="ttdoc">getNumBlocks - Get the number of blocks in this loop in constant time. </div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00144">LoopInfo.h:144</a></div></div>
<div class="ttc" id="namespacellvm_html_acb7a7f0df849c2c44503352493524895"><div class="ttname"><a href="namespacellvm.html#acb7a7f0df849c2c44503352493524895">llvm::isSafeToSpeculativelyExecute</a></div><div class="ttdeci">bool isSafeToSpeculativelyExecute(const Value *V, const DataLayout *TD=0)</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l01974">ValueTracking.cpp:1974</a></div></div>
<div class="ttc" id="classllvm_1_1DenseSet_html_aee8f4c3fefab2a8e9c62622527c8b60c"><div class="ttname"><a href="classllvm_1_1DenseSet.html#aee8f4c3fefab2a8e9c62622527c8b60c">llvm::DenseSet::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00107">DenseSet.h:107</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a699a66e504b48fdeff124e82f6c61917"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a699a66e504b48fdeff124e82f6c61917">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, KeyInfoT &gt;, KeyT, ValueT, KeyInfoT &gt;::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const std::pair&lt; KeyT, ValueT &gt; &amp;KV)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00153">DenseMap.h:153</a></div></div>
<div class="ttc" id="classllvm_1_1DenseSet_html_abbac11d593e7d40675ac3dfe1dd324bd"><div class="ttname"><a href="classllvm_1_1DenseSet.html#abbac11d593e7d40675ac3dfe1dd324bd">llvm::DenseSet::count</a></div><div class="ttdeci">bool count(const ValueT &amp;V) const </div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00045">DenseSet.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1DenseSet_html_ab658e5485796a5ff90bd2dc3fca7d6d2"><div class="ttname"><a href="classllvm_1_1DenseSet.html#ab658e5485796a5ff90bd2dc3fca7d6d2">llvm::DenseSet::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const ValueT &amp;V)</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00117">DenseSet.h:117</a></div></div>
<div class="ttc" id="classllvm_1_1MemIntrinsic_html"><div class="ttname"><a href="classllvm_1_1MemIntrinsic.html">llvm::MemIntrinsic</a></div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00118">IntrinsicInst.h:118</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0b4e7bee9b8575cc7db73329f1a561bd"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">llvm::BasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00195">BasicBlock.h:195</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00880">SmallVector.h:880</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00111">Value.h:111</a></div></div>
<div class="ttc" id="classllvm_1_1TargetLibraryInfo_html"><div class="ttname"><a href="classllvm_1_1TargetLibraryInfo.html">llvm::TargetLibraryInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00657">TargetLibraryInfo.h:657</a></div></div>
<div class="ttc" id="classllvm_1_1LoopInfo_html"><div class="ttname"><a href="classllvm_1_1LoopInfo.html">llvm::LoopInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00589">LoopInfo.h:589</a></div></div>
<div class="ttc" id="PassSupport_8h_html_aaa970fc931c1c63037a8182e028d04b1"><div class="ttname"><a href="PassSupport_8h.html#aaa970fc931c1c63037a8182e028d04b1">INITIALIZE_PASS_BEGIN</a></div><div class="ttdeci">#define INITIALIZE_PASS_BEGIN(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00164">PassSupport.h:164</a></div></div>
<div class="ttc" id="classllvm_1_1LoopPass_html"><div class="ttname"><a href="classllvm_1_1LoopPass.html">llvm::LoopPass</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopPass_8h_source.html#l00029">LoopPass.h:29</a></div></div>
<div class="ttc" id="MachineLoopInfo_8cpp_html_a59aa69fa39ee55438427bfc39852b9e6"><div class="ttname"><a href="MachineLoopInfo_8cpp.html#a59aa69fa39ee55438427bfc39852b9e6">loops</a></div><div class="ttdeci">machine loops</div><div class="ttdef"><b>Definition:</b> <a href="MachineLoopInfo_8cpp_source.html#l00032">MachineLoopInfo.cpp:32</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00101">Debug.cpp:101</a></div></div>
<div class="ttc" id="namespacestd_html_ab8424022895aee3e366fb9a32f2883cb"><div class="ttname"><a href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a></div><div class="ttdeci">void swap(llvm::BitVector &amp;LHS, llvm::BitVector &amp;RHS)</div><div class="ttdoc">Implement std::swap in terms of BitVector swap. </div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00591">BitVector.h:591</a></div></div>
<div class="ttc" id="ScalarEvolution_8h_html"><div class="ttname"><a href="ScalarEvolution_8h.html">ScalarEvolution.h</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a21960167f529265a1cb02ac1e8ad10f6"><div class="ttname"><a href="classllvm_1_1PHINode.html#a21960167f529265a1cb02ac1e8ad10f6">llvm::PHINode::getIncomingValueForBlock</a></div><div class="ttdeci">Value * getIncomingValueForBlock(const BasicBlock *BB) const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02139">Instructions.h:2139</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVExpander_html"><div class="ttname"><a href="classllvm_1_1SCEVExpander.html">llvm::SCEVExpander</a></div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpander_8h_source.html#l00037">ScalarEvolutionExpander.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a413abcab8dbc3900fc2fde96a5d8fca6"><div class="ttname"><a href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">llvm::Value::use_begin</a></div><div class="ttdeci">use_iterator use_begin()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00150">Value.h:150</a></div></div>
<div class="ttc" id="AliasAnalysis_8h_html"><div class="ttname"><a href="AliasAnalysis_8h.html">AliasAnalysis.h</a></div></div>
<div class="ttc" id="Transforms_2Scalar_8h_html"><div class="ttname"><a href="Transforms_2Scalar_8h.html">Scalar.h</a></div></div>
<div class="ttc" id="classllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l01149">CommandLine.h:1149</a></div></div>
<div class="ttc" id="classllvm_1_1SCEV_html"><div class="ttname"><a href="classllvm_1_1SCEV.html">llvm::SCEV</a></div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l00057">ScalarEvolution.h:57</a></div></div>
<div class="ttc" id="classllvm_1_1Loop_html"><div class="ttname"><a href="classllvm_1_1Loop.html">llvm::Loop</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00338">LoopInfo.h:338</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_ac93ffdc3731dab52d2f92fb62609b718"><div class="ttname"><a href="classllvm_1_1Instruction.html#ac93ffdc3731dab52d2f92fb62609b718">llvm::Instruction::isBinaryOp</a></div><div class="ttdeci">bool isBinaryOp() const </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00087">Instruction.h:87</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a5cb76a65b6524dba1493dd2b9dc3abbe"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">TerminatorInst * getTerminator()</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00120">BasicBlock.cpp:120</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a085b82f074c28030fb8e194377ed2d0c"><div class="ttname"><a href="classllvm_1_1Value.html#a085b82f074c28030fb8e194377ed2d0c">llvm::Value::hasOneUse</a></div><div class="ttdeci">bool hasOneUse() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00161">Value.h:161</a></div></div>
<div class="ttc" id="BasicBlockUtils_8h_html"><div class="ttname"><a href="BasicBlockUtils_8h.html">BasicBlockUtils.h</a></div></div>
<div class="ttc" id="ValueTracking_8h_html"><div class="ttname"><a href="ValueTracking_8h.html">ValueTracking.h</a></div></div>
<div class="ttc" id="classllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05aa719225e2de4059f93fd3209e1f48218">llvm::CmpInst::ICMP_EQ</a></div><div class="ttdoc">equal </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00672">InstrTypes.h:672</a></div></div>
<div class="ttc" id="classllvm_1_1DenseSet_html_a24882fb4943904e5f1c390f36a974b85"><div class="ttname"><a href="classllvm_1_1DenseSet.html#a24882fb4943904e5f1c390f36a974b85">llvm::DenseSet::size</a></div><div class="ttdeci">unsigned size() const </div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00034">DenseSet.h:34</a></div></div>
<div class="ttc" id="Local_8h_html"><div class="ttname"><a href="Local_8h.html">Local.h</a></div></div>
<div class="ttc" id="classllvm_1_1AliasSetTracker_html_ada3491a53a1c7005127769ae90eefcbf"><div class="ttname"><a href="classllvm_1_1AliasSetTracker.html#ada3491a53a1c7005127769ae90eefcbf">llvm::AliasSetTracker::add</a></div><div class="ttdeci">bool add(Value *Ptr, uint64_t Size, const MDNode *TBAAInfo)</div><div class="ttdef"><b>Definition:</b> <a href="AliasSetTracker_8cpp_source.html#l00292">AliasSetTracker.cpp:292</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00066">Value.h:66</a></div></div>
<div class="ttc" id="classllvm_1_1ScalarEvolution_html_a30bd18ac905eacf3601bc6a553a9ff49"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#a30bd18ac905eacf3601bc6a553a9ff49">llvm::ScalarEvolution::getSCEV</a></div><div class="ttdeci">const SCEV * getSCEV(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l02742">ScalarEvolution.cpp:2742</a></div></div>
<div class="ttc" id="namespacellvm_1_1A64CC_html_af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442"><div class="ttname"><a href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">llvm::A64CC::MI</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00035">AArch64BaseInfo.h:35</a></div></div>
<div class="ttc" id="namespacellvm_html_af44ceebb0726227cf82bd54a0bc286fa"><div class="ttname"><a href="namespacellvm.html#af44ceebb0726227cf82bd54a0bc286fa">llvm::DeleteDeadPHIs</a></div><div class="ttdeci">bool DeleteDeadPHIs(BasicBlock *BB, const TargetLibraryInfo *TLI=0)</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00098">BasicBlockUtils.cpp:98</a></div></div>
<div class="ttc" id="LoopRerollPass_8cpp_html_afc711227919ff9a49ede1aa2cf033cc5"><div class="ttname"><a href="LoopRerollPass_8cpp.html#afc711227919ff9a49ede1aa2cf033cc5">STATISTIC</a></div><div class="ttdeci">STATISTIC(NumRerolledLoops,&quot;Number of rerolled loops&quot;)</div></div>
<div class="ttc" id="Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00097">Debug.h:97</a></div></div>
<div class="ttc" id="raw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a9f729c6c3e0de4a55dc5a3693fd4a9eb"><div class="ttname"><a href="classllvm_1_1Instruction.html#a9f729c6c3e0de4a55dc5a3693fd4a9eb">llvm::Instruction::isSameOperationAs</a></div><div class="ttdeci">bool isSameOperationAs(const Instruction *I, unsigned flags=0) const </div><div class="ttdoc">Determine if one instruction is the same operation as another. </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00334">Instruction.cpp:334</a></div></div>
<div class="ttc" id="classllvm_1_1DenseSet_html_a33bf9e8d62adbf5e2d52c5d7c1c1094b"><div class="ttname"><a href="classllvm_1_1DenseSet.html#a33bf9e8d62adbf5e2d52c5d7c1c1094b">llvm::DenseSet::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00108">DenseSet.h:108</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_ab1cd5a3713b93a33f89a2086d473cf6e"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ab1cd5a3713b93a33f89a2086d473cf6e">llvm::BasicBlock::getFirstInsertionPt</a></div><div class="ttdeci">iterator getFirstInsertionPt()</div><div class="ttdoc">Returns an iterator to the first instruction in this block that is suitable for inserting a non-PHI i...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00170">BasicBlock.cpp:170</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a380559e99b47632a34f74de7c1d03cc0"><div class="ttname"><a href="classllvm_1_1Value.html#a380559e99b47632a34f74de7c1d03cc0">llvm::Value::getNumUses</a></div><div class="ttdeci">unsigned getNumUses() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00139">Value.cpp:139</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a21cf94357e53cd1069aba475266fdb63"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a21cf94357e53cd1069aba475266fdb63">llvm::DenseMapBase::find</a></div><div class="ttdeci">iterator find(const KeyT &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00108">DenseMap.h:108</a></div></div>
<div class="ttc" id="classllvm_1_1ScalarEvolution_html_ad5829d76e14852080c205f8b94d830f1"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html#ad5829d76e14852080c205f8b94d830f1">llvm::ScalarEvolution::getMulExpr</a></div><div class="ttdeci">const SCEV * getMulExpr(SmallVectorImpl&lt; const SCEV * &gt; &amp;Ops, SCEV::NoWrapFlags Flags=SCEV::FlagAnyWrap)</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l01864">ScalarEvolution.cpp:1864</a></div></div>
<div class="ttc" id="classllvm_1_1LPPassManager_html"><div class="ttname"><a href="classllvm_1_1LPPassManager.html">llvm::LPPassManager</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopPass_8h_source.html#l00086">LoopPass.h:86</a></div></div>
<div class="ttc" id="classllvm_1_1SCEVConstant_html"><div class="ttname"><a href="classllvm_1_1SCEVConstant.html">llvm::SCEVConstant</a></div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00037">ScalarEvolutionExpressions.h:37</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 22:59:30 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
