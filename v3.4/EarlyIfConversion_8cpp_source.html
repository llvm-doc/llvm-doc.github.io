<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: EarlyIfConversion.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('EarlyIfConversion_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">EarlyIfConversion.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="EarlyIfConversion_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===-- EarlyIfConversion.cpp - If-conversion on SSA form machine code ----===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// Early if-conversion is for out-of-order CPUs that don&#39;t have a lot of</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// predicable instructions. The goal is to eliminate conditional branches that</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// may mispredict.</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// Instructions from both sides of the branch are executed specutatively, and a</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// cmov instruction selects the result.</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00019"></a><span class="lineno"><a class="line" href="EarlyIfConversion_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   19</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;early-ifcvt&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BitVector_8h.html">llvm/ADT/BitVector.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PostOrderIterator_8h.html">llvm/ADT/PostOrderIterator.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SetVector_8h.html">llvm/ADT/SetVector.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallPtrSet_8h.html">llvm/ADT/SmallPtrSet.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SparseSet_8h.html">llvm/ADT/SparseSet.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineBranchProbabilityInfo_8h.html">llvm/CodeGen/MachineBranchProbabilityInfo.h</a>&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineDominators_8h.html">llvm/CodeGen/MachineDominators.h</a>&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineFunction_8h.html">llvm/CodeGen/MachineFunction.h</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineFunctionPass_8h.html">llvm/CodeGen/MachineFunctionPass.h</a>&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineLoopInfo_8h.html">llvm/CodeGen/MachineLoopInfo.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineRegisterInfo_8h.html">llvm/CodeGen/MachineRegisterInfo.h</a>&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineTraceMetrics_8h.html">llvm/CodeGen/MachineTraceMetrics.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CodeGen_2Passes_8h.html">llvm/CodeGen/Passes.h</a>&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetInstrInfo_8h.html">llvm/Target/TargetInstrInfo.h</a>&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetRegisterInfo_8h.html">llvm/Target/TargetRegisterInfo.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetSubtargetInfo_8h.html">llvm/Target/TargetSubtargetInfo.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">// Absolute maximum number of instructions allowed per speculated block.</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">// This bypasses all other heuristics, so it should be set fairly high.</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<a class="code" href="EarlyIfConversion_8cpp.html#a7d88cec049c13a279afdc1993fbf0976">BlockInstrLimit</a>(<span class="stringliteral">&quot;early-ifcvt-limit&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(30), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Maximum number of instructions per speculated block.&quot;</span>));</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">// Stress testing mode - disable heuristics.</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="EarlyIfConversion_8cpp.html#a9f70912c8cebac0794c5651aa8a509e4">Stress</a>(<span class="stringliteral">&quot;stress-early-ifcvt&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Turn all knobs to 11&quot;</span>));</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<a class="code" href="EarlyIfConversion_8cpp.html#ac04d3313bacb19fed62cc29d96a083ad">STATISTIC</a>(NumDiamondsSeen,  <span class="stringliteral">&quot;Number of diamonds&quot;</span>);</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<a class="code" href="EarlyIfConversion_8cpp.html#ac04d3313bacb19fed62cc29d96a083ad">STATISTIC</a>(NumDiamondsConv,  <span class="stringliteral">&quot;Number of diamonds converted&quot;</span>);</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<a class="code" href="EarlyIfConversion_8cpp.html#ac04d3313bacb19fed62cc29d96a083ad">STATISTIC</a>(NumTrianglesSeen, <span class="stringliteral">&quot;Number of triangles&quot;</span>);</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<a class="code" href="EarlyIfConversion_8cpp.html#ac04d3313bacb19fed62cc29d96a083ad">STATISTIC</a>(NumTrianglesConv, <span class="stringliteral">&quot;Number of triangles converted&quot;</span>);</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">//                                 SSAIfConv</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">// The SSAIfConv class performs if-conversion on SSA form machine code after</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">// determining if it is possible. The class contains no heuristics; external</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">// code should be used to determine when if-conversion is a good idea.</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">// SSAIfConv can convert both triangles and diamonds:</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">//   Triangle: Head              Diamond: Head</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">//              | \                       /  \_</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">//              |  \                     /    |</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">//              |  [TF]BB              FBB    TBB</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">//              |  /                     \    /</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">//              | /                       \  /</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">//             Tail                       Tail</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">// Instructions in the conditional blocks TBB and/or FBB are spliced into the</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">// Head block, and phis in the Tail block are converted to select instructions.</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="keyword">class </span>SSAIfConv {</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *TRI;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> *<a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="keyword">public</span>:<span class="comment"></span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">  /// The block containing the conditional branch.</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Head;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">  /// The block containing phis after the if-then-else.</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Tail;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">  /// The &#39;true&#39; conditional block as determined by AnalyzeBranch.</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *TBB;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">  /// The &#39;false&#39; conditional block as determined by AnalyzeBranch.</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *FBB;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">  /// isTriangle - When there is no &#39;else&#39; block, either TBB or FBB will be</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">  /// equal to Tail.</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> isTriangle()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> TBB == Tail || FBB == Tail; }</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">  /// Returns the Tail predecessor for the True side.</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *getTPred()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> TBB == Tail ? Head : TBB; }</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">  /// Returns the Tail predecessor for the  False side.</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *getFPred()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> FBB == Tail ? Head : FBB; }</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">  /// Information about each phi in the Tail block.</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment"></span>  <span class="keyword">struct </span>PHIInfo {</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8ae41f9ca68ba5e8b9613cea03652ebd72">PHI</a>;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordtype">unsigned</span> TReg, FReg;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="comment">// Latencies from Cond+Branch, TReg, and FReg to DstReg.</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordtype">int</span> CondCycles, TCycles, FCycles;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    PHIInfo(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *phi)</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      : PHI(phi), TReg(0), FReg(0), CondCycles(0), TCycles(0), FCycles(0) {}</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  };</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;PHIInfo, 8&gt;</a> PHIs;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="keyword">private</span>:<span class="comment"></span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">  /// The branch condition determined by AnalyzeBranch.</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand, 4&gt;</a> Cond;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">  /// Instructions in Head that define values used by the conditional blocks.</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">  /// The hoisted instructions must be inserted after these instructions.</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;MachineInstr*, 8&gt;</a> InsertAfter;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">  /// Register units clobbered by the conditional blocks.</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1BitVector.html">BitVector</a> ClobberedRegUnits;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="comment">// Scratch pad for findInsertionPoint.</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <a class="code" href="classllvm_1_1SparseSet.html">SparseSet&lt;unsigned&gt;</a> <a class="code" href="classllvm_1_1LiveRegUnits.html">LiveRegUnits</a>;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">  /// Insertion point in Head for speculatively executed instructions form TBB</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">  /// and FBB.</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> InsertionPoint;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">  /// Return true if all non-terminator instructions in MBB can be safely</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">  /// speculated.</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> canSpeculateInstrs(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB);</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">  /// Find a valid insertion point in Head.</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> findInsertionPoint();</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">  /// Replace PHI instructions in Tail with selects.</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> replacePHIInstrs();</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">  /// Insert selects and rewrite PHI operands to use them.</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> rewritePHIOperands();</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="keyword">public</span>:<span class="comment"></span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">  /// runOnMachineFunction - Initialize per-function data structures.</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> runOnMachineFunction(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF) {</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    TII = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a6745c3bfdfc5b0643b078b96df2db252">getTarget</a>().<a class="code" href="classllvm_1_1TargetMachine.html#ac13d0f6f2c915757013b101ef6e8afbc">getInstrInfo</a>();</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    TRI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a6745c3bfdfc5b0643b078b96df2db252">getTarget</a>().<a class="code" href="classllvm_1_1TargetMachine.html#a70b47eca6a99c87b81f4c1b1455dc090">getRegisterInfo</a>();</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    MRI = &amp;MF.<a class="code" href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">getRegInfo</a>();</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    LiveRegUnits.<a class="code" href="classllvm_1_1SparseSet.html#aab146f4c3793a4a99649ce52b3badc15">clear</a>();</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    LiveRegUnits.<a class="code" href="classllvm_1_1SparseSet.html#ac5c4065b01268eb6764867041cd1d96c">setUniverse</a>(TRI-&gt;<a class="code" href="classllvm_1_1MCRegisterInfo.html#aaf3dc2763e3a8855709d186966654062">getNumRegUnits</a>());</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    ClobberedRegUnits.<a class="code" href="classllvm_1_1BitVector.html#a35bbc237e4a675c5332103ac6e7dcce1">clear</a>();</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    ClobberedRegUnits.<a class="code" href="classllvm_1_1BitVector.html#a32859a24aa7a3be269855b989d92a4b4">resize</a>(TRI-&gt;<a class="code" href="classllvm_1_1MCRegisterInfo.html#aaf3dc2763e3a8855709d186966654062">getNumRegUnits</a>());</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  }</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">  /// canConvertIf - If the sub-CFG headed by MBB can be if-converted,</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">  /// initialize the internal state, and return true.</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> canConvertIf(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB);</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">  /// convertIf - If-convert the last block passed to canConvertIf(), assuming</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment">  /// it is possible. Add any erased blocks to RemovedBlocks.</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> convertIf(<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineBasicBlock*&gt;</a> &amp;RemovedBlocks);</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;};</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;} <span class="comment">// end anonymous namespace</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">/// canSpeculateInstrs - Returns true if all the instructions in MBB can safely</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">/// be speculated. The terminators are not considered.</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">/// If instructions use any values that are defined in the head basic block,</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment">/// the defining instructions are added to InsertAfter.</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">/// Any clobbered regunits are added to ClobberedRegUnits.</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> SSAIfConv::canSpeculateInstrs(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB) {</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="comment">// Reject any live-in physregs. It&#39;s probably CPSR/EFLAGS, and very hard to</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="comment">// get right.</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="keywordflow">if</span> (!MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a1aa759ed68c66a8956b851d6de364e8d">livein_empty</a>()) {</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;BB#&quot;</span> &lt;&lt; MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>() &lt;&lt; <span class="stringliteral">&quot; has live-ins.\n&quot;</span>);</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  }</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="keywordtype">unsigned</span> InstrCount = 0;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <span class="comment">// Check all instructions, except the terminators. It is assumed that</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="comment">// terminators never have side effects or define any used register values.</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>(),</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;       E = MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7f0521fa2de44271fd4b909ea7351ef3">getFirstTerminator</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isDebugValue())</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">if</span> (++InstrCount &gt; <a class="code" href="EarlyIfConversion_8cpp.html#a7d88cec049c13a279afdc1993fbf0976">BlockInstrLimit</a> &amp;&amp; !<a class="code" href="EarlyIfConversion_8cpp.html#a9f70912c8cebac0794c5651aa8a509e4">Stress</a>) {</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;BB#&quot;</span> &lt;&lt; MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>() &lt;&lt; <span class="stringliteral">&quot; has more than &quot;</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                   &lt;&lt; <a class="code" href="EarlyIfConversion_8cpp.html#a7d88cec049c13a279afdc1993fbf0976">BlockInstrLimit</a> &lt;&lt; <span class="stringliteral">&quot; instructions.\n&quot;</span>);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    }</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="comment">// There shouldn&#39;t normally be any phis in a single-predecessor block.</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isPHI()) {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Can&#39;t hoist: &quot;</span> &lt;&lt; *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    }</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="comment">// Don&#39;t speculate loads. Note that it may be possible and desirable to</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="comment">// speculate GOT or constant pool loads that are guaranteed not to trap,</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="comment">// but we don&#39;t support that for now.</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;mayLoad()) {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Won&#39;t speculate load: &quot;</span> &lt;&lt; *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    }</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="comment">// We never speculate stores, so an AA pointer isn&#39;t necessary.</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordtype">bool</span> DontMoveAcrossStore = <span class="keyword">true</span>;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isSafeToMove(TII, 0, DontMoveAcrossStore)) {</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Can&#39;t speculate: &quot;</span> &lt;&lt; *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    }</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="comment">// Check for any dependencies on Head instructions.</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MIOperands.html">MIOperands</a> MO(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>); MO.<a class="code" href="classllvm_1_1MachineOperandIteratorBase.html#af3802cbef7a57e8de316fe13fbed8e67">isValid</a>(); ++MO) {</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      <span class="keywordflow">if</span> (MO-&gt;isRegMask()) {</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Won&#39;t speculate regmask: &quot;</span> &lt;&lt; *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      }</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      <span class="keywordflow">if</span> (!MO-&gt;isReg())</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = MO-&gt;getReg();</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      <span class="comment">// Remember clobbered regunits.</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      <span class="keywordflow">if</span> (MO-&gt;isDef() &amp;&amp; <a class="code" href="classllvm_1_1TargetRegisterInfo.html#a055858b14215864ed367a8db6c19d6f6">TargetRegisterInfo::isPhysicalRegister</a>(Reg))</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MCRegUnitIterator.html">MCRegUnitIterator</a> Units(Reg, TRI); Units.<a class="code" href="classllvm_1_1MCRegisterInfo_1_1DiffListIterator.html#abccd358b92366e5284e7e674e86b241f">isValid</a>(); ++Units)</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;          ClobberedRegUnits.<a class="code" href="classllvm_1_1BitVector.html#a1964207fae81f04966b2a9dcfc21cf7b">set</a>(*Units);</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      <span class="keywordflow">if</span> (!MO-&gt;readsReg() || !<a class="code" href="classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">TargetRegisterInfo::isVirtualRegister</a>(Reg))</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *DefMI = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#abf69f92f1977440a4e443a26baeb73c0">getVRegDef</a>(Reg);</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      <span class="keywordflow">if</span> (!DefMI || DefMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">getParent</a>() != Head)</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      <span class="keywordflow">if</span> (InsertAfter.<a class="code" href="classllvm_1_1SmallPtrSet.html#a9b6dd0fc7a648a939e571246045b673e">insert</a>(DefMI))</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;BB#&quot;</span> &lt;&lt; MBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>() &lt;&lt; <span class="stringliteral">&quot; depends on &quot;</span> &lt;&lt; *DefMI);</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      <span class="keywordflow">if</span> (DefMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aea36f6665e4992da1874625d5f00e1c1">isTerminator</a>()) {</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Can&#39;t insert instructions below terminator.\n&quot;</span>);</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      }</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    }</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  }</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;}</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">/// Find an insertion point in Head for the speculated instructions. The</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">/// insertion point must be:</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">/// 1. Before any terminators.</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">/// 2. After any instructions in InsertAfter.</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">/// 3. Not have any clobbered regunits live.</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">/// This function sets InsertionPoint and returns true when successful, it</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">/// returns false if no valid insertion point could be found.</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> SSAIfConv::findInsertionPoint() {</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <span class="comment">// Keep track of live regunits before the current position.</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="comment">// Only track RegUnits that are also in ClobberedRegUnits.</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  LiveRegUnits.<a class="code" href="classllvm_1_1SparseSet.html#aab146f4c3793a4a99649ce52b3badc15">clear</a>();</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 8&gt;</a> Reads;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> FirstTerm = Head-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7f0521fa2de44271fd4b909ea7351ef3">getFirstTerminator</a>();</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Head-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>();</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> <a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a> = Head-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>();</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="keywordflow">while</span> (I != B) {</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    --<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="comment">// Some of the conditional code depends in I.</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordflow">if</span> (InsertAfter.<a class="code" href="classllvm_1_1SmallPtrSet.html#a2ced6343b8ad006a757059554bbf9f37">count</a>(I)) {</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Can&#39;t insert code after &quot;</span> &lt;&lt; *I);</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    }</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="comment">// Update live regunits.</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MIOperands.html">MIOperands</a> MO(I); MO.<a class="code" href="classllvm_1_1MachineOperandIteratorBase.html#af3802cbef7a57e8de316fe13fbed8e67">isValid</a>(); ++MO) {</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      <span class="comment">// We&#39;re ignoring regmask operands. That is conservatively correct.</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      <span class="keywordflow">if</span> (!MO-&gt;isReg())</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      <span class="keywordtype">unsigned</span> Reg = MO-&gt;getReg();</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1TargetRegisterInfo.html#a055858b14215864ed367a8db6c19d6f6">TargetRegisterInfo::isPhysicalRegister</a>(Reg))</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      <span class="comment">// I clobbers Reg, so it isn&#39;t live before I.</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      <span class="keywordflow">if</span> (MO-&gt;isDef())</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MCRegUnitIterator.html">MCRegUnitIterator</a> Units(Reg, TRI); Units.<a class="code" href="classllvm_1_1MCRegisterInfo_1_1DiffListIterator.html#abccd358b92366e5284e7e674e86b241f">isValid</a>(); ++Units)</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;          LiveRegUnits.<a class="code" href="classllvm_1_1SparseSet.html#a5a00f6afdfec487d3165d29e57452b32">erase</a>(*Units);</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      <span class="comment">// Unless I reads Reg.</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <span class="keywordflow">if</span> (MO-&gt;readsReg())</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        Reads.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Reg);</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    }</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="comment">// Anything read by I is live before I.</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">while</span> (!Reads.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>())</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MCRegUnitIterator.html">MCRegUnitIterator</a> Units(Reads.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">pop_back_val</a>(), TRI); Units.<a class="code" href="classllvm_1_1MCRegisterInfo_1_1DiffListIterator.html#abccd358b92366e5284e7e674e86b241f">isValid</a>();</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;           ++Units)</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <span class="keywordflow">if</span> (ClobberedRegUnits.<a class="code" href="classllvm_1_1BitVector.html#a20b6ba858cb2bb6d8d7fa553025c1f61">test</a>(*Units))</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;          LiveRegUnits.<a class="code" href="classllvm_1_1SparseSet.html#a1a4055576fc0e9afc07647fe6dae8b0d">insert</a>(*Units);</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="comment">// We can&#39;t insert before a terminator.</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordflow">if</span> (I != FirstTerm &amp;&amp; I-&gt;isTerminator())</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="comment">// Some of the clobbered registers are live before I, not a valid insertion</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="comment">// point.</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordflow">if</span> (!LiveRegUnits.<a class="code" href="classllvm_1_1SparseSet.html#a33ce23f0739f7b36a3c462d7b6d9ae84">empty</a>()) {</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>({</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Would clobber&quot;</span>;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SparseSet.html">SparseSet&lt;unsigned&gt;::const_iterator</a></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;             <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = LiveRegUnits.<a class="code" href="classllvm_1_1SparseSet.html#adf89ae764788137664ba65549e42b047">begin</a>(), e = LiveRegUnits.<a class="code" href="classllvm_1_1SparseSet.html#a337ac3a574df74649d67cac686aaf580">end</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; <a class="code" href="classllvm_1_1PrintRegUnit.html">PrintRegUnit</a>(*<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, TRI);</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; live before &quot;</span> &lt;&lt; *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      });</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    }</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="comment">// This is a valid insertion point.</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    InsertionPoint = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Can insert before &quot;</span> &lt;&lt; *I);</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  }</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;No legal insertion point found.\n&quot;</span>);</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;}</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment">/// canConvertIf - analyze the sub-cfg rooted in MBB, and return true if it is</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment">/// a potential candidate for if-conversion. Fill out the internal state.</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> SSAIfConv::canConvertIf(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB) {</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  Head = MBB;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  TBB = FBB = Tail = 0;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="keywordflow">if</span> (Head-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a9ac05913a143322136efcad10ed7548c">succ_size</a>() != 2)</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Succ0 = Head-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6321b189ea8fd5058663f8a87d6c23e9">succ_begin</a>()[0];</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Succ1 = Head-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6321b189ea8fd5058663f8a87d6c23e9">succ_begin</a>()[1];</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <span class="comment">// Canonicalize so Succ0 has MBB as its single predecessor.</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <span class="keywordflow">if</span> (Succ0-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac9786455bc217ebd35377bb5d5ec8f20">pred_size</a>() != 1)</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Succ0, Succ1);</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <span class="keywordflow">if</span> (Succ0-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac9786455bc217ebd35377bb5d5ec8f20">pred_size</a>() != 1 || Succ0-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a9ac05913a143322136efcad10ed7548c">succ_size</a>() != 1)</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  Tail = Succ0-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6321b189ea8fd5058663f8a87d6c23e9">succ_begin</a>()[0];</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="comment">// This is not a triangle.</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <span class="keywordflow">if</span> (Tail != Succ1) {</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="comment">// Check for a diamond. We won&#39;t deal with any critical edges.</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordflow">if</span> (Succ1-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac9786455bc217ebd35377bb5d5ec8f20">pred_size</a>() != 1 || Succ1-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a9ac05913a143322136efcad10ed7548c">succ_size</a>() != 1 ||</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        Succ1-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6321b189ea8fd5058663f8a87d6c23e9">succ_begin</a>()[0] != Tail)</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\nDiamond: BB#&quot;</span> &lt;&lt; Head-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>()</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot; -&gt; BB#&quot;</span> &lt;&lt; Succ0-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>()</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot;/BB#&quot;</span> &lt;&lt; Succ1-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>()</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot; -&gt; BB#&quot;</span> &lt;&lt; Tail-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="comment">// Live-in physregs are tricky to get right when speculating code.</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keywordflow">if</span> (!Tail-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a1aa759ed68c66a8956b851d6de364e8d">livein_empty</a>()) {</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Tail has live-ins.\n&quot;</span>);</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    }</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\nTriangle: BB#&quot;</span> &lt;&lt; Head-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>()</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot; -&gt; BB#&quot;</span> &lt;&lt; Succ0-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>()</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot; -&gt; BB#&quot;</span> &lt;&lt; Tail-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  }</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <span class="comment">// This is a triangle or a diamond.</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <span class="comment">// If Tail doesn&#39;t have any phis, there must be side effects.</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="keywordflow">if</span> (Tail-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#aa37d95a1d7bc824da0c596d8334c4ceb">empty</a>() || !Tail-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acb4d7c02992f3821f3e3432b6c65de49">front</a>().<a class="code" href="classllvm_1_1MachineInstr.html#ad70025709baab4e42d5d9d83023bc402">isPHI</a>()) {</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;No phis in tail.\n&quot;</span>);</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  }</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="comment">// The branch we&#39;re looking to eliminate must be analyzable.</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  Cond.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="keywordflow">if</span> (TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a641441a84a88e01223f3c091dfb50694">AnalyzeBranch</a>(*Head, TBB, FBB, Cond)) {</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Branch not analyzable.\n&quot;</span>);</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  }</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <span class="comment">// This is weird, probably some sort of degenerate CFG.</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <span class="keywordflow">if</span> (!TBB) {</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;AnalyzeBranch didn&#39;t find conditional branch.\n&quot;</span>);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  }</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <span class="comment">// AnalyzeBranch doesn&#39;t set FBB on a fall-through branch.</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="comment">// Make sure it is always set.</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  FBB = TBB == Succ0 ? Succ1 : Succ0;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="comment">// Any phis in the tail block must be convertible to selects.</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  PHIs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *TPred = getTPred();</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *FPred = getFPred();</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> I = Tail-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>(), E = Tail-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>();</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;       I != E &amp;&amp; I-&gt;isPHI(); ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    PHIs.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(&amp;*I);</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    PHIInfo &amp;PI = PHIs.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#acd9e771a3296c6b24146955754620557">back</a>();</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="comment">// Find PHI operands corresponding to TPred and FPred.</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != PI.PHI-&gt;getNumOperands(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> += 2) {</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;      <span class="keywordflow">if</span> (PI.PHI-&gt;getOperand(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>+1).getMBB() == TPred)</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        PI.TReg = PI.PHI-&gt;getOperand(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>).getReg();</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      <span class="keywordflow">if</span> (PI.PHI-&gt;getOperand(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>+1).getMBB() == FPred)</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        PI.FReg = PI.PHI-&gt;getOperand(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>).getReg();</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    }</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    assert(<a class="code" href="classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">TargetRegisterInfo::isVirtualRegister</a>(PI.TReg) &amp;&amp; <span class="stringliteral">&quot;Bad PHI&quot;</span>);</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    assert(<a class="code" href="classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">TargetRegisterInfo::isVirtualRegister</a>(PI.FReg) &amp;&amp; <span class="stringliteral">&quot;Bad PHI&quot;</span>);</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="comment">// Get target information.</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordflow">if</span> (!TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a5646521387b41101f06d6713b11ea209">canInsertSelect</a>(*Head, Cond, PI.TReg, PI.FReg,</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                              PI.CondCycles, PI.TCycles, PI.FCycles)) {</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Can&#39;t convert: &quot;</span> &lt;&lt; *PI.PHI);</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    }</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  }</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <span class="comment">// Check that the conditional instructions can be speculated.</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  InsertAfter.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#aa72472422d95c7052d62432ec279ff85">clear</a>();</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  ClobberedRegUnits.<a class="code" href="classllvm_1_1BitVector.html#a5109693c2cdda2a4118e7d588b51bfa6">reset</a>();</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <span class="keywordflow">if</span> (TBB != Tail &amp;&amp; !canSpeculateInstrs(TBB))</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <span class="keywordflow">if</span> (FBB != Tail &amp;&amp; !canSpeculateInstrs(FBB))</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  <span class="comment">// Try to find a valid insertion point for the speculated instructions in the</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <span class="comment">// head basic block.</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <span class="keywordflow">if</span> (!findInsertionPoint())</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  <span class="keywordflow">if</span> (isTriangle())</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    ++NumTrianglesSeen;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    ++NumDiamondsSeen;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;}</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="comment">/// replacePHIInstrs - Completely replace PHI instructions with selects.</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="comment">/// This is possible when the only Tail predecessors are the if-converted</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment">/// blocks.</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> SSAIfConv::replacePHIInstrs() {</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  assert(Tail-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac9786455bc217ebd35377bb5d5ec8f20">pred_size</a>() == 2 &amp;&amp; <span class="stringliteral">&quot;Cannot replace PHIs&quot;</span>);</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> FirstTerm = Head-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7f0521fa2de44271fd4b909ea7351ef3">getFirstTerminator</a>();</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  assert(FirstTerm != Head-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>() &amp;&amp; <span class="stringliteral">&quot;No terminators&quot;</span>);</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> HeadDL = FirstTerm-&gt;getDebugLoc();</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <span class="comment">// Convert all PHIs to select instructions inserted before FirstTerm.</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = PHIs.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    PHIInfo &amp;PI = PHIs[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;If-converting &quot;</span> &lt;&lt; *PI.PHI);</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keywordtype">unsigned</span> DstReg = PI.PHI-&gt;getOperand(0).getReg();</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a575dbec1cd0f3548f6f462d41ecf6cb9">insertSelect</a>(*Head, FirstTerm, HeadDL, DstReg, Cond, PI.TReg, PI.FReg);</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;          --&gt; &quot;</span> &lt;&lt; *<a class="code" href="namespacellvm.html#a7923e3e207de8bc1d0d6a5091316ddde">llvm::prior</a>(FirstTerm));</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    PI.PHI-&gt;eraseFromParent();</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    PI.PHI = 0;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  }</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;}</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="comment">/// rewritePHIOperands - When there are additional Tail predecessors, insert</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment">/// select instructions in Head and rewrite PHI operands to use the selects.</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment">/// Keep the PHI instructions in Tail to handle the other predecessors.</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> SSAIfConv::rewritePHIOperands() {</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> FirstTerm = Head-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7f0521fa2de44271fd4b909ea7351ef3">getFirstTerminator</a>();</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  assert(FirstTerm != Head-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>() &amp;&amp; <span class="stringliteral">&quot;No terminators&quot;</span>);</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> HeadDL = FirstTerm-&gt;getDebugLoc();</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="comment">// Convert all PHIs to select instructions inserted before FirstTerm.</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = PHIs.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    PHIInfo &amp;PI = PHIs[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;If-converting &quot;</span> &lt;&lt; *PI.PHI);</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="keywordtype">unsigned</span> PHIDst = PI.PHI-&gt;getOperand(0).getReg();</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keywordtype">unsigned</span> DstReg = MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a76c3c7e3d4f11b4cfad37fc0449c9635">createVirtualRegister</a>(MRI-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#ab3904d3601dbe52865d5f2e33a06d80d">getRegClass</a>(PHIDst));</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a575dbec1cd0f3548f6f462d41ecf6cb9">insertSelect</a>(*Head, FirstTerm, HeadDL, DstReg, Cond, PI.TReg, PI.FReg);</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;          --&gt; &quot;</span> &lt;&lt; *<a class="code" href="namespacellvm.html#a7923e3e207de8bc1d0d6a5091316ddde">llvm::prior</a>(FirstTerm));</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="comment">// Rewrite PHI operands TPred -&gt; (DstReg, Head), remove FPred.</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = PI.PHI-&gt;getNumOperands(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != 1; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> -= 2) {</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB = PI.PHI-&gt;getOperand(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>-1).getMBB();</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      <span class="keywordflow">if</span> (MBB == getTPred()) {</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        PI.PHI-&gt;getOperand(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>-1).setMBB(Head);</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        PI.PHI-&gt;getOperand(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>-2).setReg(DstReg);</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (MBB == getFPred()) {</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        PI.PHI-&gt;RemoveOperand(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>-1);</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        PI.PHI-&gt;RemoveOperand(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>-2);</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;      }</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    }</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;          --&gt; &quot;</span> &lt;&lt; *PI.PHI);</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  }</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;}</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="comment">/// convertIf - Execute the if conversion after canConvertIf has determined the</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment">/// feasibility.</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="comment">/// Any basic blocks erased will be added to RemovedBlocks.</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> SSAIfConv::convertIf(<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineBasicBlock*&gt;</a> &amp;RemovedBlocks) {</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  assert(Head &amp;&amp; Tail &amp;&amp; TBB &amp;&amp; FBB &amp;&amp; <span class="stringliteral">&quot;Call canConvertIf first.&quot;</span>);</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  <span class="comment">// Update statistics.</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  <span class="keywordflow">if</span> (isTriangle())</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    ++NumTrianglesConv;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    ++NumDiamondsConv;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <span class="comment">// Move all instructions into Head, except for the terminators.</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  <span class="keywordflow">if</span> (TBB != Tail)</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    Head-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#adf0023bdc4f05a7849c35b1c859580d8">splice</a>(InsertionPoint, TBB, TBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>(), TBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7f0521fa2de44271fd4b909ea7351ef3">getFirstTerminator</a>());</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  <span class="keywordflow">if</span> (FBB != Tail)</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    Head-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#adf0023bdc4f05a7849c35b1c859580d8">splice</a>(InsertionPoint, FBB, FBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>(), FBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7f0521fa2de44271fd4b909ea7351ef3">getFirstTerminator</a>());</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="comment">// Are there extra Tail predecessors?</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <span class="keywordtype">bool</span> ExtraPreds = Tail-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac9786455bc217ebd35377bb5d5ec8f20">pred_size</a>() != 2;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <span class="keywordflow">if</span> (ExtraPreds)</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    rewritePHIOperands();</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    replacePHIInstrs();</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  <span class="comment">// Fix up the CFG, temporarily leave Head without any successors.</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  Head-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#aabc149950316b323f9cdac2122ff0131">removeSuccessor</a>(TBB);</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  Head-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#aabc149950316b323f9cdac2122ff0131">removeSuccessor</a>(FBB);</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  <span class="keywordflow">if</span> (TBB != Tail)</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    TBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#aabc149950316b323f9cdac2122ff0131">removeSuccessor</a>(Tail);</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <span class="keywordflow">if</span> (FBB != Tail)</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    FBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#aabc149950316b323f9cdac2122ff0131">removeSuccessor</a>(Tail);</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  <span class="comment">// Fix up Head&#39;s terminators.</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  <span class="comment">// It should become a single branch or a fallthrough.</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> HeadDL = Head-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7f0521fa2de44271fd4b909ea7351ef3">getFirstTerminator</a>()-&gt;getDebugLoc();</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#abce62a681f245fc78059890e4ca83210">RemoveBranch</a>(*Head);</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <span class="comment">// Erase the now empty conditional blocks. It is likely that Head can fall</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <span class="comment">// through to Tail, and we can join the two blocks.</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  <span class="keywordflow">if</span> (TBB != Tail) {</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    RemovedBlocks.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(TBB);</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    TBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac421fe6513e43aedbba712e4a981744e">eraseFromParent</a>();</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  }</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <span class="keywordflow">if</span> (FBB != Tail) {</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    RemovedBlocks.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(FBB);</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    FBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac421fe6513e43aedbba712e4a981744e">eraseFromParent</a>();</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  }</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  assert(Head-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a1570dd3a2568ba5e52073cdf6d904ee9">succ_empty</a>() &amp;&amp; <span class="stringliteral">&quot;Additional head successors?&quot;</span>);</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <span class="keywordflow">if</span> (!ExtraPreds &amp;&amp; Head-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a0fc7a349a4ab737607def6cb461791fd">isLayoutSuccessor</a>(Tail)) {</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <span class="comment">// Splice Tail onto the end of Head.</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Joining tail BB#&quot;</span> &lt;&lt; Tail-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>()</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot; into head BB#&quot;</span> &lt;&lt; Head-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    Head-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#adf0023bdc4f05a7849c35b1c859580d8">splice</a>(Head-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>(), Tail,</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                     Tail-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>(), Tail-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>());</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    Head-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#adae25a8cf267a802c72c3d6ad8c044e3">transferSuccessorsAndUpdatePHIs</a>(Tail);</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    RemovedBlocks.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(Tail);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    Tail-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac421fe6513e43aedbba712e4a981744e">eraseFromParent</a>();</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="comment">// We need a branch to Tail, let code placement work it out later.</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Converting to unconditional branch.\n&quot;</span>);</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand, 0&gt;</a> EmptyCond;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    TII-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a8afe41bda071ea77c815f7bd436fdd82">InsertBranch</a>(*Head, Tail, 0, EmptyCond, HeadDL);</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    Head-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3fcc360e6de146a370e8b0deecfa877f">addSuccessor</a>(Tail);</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  }</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; *Head);</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;}</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="comment">//                           EarlyIfConverter Pass</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="keyword">class </span>EarlyIfConverter : <span class="keyword">public</span> <a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a> {</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *TRI;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MCSchedModel.html">MCSchedModel</a> *SchedModel;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> *<a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  <a class="code" href="classllvm_1_1MachineDominatorTree.html">MachineDominatorTree</a> *DomTree;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  <a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a> *<a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  <a class="code" href="classllvm_1_1MachineTraceMetrics.html">MachineTraceMetrics</a> *Traces;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html">MachineTraceMetrics::Ensemble</a> *MinInstr;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  SSAIfConv IfConv;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  EarlyIfConverter() : <a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a>(ID) {}</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU) <span class="keyword">const</span>;</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  <span class="keywordtype">bool</span> runOnMachineFunction(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF);</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *getPassName()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="stringliteral">&quot;Early If-Conversion&quot;</span>; }</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <span class="keywordtype">bool</span> tryConvertIf(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a>*);</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  <span class="keywordtype">void</span> updateDomTree(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;MachineBasicBlock*&gt;</a> Removed);</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <span class="keywordtype">void</span> updateLoops(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;MachineBasicBlock*&gt;</a> Removed);</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <span class="keywordtype">void</span> invalidateTraces();</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  <span class="keywordtype">bool</span> shouldConvertIf();</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;};</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;} <span class="comment">// end anonymous namespace</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">EarlyIfConverter::ID</a> = 0;</div><div class="line"><a name="l00607"></a><span class="lineno"><a class="line" href="namespacellvm.html#a9cabd1b101f002bb436c15c07afaf042">  607</a></span>&#160;<span class="keywordtype">char</span> &amp;<a class="code" href="namespacellvm.html#a9cabd1b101f002bb436c15c07afaf042">llvm::EarlyIfConverterID</a> = <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">EarlyIfConverter::ID</a>;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<a class="code" href="EarlyIfConversion_8cpp.html#a9cca7487b5d111a7d80c339067795a61">INITIALIZE_PASS_BEGIN</a>(EarlyIfConverter,</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                      <span class="stringliteral">&quot;early-ifcvt&quot;</span>, <span class="stringliteral">&quot;Early If Converter&quot;</span>, <span class="keyword">false</span>, <span class="keyword">false</span>)</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1MachineBranchProbabilityInfo.html">MachineBranchProbabilityInfo</a>)</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1MachineDominatorTree.html">MachineDominatorTree</a>)</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1MachineTraceMetrics.html">MachineTraceMetrics</a>)</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<a class="code" href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a>(EarlyIfConverter,</div><div class="line"><a name="l00615"></a><span class="lineno"><a class="line" href="EarlyIfConversion_8cpp.html#ac7ac2f0223d9caec554f1971708871dc">  615</a></span>&#160;                      &quot;<a class="code" href="README-SSE_8txt.html#ae08edf2a0482a5d008070bbd72580a40">early</a>-<a class="code" href="EarlyIfConversion_8cpp.html#ac7ac2f0223d9caec554f1971708871dc">ifcvt</a>&quot;, &quot;Early If <a class="code" href="EarlyIfConversion_8cpp.html#a282d30f7304cc0c9ad4cd81b2ae3e53d">Converter</a>&quot;, <a class="code" href="namespacefalse.html">false</a>, false)</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="keywordtype">void</span> EarlyIfConverter::getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const </span>{</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  AU.addRequired&lt;<a class="code" href="classllvm_1_1MachineBranchProbabilityInfo.html">MachineBranchProbabilityInfo</a>&gt;();</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  AU.addRequired&lt;<a class="code" href="classllvm_1_1MachineDominatorTree.html">MachineDominatorTree</a>&gt;();</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  AU.addPreserved&lt;<a class="code" href="classllvm_1_1MachineDominatorTree.html">MachineDominatorTree</a>&gt;();</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  AU.addRequired&lt;<a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a>&gt;();</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  AU.addPreserved&lt;<a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a>&gt;();</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  AU.addRequired&lt;<a class="code" href="classllvm_1_1MachineTraceMetrics.html">MachineTraceMetrics</a>&gt;();</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  AU.addPreserved&lt;<a class="code" href="classllvm_1_1MachineTraceMetrics.html">MachineTraceMetrics</a>&gt;();</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  <a class="code" href="classllvm_1_1MachineFunctionPass.html#aa1eece37d175f86a6f4808c0c167f13b">MachineFunctionPass::getAnalysisUsage</a>(AU);</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;}</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="comment">/// Update the dominator tree after if-conversion erased some blocks.</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> EarlyIfConverter::updateDomTree(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;MachineBasicBlock*&gt;</a> Removed) {</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <span class="comment">// convertIf can remove TBB, FBB, and Tail can be merged into Head.</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  <span class="comment">// TBB and FBB should not dominate any blocks.</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  <span class="comment">// Tail children should be transferred to Head.</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  <a class="code" href="classllvm_1_1DomTreeNodeBase.html">MachineDomTreeNode</a> *HeadNode = DomTree-&gt;getNode(IfConv.Head);</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Removed.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <a class="code" href="classllvm_1_1DomTreeNodeBase.html">MachineDomTreeNode</a> *Node = DomTree-&gt;getNode(Removed[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    assert(Node != HeadNode &amp;&amp; <span class="stringliteral">&quot;Cannot erase the head node&quot;</span>);</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keywordflow">while</span> (Node-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#a367ce5b70f05d0e7c30a544dab2312a9">getNumChildren</a>()) {</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;      assert(Node-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#a96fd2f0087c41942dd2618ff6e1b8640">getBlock</a>() == IfConv.Tail &amp;&amp; <span class="stringliteral">&quot;Unexpected children&quot;</span>);</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;      DomTree-&gt;changeImmediateDominator(Node-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#afada34cd832fdc73959f84d4769ab837">getChildren</a>().back(), HeadNode);</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    }</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    DomTree-&gt;eraseNode(Removed[i]);</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  }</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;}</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<span class="comment">/// Update LoopInfo after if-conversion.</span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> EarlyIfConverter::updateLoops(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;MachineBasicBlock*&gt;</a> Removed) {</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>)</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  <span class="comment">// If-conversion doesn&#39;t change loop structure, and it doesn&#39;t mess with back</span></div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  <span class="comment">// edges, so updating LoopInfo is simply removing the dead blocks.</span></div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Removed.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>-&gt;removeBlock(Removed[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;}</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="comment">/// Invalidate MachineTraceMetrics before if-conversion.</span></div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> EarlyIfConverter::invalidateTraces() {</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  Traces-&gt;verifyAnalysis();</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  Traces-&gt;invalidate(IfConv.Head);</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  Traces-&gt;invalidate(IfConv.Tail);</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  Traces-&gt;invalidate(IfConv.TBB);</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  Traces-&gt;invalidate(IfConv.FBB);</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  Traces-&gt;verifyAnalysis();</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;}</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;<span class="comment">// Adjust cycles with downward saturation.</span></div><div class="line"><a name="l00666"></a><span class="lineno"><a class="line" href="EarlyIfConversion_8cpp.html#aa60b0637ed507d64df59ff2dca00eca1">  666</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="EarlyIfConversion_8cpp.html#aa60b0637ed507d64df59ff2dca00eca1">adjCycles</a>(<span class="keywordtype">unsigned</span> Cyc, <span class="keywordtype">int</span> Delta) {</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;  <span class="keywordflow">if</span> (Delta &lt; 0 &amp;&amp; Cyc + Delta &gt; Cyc)</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  <span class="keywordflow">return</span> Cyc + Delta;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;}</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="comment">/// Apply cost model and heuristics to the if-conversion in IfConv.</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<span class="comment">/// Return true if the conversion is a good idea.</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> EarlyIfConverter::shouldConvertIf() {</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  <span class="comment">// Stress testing mode disables all cost considerations.</span></div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="EarlyIfConversion_8cpp.html#a9f70912c8cebac0794c5651aa8a509e4">Stress</a>)</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <span class="keywordflow">if</span> (!MinInstr)</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    MinInstr = Traces-&gt;getEnsemble(<a class="code" href="classllvm_1_1MachineTraceMetrics.html#a7d8979ca38421a46ac5e3f6c4d92cec5a104eba108012db621bd8bdd848e3ea11">MachineTraceMetrics::TS_MinInstrCount</a>);</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Trace.html">MachineTraceMetrics::Trace</a> TBBTrace = MinInstr-&gt;getTrace(IfConv.getTPred());</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Trace.html">MachineTraceMetrics::Trace</a> FBBTrace = MinInstr-&gt;getTrace(IfConv.getFPred());</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;TBB: &quot;</span> &lt;&lt; TBBTrace &lt;&lt; <span class="stringliteral">&quot;FBB: &quot;</span> &lt;&lt; FBBTrace);</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  <span class="keywordtype">unsigned</span> MinCrit = std::min(TBBTrace.<a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Trace.html#ad83b8a074c0588065284737b688795a9">getCriticalPath</a>(),</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                              FBBTrace.<a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Trace.html#ad83b8a074c0588065284737b688795a9">getCriticalPath</a>());</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  <span class="comment">// Set a somewhat arbitrary limit on the critical path extension we accept.</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  <span class="keywordtype">unsigned</span> CritLimit = SchedModel-&gt;MispredictPenalty/2;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <span class="comment">// If-conversion only makes sense when there is unexploited ILP. Compute the</span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  <span class="comment">// maximum-ILP resource length of the trace after if-conversion. Compare it</span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  <span class="comment">// to the shortest critical path.</span></div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const MachineBasicBlock*, 1&gt;</a> ExtraBlocks;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  <span class="keywordflow">if</span> (IfConv.TBB != IfConv.Tail)</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    ExtraBlocks.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(IfConv.TBB);</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  <span class="keywordtype">unsigned</span> ResLength = FBBTrace.<a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Trace.html#a000540f3b70a111cf9511f866994f3f1">getResourceLength</a>(ExtraBlocks);</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Resource length &quot;</span> &lt;&lt; ResLength</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;, minimal critical path &quot;</span> &lt;&lt; MinCrit &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <span class="keywordflow">if</span> (ResLength &gt; MinCrit + CritLimit) {</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Not enough available ILP.\n&quot;</span>);</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  }</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  <span class="comment">// Assume that the depth of the first head terminator will also be the depth</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  <span class="comment">// of the select instruction inserted, as determined by the flag dependency.</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  <span class="comment">// TBB / FBB data dependencies may delay the select even more.</span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Trace.html">MachineTraceMetrics::Trace</a> HeadTrace = MinInstr-&gt;getTrace(IfConv.Head);</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  <span class="keywordtype">unsigned</span> BranchDepth =</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    HeadTrace.<a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Trace.html#a1518eb55bbdcb45f54742e0ee5b610ee">getInstrCycles</a>(IfConv.Head-&gt;getFirstTerminator()).Depth;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Branch depth: &quot;</span> &lt;&lt; BranchDepth &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  <span class="comment">// Look at all the tail phis, and compute the critical path extension caused</span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  <span class="comment">// by inserting select instructions.</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  <a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Trace.html">MachineTraceMetrics::Trace</a> TailTrace = MinInstr-&gt;getTrace(IfConv.Tail);</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = IfConv.PHIs.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    SSAIfConv::PHIInfo &amp;PI = IfConv.PHIs[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="keywordtype">unsigned</span> Slack = TailTrace.<a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Trace.html#af62e23d927072da14f64cf6f072a728b">getInstrSlack</a>(PI.PHI);</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="ValueTracking_8cpp.html#a26e11e9c1ef55164b429eb9dc019f213">MaxDepth</a> = Slack + TailTrace.<a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Trace.html#a1518eb55bbdcb45f54742e0ee5b610ee">getInstrCycles</a>(PI.PHI).<a class="code" href="structllvm_1_1MachineTraceMetrics_1_1InstrCycles.html#aecec30fb7bb36797ee2c01f1c977a4b9">Depth</a>;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Slack &quot;</span> &lt;&lt; Slack &lt;&lt; <span class="stringliteral">&quot;:\t&quot;</span> &lt;&lt; *PI.PHI);</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <span class="comment">// The condition is pulled into the critical path.</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="keywordtype">unsigned</span> CondDepth = <a class="code" href="EarlyIfConversion_8cpp.html#aa60b0637ed507d64df59ff2dca00eca1">adjCycles</a>(BranchDepth, PI.CondCycles);</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="keywordflow">if</span> (CondDepth &gt; MaxDepth) {</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;      <span class="keywordtype">unsigned</span> Extra = CondDepth - <a class="code" href="ValueTracking_8cpp.html#a26e11e9c1ef55164b429eb9dc019f213">MaxDepth</a>;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Condition adds &quot;</span> &lt;&lt; Extra &lt;&lt; <span class="stringliteral">&quot; cycles.\n&quot;</span>);</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;      <span class="keywordflow">if</span> (Extra &gt; CritLimit) {</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Exceeds limit of &quot;</span> &lt;&lt; CritLimit &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;      }</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    }</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="comment">// The TBB value is pulled into the critical path.</span></div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <span class="keywordtype">unsigned</span> TDepth = <a class="code" href="EarlyIfConversion_8cpp.html#aa60b0637ed507d64df59ff2dca00eca1">adjCycles</a>(TBBTrace.<a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Trace.html#a643e268ed3053ace245edee2cc1f9504">getPHIDepth</a>(PI.PHI), PI.TCycles);</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <span class="keywordflow">if</span> (TDepth &gt; MaxDepth) {</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;      <span class="keywordtype">unsigned</span> Extra = TDepth - <a class="code" href="ValueTracking_8cpp.html#a26e11e9c1ef55164b429eb9dc019f213">MaxDepth</a>;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;TBB data adds &quot;</span> &lt;&lt; Extra &lt;&lt; <span class="stringliteral">&quot; cycles.\n&quot;</span>);</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;      <span class="keywordflow">if</span> (Extra &gt; CritLimit) {</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Exceeds limit of &quot;</span> &lt;&lt; CritLimit &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;      }</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    }</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <span class="comment">// The FBB value is pulled into the critical path.</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="keywordtype">unsigned</span> FDepth = <a class="code" href="EarlyIfConversion_8cpp.html#aa60b0637ed507d64df59ff2dca00eca1">adjCycles</a>(FBBTrace.<a class="code" href="classllvm_1_1MachineTraceMetrics_1_1Trace.html#a643e268ed3053ace245edee2cc1f9504">getPHIDepth</a>(PI.PHI), PI.FCycles);</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="keywordflow">if</span> (FDepth &gt; MaxDepth) {</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;      <span class="keywordtype">unsigned</span> Extra = FDepth - <a class="code" href="ValueTracking_8cpp.html#a26e11e9c1ef55164b429eb9dc019f213">MaxDepth</a>;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;FBB data adds &quot;</span> &lt;&lt; Extra &lt;&lt; <span class="stringliteral">&quot; cycles.\n&quot;</span>);</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;      <span class="keywordflow">if</span> (Extra &gt; CritLimit) {</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Exceeds limit of &quot;</span> &lt;&lt; CritLimit &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      }</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    }</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  }</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;}</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="comment">/// Attempt repeated if-conversion on MBB, return true if successful.</span></div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> EarlyIfConverter::tryConvertIf(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *MBB) {</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  <span class="keywordflow">while</span> (IfConv.canConvertIf(MBB) &amp;&amp; shouldConvertIf()) {</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <span class="comment">// If-convert MBB and update analyses.</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    invalidateTraces();</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineBasicBlock*, 4&gt;</a> RemovedBlocks;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    IfConv.convertIf(RemovedBlocks);</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    updateDomTree(RemovedBlocks);</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    updateLoops(RemovedBlocks);</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;  }</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;  <span class="keywordflow">return</span> Changed;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;}</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="keywordtype">bool</span> EarlyIfConverter::runOnMachineFunction(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF) {</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;********** EARLY IF-CONVERSION **********\n&quot;</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;********** Function: &quot;</span> &lt;&lt; MF.<a class="code" href="classllvm_1_1MachineFunction.html#ae215c5c2aecd18c4e68a94187d9cdbf1">getName</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  TII = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a6745c3bfdfc5b0643b078b96df2db252">getTarget</a>().<a class="code" href="classllvm_1_1TargetMachine.html#ac13d0f6f2c915757013b101ef6e8afbc">getInstrInfo</a>();</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  TRI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a6745c3bfdfc5b0643b078b96df2db252">getTarget</a>().<a class="code" href="classllvm_1_1TargetMachine.html#a70b47eca6a99c87b81f4c1b1455dc090">getRegisterInfo</a>();</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  SchedModel =</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    MF.<a class="code" href="classllvm_1_1MachineFunction.html#a6745c3bfdfc5b0643b078b96df2db252">getTarget</a>().<a class="code" href="classllvm_1_1TargetMachine.html#a5af2fed99951774b6a14d30ec6e73792">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1TargetSubtargetInfo.html">TargetSubtargetInfo</a>&gt;().getSchedModel();</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  MRI = &amp;MF.<a class="code" href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">getRegInfo</a>();</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  DomTree = &amp;getAnalysis&lt;MachineDominatorTree&gt;();</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a> = getAnalysisIfAvailable&lt;MachineLoopInfo&gt;();</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  Traces = &amp;getAnalysis&lt;MachineTraceMetrics&gt;();</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;  MinInstr = 0;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  IfConv.runOnMachineFunction(MF);</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  <span class="comment">// Visit blocks in dominator tree post-order. The post-order enables nested</span></div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  <span class="comment">// if-conversion in a single pass. The tryConvertIf() function may erase</span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;  <span class="comment">// blocks, but only blocks dominated by the head block. This makes it safe to</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  <span class="comment">// update the dominator tree while the post-order iterator is still active.</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1po__iterator.html">po_iterator&lt;MachineDominatorTree*&gt;</a></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;       I = <a class="code" href="namespacellvm.html#a8a736f0023b19d73f205d93fec7094a8">po_begin</a>(DomTree), E = <a class="code" href="namespacellvm.html#a31c465b4d456accd132c6dc332316b92">po_end</a>(DomTree); I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <span class="keywordflow">if</span> (tryConvertIf(I-&gt;getBlock()))</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;      Changed = <span class="keyword">true</span>;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  <span class="keywordflow">return</span> Changed;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;}</div><div class="ttc" id="classllvm_1_1BitVector_html_a32859a24aa7a3be269855b989d92a4b4"><div class="ttname"><a href="classllvm_1_1BitVector.html#a32859a24aa7a3be269855b989d92a4b4">llvm::BitVector::resize</a></div><div class="ttdeci">void resize(unsigned N, bool t=false)</div><div class="ttdoc">resize - Grow or shrink the bitvector. </div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00210">BitVector.h:210</a></div></div>
<div class="ttc" id="TargetSubtargetInfo_8h_html"><div class="ttname"><a href="TargetSubtargetInfo_8h.html">TargetSubtargetInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00127">SmallVector.h:127</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a9ac05913a143322136efcad10ed7548c"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a9ac05913a143322136efcad10ed7548c">llvm::MachineBasicBlock::succ_size</a></div><div class="ttdeci">unsigned succ_size() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00288">MachineBasicBlock.h:288</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00236">SmallVector.h:236</a></div></div>
<div class="ttc" id="EarlyIfConversion_8cpp_html_ac7ac2f0223d9caec554f1971708871dc"><div class="ttname"><a href="EarlyIfConversion_8cpp.html#ac7ac2f0223d9caec554f1971708871dc">ifcvt</a></div><div class="ttdeci">early ifcvt</div><div class="ttdef"><b>Definition:</b> <a href="EarlyIfConversion_8cpp_source.html#l00615">EarlyIfConversion.cpp:615</a></div></div>
<div class="ttc" id="classllvm_1_1BitVector_html_a1964207fae81f04966b2a9dcfc21cf7b"><div class="ttname"><a href="classllvm_1_1BitVector.html#a1964207fae81f04966b2a9dcfc21cf7b">llvm::BitVector::set</a></div><div class="ttdeci">BitVector &amp; set()</div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00236">BitVector.h:236</a></div></div>
<div class="ttc" id="EarlyIfConversion_8cpp_html_a9f70912c8cebac0794c5651aa8a509e4"><div class="ttname"><a href="EarlyIfConversion_8cpp.html#a9f70912c8cebac0794c5651aa8a509e4">Stress</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; Stress(&quot;stress-early-ifcvt&quot;, cl::Hidden, cl::desc(&quot;Turn all knobs to 11&quot;))</div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_a575dbec1cd0f3548f6f462d41ecf6cb9"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#a575dbec1cd0f3548f6f462d41ecf6cb9">llvm::TargetInstrInfo::insertSelect</a></div><div class="ttdeci">virtual void insertSelect(MachineBasicBlock &amp;MBB, MachineBasicBlock::iterator I, DebugLoc DL, unsigned DstReg, const SmallVectorImpl&lt; MachineOperand &gt; &amp;Cond, unsigned TrueReg, unsigned FalseReg) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00428">TargetInstrInfo.h:428</a></div></div>
<div class="ttc" id="README-SSE_8txt_html_ae08edf2a0482a5d008070bbd72580a40"><div class="ttname"><a href="README-SSE_8txt.html#ae08edf2a0482a5d008070bbd72580a40">early</a></div><div class="ttdeci">the custom lowered code happens to be but we shouldn t have to custom lower anything This is probably related to&lt; 2 x i64 &gt; ops being so bad LLVM currently generates stack realignment when it is not necessary needed The problem is that we need to know about stack alignment too early</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00515">README-SSE.txt:515</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="classllvm_1_1MCRegisterInfo_1_1DiffListIterator_html_abccd358b92366e5284e7e674e86b241f"><div class="ttname"><a href="classllvm_1_1MCRegisterInfo_1_1DiffListIterator.html#abccd358b92366e5284e7e674e86b241f">llvm::MCRegisterInfo::DiffListIterator::isValid</a></div><div class="ttdeci">bool isValid() const </div><div class="ttdoc">isValid - returns true if this iterator is not yet at the end. </div><div class="ttdef"><b>Definition:</b> <a href="MCRegisterInfo_8h_source.html#l00217">MCRegisterInfo.h:217</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html"><div class="ttname"><a href="classllvm_1_1MachineFunction.html">llvm::MachineFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00075">MachineFunction.h:75</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a6acda287e5c19ffb173b0bf8f1dd9c5e"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">llvm::MachineBasicBlock::getNumber</a></div><div class="ttdeci">int getNumber() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00615">MachineBasicBlock.h:615</a></div></div>
<div class="ttc" id="classllvm_1_1SparseSet_html_a1a4055576fc0e9afc07647fe6dae8b0d"><div class="ttname"><a href="classllvm_1_1SparseSet.html#a1a4055576fc0e9afc07647fe6dae8b0d">llvm::SparseSet::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const ValueT &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="SparseSet_8h_source.html#l00246">SparseSet.h:246</a></div></div>
<div class="ttc" id="structllvm_1_1MachineTraceMetrics_1_1InstrCycles_html_aecec30fb7bb36797ee2c01f1c977a4b9"><div class="ttname"><a href="structllvm_1_1MachineTraceMetrics_1_1InstrCycles.html#aecec30fb7bb36797ee2c01f1c977a4b9">llvm::MachineTraceMetrics::InstrCycles::Depth</a></div><div class="ttdeci">unsigned Depth</div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8h_source.html#l00226">MachineTraceMetrics.h:226</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_a76c3c7e3d4f11b4cfad37fc0449c9635"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a76c3c7e3d4f11b4cfad37fc0449c9635">llvm::MachineRegisterInfo::createVirtualRegister</a></div><div class="ttdeci">unsigned createVirtualRegister(const TargetRegisterClass *RegClass)</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00104">MachineRegisterInfo.cpp:104</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a7f0521fa2de44271fd4b909ea7351ef3"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a7f0521fa2de44271fd4b909ea7351ef3">llvm::MachineBasicBlock::getFirstTerminator</a></div><div class="ttdeci">iterator getFirstTerminator()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00172">MachineBasicBlock.cpp:172</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterInfo_html_ae62c5ea35b71f9020caa94340bc78f37"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">llvm::TargetRegisterInfo::isVirtualRegister</a></div><div class="ttdeci">static bool isVirtualRegister(unsigned Reg)</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00287">TargetRegisterInfo.h:287</a></div></div>
<div class="ttc" id="Debug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="classllvm_1_1po__iterator_html"><div class="ttname"><a href="classllvm_1_1po__iterator.html">llvm::po_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="PostOrderIterator_8h_source.html#l00091">PostOrderIterator.h:91</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_a641441a84a88e01223f3c091dfb50694"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#a641441a84a88e01223f3c091dfb50694">llvm::TargetInstrInfo::AnalyzeBranch</a></div><div class="ttdeci">virtual bool AnalyzeBranch(MachineBasicBlock &amp;MBB, MachineBasicBlock *&amp;TBB, MachineBasicBlock *&amp;FBB, SmallVectorImpl&lt; MachineOperand &gt; &amp;Cond, bool AllowModify=false) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00287">TargetInstrInfo.h:287</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html_a9b6dd0fc7a648a939e571246045b673e"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html#a9b6dd0fc7a648a939e571246045b673e">llvm::SmallPtrSet::insert</a></div><div class="ttdeci">bool insert(PtrType Ptr)</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00253">SmallPtrSet.h:253</a></div></div>
<div class="ttc" id="classllvm_1_1PrintRegUnit_html"><div class="ttname"><a href="classllvm_1_1PrintRegUnit.html">llvm::PrintRegUnit</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00903">TargetRegisterInfo.h:903</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_1_1Trace_html_ad83b8a074c0588065284737b688795a9"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics_1_1Trace.html#ad83b8a074c0588065284737b688795a9">llvm::MachineTraceMetrics::Trace::getCriticalPath</a></div><div class="ttdeci">unsigned getCriticalPath() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8h_source.html#l00272">MachineTraceMetrics.h:272</a></div></div>
<div class="ttc" id="namespacellvm_html_a9cabd1b101f002bb436c15c07afaf042"><div class="ttname"><a href="namespacellvm.html#a9cabd1b101f002bb436c15c07afaf042">llvm::EarlyIfConverterID</a></div><div class="ttdeci">char &amp; EarlyIfConverterID</div><div class="ttdef"><b>Definition:</b> <a href="EarlyIfConversion_8cpp_source.html#l00607">EarlyIfConversion.cpp:607</a></div></div>
<div class="ttc" id="classllvm_1_1MCRegUnitIterator_html"><div class="ttname"><a href="classllvm_1_1MCRegUnitIterator.html">llvm::MCRegUnitIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="MCRegisterInfo_8h_source.html#l00489">MCRegisterInfo.h:489</a></div></div>
<div class="ttc" id="classllvm_1_1MCSchedModel_html"><div class="ttname"><a href="classllvm_1_1MCSchedModel.html">llvm::MCSchedModel</a></div><div class="ttdef"><b>Definition:</b> <a href="MCSchedule_8h_source.html#l00131">MCSchedule.h:131</a></div></div>
<div class="ttc" id="classllvm_1_1DebugLoc_html"><div class="ttname"><a href="classllvm_1_1DebugLoc.html">llvm::DebugLoc</a></div><div class="ttdef"><b>Definition:</b> <a href="DebugLoc_8h_source.html#l00028">DebugLoc.h:28</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_1_1Ensemble_html"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics_1_1Ensemble.html">llvm::MachineTraceMetrics::Ensemble</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8h_source.html#l00294">MachineTraceMetrics.h:294</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_adae25a8cf267a802c72c3d6ad8c044e3"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#adae25a8cf267a802c72c3d6ad8c044e3">llvm::MachineBasicBlock::transferSuccessorsAndUpdatePHIs</a></div><div class="ttdeci">void transferSuccessorsAndUpdatePHIs(MachineBasicBlock *fromMBB)</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00592">MachineBasicBlock.cpp:592</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_abce62a681f245fc78059890e4ca83210"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#abce62a681f245fc78059890e4ca83210">llvm::TargetInstrInfo::RemoveBranch</a></div><div class="ttdeci">virtual unsigned RemoveBranch(MachineBasicBlock &amp;MBB) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00297">TargetInstrInfo.h:297</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_acbc921830578e2741be6549db716c0ce"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">llvm::MachineBasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00238">MachineBasicBlock.h:238</a></div></div>
<div class="ttc" id="Statistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_aea36f6665e4992da1874625d5f00e1c1"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#aea36f6665e4992da1874625d5f00e1c1">llvm::MachineInstr::isTerminator</a></div><div class="ttdeci">bool isTerminator(QueryType Type=AnyInBundle) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00366">MachineInstr.h:366</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00109">CommandLine.h:109</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_html"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics.html">llvm::MachineTraceMetrics</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8h_source.html#l00067">MachineTraceMetrics.h:67</a></div></div>
<div class="ttc" id="classllvm_1_1SparseSet_html_a33ce23f0739f7b36a3c462d7b6d9ae84"><div class="ttname"><a href="classllvm_1_1SparseSet.html#a33ce23f0739f7b36a3c462d7b6d9ae84">llvm::SparseSet::empty</a></div><div class="ttdeci">bool empty() const </div><div class="ttdef"><b>Definition:</b> <a href="SparseSet_8h_source.html#l00178">SparseSet.h:178</a></div></div>
<div class="ttc" id="X86DisassemblerDecoder_8h_html_a546839a5c4bcf9f9450967155f48de41"><div class="ttname"><a href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></div><div class="ttdeci">Reg</div><div class="ttdef"><b>Definition:</b> <a href="X86DisassemblerDecoder_8h_source.html#l00428">X86DisassemblerDecoder.h:428</a></div></div>
<div class="ttc" id="PassSupport_8h_html_a14724f1ccf528e73bb29bc9230737967"><div class="ttname"><a href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a></div><div class="ttdeci">#define INITIALIZE_PASS_DEPENDENCY(depName)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00167">PassSupport.h:167</a></div></div>
<div class="ttc" id="HexagonHardwareLoops_8cpp_html_ada7c1594a393ede3ce32602d64d7ddb2"><div class="ttname"><a href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a></div><div class="ttdeci">Hexagon Hardware Loops</div><div class="ttdef"><b>Definition:</b> <a href="HexagonHardwareLoops_8cpp_source.html#l00281">HexagonHardwareLoops.cpp:281</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ac421fe6513e43aedbba712e4a981744e"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ac421fe6513e43aedbba712e4a981744e">llvm::MachineBasicBlock::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l01000">MachineBasicBlock.cpp:1000</a></div></div>
<div class="ttc" id="MachineFunction_8h_html"><div class="ttname"><a href="MachineFunction_8h.html">MachineFunction.h</a></div></div>
<div class="ttc" id="classllvm_1_1BitVector_html_a35bbc237e4a675c5332103ac6e7dcce1"><div class="ttname"><a href="classllvm_1_1BitVector.html#a35bbc237e4a675c5332103ac6e7dcce1">llvm::BitVector::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdoc">clear - Clear all bits. </div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00205">BitVector.h:205</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunctionPass_html"><div class="ttname"><a href="classllvm_1_1MachineFunctionPass.html">llvm::MachineFunctionPass</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunctionPass_8h_source.html#l00032">MachineFunctionPass.h:32</a></div></div>
<div class="ttc" id="HexagonCopyToCombine_8cpp_html_a1d40004718218dbdf06b496766299101"><div class="ttname"><a href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a></div><div class="ttdeci">const HexagonInstrInfo * TII</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCopyToCombine_8cpp_source.html#l00115">HexagonCopyToCombine.cpp:115</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_ad70025709baab4e42d5d9d83023bc402"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#ad70025709baab4e42d5d9d83023bc402">llvm::MachineInstr::isPHI</a></div><div class="ttdeci">bool isPHI() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00648">MachineInstr.h:648</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a400eaca9881c8dcab97e9f42b1ab1815"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a400eaca9881c8dcab97e9f42b1ab1815">llvm::SmallVectorImpl::pop_back_val</a></div><div class="ttdeci">T LLVM_ATTRIBUTE_UNUSED_RESULT pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00430">SmallVector.h:430</a></div></div>
<div class="ttc" id="PassSupport_8h_html_a74ce8276b89067e806f67c45a6d92575"><div class="ttname"><a href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a></div><div class="ttdeci">#define INITIALIZE_PASS_END(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00172">PassSupport.h:172</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00035">APInt.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1SparseSet_html_a337ac3a574df74649d67cac686aaf580"><div class="ttname"><a href="classllvm_1_1SparseSet.html#a337ac3a574df74649d67cac686aaf580">llvm::SparseSet::end</a></div><div class="ttdeci">const_iterator end() const </div><div class="ttdef"><b>Definition:</b> <a href="SparseSet_8h_source.html#l00170">SparseSet.h:170</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_ab3904d3601dbe52865d5f2e33a06d80d"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#ab3904d3601dbe52865d5f2e33a06d80d">llvm::MachineRegisterInfo::getRegClass</a></div><div class="ttdeci">const TargetRegisterClass * getRegClass(unsigned Reg) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00342">MachineRegisterInfo.h:342</a></div></div>
<div class="ttc" id="BitVector_8h_html"><div class="ttname"><a href="BitVector_8h.html">BitVector.h</a></div></div>
<div class="ttc" id="namespacellvm_html_a8a736f0023b19d73f205d93fec7094a8"><div class="ttname"><a href="namespacellvm.html#a8a736f0023b19d73f205d93fec7094a8">llvm::po_begin</a></div><div class="ttdeci">po_iterator&lt; T &gt; po_begin(T G)</div><div class="ttdef"><b>Definition:</b> <a href="PostOrderIterator_8h_source.html#l00175">PostOrderIterator.h:175</a></div></div>
<div class="ttc" id="namespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00126">StackSlotColoring.cpp:126</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_aa37d95a1d7bc824da0c596d8334c4ceb"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#aa37d95a1d7bc824da0c596d8334c4ceb">llvm::MachineBasicBlock::empty</a></div><div class="ttdeci">bool empty() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00220">MachineBasicBlock.h:220</a></div></div>
<div class="ttc" id="namespacellvm_1_1CallingConv_html_a4f861731fc6dbfdccc05af5968d98974"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">llvm::CallingConv::ID</a></div><div class="ttdeci">ID</div><div class="ttdoc">LLVM Calling Convention Representation. </div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00026">CallingConv.h:26</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_html_a7d8979ca38421a46ac5e3f6c4d92cec5a104eba108012db621bd8bdd848e3ea11"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics.html#a7d8979ca38421a46ac5e3f6c4d92cec5a104eba108012db621bd8bdd848e3ea11">llvm::MachineTraceMetrics::TS_MinInstrCount</a></div><div class="ttdoc">Select the trace through a block that has the fewest instructions. </div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8h_source.html#l00336">MachineTraceMetrics.h:336</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_acb4d7c02992f3821f3e3432b6c65de49"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#acb4d7c02992f3821f3e3432b6c65de49">llvm::MachineBasicBlock::front</a></div><div class="ttdeci">MachineInstr &amp; front()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00222">MachineBasicBlock.h:222</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html_a2ced6343b8ad006a757059554bbf9f37"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html#a2ced6343b8ad006a757059554bbf9f37">llvm::SmallPtrSet::count</a></div><div class="ttdeci">bool count(PtrType Ptr) const </div><div class="ttdoc">count - Return true if the specified pointer is in the set. </div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00264">SmallPtrSet.h:264</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorBase_html_a8a8df4d85555c7954a95f86080cd3b64"><div class="ttname"><a href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">llvm::SmallVectorBase::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const </div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00056">SmallVector.h:56</a></div></div>
<div class="ttc" id="SmallPtrSet_8h_html"><div class="ttname"><a href="SmallPtrSet_8h.html">SmallPtrSet.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a1aa759ed68c66a8956b851d6de364e8d"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a1aa759ed68c66a8956b851d6de364e8d">llvm::MachineBasicBlock::livein_empty</a></div><div class="ttdeci">bool livein_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00317">MachineBasicBlock.h:317</a></div></div>
<div class="ttc" id="classllvm_1_1DomTreeNodeBase_html"><div class="ttname"><a href="classllvm_1_1DomTreeNodeBase.html">llvm::DomTreeNodeBase</a></div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00064">Dominators.h:64</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a></div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00031">ArrayRef.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1BitVector_html"><div class="ttname"><a href="classllvm_1_1BitVector.html">llvm::BitVector</a></div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00027">BitVector.h:27</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayRef_html_a76878250107ee24ef7339870bdda4bcf"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">llvm::ArrayRef::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdoc">size - Get the array size. </div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00109">ArrayRef.h:109</a></div></div>
<div class="ttc" id="classllvm_1_1DomTreeNodeBase_html_a96fd2f0087c41942dd2618ff6e1b8640"><div class="ttname"><a href="classllvm_1_1DomTreeNodeBase.html#a96fd2f0087c41942dd2618ff6e1b8640">llvm::DomTreeNodeBase::getBlock</a></div><div class="ttdeci">NodeT * getBlock() const </div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00082">Dominators.h:82</a></div></div>
<div class="ttc" id="classllvm_1_1SparseSet_html_a5a00f6afdfec487d3165d29e57452b32"><div class="ttname"><a href="classllvm_1_1SparseSet.html#a5a00f6afdfec487d3165d29e57452b32">llvm::SparseSet::erase</a></div><div class="ttdeci">iterator erase(iterator I)</div><div class="ttdef"><b>Definition:</b> <a href="SparseSet_8h_source.html#l00277">SparseSet.h:277</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_aabad9b72f6d20d3462efc34020d39f73"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">llvm::MachineInstr::getParent</a></div><div class="ttdeci">const MachineBasicBlock * getParent() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00119">MachineInstr.h:119</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html">llvm::TargetInstrInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00047">TargetInstrInfo.h:47</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ac51be7ff80fe8d6ae5e8c0acb194908a"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">llvm::MachineBasicBlock::iterator</a></div><div class="ttdeci">bundle_iterator&lt; MachineInstr, instr_iterator &gt; iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00212">MachineBasicBlock.h:212</a></div></div>
<div class="ttc" id="CommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00314">CommandLine.h:314</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_acd9e771a3296c6b24146955754620557"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#acd9e771a3296c6b24146955754620557">llvm::SmallVectorTemplateCommon&lt; T &gt;::back</a></div><div class="ttdeci">reference back()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00157">SmallVector.h:157</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00396">SmallVector.h:396</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a1570dd3a2568ba5e52073cdf6d904ee9"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a1570dd3a2568ba5e52073cdf6d904ee9">llvm::MachineBasicBlock::succ_empty</a></div><div class="ttdeci">bool succ_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00291">MachineBasicBlock.h:291</a></div></div>
<div class="ttc" id="TargetInstrInfo_8h_html"><div class="ttname"><a href="TargetInstrInfo_8h.html">TargetInstrInfo.h</a></div></div>
<div class="ttc" id="structllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00286">CommandLine.h:286</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html">llvm::MachineBasicBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00062">MachineBasicBlock.h:62</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00037">PassAnalysisSupport.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1BitVector_html_a5109693c2cdda2a4118e7d588b51bfa6"><div class="ttname"><a href="classllvm_1_1BitVector.html#a5109693c2cdda2a4118e7d588b51bfa6">llvm::BitVector::reset</a></div><div class="ttdeci">BitVector &amp; reset()</div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00275">BitVector.h:275</a></div></div>
<div class="ttc" id="classllvm_1_1SparseSet_html_ac5c4065b01268eb6764867041cd1d96c"><div class="ttname"><a href="classllvm_1_1SparseSet.html#ac5c4065b01268eb6764867041cd1d96c">llvm::SparseSet::setUniverse</a></div><div class="ttdeci">void setUniverse(unsigned U)</div><div class="ttdef"><b>Definition:</b> <a href="SparseSet_8h_source.html#l00150">SparseSet.h:150</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBranchProbabilityInfo_html"><div class="ttname"><a href="classllvm_1_1MachineBranchProbabilityInfo.html">llvm::MachineBranchProbabilityInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineBranchProbabilityInfo_8h_source.html#l00024">MachineBranchProbabilityInfo.h:24</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a6321b189ea8fd5058663f8a87d6c23e9"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a6321b189ea8fd5058663f8a87d6c23e9">llvm::MachineBasicBlock::succ_begin</a></div><div class="ttdeci">succ_iterator succ_begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00276">MachineBasicBlock.h:276</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_aabc149950316b323f9cdac2122ff0131"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#aabc149950316b323f9cdac2122ff0131">llvm::MachineBasicBlock::removeSuccessor</a></div><div class="ttdeci">void removeSuccessor(MachineBasicBlock *succ)</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00496">MachineBasicBlock.cpp:496</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html">llvm::TargetRegisterInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00219">TargetRegisterInfo.h:219</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_1_1Trace_html"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics_1_1Trace.html">llvm::MachineTraceMetrics::Trace</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8h_source.html#l00236">MachineTraceMetrics.h:236</a></div></div>
<div class="ttc" id="EarlyIfConversion_8cpp_html_ac04d3313bacb19fed62cc29d96a083ad"><div class="ttname"><a href="EarlyIfConversion_8cpp.html#ac04d3313bacb19fed62cc29d96a083ad">STATISTIC</a></div><div class="ttdeci">STATISTIC(NumDiamondsSeen,&quot;Number of diamonds&quot;)</div></div>
<div class="ttc" id="classllvm_1_1SparseSet_html_adf89ae764788137664ba65549e42b047"><div class="ttname"><a href="classllvm_1_1SparseSet.html#adf89ae764788137664ba65549e42b047">llvm::SparseSet::begin</a></div><div class="ttdeci">const_iterator begin() const </div><div class="ttdef"><b>Definition:</b> <a href="SparseSet_8h_source.html#l00169">SparseSet.h:169</a></div></div>
<div class="ttc" id="classllvm_1_1DomTreeNodeBase_html_afada34cd832fdc73959f84d4769ab837"><div class="ttname"><a href="classllvm_1_1DomTreeNodeBase.html#afada34cd832fdc73959f84d4769ab837">llvm::DomTreeNodeBase::getChildren</a></div><div class="ttdeci">const std::vector&lt; DomTreeNodeBase&lt; NodeT &gt; * &gt; &amp; getChildren() const </div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00084">Dominators.h:84</a></div></div>
<div class="ttc" id="ValueTracking_8cpp_html_a26e11e9c1ef55164b429eb9dc019f213"><div class="ttname"><a href="ValueTracking_8cpp.html#a26e11e9c1ef55164b429eb9dc019f213">MaxDepth</a></div><div class="ttdeci">const unsigned MaxDepth</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l00036">ValueTracking.cpp:36</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSetImpl_html_aa72472422d95c7052d62432ec279ff85"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#aa72472422d95c7052d62432ec279ff85">llvm::SmallPtrSetImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00077">SmallPtrSet.h:77</a></div></div>
<div class="ttc" id="classllvm_1_1TargetMachine_html_ac13d0f6f2c915757013b101ef6e8afbc"><div class="ttname"><a href="classllvm_1_1TargetMachine.html#ac13d0f6f2c915757013b101ef6e8afbc">llvm::TargetMachine::getInstrInfo</a></div><div class="ttdeci">virtual const TargetInstrInfo * getInstrInfo() const </div><div class="ttdef"><b>Definition:</b> <a href="Target_2TargetMachine_8h_source.html#l00119">Target/TargetMachine.h:119</a></div></div>
<div class="ttc" id="namespacellvm_1_1TargetOpcode_html_a348d4259b5fa6a8ecfe94e7ae512e1a8ae41f9ca68ba5e8b9613cea03652ebd72"><div class="ttname"><a href="namespacellvm_1_1TargetOpcode.html#a348d4259b5fa6a8ecfe94e7ae512e1a8ae41f9ca68ba5e8b9613cea03652ebd72">llvm::TargetOpcode::PHI</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetOpcodes_8h_source.html#l00026">TargetOpcodes.h:26</a></div></div>
<div class="ttc" id="EarlyIfConversion_8cpp_html_aa60b0637ed507d64df59ff2dca00eca1"><div class="ttname"><a href="EarlyIfConversion_8cpp.html#aa60b0637ed507d64df59ff2dca00eca1">adjCycles</a></div><div class="ttdeci">static unsigned adjCycles(unsigned Cyc, int Delta)</div><div class="ttdef"><b>Definition:</b> <a href="EarlyIfConversion_8cpp_source.html#l00666">EarlyIfConversion.cpp:666</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00236">SmallPtrSet.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1TargetMachine_html_a5af2fed99951774b6a14d30ec6e73792"><div class="ttname"><a href="classllvm_1_1TargetMachine.html#a5af2fed99951774b6a14d30ec6e73792">llvm::TargetMachine::getSubtarget</a></div><div class="ttdeci">const STC &amp; getSubtarget() const </div><div class="ttdef"><b>Definition:</b> <a href="Target_2TargetMachine_8h_source.html#l00132">Target/TargetMachine.h:132</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00880">SmallVector.h:880</a></div></div>
<div class="ttc" id="classllvm_1_1BitVector_html_a20b6ba858cb2bb6d8d7fa553025c1f61"><div class="ttname"><a href="classllvm_1_1BitVector.html#a20b6ba858cb2bb6d8d7fa553025c1f61">llvm::BitVector::test</a></div><div class="ttdeci">bool test(unsigned Idx) const </div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00337">BitVector.h:337</a></div></div>
<div class="ttc" id="classllvm_1_1MIOperands_html"><div class="ttname"><a href="classllvm_1_1MIOperands.html">llvm::MIOperands</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBundle_8h_source.html#l00212">MachineInstrBundle.h:212</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_a8afe41bda071ea77c815f7bd436fdd82"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#a8afe41bda071ea77c815f7bd436fdd82">llvm::TargetInstrInfo::InsertBranch</a></div><div class="ttdeci">virtual unsigned InsertBranch(MachineBasicBlock &amp;MBB, MachineBasicBlock *TBB, MachineBasicBlock *FBB, const SmallVectorImpl&lt; MachineOperand &gt; &amp;Cond, DebugLoc DL) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00311">TargetInstrInfo.h:311</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00101">Debug.cpp:101</a></div></div>
<div class="ttc" id="EarlyIfConversion_8cpp_html_a7d88cec049c13a279afdc1993fbf0976"><div class="ttname"><a href="EarlyIfConversion_8cpp.html#a7d88cec049c13a279afdc1993fbf0976">BlockInstrLimit</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; BlockInstrLimit(&quot;early-ifcvt-limit&quot;, cl::init(30), cl::Hidden, cl::desc(&quot;Maximum number of instructions per speculated block.&quot;))</div></div>
<div class="ttc" id="namespacestd_html_ab8424022895aee3e366fb9a32f2883cb"><div class="ttname"><a href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a></div><div class="ttdeci">void swap(llvm::BitVector &amp;LHS, llvm::BitVector &amp;RHS)</div><div class="ttdoc">Implement std::swap in terms of BitVector swap. </div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00591">BitVector.h:591</a></div></div>
<div class="ttc" id="EarlyIfConversion_8cpp_html_a9cca7487b5d111a7d80c339067795a61"><div class="ttname"><a href="EarlyIfConversion_8cpp.html#a9cca7487b5d111a7d80c339067795a61">INITIALIZE_PASS_BEGIN</a></div><div class="ttdeci">INITIALIZE_PASS_BEGIN(EarlyIfConverter,&quot;early-ifcvt&quot;,&quot;Early If Converter&quot;, false, false) INITIALIZE_PASS_END(EarlyIfConverter</div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_1_1Trace_html_a000540f3b70a111cf9511f866994f3f1"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics_1_1Trace.html#a000540f3b70a111cf9511f866994f3f1">llvm::MachineTraceMetrics::Trace::getResourceLength</a></div><div class="ttdeci">unsigned getResourceLength(ArrayRef&lt; const MachineBasicBlock * &gt; Extrablocks=None, ArrayRef&lt; const MCSchedClassDesc * &gt; ExtraInstrs=None) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l01203">MachineTraceMetrics.cpp:1203</a></div></div>
<div class="ttc" id="classllvm_1_1MCRegisterInfo_html_aaf3dc2763e3a8855709d186966654062"><div class="ttname"><a href="classllvm_1_1MCRegisterInfo.html#aaf3dc2763e3a8855709d186966654062">llvm::MCRegisterInfo::getNumRegUnits</a></div><div class="ttdeci">unsigned getNumRegUnits() const </div><div class="ttdoc">Return the number of (native) register units in the target. Register units are numbered from 0 to get...</div><div class="ttdef"><b>Definition:</b> <a href="MCRegisterInfo_8h_source.html#l00373">MCRegisterInfo.h:373</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html">llvm::MachineRegisterInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00030">MachineRegisterInfo.h:30</a></div></div>
<div class="ttc" id="classllvm_1_1TargetSubtargetInfo_html"><div class="ttname"><a href="classllvm_1_1TargetSubtargetInfo.html">llvm::TargetSubtargetInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetSubtargetInfo_8h_source.html#l00037">TargetSubtargetInfo.h:37</a></div></div>
<div class="ttc" id="MachineRegisterInfo_8h_html"><div class="ttname"><a href="MachineRegisterInfo_8h.html">MachineRegisterInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_1_1Trace_html_a1518eb55bbdcb45f54742e0ee5b610ee"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics_1_1Trace.html#a1518eb55bbdcb45f54742e0ee5b610ee">llvm::MachineTraceMetrics::Trace::getInstrCycles</a></div><div class="ttdeci">InstrCycles getInstrCycles(const MachineInstr *MI) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8h_source.html#l00277">MachineTraceMetrics.h:277</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html"><div class="ttname"><a href="classllvm_1_1MachineInstr.html">llvm::MachineInstr</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00050">MachineInstr.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterInfo_html_a055858b14215864ed367a8db6c19d6f6"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#a055858b14215864ed367a8db6c19d6f6">llvm::TargetRegisterInfo::isPhysicalRegister</a></div><div class="ttdeci">static bool isPhysicalRegister(unsigned Reg)</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00280">TargetRegisterInfo.h:280</a></div></div>
<div class="ttc" id="SparseSet_8h_html"><div class="ttname"><a href="SparseSet_8h.html">SparseSet.h</a></div></div>
<div class="ttc" id="classllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l01149">CommandLine.h:1149</a></div></div>
<div class="ttc" id="classllvm_1_1SparseSet_html"><div class="ttname"><a href="classllvm_1_1SparseSet.html">llvm::SparseSet&lt; unsigned &gt;</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_adf0023bdc4f05a7849c35b1c859580d8"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#adf0023bdc4f05a7849c35b1c859580d8">llvm::MachineBasicBlock::splice</a></div><div class="ttdeci">void splice(iterator Where, MachineBasicBlock *Other, iterator From)</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00539">MachineBasicBlock.h:539</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_ab4a6ca428289b667dd691a00e9f7e334"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">llvm::MachineFunction::getRegInfo</a></div><div class="ttdeci">MachineRegisterInfo &amp; getRegInfo()</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00167">MachineFunction.h:167</a></div></div>
<div class="ttc" id="namespacellvm_html_a31c465b4d456accd132c6dc332316b92"><div class="ttname"><a href="namespacellvm.html#a31c465b4d456accd132c6dc332316b92">llvm::po_end</a></div><div class="ttdeci">po_iterator&lt; T &gt; po_end(T G)</div><div class="ttdef"><b>Definition:</b> <a href="PostOrderIterator_8h_source.html#l00177">PostOrderIterator.h:177</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunctionPass_html_aa1eece37d175f86a6f4808c0c167f13b"><div class="ttname"><a href="classllvm_1_1MachineFunctionPass.html#aa1eece37d175f86a6f4808c0c167f13b">llvm::MachineFunctionPass::getAnalysisUsage</a></div><div class="ttdeci">virtual void getAnalysisUsage(AnalysisUsage &amp;AU) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineFunctionPass_8cpp_source.html#l00036">MachineFunctionPass.cpp:36</a></div></div>
<div class="ttc" id="TargetRegisterInfo_8h_html"><div class="ttname"><a href="TargetRegisterInfo_8h.html">TargetRegisterInfo.h</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_a6745c3bfdfc5b0643b078b96df2db252"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a6745c3bfdfc5b0643b078b96df2db252">llvm::MachineFunction::getTarget</a></div><div class="ttdeci">const TargetMachine &amp; getTarget() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00163">MachineFunction.h:163</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ab2d91e7bec944efcbc39d8e30644f111"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">llvm::MachineBasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00236">MachineBasicBlock.h:236</a></div></div>
<div class="ttc" id="classllvm_1_1TargetMachine_html_a70b47eca6a99c87b81f4c1b1455dc090"><div class="ttname"><a href="classllvm_1_1TargetMachine.html#a70b47eca6a99c87b81f4c1b1455dc090">llvm::TargetMachine::getRegisterInfo</a></div><div class="ttdeci">virtual const TargetRegisterInfo * getRegisterInfo() const </div><div class="ttdef"><b>Definition:</b> <a href="Target_2TargetMachine_8h_source.html#l00140">Target/TargetMachine.h:140</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_a5646521387b41101f06d6713b11ea209"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#a5646521387b41101f06d6713b11ea209">llvm::TargetInstrInfo::canInsertSelect</a></div><div class="ttdeci">virtual bool canInsertSelect(const MachineBasicBlock &amp;MBB, const SmallVectorImpl&lt; MachineOperand &gt; &amp;Cond, unsigned TrueReg, unsigned FalseReg, int &amp;CondCycles, int &amp;TrueCycles, int &amp;FalseCycles) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00404">TargetInstrInfo.h:404</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRegUnits_html"><div class="ttname"><a href="classllvm_1_1LiveRegUnits.html">llvm::LiveRegUnits</a></div><div class="ttdef"><b>Definition:</b> <a href="LiveRegUnits_8h_source.html#l00031">LiveRegUnits.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1SparseSet_html_aab146f4c3793a4a99649ce52b3badc15"><div class="ttname"><a href="classllvm_1_1SparseSet.html#aab146f4c3793a4a99649ce52b3badc15">llvm::SparseSet::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SparseSet_8h_source.html#l00189">SparseSet.h:189</a></div></div>
<div class="ttc" id="classllvm_1_1MachineRegisterInfo_html_abf69f92f1977440a4e443a26baeb73c0"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#abf69f92f1977440a4e443a26baeb73c0">llvm::MachineRegisterInfo::getVRegDef</a></div><div class="ttdeci">MachineInstr * getVRegDef(unsigned Reg) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00308">MachineRegisterInfo.cpp:308</a></div></div>
<div class="ttc" id="MachineBranchProbabilityInfo_8h_html"><div class="ttname"><a href="MachineBranchProbabilityInfo_8h.html">MachineBranchProbabilityInfo.h</a></div></div>
<div class="ttc" id="SetVector_8h_html"><div class="ttname"><a href="SetVector_8h.html">SetVector.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperandIteratorBase_html_af3802cbef7a57e8de316fe13fbed8e67"><div class="ttname"><a href="classllvm_1_1MachineOperandIteratorBase.html#af3802cbef7a57e8de316fe13fbed8e67">llvm::MachineOperandIteratorBase::isValid</a></div><div class="ttdeci">bool isValid() const </div><div class="ttdoc">isValid - Returns true until all the operands have been visited. </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBundle_8h_source.html#l00135">MachineInstrBundle.h:135</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_1_1Trace_html_a643e268ed3053ace245edee2cc1f9504"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics_1_1Trace.html#a643e268ed3053ace245edee2cc1f9504">llvm::MachineTraceMetrics::Trace::getPHIDepth</a></div><div class="ttdeci">unsigned getPHIDepth(const MachineInstr *PHI) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l01162">MachineTraceMetrics.cpp:1162</a></div></div>
<div class="ttc" id="PostOrderIterator_8h_html"><div class="ttname"><a href="PostOrderIterator_8h.html">PostOrderIterator.h</a></div></div>
<div class="ttc" id="MachineFunctionPass_8h_html"><div class="ttname"><a href="MachineFunctionPass_8h.html">MachineFunctionPass.h</a></div></div>
<div class="ttc" id="namespacellvm_html_a7923e3e207de8bc1d0d6a5091316ddde"><div class="ttname"><a href="namespacellvm.html#a7923e3e207de8bc1d0d6a5091316ddde">llvm::prior</a></div><div class="ttdeci">ItTy prior(ItTy it, Dist n)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00167">STLExtras.h:167</a></div></div>
<div class="ttc" id="Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00097">Debug.h:97</a></div></div>
<div class="ttc" id="MCModuleYAML_8cpp_html_a5e410df3f6875c5af4a7f2be284f235d"><div class="ttname"><a href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a></div><div class="ttdeci">const MCRegisterInfo &amp; MRI</div><div class="ttdef"><b>Definition:</b> <a href="MCModuleYAML_8cpp_source.html#l00056">MCModuleYAML.cpp:56</a></div></div>
<div class="ttc" id="raw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="MachineDominators_8h_html"><div class="ttname"><a href="MachineDominators_8h.html">MachineDominators.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_ae215c5c2aecd18c4e68a94187d9cdbf1"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ae215c5c2aecd18c4e68a94187d9cdbf1">llvm::MachineFunction::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8cpp_source.html#l00317">MachineFunction.cpp:317</a></div></div>
<div class="ttc" id="classllvm_1_1MachineLoopInfo_html"><div class="ttname"><a href="classllvm_1_1MachineLoopInfo.html">llvm::MachineLoopInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineLoopInfo_8h_source.html#l00072">MachineLoopInfo.h:72</a></div></div>
<div class="ttc" id="CodeGen_2Passes_8h_html"><div class="ttname"><a href="CodeGen_2Passes_8h.html">Passes.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a0fc7a349a4ab737607def6cb461791fd"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a0fc7a349a4ab737607def6cb461791fd">llvm::MachineBasicBlock::isLayoutSuccessor</a></div><div class="ttdeci">bool isLayoutSuccessor(const MachineBasicBlock *MBB) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00623">MachineBasicBlock.cpp:623</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a90cca76dd78688687e0d697679dbc799"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional ldr LCPI1_0 ldr ldr tst movne lsr ldr LCPI1_1 and r0 bx lr it saves an instruction and a register It might be profitable to cse MOVi16 if there are lots of bit immediates with the same bottom half Robert Muth started working on an alternate jump table implementation that does not put the tables in line in the text This is more like the llvm default jump table implementation This might be useful sometime Several revisions of patches are on the mailing beginning while CMP sets them like a subtract Therefore to be able to use CMN for comparisons other than the Z we ll need additional logic to reverse the conditionals associated with the comparison Perhaps a pseudo instruction for the with a post codegen pass to clean up and handle the condition codes See PR5694 for testcase Given the following on int B</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00592">Target/ARM/README.txt:592</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a3fcc360e6de146a370e8b0deecfa877f"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a3fcc360e6de146a370e8b0deecfa877f">llvm::MachineBasicBlock::addSuccessor</a></div><div class="ttdeci">void addSuccessor(MachineBasicBlock *succ, uint32_t weight=0)</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00482">MachineBasicBlock.cpp:482</a></div></div>
<div class="ttc" id="classllvm_1_1MachineDominatorTree_html"><div class="ttname"><a href="classllvm_1_1MachineDominatorTree.html">llvm::MachineDominatorTree</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineDominators_8h_source.html#l00040">MachineDominators.h:40</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ac9786455bc217ebd35377bb5d5ec8f20"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ac9786455bc217ebd35377bb5d5ec8f20">llvm::MachineBasicBlock::pred_size</a></div><div class="ttdeci">unsigned pred_size() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00272">MachineBasicBlock.h:272</a></div></div>
<div class="ttc" id="classllvm_1_1DomTreeNodeBase_html_a367ce5b70f05d0e7c30a544dab2312a9"><div class="ttname"><a href="classllvm_1_1DomTreeNodeBase.html#a367ce5b70f05d0e7c30a544dab2312a9">llvm::DomTreeNodeBase::getNumChildren</a></div><div class="ttdeci">size_t getNumChildren() const </div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00096">Dominators.h:96</a></div></div>
<div class="ttc" id="MachineTraceMetrics_8h_html"><div class="ttname"><a href="MachineTraceMetrics_8h.html">MachineTraceMetrics.h</a></div></div>
<div class="ttc" id="EarlyIfConversion_8cpp_html_a282d30f7304cc0c9ad4cd81b2ae3e53d"><div class="ttname"><a href="EarlyIfConversion_8cpp.html#a282d30f7304cc0c9ad4cd81b2ae3e53d">Converter</a></div><div class="ttdeci">early Early If Converter</div><div class="ttdef"><b>Definition:</b> <a href="EarlyIfConversion_8cpp_source.html#l00615">EarlyIfConversion.cpp:615</a></div></div>
<div class="ttc" id="classllvm_1_1MachineTraceMetrics_1_1Trace_html_af62e23d927072da14f64cf6f072a728b"><div class="ttname"><a href="classllvm_1_1MachineTraceMetrics_1_1Trace.html#af62e23d927072da14f64cf6f072a728b">llvm::MachineTraceMetrics::Trace::getInstrSlack</a></div><div class="ttdeci">unsigned getInstrSlack(const MachineInstr *MI) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l01153">MachineTraceMetrics.cpp:1153</a></div></div>
<div class="ttc" id="MachineLoopInfo_8h_html"><div class="ttname"><a href="MachineLoopInfo_8h.html">MachineLoopInfo.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 22:58:37 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
