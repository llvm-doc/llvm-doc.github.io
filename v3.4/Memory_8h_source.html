<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: Memory.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('Memory_8h_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Memory.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="Memory_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- llvm/Support/Memory.h - Memory Support --------------------*- C++ -*-===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// This file declares the llvm::sys::Memory class.</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#ifndef LLVM_SUPPORT_MEMORY_H</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#define LLVM_SUPPORT_MEMORY_H</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;llvm/Support/DataTypes.h&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="system__error_8h.html">llvm/Support/system_error.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="keyword">namespace </span>sys {</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">  /// This class encapsulates the notion of a memory block which has an address</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">  /// and a size. It is used by the Memory class (a friend) as the result of</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">  /// various memory allocation operations.</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">  /// @see Memory</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">  /// @brief Memory block abstraction.</span></div><div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="classllvm_1_1sys_1_1MemoryBlock.html">   29</a></span>&#160;<span class="comment"></span>  <span class="keyword">class </span><a class="code" href="classllvm_1_1sys_1_1MemoryBlock.html">MemoryBlock</a> {</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <span class="keyword">public</span>:</div><div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="classllvm_1_1sys_1_1MemoryBlock.html#a150b9badd10cd14c357329726e6ee0b5">   31</a></span>&#160;    <a class="code" href="classllvm_1_1sys_1_1MemoryBlock.html#a150b9badd10cd14c357329726e6ee0b5">MemoryBlock</a>() : Address(0), Size(0) { }</div><div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="classllvm_1_1sys_1_1MemoryBlock.html#a3ec2d4d9b3666caddc8438f8c606d007">   32</a></span>&#160;    <a class="code" href="classllvm_1_1sys_1_1MemoryBlock.html#a3ec2d4d9b3666caddc8438f8c606d007">MemoryBlock</a>(<span class="keywordtype">void</span> *addr, <span class="keywordtype">size_t</span> <a class="code" href="classllvm_1_1sys_1_1MemoryBlock.html#a5f95acd45968a93a9b1935a71dbbb344">size</a>) : Address(addr), Size(size) { }</div><div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="classllvm_1_1sys_1_1MemoryBlock.html#adf2f5548b7f0d0f6a86f2578581d8380">   33</a></span>&#160;    <span class="keywordtype">void</span> *<a class="code" href="classllvm_1_1sys_1_1MemoryBlock.html#adf2f5548b7f0d0f6a86f2578581d8380">base</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> Address; }</div><div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="classllvm_1_1sys_1_1MemoryBlock.html#a5f95acd45968a93a9b1935a71dbbb344">   34</a></span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="classllvm_1_1sys_1_1MemoryBlock.html#a5f95acd45968a93a9b1935a71dbbb344">size</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> Size; }</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <span class="keyword">private</span>:</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="keywordtype">void</span> *Address;    <span class="comment">///&lt; Address of first byte of memory area</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment"></span>    <span class="keywordtype">size_t</span> Size;      <span class="comment">///&lt; Size, in bytes of the memory area</span></div><div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="classllvm_1_1sys_1_1MemoryBlock.html#a2743bf0294172086e9384cd82f12c87a">   38</a></span>&#160;<span class="comment"></span>    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classllvm_1_1sys_1_1Memory.html">Memory</a>;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  };</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">  /// This class provides various memory handling functions that manipulate</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">  /// MemoryBlock instances.</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">  /// @since 1.4</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">  /// @brief An abstraction for memory operations.</span></div><div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="classllvm_1_1sys_1_1Memory.html">   45</a></span>&#160;<span class="comment"></span>  <span class="keyword">class </span><a class="code" href="classllvm_1_1sys_1_1Memory.html">Memory</a> {</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="keyword">public</span>:</div><div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="classllvm_1_1sys_1_1Memory.html#a548f317b89dc0bba738b89e5ce791395">   47</a></span>&#160;    <span class="keyword">enum</span> <a class="code" href="classllvm_1_1sys_1_1Memory.html#a548f317b89dc0bba738b89e5ce791395">ProtectionFlags</a> {</div><div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="classllvm_1_1sys_1_1Memory.html#a548f317b89dc0bba738b89e5ce791395a02cae455b05abf1bfb1de69095e66417">   48</a></span>&#160;      MF_READ  = 0x1000000,</div><div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="classllvm_1_1sys_1_1Memory.html#a548f317b89dc0bba738b89e5ce791395a83e34a8267f7acd88563e9d5a3ee7c25">   49</a></span>&#160;      MF_WRITE = 0x2000000,</div><div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="classllvm_1_1sys_1_1Memory.html#a548f317b89dc0bba738b89e5ce791395a72200d7026f0978efe86fc34f4cba76e">   50</a></span>&#160;      MF_EXEC  = 0x4000000</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    };</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">    /// This method allocates a block of memory that is suitable for loading</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">    /// dynamically generated code (e.g. JIT). An attempt to allocate</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">    /// \p NumBytes bytes of virtual memory is made.</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">    /// \p NearBlock may point to an existing allocation in which case</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">    /// an attempt is made to allocate more memory near the existing block.</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">    /// The actual allocated address is not guaranteed to be near the requested</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">    /// address.</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">    /// \p Flags is used to set the initial protection flags for the block</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">    /// of the memory.</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">    /// \p EC [out] returns an object describing any error that occurs.</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">    ///</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">    /// This method may allocate more than the number of bytes requested.  The</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">    /// actual number of bytes allocated is indicated in the returned</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">    /// MemoryBlock.</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">    ///</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">    /// The start of the allocated block must be aligned with the</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">    /// system allocation granularity (64K on Windows, page size on Linux).</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">    /// If the address following \p NearBlock is not so aligned, it will be</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">    /// rounded up to the next allocation granularity boundary.</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">    ///</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">    /// \r a non-null MemoryBlock if the function was successful, </span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">    /// otherwise a null MemoryBlock is with \p EC describing the error.</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">    ///</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">    /// @brief Allocate mapped memory.</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment"></span>    <span class="keyword">static</span> <a class="code" href="classllvm_1_1sys_1_1MemoryBlock.html">MemoryBlock</a> allocateMappedMemory(<span class="keywordtype">size_t</span> NumBytes,</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                                            <span class="keyword">const</span> <a class="code" href="classllvm_1_1sys_1_1MemoryBlock.html">MemoryBlock</a> *<span class="keyword">const</span> NearBlock,</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                                            <span class="keywordtype">unsigned</span> <a class="code" href="namespaceSIInstrFlags.html#a607b4b0952924970b77a9c6b42898b54">Flags</a>,</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                                            <a class="code" href="classllvm_1_1error__code.html">error_code</a> &amp;EC);</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">    /// This method releases a block of memory that was allocated with the</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">    /// allocateMappedMemory method. It should not be used to release any</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">    /// memory block allocated any other way.</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">    /// \p Block describes the memory to be released.</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">    ///</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">    /// \r error_success if the function was successful, or an error_code</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">    /// describing the failure if an error occurred.</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">    /// </span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">    /// @brief Release mapped memory.</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment"></span>    <span class="keyword">static</span> <a class="code" href="classllvm_1_1error__code.html">error_code</a> releaseMappedMemory(<a class="code" href="classllvm_1_1sys_1_1MemoryBlock.html">MemoryBlock</a> &amp;Block);</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">    /// This method sets the protection flags for a block of memory to the</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">    /// state specified by /p Flags.  The behavior is not specified if the</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">    /// memory was not allocated using the allocateMappedMemory method.</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">    /// \p Block describes the memory block to be protected.</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">    /// \p Flags specifies the new protection state to be assigned to the block.</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">    /// \p ErrMsg [out] returns a string describing any error that occured.</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">    ///</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">    /// If \p Flags is MF_WRITE, the actual behavior varies</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">    /// with the operating system (i.e. MF_READ | MF_WRITE on Windows) and the</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">    /// target architecture (i.e. MF_WRITE -&gt; MF_READ | MF_WRITE on i386).</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">    ///</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">    /// \r error_success if the function was successful, or an error_code</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">    /// describing the failure if an error occurred.</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">    ///</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">    /// @brief Set memory protection state.</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment"></span>    <span class="keyword">static</span> <a class="code" href="classllvm_1_1error__code.html">error_code</a> protectMappedMemory(<span class="keyword">const</span> <a class="code" href="classllvm_1_1sys_1_1MemoryBlock.html">MemoryBlock</a> &amp;Block,</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                                          <span class="keywordtype">unsigned</span> <a class="code" href="namespaceSIInstrFlags.html#a607b4b0952924970b77a9c6b42898b54">Flags</a>);</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">    /// This method allocates a block of Read/Write/Execute memory that is</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">    /// suitable for executing dynamically generated code (e.g. JIT). An</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">    /// attempt to allocate \p NumBytes bytes of virtual memory is made.</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">    /// \p NearBlock may point to an existing allocation in which case</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">    /// an attempt is made to allocate more memory near the existing block.</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">    ///</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">    /// On success, this returns a non-null memory block, otherwise it returns</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">    /// a null memory block and fills in *ErrMsg.</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">    ///</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">    /// @brief Allocate Read/Write/Execute memory.</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment"></span>    <span class="keyword">static</span> <a class="code" href="classllvm_1_1sys_1_1MemoryBlock.html">MemoryBlock</a> AllocateRWX(<span class="keywordtype">size_t</span> NumBytes,</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                                   <span class="keyword">const</span> <a class="code" href="classllvm_1_1sys_1_1MemoryBlock.html">MemoryBlock</a> *NearBlock,</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                                   std::string *ErrMsg = 0);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">    /// This method releases a block of Read/Write/Execute memory that was</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">    /// allocated with the AllocateRWX method. It should not be used to</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">    /// release any memory block allocated any other way.</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">    ///</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">    /// On success, this returns false, otherwise it returns true and fills</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">    /// in *ErrMsg.</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">    /// @brief Release Read/Write/Execute memory.</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment"></span>    <span class="keyword">static</span> <span class="keywordtype">bool</span> ReleaseRWX(<a class="code" href="classllvm_1_1sys_1_1MemoryBlock.html">MemoryBlock</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a3fd74718101152ceb7850d4a8bbe1391">block</a>, std::string *ErrMsg = 0);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">    /// InvalidateInstructionCache - Before the JIT can run a block of code</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">    /// that has been emitted it must invalidate the instruction cache on some</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">    /// platforms.</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment"></span>    <span class="keyword">static</span> <span class="keywordtype">void</span> InvalidateInstructionCache(<span class="keyword">const</span> <span class="keywordtype">void</span> *Addr, <span class="keywordtype">size_t</span> Len);</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">    /// setExecutable - Before the JIT can run a block of code, it has to be</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">    /// given read and executable privilege. Return true if it is already r-x</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">    /// or the system is able to change its previlege.</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment"></span>    <span class="keyword">static</span> <span class="keywordtype">bool</span> setExecutable(<a class="code" href="classllvm_1_1sys_1_1MemoryBlock.html">MemoryBlock</a> &amp;<a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, std::string *ErrMsg = 0);</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">    /// setWritable - When adding to a block of code, the JIT may need</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">    /// to mark a block of code as RW since the protections are on page</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">    /// boundaries, and the JIT internal allocations are not page aligned.</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment"></span>    <span class="keyword">static</span> <span class="keywordtype">bool</span> setWritable(<a class="code" href="classllvm_1_1sys_1_1MemoryBlock.html">MemoryBlock</a> &amp;<a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, std::string *ErrMsg = 0);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">    /// setRangeExecutable - Mark the page containing a range of addresses</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">    /// as executable.</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment"></span>    <span class="keyword">static</span> <span class="keywordtype">bool</span> setRangeExecutable(<span class="keyword">const</span> <span class="keywordtype">void</span> *Addr, <span class="keywordtype">size_t</span> Size);</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">    /// setRangeWritable - Mark the page containing a range of addresses</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">    /// as writable.</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment"></span>    <span class="keyword">static</span> <span class="keywordtype">bool</span> setRangeWritable(<span class="keyword">const</span> <span class="keywordtype">void</span> *Addr, <span class="keywordtype">size_t</span> Size);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  };</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;}</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;}</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="preprocessor">#endif</span></div><div class="ttc" id="namespaceSIInstrFlags_html_a607b4b0952924970b77a9c6b42898b54"><div class="ttname"><a href="namespaceSIInstrFlags.html#a607b4b0952924970b77a9c6b42898b54">SIInstrFlags::Flags</a></div><div class="ttdeci">Flags</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8h_source.html#l00140">SIInstrInfo.h:140</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="classllvm_1_1sys_1_1Memory_html"><div class="ttname"><a href="classllvm_1_1sys_1_1Memory.html">llvm::sys::Memory</a></div><div class="ttdoc">An abstraction for memory operations. </div><div class="ttdef"><b>Definition:</b> <a href="Memory_8h_source.html#l00045">Memory.h:45</a></div></div>
<div class="ttc" id="README__ALTIVEC_8txt_html_a3fd74718101152ceb7850d4a8bbe1391"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a3fd74718101152ceb7850d4a8bbe1391">block</a></div><div class="ttdeci">we get the following basic block</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00100">README_ALTIVEC.txt:100</a></div></div>
<div class="ttc" id="classllvm_1_1sys_1_1Memory_html_a548f317b89dc0bba738b89e5ce791395"><div class="ttname"><a href="classllvm_1_1sys_1_1Memory.html#a548f317b89dc0bba738b89e5ce791395">llvm::sys::Memory::ProtectionFlags</a></div><div class="ttdeci">ProtectionFlags</div><div class="ttdef"><b>Definition:</b> <a href="Memory_8h_source.html#l00047">Memory.h:47</a></div></div>
<div class="ttc" id="classllvm_1_1sys_1_1MemoryBlock_html_a3ec2d4d9b3666caddc8438f8c606d007"><div class="ttname"><a href="classllvm_1_1sys_1_1MemoryBlock.html#a3ec2d4d9b3666caddc8438f8c606d007">llvm::sys::MemoryBlock::MemoryBlock</a></div><div class="ttdeci">MemoryBlock(void *addr, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="Memory_8h_source.html#l00032">Memory.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1error__code_html"><div class="ttname"><a href="classllvm_1_1error__code.html">llvm::error_code</a></div><div class="ttdef"><b>Definition:</b> <a href="system__error_8h_source.html#l00726">system_error.h:726</a></div></div>
<div class="ttc" id="classllvm_1_1sys_1_1MemoryBlock_html_a5f95acd45968a93a9b1935a71dbbb344"><div class="ttname"><a href="classllvm_1_1sys_1_1MemoryBlock.html#a5f95acd45968a93a9b1935a71dbbb344">llvm::sys::MemoryBlock::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdef"><b>Definition:</b> <a href="Memory_8h_source.html#l00034">Memory.h:34</a></div></div>
<div class="ttc" id="classllvm_1_1sys_1_1MemoryBlock_html"><div class="ttname"><a href="classllvm_1_1sys_1_1MemoryBlock.html">llvm::sys::MemoryBlock</a></div><div class="ttdoc">Memory block abstraction. </div><div class="ttdef"><b>Definition:</b> <a href="Memory_8h_source.html#l00029">Memory.h:29</a></div></div>
<div class="ttc" id="classllvm_1_1sys_1_1MemoryBlock_html_adf2f5548b7f0d0f6a86f2578581d8380"><div class="ttname"><a href="classllvm_1_1sys_1_1MemoryBlock.html#adf2f5548b7f0d0f6a86f2578581d8380">llvm::sys::MemoryBlock::base</a></div><div class="ttdeci">void * base() const </div><div class="ttdef"><b>Definition:</b> <a href="Memory_8h_source.html#l00033">Memory.h:33</a></div></div>
<div class="ttc" id="Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="Target_2X86_2README_8txt_source.html#l00297">Target/X86/README.txt:297</a></div></div>
<div class="ttc" id="system__error_8h_html"><div class="ttname"><a href="system__error_8h.html">system_error.h</a></div></div>
<div class="ttc" id="classllvm_1_1sys_1_1MemoryBlock_html_a150b9badd10cd14c357329726e6ee0b5"><div class="ttname"><a href="classllvm_1_1sys_1_1MemoryBlock.html#a150b9badd10cd14c357329726e6ee0b5">llvm::sys::MemoryBlock::MemoryBlock</a></div><div class="ttdeci">MemoryBlock()</div><div class="ttdef"><b>Definition:</b> <a href="Memory_8h_source.html#l00031">Memory.h:31</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 23:00:04 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
