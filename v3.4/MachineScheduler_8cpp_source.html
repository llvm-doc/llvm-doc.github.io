<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: MachineScheduler.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('MachineScheduler_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">MachineScheduler.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="MachineScheduler_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- MachineScheduler.cpp - Machine Instruction Scheduler ---------------===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// MachineScheduler schedules machine instructions after phi elimination. It</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// preserves LiveIntervals so it can be invoked before register allocation.</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div><div class="line"><a name="l00015"></a><span class="lineno"><a class="line" href="MachineScheduler_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   15</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;misched&quot;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineScheduler_8h.html">llvm/CodeGen/MachineScheduler.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="OwningPtr_8h.html">llvm/ADT/OwningPtr.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PriorityQueue_8h.html">llvm/ADT/PriorityQueue.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AliasAnalysis_8h.html">llvm/Analysis/AliasAnalysis.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LiveIntervalAnalysis_8h.html">llvm/CodeGen/LiveIntervalAnalysis.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineDominators_8h.html">llvm/CodeGen/MachineDominators.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineLoopInfo_8h.html">llvm/CodeGen/MachineLoopInfo.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineRegisterInfo_8h.html">llvm/CodeGen/MachineRegisterInfo.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CodeGen_2Passes_8h.html">llvm/CodeGen/Passes.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="RegisterClassInfo_8h.html">llvm/CodeGen/RegisterClassInfo.h</a>&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ScheduleDFS_8h.html">llvm/CodeGen/ScheduleDFS.h</a>&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ScheduleHazardRecognizer_8h.html">llvm/CodeGen/ScheduleHazardRecognizer.h</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ErrorHandling_8h.html">llvm/Support/ErrorHandling.h</a>&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="GraphWriter_8h.html">llvm/Support/GraphWriter.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetInstrInfo_8h.html">llvm/Target/TargetInstrInfo.h</a>&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;queue&gt;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="namespacellvm.html#a0081c790ccede18428a2821d166ef6c7">ForceTopDown</a>(<span class="stringliteral">&quot;misched-topdown&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                           <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Force top-down list scheduling&quot;</span>));</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="namespacellvm.html#a5638cb35554a0468f4c7a860e9c1ab47">ForceBottomUp</a>(<span class="stringliteral">&quot;misched-bottomup&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;                            <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Force bottom-up list scheduling&quot;</span>));</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;}</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="MachineScheduler_8cpp.html#add2ddb9eae33f2f515e1c42238c48fb5">ViewMISchedDAGs</a>(<span class="stringliteral">&quot;view-misched-dags&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Pop up a window to show MISched dags after they are processed&quot;</span>));</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="MachineScheduler_8cpp.html#a549e985295c118aca3fc7af4a4c67037">MISchedCutoff</a>(<span class="stringliteral">&quot;misched-cutoff&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Stop scheduling after N instructions&quot;</span>), <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(~0U));</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> ViewMISchedDAGs = <span class="keyword">false</span>;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#endif // NDEBUG</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="MachineScheduler_8cpp.html#ad840f8a48c1b46e2ee7f721ed2df03a5">EnableRegPressure</a>(<span class="stringliteral">&quot;misched-regpressure&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Enable register pressure scheduling.&quot;</span>), <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>));</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="MachineScheduler_8cpp.html#a49932eb220bdb66c8f164f4e7163d59e">EnableCyclicPath</a>(<span class="stringliteral">&quot;misched-cyclicpath&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Enable cyclic critical path analysis.&quot;</span>), <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>));</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="MachineScheduler_8cpp.html#ad3d400fc4e500117eeeecae914d07c83">EnableLoadCluster</a>(<span class="stringliteral">&quot;misched-cluster&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Enable load clustering.&quot;</span>), <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>));</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">// Experimental heuristics</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="MachineScheduler_8cpp.html#ad4aa66841017d1379f7b46fd4f6e024a">EnableMacroFusion</a>(<span class="stringliteral">&quot;misched-fusion&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Enable scheduling for macro fusion.&quot;</span>), <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>));</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="MachineScheduler_8cpp.html#a5f19a4fcf5a639613c954e6da2dfaaf3">VerifyScheduling</a>(<span class="stringliteral">&quot;verify-misched&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Verify machine instrs before and after machine scheduling&quot;</span>));</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">// DAG subtrees must have at least this many nodes.</span></div><div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="MachineScheduler_8cpp.html#a20646b5e577c00ae6fc2912a4081f9d5">   73</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code" href="MachineScheduler_8cpp.html#a20646b5e577c00ae6fc2912a4081f9d5">MinSubtreeSize</a> = 8;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">// Pin the vtables to this file.</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="keywordtype">void</span> MachineSchedStrategy::anchor() {}</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="keywordtype">void</span> ScheduleDAGMutation::anchor() {}</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">// Machine Instruction Scheduling Pass and Registry</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="structllvm_1_1MachineSchedContext.html#ac8df817832c60969961bfb498488fc70">   83</a></span>&#160;<a class="code" href="structllvm_1_1MachineSchedContext.html#ac8df817832c60969961bfb498488fc70">MachineSchedContext::MachineSchedContext</a>():</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    MF(0), MLI(0), MDT(0), PassConfig(0), AA(0), LIS(0) {</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <a class="code" href="structllvm_1_1MachineSchedContext.html#a510c29d57e9f0343df48b7c58cb89228">RegClassInfo</a> = <span class="keyword">new</span> <a class="code" href="classllvm_1_1RegisterClassInfo.html">RegisterClassInfo</a>();</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;}</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="structllvm_1_1MachineSchedContext.html#ac66a5fd1e8991685c46cfc1652bfeeaf">   88</a></span>&#160;<a class="code" href="structllvm_1_1MachineSchedContext.html#ac66a5fd1e8991685c46cfc1652bfeeaf">MachineSchedContext::~MachineSchedContext</a>() {</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="keyword">delete</span> <a class="code" href="structllvm_1_1MachineSchedContext.html#a510c29d57e9f0343df48b7c58cb89228">RegClassInfo</a>;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;}</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="keyword">namespace </span>{<span class="comment"></span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">/// MachineScheduler runs after coalescing and before register allocation.</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment"></span><span class="keyword">class </span>MachineScheduler : <span class="keyword">public</span> <a class="code" href="structllvm_1_1MachineSchedContext.html">MachineSchedContext</a>,</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                         <span class="keyword">public</span> <a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a> {</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  MachineScheduler();</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU) <span class="keyword">const</span>;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> releaseMemory() {}</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">bool</span> runOnMachineFunction(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a>&amp;);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> print(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;O, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Module.html">Module</a>* = 0) <span class="keyword">const</span>;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>; <span class="comment">// Class identification, replacement for typeinfo</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="keyword">protected</span>:</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <a class="code" href="classllvm_1_1ScheduleDAGInstrs.html">ScheduleDAGInstrs</a> *createMachineScheduler();</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;};</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;} <span class="comment">// namespace</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">MachineScheduler::ID</a> = 0;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="namespacellvm.html#a4f3ce4ffd1eecf7a4fef2cce86560b1a">  116</a></span>&#160;<span class="keywordtype">char</span> &amp;<a class="code" href="namespacellvm.html#a4f3ce4ffd1eecf7a4fef2cce86560b1a">llvm::MachineSchedulerID</a> = <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">MachineScheduler::ID</a>;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<a class="code" href="MachineScheduler_8cpp.html#a44cdc406d58769851622dd322ee79ded">INITIALIZE_PASS_BEGIN</a>(MachineScheduler, <span class="stringliteral">&quot;misched&quot;</span>,</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                      <span class="stringliteral">&quot;Machine Instruction Scheduler&quot;</span>, <span class="keyword">false</span>, <span class="keyword">false</span>)</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<a class="code" href="PassSupport_8h.html#af0564bcdde2dd4400c670ca278c6035f">INITIALIZE_AG_DEPENDENCY</a>(<a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a>)</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1SlotIndexes.html">SlotIndexes</a>)</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1LiveIntervals.html">LiveIntervals</a>)</div><div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="MachineScheduler_8cpp.html#a127ed1a56215acb4c76dcbb1e8aad935">  123</a></span>&#160;<a class="code" href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a>(MachineScheduler, &quot;<a class="code" href="MachineScheduler_8cpp.html#acee825c0047d5eb911660fde77617a8c">misched</a>&quot;,</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                    &quot;<a class="code" href="COFFYAML_8cpp.html#a9dbc9c66cf3908e866b252feca6395a4">Machine</a> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> <a class="code" href="MachineScheduler_8cpp.html#a127ed1a56215acb4c76dcbb1e8aad935">Scheduler</a>&quot;, <a class="code" href="namespacefalse.html">false</a>, false)</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;MachineScheduler::MachineScheduler()</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;: <a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a>(<a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>) {</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <a class="code" href="namespacellvm.html#a9b59b13f97bee321b57c23f4c0cb3ac2">initializeMachineSchedulerPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;}</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="keywordtype">void</span> MachineScheduler::getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const </span>{</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#af11a6ebf7ab3c388234cb6d5378439a3">setPreservesCFG</a>();</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a053677ebc731b47a534f841b11b5cf0c">addRequiredID</a>(<a class="code" href="namespacellvm.html#a5a36a0d02a1629e4c1c8c6c587d01e5b">MachineDominatorsID</a>);</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a>&gt;();</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1AliasAnalysis.html">AliasAnalysis</a>&gt;();</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1TargetPassConfig.html">TargetPassConfig</a>&gt;();</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1SlotIndexes.html">SlotIndexes</a>&gt;();</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1SlotIndexes.html">SlotIndexes</a>&gt;();</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1LiveIntervals.html">LiveIntervals</a>&gt;();</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1LiveIntervals.html">LiveIntervals</a>&gt;();</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <a class="code" href="classllvm_1_1MachineFunctionPass.html#aa1eece37d175f86a6f4808c0c167f13b">MachineFunctionPass::getAnalysisUsage</a>(AU);</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;}</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<a class="code" href="classllvm_1_1MachinePassRegistry.html">MachinePassRegistry</a> <a class="code" href="classllvm_1_1MachineSchedRegistry.html#af84c5778cfc4dd0d69b39bb0f3ecd3ba">MachineSchedRegistry::Registry</a>;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">/// A dummy default scheduler factory indicates whether the scheduler</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">/// is overridden on the command line.</span></div><div class="line"><a name="l00148"></a><span class="lineno"><a class="line" href="MachineScheduler_8cpp.html#ac83b174a9cb37fb56517e8be0eda21ed">  148</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1ScheduleDAGInstrs.html">ScheduleDAGInstrs</a> *<a class="code" href="MachineScheduler_8cpp.html#ac83b174a9cb37fb56517e8be0eda21ed">useDefaultMachineSched</a>(<a class="code" href="structllvm_1_1MachineSchedContext.html">MachineSchedContext</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;}</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">/// MachineSchedOpt allows command line selection of the scheduler.</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt</a>&lt;<a class="code" href="classllvm_1_1MachineSchedRegistry.html#ae16b3e172fcc4489fb60b36ec662436f">MachineSchedRegistry::ScheduleDAGCtor</a>, <span class="keyword">false</span>,</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;               <a class="code" href="classllvm_1_1RegisterPassParser.html">RegisterPassParser&lt;MachineSchedRegistry&gt;</a> &gt;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<a class="code" href="MachineScheduler_8cpp.html#af75da6925072c8c7c9f5d762b149a254">MachineSchedOpt</a>(<span class="stringliteral">&quot;misched&quot;</span>,</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(&amp;<a class="code" href="MachineScheduler_8cpp.html#ac83b174a9cb37fb56517e8be0eda21ed">useDefaultMachineSched</a>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Machine instruction scheduler to use&quot;</span>));</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1MachineSchedRegistry.html">MachineSchedRegistry</a></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<a class="code" href="MachineScheduler_8cpp.html#ac447d226fe7e7b220a6616b2c21ce190">DefaultSchedRegistry</a>(<span class="stringliteral">&quot;default&quot;</span>, <span class="stringliteral">&quot;Use the target&#39;s default scheduler choice.&quot;</span>,</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                     <a class="code" href="MachineScheduler_8cpp.html#ac83b174a9cb37fb56517e8be0eda21ed">useDefaultMachineSched</a>);</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">/// Forward declare the standard machine scheduler. This will be used as the</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">/// default scheduler if the target does not set a default.</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1ScheduleDAGInstrs.html">ScheduleDAGInstrs</a> *<a class="code" href="MachineScheduler_8cpp.html#a3f6bcdf745803c78202f432e2e8c7bbe">createGenericSched</a>(<a class="code" href="structllvm_1_1MachineSchedContext.html">MachineSchedContext</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">/// Decrement this iterator until reaching the top or a non-debug instr.</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html#a654b11787ac7c4344084d98bea7cf626">MachineBasicBlock::const_iterator</a></div><div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="MachineScheduler_8cpp.html#a459acab05344caa836aa036f1829c928">  170</a></span>&#160;<a class="code" href="MachineScheduler_8cpp.html#a459acab05344caa836aa036f1829c928">priorNonDebug</a>(<a class="code" href="classllvm_1_1MachineBasicBlock.html#a654b11787ac7c4344084d98bea7cf626">MachineBasicBlock::const_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;              <a class="code" href="classllvm_1_1MachineBasicBlock.html#a654b11787ac7c4344084d98bea7cf626">MachineBasicBlock::const_iterator</a> Beg) {</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  assert(I != Beg &amp;&amp; <span class="stringliteral">&quot;reached the top of the region, cannot decrement&quot;</span>);</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="keywordflow">while</span> (--I != Beg) {</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">if</span> (!I-&gt;isDebugValue())</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  }</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;}</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">/// Non-const version.</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a></div><div class="line"><a name="l00182"></a><span class="lineno"><a class="line" href="MachineScheduler_8cpp.html#a24aad0e646c24622750ff2ee10b74109">  182</a></span>&#160;<a class="code" href="MachineScheduler_8cpp.html#a459acab05344caa836aa036f1829c928">priorNonDebug</a>(<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;              <a class="code" href="classllvm_1_1MachineBasicBlock.html#a654b11787ac7c4344084d98bea7cf626">MachineBasicBlock::const_iterator</a> Beg) {</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">const_cast&lt;</span><a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a>*<span class="keyword">&gt;</span>(</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    &amp;*<a class="code" href="MachineScheduler_8cpp.html#a459acab05344caa836aa036f1829c928">priorNonDebug</a>(<a class="code" href="classllvm_1_1MachineBasicBlock.html#a654b11787ac7c4344084d98bea7cf626">MachineBasicBlock::const_iterator</a>(I), Beg));</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;}</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">/// If this iterator is a debug value, increment until reaching the End or a</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">/// non-debug instruction.</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html#a654b11787ac7c4344084d98bea7cf626">MachineBasicBlock::const_iterator</a></div><div class="line"><a name="l00191"></a><span class="lineno"><a class="line" href="MachineScheduler_8cpp.html#a1c8a9363a3eb113ca42064a03636b135">  191</a></span>&#160;<a class="code" href="MachineScheduler_8cpp.html#a1c8a9363a3eb113ca42064a03636b135">nextIfDebug</a>(<a class="code" href="classllvm_1_1MachineBasicBlock.html#a654b11787ac7c4344084d98bea7cf626">MachineBasicBlock::const_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            <a class="code" href="classllvm_1_1MachineBasicBlock.html#a654b11787ac7c4344084d98bea7cf626">MachineBasicBlock::const_iterator</a> End) {</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <span class="keywordflow">for</span>(; I != End; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordflow">if</span> (!I-&gt;isDebugValue())</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  }</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;}</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">/// Non-const version.</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a></div><div class="line"><a name="l00202"></a><span class="lineno"><a class="line" href="MachineScheduler_8cpp.html#aa9432402dc18539818e3dae69e135ed4">  202</a></span>&#160;<a class="code" href="MachineScheduler_8cpp.html#a1c8a9363a3eb113ca42064a03636b135">nextIfDebug</a>(<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            <a class="code" href="classllvm_1_1MachineBasicBlock.html#a654b11787ac7c4344084d98bea7cf626">MachineBasicBlock::const_iterator</a> End) {</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="comment">// Cast the return value to nonconst MachineInstr, then cast to an</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="comment">// instr_iterator, which does not check for null, finally return a</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="comment">// bundle_iterator.</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html#a096d82c3c6f44b9a8e59d80d3851f616">MachineBasicBlock::instr_iterator</a>(</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    const_cast&lt;MachineInstr*&gt;(</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      &amp;*<a class="code" href="MachineScheduler_8cpp.html#a1c8a9363a3eb113ca42064a03636b135">nextIfDebug</a>(<a class="code" href="classllvm_1_1MachineBasicBlock.html#a654b11787ac7c4344084d98bea7cf626">MachineBasicBlock::const_iterator</a>(I), End)));</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;}</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">/// Instantiate a ScheduleDAGInstrs that will be owned by the caller.</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1ScheduleDAGInstrs.html">ScheduleDAGInstrs</a> *MachineScheduler::createMachineScheduler() {</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="comment">// Select the scheduler, or set the default.</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  MachineSchedRegistry::ScheduleDAGCtor Ctor = <a class="code" href="MachineScheduler_8cpp.html#af75da6925072c8c7c9f5d762b149a254">MachineSchedOpt</a>;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <span class="keywordflow">if</span> (Ctor != <a class="code" href="MachineScheduler_8cpp.html#ac83b174a9cb37fb56517e8be0eda21ed">useDefaultMachineSched</a>)</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">return</span> Ctor(<span class="keyword">this</span>);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="comment">// Get the default scheduler set by the target for this function.</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <a class="code" href="classllvm_1_1ScheduleDAGInstrs.html">ScheduleDAGInstrs</a> *<a class="code" href="MachineScheduler_8cpp.html#a127ed1a56215acb4c76dcbb1e8aad935">Scheduler</a> = <a class="code" href="structllvm_1_1MachineSchedContext.html#a3c04bf922b53ed32316b9725a99a5b2f">PassConfig</a>-&gt;<a class="code" href="classllvm_1_1TargetPassConfig.html#a9c774083f02cf837687aca448b4a86b7">createMachineScheduler</a>(<span class="keyword">this</span>);</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="keywordflow">if</span> (Scheduler)</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MachineScheduler_8cpp.html#a127ed1a56215acb4c76dcbb1e8aad935">Scheduler</a>;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="comment">// Default to GenericScheduler.</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="MachineScheduler_8cpp.html#a3f6bcdf745803c78202f432e2e8c7bbe">createGenericSched</a>(<span class="keyword">this</span>);</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;}</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">/// Top-level MachineScheduler pass driver.</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">/// Visit blocks in function order. Divide each block into scheduling regions</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">/// and visit them bottom-up. Visiting regions bottom-up is not required, but is</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment">/// consistent with the DAG builder, which traverses the interior of the</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">/// scheduling regions bottom-up.</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">/// This design avoids exposing scheduling boundaries to the DAG builder,</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment">/// simplifying the DAG builder&#39;s support for &quot;special&quot; target instructions.</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">/// At the same time the design allows target schedulers to operate across</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">/// scheduling boundaries, for example to bundle the boudary instructions</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">/// without reordering them. This creates complexity, because the target</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">/// scheduler must update the RegionBegin and RegionEnd positions cached by</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment">/// ScheduleDAGInstrs whenever adding or removing instructions. A much simpler</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment">/// design would be to split blocks at scheduling boundaries, but LLVM has a</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">/// general bias against block splitting purely for implementation simplicity.</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> MachineScheduler::runOnMachineFunction(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;mf) {</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Before MISsched:\n&quot;</span>; mf.<a class="code" href="classllvm_1_1MachineFunction.html#a2f8d8c8d5540be61a77ffdb228adda38">print</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()));</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="comment">// Initialize the context of the pass.</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <a class="code" href="structllvm_1_1MachineSchedContext.html#a07525563cb9c2a3cb6d64e3f885f038e">MF</a> = &amp;mf;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <a class="code" href="structllvm_1_1MachineSchedContext.html#a9334842806d97bee74af8752ebe19fbe">MLI</a> = &amp;getAnalysis&lt;MachineLoopInfo&gt;();</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <a class="code" href="structllvm_1_1MachineSchedContext.html#a433a18eaf42c2038f519428e580cbc53">MDT</a> = &amp;getAnalysis&lt;MachineDominatorTree&gt;();</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <a class="code" href="structllvm_1_1MachineSchedContext.html#a3c04bf922b53ed32316b9725a99a5b2f">PassConfig</a> = &amp;getAnalysis&lt;TargetPassConfig&gt;();</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <a class="code" href="structllvm_1_1MachineSchedContext.html#ae787a7185280ba24c2e667237d077fce">AA</a> = &amp;getAnalysis&lt;AliasAnalysis&gt;();</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <a class="code" href="structllvm_1_1MachineSchedContext.html#aa604d18378910f87649c38841cc1531c">LIS</a> = &amp;getAnalysis&lt;LiveIntervals&gt;();</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a> = MF-&gt;getTarget().getInstrInfo();</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="keywordflow">if</span> (VerifyScheduling) {</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(LIS-&gt;dump());</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    MF-&gt;verify(<span class="keyword">this</span>, <span class="stringliteral">&quot;Before machine scheduling.&quot;</span>);</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  }</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <a class="code" href="structllvm_1_1MachineSchedContext.html#a510c29d57e9f0343df48b7c58cb89228">RegClassInfo</a>-&gt;<a class="code" href="classllvm_1_1RegisterClassInfo.html#ac892fad5c3d0080c8cca7557659668d5">runOnMachineFunction</a>(*MF);</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="comment">// Instantiate the selected scheduler for this target, function, and</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="comment">// optimization level.</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <a class="code" href="classllvm_1_1OwningPtr.html">OwningPtr&lt;ScheduleDAGInstrs&gt;</a> <a class="code" href="MachineScheduler_8cpp.html#a127ed1a56215acb4c76dcbb1e8aad935">Scheduler</a>(createMachineScheduler());</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="comment">// Visit all machine basic blocks.</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="comment">// TODO: Visit blocks in global postorder or postorder within the bottom-up</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <span class="comment">// loop tree. Then we can optionally compute global RegPressure.</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">MachineFunction::iterator</a> MBB = MF-&gt;begin(), MBBEnd = MF-&gt;end();</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;       MBB != MBBEnd; ++MBB) {</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    Scheduler-&gt;<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#a2822215b7634783aece96ef695a72f1d">startBlock</a>(MBB);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="comment">// Break the block into scheduling regions [I, RegionEnd), and schedule each</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="comment">// region as soon as it is discovered. RegionEnd points the scheduling</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="comment">// boundary at the bottom of the region. The DAG does not include RegionEnd,</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="comment">// but the region does (i.e. the next RegionEnd is above the previous</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="comment">// RegionBegin). If the current block has no terminator then RegionEnd ==</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="comment">// MBB-&gt;end() for the bottom region.</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="comment">// The Scheduler may insert instructions during either schedule() or</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="comment">// exitRegion(), even for empty regions. So the local iterators &#39;I&#39; and</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="comment">// &#39;RegionEnd&#39; are invalid across these calls.</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordtype">unsigned</span> RemainingInstrs = MBB-&gt;size();</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordflow">for</span>(<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> RegionEnd = MBB-&gt;end();</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        RegionEnd != MBB-&gt;begin(); RegionEnd = Scheduler-&gt;<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#aeb9c314de586393b2cb695733eeafc6c">begin</a>()) {</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      <span class="comment">// Avoid decrementing RegionEnd for blocks with no terminator.</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      <span class="keywordflow">if</span> (RegionEnd != MBB-&gt;end()</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;          || TII-&gt;isSchedulingBoundary(<a class="code" href="namespacellvm.html#a7923e3e207de8bc1d0d6a5091316ddde">llvm::prior</a>(RegionEnd), MBB, *MF)) {</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        --RegionEnd;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <span class="comment">// Count the boundary instruction.</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        --RemainingInstrs;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      }</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <span class="comment">// The next region starts above the previous region. Look backward in the</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      <span class="comment">// instruction stream until we find the nearest boundary.</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      <span class="keywordtype">unsigned</span> NumRegionInstrs = 0;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = RegionEnd;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      <span class="keywordflow">for</span>(;I != MBB-&gt;begin(); --<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, --RemainingInstrs, ++NumRegionInstrs) {</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <span class="keywordflow">if</span> (TII-&gt;isSchedulingBoundary(<a class="code" href="namespacellvm.html#a7923e3e207de8bc1d0d6a5091316ddde">llvm::prior</a>(I), MBB, *MF))</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      }</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      <span class="comment">// Notify the scheduler of the region, even if we may skip scheduling</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="comment">// it. Perhaps it still needs to be bundled.</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      Scheduler-&gt;<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#ae8727d434d20639d563849891f5ca1e1">enterRegion</a>(MBB, I, RegionEnd, NumRegionInstrs);</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      <span class="comment">// Skip empty scheduling regions (0 or 1 schedulable instructions).</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      <span class="keywordflow">if</span> (I == RegionEnd || I == <a class="code" href="namespacellvm.html#a7923e3e207de8bc1d0d6a5091316ddde">llvm::prior</a>(RegionEnd)) {</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <span class="comment">// Close the current region. Bundle the terminator if needed.</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <span class="comment">// This invalidates &#39;RegionEnd&#39; and &#39;I&#39;.</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        Scheduler-&gt;<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#abc5a5c32ac78a99ee2633dbbeec20397">exitRegion</a>();</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      }</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;********** MI Scheduling **********\n&quot;</span>);</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; MF-&gt;getName()</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;:BB#&quot;</span> &lt;&lt; MBB-&gt;getNumber() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; MBB-&gt;getName()</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;\n  From: &quot;</span> &lt;&lt; *I &lt;&lt; <span class="stringliteral">&quot;    To: &quot;</span>;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            <span class="keywordflow">if</span> (RegionEnd != MBB-&gt;end()) <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; *RegionEnd;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            <span class="keywordflow">else</span> <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;End&quot;</span>;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; RegionInstrs: &quot;</span> &lt;&lt; NumRegionInstrs</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            &lt;&lt; <span class="stringliteral">&quot; Remaining: &quot;</span> &lt;&lt; RemainingInstrs &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      <span class="comment">// Schedule a region: possibly reorder instructions.</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      <span class="comment">// This invalidates &#39;RegionEnd&#39; and &#39;I&#39;.</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      Scheduler-&gt;<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#ac0cecc651db330128468e08794794f5c">schedule</a>();</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      <span class="comment">// Close the current region.</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      Scheduler-&gt;<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#abc5a5c32ac78a99ee2633dbbeec20397">exitRegion</a>();</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      <span class="comment">// Scheduling has invalidated the current iterator &#39;I&#39;. Ask the</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      <span class="comment">// scheduler for the top of it&#39;s scheduled region.</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      RegionEnd = Scheduler-&gt;<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#aeb9c314de586393b2cb695733eeafc6c">begin</a>();</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    }</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    assert(RemainingInstrs == 0 &amp;&amp; <span class="stringliteral">&quot;Instruction count mismatch!&quot;</span>);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    Scheduler-&gt;<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#a1f9a4461e2c9ac06b97f55554f836d66">finishBlock</a>();</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  }</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  Scheduler-&gt;<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#a7c30ee6cdef3f4784c192654dcb9bab0">finalizeSchedule</a>();</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(LIS-&gt;dump());</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <span class="keywordflow">if</span> (VerifyScheduling)</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    MF-&gt;verify(<span class="keyword">this</span>, <span class="stringliteral">&quot;After machine scheduling.&quot;</span>);</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;}</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="keywordtype">void</span> MachineScheduler::print(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;O, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Module.html">Module</a>* m)<span class="keyword"> const </span>{</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <span class="comment">// unimplemented</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;}</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="preprocessor">#if !defined(NDEBUG) || defined(LLVM_ENABLE_DUMP)</span></div><div class="line"><a name="l00352"></a><span class="lineno"><a class="line" href="classllvm_1_1ReadyQueue.html#a405dbd4aee72ff1d89057949f6b083e7">  352</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1ReadyQueue.html#a405dbd4aee72ff1d89057949f6b083e7">ReadyQueue::dump</a>() {</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a> &lt;&lt; <span class="stringliteral">&quot;: &quot;</span>;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Queue.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; Queue[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;NodeNum &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;}</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment">// ScheduleDAGMI - Base class for MachineInstr scheduling with LiveIntervals</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment">// preservation.</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div><div class="line"><a name="l00365"></a><span class="lineno"><a class="line" href="classllvm_1_1ScheduleDAGMI.html#a57905825e83244d442c3475c063b837d">  365</a></span>&#160;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a57905825e83244d442c3475c063b837d">ScheduleDAGMI::~ScheduleDAGMI</a>() {</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <span class="keyword">delete</span> DFSResult;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <a class="code" href="namespacellvm.html#a557372a0f9217d7171352952ce9d75bc">DeleteContainerPointers</a>(Mutations);</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <span class="keyword">delete</span> SchedImpl;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;}</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div><div class="line"><a name="l00371"></a><span class="lineno"><a class="line" href="classllvm_1_1ScheduleDAGMI.html#a4fb766f0c271c845c86a325167a9e7e1">  371</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1ScheduleDAGMI.html#a4fb766f0c271c845c86a325167a9e7e1">ScheduleDAGMI::canAddEdge</a>(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SuccSU, <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *PredSU) {</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <span class="keywordflow">return</span> SuccSU == &amp;ExitSU || !Topo.IsReachable(PredSU, SuccSU);</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;}</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div><div class="line"><a name="l00375"></a><span class="lineno"><a class="line" href="classllvm_1_1ScheduleDAGMI.html#a9335e1e703206d27da6ed63614b64a0c">  375</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1ScheduleDAGMI.html#a9335e1e703206d27da6ed63614b64a0c">ScheduleDAGMI::addEdge</a>(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SuccSU, <span class="keyword">const</span> <a class="code" href="classllvm_1_1SDep.html">SDep</a> &amp;PredDep) {</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <span class="keywordflow">if</span> (SuccSU != &amp;ExitSU) {</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="comment">// Do not use WillCreateCycle, it assumes SD scheduling.</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="comment">// If Pred is reachable from Succ, then the edge creates a cycle.</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="keywordflow">if</span> (Topo.IsReachable(PredDep.<a class="code" href="classllvm_1_1SDep.html#a0d3253aa89a8b7441f8401f1b6609811">getSUnit</a>(), SuccSU))</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    Topo.AddPred(SuccSU, PredDep.<a class="code" href="classllvm_1_1SDep.html#a0d3253aa89a8b7441f8401f1b6609811">getSUnit</a>());</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  }</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  SuccSU-&gt;<a class="code" href="classllvm_1_1SUnit.html#af92bf49ed4846e026e68c380d74d7b15">addPred</a>(PredDep, <span class="comment">/*Required=*/</span>!PredDep.<a class="code" href="classllvm_1_1SDep.html#a750cdf657d876c82731a45e2235eb2b5">isArtificial</a>());</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <span class="comment">// Return true regardless of whether a new edge needed to be inserted.</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;}</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment">/// ReleaseSucc - Decrement the NumPredsLeft count of a successor. When</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">/// NumPredsLeft reaches zero, release the successor node.</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">/// FIXME: Adjust SuccSU height based on MinLatency.</span></div><div class="line"><a name="l00392"></a><span class="lineno"><a class="line" href="classllvm_1_1ScheduleDAGMI.html#a90ffd918ef80c711049758b2064e15c4">  392</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1ScheduleDAGMI.html#a90ffd918ef80c711049758b2064e15c4">ScheduleDAGMI::releaseSucc</a>(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU, <a class="code" href="classllvm_1_1SDep.html">SDep</a> *SuccEdge) {</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SuccSU = SuccEdge-&gt;<a class="code" href="classllvm_1_1SDep.html#a0d3253aa89a8b7441f8401f1b6609811">getSUnit</a>();</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <span class="keywordflow">if</span> (SuccEdge-&gt;<a class="code" href="classllvm_1_1SDep.html#ac087b1f634a3e5738ed056c68dbd1b00">isWeak</a>()) {</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    --SuccSU-&gt;<a class="code" href="classllvm_1_1SUnit.html#ab9e02660290b9557b547b57870133467">WeakPredsLeft</a>;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordflow">if</span> (SuccEdge-&gt;<a class="code" href="classllvm_1_1SDep.html#aaf085bca6626d2cc320bd9ba7af55f34">isCluster</a>())</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      NextClusterSucc = SuccSU;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  }</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="keywordflow">if</span> (SuccSU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a94f78042fbba3ea4cd1004353daa46aa">NumPredsLeft</a> == 0) {</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;*** Scheduling failed! ***\n&quot;</span>;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    SuccSU-&gt;<a class="code" href="classllvm_1_1SUnit.html#ac28b1882619718b4c6efb97899b845a1">dump</a>(<span class="keyword">this</span>);</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; has been released too many times!\n&quot;</span>;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(0);</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  }</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  --SuccSU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a94f78042fbba3ea4cd1004353daa46aa">NumPredsLeft</a>;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <span class="keywordflow">if</span> (SuccSU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a94f78042fbba3ea4cd1004353daa46aa">NumPredsLeft</a> == 0 &amp;&amp; SuccSU != &amp;ExitSU)</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    SchedImpl-&gt;releaseTopNode(SuccSU);</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;}</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="comment">/// releaseSuccessors - Call releaseSucc on each of SU&#39;s successors.</span></div><div class="line"><a name="l00415"></a><span class="lineno"><a class="line" href="classllvm_1_1ScheduleDAGMI.html#acf56d667066b39177a3c0f134d759d98">  415</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1ScheduleDAGMI.html#acf56d667066b39177a3c0f134d759d98">ScheduleDAGMI::releaseSuccessors</a>(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU) {</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classT.html">SUnit::succ_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#aab4a86c51e6b126c9c6ef58dbb574431">Succs</a>.begin(), E = SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#aab4a86c51e6b126c9c6ef58dbb574431">Succs</a>.end();</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    releaseSucc(SU, &amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  }</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;}</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment">/// ReleasePred - Decrement the NumSuccsLeft count of a predecessor. When</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment">/// NumSuccsLeft reaches zero, release the predecessor node.</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment">/// FIXME: Adjust PredSU height based on MinLatency.</span></div><div class="line"><a name="l00426"></a><span class="lineno"><a class="line" href="classllvm_1_1ScheduleDAGMI.html#a1c51776d4e512a7f24d5b5d601c31016">  426</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1ScheduleDAGMI.html#a1c51776d4e512a7f24d5b5d601c31016">ScheduleDAGMI::releasePred</a>(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU, <a class="code" href="classllvm_1_1SDep.html">SDep</a> *PredEdge) {</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *PredSU = PredEdge-&gt;<a class="code" href="classllvm_1_1SDep.html#a0d3253aa89a8b7441f8401f1b6609811">getSUnit</a>();</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <span class="keywordflow">if</span> (PredEdge-&gt;<a class="code" href="classllvm_1_1SDep.html#ac087b1f634a3e5738ed056c68dbd1b00">isWeak</a>()) {</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    --PredSU-&gt;<a class="code" href="classllvm_1_1SUnit.html#ae75d620ee809eaf50970a833f4a3ace9">WeakSuccsLeft</a>;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keywordflow">if</span> (PredEdge-&gt;<a class="code" href="classllvm_1_1SDep.html#aaf085bca6626d2cc320bd9ba7af55f34">isCluster</a>())</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      NextClusterPred = PredSU;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  }</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <span class="keywordflow">if</span> (PredSU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a40c2dfbd170941dd4d20ee9b60c9d49d">NumSuccsLeft</a> == 0) {</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;*** Scheduling failed! ***\n&quot;</span>;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    PredSU-&gt;<a class="code" href="classllvm_1_1SUnit.html#ac28b1882619718b4c6efb97899b845a1">dump</a>(<span class="keyword">this</span>);</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; has been released too many times!\n&quot;</span>;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(0);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  }</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  --PredSU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a40c2dfbd170941dd4d20ee9b60c9d49d">NumSuccsLeft</a>;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <span class="keywordflow">if</span> (PredSU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a40c2dfbd170941dd4d20ee9b60c9d49d">NumSuccsLeft</a> == 0 &amp;&amp; PredSU != &amp;EntrySU)</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    SchedImpl-&gt;releaseBottomNode(PredSU);</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;}</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment">/// releasePredecessors - Call releasePred on each of SU&#39;s predecessors.</span></div><div class="line"><a name="l00449"></a><span class="lineno"><a class="line" href="classllvm_1_1ScheduleDAGMI.html#a25f9975b56fe38f7a8bb4d10b7f6f5ea">  449</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1ScheduleDAGMI.html#a25f9975b56fe38f7a8bb4d10b7f6f5ea">ScheduleDAGMI::releasePredecessors</a>(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU) {</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classT.html">SUnit::pred_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#ae2b43854b542de66eec6475adc48f56c">Preds</a>.begin(), E = SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#ae2b43854b542de66eec6475adc48f56c">Preds</a>.end();</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    releasePred(SU, &amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  }</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;}</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment">/// This is normally called from the main scheduler loop but may also be invoked</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="comment">/// by the scheduling strategy to perform additional code motion.</span></div><div class="line"><a name="l00458"></a><span class="lineno"><a class="line" href="classllvm_1_1ScheduleDAGMI.html#a2209b15a069023499cc665b373e67703">  458</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1ScheduleDAGMI.html#a2209b15a069023499cc665b373e67703">ScheduleDAGMI::moveInstruction</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>,</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                                    <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> InsertPos) {</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <span class="comment">// Advance RegionBegin if the first instruction moves down.</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <span class="keywordflow">if</span> (&amp;*RegionBegin == MI)</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    ++RegionBegin;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <span class="comment">// Update the instruction stream.</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;splice(InsertPos, <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, MI);</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <span class="comment">// Update LiveIntervals</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  <a class="code" href="structllvm_1_1MachineSchedContext.html#aa604d18378910f87649c38841cc1531c">LIS</a>-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a2d45135c7d66356b77f681aa542d86ba">handleMove</a>(MI, <span class="comment">/*UpdateFlags=*/</span><span class="keyword">true</span>);</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  <span class="comment">// Recede RegionBegin if an instruction moves above the first.</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  <span class="keywordflow">if</span> (RegionBegin == InsertPos)</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    RegionBegin = <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;}</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;</div><div class="line"><a name="l00475"></a><span class="lineno"><a class="line" href="classllvm_1_1ScheduleDAGMI.html#a569fc4139bec0217794e9f830d6ba852">  475</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1ScheduleDAGMI.html#a569fc4139bec0217794e9f830d6ba852">ScheduleDAGMI::checkSchedLimit</a>() {</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <span class="keywordflow">if</span> (NumInstrsScheduled == MISchedCutoff &amp;&amp; MISchedCutoff != ~0U) {</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    CurrentTop = CurrentBottom;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  }</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  ++NumInstrsScheduled;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;}</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment">/// enterRegion - Called back from MachineScheduler::runOnMachineFunction after</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment">/// crossing a scheduling boundary. [begin, end) includes all instructions in</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment">/// the region, including the boundary itself and single-instruction regions</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment">/// that don&#39;t get scheduled.</span></div><div class="line"><a name="l00490"></a><span class="lineno"><a class="line" href="classllvm_1_1ScheduleDAGMI.html#a32fd11ce8d65ee3a4ba5f9381ad77627">  490</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1ScheduleDAGMI.html#a32fd11ce8d65ee3a4ba5f9381ad77627">ScheduleDAGMI::enterRegion</a>(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="Target_2X86_2README_8txt.html#ac9423a63151469d95755528cceb322fb">bb</a>,</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                                <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> <a class="code" href="namespacellvm_1_1sys_1_1path.html#a33706aab89e700b8f79e1fa6f4f0e3ee">begin</a>,</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                                <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> <a class="code" href="namespacellvm_1_1sys_1_1path.html#a214ec2f04ffd92636ed4bd2717607a1d">end</a>,</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                                <span class="keywordtype">unsigned</span> regioninstrs)</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;{</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#ae8727d434d20639d563849891f5ca1e1">ScheduleDAGInstrs::enterRegion</a>(bb, begin, end, regioninstrs);</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  <span class="comment">// For convenience remember the end of the liveness region.</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  LiveRegionEnd =</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    (RegionEnd == bb-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>()) ? RegionEnd : <a class="code" href="namespacellvm.html#aa1704159f75e6eacd595962ea6d93ffe">llvm::next</a>(RegionEnd);</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  SUPressureDiffs.clear();</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  SchedImpl-&gt;initPolicy(begin, end, regioninstrs);</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  ShouldTrackPressure = SchedImpl-&gt;shouldTrackPressure();</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;}</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">// Setup the register pressure trackers for the top scheduled top and bottom</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment">// scheduled regions.</span></div><div class="line"><a name="l00510"></a><span class="lineno"><a class="line" href="classllvm_1_1ScheduleDAGMI.html#a0b87efc2e79f5e2a29d80940540941cd">  510</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1ScheduleDAGMI.html#a0b87efc2e79f5e2a29d80940540941cd">ScheduleDAGMI::initRegPressure</a>() {</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  TopRPTracker.init(&amp;<a class="code" href="structllvm_1_1MachineSchedContext.html#a07525563cb9c2a3cb6d64e3f885f038e">MF</a>, <a class="code" href="structllvm_1_1MachineSchedContext.html#a510c29d57e9f0343df48b7c58cb89228">RegClassInfo</a>, <a class="code" href="structllvm_1_1MachineSchedContext.html#aa604d18378910f87649c38841cc1531c">LIS</a>, <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, RegionBegin);</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  BotRPTracker.init(&amp;<a class="code" href="structllvm_1_1MachineSchedContext.html#a07525563cb9c2a3cb6d64e3f885f038e">MF</a>, <a class="code" href="structllvm_1_1MachineSchedContext.html#a510c29d57e9f0343df48b7c58cb89228">RegClassInfo</a>, <a class="code" href="structllvm_1_1MachineSchedContext.html#aa604d18378910f87649c38841cc1531c">LIS</a>, <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, LiveRegionEnd);</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <span class="comment">// Close the RPTracker to finalize live ins.</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  RPTracker.closeRegion();</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(RPTracker.dump());</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  <span class="comment">// Initialize the live ins and live outs.</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  TopRPTracker.addLiveRegs(RPTracker.getPressure().LiveInRegs);</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  BotRPTracker.addLiveRegs(RPTracker.getPressure().LiveOutRegs);</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <span class="comment">// Close one end of the tracker so we can call</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <span class="comment">// getMaxUpward/DownwardPressureDelta before advancing across any</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <span class="comment">// instructions. This converts currently live regs into live ins/outs.</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  TopRPTracker.closeTop();</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  BotRPTracker.closeBottom();</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  BotRPTracker.initLiveThru(RPTracker);</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  <span class="keywordflow">if</span> (!BotRPTracker.getLiveThru().empty()) {</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    TopRPTracker.initLiveThru(BotRPTracker.getLiveThru());</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Live Thru: &quot;</span>;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;          <a class="code" href="namespacellvm.html#a2999577391397335deda506011ee500e">dumpRegSetPressure</a>(BotRPTracker.getLiveThru(), TRI));</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  };</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  <span class="comment">// For each live out vreg reduce the pressure change associated with other</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  <span class="comment">// uses of the same vreg below the live-out reaching def.</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  updatePressureDiffs(RPTracker.getPressure().LiveOutRegs);</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  <span class="comment">// Account for liveness generated by the region boundary.</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  <span class="keywordflow">if</span> (LiveRegionEnd != RegionEnd) {</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 8&gt;</a> LiveUses;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    BotRPTracker.recede(&amp;LiveUses);</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    updatePressureDiffs(LiveUses);</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  }</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  assert(BotRPTracker.getPos() == RegionEnd &amp;&amp; <span class="stringliteral">&quot;Can&#39;t find the region bottom&quot;</span>);</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  <span class="comment">// Cache the list of excess pressure sets in this region. This will also track</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  <span class="comment">// the max pressure in the scheduled code for these sets.</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  RegionCriticalPSets.clear();</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  <span class="keyword">const</span> std::vector&lt;unsigned&gt; &amp;<a class="code" href="structllvm_1_1RegionPressure.html">RegionPressure</a> =</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    RPTracker.getPressure().<a class="code" href="structllvm_1_1RegisterPressure.html#af444f3c79d12bb654d6477d629cbe7c0">MaxSetPressure</a>;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = RegionPressure.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <span class="keywordtype">unsigned</span> Limit = <a class="code" href="structllvm_1_1MachineSchedContext.html#a510c29d57e9f0343df48b7c58cb89228">RegClassInfo</a>-&gt;<a class="code" href="classllvm_1_1RegisterClassInfo.html#a25ac0ae59d10e7b19c2f57fe6ff52d74">getRegPressureSetLimit</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="keywordflow">if</span> (RegionPressure[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] &gt; Limit) {</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; TRI-&gt;getRegPressureSetName(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;            &lt;&lt; <span class="stringliteral">&quot; Limit &quot;</span> &lt;&lt; Limit</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;            &lt;&lt; <span class="stringliteral">&quot; Actual &quot;</span> &lt;&lt; RegionPressure[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      RegionCriticalPSets.push_back(<a class="code" href="classllvm_1_1PressureChange.html">PressureChange</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    }</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  }</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Excess PSets: &quot;</span>;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = RegionCriticalPSets.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; TRI-&gt;getRegPressureSetName(</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;            RegionCriticalPSets[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].getPSet()) &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;}</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1ScheduleDAGMI.html#af29d8bd5550c406522ddae701d2783e4">ScheduleDAGMI::</a></div><div class="line"><a name="l00571"></a><span class="lineno"><a class="line" href="classllvm_1_1ScheduleDAGMI.html#af29d8bd5550c406522ddae701d2783e4">  571</a></span>&#160;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#af29d8bd5550c406522ddae701d2783e4">updateScheduledPressure</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU,</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                        <span class="keyword">const</span> std::vector&lt;unsigned&gt; &amp;NewMaxPressure) {</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1PressureDiff.html">PressureDiff</a> &amp;PDiff = getPressureDiff(SU);</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  <span class="keywordtype">unsigned</span> CritIdx = 0, CritEnd = RegionCriticalPSets.size();</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PressureChange.html">PressureDiff::const_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = PDiff.<a class="code" href="classllvm_1_1PressureDiff.html#ad22e63bbd4e84ba7a3ed4462d34270b6">begin</a>(), E = PDiff.<a class="code" href="classllvm_1_1PressureDiff.html#a91f8b1b3a2ac9324165199a7189c2ad8">end</a>();</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isValid())</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getPSet();</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="keywordflow">while</span> (CritIdx != CritEnd &amp;&amp; RegionCriticalPSets[CritIdx].getPSet() &lt; ID)</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;      ++CritIdx;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keywordflow">if</span> (CritIdx != CritEnd &amp;&amp; RegionCriticalPSets[CritIdx].getPSet() == ID) {</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>)NewMaxPressure[ID] &gt; RegionCriticalPSets[CritIdx].getUnitInc()</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;          &amp;&amp; NewMaxPressure[ID] &lt;= INT16_MAX)</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        RegionCriticalPSets[CritIdx].setUnitInc(NewMaxPressure[ID]);</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    }</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordtype">unsigned</span> Limit = <a class="code" href="structllvm_1_1MachineSchedContext.html#a510c29d57e9f0343df48b7c58cb89228">RegClassInfo</a>-&gt;<a class="code" href="classllvm_1_1RegisterClassInfo.html#a25ac0ae59d10e7b19c2f57fe6ff52d74">getRegPressureSetLimit</a>(ID);</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="keywordflow">if</span> (NewMaxPressure[ID] &gt;= Limit - 2) {</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> &lt;&lt; TRI-&gt;getRegPressureSetName(ID) &lt;&lt; <span class="stringliteral">&quot;: &quot;</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;            &lt;&lt; NewMaxPressure[<a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>] &lt;&lt; <span class="stringliteral">&quot; &gt; &quot;</span> &lt;&lt; Limit &lt;&lt; <span class="stringliteral">&quot;(+ &quot;</span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;            &lt;&lt; BotRPTracker.getLiveThru()[<a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>] &lt;&lt; <span class="stringliteral">&quot; livethru)\n&quot;</span>);</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    }</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  }</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;}</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="comment">/// Update the PressureDiff array for liveness after scheduling this</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="comment">/// instruction.</span></div><div class="line"><a name="l00598"></a><span class="lineno"><a class="line" href="classllvm_1_1ScheduleDAGMI.html#a0b1fed03bdce807ab9c8d690b01503ce">  598</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1ScheduleDAGMI.html#a0b1fed03bdce807ab9c8d690b01503ce">ScheduleDAGMI::updatePressureDiffs</a>(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> LiveUses) {</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> LUIdx = 0, LUEnd = LiveUses.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>(); LUIdx != LUEnd; ++LUIdx) {<span class="comment"></span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="comment">    /// FIXME: Currently assuming single-use physregs.</span></div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="comment"></span>    <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = LiveUses[LUIdx];</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  LiveReg: &quot;</span> &lt;&lt; <a class="code" href="classllvm_1_1PrintVRegOrUnit.html">PrintVRegOrUnit</a>(Reg, TRI) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="keywordflow">if</span> (!TRI-&gt;isVirtualRegister(Reg))</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <span class="comment">// This may be called before CurrentBottom has been initialized. However,</span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="comment">// BotRPTracker must have a valid position. We want the value live into the</span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="comment">// instruction or live out of the block, so ask for the previous</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <span class="comment">// instruction&#39;s live-out.</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;LI = <a class="code" href="structllvm_1_1MachineSchedContext.html#aa604d18378910f87649c38841cc1531c">LIS</a>-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a70cf6a51b043dc9f8ae683c266d5d9c4">getInterval</a>(Reg);</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <a class="code" href="classllvm_1_1VNInfo.html">VNInfo</a> *VNI;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html#a654b11787ac7c4344084d98bea7cf626">MachineBasicBlock::const_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> =</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      <a class="code" href="MachineScheduler_8cpp.html#a1c8a9363a3eb113ca42064a03636b135">nextIfDebug</a>(BotRPTracker.getPos(), <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;end());</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="keywordflow">if</span> (I == <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;end())</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      VNI = LI.<a class="code" href="classllvm_1_1LiveRange.html#a435a93196594094643aae944c4ec6cb0">getVNInfoBefore</a>(<a class="code" href="structllvm_1_1MachineSchedContext.html#aa604d18378910f87649c38841cc1531c">LIS</a>-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a4ed1e0b18a1fa4219caac5e38e99286e">getMBBEndIdx</a>(<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>));</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;      <a class="code" href="classllvm_1_1LiveQueryResult.html">LiveQueryResult</a> LRQ = LI.<a class="code" href="classllvm_1_1LiveRange.html#acd0853cbfd87e166b73d3e24502f2346">Query</a>(<a class="code" href="structllvm_1_1MachineSchedContext.html#aa604d18378910f87649c38841cc1531c">LIS</a>-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a6bbcfa1e19c409a905ffc0356c060bd4">getInstructionIndex</a>(I));</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      VNI = LRQ.<a class="code" href="classllvm_1_1LiveQueryResult.html#a04fcce5cd33d3ffe16309a908387a982">valueIn</a>();</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    }</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <span class="comment">// RegisterPressureTracker guarantees that readsReg is true for LiveUses.</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    assert(VNI &amp;&amp; <span class="stringliteral">&quot;No live value at use.&quot;</span>);</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SparseMultiSet.html#a5a05b79eda02945cb09d6202624f7fa4">VReg2UseMap::iterator</a></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;           UI = VRegUses.find(Reg); UI != VRegUses.end(); ++UI) {</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;      <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU = UI-&gt;SU;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  UpdateRegP: SU(&quot;</span> &lt;&lt; SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; <span class="stringliteral">&quot;) &quot;</span></div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;            &lt;&lt; *SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#adb119d63d924841b0523d67dfdd1bf61">getInstr</a>());</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      <span class="comment">// If this use comes before the reaching def, it cannot be a last use, so</span></div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;      <span class="comment">// descrease its pressure change.</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;      <span class="keywordflow">if</span> (!SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a8c201d7a769bda1cd75d8d6788123068">isScheduled</a> &amp;&amp; SU != &amp;ExitSU) {</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        <a class="code" href="classllvm_1_1LiveQueryResult.html">LiveQueryResult</a> LRQ</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;          = LI.<a class="code" href="classllvm_1_1LiveRange.html#acd0853cbfd87e166b73d3e24502f2346">Query</a>(<a class="code" href="structllvm_1_1MachineSchedContext.html#aa604d18378910f87649c38841cc1531c">LIS</a>-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a6bbcfa1e19c409a905ffc0356c060bd4">getInstructionIndex</a>(SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#adb119d63d924841b0523d67dfdd1bf61">getInstr</a>()));</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        <span class="keywordflow">if</span> (LRQ.<a class="code" href="classllvm_1_1LiveQueryResult.html#a04fcce5cd33d3ffe16309a908387a982">valueIn</a>() == VNI)</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;          getPressureDiff(SU).addPressureChange(Reg, <span class="keyword">true</span>, &amp;<a class="code" href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a>);</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;      }</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    }</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  }</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;}</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="comment">/// schedule - Called back from MachineScheduler::runOnMachineFunction</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="comment">/// after setting up the current scheduling region. [RegionBegin, RegionEnd)</span></div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="comment">/// only includes instructions that have DAG nodes, not scheduling boundaries.</span></div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="comment">/// This is a skeletal driver, with all the functionality pushed into helpers,</span></div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;<span class="comment">/// so that it can be easilly extended by experimental schedulers. Generally,</span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<span class="comment">/// implementing MachineSchedStrategy should be sufficient to implement a new</span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;<span class="comment">/// scheduling algorithm. However, if a scheduler further subclasses</span></div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="comment">/// ScheduleDAGMI then it will want to override this virtual method in order to</span></div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="comment">/// update any specialized state.</span></div><div class="line"><a name="l00649"></a><span class="lineno"><a class="line" href="classllvm_1_1ScheduleDAGMI.html#aa6e8e1fb5423b9a8bb7bc35a60fb9aab">  649</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1ScheduleDAGMI.html#aa6e8e1fb5423b9a8bb7bc35a60fb9aab">ScheduleDAGMI::schedule</a>() {</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  buildDAGWithRegPressure();</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  Topo.InitDAGTopologicalSorting();</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  postprocessDAG();</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;SUnit*, 8&gt;</a> TopRoots, BotRoots;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  findRootsAndBiasEdges(TopRoots, BotRoots);</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  <span class="comment">// Initialize the strategy before modifying the DAG.</span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  <span class="comment">// This may initialize a DFSResult to be used for queue priority.</span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  SchedImpl-&gt;initialize(<span class="keyword">this</span>);</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> su = 0, e = SUnits.size(); su != e; ++su)</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;          SUnits[su].dumpAll(<span class="keyword">this</span>));</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  <span class="keywordflow">if</span> (ViewMISchedDAGs) viewGraph();</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;  <span class="comment">// Initialize ready queues now that the DAG and priority data are finalized.</span></div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  initQueues(TopRoots, BotRoots);</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  <span class="keywordtype">bool</span> IsTopNode = <span class="keyword">false</span>;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU = SchedImpl-&gt;pickNode(IsTopNode)) {</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    assert(!SU-&gt;isScheduled &amp;&amp; <span class="stringliteral">&quot;Node already scheduled&quot;</span>);</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <span class="keywordflow">if</span> (!checkSchedLimit())</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    scheduleMI(SU, IsTopNode);</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    updateQueues(SU, IsTopNode);</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  }</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  assert(CurrentTop == CurrentBottom &amp;&amp; <span class="stringliteral">&quot;Nonempty unscheduled zone.&quot;</span>);</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  placeDebugValues();</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>({</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;      <span class="keywordtype">unsigned</span> BBNum = <a class="code" href="namespacellvm_1_1sys_1_1path.html#a33706aab89e700b8f79e1fa6f4f0e3ee">begin</a>()-&gt;getParent()-&gt;getNumber();</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;*** Final schedule for BB#&quot;</span> &lt;&lt; BBNum &lt;&lt; <span class="stringliteral">&quot; ***\n&quot;</span>;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;      dumpSchedule();</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    });</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;}</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;<span class="comment">/// Build the DAG and setup three register pressure trackers.</span></div><div class="line"><a name="l00693"></a><span class="lineno"><a class="line" href="classllvm_1_1ScheduleDAGMI.html#a15d1b308cc91aa994c8512e3104c2f2e">  693</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1ScheduleDAGMI.html#a15d1b308cc91aa994c8512e3104c2f2e">ScheduleDAGMI::buildDAGWithRegPressure</a>() {</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  <span class="keywordflow">if</span> (!ShouldTrackPressure) {</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    RPTracker.reset();</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    RegionCriticalPSets.clear();</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    buildSchedGraph(<a class="code" href="structllvm_1_1MachineSchedContext.html#ae787a7185280ba24c2e667237d077fce">AA</a>);</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  }</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <span class="comment">// Initialize the register pressure tracker used by buildSchedGraph.</span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  RPTracker.init(&amp;<a class="code" href="structllvm_1_1MachineSchedContext.html#a07525563cb9c2a3cb6d64e3f885f038e">MF</a>, <a class="code" href="structllvm_1_1MachineSchedContext.html#a510c29d57e9f0343df48b7c58cb89228">RegClassInfo</a>, <a class="code" href="structllvm_1_1MachineSchedContext.html#aa604d18378910f87649c38841cc1531c">LIS</a>, <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, LiveRegionEnd,</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;                 <span class="comment">/*TrackUntiedDefs=*/</span><span class="keyword">true</span>);</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;  <span class="comment">// Account for liveness generate by the region boundary.</span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  <span class="keywordflow">if</span> (LiveRegionEnd != RegionEnd)</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    RPTracker.recede();</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  <span class="comment">// Build the DAG, and compute current register pressure.</span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  buildSchedGraph(<a class="code" href="structllvm_1_1MachineSchedContext.html#ae787a7185280ba24c2e667237d077fce">AA</a>, &amp;RPTracker, &amp;SUPressureDiffs);</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  <span class="comment">// Initialize top/bottom trackers after computing region pressure.</span></div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  initRegPressure();</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;}</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="comment">/// Apply each ScheduleDAGMutation step in order.</span></div><div class="line"><a name="l00717"></a><span class="lineno"><a class="line" href="classllvm_1_1ScheduleDAGMI.html#a0f5aea0b37a8ee856681544e5b97326d">  717</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1ScheduleDAGMI.html#a0f5aea0b37a8ee856681544e5b97326d">ScheduleDAGMI::postprocessDAG</a>() {</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Mutations.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    Mutations[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;apply(<span class="keyword">this</span>);</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  }</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;}</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;</div><div class="line"><a name="l00723"></a><span class="lineno"><a class="line" href="classllvm_1_1ScheduleDAGMI.html#a4dd56692d6f6e4cc2e122585f40cc064">  723</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1ScheduleDAGMI.html#a4dd56692d6f6e4cc2e122585f40cc064">ScheduleDAGMI::computeDFSResult</a>() {</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <span class="keywordflow">if</span> (!DFSResult)</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    DFSResult = <span class="keyword">new</span> <a class="code" href="classllvm_1_1SchedDFSResult.html">SchedDFSResult</a>(<span class="comment">/*BottomU*/</span><span class="keyword">true</span>, <a class="code" href="MachineScheduler_8cpp.html#a20646b5e577c00ae6fc2912a4081f9d5">MinSubtreeSize</a>);</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  DFSResult-&gt;clear();</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  ScheduledTrees.clear();</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  DFSResult-&gt;resize(SUnits.size());</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  DFSResult-&gt;compute(SUnits);</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  ScheduledTrees.resize(DFSResult-&gt;getNumSubtrees());</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;}</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;</div><div class="line"><a name="l00733"></a><span class="lineno"><a class="line" href="classllvm_1_1ScheduleDAGMI.html#a6d0a0b4903e8d4d12c98b0f43fe83878">  733</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1ScheduleDAGMI.html#a6d0a0b4903e8d4d12c98b0f43fe83878">ScheduleDAGMI::findRootsAndBiasEdges</a>(<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;SUnit*&gt;</a> &amp;TopRoots,</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;                                          <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;SUnit*&gt;</a> &amp;BotRoots) {</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  <span class="keywordflow">for</span> (std::vector&lt;SUnit&gt;::iterator</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;         <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = SUnits.begin(), E = SUnits.end(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU = &amp;(*I);</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    assert(!SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a72eaa4fec43227da59cd1eaef8cfdb76">isBoundaryNode</a>() &amp;&amp; <span class="stringliteral">&quot;Boundary node should not be in SUnits&quot;</span>);</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="comment">// Order predecessors so DFSResult follows the critical path.</span></div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a4aa947b755365817fa095e581752a8ae">biasCriticalPath</a>();</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="comment">// A SUnit is ready to top schedule if it has no predecessors.</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;NumPredsLeft)</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;      TopRoots.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(SU);</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="comment">// A SUnit is ready to bottom schedule if it has no successors.</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;NumSuccsLeft)</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;      BotRoots.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(SU);</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  }</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;  ExitSU.biasCriticalPath();</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;}</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment">/// Compute the max cyclic critical path through the DAG. The scheduling DAG</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="comment">/// only provides the critical path for single block loops. To handle loops that</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="comment">/// span blocks, we could use the vreg path latencies provided by</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="comment">/// MachineTraceMetrics instead. However, MachineTraceMetrics is not currently</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="comment">/// available for use in the scheduler.</span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="comment">/// The cyclic path estimation identifies a def-use pair that crosses the back</span></div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="comment">/// edge and considers the depth and height of the nodes. For example, consider</span></div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="comment">/// the following instruction sequence where each instruction has unit latency</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="comment">/// and defines an epomymous virtual register:</span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="comment">/// a-&gt;b(a,c)-&gt;c(b)-&gt;d(c)-&gt;exit</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="comment">/// The cyclic critical path is a two cycles: b-&gt;c-&gt;b</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;<span class="comment">/// The acyclic critical path is four cycles: a-&gt;b-&gt;c-&gt;d-&gt;exit</span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="comment">/// LiveOutHeight = height(c) = len(c-&gt;d-&gt;exit) = 2</span></div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="comment">/// LiveOutDepth = depth(c) + 1 = len(a-&gt;b-&gt;c) + 1 = 3</span></div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="comment">/// LiveInHeight = height(b) + 1 = len(b-&gt;c-&gt;d-&gt;exit) + 1 = 4</span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="comment">/// LiveInDepth = depth(b) = len(a-&gt;b) = 1</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="comment">/// LiveOutDepth - LiveInDepth = 3 - 1 = 2</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="comment">/// LiveInHeight - LiveOutHeight = 4 - 2 = 2</span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="comment">/// CyclicCriticalPath = min(2, 2) = 2</span></div><div class="line"><a name="l00776"></a><span class="lineno"><a class="line" href="classllvm_1_1ScheduleDAGMI.html#a5ac888a46c343b2075fc84f2297be17a">  776</a></span>&#160;<span class="comment"></span><span class="keywordtype">unsigned</span> <a class="code" href="classllvm_1_1ScheduleDAGMI.html#a5ac888a46c343b2075fc84f2297be17a">ScheduleDAGMI::computeCyclicCriticalPath</a>() {</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  <span class="comment">// This only applies to single block loop.</span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;isSuccessor(<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  <span class="keywordtype">unsigned</span> MaxCyclicLatency = 0;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  <span class="comment">// Visit each live out vreg def to find def/use pairs that cross iterations.</span></div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> LiveOuts = RPTracker.getPressure().LiveOutRegs;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Attribute.html">ArrayRef&lt;unsigned&gt;::iterator</a> RI = LiveOuts.<a class="code" href="classllvm_1_1ArrayRef.html#a836367b39ed630bf14db99923c22740e">begin</a>(), RE = LiveOuts.<a class="code" href="classllvm_1_1ArrayRef.html#a38ed8cc3c342ad6910e8c869d3e2b9cf">end</a>();</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;       RI != RE; ++RI) {</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a> = *RI;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <span class="keywordflow">if</span> (!TRI-&gt;isVirtualRegister(Reg))</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;LI = <a class="code" href="structllvm_1_1MachineSchedContext.html#aa604d18378910f87649c38841cc1531c">LIS</a>-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a70cf6a51b043dc9f8ae683c266d5d9c4">getInterval</a>(Reg);</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1VNInfo.html">VNInfo</a> *DefVNI = LI.<a class="code" href="classllvm_1_1LiveRange.html#a435a93196594094643aae944c4ec6cb0">getVNInfoBefore</a>(<a class="code" href="structllvm_1_1MachineSchedContext.html#aa604d18378910f87649c38841cc1531c">LIS</a>-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a4ed1e0b18a1fa4219caac5e38e99286e">getMBBEndIdx</a>(<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>));</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <span class="keywordflow">if</span> (!DefVNI)</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *DefMI = <a class="code" href="structllvm_1_1MachineSchedContext.html#aa604d18378910f87649c38841cc1531c">LIS</a>-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#ab306d0d7e986cc18578a5150c44a9f7a">getInstructionFromIndex</a>(DefVNI-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ae623a0f1ab59da851f2ebf1674d1fddb">def</a>);</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *DefSU = getSUnit(DefMI);</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <span class="keywordflow">if</span> (!DefSU)</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <span class="keywordtype">unsigned</span> LiveOutHeight = DefSU-&gt;<a class="code" href="classllvm_1_1SUnit.html#ab760185ba11bc474695d222b92373b76">getHeight</a>();</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <span class="keywordtype">unsigned</span> LiveOutDepth = DefSU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a3047721a8d33c2de8a261d2fecb340a6">getDepth</a>() + DefSU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a72e0568b7bf0e9a97260c34264a549a0">Latency</a>;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    <span class="comment">// Visit all local users of the vreg def.</span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SparseMultiSet.html#a5a05b79eda02945cb09d6202624f7fa4">VReg2UseMap::iterator</a></div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;           UI = VRegUses.find(Reg); UI != VRegUses.end(); ++UI) {</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      <span class="keywordflow">if</span> (UI-&gt;SU == &amp;ExitSU)</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;      <span class="comment">// Only consider uses of the phi.</span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;      <a class="code" href="classllvm_1_1LiveQueryResult.html">LiveQueryResult</a> LRQ =</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;        LI.<a class="code" href="classllvm_1_1LiveRange.html#acd0853cbfd87e166b73d3e24502f2346">Query</a>(<a class="code" href="structllvm_1_1MachineSchedContext.html#aa604d18378910f87649c38841cc1531c">LIS</a>-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a6bbcfa1e19c409a905ffc0356c060bd4">getInstructionIndex</a>(UI-&gt;SU-&gt;getInstr()));</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;      <span class="keywordflow">if</span> (!LRQ.<a class="code" href="classllvm_1_1LiveQueryResult.html#a04fcce5cd33d3ffe16309a908387a982">valueIn</a>()-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ae0af39c31bb54b8c908d8d4a15f55da5">isPHIDef</a>())</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;      <span class="comment">// Assume that a path spanning two iterations is a cycle, which could</span></div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;      <span class="comment">// overestimate in strange cases. This allows cyclic latency to be</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;      <span class="comment">// estimated as the minimum slack of the vreg&#39;s depth or height.</span></div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;      <span class="keywordtype">unsigned</span> CyclicLatency = 0;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;      <span class="keywordflow">if</span> (LiveOutDepth &gt; UI-&gt;SU-&gt;getDepth())</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        CyclicLatency = LiveOutDepth - UI-&gt;SU-&gt;getDepth();</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;      <span class="keywordtype">unsigned</span> LiveInHeight = UI-&gt;SU-&gt;getHeight() + DefSU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a72e0568b7bf0e9a97260c34264a549a0">Latency</a>;</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;      <span class="keywordflow">if</span> (LiveInHeight &gt; LiveOutHeight) {</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        <span class="keywordflow">if</span> (LiveInHeight - LiveOutHeight &lt; CyclicLatency)</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;          CyclicLatency = LiveInHeight - LiveOutHeight;</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      }</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        CyclicLatency = 0;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Cyclic Path: SU(&quot;</span> &lt;&lt; DefSU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; <span class="stringliteral">&quot;) -&gt; SU(&quot;</span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;            &lt;&lt; UI-&gt;SU-&gt;NodeNum &lt;&lt; <span class="stringliteral">&quot;) = &quot;</span> &lt;&lt; CyclicLatency &lt;&lt; <span class="stringliteral">&quot;c\n&quot;</span>);</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;      <span class="keywordflow">if</span> (CyclicLatency &gt; MaxCyclicLatency)</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        MaxCyclicLatency = CyclicLatency;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    }</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  }</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Cyclic Critical Path: &quot;</span> &lt;&lt; MaxCyclicLatency &lt;&lt; <span class="stringliteral">&quot;c\n&quot;</span>);</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  <span class="keywordflow">return</span> MaxCyclicLatency;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;}</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;<span class="comment">/// Identify DAG roots and setup scheduler queues.</span></div><div class="line"><a name="l00839"></a><span class="lineno"><a class="line" href="classllvm_1_1ScheduleDAGMI.html#a1f98694f104d052d71ed74ade38d69f0">  839</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1ScheduleDAGMI.html#a1f98694f104d052d71ed74ade38d69f0">ScheduleDAGMI::initQueues</a>(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;SUnit*&gt;</a> TopRoots,</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;                               <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;SUnit*&gt;</a> BotRoots) {</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  NextClusterSucc = NULL;</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  NextClusterPred = NULL;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  <span class="comment">// Release all DAG roots for scheduling, not including EntrySU/ExitSU.</span></div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  <span class="comment">// Nodes with unreleased weak edges can still be roots.</span></div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  <span class="comment">// Release top roots in forward order.</span></div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classT.html">SmallVectorImpl&lt;SUnit*&gt;::const_iterator</a></div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;         <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = TopRoots.<a class="code" href="classllvm_1_1ArrayRef.html#a836367b39ed630bf14db99923c22740e">begin</a>(), E = TopRoots.<a class="code" href="classllvm_1_1ArrayRef.html#a38ed8cc3c342ad6910e8c869d3e2b9cf">end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    SchedImpl-&gt;releaseTopNode(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  }</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  <span class="comment">// Release bottom roots in reverse order so the higher priority nodes appear</span></div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  <span class="comment">// first. This is more natural and slightly more efficient.</span></div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a7803956e30d6be70112aa4967832962f">SmallVectorImpl&lt;SUnit*&gt;::const_reverse_iterator</a></div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;         <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = BotRoots.<a class="code" href="classllvm_1_1ArrayRef.html#ac2203d5b281b7d77e632b12d516e1c18">rbegin</a>(), E = BotRoots.<a class="code" href="classllvm_1_1ArrayRef.html#ad5ef1f928854a7dba2f176e654da0f3a">rend</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    SchedImpl-&gt;releaseBottomNode(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  }</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;  releaseSuccessors(&amp;EntrySU);</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  releasePredecessors(&amp;ExitSU);</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  SchedImpl-&gt;registerRoots();</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  <span class="comment">// Advance past initial DebugValues.</span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;  CurrentTop = <a class="code" href="MachineScheduler_8cpp.html#a1c8a9363a3eb113ca42064a03636b135">nextIfDebug</a>(RegionBegin, RegionEnd);</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  CurrentBottom = RegionEnd;</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  <span class="keywordflow">if</span> (ShouldTrackPressure) {</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    assert(TopRPTracker.getPos() == RegionBegin &amp;&amp; <span class="stringliteral">&quot;bad initial Top tracker&quot;</span>);</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    TopRPTracker.setPos(CurrentTop);</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  }</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;}</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="comment">/// Move an instruction and update register pressure.</span></div><div class="line"><a name="l00875"></a><span class="lineno"><a class="line" href="classllvm_1_1ScheduleDAGMI.html#a3c87e517a77306b0214575dadec4806e">  875</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1ScheduleDAGMI.html#a3c87e517a77306b0214575dadec4806e">ScheduleDAGMI::scheduleMI</a>(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU, <span class="keywordtype">bool</span> IsTopNode) {</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;  <span class="comment">// Move the instruction to its new location in the instruction stream.</span></div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a> = SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#adb119d63d924841b0523d67dfdd1bf61">getInstr</a>();</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;  <span class="keywordflow">if</span> (IsTopNode) {</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    assert(SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#ad2f639e2a5f06978b65c2c1c95b9a9d1">isTopReady</a>() &amp;&amp; <span class="stringliteral">&quot;node still has unscheduled dependencies&quot;</span>);</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    <span class="keywordflow">if</span> (&amp;*CurrentTop == MI)</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;      CurrentTop = <a class="code" href="MachineScheduler_8cpp.html#a1c8a9363a3eb113ca42064a03636b135">nextIfDebug</a>(++CurrentTop, CurrentBottom);</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;      moveInstruction(MI, CurrentTop);</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;      TopRPTracker.setPos(MI);</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    }</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <span class="keywordflow">if</span> (ShouldTrackPressure) {</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;      <span class="comment">// Update top scheduled pressure.</span></div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;      TopRPTracker.advance();</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;      assert(TopRPTracker.getPos() == CurrentTop &amp;&amp; <span class="stringliteral">&quot;out of sync&quot;</span>);</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;      updateScheduledPressure(SU, TopRPTracker.getPressure().MaxSetPressure);</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    }</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;  }</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <span class="keywordflow">else</span> {</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    assert(SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#aebc439d11dc8b13b713bbcc0a59db3dc">isBottomReady</a>() &amp;&amp; <span class="stringliteral">&quot;node still has unscheduled dependencies&quot;</span>);</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> priorII =</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;      <a class="code" href="MachineScheduler_8cpp.html#a459acab05344caa836aa036f1829c928">priorNonDebug</a>(CurrentBottom, CurrentTop);</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    <span class="keywordflow">if</span> (&amp;*priorII == MI)</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;      CurrentBottom = priorII;</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;      <span class="keywordflow">if</span> (&amp;*CurrentTop == MI) {</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;        CurrentTop = <a class="code" href="MachineScheduler_8cpp.html#a1c8a9363a3eb113ca42064a03636b135">nextIfDebug</a>(++CurrentTop, priorII);</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;        TopRPTracker.setPos(CurrentTop);</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;      }</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;      moveInstruction(MI, CurrentBottom);</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;      CurrentBottom = <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    }</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <span class="keywordflow">if</span> (ShouldTrackPressure) {</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;      <span class="comment">// Update bottom scheduled pressure.</span></div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 8&gt;</a> LiveUses;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;      BotRPTracker.recede(&amp;LiveUses);</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;      assert(BotRPTracker.getPos() == CurrentBottom &amp;&amp; <span class="stringliteral">&quot;out of sync&quot;</span>);</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;      updateScheduledPressure(SU, BotRPTracker.getPressure().MaxSetPressure);</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;      updatePressureDiffs(LiveUses);</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    }</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;  }</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;}</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;<span class="comment">/// Update scheduler queues after scheduling an instruction.</span></div><div class="line"><a name="l00921"></a><span class="lineno"><a class="line" href="classllvm_1_1ScheduleDAGMI.html#abfdd9a95217810c69b2557060a130318">  921</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1ScheduleDAGMI.html#abfdd9a95217810c69b2557060a130318">ScheduleDAGMI::updateQueues</a>(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU, <span class="keywordtype">bool</span> IsTopNode) {</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;  <span class="comment">// Release dependent instructions for scheduling.</span></div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  <span class="keywordflow">if</span> (IsTopNode)</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    releaseSuccessors(SU);</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    releasePredecessors(SU);</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a8c201d7a769bda1cd75d8d6788123068">isScheduled</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  <span class="keywordflow">if</span> (DFSResult) {</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    <span class="keywordtype">unsigned</span> SubtreeID = DFSResult-&gt;getSubtreeID(SU);</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <span class="keywordflow">if</span> (!ScheduledTrees.test(SubtreeID)) {</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;      ScheduledTrees.set(SubtreeID);</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;      DFSResult-&gt;scheduleTree(SubtreeID);</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;      SchedImpl-&gt;scheduleTree(SubtreeID);</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    }</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  }</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  <span class="comment">// Notify the scheduling strategy after updating the DAG.</span></div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;  SchedImpl-&gt;schedNode(SU, IsTopNode);</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;}</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;<span class="comment">/// Reinsert any remaining debug_values, just like the PostRA scheduler.</span></div><div class="line"><a name="l00944"></a><span class="lineno"><a class="line" href="classllvm_1_1ScheduleDAGMI.html#ac2dafe98c88d43b256622413886e2152">  944</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1ScheduleDAGMI.html#ac2dafe98c88d43b256622413886e2152">ScheduleDAGMI::placeDebugValues</a>() {</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;  <span class="comment">// If first instruction was a DBG_VALUE then put it back.</span></div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;  <span class="keywordflow">if</span> (FirstDbgValue) {</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;splice(RegionBegin, <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, FirstDbgValue);</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    RegionBegin = FirstDbgValue;</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  }</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;  <span class="keywordflow">for</span> (std::vector&lt;std::pair&lt;MachineInstr *, MachineInstr *&gt; &gt;::iterator</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;         DI = DbgValues.end(), <a class="code" href="namespacellvm_1_1X86II.html#a97dc14052814702ba0e2b14fb14dd02da2c6497f6ed5314c6fcd9ab88c9528543">DE</a> = DbgValues.begin(); DI != <a class="code" href="namespacellvm_1_1X86II.html#a97dc14052814702ba0e2b14fb14dd02da2c6497f6ed5314c6fcd9ab88c9528543">DE</a>; --DI) {</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    std::pair&lt;MachineInstr *, MachineInstr *&gt; <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = *<a class="code" href="namespacellvm.html#a7923e3e207de8bc1d0d6a5091316ddde">prior</a>(DI);</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *DbgValue = P.first;</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> OrigPrevMI = P.second;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    <span class="keywordflow">if</span> (&amp;*RegionBegin == DbgValue)</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;      ++RegionBegin;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;splice(++OrigPrevMI, <a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, DbgValue);</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    <span class="keywordflow">if</span> (OrigPrevMI == <a class="code" href="namespacellvm.html#a7923e3e207de8bc1d0d6a5091316ddde">llvm::prior</a>(RegionEnd))</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;      RegionEnd = DbgValue;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;  }</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;  DbgValues.clear();</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;  FirstDbgValue = NULL;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;}</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;<span class="preprocessor">#if !defined(NDEBUG) || defined(LLVM_ENABLE_DUMP)</span></div><div class="line"><a name="l00967"></a><span class="lineno"><a class="line" href="classllvm_1_1ScheduleDAGMI.html#a48c680d1ba6345256fc4dabaf4d433d3">  967</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1ScheduleDAGMI.html#a48c680d1ba6345256fc4dabaf4d433d3">ScheduleDAGMI::dumpSchedule</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a> = <a class="code" href="namespacellvm_1_1sys_1_1path.html#a33706aab89e700b8f79e1fa6f4f0e3ee">begin</a>(), ME = <a class="code" href="namespacellvm_1_1sys_1_1path.html#a214ec2f04ffd92636ed4bd2717607a1d">end</a>(); <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a> != ME; ++<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>) {</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU = getSUnit(&amp;(*<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>)))</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;      SU-&gt;dump(<span class="keyword">this</span>);</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Missing SUnit\n&quot;</span>;</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  }</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;}</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;<span class="comment">// LoadClusterMutation - DAG post-processing to cluster loads.</span></div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;<span class="keyword">namespace </span>{<span class="comment"></span></div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;<span class="comment">/// \brief Post-process the DAG to create cluster edges between neighboring</span></div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;<span class="comment">/// loads.</span></div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;<span class="comment"></span><span class="keyword">class </span>LoadClusterMutation : <span class="keyword">public</span> <a class="code" href="classllvm_1_1ScheduleDAGMutation.html">ScheduleDAGMutation</a> {</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  <span class="keyword">struct </span>LoadInfo {</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <span class="keywordtype">unsigned</span> BaseReg;</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <span class="keywordtype">unsigned</span> Offset;</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    LoadInfo(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *su, <span class="keywordtype">unsigned</span> reg, <span class="keywordtype">unsigned</span> ofs)</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;      : SU(su), BaseReg(reg), Offset(ofs) {}</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;  };</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> LoadInfoLess(<span class="keyword">const</span> LoadClusterMutation::LoadInfo &amp;LHS,</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;                           <span class="keyword">const</span> LoadClusterMutation::LoadInfo &amp;RHS);</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>;</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *TRI;</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  LoadClusterMutation(<span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> *tii,</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;                      <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *tri)</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    : <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>(tii), TRI(tri) {}</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#aa188572c8aa302e24bbfffa1292972bd">apply</a>(<a class="code" href="classllvm_1_1ScheduleDAGMI.html">ScheduleDAGMI</a> *DAG);</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;<span class="keyword">protected</span>:</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  <span class="keywordtype">void</span> clusterNeighboringLoads(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;SUnit*&gt;</a> Loads, <a class="code" href="classllvm_1_1ScheduleDAGMI.html">ScheduleDAGMI</a> *DAG);</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;};</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;} <span class="comment">// anonymous</span></div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;<span class="keywordtype">bool</span> LoadClusterMutation::LoadInfoLess(</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;  <span class="keyword">const</span> LoadClusterMutation::LoadInfo &amp;LHS,</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;  <span class="keyword">const</span> LoadClusterMutation::LoadInfo &amp;RHS) {</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;  <span class="keywordflow">if</span> (LHS.BaseReg != RHS.BaseReg)</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    <span class="keywordflow">return</span> LHS.BaseReg &lt; RHS.BaseReg;</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;  <span class="keywordflow">return</span> LHS.Offset &lt; RHS.Offset;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;}</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;<span class="keywordtype">void</span> LoadClusterMutation::clusterNeighboringLoads(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;SUnit*&gt;</a> Loads,</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;                                                  <a class="code" href="classllvm_1_1ScheduleDAGMI.html">ScheduleDAGMI</a> *DAG) {</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;LoadClusterMutation::LoadInfo,32&gt;</a> LoadRecords;</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Idx = 0, End = Loads.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>(); Idx != End; ++Idx) {</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU = Loads[Idx];</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    <span class="keywordtype">unsigned</span> BaseReg;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <span class="keywordtype">unsigned</span> Offset;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;getLdStBaseRegImmOfs(SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#adb119d63d924841b0523d67dfdd1bf61">getInstr</a>(), BaseReg, Offset, TRI))</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;      LoadRecords.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(LoadInfo(SU, BaseReg, Offset));</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;  }</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  <span class="keywordflow">if</span> (LoadRecords.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>() &lt; 2)</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;  std::sort(LoadRecords.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), LoadRecords.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>(), LoadInfoLess);</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;  <span class="keywordtype">unsigned</span> ClusterLength = 1;</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Idx = 0, End = LoadRecords.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); Idx &lt; (End - 1); ++Idx) {</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    <span class="keywordflow">if</span> (LoadRecords[Idx].BaseReg != LoadRecords[Idx+1].BaseReg) {</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;      ClusterLength = 1;</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    }</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SUa = LoadRecords[Idx].SU;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SUb = LoadRecords[Idx+1].SU;</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;shouldClusterLoads(SUa-&gt;<a class="code" href="classllvm_1_1SUnit.html#adb119d63d924841b0523d67dfdd1bf61">getInstr</a>(), SUb-&gt;<a class="code" href="classllvm_1_1SUnit.html#adb119d63d924841b0523d67dfdd1bf61">getInstr</a>(), ClusterLength)</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;        &amp;&amp; DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a9335e1e703206d27da6ed63614b64a0c">addEdge</a>(SUb, <a class="code" href="classllvm_1_1SDep.html">SDep</a>(SUa, <a class="code" href="classllvm_1_1SDep.html#a551060cb0333d9d0cfdacd2576d817b9a04d28e273cd30fa75243240b15d08352">SDep::Cluster</a>))) {</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Cluster loads SU(&quot;</span> &lt;&lt; SUa-&gt;<a class="code" href="classllvm_1_1SUnit.html#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; <span class="stringliteral">&quot;) - SU(&quot;</span></div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;            &lt;&lt; SUb-&gt;<a class="code" href="classllvm_1_1SUnit.html#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>);</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;      <span class="comment">// Copy successor edges from SUa to SUb. Interleaving computation</span></div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;      <span class="comment">// dependent on SUa can prevent load combining due to register reuse.</span></div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;      <span class="comment">// Predecessor edges do not need to be copied from SUb to SUa since nearby</span></div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;      <span class="comment">// loads should have effectively the same inputs.</span></div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classT.html">SUnit::const_succ_iterator</a></div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;             SI = SUa-&gt;<a class="code" href="classllvm_1_1SUnit.html#aab4a86c51e6b126c9c6ef58dbb574431">Succs</a>.begin(), SE = SUa-&gt;<a class="code" href="classllvm_1_1SUnit.html#aab4a86c51e6b126c9c6ef58dbb574431">Succs</a>.end(); SI != SE; ++SI) {</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;        <span class="keywordflow">if</span> (SI-&gt;getSUnit() == SUb)</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Copy Succ SU(&quot;</span> &lt;&lt; SI-&gt;getSUnit()-&gt;NodeNum &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>);</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;        DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a9335e1e703206d27da6ed63614b64a0c">addEdge</a>(SI-&gt;getSUnit(), <a class="code" href="classllvm_1_1SDep.html">SDep</a>(SUb, <a class="code" href="classllvm_1_1SDep.html#a551060cb0333d9d0cfdacd2576d817b9a8afafe9e6f4c2fb9744242a6b369a0f1">SDep::Artificial</a>));</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;      }</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;      ++ClusterLength;</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    }</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;      ClusterLength = 1;</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;  }</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;}</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;<span class="comment">/// \brief Callback from DAG postProcessing to create cluster edges for loads.</span></div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#aa188572c8aa302e24bbfffa1292972bd">LoadClusterMutation::apply</a>(<a class="code" href="classllvm_1_1ScheduleDAGMI.html">ScheduleDAGMI</a> *DAG) {</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;  <span class="comment">// Map DAG NodeNum to store chain ID.</span></div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;unsigned, unsigned&gt;</a> StoreChainIDs;</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;  <span class="comment">// Map each store chain to a set of dependent loads.</span></div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;SmallVector&lt;SUnit*,4&gt;</a>, 32&gt; StoreChainDependents;</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Idx = 0, End = DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAG.html#a3d5aacd5fc7d6a739ce913974ed1e53d">SUnits</a>.size(); Idx != End; ++Idx) {</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU = &amp;DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAG.html#a3d5aacd5fc7d6a739ce913974ed1e53d">SUnits</a>[Idx];</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    <span class="keywordflow">if</span> (!SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#adb119d63d924841b0523d67dfdd1bf61">getInstr</a>()-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a2b48451e9cc8433ed5f8ee30462cc96e">mayLoad</a>())</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    <span class="keywordtype">unsigned</span> ChainPredID = DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAG.html#a3d5aacd5fc7d6a739ce913974ed1e53d">SUnits</a>.size();</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classT.html">SUnit::const_pred_iterator</a></div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;           PI = SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#ae2b43854b542de66eec6475adc48f56c">Preds</a>.begin(), PE = SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#ae2b43854b542de66eec6475adc48f56c">Preds</a>.end(); PI != PE; ++PI) {</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;      <span class="keywordflow">if</span> (PI-&gt;isCtrl()) {</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;        ChainPredID = PI-&gt;getSUnit()-&gt;NodeNum;</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;      }</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    }</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <span class="comment">// Check if this chain-like pred has been seen</span></div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    <span class="comment">// before. ChainPredID==MaxNodeID for loads at the top of the schedule.</span></div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    <span class="keywordtype">unsigned</span> NumChains = StoreChainDependents.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>();</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    std::pair&lt;DenseMap&lt;unsigned, unsigned&gt;::iterator, <span class="keywordtype">bool</span>&gt; Result =</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;      StoreChainIDs.<a class="code" href="classllvm_1_1DenseMapBase.html#a699a66e504b48fdeff124e82f6c61917">insert</a>(std::make_pair(ChainPredID, NumChains));</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    <span class="keywordflow">if</span> (Result.second)</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;      StoreChainDependents.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a102d0ad36060677286c3aefb812e5512">resize</a>(NumChains + 1);</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    StoreChainDependents[Result.first-&gt;second].<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(SU);</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;  }</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;  <span class="comment">// Iterate over the store chains.</span></div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Idx = 0, End = StoreChainDependents.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); Idx != End; ++Idx)</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    clusterNeighboringLoads(StoreChainDependents[Idx], DAG);</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;}</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;<span class="comment">// MacroFusion - DAG post-processing to encourage fusion of macro ops.</span></div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;<span class="keyword">namespace </span>{<span class="comment"></span></div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;<span class="comment">/// \brief Post-process the DAG to create cluster edges between instructions</span></div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;<span class="comment">/// that may be fused by the processor into a single operation.</span></div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;<span class="comment"></span><span class="keyword">class </span>MacroFusion : <span class="keyword">public</span> <a class="code" href="classllvm_1_1ScheduleDAGMutation.html">ScheduleDAGMutation</a> {</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>;</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;  MacroFusion(<span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> *tii): <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>(tii) {}</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#aa188572c8aa302e24bbfffa1292972bd">apply</a>(<a class="code" href="classllvm_1_1ScheduleDAGMI.html">ScheduleDAGMI</a> *DAG);</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;};</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;} <span class="comment">// anonymous</span></div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;<span class="comment">/// \brief Callback from DAG postProcessing to create cluster edges to encourage</span></div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;<span class="comment">/// fused operations.</span></div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#aa188572c8aa302e24bbfffa1292972bd">MacroFusion::apply</a>(<a class="code" href="classllvm_1_1ScheduleDAGMI.html">ScheduleDAGMI</a> *DAG) {</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;  <span class="comment">// For now, assume targets can only fuse with the branch.</span></div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1MCID.html#a8035044d40d3758eb45b65dce69dc90ba359237c780f7c8e40645575826da8a3c">Branch</a> = DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAG.html#af81f734d7fb268c95c1c63c399a7c4a6">ExitSU</a>.<a class="code" href="classllvm_1_1SUnit.html#adb119d63d924841b0523d67dfdd1bf61">getInstr</a>();</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  <span class="keywordflow">if</span> (!Branch)</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Idx = DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAG.html#a3d5aacd5fc7d6a739ce913974ed1e53d">SUnits</a>.size(); Idx &gt; 0;) {</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU = &amp;DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAG.html#a3d5aacd5fc7d6a739ce913974ed1e53d">SUnits</a>[--Idx];</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;shouldScheduleAdjacent(SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#adb119d63d924841b0523d67dfdd1bf61">getInstr</a>(), <a class="code" href="namespacellvm_1_1MCID.html#a8035044d40d3758eb45b65dce69dc90ba359237c780f7c8e40645575826da8a3c">Branch</a>))</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    <span class="comment">// Create a single weak edge from SU to ExitSU. The only effect is to cause</span></div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    <span class="comment">// bottom-up scheduling to heavily prioritize the clustered SU.  There is no</span></div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <span class="comment">// need to copy predecessor edges from ExitSU to SU, since top-down</span></div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <span class="comment">// scheduling cannot prioritize ExitSU anyway. To defer top-down scheduling</span></div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    <span class="comment">// of SU, we could create an artificial edge from the deepest root, but it</span></div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <span class="comment">// hasn&#39;t been needed yet.</span></div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    <span class="keywordtype">bool</span> Success = DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a9335e1e703206d27da6ed63614b64a0c">addEdge</a>(&amp;DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAG.html#af81f734d7fb268c95c1c63c399a7c4a6">ExitSU</a>, <a class="code" href="classllvm_1_1SDep.html">SDep</a>(SU, <a class="code" href="classllvm_1_1SDep.html#a551060cb0333d9d0cfdacd2576d817b9a04d28e273cd30fa75243240b15d08352">SDep::Cluster</a>));</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    (void)Success;</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    assert(Success &amp;&amp; <span class="stringliteral">&quot;No DAG nodes should be reachable from ExitSU&quot;</span>);</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Macro Fuse SU(&quot;</span> &lt;&lt; SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>);</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;  }</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;}</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;<span class="comment">// CopyConstrain - DAG post-processing to encourage copy elimination.</span></div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;<span class="keyword">namespace </span>{<span class="comment"></span></div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;<span class="comment">/// \brief Post-process the DAG to create weak edges from all uses of a copy to</span></div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;<span class="comment">/// the one use that defines the copy&#39;s source vreg, most likely an induction</span></div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;<span class="comment">/// variable increment.</span></div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;<span class="comment"></span><span class="keyword">class </span>CopyConstrain : <span class="keyword">public</span> <a class="code" href="classllvm_1_1ScheduleDAGMutation.html">ScheduleDAGMutation</a> {</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  <span class="comment">// Transient state.</span></div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;  <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> RegionBeginIdx;</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  <span class="comment">// RegionEndIdx is the slot index of the last non-debug instruction in the</span></div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;  <span class="comment">// scheduling region. So we may have RegionBeginIdx == RegionEndIdx.</span></div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;  <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> RegionEndIdx;</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;  CopyConstrain(<span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> *, <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *) {}</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#aa188572c8aa302e24bbfffa1292972bd">apply</a>(<a class="code" href="classllvm_1_1ScheduleDAGMI.html">ScheduleDAGMI</a> *DAG);</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;<span class="keyword">protected</span>:</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  <span class="keywordtype">void</span> constrainLocalCopy(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *CopySU, <a class="code" href="classllvm_1_1ScheduleDAGMI.html">ScheduleDAGMI</a> *DAG);</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;};</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;} <span class="comment">// anonymous</span></div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;<span class="comment">/// constrainLocalCopy handles two possibilities:</span></div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;<span class="comment">/// 1) Local src:</span></div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;<span class="comment">/// I0:     = dst</span></div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;<span class="comment">/// I1: src = ...</span></div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;<span class="comment">/// I2:     = dst</span></div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;<span class="comment">/// I3: dst = src (copy)</span></div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;<span class="comment">/// (create pred-&gt;succ edges I0-&gt;I1, I2-&gt;I1)</span></div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;<span class="comment">/// 2) Local copy:</span></div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;<span class="comment">/// I0: dst = src (copy)</span></div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;<span class="comment">/// I1:     = dst</span></div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;<span class="comment">/// I2: src = ...</span></div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;<span class="comment">/// I3:     = dst</span></div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;<span class="comment">/// (create pred-&gt;succ edges I1-&gt;I2, I3-&gt;I2)</span></div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;<span class="comment">/// Although the MachineScheduler is currently constrained to single blocks,</span></div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;<span class="comment">/// this algorithm should handle extended blocks. An EBB is a set of</span></div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;<span class="comment">/// contiguously numbered blocks such that the previous block in the EBB is</span></div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;<span class="comment">/// always the single predecessor.</span></div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> CopyConstrain::constrainLocalCopy(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *CopySU, <a class="code" href="classllvm_1_1ScheduleDAGMI.html">ScheduleDAGMI</a> *DAG) {</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;  <a class="code" href="classllvm_1_1LiveIntervals.html">LiveIntervals</a> *<a class="code" href="structllvm_1_1MachineSchedContext.html#aa604d18378910f87649c38841cc1531c">LIS</a> = DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#a2cd25ceae77621ea3d813a2afdab127b">getLIS</a>();</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *Copy = CopySU-&gt;<a class="code" href="classllvm_1_1SUnit.html#adb119d63d924841b0523d67dfdd1bf61">getInstr</a>();</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;  <span class="comment">// Check for pure vreg copies.</span></div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;  <span class="keywordtype">unsigned</span> SrcReg = Copy-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(1).<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">TargetRegisterInfo::isVirtualRegister</a>(SrcReg))</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;  <span class="keywordtype">unsigned</span> DstReg = Copy-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(0).<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>();</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">TargetRegisterInfo::isVirtualRegister</a>(DstReg))</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;  <span class="comment">// Check if either the dest or source is local. If it&#39;s live across a back</span></div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;  <span class="comment">// edge, it&#39;s not local. Note that if both vregs are live across the back</span></div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;  <span class="comment">// edge, we cannot successfully contrain the copy without cyclic scheduling.</span></div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  <span class="keywordtype">unsigned</span> LocalReg = DstReg;</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;  <span class="keywordtype">unsigned</span> GlobalReg = SrcReg;</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;  <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> *LocalLI = &amp;LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a70cf6a51b043dc9f8ae683c266d5d9c4">getInterval</a>(LocalReg);</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;  <span class="keywordflow">if</span> (!LocalLI-&gt;<a class="code" href="classllvm_1_1LiveRange.html#a1d72075b60d30f82fa482aa613f8dcf8">isLocal</a>(RegionBeginIdx, RegionEndIdx)) {</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    LocalReg = SrcReg;</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    GlobalReg = DstReg;</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    LocalLI = &amp;LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a70cf6a51b043dc9f8ae683c266d5d9c4">getInterval</a>(LocalReg);</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    <span class="keywordflow">if</span> (!LocalLI-&gt;<a class="code" href="classllvm_1_1LiveRange.html#a1d72075b60d30f82fa482aa613f8dcf8">isLocal</a>(RegionBeginIdx, RegionEndIdx))</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;  }</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;  <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> *GlobalLI = &amp;LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a70cf6a51b043dc9f8ae683c266d5d9c4">getInterval</a>(GlobalReg);</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;  <span class="comment">// Find the global segment after the start of the local LI.</span></div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;  <a class="code" href="classT.html">LiveInterval::iterator</a> GlobalSegment = GlobalLI-&gt;<a class="code" href="classllvm_1_1LiveRange.html#afeb00b9049a2391c990df15692caef63">find</a>(LocalLI-&gt;<a class="code" href="classllvm_1_1LiveRange.html#a730a3ff6c5b92ca7a37324922ae1d953">beginIndex</a>());</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;  <span class="comment">// If GlobalLI does not overlap LocalLI-&gt;start, then a copy directly feeds a</span></div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;  <span class="comment">// local live range. We could create edges from other global uses to the local</span></div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;  <span class="comment">// start, but the coalescer should have already eliminated these cases, so</span></div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  <span class="comment">// don&#39;t bother dealing with it.</span></div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;  <span class="keywordflow">if</span> (GlobalSegment == GlobalLI-&gt;<a class="code" href="classllvm_1_1LiveRange.html#a757fd6afba0f531db70e78e057d147c6">end</a>())</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;  <span class="comment">// If GlobalSegment is killed at the LocalLI-&gt;start, the call to find()</span></div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;  <span class="comment">// returned the next global segment. But if GlobalSegment overlaps with</span></div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;  <span class="comment">// LocalLI-&gt;start, then advance to the next segement. If a hole in GlobalLI</span></div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;  <span class="comment">// exists in LocalLI&#39;s vicinity, GlobalSegment will be the end of the hole.</span></div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  <span class="keywordflow">if</span> (GlobalSegment-&gt;contains(LocalLI-&gt;<a class="code" href="classllvm_1_1LiveRange.html#a730a3ff6c5b92ca7a37324922ae1d953">beginIndex</a>()))</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    ++GlobalSegment;</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;  <span class="keywordflow">if</span> (GlobalSegment == GlobalLI-&gt;<a class="code" href="classllvm_1_1LiveRange.html#a757fd6afba0f531db70e78e057d147c6">end</a>())</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;  <span class="comment">// Check if GlobalLI contains a hole in the vicinity of LocalLI.</span></div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;  <span class="keywordflow">if</span> (GlobalSegment != GlobalLI-&gt;<a class="code" href="classllvm_1_1LiveRange.html#a9a5e7c523f12f9f164b786769de1ca47">begin</a>()) {</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    <span class="comment">// Two address defs have no hole.</span></div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SlotIndex.html#a0b73244049319d841fd11a238f35b5d1">SlotIndex::isSameInstr</a>(<a class="code" href="namespacellvm.html#a7923e3e207de8bc1d0d6a5091316ddde">llvm::prior</a>(GlobalSegment)-&gt;<a class="code" href="namespacellvm_1_1sys_1_1path.html#a214ec2f04ffd92636ed4bd2717607a1d">end</a>,</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;                               GlobalSegment-&gt;start)) {</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    }</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    <span class="comment">// If the prior global segment may be defined by the same two-address</span></div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    <span class="comment">// instruction that also defines LocalLI, then can&#39;t make a hole here.</span></div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SlotIndex.html#a0b73244049319d841fd11a238f35b5d1">SlotIndex::isSameInstr</a>(<a class="code" href="namespacellvm.html#a7923e3e207de8bc1d0d6a5091316ddde">llvm::prior</a>(GlobalSegment)-&gt;start,</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;                               LocalLI-&gt;<a class="code" href="classllvm_1_1LiveRange.html#a730a3ff6c5b92ca7a37324922ae1d953">beginIndex</a>())) {</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    }</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    <span class="comment">// If GlobalLI has a prior segment, it must be live into the EBB. Otherwise</span></div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    <span class="comment">// it would be a disconnected component in the live range.</span></div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    assert(<a class="code" href="namespacellvm.html#a7923e3e207de8bc1d0d6a5091316ddde">llvm::prior</a>(GlobalSegment)-&gt;start &lt; LocalLI-&gt;beginIndex() &amp;&amp;</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;           <span class="stringliteral">&quot;Disconnected LRG within the scheduling region.&quot;</span>);</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;  }</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *GlobalDef = LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#ab306d0d7e986cc18578a5150c44a9f7a">getInstructionFromIndex</a>(GlobalSegment-&gt;start);</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;  <span class="keywordflow">if</span> (!GlobalDef)</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;  <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *GlobalSU = DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#a6cf6c94d54730c618ac5f86d2140d032">getSUnit</a>(GlobalDef);</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;  <span class="keywordflow">if</span> (!GlobalSU)</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;  <span class="comment">// GlobalDef is the bottom of the GlobalLI hole. Open the hole by</span></div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;  <span class="comment">// constraining the uses of the last local def to precede GlobalDef.</span></div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;SUnit*,8&gt;</a> LocalUses;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1VNInfo.html">VNInfo</a> *LastLocalVN = LocalLI-&gt;<a class="code" href="classllvm_1_1LiveRange.html#a435a93196594094643aae944c4ec6cb0">getVNInfoBefore</a>(LocalLI-&gt;<a class="code" href="classllvm_1_1LiveRange.html#a26fb4cb84feecacaf08a15f9f6ba5822">endIndex</a>());</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *LastLocalDef = LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#ab306d0d7e986cc18578a5150c44a9f7a">getInstructionFromIndex</a>(LastLocalVN-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ae623a0f1ab59da851f2ebf1674d1fddb">def</a>);</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;  <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *LastLocalSU = DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#a6cf6c94d54730c618ac5f86d2140d032">getSUnit</a>(LastLocalDef);</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classT.html">SUnit::const_succ_iterator</a></div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;         <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = LastLocalSU-&gt;<a class="code" href="classllvm_1_1SUnit.html#aab4a86c51e6b126c9c6ef58dbb574431">Succs</a>.begin(), E = LastLocalSU-&gt;<a class="code" href="classllvm_1_1SUnit.html#aab4a86c51e6b126c9c6ef58dbb574431">Succs</a>.end();</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getKind() != <a class="code" href="classllvm_1_1SDep.html#a07333f8ba53e0454b7ec6365860c0732af91df2221290eaa1a368403ffad49a26">SDep::Data</a> || <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getReg() != LocalReg)</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getSUnit() == GlobalSU)</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    <span class="keywordflow">if</span> (!DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a4fb766f0c271c845c86a325167a9e7e1">canAddEdge</a>(GlobalSU, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getSUnit()))</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    LocalUses.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getSUnit());</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;  }</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;  <span class="comment">// Open the top of the GlobalLI hole by constraining any earlier global uses</span></div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;  <span class="comment">// to precede the start of LocalLI.</span></div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;SUnit*,8&gt;</a> GlobalUses;</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *FirstLocalDef =</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#ab306d0d7e986cc18578a5150c44a9f7a">getInstructionFromIndex</a>(LocalLI-&gt;<a class="code" href="classllvm_1_1LiveRange.html#a730a3ff6c5b92ca7a37324922ae1d953">beginIndex</a>());</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;  <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *FirstLocalSU = DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#a6cf6c94d54730c618ac5f86d2140d032">getSUnit</a>(FirstLocalDef);</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classT.html">SUnit::const_pred_iterator</a></div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;         <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = GlobalSU-&gt;<a class="code" href="classllvm_1_1SUnit.html#ae2b43854b542de66eec6475adc48f56c">Preds</a>.begin(), E = GlobalSU-&gt;<a class="code" href="classllvm_1_1SUnit.html#ae2b43854b542de66eec6475adc48f56c">Preds</a>.end(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getKind() != <a class="code" href="classllvm_1_1SDep.html#a07333f8ba53e0454b7ec6365860c0732abe9561936346ab5c5e22fe544994b06e">SDep::Anti</a> || <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getReg() != GlobalReg)</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getSUnit() == FirstLocalSU)</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    <span class="keywordflow">if</span> (!DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a4fb766f0c271c845c86a325167a9e7e1">canAddEdge</a>(FirstLocalSU, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getSUnit()))</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    GlobalUses.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getSUnit());</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;  }</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Constraining copy SU(&quot;</span> &lt;&lt; CopySU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>);</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;  <span class="comment">// Add the weak edges.</span></div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classT.html">SmallVectorImpl&lt;SUnit*&gt;::const_iterator</a></div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;         <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = LocalUses.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), E = LocalUses.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Local use SU(&quot;</span> &lt;&lt; (*I)-&gt;NodeNum &lt;&lt; <span class="stringliteral">&quot;) -&gt; SU(&quot;</span></div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;          &lt;&lt; GlobalSU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>);</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a9335e1e703206d27da6ed63614b64a0c">addEdge</a>(GlobalSU, <a class="code" href="classllvm_1_1SDep.html">SDep</a>(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1SDep.html#a551060cb0333d9d0cfdacd2576d817b9ac698747d5c996ab4f760518f55be1346">SDep::Weak</a>));</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;  }</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classT.html">SmallVectorImpl&lt;SUnit*&gt;::const_iterator</a></div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;         <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = GlobalUses.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), E = GlobalUses.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Global use SU(&quot;</span> &lt;&lt; (*I)-&gt;NodeNum &lt;&lt; <span class="stringliteral">&quot;) -&gt; SU(&quot;</span></div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;          &lt;&lt; FirstLocalSU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>);</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;    DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a9335e1e703206d27da6ed63614b64a0c">addEdge</a>(FirstLocalSU, <a class="code" href="classllvm_1_1SDep.html">SDep</a>(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1SDep.html#a551060cb0333d9d0cfdacd2576d817b9ac698747d5c996ab4f760518f55be1346">SDep::Weak</a>));</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;  }</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;}</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;<span class="comment">/// \brief Callback from DAG postProcessing to create weak edges to encourage</span></div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;<span class="comment">/// copy elimination.</span></div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#aa188572c8aa302e24bbfffa1292972bd">CopyConstrain::apply</a>(<a class="code" href="classllvm_1_1ScheduleDAGMI.html">ScheduleDAGMI</a> *DAG) {</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> FirstPos = <a class="code" href="MachineScheduler_8cpp.html#a1c8a9363a3eb113ca42064a03636b135">nextIfDebug</a>(DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#aeb9c314de586393b2cb695733eeafc6c">begin</a>(), DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#aa1a4554243ad6d8f52e7d12a74f0cded">end</a>());</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;  <span class="keywordflow">if</span> (FirstPos == DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#aa1a4554243ad6d8f52e7d12a74f0cded">end</a>())</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;  RegionBeginIdx = DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#a2cd25ceae77621ea3d813a2afdab127b">getLIS</a>()-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a6bbcfa1e19c409a905ffc0356c060bd4">getInstructionIndex</a>(&amp;*FirstPos);</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;  RegionEndIdx = DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#a2cd25ceae77621ea3d813a2afdab127b">getLIS</a>()-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a6bbcfa1e19c409a905ffc0356c060bd4">getInstructionIndex</a>(</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    &amp;*<a class="code" href="MachineScheduler_8cpp.html#a459acab05344caa836aa036f1829c928">priorNonDebug</a>(DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#aa1a4554243ad6d8f52e7d12a74f0cded">end</a>(), DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#aeb9c314de586393b2cb695733eeafc6c">begin</a>()));</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Idx = 0, End = DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAG.html#a3d5aacd5fc7d6a739ce913974ed1e53d">SUnits</a>.size(); Idx != End; ++Idx) {</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;    <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU = &amp;DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAG.html#a3d5aacd5fc7d6a739ce913974ed1e53d">SUnits</a>[Idx];</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;    <span class="keywordflow">if</span> (!SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#adb119d63d924841b0523d67dfdd1bf61">getInstr</a>()-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ae0ac5973cd95f76e3365e67aaad69de6">isCopy</a>())</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    constrainLocalCopy(SU, DAG);</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;  }</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;}</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;<span class="comment">// GenericScheduler - Implementation of the generic MachineSchedStrategy.</span></div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;<span class="keyword">namespace </span>{<span class="comment"></span></div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;<span class="comment">/// GenericScheduler shrinks the unscheduled zone using heuristics to balance</span></div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;<span class="comment">/// the schedule.</span></div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;<span class="comment"></span><span class="keyword">class </span>GenericScheduler : <span class="keyword">public</span> <a class="code" href="classllvm_1_1MachineSchedStrategy.html">MachineSchedStrategy</a> {</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;<span class="keyword">public</span>:<span class="comment"></span></div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;<span class="comment">  /// Represent the type of SchedCandidate found within a single queue.</span></div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;<span class="comment">  /// pickNodeBidirectional depends on these listed by decreasing priority.</span></div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;<span class="comment"></span>  <span class="keyword">enum</span> CandReason {</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    NoCand, PhysRegCopy, RegExcess, RegCritical, Cluster, Weak, RegMax,</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    ResourceReduce, ResourceDemand, BotHeightReduce, BotPathReduce,</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;    TopDepthReduce, TopPathReduce, NextDefUse, NodeOrder};</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *getReasonStr(GenericScheduler::CandReason Reason);</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;<span class="comment">  /// Policy for scheduling the next instruction in the candidate&#39;s zone.</span></div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;<span class="comment"></span>  <span class="keyword">struct </span>CandPolicy {</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    <span class="keywordtype">bool</span> ReduceLatency;</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;    <span class="keywordtype">unsigned</span> ReduceResIdx;</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    <span class="keywordtype">unsigned</span> DemandResIdx;</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;    CandPolicy(): ReduceLatency(<span class="keyword">false</span>), ReduceResIdx(0), DemandResIdx(0) {}</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;  };</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;<span class="comment">  /// Status of an instruction&#39;s critical resource consumption.</span></div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;<span class="comment"></span>  <span class="keyword">struct </span>SchedResourceDelta {</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;    <span class="comment">// Count critical resources in the scheduled region required by SU.</span></div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    <span class="keywordtype">unsigned</span> CritResources;</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;    <span class="comment">// Count critical resources from another region consumed by SU.</span></div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    <span class="keywordtype">unsigned</span> DemandedResources;</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    SchedResourceDelta(): CritResources(0), DemandedResources(0) {}</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#a162c90bc179a6359438d060722bee35f">operator==</a>(<span class="keyword">const</span> SchedResourceDelta &amp;RHS)<span class="keyword"> const </span>{</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;      <span class="keywordflow">return</span> CritResources == RHS.CritResources</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;        &amp;&amp; DemandedResources == RHS.DemandedResources;</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;    }</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#a2f883c895f4d244f4ed56ed8a8c160c1">operator!=</a>(<span class="keyword">const</span> SchedResourceDelta &amp;RHS)<span class="keyword"> const </span>{</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;      <span class="keywordflow">return</span> !<a class="code" href="namespacellvm.html#a162c90bc179a6359438d060722bee35f">operator==</a>(RHS);</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    }</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;  };</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;<span class="comment">  /// Store the state used by GenericScheduler heuristics, required for the</span></div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;<span class="comment">  /// lifetime of one invocation of pickNode().</span></div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;<span class="comment"></span>  <span class="keyword">struct </span>SchedCandidate {</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    CandPolicy Policy;</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    <span class="comment">// The best SUnit candidate.</span></div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;    <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU;</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    <span class="comment">// The reason for this candidate.</span></div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    CandReason Reason;</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    <span class="comment">// Set of reasons that apply to multiple candidates.</span></div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;    uint32_t RepeatReasonSet;</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    <span class="comment">// Register pressure values for the best candidate.</span></div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;    <a class="code" href="structllvm_1_1RegPressureDelta.html">RegPressureDelta</a> RPDelta;</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    <span class="comment">// Critical resource consumption of the best candidate.</span></div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    SchedResourceDelta ResDelta;</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    SchedCandidate(<span class="keyword">const</span> CandPolicy &amp;policy)</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;      : Policy(policy), SU(NULL), Reason(NoCand), RepeatReasonSet(0) {}</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    <span class="keywordtype">bool</span> isValid()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> SU; }</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    <span class="comment">// Copy the status of another candidate without changing policy.</span></div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;    <span class="keywordtype">void</span> setBest(SchedCandidate &amp;Best) {</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;      assert(Best.Reason != NoCand &amp;&amp; <span class="stringliteral">&quot;uninitialized Sched candidate&quot;</span>);</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;      SU = Best.SU;</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;      Reason = Best.Reason;</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;      RPDelta = Best.RPDelta;</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;      ResDelta = Best.ResDelta;</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    }</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    <span class="keywordtype">bool</span> isRepeat(CandReason R) { <span class="keywordflow">return</span> RepeatReasonSet &amp; (1 &lt;&lt; R); }</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    <span class="keywordtype">void</span> setRepeat(CandReason R) { RepeatReasonSet |= (1 &lt;&lt; R); }</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <span class="keywordtype">void</span> initResourceDelta(<span class="keyword">const</span> <a class="code" href="classllvm_1_1ScheduleDAGMI.html">ScheduleDAGMI</a> *DAG,</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;                           <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetSchedModel.html">TargetSchedModel</a> *SchedModel);</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;  };</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;<span class="comment">  /// Summarize the unscheduled region.</span></div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;<span class="comment"></span>  <span class="keyword">struct </span>SchedRemainder {</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    <span class="comment">// Critical path through the DAG in expected latency.</span></div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    <span class="keywordtype">unsigned</span> CriticalPath;</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;    <span class="keywordtype">unsigned</span> CyclicCritPath;</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;    <span class="comment">// Scaled count of micro-ops left to schedule.</span></div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;    <span class="keywordtype">unsigned</span> RemIssueCount;</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    <span class="keywordtype">bool</span> IsAcyclicLatencyLimited;</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;    <span class="comment">// Unscheduled resources</span></div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 16&gt;</a> RemainingCounts;</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    <span class="keywordtype">void</span> reset() {</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;      CriticalPath = 0;</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;      CyclicCritPath = 0;</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;      RemIssueCount = 0;</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;      IsAcyclicLatencyLimited = <span class="keyword">false</span>;</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;      RemainingCounts.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;    }</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    SchedRemainder() { reset(); }</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">init</a>(<a class="code" href="classllvm_1_1ScheduleDAGMI.html">ScheduleDAGMI</a> *DAG, <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetSchedModel.html">TargetSchedModel</a> *SchedModel);</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;  };</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;<span class="comment">  /// Each Scheduling boundary is associated with ready queues. It tracks the</span></div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;<span class="comment">  /// current cycle in the direction of movement, and maintains the state</span></div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;<span class="comment">  /// of &quot;hazards&quot; and other interlocks at the current cycle.</span></div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;<span class="comment"></span>  <span class="keyword">struct </span>SchedBoundary {</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;    <a class="code" href="classllvm_1_1ScheduleDAGMI.html">ScheduleDAGMI</a> *DAG;</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetSchedModel.html">TargetSchedModel</a> *SchedModel;</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    SchedRemainder *Rem;</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;    <a class="code" href="classllvm_1_1ReadyQueue.html">ReadyQueue</a> Available;</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;    <a class="code" href="classllvm_1_1ReadyQueue.html">ReadyQueue</a> Pending;</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;    <span class="keywordtype">bool</span> CheckPending;</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;    <span class="comment">// For heuristics, keep a list of the nodes that immediately depend on the</span></div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;    <span class="comment">// most recently scheduled node.</span></div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const SUnit*, 8&gt;</a> NextSUs;</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;    <a class="code" href="classllvm_1_1ScheduleHazardRecognizer.html">ScheduleHazardRecognizer</a> *HazardRec;</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;<span class="comment">    /// Number of cycles it takes to issue the instructions scheduled in this</span></div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;<span class="comment">    /// zone. It is defined as: scheduled-micro-ops / issue-width + stalls.</span></div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;<span class="comment">    /// See getStalls().</span></div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;<span class="comment"></span>    <span class="keywordtype">unsigned</span> CurrCycle;</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;<span class="comment">    /// Micro-ops issued in the current cycle</span></div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;<span class="comment"></span>    <span class="keywordtype">unsigned</span> CurrMOps;</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;<span class="comment">    /// MinReadyCycle - Cycle of the soonest available instruction.</span></div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;<span class="comment"></span>    <span class="keywordtype">unsigned</span> MinReadyCycle;</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;    <span class="comment">// The expected latency of the critical path in this scheduled zone.</span></div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;    <span class="keywordtype">unsigned</span> ExpectedLatency;</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    <span class="comment">// The latency of dependence chains leading into this zone.</span></div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    <span class="comment">// For each node scheduled bottom-up: DLat = max DLat, N.Depth.</span></div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;    <span class="comment">// For each cycle scheduled: DLat -= 1.</span></div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    <span class="keywordtype">unsigned</span> DependentLatency;</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;<span class="comment">    /// Count the scheduled (issued) micro-ops that can be retired by</span></div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;<span class="comment">    /// time=CurrCycle assuming the first scheduled instr is retired at time=0.</span></div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;<span class="comment"></span>    <span class="keywordtype">unsigned</span> RetiredMOps;</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;    <span class="comment">// Count scheduled resources that have been executed. Resources are</span></div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;    <span class="comment">// considered executed if they become ready in the time that it takes to</span></div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;    <span class="comment">// saturate any resource including the one in question. Counts are scaled</span></div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;    <span class="comment">// for direct comparison with other resources. Counts can be compared with</span></div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    <span class="comment">// MOps * getMicroOpFactor and Latency * getLatencyFactor.</span></div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 16&gt;</a> ExecutedResCounts;</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;<span class="comment">    /// Cache the max count for a single resource.</span></div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;<span class="comment"></span>    <span class="keywordtype">unsigned</span> MaxExecutedResCount;</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    <span class="comment">// Cache the critical resources ID in this scheduled zone.</span></div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;    <span class="keywordtype">unsigned</span> ZoneCritResIdx;</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    <span class="comment">// Is the scheduled region resource limited vs. latency limited.</span></div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    <span class="keywordtype">bool</span> IsResourceLimited;</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;    <span class="comment">// Remember the greatest operand latency as an upper bound on the number of</span></div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    <span class="comment">// times we should retry the pending queue because of a hazard.</span></div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    <span class="keywordtype">unsigned</span> MaxObservedLatency;</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    <span class="keywordtype">void</span> reset() {</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;      <span class="comment">// A new HazardRec is created for each DAG and owned by SchedBoundary.</span></div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;      <span class="comment">// Destroying and reconstructing it is very expensive though. So keep</span></div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;      <span class="comment">// invalid, placeholder HazardRecs.</span></div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;      <span class="keywordflow">if</span> (HazardRec &amp;&amp; HazardRec-&gt;<a class="code" href="classllvm_1_1ScheduleHazardRecognizer.html#a4fa0c3ae8b49b41c767c6fd5eb7cde19">isEnabled</a>()) {</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;        <span class="keyword">delete</span> HazardRec;</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;        HazardRec = 0;</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;      }</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;      Available.<a class="code" href="classllvm_1_1ReadyQueue.html#a88f6acd4582a04ff78f46aca836c0b39">clear</a>();</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;      Pending.<a class="code" href="classllvm_1_1ReadyQueue.html#a88f6acd4582a04ff78f46aca836c0b39">clear</a>();</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;      CheckPending = <span class="keyword">false</span>;</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;      NextSUs.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#aa72472422d95c7052d62432ec279ff85">clear</a>();</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;      CurrCycle = 0;</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;      CurrMOps = 0;</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;      MinReadyCycle = UINT_MAX;</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;      ExpectedLatency = 0;</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;      DependentLatency = 0;</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;      RetiredMOps = 0;</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;      MaxExecutedResCount = 0;</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;      ZoneCritResIdx = 0;</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;      IsResourceLimited = <span class="keyword">false</span>;</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;      MaxObservedLatency = 0;</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;      <span class="comment">// Reserve a zero-count for invalid CritResIdx.</span></div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;      ExecutedResCounts.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a102d0ad36060677286c3aefb812e5512">resize</a>(1);</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;      assert(!ExecutedResCounts[0] &amp;&amp; <span class="stringliteral">&quot;nonzero count for bad resource&quot;</span>);</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    }</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;<span class="comment">    /// Pending queues extend the ready queues with the same ID and the</span></div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;<span class="comment">    /// PendingFlag set.</span></div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;<span class="comment"></span>    SchedBoundary(<span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;<a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>):</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;      DAG(0), SchedModel(0), Rem(0), Available(ID, Name+<span class="stringliteral">&quot;.A&quot;</span>),</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;      Pending(ID &lt;&lt; GenericScheduler::LogMaxQID, Name+<span class="stringliteral">&quot;.P&quot;</span>),</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;      HazardRec(0) {</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;      reset();</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;    }</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;    ~SchedBoundary() { <span class="keyword">delete</span> HazardRec; }</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">init</a>(<a class="code" href="classllvm_1_1ScheduleDAGMI.html">ScheduleDAGMI</a> *dag, <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetSchedModel.html">TargetSchedModel</a> *smodel,</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;              SchedRemainder *rem);</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;    <span class="keywordtype">bool</span> isTop()<span class="keyword"> const </span>{</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;      <span class="keywordflow">return</span> Available.<a class="code" href="classllvm_1_1ReadyQueue.html#a08554e1e3dc7795228cff0cb44dff7aa">getID</a>() == GenericScheduler::TopQID;</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    }</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *getResourceName(<span class="keywordtype">unsigned</span> PIdx) {</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;      <span class="keywordflow">if</span> (!PIdx)</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;MOps&quot;</span>;</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;      <span class="keywordflow">return</span> SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#ade2f5f4d11c824fa37234f3077d25be3">getProcResource</a>(PIdx)-&gt;<a class="code" href="structllvm_1_1MCProcResourceDesc.html#a51dc4747a7d39650884bcf19daaf5f54">Name</a>;</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;    }</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;<span class="comment">    /// Get the number of latency cycles &quot;covered&quot; by the scheduled</span></div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;<span class="comment">    /// instructions. This is the larger of the critical path within the zone</span></div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;<span class="comment">    /// and the number of cycles required to issue the instructions.</span></div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;<span class="comment"></span>    <span class="keywordtype">unsigned</span> getScheduledLatency()<span class="keyword"> const </span>{</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;      <span class="keywordflow">return</span> std::max(ExpectedLatency, CurrCycle);</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    }</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;    <span class="keywordtype">unsigned</span> getUnscheduledLatency(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU)<span class="keyword"> const </span>{</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;      <span class="keywordflow">return</span> isTop() ? SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#ab760185ba11bc474695d222b92373b76">getHeight</a>() : SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a3047721a8d33c2de8a261d2fecb340a6">getDepth</a>();</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;    }</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    <span class="keywordtype">unsigned</span> getResourceCount(<span class="keywordtype">unsigned</span> ResIdx)<span class="keyword"> const </span>{</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;      <span class="keywordflow">return</span> ExecutedResCounts[ResIdx];</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    }</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;<span class="comment">    /// Get the scaled count of scheduled micro-ops and resources, including</span></div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;<span class="comment">    /// executed resources.</span></div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;<span class="comment"></span>    <span class="keywordtype">unsigned</span> getCriticalCount()<span class="keyword"> const </span>{</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;      <span class="keywordflow">if</span> (!ZoneCritResIdx)</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;        <span class="keywordflow">return</span> RetiredMOps * SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#acfdce107adb48e168830b94af8db14c8">getMicroOpFactor</a>();</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;      <span class="keywordflow">return</span> getResourceCount(ZoneCritResIdx);</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    }</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;<span class="comment">    /// Get a scaled count for the minimum execution time of the scheduled</span></div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;<span class="comment">    /// micro-ops that are ready to execute by getExecutedCount. Notice the</span></div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;<span class="comment">    /// feedback loop.</span></div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;<span class="comment"></span>    <span class="keywordtype">unsigned</span> getExecutedCount()<span class="keyword"> const </span>{</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;      <span class="keywordflow">return</span> std::max(CurrCycle * SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#a394404bde05100988bcffcb2ea37de29">getLatencyFactor</a>(),</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;                      MaxExecutedResCount);</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;    }</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;    <span class="keywordtype">bool</span> checkHazard(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU);</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;    <span class="keywordtype">unsigned</span> findMaxLatency(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;SUnit*&gt;</a> ReadySUs);</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;    <span class="keywordtype">unsigned</span> getOtherResourceCount(<span class="keywordtype">unsigned</span> &amp;OtherCritIdx);</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;    <span class="keywordtype">void</span> setPolicy(CandPolicy &amp;Policy, SchedBoundary &amp;OtherZone);</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;    <span class="keywordtype">void</span> releaseNode(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU, <span class="keywordtype">unsigned</span> ReadyCycle);</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;    <span class="keywordtype">void</span> bumpCycle(<span class="keywordtype">unsigned</span> NextCycle);</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;    <span class="keywordtype">void</span> incExecutedResources(<span class="keywordtype">unsigned</span> PIdx, <span class="keywordtype">unsigned</span> Count);</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    <span class="keywordtype">unsigned</span> countResource(<span class="keywordtype">unsigned</span> PIdx, <span class="keywordtype">unsigned</span> Cycles, <span class="keywordtype">unsigned</span> ReadyCycle);</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;    <span class="keywordtype">void</span> bumpNode(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU);</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;    <span class="keywordtype">void</span> releasePending();</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;    <span class="keywordtype">void</span> removeReady(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU);</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *pickOnlyChoice();</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;    <span class="keywordtype">void</span> dumpScheduledState();</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;  };</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;  <span class="keyword">const</span> <a class="code" href="structllvm_1_1MachineSchedContext.html">MachineSchedContext</a> *Context;</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;  <a class="code" href="classllvm_1_1ScheduleDAGMI.html">ScheduleDAGMI</a> *DAG;</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetSchedModel.html">TargetSchedModel</a> *SchedModel;</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *TRI;</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;  <span class="comment">// State of the top and bottom scheduled instruction boundaries.</span></div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;  SchedRemainder Rem;</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;  SchedBoundary Top;</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;  SchedBoundary Bot;</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;  <a class="code" href="structllvm_1_1MachineSchedPolicy.html">MachineSchedPolicy</a> RegionPolicy;</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;<span class="keyword">public</span>:<span class="comment"></span></div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;<span class="comment">  /// SUnit::NodeQueueId: 0 (none), 1 (top), 2 (bot), 3 (both)</span></div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;<span class="comment"></span>  <span class="keyword">enum</span> {</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;    TopQID = 1,</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;    BotQID = 2,</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    LogMaxQID = 2</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;  };</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;  GenericScheduler(<span class="keyword">const</span> <a class="code" href="structllvm_1_1MachineSchedContext.html">MachineSchedContext</a> *C):</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    Context(C), DAG(0), SchedModel(0), TRI(0),</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    Top(TopQID, <span class="stringliteral">&quot;TopQ&quot;</span>), Bot(BotQID, <span class="stringliteral">&quot;BotQ&quot;</span>) {}</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> initPolicy(<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> Begin,</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;                          <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> End,</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;                          <span class="keywordtype">unsigned</span> NumRegionInstrs);</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;  <span class="keywordtype">bool</span> shouldTrackPressure()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> RegionPolicy.<a class="code" href="structllvm_1_1MachineSchedPolicy.html#aee4e3964174cee8cf362508ccef135ca">ShouldTrackPressure</a>; }</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="TargetLibraryInfo_8cpp.html#a487393c673177cc2b64bde6ab8fa60ae">initialize</a>(<a class="code" href="classllvm_1_1ScheduleDAGMI.html">ScheduleDAGMI</a> *dag);</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;  <span class="keyword">virtual</span> <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *pickNode(<span class="keywordtype">bool</span> &amp;IsTopNode);</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> schedNode(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU, <span class="keywordtype">bool</span> IsTopNode);</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> releaseTopNode(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU);</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> releaseBottomNode(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU);</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> registerRoots();</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;<span class="keyword">protected</span>:</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;  <span class="keywordtype">void</span> checkAcyclicLatency();</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;  <span class="keywordtype">void</span> tryCandidate(SchedCandidate &amp;Cand,</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;                    SchedCandidate &amp;TryCand,</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;                    SchedBoundary &amp;Zone,</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;                    <span class="keyword">const</span> <a class="code" href="classllvm_1_1RegPressureTracker.html">RegPressureTracker</a> &amp;RPTracker,</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;                    <a class="code" href="classllvm_1_1RegPressureTracker.html">RegPressureTracker</a> &amp;TempTracker);</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;  <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *pickNodeBidirectional(<span class="keywordtype">bool</span> &amp;IsTopNode);</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;  <span class="keywordtype">void</span> pickNodeFromQueue(SchedBoundary &amp;Zone,</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;                         <span class="keyword">const</span> <a class="code" href="classllvm_1_1RegPressureTracker.html">RegPressureTracker</a> &amp;RPTracker,</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;                         SchedCandidate &amp;Candidate);</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;  <span class="keywordtype">void</span> reschedulePhysRegCopies(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU, <span class="keywordtype">bool</span> isTop);</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;  <span class="keywordtype">void</span> traceCandidate(<span class="keyword">const</span> SchedCandidate &amp;Cand);</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;};</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;} <span class="comment">// namespace</span></div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">GenericScheduler::SchedRemainder::</a></div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;<a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">init</a>(<a class="code" href="classllvm_1_1ScheduleDAGMI.html">ScheduleDAGMI</a> *DAG, <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetSchedModel.html">TargetSchedModel</a> *SchedModel) {</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;  reset();</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;  <span class="keywordflow">if</span> (!SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#a82ca1bcea2c966addd442d7cfa49bf51">hasInstrSchedModel</a>())</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;  RemainingCounts.resize(SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#a91cde5aac43dc88d6ec26c441b39b7c9">getNumProcResourceKinds</a>());</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;  <span class="keywordflow">for</span> (std::vector&lt;SUnit&gt;::iterator</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;         <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAG.html#a3d5aacd5fc7d6a739ce913974ed1e53d">SUnits</a>.begin(), E = DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAG.html#a3d5aacd5fc7d6a739ce913974ed1e53d">SUnits</a>.end(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1MCSchedClassDesc.html">MCSchedClassDesc</a> *<a class="code" href="namespacellvm_1_1PPCISD.html#a69ad64696d1df3be05f01dfb67f5bc66a2ae057e4de45c51c89b7e5dc5053df62">SC</a> = DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#a6717374178b6677be5b2f5d227d312cf">getSchedClass</a>(&amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;    RemIssueCount += SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#a62c7a4fcb40a033c1f4ae7d45f7aa752">getNumMicroOps</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getInstr(), <a class="code" href="namespacellvm_1_1PPCISD.html#a69ad64696d1df3be05f01dfb67f5bc66a2ae057e4de45c51c89b7e5dc5053df62">SC</a>)</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;      * SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#acfdce107adb48e168830b94af8db14c8">getMicroOpFactor</a>();</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="structllvm_1_1MCWriteProcResEntry.html">TargetSchedModel::ProcResIter</a></div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;           PI = SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#a5d256b71a3153dae133d8e9d5a78cdda">getWriteProcResBegin</a>(SC),</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;           PE = SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#ae2b8849f34dbee13609f4b6ad84042b1">getWriteProcResEnd</a>(SC); PI != PE; ++PI) {</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;      <span class="keywordtype">unsigned</span> PIdx = PI-&gt;ProcResourceIdx;</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;      <span class="keywordtype">unsigned</span> Factor = SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#aa117767750c3ca738006fa1ab5c01345">getResourceFactor</a>(PIdx);</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;      RemainingCounts[PIdx] += (Factor * PI-&gt;Cycles);</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;    }</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;  }</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;}</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">GenericScheduler::SchedBoundary::</a></div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;<a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">init</a>(<a class="code" href="classllvm_1_1ScheduleDAGMI.html">ScheduleDAGMI</a> *dag, <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetSchedModel.html">TargetSchedModel</a> *smodel, SchedRemainder *rem) {</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;  reset();</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;  DAG = dag;</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;  SchedModel = smodel;</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;  Rem = rem;</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;  <span class="keywordflow">if</span> (SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#a82ca1bcea2c966addd442d7cfa49bf51">hasInstrSchedModel</a>())</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;    ExecutedResCounts.resize(SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#a91cde5aac43dc88d6ec26c441b39b7c9">getNumProcResourceKinds</a>());</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;}</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;<span class="comment">/// Initialize the per-region scheduling policy.</span></div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> GenericScheduler::initPolicy(<a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> Begin,</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;                                     <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> End,</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;                                     <span class="keywordtype">unsigned</span> NumRegionInstrs) {</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetMachine.html">TargetMachine</a> &amp;<a class="code" href="namespacellvm_1_1SystemZISD.html#a9a3c050e4bfe8d0d09d74c979f5bb121a68ace50a32835aa0562cf8f9694ba510">TM</a> = Context-&gt;MF-&gt;getTarget();</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;  <span class="comment">// Avoid setting up the register pressure tracker for small regions to save</span></div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;  <span class="comment">// compile time. As a rough heuristic, only track pressure when the number of</span></div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;  <span class="comment">// schedulable instructions exceeds half the integer register file.</span></div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;  <span class="keywordtype">unsigned</span> NIntRegs = Context-&gt;RegClassInfo-&gt;getNumAllocatableRegs(</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;    TM.<a class="code" href="classllvm_1_1TargetMachine.html#ac962b1af600c2e418625a5fecc5e0f95">getTargetLowering</a>()-&gt;<a class="code" href="classllvm_1_1TargetLoweringBase.html#a71b07ff24aaa94d58e0e7c35551728d5">getRegClassFor</a>(<a class="code" href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a>));</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;  RegionPolicy.ShouldTrackPressure = NumRegionInstrs &gt; (NIntRegs / 2);</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;  <span class="comment">// For generic targets, we default to bottom-up, because it&#39;s simpler and more</span></div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;  <span class="comment">// compile-time optimizations have been implemented in that direction.</span></div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;  RegionPolicy.OnlyBottomUp = <span class="keyword">true</span>;</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;  <span class="comment">// Allow the subtarget to override default policy.</span></div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetSubtargetInfo.html">TargetSubtargetInfo</a> &amp;<a class="code" href="namespacellvm_1_1A64DB.html#a6fce8157775f3ec93f326b52b0f1e0f5a4916e736d6b7cc68359b39d5eb50f6db">ST</a> = TM.<a class="code" href="classllvm_1_1TargetMachine.html#a5af2fed99951774b6a14d30ec6e73792">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1TargetSubtargetInfo.html">TargetSubtargetInfo</a>&gt;();</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;  ST.<a class="code" href="classllvm_1_1TargetSubtargetInfo.html#a932e522a631640bfbc75e835d0185360">overrideSchedPolicy</a>(RegionPolicy, Begin, End, NumRegionInstrs);</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;  <span class="comment">// After subtarget overrides, apply command line options.</span></div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;  <span class="keywordflow">if</span> (!EnableRegPressure)</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;    RegionPolicy.ShouldTrackPressure = <span class="keyword">false</span>;</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;  <span class="comment">// Check -misched-topdown/bottomup can force or unforce scheduling direction.</span></div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;  <span class="comment">// e.g. -misched-bottomup=false allows scheduling in both directions.</span></div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;  assert((!<a class="code" href="namespacellvm.html#a0081c790ccede18428a2821d166ef6c7">ForceTopDown</a> || !<a class="code" href="namespacellvm.html#a5638cb35554a0468f4c7a860e9c1ab47">ForceBottomUp</a>) &amp;&amp;</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;         <span class="stringliteral">&quot;-misched-topdown incompatible with -misched-bottomup&quot;</span>);</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a5638cb35554a0468f4c7a860e9c1ab47">ForceBottomUp</a>.getNumOccurrences() &gt; 0) {</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;    RegionPolicy.OnlyBottomUp = <a class="code" href="namespacellvm.html#a5638cb35554a0468f4c7a860e9c1ab47">ForceBottomUp</a>;</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;    <span class="keywordflow">if</span> (RegionPolicy.OnlyBottomUp)</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;      RegionPolicy.OnlyTopDown = <span class="keyword">false</span>;</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;  }</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a0081c790ccede18428a2821d166ef6c7">ForceTopDown</a>.getNumOccurrences() &gt; 0) {</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;    RegionPolicy.OnlyTopDown = <a class="code" href="namespacellvm.html#a0081c790ccede18428a2821d166ef6c7">ForceTopDown</a>;</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;    <span class="keywordflow">if</span> (RegionPolicy.OnlyTopDown)</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;      RegionPolicy.OnlyBottomUp = <span class="keyword">false</span>;</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;  }</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;}</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;<span class="keywordtype">void</span> <a class="code" href="TargetLibraryInfo_8cpp.html#a487393c673177cc2b64bde6ab8fa60ae">GenericScheduler::initialize</a>(<a class="code" href="classllvm_1_1ScheduleDAGMI.html">ScheduleDAGMI</a> *dag) {</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;  DAG = dag;</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;  SchedModel = DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#ab077d62392fe288ad041b43622d93346">getSchedModel</a>();</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;  TRI = DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAG.html#a418bc6d3f660325fa6d5b9fb269add62">TRI</a>;</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;  Rem.init(DAG, SchedModel);</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;  Top.init(DAG, SchedModel, &amp;Rem);</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;  Bot.init(DAG, SchedModel, &amp;Rem);</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;  <span class="comment">// Initialize resource counts.</span></div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;  <span class="comment">// Initialize the HazardRecognizers. If itineraries don&#39;t exist, are empty, or</span></div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;  <span class="comment">// are disabled, then these HazardRecs will be disabled.</span></div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1InstrItineraryData.html">InstrItineraryData</a> *Itin = SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#af1751469bbb5118836dc2b52bbec4341">getInstrItineraries</a>();</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetMachine.html">TargetMachine</a> &amp;<a class="code" href="namespacellvm_1_1SystemZISD.html#a9a3c050e4bfe8d0d09d74c979f5bb121a68ace50a32835aa0562cf8f9694ba510">TM</a> = DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAG.html#a5a3d3d075a208011a24a0918b58d7daa">MF</a>.<a class="code" href="classllvm_1_1MachineFunction.html#a6745c3bfdfc5b0643b078b96df2db252">getTarget</a>();</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;  <span class="keywordflow">if</span> (!Top.HazardRec) {</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;    Top.HazardRec =</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;      TM.<a class="code" href="classllvm_1_1TargetMachine.html#ac13d0f6f2c915757013b101ef6e8afbc">getInstrInfo</a>()-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#acfc76d1e10c53951754e601d83da0e0d">CreateTargetMIHazardRecognizer</a>(Itin, DAG);</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;  }</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;  <span class="keywordflow">if</span> (!Bot.HazardRec) {</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;    Bot.HazardRec =</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;      TM.<a class="code" href="classllvm_1_1TargetMachine.html#ac13d0f6f2c915757013b101ef6e8afbc">getInstrInfo</a>()-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#acfc76d1e10c53951754e601d83da0e0d">CreateTargetMIHazardRecognizer</a>(Itin, DAG);</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;  }</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;}</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;<span class="keywordtype">void</span> GenericScheduler::releaseTopNode(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU) {</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;  <span class="keywordflow">if</span> (SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a8c201d7a769bda1cd75d8d6788123068">isScheduled</a>)</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classT.html">SUnit::pred_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#ae2b43854b542de66eec6475adc48f56c">Preds</a>.begin(), E = SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#ae2b43854b542de66eec6475adc48f56c">Preds</a>.end();</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isWeak())</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;    <span class="keywordtype">unsigned</span> PredReadyCycle = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getSUnit()-&gt;TopReadyCycle;</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;    <span class="keywordtype">unsigned</span> Latency = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getLatency();</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;    Top.MaxObservedLatency = std::max(Latency, Top.MaxObservedLatency);</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;    <span class="keywordflow">if</span> (SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a> &lt; PredReadyCycle + Latency)</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;      SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a> = PredReadyCycle + Latency;</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;  }</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;  Top.releaseNode(SU, SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a>);</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;}</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;<span class="keywordtype">void</span> GenericScheduler::releaseBottomNode(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU) {</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;  <span class="keywordflow">if</span> (SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a8c201d7a769bda1cd75d8d6788123068">isScheduled</a>)</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;  assert(SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#adb119d63d924841b0523d67dfdd1bf61">getInstr</a>() &amp;&amp; <span class="stringliteral">&quot;Scheduled SUnit must have instr&quot;</span>);</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classT.html">SUnit::succ_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#aab4a86c51e6b126c9c6ef58dbb574431">Succs</a>.begin(), E = SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#aab4a86c51e6b126c9c6ef58dbb574431">Succs</a>.end();</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isWeak())</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    <span class="keywordtype">unsigned</span> SuccReadyCycle = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getSUnit()-&gt;BotReadyCycle;</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;    <span class="keywordtype">unsigned</span> Latency = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getLatency();</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;    Bot.MaxObservedLatency = std::max(Latency, Bot.MaxObservedLatency);</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    <span class="keywordflow">if</span> (SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a> &lt; SuccReadyCycle + Latency)</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;      SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a> = SuccReadyCycle + Latency;</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;  }</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;  Bot.releaseNode(SU, SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a>);</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;}</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;<span class="comment">/// Set IsAcyclicLatencyLimited if the acyclic path is longer than the cyclic</span></div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;<span class="comment">/// critical path by more cycles than it takes to drain the instruction buffer.</span></div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;<span class="comment">/// We estimate an upper bounds on in-flight instructions as:</span></div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;<span class="comment">/// CyclesPerIteration = max( CyclicPath, Loop-Resource-Height )</span></div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;<span class="comment">/// InFlightIterations = AcyclicPath / CyclesPerIteration</span></div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;<span class="comment">/// InFlightResources = InFlightIterations * LoopResources</span></div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;<span class="comment">/// TODO: Check execution resources in addition to IssueCount.</span></div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> GenericScheduler::checkAcyclicLatency() {</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;  <span class="keywordflow">if</span> (Rem.CyclicCritPath == 0 || Rem.CyclicCritPath &gt;= Rem.CriticalPath)</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;  <span class="comment">// Scaled number of cycles per loop iteration.</span></div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;  <span class="keywordtype">unsigned</span> IterCount =</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;    std::max(Rem.CyclicCritPath * SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#a394404bde05100988bcffcb2ea37de29">getLatencyFactor</a>(),</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;             Rem.RemIssueCount);</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;  <span class="comment">// Scaled acyclic critical path.</span></div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;  <span class="keywordtype">unsigned</span> AcyclicCount = Rem.CriticalPath * SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#a394404bde05100988bcffcb2ea37de29">getLatencyFactor</a>();</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;  <span class="comment">// InFlightCount = (AcyclicPath / IterCycles) * InstrPerLoop</span></div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;  <span class="keywordtype">unsigned</span> InFlightCount =</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;    (AcyclicCount * Rem.RemIssueCount + IterCount-1) / IterCount;</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;  <span class="keywordtype">unsigned</span> BufferLimit =</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;    SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#ab8240fcec8f27cce094f2fe582c56087">getMicroOpBufferSize</a>() * SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#acfdce107adb48e168830b94af8db14c8">getMicroOpFactor</a>();</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;  Rem.IsAcyclicLatencyLimited = InFlightCount &gt; BufferLimit;</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;IssueCycles=&quot;</span></div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;        &lt;&lt; Rem.RemIssueCount / SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#a394404bde05100988bcffcb2ea37de29">getLatencyFactor</a>() &lt;&lt; <span class="stringliteral">&quot;c &quot;</span></div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;IterCycles=&quot;</span> &lt;&lt; IterCount / SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#a394404bde05100988bcffcb2ea37de29">getLatencyFactor</a>()</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;c NumIters=&quot;</span> &lt;&lt; (AcyclicCount + IterCount-1) / IterCount</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;        &lt;&lt; <span class="stringliteral">&quot; InFlight=&quot;</span> &lt;&lt; InFlightCount / SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#acfdce107adb48e168830b94af8db14c8">getMicroOpFactor</a>()</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;m BufferLim=&quot;</span> &lt;&lt; SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#ab8240fcec8f27cce094f2fe582c56087">getMicroOpBufferSize</a>() &lt;&lt; <span class="stringliteral">&quot;m\n&quot;</span>;</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;        <span class="keywordflow">if</span> (Rem.IsAcyclicLatencyLimited)</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  ACYCLIC LATENCY LIMIT\n&quot;</span>);</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;}</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;<span class="keywordtype">void</span> GenericScheduler::registerRoots() {</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;  Rem.CriticalPath = DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAG.html#af81f734d7fb268c95c1c63c399a7c4a6">ExitSU</a>.<a class="code" href="classllvm_1_1SUnit.html#a3047721a8d33c2de8a261d2fecb340a6">getDepth</a>();</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;  <span class="comment">// Some roots may not feed into ExitSU. Check all of them in case.</span></div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;  <span class="keywordflow">for</span> (std::vector&lt;SUnit*&gt;::const_iterator</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;         <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Bot.Available.begin(), E = Bot.Available.end(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;    <span class="keywordflow">if</span> ((*I)-&gt;getDepth() &gt; Rem.CriticalPath)</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;      Rem.CriticalPath = (*I)-&gt;getDepth();</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;  }</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Critical Path: &quot;</span> &lt;&lt; Rem.CriticalPath &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;  <span class="keywordflow">if</span> (EnableCyclicPath) {</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;    Rem.CyclicCritPath = DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a5ac888a46c343b2075fc84f2297be17a">computeCyclicCriticalPath</a>();</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;    checkAcyclicLatency();</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;  }</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;}</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;<span class="comment">/// Does this SU have a hazard within the current instruction group.</span></div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;<span class="comment">/// The scheduler supports two modes of hazard recognition. The first is the</span></div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;<span class="comment">/// ScheduleHazardRecognizer API. It is a fully general hazard recognizer that</span></div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;<span class="comment">/// supports highly complicated in-order reservation tables</span></div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;<span class="comment">/// (ScoreboardHazardRecognizer) and arbitraty target-specific logic.</span></div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;<span class="comment">/// The second is a streamlined mechanism that checks for hazards based on</span></div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;<span class="comment">/// simple counters that the scheduler itself maintains. It explicitly checks</span></div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;<span class="comment">/// for instruction dispatch limitations, including the number of micro-ops that</span></div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;<span class="comment">/// can dispatch per cycle.</span></div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;<span class="comment">/// TODO: Also check whether the SU must start a new group.</span></div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> GenericScheduler::SchedBoundary::checkHazard(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU) {</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;  <span class="keywordflow">if</span> (HazardRec-&gt;isEnabled())</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;    <span class="keywordflow">return</span> HazardRec-&gt;getHazardType(SU) != <a class="code" href="classllvm_1_1ScheduleHazardRecognizer.html#a9bec0e329b12bbc503d08db497d43267a4e42ac50bfd060349e49904842121cf1">ScheduleHazardRecognizer::NoHazard</a>;</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;  <span class="keywordtype">unsigned</span> uops = SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#a62c7a4fcb40a033c1f4ae7d45f7aa752">getNumMicroOps</a>(SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#adb119d63d924841b0523d67dfdd1bf61">getInstr</a>());</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;  <span class="keywordflow">if</span> ((CurrMOps &gt; 0) &amp;&amp; (CurrMOps + uops &gt; SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#af47df2f59b2ccb5c28f3ae40aacc4443">getIssueWidth</a>())) {</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  SU(&quot;</span> &lt;&lt; SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; <span class="stringliteral">&quot;) uops=&quot;</span></div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;          &lt;&lt; SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#a62c7a4fcb40a033c1f4ae7d45f7aa752">getNumMicroOps</a>(SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#adb119d63d924841b0523d67dfdd1bf61">getInstr</a>()) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;  }</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;}</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;<span class="comment">// Find the unscheduled node in ReadySUs with the highest latency.</span></div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;<span class="keywordtype">unsigned</span> GenericScheduler::SchedBoundary::</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;findMaxLatency(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;SUnit*&gt;</a> ReadySUs) {</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;  <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *LateSU = 0;</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;  <span class="keywordtype">unsigned</span> RemLatency = 0;</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Attribute.html">ArrayRef&lt;SUnit*&gt;::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = ReadySUs.<a class="code" href="classllvm_1_1ArrayRef.html#a836367b39ed630bf14db99923c22740e">begin</a>(), E = ReadySUs.<a class="code" href="classllvm_1_1ArrayRef.html#a38ed8cc3c342ad6910e8c869d3e2b9cf">end</a>();</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;    <span class="keywordtype">unsigned</span> L = getUnscheduledLatency(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;    <span class="keywordflow">if</span> (L &gt; RemLatency) {</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;      RemLatency = L;</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;      LateSU = *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;    }</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;  }</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;  <span class="keywordflow">if</span> (LateSU) {</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; Available.getName() &lt;&lt; <span class="stringliteral">&quot; RemLatency SU(&quot;</span></div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;          &lt;&lt; LateSU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; <span class="stringliteral">&quot;) &quot;</span> &lt;&lt; RemLatency &lt;&lt; <span class="stringliteral">&quot;c\n&quot;</span>);</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;  }</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;  <span class="keywordflow">return</span> RemLatency;</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;}</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;<span class="comment">// Count resources in this zone and the remaining unscheduled</span></div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;<span class="comment">// instruction. Return the max count, scaled. Set OtherCritIdx to the critical</span></div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;<span class="comment">// resource index, or zero if the zone is issue limited.</span></div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;<span class="keywordtype">unsigned</span> GenericScheduler::SchedBoundary::</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;getOtherResourceCount(<span class="keywordtype">unsigned</span> &amp;OtherCritIdx) {</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;  OtherCritIdx = 0;</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;  <span class="keywordflow">if</span> (!SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#a82ca1bcea2c966addd442d7cfa49bf51">hasInstrSchedModel</a>())</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;  <span class="keywordtype">unsigned</span> OtherCritCount = Rem-&gt;RemIssueCount</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;    + (RetiredMOps * SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#acfdce107adb48e168830b94af8db14c8">getMicroOpFactor</a>());</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> &lt;&lt; Available.getName() &lt;&lt; <span class="stringliteral">&quot; + Remain MOps: &quot;</span></div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;        &lt;&lt; OtherCritCount / SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#acfdce107adb48e168830b94af8db14c8">getMicroOpFactor</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> PIdx = 1, PEnd = SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#a91cde5aac43dc88d6ec26c441b39b7c9">getNumProcResourceKinds</a>();</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;       PIdx != PEnd; ++PIdx) {</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;    <span class="keywordtype">unsigned</span> OtherCount = getResourceCount(PIdx) + Rem-&gt;RemainingCounts[PIdx];</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;    <span class="keywordflow">if</span> (OtherCount &gt; OtherCritCount) {</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;      OtherCritCount = OtherCount;</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;      OtherCritIdx = PIdx;</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;    }</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;  }</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;  <span class="keywordflow">if</span> (OtherCritIdx) {</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> &lt;&lt; Available.getName() &lt;&lt; <span class="stringliteral">&quot; + Remain CritRes: &quot;</span></div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;          &lt;&lt; OtherCritCount / SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#aa117767750c3ca738006fa1ab5c01345">getResourceFactor</a>(OtherCritIdx)</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;          &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; getResourceName(OtherCritIdx) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;  }</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;  <span class="keywordflow">return</span> OtherCritCount;</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;}</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;<span class="comment">/// Set the CandPolicy for this zone given the current resources and latencies</span></div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;<span class="comment">/// inside and outside the zone.</span></div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> GenericScheduler::SchedBoundary::setPolicy(CandPolicy &amp;Policy,</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;                                                   SchedBoundary &amp;OtherZone) {</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;  <span class="comment">// Now that potential stalls have been considered, apply preemptive heuristics</span></div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;  <span class="comment">// based on the the total latency and resources inside and outside this</span></div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;  <span class="comment">// zone.</span></div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;  <span class="comment">// Compute remaining latency. We need this both to determine whether the</span></div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;  <span class="comment">// overall schedule has become latency-limited and whether the instructions</span></div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;  <span class="comment">// outside this zone are resource or latency limited.</span></div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;  <span class="comment">// The &quot;dependent&quot; latency is updated incrementally during scheduling as the</span></div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;  <span class="comment">// max height/depth of scheduled nodes minus the cycles since it was</span></div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;  <span class="comment">// scheduled:</span></div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;  <span class="comment">//   DLat = max (N.depth - (CurrCycle - N.ReadyCycle) for N in Zone</span></div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;  <span class="comment">// The &quot;independent&quot; latency is the max ready queue depth:</span></div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;  <span class="comment">//   ILat = max N.depth for N in Available|Pending</span></div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;  <span class="comment">// RemainingLatency is the greater of independent and dependent latency.</span></div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;  <span class="keywordtype">unsigned</span> RemLatency = DependentLatency;</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;  RemLatency = std::max(RemLatency, findMaxLatency(Available.elements()));</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;  RemLatency = std::max(RemLatency, findMaxLatency(Pending.elements()));</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;  <span class="comment">// Compute the critical resource outside the zone.</span></div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;  <span class="keywordtype">unsigned</span> OtherCritIdx;</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;  <span class="keywordtype">unsigned</span> OtherCount = OtherZone.getOtherResourceCount(OtherCritIdx);</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;  <span class="keywordtype">bool</span> OtherResLimited = <span class="keyword">false</span>;</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;  <span class="keywordflow">if</span> (SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#a82ca1bcea2c966addd442d7cfa49bf51">hasInstrSchedModel</a>()) {</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;    <span class="keywordtype">unsigned</span> LFactor = SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#a394404bde05100988bcffcb2ea37de29">getLatencyFactor</a>();</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;    OtherResLimited = (<a class="code" href="Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a>)(OtherCount - (RemLatency * LFactor)) &gt; (<span class="keywordtype">int</span>)LFactor;</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;  }</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;  <span class="keywordflow">if</span> (!OtherResLimited &amp;&amp; (RemLatency + CurrCycle &gt; Rem-&gt;CriticalPath)) {</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;    Policy.ReduceLatency |= <span class="keyword">true</span>;</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> &lt;&lt; Available.getName() &lt;&lt; <span class="stringliteral">&quot; RemainingLatency &quot;</span></div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;          &lt;&lt; RemLatency &lt;&lt; <span class="stringliteral">&quot; + &quot;</span> &lt;&lt; CurrCycle &lt;&lt; <span class="stringliteral">&quot;c &gt; CritPath &quot;</span></div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;          &lt;&lt; Rem-&gt;CriticalPath &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;  }</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;  <span class="comment">// If the same resource is limiting inside and outside the zone, do nothing.</span></div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;  <span class="keywordflow">if</span> (ZoneCritResIdx == OtherCritIdx)</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;    <span class="keywordflow">if</span> (IsResourceLimited) {</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> &lt;&lt; Available.getName() &lt;&lt; <span class="stringliteral">&quot; ResourceLimited: &quot;</span></div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;             &lt;&lt; getResourceName(ZoneCritResIdx) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;    }</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;    <span class="keywordflow">if</span> (OtherResLimited)</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  RemainingLimit: &quot;</span> &lt;&lt; getResourceName(OtherCritIdx) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;    <span class="keywordflow">if</span> (!IsResourceLimited &amp;&amp; !OtherResLimited)</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Latency limited both directions.\n&quot;</span>);</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;  <span class="keywordflow">if</span> (IsResourceLimited &amp;&amp; !Policy.ReduceResIdx)</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;    Policy.ReduceResIdx = ZoneCritResIdx;</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;  <span class="keywordflow">if</span> (OtherResLimited)</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;    Policy.DemandResIdx = OtherCritIdx;</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;}</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;<span class="keywordtype">void</span> GenericScheduler::SchedBoundary::releaseNode(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU,</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;                                                     <span class="keywordtype">unsigned</span> ReadyCycle) {</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;  <span class="keywordflow">if</span> (ReadyCycle &lt; MinReadyCycle)</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;    MinReadyCycle = ReadyCycle;</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;  <span class="comment">// Check for interlocks first. For the purpose of other heuristics, an</span></div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;  <span class="comment">// instruction that cannot issue appears as if it&#39;s not in the ReadyQueue.</span></div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;  <span class="keywordtype">bool</span> IsBuffered = SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#ab8240fcec8f27cce094f2fe582c56087">getMicroOpBufferSize</a>() != 0;</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;  <span class="keywordflow">if</span> ((!IsBuffered &amp;&amp; ReadyCycle &gt; CurrCycle) || checkHazard(SU))</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;    Pending.push(SU);</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;    Available.push(SU);</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;  <span class="comment">// Record this node as an immediate dependent of the scheduled node.</span></div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;  NextSUs.insert(SU);</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;}</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;<span class="comment">/// Move the boundary of scheduled code by one cycle.</span></div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> GenericScheduler::SchedBoundary::bumpCycle(<span class="keywordtype">unsigned</span> NextCycle) {</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;  <span class="keywordflow">if</span> (SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#ab8240fcec8f27cce094f2fe582c56087">getMicroOpBufferSize</a>() == 0) {</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;    assert(MinReadyCycle &lt; UINT_MAX &amp;&amp; <span class="stringliteral">&quot;MinReadyCycle uninitialized&quot;</span>);</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;    <span class="keywordflow">if</span> (MinReadyCycle &gt; NextCycle)</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;      NextCycle = MinReadyCycle;</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;  }</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;  <span class="comment">// Update the current micro-ops, which will issue in the next cycle.</span></div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;  <span class="keywordtype">unsigned</span> DecMOps = SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#af47df2f59b2ccb5c28f3ae40aacc4443">getIssueWidth</a>() * (NextCycle - CurrCycle);</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;  CurrMOps = (CurrMOps &lt;= DecMOps) ? 0 : CurrMOps - DecMOps;</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;  <span class="comment">// Decrement DependentLatency based on the next cycle.</span></div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;  <span class="keywordflow">if</span> ((NextCycle - CurrCycle) &gt; DependentLatency)</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;    DependentLatency = 0;</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;    DependentLatency -= (NextCycle - CurrCycle);</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;  <span class="keywordflow">if</span> (!HazardRec-&gt;isEnabled()) {</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;    <span class="comment">// Bypass HazardRec virtual calls.</span></div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;    CurrCycle = NextCycle;</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;  }</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;  <span class="keywordflow">else</span> {</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;    <span class="comment">// Bypass getHazardType calls in case of long latency.</span></div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;    <span class="keywordflow">for</span> (; CurrCycle != NextCycle; ++CurrCycle) {</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;      <span class="keywordflow">if</span> (isTop())</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;        HazardRec-&gt;AdvanceCycle();</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;        HazardRec-&gt;RecedeCycle();</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;    }</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;  }</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;  CheckPending = <span class="keyword">true</span>;</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;  <span class="keywordtype">unsigned</span> LFactor = SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#a394404bde05100988bcffcb2ea37de29">getLatencyFactor</a>();</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;  IsResourceLimited =</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;    (<a class="code" href="Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a>)(getCriticalCount() - (getScheduledLatency() * LFactor))</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;    &gt; (<a class="code" href="Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a>)LFactor;</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Cycle: &quot;</span> &lt;&lt; CurrCycle &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; Available.getName() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;}</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;<span class="keywordtype">void</span> GenericScheduler::SchedBoundary::incExecutedResources(<span class="keywordtype">unsigned</span> PIdx,</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;                                                              <span class="keywordtype">unsigned</span> Count) {</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;  ExecutedResCounts[PIdx] += Count;</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;  <span class="keywordflow">if</span> (ExecutedResCounts[PIdx] &gt; MaxExecutedResCount)</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;    MaxExecutedResCount = ExecutedResCounts[PIdx];</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;}</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;<span class="comment">/// Add the given processor resource to this scheduled zone.</span></div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;<span class="comment">/// \param Cycles indicates the number of consecutive (non-pipelined) cycles</span></div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;<span class="comment">/// during which this resource is consumed.</span></div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;<span class="comment">/// \return the next cycle at which the instruction may execute without</span></div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;<span class="comment">/// oversubscribing resources.</span></div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;<span class="comment"></span><span class="keywordtype">unsigned</span> GenericScheduler::SchedBoundary::</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;countResource(<span class="keywordtype">unsigned</span> PIdx, <span class="keywordtype">unsigned</span> Cycles, <span class="keywordtype">unsigned</span> ReadyCycle) {</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;  <span class="keywordtype">unsigned</span> Factor = SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#aa117767750c3ca738006fa1ab5c01345">getResourceFactor</a>(PIdx);</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;  <span class="keywordtype">unsigned</span> Count = Factor * Cycles;</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> &lt;&lt; getResourceName(PIdx)</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;        &lt;&lt; <span class="stringliteral">&quot; +&quot;</span> &lt;&lt; Cycles &lt;&lt; <span class="stringliteral">&quot;x&quot;</span> &lt;&lt; Factor &lt;&lt; <span class="stringliteral">&quot;u\n&quot;</span>);</div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;  <span class="comment">// Update Executed resources counts.</span></div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;  incExecutedResources(PIdx, Count);</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;  assert(Rem-&gt;RemainingCounts[PIdx] &gt;= Count &amp;&amp; <span class="stringliteral">&quot;resource double counted&quot;</span>);</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;  Rem-&gt;RemainingCounts[PIdx] -= Count;</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;  <span class="comment">// Check if this resource exceeds the current critical resource. If so, it</span></div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;  <span class="comment">// becomes the critical resource.</span></div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;  <span class="keywordflow">if</span> (ZoneCritResIdx != PIdx &amp;&amp; (getResourceCount(PIdx) &gt; getCriticalCount())) {</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;    ZoneCritResIdx = PIdx;</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  *** Critical resource &quot;</span></div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;          &lt;&lt; getResourceName(PIdx) &lt;&lt; <span class="stringliteral">&quot;: &quot;</span></div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;          &lt;&lt; getResourceCount(PIdx) / SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#a394404bde05100988bcffcb2ea37de29">getLatencyFactor</a>() &lt;&lt; <span class="stringliteral">&quot;c\n&quot;</span>);</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;  }</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;  <span class="comment">// TODO: We don&#39;t yet model reserved resources. It&#39;s not hard though.</span></div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;  <span class="keywordflow">return</span> CurrCycle;</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;}</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;<span class="comment">/// Move the boundary of scheduled code by one SUnit.</span></div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> GenericScheduler::SchedBoundary::bumpNode(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU) {</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;  <span class="comment">// Update the reservation table.</span></div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;  <span class="keywordflow">if</span> (HazardRec-&gt;isEnabled()) {</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;    <span class="keywordflow">if</span> (!isTop() &amp;&amp; SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a0be1f84d53e90c247d75f2ed63636761">isCall</a>) {</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;      <span class="comment">// Calls are scheduled with their preceding instructions. For bottom-up</span></div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;      <span class="comment">// scheduling, clear the pipeline state before emitting.</span></div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;      HazardRec-&gt;Reset();</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;    }</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;    HazardRec-&gt;EmitInstruction(SU);</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;  }</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;  <span class="keyword">const</span> <a class="code" href="structllvm_1_1MCSchedClassDesc.html">MCSchedClassDesc</a> *<a class="code" href="namespacellvm_1_1PPCISD.html#a69ad64696d1df3be05f01dfb67f5bc66a2ae057e4de45c51c89b7e5dc5053df62">SC</a> = DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#a6717374178b6677be5b2f5d227d312cf">getSchedClass</a>(SU);</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;  <span class="keywordtype">unsigned</span> IncMOps = SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#a62c7a4fcb40a033c1f4ae7d45f7aa752">getNumMicroOps</a>(SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#adb119d63d924841b0523d67dfdd1bf61">getInstr</a>());</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;  CurrMOps += IncMOps;</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;  <span class="comment">// checkHazard prevents scheduling multiple instructions per cycle that exceed</span></div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;  <span class="comment">// issue width. However, we commonly reach the maximum. In this case</span></div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;  <span class="comment">// opportunistically bump the cycle to avoid uselessly checking everything in</span></div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;  <span class="comment">// the readyQ. Furthermore, a single instruction may produce more than one</span></div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;  <span class="comment">// cycle&#39;s worth of micro-ops.</span></div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;  <span class="comment">// TODO: Also check if this SU must end a dispatch group.</span></div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;  <span class="keywordtype">unsigned</span> NextCycle = CurrCycle;</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;  <span class="keywordflow">if</span> (CurrMOps &gt;= SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#af47df2f59b2ccb5c28f3ae40aacc4443">getIssueWidth</a>()) {</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;    ++NextCycle;</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  *** Max MOps &quot;</span> &lt;&lt; CurrMOps</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;          &lt;&lt; <span class="stringliteral">&quot; at cycle &quot;</span> &lt;&lt; CurrCycle &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;  }</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;  <span class="keywordtype">unsigned</span> ReadyCycle = (isTop() ? SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a> : SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a>);</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Ready @&quot;</span> &lt;&lt; ReadyCycle &lt;&lt; <span class="stringliteral">&quot;c\n&quot;</span>);</div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;  <span class="keywordflow">switch</span> (SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#ab8240fcec8f27cce094f2fe582c56087">getMicroOpBufferSize</a>()) {</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;  <span class="keywordflow">case</span> 0:</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;    assert(ReadyCycle &lt;= CurrCycle &amp;&amp; <span class="stringliteral">&quot;Broken PendingQueue&quot;</span>);</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;  <span class="keywordflow">case</span> 1:</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;    <span class="keywordflow">if</span> (ReadyCycle &gt; NextCycle) {</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;      NextCycle = ReadyCycle;</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  *** Stall until: &quot;</span> &lt;&lt; ReadyCycle &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;    }</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;  <span class="keywordflow">default</span>:</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;    <span class="comment">// We don&#39;t currently model the OOO reorder buffer, so consider all</span></div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;    <span class="comment">// scheduled MOps to be &quot;retired&quot;.</span></div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;  }</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;  RetiredMOps += IncMOps;</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;  <span class="comment">// Update resource counts and critical resource.</span></div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;  <span class="keywordflow">if</span> (SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#a82ca1bcea2c966addd442d7cfa49bf51">hasInstrSchedModel</a>()) {</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;    <span class="keywordtype">unsigned</span> DecRemIssue = IncMOps * SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#acfdce107adb48e168830b94af8db14c8">getMicroOpFactor</a>();</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;    assert(Rem-&gt;RemIssueCount &gt;= DecRemIssue &amp;&amp; <span class="stringliteral">&quot;MOps double counted&quot;</span>);</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;    Rem-&gt;RemIssueCount -= DecRemIssue;</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;    <span class="keywordflow">if</span> (ZoneCritResIdx) {</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;      <span class="comment">// Scale scheduled micro-ops for comparing with the critical resource.</span></div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;      <span class="keywordtype">unsigned</span> ScaledMOps =</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;        RetiredMOps * SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#acfdce107adb48e168830b94af8db14c8">getMicroOpFactor</a>();</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;      <span class="comment">// If scaled micro-ops are now more than the previous critical resource by</span></div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;      <span class="comment">// a full cycle, then micro-ops issue becomes critical.</span></div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;      <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>)(ScaledMOps - getResourceCount(ZoneCritResIdx))</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;          &gt;= (<span class="keywordtype">int</span>)SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#a394404bde05100988bcffcb2ea37de29">getLatencyFactor</a>()) {</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;        ZoneCritResIdx = 0;</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;        <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  *** Critical resource NumMicroOps: &quot;</span></div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;              &lt;&lt; ScaledMOps / SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#a394404bde05100988bcffcb2ea37de29">getLatencyFactor</a>() &lt;&lt; <span class="stringliteral">&quot;c\n&quot;</span>);</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;      }</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;    }</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="structllvm_1_1MCWriteProcResEntry.html">TargetSchedModel::ProcResIter</a></div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;           PI = SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#a5d256b71a3153dae133d8e9d5a78cdda">getWriteProcResBegin</a>(SC),</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;           PE = SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#ae2b8849f34dbee13609f4b6ad84042b1">getWriteProcResEnd</a>(SC); PI != PE; ++PI) {</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;      <span class="keywordtype">unsigned</span> RCycle =</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;        countResource(PI-&gt;ProcResourceIdx, PI-&gt;Cycles, ReadyCycle);</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;      <span class="keywordflow">if</span> (RCycle &gt; NextCycle)</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;        NextCycle = RCycle;</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;    }</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;  }</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;  <span class="comment">// Update ExpectedLatency and DependentLatency.</span></div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;  <span class="keywordtype">unsigned</span> &amp;TopLatency = isTop() ? ExpectedLatency : DependentLatency;</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;  <span class="keywordtype">unsigned</span> &amp;BotLatency = isTop() ? DependentLatency : ExpectedLatency;</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;  <span class="keywordflow">if</span> (SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a3047721a8d33c2de8a261d2fecb340a6">getDepth</a>() &gt; TopLatency) {</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;    TopLatency = SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a3047721a8d33c2de8a261d2fecb340a6">getDepth</a>();</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> &lt;&lt; Available.getName()</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;          &lt;&lt; <span class="stringliteral">&quot; TopLatency SU(&quot;</span> &lt;&lt; SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; <span class="stringliteral">&quot;) &quot;</span> &lt;&lt; TopLatency &lt;&lt; <span class="stringliteral">&quot;c\n&quot;</span>);</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;  }</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;  <span class="keywordflow">if</span> (SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#ab760185ba11bc474695d222b92373b76">getHeight</a>() &gt; BotLatency) {</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;    BotLatency = SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#ab760185ba11bc474695d222b92373b76">getHeight</a>();</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> &lt;&lt; Available.getName()</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;          &lt;&lt; <span class="stringliteral">&quot; BotLatency SU(&quot;</span> &lt;&lt; SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; <span class="stringliteral">&quot;) &quot;</span> &lt;&lt; BotLatency &lt;&lt; <span class="stringliteral">&quot;c\n&quot;</span>);</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;  }</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;  <span class="comment">// If we stall for any reason, bump the cycle.</span></div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;  <span class="keywordflow">if</span> (NextCycle &gt; CurrCycle) {</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;    bumpCycle(NextCycle);</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;  }</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;  <span class="keywordflow">else</span> {</div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;    <span class="comment">// After updating ZoneCritResIdx and ExpectedLatency, check if we&#39;re</span></div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;    <span class="comment">// resource limited. If a stall occured, bumpCycle does this.</span></div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;    <span class="keywordtype">unsigned</span> LFactor = SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#a394404bde05100988bcffcb2ea37de29">getLatencyFactor</a>();</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;    IsResourceLimited =</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;      (<a class="code" href="Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a>)(getCriticalCount() - (getScheduledLatency() * LFactor))</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;      &gt; (<a class="code" href="Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a>)LFactor;</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;  }</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(dumpScheduledState());</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;}</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;<span class="comment">/// Release pending ready nodes in to the available queue. This makes them</span></div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;<span class="comment">/// visible to heuristics.</span></div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> GenericScheduler::SchedBoundary::releasePending() {</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;  <span class="comment">// If the available queue is empty, it is safe to reset MinReadyCycle.</span></div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;  <span class="keywordflow">if</span> (Available.empty())</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;    MinReadyCycle = UINT_MAX;</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;  <span class="comment">// Check to see if any of the pending instructions are ready to issue.  If</span></div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;  <span class="comment">// so, add them to the available queue.</span></div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;  <span class="keywordtype">bool</span> IsBuffered = SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#ab8240fcec8f27cce094f2fe582c56087">getMicroOpBufferSize</a>() != 0;</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = Pending.size(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;    <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU = *(Pending.begin()+<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;    <span class="keywordtype">unsigned</span> ReadyCycle = isTop() ? SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a> : SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a>;</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;    <span class="keywordflow">if</span> (ReadyCycle &lt; MinReadyCycle)</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;      MinReadyCycle = ReadyCycle;</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;    <span class="keywordflow">if</span> (!IsBuffered &amp;&amp; ReadyCycle &gt; CurrCycle)</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;    <span class="keywordflow">if</span> (checkHazard(SU))</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;    Available.push(SU);</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;    Pending.remove(Pending.begin()+<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;    --<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>; --e;</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;  }</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<span class="keywordflow">if</span> (!Pending.empty()) Pending.dump());</div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;  CheckPending = <span class="keyword">false</span>;</div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;}</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;<span class="comment">/// Remove SU from the ready set for this boundary.</span></div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> GenericScheduler::SchedBoundary::removeReady(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU) {</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;  <span class="keywordflow">if</span> (Available.isInQueue(SU))</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;    Available.remove(Available.find(SU));</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;  <span class="keywordflow">else</span> {</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;    assert(Pending.isInQueue(SU) &amp;&amp; <span class="stringliteral">&quot;bad ready count&quot;</span>);</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;    Pending.remove(Pending.find(SU));</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;  }</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;}</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;<span class="comment">/// If this queue only has one ready candidate, return it. As a side effect,</span></div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;<span class="comment">/// defer any nodes that now hit a hazard, and advance the cycle until at least</span></div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;<span class="comment">/// one node is ready. If multiple instructions are ready, return NULL.</span></div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *GenericScheduler::SchedBoundary::pickOnlyChoice() {</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;  <span class="keywordflow">if</span> (CheckPending)</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;    releasePending();</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;  <span class="keywordflow">if</span> (CurrMOps &gt; 0) {</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;    <span class="comment">// Defer any ready instrs that now have a hazard.</span></div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ReadyQueue.html#a4eb7129f3c04895463609956568a5e70">ReadyQueue::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Available.begin(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != Available.end();) {</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;      <span class="keywordflow">if</span> (checkHazard(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;        Pending.push(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;        <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Available.remove(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;      }</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;      ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;    }</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;  }</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; Available.empty(); ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;    assert(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;= (HazardRec-&gt;getMaxLookAhead() + MaxObservedLatency) &amp;&amp;</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;           <span class="stringliteral">&quot;permanent hazard&quot;</span>); (void)<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;    bumpCycle(CurrCycle + 1);</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;    releasePending();</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;  }</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;  <span class="keywordflow">if</span> (Available.size() == 1)</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;    <span class="keywordflow">return</span> *Available.begin();</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;  <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;}</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;<span class="comment">// This is useful information to dump after bumpNode.</span></div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;<span class="comment">// Note that the Queue contents are more useful before pickNodeFromQueue.</span></div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;<span class="keywordtype">void</span> GenericScheduler::SchedBoundary::dumpScheduledState() {</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;  <span class="keywordtype">unsigned</span> ResFactor;</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;  <span class="keywordtype">unsigned</span> ResCount;</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;  <span class="keywordflow">if</span> (ZoneCritResIdx) {</div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;    ResFactor = SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#aa117767750c3ca738006fa1ab5c01345">getResourceFactor</a>(ZoneCritResIdx);</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;    ResCount = getResourceCount(ZoneCritResIdx);</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;  }</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;  <span class="keywordflow">else</span> {</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;    ResFactor = SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#acfdce107adb48e168830b94af8db14c8">getMicroOpFactor</a>();</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;    ResCount = RetiredMOps * SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#acfdce107adb48e168830b94af8db14c8">getMicroOpFactor</a>();</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;  }</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;  <span class="keywordtype">unsigned</span> LFactor = SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#a394404bde05100988bcffcb2ea37de29">getLatencyFactor</a>();</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;  <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; Available.getName() &lt;&lt; <span class="stringliteral">&quot; @&quot;</span> &lt;&lt; CurrCycle &lt;&lt; <span class="stringliteral">&quot;c\n&quot;</span></div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;         &lt;&lt; <span class="stringliteral">&quot;  Retired: &quot;</span> &lt;&lt; RetiredMOps;</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;  <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n  Executed: &quot;</span> &lt;&lt; getExecutedCount() / LFactor &lt;&lt; <span class="stringliteral">&quot;c&quot;</span>;</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;  <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n  Critical: &quot;</span> &lt;&lt; ResCount / LFactor &lt;&lt; <span class="stringliteral">&quot;c, &quot;</span></div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;         &lt;&lt; ResCount / ResFactor &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; getResourceName(ZoneCritResIdx)</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;         &lt;&lt; <span class="stringliteral">&quot;\n  ExpectedLatency: &quot;</span> &lt;&lt; ExpectedLatency &lt;&lt; <span class="stringliteral">&quot;c\n&quot;</span></div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;         &lt;&lt; (IsResourceLimited ? <span class="stringliteral">&quot;  - Resource&quot;</span> : <span class="stringliteral">&quot;  - Latency&quot;</span>)</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;         &lt;&lt; <span class="stringliteral">&quot; limited.\n&quot;</span>;</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;}</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;<span class="keywordtype">void</span> GenericScheduler::SchedCandidate::</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;initResourceDelta(<span class="keyword">const</span> <a class="code" href="classllvm_1_1ScheduleDAGMI.html">ScheduleDAGMI</a> *DAG,</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;                  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetSchedModel.html">TargetSchedModel</a> *SchedModel) {</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;  <span class="keywordflow">if</span> (!Policy.ReduceResIdx &amp;&amp; !Policy.DemandResIdx)</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;  <span class="keyword">const</span> <a class="code" href="structllvm_1_1MCSchedClassDesc.html">MCSchedClassDesc</a> *<a class="code" href="namespacellvm_1_1PPCISD.html#a69ad64696d1df3be05f01dfb67f5bc66a2ae057e4de45c51c89b7e5dc5053df62">SC</a> = DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#a6717374178b6677be5b2f5d227d312cf">getSchedClass</a>(SU);</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="structllvm_1_1MCWriteProcResEntry.html">TargetSchedModel::ProcResIter</a></div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;         PI = SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#a5d256b71a3153dae133d8e9d5a78cdda">getWriteProcResBegin</a>(SC),</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;         PE = SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#ae2b8849f34dbee13609f4b6ad84042b1">getWriteProcResEnd</a>(SC); PI != PE; ++PI) {</div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;    <span class="keywordflow">if</span> (PI-&gt;ProcResourceIdx == Policy.ReduceResIdx)</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;      ResDelta.CritResources += PI-&gt;Cycles;</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;    <span class="keywordflow">if</span> (PI-&gt;ProcResourceIdx == Policy.DemandResIdx)</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;      ResDelta.DemandedResources += PI-&gt;Cycles;</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;  }</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;}</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;<span class="comment">/// Return true if this heuristic determines order.</span></div><div class="line"><a name="l02320"></a><span class="lineno"><a class="line" href="MachineScheduler_8cpp.html#afce7d50acbe2274ccc6beebcb16ca812"> 2320</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="MachineScheduler_8cpp.html#afce7d50acbe2274ccc6beebcb16ca812">tryLess</a>(<span class="keywordtype">int</span> TryVal, <span class="keywordtype">int</span> CandVal,</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;                    GenericScheduler::SchedCandidate &amp;TryCand,</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;                    GenericScheduler::SchedCandidate &amp;Cand,</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;                    GenericScheduler::CandReason Reason) {</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;  <span class="keywordflow">if</span> (TryVal &lt; CandVal) {</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;    TryCand.Reason = Reason;</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;  }</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;  <span class="keywordflow">if</span> (TryVal &gt; CandVal) {</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;    <span class="keywordflow">if</span> (Cand.Reason &gt; Reason)</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;      Cand.Reason = Reason;</div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;  }</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;  Cand.setRepeat(Reason);</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;}</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;</div><div class="line"><a name="l02337"></a><span class="lineno"><a class="line" href="MachineScheduler_8cpp.html#a79014fd44cc5b8b74f64c79a2cdaaa0f"> 2337</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="MachineScheduler_8cpp.html#a79014fd44cc5b8b74f64c79a2cdaaa0f">tryGreater</a>(<span class="keywordtype">int</span> TryVal, <span class="keywordtype">int</span> CandVal,</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;                       GenericScheduler::SchedCandidate &amp;TryCand,</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;                       GenericScheduler::SchedCandidate &amp;Cand,</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;                       GenericScheduler::CandReason Reason) {</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;  <span class="keywordflow">if</span> (TryVal &gt; CandVal) {</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;    TryCand.Reason = Reason;</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;  }</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;  <span class="keywordflow">if</span> (TryVal &lt; CandVal) {</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;    <span class="keywordflow">if</span> (Cand.Reason &gt; Reason)</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;      Cand.Reason = Reason;</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;  }</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;  Cand.setRepeat(Reason);</div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;}</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;</div><div class="line"><a name="l02354"></a><span class="lineno"><a class="line" href="MachineScheduler_8cpp.html#a047d5c154154f6a606d893399ec0b76f"> 2354</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="MachineScheduler_8cpp.html#a047d5c154154f6a606d893399ec0b76f">tryPressure</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1PressureChange.html">PressureChange</a> &amp;TryP,</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classllvm_1_1PressureChange.html">PressureChange</a> &amp;CandP,</div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;                        GenericScheduler::SchedCandidate &amp;TryCand,</div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;                        GenericScheduler::SchedCandidate &amp;Cand,</div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;                        GenericScheduler::CandReason Reason) {</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;  <span class="keywordtype">int</span> TryRank = TryP.<a class="code" href="classllvm_1_1PressureChange.html#ac03484731c64db4703d96fe442400e42">getPSetOrMax</a>();</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;  <span class="keywordtype">int</span> CandRank = CandP.<a class="code" href="classllvm_1_1PressureChange.html#ac03484731c64db4703d96fe442400e42">getPSetOrMax</a>();</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;  <span class="comment">// If both candidates affect the same set, go with the smallest increase.</span></div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;  <span class="keywordflow">if</span> (TryRank == CandRank) {</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MachineScheduler_8cpp.html#afce7d50acbe2274ccc6beebcb16ca812">tryLess</a>(TryP.<a class="code" href="classllvm_1_1PressureChange.html#ad9c2dce7dcf3bbfbec05526cfd0cf897">getUnitInc</a>(), CandP.<a class="code" href="classllvm_1_1PressureChange.html#ad9c2dce7dcf3bbfbec05526cfd0cf897">getUnitInc</a>(), TryCand, Cand,</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;                   Reason);</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;  }</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;  <span class="comment">// If one candidate decreases and the other increases, go with it.</span></div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;  <span class="comment">// Invalid candidates have UnitInc==0.</span></div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MachineScheduler_8cpp.html#afce7d50acbe2274ccc6beebcb16ca812">tryLess</a>(TryP.<a class="code" href="classllvm_1_1PressureChange.html#ad9c2dce7dcf3bbfbec05526cfd0cf897">getUnitInc</a>() &lt; 0, CandP.<a class="code" href="classllvm_1_1PressureChange.html#ad9c2dce7dcf3bbfbec05526cfd0cf897">getUnitInc</a>() &lt; 0, TryCand, Cand,</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;              Reason)) {</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;  }</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;  <span class="comment">// If the candidates are decreasing pressure, reverse priority.</span></div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;  <span class="keywordflow">if</span> (TryP.<a class="code" href="classllvm_1_1PressureChange.html#ad9c2dce7dcf3bbfbec05526cfd0cf897">getUnitInc</a>() &lt; 0)</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(TryRank, CandRank);</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="MachineScheduler_8cpp.html#a79014fd44cc5b8b74f64c79a2cdaaa0f">tryGreater</a>(TryRank, CandRank, TryCand, Cand, Reason);</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;}</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;</div><div class="line"><a name="l02378"></a><span class="lineno"><a class="line" href="MachineScheduler_8cpp.html#a2eb7284c69275f864efd7c7553aa48f3"> 2378</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="MachineScheduler_8cpp.html#a2eb7284c69275f864efd7c7553aa48f3">getWeakLeft</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU, <span class="keywordtype">bool</span> isTop) {</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;  <span class="keywordflow">return</span> (isTop) ? SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#ab9e02660290b9557b547b57870133467">WeakPredsLeft</a> : SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#ae75d620ee809eaf50970a833f4a3ace9">WeakSuccsLeft</a>;</div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;}</div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;<span class="comment">/// Minimize physical register live ranges. Regalloc wants them adjacent to</span></div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;<span class="comment">/// their physreg def/use.</span></div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;<span class="comment">/// FIXME: This is an unnecessary check on the critical path. Most are root/leaf</span></div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;<span class="comment">/// copies which can be prescheduled. The rest (e.g. x86 MUL) could be bundled</span></div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;<span class="comment">/// with the operation that produces or consumes the physreg. We&#39;ll do this when</span></div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;<span class="comment">/// regalloc has support for parallel copies.</span></div><div class="line"><a name="l02389"></a><span class="lineno"><a class="line" href="MachineScheduler_8cpp.html#a852c75810cd23cef346d37386347fadd"> 2389</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="MachineScheduler_8cpp.html#a852c75810cd23cef346d37386347fadd">biasPhysRegCopy</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU, <span class="keywordtype">bool</span> isTop) {</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a> = SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#adb119d63d924841b0523d67dfdd1bf61">getInstr</a>();</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;  <span class="keywordflow">if</span> (!MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ae0ac5973cd95f76e3365e67aaad69de6">isCopy</a>())</div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;  <span class="keywordtype">unsigned</span> ScheduledOper = isTop ? 1 : 0;</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;  <span class="keywordtype">unsigned</span> UnscheduledOper = isTop ? 0 : 1;</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;  <span class="comment">// If we have already scheduled the physreg produce/consumer, immediately</span></div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;  <span class="comment">// schedule the copy.</span></div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1TargetRegisterInfo.html#a055858b14215864ed367a8db6c19d6f6">TargetRegisterInfo::isPhysicalRegister</a>(</div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;        MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(ScheduledOper).<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>()))</div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;    <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;  <span class="comment">// If the physreg is at the boundary, defer it. Otherwise schedule it</span></div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;  <span class="comment">// immediately to free the dependent. We can hoist the copy later.</span></div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;  <span class="keywordtype">bool</span> AtBoundary = isTop ? !SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a40c2dfbd170941dd4d20ee9b60c9d49d">NumSuccsLeft</a> : !SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a94f78042fbba3ea4cd1004353daa46aa">NumPredsLeft</a>;</div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1TargetRegisterInfo.html#a055858b14215864ed367a8db6c19d6f6">TargetRegisterInfo::isPhysicalRegister</a>(</div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;        MI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a>(UnscheduledOper).<a class="code" href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a>()))</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;    <span class="keywordflow">return</span> AtBoundary ? -1 : 1;</div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;}</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;</div><div class="line"><a name="l02410"></a><span class="lineno"><a class="line" href="MachineScheduler_8cpp.html#ab4e60a985c36dacfd88f5d4b2ff47789"> 2410</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="MachineScheduler_8cpp.html#ab4e60a985c36dacfd88f5d4b2ff47789">tryLatency</a>(GenericScheduler::SchedCandidate &amp;TryCand,</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;                       GenericScheduler::SchedCandidate &amp;Cand,</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;                       GenericScheduler::SchedBoundary &amp;Zone) {</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;  <span class="keywordflow">if</span> (Zone.isTop()) {</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;    <span class="keywordflow">if</span> (Cand.SU-&gt;getDepth() &gt; Zone.getScheduledLatency()) {</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MachineScheduler_8cpp.html#afce7d50acbe2274ccc6beebcb16ca812">tryLess</a>(TryCand.SU-&gt;getDepth(), Cand.SU-&gt;getDepth(),</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;                  TryCand, Cand, GenericScheduler::TopDepthReduce))</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;    }</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MachineScheduler_8cpp.html#a79014fd44cc5b8b74f64c79a2cdaaa0f">tryGreater</a>(TryCand.SU-&gt;getHeight(), Cand.SU-&gt;getHeight(),</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;                   TryCand, Cand, GenericScheduler::TopPathReduce))</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;  }</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;  <span class="keywordflow">else</span> {</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;    <span class="keywordflow">if</span> (Cand.SU-&gt;getHeight() &gt; Zone.getScheduledLatency()) {</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MachineScheduler_8cpp.html#afce7d50acbe2274ccc6beebcb16ca812">tryLess</a>(TryCand.SU-&gt;getHeight(), Cand.SU-&gt;getHeight(),</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;                  TryCand, Cand, GenericScheduler::BotHeightReduce))</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;    }</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MachineScheduler_8cpp.html#a79014fd44cc5b8b74f64c79a2cdaaa0f">tryGreater</a>(TryCand.SU-&gt;getDepth(), Cand.SU-&gt;getDepth(),</div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;                   TryCand, Cand, GenericScheduler::BotPathReduce))</div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;  }</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;}</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;<span class="comment">/// Apply a set of heursitics to a new candidate. Heuristics are currently</span></div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;<span class="comment">/// hierarchical. This may be more efficient than a graduated cost model because</span></div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;<span class="comment">/// we don&#39;t need to evaluate all aspects of the model for each node in the</span></div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;<span class="comment">/// queue. But it&#39;s really done to make the heuristics easier to debug and</span></div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;<span class="comment">/// statistically analyze.</span></div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;<span class="comment">/// \param Cand provides the policy and current best candidate.</span></div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;<span class="comment">/// \param TryCand refers to the next SUnit candidate, otherwise uninitialized.</span></div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;<span class="comment">/// \param Zone describes the scheduled zone that we are extending.</span></div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;<span class="comment">/// \param RPTracker describes reg pressure within the scheduled zone.</span></div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;<span class="comment">/// \param TempTracker is a scratch pressure tracker to reuse in queries.</span></div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> GenericScheduler::tryCandidate(SchedCandidate &amp;Cand,</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;                                       SchedCandidate &amp;TryCand,</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;                                       SchedBoundary &amp;Zone,</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;                                       <span class="keyword">const</span> <a class="code" href="classllvm_1_1RegPressureTracker.html">RegPressureTracker</a> &amp;RPTracker,</div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;                                       <a class="code" href="classllvm_1_1RegPressureTracker.html">RegPressureTracker</a> &amp;TempTracker) {</div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;  <span class="keywordflow">if</span> (DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#ad76b445fa3572024f6ef95ab4098fe75">isTrackingPressure</a>()) {</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;    <span class="comment">// Always initialize TryCand&#39;s RPDelta.</span></div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;    <span class="keywordflow">if</span> (Zone.isTop()) {</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;      TempTracker.<a class="code" href="classllvm_1_1RegPressureTracker.html#a972fa38378a3d49a9bb48ca584621438">getMaxDownwardPressureDelta</a>(</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;        TryCand.SU-&gt;getInstr(),</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;        TryCand.RPDelta,</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;        DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#ac35063a69ccbc3a2efc50a7811de4c4d">getRegionCriticalPSets</a>(),</div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;        DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a08cf7a1fa75de765d37188ec7f378a33">getRegPressure</a>().<a class="code" href="structllvm_1_1RegisterPressure.html#af444f3c79d12bb654d6477d629cbe7c0">MaxSetPressure</a>);</div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;    }</div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;      <span class="keywordflow">if</span> (VerifyScheduling) {</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;        TempTracker.<a class="code" href="classllvm_1_1RegPressureTracker.html#a41a3118fb6bd46e397256b3c9794b61c">getMaxUpwardPressureDelta</a>(</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;          TryCand.SU-&gt;getInstr(),</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;          &amp;DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#af90a46fea942e1e455e80aa649f432f6">getPressureDiff</a>(TryCand.SU),</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;          TryCand.RPDelta,</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;          DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#ac35063a69ccbc3a2efc50a7811de4c4d">getRegionCriticalPSets</a>(),</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;          DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a08cf7a1fa75de765d37188ec7f378a33">getRegPressure</a>().<a class="code" href="structllvm_1_1RegisterPressure.html#af444f3c79d12bb654d6477d629cbe7c0">MaxSetPressure</a>);</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;      }</div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;        RPTracker.<a class="code" href="classllvm_1_1RegPressureTracker.html#a159b60403d83d421b95876ef26df2d94">getUpwardPressureDelta</a>(</div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;          TryCand.SU-&gt;getInstr(),</div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;          DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#af90a46fea942e1e455e80aa649f432f6">getPressureDiff</a>(TryCand.SU),</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;          TryCand.RPDelta,</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;          DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#ac35063a69ccbc3a2efc50a7811de4c4d">getRegionCriticalPSets</a>(),</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;          DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a08cf7a1fa75de765d37188ec7f378a33">getRegPressure</a>().<a class="code" href="structllvm_1_1RegisterPressure.html#af444f3c79d12bb654d6477d629cbe7c0">MaxSetPressure</a>);</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;      }</div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;    }</div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;  }</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<span class="keywordflow">if</span> (TryCand.RPDelta.Excess.isValid())</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  SU(&quot;</span> &lt;&lt; TryCand.SU-&gt;NodeNum &lt;&lt; <span class="stringliteral">&quot;) &quot;</span></div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;                 &lt;&lt; TRI-&gt;getRegPressureSetName(TryCand.RPDelta.Excess.getPSet())</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; TryCand.RPDelta.Excess.getUnitInc() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;  <span class="comment">// Initialize the candidate if needed.</span></div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;  <span class="keywordflow">if</span> (!Cand.isValid()) {</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;    TryCand.Reason = NodeOrder;</div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;  }</div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;</div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MachineScheduler_8cpp.html#a79014fd44cc5b8b74f64c79a2cdaaa0f">tryGreater</a>(<a class="code" href="MachineScheduler_8cpp.html#a852c75810cd23cef346d37386347fadd">biasPhysRegCopy</a>(TryCand.SU, Zone.isTop()),</div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;                 <a class="code" href="MachineScheduler_8cpp.html#a852c75810cd23cef346d37386347fadd">biasPhysRegCopy</a>(Cand.SU, Zone.isTop()),</div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;                 TryCand, Cand, PhysRegCopy))</div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;</div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;  <span class="comment">// Avoid exceeding the target&#39;s limit. If signed PSetID is negative, it is</span></div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;  <span class="comment">// invalid; convert it to INT_MAX to give it lowest priority.</span></div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;  <span class="keywordflow">if</span> (DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#ad76b445fa3572024f6ef95ab4098fe75">isTrackingPressure</a>() &amp;&amp; <a class="code" href="MachineScheduler_8cpp.html#a047d5c154154f6a606d893399ec0b76f">tryPressure</a>(TryCand.RPDelta.Excess,</div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;                                               Cand.RPDelta.Excess,</div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;                                               TryCand, Cand, RegExcess))</div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;</div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;  <span class="comment">// Avoid increasing the max critical pressure in the scheduled region.</span></div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;  <span class="keywordflow">if</span> (DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#ad76b445fa3572024f6ef95ab4098fe75">isTrackingPressure</a>() &amp;&amp; <a class="code" href="MachineScheduler_8cpp.html#a047d5c154154f6a606d893399ec0b76f">tryPressure</a>(TryCand.RPDelta.CriticalMax,</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;                                               Cand.RPDelta.CriticalMax,</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;                                               TryCand, Cand, RegCritical))</div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;  <span class="comment">// For loops that are acyclic path limited, aggressively schedule for latency.</span></div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;  <span class="comment">// This can result in very long dependence chains scheduled in sequence, so</span></div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;  <span class="comment">// once every cycle (when CurrMOps == 0), switch to normal heuristics.</span></div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;  <span class="keywordflow">if</span> (Rem.IsAcyclicLatencyLimited &amp;&amp; !Zone.CurrMOps</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;      &amp;&amp; <a class="code" href="MachineScheduler_8cpp.html#ab4e60a985c36dacfd88f5d4b2ff47789">tryLatency</a>(TryCand, Cand, Zone))</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;</div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;  <span class="comment">// Keep clustered nodes together to encourage downstream peephole</span></div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;  <span class="comment">// optimizations which may reduce resource requirements.</span></div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;  <span class="comment">// This is a best effort to set things up for a post-RA pass. Optimizations</span></div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;  <span class="comment">// like generating loads of multiple registers should ideally be done within</span></div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;  <span class="comment">// the scheduler pass by combining the loads during DAG postprocessing.</span></div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *NextClusterSU =</div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;    Zone.isTop() ? DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a5ff4a66752022247fe7e8b352454a023">getNextClusterSucc</a>() : DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a22f0753d4f2f850c165df2f7892ad1f6">getNextClusterPred</a>();</div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MachineScheduler_8cpp.html#a79014fd44cc5b8b74f64c79a2cdaaa0f">tryGreater</a>(TryCand.SU == NextClusterSU, Cand.SU == NextClusterSU,</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;                 TryCand, Cand, Cluster))</div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;  <span class="comment">// Weak edges are for clustering and other constraints.</span></div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MachineScheduler_8cpp.html#afce7d50acbe2274ccc6beebcb16ca812">tryLess</a>(<a class="code" href="MachineScheduler_8cpp.html#a2eb7284c69275f864efd7c7553aa48f3">getWeakLeft</a>(TryCand.SU, Zone.isTop()),</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;              <a class="code" href="MachineScheduler_8cpp.html#a2eb7284c69275f864efd7c7553aa48f3">getWeakLeft</a>(Cand.SU, Zone.isTop()),</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;              TryCand, Cand, Weak)) {</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;  }</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;  <span class="comment">// Avoid increasing the max pressure of the entire region.</span></div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;  <span class="keywordflow">if</span> (DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#ad76b445fa3572024f6ef95ab4098fe75">isTrackingPressure</a>() &amp;&amp; <a class="code" href="MachineScheduler_8cpp.html#a047d5c154154f6a606d893399ec0b76f">tryPressure</a>(TryCand.RPDelta.CurrentMax,</div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;                                               Cand.RPDelta.CurrentMax,</div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;                                               TryCand, Cand, RegMax))</div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;</div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;  <span class="comment">// Avoid critical resource consumption and balance the schedule.</span></div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;  TryCand.initResourceDelta(DAG, SchedModel);</div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MachineScheduler_8cpp.html#afce7d50acbe2274ccc6beebcb16ca812">tryLess</a>(TryCand.ResDelta.CritResources, Cand.ResDelta.CritResources,</div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;              TryCand, Cand, ResourceReduce))</div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MachineScheduler_8cpp.html#a79014fd44cc5b8b74f64c79a2cdaaa0f">tryGreater</a>(TryCand.ResDelta.DemandedResources,</div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;                 Cand.ResDelta.DemandedResources,</div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;                 TryCand, Cand, ResourceDemand))</div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;</div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;  <span class="comment">// Avoid serializing long latency dependence chains.</span></div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;  <span class="comment">// For acyclic path limited loops, latency was already checked above.</span></div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;  <span class="keywordflow">if</span> (Cand.Policy.ReduceLatency &amp;&amp; !Rem.IsAcyclicLatencyLimited</div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;      &amp;&amp; <a class="code" href="MachineScheduler_8cpp.html#ab4e60a985c36dacfd88f5d4b2ff47789">tryLatency</a>(TryCand, Cand, Zone)) {</div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;  }</div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;</div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;  <span class="comment">// Prefer immediate defs/users of the last scheduled instruction. This is a</span></div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;  <span class="comment">// local pressure avoidance strategy that also makes the machine code</span></div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;  <span class="comment">// readable.</span></div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MachineScheduler_8cpp.html#a79014fd44cc5b8b74f64c79a2cdaaa0f">tryGreater</a>(Zone.NextSUs.count(TryCand.SU), Zone.NextSUs.count(Cand.SU),</div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;                 TryCand, Cand, NextDefUse))</div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;  <span class="comment">// Fall through to original instruction order.</span></div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;  <span class="keywordflow">if</span> ((Zone.isTop() &amp;&amp; TryCand.SU-&gt;NodeNum &lt; Cand.SU-&gt;NodeNum)</div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;      || (!Zone.isTop() &amp;&amp; TryCand.SU-&gt;NodeNum &gt; Cand.SU-&gt;NodeNum)) {</div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;    TryCand.Reason = NodeOrder;</div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;  }</div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;}</div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;</div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *GenericScheduler::getReasonStr(</div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;  GenericScheduler::CandReason Reason) {</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;  <span class="keywordflow">switch</span> (Reason) {</div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;  <span class="keywordflow">case</span> NoCand:         <span class="keywordflow">return</span> <span class="stringliteral">&quot;NOCAND    &quot;</span>;</div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;  <span class="keywordflow">case</span> PhysRegCopy:    <span class="keywordflow">return</span> <span class="stringliteral">&quot;PREG-COPY&quot;</span>;</div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;  <span class="keywordflow">case</span> RegExcess:      <span class="keywordflow">return</span> <span class="stringliteral">&quot;REG-EXCESS&quot;</span>;</div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;  <span class="keywordflow">case</span> RegCritical:    <span class="keywordflow">return</span> <span class="stringliteral">&quot;REG-CRIT  &quot;</span>;</div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;  <span class="keywordflow">case</span> Cluster:        <span class="keywordflow">return</span> <span class="stringliteral">&quot;CLUSTER   &quot;</span>;</div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;  <span class="keywordflow">case</span> Weak:           <span class="keywordflow">return</span> <span class="stringliteral">&quot;WEAK      &quot;</span>;</div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;  <span class="keywordflow">case</span> RegMax:         <span class="keywordflow">return</span> <span class="stringliteral">&quot;REG-MAX   &quot;</span>;</div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;  <span class="keywordflow">case</span> ResourceReduce: <span class="keywordflow">return</span> <span class="stringliteral">&quot;RES-REDUCE&quot;</span>;</div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;  <span class="keywordflow">case</span> ResourceDemand: <span class="keywordflow">return</span> <span class="stringliteral">&quot;RES-DEMAND&quot;</span>;</div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;  <span class="keywordflow">case</span> TopDepthReduce: <span class="keywordflow">return</span> <span class="stringliteral">&quot;TOP-DEPTH &quot;</span>;</div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;  <span class="keywordflow">case</span> TopPathReduce:  <span class="keywordflow">return</span> <span class="stringliteral">&quot;TOP-PATH  &quot;</span>;</div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;  <span class="keywordflow">case</span> BotHeightReduce:<span class="keywordflow">return</span> <span class="stringliteral">&quot;BOT-HEIGHT&quot;</span>;</div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;  <span class="keywordflow">case</span> BotPathReduce:  <span class="keywordflow">return</span> <span class="stringliteral">&quot;BOT-PATH  &quot;</span>;</div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;  <span class="keywordflow">case</span> NextDefUse:     <span class="keywordflow">return</span> <span class="stringliteral">&quot;DEF-USE   &quot;</span>;</div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;  <span class="keywordflow">case</span> NodeOrder:      <span class="keywordflow">return</span> <span class="stringliteral">&quot;ORDER     &quot;</span>;</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;  };</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;  <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unknown reason!&quot;</span>);</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;}</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;</div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;<span class="keywordtype">void</span> GenericScheduler::traceCandidate(<span class="keyword">const</span> SchedCandidate &amp;Cand) {</div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;  <a class="code" href="classllvm_1_1PressureChange.html">PressureChange</a> <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>;</div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;  <span class="keywordtype">unsigned</span> ResIdx = 0;</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;  <span class="keywordtype">unsigned</span> Latency = 0;</div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;  <span class="keywordflow">switch</span> (Cand.Reason) {</div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;  <span class="keywordflow">default</span>:</div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;  <span class="keywordflow">case</span> RegExcess:</div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;    P = Cand.RPDelta.Excess;</div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;  <span class="keywordflow">case</span> RegCritical:</div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;    P = Cand.RPDelta.CriticalMax;</div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;  <span class="keywordflow">case</span> RegMax:</div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;    P = Cand.RPDelta.CurrentMax;</div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;  <span class="keywordflow">case</span> ResourceReduce:</div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;    ResIdx = Cand.Policy.ReduceResIdx;</div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;  <span class="keywordflow">case</span> ResourceDemand:</div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;    ResIdx = Cand.Policy.DemandResIdx;</div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;  <span class="keywordflow">case</span> TopDepthReduce:</div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;    Latency = Cand.SU-&gt;getDepth();</div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;  <span class="keywordflow">case</span> TopPathReduce:</div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;    Latency = Cand.SU-&gt;getHeight();</div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;  <span class="keywordflow">case</span> BotHeightReduce:</div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;    Latency = Cand.SU-&gt;getHeight();</div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;  <span class="keywordflow">case</span> BotPathReduce:</div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;    Latency = Cand.SU-&gt;getDepth();</div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;  }</div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;  <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  SU(&quot;</span> &lt;&lt; Cand.SU-&gt;NodeNum &lt;&lt; <span class="stringliteral">&quot;) &quot;</span> &lt;&lt; getReasonStr(Cand.Reason);</div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;  <span class="keywordflow">if</span> (P.<a class="code" href="classllvm_1_1PressureChange.html#a1d0b21ec4f6e6eada798a9e71d043e68">isValid</a>())</div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; TRI-&gt;getRegPressureSetName(P.<a class="code" href="classllvm_1_1PressureChange.html#ad70cb56db629f087c5f2b0dfb5dc8dc9">getPSet</a>())</div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;           &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; P.<a class="code" href="classllvm_1_1PressureChange.html#ad9c2dce7dcf3bbfbec05526cfd0cf897">getUnitInc</a>() &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;      &quot;</span>;</div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;  <span class="keywordflow">if</span> (ResIdx)</div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; SchedModel-&gt;<a class="code" href="classllvm_1_1TargetSchedModel.html#ade2f5f4d11c824fa37234f3077d25be3">getProcResource</a>(ResIdx)-&gt;<a class="code" href="structllvm_1_1MCProcResourceDesc.html#a51dc4747a7d39650884bcf19daaf5f54">Name</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;         &quot;</span>;</div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;  <span class="keywordflow">if</span> (Latency)</div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; Latency &lt;&lt; <span class="stringliteral">&quot; cycles &quot;</span>;</div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;          &quot;</span>;</div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;  <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;}</div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;<span class="comment">/// Pick the best candidate from the queue.</span></div><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;<span class="comment">/// TODO: getMaxPressureDelta results can be mostly cached for each SUnit during</span></div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;<span class="comment">/// DAG building. To adjust for the current scheduling location we need to</span></div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;<span class="comment">/// maintain the number of vreg uses remaining to be top-scheduled.</span></div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> GenericScheduler::pickNodeFromQueue(SchedBoundary &amp;Zone,</div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;                                            <span class="keyword">const</span> <a class="code" href="classllvm_1_1RegPressureTracker.html">RegPressureTracker</a> &amp;RPTracker,</div><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;                                            SchedCandidate &amp;Cand) {</div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;  <a class="code" href="classllvm_1_1ReadyQueue.html">ReadyQueue</a> &amp;Q = Zone.Available;</div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;</div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(Q.<a class="code" href="classllvm_1_1ReadyQueue.html#a405dbd4aee72ff1d89057949f6b083e7">dump</a>());</div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;</div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;  <span class="comment">// getMaxPressureDelta temporarily modifies the tracker.</span></div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;  <a class="code" href="classllvm_1_1RegPressureTracker.html">RegPressureTracker</a> &amp;TempTracker = <span class="keyword">const_cast&lt;</span><a class="code" href="classllvm_1_1RegPressureTracker.html">RegPressureTracker</a>&amp;<span class="keyword">&gt;</span>(RPTracker);</div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;</div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ReadyQueue.html#a4eb7129f3c04895463609956568a5e70">ReadyQueue::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Q.<a class="code" href="classllvm_1_1ReadyQueue.html#a4afc92f2d387ce9eb2c2647dec8bf92a">begin</a>(), E = Q.<a class="code" href="classllvm_1_1ReadyQueue.html#a1f6ee31ad507dd548edfd2fa1fa91b23">end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;</div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;    SchedCandidate TryCand(Cand.Policy);</div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;    TryCand.SU = *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;    tryCandidate(Cand, TryCand, Zone, RPTracker, TempTracker);</div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;    <span class="keywordflow">if</span> (TryCand.Reason != NoCand) {</div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;      <span class="comment">// Initialize resource delta if needed in case future heuristics query it.</span></div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;      <span class="keywordflow">if</span> (TryCand.ResDelta == SchedResourceDelta())</div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;        TryCand.initResourceDelta(DAG, SchedModel);</div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;      Cand.setBest(TryCand);</div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(traceCandidate(Cand));</div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;    }</div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;  }</div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;}</div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;</div><div class="line"><a name="l02678"></a><span class="lineno"><a class="line" href="MachineScheduler_8cpp.html#adbac408ec49398dd712a10f5be648f6c"> 2678</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="MachineScheduler_8cpp.html#adbac408ec49398dd712a10f5be648f6c">tracePick</a>(<span class="keyword">const</span> GenericScheduler::SchedCandidate &amp;Cand,</div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;                      <span class="keywordtype">bool</span> IsTop) {</div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Pick &quot;</span> &lt;&lt; (IsTop ? <span class="stringliteral">&quot;Top &quot;</span> : <span class="stringliteral">&quot;Bot &quot;</span>)</div><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;        &lt;&lt; GenericScheduler::getReasonStr(Cand.Reason) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;}</div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;<span class="comment">/// Pick the best candidate node from either the top or bottom queue.</span></div><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *GenericScheduler::pickNodeBidirectional(<span class="keywordtype">bool</span> &amp;IsTopNode) {</div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;  <span class="comment">// Schedule as far as possible in the direction of no choice. This is most</span></div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;  <span class="comment">// efficient, but also provides the best heuristics for CriticalPSets.</span></div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU = Bot.pickOnlyChoice()) {</div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;    IsTopNode = <span class="keyword">false</span>;</div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Pick Bot NOCAND\n&quot;</span>);</div><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;    <span class="keywordflow">return</span> SU;</div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;  }</div><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU = Top.pickOnlyChoice()) {</div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;    IsTopNode = <span class="keyword">true</span>;</div><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Pick Top NOCAND\n&quot;</span>);</div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;    <span class="keywordflow">return</span> SU;</div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;  }</div><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;  CandPolicy NoPolicy;</div><div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;  SchedCandidate BotCand(NoPolicy);</div><div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;  SchedCandidate TopCand(NoPolicy);</div><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;  Bot.setPolicy(BotCand.Policy, Top);</div><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;  Top.setPolicy(TopCand.Policy, Bot);</div><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;</div><div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;  <span class="comment">// Prefer bottom scheduling when heuristics are silent.</span></div><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;  pickNodeFromQueue(Bot, DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a6d80d7c7852ce23bacc2aa4afe705088">getBotRPTracker</a>(), BotCand);</div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;  assert(BotCand.Reason != NoCand &amp;&amp; <span class="stringliteral">&quot;failed to find the first candidate&quot;</span>);</div><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;</div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;  <span class="comment">// If either Q has a single candidate that provides the least increase in</span></div><div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;  <span class="comment">// Excess pressure, we can immediately schedule from that Q.</span></div><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;  <span class="comment">// RegionCriticalPSets summarizes the pressure within the scheduled region and</span></div><div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;  <span class="comment">// affects picking from either Q. If scheduling in one direction must</span></div><div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;  <span class="comment">// increase pressure for one of the excess PSets, then schedule in that</span></div><div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;  <span class="comment">// direction first to provide more freedom in the other direction.</span></div><div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;  <span class="keywordflow">if</span> ((BotCand.Reason == RegExcess &amp;&amp; !BotCand.isRepeat(RegExcess))</div><div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;      || (BotCand.Reason == RegCritical</div><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;          &amp;&amp; !BotCand.isRepeat(RegCritical)))</div><div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;  {</div><div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;    IsTopNode = <span class="keyword">false</span>;</div><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;    <a class="code" href="MachineScheduler_8cpp.html#adbac408ec49398dd712a10f5be648f6c">tracePick</a>(BotCand, IsTopNode);</div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;    <span class="keywordflow">return</span> BotCand.SU;</div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;  }</div><div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;  <span class="comment">// Check if the top Q has a better candidate.</span></div><div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;  pickNodeFromQueue(Top, DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a25c4a978a6251c445973a29d46726aae">getTopRPTracker</a>(), TopCand);</div><div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;  assert(TopCand.Reason != NoCand &amp;&amp; <span class="stringliteral">&quot;failed to find the first candidate&quot;</span>);</div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;</div><div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;  <span class="comment">// Choose the queue with the most important (lowest enum) reason.</span></div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;  <span class="keywordflow">if</span> (TopCand.Reason &lt; BotCand.Reason) {</div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;    IsTopNode = <span class="keyword">true</span>;</div><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;    <a class="code" href="MachineScheduler_8cpp.html#adbac408ec49398dd712a10f5be648f6c">tracePick</a>(TopCand, IsTopNode);</div><div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;    <span class="keywordflow">return</span> TopCand.SU;</div><div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;  }</div><div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;  <span class="comment">// Otherwise prefer the bottom candidate, in node order if all else failed.</span></div><div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;  IsTopNode = <span class="keyword">false</span>;</div><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;  <a class="code" href="MachineScheduler_8cpp.html#adbac408ec49398dd712a10f5be648f6c">tracePick</a>(BotCand, IsTopNode);</div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;  <span class="keywordflow">return</span> BotCand.SU;</div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;}</div><div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;<span class="comment">/// Pick the best node to balance the schedule. Implements MachineSchedStrategy.</span></div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *GenericScheduler::pickNode(<span class="keywordtype">bool</span> &amp;IsTopNode) {</div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;  <span class="keywordflow">if</span> (DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a0464e893c7a9be19f0fca7a077c7e1db">top</a>() == DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a8653b8f5260fe21abfa505b856d3af7b">bottom</a>()) {</div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;    assert(Top.Available.empty() &amp;&amp; Top.Pending.empty() &amp;&amp;</div><div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;           Bot.Available.empty() &amp;&amp; Bot.Pending.empty() &amp;&amp; <span class="stringliteral">&quot;ReadyQ garbage&quot;</span>);</div><div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;  }</div><div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;  <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU;</div><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;  <span class="keywordflow">do</span> {</div><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;    <span class="keywordflow">if</span> (RegionPolicy.OnlyTopDown) {</div><div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;      SU = Top.pickOnlyChoice();</div><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;      <span class="keywordflow">if</span> (!SU) {</div><div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;        CandPolicy NoPolicy;</div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;        SchedCandidate TopCand(NoPolicy);</div><div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;        pickNodeFromQueue(Top, DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a25c4a978a6251c445973a29d46726aae">getTopRPTracker</a>(), TopCand);</div><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;        assert(TopCand.Reason != NoCand &amp;&amp; <span class="stringliteral">&quot;failed to find a candidate&quot;</span>);</div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;        <a class="code" href="MachineScheduler_8cpp.html#adbac408ec49398dd712a10f5be648f6c">tracePick</a>(TopCand, <span class="keyword">true</span>);</div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;        SU = TopCand.SU;</div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;      }</div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;      IsTopNode = <span class="keyword">true</span>;</div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;    }</div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (RegionPolicy.OnlyBottomUp) {</div><div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;      SU = Bot.pickOnlyChoice();</div><div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;      <span class="keywordflow">if</span> (!SU) {</div><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;        CandPolicy NoPolicy;</div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;        SchedCandidate BotCand(NoPolicy);</div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;        pickNodeFromQueue(Bot, DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a6d80d7c7852ce23bacc2aa4afe705088">getBotRPTracker</a>(), BotCand);</div><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;        assert(BotCand.Reason != NoCand &amp;&amp; <span class="stringliteral">&quot;failed to find a candidate&quot;</span>);</div><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;        <a class="code" href="MachineScheduler_8cpp.html#adbac408ec49398dd712a10f5be648f6c">tracePick</a>(BotCand, <span class="keyword">false</span>);</div><div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;        SU = BotCand.SU;</div><div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;      }</div><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;      IsTopNode = <span class="keyword">false</span>;</div><div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;    }</div><div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;      SU = pickNodeBidirectional(IsTopNode);</div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;    }</div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;  } <span class="keywordflow">while</span> (SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a8c201d7a769bda1cd75d8d6788123068">isScheduled</a>);</div><div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;</div><div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;  <span class="keywordflow">if</span> (SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#ad2f639e2a5f06978b65c2c1c95b9a9d1">isTopReady</a>())</div><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;    Top.removeReady(SU);</div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;  <span class="keywordflow">if</span> (SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#aebc439d11dc8b13b713bbcc0a59db3dc">isBottomReady</a>())</div><div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;    Bot.removeReady(SU);</div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;</div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Scheduling SU(&quot;</span> &lt;&lt; SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; <span class="stringliteral">&quot;) &quot;</span> &lt;&lt; *SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#adb119d63d924841b0523d67dfdd1bf61">getInstr</a>());</div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;  <span class="keywordflow">return</span> SU;</div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;}</div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;</div><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;<span class="keywordtype">void</span> GenericScheduler::reschedulePhysRegCopies(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU, <span class="keywordtype">bool</span> isTop) {</div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;</div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a> InsertPos = SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#adb119d63d924841b0523d67dfdd1bf61">getInstr</a>();</div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;  <span class="keywordflow">if</span> (!isTop)</div><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;    ++InsertPos;</div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;  <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;SDep&gt;</a> &amp;Deps = isTop ? SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#ae2b43854b542de66eec6475adc48f56c">Preds</a> : SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#aab4a86c51e6b126c9c6ef58dbb574431">Succs</a>;</div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;</div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;  <span class="comment">// Find already scheduled copies with a single physreg dependence and move</span></div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;  <span class="comment">// them just above the scheduled instruction.</span></div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classT.html">SmallVectorImpl&lt;SDep&gt;::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Deps.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>(), E = Deps.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>();</div><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getKind() != <a class="code" href="classllvm_1_1SDep.html#a07333f8ba53e0454b7ec6365860c0732af91df2221290eaa1a368403ffad49a26">SDep::Data</a> || !TRI-&gt;isPhysicalRegister(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getReg()))</div><div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;    <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *DepSU = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getSUnit();</div><div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;    <span class="keywordflow">if</span> (isTop ? DepSU-&gt;<a class="code" href="classllvm_1_1SUnit.html#aab4a86c51e6b126c9c6ef58dbb574431">Succs</a>.size() &gt; 1 : DepSU-&gt;<a class="code" href="classllvm_1_1SUnit.html#ae2b43854b542de66eec6475adc48f56c">Preds</a>.size() &gt; 1)</div><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *Copy = DepSU-&gt;<a class="code" href="classllvm_1_1SUnit.html#adb119d63d924841b0523d67dfdd1bf61">getInstr</a>();</div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;    <span class="keywordflow">if</span> (!Copy-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ae0ac5973cd95f76e3365e67aaad69de6">isCopy</a>())</div><div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Rescheduling physreg copy &quot;</span>;</div><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;          <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getSUnit()-&gt;dump(DAG));</div><div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;    DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a2209b15a069023499cc665b373e67703">moveInstruction</a>(Copy, InsertPos);</div><div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;  }</div><div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;}</div><div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;<span class="comment">/// Update the scheduler&#39;s state after scheduling a node. This is the same node</span></div><div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;<span class="comment">/// that was just returned by pickNode(). However, ScheduleDAGMI needs to update</span></div><div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;<span class="comment">/// it&#39;s state based on the current cycle before MachineSchedStrategy does.</span></div><div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;<span class="comment">/// FIXME: Eventually, we may bundle physreg copies rather than rescheduling</span></div><div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;<span class="comment">/// them here. See comments in biasPhysRegCopy.</span></div><div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> GenericScheduler::schedNode(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU, <span class="keywordtype">bool</span> IsTopNode) {</div><div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;  <span class="keywordflow">if</span> (IsTopNode) {</div><div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;    SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a> = std::max(SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a>, Top.CurrCycle);</div><div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;    Top.bumpNode(SU);</div><div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;    <span class="keywordflow">if</span> (SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#adc4d8df3725fd70ffbaffeead756025c">hasPhysRegUses</a>)</div><div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;      reschedulePhysRegCopies(SU, <span class="keyword">true</span>);</div><div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;  }</div><div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;  <span class="keywordflow">else</span> {</div><div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;    SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a> = std::max(SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a>, Bot.CurrCycle);</div><div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;    Bot.bumpNode(SU);</div><div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;    <span class="keywordflow">if</span> (SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a9d9a8b8d5225f85cecbbada4ce4406b0">hasPhysRegDefs</a>)</div><div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;      reschedulePhysRegCopies(SU, <span class="keyword">false</span>);</div><div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;  }</div><div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;}</div><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;<span class="comment">/// Create the standard converging machine scheduler. This will be used as the</span></div><div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;<span class="comment">/// default scheduler if the target does not set a default.</span></div><div class="line"><a name="l02834"></a><span class="lineno"><a class="line" href="MachineScheduler_8cpp.html#a3f6bcdf745803c78202f432e2e8c7bbe"> 2834</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1ScheduleDAGInstrs.html">ScheduleDAGInstrs</a> *<a class="code" href="MachineScheduler_8cpp.html#a3f6bcdf745803c78202f432e2e8c7bbe">createGenericSched</a>(<a class="code" href="structllvm_1_1MachineSchedContext.html">MachineSchedContext</a> *C) {</div><div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;  <a class="code" href="classllvm_1_1ScheduleDAGMI.html">ScheduleDAGMI</a> *DAG = <span class="keyword">new</span> <a class="code" href="classllvm_1_1ScheduleDAGMI.html">ScheduleDAGMI</a>(C, <span class="keyword">new</span> GenericScheduler(C));</div><div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;  <span class="comment">// Register DAG post-processors.</span></div><div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;  <span class="comment">// FIXME: extend the mutation API to allow earlier mutations to instantiate</span></div><div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;  <span class="comment">// data and pass it to later mutations. Have a single mutation that gathers</span></div><div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;  <span class="comment">// the interesting nodes in one pass.</span></div><div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;  DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#af849764183b2e7407e016c847315d0dd">addMutation</a>(<span class="keyword">new</span> CopyConstrain(DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAG.html#a348590624c488b04d0f9e227e6c3960e">TII</a>, DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAG.html#a418bc6d3f660325fa6d5b9fb269add62">TRI</a>));</div><div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;  <span class="keywordflow">if</span> (EnableLoadCluster &amp;&amp; DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAG.html#a348590624c488b04d0f9e227e6c3960e">TII</a>-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a6981554a1e612924bd983320acbcc609">enableClusterLoads</a>())</div><div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;    DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#af849764183b2e7407e016c847315d0dd">addMutation</a>(<span class="keyword">new</span> LoadClusterMutation(DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAG.html#a348590624c488b04d0f9e227e6c3960e">TII</a>, DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAG.html#a418bc6d3f660325fa6d5b9fb269add62">TRI</a>));</div><div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;  <span class="keywordflow">if</span> (EnableMacroFusion)</div><div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;    DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#af849764183b2e7407e016c847315d0dd">addMutation</a>(<span class="keyword">new</span> MacroFusion(DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAG.html#a348590624c488b04d0f9e227e6c3960e">TII</a>));</div><div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;  <span class="keywordflow">return</span> DAG;</div><div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;}</div><div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1MachineSchedRegistry.html">MachineSchedRegistry</a></div><div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;<a class="code" href="MachineScheduler_8cpp.html#a540c54f3590e744ce992c62fdc9beb31">GenericSchedRegistry</a>(<span class="stringliteral">&quot;converge&quot;</span>, <span class="stringliteral">&quot;Standard converging scheduler.&quot;</span>,</div><div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;                     createGenericSched);</div><div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;</div><div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;<span class="comment">// ILP Scheduler. Currently for experimental analysis of heuristics.</span></div><div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;</div><div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;<span class="keyword">namespace </span>{<span class="comment"></span></div><div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;<span class="comment">/// \brief Order nodes by the ILP metric.</span></div><div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;<span class="comment"></span><span class="keyword">struct </span>ILPOrder {</div><div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SchedDFSResult.html">SchedDFSResult</a> *DFSResult;</div><div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1BitVector.html">BitVector</a> *ScheduledTrees;</div><div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;  <span class="keywordtype">bool</span> MaximizeILP;</div><div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;</div><div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;  ILPOrder(<span class="keywordtype">bool</span> MaxILP): DFSResult(0), ScheduledTrees(0), MaximizeILP(MaxILP) {}</div><div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;<span class="comment">  /// \brief Apply a less-than relation on node priority.</span></div><div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;<span class="comment">  /// (Return true if A comes after B in the Q.)</span></div><div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> operator()(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>)<span class="keyword"> const </span>{</div><div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;    <span class="keywordtype">unsigned</span> SchedTreeA = DFSResult-&gt;<a class="code" href="classllvm_1_1SchedDFSResult.html#a6c8776a1ce8d9cf55bb1ca65150cbcdd">getSubtreeID</a>(A);</div><div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;    <span class="keywordtype">unsigned</span> SchedTreeB = DFSResult-&gt;<a class="code" href="classllvm_1_1SchedDFSResult.html#a6c8776a1ce8d9cf55bb1ca65150cbcdd">getSubtreeID</a>(B);</div><div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;    <span class="keywordflow">if</span> (SchedTreeA != SchedTreeB) {</div><div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;      <span class="comment">// Unscheduled trees have lower priority.</span></div><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;      <span class="keywordflow">if</span> (ScheduledTrees-&gt;<a class="code" href="classllvm_1_1BitVector.html#a20b6ba858cb2bb6d8d7fa553025c1f61">test</a>(SchedTreeA) != ScheduledTrees-&gt;<a class="code" href="classllvm_1_1BitVector.html#a20b6ba858cb2bb6d8d7fa553025c1f61">test</a>(SchedTreeB))</div><div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;        <span class="keywordflow">return</span> ScheduledTrees-&gt;<a class="code" href="classllvm_1_1BitVector.html#a20b6ba858cb2bb6d8d7fa553025c1f61">test</a>(SchedTreeB);</div><div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;</div><div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;      <span class="comment">// Trees with shallower connections have have lower priority.</span></div><div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;      <span class="keywordflow">if</span> (DFSResult-&gt;<a class="code" href="classllvm_1_1SchedDFSResult.html#a2880aad8fd2e67c30a16821744ffc702">getSubtreeLevel</a>(SchedTreeA)</div><div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;          != DFSResult-&gt;<a class="code" href="classllvm_1_1SchedDFSResult.html#a2880aad8fd2e67c30a16821744ffc702">getSubtreeLevel</a>(SchedTreeB)) {</div><div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;        <span class="keywordflow">return</span> DFSResult-&gt;<a class="code" href="classllvm_1_1SchedDFSResult.html#a2880aad8fd2e67c30a16821744ffc702">getSubtreeLevel</a>(SchedTreeA)</div><div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;          &lt; DFSResult-&gt;<a class="code" href="classllvm_1_1SchedDFSResult.html#a2880aad8fd2e67c30a16821744ffc702">getSubtreeLevel</a>(SchedTreeB);</div><div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;      }</div><div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;    }</div><div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;    <span class="keywordflow">if</span> (MaximizeILP)</div><div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;      <span class="keywordflow">return</span> DFSResult-&gt;<a class="code" href="classllvm_1_1SchedDFSResult.html#a369df0a2d6c45c7323d6329dcb2607d1">getILP</a>(A) &lt; DFSResult-&gt;<a class="code" href="classllvm_1_1SchedDFSResult.html#a369df0a2d6c45c7323d6329dcb2607d1">getILP</a>(B);</div><div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;      <span class="keywordflow">return</span> DFSResult-&gt;<a class="code" href="classllvm_1_1SchedDFSResult.html#a369df0a2d6c45c7323d6329dcb2607d1">getILP</a>(A) &gt; DFSResult-&gt;<a class="code" href="classllvm_1_1SchedDFSResult.html#a369df0a2d6c45c7323d6329dcb2607d1">getILP</a>(B);</div><div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;  }</div><div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;};</div><div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;<span class="comment">/// \brief Schedule based on the ILP metric.</span></div><div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;<span class="comment"></span><span class="keyword">class </span>ILPScheduler : <span class="keyword">public</span> <a class="code" href="classllvm_1_1MachineSchedStrategy.html">MachineSchedStrategy</a> {</div><div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;  <a class="code" href="classllvm_1_1ScheduleDAGMI.html">ScheduleDAGMI</a> *DAG;</div><div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;  ILPOrder Cmp;</div><div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;</div><div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;  std::vector&lt;SUnit*&gt; ReadyQ;</div><div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;  ILPScheduler(<span class="keywordtype">bool</span> MaximizeILP): DAG(0), Cmp(MaximizeILP) {}</div><div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;</div><div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="TargetLibraryInfo_8cpp.html#a487393c673177cc2b64bde6ab8fa60ae">initialize</a>(<a class="code" href="classllvm_1_1ScheduleDAGMI.html">ScheduleDAGMI</a> *dag) {</div><div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;    DAG = dag;</div><div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;    DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a4dd56692d6f6e4cc2e122585f40cc064">computeDFSResult</a>();</div><div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;    Cmp.DFSResult = DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#af5351ac954613bc3571961cfd4d4223d">getDFSResult</a>();</div><div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;    Cmp.ScheduledTrees = &amp;DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a33e863f8bef4b6fd1e41d94f16cecab3">getScheduledTrees</a>();</div><div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;    ReadyQ.<a class="code" href="classllvm_1_1BitVector.html#a35bbc237e4a675c5332103ac6e7dcce1">clear</a>();</div><div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;  }</div><div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;</div><div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> registerRoots() {</div><div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;    <span class="comment">// Restore the heap in ReadyQ with the updated DFS results.</span></div><div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;    std::make_heap(ReadyQ.begin(), ReadyQ.end(), Cmp);</div><div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;  }</div><div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;<span class="comment">  /// Implement MachineSchedStrategy interface.</span></div><div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;<span class="comment">  /// -----------------------------------------</span></div><div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;<span class="comment"></span><span class="comment"></span></div><div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;<span class="comment">  /// Callback to select the highest priority node from the ready Q.</span></div><div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;<span class="comment"></span>  <span class="keyword">virtual</span> <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *pickNode(<span class="keywordtype">bool</span> &amp;IsTopNode) {</div><div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;    <span class="keywordflow">if</span> (ReadyQ.empty()) <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;    std::pop_heap(ReadyQ.begin(), ReadyQ.end(), Cmp);</div><div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;    <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU = ReadyQ.back();</div><div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;    ReadyQ.pop_back();</div><div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;    IsTopNode = <span class="keyword">false</span>;</div><div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Pick node &quot;</span> &lt;&lt; <span class="stringliteral">&quot;SU(&quot;</span> &lt;&lt; SU-&gt;NodeNum &lt;&lt; <span class="stringliteral">&quot;) &quot;</span></div><div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;          &lt;&lt; <span class="stringliteral">&quot; ILP: &quot;</span> &lt;&lt; DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#af5351ac954613bc3571961cfd4d4223d">getDFSResult</a>()-&gt;<a class="code" href="classllvm_1_1SchedDFSResult.html#a369df0a2d6c45c7323d6329dcb2607d1">getILP</a>(SU)</div><div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;          &lt;&lt; <span class="stringliteral">&quot; Tree: &quot;</span> &lt;&lt; DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#af5351ac954613bc3571961cfd4d4223d">getDFSResult</a>()-&gt;<a class="code" href="classllvm_1_1SchedDFSResult.html#a6c8776a1ce8d9cf55bb1ca65150cbcdd">getSubtreeID</a>(SU) &lt;&lt; <span class="stringliteral">&quot; @&quot;</span></div><div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;          &lt;&lt; DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#af5351ac954613bc3571961cfd4d4223d">getDFSResult</a>()-&gt;<a class="code" href="classllvm_1_1SchedDFSResult.html#a2880aad8fd2e67c30a16821744ffc702">getSubtreeLevel</a>(</div><div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;            DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#af5351ac954613bc3571961cfd4d4223d">getDFSResult</a>()-&gt;<a class="code" href="classllvm_1_1SchedDFSResult.html#a6c8776a1ce8d9cf55bb1ca65150cbcdd">getSubtreeID</a>(SU)) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div><div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;Scheduling &quot;</span> &lt;&lt; *SU-&gt;getInstr());</div><div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;    <span class="keywordflow">return</span> SU;</div><div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;  }</div><div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;<span class="comment">  /// \brief Scheduler callback to notify that a new subtree is scheduled.</span></div><div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;<span class="comment"></span>  <span class="keyword">virtual</span> <span class="keywordtype">void</span> scheduleTree(<span class="keywordtype">unsigned</span> SubtreeID) {</div><div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;    std::make_heap(ReadyQ.begin(), ReadyQ.end(), Cmp);</div><div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;  }</div><div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;<span class="comment">  /// Callback after a node is scheduled. Mark a newly scheduled tree, notify</span></div><div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;<span class="comment">  /// DFSResults, and resort the priority Q.</span></div><div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;<span class="comment"></span>  <span class="keyword">virtual</span> <span class="keywordtype">void</span> schedNode(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU, <span class="keywordtype">bool</span> IsTopNode) {</div><div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;    assert(!IsTopNode &amp;&amp; <span class="stringliteral">&quot;SchedDFSResult needs bottom-up&quot;</span>);</div><div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;  }</div><div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;</div><div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> releaseTopNode(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *) { <span class="comment">/*only called for top roots*/</span> }</div><div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;</div><div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> releaseBottomNode(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU) {</div><div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;    ReadyQ.push_back(SU);</div><div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;    std::push_heap(ReadyQ.begin(), ReadyQ.end(), Cmp);</div><div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;  }</div><div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;};</div><div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;} <span class="comment">// namespace</span></div><div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;</div><div class="line"><a name="l02951"></a><span class="lineno"><a class="line" href="MachineScheduler_8cpp.html#a6316f8d737e021684c096eeca388355d"> 2951</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1ScheduleDAGInstrs.html">ScheduleDAGInstrs</a> *<a class="code" href="MachineScheduler_8cpp.html#a6316f8d737e021684c096eeca388355d">createILPMaxScheduler</a>(<a class="code" href="structllvm_1_1MachineSchedContext.html">MachineSchedContext</a> *C) {</div><div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ScheduleDAGMI.html">ScheduleDAGMI</a>(C, <span class="keyword">new</span> ILPScheduler(<span class="keyword">true</span>));</div><div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;}</div><div class="line"><a name="l02954"></a><span class="lineno"><a class="line" href="MachineScheduler_8cpp.html#a2782eab453776e43a005124f2cae0cbb"> 2954</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1ScheduleDAGInstrs.html">ScheduleDAGInstrs</a> *<a class="code" href="MachineScheduler_8cpp.html#a2782eab453776e43a005124f2cae0cbb">createILPMinScheduler</a>(<a class="code" href="structllvm_1_1MachineSchedContext.html">MachineSchedContext</a> *C) {</div><div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ScheduleDAGMI.html">ScheduleDAGMI</a>(C, <span class="keyword">new</span> ILPScheduler(<span class="keyword">false</span>));</div><div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;}</div><div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1MachineSchedRegistry.html">MachineSchedRegistry</a> <a class="code" href="MachineScheduler_8cpp.html#a528ddb429bfb6c87f0eb6d07893640e1">ILPMaxRegistry</a>(</div><div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;  <span class="stringliteral">&quot;ilpmax&quot;</span>, <span class="stringliteral">&quot;Schedule bottom-up for max ILP&quot;</span>, <a class="code" href="MachineScheduler_8cpp.html#a6316f8d737e021684c096eeca388355d">createILPMaxScheduler</a>);</div><div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1MachineSchedRegistry.html">MachineSchedRegistry</a> <a class="code" href="MachineScheduler_8cpp.html#aef18d242eef950812f8f491246439ad4">ILPMinRegistry</a>(</div><div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;  <span class="stringliteral">&quot;ilpmin&quot;</span>, <span class="stringliteral">&quot;Schedule bottom-up for min ILP&quot;</span>, <a class="code" href="MachineScheduler_8cpp.html#a2782eab453776e43a005124f2cae0cbb">createILPMinScheduler</a>);</div><div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;</div><div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;<span class="comment">// Machine Instruction Shuffler for Correctness Testing</span></div><div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;</div><div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;<span class="keyword">namespace </span>{<span class="comment"></span></div><div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;<span class="comment">/// Apply a less-than relation on the node order, which corresponds to the</span></div><div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;<span class="comment">/// instruction order prior to scheduling. IsReverse implements greater-than.</span></div><div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;<span class="comment"></span><span class="keyword">template</span>&lt;<span class="keywordtype">bool</span> IsReverse&gt;</div><div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;<span class="keyword">struct </span>SUnitOrder {</div><div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;  <span class="keywordtype">bool</span> operator()(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>, <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *<a class="code" href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a>)<span class="keyword"> const </span>{</div><div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;    <span class="keywordflow">if</span> (IsReverse)</div><div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;      <span class="keywordflow">return</span> A-&gt;<a class="code" href="classllvm_1_1SUnit.html#a3f708b119627541f144d703a1d183202">NodeNum</a> &gt; B-&gt;<a class="code" href="classllvm_1_1SUnit.html#a3f708b119627541f144d703a1d183202">NodeNum</a>;</div><div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;      <span class="keywordflow">return</span> A-&gt;<a class="code" href="classllvm_1_1SUnit.html#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt; B-&gt;<a class="code" href="classllvm_1_1SUnit.html#a3f708b119627541f144d703a1d183202">NodeNum</a>;</div><div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;  }</div><div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;};</div><div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;<span class="comment">/// Reorder instructions as much as possible.</span></div><div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;<span class="comment"></span><span class="keyword">class </span>InstructionShuffler : <span class="keyword">public</span> <a class="code" href="classllvm_1_1MachineSchedStrategy.html">MachineSchedStrategy</a> {</div><div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;  <span class="keywordtype">bool</span> IsAlternating;</div><div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;  <span class="keywordtype">bool</span> IsTopDown;</div><div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;</div><div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;  <span class="comment">// Using a less-than relation (SUnitOrder&lt;false&gt;) for the TopQ priority</span></div><div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;  <span class="comment">// gives nodes with a higher number higher priority causing the latest</span></div><div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;  <span class="comment">// instructions to be scheduled first.</span></div><div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;  <a class="code" href="classllvm_1_1PriorityQueue.html">PriorityQueue&lt;SUnit*, std::vector&lt;SUnit*&gt;</a>, SUnitOrder&lt;false&gt; &gt;</div><div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;    TopQ;</div><div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;  <span class="comment">// When scheduling bottom-up, use greater-than as the queue priority.</span></div><div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;  <a class="code" href="classllvm_1_1PriorityQueue.html">PriorityQueue&lt;SUnit*, std::vector&lt;SUnit*&gt;</a>, SUnitOrder&lt;true&gt; &gt;</div><div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;    BottomQ;</div><div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;  InstructionShuffler(<span class="keywordtype">bool</span> alternate, <span class="keywordtype">bool</span> topdown)</div><div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;    : IsAlternating(alternate), IsTopDown(topdown) {}</div><div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;</div><div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="TargetLibraryInfo_8cpp.html#a487393c673177cc2b64bde6ab8fa60ae">initialize</a>(<a class="code" href="classllvm_1_1ScheduleDAGMI.html">ScheduleDAGMI</a> *) {</div><div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;    TopQ.<a class="code" href="classllvm_1_1PriorityQueue.html#a583627bbdd690ca5df5ed7b00a5f7b18">clear</a>();</div><div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;    BottomQ.<a class="code" href="classllvm_1_1PriorityQueue.html#a583627bbdd690ca5df5ed7b00a5f7b18">clear</a>();</div><div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;  }</div><div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;<span class="comment"></span></div><div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;<span class="comment">  /// Implement MachineSchedStrategy interface.</span></div><div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;<span class="comment">  /// -----------------------------------------</span></div><div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;<span class="comment"></span></div><div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;  <span class="keyword">virtual</span> <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *pickNode(<span class="keywordtype">bool</span> &amp;IsTopNode) {</div><div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;    <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU;</div><div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;    <span class="keywordflow">if</span> (IsTopDown) {</div><div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;      <span class="keywordflow">do</span> {</div><div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;        <span class="keywordflow">if</span> (TopQ.empty()) <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;        SU = TopQ.top();</div><div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;        TopQ.pop();</div><div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;      } <span class="keywordflow">while</span> (SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a8c201d7a769bda1cd75d8d6788123068">isScheduled</a>);</div><div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;      IsTopNode = <span class="keyword">true</span>;</div><div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;    }</div><div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;      <span class="keywordflow">do</span> {</div><div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;        <span class="keywordflow">if</span> (BottomQ.empty()) <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;        SU = BottomQ.top();</div><div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;        BottomQ.pop();</div><div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;      } <span class="keywordflow">while</span> (SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a8c201d7a769bda1cd75d8d6788123068">isScheduled</a>);</div><div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;      IsTopNode = <span class="keyword">false</span>;</div><div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;    }</div><div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;    <span class="keywordflow">if</span> (IsAlternating)</div><div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;      IsTopDown = !IsTopDown;</div><div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;    <span class="keywordflow">return</span> SU;</div><div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;  }</div><div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;</div><div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> schedNode(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU, <span class="keywordtype">bool</span> IsTopNode) {}</div><div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;</div><div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> releaseTopNode(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU) {</div><div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;    TopQ.push(SU);</div><div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;  }</div><div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> releaseBottomNode(<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU) {</div><div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;    BottomQ.push(SU);</div><div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;  }</div><div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;};</div><div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;} <span class="comment">// namespace</span></div><div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;</div><div class="line"><a name="l03039"></a><span class="lineno"><a class="line" href="MachineScheduler_8cpp.html#a1b4799f3fecebc3138d88035ee5b010c"> 3039</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1ScheduleDAGInstrs.html">ScheduleDAGInstrs</a> *<a class="code" href="MachineScheduler_8cpp.html#a1b4799f3fecebc3138d88035ee5b010c">createInstructionShuffler</a>(<a class="code" href="structllvm_1_1MachineSchedContext.html">MachineSchedContext</a> *C) {</div><div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;  <span class="keywordtype">bool</span> Alternate = !<a class="code" href="namespacellvm.html#a0081c790ccede18428a2821d166ef6c7">ForceTopDown</a> &amp;&amp; !<a class="code" href="namespacellvm.html#a5638cb35554a0468f4c7a860e9c1ab47">ForceBottomUp</a>;</div><div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;  <span class="keywordtype">bool</span> TopDown = !<a class="code" href="namespacellvm.html#a5638cb35554a0468f4c7a860e9c1ab47">ForceBottomUp</a>;</div><div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;  assert((TopDown || !<a class="code" href="namespacellvm.html#a0081c790ccede18428a2821d166ef6c7">ForceTopDown</a>) &amp;&amp;</div><div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;         <span class="stringliteral">&quot;-misched-topdown incompatible with -misched-bottomup&quot;</span>);</div><div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ScheduleDAGMI.html">ScheduleDAGMI</a>(C, <span class="keyword">new</span> InstructionShuffler(Alternate, TopDown));</div><div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;}</div><div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1MachineSchedRegistry.html">MachineSchedRegistry</a> <a class="code" href="MachineScheduler_8cpp.html#a0919f9fcc340092528e88bd7fde42c61">ShufflerRegistry</a>(</div><div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;  <span class="stringliteral">&quot;shuffle&quot;</span>, <span class="stringliteral">&quot;Shuffle machine instructions alternating directions&quot;</span>,</div><div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;  <a class="code" href="MachineScheduler_8cpp.html#a1b4799f3fecebc3138d88035ee5b010c">createInstructionShuffler</a>);</div><div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;<span class="preprocessor">#endif // !NDEBUG</span></div><div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;</div><div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;<span class="comment">// GraphWriter support for ScheduleDAGMI.</span></div><div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;</div><div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div><div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;</div><div class="line"><a name="l03058"></a><span class="lineno"><a class="line" href="structllvm_1_1GraphTraits_3_01ScheduleDAGMI_01_5_01_4.html"> 3058</a></span>&#160;<span class="keyword">template</span>&lt;&gt; <span class="keyword">struct </span><a class="code" href="structllvm_1_1GraphTraits.html">GraphTraits</a>&lt;</div><div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;  <a class="code" href="classllvm_1_1ScheduleDAGMI.html">ScheduleDAGMI</a>*&gt; : <span class="keyword">public</span> <a class="code" href="structllvm_1_1GraphTraits_3_01ScheduleDAG_01_5_01_4.html">GraphTraits&lt;ScheduleDAG*&gt;</a> {};</div><div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;</div><div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;<span class="keyword">template</span>&lt;&gt;</div><div class="line"><a name="l03062"></a><span class="lineno"><a class="line" href="structllvm_1_1DOTGraphTraits_3_01ScheduleDAGMI_01_5_01_4.html"> 3062</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structllvm_1_1DOTGraphTraits.html">DOTGraphTraits</a>&lt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html">ScheduleDAGMI</a>*&gt; : <span class="keyword">public</span> <a class="code" href="structllvm_1_1DefaultDOTGraphTraits.html">DefaultDOTGraphTraits</a> {</div><div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;</div><div class="line"><a name="l03064"></a><span class="lineno"><a class="line" href="structllvm_1_1DOTGraphTraits_3_01ScheduleDAGMI_01_5_01_4.html#ae60a7222415878571912427e758f4297"> 3064</a></span>&#160;  <a class="code" href="structllvm_1_1DOTGraphTraits_3_01ScheduleDAGMI_01_5_01_4.html#ae60a7222415878571912427e758f4297">DOTGraphTraits</a> (<span class="keywordtype">bool</span> isSimple=<span class="keyword">false</span>) : <a class="code" href="structllvm_1_1DefaultDOTGraphTraits.html">DefaultDOTGraphTraits</a>(isSimple) {}</div><div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;</div><div class="line"><a name="l03066"></a><span class="lineno"><a class="line" href="structllvm_1_1DOTGraphTraits_3_01ScheduleDAGMI_01_5_01_4.html#a9cb35016314cf6da022701d4e0a06fcb"> 3066</a></span>&#160;  <span class="keyword">static</span> std::string <a class="code" href="structllvm_1_1DOTGraphTraits_3_01ScheduleDAGMI_01_5_01_4.html#a9cb35016314cf6da022701d4e0a06fcb">getGraphName</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1ScheduleDAG.html">ScheduleDAG</a> *<a class="code" href="MD5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>) {</div><div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;    <span class="keywordflow">return</span> G-&gt;<a class="code" href="classllvm_1_1ScheduleDAG.html#a5a3d3d075a208011a24a0918b58d7daa">MF</a>.<a class="code" href="classllvm_1_1MachineFunction.html#ae215c5c2aecd18c4e68a94187d9cdbf1">getName</a>();</div><div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;  }</div><div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;</div><div class="line"><a name="l03070"></a><span class="lineno"><a class="line" href="structllvm_1_1DOTGraphTraits_3_01ScheduleDAGMI_01_5_01_4.html#aff0201d90e079596116145d196d677b2"> 3070</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="structllvm_1_1DOTGraphTraits_3_01ScheduleDAGMI_01_5_01_4.html#aff0201d90e079596116145d196d677b2">renderGraphFromBottomUp</a>() {</div><div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;  }</div><div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;</div><div class="line"><a name="l03074"></a><span class="lineno"><a class="line" href="structllvm_1_1DOTGraphTraits_3_01ScheduleDAGMI_01_5_01_4.html#ab505aa4225d82a38ec96019134881676"> 3074</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="structllvm_1_1DOTGraphTraits_3_01ScheduleDAGMI_01_5_01_4.html#ab505aa4225d82a38ec96019134881676">isNodeHidden</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *Node) {</div><div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;    <span class="keywordflow">return</span> (Node-&gt;<a class="code" href="classllvm_1_1SUnit.html#ae2b43854b542de66eec6475adc48f56c">Preds</a>.size() &gt; 10 || Node-&gt;<a class="code" href="classllvm_1_1SUnit.html#aab4a86c51e6b126c9c6ef58dbb574431">Succs</a>.size() &gt; 10);</div><div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;  }</div><div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;</div><div class="line"><a name="l03078"></a><span class="lineno"><a class="line" href="structllvm_1_1DOTGraphTraits_3_01ScheduleDAGMI_01_5_01_4.html#a348f36a6bae9005c7991881c7bb7876e"> 3078</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="structllvm_1_1DOTGraphTraits_3_01ScheduleDAGMI_01_5_01_4.html#a348f36a6bae9005c7991881c7bb7876e">hasNodeAddressLabel</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *Node,</div><div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;                                  <span class="keyword">const</span> <a class="code" href="classllvm_1_1ScheduleDAG.html">ScheduleDAG</a> *Graph) {</div><div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;  }</div><div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;<span class="comment"></span></div><div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;<span class="comment">  /// If you want to override the dot attributes printed for a particular</span></div><div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;<span class="comment">  /// edge, override this method.</span></div><div class="line"><a name="l03085"></a><span class="lineno"><a class="line" href="structllvm_1_1DOTGraphTraits_3_01ScheduleDAGMI_01_5_01_4.html#a738a1d6d967fd5a8cdf539bced89b0c5"> 3085</a></span>&#160;<span class="comment"></span>  <span class="keyword">static</span> std::string <a class="code" href="structllvm_1_1DOTGraphTraits_3_01ScheduleDAGMI_01_5_01_4.html#a738a1d6d967fd5a8cdf539bced89b0c5">getEdgeAttributes</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *Node,</div><div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;                                       <a class="code" href="classllvm_1_1SUnitIterator.html">SUnitIterator</a> EI,</div><div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;                                       <span class="keyword">const</span> <a class="code" href="classllvm_1_1ScheduleDAG.html">ScheduleDAG</a> *Graph) {</div><div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;    <span class="keywordflow">if</span> (EI.<a class="code" href="classllvm_1_1SUnitIterator.html#a4be93b75190a68d91960b833832f591f">isArtificialDep</a>())</div><div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;color=cyan,style=dashed&quot;</span>;</div><div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;    <span class="keywordflow">if</span> (EI.<a class="code" href="classllvm_1_1SUnitIterator.html#af58adcf012cbcd71cf32c9d50f180c2b">isCtrlDep</a>())</div><div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;color=blue,style=dashed&quot;</span>;</div><div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;  }</div><div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;</div><div class="line"><a name="l03095"></a><span class="lineno"><a class="line" href="structllvm_1_1DOTGraphTraits_3_01ScheduleDAGMI_01_5_01_4.html#a9e281d4b0718506e4ec5596a06ae36dd"> 3095</a></span>&#160;  <span class="keyword">static</span> std::string <a class="code" href="structllvm_1_1DOTGraphTraits_3_01ScheduleDAGMI_01_5_01_4.html#a9e281d4b0718506e4ec5596a06ae36dd">getNodeLabel</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU, <span class="keyword">const</span> <a class="code" href="classllvm_1_1ScheduleDAG.html">ScheduleDAG</a> *<a class="code" href="MD5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>) {</div><div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;    std::string Str;</div><div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;    <a class="code" href="classllvm_1_1raw__string__ostream.html">raw_string_ostream</a> SS(Str);</div><div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SchedDFSResult.html">SchedDFSResult</a> *DFS =</div><div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;      <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classllvm_1_1ScheduleDAGMI.html">ScheduleDAGMI</a>*<span class="keyword">&gt;</span>(<a class="code" href="MD5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>)-&gt;getDFSResult();</div><div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;    SS &lt;&lt; <span class="stringliteral">&quot;SU:&quot;</span> &lt;&lt; SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a3f708b119627541f144d703a1d183202">NodeNum</a>;</div><div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;    <span class="keywordflow">if</span> (DFS)</div><div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;      SS &lt;&lt; <span class="stringliteral">&quot; I:&quot;</span> &lt;&lt; DFS-&gt;<a class="code" href="classllvm_1_1SchedDFSResult.html#aa5c239bd9ff383d18c17d0b7148f8beb">getNumInstrs</a>(SU);</div><div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;    <span class="keywordflow">return</span> SS.<a class="code" href="classllvm_1_1raw__string__ostream.html#ae086260f8c216554ff46dcd96e171459">str</a>();</div><div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;  }</div><div class="line"><a name="l03105"></a><span class="lineno"><a class="line" href="structllvm_1_1DOTGraphTraits_3_01ScheduleDAGMI_01_5_01_4.html#a412a621ecd1fa0c812338cf768411946"> 3105</a></span>&#160;  <span class="keyword">static</span> std::string <a class="code" href="structllvm_1_1DOTGraphTraits_3_01ScheduleDAGMI_01_5_01_4.html#a412a621ecd1fa0c812338cf768411946">getNodeDescription</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU, <span class="keyword">const</span> <a class="code" href="classllvm_1_1ScheduleDAG.html">ScheduleDAG</a> *<a class="code" href="MD5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>) {</div><div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;    <span class="keywordflow">return</span> G-&gt;<a class="code" href="classllvm_1_1ScheduleDAG.html#a2a6534084b1d6332aeb1cf22cba39c2a">getGraphNodeLabel</a>(SU);</div><div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;  }</div><div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;</div><div class="line"><a name="l03109"></a><span class="lineno"><a class="line" href="structllvm_1_1DOTGraphTraits_3_01ScheduleDAGMI_01_5_01_4.html#aed68df43a451ab8ce722ec9fec1a38f4"> 3109</a></span>&#160;  <span class="keyword">static</span> std::string <a class="code" href="structllvm_1_1DOTGraphTraits_3_01ScheduleDAGMI_01_5_01_4.html#aed68df43a451ab8ce722ec9fec1a38f4">getNodeAttributes</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>,</div><div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;                                       <span class="keyword">const</span> <a class="code" href="classllvm_1_1ScheduleDAG.html">ScheduleDAG</a> *Graph) {</div><div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;    std::string Str(<span class="stringliteral">&quot;shape=Mrecord&quot;</span>);</div><div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SchedDFSResult.html">SchedDFSResult</a> *DFS =</div><div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;      <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classllvm_1_1ScheduleDAGMI.html">ScheduleDAGMI</a>*<span class="keyword">&gt;</span>(Graph)-&gt;getDFSResult();</div><div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;    <span class="keywordflow">if</span> (DFS) {</div><div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;      Str += <span class="stringliteral">&quot;,style=filled,fillcolor=\&quot;#&quot;</span>;</div><div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;      Str += <a class="code" href="namespacellvm_1_1DOT.html#a65ec6bb0b1bfe75533186557a9077d28">DOT::getColorString</a>(DFS-&gt;<a class="code" href="classllvm_1_1SchedDFSResult.html#a6c8776a1ce8d9cf55bb1ca65150cbcdd">getSubtreeID</a>(N));</div><div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;      Str += <span class="charliteral">&#39;&quot;&#39;</span>;</div><div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;    }</div><div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;    <span class="keywordflow">return</span> Str;</div><div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;  }</div><div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;};</div><div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;} <span class="comment">// namespace llvm</span></div><div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;<span class="preprocessor">#endif // NDEBUG</span></div><div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;<span class="comment"></span></div><div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;<span class="comment">/// viewGraph - Pop up a ghostview window with the reachable parts of the DAG</span></div><div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;<span class="comment">/// rendered using &#39;dot&#39;.</span></div><div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l03128"></a><span class="lineno"><a class="line" href="classllvm_1_1ScheduleDAGMI.html#a61dab1ab5003d281122587b3458935f3"> 3128</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1ScheduleDAGMI.html#a77b22c95b06f41fefc1a9aba8e4265d3">ScheduleDAGMI::viewGraph</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;<a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;Title) {</div><div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;  <a class="code" href="namespacellvm.html#ab8635363d4287c93f64c55ad5567fcf0">ViewGraph</a>(<span class="keyword">this</span>, Name, <span class="keyword">false</span>, Title);</div><div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;  <a class="code" href="namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">errs</a>() &lt;&lt; <span class="stringliteral">&quot;ScheduleDAGMI::viewGraph is only available in debug builds on &quot;</span></div><div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;         &lt;&lt; <span class="stringliteral">&quot;systems with Graphviz or gv!\n&quot;</span>;</div><div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div><div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;}</div><div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;<span class="comment"></span></div><div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;<span class="comment">/// Out-of-line implementation with no arguments is handy for gdb.</span></div><div class="line"><a name="l03138"></a><span class="lineno"><a class="line" href="classllvm_1_1ScheduleDAGMI.html#a77b22c95b06f41fefc1a9aba8e4265d3"> 3138</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1ScheduleDAGMI.html#a77b22c95b06f41fefc1a9aba8e4265d3">ScheduleDAGMI::viewGraph</a>() {</div><div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;  viewGraph(getDAGName(), <span class="stringliteral">&quot;Scheduling-Units Graph for &quot;</span> + getDAGName());</div><div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;}</div><div class="ttc" id="classllvm_1_1ScheduleDAG_html"><div class="ttname"><a href="classllvm_1_1ScheduleDAG.html">llvm::ScheduleDAG</a></div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00538">ScheduleDAG.h:538</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_acfc76d1e10c53951754e601d83da0e0d"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#acfc76d1e10c53951754e601d83da0e0d">llvm::TargetInstrInfo::CreateTargetMIHazardRecognizer</a></div><div class="ttdeci">virtual ScheduleHazardRecognizer * CreateTargetMIHazardRecognizer(const InstrItineraryData *, const ScheduleDAG *DAG) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8cpp_source.html#l00597">TargetInstrInfo.cpp:597</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a075e34e98605d0e7c289763a104869ac"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">llvm::SmallVectorTemplateCommon&lt; T &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00114">SmallVector.h:114</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00127">SmallVector.h:127</a></div></div>
<div class="ttc" id="namespacellvm_html_a557372a0f9217d7171352952ce9d75bc"><div class="ttname"><a href="namespacellvm.html#a557372a0f9217d7171352952ce9d75bc">llvm::DeleteContainerPointers</a></div><div class="ttdeci">void DeleteContainerPointers(Container &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00315">STLExtras.h:315</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html_a90ffd918ef80c711049758b2064e15c4"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#a90ffd918ef80c711049758b2064e15c4">llvm::ScheduleDAGMI::releaseSucc</a></div><div class="ttdeci">void releaseSucc(SUnit *SU, SDep *SuccEdge)</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l00392">MachineScheduler.cpp:392</a></div></div>
<div class="ttc" id="MachineScheduler_8cpp_html_a852c75810cd23cef346d37386347fadd"><div class="ttname"><a href="MachineScheduler_8cpp.html#a852c75810cd23cef346d37386347fadd">biasPhysRegCopy</a></div><div class="ttdeci">static int biasPhysRegCopy(const SUnit *SU, bool isTop)</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l02389">MachineScheduler.cpp:2389</a></div></div>
<div class="ttc" id="classllvm_1_1SDep_html_a551060cb0333d9d0cfdacd2576d817b9a04d28e273cd30fa75243240b15d08352"><div class="ttname"><a href="classllvm_1_1SDep.html#a551060cb0333d9d0cfdacd2576d817b9a04d28e273cd30fa75243240b15d08352">llvm::SDep::Cluster</a></div><div class="ttdoc">Weak DAG edge linking a chain of clustered instrs. </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00070">ScheduleDAG.h:70</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00236">SmallVector.h:236</a></div></div>
<div class="ttc" id="MachineScheduler_8cpp_html_a3f6bcdf745803c78202f432e2e8c7bbe"><div class="ttname"><a href="MachineScheduler_8cpp.html#a3f6bcdf745803c78202f432e2e8c7bbe">createGenericSched</a></div><div class="ttdeci">static ScheduleDAGInstrs * createGenericSched(MachineSchedContext *C)</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l02834">MachineScheduler.cpp:2834</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1path_html_a214ec2f04ffd92636ed4bd2717607a1d"><div class="ttname"><a href="namespacellvm_1_1sys_1_1path.html#a214ec2f04ffd92636ed4bd2717607a1d">llvm::sys::path::end</a></div><div class="ttdeci">const_iterator end(StringRef path)</div><div class="ttdoc">Get end iterator over path. </div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00181">Path.cpp:181</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGInstrs_html_a1f9a4461e2c9ac06b97f55554f836d66"><div class="ttname"><a href="classllvm_1_1ScheduleDAGInstrs.html#a1f9a4461e2c9ac06b97f55554f836d66">llvm::ScheduleDAGInstrs::finishBlock</a></div><div class="ttdeci">virtual void finishBlock()</div><div class="ttdoc">finishBlock - Clean up after scheduling in the given block. </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAGInstrs_8cpp_source.html#l00171">ScheduleDAGInstrs.cpp:171</a></div></div>
<div class="ttc" id="classllvm_1_1TargetMachine_html_ac962b1af600c2e418625a5fecc5e0f95"><div class="ttname"><a href="classllvm_1_1TargetMachine.html#ac962b1af600c2e418625a5fecc5e0f95">llvm::TargetMachine::getTargetLowering</a></div><div class="ttdeci">virtual const TargetLowering * getTargetLowering() const </div><div class="ttdef"><b>Definition:</b> <a href="Target_2TargetMachine_8h_source.html#l00121">Target/TargetMachine.h:121</a></div></div>
<div class="ttc" id="namespacellvm_1_1ARM__PROC_html_aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5"><div class="ttname"><a href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">llvm::ARM_PROC::A</a></div><div class="ttdef"><b>Definition:</b> <a href="ARMBaseInfo_8h_source.html#l00098">ARMBaseInfo.h:98</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_a884f90190bca4bd354f2d5c91c264028"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">llvm::AnalysisUsage::addPreserved</a></div><div class="ttdeci">AnalysisUsage &amp; addPreserved()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00081">PassAnalysisSupport.h:81</a></div></div>
<div class="ttc" id="MachineScheduler_8cpp_html_add2ddb9eae33f2f515e1c42238c48fb5"><div class="ttname"><a href="MachineScheduler_8cpp.html#add2ddb9eae33f2f515e1c42238c48fb5">ViewMISchedDAGs</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ViewMISchedDAGs(&quot;view-misched-dags&quot;, cl::Hidden, cl::desc(&quot;Pop up a window to show MISched dags after they are processed&quot;))</div></div>
<div class="ttc" id="namespacellvm_html_ab8e34eca3b0817ef7a127913fbf6d9e4"><div class="ttname"><a href="namespacellvm.html#ab8e34eca3b0817ef7a127913fbf6d9e4">llvm::errs</a></div><div class="ttdeci">raw_ostream &amp; errs()</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8cpp_source.html#l00664">raw_ostream.cpp:664</a></div></div>
<div class="ttc" id="classllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00035">PassRegistry.cpp:35</a></div></div>
<div class="ttc" id="classllvm_1_1SUnitIterator_html_a4be93b75190a68d91960b833832f591f"><div class="ttname"><a href="classllvm_1_1SUnitIterator.html#a4be93b75190a68d91960b833832f591f">llvm::SUnitIterator::isArtificialDep</a></div><div class="ttdeci">bool isArtificialDep() const </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00641">ScheduleDAG.h:641</a></div></div>
<div class="ttc" id="structllvm_1_1MachineSchedContext_html_ac66a5fd1e8991685c46cfc1652bfeeaf"><div class="ttname"><a href="structllvm_1_1MachineSchedContext.html#ac66a5fd1e8991685c46cfc1652bfeeaf">llvm::MachineSchedContext::~MachineSchedContext</a></div><div class="ttdeci">virtual ~MachineSchedContext()</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l00088">MachineScheduler.cpp:88</a></div></div>
<div class="ttc" id="classllvm_1_1VNInfo_html_ae623a0f1ab59da851f2ebf1674d1fddb"><div class="ttname"><a href="classllvm_1_1VNInfo.html#ae623a0f1ab59da851f2ebf1674d1fddb">llvm::VNInfo::def</a></div><div class="ttdeci">SlotIndex def</div><div class="ttdoc">The index of the defining instruction. </div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00052">LiveInterval.h:52</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html_af849764183b2e7407e016c847315d0dd"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#af849764183b2e7407e016c847315d0dd">llvm::ScheduleDAGMI::addMutation</a></div><div class="ttdeci">void addMutation(ScheduleDAGMutation *Mutation)</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00353">MachineScheduler.h:353</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="structllvm_1_1MachineSchedPolicy_html_aee4e3964174cee8cf362508ccef135ca"><div class="ttname"><a href="structllvm_1_1MachineSchedPolicy.html#aee4e3964174cee8cf362508ccef135ca">llvm::MachineSchedPolicy::ShouldTrackPressure</a></div><div class="ttdeci">bool ShouldTrackPressure</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00150">MachineScheduler.h:150</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html"><div class="ttname"><a href="classllvm_1_1MachineFunction.html">llvm::MachineFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00075">MachineFunction.h:75</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html"><div class="ttname"><a href="classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">The main container class for the LLVM Intermediate Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00112">Module.h:112</a></div></div>
<div class="ttc" id="Target_2X86_2README_8txt_html_ac9423a63151469d95755528cceb322fb"><div class="ttname"><a href="Target_2X86_2README_8txt.html#ac9423a63151469d95755528cceb322fb">bb</a></div><div class="ttdeci">&lt; i1 &gt; br i1 label label bb bb</div><div class="ttdef"><b>Definition:</b> <a href="Target_2X86_2README_8txt_source.html#l01139">Target/X86/README.txt:1139</a></div></div>
<div class="ttc" id="structllvm_1_1GraphTraits_html"><div class="ttname"><a href="structllvm_1_1GraphTraits.html">llvm::GraphTraits</a></div><div class="ttdef"><b>Definition:</b> <a href="GraphTraits_8h_source.html#l00027">GraphTraits.h:27</a></div></div>
<div class="ttc" id="MachineScheduler_8cpp_html_a528ddb429bfb6c87f0eb6d07893640e1"><div class="ttname"><a href="MachineScheduler_8cpp.html#a528ddb429bfb6c87f0eb6d07893640e1">ILPMaxRegistry</a></div><div class="ttdeci">static MachineSchedRegistry ILPMaxRegistry(&quot;ilpmax&quot;,&quot;Schedule bottom-up for max ILP&quot;, createILPMaxScheduler)</div></div>
<div class="ttc" id="classllvm_1_1ReadyQueue_html_a405dbd4aee72ff1d89057949f6b083e7"><div class="ttname"><a href="classllvm_1_1ReadyQueue.html#a405dbd4aee72ff1d89057949f6b083e7">llvm::ReadyQueue::dump</a></div><div class="ttdeci">void dump()</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l00352">MachineScheduler.cpp:352</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_a2f8d8c8d5540be61a77ffdb228adda38"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a2f8d8c8d5540be61a77ffdb228adda38">llvm::MachineFunction::print</a></div><div class="ttdeci">void print(raw_ostream &amp;OS, SlotIndexes *=0) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8cpp_source.html#l00322">MachineFunction.cpp:322</a></div></div>
<div class="ttc" id="classllvm_1_1SchedDFSResult_html_a2880aad8fd2e67c30a16821744ffc702"><div class="ttname"><a href="classllvm_1_1SchedDFSResult.html#a2880aad8fd2e67c30a16821744ffc702">llvm::SchedDFSResult::getSubtreeLevel</a></div><div class="ttdeci">unsigned getSubtreeLevel(unsigned SubtreeID) const </div><div class="ttdoc">Get the connection level of a subtree. </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDFS_8h_source.html#l00183">ScheduleDFS.h:183</a></div></div>
<div class="ttc" id="structllvm_1_1MachineSchedContext_html_a9334842806d97bee74af8752ebe19fbe"><div class="ttname"><a href="structllvm_1_1MachineSchedContext.html#a9334842806d97bee74af8752ebe19fbe">llvm::MachineSchedContext::MLI</a></div><div class="ttdeci">const MachineLoopInfo * MLI</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00101">MachineScheduler.h:101</a></div></div>
<div class="ttc" id="namespacellvm_1_1SystemZISD_html_a9a3c050e4bfe8d0d09d74c979f5bb121a68ace50a32835aa0562cf8f9694ba510"><div class="ttname"><a href="namespacellvm_1_1SystemZISD.html#a9a3c050e4bfe8d0d09d74c979f5bb121a68ace50a32835aa0562cf8f9694ba510">llvm::SystemZISD::TM</a></div><div class="ttdef"><b>Definition:</b> <a href="SystemZISelLowering_8h_source.html#l00060">SystemZISelLowering.h:60</a></div></div>
<div class="ttc" id="classllvm_1_1PressureDiff_html_a91f8b1b3a2ac9324165199a7189c2ad8"><div class="ttname"><a href="classllvm_1_1PressureDiff.html#a91f8b1b3a2ac9324165199a7189c2ad8">llvm::PressureDiff::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8h_source.html#l00147">RegisterPressure.h:147</a></div></div>
<div class="ttc" id="classllvm_1_1TargetSchedModel_html_a62c7a4fcb40a033c1f4ae7d45f7aa752"><div class="ttname"><a href="classllvm_1_1TargetSchedModel.html#a62c7a4fcb40a033c1f4ae7d45f7aa752">llvm::TargetSchedModel::getNumMicroOps</a></div><div class="ttdeci">unsigned getNumMicroOps(const MachineInstr *MI, const MCSchedClassDesc *SC=0) const </div><div class="ttdoc">Return the number of issue slots required for this MI. </div><div class="ttdef"><b>Definition:</b> <a href="TargetSchedule_8cpp_source.html#l00077">TargetSchedule.cpp:77</a></div></div>
<div class="ttc" id="namespacellvm_html_a5a36a0d02a1629e4c1c8c6c587d01e5b"><div class="ttname"><a href="namespacellvm.html#a5a36a0d02a1629e4c1c8c6c587d01e5b">llvm::MachineDominatorsID</a></div><div class="ttdeci">char &amp; MachineDominatorsID</div><div class="ttdoc">MachineDominators - This pass is a machine dominators analysis pass. </div></div>
<div class="ttc" id="classllvm_1_1LiveInterval_html"><div class="ttname"><a href="classllvm_1_1LiveInterval.html">llvm::LiveInterval</a></div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00528">LiveInterval.h:528</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap&lt; unsigned, unsigned &gt;</a></div></div>
<div class="ttc" id="classllvm_1_1SUnit_html_adb119d63d924841b0523d67dfdd1bf61"><div class="ttname"><a href="classllvm_1_1SUnit.html#adb119d63d924841b0523d67dfdd1bf61">llvm::SUnit::getInstr</a></div><div class="ttdeci">MachineInstr * getInstr() const </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00386">ScheduleDAG.h:386</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayRef_html_a38ed8cc3c342ad6910e8c869d3e2b9cf"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#a38ed8cc3c342ad6910e8c869d3e2b9cf">llvm::ArrayRef::end</a></div><div class="ttdeci">iterator end() const </div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00098">ArrayRef.h:98</a></div></div>
<div class="ttc" id="classllvm_1_1LiveIntervals_html_a6bbcfa1e19c409a905ffc0356c060bd4"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#a6bbcfa1e19c409a905ffc0356c060bd4">llvm::LiveIntervals::getInstructionIndex</a></div><div class="ttdeci">SlotIndex getInstructionIndex(const MachineInstr *instr) const </div><div class="ttdoc">Returns the base index of the given instruction. </div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervalAnalysis_8h_source.html#l00190">LiveIntervalAnalysis.h:190</a></div></div>
<div class="ttc" id="README-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00427">README-SSE.txt:427</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterInfo_html_ae62c5ea35b71f9020caa94340bc78f37"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">llvm::TargetRegisterInfo::isVirtualRegister</a></div><div class="ttdeci">static bool isVirtualRegister(unsigned Reg)</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00287">TargetRegisterInfo.h:287</a></div></div>
<div class="ttc" id="Debug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html_a15d1b308cc91aa994c8512e3104c2f2e"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#a15d1b308cc91aa994c8512e3104c2f2e">llvm::ScheduleDAGMI::buildDAGWithRegPressure</a></div><div class="ttdeci">void buildDAGWithRegPressure()</div><div class="ttdoc">Build the DAG and setup three register pressure trackers. </div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l00693">MachineScheduler.cpp:693</a></div></div>
<div class="ttc" id="classllvm_1_1LiveIntervals_html_a4ed1e0b18a1fa4219caac5e38e99286e"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#a4ed1e0b18a1fa4219caac5e38e99286e">llvm::LiveIntervals::getMBBEndIdx</a></div><div class="ttdeci">SlotIndex getMBBEndIdx(const MachineBasicBlock *mbb) const </div><div class="ttdoc">Return the last index in the given basic block. </div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervalAnalysis_8h_source.html#l00205">LiveIntervalAnalysis.h:205</a></div></div>
<div class="ttc" id="structllvm_1_1DOTGraphTraits_3_01ScheduleDAGMI_01_5_01_4_html_aff0201d90e079596116145d196d677b2"><div class="ttname"><a href="structllvm_1_1DOTGraphTraits_3_01ScheduleDAGMI_01_5_01_4.html#aff0201d90e079596116145d196d677b2">llvm::DOTGraphTraits&lt; ScheduleDAGMI * &gt;::renderGraphFromBottomUp</a></div><div class="ttdeci">static bool renderGraphFromBottomUp()</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l03070">MachineScheduler.cpp:3070</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html_a0b87efc2e79f5e2a29d80940540941cd"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#a0b87efc2e79f5e2a29d80940540941cd">llvm::ScheduleDAGMI::initRegPressure</a></div><div class="ttdeci">void initRegPressure()</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l00510">MachineScheduler.cpp:510</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRange_html_a1d72075b60d30f82fa482aa613f8dcf8"><div class="ttname"><a href="classllvm_1_1LiveRange.html#a1d72075b60d30f82fa482aa613f8dcf8">llvm::LiveRange::isLocal</a></div><div class="ttdeci">bool isLocal(SlotIndex Start, SlotIndex End) const </div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00424">LiveInterval.h:424</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGInstrs_html_aeb9c314de586393b2cb695733eeafc6c"><div class="ttname"><a href="classllvm_1_1ScheduleDAGInstrs.html#aeb9c314de586393b2cb695733eeafc6c">llvm::ScheduleDAGInstrs::begin</a></div><div class="ttdeci">MachineBasicBlock::iterator begin() const </div><div class="ttdoc">begin - Return an iterator to the top of the current scheduling region. </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAGInstrs_8h_source.html#l00171">ScheduleDAGInstrs.h:171</a></div></div>
<div class="ttc" id="classllvm_1_1TargetSchedModel_html_ab8240fcec8f27cce094f2fe582c56087"><div class="ttname"><a href="classllvm_1_1TargetSchedModel.html#ab8240fcec8f27cce094f2fe582c56087">llvm::TargetSchedModel::getMicroOpBufferSize</a></div><div class="ttdeci">unsigned getMicroOpBufferSize() const </div><div class="ttdoc">Number of micro-ops that may be buffered for OOO execution. </div><div class="ttdef"><b>Definition:</b> <a href="TargetSchedule_8h_source.html#l00132">TargetSchedule.h:132</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMutation_html"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMutation.html">llvm::ScheduleDAGMutation</a></div><div class="ttdoc">Mutate the DAG as a postpass after normal DAG building. </div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00265">MachineScheduler.h:265</a></div></div>
<div class="ttc" id="namespacellvm_1_1sys_1_1path_html_a33706aab89e700b8f79e1fa6f4f0e3ee"><div class="ttname"><a href="namespacellvm_1_1sys_1_1path.html#a33706aab89e700b8f79e1fa6f4f0e3ee">llvm::sys::path::begin</a></div><div class="ttdeci">const_iterator begin(StringRef path)</div><div class="ttdoc">Get begin iterator over path. </div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00173">Path.cpp:173</a></div></div>
<div class="ttc" id="MachineScheduler_8cpp_html_a6316f8d737e021684c096eeca388355d"><div class="ttname"><a href="MachineScheduler_8cpp.html#a6316f8d737e021684c096eeca388355d">createILPMaxScheduler</a></div><div class="ttdeci">static ScheduleDAGInstrs * createILPMaxScheduler(MachineSchedContext *C)</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l02951">MachineScheduler.cpp:2951</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAG_html_a2a6534084b1d6332aeb1cf22cba39c2a"><div class="ttname"><a href="classllvm_1_1ScheduleDAG.html#a2a6534084b1d6332aeb1cf22cba39c2a">llvm::ScheduleDAG::getGraphNodeLabel</a></div><div class="ttdeci">virtual std::string getGraphNodeLabel(const SUnit *SU) const =0</div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGInstrs_html_a6717374178b6677be5b2f5d227d312cf"><div class="ttname"><a href="classllvm_1_1ScheduleDAGInstrs.html#a6717374178b6677be5b2f5d227d312cf">llvm::ScheduleDAGInstrs::getSchedClass</a></div><div class="ttdeci">const MCSchedClassDesc * getSchedClass(SUnit *SU) const </div><div class="ttdoc">Resolve and cache a resolved scheduling class for an SUnit. </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAGInstrs_8h_source.html#l00164">ScheduleDAGInstrs.h:164</a></div></div>
<div class="ttc" id="MachineScheduler_8cpp_html_a1b4799f3fecebc3138d88035ee5b010c"><div class="ttname"><a href="MachineScheduler_8cpp.html#a1b4799f3fecebc3138d88035ee5b010c">createInstructionShuffler</a></div><div class="ttdeci">static ScheduleDAGInstrs * createInstructionShuffler(MachineSchedContext *C)</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l03039">MachineScheduler.cpp:3039</a></div></div>
<div class="ttc" id="namespacellvm_html_a4f3ce4ffd1eecf7a4fef2cce86560b1a"><div class="ttname"><a href="namespacellvm.html#a4f3ce4ffd1eecf7a4fef2cce86560b1a">llvm::MachineSchedulerID</a></div><div class="ttdeci">char &amp; MachineSchedulerID</div><div class="ttdoc">MachineScheduler - This pass schedules machine instructions. </div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l00116">MachineScheduler.cpp:116</a></div></div>
<div class="ttc" id="classllvm_1_1ReadyQueue_html_a08554e1e3dc7795228cff0cb44dff7aa"><div class="ttname"><a href="classllvm_1_1ReadyQueue.html#a08554e1e3dc7795228cff0cb44dff7aa">llvm::ReadyQueue::getID</a></div><div class="ttdeci">unsigned getID() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00221">MachineScheduler.h:221</a></div></div>
<div class="ttc" id="classllvm_1_1TargetSchedModel_html_aa117767750c3ca738006fa1ab5c01345"><div class="ttname"><a href="classllvm_1_1TargetSchedModel.html#aa117767750c3ca738006fa1ab5c01345">llvm::TargetSchedModel::getResourceFactor</a></div><div class="ttdeci">unsigned getResourceFactor(unsigned ResIdx) const </div><div class="ttdoc">Multiply the number of units consumed for a resource by this factor to normalize it relative to other...</div><div class="ttdef"><b>Definition:</b> <a href="TargetSchedule_8h_source.html#l00115">TargetSchedule.h:115</a></div></div>
<div class="ttc" id="classllvm_1_1RegisterPassParser_html"><div class="ttname"><a href="classllvm_1_1RegisterPassParser.html">llvm::RegisterPassParser</a></div><div class="ttdef"><b>Definition:</b> <a href="MachinePassRegistry_8h_source.html#l00122">MachinePassRegistry.h:122</a></div></div>
<div class="ttc" id="classllvm_1_1MachineSchedRegistry_html"><div class="ttname"><a href="classllvm_1_1MachineSchedRegistry.html">llvm::MachineSchedRegistry</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00115">MachineScheduler.h:115</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_acbc921830578e2741be6549db716c0ce"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">llvm::MachineBasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00238">MachineBasicBlock.h:238</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html_a0464e893c7a9be19f0fca7a077c7e1db"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#a0464e893c7a9be19f0fca7a077c7e1db">llvm::ScheduleDAGMI::top</a></div><div class="ttdeci">MachineBasicBlock::iterator top() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00368">MachineScheduler.h:368</a></div></div>
<div class="ttc" id="classllvm_1_1VNInfo_html"><div class="ttname"><a href="classllvm_1_1VNInfo.html">llvm::VNInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00044">LiveInterval.h:44</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a096d82c3c6f44b9a8e59d80d3851f616"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a096d82c3c6f44b9a8e59d80d3851f616">llvm::MachineBasicBlock::instr_iterator</a></div><div class="ttdeci">Instructions::iterator instr_iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00205">MachineBasicBlock.h:205</a></div></div>
<div class="ttc" id="structllvm_1_1DOTGraphTraits_3_01ScheduleDAGMI_01_5_01_4_html_a9e281d4b0718506e4ec5596a06ae36dd"><div class="ttname"><a href="structllvm_1_1DOTGraphTraits_3_01ScheduleDAGMI_01_5_01_4.html#a9e281d4b0718506e4ec5596a06ae36dd">llvm::DOTGraphTraits&lt; ScheduleDAGMI * &gt;::getNodeLabel</a></div><div class="ttdeci">static std::string getNodeLabel(const SUnit *SU, const ScheduleDAG *G)</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l03095">MachineScheduler.cpp:3095</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html">llvm::ScheduleDAGMI</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00275">MachineScheduler.h:275</a></div></div>
<div class="ttc" id="classllvm_1_1SUnit_html_aa1dfdcdc657e12c47e72d9dbe251ac85"><div class="ttname"><a href="classllvm_1_1SUnit.html#aa1dfdcdc657e12c47e72d9dbe251ac85">llvm::SUnit::BotReadyCycle</a></div><div class="ttdeci">unsigned BotReadyCycle</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00304">ScheduleDAG.h:304</a></div></div>
<div class="ttc" id="RegisterClassInfo_8h_html"><div class="ttname"><a href="RegisterClassInfo_8h.html">RegisterClassInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1SDep_html_a750cdf657d876c82731a45e2235eb2b5"><div class="ttname"><a href="classllvm_1_1SDep.html#a750cdf657d876c82731a45e2235eb2b5">llvm::SDep::isArtificial</a></div><div class="ttdeci">bool isArtificial() const </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00204">ScheduleDAG.h:204</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html_abfdd9a95217810c69b2557060a130318"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#abfdd9a95217810c69b2557060a130318">llvm::ScheduleDAGMI::updateQueues</a></div><div class="ttdeci">void updateQueues(SUnit *SU, bool IsTopNode)</div><div class="ttdoc">Update scheduler DAG and queues after scheduling an instruction. </div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l00921">MachineScheduler.cpp:921</a></div></div>
<div class="ttc" id="classllvm_1_1SUnit_html_ae2b43854b542de66eec6475adc48f56c"><div class="ttname"><a href="classllvm_1_1SUnit.html#ae2b43854b542de66eec6475adc48f56c">llvm::SUnit::Preds</a></div><div class="ttdeci">SmallVector&lt; SDep, 4 &gt; Preds</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00263">ScheduleDAG.h:263</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGInstrs_html_a2822215b7634783aece96ef695a72f1d"><div class="ttname"><a href="classllvm_1_1ScheduleDAGInstrs.html#a2822215b7634783aece96ef695a72f1d">llvm::ScheduleDAGInstrs::startBlock</a></div><div class="ttdeci">virtual void startBlock(MachineBasicBlock *BB)</div><div class="ttdoc">startBlock - Prepare to perform scheduling in the given block. </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAGInstrs_8cpp_source.html#l00167">ScheduleDAGInstrs.cpp:167</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00109">CommandLine.h:109</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html_a25c4a978a6251c445973a29d46726aae"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#a25c4a978a6251c445973a29d46726aae">llvm::ScheduleDAGMI::getTopRPTracker</a></div><div class="ttdeci">const RegPressureTracker &amp; getTopRPTracker() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00389">MachineScheduler.h:389</a></div></div>
<div class="ttc" id="classllvm_1_1SDep_html_a07333f8ba53e0454b7ec6365860c0732abe9561936346ab5c5e22fe544994b06e"><div class="ttname"><a href="classllvm_1_1SDep.html#a07333f8ba53e0454b7ec6365860c0732abe9561936346ab5c5e22fe544994b06e">llvm::SDep::Anti</a></div><div class="ttdoc">A register anti-dependedence (aka WAR). </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00050">ScheduleDAG.h:50</a></div></div>
<div class="ttc" id="structllvm_1_1DOTGraphTraits_3_01ScheduleDAGMI_01_5_01_4_html_aed68df43a451ab8ce722ec9fec1a38f4"><div class="ttname"><a href="structllvm_1_1DOTGraphTraits_3_01ScheduleDAGMI_01_5_01_4.html#aed68df43a451ab8ce722ec9fec1a38f4">llvm::DOTGraphTraits&lt; ScheduleDAGMI * &gt;::getNodeAttributes</a></div><div class="ttdeci">static std::string getNodeAttributes(const SUnit *N, const ScheduleDAG *Graph)</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l03109">MachineScheduler.cpp:3109</a></div></div>
<div class="ttc" id="classllvm_1_1SparseMultiSet_html_a5a05b79eda02945cb09d6202624f7fa4"><div class="ttname"><a href="classllvm_1_1SparseMultiSet.html#a5a05b79eda02945cb09d6202624f7fa4">llvm::SparseMultiSet&lt; VReg2SUnit, VirtReg2IndexFunctor &gt;::iterator</a></div><div class="ttdeci">iterator_base&lt; SparseMultiSet * &gt; iterator</div><div class="ttdef"><b>Definition:</b> <a href="SparseMultiSet_8h_source.html#l00312">SparseMultiSet.h:312</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAG_html_a5a3d3d075a208011a24a0918b58d7daa"><div class="ttname"><a href="classllvm_1_1ScheduleDAG.html#a5a3d3d075a208011a24a0918b58d7daa">llvm::ScheduleDAG::MF</a></div><div class="ttdeci">MachineFunction &amp; MF</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00543">ScheduleDAG.h:543</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGInstrs_html_ab077d62392fe288ad041b43622d93346"><div class="ttname"><a href="classllvm_1_1ScheduleDAGInstrs.html#ab077d62392fe288ad041b43622d93346">llvm::ScheduleDAGInstrs::getSchedModel</a></div><div class="ttdeci">const TargetSchedModel * getSchedModel() const </div><div class="ttdoc">Get the machine model for instruction scheduling. </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAGInstrs_8h_source.html#l00161">ScheduleDAGInstrs.h:161</a></div></div>
<div class="ttc" id="X86DisassemblerDecoder_8h_html_a546839a5c4bcf9f9450967155f48de41"><div class="ttname"><a href="X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></div><div class="ttdeci">Reg</div><div class="ttdef"><b>Definition:</b> <a href="X86DisassemblerDecoder_8h_source.html#l00428">X86DisassemblerDecoder.h:428</a></div></div>
<div class="ttc" id="classllvm_1_1SUnit_html_a8c201d7a769bda1cd75d8d6788123068"><div class="ttname"><a href="classllvm_1_1SUnit.html#a8c201d7a769bda1cd75d8d6788123068">llvm::SUnit::isScheduled</a></div><div class="ttdeci">bool isScheduled</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00291">ScheduleDAG.h:291</a></div></div>
<div class="ttc" id="namespacellvm_html_aa188572c8aa302e24bbfffa1292972bd"><div class="ttname"><a href="namespacellvm.html#aa188572c8aa302e24bbfffa1292972bd">llvm::apply</a></div><div class="ttdeci">static const SCEV * apply(const SCEV *Scev, LoopToScevMapT &amp;Map, ScalarEvolution &amp;SE)</div><div class="ttdoc">Applies the Map (Loop -&gt; SCEV) to the given Scev. </div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolutionExpressions_8h_source.html#l00745">ScalarEvolutionExpressions.h:745</a></div></div>
<div class="ttc" id="classllvm_1_1SUnit_html_ab760185ba11bc474695d222b92373b76"><div class="ttname"><a href="classllvm_1_1SUnit.html#ab760185ba11bc474695d222b92373b76">llvm::SUnit::getHeight</a></div><div class="ttdeci">unsigned getHeight() const </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00411">ScheduleDAG.h:411</a></div></div>
<div class="ttc" id="classllvm_1_1LiveIntervals_html"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html">llvm::LiveIntervals</a></div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervalAnalysis_8h_source.html#l00049">LiveIntervalAnalysis.h:49</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_a3217063f680fa8e35dea3c59b6e52b18"><div class="ttname"><a href="Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a></div><div class="ttdeci">Clang compiles this i1 i64 store i64 i64 store i64 i64 store i64 i64 store i64 align Which gets codegen d xmm0 movaps rbp movaps rbp movaps rbp movaps rbp rbp rbp rbp rbp It would be better to have movq s of instead of the movaps s LLVM produces ret int</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00549">Target/README.txt:549</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_ae5c60fd282ee894c87ea02c3f0fcb6d0"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">llvm::AnalysisUsage::addRequired</a></div><div class="ttdeci">AnalysisUsage &amp; addRequired()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00055">PassAnalysisSupport.h:55</a></div></div>
<div class="ttc" id="namespacellvm_1_1GraphProgram_html_a0ad4685976f8c4d4a697a53fbe05d10b"><div class="ttname"><a href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">llvm::GraphProgram::Name</a></div><div class="ttdeci">Name</div><div class="ttdef"><b>Definition:</b> <a href="GraphWriter_8h_source.html#l00044">GraphWriter.h:44</a></div></div>
<div class="ttc" id="PassSupport_8h_html_a14724f1ccf528e73bb29bc9230737967"><div class="ttname"><a href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a></div><div class="ttdeci">#define INITIALIZE_PASS_DEPENDENCY(depName)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00167">PassSupport.h:167</a></div></div>
<div class="ttc" id="classllvm_1_1BitVector_html_a35bbc237e4a675c5332103ac6e7dcce1"><div class="ttname"><a href="classllvm_1_1BitVector.html#a35bbc237e4a675c5332103ac6e7dcce1">llvm::BitVector::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdoc">clear - Clear all bits. </div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00205">BitVector.h:205</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html_a77b22c95b06f41fefc1a9aba8e4265d3"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#a77b22c95b06f41fefc1a9aba8e4265d3">llvm::ScheduleDAGMI::viewGraph</a></div><div class="ttdeci">void viewGraph() LLVM_OVERRIDE</div><div class="ttdoc">Out-of-line implementation with no arguments is handy for gdb. </div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l03138">MachineScheduler.cpp:3138</a></div></div>
<div class="ttc" id="structllvm_1_1MachineSchedContext_html_aa604d18378910f87649c38841cc1531c"><div class="ttname"><a href="structllvm_1_1MachineSchedContext.html#aa604d18378910f87649c38841cc1531c">llvm::MachineSchedContext::LIS</a></div><div class="ttdeci">LiveIntervals * LIS</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00105">MachineScheduler.h:105</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html_a33e863f8bef4b6fd1e41d94f16cecab3"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#a33e863f8bef4b6fd1e41d94f16cecab3">llvm::ScheduleDAGMI::getScheduledTrees</a></div><div class="ttdeci">BitVector &amp; getScheduledTrees()</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00417">MachineScheduler.h:417</a></div></div>
<div class="ttc" id="classllvm_1_1SUnit_html_a40c2dfbd170941dd4d20ee9b60c9d49d"><div class="ttname"><a href="classllvm_1_1SUnit.html#a40c2dfbd170941dd4d20ee9b60c9d49d">llvm::SUnit::NumSuccsLeft</a></div><div class="ttdeci">unsigned NumSuccsLeft</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00276">ScheduleDAG.h:276</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunctionPass_html"><div class="ttname"><a href="classllvm_1_1MachineFunctionPass.html">llvm::MachineFunctionPass</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunctionPass_8h_source.html#l00032">MachineFunctionPass.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1Twine_html"><div class="ttname"><a href="classllvm_1_1Twine.html">llvm::Twine</a></div><div class="ttdef"><b>Definition:</b> <a href="Twine_8h_source.html#l00081">Twine.h:81</a></div></div>
<div class="ttc" id="classllvm_1_1SDep_html_ac087b1f634a3e5738ed056c68dbd1b00"><div class="ttname"><a href="classllvm_1_1SDep.html#ac087b1f634a3e5738ed056c68dbd1b00">llvm::SDep::isWeak</a></div><div class="ttdeci">bool isWeak() const </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00198">ScheduleDAG.h:198</a></div></div>
<div class="ttc" id="classllvm_1_1TargetSchedModel_html"><div class="ttname"><a href="classllvm_1_1TargetSchedModel.html">llvm::TargetSchedModel</a></div><div class="ttdoc">Provide an instruction scheduling machine model to CodeGen passes. </div><div class="ttdef"><b>Definition:</b> <a href="TargetSchedule_8h_source.html#l00032">TargetSchedule.h:32</a></div></div>
<div class="ttc" id="HexagonCopyToCombine_8cpp_html_a1d40004718218dbdf06b496766299101"><div class="ttname"><a href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a></div><div class="ttdeci">const HexagonInstrInfo * TII</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCopyToCombine_8cpp_source.html#l00115">HexagonCopyToCombine.cpp:115</a></div></div>
<div class="ttc" id="structllvm_1_1MachineSchedContext_html_a3c04bf922b53ed32316b9725a99a5b2f"><div class="ttname"><a href="structllvm_1_1MachineSchedContext.html#a3c04bf922b53ed32316b9725a99a5b2f">llvm::MachineSchedContext::PassConfig</a></div><div class="ttdeci">const TargetPassConfig * PassConfig</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00103">MachineScheduler.h:103</a></div></div>
<div class="ttc" id="structllvm_1_1DOTGraphTraits_3_01ScheduleDAGMI_01_5_01_4_html_a738a1d6d967fd5a8cdf539bced89b0c5"><div class="ttname"><a href="structllvm_1_1DOTGraphTraits_3_01ScheduleDAGMI_01_5_01_4.html#a738a1d6d967fd5a8cdf539bced89b0c5">llvm::DOTGraphTraits&lt; ScheduleDAGMI * &gt;::getEdgeAttributes</a></div><div class="ttdeci">static std::string getEdgeAttributes(const SUnit *Node, SUnitIterator EI, const ScheduleDAG *Graph)</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l03085">MachineScheduler.cpp:3085</a></div></div>
<div class="ttc" id="MachineScheduler_8cpp_html_ac447d226fe7e7b220a6616b2c21ce190"><div class="ttname"><a href="MachineScheduler_8cpp.html#ac447d226fe7e7b220a6616b2c21ce190">DefaultSchedRegistry</a></div><div class="ttdeci">static MachineSchedRegistry DefaultSchedRegistry(&quot;default&quot;,&quot;Use the target's default scheduler choice.&quot;, useDefaultMachineSched)</div></div>
<div class="ttc" id="MachineScheduler_8cpp_html_af75da6925072c8c7c9f5d762b149a254"><div class="ttname"><a href="MachineScheduler_8cpp.html#af75da6925072c8c7c9f5d762b149a254">MachineSchedOpt</a></div><div class="ttdeci">static cl::opt&lt; MachineSchedRegistry::ScheduleDAGCtor, false, RegisterPassParser&lt; MachineSchedRegistry &gt; &gt; MachineSchedOpt(&quot;misched&quot;, cl::init(&amp;useDefaultMachineSched), cl::Hidden, cl::desc(&quot;Machine instruction scheduler to use&quot;))</div><div class="ttdoc">MachineSchedOpt allows command line selection of the scheduler. </div></div>
<div class="ttc" id="ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdef"><b>Definition:</b> <a href="ErrorHandling_8h_source.html#l00103">ErrorHandling.h:103</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRange_html_a757fd6afba0f531db70e78e057d147c6"><div class="ttname"><a href="classllvm_1_1LiveRange.html#a757fd6afba0f531db70e78e057d147c6">llvm::LiveRange::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00193">LiveInterval.h:193</a></div></div>
<div class="ttc" id="classllvm_1_1PressureChange_html_ad70cb56db629f087c5f2b0dfb5dc8dc9"><div class="ttname"><a href="classllvm_1_1PressureChange.html#ad70cb56db629f087c5f2b0dfb5dc8dc9">llvm::PressureChange::getPSet</a></div><div class="ttdeci">unsigned getPSet() const </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8h_source.html#l00111">RegisterPressure.h:111</a></div></div>
<div class="ttc" id="MachineScheduler_8cpp_html_a2eb7284c69275f864efd7c7553aa48f3"><div class="ttname"><a href="MachineScheduler_8cpp.html#a2eb7284c69275f864efd7c7553aa48f3">getWeakLeft</a></div><div class="ttdeci">static unsigned getWeakLeft(const SUnit *SU, bool isTop)</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l02378">MachineScheduler.cpp:2378</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00035">APInt.h:35</a></div></div>
<div class="ttc" id="PassSupport_8h_html_a74ce8276b89067e806f67c45a6d92575"><div class="ttname"><a href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a></div><div class="ttdeci">#define INITIALIZE_PASS_END(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00172">PassSupport.h:172</a></div></div>
<div class="ttc" id="classllvm_1_1SDep_html_a07333f8ba53e0454b7ec6365860c0732af91df2221290eaa1a368403ffad49a26"><div class="ttname"><a href="classllvm_1_1SDep.html#a07333f8ba53e0454b7ec6365860c0732af91df2221290eaa1a368403ffad49a26">llvm::SDep::Data</a></div><div class="ttdoc">Regular data dependence (aka true-dependence). </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00049">ScheduleDAG.h:49</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a2b48451e9cc8433ed5f8ee30462cc96e"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a2b48451e9cc8433ed5f8ee30462cc96e">llvm::MachineInstr::mayLoad</a></div><div class="ttdeci">bool mayLoad(QueryType Type=AnyInBundle) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00465">MachineInstr.h:465</a></div></div>
<div class="ttc" id="classllvm_1_1LiveQueryResult_html"><div class="ttname"><a href="classllvm_1_1LiveQueryResult.html">llvm::LiveQueryResult</a></div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00085">LiveInterval.h:85</a></div></div>
<div class="ttc" id="classllvm_1_1SUnit_html_adc4d8df3725fd70ffbaffeead756025c"><div class="ttname"><a href="classllvm_1_1SUnit.html#adc4d8df3725fd70ffbaffeead756025c">llvm::SUnit::hasPhysRegUses</a></div><div class="ttdeci">bool hasPhysRegUses</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00286">ScheduleDAG.h:286</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html_a32fd11ce8d65ee3a4ba5f9381ad77627"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#a32fd11ce8d65ee3a4ba5f9381ad77627">llvm::ScheduleDAGMI::enterRegion</a></div><div class="ttdeci">void enterRegion(MachineBasicBlock *bb, MachineBasicBlock::iterator begin, MachineBasicBlock::iterator end, unsigned regioninstrs) LLVM_OVERRIDE</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l00490">MachineScheduler.cpp:490</a></div></div>
<div class="ttc" id="namespacellvm_1_1MCID_html_a8035044d40d3758eb45b65dce69dc90ba359237c780f7c8e40645575826da8a3c"><div class="ttname"><a href="namespacellvm_1_1MCID.html#a8035044d40d3758eb45b65dce69dc90ba359237c780f7c8e40645575826da8a3c">llvm::MCID::Branch</a></div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00108">MCInstrDesc.h:108</a></div></div>
<div class="ttc" id="classllvm_1_1AliasAnalysis_html"><div class="ttname"><a href="classllvm_1_1AliasAnalysis.html">llvm::AliasAnalysis</a></div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00056">AliasAnalysis.h:56</a></div></div>
<div class="ttc" id="classllvm_1_1SUnit_html_a9d9a8b8d5225f85cecbbada4ce4406b0"><div class="ttname"><a href="classllvm_1_1SUnit.html#a9d9a8b8d5225f85cecbbada4ce4406b0">llvm::SUnit::hasPhysRegDefs</a></div><div class="ttdeci">bool hasPhysRegDefs</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00287">ScheduleDAG.h:287</a></div></div>
<div class="ttc" id="ErrorHandling_8h_html"><div class="ttname"><a href="ErrorHandling_8h.html">ErrorHandling.h</a></div></div>
<div class="ttc" id="MachineScheduler_8cpp_html_adbac408ec49398dd712a10f5be648f6c"><div class="ttname"><a href="MachineScheduler_8cpp.html#adbac408ec49398dd712a10f5be648f6c">tracePick</a></div><div class="ttdeci">static void tracePick(const GenericScheduler::SchedCandidate &amp;Cand, bool IsTop)</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l02678">MachineScheduler.cpp:2678</a></div></div>
<div class="ttc" id="namespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00126">StackSlotColoring.cpp:126</a></div></div>
<div class="ttc" id="namespacellvm_1_1CallingConv_html_a4f861731fc6dbfdccc05af5968d98974"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">llvm::CallingConv::ID</a></div><div class="ttdeci">ID</div><div class="ttdoc">LLVM Calling Convention Representation. </div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00026">CallingConv.h:26</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00031">Instruction.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1TargetPassConfig_html"><div class="ttname"><a href="classllvm_1_1TargetPassConfig.html">llvm::TargetPassConfig</a></div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2Passes_8h_source.html#l00087">CodeGen/Passes.h:87</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ad96b7cf3182ce2ba85e5a7a93b12c441"><div class="ttname"><a href="MD5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a></div><div class="ttdeci">#define G(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00052">MD5.cpp:52</a></div></div>
<div class="ttc" id="MachineScheduler_8cpp_html_a0919f9fcc340092528e88bd7fde42c61"><div class="ttname"><a href="MachineScheduler_8cpp.html#a0919f9fcc340092528e88bd7fde42c61">ShufflerRegistry</a></div><div class="ttdeci">static MachineSchedRegistry ShufflerRegistry(&quot;shuffle&quot;,&quot;Shuffle machine instructions alternating directions&quot;, createInstructionShuffler)</div></div>
<div class="ttc" id="classllvm_1_1SchedDFSResult_html"><div class="ttname"><a href="classllvm_1_1SchedDFSResult.html">llvm::SchedDFSResult</a></div><div class="ttdoc">Compute the values of each DAG node for various metrics during DFS. </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDFS_8h_source.html#l00068">ScheduleDFS.h:68</a></div></div>
<div class="ttc" id="classllvm_1_1SUnit_html_a2a6f92b9c5aba34d3b07f3ebe229ccff"><div class="ttname"><a href="classllvm_1_1SUnit.html#a2a6f92b9c5aba34d3b07f3ebe229ccff">llvm::SUnit::TopReadyCycle</a></div><div class="ttdeci">unsigned TopReadyCycle</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00303">ScheduleDAG.h:303</a></div></div>
<div class="ttc" id="MachineScheduler_8cpp_html_a5f19a4fcf5a639613c954e6da2dfaaf3"><div class="ttname"><a href="MachineScheduler_8cpp.html#a5f19a4fcf5a639613c954e6da2dfaaf3">VerifyScheduling</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; VerifyScheduling(&quot;verify-misched&quot;, cl::Hidden, cl::desc(&quot;Verify machine instrs before and after machine scheduling&quot;))</div></div>
<div class="ttc" id="MachineScheduler_8cpp_html_a459acab05344caa836aa036f1829c928"><div class="ttname"><a href="MachineScheduler_8cpp.html#a459acab05344caa836aa036f1829c928">priorNonDebug</a></div><div class="ttdeci">static MachineBasicBlock::const_iterator priorNonDebug(MachineBasicBlock::const_iterator I, MachineBasicBlock::const_iterator Beg)</div><div class="ttdoc">Decrement this iterator until reaching the top or a non-debug instr. </div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l00170">MachineScheduler.cpp:170</a></div></div>
<div class="ttc" id="classllvm_1_1SlotIndexes_html"><div class="ttname"><a href="classllvm_1_1SlotIndexes.html">llvm::SlotIndexes</a></div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00334">SlotIndexes.h:334</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayRef_html_ac2203d5b281b7d77e632b12d516e1c18"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#ac2203d5b281b7d77e632b12d516e1c18">llvm::ArrayRef::rbegin</a></div><div class="ttdeci">reverse_iterator rbegin() const </div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00100">ArrayRef.h:100</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html_a4dd56692d6f6e4cc2e122585f40cc064"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#a4dd56692d6f6e4cc2e122585f40cc064">llvm::ScheduleDAGMI::computeDFSResult</a></div><div class="ttdeci">void computeDFSResult()</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l00723">MachineScheduler.cpp:723</a></div></div>
<div class="ttc" id="classllvm_1_1SUnit_html_ae75d620ee809eaf50970a833f4a3ace9"><div class="ttname"><a href="classllvm_1_1SUnit.html#ae75d620ee809eaf50970a833f4a3ace9">llvm::SUnit::WeakSuccsLeft</a></div><div class="ttdeci">unsigned WeakSuccsLeft</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00278">ScheduleDAG.h:278</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleHazardRecognizer_html_a4fa0c3ae8b49b41c767c6fd5eb7cde19"><div class="ttname"><a href="classllvm_1_1ScheduleHazardRecognizer.html#a4fa0c3ae8b49b41c767c6fd5eb7cde19">llvm::ScheduleHazardRecognizer::isEnabled</a></div><div class="ttdeci">bool isEnabled() const </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleHazardRecognizer_8h_source.html#l00045">ScheduleHazardRecognizer.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1MVT_html_afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0"><div class="ttname"><a href="classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">llvm::MVT::i32</a></div><div class="ttdef"><b>Definition:</b> <a href="ValueTypes_8h_source.html#l00046">ValueTypes.h:46</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a></div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00031">ArrayRef.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1BitVector_html"><div class="ttname"><a href="classllvm_1_1BitVector.html">llvm::BitVector</a></div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00027">BitVector.h:27</a></div></div>
<div class="ttc" id="structllvm_1_1DOTGraphTraits_3_01ScheduleDAGMI_01_5_01_4_html_a9cb35016314cf6da022701d4e0a06fcb"><div class="ttname"><a href="structllvm_1_1DOTGraphTraits_3_01ScheduleDAGMI_01_5_01_4.html#a9cb35016314cf6da022701d4e0a06fcb">llvm::DOTGraphTraits&lt; ScheduleDAGMI * &gt;::getGraphName</a></div><div class="ttdeci">static std::string getGraphName(const ScheduleDAG *G)</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l03066">MachineScheduler.cpp:3066</a></div></div>
<div class="ttc" id="classllvm_1_1InstrItineraryData_html"><div class="ttname"><a href="classllvm_1_1InstrItineraryData.html">llvm::InstrItineraryData</a></div><div class="ttdef"><b>Definition:</b> <a href="MCInstrItineraries_8h_source.html#l00111">MCInstrItineraries.h:111</a></div></div>
<div class="ttc" id="classllvm_1_1SUnit_html_a94f78042fbba3ea4cd1004353daa46aa"><div class="ttname"><a href="classllvm_1_1SUnit.html#a94f78042fbba3ea4cd1004353daa46aa">llvm::SUnit::NumPredsLeft</a></div><div class="ttdeci">unsigned NumPredsLeft</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00275">ScheduleDAG.h:275</a></div></div>
<div class="ttc" id="COFFYAML_8cpp_html_a9dbc9c66cf3908e866b252feca6395a4"><div class="ttname"><a href="COFFYAML_8cpp.html#a9dbc9c66cf3908e866b252feca6395a4">Machine</a></div><div class="ttdeci">COFF::MachineTypes Machine</div><div class="ttdef"><b>Definition:</b> <a href="COFFYAML_8cpp_source.html#l00211">COFFYAML.cpp:211</a></div></div>
<div class="ttc" id="classllvm_1_1MachinePassRegistry_html"><div class="ttname"><a href="classllvm_1_1MachinePassRegistry.html">llvm::MachinePassRegistry</a></div><div class="ttdef"><b>Definition:</b> <a href="MachinePassRegistry_8h_source.html#l00084">MachinePassRegistry.h:84</a></div></div>
<div class="ttc" id="classllvm_1_1SUnitIterator_html"><div class="ttname"><a href="classllvm_1_1SUnitIterator.html">llvm::SUnitIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00599">ScheduleDAG.h:599</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html_ad76b445fa3572024f6ef95ab4098fe75"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#ad76b445fa3572024f6ef95ab4098fe75">llvm::ScheduleDAGMI::isTrackingPressure</a></div><div class="ttdeci">bool isTrackingPressure() const </div><div class="ttdoc">Return true if register pressure tracking is enabled. </div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00346">MachineScheduler.h:346</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGInstrs_html_ae8727d434d20639d563849891f5ca1e1"><div class="ttname"><a href="classllvm_1_1ScheduleDAGInstrs.html#ae8727d434d20639d563849891f5ca1e1">llvm::ScheduleDAGInstrs::enterRegion</a></div><div class="ttdeci">virtual void enterRegion(MachineBasicBlock *bb, MachineBasicBlock::iterator begin, MachineBasicBlock::iterator end, unsigned regioninstrs)</div><div class="ttdoc">Initialize the scheduler state for the next scheduling region. </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAGInstrs_8cpp_source.html#l00180">ScheduleDAGInstrs.cpp:180</a></div></div>
<div class="ttc" id="MachineScheduler_8cpp_html_acee825c0047d5eb911660fde77617a8c"><div class="ttname"><a href="MachineScheduler_8cpp.html#acee825c0047d5eb911660fde77617a8c">misched</a></div><div class="ttdeci">misched</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l00123">MachineScheduler.cpp:123</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayRef_html_a76878250107ee24ef7339870bdda4bcf"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">llvm::ArrayRef::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdoc">size - Get the array size. </div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00109">ArrayRef.h:109</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html_a6981554a1e612924bd983320acbcc609"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#a6981554a1e612924bd983320acbcc609">llvm::TargetInstrInfo::enableClusterLoads</a></div><div class="ttdeci">virtual bool enableClusterLoads() const </div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00635">TargetInstrInfo.h:635</a></div></div>
<div class="ttc" id="structllvm_1_1DOTGraphTraits_3_01ScheduleDAGMI_01_5_01_4_html_a412a621ecd1fa0c812338cf768411946"><div class="ttname"><a href="structllvm_1_1DOTGraphTraits_3_01ScheduleDAGMI_01_5_01_4.html#a412a621ecd1fa0c812338cf768411946">llvm::DOTGraphTraits&lt; ScheduleDAGMI * &gt;::getNodeDescription</a></div><div class="ttdeci">static std::string getNodeDescription(const SUnit *SU, const ScheduleDAG *G)</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l03105">MachineScheduler.cpp:3105</a></div></div>
<div class="ttc" id="classllvm_1_1TargetInstrInfo_html"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html">llvm::TargetInstrInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00047">TargetInstrInfo.h:47</a></div></div>
<div class="ttc" id="MachineScheduler_8cpp_html_ad3d400fc4e500117eeeecae914d07c83"><div class="ttname"><a href="MachineScheduler_8cpp.html#ad3d400fc4e500117eeeecae914d07c83">EnableLoadCluster</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; EnableLoadCluster(&quot;misched-cluster&quot;, cl::Hidden, cl::desc(&quot;Enable load clustering.&quot;), cl::init(true))</div></div>
<div class="ttc" id="classllvm_1_1ReadyQueue_html_a4eb7129f3c04895463609956568a5e70"><div class="ttname"><a href="classllvm_1_1ReadyQueue.html#a4eb7129f3c04895463609956568a5e70">llvm::ReadyQueue::iterator</a></div><div class="ttdeci">std::vector&lt; SUnit * &gt;::iterator iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00234">MachineScheduler.h:234</a></div></div>
<div class="ttc" id="classllvm_1_1SDep_html"><div class="ttname"><a href="classllvm_1_1SDep.html">llvm::SDep</a></div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00045">ScheduleDAG.h:45</a></div></div>
<div class="ttc" id="MachineScheduler_8cpp_html_afce7d50acbe2274ccc6beebcb16ca812"><div class="ttname"><a href="MachineScheduler_8cpp.html#afce7d50acbe2274ccc6beebcb16ca812">tryLess</a></div><div class="ttdeci">static bool tryLess(int TryVal, int CandVal, GenericScheduler::SchedCandidate &amp;TryCand, GenericScheduler::SchedCandidate &amp;Cand, GenericScheduler::CandReason Reason)</div><div class="ttdoc">Return true if this heuristic determines order. </div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l02320">MachineScheduler.cpp:2320</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayRef_html_ad5ef1f928854a7dba2f176e654da0f3a"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#ad5ef1f928854a7dba2f176e654da0f3a">llvm::ArrayRef::rend</a></div><div class="ttdeci">reverse_iterator rend() const </div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00101">ArrayRef.h:101</a></div></div>
<div class="ttc" id="structllvm_1_1MachineSchedContext_html_a510c29d57e9f0343df48b7c58cb89228"><div class="ttname"><a href="structllvm_1_1MachineSchedContext.html#a510c29d57e9f0343df48b7c58cb89228">llvm::MachineSchedContext::RegClassInfo</a></div><div class="ttdeci">RegisterClassInfo * RegClassInfo</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00107">MachineScheduler.h:107</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_ac51be7ff80fe8d6ae5e8c0acb194908a"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">llvm::MachineBasicBlock::iterator</a></div><div class="ttdeci">bundle_iterator&lt; MachineInstr, instr_iterator &gt; iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00212">MachineBasicBlock.h:212</a></div></div>
<div class="ttc" id="classllvm_1_1RegPressureTracker_html_a972fa38378a3d49a9bb48ca584621438"><div class="ttname"><a href="classllvm_1_1RegPressureTracker.html#a972fa38378a3d49a9bb48ca584621438">llvm::RegPressureTracker::getMaxDownwardPressureDelta</a></div><div class="ttdeci">void getMaxDownwardPressureDelta(const MachineInstr *MI, RegPressureDelta &amp;Delta, ArrayRef&lt; PressureChange &gt; CriticalPSets, ArrayRef&lt; unsigned &gt; MaxPressureLimit)</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00946">RegisterPressure.cpp:946</a></div></div>
<div class="ttc" id="namespacellvm_1_1A64DB_html_a6fce8157775f3ec93f326b52b0f1e0f5a4916e736d6b7cc68359b39d5eb50f6db"><div class="ttname"><a href="namespacellvm_1_1A64DB.html#a6fce8157775f3ec93f326b52b0f1e0f5a4916e736d6b7cc68359b39d5eb50f6db">llvm::A64DB::ST</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00178">AArch64BaseInfo.h:178</a></div></div>
<div class="ttc" id="classllvm_1_1TargetSubtargetInfo_html_a932e522a631640bfbc75e835d0185360"><div class="ttname"><a href="classllvm_1_1TargetSubtargetInfo.html#a932e522a631640bfbc75e835d0185360">llvm::TargetSubtargetInfo::overrideSchedPolicy</a></div><div class="ttdeci">virtual void overrideSchedPolicy(MachineSchedPolicy &amp;Policy, MachineInstr *begin, MachineInstr *end, unsigned NumRegionInstrs) const </div><div class="ttdoc">Override generic scheduling policy within a region. </div><div class="ttdef"><b>Definition:</b> <a href="TargetSubtargetInfo_8h_source.html#l00074">TargetSubtargetInfo.h:74</a></div></div>
<div class="ttc" id="README__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A,*B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00091">README_ALTIVEC.txt:91</a></div></div>
<div class="ttc" id="CommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00314">CommandLine.h:314</a></div></div>
<div class="ttc" id="classllvm_1_1SUnit_html_a0be1f84d53e90c247d75f2ed63636761"><div class="ttname"><a href="classllvm_1_1SUnit.html#a0be1f84d53e90c247d75f2ed63636761">llvm::SUnit::isCall</a></div><div class="ttdeci">bool isCall</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00282">ScheduleDAG.h:282</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRange_html_acd0853cbfd87e166b73d3e24502f2346"><div class="ttname"><a href="classllvm_1_1LiveRange.html#acd0853cbfd87e166b73d3e24502f2346">llvm::LiveRange::Query</a></div><div class="ttdeci">LiveQueryResult Query(SlotIndex Idx) const </div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00441">LiveInterval.h:441</a></div></div>
<div class="ttc" id="classllvm_1_1ReadyQueue_html"><div class="ttname"><a href="classllvm_1_1ReadyQueue.html">llvm::ReadyQueue</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00213">MachineScheduler.h:213</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00396">SmallVector.h:396</a></div></div>
<div class="ttc" id="classllvm_1_1TargetPassConfig_html_a9c774083f02cf837687aca448b4a86b7"><div class="ttname"><a href="classllvm_1_1TargetPassConfig.html#a9c774083f02cf837687aca448b4a86b7">llvm::TargetPassConfig::createMachineScheduler</a></div><div class="ttdeci">virtual ScheduleDAGInstrs * createMachineScheduler(MachineSchedContext *C) const </div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2Passes_8h_source.html#l00220">CodeGen/Passes.h:220</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleHazardRecognizer_html"><div class="ttname"><a href="classllvm_1_1ScheduleHazardRecognizer.html">llvm::ScheduleHazardRecognizer</a></div><div class="ttdef"><b>Definition:</b> <a href="ScheduleHazardRecognizer_8h_source.html#l00025">ScheduleHazardRecognizer.h:25</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html_a0b1fed03bdce807ab9c8d690b01503ce"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#a0b1fed03bdce807ab9c8d690b01503ce">llvm::ScheduleDAGMI::updatePressureDiffs</a></div><div class="ttdeci">void updatePressureDiffs(ArrayRef&lt; unsigned &gt; LiveUses)</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l00598">MachineScheduler.cpp:598</a></div></div>
<div class="ttc" id="classllvm_1_1TargetSchedModel_html_af1751469bbb5118836dc2b52bbec4341"><div class="ttname"><a href="classllvm_1_1TargetSchedModel.html#af1751469bbb5118836dc2b52bbec4341">llvm::TargetSchedModel::getInstrItineraries</a></div><div class="ttdeci">const InstrItineraryData * getInstrItineraries() const </div><div class="ttdef"><b>Definition:</b> <a href="TargetSchedule_8h_source.html#l00075">TargetSchedule.h:75</a></div></div>
<div class="ttc" id="classllvm_1_1SUnit_html_a72e0568b7bf0e9a97260c34264a549a0"><div class="ttname"><a href="classllvm_1_1SUnit.html#a72e0568b7bf0e9a97260c34264a549a0">llvm::SUnit::Latency</a></div><div class="ttdeci">unsigned short Latency</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00280">ScheduleDAG.h:280</a></div></div>
<div class="ttc" id="MachineScheduler_8cpp_html_a20646b5e577c00ae6fc2912a4081f9d5"><div class="ttname"><a href="MachineScheduler_8cpp.html#a20646b5e577c00ae6fc2912a4081f9d5">MinSubtreeSize</a></div><div class="ttdeci">static const unsigned MinSubtreeSize</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l00073">MachineScheduler.cpp:73</a></div></div>
<div class="ttc" id="TargetLibraryInfo_8cpp_html_a487393c673177cc2b64bde6ab8fa60ae"><div class="ttname"><a href="TargetLibraryInfo_8cpp.html#a487393c673177cc2b64bde6ab8fa60ae">initialize</a></div><div class="ttdeci">static void initialize(TargetLibraryInfo &amp;TLI, const Triple &amp;T, const char **StandardNames)</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8cpp_source.html#l00361">TargetLibraryInfo.cpp:361</a></div></div>
<div class="ttc" id="structllvm_1_1MCWriteProcResEntry_html"><div class="ttname"><a href="structllvm_1_1MCWriteProcResEntry.html">llvm::MCWriteProcResEntry</a></div><div class="ttdef"><b>Definition:</b> <a href="MCSchedule_8h_source.html#l00050">MCSchedule.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html_a48c680d1ba6345256fc4dabaf4d433d3"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#a48c680d1ba6345256fc4dabaf4d433d3">llvm::ScheduleDAGMI::dumpSchedule</a></div><div class="ttdeci">void dumpSchedule() const </div><div class="ttdoc">dump the scheduled Sequence. </div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l00967">MachineScheduler.cpp:967</a></div></div>
<div class="ttc" id="TargetInstrInfo_8h_html"><div class="ttname"><a href="TargetInstrInfo_8h.html">TargetInstrInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_a302e45878c6dc1714334c7ce96d56846"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">llvm::MachineInstr::getOperand</a></div><div class="ttdeci">const MachineOperand &amp; getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00267">MachineInstr.h:267</a></div></div>
<div class="ttc" id="structllvm_1_1MCSchedClassDesc_html"><div class="ttname"><a href="structllvm_1_1MCSchedClassDesc.html">llvm::MCSchedClassDesc</a></div><div class="ttdef"><b>Definition:</b> <a href="MCSchedule_8h_source.html#l00096">MCSchedule.h:96</a></div></div>
<div class="ttc" id="classllvm_1_1TargetSchedModel_html_a394404bde05100988bcffcb2ea37de29"><div class="ttname"><a href="classllvm_1_1TargetSchedModel.html#a394404bde05100988bcffcb2ea37de29">llvm::TargetSchedModel::getLatencyFactor</a></div><div class="ttdeci">unsigned getLatencyFactor() const </div><div class="ttdoc">Multiply cycle count by this factor to normalize it relative to other resources. This is the number o...</div><div class="ttdef"><b>Definition:</b> <a href="TargetSchedule_8h_source.html#l00127">TargetSchedule.h:127</a></div></div>
<div class="ttc" id="structllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00286">CommandLine.h:286</a></div></div>
<div class="ttc" id="MachineScheduler_8h_html"><div class="ttname"><a href="MachineScheduler_8h.html">MachineScheduler.h</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html_af90a46fea942e1e455e80aa649f432f6"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#af90a46fea942e1e455e80aa649f432f6">llvm::ScheduleDAGMI::getPressureDiff</a></div><div class="ttdeci">PressureDiff &amp; getPressureDiff(const SUnit *SU)</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00402">MachineScheduler.h:402</a></div></div>
<div class="ttc" id="structllvm_1_1RegionPressure_html"><div class="ttname"><a href="structllvm_1_1RegionPressure.html">llvm::RegionPressure</a></div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8h_source.html#l00080">RegisterPressure.h:80</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html_a9335e1e703206d27da6ed63614b64a0c"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#a9335e1e703206d27da6ed63614b64a0c">llvm::ScheduleDAGMI::addEdge</a></div><div class="ttdeci">bool addEdge(SUnit *SuccSU, const SDep &amp;PredDep)</div><div class="ttdoc">Add a DAG edge to the given SU with the given predecessor dependence data. </div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l00375">MachineScheduler.cpp:375</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html">llvm::MachineBasicBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00062">MachineBasicBlock.h:62</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html_ae0ac5973cd95f76e3365e67aaad69de6"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#ae0ac5973cd95f76e3365e67aaad69de6">llvm::MachineInstr::isCopy</a></div><div class="ttdeci">bool isCopy() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00669">MachineInstr.h:669</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html_a569fc4139bec0217794e9f830d6ba852"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#a569fc4139bec0217794e9f830d6ba852">llvm::ScheduleDAGMI::checkSchedLimit</a></div><div class="ttdeci">bool checkSchedLimit()</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l00475">MachineScheduler.cpp:475</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00037">PassAnalysisSupport.h:37</a></div></div>
<div class="ttc" id="namespacellvm_html_aa1704159f75e6eacd595962ea6d93ffe"><div class="ttname"><a href="namespacellvm.html#aa1704159f75e6eacd595962ea6d93ffe">llvm::next</a></div><div class="ttdeci">ItTy next(ItTy it, Dist n)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00154">STLExtras.h:154</a></div></div>
<div class="ttc" id="classllvm_1_1MachineSchedRegistry_html_af84c5778cfc4dd0d69b39bb0f3ecd3ba"><div class="ttname"><a href="classllvm_1_1MachineSchedRegistry.html#af84c5778cfc4dd0d69b39bb0f3ecd3ba">llvm::MachineSchedRegistry::Registry</a></div><div class="ttdeci">static MachinePassRegistry Registry</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00122">MachineScheduler.h:122</a></div></div>
<div class="ttc" id="classllvm_1_1OwningPtr_html"><div class="ttname"><a href="classllvm_1_1OwningPtr.html">llvm::OwningPtr</a></div><div class="ttdef"><b>Definition:</b> <a href="OwningPtr_8h_source.html#l00028">OwningPtr.h:28</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html_a1c51776d4e512a7f24d5b5d601c31016"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#a1c51776d4e512a7f24d5b5d601c31016">llvm::ScheduleDAGMI::releasePred</a></div><div class="ttdeci">void releasePred(SUnit *SU, SDep *PredEdge)</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l00426">MachineScheduler.cpp:426</a></div></div>
<div class="ttc" id="classllvm_1_1RegPressureTracker_html"><div class="ttname"><a href="classllvm_1_1RegPressureTracker.html">llvm::RegPressureTracker</a></div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8h_source.html#l00250">RegisterPressure.h:250</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayRef_html_a836367b39ed630bf14db99923c22740e"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#a836367b39ed630bf14db99923c22740e">llvm::ArrayRef::begin</a></div><div class="ttdeci">iterator begin() const </div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00097">ArrayRef.h:97</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html_a6d0a0b4903e8d4d12c98b0f43fe83878"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#a6d0a0b4903e8d4d12c98b0f43fe83878">llvm::ScheduleDAGMI::findRootsAndBiasEdges</a></div><div class="ttdeci">void findRootsAndBiasEdges(SmallVectorImpl&lt; SUnit * &gt; &amp;TopRoots, SmallVectorImpl&lt; SUnit * &gt; &amp;BotRoots)</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l00733">MachineScheduler.cpp:733</a></div></div>
<div class="ttc" id="MachineScheduler_8cpp_html_ac83b174a9cb37fb56517e8be0eda21ed"><div class="ttname"><a href="MachineScheduler_8cpp.html#ac83b174a9cb37fb56517e8be0eda21ed">useDefaultMachineSched</a></div><div class="ttdeci">static ScheduleDAGInstrs * useDefaultMachineSched(MachineSchedContext *C)</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l00148">MachineScheduler.cpp:148</a></div></div>
<div class="ttc" id="classllvm_1_1ReadyQueue_html_a1f6ee31ad507dd548edfd2fa1fa91b23"><div class="ttname"><a href="classllvm_1_1ReadyQueue.html#a1f6ee31ad507dd548edfd2fa1fa91b23">llvm::ReadyQueue::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00238">MachineScheduler.h:238</a></div></div>
<div class="ttc" id="classllvm_1_1PressureDiff_html"><div class="ttname"><a href="classllvm_1_1PressureDiff.html">llvm::PressureDiff</a></div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8h_source.html#l00136">RegisterPressure.h:136</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGInstrs_html_abc5a5c32ac78a99ee2633dbbeec20397"><div class="ttname"><a href="classllvm_1_1ScheduleDAGInstrs.html#abc5a5c32ac78a99ee2633dbbeec20397">llvm::ScheduleDAGInstrs::exitRegion</a></div><div class="ttdeci">virtual void exitRegion()</div><div class="ttdoc">Notify that the scheduler has finished scheduling the current region. </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAGInstrs_8cpp_source.html#l00192">ScheduleDAGInstrs.cpp:192</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html_af29d8bd5550c406522ddae701d2783e4"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#af29d8bd5550c406522ddae701d2783e4">llvm::ScheduleDAGMI::updateScheduledPressure</a></div><div class="ttdeci">void updateScheduledPressure(const SUnit *SU, const std::vector&lt; unsigned &gt; &amp;NewMaxPressure)</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l00571">MachineScheduler.cpp:571</a></div></div>
<div class="ttc" id="classllvm_1_1RegisterClassInfo_html_a25ac0ae59d10e7b19c2f57fe6ff52d74"><div class="ttname"><a href="classllvm_1_1RegisterClassInfo.html#a25ac0ae59d10e7b19c2f57fe6ff52d74">llvm::RegisterClassInfo::getRegPressureSetLimit</a></div><div class="ttdeci">unsigned getRegPressureSetLimit(unsigned Idx) const </div><div class="ttdef"><b>Definition:</b> <a href="RegisterClassInfo_8h_source.html#l00135">RegisterClassInfo.h:135</a></div></div>
<div class="ttc" id="namespacellvm_html_ab8635363d4287c93f64c55ad5567fcf0"><div class="ttname"><a href="namespacellvm.html#ab8635363d4287c93f64c55ad5567fcf0">llvm::ViewGraph</a></div><div class="ttdeci">void ViewGraph(const GraphType &amp;G, const Twine &amp;Name, bool ShortNames=false, const Twine &amp;Title=&quot;&quot;, GraphProgram::Name Program=GraphProgram::DOT)</div><div class="ttdef"><b>Definition:</b> <a href="GraphWriter_8h_source.html#l00346">GraphWriter.h:346</a></div></div>
<div class="ttc" id="structllvm_1_1DOTGraphTraits_3_01ScheduleDAGMI_01_5_01_4_html_ae60a7222415878571912427e758f4297"><div class="ttname"><a href="structllvm_1_1DOTGraphTraits_3_01ScheduleDAGMI_01_5_01_4.html#ae60a7222415878571912427e758f4297">llvm::DOTGraphTraits&lt; ScheduleDAGMI * &gt;::DOTGraphTraits</a></div><div class="ttdeci">DOTGraphTraits(bool isSimple=false)</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l03064">MachineScheduler.cpp:3064</a></div></div>
<div class="ttc" id="namespacellvm_html_a2999577391397335deda506011ee500e"><div class="ttname"><a href="namespacellvm.html#a2999577391397335deda506011ee500e">llvm::dumpRegSetPressure</a></div><div class="ttdeci">void dumpRegSetPressure(ArrayRef&lt; unsigned &gt; SetPressure, const TargetRegisterInfo *TRI)</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00045">RegisterPressure.cpp:45</a></div></div>
<div class="ttc" id="classllvm_1_1RegisterClassInfo_html_ac892fad5c3d0080c8cca7557659668d5"><div class="ttname"><a href="classllvm_1_1RegisterClassInfo.html#ac892fad5c3d0080c8cca7557659668d5">llvm::RegisterClassInfo::runOnMachineFunction</a></div><div class="ttdeci">void runOnMachineFunction(const MachineFunction &amp;MF)</div><div class="ttdef"><b>Definition:</b> <a href="RegisterClassInfo_8cpp_source.html#l00035">RegisterClassInfo.cpp:35</a></div></div>
<div class="ttc" id="classllvm_1_1SDep_html_a551060cb0333d9d0cfdacd2576d817b9ac698747d5c996ab4f760518f55be1346"><div class="ttname"><a href="classllvm_1_1SDep.html#a551060cb0333d9d0cfdacd2576d817b9ac698747d5c996ab4f760518f55be1346">llvm::SDep::Weak</a></div><div class="ttdoc">Arbitrary weak DAG edge. </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00069">ScheduleDAG.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1TargetSchedModel_html_a91cde5aac43dc88d6ec26c441b39b7c9"><div class="ttname"><a href="classllvm_1_1TargetSchedModel.html#a91cde5aac43dc88d6ec26c441b39b7c9">llvm::TargetSchedModel::getNumProcResourceKinds</a></div><div class="ttdeci">unsigned getNumProcResourceKinds() const </div><div class="ttdoc">Get the number of kinds of resources for this target. </div><div class="ttdef"><b>Definition:</b> <a href="TargetSchedule_8h_source.html#l00092">TargetSchedule.h:92</a></div></div>
<div class="ttc" id="MachineScheduler_8cpp_html_a1c8a9363a3eb113ca42064a03636b135"><div class="ttname"><a href="MachineScheduler_8cpp.html#a1c8a9363a3eb113ca42064a03636b135">nextIfDebug</a></div><div class="ttdeci">static MachineBasicBlock::const_iterator nextIfDebug(MachineBasicBlock::const_iterator I, MachineBasicBlock::const_iterator End)</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l00191">MachineScheduler.cpp:191</a></div></div>
<div class="ttc" id="PassSupport_8h_html_af0564bcdde2dd4400c670ca278c6035f"><div class="ttname"><a href="PassSupport_8h.html#af0564bcdde2dd4400c670ca278c6035f">INITIALIZE_AG_DEPENDENCY</a></div><div class="ttdeci">#define INITIALIZE_AG_DEPENDENCY(depName)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00169">PassSupport.h:169</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGInstrs_html_a2cd25ceae77621ea3d813a2afdab127b"><div class="ttname"><a href="classllvm_1_1ScheduleDAGInstrs.html#a2cd25ceae77621ea3d813a2afdab127b">llvm::ScheduleDAGInstrs::getLIS</a></div><div class="ttdeci">LiveIntervals * getLIS() const </div><div class="ttdoc">Expose LiveIntervals for use in DAG mutators and such. </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAGInstrs_8h_source.html#l00158">ScheduleDAGInstrs.h:158</a></div></div>
<div class="ttc" id="classllvm_1_1LiveIntervals_html_a2d45135c7d66356b77f681aa542d86ba"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#a2d45135c7d66356b77f681aa542d86ba">llvm::LiveIntervals::handleMove</a></div><div class="ttdeci">void handleMove(MachineInstr *MI, bool UpdateFlags=false)</div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervalAnalysis_8cpp_source.html#l01027">LiveIntervalAnalysis.cpp:1027</a></div></div>
<div class="ttc" id="MachineScheduler_8cpp_html_ad4aa66841017d1379f7b46fd4f6e024a"><div class="ttname"><a href="MachineScheduler_8cpp.html#ad4aa66841017d1379f7b46fd4f6e024a">EnableMacroFusion</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; EnableMacroFusion(&quot;misched-fusion&quot;, cl::Hidden, cl::desc(&quot;Enable scheduling for macro fusion.&quot;), cl::init(true))</div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html">llvm::TargetRegisterInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00219">TargetRegisterInfo.h:219</a></div></div>
<div class="ttc" id="classT_html"><div class="ttname"><a href="classT.html">T</a></div></div>
<div class="ttc" id="classllvm_1_1VNInfo_html_ae0af39c31bb54b8c908d8d4a15f55da5"><div class="ttname"><a href="classllvm_1_1VNInfo.html#ae0af39c31bb54b8c908d8d4a15f55da5">llvm::VNInfo::isPHIDef</a></div><div class="ttdeci">bool isPHIDef() const </div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00073">LiveInterval.h:73</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html_acf56d667066b39177a3c0f134d759d98"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#acf56d667066b39177a3c0f134d759d98">llvm::ScheduleDAGMI::releaseSuccessors</a></div><div class="ttdeci">void releaseSuccessors(SUnit *SU)</div><div class="ttdoc">releaseSuccessors - Call releaseSucc on each of SU&amp;#39;s successors. </div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l00415">MachineScheduler.cpp:415</a></div></div>
<div class="ttc" id="structllvm_1_1MCProcResourceDesc_html_a51dc4747a7d39650884bcf19daaf5f54"><div class="ttname"><a href="structllvm_1_1MCProcResourceDesc.html#a51dc4747a7d39650884bcf19daaf5f54">llvm::MCProcResourceDesc::Name</a></div><div class="ttdeci">const char * Name</div><div class="ttdef"><b>Definition:</b> <a href="MCSchedule_8h_source.html#l00028">MCSchedule.h:28</a></div></div>
<div class="ttc" id="classllvm_1_1raw__string__ostream_html_ae086260f8c216554ff46dcd96e171459"><div class="ttname"><a href="classllvm_1_1raw__string__ostream.html#ae086260f8c216554ff46dcd96e171459">llvm::raw_string_ostream::str</a></div><div class="ttdeci">std::string &amp; str()</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00441">raw_ostream.h:441</a></div></div>
<div class="ttc" id="classllvm_1_1RegisterClassInfo_html"><div class="ttname"><a href="classllvm_1_1RegisterClassInfo.html">llvm::RegisterClassInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="RegisterClassInfo_8h_source.html#l00027">RegisterClassInfo.h:27</a></div></div>
<div class="ttc" id="GraphWriter_8h_html"><div class="ttname"><a href="GraphWriter_8h.html">GraphWriter.h</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html_a3c87e517a77306b0214575dadec4806e"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#a3c87e517a77306b0214575dadec4806e">llvm::ScheduleDAGMI::scheduleMI</a></div><div class="ttdeci">void scheduleMI(SUnit *SU, bool IsTopNode)</div><div class="ttdoc">Move an instruction and update register pressure. </div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l00875">MachineScheduler.cpp:875</a></div></div>
<div class="ttc" id="MachineScheduler_8cpp_html_ad840f8a48c1b46e2ee7f721ed2df03a5"><div class="ttname"><a href="MachineScheduler_8cpp.html#ad840f8a48c1b46e2ee7f721ed2df03a5">EnableRegPressure</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; EnableRegPressure(&quot;misched-regpressure&quot;, cl::Hidden, cl::desc(&quot;Enable register pressure scheduling.&quot;), cl::init(true))</div></div>
<div class="ttc" id="classllvm_1_1TargetSchedModel_html_ae2b8849f34dbee13609f4b6ad84042b1"><div class="ttname"><a href="classllvm_1_1TargetSchedModel.html#ae2b8849f34dbee13609f4b6ad84042b1">llvm::TargetSchedModel::getWriteProcResEnd</a></div><div class="ttdeci">ProcResIter getWriteProcResEnd(const MCSchedClassDesc *SC) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetSchedule_8h_source.html#l00109">TargetSchedule.h:109</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRange_html_afeb00b9049a2391c990df15692caef63"><div class="ttname"><a href="classllvm_1_1LiveRange.html#afeb00b9049a2391c990df15692caef63">llvm::LiveRange::find</a></div><div class="ttdeci">iterator find(SlotIndex Pos)</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8cpp_source.html#l00034">LiveInterval.cpp:34</a></div></div>
<div class="ttc" id="classllvm_1_1Attribute_html"><div class="ttname"><a href="classllvm_1_1Attribute.html">llvm::Attribute</a></div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00045">Attributes.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1SUnit_html_ab9e02660290b9557b547b57870133467"><div class="ttname"><a href="classllvm_1_1SUnit.html#ab9e02660290b9557b547b57870133467">llvm::SUnit::WeakPredsLeft</a></div><div class="ttdeci">unsigned WeakPredsLeft</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00277">ScheduleDAG.h:277</a></div></div>
<div class="ttc" id="structllvm_1_1DOTGraphTraits_html"><div class="ttname"><a href="structllvm_1_1DOTGraphTraits.html">llvm::DOTGraphTraits</a></div><div class="ttdef"><b>Definition:</b> <a href="DOTGraphTraits_8h_source.html#l00160">DOTGraphTraits.h:160</a></div></div>
<div class="ttc" id="classllvm_1_1TargetSchedModel_html_a82ca1bcea2c966addd442d7cfa49bf51"><div class="ttname"><a href="classllvm_1_1TargetSchedModel.html#a82ca1bcea2c966addd442d7cfa49bf51">llvm::TargetSchedModel::hasInstrSchedModel</a></div><div class="ttdeci">bool hasInstrSchedModel() const </div><div class="ttdoc">Return true if this machine model includes an instruction-level scheduling model. ...</div><div class="ttdef"><b>Definition:</b> <a href="TargetSchedule_8cpp_source.html#l00031">TargetSchedule.cpp:31</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSetImpl_html_aa72472422d95c7052d62432ec279ff85"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#aa72472422d95c7052d62432ec279ff85">llvm::SmallPtrSetImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00077">SmallPtrSet.h:77</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a699a66e504b48fdeff124e82f6c61917"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a699a66e504b48fdeff124e82f6c61917">llvm::DenseMapBase::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const std::pair&lt; KeyT, ValueT &gt; &amp;KV)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00153">DenseMap.h:153</a></div></div>
<div class="ttc" id="structllvm_1_1RegisterPressure_html_af444f3c79d12bb654d6477d629cbe7c0"><div class="ttname"><a href="structllvm_1_1RegisterPressure.html#af444f3c79d12bb654d6477d629cbe7c0">llvm::RegisterPressure::MaxSetPressure</a></div><div class="ttdeci">std::vector&lt; unsigned &gt; MaxSetPressure</div><div class="ttdoc">Map of max reg pressure indexed by pressure set ID, not class ID. </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8h_source.html#l00032">RegisterPressure.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1TargetMachine_html_ac13d0f6f2c915757013b101ef6e8afbc"><div class="ttname"><a href="classllvm_1_1TargetMachine.html#ac13d0f6f2c915757013b101ef6e8afbc">llvm::TargetMachine::getInstrInfo</a></div><div class="ttdeci">virtual const TargetInstrInfo * getInstrInfo() const </div><div class="ttdef"><b>Definition:</b> <a href="Target_2TargetMachine_8h_source.html#l00119">Target/TargetMachine.h:119</a></div></div>
<div class="ttc" id="MachineScheduler_8cpp_html_a540c54f3590e744ce992c62fdc9beb31"><div class="ttname"><a href="MachineScheduler_8cpp.html#a540c54f3590e744ce992c62fdc9beb31">GenericSchedRegistry</a></div><div class="ttdeci">static MachineSchedRegistry GenericSchedRegistry(&quot;converge&quot;,&quot;Standard converging scheduler.&quot;, createGenericSched)</div></div>
<div class="ttc" id="namespacellvm_1_1PPCISD_html_a69ad64696d1df3be05f01dfb67f5bc66a2ae057e4de45c51c89b7e5dc5053df62"><div class="ttname"><a href="namespacellvm_1_1PPCISD.html#a69ad64696d1df3be05f01dfb67f5bc66a2ae057e4de45c51c89b7e5dc5053df62">llvm::PPCISD::SC</a></div><div class="ttdef"><b>Definition:</b> <a href="PPCISelLowering_8h_source.html#l00247">PPCISelLowering.h:247</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00236">SmallPtrSet.h:236</a></div></div>
<div class="ttc" id="LiveIntervalAnalysis_8h_html"><div class="ttname"><a href="LiveIntervalAnalysis_8h.html">LiveIntervalAnalysis.h</a></div></div>
<div class="ttc" id="classllvm_1_1TargetMachine_html_a5af2fed99951774b6a14d30ec6e73792"><div class="ttname"><a href="classllvm_1_1TargetMachine.html#a5af2fed99951774b6a14d30ec6e73792">llvm::TargetMachine::getSubtarget</a></div><div class="ttdeci">const STC &amp; getSubtarget() const </div><div class="ttdef"><b>Definition:</b> <a href="Target_2TargetMachine_8h_source.html#l00132">Target/TargetMachine.h:132</a></div></div>
<div class="ttc" id="structllvm_1_1MachineSchedContext_html_ae787a7185280ba24c2e667237d077fce"><div class="ttname"><a href="structllvm_1_1MachineSchedContext.html#ae787a7185280ba24c2e667237d077fce">llvm::MachineSchedContext::AA</a></div><div class="ttdeci">AliasAnalysis * AA</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00104">MachineScheduler.h:104</a></div></div>
<div class="ttc" id="classllvm_1_1TargetSchedModel_html_ade2f5f4d11c824fa37234f3077d25be3"><div class="ttname"><a href="classllvm_1_1TargetSchedModel.html#ade2f5f4d11c824fa37234f3077d25be3">llvm::TargetSchedModel::getProcResource</a></div><div class="ttdeci">const MCProcResourceDesc * getProcResource(unsigned PIdx) const </div><div class="ttdoc">Get a processor resource by ID for convenience. </div><div class="ttdef"><b>Definition:</b> <a href="TargetSchedule_8h_source.html#l00097">TargetSchedule.h:97</a></div></div>
<div class="ttc" id="classllvm_1_1SlotIndex_html_a0b73244049319d841fd11a238f35b5d1"><div class="ttname"><a href="classllvm_1_1SlotIndex.html#a0b73244049319d841fd11a238f35b5d1">llvm::SlotIndex::isSameInstr</a></div><div class="ttdeci">static bool isSameInstr(SlotIndex A, SlotIndex B)</div><div class="ttdoc">isSameInstr - Return true if A and B refer to the same instruction. </div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00206">SlotIndexes.h:206</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_a053677ebc731b47a534f841b11b5cf0c"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#a053677ebc731b47a534f841b11b5cf0c">llvm::AnalysisUsage::addRequiredID</a></div><div class="ttdeci">AnalysisUsage &amp; addRequiredID(const void *ID)</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8cpp_source.html#l00262">Pass.cpp:262</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector&lt; unsigned, 8 &gt;</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html_a5ac888a46c343b2075fc84f2297be17a"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#a5ac888a46c343b2075fc84f2297be17a">llvm::ScheduleDAGMI::computeCyclicCriticalPath</a></div><div class="ttdeci">unsigned computeCyclicCriticalPath()</div><div class="ttdoc">Compute the cyclic critical path through the DAG. </div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l00776">MachineScheduler.cpp:776</a></div></div>
<div class="ttc" id="MachineScheduler_8cpp_html_a549e985295c118aca3fc7af4a4c67037"><div class="ttname"><a href="MachineScheduler_8cpp.html#a549e985295c118aca3fc7af4a4c67037">MISchedCutoff</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; MISchedCutoff(&quot;misched-cutoff&quot;, cl::Hidden, cl::desc(&quot;Stop scheduling after N instructions&quot;), cl::init(~0U))</div></div>
<div class="ttc" id="MachineScheduler_8cpp_html_a2782eab453776e43a005124f2cae0cbb"><div class="ttname"><a href="MachineScheduler_8cpp.html#a2782eab453776e43a005124f2cae0cbb">createILPMinScheduler</a></div><div class="ttdeci">static ScheduleDAGInstrs * createILPMinScheduler(MachineSchedContext *C)</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l02954">MachineScheduler.cpp:2954</a></div></div>
<div class="ttc" id="classllvm_1_1BitVector_html_a20b6ba858cb2bb6d8d7fa553025c1f61"><div class="ttname"><a href="classllvm_1_1BitVector.html#a20b6ba858cb2bb6d8d7fa553025c1f61">llvm::BitVector::test</a></div><div class="ttdeci">bool test(unsigned Idx) const </div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00337">BitVector.h:337</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleHazardRecognizer_html_a9bec0e329b12bbc503d08db497d43267a4e42ac50bfd060349e49904842121cf1"><div class="ttname"><a href="classllvm_1_1ScheduleHazardRecognizer.html#a9bec0e329b12bbc503d08db497d43267a4e42ac50bfd060349e49904842121cf1">llvm::ScheduleHazardRecognizer::NoHazard</a></div><div class="ttdef"><b>Definition:</b> <a href="ScheduleHazardRecognizer_8h_source.html#l00038">ScheduleHazardRecognizer.h:38</a></div></div>
<div class="ttc" id="classllvm_1_1SUnitIterator_html_af58adcf012cbcd71cf32c9d50f180c2b"><div class="ttname"><a href="classllvm_1_1SUnitIterator.html#af58adcf012cbcd71cf32c9d50f180c2b">llvm::SUnitIterator::isCtrlDep</a></div><div class="ttdeci">bool isCtrlDep() const </div><div class="ttdoc">isCtrlDep - Test if this is not an SDep::Data dependence. </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00638">ScheduleDAG.h:638</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a7803956e30d6be70112aa4967832962f"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a7803956e30d6be70112aa4967832962f">llvm::SmallVectorTemplateCommon&lt; T &gt;::const_reverse_iterator</a></div><div class="ttdeci">std::reverse_iterator&lt; const_iterator &gt; const_reverse_iterator</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00103">SmallVector.h:103</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html_ac35063a69ccbc3a2efc50a7811de4c4d"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#ac35063a69ccbc3a2efc50a7811de4c4d">llvm::ScheduleDAGMI::getRegionCriticalPSets</a></div><div class="ttdeci">const std::vector&lt; PressureChange &gt; &amp; getRegionCriticalPSets() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00398">MachineScheduler.h:398</a></div></div>
<div class="ttc" id="namespacellvm_1_1DOT_html_a65ec6bb0b1bfe75533186557a9077d28"><div class="ttname"><a href="namespacellvm_1_1DOT.html#a65ec6bb0b1bfe75533186557a9077d28">llvm::DOT::getColorString</a></div><div class="ttdeci">StringRef getColorString(unsigned NodeNumber)</div><div class="ttdoc">Get a color string for this node number. Simply round-robin selects from a reasonable number of color...</div><div class="ttdef"><b>Definition:</b> <a href="GraphWriter_8cpp_source.html#l00059">GraphWriter.cpp:59</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_af11a6ebf7ab3c388234cb6d5378439a3"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#af11a6ebf7ab3c388234cb6d5378439a3">llvm::AnalysisUsage::setPreservesCFG</a></div><div class="ttdeci">void setPreservesCFG()</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8cpp_source.html#l00249">Pass.cpp:249</a></div></div>
<div class="ttc" id="classllvm_1_1LiveIntervals_html_a70cf6a51b043dc9f8ae683c266d5d9c4"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#a70cf6a51b043dc9f8ae683c266d5d9c4">llvm::LiveIntervals::getInterval</a></div><div class="ttdeci">LiveInterval &amp; getInterval(unsigned Reg)</div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervalAnalysis_8h_source.html#l00105">LiveIntervalAnalysis.h:105</a></div></div>
<div class="ttc" id="classllvm_1_1ReadyQueue_html_a88f6acd4582a04ff78f46aca836c0b39"><div class="ttname"><a href="classllvm_1_1ReadyQueue.html#a88f6acd4582a04ff78f46aca836c0b39">llvm::ReadyQueue::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00230">MachineScheduler.h:230</a></div></div>
<div class="ttc" id="MachineScheduler_8cpp_html_a49932eb220bdb66c8f164f4e7163d59e"><div class="ttname"><a href="MachineScheduler_8cpp.html#a49932eb220bdb66c8f164f4e7163d59e">EnableCyclicPath</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; EnableCyclicPath(&quot;misched-cyclicpath&quot;, cl::Hidden, cl::desc(&quot;Enable cyclic critical path analysis.&quot;), cl::init(true))</div></div>
<div class="ttc" id="namespacellvm_html_a9b59b13f97bee321b57c23f4c0cb3ac2"><div class="ttname"><a href="namespacellvm.html#a9b59b13f97bee321b57c23f4c0cb3ac2">llvm::initializeMachineSchedulerPass</a></div><div class="ttdeci">void initializeMachineSchedulerPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00101">Debug.cpp:101</a></div></div>
<div class="ttc" id="namespacestd_html_ab8424022895aee3e366fb9a32f2883cb"><div class="ttname"><a href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a></div><div class="ttdeci">void swap(llvm::BitVector &amp;LHS, llvm::BitVector &amp;RHS)</div><div class="ttdoc">Implement std::swap in terms of BitVector swap. </div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00591">BitVector.h:591</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGInstrs_html_a7c30ee6cdef3f4784c192654dcb9bab0"><div class="ttname"><a href="classllvm_1_1ScheduleDAGInstrs.html#a7c30ee6cdef3f4784c192654dcb9bab0">llvm::ScheduleDAGInstrs::finalizeSchedule</a></div><div class="ttdeci">virtual void finalizeSchedule()</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAGInstrs_8h_source.html#l00220">ScheduleDAGInstrs.h:220</a></div></div>
<div class="ttc" id="classllvm_1_1SUnit_html_ad2f639e2a5f06978b65c2c1c95b9a9d1"><div class="ttname"><a href="classllvm_1_1SUnit.html#ad2f639e2a5f06978b65c2c1c95b9a9d1">llvm::SUnit::isTopReady</a></div><div class="ttdeci">bool isTopReady() const </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00453">ScheduleDAG.h:453</a></div></div>
<div class="ttc" id="classllvm_1_1SUnit_html_a4aa947b755365817fa095e581752a8ae"><div class="ttname"><a href="classllvm_1_1SUnit.html#a4aa947b755365817fa095e581752a8ae">llvm::SUnit::biasCriticalPath</a></div><div class="ttdeci">void biasCriticalPath()</div><div class="ttdoc">Order this node&amp;#39;s predecessor edges such that the critical path edge occurs first. </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8cpp_source.html#l00298">ScheduleDAG.cpp:298</a></div></div>
<div class="ttc" id="CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2README_8txt_source.html#l00036">CodeGen/README.txt:36</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGInstrs_html_ac0cecc651db330128468e08794794f5c"><div class="ttname"><a href="classllvm_1_1ScheduleDAGInstrs.html#ac0cecc651db330128468e08794794f5c">llvm::ScheduleDAGInstrs::schedule</a></div><div class="ttdeci">virtual void schedule()=0</div></div>
<div class="ttc" id="classllvm_1_1SDep_html_a0d3253aa89a8b7441f8401f1b6609811"><div class="ttname"><a href="classllvm_1_1SDep.html#a0d3253aa89a8b7441f8401f1b6609811">llvm::SDep::getSUnit</a></div><div class="ttdeci">SUnit * getSUnit() const </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00160">ScheduleDAG.h:160</a></div></div>
<div class="ttc" id="classllvm_1_1SchedDFSResult_html_a369df0a2d6c45c7323d6329dcb2607d1"><div class="ttname"><a href="classllvm_1_1SchedDFSResult.html#a369df0a2d6c45c7323d6329dcb2607d1">llvm::SchedDFSResult::getILP</a></div><div class="ttdeci">ILPValue getILP(const SUnit *SU) const </div><div class="ttdoc">Get the ILP value for a DAG node. </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDFS_8h_source.html#l00161">ScheduleDFS.h:161</a></div></div>
<div class="ttc" id="classllvm_1_1TargetLoweringBase_html_a71b07ff24aaa94d58e0e7c35551728d5"><div class="ttname"><a href="classllvm_1_1TargetLoweringBase.html#a71b07ff24aaa94d58e0e7c35551728d5">llvm::TargetLoweringBase::getRegClassFor</a></div><div class="ttdeci">virtual const TargetRegisterClass * getRegClassFor(MVT VT) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00258">TargetLowering.h:258</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html_a8653b8f5260fe21abfa505b856d3af7b"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#a8653b8f5260fe21abfa505b856d3af7b">llvm::ScheduleDAGMI::bottom</a></div><div class="ttdeci">MachineBasicBlock::iterator bottom() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00369">MachineScheduler.h:369</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html_a2209b15a069023499cc665b373e67703"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#a2209b15a069023499cc665b373e67703">llvm::ScheduleDAGMI::moveInstruction</a></div><div class="ttdeci">void moveInstruction(MachineInstr *MI, MachineBasicBlock::iterator InsertPos)</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l00458">MachineScheduler.cpp:458</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGInstrs_html_aa1a4554243ad6d8f52e7d12a74f0cded"><div class="ttname"><a href="classllvm_1_1ScheduleDAGInstrs.html#aa1a4554243ad6d8f52e7d12a74f0cded">llvm::ScheduleDAGInstrs::end</a></div><div class="ttdeci">MachineBasicBlock::iterator end() const </div><div class="ttdoc">end - Return an iterator to the bottom of the current scheduling region. </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAGInstrs_8h_source.html#l00174">ScheduleDAGInstrs.h:174</a></div></div>
<div class="ttc" id="MachineScheduler_8cpp_html_a79014fd44cc5b8b74f64c79a2cdaaa0f"><div class="ttname"><a href="MachineScheduler_8cpp.html#a79014fd44cc5b8b74f64c79a2cdaaa0f">tryGreater</a></div><div class="ttdeci">static bool tryGreater(int TryVal, int CandVal, GenericScheduler::SchedCandidate &amp;TryCand, GenericScheduler::SchedCandidate &amp;Cand, GenericScheduler::CandReason Reason)</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l02337">MachineScheduler.cpp:2337</a></div></div>
<div class="ttc" id="classllvm_1_1PrintVRegOrUnit_html"><div class="ttname"><a href="classllvm_1_1PrintVRegOrUnit.html">llvm::PrintVRegOrUnit</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00920">TargetRegisterInfo.h:920</a></div></div>
<div class="ttc" id="classllvm_1_1SUnit_html_a72eaa4fec43227da59cd1eaef8cfdb76"><div class="ttname"><a href="classllvm_1_1SUnit.html#a72eaa4fec43227da59cd1eaef8cfdb76">llvm::SUnit::isBoundaryNode</a></div><div class="ttdeci">bool isBoundaryNode() const </div><div class="ttdoc">Boundary nodes are placeholders for the boundary of the scheduling region. </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00357">ScheduleDAG.h:357</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html_a08cf7a1fa75de765d37188ec7f378a33"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#a08cf7a1fa75de765d37188ec7f378a33">llvm::ScheduleDAGMI::getRegPressure</a></div><div class="ttdeci">const IntervalPressure &amp; getRegPressure() const </div><div class="ttdoc">Get register pressure for the entire scheduling region before scheduling. </div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00396">MachineScheduler.h:396</a></div></div>
<div class="ttc" id="classllvm_1_1SUnit_html_a3047721a8d33c2de8a261d2fecb340a6"><div class="ttname"><a href="classllvm_1_1SUnit.html#a3047721a8d33c2de8a261d2fecb340a6">llvm::SUnit::getDepth</a></div><div class="ttdeci">unsigned getDepth() const </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00403">ScheduleDAG.h:403</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html_a5ff4a66752022247fe7e8b352454a023"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#a5ff4a66752022247fe7e8b352454a023">llvm::ScheduleDAGMI::getNextClusterSucc</a></div><div class="ttdeci">const SUnit * getNextClusterSucc() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00408">MachineScheduler.h:408</a></div></div>
<div class="ttc" id="classllvm_1_1TargetSubtargetInfo_html"><div class="ttname"><a href="classllvm_1_1TargetSubtargetInfo.html">llvm::TargetSubtargetInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetSubtargetInfo_8h_source.html#l00037">TargetSubtargetInfo.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a8a045d250952c0867382a9840ee18fdf"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">llvm::SmallVectorTemplateCommon&lt; T &gt;::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00112">SmallVector.h:112</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html_a25f9975b56fe38f7a8bb4d10b7f6f5ea"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#a25f9975b56fe38f7a8bb4d10b7f6f5ea">llvm::ScheduleDAGMI::releasePredecessors</a></div><div class="ttdeci">void releasePredecessors(SUnit *SU)</div><div class="ttdoc">releasePredecessors - Call releasePred on each of SU&amp;#39;s predecessors. </div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l00449">MachineScheduler.cpp:449</a></div></div>
<div class="ttc" id="classllvm_1_1SchedDFSResult_html_a6c8776a1ce8d9cf55bb1ca65150cbcdd"><div class="ttname"><a href="classllvm_1_1SchedDFSResult.html#a6c8776a1ce8d9cf55bb1ca65150cbcdd">llvm::SchedDFSResult::getSubtreeID</a></div><div class="ttdeci">unsigned getSubtreeID(const SUnit *SU) const </div><div class="ttdoc">Get the ID of the subtree the given DAG node belongs to. </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDFS_8h_source.html#l00172">ScheduleDFS.h:172</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRange_html_a730a3ff6c5b92ca7a37324922ae1d953"><div class="ttname"><a href="classllvm_1_1LiveRange.html#a730a3ff6c5b92ca7a37324922ae1d953">llvm::LiveRange::beginIndex</a></div><div class="ttdeci">SlotIndex beginIndex() const </div><div class="ttdoc">beginIndex - Return the lowest numbered slot covered. </div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00314">LiveInterval.h:314</a></div></div>
<div class="ttc" id="classllvm_1_1SDep_html_aaf085bca6626d2cc320bd9ba7af55f34"><div class="ttname"><a href="classllvm_1_1SDep.html#aaf085bca6626d2cc320bd9ba7af55f34">llvm::SDep::isCluster</a></div><div class="ttdeci">bool isCluster() const </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00210">ScheduleDAG.h:210</a></div></div>
<div class="ttc" id="MachineRegisterInfo_8h_html"><div class="ttname"><a href="MachineRegisterInfo_8h.html">MachineRegisterInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGInstrs_html_a6cf6c94d54730c618ac5f86d2140d032"><div class="ttname"><a href="classllvm_1_1ScheduleDAGInstrs.html#a6cf6c94d54730c618ac5f86d2140d032">llvm::ScheduleDAGInstrs::getSUnit</a></div><div class="ttdeci">SUnit * getSUnit(MachineInstr *MI) const </div><div class="ttdoc">getSUnit - Return an existing SUnit for this MI, or NULL. </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAGInstrs_8h_source.html#l00251">ScheduleDAGInstrs.h:251</a></div></div>
<div class="ttc" id="namespacellvm_html_a2f883c895f4d244f4ed56ed8a8c160c1"><div class="ttname"><a href="namespacellvm.html#a2f883c895f4d244f4ed56ed8a8c160c1">llvm::operator!=</a></div><div class="ttdeci">bool operator!=(uint64_t V1, const APInt &amp;V2)</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01686">APInt.h:1686</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGInstrs_html"><div class="ttname"><a href="classllvm_1_1ScheduleDAGInstrs.html">llvm::ScheduleDAGInstrs</a></div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAGInstrs_8h_source.html#l00076">ScheduleDAGInstrs.h:76</a></div></div>
<div class="ttc" id="structllvm_1_1MachineSchedPolicy_html"><div class="ttname"><a href="structllvm_1_1MachineSchedPolicy.html">llvm::MachineSchedPolicy</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00148">MachineScheduler.h:148</a></div></div>
<div class="ttc" id="classllvm_1_1MachineInstr_html"><div class="ttname"><a href="classllvm_1_1MachineInstr.html">llvm::MachineInstr</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00050">MachineInstr.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAG_html_af81f734d7fb268c95c1c63c399a7c4a6"><div class="ttname"><a href="classllvm_1_1ScheduleDAG.html#af81f734d7fb268c95c1c63c399a7c4a6">llvm::ScheduleDAG::ExitSU</a></div><div class="ttdeci">SUnit ExitSU</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00547">ScheduleDAG.h:547</a></div></div>
<div class="ttc" id="AliasAnalysis_8h_html"><div class="ttname"><a href="AliasAnalysis_8h.html">AliasAnalysis.h</a></div></div>
<div class="ttc" id="classllvm_1_1MachineBasicBlock_html_a654b11787ac7c4344084d98bea7cf626"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a654b11787ac7c4344084d98bea7cf626">llvm::MachineBasicBlock::const_iterator</a></div><div class="ttdeci">bundle_iterator&lt; const MachineInstr, const_instr_iterator &gt; const_iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00214">MachineBasicBlock.h:214</a></div></div>
<div class="ttc" id="classllvm_1_1TargetRegisterInfo_html_a055858b14215864ed367a8db6c19d6f6"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#a055858b14215864ed367a8db6c19d6f6">llvm::TargetRegisterInfo::isPhysicalRegister</a></div><div class="ttdeci">static bool isPhysicalRegister(unsigned Reg)</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00280">TargetRegisterInfo.h:280</a></div></div>
<div class="ttc" id="ScheduleHazardRecognizer_8h_html"><div class="ttname"><a href="ScheduleHazardRecognizer_8h.html">ScheduleHazardRecognizer.h</a></div></div>
<div class="ttc" id="structllvm_1_1MachineSchedContext_html_a433a18eaf42c2038f519428e580cbc53"><div class="ttname"><a href="structllvm_1_1MachineSchedContext.html#a433a18eaf42c2038f519428e580cbc53">llvm::MachineSchedContext::MDT</a></div><div class="ttdeci">const MachineDominatorTree * MDT</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00102">MachineScheduler.h:102</a></div></div>
<div class="ttc" id="structllvm_1_1MachineSchedContext_html_a07525563cb9c2a3cb6d64e3f885f038e"><div class="ttname"><a href="structllvm_1_1MachineSchedContext.html#a07525563cb9c2a3cb6d64e3f885f038e">llvm::MachineSchedContext::MF</a></div><div class="ttdeci">MachineFunction * MF</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00100">MachineScheduler.h:100</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAG_html_a418bc6d3f660325fa6d5b9fb269add62"><div class="ttname"><a href="classllvm_1_1ScheduleDAG.html#a418bc6d3f660325fa6d5b9fb269add62">llvm::ScheduleDAG::TRI</a></div><div class="ttdeci">const TargetRegisterInfo * TRI</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00542">ScheduleDAG.h:542</a></div></div>
<div class="ttc" id="classllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l01149">CommandLine.h:1149</a></div></div>
<div class="ttc" id="MachineScheduler_8cpp_html_a44cdc406d58769851622dd322ee79ded"><div class="ttname"><a href="MachineScheduler_8cpp.html#a44cdc406d58769851622dd322ee79ded">INITIALIZE_PASS_BEGIN</a></div><div class="ttdeci">INITIALIZE_PASS_BEGIN(MachineScheduler,&quot;misched&quot;,&quot;Machine Instruction Scheduler&quot;, false, false) INITIALIZE_PASS_END(MachineScheduler</div></div>
<div class="ttc" id="namespacellvm_html_a5638cb35554a0468f4c7a860e9c1ab47"><div class="ttname"><a href="namespacellvm.html#a5638cb35554a0468f4c7a860e9c1ab47">llvm::ForceBottomUp</a></div><div class="ttdeci">cl::opt&lt; bool &gt; ForceBottomUp</div></div>
<div class="ttc" id="classllvm_1_1MachineFunctionPass_html_aa1eece37d175f86a6f4808c0c167f13b"><div class="ttname"><a href="classllvm_1_1MachineFunctionPass.html#aa1eece37d175f86a6f4808c0c167f13b">llvm::MachineFunctionPass::getAnalysisUsage</a></div><div class="ttdeci">virtual void getAnalysisUsage(AnalysisUsage &amp;AU) const </div><div class="ttdef"><b>Definition:</b> <a href="MachineFunctionPass_8cpp_source.html#l00036">MachineFunctionPass.cpp:36</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRange_html_a26fb4cb84feecacaf08a15f9f6ba5822"><div class="ttname"><a href="classllvm_1_1LiveRange.html#a26fb4cb84feecacaf08a15f9f6ba5822">llvm::LiveRange::endIndex</a></div><div class="ttdeci">SlotIndex endIndex() const </div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00321">LiveInterval.h:321</a></div></div>
<div class="ttc" id="classllvm_1_1SchedDFSResult_html_aa5c239bd9ff383d18c17d0b7148f8beb"><div class="ttname"><a href="classllvm_1_1SchedDFSResult.html#aa5c239bd9ff383d18c17d0b7148f8beb">llvm::SchedDFSResult::getNumInstrs</a></div><div class="ttdeci">unsigned getNumInstrs(const SUnit *SU) const </div><div class="ttdoc">Get the number of instructions in the given subtree and its children. </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDFS_8h_source.html#l00148">ScheduleDFS.h:148</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86II_html_a97dc14052814702ba0e2b14fb14dd02da2c6497f6ed5314c6fcd9ab88c9528543"><div class="ttname"><a href="namespacellvm_1_1X86II.html#a97dc14052814702ba0e2b14fb14dd02da2c6497f6ed5314c6fcd9ab88c9528543">llvm::X86II::DE</a></div><div class="ttdef"><b>Definition:</b> <a href="X86BaseInfo_8h_source.html#l00332">X86BaseInfo.h:332</a></div></div>
<div class="ttc" id="structllvm_1_1MachineSchedContext_html"><div class="ttname"><a href="structllvm_1_1MachineSchedContext.html">llvm::MachineSchedContext</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00099">MachineScheduler.h:99</a></div></div>
<div class="ttc" id="classllvm_1_1MachineSchedStrategy_html"><div class="ttname"><a href="classllvm_1_1MachineSchedStrategy.html">llvm::MachineSchedStrategy</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00166">MachineScheduler.h:166</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="regcomp_8c_html_a0240ac851181b84ac374872dc5434ee4"><div class="ttname"><a href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div><div class="ttdeci">#define N</div></div>
<div class="ttc" id="classllvm_1_1PressureChange_html"><div class="ttname"><a href="classllvm_1_1PressureChange.html">llvm::PressureChange</a></div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8h_source.html#l00100">RegisterPressure.h:100</a></div></div>
<div class="ttc" id="classllvm_1_1PressureChange_html_a1d0b21ec4f6e6eada798a9e71d043e68"><div class="ttname"><a href="classllvm_1_1PressureChange.html#a1d0b21ec4f6e6eada798a9e71d043e68">llvm::PressureChange::isValid</a></div><div class="ttdeci">bool isValid() const </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8h_source.html#l00109">RegisterPressure.h:109</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a102d0ad36060677286c3aefb812e5512"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a102d0ad36060677286c3aefb812e5512">llvm::SmallVectorImpl::resize</a></div><div class="ttdeci">void resize(unsigned N)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00401">SmallVector.h:401</a></div></div>
<div class="ttc" id="MachineScheduler_8cpp_html_a047d5c154154f6a606d893399ec0b76f"><div class="ttname"><a href="MachineScheduler_8cpp.html#a047d5c154154f6a606d893399ec0b76f">tryPressure</a></div><div class="ttdeci">static bool tryPressure(const PressureChange &amp;TryP, const PressureChange &amp;CandP, GenericScheduler::SchedCandidate &amp;TryCand, GenericScheduler::SchedCandidate &amp;Cand, GenericScheduler::CandReason Reason)</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l02354">MachineScheduler.cpp:2354</a></div></div>
<div class="ttc" id="classllvm_1_1RegPressureTracker_html_a41a3118fb6bd46e397256b3c9794b61c"><div class="ttname"><a href="classllvm_1_1RegPressureTracker.html#a41a3118fb6bd46e397256b3c9794b61c">llvm::RegPressureTracker::getMaxUpwardPressureDelta</a></div><div class="ttdeci">void getMaxUpwardPressureDelta(const MachineInstr *MI, PressureDiff *PDiff, RegPressureDelta &amp;Delta, ArrayRef&lt; PressureChange &gt; CriticalPSets, ArrayRef&lt; unsigned &gt; MaxPressureLimit)</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00749">RegisterPressure.cpp:749</a></div></div>
<div class="ttc" id="classllvm_1_1PressureChange_html_ad9c2dce7dcf3bbfbec05526cfd0cf897"><div class="ttname"><a href="classllvm_1_1PressureChange.html#ad9c2dce7dcf3bbfbec05526cfd0cf897">llvm::PressureChange::getUnitInc</a></div><div class="ttdeci">int getUnitInc() const </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8h_source.html#l00118">RegisterPressure.h:118</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_a6745c3bfdfc5b0643b078b96df2db252"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a6745c3bfdfc5b0643b078b96df2db252">llvm::MachineFunction::getTarget</a></div><div class="ttdeci">const TargetMachine &amp; getTarget() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00163">MachineFunction.h:163</a></div></div>
<div class="ttc" id="structllvm_1_1DOTGraphTraits_3_01ScheduleDAGMI_01_5_01_4_html_a348f36a6bae9005c7991881c7bb7876e"><div class="ttname"><a href="structllvm_1_1DOTGraphTraits_3_01ScheduleDAGMI_01_5_01_4.html#a348f36a6bae9005c7991881c7bb7876e">llvm::DOTGraphTraits&lt; ScheduleDAGMI * &gt;::hasNodeAddressLabel</a></div><div class="ttdeci">static bool hasNodeAddressLabel(const SUnit *Node, const ScheduleDAG *Graph)</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l03078">MachineScheduler.cpp:3078</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html_ac2dafe98c88d43b256622413886e2152"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#ac2dafe98c88d43b256622413886e2152">llvm::ScheduleDAGMI::placeDebugValues</a></div><div class="ttdeci">void placeDebugValues()</div><div class="ttdoc">Reinsert debug_values recorded in ScheduleDAGInstrs::DbgValues. </div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l00944">MachineScheduler.cpp:944</a></div></div>
<div class="ttc" id="MachineScheduler_8cpp_html_ab4e60a985c36dacfd88f5d4b2ff47789"><div class="ttname"><a href="MachineScheduler_8cpp.html#ab4e60a985c36dacfd88f5d4b2ff47789">tryLatency</a></div><div class="ttdeci">static bool tryLatency(GenericScheduler::SchedCandidate &amp;TryCand, GenericScheduler::SchedCandidate &amp;Cand, GenericScheduler::SchedBoundary &amp;Zone)</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l02410">MachineScheduler.cpp:2410</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAG_html_a348590624c488b04d0f9e227e6c3960e"><div class="ttname"><a href="classllvm_1_1ScheduleDAG.html#a348590624c488b04d0f9e227e6c3960e">llvm::ScheduleDAG::TII</a></div><div class="ttdeci">const TargetInstrInfo * TII</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00541">ScheduleDAG.h:541</a></div></div>
<div class="ttc" id="structllvm_1_1DOTGraphTraits_3_01ScheduleDAGMI_01_5_01_4_html_ab505aa4225d82a38ec96019134881676"><div class="ttname"><a href="structllvm_1_1DOTGraphTraits_3_01ScheduleDAGMI_01_5_01_4.html#ab505aa4225d82a38ec96019134881676">llvm::DOTGraphTraits&lt; ScheduleDAGMI * &gt;::isNodeHidden</a></div><div class="ttdeci">static bool isNodeHidden(const SUnit *Node)</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l03074">MachineScheduler.cpp:3074</a></div></div>
<div class="ttc" id="classllvm_1_1ReadyQueue_html_a4afc92f2d387ce9eb2c2647dec8bf92a"><div class="ttname"><a href="classllvm_1_1ReadyQueue.html#a4afc92f2d387ce9eb2c2647dec8bf92a">llvm::ReadyQueue::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00236">MachineScheduler.h:236</a></div></div>
<div class="ttc" id="PriorityQueue_8h_html"><div class="ttname"><a href="PriorityQueue_8h.html">PriorityQueue.h</a></div></div>
<div class="ttc" id="classllvm_1_1SUnit_html_a3f708b119627541f144d703a1d183202"><div class="ttname"><a href="classllvm_1_1SUnit.html#a3f708b119627541f144d703a1d183202">llvm::SUnit::NodeNum</a></div><div class="ttdeci">unsigned NodeNum</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00271">ScheduleDAG.h:271</a></div></div>
<div class="ttc" id="classllvm_1_1PressureChange_html_ac03484731c64db4703d96fe442400e42"><div class="ttname"><a href="classllvm_1_1PressureChange.html#ac03484731c64db4703d96fe442400e42">llvm::PressureChange::getPSetOrMax</a></div><div class="ttdeci">unsigned getPSetOrMax() const </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8h_source.html#l00116">RegisterPressure.h:116</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRange_html_a9a5e7c523f12f9f164b786769de1ca47"><div class="ttname"><a href="classllvm_1_1LiveRange.html#a9a5e7c523f12f9f164b786769de1ca47">llvm::LiveRange::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00192">LiveInterval.h:192</a></div></div>
<div class="ttc" id="classllvm_1_1MachineOperand_html_ab75f703d251cc0ce0206fe00a999db86"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">llvm::MachineOperand::getReg</a></div><div class="ttdeci">unsigned getReg() const </div><div class="ttdoc">getReg - Returns the register number. </div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00259">MachineOperand.h:259</a></div></div>
<div class="ttc" id="structllvm_1_1RegPressureDelta_html"><div class="ttname"><a href="structllvm_1_1RegPressureDelta.html">llvm::RegPressureDelta</a></div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8h_source.html#l00191">RegisterPressure.h:191</a></div></div>
<div class="ttc" id="classllvm_1_1SUnit_html_af92bf49ed4846e026e68c380d74d7b15"><div class="ttname"><a href="classllvm_1_1SUnit.html#af92bf49ed4846e026e68c380d74d7b15">llvm::SUnit::addPred</a></div><div class="ttdeci">bool addPred(const SDep &amp;D, bool Required=true)</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8cpp_source.html#l00065">ScheduleDAG.cpp:65</a></div></div>
<div class="ttc" id="classllvm_1_1raw__string__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__string__ostream.html">llvm::raw_string_ostream</a></div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00426">raw_ostream.h:426</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html_a1f98694f104d052d71ed74ade38d69f0"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#a1f98694f104d052d71ed74ade38d69f0">llvm::ScheduleDAGMI::initQueues</a></div><div class="ttdeci">void initQueues(ArrayRef&lt; SUnit * &gt; TopRoots, ArrayRef&lt; SUnit * &gt; BotRoots)</div><div class="ttdoc">Release ExitSU predecessors and setup scheduler queues. </div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l00839">MachineScheduler.cpp:839</a></div></div>
<div class="ttc" id="classllvm_1_1TargetSchedModel_html_acfdce107adb48e168830b94af8db14c8"><div class="ttname"><a href="classllvm_1_1TargetSchedModel.html#acfdce107adb48e168830b94af8db14c8">llvm::TargetSchedModel::getMicroOpFactor</a></div><div class="ttdeci">unsigned getMicroOpFactor() const </div><div class="ttdoc">Multiply number of micro-ops by this factor to normalize it relative to other resources. </div><div class="ttdef"><b>Definition:</b> <a href="TargetSchedule_8h_source.html#l00121">TargetSchedule.h:121</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html_a0f5aea0b37a8ee856681544e5b97326d"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#a0f5aea0b37a8ee856681544e5b97326d">llvm::ScheduleDAGMI::postprocessDAG</a></div><div class="ttdeci">void postprocessDAG()</div><div class="ttdoc">Apply each ScheduleDAGMutation step in order. </div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l00717">MachineScheduler.cpp:717</a></div></div>
<div class="ttc" id="classllvm_1_1SUnit_html_aab4a86c51e6b126c9c6ef58dbb574431"><div class="ttname"><a href="classllvm_1_1SUnit.html#aab4a86c51e6b126c9c6ef58dbb574431">llvm::SUnit::Succs</a></div><div class="ttdeci">SmallVector&lt; SDep, 4 &gt; Succs</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00264">ScheduleDAG.h:264</a></div></div>
<div class="ttc" id="classllvm_1_1TargetSchedModel_html_af47df2f59b2ccb5c28f3ae40aacc4443"><div class="ttname"><a href="classllvm_1_1TargetSchedModel.html#af47df2f59b2ccb5c28f3ae40aacc4443">llvm::TargetSchedModel::getIssueWidth</a></div><div class="ttdeci">unsigned getIssueWidth() const </div><div class="ttdoc">Maximum number of micro-ops that may be scheduled per cycle. </div><div class="ttdef"><b>Definition:</b> <a href="TargetSchedule_8h_source.html#l00085">TargetSchedule.h:85</a></div></div>
<div class="ttc" id="classllvm_1_1LiveIntervals_html_ab306d0d7e986cc18578a5150c44a9f7a"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#ab306d0d7e986cc18578a5150c44a9f7a">llvm::LiveIntervals::getInstructionFromIndex</a></div><div class="ttdeci">MachineInstr * getInstructionFromIndex(SlotIndex index) const </div><div class="ttdoc">Returns the instruction associated with the given index. </div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervalAnalysis_8h_source.html#l00195">LiveIntervalAnalysis.h:195</a></div></div>
<div class="ttc" id="classllvm_1_1SUnit_html_aebc439d11dc8b13b713bbcc0a59db3dc"><div class="ttname"><a href="classllvm_1_1SUnit.html#aebc439d11dc8b13b713bbcc0a59db3dc">llvm::SUnit::isBottomReady</a></div><div class="ttdeci">bool isBottomReady() const </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00456">ScheduleDAG.h:456</a></div></div>
<div class="ttc" id="MachineScheduler_8cpp_html_aef18d242eef950812f8f491246439ad4"><div class="ttname"><a href="MachineScheduler_8cpp.html#aef18d242eef950812f8f491246439ad4">ILPMinRegistry</a></div><div class="ttdeci">static MachineSchedRegistry ILPMinRegistry(&quot;ilpmin&quot;,&quot;Schedule bottom-up for min ILP&quot;, createILPMinScheduler)</div></div>
<div class="ttc" id="classllvm_1_1SDep_html_a551060cb0333d9d0cfdacd2576d817b9a8afafe9e6f4c2fb9744242a6b369a0f1"><div class="ttname"><a href="classllvm_1_1SDep.html#a551060cb0333d9d0cfdacd2576d817b9a8afafe9e6f4c2fb9744242a6b369a0f1">llvm::SDep::Artificial</a></div><div class="ttdoc">Arbitrary strong DAG edge (no real dependence). </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00068">ScheduleDAG.h:68</a></div></div>
<div class="ttc" id="namespacellvm_1_1A64CC_html_af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442"><div class="ttname"><a href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">llvm::A64CC::MI</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00035">AArch64BaseInfo.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_a340712de3e78fec11c338735cab17df7"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">llvm::MachineFunction::iterator</a></div><div class="ttdeci">BasicBlockListType::iterator iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00303">MachineFunction.h:303</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html_a22f0753d4f2f850c165df2f7892ad1f6"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#a22f0753d4f2f850c165df2f7892ad1f6">llvm::ScheduleDAGMI::getNextClusterPred</a></div><div class="ttdeci">const SUnit * getNextClusterPred() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00406">MachineScheduler.h:406</a></div></div>
<div class="ttc" id="namespacellvm_html_a7923e3e207de8bc1d0d6a5091316ddde"><div class="ttname"><a href="namespacellvm.html#a7923e3e207de8bc1d0d6a5091316ddde">llvm::prior</a></div><div class="ttdeci">ItTy prior(ItTy it, Dist n)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00167">STLExtras.h:167</a></div></div>
<div class="ttc" id="classllvm_1_1raw__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__ostream.html">llvm::raw_ostream</a></div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00031">raw_ostream.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1PressureDiff_html_ad22e63bbd4e84ba7a3ed4462d34270b6"><div class="ttname"><a href="classllvm_1_1PressureDiff.html#ad22e63bbd4e84ba7a3ed4462d34270b6">llvm::PressureDiff::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8h_source.html#l00146">RegisterPressure.h:146</a></div></div>
<div class="ttc" id="Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00097">Debug.h:97</a></div></div>
<div class="ttc" id="ScheduleDFS_8h_html"><div class="ttname"><a href="ScheduleDFS_8h.html">ScheduleDFS.h</a></div></div>
<div class="ttc" id="structllvm_1_1DefaultDOTGraphTraits_html"><div class="ttname"><a href="structllvm_1_1DefaultDOTGraphTraits.html">llvm::DefaultDOTGraphTraits</a></div><div class="ttdef"><b>Definition:</b> <a href="DOTGraphTraits_8h_source.html#l00029">DOTGraphTraits.h:29</a></div></div>
<div class="ttc" id="classllvm_1_1TargetMachine_html"><div class="ttname"><a href="classllvm_1_1TargetMachine.html">llvm::TargetMachine</a></div><div class="ttdef"><b>Definition:</b> <a href="Target_2TargetMachine_8h_source.html#l00061">Target/TargetMachine.h:61</a></div></div>
<div class="ttc" id="MachineScheduler_8cpp_html_a127ed1a56215acb4c76dcbb1e8aad935"><div class="ttname"><a href="MachineScheduler_8cpp.html#a127ed1a56215acb4c76dcbb1e8aad935">Scheduler</a></div><div class="ttdeci">Machine Instruction Scheduler</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l00123">MachineScheduler.cpp:123</a></div></div>
<div class="ttc" id="classllvm_1_1PriorityQueue_html_a583627bbdd690ca5df5ed7b00a5f7b18"><div class="ttname"><a href="classllvm_1_1PriorityQueue.html#a583627bbdd690ca5df5ed7b00a5f7b18">llvm::PriorityQueue::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="PriorityQueue_8h_source.html#l00077">PriorityQueue.h:77</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html_a4fb766f0c271c845c86a325167a9e7e1"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#a4fb766f0c271c845c86a325167a9e7e1">llvm::ScheduleDAGMI::canAddEdge</a></div><div class="ttdeci">bool canAddEdge(SUnit *SuccSU, SUnit *PredSU)</div><div class="ttdoc">True if an edge can be added from PredSU to SuccSU without creating a cycle. </div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l00371">MachineScheduler.cpp:371</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html_a57905825e83244d442c3475c063b837d"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#a57905825e83244d442c3475c063b837d">llvm::ScheduleDAGMI::~ScheduleDAGMI</a></div><div class="ttdeci">virtual ~ScheduleDAGMI()</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l00365">MachineScheduler.cpp:365</a></div></div>
<div class="ttc" id="MCModuleYAML_8cpp_html_a5e410df3f6875c5af4a7f2be284f235d"><div class="ttname"><a href="MCModuleYAML_8cpp.html#a5e410df3f6875c5af4a7f2be284f235d">MRI</a></div><div class="ttdeci">const MCRegisterInfo &amp; MRI</div><div class="ttdef"><b>Definition:</b> <a href="MCModuleYAML_8cpp_source.html#l00056">MCModuleYAML.cpp:56</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html_a6d80d7c7852ce23bacc2aa4afe705088"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#a6d80d7c7852ce23bacc2aa4afe705088">llvm::ScheduleDAGMI::getBotRPTracker</a></div><div class="ttdeci">const RegPressureTracker &amp; getBotRPTracker() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00393">MachineScheduler.h:393</a></div></div>
<div class="ttc" id="raw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="MachineDominators_8h_html"><div class="ttname"><a href="MachineDominators_8h.html">MachineDominators.h</a></div></div>
<div class="ttc" id="namespacellvm_html_a162c90bc179a6359438d060722bee35f"><div class="ttname"><a href="namespacellvm.html#a162c90bc179a6359438d060722bee35f">llvm::operator==</a></div><div class="ttdeci">bool operator==(uint64_t V1, const APInt &amp;V2)</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01684">APInt.h:1684</a></div></div>
<div class="ttc" id="classllvm_1_1MachineFunction_html_ae215c5c2aecd18c4e68a94187d9cdbf1"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ae215c5c2aecd18c4e68a94187d9cdbf1">llvm::MachineFunction::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8cpp_source.html#l00317">MachineFunction.cpp:317</a></div></div>
<div class="ttc" id="classllvm_1_1LiveQueryResult_html_a04fcce5cd33d3ffe16309a908387a982"><div class="ttname"><a href="classllvm_1_1LiveQueryResult.html#a04fcce5cd33d3ffe16309a908387a982">llvm::LiveQueryResult::valueIn</a></div><div class="ttdeci">VNInfo * valueIn() const </div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00100">LiveInterval.h:100</a></div></div>
<div class="ttc" id="classllvm_1_1MachineLoopInfo_html"><div class="ttname"><a href="classllvm_1_1MachineLoopInfo.html">llvm::MachineLoopInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineLoopInfo_8h_source.html#l00072">MachineLoopInfo.h:72</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAG_html_a3d5aacd5fc7d6a739ce913974ed1e53d"><div class="ttname"><a href="classllvm_1_1ScheduleDAG.html#a3d5aacd5fc7d6a739ce913974ed1e53d">llvm::ScheduleDAG::SUnits</a></div><div class="ttdeci">std::vector&lt; SUnit &gt; SUnits</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00545">ScheduleDAG.h:545</a></div></div>
<div class="ttc" id="CodeGen_2Passes_8h_html"><div class="ttname"><a href="CodeGen_2Passes_8h.html">Passes.h</a></div></div>
<div class="ttc" id="OwningPtr_8h_html"><div class="ttname"><a href="OwningPtr_8h.html">OwningPtr.h</a></div></div>
<div class="ttc" id="classllvm_1_1PriorityQueue_html"><div class="ttname"><a href="classllvm_1_1PriorityQueue.html">llvm::PriorityQueue</a></div><div class="ttdef"><b>Definition:</b> <a href="PriorityQueue_8h_source.html#l00028">PriorityQueue.h:28</a></div></div>
<div class="ttc" id="classllvm_1_1TargetSchedModel_html_a5d256b71a3153dae133d8e9d5a78cdda"><div class="ttname"><a href="classllvm_1_1TargetSchedModel.html#a5d256b71a3153dae133d8e9d5a78cdda">llvm::TargetSchedModel::getWriteProcResBegin</a></div><div class="ttdeci">ProcResIter getWriteProcResBegin(const MCSchedClassDesc *SC) const </div><div class="ttdef"><b>Definition:</b> <a href="TargetSchedule_8h_source.html#l00105">TargetSchedule.h:105</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html_aa6e8e1fb5423b9a8bb7bc35a60fb9aab"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#aa6e8e1fb5423b9a8bb7bc35a60fb9aab">llvm::ScheduleDAGMI::schedule</a></div><div class="ttdeci">virtual void schedule()</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l00649">MachineScheduler.cpp:649</a></div></div>
<div class="ttc" id="classllvm_1_1SlotIndex_html"><div class="ttname"><a href="classllvm_1_1SlotIndex.html">llvm::SlotIndex</a></div><div class="ttdoc">SlotIndex - An opaque wrapper around machine indexes. </div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00092">SlotIndexes.h:92</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a90cca76dd78688687e0d697679dbc799"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a90cca76dd78688687e0d697679dbc799">B</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional ldr LCPI1_0 ldr ldr tst movne lsr ldr LCPI1_1 and r0 bx lr it saves an instruction and a register It might be profitable to cse MOVi16 if there are lots of bit immediates with the same bottom half Robert Muth started working on an alternate jump table implementation that does not put the tables in line in the text This is more like the llvm default jump table implementation This might be useful sometime Several revisions of patches are on the mailing beginning while CMP sets them like a subtract Therefore to be able to use CMN for comparisons other than the Z we ll need additional logic to reverse the conditionals associated with the comparison Perhaps a pseudo instruction for the with a post codegen pass to clean up and handle the condition codes See PR5694 for testcase Given the following on int B</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00592">Target/ARM/README.txt:592</a></div></div>
<div class="ttc" id="classllvm_1_1ScheduleDAGMI_html_af5351ac954613bc3571961cfd4d4223d"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#af5351ac954613bc3571961cfd4d4223d">llvm::ScheduleDAGMI::getDFSResult</a></div><div class="ttdeci">const SchedDFSResult * getDFSResult() const </div><div class="ttdoc">Return a non-null DFS result if the scheduling strategy initialized it. </div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00415">MachineScheduler.h:415</a></div></div>
<div class="ttc" id="classllvm_1_1MachineSchedRegistry_html_ae16b3e172fcc4489fb60b36ec662436f"><div class="ttname"><a href="classllvm_1_1MachineSchedRegistry.html#ae16b3e172fcc4489fb60b36ec662436f">llvm::MachineSchedRegistry::ScheduleDAGCtor</a></div><div class="ttdeci">ScheduleDAGInstrs *(* ScheduleDAGCtor)(MachineSchedContext *)</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00117">MachineScheduler.h:117</a></div></div>
<div class="ttc" id="classllvm_1_1SUnit_html_ac28b1882619718b4c6efb97899b845a1"><div class="ttname"><a href="classllvm_1_1SUnit.html#ac28b1882619718b4c6efb97899b845a1">llvm::SUnit::dump</a></div><div class="ttdeci">void dump(const ScheduleDAG *G) const </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8cpp_source.html#l00316">ScheduleDAG.cpp:316</a></div></div>
<div class="ttc" id="classllvm_1_1RegPressureTracker_html_a159b60403d83d421b95876ef26df2d94"><div class="ttname"><a href="classllvm_1_1RegPressureTracker.html#a159b60403d83d421b95876ef26df2d94">llvm::RegPressureTracker::getUpwardPressureDelta</a></div><div class="ttdeci">void getUpwardPressureDelta(const MachineInstr *MI, PressureDiff &amp;PDiff, RegPressureDelta &amp;Delta, ArrayRef&lt; PressureChange &gt; CriticalPSets, ArrayRef&lt; unsigned &gt; MaxPressureLimit) const </div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00817">RegisterPressure.cpp:817</a></div></div>
<div class="ttc" id="classllvm_1_1LiveRange_html_a435a93196594094643aae944c4ec6cb0"><div class="ttname"><a href="classllvm_1_1LiveRange.html#a435a93196594094643aae944c4ec6cb0">llvm::LiveRange::getVNInfoBefore</a></div><div class="ttdeci">VNInfo * getVNInfoBefore(SlotIndex Idx) const </div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00358">LiveInterval.h:358</a></div></div>
<div class="ttc" id="classllvm_1_1SUnit_html"><div class="ttname"><a href="classllvm_1_1SUnit.html">llvm::SUnit</a></div><div class="ttdoc">SUnit - Scheduling unit. This is a node in the scheduling DAG. </div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00249">ScheduleDAG.h:249</a></div></div>
<div class="ttc" id="namespacellvm_html_a0081c790ccede18428a2821d166ef6c7"><div class="ttname"><a href="namespacellvm.html#a0081c790ccede18428a2821d166ef6c7">llvm::ForceTopDown</a></div><div class="ttdeci">cl::opt&lt; bool &gt; ForceTopDown</div></div>
<div class="ttc" id="structllvm_1_1MachineSchedContext_html_ac8df817832c60969961bfb498488fc70"><div class="ttname"><a href="structllvm_1_1MachineSchedContext.html#ac8df817832c60969961bfb498488fc70">llvm::MachineSchedContext::MachineSchedContext</a></div><div class="ttdeci">MachineSchedContext()</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l00083">MachineScheduler.cpp:83</a></div></div>
<div class="ttc" id="structllvm_1_1GraphTraits_3_01ScheduleDAG_01_5_01_4_html"><div class="ttname"><a href="structllvm_1_1GraphTraits_3_01ScheduleDAG_01_5_01_4.html">llvm::GraphTraits&lt; ScheduleDAG * &gt;</a></div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00661">ScheduleDAG.h:661</a></div></div>
<div class="ttc" id="MachineLoopInfo_8h_html"><div class="ttname"><a href="MachineLoopInfo_8h.html">MachineLoopInfo.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 22:59:54 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
