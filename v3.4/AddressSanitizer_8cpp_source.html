<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: AddressSanitizer.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('AddressSanitizer_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">AddressSanitizer.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="AddressSanitizer_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===-- AddressSanitizer.cpp - memory error detector ------------*- C++ -*-===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//                     The LLVM Compiler Infrastructure</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This file is distributed under the University of Illinois Open Source</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License. See LICENSE.TXT for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// This file is a part of AddressSanitizer, an address sanity checker.</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// Details of the algorithm:</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//  http://code.google.com/p/address-sanitizer/wiki/AddressSanitizerAlgorithm</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div><div class="line"><a name="l00016"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   16</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;asan&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instrumentation_8h.html">llvm/Transforms/Instrumentation.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ArrayRef_8h.html">llvm/ADT/ArrayRef.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseMap_8h.html">llvm/ADT/DenseMap.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DepthFirstIterator_8h.html">llvm/ADT/DepthFirstIterator.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="OwningPtr_8h.html">llvm/ADT/OwningPtr.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallSet_8h.html">llvm/ADT/SmallSet.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallString_8h.html">llvm/ADT/SmallString.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallVector_8h.html">llvm/ADT/SmallVector.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="StringExtras_8h.html">llvm/ADT/StringExtras.h</a>&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Triple_8h.html">llvm/ADT/Triple.h</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DIBuilder_8h.html">llvm/DIBuilder.h</a>&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DataLayout_8h.html">llvm/IR/DataLayout.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Function_8h.html">llvm/IR/Function.h</a>&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IRBuilder_8h.html">llvm/IR/IRBuilder.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InlineAsm_8h.html">llvm/IR/InlineAsm.h</a>&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IntrinsicInst_8h.html">llvm/IR/IntrinsicInst.h</a>&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LLVMContext_8h.html">llvm/IR/LLVMContext.h</a>&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Module_8h.html">llvm/IR/Module.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Type_8h.html">llvm/IR/Type.h</a>&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstVisitor_8h.html">llvm/InstVisitor.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CallSite_8h.html">llvm/Support/CallSite.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;llvm/Support/DataTypes.h&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Endian_8h.html">llvm/Support/Endian.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="system__error_8h.html">llvm/Support/system_error.h</a>&quot;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlockUtils_8h.html">llvm/Transforms/Utils/BasicBlockUtils.h</a>&quot;</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Cloning_8h.html">llvm/Transforms/Utils/Cloning.h</a>&quot;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Local_8h.html">llvm/Transforms/Utils/Local.h</a>&quot;</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ModuleUtils_8h.html">llvm/Transforms/Utils/ModuleUtils.h</a>&quot;</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SpecialCaseList_8h.html">llvm/Transforms/Utils/SpecialCaseList.h</a>&quot;</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#a0825e9eeff024102856e9a30f41bb386">   56</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> uint64_t <a class="code" href="AddressSanitizer_8cpp.html#a0825e9eeff024102856e9a30f41bb386">kDefaultShadowScale</a> = 3;</div><div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#a7221cab4eb5396f920c432650580815d">   57</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> uint64_t <a class="code" href="AddressSanitizer_8cpp.html#a7221cab4eb5396f920c432650580815d">kDefaultShadowOffset32</a> = 1ULL &lt;&lt; 29;</div><div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#a52e0a578af8418ff6a63a4b03d385012">   58</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> uint64_t <a class="code" href="AddressSanitizer_8cpp.html#a52e0a578af8418ff6a63a4b03d385012">kDefaultShadowOffset64</a> = 1ULL &lt;&lt; 44;</div><div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#a4b69748767088f4286f047f9d1601bde">   59</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> uint64_t <a class="code" href="AddressSanitizer_8cpp.html#a4b69748767088f4286f047f9d1601bde">kDefaultShort64bitShadowOffset</a> = 0x7FFF8000;  <span class="comment">// &lt; 2G.</span></div><div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#ac71a9d13684166ebbd2dc2fae6ada036">   60</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> uint64_t <a class="code" href="AddressSanitizer_8cpp.html#ac71a9d13684166ebbd2dc2fae6ada036">kPPC64_ShadowOffset64</a> = 1ULL &lt;&lt; 41;</div><div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#acda94f3cd0782a06ec8c4035ab6a6ba0">   61</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> uint64_t <a class="code" href="AddressSanitizer_8cpp.html#acda94f3cd0782a06ec8c4035ab6a6ba0">kMIPS32_ShadowOffset32</a> = 0x0aaa8000;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#afb368a1d773581543db2f164baf7fbdf">   63</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code" href="AddressSanitizer_8cpp.html#afb368a1d773581543db2f164baf7fbdf">kMinStackMallocSize</a> = 1 &lt;&lt; 6;  <span class="comment">// 64B</span></div><div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#aaf5f0e81eb832fe48c6dc33db623a03c">   64</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code" href="AddressSanitizer_8cpp.html#aaf5f0e81eb832fe48c6dc33db623a03c">kMaxStackMallocSize</a> = 1 &lt;&lt; 16;  <span class="comment">// 64K</span></div><div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#abd89ac2b95ec4f9f9b87cf28f156322d">   65</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> uintptr_t <a class="code" href="AddressSanitizer_8cpp.html#abd89ac2b95ec4f9f9b87cf28f156322d">kCurrentStackFrameMagic</a> = 0x41B58AB3;</div><div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#af955cd27ba6d5632e02d374282c4afae">   66</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> uintptr_t <a class="code" href="AddressSanitizer_8cpp.html#af955cd27ba6d5632e02d374282c4afae">kRetiredStackFrameMagic</a> = 0x45E0360E;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div><div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#a2e0b5e9ef464733fd25b5bd45fae9f14">   68</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> <a class="code" href="AddressSanitizer_8cpp.html#a2e0b5e9ef464733fd25b5bd45fae9f14">kAsanModuleCtorName</a> = <span class="stringliteral">&quot;asan.module_ctor&quot;</span>;</div><div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#a6c44b22bca0251b66d6e28e83b64d0ad">   69</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> <a class="code" href="AddressSanitizer_8cpp.html#a6c44b22bca0251b66d6e28e83b64d0ad">kAsanModuleDtorName</a> = <span class="stringliteral">&quot;asan.module_dtor&quot;</span>;</div><div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#ad7689e8106d7eb5c7844454ddf90c977">   70</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span>         <a class="code" href="AddressSanitizer_8cpp.html#ad7689e8106d7eb5c7844454ddf90c977">kAsanCtorAndCtorPriority</a> = 1;</div><div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#ae9c436463aca1fb27209dfaa6f643727">   71</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> <a class="code" href="AddressSanitizer_8cpp.html#ae9c436463aca1fb27209dfaa6f643727">kAsanReportErrorTemplate</a> = <span class="stringliteral">&quot;__asan_report_&quot;</span>;</div><div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#a3516339929af46c9fd200b6f28189dfe">   72</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> <a class="code" href="AddressSanitizer_8cpp.html#a3516339929af46c9fd200b6f28189dfe">kAsanReportLoadN</a> = <span class="stringliteral">&quot;__asan_report_load_n&quot;</span>;</div><div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#a60a1aea771a1724c137bbb657fc472d7">   73</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> <a class="code" href="AddressSanitizer_8cpp.html#a60a1aea771a1724c137bbb657fc472d7">kAsanReportStoreN</a> = <span class="stringliteral">&quot;__asan_report_store_n&quot;</span>;</div><div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#a00196b8da2b6387babb5f8ac980a5386">   74</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> <a class="code" href="AddressSanitizer_8cpp.html#a00196b8da2b6387babb5f8ac980a5386">kAsanRegisterGlobalsName</a> = <span class="stringliteral">&quot;__asan_register_globals&quot;</span>;</div><div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#a4d3051ff284a00a16810bcc43f18819e">   75</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> <a class="code" href="AddressSanitizer_8cpp.html#a4d3051ff284a00a16810bcc43f18819e">kAsanUnregisterGlobalsName</a> =</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="stringliteral">&quot;__asan_unregister_globals&quot;</span>;</div><div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#a630bdc81ca4a6ab70626ed25d4835d4a">   77</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> <a class="code" href="AddressSanitizer_8cpp.html#a630bdc81ca4a6ab70626ed25d4835d4a">kAsanPoisonGlobalsName</a> = <span class="stringliteral">&quot;__asan_before_dynamic_init&quot;</span>;</div><div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#a0be2945a528adca56b3d238944e6449c">   78</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> <a class="code" href="AddressSanitizer_8cpp.html#a0be2945a528adca56b3d238944e6449c">kAsanUnpoisonGlobalsName</a> = <span class="stringliteral">&quot;__asan_after_dynamic_init&quot;</span>;</div><div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#aec09af489a399a9c32f8f316da451403">   79</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> <a class="code" href="AddressSanitizer_8cpp.html#aec09af489a399a9c32f8f316da451403">kAsanInitName</a> = <span class="stringliteral">&quot;__asan_init_v3&quot;</span>;</div><div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#a4b572ae0a7ecf76250a6642941e95746">   80</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> <a class="code" href="AddressSanitizer_8cpp.html#a4b572ae0a7ecf76250a6642941e95746">kAsanCovName</a> = <span class="stringliteral">&quot;__sanitizer_cov&quot;</span>;</div><div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#a441bafcb7a483df1b0e9b2fd0ba45f47">   81</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> <a class="code" href="AddressSanitizer_8cpp.html#a441bafcb7a483df1b0e9b2fd0ba45f47">kAsanHandleNoReturnName</a> = <span class="stringliteral">&quot;__asan_handle_no_return&quot;</span>;</div><div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#a3a94bb1b3b9ce65041cbdae915e6b985">   82</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> <a class="code" href="AddressSanitizer_8cpp.html#a3a94bb1b3b9ce65041cbdae915e6b985">kAsanMappingOffsetName</a> = <span class="stringliteral">&quot;__asan_mapping_offset&quot;</span>;</div><div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#a37908b24ff226878627640398c57f55f">   83</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> <a class="code" href="AddressSanitizer_8cpp.html#a37908b24ff226878627640398c57f55f">kAsanMappingScaleName</a> = <span class="stringliteral">&quot;__asan_mapping_scale&quot;</span>;</div><div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#acba05c6df950ff8712fa2194a2b83c87">   84</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span>         <a class="code" href="AddressSanitizer_8cpp.html#acba05c6df950ff8712fa2194a2b83c87">kMaxAsanStackMallocSizeClass</a> = 10;</div><div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#a92cc4dbbb6130c7242f545fe182ebb40">   85</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> <a class="code" href="AddressSanitizer_8cpp.html#a92cc4dbbb6130c7242f545fe182ebb40">kAsanStackMallocNameTemplate</a> = <span class="stringliteral">&quot;__asan_stack_malloc_&quot;</span>;</div><div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#ae63207143206fb707233e5742adf9c31">   86</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> <a class="code" href="AddressSanitizer_8cpp.html#ae63207143206fb707233e5742adf9c31">kAsanStackFreeNameTemplate</a> = <span class="stringliteral">&quot;__asan_stack_free_&quot;</span>;</div><div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#a025338961229e66dac880988cbb08c11">   87</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> <a class="code" href="AddressSanitizer_8cpp.html#a025338961229e66dac880988cbb08c11">kAsanGenPrefix</a> = <span class="stringliteral">&quot;__asan_gen_&quot;</span>;</div><div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#a3f0ebfe096ae13d6eb209e6926a806b9">   88</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> <a class="code" href="AddressSanitizer_8cpp.html#a3f0ebfe096ae13d6eb209e6926a806b9">kAsanPoisonStackMemoryName</a> =</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="stringliteral">&quot;__asan_poison_stack_memory&quot;</span>;</div><div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#aa7260620fe7bb37873a41e004aa83726">   90</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> <a class="code" href="AddressSanitizer_8cpp.html#aa7260620fe7bb37873a41e004aa83726">kAsanUnpoisonStackMemoryName</a> =</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="stringliteral">&quot;__asan_unpoison_stack_memory&quot;</span>;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#a77aca6533da37409ae1ec4745c34ac41">   93</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> <a class="code" href="AddressSanitizer_8cpp.html#a77aca6533da37409ae1ec4745c34ac41">kAsanOptionDetectUAR</a> =</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="stringliteral">&quot;__asan_option_detect_stack_use_after_return&quot;</span>;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">// These constants must match the definitions in the run-time library.</span></div><div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#a48045b1226f511a8126d05226b228cb4">   97</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="AddressSanitizer_8cpp.html#a48045b1226f511a8126d05226b228cb4">kAsanStackLeftRedzoneMagic</a> = 0xf1;</div><div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#a201f32ab4ee5073775773e9a8b155682">   98</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="AddressSanitizer_8cpp.html#a201f32ab4ee5073775773e9a8b155682">kAsanStackMidRedzoneMagic</a> = 0xf2;</div><div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#a69c8b5c03bd67de996e90bd9ea78a5f5">   99</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="AddressSanitizer_8cpp.html#a69c8b5c03bd67de996e90bd9ea78a5f5">kAsanStackRightRedzoneMagic</a> = 0xf3;</div><div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#ac1ab123f0a3c19c455803573c9e2b781">  100</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="AddressSanitizer_8cpp.html#ac1ab123f0a3c19c455803573c9e2b781">kAsanStackPartialRedzoneMagic</a> = 0xf4;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#ace5bb212ff3d559872f211e4d801e59e">  102</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="AddressSanitizer_8cpp.html#ace5bb212ff3d559872f211e4d801e59e">kAsanStackAfterReturnMagic</a> = 0xf5;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">// Accesses sizes are powers of two: 1, 2, 4, 8, 16.</span></div><div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#aa62a4d0672bab180dd339cda25b23b2e">  106</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code" href="AddressSanitizer_8cpp.html#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a> = 5;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">// Command-line flags.</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">// This flag may need to be replaced with -f[no-]asan-reads.</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="AddressSanitizer_8cpp.html#a7ff017fb65f555b86d4ce8abf4d3064f">ClInstrumentReads</a>(<span class="stringliteral">&quot;asan-instrument-reads&quot;</span>,</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;instrument read instructions&quot;</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>));</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="AddressSanitizer_8cpp.html#a98b12dfb954ebb1f4d821bb271ad1c86">ClInstrumentWrites</a>(<span class="stringliteral">&quot;asan-instrument-writes&quot;</span>,</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;instrument write instructions&quot;</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>));</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="AddressSanitizer_8cpp.html#a87b62bad15ffbb9e3fb5695fe9d7be92">ClInstrumentAtomics</a>(<span class="stringliteral">&quot;asan-instrument-atomics&quot;</span>,</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;instrument atomic instructions (rmw, cmpxchg)&quot;</span>),</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;       <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>));</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="AddressSanitizer_8cpp.html#a90c082e4868da30101e19bdc81a3dc53">ClAlwaysSlowPath</a>(<span class="stringliteral">&quot;asan-always-slow-path&quot;</span>,</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;use instrumentation with slow path for all accesses&quot;</span>),</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;       <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>));</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">// This flag limits the number of instructions to be instrumented</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">// in any given BB. Normally, this should be set to unlimited (INT_MAX),</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">// but due to http://llvm.org/bugs/show_bug.cgi?id=12652 we temporary</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">// set it to 10000.</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;int&gt;</a> <a class="code" href="AddressSanitizer_8cpp.html#a9d2fdf8375969a8c342b024382dee8b4">ClMaxInsnsToInstrumentPerBB</a>(<span class="stringliteral">&quot;asan-max-ins-per-bb&quot;</span>,</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;       <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(10000),</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;maximal number of instructions to instrument in any given BB&quot;</span>),</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;       <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">// This flag may need to be replaced with -f[no]asan-stack.</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="AddressSanitizer_8cpp.html#a05c5520b353e5b124e7eaf774da4b6ab">ClStack</a>(<span class="stringliteral">&quot;asan-stack&quot;</span>,</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Handle stack memory&quot;</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>));</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">// This flag may need to be replaced with -f[no]asan-use-after-return.</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="AddressSanitizer_8cpp.html#a3a1a03174d7fa51941e63a7d514b9d68">ClUseAfterReturn</a>(<span class="stringliteral">&quot;asan-use-after-return&quot;</span>,</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Check return-after-free&quot;</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>));</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">// This flag may need to be replaced with -f[no]asan-globals.</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="AddressSanitizer_8cpp.html#a42964b6908fea91b80e82487fb16abb2">ClGlobals</a>(<span class="stringliteral">&quot;asan-globals&quot;</span>,</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Handle global objects&quot;</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>));</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="AddressSanitizer_8cpp.html#ad7eeb9845bf0b03695f0d64b38efb765">ClCoverage</a>(<span class="stringliteral">&quot;asan-coverage&quot;</span>,</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;ASan coverage&quot;</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>));</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="AddressSanitizer_8cpp.html#a07c1170f353c34f04ea892380cbbfb57">ClInitializers</a>(<span class="stringliteral">&quot;asan-initialization-order&quot;</span>,</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Handle C++ initializer order&quot;</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>));</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="AddressSanitizer_8cpp.html#a2d546ada4799ea2a23a90fef972d28f6">ClMemIntrin</a>(<span class="stringliteral">&quot;asan-memintrin&quot;</span>,</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Handle memset/memcpy/memmove&quot;</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>));</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="AddressSanitizer_8cpp.html#a6a70f1107a2cded627cb3e60cb6c3d27">ClRealignStack</a>(<span class="stringliteral">&quot;asan-realign-stack&quot;</span>,</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Realign stack to 32&quot;</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>));</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;std::string&gt;</a> <a class="code" href="AddressSanitizer_8cpp.html#ace59d658e1430f71c55b5bfd28f199a0">ClBlacklistFile</a>(<span class="stringliteral">&quot;asan-blacklist&quot;</span>,</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;File containing the list of objects to ignore &quot;</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                <span class="stringliteral">&quot;during instrumentation&quot;</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">// This is an experimental feature that will allow to choose between</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">// instrumented and non-instrumented code at link-time.</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">// If this option is on, just before instrumenting a function we create its</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">// clone; if the function is not changed by asan the clone is deleted.</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">// If we end up with a clone, we put the instrumented function into a section</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">// called &quot;ASAN&quot; and the uninstrumented function into a section called &quot;NOASAN&quot;.</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">// This is still a prototype, we need to figure out a way to keep two copies of</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">// a function so that the linker can easily choose one of them.</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="AddressSanitizer_8cpp.html#a5c87784936d87f3868b122243e492e85">ClKeepUninstrumented</a>(<span class="stringliteral">&quot;asan-keep-uninstrumented-functions&quot;</span>,</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Keep uninstrumented copies of functions&quot;</span>),</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;       <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>));</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">// These flags allow to change the shadow mapping.</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">// The shadow mapping looks like</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">//    Shadow = (Mem &gt;&gt; scale) + (1 &lt;&lt; offset_log)</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;int&gt;</a> <a class="code" href="AddressSanitizer_8cpp.html#a732b1b5adccd769c599ba61345563151">ClMappingScale</a>(<span class="stringliteral">&quot;asan-mapping-scale&quot;</span>,</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;scale of asan shadow mapping&quot;</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(0));</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;int&gt;</a> <a class="code" href="AddressSanitizer_8cpp.html#a3b9972fcad3b5043b0fd37f6962383cf">ClMappingOffsetLog</a>(<span class="stringliteral">&quot;asan-mapping-offset-log&quot;</span>,</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;offset of asan shadow mapping&quot;</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(-1));</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="AddressSanitizer_8cpp.html#a58bb459c83b8b1f5a550fb7b842eef1f">ClShort64BitOffset</a>(<span class="stringliteral">&quot;asan-short-64bit-mapping-offset&quot;</span>,</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Use short immediate constant as the mapping offset for 64bit&quot;</span>),</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;       <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>));</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">// Optimization flags. Not user visible, used mostly for testing</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">// and benchmarking the tool.</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="AddressSanitizer_8cpp.html#a4902546e69d51d19005bb4f6315208fc">ClOpt</a>(<span class="stringliteral">&quot;asan-opt&quot;</span>,</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Optimize instrumentation&quot;</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>));</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="AddressSanitizer_8cpp.html#a1cd06c08b4fd63c8163344eb8b67c626">ClOptSameTemp</a>(<span class="stringliteral">&quot;asan-opt-same-temp&quot;</span>,</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Instrument the same temp just once&quot;</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;       <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>));</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="AddressSanitizer_8cpp.html#ae0fddb0c6c5dfa98b334b2253d0adb40">ClOptGlobals</a>(<span class="stringliteral">&quot;asan-opt-globals&quot;</span>,</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Don&#39;t instrument scalar globals&quot;</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>));</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="AddressSanitizer_8cpp.html#a859eea41dc83945e52f9ee32764914dc">ClCheckLifetime</a>(<span class="stringliteral">&quot;asan-check-lifetime&quot;</span>,</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Use llvm.lifetime intrinsics to insert extra checks&quot;</span>),</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;       <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>));</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">// Debug flags.</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;int&gt;</a> <a class="code" href="AddressSanitizer_8cpp.html#a6d00c1e4742800f8e8fdf5b20d489c93">ClDebug</a>(<span class="stringliteral">&quot;asan-debug&quot;</span>, <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;debug&quot;</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                            <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(0));</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;int&gt;</a> <a class="code" href="AddressSanitizer_8cpp.html#a5729f05800cac1ebb84e763c869e4b58">ClDebugStack</a>(<span class="stringliteral">&quot;asan-debug-stack&quot;</span>, <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;debug stack&quot;</span>),</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                                 <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(0));</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;std::string&gt;</a> <a class="code" href="AddressSanitizer_8cpp.html#aefc157b6e0936045b6ae74e4e044e431">ClDebugFunc</a>(<span class="stringliteral">&quot;asan-debug-func&quot;</span>,</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                                        <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Debug func&quot;</span>));</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;int&gt;</a> <a class="code" href="AddressSanitizer_8cpp.html#a86591af75f86d9ba2c854a7ca6480e4b">ClDebugMin</a>(<span class="stringliteral">&quot;asan-debug-min&quot;</span>, <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Debug min inst&quot;</span>),</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                               <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(-1));</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;int&gt;</a> <a class="code" href="AddressSanitizer_8cpp.html#a4227b72fcf29d2557178e78f61051701">ClDebugMax</a>(<span class="stringliteral">&quot;asan-debug-max&quot;</span>, <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Debug man inst&quot;</span>),</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                               <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(-1));</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<a class="code" href="AddressSanitizer_8cpp.html#a0a2dafc8a99b0b69c364d81bea56f1fd">STATISTIC</a>(NumInstrumentedReads, <span class="stringliteral">&quot;Number of instrumented reads&quot;</span>);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<a class="code" href="AddressSanitizer_8cpp.html#a0a2dafc8a99b0b69c364d81bea56f1fd">STATISTIC</a>(NumInstrumentedWrites, <span class="stringliteral">&quot;Number of instrumented writes&quot;</span>);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<a class="code" href="AddressSanitizer_8cpp.html#a0a2dafc8a99b0b69c364d81bea56f1fd">STATISTIC</a>(NumOptimizedAccessesToGlobalArray,</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;          <span class="stringliteral">&quot;Number of optimized accesses to global arrays&quot;</span>);</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<a class="code" href="AddressSanitizer_8cpp.html#a0a2dafc8a99b0b69c364d81bea56f1fd">STATISTIC</a>(NumOptimizedAccessesToGlobalVar,</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;          <span class="stringliteral">&quot;Number of optimized accesses to global vars&quot;</span>);</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="keyword">namespace </span>{<span class="comment"></span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">/// A set of dynamically initialized globals extracted from metadata.</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment"></span><span class="keyword">class </span>SetOfDynamicallyInitializedGlobals {</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1Init.html">Init</a>(<a class="code" href="classllvm_1_1Module.html">Module</a>&amp; <a class="code" href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>) {</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="comment">// Clang generates metadata identifying all dynamically initialized globals.</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <a class="code" href="classllvm_1_1NamedMDNode.html">NamedMDNode</a> *DynamicGlobals =</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        M.<a class="code" href="classllvm_1_1Module.html#a308196ba2f1c34b6bbcb6abe263f4004">getNamedMetadata</a>(<span class="stringliteral">&quot;llvm.asan.dynamically_initialized_globals&quot;</span>);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">if</span> (!DynamicGlobals)</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a> = DynamicGlobals-&gt;<a class="code" href="classllvm_1_1NamedMDNode.html#a24a3512f374b3f29b573a223dfd13f2a">getNumOperands</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *MDN = DynamicGlobals-&gt;<a class="code" href="classllvm_1_1NamedMDNode.html#acf77b1de56fc46b8a5118ff95fae1403">getOperand</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      assert(MDN-&gt;<a class="code" href="classllvm_1_1MDNode.html#ade17b50e4f0b835cd9eb58dffe12a90d">getNumOperands</a>() == 1);</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *VG = MDN-&gt;<a class="code" href="classllvm_1_1MDNode.html#adb91929f939ff02dbee552d32afaf4e6">getOperand</a>(0);</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      <span class="comment">// The optimizer may optimize away a global entirely, in which case we</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <span class="comment">// cannot instrument access to it.</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;      <span class="keywordflow">if</span> (!VG)</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      DynInitGlobals.insert(cast&lt;GlobalVariable&gt;(VG));</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    }</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  }</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="keywordtype">bool</span> Contains(<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *<a class="code" href="MD5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>) { <span class="keywordflow">return</span> DynInitGlobals.count(G) != 0; }</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; <span class="keyword">private</span>:</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <a class="code" href="classllvm_1_1SmallSet.html">SmallSet&lt;GlobalValue*, 32&gt;</a> DynInitGlobals;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;};</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">/// This struct defines the shadow mapping using the rule:</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">///   shadow = (mem &gt;&gt; Scale) ADD-or-OR Offset.</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment"></span><span class="keyword">struct </span>ShadowMapping {</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <span class="keywordtype">int</span> Scale;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  uint64_t Offset;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <span class="keywordtype">bool</span> OrShadowOffset;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;};</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="keyword">static</span> ShadowMapping getShadowMapping(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <span class="keywordtype">int</span> LongSize,</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                                      <span class="keywordtype">bool</span> ZeroBaseShadow) {</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <a class="code" href="classllvm_1_1Triple.html">llvm::Triple</a> TargetTriple(M.<a class="code" href="classllvm_1_1Module.html#a40da6cb8652ba35211cdc58b07399754">getTargetTriple</a>());</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="keywordtype">bool</span> IsAndroid = TargetTriple.<a class="code" href="classllvm_1_1Triple.html#a9804d5fdcc6cec173c42a090d89165d5">getEnvironment</a>() == <a class="code" href="classllvm_1_1Triple.html#a1778f5c464f88710033f7e11e84a9324a0ceb06180ab5fc86e9ad27563b538439">llvm::Triple::Android</a>;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <span class="keywordtype">bool</span> IsMacOSX = TargetTriple.getOS() == <a class="code" href="classllvm_1_1Triple.html#a3cfefc755ab656000934f91193afb1cda690ddf3bb28281cc7afa9c7de4ff4075">llvm::Triple::MacOSX</a>;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="keywordtype">bool</span> IsPPC64 = TargetTriple.getArch() == <a class="code" href="classllvm_1_1Triple.html#a547abd13f7a3c063aa72c8192a868154aab15cb6de66f724829436a3466411993">llvm::Triple::ppc64</a> ||</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                 TargetTriple.getArch() == <a class="code" href="classllvm_1_1Triple.html#a547abd13f7a3c063aa72c8192a868154a4c6fec6469969e44d4af328ef7782c46">llvm::Triple::ppc64le</a>;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="keywordtype">bool</span> IsX86_64 = TargetTriple.getArch() == <a class="code" href="classllvm_1_1Triple.html#a547abd13f7a3c063aa72c8192a868154a13d8ce5e71051718a537277c6a594062">llvm::Triple::x86_64</a>;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="keywordtype">bool</span> IsMIPS32 = TargetTriple.getArch() == <a class="code" href="classllvm_1_1Triple.html#a547abd13f7a3c063aa72c8192a868154a867c596b0454c5bbeeb1ff490b9d70bc">llvm::Triple::mips</a> ||</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                  TargetTriple.getArch() == <a class="code" href="classllvm_1_1Triple.html#a547abd13f7a3c063aa72c8192a868154a5fb4823bc5bbdad4684399b118ccace8">llvm::Triple::mipsel</a>;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  ShadowMapping Mapping;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="comment">// OR-ing shadow offset if more efficient (at least on x86),</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="comment">// but on ppc64 we have to use add since the shadow offset is not neccesary</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <span class="comment">// 1/8-th of the address space.</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  Mapping.OrShadowOffset = !IsPPC64 &amp;&amp; !<a class="code" href="AddressSanitizer_8cpp.html#a58bb459c83b8b1f5a550fb7b842eef1f">ClShort64BitOffset</a>;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  Mapping.Offset = (IsAndroid || ZeroBaseShadow) ? 0 :</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      (LongSize == 32 ?</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;       (IsMIPS32 ? <a class="code" href="AddressSanitizer_8cpp.html#acda94f3cd0782a06ec8c4035ab6a6ba0">kMIPS32_ShadowOffset32</a> : <a class="code" href="AddressSanitizer_8cpp.html#a7221cab4eb5396f920c432650580815d">kDefaultShadowOffset32</a>) :</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;       IsPPC64 ? <a class="code" href="AddressSanitizer_8cpp.html#ac71a9d13684166ebbd2dc2fae6ada036">kPPC64_ShadowOffset64</a> : <a class="code" href="AddressSanitizer_8cpp.html#a52e0a578af8418ff6a63a4b03d385012">kDefaultShadowOffset64</a>);</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="keywordflow">if</span> (!ZeroBaseShadow &amp;&amp; <a class="code" href="AddressSanitizer_8cpp.html#a58bb459c83b8b1f5a550fb7b842eef1f">ClShort64BitOffset</a> &amp;&amp; IsX86_64 &amp;&amp; !IsMacOSX) {</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    assert(LongSize == 64);</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    Mapping.Offset = <a class="code" href="AddressSanitizer_8cpp.html#a4b69748767088f4286f047f9d1601bde">kDefaultShort64bitShadowOffset</a>;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  }</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="keywordflow">if</span> (!ZeroBaseShadow &amp;&amp; <a class="code" href="AddressSanitizer_8cpp.html#a3b9972fcad3b5043b0fd37f6962383cf">ClMappingOffsetLog</a> &gt;= 0) {</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="comment">// Zero offset log is the special case.</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    Mapping.Offset = (<a class="code" href="AddressSanitizer_8cpp.html#a3b9972fcad3b5043b0fd37f6962383cf">ClMappingOffsetLog</a> == 0) ? 0 : 1ULL &lt;&lt; <a class="code" href="AddressSanitizer_8cpp.html#a3b9972fcad3b5043b0fd37f6962383cf">ClMappingOffsetLog</a>;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  }</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  Mapping.Scale = <a class="code" href="AddressSanitizer_8cpp.html#a0825e9eeff024102856e9a30f41bb386">kDefaultShadowScale</a>;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AddressSanitizer_8cpp.html#a732b1b5adccd769c599ba61345563151">ClMappingScale</a>) {</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    Mapping.Scale = <a class="code" href="AddressSanitizer_8cpp.html#a732b1b5adccd769c599ba61345563151">ClMappingScale</a>;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  }</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="keywordflow">return</span> Mapping;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;}</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="keyword">static</span> <span class="keywordtype">size_t</span> RedzoneSizeForScale(<span class="keywordtype">int</span> MappingScale) {</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="comment">// Redzone used for stack and globals is at least 32 bytes.</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="comment">// For scales 6 and 7, the redzone has to be 64 and 128 bytes respectively.</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <span class="keywordflow">return</span> std::max(32U, 1U &lt;&lt; MappingScale);</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;}</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment">/// AddressSanitizer: instrument the code in module to find memory bugs.</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment"></span><span class="keyword">struct </span>AddressSanitizer : <span class="keyword">public</span> <a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a> {</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  AddressSanitizer(<span class="keywordtype">bool</span> CheckInitOrder = <span class="keyword">true</span>,</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                   <span class="keywordtype">bool</span> CheckUseAfterReturn = <span class="keyword">false</span>,</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                   <span class="keywordtype">bool</span> CheckLifetime = <span class="keyword">false</span>,</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                   <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> BlacklistFile = <a class="code" href="classllvm_1_1StringRef.html">StringRef</a>(),</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                   <span class="keywordtype">bool</span> ZeroBaseShadow = <span class="keyword">false</span>)</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      : <a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a>(<a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>),</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        CheckInitOrder(CheckInitOrder || <a class="code" href="AddressSanitizer_8cpp.html#a07c1170f353c34f04ea892380cbbfb57">ClInitializers</a>),</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        CheckUseAfterReturn(CheckUseAfterReturn || <a class="code" href="AddressSanitizer_8cpp.html#a3a1a03174d7fa51941e63a7d514b9d68">ClUseAfterReturn</a>),</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        CheckLifetime(CheckLifetime || <a class="code" href="AddressSanitizer_8cpp.html#a859eea41dc83945e52f9ee32764914dc">ClCheckLifetime</a>),</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        BlacklistFile(BlacklistFile.empty() ? <a class="code" href="AddressSanitizer_8cpp.html#ace59d658e1430f71c55b5bfd28f199a0">ClBlacklistFile</a></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                                            : BlacklistFile),</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        ZeroBaseShadow(ZeroBaseShadow) {}</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *getPassName()<span class="keyword"> const </span>{</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;AddressSanitizerFunctionPass&quot;</span>;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  }</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <span class="keywordtype">void</span> instrumentMop(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <span class="keywordtype">void</span> instrumentAddress(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *OrigIns, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InsertBefore,</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                         <a class="code" href="classllvm_1_1Value.html">Value</a> *Addr, uint32_t TypeSize, <span class="keywordtype">bool</span> IsWrite,</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                         <a class="code" href="classllvm_1_1Value.html">Value</a> *SizeArgument);</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *createSlowPathCmp(<a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;IRB, <a class="code" href="classllvm_1_1Value.html">Value</a> *AddrLong,</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                           <a class="code" href="classllvm_1_1Value.html">Value</a> *ShadowValue, uint32_t TypeSize);</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *generateCrashCode(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InsertBefore, <a class="code" href="classllvm_1_1Value.html">Value</a> *Addr,</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                                 <span class="keywordtype">bool</span> IsWrite, <span class="keywordtype">size_t</span> AccessSizeIndex,</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                                 <a class="code" href="classllvm_1_1Value.html">Value</a> *SizeArgument);</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <span class="keywordtype">bool</span> instrumentMemIntrinsic(<a class="code" href="classllvm_1_1MemIntrinsic.html">MemIntrinsic</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>);</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="keywordtype">void</span> instrumentMemIntrinsicParam(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *OrigIns, <a class="code" href="classllvm_1_1Value.html">Value</a> *Addr,</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                                   <a class="code" href="classllvm_1_1Value.html">Value</a> *Size,</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                                   <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InsertBefore, <span class="keywordtype">bool</span> IsWrite);</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *memToShadow(<a class="code" href="classllvm_1_1Value.html">Value</a> *Shadow, <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;IRB);</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <span class="keywordtype">bool</span> runOnFunction(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>);</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="keywordtype">bool</span> maybeInsertAsanInitAtFunctionEntry(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="keywordtype">void</span> emitShadowMapping(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;IRB) <span class="keyword">const</span>;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">bool</span> doInitialization(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M);</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>;  <span class="comment">// Pass identification, replacement for typeid</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160; <span class="keyword">private</span>:</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <span class="keywordtype">void</span> initializeCallbacks(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M);</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="keywordtype">bool</span> ShouldInstrumentGlobal(<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *<a class="code" href="MD5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>);</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <span class="keywordtype">bool</span> LooksLikeCodeInBug11395(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <span class="keywordtype">void</span> FindDynamicInitializers(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M);</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <span class="keywordtype">bool</span> GlobalIsLinkerInitialized(<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *<a class="code" href="MD5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>);</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  <span class="keywordtype">bool</span> InjectCoverage(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>);</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="keywordtype">bool</span> CheckInitOrder;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <span class="keywordtype">bool</span> CheckUseAfterReturn;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="keywordtype">bool</span> CheckLifetime;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;64&gt;</a> BlacklistFile;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="keywordtype">bool</span> ZeroBaseShadow;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> *TD;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="keywordtype">int</span> LongSize;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *IntptrTy;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  ShadowMapping Mapping;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *AsanCtorFunction;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *AsanInitFunction;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *AsanHandleNoReturnFunc;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *AsanCovFunction;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <a class="code" href="classllvm_1_1OwningPtr.html">OwningPtr&lt;SpecialCaseList&gt;</a> <a class="code" href="namespacellvm_1_1XCoreISD.html#aef28e79e1ebefed9020708b2350b1f10adba71479b3d85460f040da54d76bd319">BL</a>;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <span class="comment">// This array is indexed by AccessIsWrite and log2(AccessSize).</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *AsanErrorCallback[2][<a class="code" href="AddressSanitizer_8cpp.html#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a>];</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <span class="comment">// This array is indexed by AccessIsWrite.</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *AsanErrorCallbackSized[2];</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <a class="code" href="classllvm_1_1InlineAsm.html">InlineAsm</a> *EmptyAsm;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  SetOfDynamicallyInitializedGlobals DynamicallyInitializedGlobals;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <span class="keyword">friend</span> <span class="keyword">struct </span>FunctionStackPoisoner;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;};</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="keyword">class </span>AddressSanitizerModule : <span class="keyword">public</span> <a class="code" href="classllvm_1_1ModulePass.html">ModulePass</a> {</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  AddressSanitizerModule(<span class="keywordtype">bool</span> CheckInitOrder = <span class="keyword">true</span>,</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                         <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> BlacklistFile = <a class="code" href="classllvm_1_1StringRef.html">StringRef</a>(),</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                         <span class="keywordtype">bool</span> ZeroBaseShadow = <span class="keyword">false</span>)</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      : <a class="code" href="classllvm_1_1ModulePass.html">ModulePass</a>(<a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>),</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        CheckInitOrder(CheckInitOrder || <a class="code" href="AddressSanitizer_8cpp.html#a07c1170f353c34f04ea892380cbbfb57">ClInitializers</a>),</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        BlacklistFile(BlacklistFile.empty() ? <a class="code" href="AddressSanitizer_8cpp.html#ace59d658e1430f71c55b5bfd28f199a0">ClBlacklistFile</a></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                                            : BlacklistFile),</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        ZeroBaseShadow(ZeroBaseShadow) {}</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <span class="keywordtype">bool</span> runOnModule(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M);</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a>;  <span class="comment">// Pass identification, replacement for typeid</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *getPassName()<span class="keyword"> const </span>{</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;AddressSanitizerModule&quot;</span>;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  }</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160; <span class="keyword">private</span>:</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <span class="keywordtype">void</span> initializeCallbacks(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M);</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <span class="keywordtype">bool</span> ShouldInstrumentGlobal(<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *<a class="code" href="MD5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>);</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <span class="keywordtype">void</span> createInitializerPoisonCalls(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a> *ModuleName);</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <span class="keywordtype">size_t</span> RedzoneSize()<span class="keyword"> const </span>{</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keywordflow">return</span> RedzoneSizeForScale(Mapping.Scale);</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  }</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <span class="keywordtype">bool</span> CheckInitOrder;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;64&gt;</a> BlacklistFile;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <span class="keywordtype">bool</span> ZeroBaseShadow;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <a class="code" href="classllvm_1_1OwningPtr.html">OwningPtr&lt;SpecialCaseList&gt;</a> <a class="code" href="namespacellvm_1_1XCoreISD.html#aef28e79e1ebefed9020708b2350b1f10adba71479b3d85460f040da54d76bd319">BL</a>;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  SetOfDynamicallyInitializedGlobals DynamicallyInitializedGlobals;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *IntptrTy;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> *TD;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  ShadowMapping Mapping;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *AsanPoisonGlobals;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *AsanUnpoisonGlobals;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *AsanRegisterGlobals;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *AsanUnregisterGlobals;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;};</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment">// Stack poisoning does not play well with exception handling.</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment">// When an exception is thrown, we essentially bypass the code</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment">// that unpoisones the stack. This is why the run-time library has</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment">// to intercept __cxa_throw (as well as longjmp, etc) and unpoison the entire</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="comment">// stack in the interceptor. This however does not work inside the</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment">// actual function which catches the exception. Most likely because the</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment">// compiler hoists the load of the shadow value somewhere too high.</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment">// This causes asan to report a non-existing bug on 453.povray.</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment">// It sounds like an LLVM bug.</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="keyword">struct </span>FunctionStackPoisoner : <span class="keyword">public</span> <a class="code" href="classllvm_1_1InstVisitor.html">InstVisitor</a>&lt;FunctionStackPoisoner&gt; {</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  AddressSanitizer &amp;ASan;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <a class="code" href="classllvm_1_1DIBuilder.html">DIBuilder</a> DIB;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *IntptrTy;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *IntptrPtrTy;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  ShadowMapping Mapping;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;AllocaInst*, 16&gt;</a> AllocaVec;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction*, 8&gt;</a> RetVec;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  uint64_t TotalStackSize;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="keywordtype">unsigned</span> StackAlignment;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *AsanStackMallocFunc[<a class="code" href="AddressSanitizer_8cpp.html#acba05c6df950ff8712fa2194a2b83c87">kMaxAsanStackMallocSizeClass</a> + 1],</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;           *AsanStackFreeFunc[<a class="code" href="AddressSanitizer_8cpp.html#acba05c6df950ff8712fa2194a2b83c87">kMaxAsanStackMallocSizeClass</a> + 1];</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *AsanPoisonStackMemoryFunc, *AsanUnpoisonStackMemoryFunc;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  <span class="comment">// Stores a place and arguments of poisoning/unpoisoning call for alloca.</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <span class="keyword">struct </span>AllocaPoisonCall {</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *InsBefore;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *AI;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    uint64_t Size;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keywordtype">bool</span> DoPoison;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  };</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;AllocaPoisonCall, 8&gt;</a> AllocaPoisonCallVec;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <span class="comment">// Maps Value to an AllocaInst from which the Value is originated.</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <span class="keyword">typedef</span> <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value*, AllocaInst*&gt;</a> AllocaForValueMapTy;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  AllocaForValueMapTy AllocaForValue;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  FunctionStackPoisoner(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;F, AddressSanitizer &amp;ASan)</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      : F(F), ASan(ASan), DIB(*F.<a class="code" href="BasicAliasAnalysis_8cpp.html#a2675de1d8479c7b00387979714da43f7">getParent</a>()), C(ASan.C),</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        IntptrTy(ASan.IntptrTy), IntptrPtrTy(<a class="code" href="classllvm_1_1PointerType.html">PointerType</a>::<a class="code" href="Target_2PowerPC_2README_8txt.html#a1c23e7f459a1051c48b302e7f4ff100e">get</a>(IntptrTy, 0)),</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        Mapping(ASan.Mapping),</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        TotalStackSize(0), StackAlignment(1 &lt;&lt; Mapping.Scale) {}</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <span class="keywordtype">bool</span> runOnFunction() {</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="AddressSanitizer_8cpp.html#a05c5520b353e5b124e7eaf774da4b6ab">ClStack</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="comment">// Collect alloca, ret, lifetime instructions etc.</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1df__iterator.html">df_iterator&lt;BasicBlock*&gt;</a> DI = <a class="code" href="namespacellvm.html#afb9c37d2aea316c81a0b2b63c6b480e7">df_begin</a>(&amp;F.<a class="code" href="classllvm_1_1Function.html#a30f2c362631e3728d2f47a8203071ade">getEntryBlock</a>()),</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;         <a class="code" href="namespacellvm_1_1X86II.html#a97dc14052814702ba0e2b14fb14dd02da2c6497f6ed5314c6fcd9ab88c9528543">DE</a> = <a class="code" href="namespacellvm.html#a849b445fe6bce862c395ea6b97c1f658">df_end</a>(&amp;F.<a class="code" href="classllvm_1_1Function.html#a30f2c362631e3728d2f47a8203071ade">getEntryBlock</a>()); DI != <a class="code" href="namespacellvm_1_1X86II.html#a97dc14052814702ba0e2b14fb14dd02da2c6497f6ed5314c6fcd9ab88c9528543">DE</a>; ++DI) {</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = *DI;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      visit(*BB);</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    }</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="keywordflow">if</span> (AllocaVec.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    initializeCallbacks(*F.<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>());</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    poisonStack();</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AddressSanitizer_8cpp.html#a5729f05800cac1ebb84e763c869e4b58">ClDebugStack</a>) {</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; F);</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    }</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  }</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <span class="comment">// Finds all static Alloca instructions and puts</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  <span class="comment">// poisoned red zones around all of them.</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <span class="comment">// Then unpoison everything back before the function returns.</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  <span class="keywordtype">void</span> poisonStack();</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  <span class="comment">// ----------------------- Visitors.</span><span class="comment"></span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment">  /// \brief Collect all Ret instructions.</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> visitReturnInst(<a class="code" href="classllvm_1_1ReturnInst.html">ReturnInst</a> &amp;RI) {</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    RetVec.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(&amp;RI);</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  }</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment">  /// \brief Collect Alloca instructions we want (and can) handle.</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> visitAllocaInst(<a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> &amp;AI) {</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="keywordflow">if</span> (!isInterestingAlloca(AI)) <span class="keywordflow">return</span>;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    StackAlignment = std::max(StackAlignment, AI.<a class="code" href="classllvm_1_1AllocaInst.html#ad441932c20e5b9ba36c8c72a6c7f5ec3">getAlignment</a>());</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    AllocaVec.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(&amp;AI);</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    uint64_t AlignedSize = getAlignedAllocaSize(&amp;AI);</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    TotalStackSize += AlignedSize;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  }</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment">  /// \brief Collect lifetime intrinsic calls to check for use-after-scope</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment">  /// errors.</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> visitIntrinsicInst(<a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> &amp;II) {</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="keywordflow">if</span> (!ASan.CheckLifetime) <span class="keywordflow">return</span>;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90">Intrinsic::ID</a> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a> = II.<a class="code" href="classllvm_1_1IntrinsicInst.html#a6cbb4809b81f3994ee0c79b38556bd66">getIntrinsicID</a>();</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keywordflow">if</span> (ID != <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ae365354e47542c51f9bd46e329e3323e">Intrinsic::lifetime_start</a> &amp;&amp;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        ID != <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aa332b90dd5e4ebf4bbbcc0964220d373">Intrinsic::lifetime_end</a>)</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="comment">// Found lifetime intrinsic, add ASan instrumentation if necessary.</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *Size = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>&gt;(II.<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(0));</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="comment">// If size argument is undefined, don&#39;t do anything.</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="keywordflow">if</span> (Size-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a48f0b23ee1a5e1774ad2b01d11d0204e">isMinusOne</a>()) <span class="keywordflow">return</span>;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="comment">// Check that size doesn&#39;t saturate uint64_t and can</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="comment">// be stored in IntptrTy.</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keyword">const</span> uint64_t SizeValue = Size-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">getValue</a>().<a class="code" href="classllvm_1_1APInt.html#ae0c5e70885cf005feb6707932774f99c">getLimitedValue</a>();</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="keywordflow">if</span> (SizeValue == ~0ULL ||</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        !<a class="code" href="classllvm_1_1ConstantInt.html#a5b75b94b0d81c2ae458192b4a6544e18">ConstantInt::isValueValidForType</a>(IntptrTy, SizeValue))</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="comment">// Find alloca instruction that corresponds to llvm.lifetime argument.</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *AI = findAllocaForValue(II.<a class="code" href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">getArgOperand</a>(1));</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="keywordflow">if</span> (!AI) <span class="keywordflow">return</span>;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keywordtype">bool</span> DoPoison = (ID == <a class="code" href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aa332b90dd5e4ebf4bbbcc0964220d373">Intrinsic::lifetime_end</a>);</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    AllocaPoisonCall APC = {&amp;II, AI, SizeValue, DoPoison};</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    AllocaPoisonCallVec.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(APC);</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  }</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  <span class="comment">// ---------------------- Helpers.</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <span class="keywordtype">void</span> initializeCallbacks(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M);</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <span class="comment">// Check if we want (and can) handle this alloca.</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <span class="keywordtype">bool</span> isInterestingAlloca(<a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> &amp;AI)<span class="keyword"> const </span>{</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="keywordflow">return</span> (!AI.<a class="code" href="classllvm_1_1AllocaInst.html#a066eba0d0eb9d9655c9b580a2a279b0a">isArrayAllocation</a>() &amp;&amp;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;            AI.<a class="code" href="classllvm_1_1AllocaInst.html#ae1147bebd023c80a6cda73a19b8c1d36">isStaticAlloca</a>() &amp;&amp;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;            AI.<a class="code" href="classllvm_1_1AllocaInst.html#ad441932c20e5b9ba36c8c72a6c7f5ec3">getAlignment</a>() &lt;= RedzoneSize() &amp;&amp;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;            AI.<a class="code" href="classllvm_1_1AllocaInst.html#a214c60dbb4f1ed467e5a3420db6eefd6">getAllocatedType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9dc5111b1a9b1d5c4652d50f74fe850b">isSized</a>());</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  }</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <span class="keywordtype">size_t</span> RedzoneSize()<span class="keyword"> const </span>{</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="keywordflow">return</span> RedzoneSizeForScale(Mapping.Scale);</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  }</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  uint64_t getAllocaSizeInBytes(<a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *AI)<span class="keyword"> const </span>{</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = AI-&gt;<a class="code" href="classllvm_1_1AllocaInst.html#a214c60dbb4f1ed467e5a3420db6eefd6">getAllocatedType</a>();</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    uint64_t SizeInBytes = ASan.TD-&gt;getTypeAllocSize(Ty);</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="keywordflow">return</span> SizeInBytes;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  }</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  uint64_t getAlignedSize(uint64_t SizeInBytes)<span class="keyword"> const </span>{</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fadf6cb3d17aeace3749932c7166e349cc">RZ</a> = RedzoneSize();</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <span class="keywordflow">return</span> ((SizeInBytes + RZ - 1) / RZ) * <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fadf6cb3d17aeace3749932c7166e349cc">RZ</a>;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  }</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  uint64_t getAlignedAllocaSize(<a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *AI)<span class="keyword"> const </span>{</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    uint64_t SizeInBytes = getAllocaSizeInBytes(AI);</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="keywordflow">return</span> getAlignedSize(SizeInBytes);</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  }<span class="comment"></span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment">  /// Finds alloca where the value comes from.</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *findAllocaForValue(<a class="code" href="classllvm_1_1Value.html">Value</a> *V);</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  <span class="keywordtype">void</span> poisonRedZones(<span class="keyword">const</span> <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;AllocaInst*&gt;</a> &amp;AllocaVec, <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;IRB,</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                      <a class="code" href="classllvm_1_1Value.html">Value</a> *ShadowBase, <span class="keywordtype">bool</span> DoPoison);</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <span class="keywordtype">void</span> poisonAlloca(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, uint64_t Size, <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;IRB, <span class="keywordtype">bool</span> DoPoison);</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  <span class="keywordtype">void</span> SetShadowToStackAfterReturnInlined(<a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;IRB, <a class="code" href="classllvm_1_1Value.html">Value</a> *ShadowBase,</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                                          <span class="keywordtype">int</span> Size);</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;};</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;}  <span class="comment">// namespace</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">AddressSanitizer::ID</a> = 0;</div><div class="line"><a name="l00552"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#a654f51b793d270658dc5afd6f73dc57d">  552</a></span>&#160;<a class="code" href="AddressSanitizer_8cpp.html#a654f51b793d270658dc5afd6f73dc57d">INITIALIZE_PASS</a>(AddressSanitizer, <span class="stringliteral">&quot;asan&quot;</span>,</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="stringliteral">&quot;AddressSanitizer: detects use-after-free and out-of-bounds bugs.&quot;</span>,</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="keyword">false</span>, <span class="keyword">false</span>)</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a> *<a class="code" href="namespacellvm.html">llvm</a>::<a class="code" href="namespacellvm.html#a7fac2767ce5926c7b51afb7429a80b2e">createAddressSanitizerFunctionPass</a>(</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="keywordtype">bool</span> CheckInitOrder, <span class="keywordtype">bool</span> CheckUseAfterReturn, <span class="keywordtype">bool</span> CheckLifetime,</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> BlacklistFile, <span class="keywordtype">bool</span> ZeroBaseShadow) {</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> AddressSanitizer(CheckInitOrder, CheckUseAfterReturn,</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                              CheckLifetime, BlacklistFile, ZeroBaseShadow);</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;}</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">AddressSanitizerModule::ID</a> = 0;</div><div class="line"><a name="l00563"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#a45dc8614af1c3635e1b893811d241623">  563</a></span>&#160;<a class="code" href="AddressSanitizer_8cpp.html#a654f51b793d270658dc5afd6f73dc57d">INITIALIZE_PASS</a>(AddressSanitizerModule, <span class="stringliteral">&quot;asan-module&quot;</span>,</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="stringliteral">&quot;AddressSanitizer: detects use-after-free and out-of-bounds bugs.&quot;</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <span class="stringliteral">&quot;ModulePass&quot;</span>, <span class="keyword">false</span>, <span class="keyword">false</span>)</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<a class="code" href="classllvm_1_1ModulePass.html">ModulePass</a> *<a class="code" href="namespacellvm.html">llvm</a>::<a class="code" href="namespacellvm.html#aea2317343b6f41dd1879125ab112114b">createAddressSanitizerModulePass</a>(</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="keywordtype">bool</span> CheckInitOrder, <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> BlacklistFile, <span class="keywordtype">bool</span> ZeroBaseShadow) {</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> AddressSanitizerModule(CheckInitOrder, BlacklistFile,</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                                    ZeroBaseShadow);</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;}</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div><div class="line"><a name="l00572"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#a0cf7e80624365372e769be7d6c04d74b">  572</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">size_t</span> <a class="code" href="AddressSanitizer_8cpp.html#a0cf7e80624365372e769be7d6c04d74b">TypeSizeToSizeIndex</a>(uint32_t TypeSize) {</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <span class="keywordtype">size_t</span> Res = <a class="code" href="namespacellvm.html#abdaf1eaf6120421977095bd97eee892e">countTrailingZeros</a>(TypeSize / 8);</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  assert(Res &lt; <a class="code" href="AddressSanitizer_8cpp.html#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a>);</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  <span class="keywordflow">return</span> Res;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;}</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="comment">// \brief Create a constant for Str so that we can pass it to the run-time lib.</span></div><div class="line"><a name="l00579"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#a60ca3f4c949615b12b2b5ff6dea61956">  579</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *<a class="code" href="AddressSanitizer_8cpp.html#a60ca3f4c949615b12b2b5ff6dea61956">createPrivateGlobalForString</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> Str) {</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *StrConst = <a class="code" href="classllvm_1_1ConstantDataArray.html#a3edef3fa47c611d3d10606591213e57b">ConstantDataArray::getString</a>(M.<a class="code" href="classllvm_1_1Module.html#a0e74af4b7c739f3a14e737c3042b6617">getContext</a>(), Str);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV = <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(M, StrConst-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), <span class="keyword">true</span>,</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                            <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">GlobalValue::InternalLinkage</a>, StrConst,</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                            <a class="code" href="AddressSanitizer_8cpp.html#a025338961229e66dac880988cbb08c11">kAsanGenPrefix</a>);</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  GV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a91ebd7b5d66cc73396c43f4c056050d6">setUnnamedAddr</a>(<span class="keyword">true</span>);  <span class="comment">// Ok to merge these.</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  GV-&gt;setAlignment(1);  <span class="comment">// Strings may not be merged w/o setting align 1.</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  <span class="keywordflow">return</span> GV;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;}</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div><div class="line"><a name="l00589"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#a79c99406a50a00c19a41c6893a3885de">  589</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="AddressSanitizer_8cpp.html#a79c99406a50a00c19a41c6893a3885de">GlobalWasGeneratedByAsan</a>(<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *<a class="code" href="MD5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>) {</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  <span class="keywordflow">return</span> G-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>().<a class="code" href="classllvm_1_1StringRef.html#a421e16456fe6d7b71fb4af736194165c">find</a>(<a class="code" href="AddressSanitizer_8cpp.html#a025338961229e66dac880988cbb08c11">kAsanGenPrefix</a>) == 0;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;}</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *AddressSanitizer::memToShadow(<a class="code" href="classllvm_1_1Value.html">Value</a> *Shadow, <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;IRB) {</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  <span class="comment">// Shadow &gt;&gt; scale</span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  Shadow = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a3f8c45ea10c393433221a508b750dcd5">CreateLShr</a>(Shadow, Mapping.Scale);</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  <span class="keywordflow">if</span> (Mapping.Offset == 0)</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="keywordflow">return</span> Shadow;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <span class="comment">// (Shadow &gt;&gt; scale) | offset</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  <span class="keywordflow">if</span> (Mapping.OrShadowOffset)</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="keywordflow">return</span> IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a8f55dd4237be6778517ddd752ca8b76a">CreateOr</a>(Shadow, <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(IntptrTy, Mapping.Offset));</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keywordflow">return</span> IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a112f87f5844b5d94c07940f3d47f1e99">CreateAdd</a>(Shadow, <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(IntptrTy, Mapping.Offset));</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;}</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="keywordtype">void</span> AddressSanitizer::instrumentMemIntrinsicParam(</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *OrigIns,</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Addr, <a class="code" href="classllvm_1_1Value.html">Value</a> *Size, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InsertBefore, <span class="keywordtype">bool</span> IsWrite) {</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(InsertBefore);</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <span class="keywordflow">if</span> (Size-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() != IntptrTy)</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    Size = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#afdd8a08bfcbd94f60d166a71a3e79ff3">CreateIntCast</a>(Size, IntptrTy, <span class="keyword">false</span>);</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  <span class="comment">// Check the first byte.</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  instrumentAddress(OrigIns, InsertBefore, Addr, 8, IsWrite, Size);</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  <span class="comment">// Check the last byte.</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(InsertBefore);</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *SizeMinusOne = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#afa1cb82e021c7f516f65d40162fe6c53">CreateSub</a>(Size, <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(IntptrTy, 1));</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *AddrLong = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(Addr, IntptrTy);</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *AddrLast = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a112f87f5844b5d94c07940f3d47f1e99">CreateAdd</a>(AddrLong, SizeMinusOne);</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  instrumentAddress(OrigIns, InsertBefore, AddrLast, 8, IsWrite, Size);</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;}</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="comment">// Instrument memset/memmove/memcpy</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<span class="keywordtype">bool</span> AddressSanitizer::instrumentMemIntrinsic(<a class="code" href="classllvm_1_1MemIntrinsic.html">MemIntrinsic</a> *<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>) {</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Dst = MI-&gt;<a class="code" href="classllvm_1_1MemIntrinsic.html#ad8bf46d46e8f14bc23bd30df57cc9a77">getDest</a>();</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <a class="code" href="classllvm_1_1MemTransferInst.html">MemTransferInst</a> *MemTran = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1MemTransferInst.html">MemTransferInst</a>&gt;(<a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>);</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Src = MemTran ? MemTran-&gt;<a class="code" href="classllvm_1_1MemTransferInst.html#a1d23e59237a8e4a61f4af0deb7320104">getSource</a>() : 0;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Length = MI-&gt;<a class="code" href="classllvm_1_1MemIntrinsic.html#abad10f74789466601c7a025540c1c072">getLength</a>();</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *ConstLength = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1Constant.html">Constant</a>&gt;(Length);</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InsertBefore = <a class="code" href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">MI</a>;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <span class="keywordflow">if</span> (ConstLength) {</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="keywordflow">if</span> (ConstLength-&gt;<a class="code" href="classllvm_1_1Constant.html#ad7ec8482f19e8e86e3de573b060a17e5">isNullValue</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="comment">// The size is not a constant so it could be zero -- check at run-time.</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(InsertBefore);</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Cmp = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a609c7b4d7eb90f7c4627da58dc00fa42">CreateICmpNE</a>(Length,</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                                  <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Length-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>()));</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    InsertBefore = <a class="code" href="namespacellvm.html#aec3efa15a67284b231fe0b5e6886af4e">SplitBlockAndInsertIfThen</a>(cast&lt;Instruction&gt;(Cmp), <span class="keyword">false</span>);</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  }</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  instrumentMemIntrinsicParam(MI, Dst, Length, InsertBefore, <span class="keyword">true</span>);</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  <span class="keywordflow">if</span> (Src)</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    instrumentMemIntrinsicParam(MI, Src, Length, InsertBefore, <span class="keyword">false</span>);</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;}</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="comment">// If I is an interesting memory access, return the PointerOperand</span></div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="comment">// and set IsWrite. Otherwise return NULL.</span></div><div class="line"><a name="l00649"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#ac2c43dd0ccb3fe685991b12c7aaf36f8">  649</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="AddressSanitizer_8cpp.html#ac2c43dd0ccb3fe685991b12c7aaf36f8">isInterestingMemoryAccess</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="keywordtype">bool</span> *IsWrite) {</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI = dyn_cast&lt;LoadInst&gt;(I)) {</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="AddressSanitizer_8cpp.html#a7ff017fb65f555b86d4ce8abf4d3064f">ClInstrumentReads</a>) <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    *IsWrite = <span class="keyword">false</span>;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <span class="keywordflow">return</span> LI-&gt;getPointerOperand();</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  }</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *SI = dyn_cast&lt;StoreInst&gt;(I)) {</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="AddressSanitizer_8cpp.html#a98b12dfb954ebb1f4d821bb271ad1c86">ClInstrumentWrites</a>) <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    *IsWrite = <span class="keyword">true</span>;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <span class="keywordflow">return</span> SI-&gt;getPointerOperand();</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  }</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1AtomicRMWInst.html">AtomicRMWInst</a> *RMW = dyn_cast&lt;AtomicRMWInst&gt;(I)) {</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="AddressSanitizer_8cpp.html#a87b62bad15ffbb9e3fb5695fe9d7be92">ClInstrumentAtomics</a>) <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    *IsWrite = <span class="keyword">true</span>;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="keywordflow">return</span> RMW-&gt;getPointerOperand();</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  }</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1AtomicCmpXchgInst.html">AtomicCmpXchgInst</a> *XCHG = dyn_cast&lt;AtomicCmpXchgInst&gt;(I)) {</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="AddressSanitizer_8cpp.html#a87b62bad15ffbb9e3fb5695fe9d7be92">ClInstrumentAtomics</a>) <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    *IsWrite = <span class="keyword">true</span>;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <span class="keywordflow">return</span> XCHG-&gt;getPointerOperand();</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  }</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;}</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<span class="keywordtype">bool</span> AddressSanitizer::GlobalIsLinkerInitialized(<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *<a class="code" href="MD5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>) {</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  <span class="comment">// If a global variable does not have dynamic initialization we don&#39;t</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  <span class="comment">// have to instrument it.  However, if a global does not have initializer</span></div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  <span class="comment">// at all, we assume it has dynamic initializer (in other TU).</span></div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  <span class="keywordflow">return</span> G-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#a0d94a4e78681b58ae3b2dbbd0627a847">hasInitializer</a>() &amp;&amp; !DynamicallyInitializedGlobals.Contains(G);</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;}</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;<span class="keywordtype">void</span> AddressSanitizer::instrumentMop(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  <span class="keywordtype">bool</span> IsWrite = <span class="keyword">false</span>;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Addr = <a class="code" href="AddressSanitizer_8cpp.html#ac2c43dd0ccb3fe685991b12c7aaf36f8">isInterestingMemoryAccess</a>(I, &amp;IsWrite);</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  assert(Addr);</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AddressSanitizer_8cpp.html#a4902546e69d51d19005bb4f6315208fc">ClOpt</a> &amp;&amp; <a class="code" href="AddressSanitizer_8cpp.html#ae0fddb0c6c5dfa98b334b2253d0adb40">ClOptGlobals</a>) {</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *G = dyn_cast&lt;GlobalVariable&gt;(Addr)) {</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;      <span class="comment">// If initialization order checking is disabled, a simple access to a</span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;      <span class="comment">// dynamically initialized global is always valid.</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;      <span class="keywordflow">if</span> (!CheckInitOrder || GlobalIsLinkerInitialized(G)) {</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        NumOptimizedAccessesToGlobalVar++;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;      }</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    }</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <a class="code" href="classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1ConstantExpr.html">ConstantExpr</a>&gt;(Addr);</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="keywordflow">if</span> (CE &amp;&amp; CE-&gt;<a class="code" href="classllvm_1_1ConstantExpr.html#ae739c577bd624ff893c050032e754212">isGEPWithNoNotionalOverIndexing</a>()) {</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *G = dyn_cast&lt;GlobalVariable&gt;(CE-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(0))) {</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        <span class="keywordflow">if</span> (CE-&gt;<a class="code" href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">getOperand</a>(1)-&gt;isNullValue() &amp;&amp; GlobalIsLinkerInitialized(G)) {</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;          NumOptimizedAccessesToGlobalArray++;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;          <span class="keywordflow">return</span>;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        }</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;      }</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    }</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  }</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *OrigPtrTy = Addr-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>();</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *OrigTy = cast&lt;PointerType&gt;(OrigPtrTy)-&gt;getElementType();</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  assert(OrigTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9dc5111b1a9b1d5c4652d50f74fe850b">isSized</a>());</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  uint32_t TypeSize = TD-&gt;getTypeStoreSizeInBits(OrigTy);</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  assert((TypeSize % 8) == 0);</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  <span class="keywordflow">if</span> (IsWrite)</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    NumInstrumentedWrites++;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    NumInstrumentedReads++;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  <span class="comment">// Instrument a 1-, 2-, 4-, 8-, or 16- byte access with one check.</span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  <span class="keywordflow">if</span> (TypeSize == 8  || TypeSize == 16 ||</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;      TypeSize == 32 || TypeSize == 64 || TypeSize == 128)</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <span class="keywordflow">return</span> instrumentAddress(I, I, Addr, TypeSize, IsWrite, 0);</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  <span class="comment">// Instrument unusual size (but still multiple of 8).</span></div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  <span class="comment">// We can not do it with a single check, so we do 1-byte check for the first</span></div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  <span class="comment">// and the last bytes. We call __asan_report_*_n(addr, real_size) to be able</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <span class="comment">// to report the actual access size.</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(I);</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *LastByte =  IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a11d3f8bbc5a14f60879a87175db6695c">CreateIntToPtr</a>(</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a112f87f5844b5d94c07940f3d47f1e99">CreateAdd</a>(IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(Addr, IntptrTy),</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                    <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(IntptrTy, TypeSize / 8 - 1)),</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;      OrigPtrTy);</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Size = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(IntptrTy, TypeSize / 8);</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  instrumentAddress(I, I, Addr, 8, IsWrite, Size);</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  instrumentAddress(I, I, LastByte, 8, IsWrite, Size);</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;}</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;<span class="comment">// Validate the result of Module::getOrInsertFunction called for an interface</span></div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;<span class="comment">// function of AddressSanitizer. If the instrumented module defines a function</span></div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;<span class="comment">// with the same name, their prototypes must match, otherwise</span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="comment">// getOrInsertFunction returns a bitcast.</span></div><div class="line"><a name="l00739"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#a4328cdcfec6258e6e111866ad3e306d2">  739</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="AddressSanitizer_8cpp.html#a4328cdcfec6258e6e111866ad3e306d2">checkInterfaceFunction</a>(<a class="code" href="classllvm_1_1Constant.html">Constant</a> *FuncOrBitcast) {</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  <span class="keywordflow">if</span> (isa&lt;Function&gt;(FuncOrBitcast)) <span class="keywordflow">return</span> cast&lt;Function&gt;(FuncOrBitcast);</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  FuncOrBitcast-&gt;<a class="code" href="classllvm_1_1Value.html#a1933ce346f4cbadcc151cea432c2b316">dump</a>();</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  <a class="code" href="namespacellvm.html#a1f6978055dbb761b380de39070e34bd3">report_fatal_error</a>(<span class="stringliteral">&quot;trying to redefine an AddressSanitizer &quot;</span></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;                     <span class="stringliteral">&quot;interface function&quot;</span>);</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;}</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *AddressSanitizer::generateCrashCode(</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InsertBefore, <a class="code" href="classllvm_1_1Value.html">Value</a> *Addr,</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="keywordtype">bool</span> IsWrite, <span class="keywordtype">size_t</span> AccessSizeIndex, <a class="code" href="classllvm_1_1Value.html">Value</a> *SizeArgument) {</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(InsertBefore);</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;  <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="namespacellvm.html#af6d6a791770bad2303c4399986979e3eae411369b2f0d8f484fec62c3291b1b51">Call</a> = SizeArgument</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    ? IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a902af4d6cb3a421a7f5723d0fc81efd1">CreateCall2</a>(AsanErrorCallbackSized[IsWrite], Addr, SizeArgument)</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    : IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a7e31b0c02df2aeed261b103b790cc01e">CreateCall</a>(AsanErrorCallback[IsWrite][AccessSizeIndex], Addr);</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  <span class="comment">// We don&#39;t do Call-&gt;setDoesNotReturn() because the BB already has</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  <span class="comment">// UnreachableInst at the end.</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  <span class="comment">// This EmptyAsm is required to avoid callback merge.</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a7e31b0c02df2aeed261b103b790cc01e">CreateCall</a>(EmptyAsm);</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#af6d6a791770bad2303c4399986979e3eae411369b2f0d8f484fec62c3291b1b51">Call</a>;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;}</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *AddressSanitizer::createSlowPathCmp(<a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;IRB, <a class="code" href="classllvm_1_1Value.html">Value</a> *AddrLong,</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                                            <a class="code" href="classllvm_1_1Value.html">Value</a> *ShadowValue,</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;                                            uint32_t TypeSize) {</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  <span class="keywordtype">size_t</span> Granularity = 1 &lt;&lt; Mapping.Scale;</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  <span class="comment">// Addr &amp; (Granularity - 1)</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *LastAccessedByte = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a197d5dd77cad4560a082900962a830aa">CreateAnd</a>(</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      AddrLong, <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(IntptrTy, Granularity - 1));</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;  <span class="comment">// (Addr &amp; (Granularity - 1)) + size - 1</span></div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  <span class="keywordflow">if</span> (TypeSize / 8 &gt; 1)</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    LastAccessedByte = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a112f87f5844b5d94c07940f3d47f1e99">CreateAdd</a>(</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        LastAccessedByte, <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(IntptrTy, TypeSize / 8 - 1));</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;  <span class="comment">// (uint8_t) ((Addr &amp; (Granularity-1)) + size - 1)</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  LastAccessedByte = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#afdd8a08bfcbd94f60d166a71a3e79ff3">CreateIntCast</a>(</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      LastAccessedByte, ShadowValue-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>(), <span class="keyword">false</span>);</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;  <span class="comment">// ((uint8_t) ((Addr &amp; (Granularity-1)) + size - 1)) &gt;= ShadowValue</span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  <span class="keywordflow">return</span> IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a110efeea5460fc0d1072ae9a35c180b5">CreateICmpSGE</a>(LastAccessedByte, ShadowValue);</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;}</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;<span class="keywordtype">void</span> AddressSanitizer::instrumentAddress(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *OrigIns,</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                                         <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InsertBefore,</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;                                         <a class="code" href="classllvm_1_1Value.html">Value</a> *Addr, uint32_t TypeSize,</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;                                         <span class="keywordtype">bool</span> IsWrite, <a class="code" href="classllvm_1_1Value.html">Value</a> *SizeArgument) {</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(InsertBefore);</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *AddrLong = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(Addr, IntptrTy);</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *ShadowTy  = <a class="code" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;      *C, std::max(8U, TypeSize &gt;&gt; Mapping.Scale));</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *ShadowPtrTy = <a class="code" href="classllvm_1_1PointerType.html#a050a395d1656e546679d8b144d951bb2">PointerType::get</a>(ShadowTy, 0);</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ShadowPtr = memToShadow(AddrLong, IRB);</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CmpVal = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(ShadowTy);</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ShadowValue = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#af440b535b3b4e8d0d089dd0ed2283a0f">CreateLoad</a>(</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;      IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a11d3f8bbc5a14f60879a87175db6695c">CreateIntToPtr</a>(ShadowPtr, ShadowPtrTy));</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Cmp = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a609c7b4d7eb90f7c4627da58dc00fa42">CreateICmpNE</a>(ShadowValue, CmpVal);</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;  <span class="keywordtype">size_t</span> AccessSizeIndex = <a class="code" href="AddressSanitizer_8cpp.html#a0cf7e80624365372e769be7d6c04d74b">TypeSizeToSizeIndex</a>(TypeSize);</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  <span class="keywordtype">size_t</span> Granularity = 1 &lt;&lt; Mapping.Scale;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  <a class="code" href="classllvm_1_1TerminatorInst.html">TerminatorInst</a> *CrashTerm = 0;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AddressSanitizer_8cpp.html#a90c082e4868da30101e19bdc81a3dc53">ClAlwaysSlowPath</a> || (TypeSize &lt; 8 * Granularity)) {</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <a class="code" href="classllvm_1_1TerminatorInst.html">TerminatorInst</a> *CheckTerm =</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        <a class="code" href="namespacellvm.html#aec3efa15a67284b231fe0b5e6886af4e">SplitBlockAndInsertIfThen</a>(cast&lt;Instruction&gt;(Cmp), <span class="keyword">false</span>);</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    assert(dyn_cast&lt;BranchInst&gt;(CheckTerm)-&gt;isUnconditional());</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NextBB = CheckTerm-&gt;<a class="code" href="classllvm_1_1TerminatorInst.html#a3aac3b6c36415a2b08f65ead9e3e51e7">getSuccessor</a>(0);</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(CheckTerm);</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Cmp2 = createSlowPathCmp(IRB, AddrLong, ShadowValue, TypeSize);</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *CrashBlock =</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        <a class="code" href="classllvm_1_1BasicBlock.html#ae1d53a21892854816885c7288f8b46f1">BasicBlock::Create</a>(*C, <span class="stringliteral">&quot;&quot;</span>, NextBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">getParent</a>(), NextBB);</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    CrashTerm = <span class="keyword">new</span> <a class="code" href="classllvm_1_1UnreachableInst.html">UnreachableInst</a>(*C, CrashBlock);</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *NewTerm = <a class="code" href="classllvm_1_1BranchInst.html#ae9cbc599309fd2da33ec1c61df01ce1f">BranchInst::Create</a>(CrashBlock, NextBB, Cmp2);</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    <a class="code" href="namespacellvm.html#aa6aa39b86007ee97f50248d2fb1b7220">ReplaceInstWithInst</a>(CheckTerm, NewTerm);</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    CrashTerm = <a class="code" href="namespacellvm.html#aec3efa15a67284b231fe0b5e6886af4e">SplitBlockAndInsertIfThen</a>(cast&lt;Instruction&gt;(Cmp), <span class="keyword">true</span>);</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;  }</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Crash = generateCrashCode(</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;      CrashTerm, AddrLong, IsWrite, AccessSizeIndex, SizeArgument);</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  Crash-&gt;<a class="code" href="classllvm_1_1Instruction.html#a7bd545769621a0a9d2cfb074f86f4295">setDebugLoc</a>(OrigIns-&gt;<a class="code" href="classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">getDebugLoc</a>());</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;}</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;<span class="keywordtype">void</span> AddressSanitizerModule::createInitializerPoisonCalls(</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a> *ModuleName) {</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  <span class="comment">// We do all of our poisoning and unpoisoning within _GLOBAL__I_a.</span></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *GlobalInit = M.<a class="code" href="classllvm_1_1Module.html#a3f156c68d0efa530f05698ca15d66593">getFunction</a>(<span class="stringliteral">&quot;_GLOBAL__I_a&quot;</span>);</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  <span class="comment">// If that function is not present, this TU contains no globals, or they have</span></div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  <span class="comment">// all been optimized away</span></div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  <span class="keywordflow">if</span> (!GlobalInit)</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;  <span class="comment">// Set up the arguments to our poison/unpoison functions.</span></div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(GlobalInit-&gt;<a class="code" href="classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">begin</a>()-&gt;getFirstInsertionPt());</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  <span class="comment">// Add a call to poison all external globals before the given function starts.</span></div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ModuleNameAddr = <a class="code" href="classllvm_1_1ConstantExpr.html#a1f469b1f703519ae25ce564c8704310f">ConstantExpr::getPointerCast</a>(ModuleName, IntptrTy);</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;  IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a7e31b0c02df2aeed261b103b790cc01e">CreateCall</a>(AsanPoisonGlobals, ModuleNameAddr);</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  <span class="comment">// Add calls to unpoison all globals before each return instruction.</span></div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">Function::iterator</a> I = GlobalInit-&gt;<a class="code" href="classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">begin</a>(), E = GlobalInit-&gt;<a class="code" href="classllvm_1_1Function.html#ae4ca2261b8b901e415fda7feac5051ea">end</a>();</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;      I != E; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ReturnInst.html">ReturnInst</a> *RI = dyn_cast&lt;ReturnInst&gt;(I-&gt;getTerminator())) {</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      <a class="code" href="classllvm_1_1CallInst.html#a861226dd056dd2438da26760b8e7a9a0">CallInst::Create</a>(AsanUnpoisonGlobals, <span class="stringliteral">&quot;&quot;</span>, RI);</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    }</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  }</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;}</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;<span class="keywordtype">bool</span> AddressSanitizerModule::ShouldInstrumentGlobal(<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *G) {</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = cast&lt;PointerType&gt;(G-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#ad60ec7475b0ffe7fc1f68a8019780643">getType</a>())-&gt;getElementType();</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;GLOBAL: &quot;</span> &lt;&lt; *G &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1XCoreISD.html#aef28e79e1ebefed9020708b2350b1f10adba71479b3d85460f040da54d76bd319">BL</a>-&gt;isIn(*G)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;  <span class="keywordflow">if</span> (!Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a9dc5111b1a9b1d5c4652d50f74fe850b">isSized</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  <span class="keywordflow">if</span> (!G-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#a0d94a4e78681b58ae3b2dbbd0627a847">hasInitializer</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AddressSanitizer_8cpp.html#a79c99406a50a00c19a41c6893a3885de">GlobalWasGeneratedByAsan</a>(G)) <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">// Our own global.</span></div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  <span class="comment">// Touch only those globals that will not be defined in other modules.</span></div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;  <span class="comment">// Don&#39;t handle ODR type linkages since other modules may be built w/o asan.</span></div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;  <span class="keywordflow">if</span> (G-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a38ea691c2eeaf3facd74d5cfb0c725b0">getLinkage</a>() != <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e">GlobalVariable::ExternalLinkage</a> &amp;&amp;</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;      G-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a38ea691c2eeaf3facd74d5cfb0c725b0">getLinkage</a>() != <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca04ed141708c0fd16723d212502b046ae">GlobalVariable::PrivateLinkage</a> &amp;&amp;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;      G-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a38ea691c2eeaf3facd74d5cfb0c725b0">getLinkage</a>() != <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">GlobalVariable::InternalLinkage</a>)</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;  <span class="comment">// Two problems with thread-locals:</span></div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  <span class="comment">//   - The address of the main thread&#39;s copy can&#39;t be computed at link-time.</span></div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  <span class="comment">//   - Need to poison all copies, not just the main thread&#39;s one.</span></div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  <span class="keywordflow">if</span> (G-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#ab475a5d7e2ef20e13658adefb8c1be13">isThreadLocal</a>())</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  <span class="comment">// For now, just ignore this Alloca if the alignment is large.</span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;  <span class="keywordflow">if</span> (G-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a8a69689cb8586761c6a7535a8f6618a5">getAlignment</a>() &gt; RedzoneSize()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  <span class="comment">// Ignore all the globals with the names starting with &quot;\01L_OBJC_&quot;.</span></div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  <span class="comment">// Many of those are put into the .cstring section. The linker compresses</span></div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  <span class="comment">// that section by removing the spare \0s after the string terminator, so</span></div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;  <span class="comment">// our redzones get broken.</span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  <span class="keywordflow">if</span> ((G-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>().<a class="code" href="classllvm_1_1StringRef.html#a421e16456fe6d7b71fb4af736194165c">find</a>(<span class="stringliteral">&quot;\01L_OBJC_&quot;</span>) == 0) ||</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;      (G-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>().<a class="code" href="classllvm_1_1StringRef.html#a421e16456fe6d7b71fb4af736194165c">find</a>(<span class="stringliteral">&quot;\01l_OBJC_&quot;</span>) == 0)) {</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Ignoring \\01L_OBJC_* global: &quot;</span> &lt;&lt; *G);</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;  }</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;  <span class="keywordflow">if</span> (G-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a790641f27e51506ed93c5dfcc6f9b02c">hasSection</a>()) {</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> <a class="code" href="namespacellvm_1_1ARMBuildAttrs.html#a7c1a2fb50eb1779d204a599368df2e3aa69c8a3bdf3f5753779a342f0cd97c090">Section</a>(G-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a1f39ff79c40deb2abcea0592434f9855">getSection</a>());</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    <span class="comment">// Ignore the globals from the __OBJC section. The ObjC runtime assumes</span></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    <span class="comment">// those conform to /usr/lib/objc/runtime.h, so we can&#39;t add redzones to</span></div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    <span class="comment">// them.</span></div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="namespacellvm_1_1ARMBuildAttrs.html#a7c1a2fb50eb1779d204a599368df2e3aa69c8a3bdf3f5753779a342f0cd97c090">Section</a>.find(<span class="stringliteral">&quot;__OBJC,&quot;</span>) == 0) ||</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        (<a class="code" href="namespacellvm_1_1ARMBuildAttrs.html#a7c1a2fb50eb1779d204a599368df2e3aa69c8a3bdf3f5753779a342f0cd97c090">Section</a>.find(<span class="stringliteral">&quot;__DATA, __objc_&quot;</span>) == 0)) {</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Ignoring ObjC runtime global: &quot;</span> &lt;&lt; *G);</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    }</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <span class="comment">// See http://code.google.com/p/address-sanitizer/issues/detail?id=32</span></div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <span class="comment">// Constant CFString instances are compiled in the following way:</span></div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    <span class="comment">//  -- the string buffer is emitted into</span></div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <span class="comment">//     __TEXT,__cstring,cstring_literals</span></div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <span class="comment">//  -- the constant NSConstantString structure referencing that buffer</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <span class="comment">//     is placed into __DATA,__cfstring</span></div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    <span class="comment">// Therefore there&#39;s no point in placing redzones into __DATA,__cfstring.</span></div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <span class="comment">// Moreover, it causes the linker to crash on OS X 10.7</span></div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARMBuildAttrs.html#a7c1a2fb50eb1779d204a599368df2e3aa69c8a3bdf3f5753779a342f0cd97c090">Section</a>.find(<span class="stringliteral">&quot;__DATA,__cfstring&quot;</span>) == 0) {</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Ignoring CFString: &quot;</span> &lt;&lt; *G);</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    }</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  }</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;}</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;<span class="keywordtype">void</span> AddressSanitizerModule::initializeCallbacks(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M) {</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(*C);</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  <span class="comment">// Declare our poisoning and unpoisoning functions.</span></div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;  AsanPoisonGlobals = <a class="code" href="AddressSanitizer_8cpp.html#a4328cdcfec6258e6e111866ad3e306d2">checkInterfaceFunction</a>(M.<a class="code" href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;      <a class="code" href="AddressSanitizer_8cpp.html#a630bdc81ca4a6ab70626ed25d4835d4a">kAsanPoisonGlobalsName</a>, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a518df7907ab8f1d61c6f47381055eb53">getVoidTy</a>(), IntptrTy, NULL));</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;  AsanPoisonGlobals-&gt;setLinkage(<a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e">Function::ExternalLinkage</a>);</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  AsanUnpoisonGlobals = <a class="code" href="AddressSanitizer_8cpp.html#a4328cdcfec6258e6e111866ad3e306d2">checkInterfaceFunction</a>(M.<a class="code" href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;      <a class="code" href="AddressSanitizer_8cpp.html#a0be2945a528adca56b3d238944e6449c">kAsanUnpoisonGlobalsName</a>, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a518df7907ab8f1d61c6f47381055eb53">getVoidTy</a>(), NULL));</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  AsanUnpoisonGlobals-&gt;setLinkage(<a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e">Function::ExternalLinkage</a>);</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  <span class="comment">// Declare functions that register/unregister globals.</span></div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;  AsanRegisterGlobals = <a class="code" href="AddressSanitizer_8cpp.html#a4328cdcfec6258e6e111866ad3e306d2">checkInterfaceFunction</a>(M.<a class="code" href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;      <a class="code" href="AddressSanitizer_8cpp.html#a00196b8da2b6387babb5f8ac980a5386">kAsanRegisterGlobalsName</a>, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a518df7907ab8f1d61c6f47381055eb53">getVoidTy</a>(),</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;      IntptrTy, IntptrTy, NULL));</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;  AsanRegisterGlobals-&gt;setLinkage(<a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e">Function::ExternalLinkage</a>);</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;  AsanUnregisterGlobals = <a class="code" href="AddressSanitizer_8cpp.html#a4328cdcfec6258e6e111866ad3e306d2">checkInterfaceFunction</a>(M.<a class="code" href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;      <a class="code" href="AddressSanitizer_8cpp.html#a4d3051ff284a00a16810bcc43f18819e">kAsanUnregisterGlobalsName</a>,</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;      IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a518df7907ab8f1d61c6f47381055eb53">getVoidTy</a>(), IntptrTy, IntptrTy, NULL));</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;  AsanUnregisterGlobals-&gt;setLinkage(<a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e">Function::ExternalLinkage</a>);</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;}</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;<span class="comment">// This function replaces all global variables with new variables that have</span></div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;<span class="comment">// trailing redzones. It also creates a function that poisons</span></div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;<span class="comment">// redzones and inserts this function into llvm.global_ctors.</span></div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;<span class="keywordtype">bool</span> AddressSanitizerModule::runOnModule(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M) {</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="AddressSanitizer_8cpp.html#a42964b6908fea91b80e82487fb16abb2">ClGlobals</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;  TD = getAnalysisIfAvailable&lt;DataLayout&gt;();</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  <span class="keywordflow">if</span> (!TD)</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  <a class="code" href="namespacellvm_1_1XCoreISD.html#aef28e79e1ebefed9020708b2350b1f10adba71479b3d85460f040da54d76bd319">BL</a>.reset(<a class="code" href="classllvm_1_1SpecialCaseList.html#a764fef55eb958b69088c065dc47e31cc">SpecialCaseList::createOrDie</a>(BlacklistFile));</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1XCoreISD.html#aef28e79e1ebefed9020708b2350b1f10adba71479b3d85460f040da54d76bd319">BL</a>-&gt;isIn(M)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  C = &amp;(M.<a class="code" href="classllvm_1_1Module.html#a0e74af4b7c739f3a14e737c3042b6617">getContext</a>());</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;  <span class="keywordtype">int</span> LongSize = TD-&gt;getPointerSizeInBits();</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  IntptrTy = <a class="code" href="classllvm_1_1Type.html#acaf8e4c3e40e01e848c1fad5f05b81cd">Type::getIntNTy</a>(*C, LongSize);</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  Mapping = getShadowMapping(M, LongSize, ZeroBaseShadow);</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;  initializeCallbacks(M);</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  DynamicallyInitializedGlobals.Init(M);</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;GlobalVariable *, 16&gt;</a> GlobalsToChange;</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">Module::GlobalListType::iterator</a> G = M.<a class="code" href="classllvm_1_1Module.html#a0567b31cf5caa26522fcc2e7cadc1dde">global_begin</a>(),</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;       E = M.<a class="code" href="classllvm_1_1Module.html#a19b72cdd81bd792545e25466b43ac7c2">global_end</a>(); G != E; ++<a class="code" href="MD5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>) {</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    <span class="keywordflow">if</span> (ShouldInstrumentGlobal(G))</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      GlobalsToChange.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(G);</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  }</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  <span class="keywordtype">size_t</span> n = GlobalsToChange.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>();</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;  <span class="keywordflow">if</span> (n == 0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;  <span class="comment">// A global is described by a structure</span></div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;  <span class="comment">//   size_t beg;</span></div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;  <span class="comment">//   size_t size;</span></div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  <span class="comment">//   size_t size_with_redzone;</span></div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;  <span class="comment">//   const char *name;</span></div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;  <span class="comment">//   const char *module_name;</span></div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  <span class="comment">//   size_t has_dynamic_init;</span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  <span class="comment">// We initialize an array of such structures and pass it to a run-time call.</span></div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;  <a class="code" href="classllvm_1_1StructType.html">StructType</a> *GlobalStructTy = <a class="code" href="classllvm_1_1StructType.html#a18fc4545474c6ebb6f7c547f64f4fb31">StructType::get</a>(IntptrTy, IntptrTy,</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;                                               IntptrTy, IntptrTy,</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;                                               IntptrTy, IntptrTy, NULL);</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Constant *, 16&gt;</a> Initializers(n);</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *CtorFunc = M.<a class="code" href="classllvm_1_1Module.html#a3f156c68d0efa530f05698ca15d66593">getFunction</a>(<a class="code" href="AddressSanitizer_8cpp.html#a2e0b5e9ef464733fd25b5bd45fae9f14">kAsanModuleCtorName</a>);</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;  assert(CtorFunc);</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(CtorFunc-&gt;<a class="code" href="classllvm_1_1Function.html#a30f2c362631e3728d2f47a8203071ade">getEntryBlock</a>().<a class="code" href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">getTerminator</a>());</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;  <span class="keywordtype">bool</span> HasDynamicallyInitializedGlobals = <span class="keyword">false</span>;</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;  <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *ModuleName = <a class="code" href="AddressSanitizer_8cpp.html#a60ca3f4c949615b12b2b5ff6dea61956">createPrivateGlobalForString</a>(</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;      M, M.<a class="code" href="classllvm_1_1Module.html#a339f163decf5f2c881937600d1e953fa">getModuleIdentifier</a>());</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  <span class="comment">// We shouldn&#39;t merge same module names, as this string serves as unique</span></div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;  <span class="comment">// module ID in runtime.</span></div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;  ModuleName-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a91ebd7b5d66cc73396c43f4c056050d6">setUnnamedAddr</a>(<span class="keyword">false</span>);</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> uint64_t kMaxGlobalRedzone = 1 &lt;&lt; 18;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *G = GlobalsToChange[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <a class="code" href="classllvm_1_1PointerType.html">PointerType</a> *PtrTy = cast&lt;PointerType&gt;(G-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#ad60ec7475b0ffe7fc1f68a8019780643">getType</a>());</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = PtrTy-&gt;<a class="code" href="classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">getElementType</a>();</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    uint64_t SizeInBytes = TD-&gt;getTypeAllocSize(Ty);</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    uint64_t MinRZ = RedzoneSize();</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    <span class="comment">// MinRZ &lt;= RZ &lt;= kMaxGlobalRedzone</span></div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    <span class="comment">// and trying to make RZ to be ~ 1/4 of SizeInBytes.</span></div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    uint64_t <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fadf6cb3d17aeace3749932c7166e349cc">RZ</a> = std::max(MinRZ,</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;                         std::min(kMaxGlobalRedzone,</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;                                  (SizeInBytes / MinRZ / 4) * MinRZ));</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    uint64_t RightRedzoneSize = <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fadf6cb3d17aeace3749932c7166e349cc">RZ</a>;</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <span class="comment">// Round up to MinRZ</span></div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    <span class="keywordflow">if</span> (SizeInBytes % MinRZ)</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;      RightRedzoneSize += MinRZ - (SizeInBytes % MinRZ);</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    assert(((RightRedzoneSize + SizeInBytes) % MinRZ) == 0);</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *RightRedZoneTy = <a class="code" href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">ArrayType::get</a>(IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7a71da01c646618b7f43d303d563b41b">getInt8Ty</a>(), RightRedzoneSize);</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    <span class="comment">// Determine whether this global should be poisoned in initialization.</span></div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <span class="keywordtype">bool</span> GlobalHasDynamicInitializer =</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;        DynamicallyInitializedGlobals.Contains(G);</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <span class="comment">// Don&#39;t check initialization order if this global is blacklisted.</span></div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    GlobalHasDynamicInitializer &amp;= !<a class="code" href="namespacellvm_1_1XCoreISD.html#aef28e79e1ebefed9020708b2350b1f10adba71479b3d85460f040da54d76bd319">BL</a>-&gt;isIn(*G, <span class="stringliteral">&quot;init&quot;</span>);</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    <a class="code" href="classllvm_1_1StructType.html">StructType</a> *NewTy = <a class="code" href="classllvm_1_1StructType.html#a18fc4545474c6ebb6f7c547f64f4fb31">StructType::get</a>(Ty, RightRedZoneTy, NULL);</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NewInitializer = <a class="code" href="classllvm_1_1ConstantStruct.html#a54fcfa620deb80373f489ba2fdad7643">ConstantStruct::get</a>(</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;        NewTy, G-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#aa4d95acdd770e27036d21edb3cad65e1">getInitializer</a>(),</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;        <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(RightRedZoneTy), NULL);</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *<a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a> = <a class="code" href="AddressSanitizer_8cpp.html#a60ca3f4c949615b12b2b5ff6dea61956">createPrivateGlobalForString</a>(M, G-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>());</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    <span class="comment">// Create a new global variable with enough space for a redzone.</span></div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57c">GlobalValue::LinkageTypes</a> Linkage = G-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a38ea691c2eeaf3facd74d5cfb0c725b0">getLinkage</a>();</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    <span class="keywordflow">if</span> (G-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#a1500a3fe55cf38153aa1e0fbe7284e05">isConstant</a>() &amp;&amp; Linkage == <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca04ed141708c0fd16723d212502b046ae">GlobalValue::PrivateLinkage</a>)</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;      Linkage = <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">GlobalValue::InternalLinkage</a>;</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *NewGlobal = <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;        M, NewTy, G-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#a1500a3fe55cf38153aa1e0fbe7284e05">isConstant</a>(), Linkage,</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;        NewInitializer, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="MD5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a>, G-&gt;getThreadLocalMode());</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    NewGlobal-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#a7b6d31ca2b80c951577a1ce071000c69">copyAttributesFrom</a>(G);</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    NewGlobal-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#ad7523221c38891e563047ab7fc044312">setAlignment</a>(MinRZ);</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Indices2[2];</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    Indices2[0] = IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#ac0e8c554bf1c1e117a74d51df89c137d">getInt32</a>(0);</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    Indices2[1] = IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#ac0e8c554bf1c1e117a74d51df89c137d">getInt32</a>(0);</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    G-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        <a class="code" href="classllvm_1_1ConstantExpr.html#a51940249c228e46f1f97932e5f4b8450">ConstantExpr::getGetElementPtr</a>(NewGlobal, Indices2, <span class="keyword">true</span>));</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    NewGlobal-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(G);</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    G-&gt;eraseFromParent();</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    Initializers[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="classllvm_1_1ConstantStruct.html#a54fcfa620deb80373f489ba2fdad7643">ConstantStruct::get</a>(</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        GlobalStructTy,</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        <a class="code" href="classllvm_1_1ConstantExpr.html#a1f469b1f703519ae25ce564c8704310f">ConstantExpr::getPointerCast</a>(NewGlobal, IntptrTy),</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(IntptrTy, SizeInBytes),</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;        <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(IntptrTy, SizeInBytes + RightRedzoneSize),</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;        <a class="code" href="classllvm_1_1ConstantExpr.html#a1f469b1f703519ae25ce564c8704310f">ConstantExpr::getPointerCast</a>(Name, IntptrTy),</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;        <a class="code" href="classllvm_1_1ConstantExpr.html#a1f469b1f703519ae25ce564c8704310f">ConstantExpr::getPointerCast</a>(ModuleName, IntptrTy),</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(IntptrTy, GlobalHasDynamicInitializer),</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;        NULL);</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <span class="comment">// Populate the first and last globals declared in this TU.</span></div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <span class="keywordflow">if</span> (CheckInitOrder &amp;&amp; GlobalHasDynamicInitializer)</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;      HasDynamicallyInitializedGlobals = <span class="keyword">true</span>;</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;NEW GLOBAL: &quot;</span> &lt;&lt; *NewGlobal &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;  }</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;  <a class="code" href="classllvm_1_1ArrayType.html">ArrayType</a> *ArrayOfGlobalStructTy = <a class="code" href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">ArrayType::get</a>(GlobalStructTy, n);</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;  <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *AllGlobals = <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;      M, ArrayOfGlobalStructTy, <span class="keyword">false</span>, <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">GlobalVariable::InternalLinkage</a>,</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;      <a class="code" href="classllvm_1_1ConstantArray.html#a0900dacdc7ad8e3ea0cc92993c7fd422">ConstantArray::get</a>(ArrayOfGlobalStructTy, Initializers), <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;  <span class="comment">// Create calls for poisoning before initializers run and unpoisoning after.</span></div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;  <span class="keywordflow">if</span> (CheckInitOrder &amp;&amp; HasDynamicallyInitializedGlobals)</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    createInitializerPoisonCalls(M, ModuleName);</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;  IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a902af4d6cb3a421a7f5723d0fc81efd1">CreateCall2</a>(AsanRegisterGlobals,</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;                  IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(AllGlobals, IntptrTy),</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;                  <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(IntptrTy, n));</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;  <span class="comment">// We also need to unregister globals at the end, e.g. when a shared library</span></div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;  <span class="comment">// gets closed.</span></div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *AsanDtorFunction = <a class="code" href="classllvm_1_1Function.html#a162a63c89ac118c8ffef75b3a892efa0">Function::Create</a>(</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;      <a class="code" href="classllvm_1_1FunctionType.html#a7e89b55242c964ae61b7850e99cacef0">FunctionType::get</a>(<a class="code" href="classllvm_1_1Type.html#a6e20e76960d952de088354cbcd14c3ab">Type::getVoidTy</a>(*C), <span class="keyword">false</span>),</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;      <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">GlobalValue::InternalLinkage</a>, <a class="code" href="AddressSanitizer_8cpp.html#a6c44b22bca0251b66d6e28e83b64d0ad">kAsanModuleDtorName</a>, &amp;M);</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *AsanDtorBB = <a class="code" href="classllvm_1_1BasicBlock.html#ae1d53a21892854816885c7288f8b46f1">BasicBlock::Create</a>(*C, <span class="stringliteral">&quot;&quot;</span>, AsanDtorFunction);</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB_Dtor(<a class="code" href="classllvm_1_1ReturnInst.html#ace9225fc27f77c5078f56027ed5421a6">ReturnInst::Create</a>(*C, AsanDtorBB));</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;  IRB_Dtor.<a class="code" href="classllvm_1_1IRBuilder.html#a902af4d6cb3a421a7f5723d0fc81efd1">CreateCall2</a>(AsanUnregisterGlobals,</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;                       IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(AllGlobals, IntptrTy),</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;                       <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(IntptrTy, n));</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;  <a class="code" href="namespacellvm.html#a539b80bb605afb4ecdabd7b72eef7a06">appendToGlobalDtors</a>(M, AsanDtorFunction, <a class="code" href="AddressSanitizer_8cpp.html#ad7689e8106d7eb5c7844454ddf90c977">kAsanCtorAndCtorPriority</a>);</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; M);</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;}</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;<span class="keywordtype">void</span> AddressSanitizer::initializeCallbacks(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M) {</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(*C);</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;  <span class="comment">// Create __asan_report* callbacks.</span></div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> AccessIsWrite = 0; AccessIsWrite &lt;= 1; AccessIsWrite++) {</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> AccessSizeIndex = 0; AccessSizeIndex &lt; <a class="code" href="AddressSanitizer_8cpp.html#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a>;</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;         AccessSizeIndex++) {</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;      <span class="comment">// IsWrite and TypeSize are encoded in the function name.</span></div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;      std::string FunctionName = std::string(<a class="code" href="AddressSanitizer_8cpp.html#ae9c436463aca1fb27209dfaa6f643727">kAsanReportErrorTemplate</a>) +</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;          (AccessIsWrite ? <span class="stringliteral">&quot;store&quot;</span> : <span class="stringliteral">&quot;load&quot;</span>) + <a class="code" href="namespacellvm.html#a36e9868826fbe487571befb79d9030c5">itostr</a>(1 &lt;&lt; AccessSizeIndex);</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;      <span class="comment">// If we are merging crash callbacks, they have two parameters.</span></div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;      AsanErrorCallback[AccessIsWrite][AccessSizeIndex] =</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;          <a class="code" href="AddressSanitizer_8cpp.html#a4328cdcfec6258e6e111866ad3e306d2">checkInterfaceFunction</a>(M.<a class="code" href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;              FunctionName, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a518df7907ab8f1d61c6f47381055eb53">getVoidTy</a>(), IntptrTy, NULL));</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    }</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;  }</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;  AsanErrorCallbackSized[0] = <a class="code" href="AddressSanitizer_8cpp.html#a4328cdcfec6258e6e111866ad3e306d2">checkInterfaceFunction</a>(M.<a class="code" href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;              <a class="code" href="AddressSanitizer_8cpp.html#a3516339929af46c9fd200b6f28189dfe">kAsanReportLoadN</a>, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a518df7907ab8f1d61c6f47381055eb53">getVoidTy</a>(), IntptrTy, IntptrTy, NULL));</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;  AsanErrorCallbackSized[1] = <a class="code" href="AddressSanitizer_8cpp.html#a4328cdcfec6258e6e111866ad3e306d2">checkInterfaceFunction</a>(M.<a class="code" href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;              <a class="code" href="AddressSanitizer_8cpp.html#a60a1aea771a1724c137bbb657fc472d7">kAsanReportStoreN</a>, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a518df7907ab8f1d61c6f47381055eb53">getVoidTy</a>(), IntptrTy, IntptrTy, NULL));</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;  AsanHandleNoReturnFunc = <a class="code" href="AddressSanitizer_8cpp.html#a4328cdcfec6258e6e111866ad3e306d2">checkInterfaceFunction</a>(M.<a class="code" href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;      <a class="code" href="AddressSanitizer_8cpp.html#a441bafcb7a483df1b0e9b2fd0ba45f47">kAsanHandleNoReturnName</a>, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a518df7907ab8f1d61c6f47381055eb53">getVoidTy</a>(), NULL));</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;  AsanCovFunction = <a class="code" href="AddressSanitizer_8cpp.html#a4328cdcfec6258e6e111866ad3e306d2">checkInterfaceFunction</a>(M.<a class="code" href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;      <a class="code" href="AddressSanitizer_8cpp.html#a4b572ae0a7ecf76250a6642941e95746">kAsanCovName</a>, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a518df7907ab8f1d61c6f47381055eb53">getVoidTy</a>(), IntptrTy, NULL));</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;  <span class="comment">// We insert an empty inline asm after __asan_report* to avoid callback merge.</span></div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;  EmptyAsm = <a class="code" href="classllvm_1_1InlineAsm.html#aaae042532c03bc95734e689525a6b88b">InlineAsm::get</a>(<a class="code" href="classllvm_1_1FunctionType.html#a7e89b55242c964ae61b7850e99cacef0">FunctionType::get</a>(IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a518df7907ab8f1d61c6f47381055eb53">getVoidTy</a>(), <span class="keyword">false</span>),</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;                            <a class="code" href="classllvm_1_1StringRef.html">StringRef</a>(<span class="stringliteral">&quot;&quot;</span>), <a class="code" href="classllvm_1_1StringRef.html">StringRef</a>(<span class="stringliteral">&quot;&quot;</span>),</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;                            <span class="comment">/*hasSideEffects=*/</span><span class="keyword">true</span>);</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;}</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;<span class="keywordtype">void</span> AddressSanitizer::emitShadowMapping(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;IRB)<span class="keyword"> const </span>{</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;  <span class="comment">// Tell the values of mapping offset and scale to the run-time.</span></div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;  <a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a> *asan_mapping_offset =</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;      <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(M, IntptrTy, <span class="keyword">true</span>, <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57caf2b592edf18170e7aff4e8f3bae3360c">GlobalValue::LinkOnceODRLinkage</a>,</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;                     <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(IntptrTy, Mapping.Offset),</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;                     <a class="code" href="AddressSanitizer_8cpp.html#a3a94bb1b3b9ce65041cbdae915e6b985">kAsanMappingOffsetName</a>);</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;  <span class="comment">// Read the global, otherwise it may be optimized away.</span></div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;  IRB.<a class="code" href="classllvm_1_1IRBuilder.html#af440b535b3b4e8d0d089dd0ed2283a0f">CreateLoad</a>(asan_mapping_offset, <span class="keyword">true</span>);</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  <a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a> *asan_mapping_scale =</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;      <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(M, IntptrTy, <span class="keyword">true</span>, <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57caf2b592edf18170e7aff4e8f3bae3360c">GlobalValue::LinkOnceODRLinkage</a>,</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;                         <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(IntptrTy, Mapping.Scale),</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;                         <a class="code" href="AddressSanitizer_8cpp.html#a37908b24ff226878627640398c57f55f">kAsanMappingScaleName</a>);</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;  <span class="comment">// Read the global, otherwise it may be optimized away.</span></div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;  IRB.<a class="code" href="classllvm_1_1IRBuilder.html#af440b535b3b4e8d0d089dd0ed2283a0f">CreateLoad</a>(asan_mapping_scale, <span class="keyword">true</span>);</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;}</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;<span class="comment">// virtual</span></div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;<span class="keywordtype">bool</span> AddressSanitizer::doInitialization(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M) {</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  <span class="comment">// Initialize the private fields. No one has accessed them before.</span></div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;  TD = getAnalysisIfAvailable&lt;DataLayout&gt;();</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;  <span class="keywordflow">if</span> (!TD)</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  <a class="code" href="namespacellvm_1_1XCoreISD.html#aef28e79e1ebefed9020708b2350b1f10adba71479b3d85460f040da54d76bd319">BL</a>.reset(<a class="code" href="classllvm_1_1SpecialCaseList.html#a764fef55eb958b69088c065dc47e31cc">SpecialCaseList::createOrDie</a>(BlacklistFile));</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;  DynamicallyInitializedGlobals.Init(M);</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;  C = &amp;(M.<a class="code" href="classllvm_1_1Module.html#a0e74af4b7c739f3a14e737c3042b6617">getContext</a>());</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;  LongSize = TD-&gt;getPointerSizeInBits();</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;  IntptrTy = <a class="code" href="classllvm_1_1Type.html#acaf8e4c3e40e01e848c1fad5f05b81cd">Type::getIntNTy</a>(*C, LongSize);</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;  AsanCtorFunction = <a class="code" href="classllvm_1_1Function.html#a162a63c89ac118c8ffef75b3a892efa0">Function::Create</a>(</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;      <a class="code" href="classllvm_1_1FunctionType.html#a7e89b55242c964ae61b7850e99cacef0">FunctionType::get</a>(<a class="code" href="classllvm_1_1Type.html#a6e20e76960d952de088354cbcd14c3ab">Type::getVoidTy</a>(*C), <span class="keyword">false</span>),</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;      <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">GlobalValue::InternalLinkage</a>, <a class="code" href="AddressSanitizer_8cpp.html#a2e0b5e9ef464733fd25b5bd45fae9f14">kAsanModuleCtorName</a>, &amp;M);</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *AsanCtorBB = <a class="code" href="classllvm_1_1BasicBlock.html#ae1d53a21892854816885c7288f8b46f1">BasicBlock::Create</a>(*C, <span class="stringliteral">&quot;&quot;</span>, AsanCtorFunction);</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;  <span class="comment">// call __asan_init in the module ctor.</span></div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(<a class="code" href="classllvm_1_1ReturnInst.html#ace9225fc27f77c5078f56027ed5421a6">ReturnInst::Create</a>(*C, AsanCtorBB));</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  AsanInitFunction = <a class="code" href="AddressSanitizer_8cpp.html#a4328cdcfec6258e6e111866ad3e306d2">checkInterfaceFunction</a>(</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;      M.<a class="code" href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(<a class="code" href="AddressSanitizer_8cpp.html#aec09af489a399a9c32f8f316da451403">kAsanInitName</a>, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a518df7907ab8f1d61c6f47381055eb53">getVoidTy</a>(), NULL));</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  AsanInitFunction-&gt;setLinkage(<a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e">Function::ExternalLinkage</a>);</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;  IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a7e31b0c02df2aeed261b103b790cc01e">CreateCall</a>(AsanInitFunction);</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;  Mapping = getShadowMapping(M, LongSize, ZeroBaseShadow);</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;  emitShadowMapping(M, IRB);</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;  <a class="code" href="namespacellvm.html#ae85c8b3bbab3831fdbb0a4eddebddcdf">appendToGlobalCtors</a>(M, AsanCtorFunction, <a class="code" href="AddressSanitizer_8cpp.html#ad7689e8106d7eb5c7844454ddf90c977">kAsanCtorAndCtorPriority</a>);</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;}</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;<span class="keywordtype">bool</span> AddressSanitizer::maybeInsertAsanInitAtFunctionEntry(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;F) {</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;  <span class="comment">// For each NSObject descendant having a +load method, this method is invoked</span></div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;  <span class="comment">// by the ObjC runtime before any of the static constructors is called.</span></div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;  <span class="comment">// Therefore we need to instrument such methods with a call to __asan_init</span></div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  <span class="comment">// at the beginning in order to initialize our runtime before any access to</span></div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;  <span class="comment">// the shadow memory.</span></div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  <span class="comment">// We cannot just ignore these methods, because they may call other</span></div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  <span class="comment">// instrumented functions.</span></div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;  <span class="keywordflow">if</span> (F.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>().<a class="code" href="classllvm_1_1StringRef.html#a421e16456fe6d7b71fb4af736194165c">find</a>(<span class="stringliteral">&quot; load]&quot;</span>) != std::string::npos) {</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(F.<a class="code" href="classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">begin</a>()-&gt;begin());</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a7e31b0c02df2aeed261b103b790cc01e">CreateCall</a>(AsanInitFunction);</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;  }</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;}</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;<span class="comment">// Poor man&#39;s coverage that works with ASan.</span></div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;<span class="comment">// We create a Guard boolean variable with the same linkage</span></div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;<span class="comment">// as the function and inject this code into the entry block:</span></div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;<span class="comment">// if (*Guard) {</span></div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;<span class="comment">//    __sanitizer_cov(&amp;F);</span></div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;<span class="comment">//    *Guard = 1;</span></div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;<span class="comment">// }</span></div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;<span class="comment">// The accesses to Guard are atomic. The rest of the logic is</span></div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;<span class="comment">// in __sanitizer_cov (it&#39;s fine to call it more than once).</span></div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;<span class="comment">// This coverage implementation provides very limited data:</span></div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;<span class="comment">// it only tells if a given function was ever executed.</span></div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;<span class="comment">// No counters, no per-basic-block or per-edge data.</span></div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;<span class="comment">// But for many use cases this is what we need and the added slowdown</span></div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;<span class="comment">// is negligible. This simple implementation will probably be obsoleted</span></div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;<span class="comment">// by the upcoming Clang-based coverage implementation.</span></div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;<span class="comment">// By having it here and now we hope to</span></div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;<span class="comment">//  a) get the functionality to users earlier and</span></div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;<span class="comment">//  b) collect usage statistics to help improve Clang coverage design.</span></div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;<span class="keywordtype">bool</span> AddressSanitizer::InjectCoverage(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;F) {</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="AddressSanitizer_8cpp.html#ad7eeb9845bf0b03695f0d64b38efb765">ClCoverage</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(F.<a class="code" href="classllvm_1_1Function.html#a30f2c362631e3728d2f47a8203071ade">getEntryBlock</a>().<a class="code" href="classllvm_1_1BasicBlock.html#ab1cd5a3713b93a33f89a2086d473cf6e">getFirstInsertionPt</a>());</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Int8Ty = IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7a71da01c646618b7f43d303d563b41b">getInt8Ty</a>();</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *Guard = <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;      *F.<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>(), Int8Ty, <span class="keyword">false</span>, <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca04ed141708c0fd16723d212502b046ae">GlobalValue::PrivateLinkage</a>,</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;      <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Int8Ty), <span class="stringliteral">&quot;__asan_gen_cov_&quot;</span> + F.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>());</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;  <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *<a class="code" href="namespacellvm_1_1SPII.html#a11e9b8fca4a074643a6a21f444e51406a5069619ca8fdce305534f3fe85091a0f">Load</a> = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#af440b535b3b4e8d0d089dd0ed2283a0f">CreateLoad</a>(Guard);</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;  Load-&gt;<a class="code" href="classllvm_1_1LoadInst.html#a06e392f502bff86e8f85092c135d2baf">setAtomic</a>(<a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02a7754cbc42d54bad3979ed1789b780b28">Monotonic</a>);</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;  Load-&gt;setAlignment(1);</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Cmp = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a9a80bae197dc1294e3a0dbfd920b97b0">CreateICmpEQ</a>(<a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Int8Ty), Load);</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1MipsISD.html#a7a7035feda1dc16252a7a15a7e230122ad5006873d15f9569d1cf09deef3c6363">Ins</a> = <a class="code" href="namespacellvm.html#aec3efa15a67284b231fe0b5e6886af4e">SplitBlockAndInsertIfThen</a>(cast&lt;Instruction&gt;(Cmp), <span class="keyword">false</span>);</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;  IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(Ins);</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;  <span class="comment">// We pass &amp;F to __sanitizer_cov. We could avoid this and rely on</span></div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;  <span class="comment">// GET_CALLER_PC, but having the PC of the first instruction is just nice.</span></div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;  IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a7e31b0c02df2aeed261b103b790cc01e">CreateCall</a>(AsanCovFunction, IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(&amp;F, IntptrTy));</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;  <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *<a class="code" href="namespacellvm_1_1SPII.html#a11e9b8fca4a074643a6a21f444e51406a36b3dd3b84fde3f8494a9b18af131856">Store</a> = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a43f7fa52a3fbe01e44c40d9db278ab3e">CreateStore</a>(<a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(Int8Ty, 1), Guard);</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;  Store-&gt;<a class="code" href="classllvm_1_1StoreInst.html#a80f3ce1776ebbb6decad3a1363ca4e8a">setAtomic</a>(<a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02a7754cbc42d54bad3979ed1789b780b28">Monotonic</a>);</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;  Store-&gt;<a class="code" href="classllvm_1_1StoreInst.html#a50d3891cd26db1308e81540f468de8c8">setAlignment</a>(1);</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;}</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;<span class="keywordtype">bool</span> AddressSanitizer::runOnFunction(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;F) {</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1XCoreISD.html#aef28e79e1ebefed9020708b2350b1f10adba71479b3d85460f040da54d76bd319">BL</a>-&gt;isIn(F)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;  <span class="keywordflow">if</span> (&amp;F == AsanCtorFunction) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;  <span class="keywordflow">if</span> (F.<a class="code" href="classllvm_1_1GlobalValue.html#a38ea691c2eeaf3facd74d5cfb0c725b0">getLinkage</a>() == <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57caa67f293befacbbf974525116ccf2ff42">GlobalValue::AvailableExternallyLinkage</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ASAN instrumenting:\n&quot;</span> &lt;&lt; F &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  initializeCallbacks(*F.<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>());</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;  <span class="comment">// If needed, insert __asan_init before checking for SanitizeAddress attr.</span></div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;  maybeInsertAsanInitAtFunctionEntry(F);</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;  <span class="keywordflow">if</span> (!F.<a class="code" href="classllvm_1_1Function.html#a603f8f8d2c9d8de6762092830cf82b13">hasFnAttribute</a>(<a class="code" href="classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60ea72bdab14ef59ecc35ce5e1212fddc6c2">Attribute::SanitizeAddress</a>))</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="AddressSanitizer_8cpp.html#aefc157b6e0936045b6ae74e4e044e431">ClDebugFunc</a>.empty() &amp;&amp; <a class="code" href="AddressSanitizer_8cpp.html#aefc157b6e0936045b6ae74e4e044e431">ClDebugFunc</a> != F.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>())</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;  <span class="comment">// We want to instrument every address only once per basic block (unless there</span></div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;  <span class="comment">// are calls between uses).</span></div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;  <a class="code" href="classllvm_1_1SmallSet.html">SmallSet&lt;Value*, 16&gt;</a> TempsToInstrument;</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction*, 16&gt;</a> ToInstrument;</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction*, 8&gt;</a> NoReturnCalls;</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;  <span class="keywordtype">int</span> NumAllocas = 0;</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;  <span class="keywordtype">bool</span> IsWrite;</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;  <span class="comment">// Fill the set of memory operations to instrument.</span></div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">Function::iterator</a> FI = F.<a class="code" href="classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">begin</a>(), FE = F.<a class="code" href="classllvm_1_1Function.html#ae4ca2261b8b901e415fda7feac5051ea">end</a>();</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;       FI != FE; ++FI) {</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    TempsToInstrument.<a class="code" href="classllvm_1_1SmallSet.html#a76b3fc7c102561fb5210d5151531e409">clear</a>();</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    <span class="keywordtype">int</span> NumInsnsPerBB = 0;</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> BI = FI-&gt;begin(), BE = FI-&gt;end();</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;         BI != BE; ++BI) {</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;      <span class="keywordflow">if</span> (LooksLikeCodeInBug11395(BI)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Addr = <a class="code" href="AddressSanitizer_8cpp.html#ac2c43dd0ccb3fe685991b12c7aaf36f8">isInterestingMemoryAccess</a>(BI, &amp;IsWrite)) {</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="AddressSanitizer_8cpp.html#a4902546e69d51d19005bb4f6315208fc">ClOpt</a> &amp;&amp; <a class="code" href="AddressSanitizer_8cpp.html#a1cd06c08b4fd63c8163344eb8b67c626">ClOptSameTemp</a>) {</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;          <span class="keywordflow">if</span> (!TempsToInstrument.<a class="code" href="classllvm_1_1SmallSet.html#a8d8348060ccdeeba13fb8bc651dfbf82">insert</a>(Addr))</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;            <span class="keywordflow">continue</span>;  <span class="comment">// We&#39;ve seen this temp in the current BB.</span></div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;        }</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;MemIntrinsic&gt;(BI) &amp;&amp; <a class="code" href="AddressSanitizer_8cpp.html#a2d546ada4799ea2a23a90fef972d28f6">ClMemIntrin</a>) {</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;        <span class="comment">// ok, take it.</span></div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;        <span class="keywordflow">if</span> (isa&lt;AllocaInst&gt;(BI))</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;          NumAllocas++;</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;        <a class="code" href="classllvm_1_1CallSite.html">CallSite</a> CS(BI);</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;        <span class="keywordflow">if</span> (CS) {</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;          <span class="comment">// A call inside BB.</span></div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;          TempsToInstrument.<a class="code" href="classllvm_1_1SmallSet.html#a76b3fc7c102561fb5210d5151531e409">clear</a>();</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;          <span class="keywordflow">if</span> (CS.<a class="code" href="classllvm_1_1CallSiteBase.html#aa05cd15c496fef12c24d5af39a5b24bb">doesNotReturn</a>())</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;            NoReturnCalls.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(CS.<a class="code" href="classllvm_1_1CallSiteBase.html#ae4c67f835911559821939fb23a2e7aff">getInstruction</a>());</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;        }</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;      }</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;      ToInstrument.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a>(BI);</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;      NumInsnsPerBB++;</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;      <span class="keywordflow">if</span> (NumInsnsPerBB &gt;= <a class="code" href="AddressSanitizer_8cpp.html#a9d2fdf8375969a8c342b024382dee8b4">ClMaxInsnsToInstrumentPerBB</a>)</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    }</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;  }</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *UninstrumentedDuplicate = 0;</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;  <span class="keywordtype">bool</span> LikelyToInstrument =</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;      !NoReturnCalls.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>() || !ToInstrument.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>() || (NumAllocas &gt; 0);</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AddressSanitizer_8cpp.html#a5c87784936d87f3868b122243e492e85">ClKeepUninstrumented</a> &amp;&amp; LikelyToInstrument) {</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    <a class="code" href="classllvm_1_1ValueMap.html">ValueToValueMapTy</a> VMap;</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    UninstrumentedDuplicate = <a class="code" href="namespacellvm.html#aabb040f50a7e75ad8d58bfc5d95636a4">CloneFunction</a>(&amp;F, VMap, <span class="keyword">false</span>);</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    UninstrumentedDuplicate-&gt;<a class="code" href="classllvm_1_1Function.html#aca8c71ab03634296b3caa54974afeb3e">removeFnAttr</a>(<a class="code" href="classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60ea72bdab14ef59ecc35ce5e1212fddc6c2">Attribute::SanitizeAddress</a>);</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    UninstrumentedDuplicate-&gt;<a class="code" href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">setName</a>(<span class="stringliteral">&quot;NOASAN_&quot;</span> + F.<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>());</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    F.<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Module.html#a020ed4dc4297b07bdad741f18cf369ae">getFunctionList</a>().<a class="code" href="classllvm_1_1iplist.html#a63c6a928d5abebdf6d8254532cda3bd3">push_back</a>(UninstrumentedDuplicate);</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;  }</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;  <span class="comment">// Instrument.</span></div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;  <span class="keywordtype">int</span> NumInstrumented = 0;</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, n = ToInstrument.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst = ToInstrument[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AddressSanitizer_8cpp.html#a86591af75f86d9ba2c854a7ca6480e4b">ClDebugMin</a> &lt; 0 || <a class="code" href="AddressSanitizer_8cpp.html#a4227b72fcf29d2557178e78f61051701">ClDebugMax</a> &lt; 0 ||</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;        (NumInstrumented &gt;= <a class="code" href="AddressSanitizer_8cpp.html#a86591af75f86d9ba2c854a7ca6480e4b">ClDebugMin</a> &amp;&amp; NumInstrumented &lt;= <a class="code" href="AddressSanitizer_8cpp.html#a4227b72fcf29d2557178e78f61051701">ClDebugMax</a>)) {</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="AddressSanitizer_8cpp.html#ac2c43dd0ccb3fe685991b12c7aaf36f8">isInterestingMemoryAccess</a>(Inst, &amp;IsWrite))</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;        instrumentMop(Inst);</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;        instrumentMemIntrinsic(cast&lt;MemIntrinsic&gt;(Inst));</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;    }</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    NumInstrumented++;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;  }</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;  FunctionStackPoisoner FSP(F, *<span class="keyword">this</span>);</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;  <span class="keywordtype">bool</span> ChangedStack = FSP.runOnFunction();</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;  <span class="comment">// We must unpoison the stack before every NoReturn call (throw, _exit, etc).</span></div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;  <span class="comment">// See e.g. http://code.google.com/p/address-sanitizer/issues/detail?id=37</span></div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, n = NoReturnCalls.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *CI = NoReturnCalls[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(CI);</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a7e31b0c02df2aeed261b103b790cc01e">CreateCall</a>(AsanHandleNoReturnFunc);</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;  }</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;  <span class="keywordtype">bool</span> res = NumInstrumented &gt; 0 || ChangedStack || !NoReturnCalls.<a class="code" href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">empty</a>();</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;  <span class="keywordflow">if</span> (InjectCoverage(F))</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    res = <span class="keyword">true</span>;</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;  <a class="code" href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ASAN done instrumenting: &quot;</span> &lt;&lt; res &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; F &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AddressSanitizer_8cpp.html#a5c87784936d87f3868b122243e492e85">ClKeepUninstrumented</a>) {</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;      <span class="comment">// No instrumentation is done, no need for the duplicate.</span></div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;      <span class="keywordflow">if</span> (UninstrumentedDuplicate)</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;        UninstrumentedDuplicate-&gt;<a class="code" href="classllvm_1_1Function.html#a8969dec86d24dd579f8ecc963e1dc8b4">eraseFromParent</a>();</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;      <span class="comment">// The function was instrumented. We must have the duplicate.</span></div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;      assert(UninstrumentedDuplicate);</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;      UninstrumentedDuplicate-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a3aa0bd764357e7ac9a9b7ca59189af79">setSection</a>(<span class="stringliteral">&quot;NOASAN&quot;</span>);</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;      assert(!F.<a class="code" href="classllvm_1_1GlobalValue.html#a790641f27e51506ed93c5dfcc6f9b02c">hasSection</a>());</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;      F.<a class="code" href="classllvm_1_1GlobalValue.html#a3aa0bd764357e7ac9a9b7ca59189af79">setSection</a>(<span class="stringliteral">&quot;ASAN&quot;</span>);</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    }</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;  }</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;  <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;}</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;</div><div class="line"><a name="l01326"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#a391729657cf9d55e0d0985eb7d44c00f"> 1326</a></span>&#160;<span class="keyword">static</span> uint64_t <a class="code" href="AddressSanitizer_8cpp.html#a391729657cf9d55e0d0985eb7d44c00f">ValueForPoison</a>(uint64_t PoisonByte, <span class="keywordtype">size_t</span> ShadowRedzoneSize) {</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;  <span class="keywordflow">if</span> (ShadowRedzoneSize == 1) <span class="keywordflow">return</span> PoisonByte;</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;  <span class="keywordflow">if</span> (ShadowRedzoneSize == 2) <span class="keywordflow">return</span> (PoisonByte &lt;&lt; 8) + PoisonByte;</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;  <span class="keywordflow">if</span> (ShadowRedzoneSize == 4)</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    <span class="keywordflow">return</span> (PoisonByte &lt;&lt; 24) + (PoisonByte &lt;&lt; 16) +</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;        (PoisonByte &lt;&lt; 8) + (PoisonByte);</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;  <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;ShadowRedzoneSize is either 1, 2 or 4&quot;</span>);</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;}</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;</div><div class="line"><a name="l01335"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#a0b70a4a702db3745092febe9d71b77b0"> 1335</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="AddressSanitizer_8cpp.html#a0b70a4a702db3745092febe9d71b77b0">PoisonShadowPartialRightRedzone</a>(uint8_t *Shadow,</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;                                            <span class="keywordtype">size_t</span> Size,</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;                                            <span class="keywordtype">size_t</span> RZSize,</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;                                            <span class="keywordtype">size_t</span> ShadowGranularity,</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;                                            uint8_t <a class="code" href="Archive_8cpp.html#a8a880cc52eda7e769c60a74d13b14966">Magic</a>) {</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; RZSize;</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;       <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>+= ShadowGranularity, Shadow++) {</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> + ShadowGranularity &lt;= Size) {</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;      *Shadow = 0;  <span class="comment">// fully addressable</span></div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt;= Size) {</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;      *Shadow = <a class="code" href="Archive_8cpp.html#a8a880cc52eda7e769c60a74d13b14966">Magic</a>;  <span class="comment">// unaddressable</span></div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;      *Shadow = Size - <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;  <span class="comment">// first Size-i bytes are addressable</span></div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    }</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;  }</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;}</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;<span class="comment">// Workaround for bug 11395: we don&#39;t want to instrument stack in functions</span></div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;<span class="comment">// with large assembly blobs (32-bit only), otherwise reg alloc may crash.</span></div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;<span class="comment">// FIXME: remove once the bug 11395 is fixed.</span></div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;<span class="keywordtype">bool</span> AddressSanitizer::LooksLikeCodeInBug11395(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I) {</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;  <span class="keywordflow">if</span> (LongSize != 32) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;  <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI = <a class="code" href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1CallInst.html">CallInst</a>&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;  <span class="keywordflow">if</span> (!CI || !CI-&gt;<a class="code" href="classllvm_1_1CallInst.html#af9f7e3d81c606a8ee1b3fc7ab9d793dc">isInlineAsm</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;  <span class="keywordflow">if</span> (CI-&gt;<a class="code" href="classllvm_1_1CallInst.html#ac88b95273e6c753188f6a54d65548579">getNumArgOperands</a>() &lt;= 5) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;  <span class="comment">// We have inline assembly with quite a few arguments.</span></div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;}</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;<span class="keywordtype">void</span> FunctionStackPoisoner::initializeCallbacks(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M) {</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(*C);</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;= <a class="code" href="AddressSanitizer_8cpp.html#acba05c6df950ff8712fa2194a2b83c87">kMaxAsanStackMallocSizeClass</a>; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    std::string Suffix = <a class="code" href="namespacellvm.html#a36e9868826fbe487571befb79d9030c5">itostr</a>(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    AsanStackMallocFunc[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="AddressSanitizer_8cpp.html#a4328cdcfec6258e6e111866ad3e306d2">checkInterfaceFunction</a>(</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;        M.<a class="code" href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(<a class="code" href="AddressSanitizer_8cpp.html#a92cc4dbbb6130c7242f545fe182ebb40">kAsanStackMallocNameTemplate</a> + Suffix, IntptrTy,</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;                              IntptrTy, IntptrTy, NULL));</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    AsanStackFreeFunc[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="AddressSanitizer_8cpp.html#a4328cdcfec6258e6e111866ad3e306d2">checkInterfaceFunction</a>(M.<a class="code" href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;        <a class="code" href="AddressSanitizer_8cpp.html#ae63207143206fb707233e5742adf9c31">kAsanStackFreeNameTemplate</a> + Suffix, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a518df7907ab8f1d61c6f47381055eb53">getVoidTy</a>(), IntptrTy,</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;        IntptrTy, IntptrTy, NULL));</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;  }</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;  AsanPoisonStackMemoryFunc = <a class="code" href="AddressSanitizer_8cpp.html#a4328cdcfec6258e6e111866ad3e306d2">checkInterfaceFunction</a>(M.<a class="code" href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;      <a class="code" href="AddressSanitizer_8cpp.html#a3f0ebfe096ae13d6eb209e6926a806b9">kAsanPoisonStackMemoryName</a>, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a518df7907ab8f1d61c6f47381055eb53">getVoidTy</a>(), IntptrTy, IntptrTy, NULL));</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;  AsanUnpoisonStackMemoryFunc = <a class="code" href="AddressSanitizer_8cpp.html#a4328cdcfec6258e6e111866ad3e306d2">checkInterfaceFunction</a>(M.<a class="code" href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">getOrInsertFunction</a>(</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;      <a class="code" href="AddressSanitizer_8cpp.html#aa7260620fe7bb37873a41e004aa83726">kAsanUnpoisonStackMemoryName</a>, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a518df7907ab8f1d61c6f47381055eb53">getVoidTy</a>(), IntptrTy, IntptrTy, NULL));</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;}</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;<span class="keywordtype">void</span> FunctionStackPoisoner::poisonRedZones(</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;AllocaInst*&gt;</a> &amp;AllocaVec, <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;IRB, <a class="code" href="classllvm_1_1Value.html">Value</a> *ShadowBase,</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;  <span class="keywordtype">bool</span> DoPoison) {</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;  <span class="keywordtype">size_t</span> ShadowRZSize = RedzoneSize() &gt;&gt; Mapping.Scale;</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;  assert(ShadowRZSize &gt;= 1 &amp;&amp; ShadowRZSize &lt;= 4);</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *RZTy = <a class="code" href="classllvm_1_1Type.html#acaf8e4c3e40e01e848c1fad5f05b81cd">Type::getIntNTy</a>(*C, ShadowRZSize * 8);</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *RZPtrTy = <a class="code" href="classllvm_1_1PointerType.html#a050a395d1656e546679d8b144d951bb2">PointerType::get</a>(RZTy, 0);</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *PoisonLeft  = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(RZTy,</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    <a class="code" href="AddressSanitizer_8cpp.html#a391729657cf9d55e0d0985eb7d44c00f">ValueForPoison</a>(DoPoison ? <a class="code" href="AddressSanitizer_8cpp.html#a48045b1226f511a8126d05226b228cb4">kAsanStackLeftRedzoneMagic</a> : 0LL, ShadowRZSize));</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *PoisonMid   = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(RZTy,</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    <a class="code" href="AddressSanitizer_8cpp.html#a391729657cf9d55e0d0985eb7d44c00f">ValueForPoison</a>(DoPoison ? <a class="code" href="AddressSanitizer_8cpp.html#a201f32ab4ee5073775773e9a8b155682">kAsanStackMidRedzoneMagic</a> : 0LL, ShadowRZSize));</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *PoisonRight = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(RZTy,</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    <a class="code" href="AddressSanitizer_8cpp.html#a391729657cf9d55e0d0985eb7d44c00f">ValueForPoison</a>(DoPoison ? <a class="code" href="AddressSanitizer_8cpp.html#a69c8b5c03bd67de996e90bd9ea78a5f5">kAsanStackRightRedzoneMagic</a> : 0LL, ShadowRZSize));</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;  <span class="comment">// poison the first red zone.</span></div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;  IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a43f7fa52a3fbe01e44c40d9db278ab3e">CreateStore</a>(PoisonLeft, IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a11d3f8bbc5a14f60879a87175db6695c">CreateIntToPtr</a>(ShadowBase, RZPtrTy));</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;  <span class="comment">// poison all other red zones.</span></div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;  uint64_t Pos = RedzoneSize();</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, n = AllocaVec.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *AI = AllocaVec[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    uint64_t SizeInBytes = getAllocaSizeInBytes(AI);</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    uint64_t AlignedSize = getAlignedAllocaSize(AI);</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    assert(AlignedSize - SizeInBytes &lt; RedzoneSize());</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Ptr = NULL;</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    Pos += AlignedSize;</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;    assert(ShadowBase-&gt;<a class="code" href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">getType</a>() == IntptrTy);</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    <span class="keywordflow">if</span> (SizeInBytes &lt; AlignedSize) {</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;      <span class="comment">// Poison the partial redzone at right</span></div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;      Ptr = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a112f87f5844b5d94c07940f3d47f1e99">CreateAdd</a>(</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;          ShadowBase, <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(IntptrTy,</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;                                       (Pos &gt;&gt; Mapping.Scale) - ShadowRZSize));</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;      <span class="keywordtype">size_t</span> AddressableBytes = RedzoneSize() - (AlignedSize - SizeInBytes);</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;      uint32_t Poison = 0;</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;      <span class="keywordflow">if</span> (DoPoison) {</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;        <a class="code" href="AddressSanitizer_8cpp.html#a0b70a4a702db3745092febe9d71b77b0">PoisonShadowPartialRightRedzone</a>((uint8_t*)&amp;Poison, AddressableBytes,</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;                                        RedzoneSize(),</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;                                        1ULL &lt;&lt; Mapping.Scale,</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;                                        <a class="code" href="AddressSanitizer_8cpp.html#ac1ab123f0a3c19c455803573c9e2b781">kAsanStackPartialRedzoneMagic</a>);</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;        Poison =</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;            ASan.TD-&gt;isLittleEndian()</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;                ? support::endian::byte_swap&lt;uint32_t, support::little&gt;(Poison)</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;                : support::endian::byte_swap&lt;uint32_t, support::big&gt;(Poison);</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;      }</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *PartialPoison = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(RZTy, Poison);</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;      IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a43f7fa52a3fbe01e44c40d9db278ab3e">CreateStore</a>(PartialPoison, IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a11d3f8bbc5a14f60879a87175db6695c">CreateIntToPtr</a>(Ptr, RZPtrTy));</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;    }</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    <span class="comment">// Poison the full redzone at right.</span></div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;    Ptr = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a112f87f5844b5d94c07940f3d47f1e99">CreateAdd</a>(ShadowBase,</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;                        <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(IntptrTy, Pos &gt;&gt; Mapping.Scale));</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    <span class="keywordtype">bool</span> LastAlloca = (<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> == AllocaVec.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>() - 1);</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Poison = LastAlloca ? PoisonRight : PoisonMid;</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a43f7fa52a3fbe01e44c40d9db278ab3e">CreateStore</a>(Poison, IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a11d3f8bbc5a14f60879a87175db6695c">CreateIntToPtr</a>(Ptr, RZPtrTy));</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;    Pos += RedzoneSize();</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;  }</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;}</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;<span class="comment">// Fake stack allocator (asan_fake_stack.h) has 11 size classes</span></div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;<span class="comment">// for every power of 2 from kMinStackMallocSize to kMaxAsanStackMallocSizeClass</span></div><div class="line"><a name="l01445"></a><span class="lineno"><a class="line" href="AddressSanitizer_8cpp.html#a956c8ddbdae78e48e5a76c33430a4ef6"> 1445</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="AddressSanitizer_8cpp.html#a956c8ddbdae78e48e5a76c33430a4ef6">StackMallocSizeClass</a>(uint64_t LocalStackSize) {</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;  assert(LocalStackSize &lt;= <a class="code" href="AddressSanitizer_8cpp.html#aaf5f0e81eb832fe48c6dc33db623a03c">kMaxStackMallocSize</a>);</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;  uint64_t MaxSize = <a class="code" href="AddressSanitizer_8cpp.html#afb368a1d773581543db2f164baf7fbdf">kMinStackMallocSize</a>;</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; ; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++, MaxSize *= 2)</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;    <span class="keywordflow">if</span> (LocalStackSize &lt;= MaxSize)</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;  <a class="code" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;impossible LocalStackSize&quot;</span>);</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;}</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;<span class="comment">// Set Size bytes starting from ShadowBase to kAsanStackAfterReturnMagic.</span></div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;<span class="comment">// We can not use MemSet intrinsic because it may end up calling the actual</span></div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;<span class="comment">// memset. Size is a multiple of 8.</span></div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;<span class="comment">// Currently this generates 8-byte stores on x86_64; it may be better to</span></div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;<span class="comment">// generate wider stores.</span></div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;<span class="keywordtype">void</span> FunctionStackPoisoner::SetShadowToStackAfterReturnInlined(</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;IRB, <a class="code" href="classllvm_1_1Value.html">Value</a> *ShadowBase, <span class="keywordtype">int</span> Size) {</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;  assert(!(Size % 8));</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;  assert(<a class="code" href="AddressSanitizer_8cpp.html#ace5bb212ff3d559872f211e4d801e59e">kAsanStackAfterReturnMagic</a> == 0xf5);</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; Size; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> += 8) {</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="Target_2ARM_2README_8txt.html#a38e79c83dad9b9a5f38c9693371a8709">p</a> = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a112f87f5844b5d94c07940f3d47f1e99">CreateAdd</a>(ShadowBase, <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(IntptrTy, <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a43f7fa52a3fbe01e44c40d9db278ab3e">CreateStore</a>(<a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a2e32c414382ed5fd53a770026361ed19">getInt64Ty</a>(), 0xf5f5f5f5f5f5f5f5ULL),</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;                    IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a11d3f8bbc5a14f60879a87175db6695c">CreateIntToPtr</a>(p, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a2e32c414382ed5fd53a770026361ed19">getInt64Ty</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#ab6cc070c37c59589af100aab6f48ef4f">getPointerTo</a>()));</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;  }</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;}</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;<span class="keywordtype">void</span> FunctionStackPoisoner::poisonStack() {</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;  uint64_t LocalStackSize = TotalStackSize +</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;                            (AllocaVec.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>() + 1) * RedzoneSize();</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;  <span class="keywordtype">bool</span> DoStackMalloc = ASan.CheckUseAfterReturn</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;      &amp;&amp; LocalStackSize &lt;= <a class="code" href="AddressSanitizer_8cpp.html#aaf5f0e81eb832fe48c6dc33db623a03c">kMaxStackMallocSize</a>;</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;  <span class="keywordtype">int</span> StackMallocIdx = -1;</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;  assert(AllocaVec.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>() &gt; 0);</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InsBefore = AllocaVec[0];</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(InsBefore);</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *ByteArrayTy = <a class="code" href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">ArrayType::get</a>(IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7a71da01c646618b7f43d303d563b41b">getInt8Ty</a>(), LocalStackSize);</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;  <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *MyAlloca =</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;      <span class="keyword">new</span> <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a>(ByteArrayTy, <span class="stringliteral">&quot;MyAlloca&quot;</span>, InsBefore);</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AddressSanitizer_8cpp.html#a6a70f1107a2cded627cb3e60cb6c3d27">ClRealignStack</a> &amp;&amp; StackAlignment &lt; RedzoneSize())</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    StackAlignment = RedzoneSize();</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;  MyAlloca-&gt;setAlignment(StackAlignment);</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;  assert(MyAlloca-&gt;isStaticAlloca());</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *OrigStackBase = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(MyAlloca, IntptrTy);</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *LocalStackBase = OrigStackBase;</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;  <span class="keywordflow">if</span> (DoStackMalloc) {</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    <span class="comment">// LocalStackBase = OrigStackBase</span></div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;    <span class="comment">// if (__asan_option_detect_stack_use_after_return)</span></div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    <span class="comment">//   LocalStackBase = __asan_stack_malloc_N(LocalStackBase, OrigStackBase);</span></div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    StackMallocIdx = <a class="code" href="AddressSanitizer_8cpp.html#a956c8ddbdae78e48e5a76c33430a4ef6">StackMallocSizeClass</a>(LocalStackSize);</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    assert(StackMallocIdx &lt;= <a class="code" href="AddressSanitizer_8cpp.html#acba05c6df950ff8712fa2194a2b83c87">kMaxAsanStackMallocSizeClass</a>);</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *OptionDetectUAR = F.<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Module.html#a1ec20a6f23ced1a328d4b1223fa22d96">getOrInsertGlobal</a>(</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;        <a class="code" href="AddressSanitizer_8cpp.html#a77aca6533da37409ae1ec4745c34ac41">kAsanOptionDetectUAR</a>, IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6ee1d1e7a13072ef579558d64b208d3c">getInt32Ty</a>());</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Cmp = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a609c7b4d7eb90f7c4627da58dc00fa42">CreateICmpNE</a>(IRB.<a class="code" href="classllvm_1_1IRBuilder.html#af440b535b3b4e8d0d089dd0ed2283a0f">CreateLoad</a>(OptionDetectUAR),</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;                                  <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#a6ee1d1e7a13072ef579558d64b208d3c">getInt32Ty</a>()));</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Term =</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;        <a class="code" href="namespacellvm.html#aec3efa15a67284b231fe0b5e6886af4e">SplitBlockAndInsertIfThen</a>(cast&lt;Instruction&gt;(Cmp), <span class="keyword">false</span>);</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *CmpBlock = cast&lt;Instruction&gt;(Cmp)-&gt;<a class="code" href="BasicAliasAnalysis_8cpp.html#a2675de1d8479c7b00387979714da43f7">getParent</a>();</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRBIf(Term);</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    LocalStackBase = IRBIf.<a class="code" href="classllvm_1_1IRBuilder.html#a902af4d6cb3a421a7f5723d0fc81efd1">CreateCall2</a>(</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;        AsanStackMallocFunc[StackMallocIdx],</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;        <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(IntptrTy, LocalStackSize), OrigStackBase);</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SetBlock = cast&lt;Instruction&gt;(LocalStackBase)-&gt;<a class="code" href="BasicAliasAnalysis_8cpp.html#a2675de1d8479c7b00387979714da43f7">getParent</a>();</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;    IRB.<a class="code" href="classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(InsBefore);</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *Phi = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a2c0d745d9907486632823c56c5a23e86">CreatePHI</a>(IntptrTy, 2);</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;    Phi-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(OrigStackBase, CmpBlock);</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    Phi-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(LocalStackBase, SetBlock);</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    LocalStackBase = Phi;</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;  }</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;  <span class="comment">// This string will be parsed by the run-time (DescribeAddressIfStack).</span></div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;2048&gt;</a> StackDescriptionStorage;</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;  <a class="code" href="classllvm_1_1raw__svector__ostream.html">raw_svector_ostream</a> StackDescription(StackDescriptionStorage);</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;  StackDescription &lt;&lt; AllocaVec.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>() &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;  <span class="comment">// Insert poison calls for lifetime intrinsics for alloca.</span></div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;  <span class="keywordtype">bool</span> HavePoisonedAllocas = <span class="keyword">false</span>;</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, n = AllocaPoisonCallVec.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    <span class="keyword">const</span> AllocaPoisonCall &amp;APC = AllocaPoisonCallVec[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    assert(APC.InsBefore);</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    assert(APC.AI);</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(APC.InsBefore);</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    poisonAlloca(APC.AI, APC.Size, IRB, APC.DoPoison);</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;    HavePoisonedAllocas |= APC.DoPoison;</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;  }</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;  uint64_t Pos = RedzoneSize();</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;  <span class="comment">// Replace Alloca instructions with base+offset.</span></div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, n = AllocaVec.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *AI = AllocaVec[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;    uint64_t SizeInBytes = getAllocaSizeInBytes(AI);</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> <a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a> = AI-&gt;<a class="code" href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">getName</a>();</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;    StackDescription &lt;&lt; Pos &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; SizeInBytes &lt;&lt; <span class="stringliteral">&quot; &quot;</span></div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;                     &lt;&lt; Name.<a class="code" href="classllvm_1_1StringRef.html#af68d5ebdb576d7481ea2766151b875d4">size</a>() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; Name &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    uint64_t AlignedSize = getAlignedAllocaSize(AI);</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;    assert((AlignedSize % RedzoneSize()) == 0);</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewAllocaPtr = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a11d3f8bbc5a14f60879a87175db6695c">CreateIntToPtr</a>(</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;            IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a112f87f5844b5d94c07940f3d47f1e99">CreateAdd</a>(LocalStackBase, <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(IntptrTy, Pos)),</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;            AI-&gt;<a class="code" href="classllvm_1_1AllocaInst.html#a597c918a615f26a0cea7adb84f06fc3f">getType</a>());</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    <a class="code" href="namespacellvm.html#a32988f75d4d36f6897a3801b9e8c0ae8">replaceDbgDeclareForAlloca</a>(AI, NewAllocaPtr, DIB);</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;    AI-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(NewAllocaPtr);</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;    Pos += AlignedSize + RedzoneSize();</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;  }</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;  assert(Pos == LocalStackSize);</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;  <span class="comment">// The left-most redzone has enough space for at least 4 pointers.</span></div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;  <span class="comment">// Write the Magic value to redzone[0].</span></div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *BasePlus0 = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a11d3f8bbc5a14f60879a87175db6695c">CreateIntToPtr</a>(LocalStackBase, IntptrPtrTy);</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;  IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a43f7fa52a3fbe01e44c40d9db278ab3e">CreateStore</a>(<a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(IntptrTy, <a class="code" href="AddressSanitizer_8cpp.html#abd89ac2b95ec4f9f9b87cf28f156322d">kCurrentStackFrameMagic</a>),</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;                  BasePlus0);</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;  <span class="comment">// Write the frame description constant to redzone[1].</span></div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *BasePlus1 = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a11d3f8bbc5a14f60879a87175db6695c">CreateIntToPtr</a>(</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a112f87f5844b5d94c07940f3d47f1e99">CreateAdd</a>(LocalStackBase, <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(IntptrTy, ASan.LongSize/8)),</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;    IntptrPtrTy);</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;  <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *StackDescriptionGlobal =</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;      <a class="code" href="AddressSanitizer_8cpp.html#a60ca3f4c949615b12b2b5ff6dea61956">createPrivateGlobalForString</a>(*F.<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>(), StackDescription.<a class="code" href="classllvm_1_1raw__svector__ostream.html#a941652907e3c1b132f86e1870bb5b291">str</a>());</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Description = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(StackDescriptionGlobal,</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;                                             IntptrTy);</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;  IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a43f7fa52a3fbe01e44c40d9db278ab3e">CreateStore</a>(Description, BasePlus1);</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;  <span class="comment">// Write the PC to redzone[2].</span></div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *BasePlus2 = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a11d3f8bbc5a14f60879a87175db6695c">CreateIntToPtr</a>(</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;    IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a112f87f5844b5d94c07940f3d47f1e99">CreateAdd</a>(LocalStackBase, <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(IntptrTy,</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;                                                   2 * ASan.LongSize/8)),</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;    IntptrPtrTy);</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;  IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a43f7fa52a3fbe01e44c40d9db278ab3e">CreateStore</a>(IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(&amp;F, IntptrTy), BasePlus2);</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;  <span class="comment">// Poison the stack redzones at the entry.</span></div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ShadowBase = ASan.memToShadow(LocalStackBase, IRB);</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;  poisonRedZones(AllocaVec, IRB, ShadowBase, <span class="keyword">true</span>);</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;  <span class="comment">// Unpoison the stack before all ret instructions.</span></div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, n = RetVec.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1AArch64ISD.html#a246d89cb58f606179b1435937830bbdca84e96c468affe3b1fd3076b4fc5d063e">Ret</a> = RetVec[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRBRet(Ret);</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;    <span class="comment">// Mark the current frame as retired.</span></div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;    IRBRet.<a class="code" href="classllvm_1_1IRBuilder.html#a43f7fa52a3fbe01e44c40d9db278ab3e">CreateStore</a>(<a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(IntptrTy, <a class="code" href="AddressSanitizer_8cpp.html#af955cd27ba6d5632e02d374282c4afae">kRetiredStackFrameMagic</a>),</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;                       BasePlus0);</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;    <span class="comment">// Unpoison the stack.</span></div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;    poisonRedZones(AllocaVec, IRBRet, ShadowBase, <span class="keyword">false</span>);</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;    <span class="keywordflow">if</span> (DoStackMalloc) {</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;      assert(StackMallocIdx &gt;= 0);</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;      <span class="comment">// In use-after-return mode, mark the whole stack frame unaddressable.</span></div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;      <span class="keywordflow">if</span> (StackMallocIdx &lt;= 4) {</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;        <span class="comment">// For small sizes inline the whole thing:</span></div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;        <span class="comment">// if LocalStackBase != OrigStackBase:</span></div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;        <span class="comment">//     memset(ShadowBase, kAsanStackAfterReturnMagic, ShadowSize);</span></div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;        <span class="comment">//     **SavedFlagPtr(LocalStackBase) = 0</span></div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;        <span class="comment">// FIXME: if LocalStackBase != OrigStackBase don&#39;t call poisonRedZones.</span></div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Cmp = IRBRet.<a class="code" href="classllvm_1_1IRBuilder.html#a609c7b4d7eb90f7c4627da58dc00fa42">CreateICmpNE</a>(LocalStackBase, OrigStackBase);</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;        <a class="code" href="classllvm_1_1TerminatorInst.html">TerminatorInst</a> *PoisonTerm =</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;            <a class="code" href="namespacellvm.html#aec3efa15a67284b231fe0b5e6886af4e">SplitBlockAndInsertIfThen</a>(cast&lt;Instruction&gt;(Cmp), <span class="keyword">false</span>);</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;        <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRBPoison(PoisonTerm);</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;        <span class="keywordtype">int</span> ClassSize = <a class="code" href="AddressSanitizer_8cpp.html#afb368a1d773581543db2f164baf7fbdf">kMinStackMallocSize</a> &lt;&lt; StackMallocIdx;</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;        SetShadowToStackAfterReturnInlined(IRBPoison, ShadowBase,</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;                                           ClassSize &gt;&gt; Mapping.Scale);</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *SavedFlagPtrPtr = IRBPoison.<a class="code" href="classllvm_1_1IRBuilder.html#a112f87f5844b5d94c07940f3d47f1e99">CreateAdd</a>(</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;            LocalStackBase,</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;            <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(IntptrTy, ClassSize - ASan.LongSize / 8));</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *SavedFlagPtr = IRBPoison.<a class="code" href="classllvm_1_1IRBuilder.html#af440b535b3b4e8d0d089dd0ed2283a0f">CreateLoad</a>(</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;            IRBPoison.<a class="code" href="classllvm_1_1IRBuilder.html#a11d3f8bbc5a14f60879a87175db6695c">CreateIntToPtr</a>(SavedFlagPtrPtr, IntptrPtrTy));</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;        IRBPoison.<a class="code" href="classllvm_1_1IRBuilder.html#a43f7fa52a3fbe01e44c40d9db278ab3e">CreateStore</a>(</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;            <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(IRBPoison.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7a71da01c646618b7f43d303d563b41b">getInt8Ty</a>()),</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;            IRBPoison.<a class="code" href="classllvm_1_1IRBuilder.html#a11d3f8bbc5a14f60879a87175db6695c">CreateIntToPtr</a>(SavedFlagPtr, IRBPoison.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7badbb741cd23e73ad063428c9cd5fea">getInt8PtrTy</a>()));</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;        <span class="comment">// For larger frames call __asan_stack_free_*.</span></div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;        IRBRet.<a class="code" href="classllvm_1_1IRBuilder.html#aec1340aa456977785b902da5d5203948">CreateCall3</a>(AsanStackFreeFunc[StackMallocIdx], LocalStackBase,</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;                           <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(IntptrTy, LocalStackSize),</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;                           OrigStackBase);</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;      }</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (HavePoisonedAllocas) {</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;      <span class="comment">// If we poisoned some allocas in llvm.lifetime analysis,</span></div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;      <span class="comment">// unpoison whole stack frame now.</span></div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;      assert(LocalStackBase == OrigStackBase);</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;      poisonAlloca(LocalStackBase, LocalStackSize, IRBRet, <span class="keyword">false</span>);</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;    }</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;  }</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;  <span class="comment">// We are done. Remove the old unused alloca instructions.</span></div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, n = AllocaVec.<a class="code" href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">size</a>(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a>; <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    AllocaVec[<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;eraseFromParent();</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;}</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;<span class="keywordtype">void</span> FunctionStackPoisoner::poisonAlloca(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, uint64_t Size,</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;                                         <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;IRB, <span class="keywordtype">bool</span> DoPoison) {</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;  <span class="comment">// For now just insert the call to ASan runtime.</span></div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *AddrArg = IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">CreatePointerCast</a>(V, IntptrTy);</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *SizeArg = <a class="code" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(IntptrTy, Size);</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;  IRB.<a class="code" href="classllvm_1_1IRBuilder.html#a902af4d6cb3a421a7f5723d0fc81efd1">CreateCall2</a>(DoPoison ? AsanPoisonStackMemoryFunc</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;                           : AsanUnpoisonStackMemoryFunc,</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;                  AddrArg, SizeArg);</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;}</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;<span class="comment">// Handling llvm.lifetime intrinsics for a given %alloca:</span></div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;<span class="comment">// (1) collect all llvm.lifetime.xxx(%size, %value) describing the alloca.</span></div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;<span class="comment">// (2) if %size is constant, poison memory for llvm.lifetime.end (to detect</span></div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;<span class="comment">//     invalid accesses) and unpoison it for llvm.lifetime.start (the memory</span></div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;<span class="comment">//     could be poisoned by previous llvm.lifetime.end instruction, as the</span></div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;<span class="comment">//     variable may go in and out of scope several times, e.g. in loops).</span></div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;<span class="comment">// (3) if we poisoned at least one %alloca in a function,</span></div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;<span class="comment">//     unpoison the whole stack frame at function exit.</span></div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;<a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *FunctionStackPoisoner::findAllocaForValue(<a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *AI = dyn_cast&lt;AllocaInst&gt;(V))</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    <span class="comment">// We&#39;re intested only in allocas we can handle.</span></div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    <span class="keywordflow">return</span> isInterestingAlloca(*AI) ? AI : 0;</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;  <span class="comment">// See if we&#39;ve already calculated (or started to calculate) alloca for a</span></div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;  <span class="comment">// given value.</span></div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;  AllocaForValueMapTy::iterator I = AllocaForValue.find(V);</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;  <span class="keywordflow">if</span> (I != AllocaForValue.end())</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;    <span class="keywordflow">return</span> I-&gt;second;</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;  <span class="comment">// Store 0 while we&#39;re calculating alloca for value V to avoid</span></div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;  <span class="comment">// infinite recursion if the value references itself.</span></div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;  AllocaForValue[V] = 0;</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;  <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *Res = 0;</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;  <a class="code" href="LLParser_8cpp.html#aae58e3df0180401e8f3ab75c18fbc07a">if</a> (<a class="code" href="classllvm_1_1CastInst.html">CastInst</a> *CI = dyn_cast&lt;CastInst&gt;(V))</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;    Res = findAllocaForValue(CI-&gt;getOperand(0));</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(V)) {</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, e = PN-&gt;getNumIncomingValues(); <a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != e; ++<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *IncValue = PN-&gt;getIncomingValue(<a class="code" href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;      <span class="comment">// Allow self-referencing phi-nodes.</span></div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;      <span class="keywordflow">if</span> (IncValue == PN) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;      <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *IncValueAI = findAllocaForValue(IncValue);</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;      <span class="comment">// AI for incoming values should exist and should all be equal.</span></div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;      <span class="keywordflow">if</span> (IncValueAI == 0 || (Res != 0 &amp;&amp; IncValueAI != Res))</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;      Res = IncValueAI;</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;    }</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;  }</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;  <span class="keywordflow">if</span> (Res != 0)</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;    AllocaForValue[V] = Res;</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;  <span class="keywordflow">return</span> Res;</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;}</div><div class="ttc" id="classllvm_1_1IRBuilder_html_a3f8c45ea10c393433221a508b750dcd5"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a3f8c45ea10c393433221a508b750dcd5">llvm::IRBuilder::CreateLShr</a></div><div class="ttdeci">Value * CreateLShr(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;, bool isExact=false)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00753">IRBuilder.h:753</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a5c87784936d87f3868b122243e492e85"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a5c87784936d87f3868b122243e492e85">ClKeepUninstrumented</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClKeepUninstrumented(&quot;asan-keep-uninstrumented-functions&quot;, cl::desc(&quot;Keep uninstrumented copies of functions&quot;), cl::Hidden, cl::init(false))</div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_aefc157b6e0936045b6ae74e4e044e431"><div class="ttname"><a href="AddressSanitizer_8cpp.html#aefc157b6e0936045b6ae74e4e044e431">ClDebugFunc</a></div><div class="ttdeci">static cl::opt&lt; std::string &gt; ClDebugFunc(&quot;asan-debug-func&quot;, cl::Hidden, cl::desc(&quot;Debug func&quot;))</div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a5b75b94b0d81c2ae458192b4a6544e18"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a5b75b94b0d81c2ae458192b4a6544e18">llvm::ConstantInt::isValueValidForType</a></div><div class="ttdeci">static bool isValueValidForType(Type *Ty, uint64_t V)</div><div class="ttdoc">Determine if the value is in range for the given type. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01159">Constants.cpp:1159</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a22a311dfe4c28a897de8a9365a4f0a84"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">llvm::SmallVectorTemplateCommon&lt; T &gt;::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00127">SmallVector.h:127</a></div></div>
<div class="ttc" id="SmallSet_8h_html"><div class="ttname"><a href="SmallSet_8h.html">SmallSet.h</a></div></div>
<div class="ttc" id="classllvm_1_1ReturnInst_html"><div class="ttname"><a href="classllvm_1_1ReturnInst.html">llvm::ReturnInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02279">Instructions.h:2279</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ae1a10b90f22c0478960fb5798ff73916"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">llvm::SmallVectorTemplateBase&lt; T, isPodLike&lt; T &gt;::value &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00236">SmallVector.h:236</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a05c5520b353e5b124e7eaf774da4b6ab"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a05c5520b353e5b124e7eaf774da4b6ab">ClStack</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClStack(&quot;asan-stack&quot;, cl::desc(&quot;Handle stack memory&quot;), cl::Hidden, cl::init(true))</div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90aa332b90dd5e4ebf4bbbcc0964220d373"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90aa332b90dd5e4ebf4bbbcc0964220d373">llvm::Intrinsic::lifetime_end</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l01254">Intrinsics.h:1254</a></div></div>
<div class="ttc" id="classllvm_1_1DataLayout_html"><div class="ttname"><a href="classllvm_1_1DataLayout.html">llvm::DataLayout</a></div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00098">DataLayout.h:98</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_a38ea691c2eeaf3facd74d5cfb0c725b0"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a38ea691c2eeaf3facd74d5cfb0c725b0">llvm::GlobalValue::getLinkage</a></div><div class="ttdeci">LinkageTypes getLinkage() const </div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00218">GlobalValue.h:218</a></div></div>
<div class="ttc" id="namespacellvm_html_aa6aa39b86007ee97f50248d2fb1b7220"><div class="ttname"><a href="namespacellvm.html#aa6aa39b86007ee97f50248d2fb1b7220">llvm::ReplaceInstWithInst</a></div><div class="ttdeci">void ReplaceInstWithInst(BasicBlock::InstListType &amp;BIL, BasicBlock::iterator &amp;BI, Instruction *I)</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00216">BasicBlockUtils.cpp:216</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantDataArray_html_a3edef3fa47c611d3d10606591213e57b"><div class="ttname"><a href="classllvm_1_1ConstantDataArray.html#a3edef3fa47c611d3d10606591213e57b">llvm::ConstantDataArray::getString</a></div><div class="ttdeci">static Constant * getString(LLVMContext &amp;Context, StringRef Initializer, bool AddNull=true)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02368">Constants.cpp:2368</a></div></div>
<div class="ttc" id="classllvm_1_1Triple_html_a547abd13f7a3c063aa72c8192a868154a867c596b0454c5bbeeb1ff490b9d70bc"><div class="ttname"><a href="classllvm_1_1Triple.html#a547abd13f7a3c063aa72c8192a868154a867c596b0454c5bbeeb1ff490b9d70bc">llvm::Triple::mips</a></div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00052">Triple.h:52</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_af440b535b3b4e8d0d089dd0ed2283a0f"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#af440b535b3b4e8d0d089dd0ed2283a0f">llvm::IRBuilder::CreateLoad</a></div><div class="ttdeci">LoadInst * CreateLoad(Value *Ptr, const char *Name)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00879">IRBuilder.h:879</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html_a089cccb6f231efee72abc76d0f9c695f"><div class="ttname"><a href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">llvm::PHINode::addIncoming</a></div><div class="ttdeci">void addIncoming(Value *V, BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02100">Instructions.h:2100</a></div></div>
<div class="ttc" id="namespacellvm_1_1SPII_html_a11e9b8fca4a074643a6a21f444e51406a5069619ca8fdce305534f3fe85091a0f"><div class="ttname"><a href="namespacellvm_1_1SPII.html#a11e9b8fca4a074643a6a21f444e51406a5069619ca8fdce305534f3fe85091a0f">llvm::SPII::Load</a></div><div class="ttdef"><b>Definition:</b> <a href="SparcInstrInfo_8h_source.html#l00031">SparcInstrInfo.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1InstVisitor_html"><div class="ttname"><a href="classllvm_1_1InstVisitor.html">llvm::InstVisitor</a></div><div class="ttdoc">Base class for instruction visitors. </div><div class="ttdef"><b>Definition:</b> <a href="InstVisitor_8h_source.html#l00081">InstVisitor.h:81</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a732b1b5adccd769c599ba61345563151"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a732b1b5adccd769c599ba61345563151">ClMappingScale</a></div><div class="ttdeci">static cl::opt&lt; int &gt; ClMappingScale(&quot;asan-mapping-scale&quot;, cl::desc(&quot;scale of asan shadow mapping&quot;), cl::Hidden, cl::init(0))</div></div>
<div class="ttc" id="namespacellvm_1_1XCoreISD_html_aef28e79e1ebefed9020708b2350b1f10adba71479b3d85460f040da54d76bd319"><div class="ttname"><a href="namespacellvm_1_1XCoreISD.html#aef28e79e1ebefed9020708b2350b1f10adba71479b3d85460f040da54d76bd319">llvm::XCoreISD::BL</a></div><div class="ttdef"><b>Definition:</b> <a href="XCoreISelLowering_8h_source.html#l00034">XCoreISelLowering.h:34</a></div></div>
<div class="ttc" id="classllvm_1_1StringRef_html_af68d5ebdb576d7481ea2766151b875d4"><div class="ttname"><a href="classllvm_1_1StringRef.html#af68d5ebdb576d7481ea2766151b875d4">llvm::StringRef::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdoc">size - Get the string size. </div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00113">StringRef.h:113</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">List of target independent CodeGen pass IDs. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00022">APFloat.h:22</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_afdd8a08bfcbd94f60d166a71a3e79ff3"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#afdd8a08bfcbd94f60d166a71a3e79ff3">llvm::IRBuilder::CreateIntCast</a></div><div class="ttdeci">Value * CreateIntCast(Value *V, Type *DestTy, bool isSigned, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01180">IRBuilder.h:1180</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html"><div class="ttname"><a href="classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">The main container class for the LLVM Intermediate Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00112">Module.h:112</a></div></div>
<div class="ttc" id="Type_8h_html"><div class="ttname"><a href="Type_8h.html">Type.h</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_a8a69689cb8586761c6a7535a8f6618a5"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a8a69689cb8586761c6a7535a8f6618a5">llvm::GlobalValue::getAlignment</a></div><div class="ttdeci">unsigned getAlignment() const </div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00079">GlobalValue.h:79</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_ae4ca2261b8b901e415fda7feac5051ea"><div class="ttname"><a href="classllvm_1_1Function.html#ae4ca2261b8b901e415fda7feac5051ea">llvm::Function::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00397">Function.h:397</a></div></div>
<div class="ttc" id="classllvm_1_1IntrinsicInst_html_a6cbb4809b81f3994ee0c79b38556bd66"><div class="ttname"><a href="classllvm_1_1IntrinsicInst.html#a6cbb4809b81f3994ee0c79b38556bd66">llvm::IntrinsicInst::getIntrinsicID</a></div><div class="ttdeci">Intrinsic::ID getIntrinsicID() const </div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00043">IntrinsicInst.h:43</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a48045b1226f511a8126d05226b228cb4"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a48045b1226f511a8126d05226b228cb4">kAsanStackLeftRedzoneMagic</a></div><div class="ttdeci">static const int kAsanStackLeftRedzoneMagic</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00097">AddressSanitizer.cpp:97</a></div></div>
<div class="ttc" id="classllvm_1_1AtomicCmpXchgInst_html"><div class="ttname"><a href="classllvm_1_1AtomicCmpXchgInst.html">llvm::AtomicCmpXchgInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00449">Instructions.h:449</a></div></div>
<div class="ttc" id="IntrinsicInst_8h_html"><div class="ttname"><a href="IntrinsicInst_8h.html">IntrinsicInst.h</a></div></div>
<div class="ttc" id="namespacellvm_html_a3f2f98c2a67c9e79f58aad9150a62e42"><div class="ttname"><a href="namespacellvm.html#a3f2f98c2a67c9e79f58aad9150a62e42">llvm::dyn_cast</a></div><div class="ttdeci">enable_if_c&lt;!is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="Casting_8h_source.html#l00266">Casting.h:266</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57caa67f293befacbbf974525116ccf2ff42"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57caa67f293befacbbf974525116ccf2ff42">llvm::GlobalValue::AvailableExternallyLinkage</a></div><div class="ttdoc">Available for inspection, not emission. </div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00035">GlobalValue.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1MDNode_html_ade17b50e4f0b835cd9eb58dffe12a90d"><div class="ttname"><a href="classllvm_1_1MDNode.html#ade17b50e4f0b835cd9eb58dffe12a90d">llvm::MDNode::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdoc">getNumOperands - Return number of MDNode operands. </div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00146">Metadata.h:146</a></div></div>
<div class="ttc" id="classllvm_1_1StringRef_html_a421e16456fe6d7b71fb4af736194165c"><div class="ttname"><a href="classllvm_1_1StringRef.html#a421e16456fe6d7b71fb4af736194165c">llvm::StringRef::find</a></div><div class="ttdeci">size_t find(char C, size_t From=0) const </div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00233">StringRef.h:233</a></div></div>
<div class="ttc" id="namespacellvm_html_ae85c8b3bbab3831fdbb0a4eddebddcdf"><div class="ttname"><a href="namespacellvm.html#ae85c8b3bbab3831fdbb0a4eddebddcdf">llvm::appendToGlobalCtors</a></div><div class="ttdeci">void appendToGlobalCtors(Module &amp;M, Function *F, int Priority)</div><div class="ttdef"><b>Definition:</b> <a href="ModuleUtils_8cpp_source.html#l00059">ModuleUtils.cpp:59</a></div></div>
<div class="ttc" id="DataLayout_8h_html"><div class="ttname"><a href="DataLayout_8h.html">DataLayout.h</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_a51940249c228e46f1f97932e5f4b8450"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a51940249c228e46f1f97932e5f4b8450">llvm::ConstantExpr::getGetElementPtr</a></div><div class="ttdeci">static Constant * getGetElementPtr(Constant *C, ArrayRef&lt; Constant * &gt; IdxList, bool InBounds=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l01012">Constants.h:1012</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00534">DenseMap.h:534</a></div></div>
<div class="ttc" id="classllvm_1_1PHINode_html"><div class="ttname"><a href="classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01978">Instructions.h:1978</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_abd89ac2b95ec4f9f9b87cf28f156322d"><div class="ttname"><a href="AddressSanitizer_8cpp.html#abd89ac2b95ec4f9f9b87cf28f156322d">kCurrentStackFrameMagic</a></div><div class="ttdeci">static const uintptr_t kCurrentStackFrameMagic</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00065">AddressSanitizer.cpp:65</a></div></div>
<div class="ttc" id="Debug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html"><div class="ttname"><a href="classllvm_1_1CallInst.html">llvm::CallInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01161">Instructions.h:1161</a></div></div>
<div class="ttc" id="namespacellvm_1_1MipsISD_html_a7a7035feda1dc16252a7a15a7e230122ad5006873d15f9569d1cf09deef3c6363"><div class="ttname"><a href="namespacellvm_1_1MipsISD.html#a7a7035feda1dc16252a7a15a7e230122ad5006873d15f9569d1cf09deef3c6363">llvm::MipsISD::Ins</a></div><div class="ttdef"><b>Definition:</b> <a href="MipsISelLowering_8h_source.html#l00105">MipsISelLowering.h:105</a></div></div>
<div class="ttc" id="Triple_8h_html"><div class="ttname"><a href="Triple_8h.html">Triple.h</a></div></div>
<div class="ttc" id="classllvm_1_1PointerType_html_a050a395d1656e546679d8b144d951bb2"><div class="ttname"><a href="classllvm_1_1PointerType.html#a050a395d1656e546679d8b144d951bb2">llvm::PointerType::get</a></div><div class="ttdeci">static PointerType * get(Type *ElementType, unsigned AddressSpace)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00730">Type.cpp:730</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a5ccd8260c37f3ac075e782b7df2229e5"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a5ccd8260c37f3ac075e782b7df2229e5">llvm::IRBuilder::CreatePointerCast</a></div><div class="ttdeci">Value * CreatePointerCast(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01172">IRBuilder.h:1172</a></div></div>
<div class="ttc" id="classllvm_1_1Triple_html_a547abd13f7a3c063aa72c8192a868154a13d8ce5e71051718a537277c6a594062"><div class="ttname"><a href="classllvm_1_1Triple.html#a547abd13f7a3c063aa72c8192a868154a13d8ce5e71051718a537277c6a594062">llvm::Triple::x86_64</a></div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00067">Triple.h:67</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57ca04ed141708c0fd16723d212502b046ae"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca04ed141708c0fd16723d212502b046ae">llvm::GlobalValue::PrivateLinkage</a></div><div class="ttdoc">Like Internal, but omit from symbol table. </div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00042">GlobalValue.h:42</a></div></div>
<div class="ttc" id="classllvm_1_1SpecialCaseList_html_a764fef55eb958b69088c065dc47e31cc"><div class="ttname"><a href="classllvm_1_1SpecialCaseList.html#a764fef55eb958b69088c065dc47e31cc">llvm::SpecialCaseList::createOrDie</a></div><div class="ttdeci">static SpecialCaseList * createOrDie(const StringRef Path)</div><div class="ttdef"><b>Definition:</b> <a href="SpecialCaseList_8cpp_source.html#l00074">SpecialCaseList.cpp:74</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e">llvm::GlobalValue::ExternalLinkage</a></div><div class="ttdoc">Externally visible function. </div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00034">GlobalValue.h:34</a></div></div>
<div class="ttc" id="classllvm_1_1APInt_html_ae0c5e70885cf005feb6707932774f99c"><div class="ttname"><a href="classllvm_1_1APInt.html#ae0c5e70885cf005feb6707932774f99c">llvm::APInt::getLimitedValue</a></div><div class="ttdeci">uint64_t getLimitedValue(uint64_t Limit=~0ULL) const </div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00408">APInt.h:408</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a37908b24ff226878627640398c57f55f"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a37908b24ff226878627640398c57f55f">kAsanMappingScaleName</a></div><div class="ttdeci">static const char *const kAsanMappingScaleName</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00083">AddressSanitizer.cpp:83</a></div></div>
<div class="ttc" id="classllvm_1_1df__iterator_html"><div class="ttname"><a href="classllvm_1_1df__iterator.html">llvm::df_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="DepthFirstIterator_8h_source.html#l00065">DepthFirstIterator.h:65</a></div></div>
<div class="ttc" id="classllvm_1_1raw__svector__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__svector__ostream.html">llvm::raw_svector_ostream</a></div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00450">raw_ostream.h:450</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a6d00c1e4742800f8e8fdf5b20d489c93"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a6d00c1e4742800f8e8fdf5b20d489c93">ClDebug</a></div><div class="ttdeci">static cl::opt&lt; int &gt; ClDebug(&quot;asan-debug&quot;, cl::desc(&quot;debug&quot;), cl::Hidden, cl::init(0))</div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_a3aa0bd764357e7ac9a9b7ca59189af79"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a3aa0bd764357e7ac9a9b7ca59189af79">llvm::GlobalValue::setSection</a></div><div class="ttdeci">void setSection(StringRef S)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00097">GlobalValue.h:97</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_aca229503e4f5c83a187a6a921c625fa8"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#aca229503e4f5c83a187a6a921c625fa8">llvm::BasicBlock::getParent</a></div><div class="ttdeci">const Function * getParent() const </div><div class="ttdoc">Return the enclosing method, or null if none. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00116">BasicBlock.h:116</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_ac1ab123f0a3c19c455803573c9e2b781"><div class="ttname"><a href="AddressSanitizer_8cpp.html#ac1ab123f0a3c19c455803573c9e2b781">kAsanStackPartialRedzoneMagic</a></div><div class="ttdeci">static const int kAsanStackPartialRedzoneMagic</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00100">AddressSanitizer.cpp:100</a></div></div>
<div class="ttc" id="classllvm_1_1MDNode_html"><div class="ttname"><a href="classllvm_1_1MDNode.html">llvm::MDNode</a></div><div class="ttdoc">MDNode - a tuple of other values. </div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00073">Metadata.h:73</a></div></div>
<div class="ttc" id="LLParser_8cpp_html_a33ece1ef8074506a15d7f86eb76dbae6"><div class="ttname"><a href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a></div><div class="ttdeci">F(f)</div></div>
<div class="ttc" id="classllvm_1_1InlineAsm_html"><div class="ttname"><a href="classllvm_1_1InlineAsm.html">llvm::InlineAsm</a></div><div class="ttdef"><b>Definition:</b> <a href="InlineAsm_8h_source.html#l00035">InlineAsm.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00070">Function.h:70</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html"><div class="ttname"><a href="classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00136">Instructions.h:136</a></div></div>
<div class="ttc" id="classllvm_1_1AtomicRMWInst_html"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html">llvm::AtomicRMWInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00556">Instructions.h:556</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a9a80bae197dc1294e3a0dbfd920b97b0"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a9a80bae197dc1294e3a0dbfd920b97b0">llvm::IRBuilder::CreateICmpEQ</a></div><div class="ttdeci">Value * CreateICmpEQ(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01206">IRBuilder.h:1206</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html_aa4d95acdd770e27036d21edb3cad65e1"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html#aa4d95acdd770e27036d21edb3cad65e1">llvm::GlobalVariable::getInitializer</a></div><div class="ttdeci">const Constant * getInitializer() const </div><div class="ttdef"><b>Definition:</b> <a href="GlobalVariable_8h_source.html#l00138">GlobalVariable.h:138</a></div></div>
<div class="ttc" id="Statistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html_a40da6cb8652ba35211cdc58b07399754"><div class="ttname"><a href="classllvm_1_1Module.html#a40da6cb8652ba35211cdc58b07399754">llvm::Module::getTargetTriple</a></div><div class="ttdeci">const std::string &amp; getTargetTriple() const </div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00237">Module.h:237</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a7bd545769621a0a9d2cfb074f86f4295"><div class="ttname"><a href="classllvm_1_1Instruction.html#a7bd545769621a0a9d2cfb074f86f4295">llvm::Instruction::setDebugLoc</a></div><div class="ttdeci">void setDebugLoc(const DebugLoc &amp;Loc)</div><div class="ttdoc">setDebugLoc - Set the debug location information for this instruction. </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00175">Instruction.h:175</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a48f0b23ee1a5e1774ad2b01d11d0204e"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a48f0b23ee1a5e1774ad2b01d11d0204e">llvm::ConstantInt::isMinusOne</a></div><div class="ttdeci">bool isMinusOne() const </div><div class="ttdoc">Determine if the value is all ones. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00176">Constants.h:176</a></div></div>
<div class="ttc" id="classllvm_1_1CallSiteBase_html_aa05cd15c496fef12c24d5af39a5b24bb"><div class="ttname"><a href="classllvm_1_1CallSiteBase.html#aa05cd15c496fef12c24d5af39a5b24bb">llvm::CallSiteBase::doesNotReturn</a></div><div class="ttdeci">bool doesNotReturn() const </div><div class="ttdoc">Determine if the call cannot return. </div><div class="ttdef"><b>Definition:</b> <a href="CallSite_8h_source.html#l00232">CallSite.h:232</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a3a94bb1b3b9ce65041cbdae915e6b985"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a3a94bb1b3b9ce65041cbdae915e6b985">kAsanMappingOffsetName</a></div><div class="ttdeci">static const char *const kAsanMappingOffsetName</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00082">AddressSanitizer.cpp:82</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00109">CommandLine.h:109</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_afa1cb82e021c7f516f65d40162fe6c53"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#afa1cb82e021c7f516f65d40162fe6c53">llvm::IRBuilder::CreateSub</a></div><div class="ttdeci">Value * CreateSub(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00637">IRBuilder.h:637</a></div></div>
<div class="ttc" id="Endian_8h_html"><div class="ttname"><a href="Endian_8h.html">Endian.h</a></div></div>
<div class="ttc" id="namespacellvm_html_a1f6978055dbb761b380de39070e34bd3"><div class="ttname"><a href="namespacellvm.html#a1f6978055dbb761b380de39070e34bd3">llvm::report_fatal_error</a></div><div class="ttdeci">LLVM_ATTRIBUTE_NORETURN void report_fatal_error(const char *reason, bool gen_crash_diag=true)</div><div class="ttdef"><b>Definition:</b> <a href="ErrorHandling_8cpp_source.html#l00053">ErrorHandling.cpp:53</a></div></div>
<div class="ttc" id="CallSite_8h_html"><div class="ttname"><a href="CallSite_8h.html">CallSite.h</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_aa6574d526b3e38a28f688a7bb4325c2c"><div class="ttname"><a href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">llvm::Constant::getNullValue</a></div><div class="ttdeci">static Constant * getNullValue(Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00111">Constants.cpp:111</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad452febc1ac0b394876e640ec03ffa38"><div class="ttname"><a href="classllvm_1_1Value.html#ad452febc1ac0b394876e640ec03ffa38">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00167">Value.cpp:167</a></div></div>
<div class="ttc" id="classllvm_1_1DIBuilder_html"><div class="ttname"><a href="classllvm_1_1DIBuilder.html">llvm::DIBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="DIBuilder_8h_source.html#l00055">DIBuilder.h:55</a></div></div>
<div class="ttc" id="classllvm_1_1MDNode_html_adb91929f939ff02dbee552d32afaf4e6"><div class="ttname"><a href="classllvm_1_1MDNode.html#adb91929f939ff02dbee552d32afaf4e6">llvm::MDNode::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const LLVM_READONLY</div><div class="ttdoc">getOperand - Return specified operand. </div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l00307">Metadata.cpp:307</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_a6ee1d1e7a13072ef579558d64b208d3c"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a6ee1d1e7a13072ef579558d64b208d3c">llvm::IRBuilderBase::getInt32Ty</a></div><div class="ttdeci">IntegerType * getInt32Ty()</div><div class="ttdoc">Fetch the type representing a 32-bit integer. </div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00310">IRBuilder.h:310</a></div></div>
<div class="ttc" id="classllvm_1_1AllocaInst_html_a066eba0d0eb9d9655c9b580a2a279b0a"><div class="ttname"><a href="classllvm_1_1AllocaInst.html#a066eba0d0eb9d9655c9b580a2a279b0a">llvm::AllocaInst::isArrayAllocation</a></div><div class="ttdeci">bool isArrayAllocation() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l00900">Instructions.cpp:900</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a0825e9eeff024102856e9a30f41bb386"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a0825e9eeff024102856e9a30f41bb386">kDefaultShadowScale</a></div><div class="ttdeci">static const uint64_t kDefaultShadowScale</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00056">AddressSanitizer.cpp:56</a></div></div>
<div class="ttc" id="InlineAsm_8h_html"><div class="ttname"><a href="InlineAsm_8h.html">InlineAsm.h</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a2c0d745d9907486632823c56c5a23e86"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a2c0d745d9907486632823c56c5a23e86">llvm::IRBuilder::CreatePHI</a></div><div class="ttdeci">PHINode * CreatePHI(Type *Ty, unsigned NumReservedValues, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01299">IRBuilder.h:1299</a></div></div>
<div class="ttc" id="namespacellvm_1_1GraphProgram_html_a0ad4685976f8c4d4a697a53fbe05d10b"><div class="ttname"><a href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">llvm::GraphProgram::Name</a></div><div class="ttdeci">Name</div><div class="ttdef"><b>Definition:</b> <a href="GraphWriter_8h_source.html#l00044">GraphWriter.h:44</a></div></div>
<div class="ttc" id="classllvm_1_1NamedMDNode_html"><div class="ttname"><a href="classllvm_1_1NamedMDNode.html">llvm::NamedMDNode</a></div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00195">Metadata.h:195</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a79c99406a50a00c19a41c6893a3885de"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a79c99406a50a00c19a41c6893a3885de">GlobalWasGeneratedByAsan</a></div><div class="ttdeci">static bool GlobalWasGeneratedByAsan(GlobalVariable *G)</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00589">AddressSanitizer.cpp:589</a></div></div>
<div class="ttc" id="classllvm_1_1iplist_html_a63c6a928d5abebdf6d8254532cda3bd3"><div class="ttname"><a href="classllvm_1_1iplist.html#a63c6a928d5abebdf6d8254532cda3bd3">llvm::iplist::push_back</a></div><div class="ttdeci">void push_back(NodeTy *val)</div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00554">ilist.h:554</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a1933ce346f4cbadcc151cea432c2b316"><div class="ttname"><a href="classllvm_1_1Value.html#a1933ce346f4cbadcc151cea432c2b316">llvm::Value::dump</a></div><div class="ttdeci">void dump() const </div><div class="ttdoc">dump - Support for debugging, callable in GDB: V-&gt;dump() </div><div class="ttdef"><b>Definition:</b> <a href="AsmWriter_8cpp_source.html#l02212">AsmWriter.cpp:2212</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_a2e32c414382ed5fd53a770026361ed19"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a2e32c414382ed5fd53a770026361ed19">llvm::IRBuilderBase::getInt64Ty</a></div><div class="ttdeci">IntegerType * getInt64Ty()</div><div class="ttdoc">Fetch the type representing a 64-bit integer. </div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00315">IRBuilder.h:315</a></div></div>
<div class="ttc" id="classllvm_1_1CastInst_html"><div class="ttname"><a href="classllvm_1_1CastInst.html">llvm::CastInst</a></div><div class="ttdoc">Base class of casting instructions. </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00387">InstrTypes.h:387</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_af8dde13a97efce293a7b04daf1e208fb"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#af8dde13a97efce293a7b04daf1e208fb">llvm::ConstantInt::getValue</a></div><div class="ttdeci">const APInt &amp; getValue() const </div><div class="ttdoc">Return the constant&amp;#39;s value. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00105">Constants.h:105</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_a790641f27e51506ed93c5dfcc6f9b02c"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a790641f27e51506ed93c5dfcc6f9b02c">llvm::GlobalValue::hasSection</a></div><div class="ttdeci">bool hasSection() const </div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00095">GlobalValue.h:95</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html_ab475a5d7e2ef20e13658adefb8c1be13"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html#ab475a5d7e2ef20e13658adefb8c1be13">llvm::GlobalVariable::isThreadLocal</a></div><div class="ttdeci">bool isThreadLocal() const </div><div class="ttdoc">If the value is &quot;Thread Local&quot;, its value isn&amp;#39;t shared by the threads. </div><div class="ttdef"><b>Definition:</b> <a href="GlobalVariable_8h_source.html#l00159">GlobalVariable.h:159</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html"><div class="ttname"><a href="classllvm_1_1StructType.html">llvm::StructType</a></div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00187">DerivedTypes.h:187</a></div></div>
<div class="ttc" id="ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdef"><b>Definition:</b> <a href="ErrorHandling_8h_source.html#l00103">ErrorHandling.h:103</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a11d3f8bbc5a14f60879a87175db6695c"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a11d3f8bbc5a14f60879a87175db6695c">llvm::IRBuilder::CreateIntToPtr</a></div><div class="ttdeci">Value * CreateIntToPtr(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01128">IRBuilder.h:1128</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a4227b72fcf29d2557178e78f61051701"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a4227b72fcf29d2557178e78f61051701">ClDebugMax</a></div><div class="ttdeci">static cl::opt&lt; int &gt; ClDebugMax(&quot;asan-debug-max&quot;, cl::desc(&quot;Debug man inst&quot;), cl::Hidden, cl::init(-1))</div></div>
<div class="ttc" id="SmallString_8h_html"><div class="ttname"><a href="SmallString_8h.html">SmallString.h</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html_ac88b95273e6c753188f6a54d65548579"><div class="ttname"><a href="classllvm_1_1CallInst.html#ac88b95273e6c753188f6a54d65548579">llvm::CallInst::getNumArgOperands</a></div><div class="ttdeci">unsigned getNumArgOperands() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01241">Instructions.h:1241</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html"><div class="ttname"><a href="classllvm_1_1IRBuilder.html">llvm::IRBuilder</a></div><div class="ttdoc">This provides a uniform API for creating instructions and inserting them into a basic block: either a...</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00421">IRBuilder.h:421</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html_ae9cbc599309fd2da33ec1c61df01ce1f"><div class="ttname"><a href="classllvm_1_1BranchInst.html#ae9cbc599309fd2da33ec1c61df01ce1f">llvm::BranchInst::Create</a></div><div class="ttdeci">static BranchInst * Create(BasicBlock *IfTrue, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02373">Instructions.h:2373</a></div></div>
<div class="ttc" id="classllvm_1_1AllocaInst_html_a214c60dbb4f1ed467e5a3420db6eefd6"><div class="ttname"><a href="classllvm_1_1AllocaInst.html#a214c60dbb4f1ed467e5a3420db6eefd6">llvm::AllocaInst::getAllocatedType</a></div><div class="ttdeci">Type * getAllocatedType() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l00906">Instructions.cpp:906</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a35ee267850af7c235474a8c46c7ac5af"><div class="ttname"><a href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">llvm::Value::setName</a></div><div class="ttdeci">void setName(const Twine &amp;Name)</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00175">Value.cpp:175</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a2e0b5e9ef464733fd25b5bd45fae9f14"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a2e0b5e9ef464733fd25b5bd45fae9f14">kAsanModuleCtorName</a></div><div class="ttdeci">static const char *const kAsanModuleCtorName</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00068">AddressSanitizer.cpp:68</a></div></div>
<div class="ttc" id="namespacellvm_1_1CallingConv_html_a4f861731fc6dbfdccc05af5968d98974"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">llvm::CallingConv::ID</a></div><div class="ttdeci">ID</div><div class="ttdoc">LLVM Calling Convention Representation. </div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00026">CallingConv.h:26</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html_a339f163decf5f2c881937600d1e953fa"><div class="ttname"><a href="classllvm_1_1Module.html#a339f163decf5f2c881937600d1e953fa">llvm::Module::getModuleIdentifier</a></div><div class="ttdeci">const std::string &amp; getModuleIdentifier() const </div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00228">Module.h:228</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00031">Instruction.h:31</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ad96b7cf3182ce2ba85e5a7a93b12c441"><div class="ttname"><a href="MD5_8cpp.html#ad96b7cf3182ce2ba85e5a7a93b12c441">G</a></div><div class="ttdeci">#define G(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00052">MD5.cpp:52</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90">llvm::Intrinsic::ID</a></div><div class="ttdeci">ID</div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l00036">Intrinsics.h:36</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_a518df7907ab8f1d61c6f47381055eb53"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a518df7907ab8f1d61c6f47381055eb53">llvm::IRBuilderBase::getVoidTy</a></div><div class="ttdeci">Type * getVoidTy()</div><div class="ttdoc">Fetch the type representing void. </div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00330">IRBuilder.h:330</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a07c1170f353c34f04ea892380cbbfb57"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a07c1170f353c34f04ea892380cbbfb57">ClInitializers</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClInitializers(&quot;asan-initialization-order&quot;, cl::desc(&quot;Handle C++ initializer order&quot;), cl::Hidden, cl::init(false))</div></div>
<div class="ttc" id="namespacellvm_html_a32988f75d4d36f6897a3801b9e8c0ae8"><div class="ttname"><a href="namespacellvm.html#a32988f75d4d36f6897a3801b9e8c0ae8">llvm::replaceDbgDeclareForAlloca</a></div><div class="ttdeci">bool replaceDbgDeclareForAlloca(AllocaInst *AI, Value *NewAllocaAddress, DIBuilder &amp;Builder)</div><div class="ttdef"><b>Definition:</b> <a href="Local_8cpp_source.html#l01083">Local.cpp:1083</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html_a0567b31cf5caa26522fcc2e7cadc1dde"><div class="ttname"><a href="classllvm_1_1Module.html#a0567b31cf5caa26522fcc2e7cadc1dde">llvm::Module::global_begin</a></div><div class="ttdeci">global_iterator global_begin()</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00521">Module.h:521</a></div></div>
<div class="ttc" id="classllvm_1_1Triple_html_a547abd13f7a3c063aa72c8192a868154aab15cb6de66f724829436a3466411993"><div class="ttname"><a href="classllvm_1_1Triple.html#a547abd13f7a3c063aa72c8192a868154aab15cb6de66f724829436a3466411993">llvm::Triple::ppc64</a></div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00058">Triple.h:58</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_ace59d658e1430f71c55b5bfd28f199a0"><div class="ttname"><a href="AddressSanitizer_8cpp.html#ace59d658e1430f71c55b5bfd28f199a0">ClBlacklistFile</a></div><div class="ttdeci">static cl::opt&lt; std::string &gt; ClBlacklistFile(&quot;asan-blacklist&quot;, cl::desc(&quot;File containing the list of objects to ignore &quot;&quot;during instrumentation&quot;), cl::Hidden)</div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a3f0ebfe096ae13d6eb209e6926a806b9"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a3f0ebfe096ae13d6eb209e6926a806b9">kAsanPoisonStackMemoryName</a></div><div class="ttdeci">static const char *const kAsanPoisonStackMemoryName</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00088">AddressSanitizer.cpp:88</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_a06e392f502bff86e8f85092c135d2baf"><div class="ttname"><a href="classllvm_1_1LoadInst.html#a06e392f502bff86e8f85092c135d2baf">llvm::LoadInst::setAtomic</a></div><div class="ttdeci">void setAtomic(AtomicOrdering Ordering, SynchronizationScope SynchScope=CrossThread)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00212">Instructions.h:212</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html">llvm::ConstantExpr</a></div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00790">Constants.h:790</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a197d5dd77cad4560a082900962a830aa"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a197d5dd77cad4560a082900962a830aa">llvm::IRBuilder::CreateAnd</a></div><div class="ttdeci">Value * CreateAnd(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00789">IRBuilder.h:789</a></div></div>
<div class="ttc" id="classllvm_1_1SmallSet_html_a76b3fc7c102561fb5210d5151531e409"><div class="ttname"><a href="classllvm_1_1SmallSet.html#a76b3fc7c102561fb5210d5151531e409">llvm::SmallSet::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00097">SmallSet.h:97</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a8f55dd4237be6778517ddd752ca8b76a"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a8f55dd4237be6778517ddd752ca8b76a">llvm::IRBuilder::CreateOr</a></div><div class="ttdeci">Value * CreateOr(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00805">IRBuilder.h:805</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorBase_html_a8a8df4d85555c7954a95f86080cd3b64"><div class="ttname"><a href="classllvm_1_1SmallVectorBase.html#a8a8df4d85555c7954a95f86080cd3b64">llvm::SmallVectorBase::empty</a></div><div class="ttdeci">bool LLVM_ATTRIBUTE_UNUSED_RESULT empty() const </div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00056">SmallVector.h:56</a></div></div>
<div class="ttc" id="namespacellvm_html_abdaf1eaf6120421977095bd97eee892e"><div class="ttname"><a href="namespacellvm.html#abdaf1eaf6120421977095bd97eee892e">llvm::countTrailingZeros</a></div><div class="ttdeci">enable_if_c&lt; std::numeric_limits&lt; T &gt;::is_integer &amp;&amp;!std::numeric_limits&lt; T &gt;::is_signed, std::size_t &gt;::type countTrailingZeros(T Val, ZeroBehavior ZB=ZB_Width)</div><div class="ttdoc">Count number of 0&amp;#39;s from the least significant bit to the most stopping at the first 1...</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00049">MathExtras.h:49</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayType_html"><div class="ttname"><a href="classllvm_1_1ArrayType.html">llvm::ArrayType</a></div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00332">DerivedTypes.h:332</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_acba05c6df950ff8712fa2194a2b83c87"><div class="ttname"><a href="AddressSanitizer_8cpp.html#acba05c6df950ff8712fa2194a2b83c87">kMaxAsanStackMallocSizeClass</a></div><div class="ttdeci">static const int kMaxAsanStackMallocSizeClass</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00084">AddressSanitizer.cpp:84</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a1cd06c08b4fd63c8163344eb8b67c626"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a1cd06c08b4fd63c8163344eb8b67c626">ClOptSameTemp</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClOptSameTemp(&quot;asan-opt-same-temp&quot;, cl::desc(&quot;Instrument the same temp just once&quot;), cl::Hidden, cl::init(true))</div></div>
<div class="ttc" id="classllvm_1_1FunctionType_html_a7e89b55242c964ae61b7850e99cacef0"><div class="ttname"><a href="classllvm_1_1FunctionType.html#a7e89b55242c964ae61b7850e99cacef0">llvm::FunctionType::get</a></div><div class="ttdeci">static FunctionType * get(Type *Result, ArrayRef&lt; Type * &gt; Params, bool isVarArg)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00361">Type.cpp:361</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a4902546e69d51d19005bb4f6315208fc"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a4902546e69d51d19005bb4f6315208fc">ClOpt</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClOpt(&quot;asan-opt&quot;, cl::desc(&quot;Optimize instrumentation&quot;), cl::Hidden, cl::init(true))</div></div>
<div class="ttc" id="classllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a></div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00031">ArrayRef.h:31</a></div></div>
<div class="ttc" id="namespacellvm_html_af6d6a791770bad2303c4399986979e3eae411369b2f0d8f484fec62c3291b1b51"><div class="ttname"><a href="namespacellvm.html#af6d6a791770bad2303c4399986979e3eae411369b2f0d8f484fec62c3291b1b51">llvm::Call</a></div><div class="ttdef"><b>Definition:</b> <a href="CallingConvLower_8h_source.html#l00149">CallingConvLower.h:149</a></div></div>
<div class="ttc" id="classllvm_1_1SmallString_html"><div class="ttname"><a href="classllvm_1_1SmallString.html">llvm::SmallString</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallString_8h_source.html#l00025">SmallString.h:25</a></div></div>
<div class="ttc" id="namespacellvm_html_aea2317343b6f41dd1879125ab112114b"><div class="ttname"><a href="namespacellvm.html#aea2317343b6f41dd1879125ab112114b">llvm::createAddressSanitizerModulePass</a></div><div class="ttdeci">ModulePass * createAddressSanitizerModulePass(bool CheckInitOrder=true, StringRef BlacklistFile=StringRef(), bool ZeroBaseShadow=false)</div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_ad7eeb9845bf0b03695f0d64b38efb765"><div class="ttname"><a href="AddressSanitizer_8cpp.html#ad7eeb9845bf0b03695f0d64b38efb765">ClCoverage</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClCoverage(&quot;asan-coverage&quot;, cl::desc(&quot;ASan coverage&quot;), cl::Hidden, cl::init(false))</div></div>
<div class="ttc" id="classllvm_1_1SmallSet_html_a8d8348060ccdeeba13fb8bc651dfbf82"><div class="ttname"><a href="classllvm_1_1SmallSet.html#a8d8348060ccdeeba13fb8bc651dfbf82">llvm::SmallSet::insert</a></div><div class="ttdeci">bool insert(const T &amp;V)</div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00059">SmallSet.h:59</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html"><div class="ttname"><a href="classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00255">Instructions.h:255</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00303">Value.cpp:303</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ae855357b6c5e6e7ed1869272708a3a84"><div class="ttname"><a href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">llvm::Value::takeName</a></div><div class="ttdeci">void takeName(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00239">Value.cpp:239</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a88a5e60837674780a9d812d661897ac5"><div class="ttname"><a href="classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">llvm::Function::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00395">Function.h:395</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a90c082e4868da30101e19bdc81a3dc53"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a90c082e4868da30101e19bdc81a3dc53">ClAlwaysSlowPath</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClAlwaysSlowPath(&quot;asan-always-slow-path&quot;, cl::desc(&quot;use instrumentation with slow path for all accesses&quot;), cl::Hidden, cl::init(false))</div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a43f7fa52a3fbe01e44c40d9db278ab3e"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a43f7fa52a3fbe01e44c40d9db278ab3e">llvm::IRBuilder::CreateStore</a></div><div class="ttdeci">StoreInst * CreateStore(Value *Val, Value *Ptr, bool isVolatile=false)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00888">IRBuilder.h:888</a></div></div>
<div class="ttc" id="classllvm_1_1SequentialType_html_a39f2c3a62f293faf11ac28b15bc53359"><div class="ttname"><a href="classllvm_1_1SequentialType.html#a39f2c3a62f293faf11ac28b15bc53359">llvm::SequentialType::getElementType</a></div><div class="ttdeci">Type * getElementType() const </div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00319">DerivedTypes.h:319</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayRef_html_a76878250107ee24ef7339870bdda4bcf"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#a76878250107ee24ef7339870bdda4bcf">llvm::ArrayRef::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdoc">size - Get the array size. </div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00109">ArrayRef.h:109</a></div></div>
<div class="ttc" id="DepthFirstIterator_8h_html"><div class="ttname"><a href="DepthFirstIterator_8h.html">DepthFirstIterator.h</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_ace45cae6925c65e9d6916e09dd5b17cc"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">llvm::IRBuilderBase::SetInsertPoint</a></div><div class="ttdeci">void SetInsertPoint(BasicBlock *TheBB)</div><div class="ttdoc">This specifies that created instructions should be appended to the end of the specified block...</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00083">IRBuilder.h:83</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a7221cab4eb5396f920c432650580815d"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a7221cab4eb5396f920c432650580815d">kDefaultShadowOffset32</a></div><div class="ttdeci">static const uint64_t kDefaultShadowOffset32</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00057">AddressSanitizer.cpp:57</a></div></div>
<div class="ttc" id="classllvm_1_1PointerType_html"><div class="ttname"><a href="classllvm_1_1PointerType.html">llvm::PointerType</a></div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00425">DerivedTypes.h:425</a></div></div>
<div class="ttc" id="classllvm_1_1Triple_html_a547abd13f7a3c063aa72c8192a868154a4c6fec6469969e44d4af328ef7782c46"><div class="ttname"><a href="classllvm_1_1Triple.html#a547abd13f7a3c063aa72c8192a868154a4c6fec6469969e44d4af328ef7782c46">llvm::Triple::ppc64le</a></div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00059">Triple.h:59</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html_a3f156c68d0efa530f05698ca15d66593"><div class="ttname"><a href="classllvm_1_1Module.html#a3f156c68d0efa530f05698ca15d66593">llvm::Module::getFunction</a></div><div class="ttdeci">Function * getFunction(StringRef Name) const </div><div class="ttdef"><b>Definition:</b> <a href="Module_8cpp_source.html#l00221">Module.cpp:221</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a98b12dfb954ebb1f4d821bb271ad1c86"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a98b12dfb954ebb1f4d821bb271ad1c86">ClInstrumentWrites</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClInstrumentWrites(&quot;asan-instrument-writes&quot;, cl::desc(&quot;instrument write instructions&quot;), cl::Hidden, cl::init(true))</div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_aa62a4d0672bab180dd339cda25b23b2e"><div class="ttname"><a href="AddressSanitizer_8cpp.html#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a></div><div class="ttdeci">static const size_t kNumberOfAccessSizes</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00106">AddressSanitizer.cpp:106</a></div></div>
<div class="ttc" id="README__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A,*B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00091">README_ALTIVEC.txt:91</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57caf2b592edf18170e7aff4e8f3bae3360c"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57caf2b592edf18170e7aff4e8f3bae3360c">llvm::GlobalValue::LinkOnceODRLinkage</a></div><div class="ttdoc">Same, but only replaced by something equivalent. </div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00037">GlobalValue.h:37</a></div></div>
<div class="ttc" id="CommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="Target_2PowerPC_2README_8txt_html_a1c23e7f459a1051c48b302e7f4ff100e"><div class="ttname"><a href="Target_2PowerPC_2README_8txt.html#a1c23e7f459a1051c48b302e7f4ff100e">get</a></div><div class="ttdeci">could compile rldicr blr rldicl blr we ori sldi blr sldi oris ori r4 addze r3 instead we get</div><div class="ttdef"><b>Definition:</b> <a href="Target_2PowerPC_2README_8txt_source.html#l00038">Target/PowerPC/README.txt:38</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00314">CommandLine.h:314</a></div></div>
<div class="ttc" id="namespacellvm_1_1AArch64ISD_html_a246d89cb58f606179b1435937830bbdca84e96c468affe3b1fd3076b4fc5d063e"><div class="ttname"><a href="namespacellvm_1_1AArch64ISD.html#a246d89cb58f606179b1435937830bbdca84e96c468affe3b1fd3076b4fc5d063e">llvm::AArch64ISD::Ret</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64ISelLowering_8h_source.html#l00060">AArch64ISelLowering.h:60</a></div></div>
<div class="ttc" id="classllvm_1_1TerminatorInst_html"><div class="ttname"><a href="classllvm_1_1TerminatorInst.html">llvm::TerminatorInst</a></div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00035">InstrTypes.h:35</a></div></div>
<div class="ttc" id="LLParser_8cpp_html_aae58e3df0180401e8f3ab75c18fbc07a"><div class="ttname"><a href="LLParser_8cpp.html#aae58e3df0180401e8f3ab75c18fbc07a">if</a></div><div class="ttdeci">* if(!EatIfPresent(lltok::kw_thread_local)) return false</div></div>
<div class="ttc" id="classllvm_1_1Triple_html_a3cfefc755ab656000934f91193afb1cda690ddf3bb28281cc7afa9c7de4ff4075"><div class="ttname"><a href="classllvm_1_1Triple.html#a3cfefc755ab656000934f91193afb1cda690ddf3bb28281cc7afa9c7de4ff4075">llvm::Triple::MacOSX</a></div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00100">Triple.h:100</a></div></div>
<div class="ttc" id="namespacellvm_html_abf74b2f0dbae96f4708d3e407b36df02a7754cbc42d54bad3979ed1789b780b28"><div class="ttname"><a href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02a7754cbc42d54bad3979ed1789b780b28">llvm::Monotonic</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00039">Instructions.h:39</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a3a1a03174d7fa51941e63a7d514b9d68"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a3a1a03174d7fa51941e63a7d514b9d68">ClUseAfterReturn</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClUseAfterReturn(&quot;asan-use-after-return&quot;, cl::desc(&quot;Check return-after-free&quot;), cl::Hidden, cl::init(false))</div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a110efeea5460fc0d1072ae9a35c180b5"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a110efeea5460fc0d1072ae9a35c180b5">llvm::IRBuilder::CreateICmpSGE</a></div><div class="ttdeci">Value * CreateICmpSGE(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01227">IRBuilder.h:1227</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html_a96581205e1149f5d70b56f9a83bc841a"><div class="ttname"><a href="classllvm_1_1Module.html#a96581205e1149f5d70b56f9a83bc841a">llvm::Module::getOrInsertFunction</a></div><div class="ttdeci">Constant * getOrInsertFunction(StringRef Name, FunctionType *T, AttributeSet AttributeList)</div><div class="ttdef"><b>Definition:</b> <a href="Module_8cpp_source.html#l00138">Module.cpp:138</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00072">BasicBlock.h:72</a></div></div>
<div class="ttc" id="namespacellvm_html_aec3efa15a67284b231fe0b5e6886af4e"><div class="ttname"><a href="namespacellvm.html#aec3efa15a67284b231fe0b5e6886af4e">llvm::SplitBlockAndInsertIfThen</a></div><div class="ttdeci">TerminatorInst * SplitBlockAndInsertIfThen(Instruction *Cmp, bool Unreachable, MDNode *BranchWeights=0)</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00652">BasicBlockUtils.cpp:652</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00044">Type.h:44</a></div></div>
<div class="ttc" id="classllvm_1_1CallSiteBase_html_ae4c67f835911559821939fb23a2e7aff"><div class="ttname"><a href="classllvm_1_1CallSiteBase.html#ae4c67f835911559821939fb23a2e7aff">llvm::CallSiteBase::getInstruction</a></div><div class="ttdeci">InstrTy * getInstruction() const </div><div class="ttdef"><b>Definition:</b> <a href="CallSite_8h_source.html#l00079">CallSite.h:79</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a2d546ada4799ea2a23a90fef972d28f6"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a2d546ada4799ea2a23a90fef972d28f6">ClMemIntrin</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClMemIntrin(&quot;asan-memintrin&quot;, cl::desc(&quot;Handle memset/memcpy/memmove&quot;), cl::Hidden, cl::init(true))</div></div>
<div class="ttc" id="classllvm_1_1TerminatorInst_html_a3aac3b6c36415a2b08f65ead9e3e51e7"><div class="ttname"><a href="classllvm_1_1TerminatorInst.html#a3aac3b6c36415a2b08f65ead9e3e51e7">llvm::TerminatorInst::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned idx) const </div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00065">InstrTypes.h:65</a></div></div>
<div class="ttc" id="classllvm_1_1LLVMContext_html"><div class="ttname"><a href="classllvm_1_1LLVMContext.html">llvm::LLVMContext</a></div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00037">LLVMContext.h:37</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html_a1ec20a6f23ced1a328d4b1223fa22d96"><div class="ttname"><a href="classllvm_1_1Module.html#a1ec20a6f23ced1a328d4b1223fa22d96">llvm::Module::getOrInsertGlobal</a></div><div class="ttdeci">Constant * getOrInsertGlobal(StringRef Name, Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Module_8cpp_source.html#l00250">Module.cpp:250</a></div></div>
<div class="ttc" id="classllvm_1_1BranchInst_html"><div class="ttname"><a href="classllvm_1_1BranchInst.html">llvm::BranchInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02350">Instructions.h:2350</a></div></div>
<div class="ttc" id="namespacellvm_html_a849b445fe6bce862c395ea6b97c1f658"><div class="ttname"><a href="namespacellvm.html#a849b445fe6bce862c395ea6b97c1f658">llvm::df_end</a></div><div class="ttdeci">df_iterator&lt; T &gt; df_end(const T &amp;G)</div><div class="ttdef"><b>Definition:</b> <a href="DepthFirstIterator_8h_source.html#l00206">DepthFirstIterator.h:206</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a112f87f5844b5d94c07940f3d47f1e99"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a112f87f5844b5d94c07940f3d47f1e99">llvm::IRBuilder::CreateAdd</a></div><div class="ttdeci">Value * CreateAdd(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00615">IRBuilder.h:615</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_afb368a1d773581543db2f164baf7fbdf"><div class="ttname"><a href="AddressSanitizer_8cpp.html#afb368a1d773581543db2f164baf7fbdf">kMinStackMallocSize</a></div><div class="ttdeci">static const size_t kMinStackMallocSize</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00063">AddressSanitizer.cpp:63</a></div></div>
<div class="ttc" id="classllvm_1_1UnreachableInst_html"><div class="ttname"><a href="classllvm_1_1UnreachableInst.html">llvm::UnreachableInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03142">Instructions.h:3142</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">LLVM Constant Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1AllocaInst_html_a597c918a615f26a0cea7adb84f06fc3f"><div class="ttname"><a href="classllvm_1_1AllocaInst.html#a597c918a615f26a0cea7adb84f06fc3f">llvm::AllocaInst::getType</a></div><div class="ttdeci">PointerType * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00091">Instructions.h:91</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a60a1aea771a1724c137bbb657fc472d7"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a60a1aea771a1724c137bbb657fc472d7">kAsanReportStoreN</a></div><div class="ttdeci">static const char *const kAsanReportStoreN</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00073">AddressSanitizer.cpp:73</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_aec09af489a399a9c32f8f316da451403"><div class="ttname"><a href="AddressSanitizer_8cpp.html#aec09af489a399a9c32f8f316da451403">kAsanInitName</a></div><div class="ttdeci">static const char *const kAsanInitName</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00079">AddressSanitizer.cpp:79</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_ae63207143206fb707233e5742adf9c31"><div class="ttname"><a href="AddressSanitizer_8cpp.html#ae63207143206fb707233e5742adf9c31">kAsanStackFreeNameTemplate</a></div><div class="ttdeci">static const char *const kAsanStackFreeNameTemplate</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00086">AddressSanitizer.cpp:86</a></div></div>
<div class="ttc" id="classllvm_1_1SmallSet_html"><div class="ttname"><a href="classllvm_1_1SmallSet.html">llvm::SmallSet</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00031">SmallSet.h:31</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_acda94f3cd0782a06ec8c4035ab6a6ba0"><div class="ttname"><a href="AddressSanitizer_8cpp.html#acda94f3cd0782a06ec8c4035ab6a6ba0">kMIPS32_ShadowOffset32</a></div><div class="ttdeci">static const uint64_t kMIPS32_ShadowOffset32</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00061">AddressSanitizer.cpp:61</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantArray_html_a0900dacdc7ad8e3ea0cc92993c7fd422"><div class="ttname"><a href="classllvm_1_1ConstantArray.html#a0900dacdc7ad8e3ea0cc92993c7fd422">llvm::ConstantArray::get</a></div><div class="ttdeci">static Constant * get(ArrayType *T, ArrayRef&lt; Constant * &gt; V)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00745">Constants.cpp:745</a></div></div>
<div class="ttc" id="classllvm_1_1AllocaInst_html_ad441932c20e5b9ba36c8c72a6c7f5ec3"><div class="ttname"><a href="classllvm_1_1AllocaInst.html#ad441932c20e5b9ba36c8c72a6c7f5ec3">llvm::AllocaInst::getAlignment</a></div><div class="ttdeci">unsigned getAlignment() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00103">Instructions.h:103</a></div></div>
<div class="ttc" id="structllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00286">CommandLine.h:286</a></div></div>
<div class="ttc" id="InstVisitor_8h_html"><div class="ttname"><a href="InstVisitor_8h.html">InstVisitor.h</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a4328cdcfec6258e6e111866ad3e306d2"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a4328cdcfec6258e6e111866ad3e306d2">checkInterfaceFunction</a></div><div class="ttdeci">static Function * checkInterfaceFunction(Constant *FuncOrBitcast)</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00739">AddressSanitizer.cpp:739</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_aab8e16a35183ce39aad394714087bcff"><div class="ttname"><a href="classllvm_1_1Instruction.html#aab8e16a35183ce39aad394714087bcff">llvm::Instruction::getDebugLoc</a></div><div class="ttdeci">const DebugLoc &amp; getDebugLoc() const </div><div class="ttdoc">getDebugLoc - Return the debug location for this node as a DebugLoc. </div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00178">Instruction.h:178</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a7ff017fb65f555b86d4ce8abf4d3064f"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a7ff017fb65f555b86d4ce8abf4d3064f">ClInstrumentReads</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClInstrumentReads(&quot;asan-instrument-reads&quot;, cl::desc(&quot;instrument read instructions&quot;), cl::Hidden, cl::init(true))</div></div>
<div class="ttc" id="Instrumentation_8h_html"><div class="ttname"><a href="Instrumentation_8h.html">Instrumentation.h</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a6e20e76960d952de088354cbcd14c3ab"><div class="ttname"><a href="classllvm_1_1Type.html#a6e20e76960d952de088354cbcd14c3ab">llvm::Type::getVoidTy</a></div><div class="ttdeci">static Type * getVoidTy(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00227">Type.cpp:227</a></div></div>
<div class="ttc" id="classllvm_1_1OwningPtr_html"><div class="ttname"><a href="classllvm_1_1OwningPtr.html">llvm::OwningPtr</a></div><div class="ttdef"><b>Definition:</b> <a href="OwningPtr_8h_source.html#l00028">OwningPtr.h:28</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_ace5bb212ff3d559872f211e4d801e59e"><div class="ttname"><a href="AddressSanitizer_8cpp.html#ace5bb212ff3d559872f211e4d801e59e">kAsanStackAfterReturnMagic</a></div><div class="ttdeci">static const int kAsanStackAfterReturnMagic</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00102">AddressSanitizer.cpp:102</a></div></div>
<div class="ttc" id="classllvm_1_1NamedMDNode_html_acf77b1de56fc46b8a5118ff95fae1403"><div class="ttname"><a href="classllvm_1_1NamedMDNode.html#acf77b1de56fc46b8a5118ff95fae1403">llvm::NamedMDNode::getOperand</a></div><div class="ttdeci">MDNode * getOperand(unsigned i) const </div><div class="ttdoc">getOperand - Return specified operand. </div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l00545">Metadata.cpp:545</a></div></div>
<div class="ttc" id="classllvm_1_1FunctionPass_html"><div class="ttname"><a href="classllvm_1_1FunctionPass.html">llvm::FunctionPass</a></div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00293">Pass.h:293</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a997ff6a1758bf732b9b263fc61011644"><div class="ttname"><a href="classllvm_1_1User.html#a997ff6a1758bf732b9b263fc61011644">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00088">User.h:88</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_ae0fddb0c6c5dfa98b334b2253d0adb40"><div class="ttname"><a href="AddressSanitizer_8cpp.html#ae0fddb0c6c5dfa98b334b2253d0adb40">ClOptGlobals</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClOptGlobals(&quot;asan-opt-globals&quot;, cl::desc(&quot;Don't instrument scalar globals&quot;), cl::Hidden, cl::init(true))</div></div>
<div class="ttc" id="ArrayRef_8h_html"><div class="ttname"><a href="ArrayRef_8h.html">ArrayRef.h</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_af955cd27ba6d5632e02d374282c4afae"><div class="ttname"><a href="AddressSanitizer_8cpp.html#af955cd27ba6d5632e02d374282c4afae">kRetiredStackFrameMagic</a></div><div class="ttdeci">static const uintptr_t kRetiredStackFrameMagic</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00066">AddressSanitizer.cpp:66</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantStruct_html_a54fcfa620deb80373f489ba2fdad7643"><div class="ttname"><a href="classllvm_1_1ConstantStruct.html#a54fcfa620deb80373f489ba2fdad7643">llvm::ConstantStruct::get</a></div><div class="ttdeci">static Constant * get(StructType *T, ArrayRef&lt; Constant * &gt; V)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00874">Constants.cpp:874</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a6a70f1107a2cded627cb3e60cb6c3d27"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a6a70f1107a2cded627cb3e60cb6c3d27">ClRealignStack</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClRealignStack(&quot;asan-realign-stack&quot;, cl::desc(&quot;Realign stack to 32&quot;), cl::Hidden, cl::init(true))</div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a025338961229e66dac880988cbb08c11"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a025338961229e66dac880988cbb08c11">kAsanGenPrefix</a></div><div class="ttdeci">static const char *const kAsanGenPrefix</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00087">AddressSanitizer.cpp:87</a></div></div>
<div class="ttc" id="DenseMap_8h_html"><div class="ttname"><a href="DenseMap_8h.html">DenseMap.h</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_a1f39ff79c40deb2abcea0592434f9855"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a1f39ff79c40deb2abcea0592434f9855">llvm::GlobalValue::getSection</a></div><div class="ttdeci">const std::string &amp; getSection() const </div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00096">GlobalValue.h:96</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a9d2fdf8375969a8c342b024382dee8b4"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a9d2fdf8375969a8c342b024382dee8b4">ClMaxInsnsToInstrumentPerBB</a></div><div class="ttdeci">static cl::opt&lt; int &gt; ClMaxInsnsToInstrumentPerBB(&quot;asan-max-ins-per-bb&quot;, cl::init(10000), cl::desc(&quot;maximal number of instructions to instrument in any given BB&quot;), cl::Hidden)</div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html">llvm::GlobalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalVariable_8h_source.html#l00035">GlobalVariable.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1Triple_html_a1778f5c464f88710033f7e11e84a9324a0ceb06180ab5fc86e9ad27563b538439"><div class="ttname"><a href="classllvm_1_1Triple.html#a1778f5c464f88710033f7e11e84a9324a0ceb06180ab5fc86e9ad27563b538439">llvm::Triple::Android</a></div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00125">Triple.h:125</a></div></div>
<div class="ttc" id="namespacellvm_html_a36e9868826fbe487571befb79d9030c5"><div class="ttname"><a href="namespacellvm.html#a36e9868826fbe487571befb79d9030c5">llvm::itostr</a></div><div class="ttdeci">static std::string itostr(int64_t X)</div><div class="ttdef"><b>Definition:</b> <a href="StringExtras_8h_source.html#l00104">StringExtras.h:104</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a42964b6908fea91b80e82487fb16abb2"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a42964b6908fea91b80e82487fb16abb2">ClGlobals</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClGlobals(&quot;asan-globals&quot;, cl::desc(&quot;Handle global objects&quot;), cl::Hidden, cl::init(true))</div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html_a80f3ce1776ebbb6decad3a1363ca4e8a"><div class="ttname"><a href="classllvm_1_1StoreInst.html#a80f3ce1776ebbb6decad3a1363ca4e8a">llvm::StoreInst::setAtomic</a></div><div class="ttdeci">void setAtomic(AtomicOrdering Ordering, SynchronizationScope SynchScope=CrossThread)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00332">Instructions.h:332</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_ab6cc070c37c59589af100aab6f48ef4f"><div class="ttname"><a href="classllvm_1_1Type.html#ab6cc070c37c59589af100aab6f48ef4f">llvm::Type::getPointerTo</a></div><div class="ttdeci">PointerType * getPointerTo(unsigned AddrSpace=0)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00756">Type.cpp:756</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_a7badbb741cd23e73ad063428c9cd5fea"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a7badbb741cd23e73ad063428c9cd5fea">llvm::IRBuilderBase::getInt8PtrTy</a></div><div class="ttdeci">PointerType * getInt8PtrTy(unsigned AddrSpace=0)</div><div class="ttdoc">Fetch the type representing a pointer to an 8-bit integer value. </div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00335">IRBuilder.h:335</a></div></div>
<div class="ttc" id="namespacellvm_html_a539b80bb605afb4ecdabd7b72eef7a06"><div class="ttname"><a href="namespacellvm.html#a539b80bb605afb4ecdabd7b72eef7a06">llvm::appendToGlobalDtors</a></div><div class="ttdeci">void appendToGlobalDtors(Module &amp;M, Function *F, int Priority)</div><div class="ttdoc">Same as appendToGlobalCtors(), but for global dtors. </div><div class="ttdef"><b>Definition:</b> <a href="ModuleUtils_8cpp_source.html#l00063">ModuleUtils.cpp:63</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_ab335e668fd33542ea14a2c7b527e64d3"><div class="ttname"><a href="Target_2README_8txt.html#ab335e668fd33542ea14a2c7b527e64d3">n</a></div><div class="ttdeci">The same transformation can work with an even modulo with the addition of a and shrink the compare RHS by the same amount Unless the target supports that transformation probably isn t worthwhile The transformation can also easily be made to work with non zero equality for n</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00723">Target/README.txt:723</a></div></div>
<div class="ttc" id="classllvm_1_1Triple_html"><div class="ttname"><a href="classllvm_1_1Triple.html">llvm::Triple</a></div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00044">Triple.h:44</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a00196b8da2b6387babb5f8ac980a5386"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a00196b8da2b6387babb5f8ac980a5386">kAsanRegisterGlobalsName</a></div><div class="ttdeci">static const char *const kAsanRegisterGlobalsName</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00074">AddressSanitizer.cpp:74</a></div></div>
<div class="ttc" id="Archive_8cpp_html_a8a880cc52eda7e769c60a74d13b14966"><div class="ttname"><a href="Archive_8cpp.html#a8a880cc52eda7e769c60a74d13b14966">Magic</a></div><div class="ttdeci">static const char *const Magic</div><div class="ttdef"><b>Definition:</b> <a href="Archive_8cpp_source.html#l00024">Archive.cpp:24</a></div></div>
<div class="ttc" id="namespacellvm_1_1ARMBuildAttrs_html_a7c1a2fb50eb1779d204a599368df2e3aa69c8a3bdf3f5753779a342f0cd97c090"><div class="ttname"><a href="namespacellvm_1_1ARMBuildAttrs.html#a7c1a2fb50eb1779d204a599368df2e3aa69c8a3bdf3f5753779a342f0cd97c090">llvm::ARMBuildAttrs::Section</a></div><div class="ttdef"><b>Definition:</b> <a href="ARMBuildAttrs_8h_source.html#l00030">ARMBuildAttrs.h:30</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html_a861226dd056dd2438da26760b8e7a9a0"><div class="ttname"><a href="classllvm_1_1CallInst.html#a861226dd056dd2438da26760b8e7a9a0">llvm::CallInst::Create</a></div><div class="ttdeci">static CallInst * Create(Value *Func, ArrayRef&lt; Value * &gt; Args, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01187">Instructions.h:1187</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html_a19b72cdd81bd792545e25466b43ac7c2"><div class="ttname"><a href="classllvm_1_1Module.html#a19b72cdd81bd792545e25466b43ac7c2">llvm::Module::global_end</a></div><div class="ttdeci">global_iterator global_end()</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00523">Module.h:523</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html_a020ed4dc4297b07bdad741f18cf369ae"><div class="ttname"><a href="classllvm_1_1Module.html#a020ed4dc4297b07bdad741f18cf369ae">llvm::Module::getFunctionList</a></div><div class="ttdeci">const FunctionListType &amp; getFunctionList() const </div><div class="ttdoc">Get the Module&amp;#39;s list of functions (constant). </div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00492">Module.h:492</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_a1f469b1f703519ae25ce564c8704310f"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a1f469b1f703519ae25ce564c8704310f">llvm::ConstantExpr::getPointerCast</a></div><div class="ttdeci">static Constant * getPointerCast(Constant *C, Type *Ty)</div><div class="ttdoc">Create a BitCast, AddrSpaceCast, or a PtrToInt cast constant expression. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01487">Constants.cpp:1487</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html"><div class="ttname"><a href="classllvm_1_1GlobalValue.html">llvm::GlobalValue</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00029">GlobalValue.h:29</a></div></div>
<div class="ttc" id="classllvm_1_1IntegerType_html_a14f7b4f1aed38192fb6b7772eb506bdb"><div class="ttname"><a href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">llvm::IntegerType::get</a></div><div class="ttdeci">static IntegerType * get(LLVMContext &amp;C, unsigned NumBits)</div><div class="ttdoc">Get or create an IntegerType instance. </div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00305">Type.cpp:305</a></div></div>
<div class="ttc" id="classllvm_1_1MemIntrinsic_html"><div class="ttname"><a href="classllvm_1_1MemIntrinsic.html">llvm::MemIntrinsic</a></div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00118">IntrinsicInst.h:118</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00050">ilist.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1ValueMap_html"><div class="ttname"><a href="classllvm_1_1ValueMap.html">llvm::ValueMap</a></div><div class="ttdoc">See the file comment. </div><div class="ttdef"><b>Definition:</b> <a href="ValueMap_8h_source.html#l00075">ValueMap.h:75</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html"><div class="ttname"><a href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">Class for constant integers. </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00051">Constants.h:51</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a92cc4dbbb6130c7242f545fe182ebb40"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a92cc4dbbb6130c7242f545fe182ebb40">kAsanStackMallocNameTemplate</a></div><div class="ttdeci">static const char *const kAsanStackMallocNameTemplate</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00085">AddressSanitizer.cpp:85</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_aa7260620fe7bb37873a41e004aa83726"><div class="ttname"><a href="AddressSanitizer_8cpp.html#aa7260620fe7bb37873a41e004aa83726">kAsanUnpoisonStackMemoryName</a></div><div class="ttdeci">static const char *const kAsanUnpoisonStackMemoryName</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00090">AddressSanitizer.cpp:90</a></div></div>
<div class="ttc" id="classllvm_1_1StructType_html_a18fc4545474c6ebb6f7c547f64f4fb31"><div class="ttname"><a href="classllvm_1_1StructType.html#a18fc4545474c6ebb6f7c547f64f4fb31">llvm::StructType::get</a></div><div class="ttdeci">static StructType * get(LLVMContext &amp;Context, ArrayRef&lt; Type * &gt; Elements, bool isPacked=false)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00405">Type.cpp:405</a></div></div>
<div class="ttc" id="Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="Target_2README_8txt_source.html#l00029">Target/README.txt:29</a></div></div>
<div class="ttc" id="classllvm_1_1MemIntrinsic_html_ad8bf46d46e8f14bc23bd30df57cc9a77"><div class="ttname"><a href="classllvm_1_1MemIntrinsic.html#ad8bf46d46e8f14bc23bd30df57cc9a77">llvm::MemIntrinsic::getDest</a></div><div class="ttdeci">Value * getDest() const </div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00145">IntrinsicInst.h:145</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_ad7523221c38891e563047ab7fc044312"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#ad7523221c38891e563047ab7fc044312">llvm::GlobalValue::setAlignment</a></div><div class="ttdeci">void setAlignment(unsigned Align)</div><div class="ttdef"><b>Definition:</b> <a href="Globals_8cpp_source.html#l00058">Globals.cpp:58</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00880">SmallVector.h:880</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a0cf7e80624365372e769be7d6c04d74b"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a0cf7e80624365372e769be7d6c04d74b">TypeSizeToSizeIndex</a></div><div class="ttdeci">static size_t TypeSizeToSizeIndex(uint32_t TypeSize)</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00572">AddressSanitizer.cpp:572</a></div></div>
<div class="ttc" id="classllvm_1_1AllocaInst_html_ae1147bebd023c80a6cda73a19b8c1d36"><div class="ttname"><a href="classllvm_1_1AllocaInst.html#ae1147bebd023c80a6cda73a19b8c1d36">llvm::AllocaInst::isStaticAlloca</a></div><div class="ttdeci">bool isStaticAlloca() const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l00913">Instructions.cpp:913</a></div></div>
<div class="ttc" id="Module_8h_html"><div class="ttname"><a href="Module_8h.html">Module.h</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a0cf3748dba54f931bb1241ae4adc76bc"><div class="ttname"><a href="classllvm_1_1Value.html#a0cf3748dba54f931bb1241ae4adc76bc">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00111">Value.h:111</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html_a7b6d31ca2b80c951577a1ce071000c69"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html#a7b6d31ca2b80c951577a1ce071000c69">llvm::GlobalVariable::copyAttributesFrom</a></div><div class="ttdeci">void copyAttributesFrom(const GlobalValue *Src)</div><div class="ttdef"><b>Definition:</b> <a href="Globals_8cpp_source.html#l00183">Globals.cpp:183</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_a91ebd7b5d66cc73396c43f4c056050d6"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a91ebd7b5d66cc73396c43f4c056050d6">llvm::GlobalValue::setUnnamedAddr</a></div><div class="ttdeci">void setUnnamedAddr(bool Val)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00085">GlobalValue.h:85</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a52e0a578af8418ff6a63a4b03d385012"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a52e0a578af8418ff6a63a4b03d385012">kDefaultShadowOffset64</a></div><div class="ttdeci">static const uint64_t kDefaultShadowOffset64</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00058">AddressSanitizer.cpp:58</a></div></div>
<div class="ttc" id="classllvm_1_1MemIntrinsic_html_abad10f74789466601c7a025540c1c072"><div class="ttname"><a href="classllvm_1_1MemIntrinsic.html#abad10f74789466601c7a025540c1c072">llvm::MemIntrinsic::getLength</a></div><div class="ttdeci">Value * getLength() const </div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00122">IntrinsicInst.h:122</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_ac0e8c554bf1c1e117a74d51df89c137d"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#ac0e8c554bf1c1e117a74d51df89c137d">llvm::IRBuilderBase::getInt32</a></div><div class="ttdeci">ConstantInt * getInt32(uint32_t C)</div><div class="ttdoc">Get a constant 32-bit value. </div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00276">IRBuilder.h:276</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_acaf8e4c3e40e01e848c1fad5f05b81cd"><div class="ttname"><a href="classllvm_1_1Type.html#acaf8e4c3e40e01e848c1fad5f05b81cd">llvm::Type::getIntNTy</a></div><div class="ttdeci">static IntegerType * getIntNTy(LLVMContext &amp;C, unsigned N)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00244">Type.cpp:244</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a5729f05800cac1ebb84e763c869e4b58"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a5729f05800cac1ebb84e763c869e4b58">ClDebugStack</a></div><div class="ttdeci">static cl::opt&lt; int &gt; ClDebugStack(&quot;asan-debug-stack&quot;, cl::desc(&quot;debug stack&quot;), cl::Hidden, cl::init(0))</div></div>
<div class="ttc" id="classllvm_1_1ConstantInt_html_a9105541412dab869e18b3cceebfff07d"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool isSigned=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00492">Constants.cpp:492</a></div></div>
<div class="ttc" id="Cloning_8h_html"><div class="ttname"><a href="Cloning_8h.html">Cloning.h</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a30f2c362631e3728d2f47a8203071ade"><div class="ttname"><a href="classllvm_1_1Function.html#a30f2c362631e3728d2f47a8203071ade">llvm::Function::getEntryBlock</a></div><div class="ttdeci">const BasicBlock &amp; getEntryBlock() const </div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00380">Function.h:380</a></div></div>
<div class="ttc" id="classllvm_1_1Constant_html_ad7ec8482f19e8e86e3de573b060a17e5"><div class="ttname"><a href="classllvm_1_1Constant.html#ad7ec8482f19e8e86e3de573b060a17e5">llvm::Constant::isNullValue</a></div><div class="ttdeci">bool isNullValue() const </div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00075">Constants.cpp:75</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs - Return a circular-buffered debug stream. </div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00101">Debug.cpp:101</a></div></div>
<div class="ttc" id="namespacellvm_html_afb9c37d2aea316c81a0b2b63c6b480e7"><div class="ttname"><a href="namespacellvm.html#afb9c37d2aea316c81a0b2b63c6b480e7">llvm::df_begin</a></div><div class="ttdeci">df_iterator&lt; T &gt; df_begin(const T &amp;G)</div><div class="ttdef"><b>Definition:</b> <a href="DepthFirstIterator_8h_source.html#l00201">DepthFirstIterator.h:201</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html_a150b33ecedbc8c7803c2db8040fbe3f8"><div class="ttname"><a href="classllvm_1_1CallInst.html#a150b33ecedbc8c7803c2db8040fbe3f8">llvm::CallInst::getArgOperand</a></div><div class="ttdeci">Value * getArgOperand(unsigned i) const </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01245">Instructions.h:1245</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a58bb459c83b8b1f5a550fb7b842eef1f"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a58bb459c83b8b1f5a550fb7b842eef1f">ClShort64BitOffset</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClShort64BitOffset(&quot;asan-short-64bit-mapping-offset&quot;, cl::desc(&quot;Use short immediate constant as the mapping offset for 64bit&quot;), cl::Hidden, cl::init(true))</div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a3516339929af46c9fd200b6f28189dfe"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a3516339929af46c9fd200b6f28189dfe">kAsanReportLoadN</a></div><div class="ttdeci">static const char *const kAsanReportLoadN</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00072">AddressSanitizer.cpp:72</a></div></div>
<div class="ttc" id="ModuleUtils_8h_html"><div class="ttname"><a href="ModuleUtils_8h.html">ModuleUtils.h</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html_a0d94a4e78681b58ae3b2dbbd0627a847"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html#a0d94a4e78681b58ae3b2dbbd0627a847">llvm::GlobalVariable::hasInitializer</a></div><div class="ttdeci">bool hasInitializer() const </div><div class="ttdef"><b>Definition:</b> <a href="GlobalVariable_8h_source.html#l00089">GlobalVariable.h:89</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57c"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57c">llvm::GlobalValue::LinkageTypes</a></div><div class="ttdeci">LinkageTypes</div><div class="ttdoc">An enumeration for the kinds of linkage for global values. </div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00033">GlobalValue.h:33</a></div></div>
<div class="ttc" id="CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2README_8txt_source.html#l00036">CodeGen/README.txt:36</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalVariable_html_a1500a3fe55cf38153aa1e0fbe7284e05"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html#a1500a3fe55cf38153aa1e0fbe7284e05">llvm::GlobalVariable::isConstant</a></div><div class="ttdeci">bool isConstant() const </div><div class="ttdef"><b>Definition:</b> <a href="GlobalVariable_8h_source.html#l00155">GlobalVariable.h:155</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a859eea41dc83945e52f9ee32764914dc"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a859eea41dc83945e52f9ee32764914dc">ClCheckLifetime</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClCheckLifetime(&quot;asan-check-lifetime&quot;, cl::desc(&quot;Use llvm.lifetime intrinsics to insert extra checks&quot;), cl::Hidden, cl::init(false))</div></div>
<div class="ttc" id="classllvm_1_1IRBuilderBase_html_a7a71da01c646618b7f43d303d563b41b"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a7a71da01c646618b7f43d303d563b41b">llvm::IRBuilderBase::getInt8Ty</a></div><div class="ttdeci">IntegerType * getInt8Ty()</div><div class="ttdoc">Fetch the type representing an 8-bit integer. </div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00300">IRBuilder.h:300</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a201f32ab4ee5073775773e9a8b155682"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a201f32ab4ee5073775773e9a8b155682">kAsanStackMidRedzoneMagic</a></div><div class="ttdeci">static const int kAsanStackMidRedzoneMagic</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00098">AddressSanitizer.cpp:98</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a69c8b5c03bd67de996e90bd9ea78a5f5"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a69c8b5c03bd67de996e90bd9ea78a5f5">kAsanStackRightRedzoneMagic</a></div><div class="ttdeci">static const int kAsanStackRightRedzoneMagic</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00099">AddressSanitizer.cpp:99</a></div></div>
<div class="ttc" id="classllvm_1_1CallInst_html_af9f7e3d81c606a8ee1b3fc7ab9d793dc"><div class="ttname"><a href="classllvm_1_1CallInst.html#af9f7e3d81c606a8ee1b3fc7ab9d793dc">llvm::CallInst::isInlineAsm</a></div><div class="ttdeci">bool isInlineAsm() const </div><div class="ttdoc">isInlineAsm - Check if this call is an inline asm statement. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01372">Instructions.h:1372</a></div></div>
<div class="ttc" id="Function_8h_html"><div class="ttname"><a href="Function_8h.html">Function.h</a></div></div>
<div class="ttc" id="namespacellvm_html_a7fac2767ce5926c7b51afb7429a80b2e"><div class="ttname"><a href="namespacellvm.html#a7fac2767ce5926c7b51afb7429a80b2e">llvm::createAddressSanitizerFunctionPass</a></div><div class="ttdeci">FunctionPass * createAddressSanitizerFunctionPass(bool CheckInitOrder=true, bool CheckUseAfterReturn=false, bool CheckLifetime=false, StringRef BlacklistFile=StringRef(), bool ZeroBaseShadow=false)</div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a4b69748767088f4286f047f9d1601bde"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a4b69748767088f4286f047f9d1601bde">kDefaultShort64bitShadowOffset</a></div><div class="ttdeci">static const uint64_t kDefaultShort64bitShadowOffset</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00059">AddressSanitizer.cpp:59</a></div></div>
<div class="ttc" id="classllvm_1_1ConstantExpr_html_ae739c577bd624ff893c050032e754212"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#ae739c577bd624ff893c050032e754212">llvm::ConstantExpr::isGEPWithNoNotionalOverIndexing</a></div><div class="ttdeci">bool isGEPWithNoNotionalOverIndexing() const </div><div class="ttdoc">Return true if this is a getelementptr expression and all the index operands are compile-time known i...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01044">Constants.cpp:1044</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a0a2dafc8a99b0b69c364d81bea56f1fd"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a0a2dafc8a99b0b69c364d81bea56f1fd">STATISTIC</a></div><div class="ttdeci">STATISTIC(NumInstrumentedReads,&quot;Number of instrumented reads&quot;)</div></div>
<div class="ttc" id="classllvm_1_1raw__svector__ostream_html_a941652907e3c1b132f86e1870bb5b291"><div class="ttname"><a href="classllvm_1_1raw__svector__ostream.html#a941652907e3c1b132f86e1870bb5b291">llvm::raw_svector_ostream::str</a></div><div class="ttdeci">StringRef str()</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8cpp_source.html#l00750">raw_ostream.cpp:750</a></div></div>
<div class="ttc" id="classllvm_1_1MemTransferInst_html_a1d23e59237a8e4a61f4af0deb7320104"><div class="ttname"><a href="classllvm_1_1MemTransferInst.html#a1d23e59237a8e4a61f4af0deb7320104">llvm::MemTransferInst::getSource</a></div><div class="ttdeci">Value * getSource() const </div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00222">IntrinsicInst.h:222</a></div></div>
<div class="ttc" id="StringExtras_8h_html"><div class="ttname"><a href="StringExtras_8h.html">StringExtras.h</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_ad60ec7475b0ffe7fc1f68a8019780643"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#ad60ec7475b0ffe7fc1f68a8019780643">llvm::GlobalValue::getType</a></div><div class="ttdeci">PointerType * getType() const </div><div class="ttdoc">getType - Global values are always pointers. </div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00107">GlobalValue.h:107</a></div></div>
<div class="ttc" id="classllvm_1_1MemTransferInst_html"><div class="ttname"><a href="classllvm_1_1MemTransferInst.html">llvm::MemTransferInst</a></div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00213">IntrinsicInst.h:213</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a86591af75f86d9ba2c854a7ca6480e4b"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a86591af75f86d9ba2c854a7ca6480e4b">ClDebugMin</a></div><div class="ttdeci">static cl::opt&lt; int &gt; ClDebugMin(&quot;asan-debug-min&quot;, cl::desc(&quot;Debug min inst&quot;), cl::Hidden, cl::init(-1))</div></div>
<div class="ttc" id="classllvm_1_1Module_html_a308196ba2f1c34b6bbcb6abe263f4004"><div class="ttname"><a href="classllvm_1_1Module.html#a308196ba2f1c34b6bbcb6abe263f4004">llvm::Module::getNamedMetadata</a></div><div class="ttdeci">NamedMDNode * getNamedMetadata(const Twine &amp;Name) const </div><div class="ttdef"><b>Definition:</b> <a href="Module_8cpp_source.html#l00286">Module.cpp:286</a></div></div>
<div class="ttc" id="classllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l01149">CommandLine.h:1149</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a603f8f8d2c9d8de6762092830cf82b13"><div class="ttname"><a href="classllvm_1_1Function.html#a603f8f8d2c9d8de6762092830cf82b13">llvm::Function::hasFnAttribute</a></div><div class="ttdeci">bool hasFnAttribute(Attribute::AttrKind Kind) const </div><div class="ttdoc">Return true if the function has the attribute. </div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00200">Function.h:200</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a956c8ddbdae78e48e5a76c33430a4ef6"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a956c8ddbdae78e48e5a76c33430a4ef6">StackMallocSizeClass</a></div><div class="ttdeci">static int StackMallocSizeClass(uint64_t LocalStackSize)</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l01445">AddressSanitizer.cpp:1445</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_aca8c71ab03634296b3caa54974afeb3e"><div class="ttname"><a href="classllvm_1_1Function.html#aca8c71ab03634296b3caa54974afeb3e">llvm::Function::removeFnAttr</a></div><div class="ttdeci">void removeFnAttr(Attribute::AttrKind N)</div><div class="ttdoc">Remove function attributes from this function. </div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00182">Function.h:182</a></div></div>
<div class="ttc" id="Target_2ARM_2README_8txt_html_a38e79c83dad9b9a5f38c9693371a8709"><div class="ttname"><a href="Target_2ARM_2README_8txt.html#a38e79c83dad9b9a5f38c9693371a8709">p</a></div><div class="ttdeci">the resulting code requires compare and branches when and if * p</div><div class="ttdef"><b>Definition:</b> <a href="Target_2ARM_2README_8txt_source.html#l00396">Target/ARM/README.txt:396</a></div></div>
<div class="ttc" id="namespacellvm_1_1X86II_html_a97dc14052814702ba0e2b14fb14dd02da2c6497f6ed5314c6fcd9ab88c9528543"><div class="ttname"><a href="namespacellvm_1_1X86II.html#a97dc14052814702ba0e2b14fb14dd02da2c6497f6ed5314c6fcd9ab88c9528543">llvm::X86II::DE</a></div><div class="ttdef"><b>Definition:</b> <a href="X86BaseInfo_8h_source.html#l00332">X86BaseInfo.h:332</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a60ca3f4c949615b12b2b5ff6dea61956"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a60ca3f4c949615b12b2b5ff6dea61956">createPrivateGlobalForString</a></div><div class="ttdeci">static GlobalVariable * createPrivateGlobalForString(Module &amp;M, StringRef Str)</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00579">AddressSanitizer.cpp:579</a></div></div>
<div class="ttc" id="classllvm_1_1Attribute_html_aab7ee4b8fd1d3e7e4cea87868855e60ea72bdab14ef59ecc35ce5e1212fddc6c2"><div class="ttname"><a href="classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60ea72bdab14ef59ecc35ce5e1212fddc6c2">llvm::Attribute::SanitizeAddress</a></div><div class="ttdoc">AddressSanitizer is on. </div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00106">Attributes.h:106</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00054">MD5.cpp:54</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a5cb76a65b6524dba1493dd2b9dc3abbe"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a5cb76a65b6524dba1493dd2b9dc3abbe">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">TerminatorInst * getTerminator()</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00120">BasicBlock.cpp:120</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_ac2c43dd0ccb3fe685991b12c7aaf36f8"><div class="ttname"><a href="AddressSanitizer_8cpp.html#ac2c43dd0ccb3fe685991b12c7aaf36f8">isInterestingMemoryAccess</a></div><div class="ttdeci">static Value * isInterestingMemoryAccess(Instruction *I, bool *IsWrite)</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00649">AddressSanitizer.cpp:649</a></div></div>
<div class="ttc" id="namespacellvm_html_aabb040f50a7e75ad8d58bfc5d95636a4"><div class="ttname"><a href="namespacellvm.html#aabb040f50a7e75ad8d58bfc5d95636a4">llvm::CloneFunction</a></div><div class="ttdeci">Function * CloneFunction(const Function *F, ValueToValueMapTy &amp;VMap, bool ModuleLevelChanges, ClonedCodeInfo *CodeInfo=0)</div><div class="ttdef"><b>Definition:</b> <a href="CloneFunction_8cpp_source.html#l00162">CloneFunction.cpp:162</a></div></div>
<div class="ttc" id="classllvm_1_1ModulePass_html"><div class="ttname"><a href="classllvm_1_1ModulePass.html">llvm::ModulePass</a></div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00235">Pass.h:235</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_ae1d53a21892854816885c7288f8b46f1"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ae1d53a21892854816885c7288f8b46f1">llvm::BasicBlock::Create</a></div><div class="ttdeci">static BasicBlock * Create(LLVMContext &amp;Context, const Twine &amp;Name=&quot;&quot;, Function *Parent=0, BasicBlock *InsertBefore=0)</div><div class="ttdoc">Creates a new BasicBlock. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00109">BasicBlock.h:109</a></div></div>
<div class="ttc" id="classllvm_1_1ArrayType_html_adf411edc4f135b570ab218079474ce77"><div class="ttname"><a href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">llvm::ArrayType::get</a></div><div class="ttdeci">static ArrayType * get(Type *ElementType, uint64_t NumElements)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00679">Type.cpp:679</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a654f51b793d270658dc5afd6f73dc57d"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a654f51b793d270658dc5afd6f73dc57d">INITIALIZE_PASS</a></div><div class="ttdeci">INITIALIZE_PASS(AddressSanitizer,&quot;asan&quot;,&quot;AddressSanitizer: detects use-after-free and out-of-bounds bugs.&quot;, false, false) FunctionPass *llvm</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00552">AddressSanitizer.cpp:552</a></div></div>
<div class="ttc" id="BasicBlockUtils_8h_html"><div class="ttname"><a href="BasicBlockUtils_8h.html">BasicBlockUtils.h</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">llvm::GlobalValue::InternalLinkage</a></div><div class="ttdoc">Rename collisions when linking (static functions). </div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00041">GlobalValue.h:41</a></div></div>
<div class="ttc" id="DIBuilder_8h_html"><div class="ttname"><a href="DIBuilder_8h.html">DIBuilder.h</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a77aca6533da37409ae1ec4745c34ac41"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a77aca6533da37409ae1ec4745c34ac41">kAsanOptionDetectUAR</a></div><div class="ttdeci">static const char *const kAsanOptionDetectUAR</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00093">AddressSanitizer.cpp:93</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a609c7b4d7eb90f7c4627da58dc00fa42"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a609c7b4d7eb90f7c4627da58dc00fa42">llvm::IRBuilder::CreateICmpNE</a></div><div class="ttdeci">Value * CreateICmpNE(Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01209">IRBuilder.h:1209</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a8969dec86d24dd579f8ecc963e1dc8b4"><div class="ttname"><a href="classllvm_1_1Function.html#a8969dec86d24dd579f8ecc963e1dc8b4">llvm::Function::eraseFromParent</a></div><div class="ttdeci">virtual void eraseFromParent()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00187">Function.cpp:187</a></div></div>
<div class="ttc" id="classllvm_1_1Triple_html_a547abd13f7a3c063aa72c8192a868154a5fb4823bc5bbdad4684399b118ccace8"><div class="ttname"><a href="classllvm_1_1Triple.html#a547abd13f7a3c063aa72c8192a868154a5fb4823bc5bbdad4684399b118ccace8">llvm::Triple::mipsel</a></div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00053">Triple.h:53</a></div></div>
<div class="ttc" id="classllvm_1_1InlineAsm_html_aaae042532c03bc95734e689525a6b88b"><div class="ttname"><a href="classllvm_1_1InlineAsm.html#aaae042532c03bc95734e689525a6b88b">llvm::InlineAsm::get</a></div><div class="ttdeci">static InlineAsm * get(FunctionType *Ty, StringRef AsmString, StringRef Constraints, bool hasSideEffects, bool isAlignStack=false, AsmDialect asmDialect=AD_ATT)</div><div class="ttdef"><b>Definition:</b> <a href="InlineAsm_8cpp_source.html#l00028">InlineAsm.cpp:28</a></div></div>
<div class="ttc" id="classllvm_1_1ReturnInst_html_ace9225fc27f77c5078f56027ed5421a6"><div class="ttname"><a href="classllvm_1_1ReturnInst.html#ace9225fc27f77c5078f56027ed5421a6">llvm::ReturnInst::Create</a></div><div class="ttdeci">static ReturnInst * Create(LLVMContext &amp;C, Value *retVal=0, Instruction *InsertBefore=0)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02301">Instructions.h:2301</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a6c44b22bca0251b66d6e28e83b64d0ad"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a6c44b22bca0251b66d6e28e83b64d0ad">kAsanModuleDtorName</a></div><div class="ttdeci">static const char *const kAsanModuleDtorName</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00069">AddressSanitizer.cpp:69</a></div></div>
<div class="ttc" id="IRBuilder_8h_html"><div class="ttname"><a href="IRBuilder_8h.html">IRBuilder.h</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a0b70a4a702db3745092febe9d71b77b0"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a0b70a4a702db3745092febe9d71b77b0">PoisonShadowPartialRightRedzone</a></div><div class="ttdeci">static void PoisonShadowPartialRightRedzone(uint8_t *Shadow, size_t Size, size_t RZSize, size_t ShadowGranularity, uint8_t Magic)</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l01335">AddressSanitizer.cpp:1335</a></div></div>
<div class="ttc" id="classllvm_1_1Triple_html_a9804d5fdcc6cec173c42a090d89165d5"><div class="ttname"><a href="classllvm_1_1Triple.html#a9804d5fdcc6cec173c42a090d89165d5">llvm::Triple::getEnvironment</a></div><div class="ttdeci">EnvironmentType getEnvironment() const </div><div class="ttdoc">getEnvironment - Get the parsed environment type of this triple. </div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00187">Triple.h:187</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a4d3051ff284a00a16810bcc43f18819e"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a4d3051ff284a00a16810bcc43f18819e">kAsanUnregisterGlobalsName</a></div><div class="ttdeci">static const char *const kAsanUnregisterGlobalsName</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00075">AddressSanitizer.cpp:75</a></div></div>
<div class="ttc" id="LLVMContext_8h_html"><div class="ttname"><a href="LLVMContext_8h.html">LLVMContext.h</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a0be2945a528adca56b3d238944e6449c"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a0be2945a528adca56b3d238944e6449c">kAsanUnpoisonGlobalsName</a></div><div class="ttdeci">static const char *const kAsanUnpoisonGlobalsName</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00078">AddressSanitizer.cpp:78</a></div></div>
<div class="ttc" id="SpecialCaseList_8h_html"><div class="ttname"><a href="SpecialCaseList_8h.html">SpecialCaseList.h</a></div></div>
<div class="ttc" id="classllvm_1_1Init_html"><div class="ttname"><a href="classllvm_1_1Init.html">llvm::Init</a></div><div class="ttdef"><b>Definition:</b> <a href="Record_8h_source.html#l00415">Record.h:415</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a902af4d6cb3a421a7f5723d0fc81efd1"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a902af4d6cb3a421a7f5723d0fc81efd1">llvm::IRBuilder::CreateCall2</a></div><div class="ttdeci">CallInst * CreateCall2(Value *Callee, Value *Arg1, Value *Arg2, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01310">IRBuilder.h:1310</a></div></div>
<div class="ttc" id="Local_8h_html"><div class="ttname"><a href="Local_8h.html">Local.h</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a630bdc81ca4a6ab70626ed25d4835d4a"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a630bdc81ca4a6ab70626ed25d4835d4a">kAsanPoisonGlobalsName</a></div><div class="ttdeci">static const char *const kAsanPoisonGlobalsName</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00077">AddressSanitizer.cpp:77</a></div></div>
<div class="ttc" id="classllvm_1_1GlobalValue_html_a9e1fc23a17e97d2d1732e753ae9251ac"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">llvm::GlobalValue::getParent</a></div><div class="ttdeci">Module * getParent()</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00286">GlobalValue.h:286</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00066">Value.h:66</a></div></div>
<div class="ttc" id="classllvm_1_1StoreInst_html_a50d3891cd26db1308e81540f468de8c8"><div class="ttname"><a href="classllvm_1_1StoreInst.html#a50d3891cd26db1308e81540f468de8c8">llvm::StoreInst::setAlignment</a></div><div class="ttdeci">void setAlignment(unsigned Align)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l01204">Instructions.cpp:1204</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_ac71a9d13684166ebbd2dc2fae6ada036"><div class="ttname"><a href="AddressSanitizer_8cpp.html#ac71a9d13684166ebbd2dc2fae6ada036">kPPC64_ShadowOffset64</a></div><div class="ttdeci">static const uint64_t kPPC64_ShadowOffset64</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00060">AddressSanitizer.cpp:60</a></div></div>
<div class="ttc" id="Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="Target_2X86_2README_8txt_source.html#l00297">Target/X86/README.txt:297</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_a7e31b0c02df2aeed261b103b790cc01e"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#a7e31b0c02df2aeed261b103b790cc01e">llvm::IRBuilder::CreateCall</a></div><div class="ttdeci">CallInst * CreateCall(Value *Callee, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01304">IRBuilder.h:1304</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a87b62bad15ffbb9e3fb5695fe9d7be92"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a87b62bad15ffbb9e3fb5695fe9d7be92">ClInstrumentAtomics</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClInstrumentAtomics(&quot;asan-instrument-atomics&quot;, cl::desc(&quot;instrument atomic instructions (rmw, cmpxchg)&quot;), cl::Hidden, cl::init(true))</div></div>
<div class="ttc" id="SmallVector_8h_html"><div class="ttname"><a href="SmallVector_8h.html">SmallVector.h</a></div></div>
<div class="ttc" id="BasicAliasAnalysis_8cpp_html_a2675de1d8479c7b00387979714da43f7"><div class="ttname"><a href="BasicAliasAnalysis_8cpp.html#a2675de1d8479c7b00387979714da43f7">getParent</a></div><div class="ttdeci">static const Function * getParent(const Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="BasicAliasAnalysis_8cpp_source.html#l00447">BasicAliasAnalysis.cpp:447</a></div></div>
<div class="ttc" id="namespacellvm_1_1A64CC_html_af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442"><div class="ttname"><a href="namespacellvm_1_1A64CC.html#af5804bc0518be9568f73db566e4d6f46a2db5e7546f960277ff98f96cd5624442">llvm::A64CC::MI</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00035">AArch64BaseInfo.h:35</a></div></div>
<div class="ttc" id="classllvm_1_1Type_html_a9dc5111b1a9b1d5c4652d50f74fe850b"><div class="ttname"><a href="classllvm_1_1Type.html#a9dc5111b1a9b1d5c4652d50f74fe850b">llvm::Type::isSized</a></div><div class="ttdeci">bool isSized() const </div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00278">Type.h:278</a></div></div>
<div class="ttc" id="classllvm_1_1NamedMDNode_html_a24a3512f374b3f29b573a223dfd13f2a"><div class="ttname"><a href="classllvm_1_1NamedMDNode.html#a24a3512f374b3f29b573a223dfd13f2a">llvm::NamedMDNode::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const </div><div class="ttdoc">getNumOperands - Return the number of NamedMDNode operands. </div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l00540">Metadata.cpp:540</a></div></div>
<div class="ttc" id="Debug_8h_html_aef41e8aaf4c60819b30faf396cdf4978"><div class="ttname"><a href="Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></div><div class="ttdeci">#define DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00097">Debug.h:97</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a441bafcb7a483df1b0e9b2fd0ba45f47"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a441bafcb7a483df1b0e9b2fd0ba45f47">kAsanHandleNoReturnName</a></div><div class="ttdeci">static const char *const kAsanHandleNoReturnName</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00081">AddressSanitizer.cpp:81</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_aaf5f0e81eb832fe48c6dc33db623a03c"><div class="ttname"><a href="AddressSanitizer_8cpp.html#aaf5f0e81eb832fe48c6dc33db623a03c">kMaxStackMallocSize</a></div><div class="ttdeci">static const size_t kMaxStackMallocSize</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00064">AddressSanitizer.cpp:64</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a3b9972fcad3b5043b0fd37f6962383cf"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a3b9972fcad3b5043b0fd37f6962383cf">ClMappingOffsetLog</a></div><div class="ttdeci">static cl::opt&lt; int &gt; ClMappingOffsetLog(&quot;asan-mapping-offset-log&quot;, cl::desc(&quot;offset of asan shadow mapping&quot;), cl::Hidden, cl::init(-1))</div></div>
<div class="ttc" id="classllvm_1_1StringRef_html"><div class="ttname"><a href="classllvm_1_1StringRef.html">llvm::StringRef</a></div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00041">StringRef.h:41</a></div></div>
<div class="ttc" id="raw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1SPII_html_a11e9b8fca4a074643a6a21f444e51406a36b3dd3b84fde3f8494a9b18af131856"><div class="ttname"><a href="namespacellvm_1_1SPII.html#a11e9b8fca4a074643a6a21f444e51406a36b3dd3b84fde3f8494a9b18af131856">llvm::SPII::Store</a></div><div class="ttdef"><b>Definition:</b> <a href="SparcInstrInfo_8h_source.html#l00032">SparcInstrInfo.h:32</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_ab1cd5a3713b93a33f89a2086d473cf6e"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ab1cd5a3713b93a33f89a2086d473cf6e">llvm::BasicBlock::getFirstInsertionPt</a></div><div class="ttdeci">iterator getFirstInsertionPt()</div><div class="ttdoc">Returns an iterator to the first instruction in this block that is suitable for inserting a non-PHI i...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00170">BasicBlock.cpp:170</a></div></div>
<div class="ttc" id="classllvm_1_1CallSite_html"><div class="ttname"><a href="classllvm_1_1CallSite.html">llvm::CallSite</a></div><div class="ttdef"><b>Definition:</b> <a href="CallSite_8h_source.html#l00295">CallSite.h:295</a></div></div>
<div class="ttc" id="OwningPtr_8h_html"><div class="ttname"><a href="OwningPtr_8h.html">OwningPtr.h</a></div></div>
<div class="ttc" id="system__error_8h_html"><div class="ttname"><a href="system__error_8h.html">system_error.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1NVPTX_1_1PTXCvtMode_html_ad81eb7557182862503894d8bc5e8328fadf6cb3d17aeace3749932c7166e349cc"><div class="ttname"><a href="namespacellvm_1_1NVPTX_1_1PTXCvtMode.html#ad81eb7557182862503894d8bc5e8328fadf6cb3d17aeace3749932c7166e349cc">llvm::NVPTX::PTXCvtMode::RZ</a></div><div class="ttdef"><b>Definition:</b> <a href="NVPTX_8h_source.html#l00141">NVPTX.h:141</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a73349916f7e54a6b988a3646c7a02e90ae365354e47542c51f9bd46e329e3323e"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a73349916f7e54a6b988a3646c7a02e90ae365354e47542c51f9bd46e329e3323e">llvm::Intrinsic::lifetime_start</a></div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l01255">Intrinsics.h:1255</a></div></div>
<div class="ttc" id="classllvm_1_1IntrinsicInst_html"><div class="ttname"><a href="classllvm_1_1IntrinsicInst.html">llvm::IntrinsicInst</a></div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00036">IntrinsicInst.h:36</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_ad7689e8106d7eb5c7844454ddf90c977"><div class="ttname"><a href="AddressSanitizer_8cpp.html#ad7689e8106d7eb5c7844454ddf90c977">kAsanCtorAndCtorPriority</a></div><div class="ttdeci">static const int kAsanCtorAndCtorPriority</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00070">AddressSanitizer.cpp:70</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html_a0e74af4b7c739f3a14e737c3042b6617"><div class="ttname"><a href="classllvm_1_1Module.html#a0e74af4b7c739f3a14e737c3042b6617">llvm::Module::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const </div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00249">Module.h:249</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a4b572ae0a7ecf76250a6642941e95746"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a4b572ae0a7ecf76250a6642941e95746">kAsanCovName</a></div><div class="ttdeci">static const char *const kAsanCovName</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00080">AddressSanitizer.cpp:80</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html_a162a63c89ac118c8ffef75b3a892efa0"><div class="ttname"><a href="classllvm_1_1Function.html#a162a63c89ac118c8ffef75b3a892efa0">llvm::Function::Create</a></div><div class="ttdeci">static Function * Create(FunctionType *Ty, LinkageTypes Linkage, const Twine &amp;N=&quot;&quot;, Module *M=0)</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00128">Function.h:128</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_a391729657cf9d55e0d0985eb7d44c00f"><div class="ttname"><a href="AddressSanitizer_8cpp.html#a391729657cf9d55e0d0985eb7d44c00f">ValueForPoison</a></div><div class="ttdeci">static uint64_t ValueForPoison(uint64_t PoisonByte, size_t ShadowRedzoneSize)</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l01326">AddressSanitizer.cpp:1326</a></div></div>
<div class="ttc" id="classllvm_1_1AllocaInst_html"><div class="ttname"><a href="classllvm_1_1AllocaInst.html">llvm::AllocaInst</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00058">Instructions.h:58</a></div></div>
<div class="ttc" id="AddressSanitizer_8cpp_html_ae9c436463aca1fb27209dfaa6f643727"><div class="ttname"><a href="AddressSanitizer_8cpp.html#ae9c436463aca1fb27209dfaa6f643727">kAsanReportErrorTemplate</a></div><div class="ttdeci">static const char *const kAsanReportErrorTemplate</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00071">AddressSanitizer.cpp:71</a></div></div>
<div class="ttc" id="classllvm_1_1IRBuilder_html_aec1340aa456977785b902da5d5203948"><div class="ttname"><a href="classllvm_1_1IRBuilder.html#aec1340aa456977785b902da5d5203948">llvm::IRBuilder::CreateCall3</a></div><div class="ttdeci">CallInst * CreateCall3(Value *Callee, Value *Arg1, Value *Arg2, Value *Arg3, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l01315">IRBuilder.h:1315</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<p class="footer">
Generated on Sat Nov 10 2018 22:57:59 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.11</a><br>
Copyright &copy; 2003-2013 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
